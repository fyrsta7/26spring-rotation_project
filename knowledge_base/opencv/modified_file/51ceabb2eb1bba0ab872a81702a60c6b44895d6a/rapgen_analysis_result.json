{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/51ceabb2eb1bba0ab872a81702a60c6b44895d6a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/51ceabb2eb1bba0ab872a81702a60c6b44895d6a/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/51ceabb2eb1bba0ab872a81702a60c6b44895d6a/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/51ceabb2eb1bba0ab872a81702a60c6b44895d6a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 311,
          "old_api": "Rect",
          "new_api": "ocl::KernelArg::ReadOnly(img)",
          "old_text": "Rect(0,0,1,1)",
          "new_text": "ocl::KernelArg::ReadOnly(img)",
          "old_line_content": "    UMat ucounter1(kp1, Rect(0,0,1,1));",
          "new_line_content": "    if( !fastKptKernel.args(ocl::KernelArg::ReadOnly(img),",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "Scalar::all(0)",
          "new_api": "ocl::KernelArg::PtrReadWrite(kp1)",
          "old_text": "Scalar::all(0)",
          "new_text": "ocl::KernelArg::PtrReadWrite(kp1)",
          "old_line_content": "    ucounter1.setTo(Scalar::all(0));",
          "new_line_content": "                            ocl::KernelArg::PtrReadWrite(kp1),",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "mcounter.at<int>(0)",
          "new_api": "clear",
          "old_text": "mcounter.at<int>(0)",
          "new_text": "keypoints.clear()",
          "old_line_content": "    int i, counter = mcounter.at<int>(0);",
          "new_line_content": "    keypoints.clear();",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "Rect",
          "new_api": "KeyPoint",
          "old_text": "Rect(0, 0, counter*2+1, 1)",
          "new_text": "KeyPoint((float)pt[i].x, (float)pt[i].y, 7.f, -1, 1.f)",
          "old_line_content": "        kp1(Rect(0, 0, counter*2+1, 1)).copyTo(m);",
          "new_line_content": "            keypoints.push_back(KeyPoint((float)pt[i].x, (float)pt[i].y, 7.f, -1, 1.f));",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "Scalar::all(0)",
          "new_api": "empty",
          "old_text": "Scalar::all(0)",
          "new_text": "fastNMSKernel.empty()",
          "old_line_content": "        ucounter2.setTo(Scalar::all(0));",
          "new_line_content": "        if (fastNMSKernel.empty())",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "m2.ptr<int>()",
          "new_api": "cmp_pt<Point3i>()",
          "old_text": "m2.ptr<int>()",
          "new_text": "cmp_pt<Point3i>()",
          "old_line_content": "        Point3i* pt2 = (Point3i*)(m2.ptr<int>() + 1);",
          "new_line_content": "        std::sort(pt2, pt2 + newcounter, cmp_pt<Point3i>());",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "cmp_pt<Point3i>()",
          "new_api": "KeyPoint",
          "old_text": "cmp_pt<Point3i>()",
          "new_text": "KeyPoint((float)pt2[i].x, (float)pt2[i].y, 7.f, -1, (float)pt2[i].z)",
          "old_line_content": "        std::sort(pt2, pt2 + newcounter, cmp_pt<Point3i>());",
          "new_line_content": "            keypoints.push_back(KeyPoint((float)pt2[i].x, (float)pt2[i].y, 7.f, -1, (float)pt2[i].z));",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "type",
          "new_api": "ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows)",
          "old_text": "imgMat.type()",
          "new_text": "ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows)",
          "old_line_content": "    if(imgMat.empty() || imgMat.type() != CV_8UC1)",
          "new_line_content": "    if (ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows))",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "ovx::getOpenVXContext()",
          "new_api": "ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold)",
          "old_text": "ovx::getOpenVXContext()",
          "new_text": "ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold)",
          "old_line_content": "        Context context = ovx::getOpenVXContext();",
          "new_line_content": "        ivx::Scalar threshold = ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "Image::createAddressing(imgMat)",
          "new_api": "Array::create(context, VX_TYPE_KEYPOINT, capacity)",
          "old_text": "Image::createAddressing(imgMat)",
          "new_text": "Array::create(context, VX_TYPE_KEYPOINT, capacity)",
          "old_line_content": "                                            Image::createAddressing(imgMat), (void*)imgMat.data);",
          "new_line_content": "        Array corners = Array::create(context, VX_TYPE_KEYPOINT, capacity);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "vxuFastCorners",
          "new_api": "reserve",
          "old_text": "vxuFastCorners(context, img, threshold, (vx_bool)nonmaxSuppression, corners, numCorners)",
          "new_text": "keypoints.reserve(nPoints)",
          "old_line_content": "        IVX_CHECK_STATUS(vxuFastCorners(context, img, threshold, (vx_bool)nonmaxSuppression, corners, numCorners));",
          "new_line_content": "        keypoints.clear(); keypoints.reserve(nPoints);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "numCorners.getValue<vx_size>()",
          "new_api": "copyTo",
          "old_text": "numCorners.getValue<vx_size>()",
          "new_text": "corners.copyTo(vxCorners)",
          "old_line_content": "        size_t nPoints = numCorners.getValue<vx_size>();",
          "new_line_content": "        corners.copyTo(vxCorners);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "CV_INSTRUMENT_REGION",
          "new_api": "ocl_FAST",
          "old_text": "CV_INSTRUMENT_REGION()",
          "new_text": "ocl_FAST(_img, keypoints, threshold, nonmax_suppression, 10000)",
          "old_line_content": "    CV_INSTRUMENT_REGION();",
          "new_line_content": "               ocl_FAST(_img, keypoints, threshold, nonmax_suppression, 10000));",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "isUMat",
          "new_api": "getMat",
          "old_text": "_img.isUMat()",
          "new_text": "_img.getMat()",
          "old_line_content": "    CV_OCL_RUN(_img.isUMat() && type == FastFeatureDetector::TYPE_9_16,",
          "new_line_content": "    cv::Mat img = _img.getMat();",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "ocl_FAST",
          "new_api": "CALL_HAL",
          "old_text": "ocl_FAST(_img, keypoints, threshold, nonmax_suppression, 10000)",
          "new_text": "CALL_HAL(fast_dense, hal_FAST, img, keypoints, threshold, nonmax_suppression, type)",
          "old_line_content": "               ocl_FAST(_img, keypoints, threshold, nonmax_suppression, 10000));",
          "new_line_content": "    CALL_HAL(fast_dense, hal_FAST, img, keypoints, threshold, nonmax_suppression, type);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "CALL_HAL",
          "new_api": "data",
          "old_text": "CALL_HAL(fast_dense, hal_FAST, img, keypoints, threshold, nonmax_suppression, type)",
          "new_text": "CALL_HAL(fast, cv_hal_FAST, img.data, img.step, img.cols, img.rows,\n             (uchar*)(keypoints.data()), &keypoints_count, threshold, nonmax_suppression, type)",
          "old_line_content": "    CALL_HAL(fast_dense, hal_FAST, img, keypoints, threshold, nonmax_suppression, type);",
          "new_line_content": "    CALL_HAL(fast, cv_hal_FAST, img.data, img.step, img.cols, img.rows,",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "data",
          "new_api": "CV_OVX_RUN",
          "old_text": "CALL_HAL(fast, cv_hal_FAST, img.data, img.step, img.cols, img.rows,\n             (uchar*)(keypoints.data()), &keypoints_count, threshold, nonmax_suppression, type)",
          "new_text": "CV_OVX_RUN(true,\n               openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type))",
          "old_line_content": "    CALL_HAL(fast, cv_hal_FAST, img.data, img.step, img.cols, img.rows,",
          "new_line_content": "    CV_OVX_RUN(true,",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "data",
          "new_api": "openvx_FAST",
          "old_text": "keypoints.data()",
          "new_text": "openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type)",
          "old_line_content": "             (uchar*)(keypoints.data()), &keypoints_count, threshold, nonmax_suppression, type);",
          "new_line_content": "               openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type))",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "FAST_t<8>(_img, keypoints, threshold, nonmax_suppression)",
          "new_api": "FAST_t<12>(_img, keypoints, threshold, nonmax_suppression)",
          "old_text": "FAST_t<8>(_img, keypoints, threshold, nonmax_suppression)",
          "new_text": "FAST_t<12>(_img, keypoints, threshold, nonmax_suppression)",
          "old_line_content": "        FAST_t<8>(_img, keypoints, threshold, nonmax_suppression);",
          "new_line_content": "        FAST_t<12>(_img, keypoints, threshold, nonmax_suppression);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "tegra::FAST(_img, keypoints, threshold, nonmax_suppression)",
          "new_api": "FAST_t<16>(_img, keypoints, threshold, nonmax_suppression)",
          "old_text": "tegra::FAST(_img, keypoints, threshold, nonmax_suppression)",
          "new_text": "FAST_t<16>(_img, keypoints, threshold, nonmax_suppression)",
          "old_line_content": "        if(tegra::useTegra() && tegra::FAST(_img, keypoints, threshold, nonmax_suppression))",
          "new_line_content": "        FAST_t<16>(_img, keypoints, threshold, nonmax_suppression);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "getMat",
          "new_api": "type",
          "old_text": "_mask.getMat()",
          "new_text": "_image.type()",
          "old_line_content": "        Mat mask = _mask.getMat(), grayImage;",
          "new_line_content": "        if( _image.type() != CV_8U )",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "type",
          "new_api": "cvtColor",
          "old_text": "_image.type()",
          "new_text": "cvtColor( _image, ogray, COLOR_BGR2GRAY )",
          "old_line_content": "        if( _image.type() != CV_8U )",
          "new_line_content": "            cvtColor( _image, ogray, COLOR_BGR2GRAY );",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "cvtColor",
          "new_api": "FAST",
          "old_text": "cvtColor( _image, ogray, COLOR_BGR2GRAY )",
          "new_text": "FAST( gray, keypoints, threshold, nonmaxSuppression, type )",
          "old_line_content": "            cvtColor( _image, ogray, COLOR_BGR2GRAY );",
          "new_line_content": "        FAST( gray, keypoints, threshold, nonmaxSuppression, type );",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 515,
          "old_api": null,
          "new_api": "tegra::FAST(_img, keypoints, threshold, nonmax_suppression)",
          "old_text": null,
          "new_text": "tegra::FAST(_img, keypoints, threshold, nonmax_suppression)",
          "old_line_content": "        break;",
          "new_line_content": "        if(tegra::useTegra() && tegra::FAST(_img, keypoints, threshold, nonmax_suppression))",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "ovx::getOpenVXContext()",
          "old_text": null,
          "new_text": "ovx::getOpenVXContext()",
          "old_line_content": "",
          "new_line_content": "        Context context = ovx::getOpenVXContext();",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "imgMat.type()",
          "old_line_content": "    try",
          "new_line_content": "        Image img = Image::createFromHandle(context, Image::matTypeToFormat(imgMat.type()),",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "Image::createAddressing(imgMat)",
          "old_text": null,
          "new_text": "Image::createAddressing(imgMat)",
          "old_line_content": "    {",
          "new_line_content": "                                            Image::createAddressing(imgMat), (void*)imgMat.data);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "ivx::Scalar::create<VX_TYPE_SIZE>(context, 0)",
          "old_text": null,
          "new_text": "ivx::Scalar::create<VX_TYPE_SIZE>(context, 0)",
          "old_line_content": "        vx_size capacity = imgMat.cols * imgMat.rows;",
          "new_line_content": "        ivx::Scalar numCorners = ivx::Scalar::create<VX_TYPE_SIZE>(context, 0);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "CV_INSTRUMENT_REGION",
          "old_text": null,
          "new_text": "CV_INSTRUMENT_REGION()",
          "old_line_content": "",
          "new_line_content": "    CV_INSTRUMENT_REGION();",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "vxuFastCorners",
          "old_text": null,
          "new_text": "vxuFastCorners(context, img, threshold, (vx_bool)nonmaxSuppression, corners, numCorners)",
          "old_line_content": "",
          "new_line_content": "        IVX_CHECK_STATUS(vxuFastCorners(context, img, threshold, (vx_bool)nonmaxSuppression, corners, numCorners));",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "FAST",
          "old_text": null,
          "new_text": "FAST(_img, keypoints, threshold, nonmax_suppression, FastFeatureDetector::TYPE_9_16)",
          "old_line_content": "{",
          "new_line_content": "    FAST(_img, keypoints, threshold, nonmax_suppression, FastFeatureDetector::TYPE_9_16);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "numCorners.getValue<vx_size>()",
          "old_text": null,
          "new_text": "numCorners.getValue<vx_size>()",
          "old_line_content": "",
          "new_line_content": "        size_t nPoints = numCorners.getValue<vx_size>();",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "type((short)_type)",
          "old_line_content": "{",
          "new_line_content": "    : threshold(_threshold), nonmaxSuppression(_nonmaxSuppression), type((short)_type)",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "KeyPoint",
          "old_text": null,
          "new_text": "KeyPoint((float)j, (float)(i-1), 7.f, -1, (float)score)",
          "old_line_content": "                score > pprev[j-1] && score > pprev[j] && score > pprev[j+1] &&",
          "new_line_content": "                keypoints.push_back(KeyPoint((float)j, (float)(i-1), 7.f, -1, (float)score));",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "KeyPoint",
          "old_text": null,
          "new_text": "KeyPoint((float)kp.x, (float)kp.y, 7.f, -1, kp.strength)",
          "old_line_content": "        {",
          "new_line_content": "            keypoints.push_back(KeyPoint((float)kp.x, (float)kp.y, 7.f, -1, kp.strength));",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "CV_INSTRUMENT_REGION",
          "old_text": null,
          "new_text": "CV_INSTRUMENT_REGION()",
          "old_line_content": "",
          "new_line_content": "        CV_INSTRUMENT_REGION();",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "_image.empty()",
          "old_line_content": "    {",
          "new_line_content": "        if(_image.empty())",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "swapHandle",
          "old_text": null,
          "new_text": "img.swapHandle()",
          "old_line_content": "#ifdef VX_VERSION_1_1",
          "new_line_content": "        img.swapHandle();",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "keypoints.clear()",
          "old_line_content": "",
          "new_line_content": "            keypoints.clear();",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "        VX_DbgThrow(e.what());",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "getMat",
          "old_text": null,
          "new_text": "_mask.getMat()",
          "old_line_content": "            return;",
          "new_line_content": "        Mat mask = _mask.getMat(), grayImage;",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "        VX_DbgThrow(e.what());",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "getUMat",
          "old_text": null,
          "new_text": "_img.getUMat()",
          "old_line_content": "static bool ocl_FAST( InputArray _img, std::vector<KeyPoint>& keypoints,",
          "new_line_content": "    UMat img = _img.getUMat();",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "_OutputArray",
          "old_text": null,
          "new_text": "_OutputArray(grayImage)",
          "old_line_content": "        _InputArray gray = _image;",
          "new_line_content": "            _OutputArray ogray = _image.isUMat() ? _OutputArray(ugrayImage) : _OutputArray(grayImage);",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "KeyPointsFilter::runByPixelsMask( keypoints, mask )",
          "old_text": null,
          "new_text": "KeyPointsFilter::runByPixelsMask( keypoints, mask )",
          "old_line_content": "            gray = ogray;",
          "new_line_content": "        KeyPointsFilter::runByPixelsMask( keypoints, mask );",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "v_load",
          "old_text": null,
          "new_text": "v_load(d + 8)",
          "old_line_content": "                                            d[_k] = (short)(ptr[k] - ptr[k + pixel[_k]]);",
          "new_line_content": "                                        a0 = b0 = a1 = b1 = v_load(d + 8);",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "fastKptKernel.empty()",
          "old_line_content": "    size_t globalsize[] = { (size_t)img.cols-6, (size_t)img.rows-6 };",
          "new_line_content": "    if (fastKptKernel.empty())",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "v_min",
          "old_text": null,
          "new_text": "v_min(a0, v_nms)",
          "old_line_content": "                                        for(int shift = 0; shift < 8; ++shift)",
          "new_line_content": "                                            a0 = v_min(a0, v_nms);",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(value)",
          "old_line_content": "    void set(int prop, double value)",
          "new_line_content": "            threshold = cvRound(value);",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "v_max",
          "old_text": null,
          "new_text": "v_max(b0, v_nms)",
          "old_line_content": "                                        {",
          "new_line_content": "                                            b0 = v_max(b0, v_nms);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "Rect",
          "old_text": null,
          "new_text": "Rect(0,0,1,1)",
          "old_line_content": "",
          "new_line_content": "    UMat ucounter1(kp1, Rect(0,0,1,1));",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "Scalar::all(0)",
          "old_text": null,
          "new_text": "Scalar::all(0)",
          "old_line_content": "    UMat kp1(1, maxKeypoints*2+1, CV_32S);",
          "new_line_content": "    ucounter1.setTo(Scalar::all(0));",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(value)",
          "old_line_content": "        else if(prop == NONMAX_SUPPRESSION)",
          "new_line_content": "            type = cvRound(value);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "src.type()",
          "old_line_content": "    if (threshold > 20)",
          "new_line_content": "    cv::Mat scores(src.size(), src.type());",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "CV_Error",
          "old_text": null,
          "new_text": "CV_Error(Error::StsBadArg, \"\")",
          "old_line_content": "        else if(prop == FAST_N)",
          "new_line_content": "            CV_Error(Error::StsBadArg, \"\");",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "cv_hal_FAST_dense",
          "old_text": null,
          "new_text": "cv_hal_FAST_dense(src.data, src.step, scores.data, scores.step, src.cols, src.rows, type)",
          "old_line_content": "",
          "new_line_content": "    int error = cv_hal_FAST_dense(src.data, src.step, scores.data, scores.step, src.cols, src.rows, type);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "ucounter1.copyTo(mcounter)",
          "old_line_content": "        return false;",
          "new_line_content": "    ucounter1.copyTo(mcounter);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "mcounter.at<int>(0)",
          "old_text": null,
          "new_text": "mcounter.at<int>(0)",
          "old_line_content": "",
          "new_line_content": "    int i, counter = mcounter.at<int>(0);",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "std::min(counter, maxKeypoints)",
          "old_text": null,
          "new_text": "std::min(counter, maxKeypoints)",
          "old_line_content": "    Mat mcounter;",
          "new_line_content": "    counter = std::min(counter, maxKeypoints);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "src.type()",
          "old_line_content": "    if (error != CV_HAL_ERROR_OK)",
          "new_line_content": "    cv::Mat suppressedScores(src.size(), src.type());",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "cv_hal_FAST_NMS",
          "old_text": null,
          "new_text": "cv_hal_FAST_NMS(scores.data, scores.step, suppressedScores.data, suppressedScores.step, scores.cols, scores.rows)",
          "old_line_content": "",
          "new_line_content": "        error = cv_hal_FAST_NMS(scores.data, scores.step, suppressedScores.data, suppressedScores.step, scores.cols, scores.rows);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "CV_Error",
          "old_text": null,
          "new_text": "CV_Error(Error::StsBadArg, \"\")",
          "old_line_content": "            return nonmaxSuppression;",
          "new_line_content": "        CV_Error(Error::StsBadArg, \"\");",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "Rect",
          "old_text": null,
          "new_text": "Rect(0, 0, counter*2+1, 1)",
          "old_line_content": "    if( !nonmax_suppression )",
          "new_line_content": "        kp1(Rect(0, 0, counter*2+1, 1)).copyTo(m);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "m.ptr<int>()",
          "old_text": null,
          "new_text": "m.ptr<int>()",
          "old_line_content": "    {",
          "new_line_content": "        const Point* pt = (const Point*)(m.ptr<int>() + 1);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "Rect",
          "old_text": null,
          "new_text": "Rect(0,0,1,1)",
          "old_line_content": "    else",
          "new_line_content": "        UMat ucounter2 = kp2(Rect(0,0,1,1));",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "Scalar::all(0)",
          "old_text": null,
          "new_text": "Scalar::all(0)",
          "old_line_content": "    {",
          "new_line_content": "        ucounter2.setTo(Scalar::all(0));",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "keypoints.clear()",
          "old_line_content": "    int stride = (int)suppressedScores.step;",
          "new_line_content": "    keypoints.clear();",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "ocl::KernelArg::PtrReadOnly(kp1)",
          "old_text": null,
          "new_text": "ocl::KernelArg::PtrReadOnly(kp1)",
          "old_line_content": "            return false;",
          "new_line_content": "        if( !fastNMSKernel.args(ocl::KernelArg::PtrReadOnly(kp1),",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type)",
          "old_text": null,
          "new_text": "makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type)",
          "old_line_content": "",
          "new_line_content": "    return makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type);",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "ocl::KernelArg::PtrReadWrite(kp2)",
          "old_text": null,
          "new_text": "ocl::KernelArg::PtrReadWrite(kp2)",
          "old_line_content": "",
          "new_line_content": "                                ocl::KernelArg::PtrReadWrite(kp2),",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "ocl::KernelArg::ReadOnly(img)",
          "old_text": null,
          "new_text": "ocl::KernelArg::ReadOnly(img)",
          "old_line_content": "        size_t globalsize_nms[] = { (size_t)counter };",
          "new_line_content": "                                ocl::KernelArg::ReadOnly(img),",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "Feature2D::getDefaultName()",
          "old_text": null,
          "new_text": "Feature2D::getDefaultName()",
          "old_line_content": "",
          "new_line_content": "    return (Feature2D::getDefaultName() + \".FastFeatureDetector\");",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "Rect",
          "old_text": null,
          "new_text": "Rect(0, 0, counter*3+1, 1)",
          "old_line_content": "            return false;",
          "new_line_content": "        kp2(Rect(0, 0, counter*3+1, 1)).copyTo(m2);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "m2.ptr<int>()",
          "old_text": null,
          "new_text": "m2.ptr<int>()",
          "old_line_content": "",
          "new_line_content": "        Point3i* pt2 = (Point3i*)(m2.ptr<int>() + 1);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "m2.at<int>(0)",
          "old_text": null,
          "new_text": "m2.at<int>(0)",
          "old_line_content": "        Mat m2;",
          "new_line_content": "        int newcounter = std::min(m2.at<int>(0), counter);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "keypoints.push_back(kpt)",
          "old_line_content": "            {",
          "new_line_content": "                keypoints.push_back(kpt);",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "old_text": null,
          "new_text": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "old_line_content": "                            {",
          "new_line_content": "                                    curr[j] = (uchar)cornerScore<patternSize>(ptr, pixel, threshold);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "CV_INSTRUMENT_REGION",
          "old_text": null,
          "new_text": "CV_INSTRUMENT_REGION()",
          "old_line_content": "",
          "new_line_content": "    CV_INSTRUMENT_REGION();",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "isUMat",
          "old_text": null,
          "new_text": "_img.isUMat()",
          "old_line_content": "{",
          "new_line_content": "    CV_OCL_RUN(_img.isUMat() && type == FastFeatureDetector::TYPE_9_16,",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "keypoints.data()",
          "old_line_content": "",
          "new_line_content": "             (uchar*)(keypoints.data()), &keypoints_count, threshold, nonmax_suppression, type);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "old_text": null,
          "new_text": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "old_line_content": "                            {",
          "new_line_content": "                                    curr[j] = (uchar)cornerScore<patternSize>(ptr, pixel, threshold);",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": null,
          "new_api": "FAST_t<8>(_img, keypoints, threshold, nonmax_suppression)",
          "old_text": null,
          "new_text": "FAST_t<8>(_img, keypoints, threshold, nonmax_suppression)",
          "old_line_content": "",
          "new_line_content": "        FAST_t<8>(_img, keypoints, threshold, nonmax_suppression);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "getMat",
          "old_text": null,
          "new_text": "_img.getMat()",
          "old_line_content": "    if(nonmaxSuppression || type != FastFeatureDetector::TYPE_9_16)",
          "new_line_content": "    Mat imgMat = _img.getMat();",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "imgMat.type()",
          "old_line_content": "        return false;",
          "new_line_content": "    if(imgMat.empty() || imgMat.type() != CV_8UC1)",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "getMat",
          "new_api": null,
          "old_text": "_img.getMat()",
          "new_text": null,
          "old_line_content": "    Mat imgMat = _img.getMat();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "FAST_t<12>(_img, keypoints, threshold, nonmax_suppression)",
          "new_api": null,
          "old_text": "FAST_t<12>(_img, keypoints, threshold, nonmax_suppression)",
          "new_text": null,
          "old_line_content": "        FAST_t<12>(_img, keypoints, threshold, nonmax_suppression);",
          "new_line_content": "#ifdef HAVE_TEGRA_OPTIMIZATION",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows)",
          "new_api": null,
          "old_text": "ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows)",
          "new_text": null,
          "old_line_content": "    if (ovx::skipSmallImages<VX_KERNEL_FAST_CORNERS>(imgMat.cols, imgMat.rows))",
          "new_line_content": "    try",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "FAST_t<16>(_img, keypoints, threshold, nonmax_suppression)",
          "new_api": null,
          "old_text": "FAST_t<16>(_img, keypoints, threshold, nonmax_suppression)",
          "new_text": null,
          "old_line_content": "        FAST_t<16>(_img, keypoints, threshold, nonmax_suppression);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "type",
          "new_api": null,
          "old_text": "imgMat.type()",
          "new_text": null,
          "old_line_content": "        Image img = Image::createFromHandle(context, Image::matTypeToFormat(imgMat.type()),",
          "new_line_content": "        vx_size capacity = imgMat.cols * imgMat.rows;",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold)",
          "new_api": null,
          "old_text": "ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold)",
          "new_text": null,
          "old_line_content": "        ivx::Scalar threshold = ivx::Scalar::create<VX_TYPE_FLOAT32>(context, _threshold);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "Array::create(context, VX_TYPE_KEYPOINT, capacity)",
          "new_api": null,
          "old_text": "Array::create(context, VX_TYPE_KEYPOINT, capacity)",
          "new_text": null,
          "old_line_content": "        Array corners = Array::create(context, VX_TYPE_KEYPOINT, capacity);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "ivx::Scalar::create<VX_TYPE_SIZE>(context, 0)",
          "new_api": null,
          "old_text": "ivx::Scalar::create<VX_TYPE_SIZE>(context, 0)",
          "new_text": null,
          "old_line_content": "        ivx::Scalar numCorners = ivx::Scalar::create<VX_TYPE_SIZE>(context, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "CV_INSTRUMENT_REGION",
          "new_api": null,
          "old_text": "CV_INSTRUMENT_REGION()",
          "new_text": null,
          "old_line_content": "    CV_INSTRUMENT_REGION();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "FAST",
          "new_api": null,
          "old_text": "FAST(_img, keypoints, threshold, nonmax_suppression, FastFeatureDetector::TYPE_9_16)",
          "new_text": null,
          "old_line_content": "    FAST(_img, keypoints, threshold, nonmax_suppression, FastFeatureDetector::TYPE_9_16);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "keypoints.reserve(nPoints)",
          "new_text": null,
          "old_line_content": "        keypoints.clear(); keypoints.reserve(nPoints);",
          "new_line_content": "        for(size_t i = 0; i < nPoints; i++)",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "corners.copyTo(vxCorners)",
          "new_text": null,
          "old_line_content": "        corners.copyTo(vxCorners);",
          "new_line_content": "            vx_keypoint_t kp = vxCorners[i];",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "type",
          "new_api": null,
          "old_text": "type((short)_type)",
          "new_text": null,
          "old_line_content": "    : threshold(_threshold), nonmaxSuppression(_nonmaxSuppression), type((short)_type)",
          "new_line_content": "    void detect( InputArray _image, std::vector<KeyPoint>& keypoints, InputArray _mask ) CV_OVERRIDE",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "KeyPoint",
          "new_api": null,
          "old_text": "KeyPoint((float)j, (float)(i-1), 7.f, -1, (float)score)",
          "new_text": null,
          "old_line_content": "                keypoints.push_back(KeyPoint((float)j, (float)(i-1), 7.f, -1, (float)score));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "KeyPoint",
          "new_api": null,
          "old_text": "KeyPoint((float)kp.x, (float)kp.y, 7.f, -1, kp.strength)",
          "new_text": null,
          "old_line_content": "            keypoints.push_back(KeyPoint((float)kp.x, (float)kp.y, 7.f, -1, kp.strength));",
          "new_line_content": "#ifdef VX_VERSION_1_1",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "CV_INSTRUMENT_REGION",
          "new_api": null,
          "old_text": "CV_INSTRUMENT_REGION()",
          "new_text": null,
          "old_line_content": "        CV_INSTRUMENT_REGION();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "empty",
          "new_api": null,
          "old_text": "_image.empty()",
          "new_text": null,
          "old_line_content": "        if(_image.empty())",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "swapHandle",
          "new_api": null,
          "old_text": "img.swapHandle()",
          "new_text": null,
          "old_line_content": "        img.swapHandle();",
          "new_line_content": "    catch (const RuntimeError & e)",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "clear",
          "new_api": null,
          "old_text": "keypoints.clear()",
          "new_text": null,
          "old_line_content": "            keypoints.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "v_store",
          "new_api": null,
          "old_text": "v_store(mflag, max0)",
          "new_text": null,
          "old_line_content": "                            v_store(mflag, max0);",
          "new_line_content": "                            for( k = 0; m > 0 && k < 16; k++, m >>= 1 )",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "        VX_DbgThrow(e.what());",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "        VX_DbgThrow(e.what());",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "getUMat",
          "new_api": null,
          "old_text": "_img.getUMat()",
          "new_text": null,
          "old_line_content": "    UMat img = _img.getUMat();",
          "new_line_content": "    size_t globalsize[] = { (size_t)img.cols-6, (size_t)img.rows-6 };",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "_OutputArray",
          "new_api": null,
          "old_text": "_OutputArray(grayImage)",
          "new_text": null,
          "old_line_content": "            _OutputArray ogray = _image.isUMat() ? _OutputArray(ugrayImage) : _OutputArray(grayImage);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "FAST",
          "new_api": null,
          "old_text": "FAST( gray, keypoints, threshold, nonmaxSuppression, type )",
          "new_text": null,
          "old_line_content": "        FAST( gray, keypoints, threshold, nonmaxSuppression, type );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "KeyPointsFilter::runByPixelsMask( keypoints, mask )",
          "new_api": null,
          "old_text": "KeyPointsFilter::runByPixelsMask( keypoints, mask )",
          "new_text": null,
          "old_line_content": "        KeyPointsFilter::runByPixelsMask( keypoints, mask );",
          "new_line_content": "    void set(int prop, double value)",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "empty",
          "new_api": null,
          "old_text": "fastKptKernel.empty()",
          "new_text": null,
          "old_line_content": "    if (fastKptKernel.empty())",
          "new_line_content": "    UMat kp1(1, maxKeypoints*2+1, CV_32S);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(value)",
          "new_text": null,
          "old_line_content": "            threshold = cvRound(value);",
          "new_line_content": "        else if(prop == FAST_N)",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "v_load",
          "new_api": null,
          "old_text": "v_load(d + 9 + shift)",
          "new_text": null,
          "old_line_content": "                                            v_nms = v_load(d + 9 + shift);",
          "new_line_content": "                                        }",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "ocl::KernelArg::ReadOnly(img)",
          "new_api": null,
          "old_text": "ocl::KernelArg::ReadOnly(img)",
          "new_text": null,
          "old_line_content": "    if( !fastKptKernel.args(ocl::KernelArg::ReadOnly(img),",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "v_max",
          "new_api": null,
          "old_text": "v_max(b1, v_nms)",
          "new_text": null,
          "old_line_content": "                                            b1 = v_max(b1, v_nms);",
          "new_line_content": "                                    }",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(value)",
          "new_text": null,
          "old_line_content": "            type = cvRound(value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": "v_min",
          "new_api": null,
          "old_text": "v_min(b0, b1)",
          "new_text": null,
          "old_line_content": "                                        curr[j + k] = (uchar)(v_reduce_max(v_max(v_max(a0, a1), v_setzero_s16() - v_min(b0, b1))) - 1);",
          "new_line_content": "                            }",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "CV_Error",
          "new_api": null,
          "old_text": "CV_Error(Error::StsBadArg, \"\")",
          "new_text": null,
          "old_line_content": "            CV_Error(Error::StsBadArg, \"\");",
          "new_line_content": "    double get(int prop) const",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "ocl::KernelArg::PtrReadWrite(kp1)",
          "new_api": null,
          "old_text": "ocl::KernelArg::PtrReadWrite(kp1)",
          "new_text": null,
          "old_line_content": "                            ocl::KernelArg::PtrReadWrite(kp1),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "ucounter1.copyTo(mcounter)",
          "new_text": null,
          "old_line_content": "    ucounter1.copyTo(mcounter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "type",
          "new_api": null,
          "old_text": "src.type()",
          "new_text": null,
          "old_line_content": "    cv::Mat scores(src.size(), src.type());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "std::min(counter, maxKeypoints)",
          "new_api": null,
          "old_text": "std::min(counter, maxKeypoints)",
          "new_text": null,
          "old_line_content": "    counter = std::min(counter, maxKeypoints);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "cv_hal_FAST_dense",
          "new_api": null,
          "old_text": "cv_hal_FAST_dense(src.data, src.step, scores.data, scores.step, src.cols, src.rows, type)",
          "new_text": null,
          "old_line_content": "    int error = cv_hal_FAST_dense(src.data, src.step, scores.data, scores.step, src.cols, src.rows, type);",
          "new_line_content": "        return error;",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "clear",
          "new_api": null,
          "old_text": "keypoints.clear()",
          "new_text": null,
          "old_line_content": "    keypoints.clear();",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "type",
          "new_api": null,
          "old_text": "src.type()",
          "new_text": null,
          "old_line_content": "    cv::Mat suppressedScores(src.size(), src.type());",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "cv_hal_FAST_NMS",
          "new_api": null,
          "old_text": "cv_hal_FAST_NMS(scores.data, scores.step, suppressedScores.data, suppressedScores.step, scores.cols, scores.rows)",
          "new_text": null,
          "old_line_content": "        error = cv_hal_FAST_NMS(scores.data, scores.step, suppressedScores.data, suppressedScores.step, scores.cols, scores.rows);",
          "new_line_content": "            return error;",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "CV_Error",
          "new_api": null,
          "old_text": "CV_Error(Error::StsBadArg, \"\")",
          "new_text": null,
          "old_line_content": "        CV_Error(Error::StsBadArg, \"\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "m.ptr<int>()",
          "new_api": null,
          "old_text": "m.ptr<int>()",
          "new_text": null,
          "old_line_content": "        const Point* pt = (const Point*)(m.ptr<int>() + 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "KeyPoint",
          "new_api": null,
          "old_text": "KeyPoint((float)pt[i].x, (float)pt[i].y, 7.f, -1, 1.f)",
          "new_text": null,
          "old_line_content": "            keypoints.push_back(KeyPoint((float)pt[i].x, (float)pt[i].y, 7.f, -1, 1.f));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "Rect",
          "new_api": null,
          "old_text": "Rect(0,0,1,1)",
          "new_text": null,
          "old_line_content": "        UMat ucounter2 = kp2(Rect(0,0,1,1));",
          "new_line_content": "        ocl::Kernel fastNMSKernel(\"FAST_nonmaxSupression\", ocl::features2d::fast_oclsrc);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "empty",
          "new_api": null,
          "old_text": "fastNMSKernel.empty()",
          "new_text": null,
          "old_line_content": "        if (fastNMSKernel.empty())",
          "new_line_content": "        size_t globalsize_nms[] = { (size_t)counter };",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "clear",
          "new_api": null,
          "old_text": "keypoints.clear()",
          "new_text": null,
          "old_line_content": "    keypoints.clear();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "ocl::KernelArg::PtrReadOnly(kp1)",
          "new_api": null,
          "old_text": "ocl::KernelArg::PtrReadOnly(kp1)",
          "new_text": null,
          "old_line_content": "        if( !fastNMSKernel.args(ocl::KernelArg::PtrReadOnly(kp1),",
          "new_line_content": "                                counter, counter).run(1, globalsize_nms, 0, true))",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type)",
          "new_api": null,
          "old_text": "makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type)",
          "new_text": null,
          "old_line_content": "    return makePtr<FastFeatureDetector_Impl>(threshold, nonmaxSuppression, type);",
          "new_line_content": "String FastFeatureDetector::getDefaultName() const",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "ocl::KernelArg::PtrReadWrite(kp2)",
          "new_api": null,
          "old_text": "ocl::KernelArg::PtrReadWrite(kp2)",
          "new_text": null,
          "old_line_content": "                                ocl::KernelArg::PtrReadWrite(kp2),",
          "new_line_content": "            return false;",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "ocl::KernelArg::ReadOnly(img)",
          "new_api": null,
          "old_text": "ocl::KernelArg::ReadOnly(img)",
          "new_text": null,
          "old_line_content": "                                ocl::KernelArg::ReadOnly(img),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "Feature2D::getDefaultName()",
          "new_api": null,
          "old_text": "Feature2D::getDefaultName()",
          "new_text": null,
          "old_line_content": "    return (Feature2D::getDefaultName() + \".FastFeatureDetector\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "Rect",
          "new_api": null,
          "old_text": "Rect(0, 0, counter*3+1, 1)",
          "new_text": null,
          "old_line_content": "        kp2(Rect(0, 0, counter*3+1, 1)).copyTo(m2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "keypoints.push_back(kpt)",
          "new_text": null,
          "old_line_content": "                keypoints.push_back(kpt);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "m2.at<int>(0)",
          "new_api": null,
          "old_text": "m2.at<int>(0)",
          "new_text": null,
          "old_line_content": "        int newcounter = std::min(m2.at<int>(0), counter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "new_api": null,
          "old_text": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "new_text": null,
          "old_line_content": "                                    curr[j] = (uchar)cornerScore<patternSize>(ptr, pixel, threshold);",
          "new_line_content": "                        }",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "KeyPoint",
          "new_api": null,
          "old_text": "KeyPoint((float)pt2[i].x, (float)pt2[i].y, 7.f, -1, (float)pt2[i].z)",
          "new_text": null,
          "old_line_content": "            keypoints.push_back(KeyPoint((float)pt2[i].x, (float)pt2[i].y, 7.f, -1, (float)pt2[i].z));",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "getMat",
          "new_api": null,
          "old_text": "_img.getMat()",
          "new_text": null,
          "old_line_content": "    cv::Mat img = _img.getMat();",
          "new_line_content": "    size_t keypoints_count;",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "CV_OVX_RUN",
          "new_api": null,
          "old_text": "CV_OVX_RUN(true,\n               openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type))",
          "new_text": null,
          "old_line_content": "    CV_OVX_RUN(true,",
          "new_line_content": "    switch(type) {",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "openvx_FAST",
          "new_api": null,
          "old_text": "openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type)",
          "new_text": null,
          "old_line_content": "               openvx_FAST(_img, keypoints, threshold, nonmax_suppression, type))",
          "new_line_content": "    case FastFeatureDetector::TYPE_5_8:",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "new_api": null,
          "old_text": "cornerScore<patternSize>(ptr, pixel, threshold)",
          "new_text": null,
          "old_line_content": "                                    curr[j] = (uchar)cornerScore<patternSize>(ptr, pixel, threshold);",
          "new_line_content": "                        }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 23,
      "total_additions": 61,
      "total_deletions": 62,
      "total_api_changes": 146
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 146,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          162,
          163,
          166,
          168,
          170
        ]
      }
    },
    "api_calls_before": 176,
    "api_calls_after": 175,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 6,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/ff9aeaceb0a8abede5fc5189f2551712037db9ef",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/ff9aeaceb0a8abede5fc5189f2551712037db9ef/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/ff9aeaceb0a8abede5fc5189f2551712037db9ef/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/opencv/modified_file/ff9aeaceb0a8abede5fc5189f2551712037db9ef/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 616,
          "old_api": "DPRINTF",
          "new_api": "Point",
          "old_text": "DPRINTF(\"Quad count: %d/%d\", detector.all_quads_count, (pattern_size.width/2+1)*(pattern_size.height/2+1))",
          "new_text": "Point(-1, -1)",
          "old_line_content": "                DPRINTF(\"Quad count: %d/%d\", detector.all_quads_count, (pattern_size.width/2+1)*(pattern_size.height/2+1));",
          "new_line_content": "                        dilate( thresh_img, thresh_img, Mat(), Point(-1, -1), 1 );",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "processQuads",
          "new_api": "SHOW",
          "old_text": "detector.processQuads(out_corners, prev_sqr_size)",
          "new_text": "SHOW(\"Old binarization\", thresh_img)",
          "old_line_content": "                if (detector.processQuads(out_corners, prev_sqr_size))",
          "new_line_content": "                SHOW(\"Old binarization\", thresh_img);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "DPRINTF",
          "new_api": "orderQuad",
          "old_text": "DPRINTF(\"HIST[%d] = %d\", i, col_hist[i])",
          "new_text": "orderQuad(*neighbor, *(q->corners[i]), (i+2)&3)",
          "old_line_content": "        DPRINTF(\"HIST[%d] = %d\", i, col_hist[i]);",
          "new_line_content": "                orderQuad(*neighbor, *(q->corners[i]), (i+2)&3); // set in order",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "trimCol",
          "new_api": "DPRINTF",
          "old_text": "trimCol(quads, col_min, -1)",
          "new_text": "DPRINTF(\"Too few inner quad rows/cols\")",
          "old_line_content": "            trimCol(quads, col_min, -1);",
          "new_line_content": "        DPRINTF(\"Too few inner quad rows/cols\");",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "trimRow",
          "new_api": "trimCol",
          "old_text": "trimRow(quads, row_min, -1)",
          "new_text": "trimCol(quads, col_max, +1)",
          "old_line_content": "            trimRow(quads, row_min, -1);",
          "new_line_content": "            trimCol(quads, col_max, +1);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "size",
          "new_api": "removeQuadFromGroup",
          "old_text": "quads_.size()",
          "new_text": "removeQuadFromGroup(quads, *q.neighbors[3])",
          "old_line_content": "    for (size_t i = 0; i < quads_.size(); ++i)",
          "new_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[3]);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "CV_DbgAssert",
          "new_api": "push",
          "old_text": "CV_DbgAssert(q)",
          "new_text": "stack.push(q)",
          "old_line_content": "                CV_DbgAssert(q);",
          "new_line_content": "        stack.push(q);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "push_back",
          "new_api": "empty",
          "old_text": "out_group.push_back(neighbor)",
          "new_text": "stack.empty()",
          "old_line_content": "                    out_group.push_back(neighbor);",
          "new_line_content": "        while (!stack.empty())",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "area",
          "new_api": "std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j])",
          "old_text": "pattern_size.area()",
          "new_text": "std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j])",
          "old_line_content": "        corner_count = std::min(corner_count, pattern_size.area());",
          "new_line_content": "                        std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j]);",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE)",
          "new_api": "deallocate",
          "old_text": "cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE)",
          "new_text": "all_quads.deallocate()",
          "old_line_content": "    cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE);",
          "new_line_content": "    all_quads.deallocate();",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "size",
          "new_api": "empty",
          "old_text": "contours.size()",
          "new_text": "contours.empty()",
          "old_line_content": "    for (int idx = (int)(contours.size() - 1); idx >= 0; --idx)",
          "new_line_content": "    if (contours.empty())",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "cv::contourArea(approx_contour, false)",
          "new_api": "cv::isContourConvex(approx_contour)",
          "old_text": "cv::contourArea(approx_contour, false)",
          "new_text": "cv::isContourConvex(approx_contour)",
          "old_line_content": "            double area = cv::contourArea(approx_contour, false);",
          "new_line_content": "        if (!cv::isContourConvex(approx_contour))",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": "emplace_back",
          "new_api": "normL2Sqr<double>(pt[0] - pt[1])",
          "old_text": "contour_quads.emplace_back(pt, parentIdx)",
          "new_text": "normL2Sqr<double>(pt[0] - pt[1])",
          "old_line_content": "        contour_quads.emplace_back(pt, parentIdx);",
          "new_line_content": "            double d3 = sqrt(normL2Sqr<double>(pt[0] - pt[1]));",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "sqrt",
          "new_api": "ChessBoardCorner",
          "old_text": "sqrt(q.edge_len)",
          "new_text": "ChessBoardCorner(pt)",
          "old_line_content": "        q.edge_len += 2 * sqrt(q.edge_len) * edge_len_compensation + edge_len_compensation * edge_len_compensation;",
          "new_line_content": "            corner = ChessBoardCorner(pt);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "CV_LOG_VERBOSE",
          "new_api": "normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt)",
          "old_text": "CV_LOG_VERBOSE(NULL, 3, \"max_quad_buf_size=\" << max_quad_buf_size)",
          "new_text": "normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt)",
          "old_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"max_quad_buf_size=\" << max_quad_buf_size);",
          "new_line_content": "            float d = normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "CV_LOG_VERBOSE",
          "new_api": "std::min(q.edge_len, d)",
          "old_text": "CV_LOG_VERBOSE(NULL, 3, \"filtered quad_count=\" << quad_count)",
          "new_text": "std::min(q.edge_len, d)",
          "old_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"filtered quad_count=\" << quad_count);",
          "new_line_content": "            q.edge_len = std::min(q.edge_len, d);",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": "size",
          "new_api": "CV_LOG_VERBOSE",
          "old_text": "all_quads.size()",
          "new_text": "CV_LOG_VERBOSE(NULL, 3, \"Total quad contours: \" << total)",
          "old_line_content": "    size_t max_quad_buf_size = all_quads.size();",
          "new_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"Total quad contours: \" << total);",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "reserve",
          "new_api": "resize",
          "old_text": "corner_group.reserve(max_quad_buf_size * 4)",
          "new_text": "out_corners.resize(0)",
          "old_line_content": "    std::vector<ChessBoardCorner*> corner_group; corner_group.reserve(max_quad_buf_size * 4);",
          "new_line_content": "    out_corners.resize(0);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "findConnectedQuads",
          "new_api": "size",
          "old_text": "findConnectedQuads(quad_group, group_idx)",
          "new_text": "all_quads.size()",
          "old_line_content": "        findConnectedQuads(quad_group, group_idx);",
          "new_line_content": "    size_t max_quad_buf_size = all_quads.size();",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "checkQuadGroup",
          "new_api": "orderFoundConnectedQuads",
          "old_text": "checkQuadGroup(quad_group, corner_group)",
          "new_text": "orderFoundConnectedQuads(quad_group)",
          "old_line_content": "        count = checkQuadGroup(quad_group, corner_group);",
          "new_line_content": "        count = orderFoundConnectedQuads(quad_group);",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "sumDist",
          "new_api": "checkQuadGroup",
          "old_text": "corner_group[i]->sumDist(ni)",
          "new_text": "checkQuadGroup(quad_group, corner_group)",
          "old_line_content": "            float sum = corner_group[i]->sumDist(ni);",
          "new_line_content": "        count = checkQuadGroup(quad_group, corner_group);",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "std::max(total, 1)",
          "new_api": "std::min(n, pattern_size.width * pattern_size.height)",
          "old_text": "std::max(total, 1)",
          "new_text": "std::min(n, pattern_size.width * pattern_size.height)",
          "old_line_content": "        prev_sqr_size = cvRound(sum_dist/std::max(total, 1));",
          "new_line_content": "        n = std::min(n, pattern_size.width * pattern_size.height);",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "checkBoardMonotony",
          "new_api": "std::max(total, 1)",
          "old_text": "checkBoardMonotony(out_corners)",
          "new_text": "std::max(total, 1)",
          "old_line_content": "                    && checkBoardMonotony(out_corners))",
          "new_line_content": "        prev_sqr_size = cvRound(sum_dist/std::max(total, 1));",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "empty",
          "new_api": "CV_INSTRUMENT_REGION",
          "old_text": "_corners.empty()",
          "new_text": "CV_INSTRUMENT_REGION()",
          "old_line_content": "    if (_corners.empty())",
          "new_line_content": "    CV_INSTRUMENT_REGION();",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": "getMat",
          "new_api": "type",
          "old_text": "_corners.getMat()",
          "new_text": "image.type()",
          "old_line_content": "    Mat corners = _corners.getMat();",
          "new_line_content": "    int type = image.type();",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "corners.ptr<Point2f>(0)",
          "new_api": "CV_MAT_CN",
          "old_text": "corners.ptr<Point2f>(0)",
          "new_text": "CV_MAT_CN(type)",
          "old_line_content": "    const Point2f* corners_data = corners.ptr<Point2f>(0);",
          "new_line_content": "    int cn = CV_MAT_CN(type);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "CV_DbgAssert",
          "new_api": "CV_CheckType",
          "old_text": "CV_DbgAssert(corners_data)",
          "new_text": "CV_CheckType(type, cn == 1 || cn == 3 || cn == 4,\n            \"Number of channels must be 1, 3 or 4\" )",
          "old_line_content": "    CV_DbgAssert(corners_data);",
          "new_line_content": "    CV_CheckType(type, cn == 1 || cn == 3 || cn == 4,",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": "circle",
          "new_api": "Scalar::all(200)",
          "old_text": "circle(image, pt, r+(1<<shift), color, 1, line_type, shift)",
          "new_text": "Scalar::all(200)",
          "old_line_content": "            circle(image, pt, r+(1<<shift), color, 1, line_type, shift);",
          "new_line_content": "            color = Scalar::all(200);",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "line",
          "new_api": "Scalar::all(200)",
          "old_text": "line(image, prev_pt, pt, color, 1, line_type, shift)",
          "new_text": "Scalar::all(200)",
          "old_line_content": "                    line(image, prev_pt, pt, color, 1, line_type, shift);",
          "new_line_content": "                color = Scalar::all(200);",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "CV_INSTRUMENT_REGION",
          "new_api": "circle",
          "old_text": "CV_INSTRUMENT_REGION()",
          "new_text": "circle(image, pt, r+(1<<shift), color, 1, line_type, shift)",
          "old_line_content": "    CV_INSTRUMENT_REGION();",
          "new_line_content": "                circle(image, pt, r+(1<<shift), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "push_back",
          "new_api": "CV_Assert",
          "old_text": "points.push_back(keypoints[i].pt)",
          "new_text": "CV_Assert(isAsymmetricGrid ^ isSymmetricGrid)",
          "old_line_content": "            points.push_back(keypoints[i].pt);",
          "new_line_content": "    CV_Assert(isAsymmetricGrid ^ isSymmetricGrid);",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "findGrid",
          "new_api": "copyTo",
          "old_text": "circlesGridClusterFinder.findGrid(points, patternSize, centers)",
          "new_text": "_image.copyTo(points)",
          "old_line_content": "      circlesGridClusterFinder.findGrid(points, patternSize, centers);",
          "new_line_content": "        _image.copyTo(points);",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "clear",
          "new_api": "findGrid",
          "old_text": "centers.clear()",
          "new_text": "circlesGridClusterFinder.findGrid(points, patternSize, centers)",
          "old_line_content": "        centers.clear();",
          "new_line_content": "      circlesGridClusterFinder.findGrid(points, patternSize, centers);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2058,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(corners_data[i].x*(1 << shift))",
          "old_line_content": "            }",
          "new_line_content": "                        cvRound(corners_data[i].x*(1 << shift)),",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(corners_data[i].y*(1 << shift))",
          "old_line_content": "        }",
          "new_line_content": "                        cvRound(corners_data[i].y*(1 << shift))",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "out_corners.size()",
          "old_line_content": "                out_corners[i*width + j] = tmp[j*height + i];",
          "new_line_content": "    if ((int)out_corners.size() != corner_count)",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": null,
          "new_api": "line",
          "old_text": null,
          "new_text": "line(image, prev_pt, pt, color, 1, line_type, shift)",
          "old_line_content": "bool findCirclesGrid( InputArray _image, Size patternSize,",
          "new_line_content": "                    line(image, prev_pt, pt, color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point( pt.x + r, pt.y + r)",
          "old_line_content": "                          const CirclesGridFinderParameters& parameters_)",
          "new_line_content": "                line(image, Point(pt.x - r, pt.y - r), Point( pt.x + r, pt.y + r), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point( pt.x + r, pt.y - r)",
          "old_line_content": "{",
          "new_line_content": "                line(image, Point(pt.x - r, pt.y + r), Point( pt.x + r, pt.y - r), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "std::swap(width, height)",
          "old_text": null,
          "new_text": "std::swap(width, height)",
          "old_line_content": "                    p1 = out_corners[pattern_size.width-1]->pt,",
          "new_line_content": "        std::swap(width, height);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads_.size()",
          "old_line_content": "                if (q.neighbors[1])",
          "new_line_content": "    for (size_t i = 0; i < quads_.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, col, q.col)",
          "old_line_content": "                {",
          "new_line_content": "            DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, col, q.col);",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "CV_INSTRUMENT_REGION",
          "old_text": null,
          "new_text": "CV_INSTRUMENT_REGION()",
          "old_line_content": "    if (blobDetector)",
          "new_line_content": "    CV_INSTRUMENT_REGION();",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": null,
          "new_api": "std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1])",
          "old_text": null,
          "new_text": "std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1])",
          "old_line_content": "    result = corner_count;",
          "new_line_content": "                        std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1]);",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": null,
          "new_api": "detect",
          "old_text": null,
          "new_text": "blobDetector->detect(_image, keypoints)",
          "old_line_content": "",
          "new_line_content": "        blobDetector->detect(_image, keypoints);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "removeQuadFromGroup",
          "old_text": null,
          "new_text": "removeQuadFromGroup(quads, *q.neighbors[0])",
          "old_line_content": "void ChessBoardDetector::trimRow(std::vector<ChessBoardQuad*>& quads, int row, int dir)",
          "new_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[0]);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "keypoints.size()",
          "old_line_content": "    if(flags & CALIB_CB_ASYMMETRIC_GRID)",
          "new_line_content": "        for (size_t i = 0; i < keypoints.size(); i++)",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "points.push_back(keypoints[i].pt)",
          "old_line_content": "    if(flags & CALIB_CB_SYMMETRIC_GRID)",
          "new_line_content": "            points.push_back(keypoints[i].pt);",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "_image.type()",
          "old_line_content": "      CirclesGridClusterFinder circlesGridClusterFinder(parameters);",
          "new_line_content": "        CV_CheckTypeEQ(_image.type(), CV_32FC2, \"blobDetector must be provided or image must contains Point2f array (std::vector<Point2f>) with candidates\");",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "area",
          "old_text": null,
          "new_text": "pattern_size.area()",
          "old_line_content": "    return result;",
          "new_line_content": "        corner_count = std::min(corner_count, pattern_size.area());",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "out_corners.resize(corner_count)",
          "old_line_content": "}",
          "new_line_content": "        out_corners.resize(corner_count);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads_.size()",
          "old_line_content": "                if (q.neighbors[2])",
          "new_line_content": "    for (size_t i = 0; i < quads_.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "area",
          "old_text": null,
          "new_text": "pattern_size.area()",
          "old_line_content": "    const float thresh_scale = 1.f;",
          "new_line_content": "        if (result == -pattern_size.area())",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, row, q.row)",
          "old_line_content": "                {",
          "new_line_content": "            DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, row, q.row);",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "Mat(centers).copyTo(_centers)",
          "old_line_content": "        CirclesGridFinder boxFinder(patternSize, points, parameters);",
          "new_line_content": "      Mat(centers).copyTo(_centers);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "centers.empty()",
          "old_line_content": "        try",
          "new_line_content": "      return !centers.empty();",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "centers.clear()",
          "old_line_content": "                    break;",
          "new_line_content": "        centers.clear();",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "all_quads_pts.reserve(all_corners_count)",
          "old_line_content": "    // find quad neighbors",
          "new_line_content": "    all_quads_pts.reserve(all_corners_count);",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": null,
          "new_api": "findHoles",
          "old_text": null,
          "new_text": "boxFinder.findHoles()",
          "old_line_content": "                default:",
          "new_line_content": "            bool isFound = boxFinder.findHoles();",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(prev_sqr_size == 0\n                                             ? std::min(img.cols, img.rows) * (k % 2 == 0 ? 0.2 : 0.1)\n                                             : prev_sqr_size * 2)",
          "old_line_content": "                                             : prev_sqr_size * 2);",
          "new_line_content": "                    int block_size = cvRound(prev_sqr_size == 0",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "std::min(img.cols, img.rows)",
          "old_text": null,
          "new_text": "std::min(img.cols, img.rows)",
          "old_line_content": "                    block_size = block_size | 1;",
          "new_line_content": "                                             ? std::min(img.cols, img.rows) * (k % 2 == 0 ? 0.2 : 0.1)",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "removeQuadFromGroup",
          "old_text": null,
          "new_text": "removeQuadFromGroup(quads, *q.neighbors[0])",
          "old_line_content": "#endif",
          "new_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[0]);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "all_quads_pts.push_back(cur_quad.corners[i]->pt)",
          "old_line_content": "        ChessBoardQuad& cur_quad = (ChessBoardQuad&)all_quads[idx];",
          "new_line_content": "            all_quads_pts.push_back(cur_quad.corners[i]->pt);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "getHoles",
          "old_text": null,
          "new_text": "boxFinder.getHoles(centers)",
          "old_line_content": "            }",
          "new_line_content": "                    boxFinder.getHoles(centers);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "removeQuadFromGroup",
          "old_text": null,
          "new_text": "removeQuadFromGroup(quads, *q.neighbors[1])",
          "old_line_content": "//",
          "new_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[1]);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "reshape",
          "old_text": null,
          "new_text": "Mat(all_quads_pts).reshape(1, all_corners_count)",
          "old_line_content": "        // (it can happen for split corners (due to dilation) of the",
          "new_line_content": "    flann::GenericIndex<flann::L2_Simple<float>> all_quads_pts_index(Mat(all_quads_pts).reshape(1, all_corners_count), index_params);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "adaptiveThreshold",
          "old_text": null,
          "new_text": "adaptiveThreshold( img, thresh_img, 255, ADAPTIVE_THRESH_MEAN_C, THRESH_BINARY, block_size, (k/2)*5 )",
          "old_line_content": "                else",
          "new_line_content": "                        adaptiveThreshold( img, thresh_img, 255, ADAPTIVE_THRESH_MEAN_C, THRESH_BINARY, block_size, (k/2)*5 );",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point(-1, -1)",
          "old_line_content": "                {",
          "new_line_content": "                        dilate( thresh_img, thresh_img, Mat(), Point(-1, -1), dilations );",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "thresh_img.copyTo(prev_thresh_img)",
          "old_line_content": "                    if (dilations > 0)",
          "new_line_content": "                        thresh_img.copyTo(prev_thresh_img);",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "getAsymmetricHoles",
          "old_text": null,
          "new_text": "boxFinder.getAsymmetricHoles(centers)",
          "old_line_content": "        {",
          "new_line_content": "                    boxFinder.getAsymmetricHoles(centers);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "CV_Error",
          "old_text": null,
          "new_text": "CV_Error(Error::StsBadArg, \"Unknown pattern type\")",
          "old_line_content": "            // nothing, next attempt",
          "new_line_content": "                    CV_Error(Error::StsBadArg, \"Unknown pattern type\");",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point(-1, -1)",
          "old_line_content": "",
          "new_line_content": "                        dilate( prev_thresh_img, prev_thresh_img, Mat(), Point(-1, -1), 1 );",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "prev_thresh_img.copyTo(thresh_img)",
          "old_line_content": "                // So we can find rectangles that go to the edge, we draw a white line around the image edge.",
          "new_line_content": "                        prev_thresh_img.copyTo(thresh_img);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": null,
          "new_api": "CV_UNUSED",
          "old_text": null,
          "new_text": "CV_UNUSED(e)",
          "old_line_content": "        }",
          "new_line_content": "            CV_UNUSED(e);",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "            CV_LOG_DEBUG(NULL, \"findCirclesGrid2: attempt=\" << i << \": \" << e.what());",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads.size()",
          "old_line_content": "        {",
          "new_line_content": "    const int count = (int)quads.size();",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": null,
          "new_api": "getHoles",
          "old_text": null,
          "new_text": "boxFinder.getHoles(centers)",
          "old_line_content": "        Mat orgPointsMat;",
          "new_line_content": "        boxFinder.getHoles(centers);",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "centers.size()",
          "old_line_content": "    }",
          "new_line_content": "            if (centers.size() < minHomographyPoints)",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": null,
          "new_api": "getDetectedGridSize",
          "old_text": null,
          "new_text": "boxFinder.getDetectedGridSize()",
          "old_line_content": "    return isValid;",
          "new_line_content": "            H = CirclesGridFinder::rectifyGrid(boxFinder.getDetectedGridSize(), centers, points, points);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "Scalar",
          "old_text": null,
          "new_text": "Scalar(255,255,255)",
          "old_line_content": "            }",
          "new_line_content": "                rectangle( thresh_img, Point(0,0), Point(thresh_img.cols-1, thresh_img.rows-1), Scalar(255,255,255), 3, LINE_8);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "detector.reset()",
          "old_line_content": "    }",
          "new_line_content": "                detector.reset();",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "generateQuads",
          "old_text": null,
          "new_text": "detector.generateQuads(thresh_img, flags, dilations)",
          "old_line_content": "",
          "new_line_content": "                detector.generateQuads(thresh_img, flags, dilations);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "Mat",
          "old_text": null,
          "new_text": "Mat(pt)",
          "old_line_content": "",
          "new_line_content": "            std::vector<float> query = Mat(pt);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "SHOW_QUADS",
          "old_text": null,
          "new_text": "SHOW_QUADS(\"Old quads\", thresh_img, &detector.all_quads[0], detector.all_quads_count)",
          "old_line_content": "",
          "new_line_content": "                SHOW_QUADS(\"Old quads\", thresh_img, &detector.all_quads[0], detector.all_quads_count);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "processQuads",
          "old_text": null,
          "new_text": "detector.processQuads(out_corners, prev_sqr_size)",
          "old_line_content": "    if (found)",
          "new_line_content": "                if (detector.processQuads(out_corners, prev_sqr_size))",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "radiusSearch",
          "old_text": null,
          "new_text": "all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params)",
          "old_line_content": "                if (q_k.neighbors[j])",
          "new_line_content": "            int neighbors_count = all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "H.empty()",
          "old_line_content": "                     OutputArray _centers, int flags, const Ptr<FeatureDetector> &blobDetector)",
          "new_line_content": "    if (!centers.empty() && !H.empty())  // undone rectification",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "Mat(centers).copyTo(_centers)",
          "old_line_content": "/* End of file. */",
          "new_line_content": "    Mat(centers).copyTo(_centers);",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "inv",
          "old_text": null,
          "new_text": "H.inv()",
          "old_line_content": "}",
          "new_line_content": "        transform(centers, orgPointsMat, H.inv());",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": null,
          "new_api": "convertPointsFromHomogeneous",
          "old_text": null,
          "new_text": "convertPointsFromHomogeneous(orgPointsMat, centers)",
          "old_line_content": "",
          "new_line_content": "        convertPointsFromHomogeneous(orgPointsMat, centers);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Chessboard detection result 1: %d\", (int)found)",
          "old_line_content": "        for (int k = 0; k < pattern_size.width*pattern_size.height; ++k)",
          "new_line_content": "    DPRINTF(\"Chessboard detection result 1: %d\", (int)found);",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "CirclesGridFinderParameters",
          "old_text": null,
          "new_text": "CirclesGridFinderParameters()",
          "old_line_content": "",
          "new_line_content": "    return cv::findCirclesGrid(_image, patternSize, _centers, flags, blobDetector, CirclesGridFinderParameters());",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "checkBoardMonotony",
          "old_text": null,
          "new_text": "detector.checkBoardMonotony(out_corners)",
          "old_line_content": "                out_corners[k].y <= BORDER || out_corners[k].y > img.rows - BORDER )",
          "new_line_content": "        found = detector.checkBoardMonotony(out_corners);",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Chessboard detection result 2: %d\", (int)found)",
          "old_line_content": "                found = false;",
          "new_line_content": "    DPRINTF(\"Chessboard detection result 2: %d\", (int)found);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "normL2Sqr<float>(pt - q_k.corners[j]->pt)",
          "old_text": null,
          "new_text": "normL2Sqr<float>(pt - q_k.corners[j]->pt)",
          "old_line_content": "                    {",
          "new_line_content": "                const float dist = normL2Sqr<float>(pt - q_k.corners[j]->pt);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(self_idx >= 0)",
          "old_line_content": "void ChessBoardDetector::orderQuad(ChessBoardQuad& quad, ChessBoardCorner& corner, int common)",
          "new_line_content": "    CV_Assert(self_idx >= 0); // item itself should be found",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "quads.resize(count - 1)",
          "old_line_content": "    int tc = 0;;",
          "new_line_content": "    quads.resize(count - 1);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Incompatible edge lengths\")",
          "old_line_content": "            {",
          "new_line_content": "                        DPRINTF(\"Incompatible edge lengths\");",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(common >= 0 && common <= 3)",
          "old_line_content": "    {",
          "new_line_content": "    CV_DbgAssert(common >= 0 && common <= 3);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Chessboard detection result 3: %d\", (int)found)",
          "old_line_content": "                for(int i = 0; i < n/2; i++ )",
          "new_line_content": "    DPRINTF(\"Chessboard detection result 3: %d\", (int)found);",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(closest_quad)",
          "old_line_content": "                int j = 0;",
          "new_line_content": "                CV_Assert(closest_quad);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "std::swap(out_corners[i], out_corners[n-i-1])",
          "old_text": null,
          "new_text": "std::swap(out_corners[i], out_corners[n-i-1])",
          "old_line_content": "",
          "new_line_content": "                    std::swap(out_corners[i], out_corners[n-i-1]);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "Size",
          "old_text": null,
          "new_text": "Size(-1,-1)",
          "old_line_content": "//    for each corner c lying between end points in the same row/column it checks that",
          "new_line_content": "        cv::cornerSubPix(img, out_corners, Size(2, 2), Size(-1,-1),",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1)",
          "old_text": null,
          "new_text": "cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1)",
          "old_line_content": "//    the point projection to the line segment (a,b) is lying between projections",
          "new_line_content": "                         cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1));",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "copyTo",
          "old_text": null,
          "new_text": "Mat(out_corners).copyTo(corners_)",
          "old_line_content": "// This function has been created as temporary workaround for the bug in current implementation",
          "new_line_content": "    Mat(out_corners).copyTo(corners_);",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": null,
          "new_api": "normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt)",
          "old_text": null,
          "new_text": "normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt)",
          "old_line_content": "                }",
          "new_line_content": "                    if (normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt) < min_dist)",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quad_group.size()",
          "old_line_content": "        ChessBoardQuad* q = quad_group[i];",
          "new_line_content": "    int quad_count = (int)quad_group.size();",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(quad_count > 0)",
          "old_line_content": "                q->corners[0]->pt +",
          "new_line_content": "    CV_DbgAssert(quad_count > 0);",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "Mat",
          "old_text": null,
          "new_text": "Mat(closest_corner.pt)",
          "old_line_content": "                    if (j == idx || q == closest_quad)",
          "new_line_content": "                query = Mat(closest_corner.pt);",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "radiusSearch",
          "old_text": null,
          "new_text": "all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params)",
          "old_line_content": "",
          "new_line_content": "                neighbors_count = all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(dy0)",
          "old_line_content": "            }",
          "new_line_content": "            if (fabs(dx0) + fabs(dy0) < FLT_EPSILON)",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "const_cast<ChessBoardQuad&>(all_quads[j])",
          "old_text": null,
          "new_text": "const_cast<ChessBoardQuad&>(all_quads[j])",
          "old_line_content": "                }",
          "new_line_content": "                    ChessBoardQuad* q = &const_cast<ChessBoardQuad&>(all_quads[j]);",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(q)",
          "old_line_content": "",
          "new_line_content": "                    CV_DbgAssert(q);",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": null,
          "new_api": "normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt)",
          "old_text": null,
          "new_text": "normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt)",
          "old_line_content": "                cur_quad.neighbors[i] = closest_quad;",
          "new_line_content": "                        if (normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt) < min_dist)",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "all_quads.size()",
          "old_line_content": "            start = quads[i];",
          "new_line_content": "    const int max_quad_buf_size = (int)all_quads.size();",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads.size()",
          "old_line_content": "            break;",
          "new_line_content": "    int quad_count = (int)quads.size();",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "cv::convexHull(points, hull, true)",
          "old_text": null,
          "new_text": "cv::convexHull(points, hull, true)",
          "old_line_content": "",
          "new_line_content": "            cv::convexHull(points, hull, true);",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "contourArea",
          "old_text": null,
          "new_text": "contourArea(hull, false)",
          "old_line_content": "",
          "new_line_content": "            double hull_area = contourArea(hull, false);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "deallocate",
          "old_text": null,
          "new_text": "all_corners.deallocate()",
          "old_line_content": "",
          "new_line_content": "    all_corners.deallocate();",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(q)",
          "old_line_content": "                            q0->neighbors[k] = 0;",
          "new_line_content": "            CV_DbgAssert(q);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "stack.push(start)",
          "old_line_content": "",
          "new_line_content": "    stack.push(start);",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE)",
          "old_text": null,
          "new_text": "cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE)",
          "old_line_content": "    std::vector<QuadCountour> contour_quads;",
          "new_line_content": "    cv::findContours(image_, contours, hierarchy, RETR_CCOMP, CHAIN_APPROX_SIMPLE);",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "CV_LOG_DEBUG",
          "old_text": null,
          "new_text": "CV_LOG_DEBUG(NULL, \"calib3d(chessboard): cv::findContours() returns no contours\")",
          "old_line_content": "        int parentIdx = hierarchy[idx][3];",
          "new_line_content": "        CV_LOG_DEBUG(NULL, \"calib3d(chessboard): cv::findContours() returns no contours\");",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "stack.empty()",
          "old_line_content": "        if (row < row_min) row_min = row;",
          "new_line_content": "    while (!stack.empty())",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "contours.size()",
          "old_line_content": "",
          "new_line_content": "    std::vector<int> contour_child_counter(contours.size(), 0);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(q)",
          "old_line_content": "        if (col < col_min) col_min = col;",
          "new_line_content": "        ChessBoardQuad* q = stack.top(); stack.pop(); CV_Assert(q);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "contours.size()",
          "old_line_content": "        std::vector<Point> approx_contour = contour;",
          "new_line_content": "    for (int idx = (int)(contours.size() - 1); idx >= 0; --idx)",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "quad_group.resize(quad_count)",
          "old_line_content": "    std::stack<ChessBoardQuad*> stack;",
          "new_line_content": "    quad_group.resize(quad_count);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "boundingRect",
          "old_text": null,
          "new_text": "boundingRect(contour)",
          "old_line_content": "",
          "new_line_content": "        Rect contour_rect = boundingRect(contour);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "area",
          "old_text": null,
          "new_text": "contour_rect.area()",
          "old_line_content": "        // reject non-quadrangles",
          "new_line_content": "        if (contour_rect.area() < min_area)",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(q)",
          "old_line_content": "                col -= 2; break;",
          "new_line_content": "            CV_DbgAssert(q);",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "approx_contour.size()",
          "old_line_content": "        cv::Point pt[4];",
          "new_line_content": "        for (int approx_level = min_approx_level; approx_contour.size() > 4 && approx_level <= max_approx_level; approx_level++ )",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "out_group.clear()",
          "old_line_content": "",
          "new_line_content": "    out_group.clear();",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "approxPolyDP",
          "old_text": null,
          "new_text": "approxPolyDP(approx_contour, approx_contour, (float)approx_level, true)",
          "old_line_content": "            pt[i] = approx_contour[i];",
          "new_line_content": "            approxPolyDP(approx_contour, approx_contour, (float)approx_level, true);",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "approx_contour.size()",
          "old_line_content": "        {",
          "new_line_content": "        if (approx_contour.size() != 4)",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "contour_quads.size()",
          "old_line_content": "            // than rectangular and which are big enough",
          "new_line_content": "        CV_LOG_VERBOSE(NULL, 9, \"... contours(\" << contour_quads.size() << \" added):\" << pt[0] << \" \" << pt[1] << \" \" << pt[2] << \" \" << pt[3]);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"col: %d  row: %d\", col, row)",
          "old_line_content": "#ifdef DEBUG_CHESSBOARD",
          "new_line_content": "                DPRINTF(\"col: %d  row: %d\", col, row);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(q->corners[i])",
          "old_line_content": "    for (int i = col_min; i <= col_max; i++)",
          "new_line_content": "                CV_Assert(q->corners[i]);",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_group.push_back(q)",
          "old_line_content": "                ChessBoardQuad *neighbor = q->neighbors[k];",
          "new_line_content": "        out_group.push_back(q);",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": null,
          "new_api": "cv::arcLength(approx_contour, true)",
          "old_text": null,
          "new_text": "cv::arcLength(approx_contour, true)",
          "old_line_content": "                d1 >= 0.15 * p && d2 >= 0.15 * p))",
          "new_line_content": "            double p = cv::arcLength(approx_contour, true);",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": null,
          "new_api": "cv::contourArea(approx_contour, false)",
          "old_text": null,
          "new_text": "cv::contourArea(approx_contour, false)",
          "old_line_content": "                continue;",
          "new_line_content": "            double area = cv::contourArea(approx_contour, false);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "stack.push(neighbor)",
          "old_line_content": "    int w = pattern_size.width - 1;",
          "new_line_content": "                stack.push(neighbor);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": null,
          "new_api": "normL2Sqr<double>(pt[1] - pt[3])",
          "old_text": null,
          "new_text": "normL2Sqr<double>(pt[1] - pt[3])",
          "old_line_content": "        contour_child_counter[parentIdx]++;",
          "new_line_content": "            double d2 = sqrt(normL2Sqr<double>(pt[1] - pt[3]));",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(q)",
          "old_line_content": "                    neighbor->ordered = false;",
          "new_line_content": "            q = stack.top(); CV_Assert(q);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "pop",
          "old_text": null,
          "new_text": "stack.pop()",
          "old_line_content": "                }",
          "new_line_content": "            stack.pop();",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "normL2Sqr<double>(pt[0] - pt[2])",
          "old_text": null,
          "new_text": "normL2Sqr<double>(pt[0] - pt[2])",
          "old_line_content": "",
          "new_line_content": "            double d1 = sqrt(normL2Sqr<double>(pt[0] - pt[2]));",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(q)",
          "old_line_content": "        break;",
          "new_line_content": "                CV_DbgAssert(q);",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "normL2Sqr<double>(pt[1] - pt[2])",
          "old_text": null,
          "new_text": "normL2Sqr<double>(pt[1] - pt[2])",
          "old_line_content": "    }",
          "new_line_content": "            double d4 = sqrt(normL2Sqr<double>(pt[1] - pt[2]));",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"HIST[%d] = %d\", i, col_hist[i])",
          "old_line_content": "        (w < h && drow < dcol))",
          "new_line_content": "        DPRINTF(\"HIST[%d] = %d\", i, col_hist[i]);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "stack.push(neighbor)",
          "old_line_content": "",
          "new_line_content": "                    stack.push(neighbor);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_group.push_back(neighbor)",
          "old_line_content": "int ChessBoardDetector::checkQuadGroup(const std::vector<ChessBoardQuad*>& quad_group, std::vector<ChessBoardCorner*>& out_corners)",
          "new_line_content": "                    out_group.push_back(neighbor);",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "contour_quads.emplace_back(pt, parentIdx)",
          "old_line_content": "        QuadCountour& qc = contour_quads[idx];",
          "new_line_content": "        contour_quads.emplace_back(pt, parentIdx);",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "contour_quads.size()",
          "old_line_content": "",
          "new_line_content": "    size_t total = contour_quads.size();",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": null,
          "new_api": "std::max((size_t)2, total * 3)",
          "old_text": null,
          "new_text": "std::max((size_t)2, total * 3)",
          "old_line_content": "        int quad_idx = quad_count++;",
          "new_line_content": "    size_t max_quad_buf_size = std::max((size_t)2, total * 3);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "allocate",
          "old_text": null,
          "new_text": "all_quads.allocate(max_quad_buf_size)",
          "old_line_content": "        ChessBoardQuad& q = all_quads[quad_idx];",
          "new_line_content": "    all_quads.allocate(max_quad_buf_size);",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": null,
          "new_api": "allocate",
          "old_text": null,
          "new_text": "all_corners.allocate(max_quad_buf_size * 4)",
          "old_line_content": "",
          "new_line_content": "    all_corners.allocate(max_quad_buf_size * 4);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Size: %dx%d  Pattern: %dx%d\", dcol, drow, w, h)",
          "old_line_content": "    {",
          "new_line_content": "    DPRINTF(\"Size: %dx%d  Pattern: %dx%d\", dcol, drow, w, h);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quad_group.size()",
          "old_line_content": "    // and two vertices are connected iff they lie on the same quad edge",
          "new_line_content": "    int quad_count = (int)quad_group.size();",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "ChessBoardQuad",
          "old_text": null,
          "new_text": "ChessBoardQuad()",
          "old_line_content": "        {",
          "new_line_content": "        q = ChessBoardQuad();",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Trimming cols\")",
          "old_line_content": "    }",
          "new_line_content": "        DPRINTF(\"Trimming cols\");",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Trimming left col\")",
          "old_line_content": "    if (drow == h+1)    // too many, trim",
          "new_line_content": "            DPRINTF(\"Trimming left col\");",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "trimCol",
          "old_text": null,
          "new_text": "trimCol(quads, col_min, -1)",
          "old_line_content": "    {",
          "new_line_content": "            trimCol(quads, col_min, -1);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Trimming rows\")",
          "old_line_content": "    }",
          "new_line_content": "        DPRINTF(\"Trimming rows\");",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(q.edge_len)",
          "old_line_content": "{",
          "new_line_content": "        q.edge_len += 2 * sqrt(q.edge_len) * edge_len_compensation + edge_len_compensation * edge_len_compensation;",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Trimming top row\")",
          "old_line_content": "#endif",
          "new_line_content": "            DPRINTF(\"Trimming top row\");",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "trimRow",
          "old_text": null,
          "new_text": "trimRow(quads, row_min, -1)",
          "old_line_content": "",
          "new_line_content": "            trimRow(quads, row_min, -1);",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": null,
          "new_api": "CV_LOG_VERBOSE",
          "old_text": null,
          "new_text": "CV_LOG_VERBOSE(NULL, 3, \"max_quad_buf_size=\" << max_quad_buf_size)",
          "old_line_content": "",
          "new_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"max_quad_buf_size=\" << max_quad_buf_size);",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": null,
          "new_api": "CV_LOG_VERBOSE",
          "old_text": null,
          "new_text": "CV_LOG_VERBOSE(NULL, 3, \"filtered quad_count=\" << quad_count)",
          "old_line_content": "    // Find quad's neighbors",
          "new_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"filtered quad_count=\" << quad_count);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Trimming bottom row\")",
          "old_line_content": "    int found = 0;",
          "new_line_content": "            DPRINTF(\"Trimming bottom row\");",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "trimRow",
          "old_text": null,
          "new_text": "trimRow(quads, row_max, +1)",
          "old_line_content": "    for (int i=0; i < quad_count; ++i)",
          "new_line_content": "            trimRow(quads, row_max, +1);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads.size()",
          "old_line_content": "            continue;",
          "new_line_content": "    quad_count = (int)quads.size(); // update after icvTrimCol/icvTrimRow",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": null,
          "new_api": "findQuadNeighbors",
          "old_text": null,
          "new_text": "findQuadNeighbors()",
          "old_line_content": "",
          "new_line_content": "    findQuadNeighbors();",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "corner_group.reserve(max_quad_buf_size * 4)",
          "old_line_content": "        // maybe delete or add some",
          "new_line_content": "    std::vector<ChessBoardCorner*> corner_group; corner_group.reserve(max_quad_buf_size * 4);",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "findConnectedQuads",
          "old_text": null,
          "new_text": "findConnectedQuads(quad_group, group_idx)",
          "old_line_content": "",
          "new_line_content": "        findConnectedQuads(quad_group, group_idx);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "quad_group.empty()",
          "old_line_content": "        if (count == 0)",
          "new_line_content": "        if (quad_group.empty())",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quad_group.size()",
          "old_line_content": "        // If count is more than it should be, this will remove those quads",
          "new_line_content": "        int count = (int)quad_group.size();",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Starting ordering of inner quads (%d)\", count)",
          "old_line_content": "",
          "new_line_content": "        DPRINTF(\"Starting ordering of inner quads (%d)\", count);",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(0 <= n && n <= 4)",
          "old_line_content": "    // start with a corner that belongs to a quad with a single neighbor.",
          "new_line_content": "        CV_DbgAssert(0 <= n && n <= 4);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "cleanFoundConnectedQuads",
          "old_text": null,
          "new_text": "cleanFoundConnectedQuads(quad_group)",
          "old_line_content": "        for(int i = 0; i < n; i++ )",
          "new_line_content": "        count = cleanFoundConnectedQuads(quad_group);",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Connected group: %d, count: %d\", group_idx, count)",
          "old_line_content": "        {",
          "new_line_content": "        DPRINTF(\"Connected group: %d, count: %d\", group_idx, count);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Adding inner: col: %d  row: %d\", col, row)",
          "old_line_content": "",
          "new_line_content": "                    DPRINTF(\"Adding inner: col: %d  row: %d\", col, row);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Connected group: %d, count: %d\", group_idx, count)",
          "old_line_content": "            sum_dist += sum;",
          "new_line_content": "        DPRINTF(\"Connected group: %d, count: %d\", group_idx, count);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(q.corners[j])",
          "old_line_content": "    //   which are missing",
          "new_line_content": "                    CV_Assert(q.corners[j]);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "orderQuad",
          "old_text": null,
          "new_text": "orderQuad(*neighbor, *q.corners[j], (j+2)&3)",
          "old_line_content": "    if (found > 0)",
          "new_line_content": "                    orderQuad(*neighbor, *q.corners[j], (j+2)&3);",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": null,
          "new_api": "sumDist",
          "old_text": null,
          "new_text": "corner_group[i]->sumDist(ni)",
          "old_line_content": "            for (int i = 0; i < n; ++i)",
          "new_line_content": "            float sum = corner_group[i]->sumDist(ni);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Found %d inner quads not connected to outer quads, repairing\", found)",
          "old_line_content": "        if (all_quads_count >= max_quad_buf_size)",
          "new_line_content": "        DPRINTF(\"Found %d inner quads not connected to outer quads, repairing\", found);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "out_corners.size()",
          "old_line_content": "                return true;",
          "new_line_content": "        if (count > 0 || (-count > (int)out_corners.size()))",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "out_corners.clear()",
          "old_line_content": "                below = c;",
          "new_line_content": "    out_corners.clear();",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_corners.push_back(cur)",
          "old_line_content": "        }",
          "new_line_content": "    out_corners.push_back(cur);",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "out_corners.clear()",
          "old_line_content": "    }",
          "new_line_content": "            out_corners.clear();",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "addOuterQuad",
          "old_text": null,
          "new_text": "addOuterQuad(q, quads)",
          "old_line_content": "    if (dcol == w && drow == h) // found correct inner quads",
          "new_line_content": "                int added = addOuterQuad(q, quads);",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "out_corners.reserve(n)",
          "old_line_content": "",
          "new_line_content": "            out_corners.reserve(n);",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_corners.push_back(corner_group[i]->pt)",
          "old_line_content": "}",
          "new_line_content": "                out_corners.push_back(corner_group[i]->pt);",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": null,
          "new_api": "checkBoardMonotony",
          "old_text": null,
          "new_text": "checkBoardMonotony(out_corners)",
          "old_line_content": "",
          "new_line_content": "                    && checkBoardMonotony(out_corners))",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Inner bounds ok, check outer quads\")",
          "old_line_content": "                }",
          "new_line_content": "        DPRINTF(\"Inner bounds ok, check outer quads\");",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_corners.push_back(right)",
          "old_line_content": "                int kk = 0;",
          "new_line_content": "        out_corners.push_back(right);",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": null,
          "new_api": "CV_MAT_DEPTH",
          "old_text": null,
          "new_text": "CV_MAT_DEPTH(type)",
          "old_line_content": "",
          "new_line_content": "    int depth = CV_MAT_DEPTH(type);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Removing quad %d\", i)",
          "old_line_content": "",
          "new_line_content": "                    DPRINTF(\"Removing quad %d\", i);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "removeQuadFromGroup",
          "old_text": null,
          "new_text": "removeQuadFromGroup(quads, q)",
          "old_line_content": "",
          "new_line_content": "                    removeQuadFromGroup(quads, q);",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "std::max(pattern_size.width,pattern_size.height)",
          "old_text": null,
          "new_text": "std::max(pattern_size.width,pattern_size.height)",
          "old_line_content": "                    if (c->neighbors[kk] == below)",
          "new_line_content": "        if( right->count != 3 || (int)out_corners.size() >= std::max(pattern_size.width,pattern_size.height) )",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": null,
          "new_api": "CV_CheckType",
          "old_text": null,
          "new_text": "CV_CheckType(type, depth == CV_8U || depth == CV_16U || depth == CV_32F,\n            \"Only 8-bit, 16-bit or floating-point 32-bit images are supported\")",
          "old_line_content": "    const int shift = 0;",
          "new_line_content": "    CV_CheckType(type, depth == CV_8U || depth == CV_16U || depth == CV_32F,",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "_corners.empty()",
          "old_line_content": "",
          "new_line_content": "    if (_corners.empty())",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "getMat",
          "old_text": null,
          "new_text": "_corners.getMat()",
          "old_line_content": "    switch (depth)",
          "new_line_content": "    Mat corners = _corners.getMat();",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "quads.size()",
          "old_line_content": "int ChessBoardDetector::addOuterQuad(ChessBoardQuad& quad, std::vector<ChessBoardQuad*>& quads)",
          "new_line_content": "        return (int)quads.size();",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "corners.ptr<Point2f>(0)",
          "old_text": null,
          "new_text": "corners.ptr<Point2f>(0)",
          "old_line_content": "    {",
          "new_line_content": "    const Point2f* corners_data = corners.ptr<Point2f>(0);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "CV_DbgAssert",
          "old_text": null,
          "new_text": "CV_DbgAssert(corners_data)",
          "old_line_content": "    case CV_8U:",
          "new_line_content": "    CV_DbgAssert(corners_data);",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "checkVector",
          "old_text": null,
          "new_text": "corners.checkVector(2, CV_32F, true)",
          "old_line_content": "        scale = 1;",
          "new_line_content": "    int nelems = corners.checkVector(2, CV_32F, true);",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": null,
          "new_api": "CV_Assert",
          "old_text": null,
          "new_text": "CV_Assert(nelems >= 0)",
          "old_line_content": "        break;",
          "new_line_content": "    CV_Assert(nelems >= 0);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "all_quads.size()",
          "old_line_content": "            added++;",
          "new_line_content": "    int max_quad_buf_size = (int)all_quads.size();",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "out_corners.size()",
          "old_line_content": "        if( !first )",
          "new_line_content": "    width = (int)out_corners.size();",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "DPRINTF",
          "old_text": null,
          "new_text": "DPRINTF(\"Adding quad as neighbor 2\")",
          "old_line_content": "            q.group_idx = quad.group_idx;",
          "new_line_content": "            DPRINTF(\"Adding quad as neighbor 2\");",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "ChessBoardQuad",
          "old_text": null,
          "new_text": "ChessBoardQuad(0)",
          "old_line_content": "            q.edge_len = quad.edge_len;",
          "new_line_content": "            q = ChessBoardQuad(0);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "quads.push_back(&q)",
          "old_line_content": "            // make corners of new quad",
          "new_line_content": "            quads.push_back(&q);",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "out_corners.push_back(cur)",
          "old_line_content": "                if (c && c->row > i)",
          "new_line_content": "            out_corners.push_back(cur);",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(corners_data[i].x*(1 << shift))",
          "old_line_content": "        static const int line_colors[line_max][4] =",
          "new_line_content": "                    cvRound(corners_data[i].x*(1 << shift)),",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "cvRound",
          "old_text": null,
          "new_text": "cvRound(corners_data[i].y*(1 << shift))",
          "old_line_content": "        {",
          "new_line_content": "                    cvRound(corners_data[i].y*(1 << shift))",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point( pt.x + r, pt.y + r)",
          "old_line_content": "            {0,128,255,0},",
          "new_line_content": "            line(image, Point(pt.x - r, pt.y - r), Point( pt.x + r, pt.y + r), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": null,
          "new_api": "Point",
          "old_text": null,
          "new_text": "Point( pt.x + r, pt.y - r)",
          "old_line_content": "            {0,200,200,0},",
          "new_line_content": "            line(image, Point(pt.x - r, pt.y + r), Point( pt.x + r, pt.y - r), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "circle",
          "old_text": null,
          "new_text": "circle(image, pt, r+(1<<shift), color, 1, line_type, shift)",
          "old_line_content": "            {0,255,0,0},",
          "new_line_content": "            circle(image, pt, r+(1<<shift), color, 1, line_type, shift);",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "ChessBoardCorner",
          "old_text": null,
          "new_text": "ChessBoardCorner(pt)",
          "old_line_content": "            if (quad_prev &&",
          "new_line_content": "                corner = ChessBoardCorner(pt);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2048,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(corners_data[i].y*(1 << shift))",
          "new_text": null,
          "old_line_content": "                        cvRound(corners_data[i].y*(1 << shift))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "size",
          "new_api": null,
          "old_text": "out_corners.size()",
          "new_text": null,
          "old_line_content": "    if ((int)out_corners.size() != corner_count)",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point( pt.x + r, pt.y + r)",
          "new_text": null,
          "old_line_content": "                line(image, Point(pt.x - r, pt.y - r), Point( pt.x + r, pt.y + r), color, 1, line_type, shift);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point( pt.x + r, pt.y - r)",
          "new_text": null,
          "old_line_content": "                line(image, Point(pt.x - r, pt.y + r), Point( pt.x + r, pt.y - r), color, 1, line_type, shift);",
          "new_line_content": "            for (int x = 0; x < patternSize.width; x++, i++)",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "circle",
          "new_api": null,
          "old_text": "circle(image, pt, r+(1<<shift), color, 1, line_type, shift)",
          "new_text": null,
          "old_line_content": "                circle(image, pt, r+(1<<shift), color, 1, line_type, shift);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "std::swap(width, height)",
          "new_api": null,
          "old_text": "std::swap(width, height)",
          "new_text": null,
          "old_line_content": "        std::swap(width, height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "size",
          "new_api": null,
          "old_text": "quads_.size()",
          "new_text": null,
          "old_line_content": "    for (size_t i = 0; i < quads_.size(); ++i)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, col, q.col)",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, col, q.col);",
          "new_line_content": "// trimming routines",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "removeQuadFromGroup",
          "new_api": null,
          "old_text": "removeQuadFromGroup(quads, *q.neighbors[1])",
          "new_text": null,
          "old_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[1]);",
          "new_line_content": "        ChessBoardQuad& q = *quads_[i];",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(isAsymmetricGrid ^ isSymmetricGrid)",
          "new_text": null,
          "old_line_content": "    CV_Assert(isAsymmetricGrid ^ isSymmetricGrid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "removeQuadFromGroup",
          "new_api": null,
          "old_text": "removeQuadFromGroup(quads, *q.neighbors[2])",
          "new_text": null,
          "old_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[2]);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1])",
          "new_api": null,
          "old_text": "std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1])",
          "new_text": null,
          "old_line_content": "                        std::swap(out_corners[i*width+j], out_corners[i*width+width-j-1]);",
          "new_line_content": "    // check if we need to revert the order in each row",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "detect",
          "new_api": null,
          "old_text": "blobDetector->detect(_image, keypoints)",
          "new_text": null,
          "old_line_content": "        blobDetector->detect(_image, keypoints);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j])",
          "new_api": null,
          "old_text": "std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j])",
          "new_text": null,
          "old_line_content": "                        std::swap(out_corners[i*width+j], out_corners[(height - i - 1)*width+j]);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "size",
          "new_api": null,
          "old_text": "keypoints.size()",
          "new_text": null,
          "old_line_content": "        for (size_t i = 0; i < keypoints.size(); i++)",
          "new_line_content": "    bool isAsymmetricGrid = (flags & CALIB_CB_ASYMMETRIC_GRID) ? true : false;",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "type",
          "new_api": null,
          "old_text": "_image.type()",
          "new_text": null,
          "old_line_content": "        CV_CheckTypeEQ(_image.type(), CV_32FC2, \"blobDetector must be provided or image must contains Point2f array (std::vector<Point2f>) with candidates\");",
          "new_line_content": "    if (blobDetector)",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "_image.copyTo(points)",
          "new_text": null,
          "old_line_content": "        _image.copyTo(points);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "resize",
          "new_api": null,
          "old_text": "out_corners.resize(corner_count)",
          "new_text": null,
          "old_line_content": "        out_corners.resize(corner_count);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "area",
          "new_api": null,
          "old_text": "pattern_size.area()",
          "new_text": null,
          "old_line_content": "        if (result == -pattern_size.area())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, row, q.row)",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"i: %d  index: %d  cur: %d\", (int)i, row, q.row);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "Mat(centers).copyTo(_centers)",
          "new_text": null,
          "old_line_content": "      Mat(centers).copyTo(_centers);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "empty",
          "new_api": null,
          "old_text": "centers.empty()",
          "new_text": null,
          "old_line_content": "      return !centers.empty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "removeQuadFromGroup",
          "new_api": null,
          "old_text": "removeQuadFromGroup(quads, *q.neighbors[2])",
          "new_text": null,
          "old_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[2]);",
          "new_line_content": "        ChessBoardQuad& q = *quads_[i];",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "removeQuadFromGroup",
          "new_api": null,
          "old_text": "removeQuadFromGroup(quads, *q.neighbors[3])",
          "new_text": null,
          "old_line_content": "                    removeQuadFromGroup(quads, *q.neighbors[3]);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "all_quads_pts.reserve(all_corners_count)",
          "new_text": null,
          "old_line_content": "    all_quads_pts.reserve(all_corners_count);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "findHoles",
          "new_api": null,
          "old_text": "boxFinder.findHoles()",
          "new_text": null,
          "old_line_content": "            bool isFound = boxFinder.findHoles();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "all_quads_pts.push_back(cur_quad.corners[i]->pt)",
          "new_text": null,
          "old_line_content": "            all_quads_pts.push_back(cur_quad.corners[i]->pt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "getHoles",
          "new_api": null,
          "old_text": "boxFinder.getHoles(centers)",
          "new_text": null,
          "old_line_content": "                    boxFinder.getHoles(centers);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "reshape",
          "new_api": null,
          "old_text": "Mat(all_quads_pts).reshape(1, all_corners_count)",
          "new_text": null,
          "old_line_content": "    flann::GenericIndex<flann::L2_Simple<float>> all_quads_pts_index(Mat(all_quads_pts).reshape(1, all_corners_count), index_params);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": "getAsymmetricHoles",
          "new_api": null,
          "old_text": "boxFinder.getAsymmetricHoles(centers)",
          "new_text": null,
          "old_line_content": "                    boxFinder.getAsymmetricHoles(centers);",
          "new_line_content": "        try",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "CV_Error",
          "new_api": null,
          "old_text": "CV_Error(Error::StsBadArg, \"Unknown pattern type\")",
          "new_text": null,
          "old_line_content": "                    CV_Error(Error::StsBadArg, \"Unknown pattern type\");",
          "new_line_content": "            if (isFound)",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(prev_sqr_size == 0\n                                             ? std::min(img.cols, img.rows) * (k % 2 == 0 ? 0.2 : 0.1)\n                                             : prev_sqr_size * 2)",
          "new_text": null,
          "old_line_content": "                    int block_size = cvRound(prev_sqr_size == 0",
          "new_line_content": "                if (useAdaptive)",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "std::min(img.cols, img.rows)",
          "new_api": null,
          "old_text": "std::min(img.cols, img.rows)",
          "new_text": null,
          "old_line_content": "                                             ? std::min(img.cols, img.rows) * (k % 2 == 0 ? 0.2 : 0.1)",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "adaptiveThreshold",
          "new_api": null,
          "old_text": "adaptiveThreshold( img, thresh_img, 255, ADAPTIVE_THRESH_MEAN_C, THRESH_BINARY, block_size, (k/2)*5 )",
          "new_text": null,
          "old_line_content": "                    adaptiveThreshold( img, thresh_img, 255, ADAPTIVE_THRESH_MEAN_C, THRESH_BINARY, block_size, (k/2)*5 );",
          "new_line_content": "                    block_size = block_size | 1;",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point(-1, -1)",
          "new_text": null,
          "old_line_content": "                    dilate( thresh_img, thresh_img, Mat(), Point(-1, -1), dilations );",
          "new_line_content": "                    // convert to binary",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": "CV_UNUSED",
          "new_api": null,
          "old_text": "CV_UNUSED(e)",
          "new_text": null,
          "old_line_content": "            CV_UNUSED(e);",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "            CV_LOG_DEBUG(NULL, \"findCirclesGrid2: attempt=\" << i << \": \" << e.what());",
          "new_line_content": "                default:",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "size",
          "new_api": null,
          "old_text": "quads.size()",
          "new_text": null,
          "old_line_content": "    const int count = (int)quads.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point(-1, -1)",
          "new_text": null,
          "old_line_content": "                        dilate( thresh_img, thresh_img, Mat(), Point(-1, -1), 1 );",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "getHoles",
          "new_api": null,
          "old_text": "boxFinder.getHoles(centers)",
          "new_text": null,
          "old_line_content": "        boxFinder.getHoles(centers);",
          "new_line_content": "                isValid = true;",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "SHOW",
          "new_api": null,
          "old_text": "SHOW(\"Old binarization\", thresh_img)",
          "new_text": null,
          "old_line_content": "                SHOW(\"Old binarization\", thresh_img);",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "size",
          "new_api": null,
          "old_text": "centers.size()",
          "new_text": null,
          "old_line_content": "            if (centers.size() < minHomographyPoints)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": "getDetectedGridSize",
          "new_api": null,
          "old_text": "boxFinder.getDetectedGridSize()",
          "new_text": null,
          "old_line_content": "            H = CirclesGridFinder::rectifyGrid(boxFinder.getDetectedGridSize(), centers, points, points);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "Scalar",
          "new_api": null,
          "old_text": "Scalar(255,255,255)",
          "new_text": null,
          "old_line_content": "                rectangle( thresh_img, Point(0,0), Point(thresh_img.cols-1, thresh_img.rows-1), Scalar(255,255,255), 3, LINE_8);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "reset",
          "new_api": null,
          "old_text": "detector.reset()",
          "new_text": null,
          "old_line_content": "                detector.reset();",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "generateQuads",
          "new_api": null,
          "old_text": "detector.generateQuads(thresh_img, flags, dilations)",
          "new_text": null,
          "old_line_content": "                detector.generateQuads(thresh_img, flags, dilations);",
          "new_line_content": "                    if (dilations > 0)",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "Mat",
          "new_api": null,
          "old_text": "Mat(pt)",
          "new_text": null,
          "old_line_content": "            std::vector<float> query = Mat(pt);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "SHOW_QUADS",
          "new_api": null,
          "old_text": "SHOW_QUADS(\"Old quads\", thresh_img, &detector.all_quads[0], detector.all_quads_count)",
          "new_text": null,
          "old_line_content": "                SHOW_QUADS(\"Old quads\", thresh_img, &detector.all_quads[0], detector.all_quads_count);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "empty",
          "new_api": null,
          "old_text": "H.empty()",
          "new_text": null,
          "old_line_content": "    if (!centers.empty() && !H.empty())  // undone rectification",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "radiusSearch",
          "new_api": null,
          "old_text": "all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params)",
          "new_text": null,
          "old_line_content": "            int neighbors_count = all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "inv",
          "new_api": null,
          "old_text": "H.inv()",
          "new_text": null,
          "old_line_content": "        transform(centers, orgPointsMat, H.inv());",
          "new_line_content": "        if (i != attempts - 1)",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "convertPointsFromHomogeneous",
          "new_api": null,
          "old_text": "convertPointsFromHomogeneous(orgPointsMat, centers)",
          "new_text": null,
          "old_line_content": "        convertPointsFromHomogeneous(orgPointsMat, centers);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "Mat(centers).copyTo(_centers)",
          "new_text": null,
          "old_line_content": "    Mat(centers).copyTo(_centers);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "CirclesGridFinderParameters",
          "new_api": null,
          "old_text": "CirclesGridFinderParameters()",
          "new_text": null,
          "old_line_content": "    return cv::findCirclesGrid(_image, patternSize, _centers, flags, blobDetector, CirclesGridFinderParameters());",
          "new_line_content": "        Mat orgPointsMat;",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "checkBoardMonotony",
          "new_api": null,
          "old_text": "detector.checkBoardMonotony(out_corners)",
          "new_text": null,
          "old_line_content": "        found = detector.checkBoardMonotony(out_corners);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Chessboard detection result 2: %d\", (int)found)",
          "new_text": null,
          "old_line_content": "    DPRINTF(\"Chessboard detection result 2: %d\", (int)found);",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "normL2Sqr<float>(pt - q_k.corners[j]->pt)",
          "new_api": null,
          "old_text": "normL2Sqr<float>(pt - q_k.corners[j]->pt)",
          "new_text": null,
          "old_line_content": "                const float dist = normL2Sqr<float>(pt - q_k.corners[j]->pt);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(self_idx >= 0)",
          "new_text": null,
          "old_line_content": "    CV_Assert(self_idx >= 0); // item itself should be found",
          "new_line_content": "                        q0.neighbors[k] = 0;",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "resize",
          "new_api": null,
          "old_text": "quads.resize(count - 1)",
          "new_text": null,
          "old_line_content": "    quads.resize(count - 1);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Incompatible edge lengths\")",
          "new_text": null,
          "old_line_content": "                        DPRINTF(\"Incompatible edge lengths\");",
          "new_line_content": "                if (dist < min_dist &&",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(common >= 0 && common <= 3)",
          "new_text": null,
          "old_line_content": "    CV_DbgAssert(common >= 0 && common <= 3);",
          "new_line_content": "    // remove the quad",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Chessboard detection result 3: %d\", (int)found)",
          "new_text": null,
          "old_line_content": "    DPRINTF(\"Chessboard detection result 3: %d\", (int)found);",
          "new_line_content": "        for (int k = 0; k < pattern_size.width*pattern_size.height; ++k)",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(closest_quad)",
          "new_text": null,
          "old_line_content": "                CV_Assert(closest_quad);",
          "new_line_content": "                        continue;",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "std::swap(out_corners[i], out_corners[n-i-1])",
          "new_api": null,
          "old_text": "std::swap(out_corners[i], out_corners[n-i-1])",
          "new_text": null,
          "old_line_content": "                    std::swap(out_corners[i], out_corners[n-i-1]);",
          "new_line_content": "    if (found)",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "Size",
          "new_api": null,
          "old_text": "Size(-1,-1)",
          "new_text": null,
          "old_line_content": "        cv::cornerSubPix(img, out_corners, Size(2, 2), Size(-1,-1),",
          "new_line_content": "            int last_row = (pattern_size.height-1)*pattern_size.width;",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1)",
          "new_api": null,
          "old_text": "cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1)",
          "new_text": null,
          "old_line_content": "                         cv::TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 15, 0.1));",
          "new_line_content": "            double dy0 = out_corners[last_row].y - out_corners[0].y;",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "copyTo",
          "new_api": null,
          "old_text": "Mat(out_corners).copyTo(corners_)",
          "new_text": null,
          "old_line_content": "    Mat(out_corners).copyTo(corners_);",
          "new_line_content": "                int n = pattern_size.width*pattern_size.height;",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt)",
          "new_api": null,
          "old_text": "normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt)",
          "new_text": null,
          "old_line_content": "                    if (normL2Sqr<float>(closest_corner.pt - cur_quad.corners[j]->pt) < min_dist)",
          "new_line_content": "                // than the current one, then we don't count this one after all.",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "size",
          "new_api": null,
          "old_text": "quad_group.size()",
          "new_text": null,
          "old_line_content": "    int quad_count = (int)quad_group.size();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(quad_count > 0)",
          "new_text": null,
          "old_line_content": "    CV_DbgAssert(quad_count > 0);",
          "new_line_content": "// if we found too many connect quads, remove those which probably do not belong.",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "Mat",
          "new_api": null,
          "old_text": "Mat(closest_corner.pt)",
          "new_text": null,
          "old_line_content": "                query = Mat(closest_corner.pt);",
          "new_line_content": "                // Check that each corner is a neighbor of different quads",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "radiusSearch",
          "new_api": null,
          "old_text": "all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params)",
          "new_text": null,
          "old_line_content": "                neighbors_count = all_quads_pts_index.radiusSearch(query, neighbors_indices, neighbors_dists, radius, search_params);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(dy0)",
          "new_text": null,
          "old_line_content": "            if (fabs(dx0) + fabs(dy0) < FLT_EPSILON)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "const_cast<ChessBoardQuad&>(all_quads[j])",
          "new_api": null,
          "old_text": "const_cast<ChessBoardQuad&>(all_quads[j])",
          "new_text": null,
          "old_line_content": "                    ChessBoardQuad* q = &const_cast<ChessBoardQuad&>(all_quads[j]);",
          "new_line_content": "                // is different from cur_quad->corners[i]->pt",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(q)",
          "new_text": null,
          "old_line_content": "                    CV_DbgAssert(q);",
          "new_line_content": "                int neighbor_idx_idx = 0;",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt)",
          "new_api": null,
          "old_text": "normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt)",
          "new_text": null,
          "old_line_content": "                        if (normL2Sqr<float>(closest_corner.pt - q->corners[k]->pt) < min_dist)",
          "new_line_content": "                    const int neighbor_idx = neighbors_indices[neighbor_idx_idx];",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "size",
          "new_api": null,
          "old_text": "all_quads.size()",
          "new_text": null,
          "old_line_content": "    const int max_quad_buf_size = (int)all_quads.size();",
          "new_line_content": "// order of corners:",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "size",
          "new_api": null,
          "old_text": "quads.size()",
          "new_text": null,
          "old_line_content": "    int quad_count = (int)quads.size();",
          "new_line_content": "//   0 is top left",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "cv::convexHull(points, hull, true)",
          "new_api": null,
          "old_text": "cv::convexHull(points, hull, true)",
          "new_text": null,
          "old_line_content": "            cv::convexHull(points, hull, true);",
          "new_line_content": "        double min_box_area = DBL_MAX;",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "contourArea",
          "new_api": null,
          "old_text": "contourArea(hull, false)",
          "new_text": null,
          "old_line_content": "            double hull_area = contourArea(hull, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "deallocate",
          "new_api": null,
          "old_text": "all_quads.deallocate()",
          "new_text": null,
          "old_line_content": "    all_quads.deallocate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "deallocate",
          "new_api": null,
          "old_text": "all_corners.deallocate()",
          "new_text": null,
          "old_line_content": "    all_corners.deallocate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(q)",
          "new_text": null,
          "old_line_content": "            CV_DbgAssert(q);",
          "new_line_content": "                min_box_area = hull_area;",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "push",
          "new_api": null,
          "old_text": "stack.push(start)",
          "new_text": null,
          "old_line_content": "    stack.push(start);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "empty",
          "new_api": null,
          "old_text": "contours.empty()",
          "new_text": null,
          "old_line_content": "    if (contours.empty())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "CV_LOG_DEBUG",
          "new_api": null,
          "old_text": "CV_LOG_DEBUG(NULL, \"calib3d(chessboard): cv::findContours() returns no contours\")",
          "new_text": null,
          "old_line_content": "        CV_LOG_DEBUG(NULL, \"calib3d(chessboard): cv::findContours() returns no contours\");",
          "new_line_content": "    const int min_area = 25; //cvRound( image->cols * image->rows * .03 * 0.01 * 0.92 );",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "empty",
          "new_api": null,
          "old_text": "stack.empty()",
          "new_text": null,
          "old_line_content": "    while (!stack.empty())",
          "new_line_content": "    std::map<int, int> col_hist;",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "size",
          "new_api": null,
          "old_text": "contours.size()",
          "new_text": null,
          "old_line_content": "    std::vector<int> contour_child_counter(contours.size(), 0);",
          "new_line_content": "    std::vector<std::vector<Point> > contours;",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(q)",
          "new_text": null,
          "old_line_content": "        ChessBoardQuad* q = stack.top(); stack.pop(); CV_Assert(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "resize",
          "new_api": null,
          "old_text": "quad_group.resize(quad_count)",
          "new_text": null,
          "old_line_content": "    quad_group.resize(quad_count);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "boundingRect",
          "new_api": null,
          "old_text": "boundingRect(contour)",
          "new_text": null,
          "old_line_content": "        Rect contour_rect = boundingRect(contour);",
          "new_line_content": "    int boardIdx = -1;",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "area",
          "new_api": null,
          "old_text": "contour_rect.area()",
          "new_text": null,
          "old_line_content": "        if (contour_rect.area() < min_area)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(q)",
          "new_text": null,
          "old_line_content": "            CV_DbgAssert(q);",
          "new_line_content": "        col_hist[col]++;",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "size",
          "new_api": null,
          "old_text": "approx_contour.size()",
          "new_text": null,
          "old_line_content": "        for (int approx_level = min_approx_level; approx_contour.size() > 4 && approx_level <= max_approx_level; approx_level++ )",
          "new_line_content": "        if (hierarchy[idx][2] != -1 || parentIdx == -1)  // holes only (no child contours and with parent)",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "clear",
          "new_api": null,
          "old_text": "out_group.clear()",
          "new_text": null,
          "old_line_content": "    out_group.clear();",
          "new_line_content": "        centers[min_box_area_index] = centers[quad_count];",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "approxPolyDP",
          "new_api": null,
          "old_text": "approxPolyDP(approx_contour, approx_contour, (float)approx_level, true)",
          "new_text": null,
          "old_line_content": "            approxPolyDP(approx_contour, approx_contour, (float)approx_level, true);",
          "new_line_content": "        const std::vector<Point>& contour = contours[idx];",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "size",
          "new_api": null,
          "old_text": "approx_contour.size()",
          "new_text": null,
          "old_line_content": "        if (approx_contour.size() != 4)",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "cv::isContourConvex(approx_contour)",
          "new_api": null,
          "old_text": "cv::isContourConvex(approx_contour)",
          "new_text": null,
          "old_line_content": "        if (!cv::isContourConvex(approx_contour))",
          "new_line_content": "        std::vector<Point> approx_contour = contour;",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "size",
          "new_api": null,
          "old_text": "contour_quads.size()",
          "new_text": null,
          "old_line_content": "        CV_LOG_VERBOSE(NULL, 9, \"... contours(\" << contour_quads.size() << \" added):\" << pt[0] << \" \" << pt[1] << \" \" << pt[2] << \" \" << pt[3]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"col: %d  row: %d\", col, row)",
          "new_text": null,
          "old_line_content": "                DPRINTF(\"col: %d  row: %d\", col, row);",
          "new_line_content": "            case 1:",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(q->corners[i])",
          "new_text": null,
          "old_line_content": "                CV_Assert(q->corners[i]);",
          "new_line_content": "                col += 2; break;",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "orderQuad",
          "new_api": null,
          "old_text": "orderQuad(*neighbor, *(q->corners[i]), (i+2)&3)",
          "new_text": null,
          "old_line_content": "                orderQuad(*neighbor, *(q->corners[i]), (i+2)&3); // set in order",
          "new_line_content": "            case 2:",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "push",
          "new_api": null,
          "old_text": "stack.push(q)",
          "new_text": null,
          "old_line_content": "        stack.push(q);",
          "new_line_content": "    std::stack<ChessBoardQuad*> stack;",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out_group.push_back(q)",
          "new_text": null,
          "old_line_content": "        out_group.push_back(q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "empty",
          "new_api": null,
          "old_text": "stack.empty()",
          "new_text": null,
          "old_line_content": "        while (!stack.empty())",
          "new_line_content": "        ChessBoardQuad* q = (ChessBoardQuad*)&all_quads[i];",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "push",
          "new_api": null,
          "old_text": "stack.push(neighbor)",
          "new_text": null,
          "old_line_content": "                stack.push(neighbor);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(q)",
          "new_text": null,
          "old_line_content": "            q = stack.top(); CV_Assert(q);",
          "new_line_content": "        // Scan the array for a first unlabeled quad",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "pop",
          "new_api": null,
          "old_text": "stack.pop()",
          "new_text": null,
          "old_line_content": "            stack.pop();",
          "new_line_content": "        if (q->count <= 0 || q->group_idx >= 0) continue;",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "cv::arcLength(approx_contour, true)",
          "new_api": null,
          "old_text": "cv::arcLength(approx_contour, true)",
          "new_text": null,
          "old_line_content": "            double p = cv::arcLength(approx_contour, true);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "normL2Sqr<double>(pt[0] - pt[2])",
          "new_api": null,
          "old_text": "normL2Sqr<double>(pt[0] - pt[2])",
          "new_text": null,
          "old_line_content": "            double d1 = sqrt(normL2Sqr<double>(pt[0] - pt[2]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "normL2Sqr<double>(pt[0] - pt[1])",
          "new_api": null,
          "old_text": "normL2Sqr<double>(pt[0] - pt[1])",
          "new_text": null,
          "old_line_content": "            double d3 = sqrt(normL2Sqr<double>(pt[0] - pt[1]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "normL2Sqr<double>(pt[1] - pt[2])",
          "new_api": null,
          "old_text": "normL2Sqr<double>(pt[1] - pt[2])",
          "new_text": null,
          "old_line_content": "            double d4 = sqrt(normL2Sqr<double>(pt[1] - pt[2]));",
          "new_line_content": "        if (filterQuads)",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "normL2Sqr<double>(pt[1] - pt[3])",
          "new_api": null,
          "old_text": "normL2Sqr<double>(pt[1] - pt[3])",
          "new_text": null,
          "old_line_content": "            double d2 = sqrt(normL2Sqr<double>(pt[1] - pt[3]));",
          "new_line_content": "        cv::Point pt[4];",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "push",
          "new_api": null,
          "old_text": "stack.push(neighbor)",
          "new_text": null,
          "old_line_content": "                    stack.push(neighbor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": "size",
          "new_api": null,
          "old_text": "contour_quads.size()",
          "new_text": null,
          "old_line_content": "    size_t total = contour_quads.size();",
          "new_line_content": "                d1 >= 0.15 * p && d2 >= 0.15 * p))",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "std::max((size_t)2, total * 3)",
          "new_api": null,
          "old_text": "std::max((size_t)2, total * 3)",
          "new_text": null,
          "old_line_content": "    size_t max_quad_buf_size = std::max((size_t)2, total * 3);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "allocate",
          "new_api": null,
          "old_text": "all_quads.allocate(max_quad_buf_size)",
          "new_text": null,
          "old_line_content": "    all_quads.allocate(max_quad_buf_size);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": "allocate",
          "new_api": null,
          "old_text": "all_corners.allocate(max_quad_buf_size * 4)",
          "new_text": null,
          "old_line_content": "    all_corners.allocate(max_quad_buf_size * 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Size: %dx%d  Pattern: %dx%d\", dcol, drow, w, h)",
          "new_text": null,
          "old_line_content": "    DPRINTF(\"Size: %dx%d  Pattern: %dx%d\", dcol, drow, w, h);",
          "new_line_content": "    int drow = row_max - row_min + 1;",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "size",
          "new_api": null,
          "old_text": "quad_group.size()",
          "new_text": null,
          "old_line_content": "    int quad_count = (int)quad_group.size();",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Too few inner quad rows/cols\")",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Too few inner quad rows/cols\");",
          "new_line_content": "        (w < h && drow < dcol))",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "ChessBoardQuad",
          "new_api": null,
          "old_text": "ChessBoardQuad()",
          "new_text": null,
          "old_line_content": "        q = ChessBoardQuad();",
          "new_line_content": "    // Create array of quads structures",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Trimming cols\")",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Trimming cols\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Trimming left col\")",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"Trimming left col\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "ChessBoardCorner",
          "new_api": null,
          "old_text": "ChessBoardCorner(pt)",
          "new_text": null,
          "old_line_content": "            corner = ChessBoardCorner(pt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Trimming right col\")",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"Trimming right col\");",
          "new_line_content": "    // too many columns, not very common",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "trimCol",
          "new_api": null,
          "old_text": "trimCol(quads, col_max, +1)",
          "new_text": null,
          "old_line_content": "            trimCol(quads, col_max, +1);",
          "new_line_content": "    if (dcol == w+1)    // too many, trim",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt)",
          "new_api": null,
          "old_text": "normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt)",
          "new_text": null,
          "old_line_content": "            float d = normL2Sqr<float>(q.corners[i]->pt - q.corners[(i+1)&3]->pt);",
          "new_line_content": "        for (int i = 0; i < 4; ++i)",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "std::min(q.edge_len, d)",
          "new_api": null,
          "old_text": "std::min(q.edge_len, d)",
          "new_text": null,
          "old_line_content": "            q.edge_len = std::min(q.edge_len, d);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Trimming rows\")",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Trimming rows\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "CV_LOG_VERBOSE",
          "new_api": null,
          "old_text": "CV_LOG_VERBOSE(NULL, 3, \"Total quad contours: \" << total)",
          "new_text": null,
          "old_line_content": "    CV_LOG_VERBOSE(NULL, 3, \"Total quad contours: \" << total);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Trimming bottom row\")",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"Trimming bottom row\");",
          "new_line_content": "    // too many rows, not very common",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "trimRow",
          "new_api": null,
          "old_text": "trimRow(quads, row_max, +1)",
          "new_text": null,
          "old_line_content": "            trimRow(quads, row_max, +1);",
          "new_line_content": "    if (drow == h+1)    // too many, trim",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "resize",
          "new_api": null,
          "old_text": "out_corners.resize(0)",
          "new_text": null,
          "old_line_content": "    out_corners.resize(0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "size",
          "new_api": null,
          "old_text": "quads.size()",
          "new_text": null,
          "old_line_content": "    quad_count = (int)quads.size(); // update after icvTrimCol/icvTrimRow",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "findQuadNeighbors",
          "new_api": null,
          "old_text": "findQuadNeighbors()",
          "new_text": null,
          "old_line_content": "    findQuadNeighbors();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "empty",
          "new_api": null,
          "old_text": "quad_group.empty()",
          "new_text": null,
          "old_line_content": "        if (quad_group.empty())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "size",
          "new_api": null,
          "old_text": "quad_group.size()",
          "new_text": null,
          "old_line_content": "        int count = (int)quad_group.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Starting ordering of inner quads (%d)\", count)",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Starting ordering of inner quads (%d)\", count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "orderFoundConnectedQuads",
          "new_api": null,
          "old_text": "orderFoundConnectedQuads(quad_group)",
          "new_text": null,
          "old_line_content": "        count = orderFoundConnectedQuads(quad_group);",
          "new_line_content": "    for (int group_idx = 0; ; group_idx++)",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Finished ordering of inner quads (%d)\", count)",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Finished ordering of inner quads (%d)\", count);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "CV_DbgAssert",
          "new_api": null,
          "old_text": "CV_DbgAssert(0 <= n && n <= 4)",
          "new_text": null,
          "old_line_content": "        CV_DbgAssert(0 <= n && n <= 4);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": "cleanFoundConnectedQuads",
          "new_api": null,
          "old_text": "cleanFoundConnectedQuads(quad_group)",
          "new_text": null,
          "old_line_content": "        count = cleanFoundConnectedQuads(quad_group);",
          "new_line_content": "        // order the quad corners globally",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Connected group: %d, count: %d\", group_idx, count)",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Connected group: %d, count: %d\", group_idx, count);",
          "new_line_content": "        // maybe delete or add some",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Adding inner: col: %d  row: %d\", col, row)",
          "new_text": null,
          "old_line_content": "                    DPRINTF(\"Adding inner: col: %d  row: %d\", col, row);",
          "new_line_content": "                case 2:",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(q.corners[j])",
          "new_text": null,
          "old_line_content": "                    CV_Assert(q.corners[j]);",
          "new_line_content": "                case 3:",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "orderQuad",
          "new_api": null,
          "old_text": "orderQuad(*neighbor, *q.corners[j], (j+2)&3)",
          "new_text": null,
          "old_line_content": "                    orderQuad(*neighbor, *q.corners[j], (j+2)&3);",
          "new_line_content": "                    col -= 2; break;",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "std::min(n, pattern_size.width * pattern_size.height)",
          "new_api": null,
          "old_text": "std::min(n, pattern_size.width * pattern_size.height)",
          "new_text": null,
          "old_line_content": "        n = std::min(n, pattern_size.width * pattern_size.height);",
          "new_line_content": "            continue;       // haven't found inner quads",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Found %d inner quads not connected to outer quads, repairing\", found)",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Found %d inner quads not connected to outer quads, repairing\", found);",
          "new_line_content": "                    neighbor->row = row;",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "size",
          "new_api": null,
          "old_text": "out_corners.size()",
          "new_text": null,
          "old_line_content": "        if (count > 0 || (-count > (int)out_corners.size()))",
          "new_line_content": "        int total = 0;",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "clear",
          "new_api": null,
          "old_text": "out_corners.clear()",
          "new_text": null,
          "old_line_content": "    out_corners.clear();",
          "new_line_content": "    // if we do not have such, start with a corner of a quad with two neighbors.",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out_corners.push_back(cur)",
          "new_text": null,
          "old_line_content": "    out_corners.push_back(cur);",
          "new_line_content": "    if( !first )",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": "clear",
          "new_api": null,
          "old_text": "out_corners.clear()",
          "new_text": null,
          "old_line_content": "            out_corners.clear();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "addOuterQuad",
          "new_api": null,
          "old_text": "addOuterQuad(q, quads)",
          "new_text": null,
          "old_line_content": "                int added = addOuterQuad(q, quads);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "out_corners.reserve(n)",
          "new_text": null,
          "old_line_content": "            out_corners.reserve(n);",
          "new_line_content": "            int ni = 0;",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out_corners.push_back(corner_group[i]->pt)",
          "new_text": null,
          "old_line_content": "                out_corners.push_back(corner_group[i]->pt);",
          "new_line_content": "            sum_dist += sum;",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Inner bounds ok, check outer quads\")",
          "new_text": null,
          "old_line_content": "        DPRINTF(\"Inner bounds ok, check outer quads\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "CV_INSTRUMENT_REGION",
          "new_api": null,
          "old_text": "CV_INSTRUMENT_REGION()",
          "new_text": null,
          "old_line_content": "    CV_INSTRUMENT_REGION();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "type",
          "new_api": null,
          "old_text": "image.type()",
          "new_text": null,
          "old_line_content": "    int type = image.type();",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "CV_MAT_CN",
          "new_api": null,
          "old_text": "CV_MAT_CN(type)",
          "new_text": null,
          "old_line_content": "    int cn = CV_MAT_CN(type);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "CV_CheckType",
          "new_api": null,
          "old_text": "CV_CheckType(type, cn == 1 || cn == 3 || cn == 4,\n            \"Number of channels must be 1, 3 or 4\" )",
          "new_text": null,
          "old_line_content": "    CV_CheckType(type, cn == 1 || cn == 3 || cn == 4,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out_corners.push_back(right)",
          "new_text": null,
          "old_line_content": "        out_corners.push_back(right);",
          "new_line_content": "        !below || (below->count != 2 && below->count != 3) )",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "CV_MAT_DEPTH",
          "new_api": null,
          "old_text": "CV_MAT_DEPTH(type)",
          "new_text": null,
          "old_line_content": "    int depth = CV_MAT_DEPTH(type);",
          "new_line_content": "void drawChessboardCorners( InputOutputArray image, Size patternSize,",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Removing quad %d\", i)",
          "new_text": null,
          "old_line_content": "                    DPRINTF(\"Removing quad %d\", i);",
          "new_line_content": "            ChessBoardQuad& q = *quads[i];",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "removeQuadFromGroup",
          "new_api": null,
          "old_text": "removeQuadFromGroup(quads, q)",
          "new_text": null,
          "old_line_content": "                    removeQuadFromGroup(quads, q);",
          "new_line_content": "            if (q.ordered == false)",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "std::max(pattern_size.width,pattern_size.height)",
          "new_api": null,
          "old_text": "std::max(pattern_size.width,pattern_size.height)",
          "new_text": null,
          "old_line_content": "        if( right->count != 3 || (int)out_corners.size() >= std::max(pattern_size.width,pattern_size.height) )",
          "new_line_content": "    cur->row = 0;",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "CV_CheckType",
          "new_api": null,
          "old_text": "CV_CheckType(type, depth == CV_8U || depth == CV_16U || depth == CV_32F,\n            \"Only 8-bit, 16-bit or floating-point 32-bit images are supported\")",
          "new_text": null,
          "old_line_content": "    CV_CheckType(type, depth == CV_8U || depth == CV_16U || depth == CV_32F,",
          "new_line_content": "                                InputArray _corners,",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "size",
          "new_api": null,
          "old_text": "quads.size()",
          "new_text": null,
          "old_line_content": "        return (int)quads.size();",
          "new_line_content": "                    if (q.neighbors[j] && q.neighbors[j]->ordered)",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "checkVector",
          "new_api": null,
          "old_text": "corners.checkVector(2, CV_32F, true)",
          "new_text": null,
          "old_line_content": "    int nelems = corners.checkVector(2, CV_32F, true);",
          "new_line_content": "            \"Number of channels must be 1, 3 or 4\" );",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "CV_Assert",
          "new_api": null,
          "old_text": "CV_Assert(nelems >= 0)",
          "new_text": null,
          "old_line_content": "    CV_Assert(nelems >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "size",
          "new_api": null,
          "old_text": "all_quads.size()",
          "new_text": null,
          "old_line_content": "    int max_quad_buf_size = (int)all_quads.size();",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "size",
          "new_api": null,
          "old_text": "out_corners.size()",
          "new_text": null,
          "old_line_content": "    width = (int)out_corners.size();",
          "new_line_content": "                    if (c->neighbors[kk] == below)",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "DPRINTF",
          "new_api": null,
          "old_text": "DPRINTF(\"Adding quad as neighbor 2\")",
          "new_text": null,
          "old_line_content": "            DPRINTF(\"Adding quad as neighbor 2\");",
          "new_line_content": "// <quad> is ordered",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "ChessBoardQuad",
          "new_api": null,
          "old_text": "ChessBoardQuad(0)",
          "new_text": null,
          "old_line_content": "            q = ChessBoardQuad(0);",
          "new_line_content": "    int added = 0;",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "quads.push_back(&q)",
          "new_text": null,
          "old_line_content": "            quads.push_back(&q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "Scalar::all(200)",
          "new_api": null,
          "old_text": "Scalar::all(200)",
          "new_text": null,
          "old_line_content": "            color = Scalar::all(200);",
          "new_line_content": "    case CV_32F:",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "out_corners.push_back(cur)",
          "new_text": null,
          "old_line_content": "            out_corners.push_back(cur);",
          "new_line_content": "    // find and store all the other rows",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(corners_data[i].x*(1 << shift))",
          "new_text": null,
          "old_line_content": "                    cvRound(corners_data[i].x*(1 << shift)),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2014,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(corners_data[i].y*(1 << shift))",
          "new_text": null,
          "old_line_content": "                    cvRound(corners_data[i].y*(1 << shift))",
          "new_line_content": "    if (!patternWasFound)",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point( pt.x + r, pt.y + r)",
          "new_text": null,
          "old_line_content": "            line(image, Point(pt.x - r, pt.y - r), Point( pt.x + r, pt.y + r), color, 1, line_type, shift);",
          "new_line_content": "        Scalar color(0,0,255,0);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": "Point",
          "new_api": null,
          "old_text": "Point( pt.x + r, pt.y - r)",
          "new_text": null,
          "old_line_content": "            line(image, Point(pt.x - r, pt.y + r), Point( pt.x + r, pt.y - r), color, 1, line_type, shift);",
          "new_line_content": "        if (cn == 1)",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "ChessBoardCorner",
          "new_api": null,
          "old_text": "ChessBoardCorner(pt)",
          "new_text": null,
          "old_line_content": "                corner = ChessBoardCorner(pt);",
          "new_line_content": "            q.count = 1;   // number of neighbors",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": "Scalar::all(200)",
          "new_api": null,
          "old_text": "Scalar::all(200)",
          "new_text": null,
          "old_line_content": "                color = Scalar::all(200);",
          "new_line_content": "            {200,200,0,0},",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": "cvRound",
          "new_api": null,
          "old_text": "cvRound(corners_data[i].x*(1 << shift))",
          "new_text": null,
          "old_line_content": "                        cvRound(corners_data[i].x*(1 << shift)),",
          "new_line_content": "        for (int y = 0, i = 0; y < patternSize.height; y++)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 33,
      "total_additions": 187,
      "total_deletions": 184,
      "total_api_changes": 404
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 16,
        "api_related_lines": 404,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          610,
          611,
          586,
          589,
          600,
          601,
          606
        ]
      }
    },
    "api_calls_before": 346,
    "api_calls_after": 351,
    "diff_info": {
      "added_lines": 14,
      "removed_lines": 3,
      "total_diff_lines": 38
    }
  }
}
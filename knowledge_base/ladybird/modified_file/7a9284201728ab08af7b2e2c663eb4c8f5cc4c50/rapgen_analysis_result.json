{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7a9284201728ab08af7b2e2c663eb4c8f5cc4c50",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7a9284201728ab08af7b2e2c663eb4c8f5cc4c50/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7a9284201728ab08af7b2e2c663eb4c8f5cc4c50/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7a9284201728ab08af7b2e2c663eb4c8f5cc4c50/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 538,
          "old_api": "read_until_any_of",
          "new_api": "read_until",
          "old_text": "read_until_any_of(buffer, Array { candidate })",
          "new_text": "read_until(buffer, \"\\n\"sv)",
          "old_line_content": "        return read_until_any_of(buffer, Array { candidate });",
          "new_line_content": "        return read_until(buffer, \"\\n\"sv);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "size",
          "new_api": "span",
          "old_text": "buffer.size()",
          "new_text": "m_buffer.span().slice(0, m_buffered_size).copy_to(buffer)",
          "old_line_content": "        size_t maximum_offset = min(m_buffered_size, buffer.size());",
          "new_line_content": "            m_buffer.span().slice(0, m_buffered_size).copy_to(buffer);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "length",
          "new_api": "span",
          "old_text": "candidate.length()",
          "new_text": "m_buffer.span().offset(offset)",
          "old_line_content": "                    longest_match = max(longest_match, candidate.length());",
          "new_line_content": "            StringView remaining_buffer { m_buffer.span().offset(offset), maximum_offset - offset };",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "span",
          "new_api": "starts_with",
          "old_text": "m_buffer.span().slice(0, offset)",
          "new_text": "remaining_buffer.starts_with(candidate)",
          "old_line_content": "                auto buffer_to_take = m_buffer.span().slice(0, offset);",
          "new_line_content": "                if (remaining_buffer.starts_with(candidate))",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "span",
          "new_api": "length",
          "old_text": "m_buffer.span().slice(offset + longest_match)",
          "new_text": "candidate.length()",
          "old_line_content": "                auto buffer_to_shift = m_buffer.span().slice(offset + longest_match);",
          "new_line_content": "                    longest_match = max(longest_match, candidate.length());",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "size",
          "new_api": "is_eof",
          "old_text": "m_buffer.size()",
          "new_text": "stream().is_eof()",
          "old_line_content": "        return m_buffer.size();",
          "new_line_content": "        return stream().is_eof();",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "stream",
          "new_api": "move",
          "old_text": "m_helper.stream().close()",
          "new_text": "move(buffer)",
          "old_line_content": "    virtual void close() override { m_helper.stream().close(); }",
          "new_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_helper.read(move(buffer)); }",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "stream",
          "new_api": "is_eof",
          "old_text": "m_helper.stream().seek(offset, mode)",
          "new_text": "m_helper.is_eof()",
          "old_line_content": "        auto result = TRY(m_helper.stream().seek(offset, mode));",
          "new_line_content": "    virtual bool is_eof() const override { return m_helper.is_eof(); }",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "clear_buffer",
          "new_api": "stream",
          "old_text": "m_helper.clear_buffer()",
          "new_text": "m_helper.stream().is_open()",
          "old_line_content": "        m_helper.clear_buffer();",
          "new_line_content": "    virtual bool is_open() const override { return m_helper.stream().is_open(); }",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "move",
          "new_api": "stream",
          "old_text": "move(buffer)",
          "new_text": "m_helper.stream().seek(offset, mode)",
          "old_line_content": "    ErrorOr<size_t> read_line(Bytes buffer) { return m_helper.read_line(move(buffer)); }",
          "new_line_content": "        auto result = TRY(m_helper.stream().seek(offset, mode));",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "move",
          "new_api": "clear_buffer",
          "old_text": "move(candidate)",
          "new_text": "m_helper.clear_buffer()",
          "old_line_content": "    ErrorOr<size_t> read_until(Bytes buffer, StringView const& candidate) { return m_helper.read_until(move(buffer), move(candidate)); }",
          "new_line_content": "        m_helper.clear_buffer();",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "buffer_size",
          "new_api": "move",
          "old_text": "m_helper.buffer_size()",
          "new_text": "move(candidate)",
          "old_line_content": "    size_t buffer_size() const { return m_helper.buffer_size(); }",
          "new_line_content": "    ErrorOr<size_t> read_until(Bytes buffer, StringView const& candidate) { return m_helper.read_until(move(buffer), move(candidate)); }",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "static_cast<Socket&&>(other)",
          "new_api": "setup_notifier",
          "old_text": "static_cast<Socket&&>(other)",
          "new_text": "setup_notifier()",
          "old_line_content": "        Socket::operator=(static_cast<Socket&&>(other));",
          "new_line_content": "        setup_notifier();",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "move",
          "new_api": "setup_notifier",
          "old_text": "move(buffer)",
          "new_text": "setup_notifier()",
          "old_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_helper.read(move(buffer)); }",
          "new_line_content": "        setup_notifier();",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "stream",
          "new_api": "move",
          "old_text": "m_helper.stream().close()",
          "new_text": "move(buffer)",
          "old_line_content": "    virtual void close() override { m_helper.stream().close(); }",
          "new_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_helper.read(move(buffer)); }",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "stream",
          "new_api": "is_eof",
          "old_text": "m_helper.stream().set_blocking(enabled)",
          "new_text": "m_helper.is_eof()",
          "old_line_content": "    virtual ErrorOr<void> set_blocking(bool enabled) override { return m_helper.stream().set_blocking(enabled); }",
          "new_line_content": "    virtual bool is_eof() const override { return m_helper.is_eof(); }",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "move",
          "new_api": "stream",
          "old_text": "move(buffer)",
          "new_text": "m_helper.stream().pending_bytes()",
          "old_line_content": "    ErrorOr<size_t> read_line(Bytes buffer) { return m_helper.read_line(move(buffer)); }",
          "new_line_content": "    virtual ErrorOr<size_t> pending_bytes() const override { return m_helper.stream().pending_bytes(); }",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "move",
          "new_api": "stream",
          "old_text": "move(candidate)",
          "new_text": "m_helper.stream().can_read_without_blocking(timeout)",
          "old_line_content": "    ErrorOr<size_t> read_until(Bytes buffer, StringView const& candidate) { return m_helper.read_until(move(buffer), move(candidate)); }",
          "new_line_content": "    virtual ErrorOr<bool> can_read_without_blocking(int timeout = 0) const override { return m_helper.stream().can_read_without_blocking(timeout); }",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "move",
          "new_api": "stream",
          "old_text": "move(candidates)",
          "new_text": "m_helper.stream().set_close_on_exec(enabled)",
          "old_line_content": "    ErrorOr<size_t> read_until_any_of(Bytes buffer, Array<StringView, N> candidates) { return m_helper.read_until_any_of(move(buffer), move(candidates)); }",
          "new_line_content": "    virtual ErrorOr<void> set_close_on_exec(bool enabled) override { return m_helper.stream().set_close_on_exec(enabled); }",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "buffer_size",
          "new_api": "move",
          "old_text": "m_helper.buffer_size()",
          "new_text": "move(candidate)",
          "old_line_content": "    size_t buffer_size() const { return m_helper.buffer_size(); }",
          "new_line_content": "    ErrorOr<size_t> read_until(Bytes buffer, StringView const& candidate) { return m_helper.read_until(move(buffer), move(candidate)); }",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "stream",
          "new_api": "setup_notifier",
          "old_text": "m_helper.stream()",
          "new_text": "setup_notifier()",
          "old_line_content": "        m_helper.stream().on_ready_to_read = [this] {",
          "new_line_content": "        setup_notifier();",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "T::connect(address)",
          "new_api": "T::connect(host, port)",
          "old_text": "T::connect(address)",
          "new_text": "T::connect(host, port)",
          "old_line_content": "        return make<BasicReusableSocket<T>>(TRY(T::connect(address)));",
          "new_line_content": "        return make<BasicReusableSocket<T>>(TRY(T::connect(host, port)));",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "is_open",
          "new_api": "T::connect(address)",
          "old_text": "m_socket.is_open()",
          "new_text": "T::connect(address)",
          "old_line_content": "        return m_socket.is_open();",
          "new_line_content": "        return make<BasicReusableSocket<T>>(TRY(T::connect(address)));",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "is_connected",
          "new_api": "is_open",
          "old_text": "is_connected()",
          "new_text": "m_socket.is_open()",
          "old_line_content": "        if (is_connected())",
          "new_line_content": "        return m_socket.is_open();",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "move",
          "new_api": "T::connect(address)",
          "old_text": "move(buffer)",
          "new_text": "T::connect(address)",
          "old_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_socket.read(move(buffer)); }",
          "new_line_content": "        m_socket = TRY(T::connect(address));",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "is_open",
          "new_api": "is_readable",
          "old_text": "m_socket.is_open()",
          "new_text": "m_socket.is_readable()",
          "old_line_content": "    virtual bool is_open() const override { return m_socket.is_open(); }",
          "new_line_content": "    virtual bool is_readable() const override { return m_socket.is_readable(); }",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "close",
          "new_api": "move",
          "old_text": "m_socket.close()",
          "new_text": "move(buffer)",
          "old_line_content": "    virtual void close() override { m_socket.close(); }",
          "new_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_socket.read(move(buffer)); }",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "pending_bytes",
          "new_api": "is_writable",
          "old_text": "m_socket.pending_bytes()",
          "new_text": "m_socket.is_writable()",
          "old_line_content": "    virtual ErrorOr<size_t> pending_bytes() const override { return m_socket.pending_bytes(); }",
          "new_line_content": "    virtual bool is_writable() const override { return m_socket.is_writable(); }",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "can_read_without_blocking",
          "new_api": "write",
          "old_text": "m_socket.can_read_without_blocking(timeout)",
          "new_text": "m_socket.write(buffer)",
          "old_line_content": "    virtual ErrorOr<bool> can_read_without_blocking(int timeout = 0) const override { return m_socket.can_read_without_blocking(timeout); }",
          "new_line_content": "    virtual ErrorOr<size_t> write(ReadonlyBytes buffer) override { return m_socket.write(buffer); }",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "set_blocking",
          "new_api": "is_eof",
          "old_text": "m_socket.set_blocking(enabled)",
          "new_text": "m_socket.is_eof()",
          "old_line_content": "    virtual ErrorOr<void> set_blocking(bool enabled) override { return m_socket.set_blocking(enabled); }",
          "new_line_content": "    virtual bool is_eof() const override { return m_socket.is_eof(); }",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "set_close_on_exec",
          "new_api": "is_open",
          "old_text": "m_socket.set_close_on_exec(enabled)",
          "new_text": "m_socket.is_open()",
          "old_line_content": "    virtual ErrorOr<void> set_close_on_exec(bool enabled) override { return m_socket.set_close_on_exec(enabled); }",
          "new_line_content": "    virtual bool is_open() const override { return m_socket.is_open(); }",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "move",
          "new_api": "set_blocking",
          "old_text": "move(socket)",
          "new_text": "m_socket.set_blocking(enabled)",
          "old_line_content": "        : m_socket(move(socket))",
          "new_line_content": "    virtual ErrorOr<void> set_blocking(bool enabled) override { return m_socket.set_blocking(enabled); }",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 642,
          "old_api": null,
          "new_api": "contains_slow",
          "old_text": null,
          "new_text": "populated_slice.contains_slow('\\n')",
          "old_line_content": "    }",
          "new_line_content": "            if (populated_slice.contains_slow('\\n'))",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream().close()",
          "old_line_content": "",
          "new_line_content": "    virtual void close() override { m_helper.stream().close(); }",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream().set_blocking(enabled)",
          "old_line_content": "    template<size_t N>",
          "new_line_content": "    virtual ErrorOr<void> set_blocking(bool enabled) override { return m_helper.stream().set_blocking(enabled); }",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(buffer)",
          "old_line_content": "",
          "new_line_content": "    ErrorOr<size_t> read_line(Bytes buffer) { return m_helper.read_line(move(buffer)); }",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(candidates)",
          "old_line_content": "    virtual ~BufferedSocket() override { }",
          "new_line_content": "    ErrorOr<size_t> read_until_any_of(Bytes buffer, Array<StringView, N> candidates) { return m_helper.read_until_any_of(move(buffer), move(candidates)); }",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "can_read_line",
          "old_text": null,
          "new_text": "m_helper.can_read_line()",
          "old_line_content": "",
          "new_line_content": "    ErrorOr<bool> can_read_line() { return m_helper.can_read_line(); }",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "populate_read_buffer",
          "old_text": null,
          "new_text": "populate_read_buffer()",
          "old_line_content": "    // Reads into the buffer until \\n is encountered.",
          "new_line_content": "            TRY(populate_read_buffer());",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "buffer_size",
          "old_text": null,
          "new_text": "m_helper.buffer_size()",
          "old_line_content": "    BufferedSocket(NonnullOwnPtr<T> stream, ByteBuffer buffer)",
          "new_line_content": "    size_t buffer_size() const { return m_helper.buffer_size(); }",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_buffer.size()",
          "old_line_content": "        m_buffered_size = 0;",
          "new_line_content": "        return m_buffer.size();",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(stream)",
          "old_line_content": "    void setup_notifier()",
          "new_line_content": "        : m_helper(Badge<BufferedSocket<T>> {}, move(stream), buffer)",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream()",
          "old_line_content": "",
          "new_line_content": "        m_helper.stream().on_ready_to_read = [this] {",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "read_until_any_of",
          "old_text": null,
          "new_text": "read_until_any_of(buffer, Array { candidate })",
          "old_line_content": "    {",
          "new_line_content": "        return read_until_any_of(buffer, Array { candidate });",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_buffer.size()",
          "old_line_content": "        m_buffered_size += nread;",
          "new_line_content": "        if (m_buffered_size == m_buffer.size())",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "on_ready_to_read",
          "old_text": null,
          "new_text": "on_ready_to_read()",
          "old_line_content": "};",
          "new_line_content": "                on_ready_to_read();",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(m_buffered_size)",
          "old_line_content": "",
          "new_line_content": "        auto fillable_slice = m_buffer.span().slice(m_buffered_size);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "stream().read(fillable_slice)",
          "old_line_content": "    NonnullOwnPtr<T> m_stream;",
          "new_line_content": "        auto nread = TRY(stream().read(fillable_slice));",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "is_open",
          "old_text": null,
          "new_text": "stream().is_open()",
          "old_line_content": "",
          "new_line_content": "        if (!stream().is_open())",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "Error::from_errno(ENOTCONN)",
          "old_text": null,
          "new_text": "Error::from_errno(ENOTCONN)",
          "old_line_content": "        // We fill the buffer through can_read_line.",
          "new_line_content": "            return Error::from_errno(ENOTCONN);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "slice",
          "old_text": null,
          "new_text": "fillable_slice.slice(0, nread)",
          "old_line_content": "    //        would avoid excessive copies; however, right now",
          "new_line_content": "        return fillable_slice.slice(0, nread);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "buffer.is_empty()",
          "old_line_content": "            return 0;",
          "new_line_content": "        if (buffer.is_empty())",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "Error::from_errno(ENOBUFS)",
          "old_text": null,
          "new_text": "Error::from_errno(ENOBUFS)",
          "old_line_content": "",
          "new_line_content": "            return Error::from_errno(ENOBUFS);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": null,
          "new_api": "can_read_line",
          "old_text": null,
          "new_text": "can_read_line()",
          "old_line_content": "                // Normally, reading from an EOFed stream and receiving bytes",
          "new_line_content": "        if (!TRY(can_read_line()))",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "is_eof",
          "old_text": null,
          "new_text": "stream().is_eof()",
          "old_line_content": "                // the buffer contents even when the underlying stream is EOF.",
          "new_line_content": "        if (stream().is_eof()) {",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buffer.size()",
          "old_line_content": "                // We already violate this invariant once by giving the user the",
          "new_line_content": "            if (buffer.size() < m_buffered_size) {",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "Error::from_errno(EMSGSIZE)",
          "old_text": null,
          "new_text": "Error::from_errno(EMSGSIZE)",
          "old_line_content": "        }",
          "new_line_content": "                return Error::from_errno(EMSGSIZE);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(stream)",
          "old_line_content": "",
          "new_line_content": "        return BufferedHelper<T>::template create_buffered<BufferedSeekable>(move(stream), buffer_size);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "exchange",
          "old_text": null,
          "new_text": "exchange(m_buffered_size, 0)",
          "old_line_content": "        for (size_t offset = 0; offset < maximum_offset; offset++) {",
          "new_line_content": "            return exchange(m_buffered_size, 0);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buffer.size()",
          "old_line_content": "            // user buffer.",
          "new_line_content": "        size_t maximum_offset = min(m_buffered_size, buffer.size());",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "is_connected",
          "old_text": null,
          "new_text": "is_connected()",
          "old_line_content": "    }",
          "new_line_content": "        if (is_connected())",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "Error::from_errno(EALREADY)",
          "old_text": null,
          "new_text": "Error::from_errno(EALREADY)",
          "old_line_content": "",
          "new_line_content": "            return Error::from_errno(EALREADY);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream().is_writable()",
          "old_line_content": "    virtual ErrorOr<off_t> seek(i64 offset, SeekMode mode) override",
          "new_line_content": "    virtual bool is_writable() const override { return m_helper.stream().is_writable(); }",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream().write(buffer)",
          "old_line_content": "    {",
          "new_line_content": "    virtual ErrorOr<size_t> write(ReadonlyBytes buffer) override { return m_helper.stream().write(buffer); }",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "T::connect(host, port)",
          "old_text": null,
          "new_text": "T::connect(host, port)",
          "old_line_content": "    {",
          "new_line_content": "        m_socket = TRY(T::connect(host, port));",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "stream",
          "old_text": null,
          "new_text": "m_helper.stream().close()",
          "old_line_content": "        return result;",
          "new_line_content": "    virtual void close() override { m_helper.stream().close(); }",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "remaining_buffer.length()",
          "old_line_content": "",
          "new_line_content": "                if (candidate.length() > remaining_buffer.length())",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "is_connected",
          "old_text": null,
          "new_text": "is_connected()",
          "old_line_content": "    }",
          "new_line_content": "        if (is_connected())",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "Error::from_errno(EALREADY)",
          "old_text": null,
          "new_text": "Error::from_errno(EALREADY)",
          "old_line_content": "",
          "new_line_content": "            return Error::from_errno(EALREADY);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(0, offset)",
          "old_line_content": "",
          "new_line_content": "                auto buffer_to_take = m_buffer.span().slice(0, offset);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(offset + longest_match)",
          "old_line_content": "                m_buffered_size -= offset + longest_match;",
          "new_line_content": "                auto buffer_to_shift = m_buffer.span().slice(offset + longest_match);",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(buffer)",
          "old_line_content": "",
          "new_line_content": "    ErrorOr<size_t> read_line(Bytes buffer) { return m_helper.read_line(move(buffer)); }",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "copy_to",
          "old_text": null,
          "new_text": "buffer_to_take.copy_to(buffer)",
          "old_line_content": "                return offset;",
          "new_line_content": "                buffer_to_take.copy_to(buffer);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buffer_to_shift.size()",
          "old_line_content": "            }",
          "new_line_content": "                m_buffer.overwrite(0, buffer_to_shift.data(), buffer_to_shift.size());",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(candidates)",
          "old_line_content": "    virtual ~BufferedSeekable() override { }",
          "new_line_content": "    ErrorOr<size_t> read_until_any_of(Bytes buffer, Array<StringView, N> candidates) { return m_helper.read_until_any_of(move(buffer), move(candidates)); }",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "can_read_line",
          "old_text": null,
          "new_text": "m_helper.can_read_line()",
          "old_line_content": "",
          "new_line_content": "    ErrorOr<bool> can_read_line() { return m_helper.can_read_line(); }",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "buffer_size",
          "old_text": null,
          "new_text": "m_helper.buffer_size()",
          "old_line_content": "    BufferedSeekable(NonnullOwnPtr<T> stream, ByteBuffer buffer)",
          "new_line_content": "    size_t buffer_size() const { return m_helper.buffer_size(); }",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "m_socket.close()",
          "old_line_content": "",
          "new_line_content": "    virtual void close() override { m_socket.close(); }",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "can_read_without_blocking",
          "old_text": null,
          "new_text": "m_socket.can_read_without_blocking(timeout)",
          "old_line_content": "    BasicReusableSocket(NonnullOwnPtr<T> socket)",
          "new_line_content": "    virtual ErrorOr<bool> can_read_without_blocking(int timeout = 0) const override { return m_socket.can_read_without_blocking(timeout); }",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": null,
          "new_api": "pending_bytes",
          "old_text": null,
          "new_text": "m_socket.pending_bytes()",
          "old_line_content": "private:",
          "new_line_content": "    virtual ErrorOr<size_t> pending_bytes() const override { return m_socket.pending_bytes(); }",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "set_close_on_exec",
          "old_text": null,
          "new_text": "m_socket.set_close_on_exec(enabled)",
          "old_line_content": "    {",
          "new_line_content": "    virtual ErrorOr<void> set_close_on_exec(bool enabled) override { return m_socket.set_close_on_exec(enabled); }",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(stream)",
          "old_line_content": "};",
          "new_line_content": "        : m_helper(Badge<BufferedSeekable<T>> {}, move(stream), buffer)",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(socket)",
          "old_line_content": "};",
          "new_line_content": "        : m_socket(move(socket))",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(0, readable_size)",
          "old_line_content": "",
          "new_line_content": "        auto buffer_to_take = m_buffer.span().slice(0, readable_size);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(readable_size)",
          "old_line_content": "        m_buffered_size -= readable_size;",
          "new_line_content": "        auto buffer_to_shift = m_buffer.span().slice(readable_size);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "copy_to",
          "old_text": null,
          "new_text": "buffer_to_take.copy_to(buffer)",
          "old_line_content": "        return readable_size;",
          "new_line_content": "        buffer_to_take.copy_to(buffer);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buffer_to_shift.size()",
          "old_line_content": "    }",
          "new_line_content": "        m_buffer.overwrite(0, buffer_to_shift.data(), buffer_to_shift.size());",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "is_eof",
          "old_text": null,
          "new_text": "stream().is_eof()",
          "old_line_content": "",
          "new_line_content": "        if (stream().is_eof() && m_buffered_size > 0)",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "static_cast<Socket&&>(other)",
          "old_text": null,
          "new_text": "static_cast<Socket&&>(other)",
          "old_line_content": "",
          "new_line_content": "        : Socket(static_cast<Socket&&>(other))",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(other.m_helper)",
          "old_line_content": "    BufferedSocket& operator=(BufferedSocket&& other)",
          "new_line_content": "        , m_helper(move(other.m_helper))",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "m_buffer.span().slice(0, m_buffered_size).contains_slow('\\n')",
          "old_line_content": "",
          "new_line_content": "        if (m_buffer.span().slice(0, m_buffered_size).contains_slow('\\n'))",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(other.m_helper)",
          "old_line_content": "",
          "new_line_content": "        m_helper = move(other.m_helper);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "is_readable",
          "old_text": null,
          "new_text": "stream().is_readable()",
          "old_line_content": "",
          "new_line_content": "        if (!stream().is_readable())",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "static_cast<Socket&&>(other)",
          "old_text": null,
          "new_text": "static_cast<Socket&&>(other)",
          "old_line_content": "    }",
          "new_line_content": "        Socket::operator=(static_cast<Socket&&>(other));",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_buffer.size()",
          "old_line_content": "                // contents as a \"line\".",
          "new_line_content": "        while (m_buffered_size < m_buffer.size()) {",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "populate_read_buffer",
          "old_text": null,
          "new_text": "populate_read_buffer()",
          "old_line_content": "                return m_buffered_size > 0;",
          "new_line_content": "            auto populated_slice = TRY(populate_read_buffer());",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "is_eof",
          "old_text": null,
          "new_text": "stream().is_eof()",
          "old_line_content": "",
          "new_line_content": "            if (stream().is_eof()) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 765,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().write(buffer)",
          "new_text": null,
          "old_line_content": "    virtual ErrorOr<size_t> write(ReadonlyBytes buffer) override { return m_helper.stream().write(buffer); }",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "stream().is_eof()",
          "new_text": null,
          "old_line_content": "        return stream().is_eof();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "can_read_line",
          "new_api": null,
          "old_text": "m_helper.can_read_line()",
          "new_text": null,
          "old_line_content": "    ErrorOr<bool> can_read_line() { return m_helper.can_read_line(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(stream)",
          "new_text": null,
          "old_line_content": "        : m_helper(Badge<BufferedSocket<T>> {}, move(stream), buffer)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "setup_notifier",
          "new_api": null,
          "old_text": "setup_notifier()",
          "new_text": null,
          "old_line_content": "        setup_notifier();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "read_until",
          "new_api": null,
          "old_text": "read_until(buffer, \"\\n\"sv)",
          "new_text": null,
          "old_line_content": "        return read_until(buffer, \"\\n\"sv);",
          "new_line_content": "    // Reads into the buffer until \\n is encountered.",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_buffer.size()",
          "new_text": null,
          "old_line_content": "        if (m_buffered_size == m_buffer.size())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "on_ready_to_read",
          "new_api": null,
          "old_text": "on_ready_to_read()",
          "new_text": null,
          "old_line_content": "                on_ready_to_read();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().slice(m_buffered_size)",
          "new_text": null,
          "old_line_content": "        auto fillable_slice = m_buffer.span().slice(m_buffered_size);",
          "new_line_content": "    ErrorOr<ReadonlyBytes> populate_read_buffer()",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "read",
          "new_api": null,
          "old_text": "stream().read(fillable_slice)",
          "new_text": null,
          "old_line_content": "        auto nread = TRY(stream().read(fillable_slice));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "is_open",
          "new_api": null,
          "old_text": "stream().is_open()",
          "new_text": null,
          "old_line_content": "        if (!stream().is_open())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "Error::from_errno(ENOTCONN)",
          "new_api": null,
          "old_text": "Error::from_errno(ENOTCONN)",
          "new_text": null,
          "old_line_content": "            return Error::from_errno(ENOTCONN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "slice",
          "new_api": null,
          "old_text": "fillable_slice.slice(0, nread)",
          "new_text": null,
          "old_line_content": "        return fillable_slice.slice(0, nread);",
          "new_line_content": "            return ReadonlyBytes {};",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "buffer.is_empty()",
          "new_text": null,
          "old_line_content": "        if (buffer.is_empty())",
          "new_line_content": "    ErrorOr<size_t> read_until_any_of(Bytes buffer, Array<StringView, N> candidates)",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "Error::from_errno(ENOBUFS)",
          "new_api": null,
          "old_text": "Error::from_errno(ENOBUFS)",
          "new_text": null,
          "old_line_content": "            return Error::from_errno(ENOBUFS);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "can_read_line",
          "new_api": null,
          "old_text": "can_read_line()",
          "new_text": null,
          "old_line_content": "        if (!TRY(can_read_line()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "stream().is_eof()",
          "new_text": null,
          "old_line_content": "        if (stream().is_eof()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "size",
          "new_api": null,
          "old_text": "buffer.size()",
          "new_text": null,
          "old_line_content": "            if (buffer.size() < m_buffered_size) {",
          "new_line_content": "        // We fill the buffer through can_read_line.",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "T::connect(host, port)",
          "new_api": null,
          "old_text": "T::connect(host, port)",
          "new_text": null,
          "old_line_content": "        return make<BasicReusableSocket<T>>(TRY(T::connect(host, port)));",
          "new_line_content": "template<SocketLike T>",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "Error::from_errno(EMSGSIZE)",
          "new_api": null,
          "old_text": "Error::from_errno(EMSGSIZE)",
          "new_text": null,
          "old_line_content": "                return Error::from_errno(EMSGSIZE);",
          "new_line_content": "                // chance to read the remaining buffer contents, but if the user",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().slice(0, m_buffered_size).copy_to(buffer)",
          "new_text": null,
          "old_line_content": "            m_buffer.span().slice(0, m_buffered_size).copy_to(buffer);",
          "new_line_content": "                // to read, which is No Good. So let's give a descriptive error",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "exchange",
          "new_api": null,
          "old_text": "exchange(m_buffered_size, 0)",
          "new_text": null,
          "old_line_content": "            return exchange(m_buffered_size, 0);",
          "new_line_content": "                // to the caller about why it can't read.",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(stream)",
          "new_text": null,
          "old_line_content": "        return BufferedHelper<T>::template create_buffered<BufferedSeekable>(move(stream), buffer_size);",
          "new_line_content": "    friend BufferedHelper<T>;",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().is_readable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_readable() const override { return m_helper.stream().is_readable(); }",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(buffer)",
          "new_text": null,
          "old_line_content": "    virtual ErrorOr<size_t> read(Bytes buffer) override { return m_helper.read(move(buffer)); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().is_writable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_writable() const override { return m_helper.stream().is_writable(); }",
          "new_line_content": "    BufferedSeekable(BufferedSeekable&& other) = default;",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().write(buffer)",
          "new_text": null,
          "old_line_content": "    virtual ErrorOr<size_t> write(ReadonlyBytes buffer) override { return m_helper.stream().write(buffer); }",
          "new_line_content": "    BufferedSeekable& operator=(BufferedSeekable&& other) = default;",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "m_helper.is_eof()",
          "new_text": null,
          "old_line_content": "    virtual bool is_eof() const override { return m_helper.is_eof(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().offset(offset)",
          "new_text": null,
          "old_line_content": "            StringView remaining_buffer { m_buffer.span().offset(offset), maximum_offset - offset };",
          "new_line_content": "        for (size_t offset = 0; offset < maximum_offset; offset++) {",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "Error::from_errno(EALREADY)",
          "new_api": null,
          "old_text": "Error::from_errno(EALREADY)",
          "new_text": null,
          "old_line_content": "            return Error::from_errno(EALREADY);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "length",
          "new_api": null,
          "old_text": "remaining_buffer.length()",
          "new_text": null,
          "old_line_content": "                if (candidate.length() > remaining_buffer.length())",
          "new_line_content": "            // delimiter candidates and try to find the longest one we can",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "T::connect(host, port)",
          "new_api": null,
          "old_text": "T::connect(host, port)",
          "new_text": null,
          "old_line_content": "        m_socket = TRY(T::connect(host, port));",
          "new_line_content": "    virtual ErrorOr<void> reconnect(String const& host, u16 port) override",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "remaining_buffer.starts_with(candidate)",
          "new_text": null,
          "old_line_content": "                if (remaining_buffer.starts_with(candidate))",
          "new_line_content": "            // user buffer.",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "is_connected",
          "new_api": null,
          "old_text": "is_connected()",
          "new_text": null,
          "old_line_content": "        if (is_connected())",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "Error::from_errno(EALREADY)",
          "new_api": null,
          "old_text": "Error::from_errno(EALREADY)",
          "new_text": null,
          "old_line_content": "            return Error::from_errno(EALREADY);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "T::connect(address)",
          "new_api": null,
          "old_text": "T::connect(address)",
          "new_text": null,
          "old_line_content": "        m_socket = TRY(T::connect(address));",
          "new_line_content": "    virtual ErrorOr<void> reconnect(SocketAddress const& address) override",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "is_readable",
          "new_api": null,
          "old_text": "m_socket.is_readable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_readable() const override { return m_socket.is_readable(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "copy_to",
          "new_api": null,
          "old_text": "buffer_to_take.copy_to(buffer)",
          "new_text": null,
          "old_line_content": "                buffer_to_take.copy_to(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "size",
          "new_api": null,
          "old_text": "buffer_to_shift.size()",
          "new_text": null,
          "old_line_content": "                m_buffer.overwrite(0, buffer_to_shift.data(), buffer_to_shift.size());",
          "new_line_content": "            if (longest_match > 0) {",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(candidates)",
          "new_text": null,
          "old_line_content": "    ErrorOr<size_t> read_until_any_of(Bytes buffer, Array<StringView, N> candidates) { return m_helper.read_until_any_of(move(buffer), move(candidates)); }",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "can_read_line",
          "new_api": null,
          "old_text": "m_helper.can_read_line()",
          "new_text": null,
          "old_line_content": "    ErrorOr<bool> can_read_line() { return m_helper.can_read_line(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "is_writable",
          "new_api": null,
          "old_text": "m_socket.is_writable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_writable() const override { return m_socket.is_writable(); }",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "write",
          "new_api": null,
          "old_text": "m_socket.write(buffer)",
          "new_text": null,
          "old_line_content": "    virtual ErrorOr<size_t> write(ReadonlyBytes buffer) override { return m_socket.write(buffer); }",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "m_socket.is_eof()",
          "new_text": null,
          "old_line_content": "    virtual bool is_eof() const override { return m_socket.is_eof(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(stream)",
          "new_text": null,
          "old_line_content": "        : m_helper(Badge<BufferedSeekable<T>> {}, move(stream), buffer)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "size",
          "new_api": null,
          "old_text": "buffer.size()",
          "new_text": null,
          "old_line_content": "        auto readable_size = min(m_buffered_size, buffer.size());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().slice(0, readable_size)",
          "new_text": null,
          "old_line_content": "        auto buffer_to_take = m_buffer.span().slice(0, readable_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().slice(readable_size)",
          "new_text": null,
          "old_line_content": "        auto buffer_to_shift = m_buffer.span().slice(readable_size);",
          "new_line_content": "        // If we still haven't found anything, then it's most likely the case",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "copy_to",
          "new_api": null,
          "old_text": "buffer_to_take.copy_to(buffer)",
          "new_text": null,
          "old_line_content": "        buffer_to_take.copy_to(buffer);",
          "new_line_content": "        // buffer. Let's just fill the caller's buffer up.",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(stream)",
          "new_text": null,
          "old_line_content": "        return BufferedHelper<T>::template create_buffered<BufferedSocket>(move(stream), buffer_size);",
          "new_line_content": "    friend BufferedHelper<T>;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "stream().is_eof()",
          "new_text": null,
          "old_line_content": "        if (stream().is_eof() && m_buffered_size > 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "static_cast<Socket&&>(other)",
          "new_api": null,
          "old_text": "static_cast<Socket&&>(other)",
          "new_text": null,
          "old_line_content": "        : Socket(static_cast<Socket&&>(other))",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "span",
          "new_api": null,
          "old_text": "m_buffer.span().slice(0, m_buffered_size).contains_slow('\\n')",
          "new_text": null,
          "old_line_content": "        if (m_buffer.span().slice(0, m_buffered_size).contains_slow('\\n'))",
          "new_line_content": "    ErrorOr<bool> can_read_line()",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "setup_notifier",
          "new_api": null,
          "old_text": "setup_notifier()",
          "new_text": null,
          "old_line_content": "        setup_notifier();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "is_readable",
          "new_api": null,
          "old_text": "stream().is_readable()",
          "new_text": null,
          "old_line_content": "        if (!stream().is_readable())",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_buffer.size()",
          "new_text": null,
          "old_line_content": "        while (m_buffered_size < m_buffer.size()) {",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "populate_read_buffer",
          "new_api": null,
          "old_text": "populate_read_buffer()",
          "new_text": null,
          "old_line_content": "            auto populated_slice = TRY(populate_read_buffer());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(other.m_helper)",
          "new_text": null,
          "old_line_content": "        m_helper = move(other.m_helper);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "stream().is_eof()",
          "new_text": null,
          "old_line_content": "            if (stream().is_eof()) {",
          "new_line_content": "            return false;",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "setup_notifier",
          "new_api": null,
          "old_text": "setup_notifier()",
          "new_text": null,
          "old_line_content": "        setup_notifier();",
          "new_line_content": "    BufferedSocket& operator=(BufferedSocket&& other)",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().is_readable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_readable() const override { return m_helper.stream().is_readable(); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "stream",
          "new_api": null,
          "old_text": "m_helper.stream().is_writable()",
          "new_text": null,
          "old_line_content": "    virtual bool is_writable() const override { return m_helper.stream().is_writable(); }",
          "new_line_content": "        return *this;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "contains_slow",
          "new_api": null,
          "old_text": "populated_slice.contains_slow('\\n')",
          "new_text": null,
          "old_line_content": "            if (populated_slice.contains_slow('\\n'))",
          "new_line_content": "                // We give the user one last hurrah to read the remaining",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "is_eof",
          "new_api": null,
          "old_text": "m_helper.is_eof()",
          "new_text": null,
          "old_line_content": "    virtual bool is_eof() const override { return m_helper.is_eof(); }",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 32,
      "total_additions": 65,
      "total_deletions": 64,
      "total_api_changes": 161
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 161,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          529,
          525,
          526,
          527
        ]
      }
    },
    "api_calls_before": 296,
    "api_calls_after": 298,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
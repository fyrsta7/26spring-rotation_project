{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c0486f93d4416b4f67885e6b787de542e1f680c5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c0486f93d4416b4f67885e6b787de542e1f680c5/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c0486f93d4416b4f67885e6b787de542e1f680c5/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c0486f93d4416b4f67885e6b787de542e1f680c5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 475,
          "old_api": "y",
          "new_api": "fill_ellipse",
          "old_text": "a_rect.y()",
          "new_text": "fill_ellipse(a_rect, color)",
          "old_line_content": "        a_rect.y(),",
          "new_line_content": "        return fill_ellipse(a_rect, color);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "x",
          "new_api": "width",
          "old_text": "a_rect.x()",
          "new_text": "a_rect.width()",
          "old_line_content": "        a_rect.x(),",
          "new_line_content": "        a_rect.width() - bottom_left.horizontal_radius - bottom_right.horizontal_radius,",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "width",
          "new_api": "height",
          "old_text": "left_rect.width()",
          "new_text": "a_rect.height()",
          "old_line_content": "        left_rect.x() + left_rect.width(),",
          "new_line_content": "        a_rect.height() - top_left.vertical_radius - bottom_left.vertical_radius",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "fill_rect",
          "new_api": "width",
          "old_text": "m_underlying_painter.fill_rect(top_rect, color)",
          "new_text": "right_rect.width()",
          "old_line_content": "    m_underlying_painter.fill_rect(top_rect, color);",
          "new_line_content": "        a_rect.width() - left_rect.width() - right_rect.width(),",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "fill_rect",
          "new_api": "height",
          "old_text": "m_underlying_painter.fill_rect(right_rect, color)",
          "new_text": "bottom_rect.height()",
          "old_line_content": "    m_underlying_painter.fill_rect(right_rect, color);",
          "new_line_content": "        a_rect.height() - top_rect.height() - bottom_rect.height()",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "IntRect::from_two_points(ellipse_center, corner_point)",
          "new_api": "fill_rect",
          "old_text": "IntRect::from_two_points(ellipse_center, corner_point)",
          "new_text": "m_underlying_painter.fill_rect(inner, color)",
          "old_line_content": "        m_underlying_painter.add_clip_rect(IntRect::from_two_points(ellipse_center, corner_point));",
          "new_line_content": "    m_underlying_painter.fill_rect(inner, color);",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "inflated",
          "new_api": "IntRect::from_two_points(ellipse_center, corner_point)",
          "old_text": "a_rect.inflated(0, 1, 1, 0)",
          "new_text": "IntRect::from_two_points(ellipse_center, corner_point)",
          "old_line_content": "    auto bounding_rect = a_rect.inflated(0, 1, 1, 0);",
          "new_line_content": "        m_underlying_painter.add_clip_rect(IntRect::from_two_points(ellipse_center, corner_point));",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "top_right",
          "new_api": "inflated",
          "old_text": "bounding_rect.top_right()",
          "new_text": "a_rect.inflated(0, 1, 1, 0)",
          "old_line_content": "        fill_corner(top_right_corner, bounding_rect.top_right(), top_right);",
          "new_line_content": "    auto bounding_rect = a_rect.inflated(0, 1, 1, 0);",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "bottom_left",
          "new_api": "top_left",
          "old_text": "bounding_rect.bottom_left()",
          "new_text": "bounding_rect.top_left()",
          "old_line_content": "        fill_corner(bottom_left_corner, bounding_rect.bottom_left(), bottom_left);",
          "new_line_content": "        fill_corner(top_left_corner, bounding_rect.top_left(), top_left);",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "bottom_right",
          "new_api": "top_right",
          "old_text": "bounding_rect.bottom_right()",
          "new_text": "bounding_rect.top_right()",
          "old_line_content": "        fill_corner(bottom_right_corner, bounding_rect.bottom_right(), bottom_right);",
          "new_line_content": "        fill_corner(top_right_corner, bounding_rect.top_right(), top_right);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "fill_rect",
          "old_text": null,
          "new_text": "m_underlying_painter.fill_rect(left_rect, color)",
          "old_line_content": "        PainterStateSaver save { m_underlying_painter };",
          "new_line_content": "    m_underlying_painter.fill_rect(left_rect, color);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "a_rect.width()",
          "old_line_content": "    };",
          "new_line_content": "        a_rect.x() + a_rect.width() - top_right.horizontal_radius,",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "a_rect.y()",
          "old_line_content": "    IntRect bottom_rect {",
          "new_line_content": "        a_rect.y() + top_right.vertical_radius,",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 })",
          "old_text": null,
          "new_text": "IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 })",
          "old_line_content": "    if (top_left)",
          "new_line_content": "        fill_ellipse(IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 }), color);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "fill_rect",
          "old_text": null,
          "new_text": "m_underlying_painter.fill_rect(right_rect, color)",
          "old_line_content": "",
          "new_line_content": "    m_underlying_painter.fill_rect(right_rect, color);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "a_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        a_rect.x() + bottom_left.horizontal_radius,",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "a_rect.height()",
          "old_line_content": "    IntRect left_rect {",
          "new_line_content": "        a_rect.y() + a_rect.height() - bottom_right.vertical_radius,",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "fill_rect",
          "old_text": null,
          "new_text": "m_underlying_painter.fill_rect(bottom_rect, color)",
          "old_line_content": "    auto fill_corner = [&](auto const& ellipse_center, auto const& corner_point, CornerRadius const& corner) {",
          "new_line_content": "    m_underlying_painter.fill_rect(bottom_rect, color);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "bottom_left",
          "old_text": null,
          "new_text": "bounding_rect.bottom_left()",
          "old_line_content": "",
          "new_line_content": "        fill_corner(bottom_left_corner, bounding_rect.bottom_left(), bottom_left);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "a_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        a_rect.x(),",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "bottom_right",
          "old_text": null,
          "new_text": "bounding_rect.bottom_right()",
          "old_line_content": "",
          "new_line_content": "        fill_corner(bottom_right_corner, bounding_rect.bottom_right(), bottom_right);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "a_rect.y()",
          "old_line_content": "",
          "new_line_content": "        a_rect.y() + top_left.vertical_radius,",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "left_rect.width()",
          "old_line_content": "    };",
          "new_line_content": "        left_rect.x() + left_rect.width(),",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "left_rect.y()",
          "old_line_content": "",
          "new_line_content": "        left_rect.y(),",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "a_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        a_rect.x() + top_left.horizontal_radius,",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "a_rect.y()",
          "old_line_content": "    IntRect right_rect {",
          "new_line_content": "        a_rect.y(),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 481,
          "old_api": "y",
          "new_api": null,
          "old_text": "a_rect.y()",
          "new_text": null,
          "old_line_content": "        a_rect.y() + top_right.vertical_radius,",
          "new_line_content": "        top_left.vertical_radius",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 })",
          "new_api": null,
          "old_text": "IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 })",
          "new_text": null,
          "old_line_content": "        fill_ellipse(IntRect::centered_at(ellipse_center, { corner.horizontal_radius * 2, corner.vertical_radius * 2 }), color);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "height",
          "new_api": null,
          "old_text": "a_rect.height()",
          "new_text": null,
          "old_line_content": "        a_rect.height() - top_right.vertical_radius - bottom_right.vertical_radius",
          "new_line_content": "    IntRect right_rect {",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "x",
          "new_api": null,
          "old_text": "a_rect.x()",
          "new_text": null,
          "old_line_content": "        a_rect.x() + bottom_left.horizontal_radius,",
          "new_line_content": "        top_right.horizontal_radius,",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "top_left",
          "new_api": null,
          "old_text": "bounding_rect.top_left()",
          "new_text": null,
          "old_line_content": "        fill_corner(top_left_corner, bounding_rect.top_left(), top_left);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "width",
          "new_api": null,
          "old_text": "a_rect.width()",
          "new_text": null,
          "old_line_content": "        a_rect.width() - bottom_left.horizontal_radius - bottom_right.horizontal_radius,",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "y",
          "new_api": null,
          "old_text": "a_rect.y()",
          "new_text": null,
          "old_line_content": "        a_rect.y() + top_left.vertical_radius,",
          "new_line_content": "        bottom_right.vertical_radius",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "fill_rect",
          "new_api": null,
          "old_text": "m_underlying_painter.fill_rect(left_rect, color)",
          "new_text": null,
          "old_line_content": "    m_underlying_painter.fill_rect(left_rect, color);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "height",
          "new_api": null,
          "old_text": "a_rect.height()",
          "new_text": null,
          "old_line_content": "        a_rect.height() - top_left.vertical_radius - bottom_left.vertical_radius",
          "new_line_content": "    IntRect left_rect {",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "y",
          "new_api": null,
          "old_text": "left_rect.y()",
          "new_text": null,
          "old_line_content": "        left_rect.y(),",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "width",
          "new_api": null,
          "old_text": "right_rect.width()",
          "new_text": null,
          "old_line_content": "        a_rect.width() - left_rect.width() - right_rect.width(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "height",
          "new_api": null,
          "old_text": "bottom_rect.height()",
          "new_text": null,
          "old_line_content": "        a_rect.height() - top_rect.height() - bottom_rect.height()",
          "new_line_content": "    IntRect inner = {",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "x",
          "new_api": null,
          "old_text": "a_rect.x()",
          "new_text": null,
          "old_line_content": "        a_rect.x() + top_left.horizontal_radius,",
          "new_line_content": "    if (top_left_corner == top_right_corner && top_right_corner == bottom_left_corner && bottom_left_corner == bottom_right_corner)",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "fill_rect",
          "new_api": null,
          "old_text": "m_underlying_painter.fill_rect(bottom_rect, color)",
          "new_text": null,
          "old_line_content": "    m_underlying_painter.fill_rect(bottom_rect, color);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "width",
          "new_api": null,
          "old_text": "a_rect.width()",
          "new_text": null,
          "old_line_content": "        a_rect.width() - top_left.horizontal_radius - top_right.horizontal_radius,",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 10,
      "total_additions": 16,
      "total_deletions": 15,
      "total_api_changes": 41
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 41,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          473
        ]
      }
    },
    "api_calls_before": 216,
    "api_calls_after": 217,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
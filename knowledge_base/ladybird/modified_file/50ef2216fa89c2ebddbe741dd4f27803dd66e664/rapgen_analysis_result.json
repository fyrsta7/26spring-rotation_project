{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/50ef2216fa89c2ebddbe741dd4f27803dd66e664",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/50ef2216fa89c2ebddbe741dd4f27803dd66e664/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/50ef2216fa89c2ebddbe741dd4f27803dd66e664/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/50ef2216fa89c2ebddbe741dd4f27803dd66e664/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1000,
          "old_api": "perror",
          "new_api": "length",
          "old_text": "perror(\"write\")",
          "new_text": "m_lines[i].length()",
          "old_line_content": "                perror(\"write\");",
          "new_line_content": "        file_size += m_lines[i].length();",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "close",
          "new_api": "size",
          "old_text": "close(fd)",
          "new_text": "m_lines.size()",
          "old_line_content": "                close(fd);",
          "new_line_content": "    file_size += m_lines.size() - 1;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "size",
          "new_api": "perror",
          "old_text": "m_lines.size()",
          "new_text": "perror(\"ftruncate\")",
          "old_line_content": "        if (i != m_lines.size() - 1) {",
          "new_line_content": "        perror(\"ftruncate\");",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "perror",
          "new_api": "size",
          "old_text": "perror(\"write\")",
          "new_text": "m_lines.size()",
          "old_line_content": "                perror(\"write\");",
          "new_line_content": "    for (int i = 0; i < m_lines.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "line_count",
          "new_api": "perror",
          "old_text": "line_count()",
          "new_text": "perror(\"write\")",
          "old_line_content": "    for (int i = 0; i < line_count(); ++i) {",
          "new_line_content": "                perror(\"write\");",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "did_update_selection",
          "new_api": "line_count",
          "old_text": "did_update_selection()",
          "new_text": "line_count()",
          "old_line_content": "    did_update_selection();",
          "new_line_content": "    for (int i = 0; i < line_count(); ++i) {",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "update",
          "new_api": "length",
          "old_text": "update()",
          "new_text": "line.length()",
          "old_line_content": "    update();",
          "new_line_content": "        builder.append(line.characters(), line.length());",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "end",
          "new_api": "make<Line>(*this)",
          "old_text": "selection.end().line()",
          "new_text": "make<Line>(*this)",
          "old_line_content": "    for (int i = selection.start().line(); i <= selection.end().line(); ++i) {",
          "new_line_content": "    m_lines.append(make<Line>(*this));",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "start",
          "new_api": "did_update_selection",
          "old_text": "selection.start().column()",
          "new_text": "did_update_selection()",
          "old_line_content": "        int selection_start_column_on_line = selection.start().line() == i ? selection.start().column() : 0;",
          "new_line_content": "    did_update_selection();",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "length",
          "new_api": "set_cursor",
          "old_text": "line.length()",
          "new_text": "set_cursor(0, 0)",
          "old_line_content": "        int selection_end_column_on_line = selection.end().line() == i ? selection.end().column() : line.length();",
          "new_line_content": "    set_cursor(0, 0);",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "characters",
          "new_api": "update",
          "old_text": "line.characters()",
          "new_text": "update()",
          "old_line_content": "        builder.append(line.characters() + selection_start_column_on_line, selection_end_column_on_line - selection_start_column_on_line);",
          "new_line_content": "    update();",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "to_string",
          "new_api": "has_selection",
          "old_text": "builder.to_string()",
          "new_text": "has_selection()",
          "old_line_content": "    return builder.to_string();",
          "new_line_content": "    if (!has_selection())",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "has_selection",
          "new_api": "end",
          "old_text": "has_selection()",
          "new_text": "selection.end().line()",
          "old_line_content": "    if (!has_selection())",
          "new_line_content": "    for (int i = selection.start().line(); i <= selection.end().line(); ++i) {",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "normalized_selection",
          "new_api": "length",
          "old_text": "normalized_selection()",
          "new_text": "line.length()",
          "old_line_content": "    auto selection = normalized_selection();",
          "new_line_content": "        int selection_end_column_on_line = selection.end().line() == i ? selection.end().column() : line.length();",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "end",
          "new_api": "append",
          "old_text": "selection.end().line()",
          "new_text": "builder.append('\\n')",
          "old_line_content": "    for (int i = selection.start().line() + 1; i < selection.end().line();) {",
          "new_line_content": "            builder.append('\\n');",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "length",
          "new_api": "has_selection",
          "old_text": "line.length()",
          "new_text": "has_selection()",
          "old_line_content": "        bool whole_line_is_selected = selection.start().column() == 0 && selection.end().column() == line.length();",
          "new_line_content": "    if (!has_selection())",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "length",
          "new_api": "end",
          "old_text": "after_selection.length()",
          "new_text": "selection.end().line()",
          "old_line_content": "            StringBuilder builder(before_selection.length() + after_selection.length());",
          "new_line_content": "    for (int i = selection.start().line() + 1; i < selection.end().line();) {",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "append",
          "new_api": "remove",
          "old_text": "builder.append(before_selection)",
          "new_text": "m_lines.remove(i)",
          "old_line_content": "            builder.append(before_selection);",
          "new_line_content": "        m_lines.remove(i);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "append",
          "new_api": "end",
          "old_text": "builder.append(after_selection)",
          "new_text": "selection.end().line()",
          "old_line_content": "            builder.append(after_selection);",
          "new_line_content": "        selection.end().set_line(selection.end().line() - 1);",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "end",
          "new_api": "start",
          "old_text": "selection.end().line()",
          "new_text": "selection.start().line()",
          "old_line_content": "        ASSERT(selection.start().line() == selection.end().line() - 1);",
          "new_line_content": "        auto& line = m_lines[selection.start().line()];",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "start",
          "new_api": "length",
          "old_text": "selection.start().line()",
          "new_text": "line.length()",
          "old_line_content": "        auto& first_line = m_lines[selection.start().line()];",
          "new_line_content": "        bool whole_line_is_selected = selection.start().column() == 0 && selection.end().column() == line.length();",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "start",
          "new_api": "clear",
          "old_text": "selection.start().column()",
          "new_text": "line.clear()",
          "old_line_content": "        auto before_selection = String(first_line.characters(), first_line.length()).substring(0, selection.start().column());",
          "new_line_content": "            line.clear();",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "length",
          "new_api": "start",
          "old_text": "after_selection.length()",
          "new_text": "selection.start().column()",
          "old_line_content": "        StringBuilder builder(before_selection.length() + after_selection.length());",
          "new_line_content": "            auto before_selection = String(line.characters(), line.length()).substring(0, selection.start().column());",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "append",
          "new_api": "end",
          "old_text": "builder.append(before_selection)",
          "new_text": "selection.end().column()",
          "old_line_content": "        builder.append(before_selection);",
          "new_line_content": "            auto after_selection = String(line.characters(), line.length()).substring(selection.end().column(), line.length() - selection.end().column());",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "append",
          "new_api": "length",
          "old_text": "builder.append(after_selection)",
          "new_text": "after_selection.length()",
          "old_line_content": "        builder.append(after_selection);",
          "new_line_content": "            StringBuilder builder(before_selection.length() + after_selection.length());",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "to_string",
          "new_api": "append",
          "old_text": "builder.to_string()",
          "new_text": "builder.append(before_selection)",
          "old_line_content": "        first_line.set_text(builder.to_string());",
          "new_line_content": "            builder.append(before_selection);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "end",
          "new_api": "append",
          "old_text": "selection.end().line()",
          "new_text": "builder.append(after_selection)",
          "old_line_content": "        m_lines.remove(selection.end().line());",
          "new_line_content": "            builder.append(after_selection);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "clear",
          "new_api": "start",
          "old_text": "m_selection.clear()",
          "new_text": "selection.start().line()",
          "old_line_content": "    m_selection.clear();",
          "new_line_content": "        auto& first_line = m_lines[selection.start().line()];",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "did_update_selection",
          "new_api": "end",
          "old_text": "did_update_selection()",
          "new_text": "selection.end().line()",
          "old_line_content": "    did_update_selection();",
          "new_line_content": "        auto& second_line = m_lines[selection.end().line()];",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "did_change",
          "new_api": "start",
          "old_text": "did_change()",
          "new_text": "selection.start().column()",
          "old_line_content": "    did_change();",
          "new_line_content": "        auto before_selection = String(first_line.characters(), first_line.length()).substring(0, selection.start().column());",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "start",
          "new_api": "end",
          "old_text": "selection.start()",
          "new_text": "selection.end().column()",
          "old_line_content": "    set_cursor(selection.start());",
          "new_line_content": "        auto after_selection = String(second_line.characters(), second_line.length()).substring(selection.end().column(), second_line.length() - selection.end().column());",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "update",
          "new_api": "length",
          "old_text": "update()",
          "new_text": "after_selection.length()",
          "old_line_content": "    update();",
          "new_line_content": "        StringBuilder builder(before_selection.length() + after_selection.length());",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "delete_selection",
          "new_api": "is_empty",
          "old_text": "delete_selection()",
          "new_text": "m_lines.is_empty()",
          "old_line_content": "        delete_selection();",
          "new_line_content": "    if (m_lines.is_empty())",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "insert_at_cursor",
          "new_api": "make<Line>(*this)",
          "old_text": "insert_at_cursor(text)",
          "new_text": "make<Line>(*this)",
          "old_line_content": "    insert_at_cursor(text);",
          "new_line_content": "        m_lines.append(make<Line>(*this));",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "is_readonly",
          "new_api": "start",
          "old_text": "is_readonly()",
          "new_text": "selection.start()",
          "old_line_content": "    if (is_readonly())",
          "new_line_content": "    set_cursor(selection.start());",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "is_readonly",
          "new_api": "characters",
          "old_text": "is_readonly()",
          "new_text": "selected_text.characters()",
          "old_line_content": "    if (is_readonly())",
          "new_line_content": "    printf(\"Cut: \\\"%s\\\"\\n\", selected_text.characters());",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "data",
          "new_api": "delete_selection",
          "old_text": "GClipboard::the().data()",
          "new_text": "delete_selection()",
          "old_line_content": "    auto paste_text = GClipboard::the().data();",
          "new_line_content": "    delete_selection();",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "window",
          "new_api": "set_data",
          "old_text": "window()",
          "new_text": "GClipboard::the().set_data(selected_text)",
          "old_line_content": "    ASSERT(window());",
          "new_line_content": "    GClipboard::the().set_data(selected_text);",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "set_override_cursor",
          "new_api": "data",
          "old_text": "window()->set_override_cursor(GStandardCursor::None)",
          "new_text": "GClipboard::the().data()",
          "old_line_content": "    window()->set_override_cursor(GStandardCursor::None);",
          "new_line_content": "    auto paste_text = GClipboard::the().data();",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "recompute_all_visual_lines",
          "new_api": "window",
          "old_text": "recompute_all_visual_lines()",
          "new_text": "window()",
          "old_line_content": "    recompute_all_visual_lines();",
          "new_line_content": "    ASSERT(window());",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "is_readonly",
          "new_api": "deferred_invoke",
          "old_text": "is_readonly()",
          "new_text": "deferred_invoke([this](auto&) {\n            if (on_change)\n                on_change();\n            m_have_pending_change_notification = false;\n        })",
          "old_line_content": "    m_delete_action->set_enabled(!is_readonly());",
          "new_line_content": "        deferred_invoke([this](auto&) {",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "undo_action",
          "new_api": "has_selection",
          "old_text": "undo_action()",
          "new_text": "has_selection()",
          "old_line_content": "        m_context_menu->add_action(undo_action());",
          "new_line_content": "    m_cut_action->set_enabled(!is_readonly() && has_selection());",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "redo_action",
          "new_api": "has_selection",
          "old_text": "redo_action()",
          "new_text": "has_selection()",
          "old_line_content": "        m_context_menu->add_action(redo_action());",
          "new_line_content": "    m_copy_action->set_enabled(has_selection());",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "cut_action",
          "new_api": "on_selection_change",
          "old_text": "cut_action()",
          "new_text": "on_selection_change()",
          "old_line_content": "        m_context_menu->add_action(cut_action());",
          "new_line_content": "        on_selection_change();",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "copy_action",
          "new_api": "is_line_wrapping_enabled",
          "old_text": "copy_action()",
          "new_text": "is_line_wrapping_enabled()",
          "old_line_content": "        m_context_menu->add_action(copy_action());",
          "new_line_content": "    if (is_line_wrapping_enabled()) {",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "delete_action",
          "new_api": "update",
          "old_text": "delete_action()",
          "new_text": "update()",
          "old_line_content": "        m_context_menu->add_action(delete_action());",
          "new_line_content": "        update();",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "screen_position",
          "new_api": "undo_action",
          "old_text": "event.screen_position()",
          "new_text": "undo_action()",
          "old_line_content": "    m_context_menu->popup(event.screen_position());",
          "new_line_content": "        m_context_menu->add_action(undo_action());",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "update",
          "new_api": "add_separator",
          "old_text": "update()",
          "new_text": "m_context_menu->add_separator()",
          "old_line_content": "    update();",
          "new_line_content": "            m_context_menu->add_separator();",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "update_content_size",
          "new_api": "screen_position",
          "old_text": "update_content_size()",
          "new_text": "event.screen_position()",
          "old_line_content": "    update_content_size();",
          "new_line_content": "    m_context_menu->popup(event.screen_position());",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "line_count",
          "new_api": "update",
          "old_text": "line_count()",
          "new_text": "update()",
          "old_line_content": "        if (position.line() == line_count() - 1) {",
          "new_line_content": "    update();",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "line",
          "new_api": "GScrollableWidget::resize_event(event)",
          "old_text": "position.line()",
          "new_text": "GScrollableWidget::resize_event(event)",
          "old_line_content": "        return { position.line() + 1, 0 };",
          "new_line_content": "    GScrollableWidget::resize_event(event);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "column",
          "new_api": "recompute_all_visual_lines",
          "old_text": "position.column()",
          "new_text": "recompute_all_visual_lines()",
          "old_line_content": "    return { position.line(), position.column() + 1 };",
          "new_line_content": "    recompute_all_visual_lines();",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "column",
          "new_api": "line",
          "old_text": "position.column()",
          "new_text": "position.line()",
          "old_line_content": "    if (position.column() == 0) {",
          "new_line_content": "    auto& line = m_lines[position.line()];",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "line",
          "new_api": "length",
          "old_text": "position.line()",
          "new_text": "line.length()",
          "old_line_content": "        if (position.line() == 0) {",
          "new_line_content": "    if (position.column() == line.length()) {",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "length",
          "new_api": "column",
          "old_text": "prev_line.length()",
          "new_text": "position.column()",
          "old_line_content": "        return { position.line() - 1, prev_line.length() };",
          "new_line_content": "    return { position.line(), position.column() + 1 };",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "is_empty",
          "new_api": "next_position_after",
          "old_text": "needle.is_empty()",
          "new_text": "next_position_after(position)",
          "old_line_content": "    if (needle.is_empty())",
          "new_line_content": "                return { start_of_potential_match, next_position_after(position) };",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "next_position_after",
          "new_api": "GTextPosition",
          "old_text": "next_position_after(end_of_potential_match)",
          "new_text": "GTextPosition(0, 0)",
          "old_line_content": "                return { position, next_position_after(end_of_potential_match) };",
          "new_line_content": "    GTextPosition position = start.is_valid() ? start : GTextPosition(0, 0);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "start",
          "new_api": "length",
          "old_text": "normalized_selection().start()",
          "new_text": "needle.length()",
          "old_line_content": "    scroll_position_into_view(normalized_selection().start());",
          "new_line_content": "            needle_index = needle.length() - 1;",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "length",
          "new_api": "set_y",
          "old_text": "length()",
          "new_text": "line.m_visual_rect.set_y(y_offset)",
          "old_line_content": "        for (int i = 0; i < length(); ++i) {",
          "new_line_content": "        line.m_visual_rect.set_y(y_offset);",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "characters",
          "new_api": "height",
          "old_text": "characters()",
          "new_text": "line.m_visual_rect.height()",
          "old_line_content": "            auto ch = characters()[i];",
          "new_line_content": "        y_offset += line.m_visual_rect.height();",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "is_line_wrapping_enabled",
          "new_api": "length",
          "old_text": "m_editor.is_line_wrapping_enabled()",
          "new_text": "length()",
          "old_line_content": "    if (m_editor.is_line_wrapping_enabled())",
          "new_line_content": "        for (int i = 0; i < length(); ++i) {",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "line_height",
          "new_api": "characters",
          "old_text": "m_editor.line_height()",
          "new_text": "characters()",
          "old_line_content": "        m_visual_rect = { m_editor.m_horizontal_content_padding, 0, available_width, m_visual_line_breaks.size() * m_editor.line_height() };",
          "new_line_content": "            auto ch = characters()[i];",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "characters",
          "new_api": "length",
          "old_text": "characters()",
          "new_text": "length()",
          "old_line_content": "        auto visual_line_view = StringView(characters() + start_of_line, visual_line_break - start_of_line);",
          "new_line_content": "    m_visual_line_breaks.append(length());",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "x",
          "new_api": "is_line_wrapping_enabled",
          "old_text": "m_visual_rect.x()",
          "new_text": "m_editor.is_line_wrapping_enabled()",
          "old_line_content": "            m_visual_rect.x(),",
          "new_line_content": "    if (m_editor.is_line_wrapping_enabled())",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "recompute_all_visual_lines",
          "new_api": "callback",
          "old_text": "recompute_all_visual_lines()",
          "new_text": "callback(visual_line_rect, visual_line_view, start_of_line)",
          "old_line_content": "    recompute_all_visual_lines();",
          "new_line_content": "        if (callback(visual_line_rect, visual_line_view, start_of_line) == IterationDecision::Break)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "        auto& line = m_lines[i];",
          "new_line_content": "                close(fd);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "}",
          "new_line_content": "    close(fd);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "line_count",
          "old_text": null,
          "new_text": "line_count()",
          "old_line_content": "}",
          "new_line_content": "        if (i != line_count() - 1)",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "builder.append('\\n')",
          "old_line_content": "",
          "new_line_content": "            builder.append('\\n');",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "builder.to_string()",
          "old_line_content": "{",
          "new_line_content": "    return builder.to_string();",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "m_lines.clear()",
          "old_line_content": "    StringBuilder builder;",
          "new_line_content": "    m_lines.clear();",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "m_selection.clear()",
          "old_line_content": "        auto& line = m_lines[i];",
          "new_line_content": "    m_selection.clear();",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "normalized_selection",
          "old_text": null,
          "new_text": "normalized_selection()",
          "old_line_content": "void GTextEditor::delete_selection()",
          "new_line_content": "    auto selection = normalized_selection();",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "start",
          "old_text": null,
          "new_text": "selection.start().column()",
          "old_line_content": "",
          "new_line_content": "        int selection_start_column_on_line = selection.start().line() == i ? selection.start().column() : 0;",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "line.characters()",
          "old_line_content": "",
          "new_line_content": "        builder.append(line.characters() + selection_start_column_on_line, selection_end_column_on_line - selection_start_column_on_line);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "selection.end().line()",
          "old_line_content": "    // First delete all the lines in between the first and last one.",
          "new_line_content": "        if (i != selection.end().line())",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "builder.to_string()",
          "old_line_content": "    }",
          "new_line_content": "    return builder.to_string();",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "normalized_selection",
          "old_text": null,
          "new_text": "normalized_selection()",
          "old_line_content": "        } else {",
          "new_line_content": "    auto selection = normalized_selection();",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "selection.end().line()",
          "old_line_content": "    } else {",
          "new_line_content": "    if (selection.start().line() == selection.end().line()) {",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "builder.to_string()",
          "old_line_content": "    }",
          "new_line_content": "            line.set_text(builder.to_string());",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "selection.end().line()",
          "old_line_content": "",
          "new_line_content": "        ASSERT(selection.start().line() == selection.end().line() - 1);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "builder.append(before_selection)",
          "old_line_content": "}",
          "new_line_content": "        builder.append(before_selection);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "builder.append(after_selection)",
          "old_line_content": "",
          "new_line_content": "        builder.append(after_selection);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "builder.to_string()",
          "old_line_content": "void GTextEditor::insert_at_cursor_or_replace_selection(const StringView& text)",
          "new_line_content": "        first_line.set_text(builder.to_string());",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "selection.end().line()",
          "old_line_content": "{",
          "new_line_content": "        m_lines.remove(selection.end().line());",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "m_selection.clear()",
          "old_line_content": "",
          "new_line_content": "    m_selection.clear();",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "did_update_selection",
          "old_text": null,
          "new_text": "did_update_selection()",
          "old_line_content": "void GTextEditor::cut()",
          "new_line_content": "    did_update_selection();",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "did_change",
          "old_text": null,
          "new_text": "did_change()",
          "old_line_content": "{",
          "new_line_content": "    did_change();",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "update",
          "old_text": null,
          "new_text": "update()",
          "old_line_content": "        return;",
          "new_line_content": "    update();",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "}",
          "new_line_content": "    ASSERT(!is_readonly());",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "has_selection",
          "old_text": null,
          "new_text": "has_selection()",
          "old_line_content": "",
          "new_line_content": "    if (has_selection())",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "delete_selection",
          "old_text": null,
          "new_text": "delete_selection()",
          "old_line_content": "void GTextEditor::copy()",
          "new_line_content": "        delete_selection();",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "insert_at_cursor",
          "old_text": null,
          "new_text": "insert_at_cursor(text)",
          "old_line_content": "{",
          "new_line_content": "    insert_at_cursor(text);",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "",
          "new_line_content": "    if (is_readonly())",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "selected_text",
          "old_text": null,
          "new_text": "this->selected_text()",
          "old_line_content": "{",
          "new_line_content": "    auto selected_text = this->selected_text();",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "set_data",
          "old_text": null,
          "new_text": "GClipboard::the().set_data(selected_text)",
          "old_line_content": "        return;",
          "new_line_content": "    GClipboard::the().set_data(selected_text);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "selected_text",
          "old_text": null,
          "new_text": "this->selected_text()",
          "old_line_content": "void GTextEditor::enter_event(CEvent&)",
          "new_line_content": "    auto selected_text = this->selected_text();",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "selected_text.characters()",
          "old_line_content": "{",
          "new_line_content": "    printf(\"Copy: \\\"%s\\\"\\n\", selected_text.characters());",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "{",
          "new_line_content": "    if (is_readonly())",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "paste_text.characters()",
          "old_line_content": "}",
          "new_line_content": "    printf(\"Paste: \\\"%s\\\"\\n\", paste_text.characters());",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "insert_at_cursor_or_replace_selection",
          "old_text": null,
          "new_text": "insert_at_cursor_or_replace_selection(paste_text)",
          "old_line_content": "",
          "new_line_content": "    insert_at_cursor_or_replace_selection(paste_text);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "set_override_cursor",
          "old_text": null,
          "new_text": "window()->set_override_cursor(GStandardCursor::IBeam)",
          "old_line_content": "    if (!m_have_pending_change_notification) {",
          "new_line_content": "    window()->set_override_cursor(GStandardCursor::IBeam);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "window",
          "old_text": null,
          "new_text": "window()",
          "old_line_content": "            m_have_pending_change_notification = false;",
          "new_line_content": "    ASSERT(window());",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "set_override_cursor",
          "old_text": null,
          "new_text": "window()->set_override_cursor(GStandardCursor::None)",
          "old_line_content": "        });",
          "new_line_content": "    window()->set_override_cursor(GStandardCursor::None);",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "{",
          "new_line_content": "    ASSERT(!is_readonly());",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "update_content_size",
          "old_text": null,
          "new_text": "update_content_size()",
          "old_line_content": "    if (m_readonly == readonly)",
          "new_line_content": "    update_content_size();",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "recompute_all_visual_lines",
          "old_text": null,
          "new_text": "recompute_all_visual_lines()",
          "old_line_content": "        return;",
          "new_line_content": "    recompute_all_visual_lines();",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "on_change",
          "old_text": null,
          "new_text": "on_change()",
          "old_line_content": "}",
          "new_line_content": "                on_change();",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": null,
          "new_api": "has_selection",
          "old_text": null,
          "new_text": "has_selection()",
          "old_line_content": "    }",
          "new_line_content": "    m_cut_action->set_enabled(!is_readonly() && has_selection());",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "}",
          "new_line_content": "    m_delete_action->set_enabled(!is_readonly());",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "is_readonly()",
          "old_line_content": "",
          "new_line_content": "    m_paste_action->set_enabled(!is_readonly());",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "make<GMenu>(\"GTextEditor context menu\")",
          "old_text": null,
          "new_text": "make<GMenu>(\"GTextEditor context menu\")",
          "old_line_content": "    }",
          "new_line_content": "        m_context_menu = make<GMenu>(\"GTextEditor context menu\");",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "redo_action",
          "old_text": null,
          "new_text": "redo_action()",
          "old_line_content": "}",
          "new_line_content": "        m_context_menu->add_action(redo_action());",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "add_separator",
          "old_text": null,
          "new_text": "m_context_menu->add_separator()",
          "old_line_content": "",
          "new_line_content": "        m_context_menu->add_separator();",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "cut_action",
          "old_text": null,
          "new_text": "cut_action()",
          "old_line_content": "void GTextEditor::set_text_alignment(TextAlignment alignment)",
          "new_line_content": "        m_context_menu->add_action(cut_action());",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "copy_action",
          "old_text": null,
          "new_text": "copy_action()",
          "old_line_content": "{",
          "new_line_content": "        m_context_menu->add_action(copy_action());",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "paste_action",
          "old_text": null,
          "new_text": "paste_action()",
          "old_line_content": "    if (m_text_alignment == alignment)",
          "new_line_content": "        m_context_menu->add_action(paste_action());",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "delete_action",
          "old_text": null,
          "new_text": "delete_action()",
          "old_line_content": "        return;",
          "new_line_content": "        m_context_menu->add_action(delete_action());",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "m_custom_context_menu_actions.is_empty()",
          "old_line_content": "    m_text_alignment = alignment;",
          "new_line_content": "        if (!m_custom_context_menu_actions.is_empty()) {",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "add_action",
          "old_text": null,
          "new_text": "m_context_menu->add_action(action)",
          "old_line_content": "",
          "new_line_content": "                m_context_menu->add_action(action);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "update_content_size",
          "old_text": null,
          "new_text": "update_content_size()",
          "old_line_content": "    }",
          "new_line_content": "    update_content_size();",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "line_count",
          "old_text": null,
          "new_text": "line_count()",
          "old_line_content": "            if (should_wrap == ShouldWrapAtStartOfDocument::Yes) {",
          "new_line_content": "        if (position.line() == line_count() - 1) {",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": null,
          "new_api": "line",
          "old_text": null,
          "new_text": "position.line()",
          "old_line_content": "        }",
          "new_line_content": "        return { position.line() + 1, 0 };",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "column",
          "old_text": null,
          "new_text": "position.column()",
          "old_line_content": "GTextRange GTextEditor::find_next(const StringView& needle, const GTextPosition& start)",
          "new_line_content": "    if (position.column() == 0) {",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "line",
          "old_text": null,
          "new_text": "position.line()",
          "old_line_content": "{",
          "new_line_content": "        if (position.line() == 0) {",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "line_count",
          "old_text": null,
          "new_text": "line_count()",
          "old_line_content": "        return {};",
          "new_line_content": "                auto& last_line = m_lines[line_count() - 1];",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "last_line.length()",
          "old_line_content": "",
          "new_line_content": "                return { line_count() - 1, last_line.length() };",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "line",
          "old_text": null,
          "new_text": "position.line()",
          "old_line_content": "    GTextPosition start_of_potential_match;",
          "new_line_content": "        auto& prev_line = m_lines[position.line() - 1];",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "prev_line.length()",
          "old_line_content": "    int needle_index = 0;",
          "new_line_content": "        return { position.line() - 1, prev_line.length() };",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "column",
          "old_text": null,
          "new_text": "position.column()",
          "old_line_content": "    do {",
          "new_line_content": "    return { position.line(), position.column() - 1 };",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "needle.is_empty()",
          "old_line_content": "            ++needle_index;",
          "new_line_content": "    if (needle.is_empty())",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "GTextPosition",
          "old_text": null,
          "new_text": "GTextPosition(0, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "    GTextPosition position = start.is_valid() ? start : GTextPosition(0, 0);",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "character_at",
          "old_text": null,
          "new_text": "character_at(position)",
          "old_line_content": "",
          "new_line_content": "        auto ch = character_at(position);",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "needle.length()",
          "old_line_content": "{",
          "new_line_content": "            if (needle_index >= needle.length())",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "next_position_after",
          "old_text": null,
          "new_text": "next_position_after(position)",
          "old_line_content": "",
          "new_line_content": "        position = next_position_after(position);",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "is_valid",
          "old_text": null,
          "new_text": "position.is_valid()",
          "old_line_content": "    GTextPosition end_of_potential_match;",
          "new_line_content": "    } while (position.is_valid() && position != original_position);",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "needle.is_empty()",
          "old_line_content": "                end_of_potential_match = position;",
          "new_line_content": "    if (needle.is_empty())",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "prev_position_before",
          "old_text": null,
          "new_text": "prev_position_before(position)",
          "old_line_content": "        } else {",
          "new_line_content": "    position = prev_position_before(position);",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "needle.length()",
          "old_line_content": "        }",
          "new_line_content": "    int needle_index = needle.length() - 1;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "character_at",
          "old_text": null,
          "new_text": "character_at(position)",
          "old_line_content": "",
          "new_line_content": "        auto ch = character_at(position);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "needle.length()",
          "old_line_content": "}",
          "new_line_content": "            if (needle_index == needle.length() - 1)",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "next_position_after",
          "old_text": null,
          "new_text": "next_position_after(end_of_potential_match)",
          "old_line_content": "    if (m_selection == selection)",
          "new_line_content": "                return { position, next_position_after(end_of_potential_match) };",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "needle.length()",
          "old_line_content": "    m_selection = selection;",
          "new_line_content": "            if (needle_index < needle.length() - 1)",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "prev_position_before",
          "old_text": null,
          "new_text": "prev_position_before(position)",
          "old_line_content": "}",
          "new_line_content": "        position = prev_position_before(position);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "is_valid",
          "old_text": null,
          "new_text": "position.is_valid()",
          "old_line_content": "",
          "new_line_content": "    } while (position.is_valid() && position != original_position);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "m_selection.end()",
          "old_line_content": "void GTextEditor::recompute_all_visual_lines()",
          "new_line_content": "    set_cursor(m_selection.end());",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "start",
          "old_text": null,
          "new_text": "normalized_selection().start()",
          "old_line_content": "{",
          "new_line_content": "    scroll_position_into_view(normalized_selection().start());",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "update",
          "old_text": null,
          "new_text": "update()",
          "old_line_content": "    int y_offset = 0;",
          "new_line_content": "    update();",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": null,
          "new_api": "line_count",
          "old_text": null,
          "new_text": "line_count()",
          "old_line_content": "    }",
          "new_line_content": "    ASSERT(position.line() < line_count());",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "line",
          "old_text": null,
          "new_text": "position.line()",
          "old_line_content": "}",
          "new_line_content": "    auto& line = m_lines[position.line()];",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "line.length()",
          "old_line_content": "",
          "new_line_content": "    if (position.column() == line.length())",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "column",
          "old_text": null,
          "new_text": "position.column()",
          "old_line_content": "{",
          "new_line_content": "    return line.characters()[position.column()];",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "recompute_visual_lines",
          "old_text": null,
          "new_text": "line.recompute_visual_lines()",
          "old_line_content": "",
          "new_line_content": "        line.recompute_visual_lines();",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "clear_with_capacity",
          "old_text": null,
          "new_text": "m_visual_line_breaks.clear_with_capacity()",
          "old_line_content": "            }",
          "new_line_content": "    m_visual_line_breaks.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": null,
          "new_api": "visible_text_rect_in_inner_coordinates",
          "old_text": null,
          "new_text": "m_editor.visible_text_rect_in_inner_coordinates().width()",
          "old_line_content": "        }",
          "new_line_content": "    int available_width = m_editor.visible_text_rect_in_inner_coordinates().width();",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "is_line_wrapping_enabled",
          "old_text": null,
          "new_text": "m_editor.is_line_wrapping_enabled()",
          "old_line_content": "",
          "new_line_content": "    if (m_editor.is_line_wrapping_enabled()) {",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "font",
          "old_text": null,
          "new_text": "m_editor.font().glyph_width(ch)",
          "old_line_content": "    else",
          "new_line_content": "            auto glyph_width = m_editor.font().glyph_width(ch);",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "m_visual_line_breaks.append(i)",
          "old_line_content": "}",
          "new_line_content": "                m_visual_line_breaks.append(i);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "characters()",
          "old_line_content": "void GTextEditor::set_line_wrapping_enabled(bool enabled)",
          "new_line_content": "        auto visual_line_view = StringView(characters() + start_of_line, visual_line_break - start_of_line);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "m_visual_rect.x()",
          "old_line_content": "    if (m_line_wrapping_enabled == enabled)",
          "new_line_content": "            m_visual_rect.x(),",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "line_height",
          "old_text": null,
          "new_text": "m_editor.line_height()",
          "old_line_content": "        return;",
          "new_line_content": "            m_visual_rect.y() + (line_index * m_editor.line_height()),",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "m_visual_rect.width()",
          "old_line_content": "",
          "new_line_content": "            m_visual_rect.width(),",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "line_height",
          "old_text": null,
          "new_text": "m_editor.line_height()",
          "old_line_content": "    m_line_wrapping_enabled = enabled;",
          "new_line_content": "            m_editor.line_height()",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "update_content_size",
          "old_text": null,
          "new_text": "update_content_size()",
          "old_line_content": "    return visual_line_index;",
          "new_line_content": "    update_content_size();",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "recompute_all_visual_lines",
          "old_text": null,
          "new_text": "recompute_all_visual_lines()",
          "old_line_content": "}",
          "new_line_content": "    recompute_all_visual_lines();",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "update",
          "old_text": null,
          "new_text": "update()",
          "old_line_content": "",
          "new_line_content": "    update();",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "for_each_visual_line([&](const Rect&, const StringView& view, int start_of_visual_line) {\n        if (column >= start_of_visual_line && ((column - start_of_visual_line) < view.length()))\n            return IterationDecision::Break;\n        ++visual_line_index;\n        return IterationDecision::Continue;\n    })",
          "old_line_content": "",
          "new_line_content": "    for_each_visual_line([&](const Rect&, const StringView& view, int start_of_visual_line) {",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "view.length()",
          "old_line_content": "",
          "new_line_content": "        if (column >= start_of_visual_line && ((column - start_of_visual_line) < view.length()))",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "m_custom_context_menu_actions.append(action)",
          "old_line_content": "",
          "new_line_content": "    m_custom_context_menu_actions.append(action);",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_lines.size()",
          "old_line_content": "            if (nwritten < 0) {",
          "new_line_content": "    for (int i = 0; i < m_lines.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "ftruncate",
          "old_text": null,
          "new_text": "ftruncate(fd, file_size)",
          "old_line_content": "            }",
          "new_line_content": "    int rc = ftruncate(fd, file_size);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "line.length()",
          "old_line_content": "                return false;",
          "new_line_content": "        if (line.length()) {",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "line.length()",
          "old_line_content": "            }",
          "new_line_content": "            ssize_t nwritten = write(fd, line.characters(), line.length());",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(\"write\")",
          "old_line_content": "    }",
          "new_line_content": "                perror(\"write\");",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "",
          "new_line_content": "                close(fd);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_lines.size()",
          "old_line_content": "",
          "new_line_content": "        if (i != m_lines.size() - 1) {",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd, &ch, 1)",
          "old_line_content": "{",
          "new_line_content": "            ssize_t nwritten = write(fd, &ch, 1);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "length",
          "new_api": null,
          "old_text": "line.length()",
          "new_text": null,
          "old_line_content": "        builder.append(line.characters(), line.length());",
          "new_line_content": "                return false;",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "line_count",
          "new_api": null,
          "old_text": "line_count()",
          "new_text": null,
          "old_line_content": "        if (i != line_count() - 1)",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "append",
          "new_api": null,
          "old_text": "builder.append('\\n')",
          "new_text": null,
          "old_line_content": "            builder.append('\\n');",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "builder.to_string()",
          "new_text": null,
          "old_line_content": "    return builder.to_string();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "clear",
          "new_api": null,
          "old_text": "m_lines.clear()",
          "new_text": null,
          "old_line_content": "    m_lines.clear();",
          "new_line_content": "String GTextEditor::text() const",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "make<Line>(*this)",
          "new_api": null,
          "old_text": "make<Line>(*this)",
          "new_text": null,
          "old_line_content": "    m_lines.append(make<Line>(*this));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "clear",
          "new_api": null,
          "old_text": "m_selection.clear()",
          "new_text": null,
          "old_line_content": "    m_selection.clear();",
          "new_line_content": "    StringBuilder builder;",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "set_cursor",
          "new_api": null,
          "old_text": "set_cursor(0, 0)",
          "new_text": null,
          "old_line_content": "    set_cursor(0, 0);",
          "new_line_content": "        auto& line = m_lines[i];",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "has_selection",
          "new_api": null,
          "old_text": "has_selection()",
          "new_text": null,
          "old_line_content": "    if (!has_selection())",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "normalized_selection",
          "new_api": null,
          "old_text": "normalized_selection()",
          "new_text": null,
          "old_line_content": "    auto selection = normalized_selection();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().line()",
          "new_text": null,
          "old_line_content": "        if (i != selection.end().line())",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "append",
          "new_api": null,
          "old_text": "builder.append('\\n')",
          "new_text": null,
          "old_line_content": "            builder.append('\\n');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "remove",
          "new_api": null,
          "old_text": "m_lines.remove(i)",
          "new_text": null,
          "old_line_content": "        m_lines.remove(i);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().line()",
          "new_text": null,
          "old_line_content": "        selection.end().set_line(selection.end().line() - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().line()",
          "new_text": null,
          "old_line_content": "    if (selection.start().line() == selection.end().line()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "start",
          "new_api": null,
          "old_text": "selection.start().line()",
          "new_text": null,
          "old_line_content": "        auto& line = m_lines[selection.start().line()];",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "clear",
          "new_api": null,
          "old_text": "line.clear()",
          "new_text": null,
          "old_line_content": "            line.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "start",
          "new_api": null,
          "old_text": "selection.start().column()",
          "new_text": null,
          "old_line_content": "            auto before_selection = String(line.characters(), line.length()).substring(0, selection.start().column());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().column()",
          "new_text": null,
          "old_line_content": "            auto after_selection = String(line.characters(), line.length()).substring(selection.end().column(), line.length() - selection.end().column());",
          "new_line_content": "    // First delete all the lines in between the first and last one.",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "builder.to_string()",
          "new_text": null,
          "old_line_content": "            line.set_text(builder.to_string());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().line()",
          "new_text": null,
          "old_line_content": "        auto& second_line = m_lines[selection.end().line()];",
          "new_line_content": "        if (whole_line_is_selected) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "end",
          "new_api": null,
          "old_text": "selection.end().column()",
          "new_text": null,
          "old_line_content": "        auto after_selection = String(second_line.characters(), second_line.length()).substring(selection.end().column(), second_line.length() - selection.end().column());",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "m_lines.is_empty()",
          "new_text": null,
          "old_line_content": "    if (m_lines.is_empty())",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "make<Line>(*this)",
          "new_api": null,
          "old_text": "make<Line>(*this)",
          "new_text": null,
          "old_line_content": "        m_lines.append(make<Line>(*this));",
          "new_line_content": "        // Delete across a newline, merging lines.",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "is_readonly()",
          "new_text": null,
          "old_line_content": "    ASSERT(!is_readonly());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "has_selection",
          "new_api": null,
          "old_text": "has_selection()",
          "new_text": null,
          "old_line_content": "    if (has_selection())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "selected_text",
          "new_api": null,
          "old_text": "this->selected_text()",
          "new_text": null,
          "old_line_content": "    auto selected_text = this->selected_text();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "characters",
          "new_api": null,
          "old_text": "selected_text.characters()",
          "new_text": null,
          "old_line_content": "    printf(\"Cut: \\\"%s\\\"\\n\", selected_text.characters());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "set_data",
          "new_api": null,
          "old_text": "GClipboard::the().set_data(selected_text)",
          "new_text": null,
          "old_line_content": "    GClipboard::the().set_data(selected_text);",
          "new_line_content": "void GTextEditor::insert_at_cursor_or_replace_selection(const StringView& text)",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": "delete_selection",
          "new_api": null,
          "old_text": "delete_selection()",
          "new_text": null,
          "old_line_content": "    delete_selection();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "selected_text",
          "new_api": null,
          "old_text": "this->selected_text()",
          "new_text": null,
          "old_line_content": "    auto selected_text = this->selected_text();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "characters",
          "new_api": null,
          "old_text": "selected_text.characters()",
          "new_text": null,
          "old_line_content": "    printf(\"Copy: \\\"%s\\\"\\n\", selected_text.characters());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "set_data",
          "new_api": null,
          "old_text": "GClipboard::the().set_data(selected_text)",
          "new_text": null,
          "old_line_content": "    GClipboard::the().set_data(selected_text);",
          "new_line_content": "void GTextEditor::cut()",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "characters",
          "new_api": null,
          "old_text": "paste_text.characters()",
          "new_text": null,
          "old_line_content": "    printf(\"Paste: \\\"%s\\\"\\n\", paste_text.characters());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "insert_at_cursor_or_replace_selection",
          "new_api": null,
          "old_text": "insert_at_cursor_or_replace_selection(paste_text)",
          "new_text": null,
          "old_line_content": "    insert_at_cursor_or_replace_selection(paste_text);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "set_override_cursor",
          "new_api": null,
          "old_text": "window()->set_override_cursor(GStandardCursor::IBeam)",
          "new_text": null,
          "old_line_content": "    window()->set_override_cursor(GStandardCursor::IBeam);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "window",
          "new_api": null,
          "old_text": "window()",
          "new_text": null,
          "old_line_content": "    ASSERT(window());",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "is_readonly()",
          "new_text": null,
          "old_line_content": "    ASSERT(!is_readonly());",
          "new_line_content": "void GTextEditor::enter_event(CEvent&)",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "update_content_size",
          "new_api": null,
          "old_text": "update_content_size()",
          "new_text": null,
          "old_line_content": "    update_content_size();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "deferred_invoke",
          "new_api": null,
          "old_text": "deferred_invoke([this](auto&) {\n            if (on_change)\n                on_change();\n            m_have_pending_change_notification = false;\n        })",
          "new_text": null,
          "old_line_content": "        deferred_invoke([this](auto&) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "on_change",
          "new_api": null,
          "old_text": "on_change()",
          "new_text": null,
          "old_line_content": "                on_change();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "has_selection",
          "new_api": null,
          "old_text": "has_selection()",
          "new_text": null,
          "old_line_content": "    m_cut_action->set_enabled(!is_readonly() && has_selection());",
          "new_line_content": "        m_have_pending_change_notification = true;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "is_readonly()",
          "new_text": null,
          "old_line_content": "    m_paste_action->set_enabled(!is_readonly());",
          "new_line_content": "            if (on_change)",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "has_selection",
          "new_api": null,
          "old_text": "has_selection()",
          "new_text": null,
          "old_line_content": "    m_cut_action->set_enabled(!is_readonly() && has_selection());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "has_selection",
          "new_api": null,
          "old_text": "has_selection()",
          "new_text": null,
          "old_line_content": "    m_copy_action->set_enabled(has_selection());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "on_selection_change",
          "new_api": null,
          "old_text": "on_selection_change()",
          "new_text": null,
          "old_line_content": "        on_selection_change();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "is_line_wrapping_enabled",
          "new_api": null,
          "old_text": "is_line_wrapping_enabled()",
          "new_text": null,
          "old_line_content": "    if (is_line_wrapping_enabled()) {",
          "new_line_content": "    if (m_readonly == readonly)",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "update",
          "new_api": null,
          "old_text": "update()",
          "new_text": null,
          "old_line_content": "        update();",
          "new_line_content": "    m_readonly = readonly;",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "make<GMenu>(\"GTextEditor context menu\")",
          "new_api": null,
          "old_text": "make<GMenu>(\"GTextEditor context menu\")",
          "new_text": null,
          "old_line_content": "        m_context_menu = make<GMenu>(\"GTextEditor context menu\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "add_separator",
          "new_api": null,
          "old_text": "m_context_menu->add_separator()",
          "new_text": null,
          "old_line_content": "        m_context_menu->add_separator();",
          "new_line_content": "    if (on_selection_change)",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "paste_action",
          "new_api": null,
          "old_text": "paste_action()",
          "new_text": null,
          "old_line_content": "        m_context_menu->add_action(paste_action());",
          "new_line_content": "        // FIXME: Try to repaint less.",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "m_custom_context_menu_actions.is_empty()",
          "new_text": null,
          "old_line_content": "        if (!m_custom_context_menu_actions.is_empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "add_separator",
          "new_api": null,
          "old_text": "m_context_menu->add_separator()",
          "new_text": null,
          "old_line_content": "            m_context_menu->add_separator();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "add_action",
          "new_api": null,
          "old_text": "m_context_menu->add_action(action)",
          "new_text": null,
          "old_line_content": "                m_context_menu->add_action(action);",
          "new_line_content": "void GTextEditor::context_menu_event(GContextMenuEvent& event)",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "GScrollableWidget::resize_event(event)",
          "new_api": null,
          "old_text": "GScrollableWidget::resize_event(event)",
          "new_text": null,
          "old_line_content": "    GScrollableWidget::resize_event(event);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "recompute_all_visual_lines",
          "new_api": null,
          "old_text": "recompute_all_visual_lines()",
          "new_text": null,
          "old_line_content": "    recompute_all_visual_lines();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "line",
          "new_api": null,
          "old_text": "position.line()",
          "new_text": null,
          "old_line_content": "    auto& line = m_lines[position.line()];",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "length",
          "new_api": null,
          "old_text": "line.length()",
          "new_text": null,
          "old_line_content": "    if (position.column() == line.length()) {",
          "new_line_content": "    m_text_alignment = alignment;",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "line_count",
          "new_api": null,
          "old_text": "line_count()",
          "new_text": null,
          "old_line_content": "                auto& last_line = m_lines[line_count() - 1];",
          "new_line_content": "            if (should_wrap == ShouldWrapAtEndOfDocument::Yes)",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "length",
          "new_api": null,
          "old_text": "last_line.length()",
          "new_text": null,
          "old_line_content": "                return { line_count() - 1, last_line.length() };",
          "new_line_content": "                return { 0, 0 };",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "line",
          "new_api": null,
          "old_text": "position.line()",
          "new_text": null,
          "old_line_content": "        auto& prev_line = m_lines[position.line() - 1];",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "column",
          "new_api": null,
          "old_text": "position.column()",
          "new_text": null,
          "old_line_content": "    return { position.line(), position.column() - 1 };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "needle.is_empty()",
          "new_text": null,
          "old_line_content": "    if (needle.is_empty())",
          "new_line_content": "            if (should_wrap == ShouldWrapAtStartOfDocument::Yes) {",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "GTextPosition",
          "new_api": null,
          "old_text": "GTextPosition(0, 0)",
          "new_text": null,
          "old_line_content": "    GTextPosition position = start.is_valid() ? start : GTextPosition(0, 0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "character_at",
          "new_api": null,
          "old_text": "character_at(position)",
          "new_text": null,
          "old_line_content": "        auto ch = character_at(position);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "length",
          "new_api": null,
          "old_text": "needle.length()",
          "new_text": null,
          "old_line_content": "            if (needle_index >= needle.length())",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "next_position_after",
          "new_api": null,
          "old_text": "next_position_after(position)",
          "new_text": null,
          "old_line_content": "                return { start_of_potential_match, next_position_after(position) };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "next_position_after",
          "new_api": null,
          "old_text": "next_position_after(position)",
          "new_text": null,
          "old_line_content": "        position = next_position_after(position);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "is_valid",
          "new_api": null,
          "old_text": "position.is_valid()",
          "new_text": null,
          "old_line_content": "    } while (position.is_valid() && position != original_position);",
          "new_line_content": "    do {",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "GTextPosition",
          "new_api": null,
          "old_text": "GTextPosition(0, 0)",
          "new_text": null,
          "old_line_content": "    GTextPosition position = start.is_valid() ? start : GTextPosition(0, 0);",
          "new_line_content": "                position = start_of_potential_match;",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "prev_position_before",
          "new_api": null,
          "old_text": "prev_position_before(position)",
          "new_text": null,
          "old_line_content": "    position = prev_position_before(position);",
          "new_line_content": "            needle_index = 0;",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "length",
          "new_api": null,
          "old_text": "needle.length()",
          "new_text": null,
          "old_line_content": "    int needle_index = needle.length() - 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "character_at",
          "new_api": null,
          "old_text": "character_at(position)",
          "new_text": null,
          "old_line_content": "        auto ch = character_at(position);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "length",
          "new_api": null,
          "old_text": "needle.length()",
          "new_text": null,
          "old_line_content": "            if (needle_index == needle.length() - 1)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "length",
          "new_api": null,
          "old_text": "needle.length()",
          "new_text": null,
          "old_line_content": "            if (needle_index < needle.length() - 1)",
          "new_line_content": "    GTextPosition original_position = position;",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "length",
          "new_api": null,
          "old_text": "needle.length()",
          "new_text": null,
          "old_line_content": "            needle_index = needle.length() - 1;",
          "new_line_content": "    GTextPosition end_of_potential_match;",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "prev_position_before",
          "new_api": null,
          "old_text": "prev_position_before(position)",
          "new_text": null,
          "old_line_content": "        position = prev_position_before(position);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "is_valid",
          "new_api": null,
          "old_text": "position.is_valid()",
          "new_text": null,
          "old_line_content": "    } while (position.is_valid() && position != original_position);",
          "new_line_content": "    do {",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "end",
          "new_api": null,
          "old_text": "m_selection.end()",
          "new_text": null,
          "old_line_content": "    set_cursor(m_selection.end());",
          "new_line_content": "                position = end_of_potential_match;",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "update",
          "new_api": null,
          "old_text": "update()",
          "new_text": null,
          "old_line_content": "    update();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "line_count",
          "new_api": null,
          "old_text": "line_count()",
          "new_text": null,
          "old_line_content": "    ASSERT(position.line() < line_count());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "line",
          "new_api": null,
          "old_text": "position.line()",
          "new_text": null,
          "old_line_content": "    auto& line = m_lines[position.line()];",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "length",
          "new_api": null,
          "old_text": "line.length()",
          "new_text": null,
          "old_line_content": "    if (position.column() == line.length())",
          "new_line_content": "void GTextEditor::set_selection(const GTextRange& selection)",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "column",
          "new_api": null,
          "old_text": "position.column()",
          "new_text": null,
          "old_line_content": "    return line.characters()[position.column()];",
          "new_line_content": "    if (m_selection == selection)",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "recompute_visual_lines",
          "new_api": null,
          "old_text": "line.recompute_visual_lines()",
          "new_text": null,
          "old_line_content": "        line.recompute_visual_lines();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "set_y",
          "new_api": null,
          "old_text": "line.m_visual_rect.set_y(y_offset)",
          "new_text": null,
          "old_line_content": "        line.m_visual_rect.set_y(y_offset);",
          "new_line_content": "char GTextEditor::character_at(const GTextPosition& position) const",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "height",
          "new_api": null,
          "old_text": "line.m_visual_rect.height()",
          "new_text": null,
          "old_line_content": "        y_offset += line.m_visual_rect.height();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "clear_with_capacity",
          "new_api": null,
          "old_text": "m_visual_line_breaks.clear_with_capacity()",
          "new_text": null,
          "old_line_content": "    m_visual_line_breaks.clear_with_capacity();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "visible_text_rect_in_inner_coordinates",
          "new_api": null,
          "old_text": "m_editor.visible_text_rect_in_inner_coordinates().width()",
          "new_text": null,
          "old_line_content": "    int available_width = m_editor.visible_text_rect_in_inner_coordinates().width();",
          "new_line_content": "void GTextEditor::recompute_all_visual_lines()",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "is_line_wrapping_enabled",
          "new_api": null,
          "old_text": "m_editor.is_line_wrapping_enabled()",
          "new_text": null,
          "old_line_content": "    if (m_editor.is_line_wrapping_enabled()) {",
          "new_line_content": "    int y_offset = 0;",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "font",
          "new_api": null,
          "old_text": "m_editor.font().glyph_width(ch)",
          "new_text": null,
          "old_line_content": "            auto glyph_width = m_editor.font().glyph_width(ch);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "append",
          "new_api": null,
          "old_text": "m_visual_line_breaks.append(i)",
          "new_text": null,
          "old_line_content": "                m_visual_line_breaks.append(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "length",
          "new_api": null,
          "old_text": "length()",
          "new_text": null,
          "old_line_content": "    m_visual_line_breaks.append(length());",
          "new_line_content": "        int line_width_so_far = 0;",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "line_height",
          "new_api": null,
          "old_text": "m_editor.line_height()",
          "new_text": null,
          "old_line_content": "        m_visual_rect = { m_editor.m_horizontal_content_padding, 0, m_editor.font().width(view()), m_editor.line_height() };",
          "new_line_content": "            if ((line_width_so_far + glyph_width) > available_width) {",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "width",
          "new_api": null,
          "old_text": "m_visual_rect.width()",
          "new_text": null,
          "old_line_content": "            m_visual_rect.width(),",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "callback",
          "new_api": null,
          "old_text": "callback(visual_line_rect, visual_line_view, start_of_line)",
          "new_text": null,
          "old_line_content": "        if (callback(visual_line_rect, visual_line_view, start_of_line) == IterationDecision::Break)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "update_content_size",
          "new_api": null,
          "old_text": "update_content_size()",
          "new_text": null,
          "old_line_content": "    update_content_size();",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "update",
          "new_api": null,
          "old_text": "update()",
          "new_text": null,
          "old_line_content": "    update();",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "length",
          "new_api": null,
          "old_text": "for_each_visual_line([&](const Rect&, const StringView& view, int start_of_visual_line) {\n        if (column >= start_of_visual_line && ((column - start_of_visual_line) < view.length()))\n            return IterationDecision::Break;\n        ++visual_line_index;\n        return IterationDecision::Continue;\n    })",
          "new_text": null,
          "old_line_content": "    for_each_visual_line([&](const Rect&, const StringView& view, int start_of_visual_line) {",
          "new_line_content": "void GTextEditor::set_line_wrapping_enabled(bool enabled)",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "length",
          "new_api": null,
          "old_text": "view.length()",
          "new_text": null,
          "old_line_content": "        if (column >= start_of_visual_line && ((column - start_of_visual_line) < view.length()))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "append",
          "new_api": null,
          "old_text": "m_custom_context_menu_actions.append(action)",
          "new_text": null,
          "old_line_content": "    m_custom_context_menu_actions.append(action);",
          "new_line_content": "int GTextEditor::Line::visual_line_containing(int column) const",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_lines.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < m_lines.size(); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "length",
          "new_api": null,
          "old_text": "line.length()",
          "new_text": null,
          "old_line_content": "        if (line.length()) {",
          "new_line_content": "    // FIXME: Remove this once the kernel is smart enough to do this instead.",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "length",
          "new_api": null,
          "old_text": "line.length()",
          "new_text": null,
          "old_line_content": "            ssize_t nwritten = write(fd, line.characters(), line.length());",
          "new_line_content": "    off_t file_size = 0;",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd, &ch, 1)",
          "new_text": null,
          "old_line_content": "            ssize_t nwritten = write(fd, &ch, 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "                close(fd);",
          "new_line_content": "        auto& line = m_lines[i];",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "    close(fd);",
          "new_line_content": "                return false;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 65,
      "total_additions": 112,
      "total_deletions": 107,
      "total_api_changes": 284
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 284,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          996,
          1002,
          1004,
          1006,
          1008
        ]
      }
    },
    "api_calls_before": 1034,
    "api_calls_after": 1039,
    "diff_info": {
      "added_lines": 14,
      "removed_lines": 0,
      "total_diff_lines": 26
    }
  }
}
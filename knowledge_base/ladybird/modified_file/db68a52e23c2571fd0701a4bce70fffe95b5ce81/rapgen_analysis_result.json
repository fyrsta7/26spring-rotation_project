{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/db68a52e23c2571fd0701a4bce70fffe95b5ce81",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/db68a52e23c2571fd0701a4bce70fffe95b5ce81/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/db68a52e23c2571fd0701a4bce70fffe95b5ce81/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/db68a52e23c2571fd0701a4bce70fffe95b5ce81/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 65,
          "old_api": "column_width",
          "new_api": "length_in_ms",
          "old_text": "this->column_width()",
          "new_text": "m_profile.length_in_ms()",
          "old_line_content": "    float column_width = this->column_width();",
          "new_line_content": "    recompute_histograms_if_needed({ start_of_trace, end_of_trace, (size_t)m_profile.length_in_ms() });",
          "content_same": false
        },
        {
          "line": 68,
          "old_api": "recompute_histograms_if_needed",
          "new_api": "height",
          "old_text": "recompute_histograms_if_needed({ start_of_trace, end_of_trace, columns })",
          "new_text": "frame_inner_rect().height()",
          "old_line_content": "    recompute_histograms_if_needed({ start_of_trace, end_of_trace, columns });",
          "new_line_content": "    float frame_height = (float)frame_inner_rect().height() / (float)m_max_value;",
          "content_same": false
        },
        {
          "line": 70,
          "old_api": "height",
          "new_api": "size",
          "old_text": "frame_inner_rect().height()",
          "new_text": "m_kernel_histogram->size()",
          "old_line_content": "    float frame_height = (float)frame_inner_rect().height() / (float)m_max_value;",
          "new_line_content": "    for (size_t bucket = 0; bucket < m_kernel_histogram->size(); bucket++) {",
          "content_same": false
        },
        {
          "line": 72,
          "old_api": "size",
          "new_api": "at",
          "old_text": "m_kernel_histogram->size()",
          "new_text": "m_user_histogram->at(bucket)",
          "old_line_content": "    for (size_t bucket = 0; bucket < m_kernel_histogram->size(); bucket++) {",
          "new_line_content": "        auto user_value = m_user_histogram->at(bucket);",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "max",
          "new_api": "height",
          "old_text": "max(1, (int)column_width)",
          "new_text": "frame_inner_rect().height()",
          "old_line_content": "        int cw = max(1, (int)column_width);",
          "new_line_content": "        int kernel_column_height = frame_inner_rect().height() - (int)((float)kernel_value * frame_height);",
          "content_same": false
        },
        {
          "line": 84,
          "old_api": "height",
          "new_api": "Color::from_rgb(0xc25e5a)",
          "old_text": "frame_inner_rect().height()",
          "new_text": "Color::from_rgb(0xc25e5a)",
          "old_line_content": "        int user_column_height = frame_inner_rect().height() - (int)((float)(kernel_value + user_value) * frame_height);",
          "new_line_content": "        constexpr auto kernel_color = Color::from_rgb(0xc25e5a);",
          "content_same": false
        },
        {
          "line": 86,
          "old_api": "Color::from_rgb(0xc25e5a)",
          "new_api": "frame_thickness",
          "old_text": "Color::from_rgb(0xc25e5a)",
          "new_text": "frame_thickness()",
          "old_line_content": "        constexpr auto kernel_color = Color::from_rgb(0xc25e5a);",
          "new_line_content": "        painter.fill_rect({ x, frame_thickness() + user_column_height, cw, height() - frame_thickness() * 2 }, user_color);",
          "content_same": false
        },
        {
          "line": 87,
          "old_api": "Color::from_rgb(0x5a65c2)",
          "new_api": "frame_thickness",
          "old_text": "Color::from_rgb(0x5a65c2)",
          "new_text": "frame_thickness()",
          "old_line_content": "        constexpr auto user_color = Color::from_rgb(0x5a65c2);",
          "new_line_content": "        painter.fill_rect({ x, frame_thickness() + kernel_column_height, cw, height() - frame_thickness() * 2 }, kernel_color);",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "select_end_time",
          "new_api": "hover_time",
          "old_text": "m_view.select_end_time()",
          "new_text": "m_view.hover_time()",
          "old_line_content": "    u64 normalized_start_time = clamp_timestamp(min(m_view.select_start_time(), m_view.select_end_time()));",
          "new_line_content": "    u64 normalized_hover_time = clamp_timestamp(m_view.hover_time());",
          "content_same": false
        },
        {
          "line": 100,
          "old_api": "frame_thickness",
          "new_api": "draw_line",
          "old_text": "frame_thickness()",
          "new_text": "for_each_signpost([&](auto& signpost) {\n        int x = (int)((float)(signpost.timestamp - start_of_trace) * column_width);\n        int y1 = frame_thickness();\n        int y2 = height() - frame_thickness() * 2;\n\n        painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta);\n\n        return IterationDecision::Continue;\n    })",
          "old_line_content": "    painter.fill_rect({ select_hover_x, frame_thickness(), 1, height() - frame_thickness() * 2 }, Color::NamedColor::Black);",
          "new_line_content": "    for_each_signpost([&](auto& signpost) {",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": "draw_line",
          "new_api": "frame_thickness",
          "old_text": "for_each_signpost([&](auto& signpost) {\n        int x = (int)((float)(signpost.timestamp - start_of_trace) * column_width);\n        int y1 = frame_thickness();\n        int y2 = height() - frame_thickness() * 2;\n\n        painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta);\n\n        return IterationDecision::Continue;\n    })",
          "new_text": "frame_thickness()",
          "old_line_content": "    for_each_signpost([&](auto& signpost) {",
          "new_line_content": "        int y1 = frame_thickness();",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "frame_thickness",
          "new_api": "draw_line",
          "old_text": "frame_thickness()",
          "new_text": "painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta)",
          "old_line_content": "        int y2 = height() - frame_thickness() * 2;",
          "new_line_content": "        painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta);",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "first_timestamp",
          "new_api": "constexpr",
          "old_text": "for_each_signpost([&](auto& signpost) {\n        int x = (int)((float)(signpost.timestamp - m_profile.first_timestamp()) * column_width);\n        constexpr int hoverable_padding = 2;\n        Gfx::IntRect hoverable_rect { x - hoverable_padding, frame_thickness(), hoverable_padding * 2, height() - frame_thickness() * 2 };\n        if (hoverable_rect.contains_horizontally(event.x())) {\n            auto const& data = signpost.data.template get<Profile::Event::SignpostData>();\n            GUI::Application::the()->show_tooltip_immediately(String::formatted(\"{}, {}\", data.string, data.arg), this);\n            hovering_a_signpost = true;\n            return IterationDecision::Break;\n        }\n        return IterationDecision::Continue;\n    })",
          "new_text": "constexpr",
          "old_line_content": "    for_each_signpost([&](auto& signpost) {",
          "new_line_content": "        constexpr int hoverable_padding = 2;",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "first_timestamp",
          "new_api": "frame_thickness",
          "old_text": "m_profile.first_timestamp()",
          "new_text": "frame_thickness()",
          "old_line_content": "        int x = (int)((float)(signpost.timestamp - m_profile.first_timestamp()) * column_width);",
          "new_line_content": "        Gfx::IntRect hoverable_rect { x - hoverable_padding, frame_thickness(), hoverable_padding * 2, height() - frame_thickness() * 2 };",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": "constexpr",
          "new_api": "x",
          "old_text": "constexpr",
          "new_text": "event.x()",
          "old_line_content": "        constexpr int hoverable_padding = 2;",
          "new_line_content": "        if (hoverable_rect.contains_horizontally(event.x())) {",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": "frame_thickness",
          "new_api": "signpost.data.template get<Profile::Event::SignpostData>()",
          "old_text": "frame_thickness()",
          "new_text": "signpost.data.template get<Profile::Event::SignpostData>()",
          "old_line_content": "        Gfx::IntRect hoverable_rect { x - hoverable_padding, frame_thickness(), hoverable_padding * 2, height() - frame_thickness() * 2 };",
          "new_line_content": "            auto const& data = signpost.data.template get<Profile::Event::SignpostData>();",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": "x",
          "new_api": "String::formatted(\"{}, {}\", data.string, data.arg)",
          "old_text": "event.x()",
          "new_text": "String::formatted(\"{}, {}\", data.string, data.arg)",
          "old_line_content": "        if (hoverable_rect.contains_horizontally(event.x())) {",
          "new_line_content": "            GUI::Application::the()->show_tooltip_immediately(String::formatted(\"{}, {}\", data.string, data.arg), this);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 130,
          "old_api": null,
          "new_api": "first_timestamp",
          "old_text": null,
          "new_text": "for_each_signpost([&](auto& signpost) {\n        int x = (int)((float)(signpost.timestamp - m_profile.first_timestamp()) * column_width);\n        constexpr int hoverable_padding = 2;\n        Gfx::IntRect hoverable_rect { x - hoverable_padding, frame_thickness(), hoverable_padding * 2, height() - frame_thickness() * 2 };\n        if (hoverable_rect.contains_horizontally(event.x())) {\n            auto const& data = signpost.data.template get<Profile::Event::SignpostData>();\n            GUI::Application::the()->show_tooltip_immediately(String::formatted(\"{}, {}\", data.string, data.arg), this);\n            hovering_a_signpost = true;\n            return IterationDecision::Break;\n        }\n        return IterationDecision::Continue;\n    })",
          "old_line_content": "    bool hovering_a_signpost = false;",
          "new_line_content": "    for_each_signpost([&](auto& signpost) {",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": null,
          "new_api": "first_timestamp",
          "old_text": null,
          "new_text": "m_profile.first_timestamp()",
          "old_line_content": "",
          "new_line_content": "        int x = (int)((float)(signpost.timestamp - m_profile.first_timestamp()) * column_width);",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": null,
          "new_api": "hide_tooltip",
          "old_text": null,
          "new_text": "GUI::Application::the()->hide_tooltip()",
          "old_line_content": "",
          "new_line_content": "        GUI::Application::the()->hide_tooltip();",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "m_kernel_histogram.has_value()",
          "old_line_content": "void TimelineTrack::recompute_histograms_if_needed(HistogramInputs const& inputs)",
          "new_line_content": "    if (m_cached_histogram_inputs == inputs && m_kernel_histogram.has_value())",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(timestamp, inputs.start)",
          "old_line_content": "",
          "new_line_content": "        return min(inputs.end, max(timestamp, inputs.start));",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "events",
          "old_text": null,
          "new_text": "m_profile.events()",
          "old_line_content": "    m_user_histogram = Histogram { inputs.start, inputs.end, inputs.columns };",
          "new_line_content": "    for (auto& event : m_profile.events()) {",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": null,
          "new_api": "valid_at",
          "old_text": null,
          "new_text": "m_process.valid_at(event.serial)",
          "old_line_content": "            continue;",
          "new_line_content": "        if (!m_process.valid_at(event.serial))",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "clamp_timestamp",
          "old_text": null,
          "new_text": "clamp_timestamp(event.timestamp)",
          "old_line_content": "",
          "new_line_content": "        histogram.insert(clamp_timestamp(event.timestamp), 1 + event.lost_samples);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_kernel_histogram->size()",
          "old_line_content": "    }",
          "new_line_content": "    for (size_t bucket = 0; bucket < m_kernel_histogram->size(); bucket++) {",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "m_user_histogram->at(bucket)",
          "old_line_content": "",
          "new_line_content": "        auto value = m_kernel_histogram->at(bucket) + m_user_histogram->at(bucket);",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "length_in_ms",
          "old_text": null,
          "new_text": "m_profile.length_in_ms()",
          "old_line_content": "float TimelineTrack::column_width() const",
          "new_line_content": "    return (float)frame_inner_rect().width() / (float)m_profile.length_in_ms();",
          "content_same": false
        },
        {
          "line": 67,
          "old_api": null,
          "new_api": "column_width",
          "old_text": null,
          "new_text": "this->column_width()",
          "old_line_content": "",
          "new_line_content": "    float column_width = this->column_width();",
          "content_same": false
        },
        {
          "line": 71,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "m_kernel_histogram->at(bucket)",
          "old_line_content": "",
          "new_line_content": "        auto kernel_value = m_kernel_histogram->at(bucket);",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(1, (int)column_width)",
          "old_line_content": "",
          "new_line_content": "        int cw = max(1, (int)column_width);",
          "content_same": false
        },
        {
          "line": 82,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "frame_inner_rect().height()",
          "old_line_content": "",
          "new_line_content": "        int user_column_height = frame_inner_rect().height() - (int)((float)(kernel_value + user_value) * frame_height);",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": null,
          "new_api": "Color::from_rgb(0x5a65c2)",
          "old_text": null,
          "new_text": "Color::from_rgb(0x5a65c2)",
          "old_line_content": "",
          "new_line_content": "        constexpr auto user_color = Color::from_rgb(0x5a65c2);",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": null,
          "new_api": "select_end_time",
          "old_text": null,
          "new_text": "m_view.select_end_time()",
          "old_line_content": "    }",
          "new_line_content": "    u64 normalized_start_time = clamp_timestamp(min(m_view.select_start_time(), m_view.select_end_time()));",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "select_end_time",
          "old_text": null,
          "new_text": "m_view.select_end_time()",
          "old_line_content": "",
          "new_line_content": "    u64 normalized_end_time = clamp_timestamp(max(m_view.select_start_time(), m_view.select_end_time()));",
          "content_same": false
        },
        {
          "line": 97,
          "old_api": null,
          "new_api": "Color",
          "old_text": null,
          "new_text": "Color(0, 0, 0, 60)",
          "old_line_content": "    int select_end_x = (int)((float)(normalized_end_time - start_of_trace) * column_width);",
          "new_line_content": "    painter.fill_rect({ select_start_x, frame_thickness(), select_end_x - select_start_x, height() - frame_thickness() * 2 }, Color(0, 0, 0, 60));",
          "content_same": false
        },
        {
          "line": 98,
          "old_api": null,
          "new_api": "frame_thickness",
          "old_text": null,
          "new_text": "frame_thickness()",
          "old_line_content": "    int select_hover_x = (int)((float)(normalized_hover_time - start_of_trace) * column_width);",
          "new_line_content": "    painter.fill_rect({ select_hover_x, frame_thickness(), 1, height() - frame_thickness() * 2 }, Color::NamedColor::Black);",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": null,
          "new_api": "frame_thickness",
          "old_text": null,
          "new_text": "frame_thickness()",
          "old_line_content": "        int x = (int)((float)(signpost.timestamp - start_of_trace) * column_width);",
          "new_line_content": "        int y2 = height() - frame_thickness() * 2;",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": null,
          "new_api": "for_each_signpost",
          "old_text": null,
          "new_text": "m_profile.for_each_signpost([&](auto& signpost) {\n        if (signpost.pid != m_process.pid)\n            return IterationDecision::Continue;\n\n        if (!m_process.valid_at(signpost.serial))\n            return IterationDecision::Continue;\n\n        return callback(signpost);\n    })",
          "old_line_content": "void TimelineTrack::for_each_signpost(Callback callback)",
          "new_line_content": "    m_profile.for_each_signpost([&](auto& signpost) {",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "valid_at",
          "old_text": null,
          "new_text": "m_process.valid_at(signpost.serial)",
          "old_line_content": "            return IterationDecision::Continue;",
          "new_line_content": "        if (!m_process.valid_at(signpost.serial))",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": null,
          "new_api": "callback",
          "old_text": null,
          "new_text": "callback(signpost)",
          "old_line_content": "            return IterationDecision::Continue;",
          "new_line_content": "        return callback(signpost);",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": null,
          "new_api": "column_width",
          "old_text": null,
          "new_text": "this->column_width()",
          "old_line_content": "void TimelineTrack::mousemove_event(GUI::MouseEvent& event)",
          "new_line_content": "    auto column_width = this->column_width();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 129,
          "old_api": "column_width",
          "new_api": null,
          "old_text": "this->column_width()",
          "new_text": null,
          "old_line_content": "    auto column_width = this->column_width();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": "signpost.data.template get<Profile::Event::SignpostData>()",
          "new_api": null,
          "old_text": "signpost.data.template get<Profile::Event::SignpostData>()",
          "new_text": null,
          "old_line_content": "            auto const& data = signpost.data.template get<Profile::Event::SignpostData>();",
          "new_line_content": "            hovering_a_signpost = true;",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "String::formatted(\"{}, {}\", data.string, data.arg)",
          "new_api": null,
          "old_text": "String::formatted(\"{}, {}\", data.string, data.arg)",
          "new_text": null,
          "old_line_content": "            GUI::Application::the()->show_tooltip_immediately(String::formatted(\"{}, {}\", data.string, data.arg), this);",
          "new_line_content": "            return IterationDecision::Break;",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "hide_tooltip",
          "new_api": null,
          "old_text": "GUI::Application::the()->hide_tooltip()",
          "new_text": null,
          "old_line_content": "        GUI::Application::the()->hide_tooltip();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "m_kernel_histogram.has_value()",
          "new_text": null,
          "old_line_content": "    if (m_cached_histogram_inputs == inputs && m_kernel_histogram.has_value())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "max",
          "new_api": null,
          "old_text": "max(timestamp, inputs.start)",
          "new_text": null,
          "old_line_content": "        return min(inputs.end, max(timestamp, inputs.start));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "events",
          "new_api": null,
          "old_text": "m_profile.events()",
          "new_text": null,
          "old_line_content": "    for (auto& event : m_profile.events()) {",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "valid_at",
          "new_api": null,
          "old_text": "m_process.valid_at(event.serial)",
          "new_text": null,
          "old_line_content": "        if (!m_process.valid_at(event.serial))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "clamp_timestamp",
          "new_api": null,
          "old_text": "clamp_timestamp(event.timestamp)",
          "new_text": null,
          "old_line_content": "        histogram.insert(clamp_timestamp(event.timestamp), 1 + event.lost_samples);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_kernel_histogram->size()",
          "new_text": null,
          "old_line_content": "    for (size_t bucket = 0; bucket < m_kernel_histogram->size(); bucket++) {",
          "new_line_content": "        if (value > m_max_value)",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "at",
          "new_api": null,
          "old_text": "m_user_histogram->at(bucket)",
          "new_text": null,
          "old_line_content": "        auto value = m_kernel_histogram->at(bucket) + m_user_histogram->at(bucket);",
          "new_line_content": "            m_max_value = value;",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "length_in_ms",
          "new_api": null,
          "old_text": "m_profile.length_in_ms()",
          "new_text": null,
          "old_line_content": "    return (float)frame_inner_rect().width() / (float)m_profile.length_in_ms();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 66,
          "old_api": "width",
          "new_api": null,
          "old_text": "frame_inner_rect().width()",
          "new_text": null,
          "old_line_content": "    size_t columns = frame_inner_rect().width() / column_width;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 73,
          "old_api": "at",
          "new_api": null,
          "old_text": "m_kernel_histogram->at(bucket)",
          "new_text": null,
          "old_line_content": "        auto kernel_value = m_kernel_histogram->at(bucket);",
          "new_line_content": "        if (kernel_value + user_value == 0)",
          "content_same": false
        },
        {
          "line": 74,
          "old_api": "at",
          "new_api": null,
          "old_text": "m_user_histogram->at(bucket)",
          "new_text": null,
          "old_line_content": "        auto user_value = m_user_histogram->at(bucket);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 83,
          "old_api": "height",
          "new_api": null,
          "old_text": "frame_inner_rect().height()",
          "new_text": null,
          "old_line_content": "        int kernel_column_height = frame_inner_rect().height() - (int)((float)kernel_value * frame_height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "frame_thickness",
          "new_api": null,
          "old_text": "frame_thickness()",
          "new_text": null,
          "old_line_content": "        painter.fill_rect({ x, frame_thickness() + user_column_height, cw, height() - frame_thickness() * 2 }, user_color);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": "frame_thickness",
          "new_api": null,
          "old_text": "frame_thickness()",
          "new_text": null,
          "old_line_content": "        painter.fill_rect({ x, frame_thickness() + kernel_column_height, cw, height() - frame_thickness() * 2 }, kernel_color);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "select_end_time",
          "new_api": null,
          "old_text": "m_view.select_end_time()",
          "new_text": null,
          "old_line_content": "    u64 normalized_end_time = clamp_timestamp(max(m_view.select_start_time(), m_view.select_end_time()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 94,
          "old_api": "hover_time",
          "new_api": null,
          "old_text": "m_view.hover_time()",
          "new_text": null,
          "old_line_content": "    u64 normalized_hover_time = clamp_timestamp(m_view.hover_time());",
          "new_line_content": "    int select_start_x = (int)((float)(normalized_start_time - start_of_trace) * column_width);",
          "content_same": false
        },
        {
          "line": 99,
          "old_api": "Color",
          "new_api": null,
          "old_text": "Color(0, 0, 0, 60)",
          "new_text": null,
          "old_line_content": "    painter.fill_rect({ select_start_x, frame_thickness(), select_end_x - select_start_x, height() - frame_thickness() * 2 }, Color(0, 0, 0, 60));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 104,
          "old_api": "frame_thickness",
          "new_api": null,
          "old_text": "frame_thickness()",
          "new_text": null,
          "old_line_content": "        int y1 = frame_thickness();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "draw_line",
          "new_api": null,
          "old_text": "painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta)",
          "new_text": null,
          "old_line_content": "        painter.draw_line({ x, y1 }, { x, y2 }, Color::Magenta);",
          "new_line_content": "        return IterationDecision::Continue;",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "for_each_signpost",
          "new_api": null,
          "old_text": "m_profile.for_each_signpost([&](auto& signpost) {\n        if (signpost.pid != m_process.pid)\n            return IterationDecision::Continue;\n\n        if (!m_process.valid_at(signpost.serial))\n            return IterationDecision::Continue;\n\n        return callback(signpost);\n    })",
          "new_text": null,
          "old_line_content": "    m_profile.for_each_signpost([&](auto& signpost) {",
          "new_line_content": "            return IterationDecision::Continue;",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": "valid_at",
          "new_api": null,
          "old_text": "m_process.valid_at(signpost.serial)",
          "new_text": null,
          "old_line_content": "        if (!m_process.valid_at(signpost.serial))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": "callback",
          "new_api": null,
          "old_text": "callback(signpost)",
          "new_text": null,
          "old_line_content": "        return callback(signpost);",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 17,
      "total_additions": 25,
      "total_deletions": 26,
      "total_api_changes": 68
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 68,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 99,
    "api_calls_after": 98,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 4,
      "total_diff_lines": 19
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/08b90bb2d02c8e960ce271673346dede287370f8",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/08b90bb2d02c8e960ce271673346dede287370f8/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/08b90bb2d02c8e960ce271673346dede287370f8/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/08b90bb2d02c8e960ce271673346dede287370f8/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 950,
          "old_api": "rs[block_context.in",
          "new_api": "= 0;\n            for (auto t = 0u; t <",
          "old_text": "rs[block_context.in",
          "new_text": " = 0;\n            for (auto t = 0u; t < ",
          "old_line_content": "                    clip_3(0, scaled_right, (samples_start >> 4) + static_cast<i32>(t) - 3));",
          "new_line_content": "            auto samples_start = offset_scaled_block_x + static_cast<i32>(scaled_step_x * column);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "mulated_samples += subpel_filters[block_context.interpol",
          "new_api": "intermediate_buffer_at",
          "old_text": "mulated_samples += subpel_filters[block_context.interpol",
          "new_text": "intermediate_buffer_at(samples_start ",
          "old_line_content": "                auto sample = intermediate_buffer_at((samples_start >> 4) + t, column);",
          "new_line_content": "            auto samples_start = (offset_scaled_block_y & 15) + static_cast<i32>(scaled_step_y * row);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "t - y);\n\n    // The variabl",
          "new_api": ") * 8u) >> (plane > 0 ?",
          "old_text": "t - y);\n\n    // The variabl",
          "new_text": ") * 8u) >> (plane > 0 ?",
          "old_line_content": "    auto width_in_frame_buffer = min(width, frame_width - x);",
          "new_line_content": "    VERIFY(!frame_buffer.is_empty());",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "me[ 1 ] > NONE.\n    // − If i",
          "new_api": "t.color_config.subsampling_x : false)",
          "old_text": "me[ 1 ] > NONE.\n    // − If i",
          "new_text": "t.color_config.subsampling_x : false)",
          "old_line_content": "    auto height_in_frame_buffer = min(height, frame_height - y);",
          "new_line_content": "    auto frame_width = (block_context.frame_context.columns() * 8u) >> (plane > 0 ? block_context.frame_context.color_config.subsampling_x : false);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": ", 19, 20,",
          "new_api": "b ) is specified as",
          "old_text": ", 19, 20,",
          "new_text": " b ) is specified as ",
          "old_line_content": "    constexpr u16 ac_qlookup[3][256] = {",
          "new_line_content": "    return dc_qlookup[(bit_depth - 8) >> 1][clip_3<u8>(0, 255, b)];",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "ata equal to FeatureData[ segment_id ][ SEG_LVL_ALT_Q ].",
          "new_api": "context)\n{\n    // The",
          "old_text": "ata equal to FeatureData[ segment_id ][ SEG_LVL_ALT_Q ].",
          "new_text": "context)\n{\n    // The",
          "old_line_content": "    if (Parser::seg_feature_active(block_context, SEG_LVL_ALT_Q)) {",
          "new_line_content": "    return ac_qlookup[(bit_depth - 8) >> 1][clip_3<u8>(0, 255, b)];",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "rows",
          "new_api": "rame[ plane ][ y + i ][ x + j ] is set equal to Clip1( CurrFrame[ plane ][ y + i ][",
          "old_text": "ame_context.rows() * 8) >> subsamplin",
          "new_text": "rame[ plane ][ y + i ][ x + j ] is set equal to Clip1( CurrFrame[ plane ][ y + i ][",
          "old_line_content": "    auto frame_width = (block_context.frame_context.columns() * 8) >> subsampling_x;",
          "new_line_content": "    TRY(inverse_transform_2d(block_context, dequantized, log2_of_block_size, transform_set));",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];",
          "new_api": "rows",
          "old_text": " dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];\n     ",
          "new_text": "ame_context.rows() * 8) >> subsamplin",
          "old_line_content": "            auto index = index_from_row_and_column(transform_block_y + i, transform_block_x + j, frame_width);",
          "new_line_content": "    auto frame_width = (block_context.frame_context.columns() * 8) >> subsampling_x;",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": ".frame_context.color_config.bit_depth, curr",
          "new_api": "ize, frame_width - transform_block",
          "old_text": ".frame_context.color_config.bit_depth, curr",
          "new_text": "ize, frame_width - transform_block",
          "old_line_content": "            auto dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];",
          "new_line_content": "    auto frame_height = (block_context.frame_context.rows() * 8) >> subsampling_y;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "}\n    }\n\n    return {};\n}\n\ninline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_trans",
          "new_api": "ame_height - transform_block_y);\n\n    for (auto",
          "old_text": "\n        }\n    }\n\n    return {};\n}\n\ninline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_trans",
          "new_text": "ame_height - transform_block_y);\n\n    for (auto ",
          "old_line_content": "            current_buffer[index] = clip_1(block_context.frame_context.color_config.bit_depth, current_buffer[index] + dequantized_value);",
          "new_line_content": "    auto width_in_frame_buffer = min(block_size, frame_width - transform_block_x);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "n.\ninline void Decoder:",
          "new_api": "{\n    value = (val",
          "old_text": "n.\ninline void Decoder:",
          "new_text": "{\n    value = (val",
          "old_line_content": "    return static_cast<i32>(value);",
          "new_line_content": "    return cos64(angle - 32u);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "gle ) - T[ b",
          "new_api": "nction B( a, b, angle, 0 ) perfor",
          "old_text": "gle ) - T[ b",
          "new_text": "nction B( a, b, angle, 0 ) perfor",
          "old_line_content": "    auto cos = cos64(angle);",
          "new_line_content": "    value = (value + static_cast<T>(1u << (bits - 1u))) >> bits;",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": ").\n    i64",
          "new_api": "n.\ninline void Decoder:",
          "old_text": " ).\n    i64 ",
          "new_text": "n.\ninline void Decoder:",
          "old_line_content": "    auto sin = sin64(angle);",
          "new_line_content": "    return static_cast<i32>(value);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "] = rounded_right_shift(rotated_b,",
          "new_api": "gle ) - T[ b",
          "old_text": "] = rounded_right_shift(rotated_b,",
          "new_text": "gle ) - T[ b",
          "old_line_content": "    data[index_a] = rounded_right_shift(rotated_a, 14);",
          "new_line_content": "    auto cos = cos64(angle);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "= 3) {",
          "new_api": "data, log2_of_block_size - 1));\n\n    // 2.6 Invok",
          "old_text": "= 3) {\n       ",
          "new_text": "data, log2_of_block_size - 1));\n\n    // 2.6 Invok",
          "old_line_content": "        butterfly_rotation_in_place(data, index, block_size - 1 - i, 32 - brev(5, index), false);",
          "new_line_content": "        butterfly_rotation_in_place(data, 0, 1, 16, true);",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "sion array",
          "new_api": "n[index_b] = rounded_right_shi",
          "old_text": "sion array ",
          "new_text": "n[index_b] = rounded_right_shi",
          "old_line_content": "    VERIFY(data.size() == 8);",
          "new_line_content": "    destination[index_a] = rounded_right_shift(a + b, 14);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "i = 0u; i < 2; i++)",
          "new_api": "for (auto i = 0u; i < 2; i",
          "old_text": "i = 0u; i < 2; i++)\n      ",
          "new_text": "for (auto i = 0u; i < 2; i",
          "old_line_content": "        hadamard_rotation(high_precision_temp.span(), data, 4 + i, 6 + i);",
          "new_line_content": "        hadamard_rotation(high_precision_temp.span(), data, i, 4 + i);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "for (auto i = 0u; i < 2; i++)\n        butterfly",
          "new_api": "0..1.\n    for (auto i = 0u",
          "old_text": "  for (auto i = 0u; i < 2; i++)\n        butterfly",
          "new_text": "0..1.\n    for (auto i = 0u",
          "old_line_content": "        hadamard_rotation_in_place(data, i, 2 + i, false);",
          "new_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 4 + (3 * i), 5 + i, 24 - (16 * i), true);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "for (auto i = 0u; i < 4;",
          "new_api": "31-4*i, 1 ) for i = 0..7.\n    for (auto i = 0u; i < 8; i++)\n        butter",
          "old_text": "  for (auto i = 0u; i < 4;",
          "new_text": " 31-4*i, 1 ) for i = 0..7.\n    for (auto i = 0u; i < 8; i++)\n        butter",
          "old_line_content": "        hadamard_rotation(high_precision_temp.span(), data, i, 8 + i);",
          "new_line_content": "    inverse_asymmetric_discrete_sine_transform_input_array_permutation(data, 4);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": "+i ) for i = 0..3.\n    for",
          "new_api": "7.\n    for (auto i = 0u; i",
          "old_text": "+i ) for i = 0..3.\n    for",
          "new_text": "7.\n    for (auto i = 0u; i",
          "old_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 8 + (2 * i), 9 + (2 * i), 128 + 28 - (16 * i), true);",
          "new_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 2 * i, 1 + (2 * i), 31 - (4 * i), true);",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "i = 0u; i < 4; i++)",
          "new_api": "for (auto i = 0u; i < 4;",
          "old_text": " i = 0u; i < 4; i++)\n     ",
          "new_text": "  for (auto i = 0u; i < 4;",
          "old_line_content": "        hadamard_rotation(high_precision_temp.span(), data, 8 + i, 12 + i);",
          "new_line_content": "        hadamard_rotation(high_precision_temp.span(), data, i, 8 + i);",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "i = 0..1, for j = 0..1.\n    for (auto i = 0u; i <",
          "new_api": "+i ) for i = 0..3.\n    for",
          "old_text": "i = 0..1, for j = 0..1.\n    for (auto i = 0u; i <",
          "new_text": "+i ) for i = 0..3.\n    for",
          "old_line_content": "        hadamard_rotation_in_place(data, i, 4 + i, false);",
          "new_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 8 + (2 * i), 9 + (2 * i), 128 + 28 - (16 * i), true);",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "turn DecoderError::corrupted(\"Unknown tx_type\"sv);\n        }",
          "new_api": "process as specified in section 8.7.1.3 with the input variable n.",
          "old_text": "turn DecoderError::corrupted(\"Unknown tx_type\"sv);\n        }\n\n     ",
          "new_text": "process as specified in section 8.7.1.3 with the input variable n.\n         ",
          "old_line_content": "            TRY(inverse_asymmetric_discrete_sine_transform(row, log2_of_block_size));",
          "new_line_content": "            TRY(inverse_discrete_cosine_transform_array_permutation(row, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "VERIFY_NOT_REACHED();\n        }\n\n        // 5. If Lossless is equal t",
          "new_api": "CT process as specified in section 8.7.1.3 with the input variable n.",
          "old_text": " VERIFY_NOT_REACHED();\n        }\n\n        // 5. If Lossless is equal t",
          "new_text": "CT process as specified in section 8.7.1.3 with the input variable n.\n         ",
          "old_line_content": "            TRY(inverse_asymmetric_discrete_sine_transform(column, log2_of_block_size));",
          "new_line_content": "            TRY(inverse_discrete_cosine_transform_array_permutation(column, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "eference_frames",
          "new_api": "[ i ][ j ] equal to Round2( T[ i ], Min( 6,",
          "old_text": "eference_frames(FrameContext c",
          "new_text": "[ i ][ j ] equal to Round2( T[ i ], Min( 6,",
          "old_line_content": "                dequantized[index] = rounded_right_shift(dequantized[index], min(6, log2_of_block_size + 2));",
          "new_line_content": "            dequantized[index_from_row_and_column(i, j, block_size)] = column[i];",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "ion, source, width);\n                }",
          "new_api": "buffer.resize_and_keep_c",
          "old_text": "ion, source, width);\n                }",
          "new_text": "buffer.resize_and_keep_c",
          "old_line_content": "                    auto* destination = &frame_store_buffer[index_from_row_and_column(y, 0, width)];",
          "new_line_content": "                auto const& original_buffer = get_output_buffer(plane);",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "block_contexts",
          "new_api": "}\n    }\n\n    // 2. If show_existing_frame is equal to 0, the following applies:\n    if (!fra",
          "old_text": "2d(frame_context.block_contexts()));",
          "new_text": "}\n    }\n\n    // 2. If show_existing_frame is equal to 0, the following applies:\n    if (!fra",
          "old_line_content": "    if (!frame_context.shows_existing_frame()) {",
          "new_line_content": "                    AK::TypedTransfer<RemoveReference<decltype(*destination)>>::copy(destination, source, width);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1031,
          "old_api": null,
          "new_api": "ock_context, ReferenceIndex::Secondary, block_conte",
          "old_text": null,
          "new_text": "ock_context, ReferenceIndex::Secondary, block_conte",
          "old_line_content": "",
          "new_line_content": "    auto second_predicted_span = second_predicted_buffer.span().trim(width * height);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "ock_context.column, x, y, width, height, block_index, second_predicted_span));\n\n    for (auto i = 0u; i < height_in_frame_buffer; i++) {\n        for (auto j = 0u; j <",
          "old_text": null,
          "new_text": "ock_context.column, x, y, width, height, block_index, second_predicted_span));\n\n    for (auto i = 0u; i < height_in_frame_buffer; i++) {\n        for (auto j = 0u; j <",
          "old_line_content": "    return {};",
          "new_line_content": "    TRY(predict_inter_block(plane, block_context, ReferenceIndex::Secondary, block_context.row, block_context.column, x, y, width, height, block_index, second_predicted_span));",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "30-8*i, 1 ) for i = 0..3.\n    for (auto i = 0u; i < 4; i++)\n        butter",
          "old_text": null,
          "new_text": " 30-8*i, 1 ) for i = 0..3.\n    for (auto i = 0u; i < 4; i++)\n        butter",
          "old_line_content": "    for (auto i = 0u; i < 4; i++)",
          "new_line_content": "    inverse_asymmetric_discrete_sine_transform_input_array_permutation(data, 3);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "dc_q",
          "old_text": null,
          "new_text": "dc_q(u8 bit_depth, u8 b)\n{\n    // The function d",
          "old_line_content": "{",
          "new_line_content": "            frame_buffer_at(y + i, x + j) = rounded_right_shift(predicted_buffer_at(predicted_span, i, j) + predicted_buffer_at(second_predicted_span, i, j), 1);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": ".3.\n    for (auto i = 0u;",
          "old_text": null,
          "new_text": ".3.\n    for (auto i = 0u; ",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 2 * i, 1 + (2 * i), 30 - (8 * i), true);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "17, 18,",
          "old_text": null,
          "new_text": " 17, 18, ",
          "old_line_content": "}",
          "new_line_content": "    constexpr u16 dc_qlookup[3][256] = {",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "i = 0u; i < 2; i++)",
          "old_text": null,
          "new_text": "i = 0u; i < 2; i++)\n      ",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "        hadamard_rotation(high_precision_temp.span(), data, 4 + i, 6 + i);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "for (auto i = 0u; i < 2; i++)\n        butterfly",
          "old_text": null,
          "new_text": "  for (auto i = 0u; i < 2; i++)\n        butterfly",
          "old_line_content": "    //    set equal to 3.",
          "new_line_content": "        hadamard_rotation_in_place(data, i, 2 + i, false);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "permutation process specified in section 8.7.1.5 with the input vari",
          "old_text": null,
          "new_text": " permutation process specified in section 8.7.1.5 with the input vari",
          "old_line_content": "    for (auto i = 0u; i < 4; i++) {",
          "new_line_content": "        butterfly_rotation_in_place(data, 2 + (4 * i), 3 + (4 * i), 16, true);",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": ", 19, 20,",
          "old_text": null,
          "new_text": ", 19, 20,",
          "old_line_content": "}",
          "new_line_content": "    constexpr u16 ac_qlookup[3][256] = {",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": null,
          "new_api": "to -T[ 1+2*i ] for i = 0..3.\n    for (auto i = 0u; i < 4; i++) {\n        aut",
          "old_text": null,
          "new_text": "to -T[ 1+2*i ] for i = 0..3.\n    for (auto i = 0u; i < 4; i++) {\n        aut",
          "old_line_content": "    return {};",
          "new_line_content": "    inverse_asymmetric_discrete_sine_transform_output_array_permutation(data, 3);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "ata equal to FeatureData[ segment_id ][ SEG_LVL_ALT_Q ].",
          "old_text": null,
          "new_text": "ata equal to FeatureData[ segment_id ][ SEG_LVL_ALT_Q ].",
          "old_line_content": "        }",
          "new_line_content": "    if (Parser::seg_feature_active(block_context, SEG_LVL_ALT_Q)) {",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "ision array",
          "old_text": null,
          "new_text": "ision array",
          "old_line_content": "    Array<i64, 16> high_precision_temp;",
          "new_line_content": "    VERIFY(data.size() == 16);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "text.frame_context.base_",
          "old_text": null,
          "new_text": "text.frame_context.base_",
          "old_line_content": "u16 Decoder::get_dc_quantizer(BlockContext const& block_context, u8 plane)",
          "new_line_content": "        return clip_3<u8>(0, 255, data);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "const& block_context, u8 plane)\n{\n    /",
          "old_text": null,
          "new_text": "const& block_context, u8 plane)\n{\n    /",
          "old_line_content": "    // The function get_ac_quant( plane ) returns the quantizer value for the ac coefficient for a particular plane and",
          "new_line_content": "    return dc_q(block_context.frame_context.color_config.bit_depth, static_cast<u8>(get_base_quantizer_index(block_context) + offset));",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": null,
          "new_api": "i = 0u; i < 4; i++)",
          "old_text": null,
          "new_text": " i = 0u; i < 4; i++)\n     ",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "        hadamard_rotation(high_precision_temp.span(), data, 8 + i, 12 + i);",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": null,
          "new_api": "i = 0..1, for j = 0..1.\n    for (auto i = 0u; i <",
          "old_text": null,
          "new_text": "i = 0..1, for j = 0..1.\n    for (auto i = 0u; i <",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "        hadamard_rotation_in_place(data, i, 4 + i, false);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "4+8*j+i, 6+8*j+i ) for i",
          "old_text": null,
          "new_text": " 4+8*j+i, 6+8*j+i ) for i ",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "            butterfly_rotation(data, high_precision_temp.span(), 4 + (8 * i) + (3 * j), 5 + (8 * i) + j, 24 - (16 * j), true);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "ane, BlockContext const& block_context,",
          "old_text": null,
          "new_text": "ane, BlockContext const& block_context,",
          "old_line_content": "    // The variable dqDenom is set equal to 2 if txSz is equal to Transform_32X32, otherwise dqDenom is set equal to 1.",
          "new_line_content": "    return ac_q(block_context.frame_context.color_config.bit_depth, static_cast<u8>(get_base_quantizer_index(block_context) + offset));",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "for i = 0..1, for j = 0..1",
          "old_text": null,
          "new_text": "for i = 0..1, for j = 0..1",
          "old_line_content": "    for (auto i = 0u; i < 2; i++)",
          "new_line_content": "            hadamard_rotation(high_precision_temp.span(), data, 4 + (8 * j) + i, 6 + (8 * j) + i);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "*i, 48+64*(i^j), 0 ) for i = 0..1, for j = 0..1.\n    for (auto i = 0u",
          "old_text": null,
          "new_text": "*i, 48+64*(i^j), 0 ) for i = 0..1, for j = 0..1.\n    for (auto i = 0u",
          "old_line_content": "    // set equal to 4.",
          "new_line_content": "            hadamard_rotation_in_place(data, (8 * j) + i, 2 + (8 * j) + i, false);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "// 11. Invoke the ADST output array permutation process specified in section 8.7.1.5 with the input var",
          "old_text": null,
          "new_text": "    // 11. Invoke the ADST output array permutation process specified in section 8.7.1.5 with the input var",
          "old_line_content": "    for (auto i = 0u; i < 2; i++) {",
          "new_line_content": "            butterfly_rotation_in_place(data, 2 + (4 * j) + (8 * i), 3 + (4 * j) + (8 * i), 48 + (64 * (i ^ j)), false);",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "equal to -T[ 1+12*j+2*i ] for i = 0..1, for j = 0..1.\n    for (auto i = 0u;",
          "old_text": null,
          "new_text": "equal to -T[ 1+12*j+2*i ] for i = 0..1, for j = 0..1.\n    for (auto i = 0u; ",
          "old_line_content": "        }",
          "new_line_content": "    inverse_asymmetric_discrete_sine_transform_output_array_permutation(data, 4);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "j = 0u; j < block_size; j++) {",
          "old_text": null,
          "new_text": " j = 0u; j < block_size; j++) {\n      ",
          "old_line_content": "        }",
          "new_line_content": "    Intermediate ac_quant = get_ac_quantizer(block_context, plane);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "dequantized[index] = (block_contex",
          "old_text": null,
          "new_text": "         dequantized[index] = (block_contex",
          "old_line_content": "    // 2. Dequant[ 0 ][ 0 ] is set equal to ( Tokens[ 0 ] * get_dc_quant( plane ) ) / dqDenom",
          "new_line_content": "            auto index = index_from_row_and_column(i, j, block_size);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "formance that the values written into",
          "old_text": null,
          "new_text": "formance that the values written into ",
          "old_line_content": "    // 3. Invoke the 2D inverse transform block process defined in section 8.7.2 with the variable n as input.",
          "new_line_content": "    dequantized[0] = (block_context.residual_tokens[0] * get_dc_quantizer(block_context, plane)) / dq_denominator;",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "if (log2_of_block_size == 2) {\n        // − If n is e",
          "old_text": null,
          "new_text": "   if (log2_of_block_size == 2) {\n        // − If n is e",
          "old_line_content": "    }",
          "new_line_content": "        return DecoderError::corrupted(\"Block size was out of range\"sv);",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "// − Otherwise if n is equal to 3, invoke the",
          "old_text": null,
          "new_text": "    // − Otherwise if n is equal to 3, invoke the ",
          "old_line_content": "    // − Otherwise (n is equal to 4), invoke the Inverse ADST16 process specified in section 8.7.1.8.",
          "new_line_content": "        inverse_asymmetric_discrete_sine_transform_4(data);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "ig.subsampling_x : 0);",
          "old_text": null,
          "new_text": "ig.subsampling_x : 0);\n ",
          "old_line_content": "",
          "new_line_content": "    auto& current_buffer = get_output_buffer(plane);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "T16 process specified in section 8.7.1.8.\n    retu",
          "old_text": null,
          "new_text": "T16 process specified in section 8.7.1.8.\n    retu",
          "old_line_content": "{",
          "new_line_content": "        return inverse_asymmetric_discrete_sine_transform_8(data);",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": null,
          "new_api": "const& block_context, Span<Intermediate> dequantize",
          "old_text": null,
          "new_text": "const& block_context, Span<Intermediate> dequantize",
          "old_line_content": "",
          "new_line_content": "    return inverse_asymmetric_discrete_sine_transform_16(data);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "i++) {\n        for (auto j = 0u; j < width_in_fra",
          "old_text": null,
          "new_text": "i++) {\n        for (auto j = 0u; j < width_in_fra",
          "old_line_content": "        }",
          "new_line_content": "    auto height_in_frame_buffer = min(block_size, frame_height - transform_block_y);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];",
          "old_text": null,
          "new_text": " dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];\n     ",
          "old_line_content": "}",
          "new_line_content": "            auto index = index_from_row_and_column(transform_block_y + i, transform_block_x + j, frame_width);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": ".frame_context.color_config.bit_depth, curr",
          "old_text": null,
          "new_text": ".frame_context.color_config.bit_depth, curr",
          "old_line_content": "",
          "new_line_content": "            auto dequantized_value = dequantized[index_from_row_and_column(i, j, block_size)];",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "}\n    }\n\n    return {};\n}\n\ninline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_trans",
          "old_text": null,
          "new_text": "\n        }\n    }\n\n    return {};\n}\n\ninline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_trans",
          "old_line_content": "inline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_transform(Span<Intermediate> data, u8 log2_of_block_size, u8 shift)",
          "new_line_content": "            current_buffer[index] = clip_1(block_context.frame_context.color_config.bit_depth, current_buffer[index] + dequantized_value);",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "o i = 0u; i < block_size; i++) {",
          "old_text": null,
          "new_text": "o i = 0u; i < block_size; i++) {\n",
          "old_line_content": "",
          "new_line_content": "    Span<Intermediate> row = row_array.span().trim(block_size);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": null,
          "new_api": "s specified in section 8.7.1.10 with shift",
          "old_text": null,
          "new_text": "s specified in section 8.7.1.10 with shift ",
          "old_line_content": "        }",
          "new_line_content": "            row[j] = dequantized[index_from_row_and_column(i, j, block_size)];",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "ine i32 Decoder::cos64(u8 angle)\n{\n    const i32",
          "old_text": null,
          "new_text": "ine i32 Decoder::cos64(u8 angle)\n{\n    const i32 ",
          "old_line_content": "    const i32 cos64_lookup[33] = { 16384, 16364, 16305, 16207, 16069, 15893, 15679, 15426, 15137, 14811, 14449, 14053, 13623, 13160, 12665, 12140, 11585, 11003, 10394, 9760, 9102, 8423, 7723, 7005, 6270, 5520, 4756, 3981, 3196, 2404, 1606, 804, 0 };",
          "new_line_content": "        return DecoderError::corrupted(\"Block size was not 4\"sv);",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": null,
          "new_api": "));\n            continue;\n        }",
          "old_text": null,
          "new_text": "));\n            continue;\n        }\n     ",
          "old_line_content": "            // follows:",
          "new_line_content": "        if (block_context.frame_context.is_lossless()) {",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "3] = { 16384, 16364, 16305, 162",
          "old_text": null,
          "new_text": "3] = { 16384, 16364, 16305, 162",
          "old_line_content": "    // 1. Set a variable angle2 equal to angle & 127.",
          "new_line_content": "    return DecoderError::not_implemented();",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "_set.second_transform) {\n        case TransformType::DCT:",
          "old_text": null,
          "new_text": "_set.second_transform) {\n        case TransformType::DCT:\n  ",
          "old_line_content": "            // 1. Invoke the inverse DCT permutation process as specified in section 8.7.1.2 with the input variable n.",
          "new_line_content": "            TRY(inverse_walsh_hadamard_transform(row, log2_of_block_size, 2));",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": null,
          "new_api": "// 4. Otherwise (TxType is equal to DCT_ADST or TxTy",
          "old_text": null,
          "new_text": "      // 4. Otherwise (TxType is equal to DCT_ADST or TxTy",
          "old_line_content": "        default:",
          "new_line_content": "            TRY(inverse_discrete_cosine_transform(row, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": null,
          "new_api": "turn DecoderError::corrupted(\"Unknown tx_type\"sv);\n        }",
          "old_text": null,
          "new_text": "turn DecoderError::corrupted(\"Unknown tx_type\"sv);\n        }\n\n     ",
          "old_line_content": "        for (auto j = 0u; j < block_size; j++)",
          "new_line_content": "            TRY(inverse_asymmetric_discrete_sine_transform(row, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "(n0-1).\n        for (auto j = 0u; j < block_",
          "old_text": null,
          "new_text": "(n0-1).\n        for (auto j = 0u; j < block_",
          "old_line_content": "",
          "new_line_content": "            return DecoderError::corrupted(\"Unknown tx_type\"sv);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "span",
          "old_text": null,
          "new_text": "ay;\n    auto column = column_array.span().t",
          "old_line_content": "    for (auto j = 0u; j < block_size; j++) {",
          "new_line_content": "            dequantized[index_from_row_and_column(i, j, block_size)] = row[j];",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "r (auto j = 0u; j < block_size; j++)",
          "old_text": null,
          "new_text": "r (auto j = 0u; j < block_size; j++)",
          "old_line_content": "",
          "new_line_content": "    auto column = column_array.span().trim(block_size);",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "s specified in section 8.7.1.10 with shift",
          "old_text": null,
          "new_text": "s specified in section 8.7.1.10 with shift ",
          "old_line_content": "        }",
          "new_line_content": "            column[i] = dequantized[index_from_row_and_column(i, j, block_size)];",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": ", 2));\n            continue;\n        }",
          "old_text": null,
          "new_text": ", 2));\n            continue;\n        }\n  ",
          "old_line_content": "            // follows:",
          "new_line_content": "        if (block_context.frame_context.is_lossless()) {",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": null,
          "new_api": "orm_set.first_transform) {\n        case TransformType::DCT:",
          "old_text": null,
          "new_text": "orm_set.first_transform) {\n        case TransformType::DCT:\n   ",
          "old_line_content": "            // 1. Invoke the inverse DCT permutation process as specified in section 8.7.1.2 with the input variable n.",
          "new_line_content": "            TRY(inverse_walsh_hadamard_transform(column, log2_of_block_size, 2));",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": ").\n    i64",
          "old_text": null,
          "new_text": " ).\n    i64 ",
          "old_line_content": "    // 4. T[ b ] is set equal to Round2( y, 14 ).",
          "new_line_content": "    auto sin = sin64(angle);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "] = rounded_right_shift(rotated_b,",
          "old_text": null,
          "new_text": "] = rounded_right_shift(rotated_b,",
          "old_line_content": "    if (flip)",
          "new_line_content": "    data[index_a] = rounded_right_shift(rotated_a, 14);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "tion and flip specified by the fol",
          "old_text": null,
          "new_text": "tion and flip specified by the fol",
          "old_line_content": "",
          "new_line_content": "    data[index_b] = rounded_right_shift(rotated_b, 14);",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "// 4. Otherwise (TxType is equal to ADST_DCT or TxTy",
          "old_text": null,
          "new_text": "         // 4. Otherwise (TxType is equal to ADST_DCT or TxTy",
          "old_line_content": "        default:",
          "new_line_content": "            TRY(inverse_discrete_cosine_transform(column, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": null,
          "new_api": "VERIFY_NOT_REACHED();\n        }\n\n        // 5. If Lossless is equal t",
          "old_text": null,
          "new_text": " VERIFY_NOT_REACHED();\n        }\n\n        // 5. If Lossless is equal t",
          "old_line_content": "        for (auto i = 0u; i < block_size; i++)",
          "new_line_content": "            TRY(inverse_asymmetric_discrete_sine_transform(column, log2_of_block_size));",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "es saved into the array T by this",
          "old_text": null,
          "new_text": "es saved into the array T by this ",
          "old_line_content": "",
          "new_line_content": "        swap(data[index_a], data[index_b]);",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": null,
          "new_api": "0..(n0-1).\n        f",
          "old_text": null,
          "new_text": "0..(n0-1).\n        f",
          "old_line_content": "        // 6. Otherwise (Lossless is equal to 0), set Dequant[ i ][ j ] equal to Round2( T[ i ], Min( 6, n + 2 ) )",
          "new_line_content": "            VERIFY_NOT_REACHED();",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "ndex = index_from_row_and_column(i, j, bl",
          "old_text": null,
          "new_text": "ndex = index_from_row_and_column(i, j, bl",
          "old_line_content": "",
          "new_line_content": "        if (!block_context.frame_context.is_lossless()) {",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": ", min(6, log2_of_block_size + 2));",
          "old_text": null,
          "new_text": ", min(6, log2_of_block_size + 2));\n        ",
          "old_line_content": "}",
          "new_line_content": "                auto index = index_from_row_and_column(i, j, block_size);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "e following ordered st",
          "old_text": null,
          "new_text": "e following ordered st",
          "old_line_content": "    auto b_value = data[index_b];",
          "new_line_content": "        swap(index_a, index_b);",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": null,
          "new_api": "eference_frames",
          "old_text": null,
          "new_text": "eference_frames(FrameContext c",
          "old_line_content": "",
          "new_line_content": "                dequantized[index] = rounded_right_shift(dequantized[index], min(6, log2_of_block_size + 2));",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "mes[i];\n\n            // − RefFrameWidth[ i ] is set equ",
          "old_text": null,
          "new_text": "mes[i];\n\n            // − RefFrameWidth[ i ] is set equ",
          "old_line_content": "            reference_frame.subsampling_x = frame_context.color_config.subsampling_x;",
          "new_line_content": "        if (frame_context.should_update_reference_frame_at_index(i)) {",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "mpling_x = frame_con",
          "old_text": null,
          "new_text": "mpling_x = frame_con",
          "old_line_content": "",
          "new_line_content": "            reference_frame.size = frame_context.size();",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "t equal to T.\n    Array<Intermediate, maximum_transform_",
          "old_text": null,
          "new_text": "t equal to T.\n    Array<Intermediate, maximum_transform_",
          "old_line_content": "    for (auto i = 0u; i < block_size; i++)",
          "new_line_content": "        return DecoderError::corrupted(\"Block size was out of range\"sv);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": ").\n    for",
          "old_text": null,
          "new_text": ").\n    for ",
          "old_line_content": "}",
          "new_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "ine_transform",
          "old_text": null,
          "new_text": "ine_transform(Span<Intermed",
          "old_line_content": "    // 2.1. The variable n0 is set equal to 1<<n.",
          "new_line_content": "        data[i] = data_copy[brev(log2_of_block_size, i)];",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": ".columns() * 8;\n\n           ",
          "old_line_content": "                    stride >>= frame_context.color_config.subsampling_x;",
          "new_line_content": "                auto width = frame_context.size().width();",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": null,
          "new_api": "width = (width + fr",
          "old_text": null,
          "new_text": "          width = (width + fr",
          "old_line_content": "                }",
          "new_line_content": "                auto height = frame_context.size().height();",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": null,
          "new_api": "ling_x) >> frame_contex",
          "old_text": null,
          "new_text": "ling_x) >> frame_contex",
          "old_line_content": "",
          "new_line_content": "                auto stride = frame_context.columns() * 8;",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": null,
          "new_api": "));\n\n                for (auto y = 0u; y < height; y++) {",
          "old_text": null,
          "new_text": "));\n\n                for (auto y = 0u; y < height; y++) {\n ",
          "old_line_content": "                }",
          "new_line_content": "                frame_store_buffer.resize_and_keep_capacity(width * height);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "uffer[index_from_row_and_",
          "old_text": null,
          "new_text": "uffer[index_from_row_and_",
          "old_line_content": "            }",
          "new_line_content": "                VERIFY(original_buffer.size() >= frame_store_buffer.size());",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "width)];\n                    AK::TypedT",
          "old_text": null,
          "new_text": "width)];\n                    AK::TypedT",
          "old_line_content": "",
          "new_line_content": "                    auto const* source = &original_buffer[index_from_row_and_column(y, 0, stride)];",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": null,
          "new_api": "ion, source, width);\n                }",
          "old_text": null,
          "new_text": "ion, source, width);\n                }",
          "old_line_content": "    // 2. If show_existing_frame is equal to 0, the following applies:",
          "new_line_content": "                    auto* destination = &frame_store_buffer[index_from_row_and_column(y, 0, width)];",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "rev",
          "old_text": null,
          "new_text": "rev( 5, n1+i), 0 ) for i = 0..(n2-1).\n    for (auto i = 0u; i <",
          "old_line_content": "",
          "new_line_content": "        TRY(inverse_discrete_cosine_transform(data, log2_of_block_size - 1));",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "= 3) {",
          "old_text": null,
          "new_text": "= 3) {\n       ",
          "old_line_content": "            for (auto j = 0u; j < 2; j++) {",
          "new_line_content": "        butterfly_rotation_in_place(data, index, block_size - 1 - i, 32 - brev(5, index), false);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "block_contexts",
          "old_text": null,
          "new_text": "2d(frame_context.block_contexts()));",
          "old_line_content": "        // - If all of the following conditions are true, PrevSegmentIds[ row ][ col ] is set equal to",
          "new_line_content": "    if (!frame_context.shows_existing_frame()) {",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "row = 0..MiRows-1,\n        //",
          "old_text": null,
          "new_text": " row = 0..MiRows-1,\n        //",
          "old_line_content": "        // SegmentIds[ row ][ col ] for row = 0..MiRows-1, for col = 0..MiCols-1:",
          "new_line_content": "        DECODER_TRY_ALLOC(m_parser->m_previous_block_contexts.try_resize_to_match_other_vector2d(frame_context.block_contexts()));",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "ual to 5:\n    if (log2_of_block_size == 5) {",
          "old_text": null,
          "new_text": "ual to 5:\n    if (log2_of_block_size == 5) {\n        ",
          "old_line_content": "        // a. Invoke B( n0-n+3-n2*j-4*i, n1+n-4+n2*j+4*i, 28-16*i+56*j, 1 ) for i = 0..1, j = 0..1.",
          "new_line_content": "                hadamard_rotation_in_place(data, index, index + 1, j);",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "copy_to",
          "old_text": null,
          "new_text": "k_contexts().copy_to(m_parser->m_pre",
          "old_line_content": "    }",
          "new_line_content": "        bool keep_segment_ids = !frame_context.shows_existing_frame() && frame_context.segmentation_enabled && frame_context.use_full_segment_id_tree;",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": null,
          "new_api": "sistent_context = PersistentBlockContext(context);\n            if (!keep_segment_ids)\n                persistent_context.segment_id = 0;\n            return persistent_context;\n        });\n    }\n\n    return {};\n}\n\n}",
          "old_text": null,
          "new_text": "sistent_context = PersistentBlockContext(context);\n            if (!keep_segment_ids)\n                persistent_context.segment_id = 0;\n            return persistent_context;\n        });\n    }\n\n    return {};\n}\n\n}\n",
          "old_line_content": "",
          "new_line_content": "        frame_context.block_contexts().copy_to(m_parser->m_previous_block_contexts, [keep_segment_ids](FrameBlockContext context) {",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "tent_context;\n        });\n    }",
          "old_text": null,
          "new_text": "tent_context;\n        });\n    }",
          "old_line_content": "    return {};",
          "new_line_content": "            auto persistent_context = PersistentBlockContext(context);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "nvoke H( n1+n3*j+i, n1+n2-5+n3*j-i, j&1 ) for i = 0..1, j = 0..3",
          "old_text": null,
          "new_text": "nvoke H( n1+n3*j+i, n1+n2-5+n3*j-i, j&1 ) for i = 0..1, j = 0..3",
          "old_line_content": "                auto index_a = half_block_size + (eighth_block_size * j) + i;",
          "new_line_content": "                butterfly_rotation_in_place(data, index_a, index_b, angle, true);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "If n is greater than or equal to 4:\n    if (log2_of_block_size",
          "old_text": null,
          "new_text": " If n is greater than or equal to 4:\n    if (log2_of_block_size ",
          "old_line_content": "        // a. Invoke B( n0-n+2-i-n2*j, n1+n-3+i+n2*j, 24+48*j, 1 ) for i = 0..(n==5), j = 0..1.",
          "new_line_content": "                hadamard_rotation_in_place(data, index_a, index_b, (j & 1) != 0);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "// b. Invoke H( n1+n2*j+i, n1+n2-1+n2*j-i, j&1 ) for i = 0..(2n-7), j =",
          "old_text": null,
          "new_text": " // b. Invoke H( n1+n2*j+i, n1+n2-1+n2*j-i, j&1 ) for i = 0..(2n-7), j =",
          "old_line_content": "                auto index_a = half_block_size + (quarter_block_size * j) + i;",
          "new_line_content": "                butterfly_rotation_in_place(data, index_a, index_b, 24 + (48 * j), true);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "If n is greater than or equal to 3:\n    if (log2_of_block_size",
          "old_text": null,
          "new_text": " If n is greater than or equal to 3:\n    if (log2_of_block_size ",
          "old_line_content": "        // a. Invoke B( n0-n3-1-i, n1+n3+i, 16, 1 ) for i = 0..(n3-1).",
          "new_line_content": "                hadamard_rotation_in_place(data, index_a, index_b, (j & 1) != 0);",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "1-i, 0 ) for i = 0..(n1-1).\n    for (auto i = 0u; i < half_bl",
          "old_text": null,
          "new_text": "1-i, 0 ) for i = 0..(n1-1).\n    for (auto i = 0u; i < half_bl",
          "old_line_content": "",
          "new_line_content": "            butterfly_rotation_in_place(data, index_a, index_b, 16, true);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "verse_asymmetric_discrete_sine_transform_input_array_permutati",
          "old_text": null,
          "new_text": "verse_asymmetric_discrete_sine_transform_input_array_permutati",
          "old_line_content": "    // The variable n0 is set equal to 1<<n.",
          "new_line_content": "        hadamard_rotation_in_place(data, i, block_size - 1 - i, false);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": null,
          "new_api": "2 * i ] fo",
          "old_text": null,
          "new_text": " 2 * i ] fo",
          "old_line_content": "    }",
          "new_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": ") {",
          "old_text": null,
          "new_text": ") {\n       ",
          "old_line_content": "        for (auto a = 0u; a < 2; a++)",
          "new_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "set equal to copyT[ 4*(c^b) + 2",
          "old_text": null,
          "new_text": "set equal to copyT[ 4*(c^b) + 2",
          "old_line_content": "                    data[4 * a + 2 * b + c] = data_copy[4 * (c ^ b) + 2 * (b ^ a) + a];",
          "new_line_content": "        VERIFY(log2_of_block_size == 3);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "3377;\n    c",
          "old_text": null,
          "new_text": "3377;\n    c",
          "old_line_content": "    // s0 = SINPI_1_9 * T[ 0 ]",
          "new_line_content": "    VERIFY(data.size() == 4);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "u; row < intermediate_height; row++) {\n        auto cl",
          "old_text": null,
          "new_text": "u; row < intermediate_height; row++) {\n        auto cl",
          "old_line_content": "        for (auto column = 0u; column < width; column++) {",
          "new_line_content": "    reference_frame_buffer_at(scaled_bottom, scaled_right);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "uffer_at",
          "old_text": null,
          "new_text": "uffer_at(clamped_row,",
          "old_line_content": "            i32 accumulated_samples = 0;",
          "new_line_content": "        auto clamped_row = static_cast<size_t>(clip_3(0, scaled_bottom, (offset_scaled_block_y >> 4) + static_cast<i32>(row) - 3));",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "umn < width; column++) {\n            auto",
          "old_text": null,
          "new_text": "umn < width; column++) {\n            auto",
          "old_line_content": "            for (auto t = 0u; t < 8u; t++) {",
          "new_line_content": "        u16 const* scan_line = &reference_frame_buffer_at(clamped_row, 0);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "rs[block_context.in",
          "old_text": null,
          "new_text": "rs[block_context.in",
          "old_line_content": "        }",
          "new_line_content": "                auto sample = scan_line[clip_3(0, scaled_right, (samples_start >> 4) + static_cast<i32>(t) - 3)];",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "ow = 0u; row < height; row++) {\n        for",
          "old_text": null,
          "new_text": "ow = 0u; row < height; row++) {\n        for",
          "old_line_content": "    for (auto row = 0u; row < height; row++) {",
          "new_line_content": "            intermediate_buffer_at(row, column) = clip_1(block_context.frame_context.color_config.bit_depth, rounded_right_shift(accumulated_samples, 7));",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "bpel_filters_for_samples = subpel_filters[block_co",
          "old_text": null,
          "new_text": "bpel_filters_for_samples = subpel_filters[block_co",
          "old_line_content": "                accumulated_samples += subpel_filters[block_context.interpolation_filter][samples_start & 15][t] * sample;",
          "new_line_content": "            auto const* scan_column = &intermediate_buffer_at(samples_start >> 4, column);",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "/ T[ 2 ] = Round2( s2, 14 )",
          "old_text": null,
          "new_text": "/ T[ 2 ] = Round2( s2, 14 )",
          "old_line_content": "",
          "new_line_content": "    data[0] = rounded_right_shift(s0, 14);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "/ T[ 3 ] = Round2( s3, 14 )",
          "old_text": null,
          "new_text": "/ T[ 3 ] = Round2( s3, 14 )",
          "old_line_content": "    // The values in this array require higher precision to avoid overflow. Using signed integers with 24 +",
          "new_line_content": "    data[1] = rounded_right_shift(s1, 14);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "}\n\nDecoderErrorOr<void> Decoder::predict_in",
          "old_text": null,
          "new_text": "}\n\nDecoderErrorOr<void> Decoder::predict_in",
          "old_line_content": "DecoderErrorOr<void> Decoder::predict_inter(u8 plane, BlockContext const& block_context, u32 x, u32 y, u32 width, u32 height, u32 block_index)",
          "new_line_content": "            block_buffer_at(row, column) = clip_1(block_context.frame_context.color_config.bit_depth, rounded_right_shift(accumulated_samples, 7));",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "// (8.7.1.1) The inverse as",
          "old_text": null,
          "new_text": "// (8.7.1.1) The inverse as",
          "old_line_content": "    // Note: Since bounds checks just ensure that we will not have resulting values that will overflow, it's non-fatal",
          "new_line_content": "    data[2] = rounded_right_shift(s2, 14);",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "f an intermediate array nam",
          "old_text": null,
          "new_text": "f an intermediate array nam",
          "old_line_content": "}",
          "new_line_content": "    data[3] = rounded_right_shift(s3, 14);",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": null,
          "new_api": "ce[index_a];",
          "old_text": null,
          "new_text": "ce[index_a];",
          "old_line_content": "    // 2. S[ b ] is set equal to T[ a ] * sin64( angle ) + T[ b ] * cos64( angle ).",
          "new_line_content": "    auto cos = cos64(angle);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "[index_b];",
          "old_text": null,
          "new_text": "[index_b];\n ",
          "old_line_content": "    destination[index_b] = a * sin + b * cos;",
          "new_line_content": "    auto sin = sin64(angle);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "_context, ReferenceIndex::Primary, block_con",
          "old_text": null,
          "new_text": "_context, ReferenceIndex::Primary, block_con",
          "old_line_content": "    // to form the prediction for the second reference.",
          "new_line_content": "    auto predicted_span = predicted_buffer.span().trim(width * height);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "block_context.column, x, y, width, height, block_index, predicted_span));\n    auto predicted_buffer_at = [&](Span<u16> buffer, u32 row, u32 column) -> u16& {",
          "old_text": null,
          "new_text": "block_context.column, x, y, width, height, block_index, predicted_span));\n    auto predicted_buffer_at = [&](Span<u16> buffer, u32 row, u32 column) -> u16& {",
          "old_line_content": "    // The inter predicted samples are then derived as follows:",
          "new_line_content": "    TRY(predict_inter_block(plane, block_context, ReferenceIndex::Primary, block_context.row, block_context.column, x, y, width, height, block_index, predicted_span));",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": null,
          "new_api": "nd rounding.\n// Spec defines the source array as",
          "old_text": null,
          "new_text": "nd rounding.\n// Spec defines the source array as",
          "old_line_content": "{",
          "new_line_content": "        swap(destination[index_a], destination[index_b]);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "(block_context.frame_co",
          "old_text": null,
          "new_text": " (block_context.frame_co",
          "old_line_content": "",
          "new_line_content": "    auto& frame_buffer = get_output_buffer(plane);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "olor_config.subsampling_y : false)",
          "old_text": null,
          "new_text": "olor_config.subsampling_y : false)",
          "old_line_content": "",
          "new_line_content": "    auto frame_height = (block_context.frame_context.rows() * 8u) >> (plane > 0 ? block_context.frame_context.color_config.subsampling_y : false);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "t - y);\n\n    // The variabl",
          "old_text": null,
          "new_text": "t - y);\n\n    // The variabl",
          "old_line_content": "        for (auto i = 0u; i < height_in_frame_buffer; i++) {",
          "new_line_content": "    auto width_in_frame_buffer = min(width, frame_width - x);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "me[ 1 ] > NONE.\n    // − If i",
          "old_text": null,
          "new_text": "me[ 1 ] > NONE.\n    // − If i",
          "old_line_content": "            for (auto j = 0u; j < width_in_frame_buffer; j++)",
          "new_line_content": "    auto height_in_frame_buffer = min(height, frame_height - y);",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": null,
          "new_api": "form_8",
          "old_text": null,
          "new_text": "form_8(Span<Intermediate> data",
          "old_line_content": "",
          "new_line_content": "    destination[index_b] = rounded_right_shift(a - b, 14);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": ") {\n            for (auto j",
          "old_text": null,
          "new_text": ") {\n            for (auto j",
          "old_line_content": "    }",
          "new_line_content": "    if (!block_context.is_compound()) {",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "Otherwise, CurrFrame[ plane ][ y + i ][",
          "old_text": null,
          "new_text": " Otherwise, CurrFrame[ plane ][ y + i ][ ",
          "old_line_content": "    // for i = 0..h-1 and j = 0..w-1.",
          "new_line_content": "                frame_buffer_at(y + i, x + j) = predicted_buffer_at(predicted_span, i, j);",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "sion array",
          "old_text": null,
          "new_text": "sion array ",
          "old_line_content": "",
          "new_line_content": "    VERIFY(data.size() == 8);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "ock_context, ReferenceIndex::Secondary, block_conte",
          "new_api": null,
          "old_text": "ock_context, ReferenceIndex::Secondary, block_conte",
          "new_text": null,
          "old_line_content": "    auto second_predicted_span = second_predicted_buffer.span().trim(width * height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": "ock_context.column, x, y, width, height, block_index, second_predicted_span));\n\n    for (auto i = 0u; i < height_in_frame_buffer; i++) {\n        for (auto j = 0u; j <",
          "new_api": null,
          "old_text": "ock_context.column, x, y, width, height, block_index, second_predicted_span));\n\n    for (auto i = 0u; i < height_in_frame_buffer; i++) {\n        for (auto j = 0u; j <",
          "new_text": null,
          "old_line_content": "    TRY(predict_inter_block(plane, block_context, ReferenceIndex::Secondary, block_context.row, block_context.column, x, y, width, height, block_index, second_predicted_span));",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "30-8*i, 1 ) for i = 0..3.\n    for (auto i = 0u; i < 4; i++)\n        butter",
          "new_api": null,
          "old_text": " 30-8*i, 1 ) for i = 0..3.\n    for (auto i = 0u; i < 4; i++)\n        butter",
          "new_text": null,
          "old_line_content": "    inverse_asymmetric_discrete_sine_transform_input_array_permutation(data, 3);",
          "new_line_content": "    // 24 + BitDepth bits of precision is enough to avoid overflow.",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "dc_q",
          "new_api": null,
          "old_text": "dc_q(u8 bit_depth, u8 b)\n{\n    // The function d",
          "new_text": null,
          "old_line_content": "            frame_buffer_at(y + i, x + j) = rounded_right_shift(predicted_buffer_at(predicted_span, i, j) + predicted_buffer_at(second_predicted_span, i, j), 1);",
          "new_line_content": "    // for i = 0..h-1 and j = 0..w-1.",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": ".3.\n    for (auto i = 0u;",
          "new_api": null,
          "old_text": ".3.\n    for (auto i = 0u; ",
          "new_text": null,
          "old_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 2 * i, 1 + (2 * i), 30 - (8 * i), true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "for (auto i = 0u; i < 2; i",
          "new_api": null,
          "old_text": "for (auto i = 0u; i < 2; i",
          "new_text": null,
          "old_line_content": "        hadamard_rotation(high_precision_temp.span(), data, i, 4 + i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "17, 18,",
          "new_api": null,
          "old_text": " 17, 18, ",
          "new_text": null,
          "old_line_content": "    constexpr u16 dc_qlookup[3][256] = {",
          "new_line_content": "    return {};",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "0..1.\n    for (auto i = 0u",
          "new_api": null,
          "old_text": "0..1.\n    for (auto i = 0u",
          "new_text": null,
          "old_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 4 + (3 * i), 5 + i, 24 - (16 * i), true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "b ) is specified as",
          "new_api": null,
          "old_text": " b ) is specified as ",
          "new_text": null,
          "old_line_content": "    return dc_qlookup[(bit_depth - 8) >> 1][clip_3<u8>(0, 255, b)];",
          "new_line_content": "    // defined as follows:",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "permutation process specified in section 8.7.1.5 with the input vari",
          "new_api": null,
          "old_text": " permutation process specified in section 8.7.1.5 with the input vari",
          "new_text": null,
          "old_line_content": "        butterfly_rotation_in_place(data, 2 + (4 * i), 3 + (4 * i), 16, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "to -T[ 1+2*i ] for i = 0..3.\n    for (auto i = 0u; i < 4; i++) {\n        aut",
          "new_api": null,
          "old_text": "to -T[ 1+2*i ] for i = 0..3.\n    for (auto i = 0u; i < 4; i++) {\n        aut",
          "new_text": null,
          "old_line_content": "    inverse_asymmetric_discrete_sine_transform_output_array_permutation(data, 3);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "context)\n{\n    // The",
          "new_api": null,
          "old_text": "context)\n{\n    // The",
          "new_text": null,
          "old_line_content": "    return ac_qlookup[(bit_depth - 8) >> 1][clip_3<u8>(0, 255, b)];",
          "new_line_content": "    // defined as follows:",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "ision array",
          "new_api": null,
          "old_text": "ision array",
          "new_text": null,
          "old_line_content": "    VERIFY(data.size() == 16);",
          "new_line_content": "        data[index] = -data[index];",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "text.frame_context.base_",
          "new_api": null,
          "old_text": "text.frame_context.base_",
          "new_text": null,
          "old_line_content": "        return clip_3<u8>(0, 255, data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "31-4*i, 1 ) for i = 0..7.\n    for (auto i = 0u; i < 8; i++)\n        butter",
          "new_api": null,
          "old_text": " 31-4*i, 1 ) for i = 0..7.\n    for (auto i = 0u; i < 8; i++)\n        butter",
          "new_text": null,
          "old_line_content": "    inverse_asymmetric_discrete_sine_transform_input_array_permutation(data, 4);",
          "new_line_content": "    // BitDepth bits of precision is enough to avoid overflow.",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "7.\n    for (auto i = 0u; i",
          "new_api": null,
          "old_text": "7.\n    for (auto i = 0u; i",
          "new_text": null,
          "old_line_content": "        butterfly_rotation(data, high_precision_temp.span(), 2 * i, 1 + (2 * i), 31 - (4 * i), true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "const& block_context, u8 plane)\n{\n    /",
          "new_api": null,
          "old_text": "const& block_context, u8 plane)\n{\n    /",
          "new_text": null,
          "old_line_content": "    return dc_q(block_context.frame_context.color_config.bit_depth, static_cast<u8>(get_base_quantizer_index(block_context) + offset));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "4+8*j+i, 6+8*j+i ) for i",
          "new_api": null,
          "old_text": " 4+8*j+i, 6+8*j+i ) for i ",
          "new_text": null,
          "old_line_content": "            butterfly_rotation(data, high_precision_temp.span(), 4 + (8 * i) + (3 * j), 5 + (8 * i) + j, 24 - (16 * j), true);",
          "new_line_content": "    // 6. Invoke H( i, 4+i, 0 ) for i = 0..3.",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "ane, BlockContext const& block_context,",
          "new_api": null,
          "old_text": "ane, BlockContext const& block_context,",
          "new_text": null,
          "old_line_content": "    return ac_q(block_context.frame_context.color_config.bit_depth, static_cast<u8>(get_base_quantizer_index(block_context) + offset));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "for i = 0..1, for j = 0..1",
          "new_api": null,
          "old_text": "for i = 0..1, for j = 0..1",
          "new_text": null,
          "old_line_content": "            hadamard_rotation(high_precision_temp.span(), data, 4 + (8 * j) + i, 6 + (8 * j) + i);",
          "new_line_content": "    // 7. Invoke SB( 4+8*i+3*j, 5+8*i+j, 24-16*j, 1 ) for i = 0..1, for j = 0..1.",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "*i, 48+64*(i^j), 0 ) for i = 0..1, for j = 0..1.\n    for (auto i = 0u",
          "new_api": null,
          "old_text": "*i, 48+64*(i^j), 0 ) for i = 0..1, for j = 0..1.\n    for (auto i = 0u",
          "new_text": null,
          "old_line_content": "            hadamard_rotation_in_place(data, (8 * j) + i, 2 + (8 * j) + i, false);",
          "new_line_content": "    for (auto i = 0u; i < 2; i++)",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "// 11. Invoke the ADST output array permutation process specified in section 8.7.1.5 with the input var",
          "new_api": null,
          "old_text": "    // 11. Invoke the ADST output array permutation process specified in section 8.7.1.5 with the input var",
          "new_text": null,
          "old_line_content": "            butterfly_rotation_in_place(data, 2 + (4 * j) + (8 * i), 3 + (4 * j) + (8 * i), 48 + (64 * (i ^ j)), false);",
          "new_line_content": "    // 9. Invoke H( 8*j+i, 2+8*j+i, 0 ) for i = 0..1, for j = 0..1.",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": "equal to -T[ 1+12*j+2*i ] for i = 0..1, for j = 0..1.\n    for (auto i = 0u;",
          "new_api": null,
          "old_text": "equal to -T[ 1+12*j+2*i ] for i = 0..1, for j = 0..1.\n    for (auto i = 0u; ",
          "new_text": null,
          "old_line_content": "    inverse_asymmetric_discrete_sine_transform_output_array_permutation(data, 4);",
          "new_line_content": "    // 10. Invoke B( 2+4*j+8*i, 3+4*j+8*i, 48+64*(i^j), 0 ) for i = 0..1, for j = 0..1.",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "j = 0u; j < block_size; j++) {",
          "new_api": null,
          "old_text": " j = 0u; j < block_size; j++) {\n      ",
          "new_text": null,
          "old_line_content": "    Intermediate ac_quant = get_ac_quantizer(block_context, plane);",
          "new_line_content": "    u8 log2_of_block_size = 2u + transform_block_size;",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "dequantized[index] = (block_contex",
          "new_api": null,
          "old_text": "         dequantized[index] = (block_contex",
          "new_text": null,
          "old_line_content": "            auto index = index_from_row_and_column(i, j, block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "formance that the values written into",
          "new_api": null,
          "old_text": "formance that the values written into ",
          "new_text": null,
          "old_line_content": "    dequantized[0] = (block_context.residual_tokens[0] * get_dc_quantizer(block_context, plane)) / dq_denominator;",
          "new_line_content": "            if (index == 0)",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "if (log2_of_block_size == 2) {\n        // − If n is e",
          "new_api": null,
          "old_text": "   if (log2_of_block_size == 2) {\n        // − If n is e",
          "new_text": null,
          "old_line_content": "        return DecoderError::corrupted(\"Block size was out of range\"sv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "rame[ plane ][ y + i ][ x + j ] is set equal to Clip1( CurrFrame[ plane ][ y + i ][",
          "new_api": null,
          "old_text": "rame[ plane ][ y + i ][ x + j ] is set equal to Clip1( CurrFrame[ plane ][ y + i ][",
          "new_text": null,
          "old_line_content": "    TRY(inverse_transform_2d(block_context, dequantized, log2_of_block_size, transform_set));",
          "new_line_content": "    // It is a requirement of bitstream conformance that the values written into the Dequant array in steps 1 and 2",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "// − Otherwise if n is equal to 3, invoke the",
          "new_api": null,
          "old_text": "    // − Otherwise if n is equal to 3, invoke the ",
          "new_text": null,
          "old_line_content": "        inverse_asymmetric_discrete_sine_transform_4(data);",
          "new_line_content": "    // This process performs an in-place inverse ADST process on the array T of size 2^n for 2 ≤ n ≤ 4.",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "ig.subsampling_x : 0);",
          "new_api": null,
          "old_text": "ig.subsampling_x : 0);\n ",
          "new_text": null,
          "old_line_content": "    auto& current_buffer = get_output_buffer(plane);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "T16 process specified in section 8.7.1.8.\n    retu",
          "new_api": null,
          "old_text": "T16 process specified in section 8.7.1.8.\n    retu",
          "new_text": null,
          "old_line_content": "        return inverse_asymmetric_discrete_sine_transform_8(data);",
          "new_line_content": "    if (log2_of_block_size == 2) {",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "ize, frame_width - transform_block",
          "new_api": null,
          "old_text": "ize, frame_width - transform_block",
          "new_text": null,
          "old_line_content": "    auto frame_height = (block_context.frame_context.rows() * 8) >> subsampling_y;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "const& block_context, Span<Intermediate> dequantize",
          "new_api": null,
          "old_text": "const& block_context, Span<Intermediate> dequantize",
          "new_text": null,
          "old_line_content": "    return inverse_asymmetric_discrete_sine_transform_16(data);",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "i++) {\n        for (auto j = 0u; j < width_in_fra",
          "new_api": null,
          "old_text": "i++) {\n        for (auto j = 0u; j < width_in_fra",
          "new_text": null,
          "old_line_content": "    auto height_in_frame_buffer = min(block_size, frame_height - transform_block_y);",
          "new_line_content": "    //    for i = 0..(n0-1) and j = 0..(n0-1).",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "ame_height - transform_block_y);\n\n    for (auto",
          "new_api": null,
          "old_text": "ame_height - transform_block_y);\n\n    for (auto ",
          "new_text": null,
          "old_line_content": "    auto width_in_frame_buffer = min(block_size, frame_width - transform_block_x);",
          "new_line_content": "    // 4. CurrFrame[ plane ][ y + i ][ x + j ] is set equal to Clip1( CurrFrame[ plane ][ y + i ][ x + j ] + Dequant[ i ][ j ] )",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "o i = 0u; i < block_size; i++) {",
          "new_api": null,
          "old_text": "o i = 0u; i < block_size; i++) {\n",
          "new_text": null,
          "old_line_content": "    Span<Intermediate> row = row_array.span().trim(block_size);",
          "new_line_content": "    // This process performs a 2D inverse transform for an array of size 2^n by 2^n stored in the 2D array Dequant.",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "s specified in section 8.7.1.10 with shift",
          "new_api": null,
          "old_text": "s specified in section 8.7.1.10 with shift ",
          "new_text": null,
          "old_line_content": "            row[j] = dequantized[index_from_row_and_column(i, j, block_size)];",
          "new_line_content": "    Array<Intermediate, maximum_transform_size> row_array;",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "ine i32 Decoder::cos64(u8 angle)\n{\n    const i32",
          "new_api": null,
          "old_text": "ine i32 Decoder::cos64(u8 angle)\n{\n    const i32 ",
          "new_text": null,
          "old_line_content": "        return DecoderError::corrupted(\"Block size was not 4\"sv);",
          "new_line_content": "inline DecoderErrorOr<void> Decoder::inverse_walsh_hadamard_transform(Span<Intermediate> data, u8 log2_of_block_size, u8 shift)",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "));\n            continue;\n        }",
          "new_api": null,
          "old_text": "));\n            continue;\n        }\n     ",
          "new_text": null,
          "old_line_content": "        if (block_context.frame_context.is_lossless()) {",
          "new_line_content": "    for (auto i = 0u; i < block_size; i++) {",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "3] = { 16384, 16364, 16305, 162",
          "new_api": null,
          "old_text": "3] = { 16384, 16364, 16305, 162",
          "new_text": null,
          "old_line_content": "    return DecoderError::not_implemented();",
          "new_line_content": "    (void)data;",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "_set.second_transform) {\n        case TransformType::DCT:",
          "new_api": null,
          "old_text": "_set.second_transform) {\n        case TransformType::DCT:\n  ",
          "new_text": null,
          "old_line_content": "            TRY(inverse_walsh_hadamard_transform(row, log2_of_block_size, 2));",
          "new_line_content": "        // 1. Set T[ j ] equal to Dequant[ i ][ j ] for j = 0..(n0-1).",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "process as specified in section 8.7.1.3 with the input variable n.",
          "new_api": null,
          "old_text": "process as specified in section 8.7.1.3 with the input variable n.\n         ",
          "new_text": null,
          "old_line_content": "            TRY(inverse_discrete_cosine_transform_array_permutation(row, log2_of_block_size));",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "// 4. Otherwise (TxType is equal to DCT_ADST or TxTy",
          "new_api": null,
          "old_text": "      // 4. Otherwise (TxType is equal to DCT_ADST or TxTy",
          "new_text": null,
          "old_line_content": "            TRY(inverse_discrete_cosine_transform(row, log2_of_block_size));",
          "new_line_content": "        switch (transform_set.second_transform) {",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "(n0-1).\n        for (auto j = 0u; j < block_",
          "new_api": null,
          "old_text": "(n0-1).\n        for (auto j = 0u; j < block_",
          "new_text": null,
          "old_line_content": "            return DecoderError::corrupted(\"Unknown tx_type\"sv);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "span",
          "new_api": null,
          "old_text": "ay;\n    auto column = column_array.span().t",
          "new_text": null,
          "old_line_content": "            dequantized[index_from_row_and_column(i, j, block_size)] = row[j];",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "{\n    value = (val",
          "new_api": null,
          "old_text": "{\n    value = (val",
          "new_text": null,
          "old_line_content": "    return cos64(angle - 32u);",
          "new_line_content": "    return cos64_lookup[128 - angle];",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "r (auto j = 0u; j < block_size; j++)",
          "new_api": null,
          "old_text": "r (auto j = 0u; j < block_size; j++)",
          "new_text": null,
          "old_line_content": "    auto column = column_array.span().trim(block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "nction B( a, b, angle, 0 ) perfor",
          "new_api": null,
          "old_text": "nction B( a, b, angle, 0 ) perfor",
          "new_text": null,
          "old_line_content": "    value = (value + static_cast<T>(1u << (bits - 1u))) >> bits;",
          "new_line_content": "        angle += 128;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "s specified in section 8.7.1.10 with shift",
          "new_api": null,
          "old_text": "s specified in section 8.7.1.10 with shift ",
          "new_text": null,
          "old_line_content": "            column[i] = dequantized[index_from_row_and_column(i, j, block_size)];",
          "new_line_content": "    Array<Intermediate, maximum_transform_size> column_array;",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": ", 2));\n            continue;\n        }",
          "new_api": null,
          "old_text": ", 2));\n            continue;\n        }\n  ",
          "new_text": null,
          "old_line_content": "        if (block_context.frame_context.is_lossless()) {",
          "new_line_content": "    for (auto j = 0u; j < block_size; j++) {",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "orm_set.first_transform) {\n        case TransformType::DCT:",
          "new_api": null,
          "old_text": "orm_set.first_transform) {\n        case TransformType::DCT:\n   ",
          "new_text": null,
          "old_line_content": "            TRY(inverse_walsh_hadamard_transform(column, log2_of_block_size, 2));",
          "new_line_content": "        // 1. Set T[ i ] equal to Dequant[ i ][ j ] for i = 0..(n0-1).",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "CT process as specified in section 8.7.1.3 with the input variable n.",
          "new_api": null,
          "old_text": "CT process as specified in section 8.7.1.3 with the input variable n.\n         ",
          "new_text": null,
          "old_line_content": "            TRY(inverse_discrete_cosine_transform_array_permutation(column, log2_of_block_size));",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "tion and flip specified by the fol",
          "new_api": null,
          "old_text": "tion and flip specified by the fol",
          "new_text": null,
          "old_line_content": "    data[index_b] = rounded_right_shift(rotated_b, 14);",
          "new_line_content": "    // 1. The variable x is set equal to T[ a ] * cos64( angle ) - T[ b ] * sin64( angle ).",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "// 4. Otherwise (TxType is equal to ADST_DCT or TxTy",
          "new_api": null,
          "old_text": "         // 4. Otherwise (TxType is equal to ADST_DCT or TxTy",
          "new_text": null,
          "old_line_content": "            TRY(inverse_discrete_cosine_transform(column, log2_of_block_size));",
          "new_line_content": "        switch (transform_set.first_transform) {",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "es saved into the array T by this",
          "new_api": null,
          "old_text": "es saved into the array T by this ",
          "new_text": null,
          "old_line_content": "        swap(data[index_a], data[index_b]);",
          "new_line_content": "    // 4. T[ b ] is set equal to Round2( y, 14 ).",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "0..(n0-1).\n        f",
          "new_api": null,
          "old_text": "0..(n0-1).\n        f",
          "new_text": null,
          "old_line_content": "            VERIFY_NOT_REACHED();",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "[ i ][ j ] equal to Round2( T[ i ], Min( 6,",
          "new_api": null,
          "old_text": "[ i ][ j ] equal to Round2( T[ i ], Min( 6,",
          "new_text": null,
          "old_line_content": "            dequantized[index_from_row_and_column(i, j, block_size)] = column[i];",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": "ndex = index_from_row_and_column(i, j, bl",
          "new_api": null,
          "old_text": "ndex = index_from_row_and_column(i, j, bl",
          "new_text": null,
          "old_line_content": "        if (!block_context.frame_context.is_lossless()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": ", min(6, log2_of_block_size + 2));",
          "new_api": null,
          "old_text": ", min(6, log2_of_block_size + 2));\n        ",
          "new_text": null,
          "old_line_content": "                auto index = index_from_row_and_column(i, j, block_size);",
          "new_line_content": "        for (auto i = 0u; i < block_size; i++)",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "e following ordered st",
          "new_api": null,
          "old_text": "e following ordered st",
          "new_text": null,
          "old_line_content": "        swap(index_a, index_b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "mes[i];\n\n            // − RefFrameWidth[ i ] is set equ",
          "new_api": null,
          "old_text": "mes[i];\n\n            // − RefFrameWidth[ i ] is set equ",
          "new_text": null,
          "old_line_content": "        if (frame_context.should_update_reference_frame_at_index(i)) {",
          "new_line_content": "    // The inputs to this process are the samples in the current frame CurrFrame[ plane ][ x ][ y ].",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "mpling_x = frame_con",
          "new_api": null,
          "old_text": "mpling_x = frame_con",
          "new_text": null,
          "old_line_content": "            reference_frame.size = frame_context.size();",
          "new_line_content": "    // is equal to 1 (i.e. if (refresh_frame_flags>>i)&1 is equal to 1):",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "t equal to T.\n    Array<Intermediate, maximum_transform_",
          "new_api": null,
          "old_text": "t equal to T.\n    Array<Intermediate, maximum_transform_",
          "new_text": null,
          "old_line_content": "        return DecoderError::corrupted(\"Block size was out of range\"sv);",
          "new_line_content": "inline DecoderErrorOr<void> Decoder::inverse_discrete_cosine_transform_array_permutation(Span<Intermediate> data, u8 log2_of_block_size)",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": ").\n    for",
          "new_api": null,
          "old_text": ").\n    for ",
          "new_text": null,
          "old_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "new_line_content": "    // This process performs an in-place permutation of the array T of length 2^n for 2 ≤ n ≤ 5 which is required before",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "ine_transform",
          "new_api": null,
          "old_text": "ine_transform(Span<Intermed",
          "new_text": null,
          "old_line_content": "        data[i] = data_copy[brev(log2_of_block_size, i)];",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "columns",
          "new_api": null,
          "old_text": ".columns() * 8;\n\n           ",
          "new_text": null,
          "old_line_content": "                auto width = frame_context.size().width();",
          "new_line_content": "            // − FrameStore[ i ][ plane ][ y ][ x ] is set equal to CurrFrame[ plane ][ y ][ x ] for plane = 1..2, for x =",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "width = (width + fr",
          "new_api": null,
          "old_text": "          width = (width + fr",
          "new_text": null,
          "old_line_content": "                auto height = frame_context.size().height();",
          "new_line_content": "            // 0..((FrameWidth+subsampling_x) >> subsampling_x)-1, for y = 0..((FrameHeight+subsampling_y) >>",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "ling_x) >> frame_contex",
          "new_api": null,
          "old_text": "ling_x) >> frame_contex",
          "new_text": null,
          "old_line_content": "                auto stride = frame_context.columns() * 8;",
          "new_line_content": "            // subsampling_y)-1.",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "buffer.resize_and_keep_c",
          "new_api": null,
          "old_text": "buffer.resize_and_keep_c",
          "new_text": null,
          "old_line_content": "                auto const& original_buffer = get_output_buffer(plane);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "));\n\n                for (auto y = 0u; y < height; y++) {",
          "new_api": null,
          "old_text": "));\n\n                for (auto y = 0u; y < height; y++) {\n ",
          "new_text": null,
          "old_line_content": "                frame_store_buffer.resize_and_keep_capacity(width * height);",
          "new_line_content": "                    width = (width + frame_context.color_config.subsampling_x) >> frame_context.color_config.subsampling_x;",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "uffer[index_from_row_and_",
          "new_api": null,
          "old_text": "uffer[index_from_row_and_",
          "new_text": null,
          "old_line_content": "                VERIFY(original_buffer.size() >= frame_store_buffer.size());",
          "new_line_content": "                    height = (height + frame_context.color_config.subsampling_y) >> frame_context.color_config.subsampling_y;",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "data, log2_of_block_size - 1));\n\n    // 2.6 Invok",
          "new_api": null,
          "old_text": "data, log2_of_block_size - 1));\n\n    // 2.6 Invok",
          "new_text": null,
          "old_line_content": "        butterfly_rotation_in_place(data, 0, 1, 16, true);",
          "new_line_content": "    u8 quarter_block_size = half_block_size >> 1;",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "width)];\n                    AK::TypedT",
          "new_api": null,
          "old_text": "width)];\n                    AK::TypedT",
          "new_text": null,
          "old_line_content": "                    auto const* source = &original_buffer[index_from_row_and_column(y, 0, stride)];",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "rev",
          "new_api": null,
          "old_text": "rev( 5, n1+i), 0 ) for i = 0..(n2-1).\n    for (auto i = 0u; i <",
          "new_text": null,
          "old_line_content": "        TRY(inverse_discrete_cosine_transform(data, log2_of_block_size - 1));",
          "new_line_content": "    u8 eighth_block_size = quarter_block_size >> 1;",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "}\n    }\n\n    // 2. If show_existing_frame is equal to 0, the following applies:\n    if (!fra",
          "new_api": null,
          "old_text": "}\n    }\n\n    // 2. If show_existing_frame is equal to 0, the following applies:\n    if (!fra",
          "new_text": null,
          "old_line_content": "                    AK::TypedTransfer<RemoveReference<decltype(*destination)>>::copy(destination, source, width);",
          "new_line_content": "                auto& frame_store_buffer = reference_frame.frame_planes[plane];",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "row = 0..MiRows-1,\n        //",
          "new_api": null,
          "old_text": " row = 0..MiRows-1,\n        //",
          "new_text": null,
          "old_line_content": "        DECODER_TRY_ALLOC(m_parser->m_previous_block_contexts.try_resize_to_match_other_vector2d(frame_context.block_contexts()));",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "ual to 5:\n    if (log2_of_block_size == 5) {",
          "new_api": null,
          "old_text": "ual to 5:\n    if (log2_of_block_size == 5) {\n        ",
          "new_text": null,
          "old_line_content": "                hadamard_rotation_in_place(data, index, index + 1, j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": "copy_to",
          "new_api": null,
          "old_text": "k_contexts().copy_to(m_parser->m_pre",
          "new_text": null,
          "old_line_content": "        bool keep_segment_ids = !frame_context.shows_existing_frame() && frame_context.segmentation_enabled && frame_context.use_full_segment_id_tree;",
          "new_line_content": "        // for col = 0..MiCols-1, for list = 0..1, for comp = 0..1.",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "sistent_context = PersistentBlockContext(context);\n            if (!keep_segment_ids)\n                persistent_context.segment_id = 0;\n            return persistent_context;\n        });\n    }\n\n    return {};\n}\n\n}",
          "new_api": null,
          "old_text": "sistent_context = PersistentBlockContext(context);\n            if (!keep_segment_ids)\n                persistent_context.segment_id = 0;\n            return persistent_context;\n        });\n    }\n\n    return {};\n}\n\n}\n",
          "new_text": null,
          "old_line_content": "        frame_context.block_contexts().copy_to(m_parser->m_previous_block_contexts, [keep_segment_ids](FrameBlockContext context) {",
          "new_line_content": "        // And from decode_frame():",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "tent_context;\n        });\n    }",
          "new_api": null,
          "old_text": "tent_context;\n        });\n    }",
          "new_text": null,
          "old_line_content": "            auto persistent_context = PersistentBlockContext(context);",
          "new_line_content": "        // - If all of the following conditions are true, PrevSegmentIds[ row ][ col ] is set equal to",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "nvoke H( n1+n3*j+i, n1+n2-5+n3*j-i, j&1 ) for i = 0..1, j = 0..3",
          "new_api": null,
          "old_text": "nvoke H( n1+n3*j+i, n1+n2-5+n3*j-i, j&1 ) for i = 0..1, j = 0..3",
          "new_text": null,
          "old_line_content": "                butterfly_rotation_in_place(data, index_a, index_b, angle, true);",
          "new_line_content": "    if (log2_of_block_size == 5) {",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "If n is greater than or equal to 4:\n    if (log2_of_block_size",
          "new_api": null,
          "old_text": " If n is greater than or equal to 4:\n    if (log2_of_block_size ",
          "new_text": null,
          "old_line_content": "                hadamard_rotation_in_place(data, index_a, index_b, (j & 1) != 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "// b. Invoke H( n1+n2*j+i, n1+n2-1+n2*j-i, j&1 ) for i = 0..(2n-7), j =",
          "new_api": null,
          "old_text": " // b. Invoke H( n1+n2*j+i, n1+n2-1+n2*j-i, j&1 ) for i = 0..(2n-7), j =",
          "new_text": null,
          "old_line_content": "                butterfly_rotation_in_place(data, index_a, index_b, 24 + (48 * j), true);",
          "new_line_content": "    // 5. If n is greater than or equal to 4:",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "If n is greater than or equal to 3:\n    if (log2_of_block_size",
          "new_api": null,
          "old_text": " If n is greater than or equal to 3:\n    if (log2_of_block_size ",
          "new_text": null,
          "old_line_content": "                hadamard_rotation_in_place(data, index_a, index_b, (j & 1) != 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "1-i, 0 ) for i = 0..(n1-1).\n    for (auto i = 0u; i < half_bl",
          "new_api": null,
          "old_text": "1-i, 0 ) for i = 0..(n1-1).\n    for (auto i = 0u; i < half_bl",
          "new_text": null,
          "old_line_content": "            butterfly_rotation_in_place(data, index_a, index_b, 16, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "verse_asymmetric_discrete_sine_transform_input_array_permutati",
          "new_api": null,
          "old_text": "verse_asymmetric_discrete_sine_transform_input_array_permutati",
          "new_text": null,
          "old_line_content": "        hadamard_rotation_in_place(data, i, block_size - 1 - i, false);",
          "new_line_content": "            auto index_b = half_block_size + eighth_block_size + i;",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "2 * i ] fo",
          "new_api": null,
          "old_text": " 2 * i ] fo",
          "new_text": null,
          "old_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "new_line_content": "    // The variable n0 is set equal to 1<<n.",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": ") {",
          "new_api": null,
          "old_text": ") {\n       ",
          "new_text": null,
          "old_line_content": "    AK::TypedTransfer<Intermediate>::copy(data_copy.data(), data.data(), block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "set equal to copyT[ 4*(c^b) + 2",
          "new_api": null,
          "old_text": "set equal to copyT[ 4*(c^b) + 2",
          "new_text": null,
          "old_line_content": "        VERIFY(log2_of_block_size == 3);",
          "new_line_content": "        // and b = 0..1 and c = 0..1 and d = 0..1.",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "3377;\n    c",
          "new_api": null,
          "old_text": "3377;\n    c",
          "new_text": null,
          "old_line_content": "    VERIFY(data.size() == 4);",
          "new_line_content": "                for (auto c = 0u; c < 2; c++)",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "= 0;\n            for (auto t = 0u; t <",
          "new_api": null,
          "old_text": " = 0;\n            for (auto t = 0u; t < ",
          "new_text": null,
          "old_line_content": "            auto samples_start = offset_scaled_block_x + static_cast<i32>(scaled_step_x * column);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "t_scaled_block_y >> 4) + static_cast<i32>(row) - 3),\n                    clip_3(0, scaled_right, (samples_start >> 4) + static_cast<i32>(t) - 3));\n                accumulated_samples += subpel_filters[block_context.interpol",
          "new_api": null,
          "old_text": "t_scaled_block_y >> 4) + static_cast<i32>(row) - 3),\n                    clip_3(0, scaled_right, (samples_start >> 4) + static_cast<i32>(t) - 3));\n                accumulated_samples += subpel_filters[block_context.interpol",
          "new_text": null,
          "old_line_content": "                auto sample = reference_frame_buffer_at(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "es_start >> 4) + stat",
          "new_api": null,
          "old_text": "es_start >> 4) + stat",
          "new_text": null,
          "old_line_content": "                    clip_3(0, scaled_bottom, (offset_scaled_block_y >> 4) + static_cast<i32>(row) - 3),",
          "new_line_content": "        for (auto column = 0u; column < width; column++) {",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "ow = 0u; row < height; row++) {\n        for",
          "new_api": null,
          "old_text": "ow = 0u; row < height; row++) {\n        for",
          "new_text": null,
          "old_line_content": "            intermediate_buffer_at(row, column) = clip_1(block_context.frame_context.color_config.bit_depth, rounded_right_shift(accumulated_samples, 7));",
          "new_line_content": "            for (auto t = 0u; t < 8u; t++) {",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "0;\n            for (auto t = 0u; t <",
          "new_api": null,
          "old_text": "0;\n            for (auto t = 0u; t < ",
          "new_text": null,
          "old_line_content": "            auto samples_start = (offset_scaled_block_y & 15) + static_cast<i32>(scaled_step_y * row);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "/ T[ 2 ] = Round2( s2, 14 )",
          "new_api": null,
          "old_text": "/ T[ 2 ] = Round2( s2, 14 )",
          "new_text": null,
          "old_line_content": "    data[0] = rounded_right_shift(s0, 14);",
          "new_line_content": "    s1 = x1 + x3;",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "/ T[ 3 ] = Round2( s3, 14 )",
          "new_api": null,
          "old_text": "/ T[ 3 ] = Round2( s3, 14 )",
          "new_text": null,
          "old_line_content": "    data[1] = rounded_right_shift(s1, 14);",
          "new_line_content": "    s2 = x2;",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "}\n\nDecoderErrorOr<void> Decoder::predict_in",
          "new_api": null,
          "old_text": "}\n\nDecoderErrorOr<void> Decoder::predict_in",
          "new_text": null,
          "old_line_content": "            block_buffer_at(row, column) = clip_1(block_context.frame_context.color_config.bit_depth, rounded_right_shift(accumulated_samples, 7));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "// (8.7.1.1) The inverse as",
          "new_api": null,
          "old_text": "// (8.7.1.1) The inverse as",
          "new_text": null,
          "old_line_content": "    data[2] = rounded_right_shift(s2, 14);",
          "new_line_content": "    s3 = x0 + x1 - x3;",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "f an intermediate array nam",
          "new_api": null,
          "old_text": "f an intermediate array nam",
          "new_text": null,
          "old_line_content": "    data[3] = rounded_right_shift(s3, 14);",
          "new_line_content": "    // T[ 0 ] = Round2( s0, 14 )",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "ce[index_a];",
          "new_api": null,
          "old_text": "ce[index_a];",
          "new_text": null,
          "old_line_content": "    auto cos = cos64(angle);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "[index_b];",
          "new_api": null,
          "old_text": "[index_b];\n ",
          "new_text": null,
          "old_line_content": "    auto sin = sin64(angle);",
          "new_line_content": "// The function SB( a, b, angle, 0 ) performs a butterfly rotation.",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "_context, ReferenceIndex::Primary, block_con",
          "new_api": null,
          "old_text": "_context, ReferenceIndex::Primary, block_con",
          "new_text": null,
          "old_line_content": "    auto predicted_span = predicted_buffer.span().trim(width * height);",
          "new_line_content": "    // − a variable blockIdx, specifying how much of the block has already been predicted in units of 4x4 samples.",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "block_context.column, x, y, width, height, block_index, predicted_span));\n    auto predicted_buffer_at = [&](Span<u16> buffer, u32 row, u32 column) -> u16& {",
          "new_api": null,
          "old_text": "block_context.column, x, y, width, height, block_index, predicted_span));\n    auto predicted_buffer_at = [&](Span<u16> buffer, u32 row, u32 column) -> u16& {",
          "new_text": null,
          "old_line_content": "    TRY(predict_inter_block(plane, block_context, ReferenceIndex::Primary, block_context.row, block_context.column, x, y, width, height, block_index, predicted_span));",
          "new_line_content": "    // The outputs of this process are inter predicted samples in the current frame CurrFrame.",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "nd rounding.\n// Spec defines the source array as",
          "new_api": null,
          "old_text": "nd rounding.\n// Spec defines the source array as",
          "new_text": null,
          "old_line_content": "        swap(destination[index_a], destination[index_b]);",
          "new_line_content": "    // 2. S[ b ] is set equal to T[ a ] * sin64( angle ) + T[ b ] * cos64( angle ).",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "(block_context.frame_co",
          "new_api": null,
          "old_text": " (block_context.frame_co",
          "new_text": null,
          "old_line_content": "    auto& frame_buffer = get_output_buffer(plane);",
          "new_line_content": "    auto predicted_buffer_at = [&](Span<u16> buffer, u32 row, u32 column) -> u16& {",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": ") * 8u) >> (plane > 0 ?",
          "new_api": null,
          "old_text": ") * 8u) >> (plane > 0 ?",
          "new_text": null,
          "old_line_content": "    VERIFY(!frame_buffer.is_empty());",
          "new_line_content": "        return buffer[row * width + column];",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "t.color_config.subsampling_x : false)",
          "new_api": null,
          "old_text": "t.color_config.subsampling_x : false)",
          "new_text": null,
          "old_line_content": "    auto frame_width = (block_context.frame_context.columns() * 8u) >> (plane > 0 ? block_context.frame_context.color_config.subsampling_x : false);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "olor_config.subsampling_y : false)",
          "new_api": null,
          "old_text": "olor_config.subsampling_y : false)",
          "new_text": null,
          "old_line_content": "    auto frame_height = (block_context.frame_context.rows() * 8u) >> (plane > 0 ? block_context.frame_context.color_config.subsampling_y : false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "n[index_b] = rounded_right_shi",
          "new_api": null,
          "old_text": "n[index_b] = rounded_right_shi",
          "new_text": null,
          "old_line_content": "    destination[index_a] = rounded_right_shift(a + b, 14);",
          "new_line_content": "template<typename S, typename D>",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "form_8",
          "new_api": null,
          "old_text": "form_8(Span<Intermediate> data",
          "new_text": null,
          "old_line_content": "    destination[index_b] = rounded_right_shift(a - b, 14);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": ") {\n            for (auto j",
          "new_api": null,
          "old_text": ") {\n            for (auto j",
          "new_text": null,
          "old_line_content": "    if (!block_context.is_compound()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "Otherwise, CurrFrame[ plane ][ y + i ][",
          "new_api": null,
          "old_text": " Otherwise, CurrFrame[ plane ][ y + i ][ ",
          "new_text": null,
          "old_line_content": "                frame_buffer_at(y + i, x + j) = predicted_buffer_at(predicted_span, i, j);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 27,
      "total_additions": 114,
      "total_deletions": 113,
      "total_api_changes": 254
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 254,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          965,
          969,
          970,
          971,
          942
        ]
      }
    },
    "api_calls_before": 492,
    "api_calls_after": 494,
    "diff_info": {
      "added_lines": 12,
      "removed_lines": 5,
      "total_diff_lines": 45
    }
  }
}
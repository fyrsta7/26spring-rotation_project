{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7cd975268c377f5347ce2a6f84803892b2108e58",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7cd975268c377f5347ce2a6f84803892b2108e58/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7cd975268c377f5347ce2a6f84803892b2108e58/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7cd975268c377f5347ce2a6f84803892b2108e58/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2080,
          "old_api": "for_each_typeface",
          "new_api": "to_string",
          "old_text": "Gfx::FontDatabase::the().for_each_typeface([&](Gfx::Typeface const& typeface) {\n        if (typeface.family().equals_ignoring_ascii_case(key.family_name)) {\n            matching_family_fonts.empend(\n                FontFaceKey {\n                    .family_name = MUST(FlyString::from_deprecated_fly_string(typeface.family())),\n                    .weight = static_cast<int>(typeface.weight()),\n                    .slope = typeface.slope(),\n                },\n                &typeface);\n        }\n    })",
          "new_text": "key.family_name.to_string()",
          "old_line_content": "    Gfx::FontDatabase::the().for_each_typeface([&](Gfx::Typeface const& typeface) {",
          "new_line_content": "    Gfx::FontDatabase::the().for_each_typeface_with_family_name(key.family_name.to_string(), [&](Gfx::Typeface const& typeface) {",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "family",
          "new_api": "empend",
          "old_text": "typeface.family().equals_ignoring_ascii_case(key.family_name)",
          "new_text": "matching_family_fonts.empend(\n            FontFaceKey {\n                .family_name = MUST(FlyString::from_deprecated_fly_string(typeface.family())),\n                .weight = static_cast<int>(typeface.weight()),\n                .slope = typeface.slope(),\n            },\n            &typeface)",
          "old_line_content": "        if (typeface.family().equals_ignoring_ascii_case(key.family_name)) {",
          "new_line_content": "        matching_family_fonts.empend(",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "family",
          "new_api": "weight",
          "old_text": "typeface.family()",
          "new_text": "typeface.weight()",
          "old_line_content": "                    .family_name = MUST(FlyString::from_deprecated_fly_string(typeface.family())),",
          "new_line_content": "                .weight = static_cast<int>(typeface.weight()),",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "weight",
          "new_api": "slope",
          "old_text": "typeface.weight()",
          "new_text": "typeface.slope()",
          "old_line_content": "                    .weight = static_cast<int>(typeface.weight()),",
          "new_line_content": "                .slope = typeface.slope(),",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "find_matching_font_weight_descending",
          "new_api": "end",
          "old_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "new_text": "matching_family_fonts.end()",
          "old_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "new_line_content": "        for (; it != matching_family_fonts.end(); ++it) {",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": "find_matching_font_weight_descending",
          "new_api": "find_matching_font_weight_ascending",
          "old_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, true)",
          "new_text": "find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "old_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, true))",
          "new_line_content": "        if (auto found_font = find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "find_matching_font_weight_ascending",
          "new_api": "find_matching_font_weight_descending",
          "old_text": "find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, true)",
          "new_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "old_line_content": "        if (auto found_font = find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, true))",
          "new_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": "element_to_inherit_style_from",
          "new_api": "to_font_stretch_width",
          "old_text": "element_to_inherit_style_from(element, pseudo_element)",
          "new_text": "font_stretch.to_font_stretch_width()",
          "old_line_content": "    auto* parent_element = element_to_inherit_style_from(element, pseudo_element);",
          "new_line_content": "    auto width = font_stretch.to_font_stretch_width();",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "to_font_stretch_width",
          "new_api": "to_font_weight",
          "old_text": "font_stretch.to_font_stretch_width()",
          "new_text": "font_weight.to_font_weight()",
          "old_line_content": "    auto width = font_stretch.to_font_stretch_width();",
          "new_line_content": "    auto weight = font_weight.to_font_weight();",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "parent_or_root_element_line_height",
          "new_api": "computed_css_values",
          "old_text": "parent_or_root_element_line_height(element, pseudo_element)",
          "new_text": "parent_element->computed_css_values()",
          "old_line_content": "    auto parent_line_height = parent_or_root_element_line_height(element, pseudo_element);",
          "new_line_content": "    if (parent_element && parent_element->computed_css_values())",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": "pixel_metrics",
          "new_api": "default_font",
          "old_text": "parent_element->computed_css_values()->computed_font().pixel_metrics()",
          "new_text": "Platform::FontPlugin::the().default_font().pixel_metrics()",
          "old_line_content": "        font_pixel_metrics = parent_element->computed_css_values()->computed_font().pixel_metrics();",
          "new_line_content": "        font_pixel_metrics = Platform::FontPlugin::the().default_font().pixel_metrics();",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "default_font",
          "new_api": "computed_css_values",
          "old_text": "Platform::FontPlugin::the().default_font().pixel_metrics()",
          "new_text": "parent_element->computed_css_values()",
          "old_line_content": "        font_pixel_metrics = Platform::FontPlugin::the().default_font().pixel_metrics();",
          "new_line_content": "        if (!parent_element || !parent_element->computed_css_values())",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "computed_css_values",
          "new_api": "length",
          "old_text": "parent_element->computed_css_values()->property(CSS::PropertyID::FontSize)",
          "new_text": "value->as_length().length()",
          "old_line_content": "        auto value = parent_element->computed_css_values()->property(CSS::PropertyID::FontSize);",
          "new_line_content": "            auto length = value->as_length().length();",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "is_length",
          "new_api": "parent_or_root_element_line_height",
          "old_text": "value->is_length()",
          "new_text": "parent_or_root_element_line_height(parent_element, {})",
          "old_line_content": "        if (value->is_length()) {",
          "new_line_content": "            auto parent_line_height = parent_or_root_element_line_height(parent_element, {});",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "length",
          "new_api": "is_relative",
          "old_text": "value->as_length().length()",
          "new_text": "length.is_relative()",
          "old_line_content": "            auto length = value->as_length().length();",
          "new_line_content": "            if (length.is_absolute() || length.is_relative()) {",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "is_relative",
          "new_api": "viewport_rect",
          "old_text": "length.is_relative()",
          "new_text": "viewport_rect()",
          "old_line_content": "            if (length.is_absolute() || length.is_relative()) {",
          "new_line_content": "                return length.to_px(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "parent_font_size",
          "new_api": "is_identifier",
          "old_text": "parent_font_size()",
          "new_text": "font_size.is_identifier()",
          "old_line_content": "    Length::FontMetrics font_metrics { parent_font_size(), font_pixel_metrics, parent_line_height };",
          "new_line_content": "    if (font_size.is_identifier()) {",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "is_percentage",
          "new_api": "to_double",
          "old_text": "font_size.is_percentage()",
          "new_text": "parent_font_size().to_double()",
          "old_line_content": "        if (font_size.is_percentage()) {",
          "new_line_content": "            maybe_length = Length::make_px(font_size.as_percentage().percentage().as_fraction() * parent_font_size().to_double());",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "to_double",
          "new_api": "is_length",
          "old_text": "parent_font_size().to_double()",
          "new_text": "font_size.is_length()",
          "old_line_content": "            maybe_length = Length::make_px(font_size.as_percentage().percentage().as_fraction() * parent_font_size().to_double());",
          "new_line_content": "        } else if (font_size.is_length()) {",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "is_length",
          "new_api": "is_calculated",
          "old_text": "font_size.is_length()",
          "new_text": "font_size.is_calculated()",
          "old_line_content": "        } else if (font_size.is_length()) {",
          "new_line_content": "        } else if (font_size.is_calculated()) {",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "as_length",
          "new_api": "as_calculated",
          "old_text": "font_size.as_length().length()",
          "new_text": "font_size.as_calculated().resolve_length(length_resolution_context)",
          "old_line_content": "            maybe_length = font_size.as_length().length();",
          "new_line_content": "            maybe_length = font_size.as_calculated().resolve_length(length_resolution_context);",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": "as_calculated",
          "new_api": "has_value",
          "old_text": "font_size.as_calculated().resolve_length(length_resolution_context)",
          "new_text": "maybe_length.has_value()",
          "old_line_content": "            maybe_length = font_size.as_calculated().resolve_length(length_resolution_context);",
          "new_line_content": "        if (maybe_length.has_value()) {",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "end",
          "new_api": "font_with_point_size",
          "old_text": "m_loaded_fonts.end()",
          "new_text": "loader.font_with_point_size(font_size_in_pt)",
          "old_line_content": "        if (auto it = m_loaded_fonts.find(key); it != m_loaded_fonts.end()) {",
          "new_line_content": "            if (auto found_font = loader.font_with_point_size(font_size_in_pt))",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "values",
          "new_api": "is_identifier",
          "old_text": "static_cast<StyleValueList const&>(font_family).values()",
          "new_text": "family->is_identifier()",
          "old_line_content": "        auto const& family_list = static_cast<StyleValueList const&>(font_family).values();",
          "new_line_content": "            if (family->is_identifier()) {",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "is_identifier",
          "new_api": "is_string",
          "old_text": "family->is_identifier()",
          "new_text": "family->is_string()",
          "old_line_content": "            if (family->is_identifier()) {",
          "new_line_content": "            } else if (family->is_string()) {",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": "to_identifier",
          "new_api": "to_string",
          "old_text": "family->to_identifier()",
          "new_text": "family->to_string()",
          "old_line_content": "                found_font = find_generic_font(family->to_identifier());",
          "new_line_content": "                found_font = find_font(family->to_string());",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "is_identifier",
          "new_api": "is_string",
          "old_text": "font_family.is_identifier()",
          "new_text": "font_family.is_string()",
          "old_line_content": "    } else if (font_family.is_identifier()) {",
          "new_line_content": "    } else if (font_family.is_string()) {",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": "to_identifier",
          "new_api": "to_string",
          "old_text": "font_family.to_identifier()",
          "new_text": "font_family.to_string()",
          "old_line_content": "        found_font = find_generic_font(font_family.to_identifier());",
          "new_line_content": "        found_font = find_font(font_family.to_string());",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": "StyleProperties::font_fallback(monospace, bold)",
          "new_api": "with_size",
          "old_text": "StyleProperties::font_fallback(monospace, bold)",
          "new_text": "found_font->with_size(font_size_in_pt)",
          "old_line_content": "        found_font = StyleProperties::font_fallback(monospace, bold);",
          "new_line_content": "            if (auto scaled_fallback_font = found_font->with_size(font_size_in_pt))",
          "content_same": false
        },
        {
          "line": 2342,
          "old_api": "compute_defaulted_property_value",
          "new_api": "property",
          "old_text": "compute_defaulted_property_value(style, element, CSS::PropertyID::LineHeight, pseudo_element)",
          "new_text": "style.property(CSS::PropertyID::FontFamily)",
          "old_line_content": "    compute_defaulted_property_value(style, element, CSS::PropertyID::LineHeight, pseudo_element);",
          "new_line_content": "    auto font_family = style.property(CSS::PropertyID::FontFamily);",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": "property",
          "new_api": "compute_font_for_style_values",
          "old_text": "style.property(CSS::PropertyID::FontStretch)",
          "new_text": "compute_font_for_style_values(element, pseudo_element, font_family, font_size, font_style, font_weight, font_stretch)",
          "old_line_content": "    auto font_stretch = style.property(CSS::PropertyID::FontStretch);",
          "new_line_content": "    auto found_font = compute_font_for_style_values(element, pseudo_element, font_family, font_size, font_style, font_weight, font_stretch);",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "compute_font_for_style_values",
          "new_api": "pixel_size",
          "old_text": "compute_font_for_style_values(element, pseudo_element, font_family, font_size, font_style, font_weight, font_stretch)",
          "new_text": "found_font->pixel_size()",
          "old_line_content": "    auto found_font = compute_font_for_style_values(element, pseudo_element, font_family, font_size, font_style, font_weight, font_stretch);",
          "new_line_content": "    style.set_property(CSS::PropertyID::FontSize, LengthStyleValue::create(CSS::Length::make_px(found_font->pixel_size())), nullptr);",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": "to_font_weight",
          "new_api": "release_nonnull",
          "old_text": "font_weight->to_font_weight()",
          "new_text": "found_font.release_nonnull()",
          "old_line_content": "    style.set_property(CSS::PropertyID::FontWeight, NumberStyleValue::create(font_weight->to_font_weight()));",
          "new_line_content": "    style.set_computed_font(found_font.release_nonnull());",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": "release_nonnull",
          "new_api": "is<HTML::HTMLHtmlElement>(*element)",
          "old_text": "found_font.release_nonnull()",
          "new_text": "is<HTML::HTMLHtmlElement>(*element)",
          "old_line_content": "    style.set_computed_font(found_font.release_nonnull());",
          "new_line_content": "    if (element && is<HTML::HTMLHtmlElement>(*element)) {",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": "length",
          "new_api": "absolute_length_to_px",
          "old_text": "computed_values->property(CSS::PropertyID::FontSize)->as_length().length()",
          "new_text": "parent_font_size.absolute_length_to_px()",
          "old_line_content": "    auto parent_font_size = computed_values->property(CSS::PropertyID::FontSize)->as_length().length();",
          "new_line_content": "    auto parent_font_size_value = parent_font_size.is_absolute() ? parent_font_size.absolute_length_to_px() : m_root_element_font_metrics.font_size;",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "parent_or_root_element_line_height",
          "new_api": "viewport_rect",
          "old_text": "parent_or_root_element_line_height(parent_element, {})",
          "new_text": "viewport_rect()",
          "old_line_content": "    auto parent_parent_line_height = parent_or_root_element_line_height(parent_element, {});",
          "new_line_content": "    return computed_values->line_height(viewport_rect(), parent_font_metrics, m_root_element_font_metrics);",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "parent_or_root_element_line_height",
          "new_api": "computed_font",
          "old_text": "parent_or_root_element_line_height(element, pseudo_element)",
          "new_text": "style.computed_font().pixel_metrics()",
          "old_line_content": "    auto parent_or_root_line_height = parent_or_root_element_line_height(element, pseudo_element);",
          "new_line_content": "    auto font_pixel_metrics = style.computed_font().pixel_metrics();",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": "to_underlying",
          "new_api": "percentage",
          "old_text": "to_underlying(CSS::PropertyID::LineHeight)",
          "new_text": "LengthStyleValue::create(\n            Length::make_px(font_size * static_cast<double>((*line_height_value_slot)->as_percentage().percentage().as_fraction())))",
          "old_line_content": "    auto line_height_value_slot = style.m_property_values[to_underlying(CSS::PropertyID::LineHeight)].map([](auto& x) -> auto& { return x.style; });",
          "new_line_content": "        *line_height_value_slot = LengthStyleValue::create(",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "is_percentage",
          "new_api": "percentage",
          "old_text": "*line_height_value_slot)->is_percentage()",
          "new_text": "*line_height_value_slot)->as_percentage().percentage().as_fraction()",
          "old_line_content": "    if (line_height_value_slot.has_value() && (*line_height_value_slot)->is_percentage()) {",
          "new_line_content": "            Length::make_px(font_size * static_cast<double>((*line_height_value_slot)->as_percentage().percentage().as_fraction())));",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "Length::make_px(line_height)",
          "new_api": "size",
          "old_text": "Length::make_px(line_height)",
          "new_text": "style.m_property_values.size()",
          "old_line_content": "        (*line_height_value_slot) = LengthStyleValue::create(Length::make_px(line_height));",
          "new_line_content": "    for (size_t i = 0; i < style.m_property_values.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "size",
          "new_api": "has_value",
          "old_text": "style.m_property_values.size()",
          "new_text": "value_slot.has_value()",
          "old_line_content": "    for (size_t i = 0; i < style.m_property_values.size(); ++i) {",
          "new_line_content": "        if (!value_slot.has_value())",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "has_value",
          "new_api": "viewport_rect",
          "old_text": "value_slot.has_value()",
          "new_text": "viewport_rect()",
          "old_line_content": "        if (!value_slot.has_value())",
          "new_line_content": "        value_slot->style = value_slot->style->absolutized(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "computed_css_values",
          "new_api": "is_flex_inside",
          "old_text": "->computed_css_values()) {\n  ",
          "new_text": "_display.is_flex_inside())\n    ",
          "old_line_content": "    if (parent && parent->computed_css_values()) {",
          "new_line_content": "        if (parent_display.is_grid_inside() || parent_display.is_flex_inside())",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "play::from_short(CSS::Display::Short::Block);",
          "new_api": "is_outside_and_inside",
          "old_text": "play::from_short(CSS::Display::Short::Block);\n      ",
          "new_text": "is_outside_and_inside());\n\n    ",
          "old_line_content": "            new_display = CSS::Display::from_short(CSS::Display::Short::Block);",
          "new_line_content": "            VERIFY(display.is_outside_and_inside());",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "perties::create();\n    co",
          "new_api": "defaulted_values",
          "old_text": "perties::create();\n    co",
          "new_text": "defaulted_values(style, nullptr, {});\n    ab",
          "old_line_content": "    auto style = StyleProperties::create();",
          "new_line_content": "    compute_defaulted_values(style, nullptr, {});",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "font",
          "new_api": "ze_values",
          "old_text": "font(style, nullptr, {});\n    co",
          "new_text": "ze_values(style, nullptr, {});\n    st",
          "old_line_content": "    compute_font(style, nullptr, {});",
          "new_line_content": "    absolutize_values(style, nullptr, {});",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": "defaulted_values",
          "new_api": "width",
          "old_text": "defaulted_values(style, nullptr, {});\n    ab",
          "new_text": "_rect().width())), null",
          "old_line_content": "    compute_defaulted_values(style, nullptr, {});",
          "new_line_content": "    style->set_property(CSS::PropertyID::Width, CSS::LengthStyleValue::create(CSS::Length::make_px(viewport_rect().width())), nullptr);",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": "ze_values",
          "new_api": "height",
          "old_text": "ze_values(style, nullptr, {});\n    st",
          "new_text": "_rect().height())), null",
          "old_line_content": "    absolutize_values(style, nullptr, {});",
          "new_line_content": "    style->set_property(CSS::PropertyID::Height, CSS::LengthStyleValue::create(CSS::Length::make_px(viewport_rect().height())), nullptr);",
          "content_same": false
        },
        {
          "line": 2519,
          "old_api": "width",
          "new_api": "play::from_short(CSS::Display::Short::Block)), nullp",
          "old_text": "_rect().width())), null",
          "new_text": "play::from_short(CSS::Display::Short::Block)), nullp",
          "old_line_content": "    style->set_property(CSS::PropertyID::Width, CSS::LengthStyleValue::create(CSS::Length::make_px(viewport_rect().width())), nullptr);",
          "new_line_content": "    style->set_property(CSS::PropertyID::Display, CSS::DisplayStyleValue::create(CSS::Display::from_short(CSS::Display::Short::Block)), nullptr);",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "le_cache_if_needed",
          "new_api": "perties::create();\n    //",
          "old_text": "le_cache_if_needed();\n\n    a",
          "new_text": "perties::create();\n    //",
          "old_line_content": "    build_rule_cache_if_needed();",
          "new_line_content": "    auto style = StyleProperties::create();",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "for_each_effective_style_rule",
          "new_api": "selectors",
          "old_text": "_stylesheet(cascade_origin, [&](auto& sheet) {\n        size_t rule_index = 0;\n        sheet.for_each_effective_style_rule([&](auto const& rule) {\n            size_t selector_index = 0;\n            for (CSS::Selector const& selector : rule.selectors()) {\n                MatchingRule matching_rule {\n                    &rule,\n                    sheet,\n                    style_sheet_index,\n                    rule_index,\n                    selector_index,\n                    selector.specificity()\n                };\n\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::PseudoElement) {\n                        matching_rule.contains_pseudo_element = true;\n                        ++num_pseudo_element_rules;\n                        break;\n                    }\n                }\n\n                bool added_to_bucket = false;\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Id) {\n                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_id_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Class) {\n                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_class_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::TagName) {\n                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));\n                        ++num_tag_name_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                }\n                if (!added_to_bucket)\n                    rule_cache->other_rules.append(move(matching_rule));\n\n                ++selector_index;\n            }\n            ++rule_index;\n        });\n\n        sheet.for_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {\n            auto keyframe_set = make<AnimationKeyFrameSet>();\n            AnimationKeyFrameSet::ResolvedKeyFrame resolved_keyframe;\n\n            // Forwards pass, resolve all the user-specified keyframe properties.\n            for (auto const& keyframe : rule.keyframes()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                auto current_keyframe = resolved_keyframe;\n                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n                for (auto& property : keyframe_style.properties())\n                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;\n\n                resolved_keyframe = move(current_keyframe);\n                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);\n            }\n\n            // If there is no 'from' keyframe, make a synthetic one.\n            auto made_a_synthetic_from_keyframe = false;\n            if (!keyframe_set->keyframes_by_key.find(0)) {\n                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());\n                made_a_synthetic_from_keyframe = true;\n            }\n\n            // Backwards pass, resolve all the implied properties, go read <https://drafts.csswg.org/css-animations-2/#keyframe-processing> to see why.\n            auto first = true;\n            for (auto const& keyframe : rule.keyframes().in_reverse()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                // The last keyframe is already fully resolved.\n                if (first) {\n                    first = false;\n                    continue;\n                }\n\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n\n                    if (key == 0)\n                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                    else\n                        current_property = *it;\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if (made_a_synthetic_from_keyframe && !first) {\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if constexpr (LIBWEB_CSS_DEBUG) {\n                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());\n                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {\n                    size_t props = 0;\n                    for (auto& entry : it->resolved_properties)\n                        props += !entry.has<Empty>();\n                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);\n                }\n            }\n\n            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));\n        });\n        ++style_sheet_index;\n    });\n\n    i",
          "new_text": "r_each_effective_style_rule([&](auto const& rule) {\n            size_t selector_index = 0;\n            for (CSS::Selector const& selector : rule.selectors()) {\n                MatchingRule matching_rule {\n                    &rule,\n                    sheet,\n                    style_sheet_index,\n                    rule_index,\n                    selector_index,\n                    selector.specificity()\n                };\n\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::PseudoElement) {\n                        matching_rule.contains_pseudo_element = true;\n                        ++num_pseudo_element_rules;\n                        break;\n                    }\n                }\n\n                bool added_to_bucket = false;\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Id) {\n                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_id_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Class) {\n                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_class_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::TagName) {\n                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));\n                        ++num_tag_name_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                }\n                if (!added_to_bucket)\n                    rule_cache->other_rules.append(move(matching_rule));\n\n                ++selector_index;\n            }\n            ++rule_index;\n        });\n\n     ",
          "old_line_content": "    for_each_stylesheet(cascade_origin, [&](auto& sheet) {",
          "new_line_content": "        sheet.for_each_effective_style_rule([&](auto const& rule) {",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": "selectors",
          "new_api": "ectors",
          "old_text": "r_each_effective_style_rule([&](auto const& rule) {\n            size_t selector_index = 0;\n            for (CSS::Selector const& selector : rule.selectors()) {\n                MatchingRule matching_rule {\n                    &rule,\n                    sheet,\n                    style_sheet_index,\n                    rule_index,\n                    selector_index,\n                    selector.specificity()\n                };\n\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::PseudoElement) {\n                        matching_rule.contains_pseudo_element = true;\n                        ++num_pseudo_element_rules;\n                        break;\n                    }\n                }\n\n                bool added_to_bucket = false;\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Id) {\n                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_id_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Class) {\n                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_class_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::TagName) {\n                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));\n                        ++num_tag_name_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                }\n                if (!added_to_bucket)\n                    rule_cache->other_rules.append(move(matching_rule));\n\n                ++selector_index;\n            }\n            ++rule_index;\n        });\n\n     ",
          "new_text": "ectors()) {\n    ",
          "old_line_content": "        sheet.for_each_effective_style_rule([&](auto const& rule) {",
          "new_line_content": "            for (CSS::Selector const& selector : rule.selectors()) {",
          "content_same": false
        },
        {
          "line": 2634,
          "old_api": "compound_selectors",
          "new_api": "ching_rule));",
          "old_text": ".compound_selectors().last().simple_",
          "new_text": "ching_rule));\n     ",
          "old_line_content": "                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {",
          "new_line_content": "                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": "frames",
          "new_api": "style",
          "old_text": "frames()) {\n    ",
          "new_text": "->style();\n\n     ",
          "old_line_content": "            for (auto const& keyframe : rule.keyframes()) {",
          "new_line_content": "                auto keyframe_rule = keyframe->style();",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": "style",
          "new_api": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "old_text": "->style();\n\n     ",
          "new_text": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))\n      ",
          "old_line_content": "                auto keyframe_rule = keyframe->style();",
          "new_line_content": "                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "ast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);",
          "new_api": "lying",
          "old_text": "ast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n      ",
          "new_text": "lying(property.property_id)] = prop",
          "old_line_content": "                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);",
          "new_line_content": "                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": "lying",
          "new_api": "rent_keyframe);",
          "old_text": "lying(property.property_id)] = prop",
          "new_text": "rent_keyframe);\n      ",
          "old_line_content": "                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;",
          "new_line_content": "                resolved_keyframe = move(current_keyframe);",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": "in_reverse",
          "new_api": "style",
          "old_text": "frames().in_reverse()) {\n    ",
          "new_text": "->style();\n\n     ",
          "old_line_content": "            for (auto const& keyframe : rule.keyframes().in_reverse()) {",
          "new_line_content": "                auto keyframe_rule = keyframe->style();",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "style",
          "new_api": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "old_text": "->style();\n\n     ",
          "new_text": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))\n      ",
          "old_line_content": "                auto keyframe_rule = keyframe->style();",
          "new_line_content": "                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": "find",
          "new_api": "d",
          "old_text": "_set->keyframes_by_key.find(key);\n\n     ",
          "new_text": "d(); ++it) ",
          "old_line_content": "                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);",
          "new_line_content": "                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": "d",
          "new_api": "Empty>())",
          "old_text": "d(); ++it) ",
          "new_text": "Empty>())\n      ",
          "old_line_content": "                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {",
          "new_line_content": "                    if (!current_property.has<Empty>() || it->has<Empty>())",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "find",
          "new_api": "d",
          "old_text": "_set->keyframes_by_key.find(0);\n\n     ",
          "new_text": "d(); ++it) ",
          "old_line_content": "                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);",
          "new_line_content": "                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": "d",
          "new_api": "Empty>())",
          "old_text": "d(); ++it) ",
          "new_text": "Empty>())\n      ",
          "old_line_content": "                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {",
          "new_line_content": "                    if (!current_property.has<Empty>() || it->has<Empty>())",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "Empty>())",
          "new_api": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "old_text": "Empty>())\n      ",
          "new_text": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();\n      ",
          "old_line_content": "                    if (!current_property.has<Empty>() || it->has<Empty>())",
          "new_line_content": "                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "uilt rule cache!\");",
          "new_api": "Class: {}\", num_class_rules);",
          "old_text": "uilt rule cache!\");\n      ",
          "new_text": "       Class: {}\", num_class_rules);\n      ",
          "old_line_content": "        dbgln(\"Built rule cache!\");",
          "new_line_content": "        dbgln(\"        Class: {}\", num_class_rules);",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "ID: {}\", num_id_rules);",
          "new_api": "TagName: {}\", num_tag_name_rules);",
          "old_text": "          ID: {}\", num_id_rules);\n      ",
          "new_text": "     TagName: {}\", num_tag_name_rules);\n      ",
          "old_line_content": "        dbgln(\"           ID: {}\", num_id_rules);",
          "new_line_content": "        dbgln(\"      TagName: {}\", num_tag_name_rules);",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "Class: {}\", num_class_rules);",
          "new_api": "seudoElement: {}\", num_pseudo_element_rules);",
          "old_text": "       Class: {}\", num_class_rules);\n      ",
          "new_text": "seudoElement: {}\", num_pseudo_element_rules);\n      ",
          "old_line_content": "        dbgln(\"        Class: {}\", num_class_rules);",
          "new_line_content": "        dbgln(\"PseudoElement: {}\", num_pseudo_element_rules);",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": "TagName: {}\", num_tag_name_rules);",
          "new_api": "size",
          "old_text": "     TagName: {}\", num_tag_name_rules);\n      ",
          "new_text": "he->other_rules.size());\n     ",
          "old_line_content": "        dbgln(\"      TagName: {}\", num_tag_name_rules);",
          "new_line_content": "        dbgln(\"        Other: {}\", rule_cache->other_rules.size());",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": "seudoElement: {}\", num_pseudo_element_rules);",
          "new_api": "size",
          "old_text": "seudoElement: {}\", num_pseudo_element_rules);\n      ",
          "new_text": "he->other_rules.size());\n    }",
          "old_line_content": "        dbgln(\"PseudoElement: {}\", num_pseudo_element_rules);",
          "new_line_content": "        dbgln(\"        Total: {}\", num_class_rules + num_id_rules + num_tag_name_rules + rule_cache->other_rules.size());",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": "page",
          "new_api": "value",
          "old_text": "().page()) {\n    ",
          "new_text": "le_source.value()));\n    ",
          "old_line_content": "    if (document().page()) {",
          "new_line_content": "            m_user_style_sheet = JS::make_handle(parse_css_stylesheet(CSS::Parser::ParsingContext(document()), user_style_source.value()));",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "used]] FlySt",
          "new_api": "invalidate_style",
          "old_text": "used]] FlySt",
          "new_text": "().invalidate_style();\n}\n\nvoi",
          "old_line_content": "void StyleComputer::did_load_font([[maybe_unused]] FlyString const& family_name)",
          "new_line_content": "    document().invalidate_style();",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "ntFaceRule>(*rule))",
          "new_api": "font_face",
          "old_text": "ntFaceRule>(*rule))\n      ",
          "new_text": "ast<CSSFontFaceRule const&>(*rule).font_face();\n      ",
          "old_line_content": "        if (!is<CSSFontFaceRule>(*rule))",
          "new_line_content": "        auto const& font_face = static_cast<CSSFontFaceRule const&>(*rule).font_face();",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": "font_family",
          "new_api": "slope",
          "old_text": "e.font_family(),\n      ",
          "new_text": "e.slope().value_or(0),\n      ",
          "old_line_content": "            .family_name = font_face.font_family(),",
          "new_line_content": "            .slope = font_face.slope().value_or(0),",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": "slope",
          "new_api": "contains",
          "old_text": "e.slope().value_or(0),\n      ",
          "new_text": "_fonts.contains(key))\n      ",
          "old_line_content": "            .slope = font_face.slope().value_or(0),",
          "new_line_content": "        if (m_loaded_fonts.contains(key))",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "sources",
          "new_api": "to_deprecated_string",
          "old_text": "e.sources()) {\n    ",
          "new_text": "rl.to_deprecated_string()));\n    ",
          "old_line_content": "        for (auto& source : font_face.sources()) {",
          "new_line_content": "            urls.append(m_document->parse_url(source.url.to_deprecated_string()));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2562,
          "old_api": null,
          "new_api": "e))\n{\n}\n\nv",
          "old_text": null,
          "new_text": "e))\n{\n}\n\nv",
          "old_line_content": "",
          "new_line_content": "    : m_name(move(name))",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": null,
          "new_api": "ew_child->m_name != m_name);\n    m_",
          "old_text": null,
          "new_text": "ew_child->m_name != m_name);\n    m_",
          "old_line_content": "",
          "new_line_content": "    VERIFY(new_child->m_name != m_name);",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": null,
          "new_api": "_child));\n}\n\nbo",
          "old_text": null,
          "new_text": "_child));\n}\n\nbo",
          "old_line_content": "    // We detect self-reference already.",
          "new_line_content": "    m_children.append(move(new_child));",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "as_cycles",
          "old_text": null,
          "new_text": "as_cycles())\n      ",
          "old_line_content": "    TemporaryChange change { m_marked, true };",
          "new_line_content": "        if (child->has_cycles())",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": null,
          "new_api": "family",
          "old_text": null,
          "new_text": "typeface.family()",
          "old_line_content": "                FontFaceKey {",
          "new_line_content": "                .family_name = MUST(FlyString::from_deprecated_fly_string(typeface.family())),",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": null,
          "new_api": "build_rule_cache",
          "old_text": null,
          "new_text": "st<StyleComputer&>(*this).build_rule_cache();\n}\n\nNon",
          "old_line_content": "    if (m_author_rule_cache && m_user_rule_cache && m_user_agent_rule_cache)",
          "new_line_content": "    const_cast<StyleComputer&>(*this).build_rule_cache();",
          "content_same": false
        },
        {
          "line": 2600,
          "old_api": null,
          "new_api": "eCache>();\n\n    s",
          "old_text": null,
          "new_text": "eCache>();\n\n    s",
          "old_line_content": "NonnullOwnPtr<StyleComputer::RuleCache> StyleComputer::make_rule_cache_for_cascade_origin(CascadeOrigin cascade_origin)",
          "new_line_content": "    auto rule_cache = make<RuleCache>();",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "quick_sort",
          "old_text": null,
          "new_text": "quick_sort(matching_family_fonts, [](auto const& a, auto const& b) {\n        return a.key.weight < b.key.weight;\n    })",
          "old_line_content": "        }",
          "new_line_content": "    quick_sort(matching_family_fonts, [](auto const& a, auto const& b) {",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "matching_family_fonts.end()",
          "old_line_content": "    // We don't have complete support of italic and oblique fonts, so matching on font-style can be simplified to:",
          "new_line_content": "    auto style_it = find_if(matching_family_fonts.begin(), matching_family_fonts.end(),",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": null,
          "new_api": "for_each_effective_style_rule",
          "old_text": null,
          "new_text": "_stylesheet(cascade_origin, [&](auto& sheet) {\n        size_t rule_index = 0;\n        sheet.for_each_effective_style_rule([&](auto const& rule) {\n            size_t selector_index = 0;\n            for (CSS::Selector const& selector : rule.selectors()) {\n                MatchingRule matching_rule {\n                    &rule,\n                    sheet,\n                    style_sheet_index,\n                    rule_index,\n                    selector_index,\n                    selector.specificity()\n                };\n\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::PseudoElement) {\n                        matching_rule.contains_pseudo_element = true;\n                        ++num_pseudo_element_rules;\n                        break;\n                    }\n                }\n\n                bool added_to_bucket = false;\n                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Id) {\n                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_id_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::Class) {\n                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));\n                        ++num_class_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                    if (simple_selector.type == CSS::Selector::SimpleSelector::Type::TagName) {\n                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));\n                        ++num_tag_name_rules;\n                        added_to_bucket = true;\n                        break;\n                    }\n                }\n                if (!added_to_bucket)\n                    rule_cache->other_rules.append(move(matching_rule));\n\n                ++selector_index;\n            }\n            ++rule_index;\n        });\n\n        sheet.for_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {\n            auto keyframe_set = make<AnimationKeyFrameSet>();\n            AnimationKeyFrameSet::ResolvedKeyFrame resolved_keyframe;\n\n            // Forwards pass, resolve all the user-specified keyframe properties.\n            for (auto const& keyframe : rule.keyframes()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                auto current_keyframe = resolved_keyframe;\n                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n                for (auto& property : keyframe_style.properties())\n                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;\n\n                resolved_keyframe = move(current_keyframe);\n                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);\n            }\n\n            // If there is no 'from' keyframe, make a synthetic one.\n            auto made_a_synthetic_from_keyframe = false;\n            if (!keyframe_set->keyframes_by_key.find(0)) {\n                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());\n                made_a_synthetic_from_keyframe = true;\n            }\n\n            // Backwards pass, resolve all the implied properties, go read <https://drafts.csswg.org/css-animations-2/#keyframe-processing> to see why.\n            auto first = true;\n            for (auto const& keyframe : rule.keyframes().in_reverse()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                // The last keyframe is already fully resolved.\n                if (first) {\n                    first = false;\n                    continue;\n                }\n\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n\n                    if (key == 0)\n                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                    else\n                        current_property = *it;\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if (made_a_synthetic_from_keyframe && !first) {\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if constexpr (LIBWEB_CSS_DEBUG) {\n                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());\n                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {\n                    size_t props = 0;\n                    for (auto& entry : it->resolved_properties)\n                        props += !entry.has<Empty>();\n                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);\n                }\n            }\n\n            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));\n        });\n        ++style_sheet_index;\n    });\n\n    i",
          "old_line_content": "    Vector<MatchingRule> matching_rules;",
          "new_line_content": "    for_each_stylesheet(cascade_origin, [&](auto& sheet) {",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": null,
          "new_api": "remove_all_matching",
          "old_text": null,
          "new_text": "matching_family_fonts.remove_all_matching([&](auto const& matching_font_candidate) {\n            return matching_font_candidate.key.slope != key.slope;\n        })",
          "old_line_content": "        [&](auto const& matching_font_candidate) { return matching_font_candidate.key.slope == key.slope; });",
          "new_line_content": "        matching_family_fonts.remove_all_matching([&](auto const& matching_font_candidate) {",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "matching_family_fonts.end()",
          "old_line_content": "    // in descending order, followed by weights greater than 500, until a match is found.",
          "new_line_content": "        auto it = find_if(matching_family_fonts.begin(), matching_family_fonts.end(),",
          "content_same": false
        },
        {
          "line": 2620,
          "old_api": null,
          "new_api": "specificity",
          "old_text": null,
          "new_text": ".specificity()\n       ",
          "old_line_content": "                    rule_index,",
          "new_line_content": "                    selector.specificity()",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": null,
          "new_api": "font_with_point_size",
          "old_text": null,
          "new_text": "it->font_with_point_size(font_size_in_pt)",
          "old_line_content": "            [&](auto const& matching_font_candidate) { return matching_font_candidate.key.weight >= key.weight; });",
          "new_line_content": "            if (auto found_font = it->font_with_point_size(font_size_in_pt))",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": null,
          "new_api": "compound_selectors",
          "old_text": null,
          "new_text": ".compound_selectors().last().simple_",
          "old_line_content": "                };",
          "new_line_content": "                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "find_matching_font_weight_descending",
          "old_text": null,
          "new_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "old_line_content": "                return found_font;",
          "new_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": null,
          "new_api": "font_with_point_size",
          "old_text": null,
          "new_text": "it->font_with_point_size(font_size_in_pt)",
          "old_line_content": "            return found_font;",
          "new_line_content": "            if (auto found_font = it->font_with_point_size(font_size_in_pt))",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": null,
          "new_api": "compound_selectors",
          "old_text": null,
          "new_text": ".compound_selectors().last().simple_",
          "old_line_content": "",
          "new_line_content": "                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "find_matching_font_weight_descending",
          "old_text": null,
          "new_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, true)",
          "old_line_content": "    // followed by weights above the desired weight in ascending order until a match is found.",
          "new_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, true))",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": null,
          "new_api": "ching_rule));",
          "old_text": null,
          "new_text": "ching_rule));\n     ",
          "old_line_content": "                    }",
          "new_line_content": "                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": null,
          "new_api": "find_matching_font_weight_ascending",
          "old_text": null,
          "new_text": "find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, true)",
          "old_line_content": "    // followed by weights below the desired weight in descending order until a match is found.",
          "new_line_content": "        if (auto found_font = find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, true))",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": null,
          "new_api": "ching_rule));",
          "old_text": null,
          "new_text": "ching_rule));\n     ",
          "old_line_content": "                    }",
          "new_line_content": "                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "ching_rule));",
          "old_text": null,
          "new_text": "ching_rule));\n\n    ",
          "old_line_content": "                }",
          "new_line_content": "                    rule_cache->other_rules.append(move(matching_rule));",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "element_to_inherit_style_from",
          "old_text": null,
          "new_text": "element_to_inherit_style_from(element, pseudo_element)",
          "old_line_content": "RefPtr<Gfx::Font const> StyleComputer::compute_font_for_style_values(DOM::Element const* element, Optional<CSS::Selector::PseudoElement> pseudo_element, StyleValue const& font_family, StyleValue const& font_size, StyleValue const& font_style, StyleValue const& font_weight, StyleValue const& font_stretch) const",
          "new_line_content": "    auto* parent_element = element_to_inherit_style_from(element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2660,
          "old_api": null,
          "new_api": "keyframes",
          "old_text": null,
          "new_text": "r_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {\n            auto keyframe_set = make<AnimationKeyFrameSet>();\n            AnimationKeyFrameSet::ResolvedKeyFrame resolved_keyframe;\n\n            // Forwards pass, resolve all the user-specified keyframe properties.\n            for (auto const& keyframe : rule.keyframes()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                auto current_keyframe = resolved_keyframe;\n                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n                for (auto& property : keyframe_style.properties())\n                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;\n\n                resolved_keyframe = move(current_keyframe);\n                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);\n            }\n\n            // If there is no 'from' keyframe, make a synthetic one.\n            auto made_a_synthetic_from_keyframe = false;\n            if (!keyframe_set->keyframes_by_key.find(0)) {\n                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());\n                made_a_synthetic_from_keyframe = true;\n            }\n\n            // Backwards pass, resolve all the implied properties, go read <https://drafts.csswg.org/css-animations-2/#keyframe-processing> to see why.\n            auto first = true;\n            for (auto const& keyframe : rule.keyframes().in_reverse()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                // The last keyframe is already fully resolved.\n                if (first) {\n                    first = false;\n                    continue;\n                }\n\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n\n                    if (key == 0)\n                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                    else\n                        current_property = *it;\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if (made_a_synthetic_from_keyframe && !first) {\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if constexpr (LIBWEB_CSS_DEBUG) {\n                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());\n                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {\n                    size_t props = 0;\n                    for (auto& entry : it->resolved_properties)\n                        props += !entry.has<Empty>();\n                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);\n                }\n            }\n\n            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));\n        });\n      ",
          "old_line_content": "        });",
          "new_line_content": "        sheet.for_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": null,
          "new_api": "mationKeyFrameSet>();",
          "old_text": null,
          "new_text": "mationKeyFrameSet>();\n      ",
          "old_line_content": "",
          "new_line_content": "            auto keyframe_set = make<AnimationKeyFrameSet>();",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": null,
          "new_api": "parent_or_root_element_line_height",
          "old_text": null,
          "new_text": "parent_or_root_element_line_height(element, pseudo_element)",
          "old_line_content": "    float font_size_in_px = 16;",
          "new_line_content": "    auto parent_line_height = parent_or_root_element_line_height(element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": null,
          "new_api": "frames",
          "old_text": null,
          "new_text": "frames()) {\n    ",
          "old_line_content": "",
          "new_line_content": "            for (auto const& keyframe : rule.keyframes()) {",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "->key().value() * Anima",
          "old_line_content": "            // Forwards pass, resolve all the user-specified keyframe properties.",
          "new_line_content": "                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": null,
          "new_api": "pixel_metrics",
          "old_text": null,
          "new_text": "parent_element->computed_css_values()->computed_font().pixel_metrics()",
          "old_line_content": "    Gfx::FontPixelMetrics font_pixel_metrics;",
          "new_line_content": "        font_pixel_metrics = parent_element->computed_css_values()->computed_font().pixel_metrics();",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "ast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);",
          "old_text": null,
          "new_text": "ast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n      ",
          "old_line_content": "",
          "new_line_content": "                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "is_length",
          "old_text": null,
          "new_text": "value->is_length()",
          "old_line_content": "            return font_size_in_px;",
          "new_line_content": "        if (value->is_length()) {",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": null,
          "new_api": "properties",
          "old_text": null,
          "new_text": "_style.properties())\n      ",
          "old_line_content": "                auto current_keyframe = resolved_keyframe;",
          "new_line_content": "                for (auto& property : keyframe_style.properties())",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.insert(key, resolved_keyframe);\n      ",
          "old_line_content": "",
          "new_line_content": "                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.find(0)) {\n    ",
          "old_line_content": "            // If there is no 'from' keyframe, make a synthetic one.",
          "new_line_content": "            if (!keyframe_set->keyframes_by_key.find(0)) {",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "parent_font_size",
          "old_text": null,
          "new_text": "parent_font_size()",
          "old_line_content": "        return font_size_in_px;",
          "new_line_content": "    Length::FontMetrics font_metrics { parent_font_size(), font_pixel_metrics, parent_line_height };",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "nKeyFrameSet::ResolvedKeyFrame());",
          "old_text": null,
          "new_text": "nKeyFrameSet::ResolvedKeyFrame());\n     ",
          "old_line_content": "            auto made_a_synthetic_from_keyframe = false;",
          "new_line_content": "                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": null,
          "new_api": "in_reverse",
          "old_text": null,
          "new_text": "frames().in_reverse()) {\n    ",
          "old_line_content": "            // Backwards pass, resolve all the implied properties, go read <https://drafts.csswg.org/css-animations-2/#keyframe-processing> to see why.",
          "new_line_content": "            for (auto const& keyframe : rule.keyframes().in_reverse()) {",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "->key().value() * Anima",
          "old_line_content": "            auto first = true;",
          "new_line_content": "                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "id",
          "old_text": null,
          "new_text": "static_cast<IdentifierStyleValue const&>(font_size).id()",
          "old_line_content": "        };",
          "new_line_content": "        auto const identifier = static_cast<IdentifierStyleValue const&>(font_size).id();",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.find(key);\n\n     ",
          "old_line_content": "",
          "new_line_content": "                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": null,
          "new_api": "()];",
          "old_text": null,
          "new_text": "()];\n     ",
          "old_line_content": "",
          "new_line_content": "                    auto& current_property = current_keyframes.resolved_properties[it.index()];",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "computed_css_values",
          "old_text": null,
          "new_text": "parent_element->computed_css_values()",
          "old_line_content": "        //       and smaller may compute the font size to the previous entry in the table.",
          "new_line_content": "            if (parent_element && parent_element->computed_css_values()) {",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "pixel_metrics",
          "old_text": null,
          "new_text": "parent_element->computed_css_values()->computed_font().pixel_metrics()",
          "old_line_content": "        if (identifier == CSS::ValueID::Smaller || identifier == CSS::ValueID::Larger) {",
          "new_line_content": "                font_size_in_px = parent_element->computed_css_values()->computed_font().pixel_metrics().size;",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "absolute_size_mapping.get(identifier).value_or(1.0)",
          "old_line_content": "            }",
          "new_line_content": "        auto const multiplier = absolute_size_mapping.get(identifier).value_or(1.0);",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": null,
          "new_api": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "old_text": null,
          "new_text": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();\n      ",
          "old_line_content": "",
          "new_line_content": "                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": null,
          "new_api": "viewport_rect",
          "old_text": null,
          "new_text": "viewport_rect()",
          "old_line_content": "    } else {",
          "new_line_content": "            .viewport_rect = viewport_rect(),",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.find(0);\n\n     ",
          "old_line_content": "            if (made_a_synthetic_from_keyframe && !first) {",
          "new_line_content": "                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": null,
          "new_api": "is_percentage",
          "old_text": null,
          "new_text": "font_size.is_percentage()",
          "old_line_content": "",
          "new_line_content": "        if (font_size.is_percentage()) {",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "()];",
          "old_text": null,
          "new_text": "()];\n     ",
          "old_line_content": "",
          "new_line_content": "                    auto& current_property = current_keyframes.resolved_properties[it.index()];",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": null,
          "new_api": "as_length",
          "old_text": null,
          "new_text": "font_size.as_length().length()",
          "old_line_content": "",
          "new_line_content": "            maybe_length = font_size.as_length().length();",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "maybe_length.value().to_px(length_resolution_context).to_int()",
          "old_line_content": "        }",
          "new_line_content": "            auto px = maybe_length.value().to_px(length_resolution_context).to_int();",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.size());\n     ",
          "old_line_content": "",
          "new_line_content": "                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "_set->keyframes_by_key.end(); ++it) ",
          "old_line_content": "            if constexpr (LIBWEB_CSS_DEBUG) {",
          "new_line_content": "                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": null,
          "new_api": "to_font_slope",
          "old_text": null,
          "new_text": "font_style.to_font_slope()",
          "old_line_content": "    }",
          "new_line_content": "    auto slope = font_style.to_font_slope();",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": null,
          "new_api": "s<Empty>();",
          "old_text": null,
          "new_text": "s<Empty>();\n      ",
          "old_line_content": "                    size_t props = 0;",
          "new_line_content": "                        props += !entry.has<Empty>();",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": null,
          "new_api": ", props)",
          "old_text": null,
          "new_text": ", props)",
          "old_line_content": "                    for (auto& entry : it->resolved_properties)",
          "new_line_content": "                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": null,
          "new_api": "frame_set));",
          "old_text": null,
          "new_text": "frame_set));\n     ",
          "old_line_content": "            }",
          "new_line_content": "            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": null,
          "new_api": "uilt rule cache!\");",
          "old_text": null,
          "new_text": "uilt rule cache!\");\n      ",
          "old_line_content": "",
          "new_line_content": "        dbgln(\"Built rule cache!\");",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "ID: {}\", num_id_rules);",
          "old_text": null,
          "new_text": "          ID: {}\", num_id_rules);\n      ",
          "old_line_content": "    if constexpr (LIBWEB_CSS_DEBUG) {",
          "new_line_content": "        dbgln(\"           ID: {}\", num_id_rules);",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "m_loaded_fonts.end()",
          "old_line_content": "        };",
          "new_line_content": "        if (auto it = m_loaded_fonts.find(key); it != m_loaded_fonts.end()) {",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "m_font_cache.get(font_selector)",
          "old_line_content": "        }",
          "new_line_content": "        if (auto found_font = m_font_cache.get(font_selector))",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": null,
          "new_api": "page",
          "old_text": null,
          "new_text": "().page()) {\n    ",
          "old_line_content": "{",
          "new_line_content": "    if (document().page()) {",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "le_source.has_value()) {\n    ",
          "old_line_content": "    // FIXME: How are we sometimes calculating style before the Document has a Page?",
          "new_line_content": "        if (auto user_style_source = document().page()->user_style(); user_style_source.has_value()) {",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": null,
          "new_api": "font_matching_algorithm",
          "old_text": null,
          "new_text": "font_matching_algorithm(key, font_size_in_pt)",
          "old_line_content": "            return found_font;",
          "new_line_content": "        if (auto found_font = font_matching_algorithm(key, font_size_in_pt))",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "to_deprecated_string",
          "old_text": null,
          "new_text": "family.to_deprecated_string()",
          "old_line_content": "            return found_font;",
          "new_line_content": "        if (auto found_font = Gfx::FontDatabase::the().get(family.to_deprecated_string(), font_size_in_pt, weight, width, slope, Gfx::Font::AllowInexactSizeMatch::Yes))",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": null,
          "new_api": "e_cache_for_cascade_origin",
          "old_text": null,
          "new_text": "e_cache_for_cascade_origin(CascadeOrigin::Author);\n    m_",
          "old_line_content": "    }",
          "new_line_content": "    m_author_rule_cache = make_rule_cache_for_cascade_origin(CascadeOrigin::Author);",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": null,
          "new_api": "e_cache_for_cascade_origin",
          "old_text": null,
          "new_text": "e_cache_for_cascade_origin(CascadeOrigin::User);\n    m_",
          "old_line_content": "",
          "new_line_content": "    m_user_rule_cache = make_rule_cache_for_cascade_origin(CascadeOrigin::User);",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": null,
          "new_api": "browsing_context",
          "old_text": null,
          "new_text": "().browsing_context())\n      ",
          "old_line_content": "CSSPixelRect StyleComputer::viewport_rect() const",
          "new_line_content": "    if (auto const* browsing_context = document().browsing_context())",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": null,
          "new_api": "viewport_rect",
          "old_text": null,
          "new_text": "_context->viewport_rect();\n    re",
          "old_line_content": "{",
          "new_line_content": "        return browsing_context->viewport_rect();",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": null,
          "new_api": "used]] FlySt",
          "old_text": null,
          "new_text": "used]] FlySt",
          "old_line_content": "}",
          "new_line_content": "void StyleComputer::did_load_font([[maybe_unused]] FlyString const& family_name)",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": null,
          "new_api": "rules",
          "old_text": null,
          "new_text": "ast<CSSStyleSheet const&>(sheet).rules()) {\n    ",
          "old_line_content": "void StyleComputer::load_fonts_from_sheet(CSSStyleSheet const& sheet)",
          "new_line_content": "    for (auto const& rule : static_cast<CSSStyleSheet const&>(sheet).rules()) {",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": null,
          "new_api": "ntFaceRule>(*rule))",
          "old_text": null,
          "new_text": "ntFaceRule>(*rule))\n      ",
          "old_line_content": "{",
          "new_line_content": "        if (!is<CSSFontFaceRule>(*rule))",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": null,
          "new_api": "generic_font_name",
          "old_text": null,
          "new_text": "Platform::FontPlugin::the().generic_font_name(generic_font)",
          "old_line_content": "            return {};",
          "new_line_content": "        return find_font(String::from_deprecated_string(Platform::FontPlugin::the().generic_font_name(generic_font)).release_value_but_fixme_should_propagate_errors());",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": null,
          "new_api": "sources",
          "old_text": null,
          "new_text": "e.sources().is_empty())\n      ",
          "old_line_content": "            continue;",
          "new_line_content": "        if (font_face.sources().is_empty())",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": null,
          "new_api": "font_family",
          "old_text": null,
          "new_text": "e.font_family(),\n      ",
          "old_line_content": "            continue;",
          "new_line_content": "            .family_name = font_face.font_family(),",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": null,
          "new_api": "weight",
          "old_text": null,
          "new_text": "e.weight().value_or(0),\n      ",
          "old_line_content": "        FontFaceKey key {",
          "new_line_content": "            .weight = font_face.weight().value_or(0),",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": null,
          "new_api": "is_value_list",
          "old_text": null,
          "new_text": "font_family.is_value_list()",
          "old_line_content": "    RefPtr<Gfx::Font const> found_font;",
          "new_line_content": "    if (font_family.is_value_list()) {",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": null,
          "new_api": "values",
          "old_text": null,
          "new_text": "static_cast<StyleValueList const&>(font_family).values()",
          "old_line_content": "",
          "new_line_content": "        auto const& family_list = static_cast<StyleValueList const&>(font_family).values();",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": null,
          "new_api": "to_identifier",
          "old_text": null,
          "new_text": "family->to_identifier()",
          "old_line_content": "        for (auto const& family : family_list) {",
          "new_line_content": "                found_font = find_generic_font(family->to_identifier());",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": null,
          "new_api": "sources",
          "old_text": null,
          "new_text": "e.sources()) {\n    ",
          "old_line_content": "",
          "new_line_content": "        for (auto& source : font_face.sources()) {",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "is_identifier",
          "old_text": null,
          "new_text": "font_family.is_identifier()",
          "old_line_content": "                break;",
          "new_line_content": "    } else if (font_family.is_identifier()) {",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": null,
          "new_api": "to_identifier",
          "old_text": null,
          "new_text": "font_family.to_identifier()",
          "old_line_content": "        }",
          "new_line_content": "        found_font = find_generic_font(font_family.to_identifier());",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "empty())\n      ",
          "old_line_content": "        }",
          "new_line_content": "        if (urls.is_empty())",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "s));",
          "old_text": null,
          "new_text": "s));\n     ",
          "old_line_content": "            continue;",
          "new_line_content": "        auto loader = make<FontLoader>(const_cast<StyleComputer&>(*this), font_face.font_family(), move(urls));",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": null,
          "new_api": "der));\n    }",
          "old_text": null,
          "new_text": "der));\n    }",
          "old_line_content": "",
          "new_line_content": "        const_cast<StyleComputer&>(*this).m_loaded_fonts.set(key, move(loader));",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": null,
          "new_api": "StyleProperties::font_fallback(monospace, bold)",
          "old_text": null,
          "new_text": "StyleProperties::font_fallback(monospace, bold)",
          "old_line_content": "",
          "new_line_content": "        found_font = StyleProperties::font_fallback(monospace, bold);",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": null,
          "new_api": "set",
          "old_text": null,
          "new_text": "m_font_cache.set(font_selector, *found_font)",
          "old_line_content": "    }",
          "new_line_content": "    m_font_cache.set(font_selector, *found_font);",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": null,
          "new_api": "compute_defaulted_property_value",
          "old_text": null,
          "new_text": "compute_defaulted_property_value(style, element, CSS::PropertyID::FontFamily, pseudo_element)",
          "old_line_content": "    // To compute the font, first ensure that we've defaulted the relevant CSS font properties.",
          "new_line_content": "    compute_defaulted_property_value(style, element, CSS::PropertyID::FontFamily, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": null,
          "new_api": "compute_defaulted_property_value",
          "old_text": null,
          "new_text": "compute_defaulted_property_value(style, element, CSS::PropertyID::FontSize, pseudo_element)",
          "old_line_content": "    // FIXME: This should be more sophisticated.",
          "new_line_content": "    compute_defaulted_property_value(style, element, CSS::PropertyID::FontSize, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": null,
          "new_api": "property",
          "old_text": null,
          "new_text": "style.property(CSS::PropertyID::FontSize)",
          "old_line_content": "",
          "new_line_content": "    auto font_size = style.property(CSS::PropertyID::FontSize);",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": null,
          "new_api": "to_font_weight",
          "old_text": null,
          "new_text": "font_weight->to_font_weight()",
          "old_line_content": "",
          "new_line_content": "    style.set_property(CSS::PropertyID::FontWeight, NumberStyleValue::create(font_weight->to_font_weight()));",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": null,
          "new_api": "calculate_root_element_font_metrics",
          "old_text": null,
          "new_text": "calculate_root_element_font_metrics(style)",
          "old_line_content": "",
          "new_line_content": "        const_cast<StyleComputer&>(*this).m_root_element_font_metrics = calculate_root_element_font_metrics(style);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "StyleProperties::font_fallback(false, false)",
          "old_text": null,
          "new_text": "StyleProperties::font_fallback(false, false)",
          "old_line_content": "{",
          "new_line_content": "    return StyleProperties::font_fallback(false, false);",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": null,
          "new_api": "element_to_inherit_style_from",
          "old_text": null,
          "new_text": "element_to_inherit_style_from(element, pseudo_element)",
          "old_line_content": "CSSPixels StyleComputer::parent_or_root_element_line_height(DOM::Element const* element, Optional<CSS::Selector::PseudoElement> pseudo_element) const",
          "new_line_content": "    auto* parent_element = element_to_inherit_style_from(element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2371,
          "old_api": null,
          "new_api": "computed_css_values",
          "old_text": null,
          "new_text": "parent_element->computed_css_values()",
          "old_line_content": "    if (!parent_element)",
          "new_line_content": "    auto const* computed_values = parent_element->computed_css_values();",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": null,
          "new_api": "pixel_metrics",
          "old_text": null,
          "new_text": "computed_values->computed_font().pixel_metrics()",
          "old_line_content": "    if (!computed_values)",
          "new_line_content": "    auto parent_font_pixel_metrics = computed_values->computed_font().pixel_metrics();",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "computed_values->property(CSS::PropertyID::FontSize)->as_length().length()",
          "old_line_content": "        return m_root_element_font_metrics.line_height;",
          "new_line_content": "    auto parent_font_size = computed_values->property(CSS::PropertyID::FontSize)->as_length().length();",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": null,
          "new_api": "parent_or_root_element_line_height",
          "old_text": null,
          "new_text": "parent_or_root_element_line_height(parent_element, {})",
          "old_line_content": "    // FIXME: Can the parent font size be non-absolute here?",
          "new_line_content": "    auto parent_parent_line_height = parent_or_root_element_line_height(parent_element, {});",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": null,
          "new_api": "parent_or_root_element_line_height",
          "old_text": null,
          "new_text": "parent_or_root_element_line_height(element, pseudo_element)",
          "old_line_content": "void StyleComputer::absolutize_values(StyleProperties& style, DOM::Element const* element, Optional<CSS::Selector::PseudoElement> pseudo_element) const",
          "new_line_content": "    auto parent_or_root_line_height = parent_or_root_element_line_height(element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "viewport_rect",
          "old_text": null,
          "new_text": "viewport_rect()",
          "old_line_content": "    Length::FontMetrics font_metrics { m_root_element_font_metrics.font_size, font_pixel_metrics, parent_or_root_line_height };",
          "new_line_content": "    auto font_size = style.property(CSS::PropertyID::FontSize)->as_length().length().to_px(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": null,
          "new_api": "to_underlying",
          "old_text": null,
          "new_text": "to_underlying(CSS::PropertyID::LineHeight)",
          "old_line_content": "    //       We can't simply absolutize *all* percentage values against the font size,",
          "new_line_content": "    auto line_height_value_slot = style.m_property_values[to_underlying(CSS::PropertyID::LineHeight)].map([](auto& x) -> auto& { return x.style; });",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": null,
          "new_api": "is_percentage",
          "old_text": null,
          "new_text": "*line_height_value_slot)->is_percentage()",
          "old_line_content": "    //       because most percentages are relative to containing block metrics.",
          "new_line_content": "    if (line_height_value_slot.has_value() && (*line_height_value_slot)->is_percentage()) {",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": null,
          "new_api": "viewport_rect",
          "old_text": null,
          "new_text": "viewport_rect()",
          "old_line_content": "    }",
          "new_line_content": "    auto line_height = style.line_height(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": null,
          "new_api": "is_length",
          "old_text": null,
          "new_text": "*line_height_value_slot)->is_length()",
          "old_line_content": "",
          "new_line_content": "    if (line_height_value_slot.has_value() && (*line_height_value_slot)->is_length())",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": null,
          "new_api": "Length::make_px(line_height)",
          "old_text": null,
          "new_text": "Length::make_px(line_height)",
          "old_line_content": "    // NOTE: line-height might be using lh which should be resolved against the parent line height (like we did here already)",
          "new_line_content": "        (*line_height_value_slot) = LengthStyleValue::create(Length::make_px(line_height));",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": null,
          "new_api": "float_",
          "old_text": null,
          "new_text": "yle.float_() !",
          "old_line_content": "{",
          "new_line_content": "    if (style.position() == CSS::Position::Absolute || style.position() == CSS::Position::Fixed || style.float_() != CSS::Float::None)",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": null,
          "new_api": "parent_element",
          "old_text": null,
          "new_text": "ent.parent_element();\n\n ",
          "old_line_content": "",
          "new_line_content": "    auto const* parent = pseudo_element.has_value() ? &element : element.parent_element();",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": null,
          "new_api": "computed_css_values",
          "old_text": null,
          "new_text": "->computed_css_values()) {\n  ",
          "old_line_content": "",
          "new_line_content": "    if (parent && parent->computed_css_values()) {",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "computed_css_values",
          "old_text": null,
          "new_text": "->computed_css_values()->display();\n    ",
          "old_line_content": "    // A parent with a grid or flex display value blockifies the boxs display type. [CSS-GRID-1] [CSS-FLEXBOX-1]",
          "new_line_content": "        auto const& parent_display = parent->computed_css_values()->display();",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": null,
          "new_api": "splay",
          "old_text": null,
          "new_text": "splay();\n    if",
          "old_line_content": "    // (This has no effect on display types that generate no box at all, such as none or contents.)",
          "new_line_content": "    auto display = style.display();",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": null,
          "new_api": "is_contents",
          "old_text": null,
          "new_text": "is_contents())\n      ",
          "old_line_content": "",
          "new_line_content": "    if (display.is_none() || display.is_contents())",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": null,
          "new_api": "_box_type_transformation",
          "old_text": null,
          "new_text": "_box_type_transformation(style, element, pseudo_element)) {\n    ",
          "old_line_content": "    auto new_display = display;",
          "new_line_content": "    switch (required_box_type_transformation(style, element, pseudo_element)) {",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": null,
          "new_api": "is_block_outside",
          "old_text": null,
          "new_text": "is_block_outside())\n      ",
          "old_line_content": "        break;",
          "new_line_content": "        if (display.is_block_outside())",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": null,
          "new_api": "is_internal",
          "old_text": null,
          "new_text": "is_internal()) {\n    ",
          "old_line_content": "            return;",
          "new_line_content": "        if (display.is_internal()) {",
          "content_same": false
        },
        {
          "line": 2469,
          "old_api": null,
          "new_api": "play::from_short(CSS::Display::Short::Block);",
          "old_text": null,
          "new_text": "play::from_short(CSS::Display::Short::Block);\n      ",
          "old_line_content": "        // If a layout-internal box is blockified, its inner display type converts to flow so that it becomes a block container.",
          "new_line_content": "            new_display = CSS::Display::from_short(CSS::Display::Short::Block);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "is_inline_block",
          "old_text": null,
          "new_text": "is_inline_block()) {\n    ",
          "old_line_content": "            // For legacy reasons, if an inline block box (inline flow-root) is blockified, it becomes a block box (losing its flow-root nature).",
          "new_line_content": "            if (display.is_inline_block()) {",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": null,
          "new_api": "list_item",
          "old_text": null,
          "new_text": "list_item() };\n    ",
          "old_line_content": "            // For consistency, a run-in flow-root box also blockifies to a block box.",
          "new_line_content": "                new_display = CSS::Display { CSS::Display::Outside::Block, CSS::Display::Inside::Flow, display.list_item() };",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": null,
          "new_api": "is_inline_outside",
          "old_text": null,
          "new_text": "is_inline_outside()) {\n    ",
          "old_line_content": "        break;",
          "new_line_content": "        if (display.is_inline_outside()) {",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": null,
          "new_api": "is_flow_inside",
          "old_text": null,
          "new_text": "is_flow_inside()) {\n    ",
          "old_line_content": "            // FIXME: If an inline box (inline flow) is inlinified, it recursively inlinifies all of its in-flow children,",
          "new_line_content": "            if (display.is_flow_inside()) {",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": null,
          "new_api": "IXME: Inlinify inline box children recursively\");",
          "old_text": null,
          "new_text": "IXME: Inlinify inline box children recursively\");\n      ",
          "old_line_content": "            //        so that no block-level descendants break up the inline formatting context in which it participates.",
          "new_line_content": "                dbgln(\"FIXME: Inlinify inline box children recursively\");",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": null,
          "new_api": "is_internal",
          "old_text": null,
          "new_text": "is_internal()) {\n    ",
          "old_line_content": "            break;",
          "new_line_content": "        if (display.is_internal()) {",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": null,
          "new_api": "is_outside_and_inside",
          "old_text": null,
          "new_text": "is_outside_and_inside());\n\n    ",
          "old_line_content": "            // to be wrapped in an appropriately-typed anonymous inline-level box.)",
          "new_line_content": "            VERIFY(display.is_outside_and_inside());",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": null,
          "new_api": "is_flow_inside",
          "old_text": null,
          "new_text": "is_flow_inside()) {\n    ",
          "old_line_content": "",
          "new_line_content": "            if (display.is_block_outside() && display.is_flow_inside()) {",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "list_item",
          "old_text": null,
          "new_text": "list_item() };\n    ",
          "old_line_content": "            // If a block box (block flow) is inlinified, its inner display type is set to flow-root so that it remains a block container.",
          "new_line_content": "                new_display = CSS::Display { CSS::Display::Outside::Inline, CSS::Display::Inside::FlowRoot, display.list_item() };",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": null,
          "new_api": "list_item",
          "old_text": null,
          "new_text": "list_item() };\n    ",
          "old_line_content": "            }",
          "new_line_content": "            new_display = CSS::Display { CSS::Display::Outside::Inline, display.inside(), display.list_item() };",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": null,
          "new_api": "operty_source_declaration",
          "old_text": null,
          "new_text": "operty_source_declaration(CSS::PropertyID::Display));\n}\n\nNo",
          "old_line_content": "",
          "new_line_content": "        style.set_property(CSS::PropertyID::Display, DisplayStyleValue::create(new_display), style.property_source_declaration(CSS::PropertyID::Display));",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": null,
          "new_api": "perties::create();\n    co",
          "old_text": null,
          "new_text": "perties::create();\n    co",
          "old_line_content": "NonnullRefPtr<StyleProperties> StyleComputer::create_document_style() const",
          "new_line_content": "    auto style = StyleProperties::create();",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": null,
          "new_api": "font",
          "old_text": null,
          "new_text": "font(style, nullptr, {});\n    co",
          "old_line_content": "{",
          "new_line_content": "    compute_font(style, nullptr, {});",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": null,
          "new_api": "udo_element), Comput",
          "old_text": null,
          "new_text": "udo_element), Comput",
          "old_line_content": "ErrorOr<NonnullRefPtr<StyleProperties>> StyleComputer::compute_style(DOM::Element& element, Optional<CSS::Selector::PseudoElement> pseudo_element) const",
          "new_line_content": "    auto style = TRY(compute_style_impl(element, move(pseudo_element), ComputeStyleMode::Normal));",
          "content_same": false
        },
        {
          "line": 2526,
          "old_api": null,
          "new_api": "lease_nonnull",
          "old_text": null,
          "new_text": "lease_nonnull();\n}\n\nErr",
          "old_line_content": "{",
          "new_line_content": "    return style.release_nonnull();",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": null,
          "new_api": "udo_element), Comput",
          "old_text": null,
          "new_text": "udo_element), Comput",
          "old_line_content": "ErrorOr<RefPtr<StyleProperties>> StyleComputer::compute_pseudo_element_style_if_needed(DOM::Element& element, Optional<CSS::Selector::PseudoElement> pseudo_element) const",
          "new_line_content": "    return compute_style_impl(element, move(pseudo_element), ComputeStyleMode::CreatePseudoElementStyleIfNeeded);",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": null,
          "new_api": "le_cache_if_needed",
          "old_text": null,
          "new_text": "le_cache_if_needed();\n\n    a",
          "old_line_content": "ErrorOr<RefPtr<StyleProperties>> StyleComputer::compute_style_impl(DOM::Element& element, Optional<CSS::Selector::PseudoElement> pseudo_element, ComputeStyleMode mode) const",
          "new_line_content": "    build_rule_cache_if_needed();",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": null,
          "new_api": "cascaded_values",
          "old_text": null,
          "new_text": "cascaded_values(style, element, pseudo_element, did_match_any_pseudo_element_rules, mode));\n\n    ",
          "old_line_content": "    // 1. Perform the cascade. This produces the \"specified style\"",
          "new_line_content": "    TRY(compute_cascaded_values(style, element, pseudo_element, did_match_any_pseudo_element_rules, mode));",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "font",
          "old_text": null,
          "new_text": "font(style, &element, pseudo_element);\n\n    /",
          "old_line_content": "",
          "new_line_content": "    compute_font(style, &element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": null,
          "new_api": "ze_values",
          "old_text": null,
          "new_text": "ze_values(style, &element, pseudo_element);\n\n    /",
          "old_line_content": "",
          "new_line_content": "    absolutize_values(style, &element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "defaulted_values",
          "old_text": null,
          "new_text": "defaulted_values(style, &element, pseudo_element);\n\n    /",
          "old_line_content": "",
          "new_line_content": "    compute_defaulted_values(style, &element, pseudo_element);",
          "content_same": false
        },
        {
          "line": 2556,
          "old_api": null,
          "new_api": "m_box_type_if_needed",
          "old_text": null,
          "new_text": "m_box_type_if_needed(style, element, pseudo_element);\n\n    r",
          "old_line_content": "",
          "new_line_content": "    transform_box_type_if_needed(style, element, pseudo_element);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2564,
          "old_api": "e))\n{\n}\n\nv",
          "new_api": null,
          "old_text": "e))\n{\n}\n\nv",
          "new_text": null,
          "old_line_content": "    : m_name(move(name))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "ew_child->m_name != m_name);\n    m_",
          "new_api": null,
          "old_text": "ew_child->m_name != m_name);\n    m_",
          "new_text": null,
          "old_line_content": "    VERIFY(new_child->m_name != m_name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": "_child));\n}\n\nbo",
          "new_api": null,
          "old_text": "_child));\n}\n\nbo",
          "new_text": null,
          "old_line_content": "    m_children.append(move(new_child));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": "as_cycles",
          "new_api": null,
          "old_text": "as_cycles())\n      ",
          "new_text": null,
          "old_line_content": "        if (child->has_cycles())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "empend",
          "new_api": null,
          "old_text": "matching_family_fonts.empend(\n                FontFaceKey {\n                    .family_name = MUST(FlyString::from_deprecated_fly_string(typeface.family())),\n                    .weight = static_cast<int>(typeface.weight()),\n                    .slope = typeface.slope(),\n                },\n                &typeface)",
          "new_text": null,
          "old_line_content": "            matching_family_fonts.empend(",
          "new_line_content": "            FontFaceKey {",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "build_rule_cache",
          "new_api": null,
          "old_text": "st<StyleComputer&>(*this).build_rule_cache();\n}\n\nNon",
          "new_text": null,
          "old_line_content": "    const_cast<StyleComputer&>(*this).build_rule_cache();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "slope",
          "new_api": null,
          "old_text": "typeface.slope()",
          "new_text": null,
          "old_line_content": "                    .slope = typeface.slope(),",
          "new_line_content": "            },",
          "content_same": false
        },
        {
          "line": 2602,
          "old_api": "eCache>();\n\n    s",
          "new_api": null,
          "old_text": "eCache>();\n\n    s",
          "new_text": null,
          "old_line_content": "    auto rule_cache = make<RuleCache>();",
          "new_line_content": "    size_t num_class_rules = 0;",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "quick_sort",
          "new_api": null,
          "old_text": "quick_sort(matching_family_fonts, [](auto const& a, auto const& b) {\n        return a.key.weight < b.key.weight;\n    })",
          "new_text": null,
          "old_line_content": "    quick_sort(matching_family_fonts, [](auto const& a, auto const& b) {",
          "new_line_content": "    });",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "end",
          "new_api": null,
          "old_text": "matching_family_fonts.end()",
          "new_text": null,
          "old_line_content": "    if (style_it != matching_family_fonts.end()) {",
          "new_line_content": "            return matching_font_candidate.key.slope != key.slope;",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "remove_all_matching",
          "new_api": null,
          "old_text": "matching_family_fonts.remove_all_matching([&](auto const& matching_font_candidate) {\n            return matching_font_candidate.key.slope != key.slope;\n        })",
          "new_text": null,
          "old_line_content": "        matching_family_fonts.remove_all_matching([&](auto const& matching_font_candidate) {",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "ectors",
          "new_api": null,
          "old_text": "ectors()) {\n    ",
          "new_text": null,
          "old_line_content": "            for (CSS::Selector const& selector : rule.selectors()) {",
          "new_line_content": "                    &rule,",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": "specificity",
          "new_api": null,
          "old_text": ".specificity()\n       ",
          "new_text": null,
          "old_line_content": "                    selector.specificity()",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "end",
          "new_api": null,
          "old_text": "matching_family_fonts.end()",
          "new_text": null,
          "old_line_content": "        for (; it != matching_family_fonts.end() && it->key.weight <= 500; ++it) {",
          "new_line_content": "                return found_font;",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "font_with_point_size",
          "new_api": null,
          "old_text": "it->font_with_point_size(font_size_in_pt)",
          "new_text": null,
          "old_line_content": "            if (auto found_font = it->font_with_point_size(font_size_in_pt))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": "compound_selectors",
          "new_api": null,
          "old_text": ".compound_selectors().last().simple_",
          "new_text": null,
          "old_line_content": "                for (auto const& simple_selector : selector.compound_selectors().last().simple_selectors) {",
          "new_line_content": "                        matching_rule.contains_pseudo_element = true;",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": "end",
          "new_api": null,
          "old_text": "matching_family_fonts.end()",
          "new_text": null,
          "old_line_content": "        for (; it != matching_family_fonts.end(); ++it) {",
          "new_line_content": "                return found_font;",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": "font_with_point_size",
          "new_api": null,
          "old_text": "it->font_with_point_size(font_size_in_pt)",
          "new_text": null,
          "old_line_content": "            if (auto found_font = it->font_with_point_size(font_size_in_pt))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": "ching_rule));",
          "new_api": null,
          "old_text": "ching_rule));\n     ",
          "new_text": null,
          "old_line_content": "                        rule_cache->rules_by_id.ensure(simple_selector.name()).append(move(matching_rule));",
          "new_line_content": "                        added_to_bucket = true;",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "find_matching_font_weight_ascending",
          "new_api": null,
          "old_text": "find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "new_text": null,
          "old_line_content": "        if (auto found_font = find_matching_font_weight_ascending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2642,
          "old_api": "ching_rule));",
          "new_api": null,
          "old_text": "ching_rule));\n     ",
          "new_text": null,
          "old_line_content": "                        rule_cache->rules_by_class.ensure(simple_selector.name()).append(move(matching_rule));",
          "new_line_content": "                        added_to_bucket = true;",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "find_matching_font_weight_descending",
          "new_api": null,
          "old_text": "find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false)",
          "new_text": null,
          "old_line_content": "        if (auto found_font = find_matching_font_weight_descending(matching_family_fonts, key.weight, font_size_in_pt, false))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "ching_rule));",
          "new_api": null,
          "old_text": "ching_rule));\n     ",
          "new_text": null,
          "old_line_content": "                        rule_cache->rules_by_tag_name.ensure(simple_selector.qualified_name().name.lowercase_name).append(move(matching_rule));",
          "new_line_content": "                        added_to_bucket = true;",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": "ching_rule));",
          "new_api": null,
          "old_text": "ching_rule));\n\n    ",
          "new_text": null,
          "old_line_content": "                    rule_cache->other_rules.append(move(matching_rule));",
          "new_line_content": "                ++selector_index;",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": "to_font_weight",
          "new_api": null,
          "old_text": "font_weight.to_font_weight()",
          "new_text": null,
          "old_line_content": "    auto weight = font_weight.to_font_weight();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": "keyframes",
          "new_api": null,
          "old_text": "r_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {\n            auto keyframe_set = make<AnimationKeyFrameSet>();\n            AnimationKeyFrameSet::ResolvedKeyFrame resolved_keyframe;\n\n            // Forwards pass, resolve all the user-specified keyframe properties.\n            for (auto const& keyframe : rule.keyframes()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                auto current_keyframe = resolved_keyframe;\n                auto& keyframe_style = static_cast<PropertyOwningCSSStyleDeclaration const&>(*keyframe_rule);\n                for (auto& property : keyframe_style.properties())\n                    current_keyframe.resolved_properties[to_underlying(property.property_id)] = property.value;\n\n                resolved_keyframe = move(current_keyframe);\n                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);\n            }\n\n            // If there is no 'from' keyframe, make a synthetic one.\n            auto made_a_synthetic_from_keyframe = false;\n            if (!keyframe_set->keyframes_by_key.find(0)) {\n                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());\n                made_a_synthetic_from_keyframe = true;\n            }\n\n            // Backwards pass, resolve all the implied properties, go read <https://drafts.csswg.org/css-animations-2/#keyframe-processing> to see why.\n            auto first = true;\n            for (auto const& keyframe : rule.keyframes().in_reverse()) {\n                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);\n                auto keyframe_rule = keyframe->style();\n\n                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))\n                    continue;\n\n                // The last keyframe is already fully resolved.\n                if (first) {\n                    first = false;\n                    continue;\n                }\n\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(key);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n\n                    if (key == 0)\n                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                    else\n                        current_property = *it;\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if (made_a_synthetic_from_keyframe && !first) {\n                auto next_keyframe = resolved_keyframe;\n                auto& current_keyframes = *keyframe_set->keyframes_by_key.find(0);\n\n                for (auto it = next_keyframe.resolved_properties.begin(); !it.is_end(); ++it) {\n                    auto& current_property = current_keyframes.resolved_properties[it.index()];\n                    if (!current_property.has<Empty>() || it->has<Empty>())\n                        continue;\n                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();\n                }\n\n                resolved_keyframe = current_keyframes;\n            }\n\n            if constexpr (LIBWEB_CSS_DEBUG) {\n                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());\n                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {\n                    size_t props = 0;\n                    for (auto& entry : it->resolved_properties)\n                        props += !entry.has<Empty>();\n                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);\n                }\n            }\n\n            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));\n        });\n      ",
          "new_text": null,
          "old_line_content": "        sheet.for_each_effective_keyframes_at_rule([&](CSSKeyframesRule const& rule) {",
          "new_line_content": "            AnimationKeyFrameSet::ResolvedKeyFrame resolved_keyframe;",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": "mationKeyFrameSet>();",
          "new_api": null,
          "old_text": "mationKeyFrameSet>();\n      ",
          "new_text": null,
          "old_line_content": "            auto keyframe_set = make<AnimationKeyFrameSet>();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "computed_css_values",
          "new_api": null,
          "old_text": "parent_element->computed_css_values()",
          "new_text": null,
          "old_line_content": "    if (parent_element && parent_element->computed_css_values())",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "value",
          "new_api": null,
          "old_text": "->key().value() * Anima",
          "new_text": null,
          "old_line_content": "                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "new_api": null,
          "old_text": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))\n      ",
          "new_text": null,
          "old_line_content": "                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "properties",
          "new_api": null,
          "old_text": "_style.properties())\n      ",
          "new_text": null,
          "old_line_content": "                for (auto& property : keyframe_style.properties())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "parent_or_root_element_line_height",
          "new_api": null,
          "old_text": "parent_or_root_element_line_height(parent_element, {})",
          "new_text": null,
          "old_line_content": "            auto parent_line_height = parent_or_root_element_line_height(parent_element, {});",
          "new_line_content": "                Length::FontMetrics font_metrics { font_size_in_px, font_pixel_metrics, parent_line_height };",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "rent_keyframe);",
          "new_api": null,
          "old_text": "rent_keyframe);\n      ",
          "new_text": null,
          "old_line_content": "                resolved_keyframe = move(current_keyframe);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "insert",
          "new_api": null,
          "old_text": "_set->keyframes_by_key.insert(key, resolved_keyframe);\n      ",
          "new_text": null,
          "old_line_content": "                keyframe_set->keyframes_by_key.insert(key, resolved_keyframe);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "                return length.to_px(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": "find",
          "new_api": null,
          "old_text": "_set->keyframes_by_key.find(0)) {\n    ",
          "new_text": null,
          "old_line_content": "            if (!keyframe_set->keyframes_by_key.find(0)) {",
          "new_line_content": "                made_a_synthetic_from_keyframe = true;",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": "nKeyFrameSet::ResolvedKeyFrame());",
          "new_api": null,
          "old_text": "nKeyFrameSet::ResolvedKeyFrame());\n     ",
          "new_text": null,
          "old_line_content": "                keyframe_set->keyframes_by_key.insert(0, AnimationKeyFrameSet::ResolvedKeyFrame());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "is_identifier",
          "new_api": null,
          "old_text": "font_size.is_identifier()",
          "new_text": null,
          "old_line_content": "    if (font_size.is_identifier()) {",
          "new_line_content": "        AK::HashMap<Web::CSS::ValueID, float> absolute_size_mapping = {",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": "value",
          "new_api": null,
          "old_text": "->key().value() * Anima",
          "new_text": null,
          "old_line_content": "                auto key = static_cast<u64>(keyframe->key().value() * AnimationKeyFrameKeyScaleFactor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "new_api": null,
          "old_text": "rtyOwningCSSStyleDeclaration>(*keyframe_rule))\n      ",
          "new_text": null,
          "old_line_content": "                if (!is<PropertyOwningCSSStyleDeclaration>(*keyframe_rule))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "id",
          "new_api": null,
          "old_text": "static_cast<IdentifierStyleValue const&>(font_size).id()",
          "new_text": null,
          "old_line_content": "        auto const identifier = static_cast<IdentifierStyleValue const&>(font_size).id();",
          "new_line_content": "        // https://w3c.github.io/csswg-drafts/css-fonts/#valdef-font-size-relative-size",
          "content_same": false
        },
        {
          "line": 2709,
          "old_api": "()];",
          "new_api": null,
          "old_text": "()];\n     ",
          "new_text": null,
          "old_line_content": "                    auto& current_property = current_keyframes.resolved_properties[it.index()];",
          "new_line_content": "                        continue;",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": "computed_css_values",
          "new_api": null,
          "old_text": "parent_element->computed_css_values()",
          "new_text": null,
          "old_line_content": "            if (parent_element && parent_element->computed_css_values()) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": "pixel_metrics",
          "new_api": null,
          "old_text": "parent_element->computed_css_values()->computed_font().pixel_metrics()",
          "new_text": null,
          "old_line_content": "                font_size_in_px = parent_element->computed_css_values()->computed_font().pixel_metrics().size;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "Empty>())",
          "new_api": null,
          "old_text": "Empty>())\n      ",
          "new_text": null,
          "old_line_content": "                    if (!current_property.has<Empty>() || it->has<Empty>())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": "get",
          "new_api": null,
          "old_text": "absolute_size_mapping.get(identifier).value_or(1.0)",
          "new_text": null,
          "old_line_content": "        auto const multiplier = absolute_size_mapping.get(identifier).value_or(1.0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "new_api": null,
          "old_text": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();\n      ",
          "new_text": null,
          "old_line_content": "                        current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "new_line_content": "                        current_property = *it;",
          "content_same": false
        },
        {
          "line": 2207,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "            .viewport_rect = viewport_rect(),",
          "new_line_content": "            .root_font_metrics = m_root_element_font_metrics,",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": "()];",
          "new_api": null,
          "old_text": "()];\n     ",
          "new_text": null,
          "old_line_content": "                    auto& current_property = current_keyframes.resolved_properties[it.index()];",
          "new_line_content": "                        continue;",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "new_api": null,
          "old_text": "nKeyFrameSet::ResolvedKeyFrame::UseInitial();\n      ",
          "new_text": null,
          "old_line_content": "                    current_property = AnimationKeyFrameSet::ResolvedKeyFrame::UseInitial();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": "is_calculated",
          "new_api": null,
          "old_text": "font_size.is_calculated()",
          "new_text": null,
          "old_line_content": "        } else if (font_size.is_calculated()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "maybe_length.has_value()",
          "new_text": null,
          "old_line_content": "        if (maybe_length.has_value()) {",
          "new_line_content": "            if (px != 0)",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": "value",
          "new_api": null,
          "old_text": "maybe_length.value().to_px(length_resolution_context).to_int()",
          "new_text": null,
          "old_line_content": "            auto px = maybe_length.value().to_px(length_resolution_context).to_int();",
          "new_line_content": "                font_size_in_px = px;",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": "size",
          "new_api": null,
          "old_text": "_set->keyframes_by_key.size());\n     ",
          "new_text": null,
          "old_line_content": "                dbgln(\"Resolved keyframe set '{}' into {} keyframes:\", rule.name(), keyframe_set->keyframes_by_key.size());",
          "new_line_content": "                    size_t props = 0;",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": "end",
          "new_api": null,
          "old_text": "_set->keyframes_by_key.end(); ++it) ",
          "new_text": null,
          "old_line_content": "                for (auto it = keyframe_set->keyframes_by_key.begin(); it != keyframe_set->keyframes_by_key.end(); ++it) {",
          "new_line_content": "                    for (auto& entry : it->resolved_properties)",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": "to_font_slope",
          "new_api": null,
          "old_text": "font_style.to_font_slope()",
          "new_text": null,
          "old_line_content": "    auto slope = font_style.to_font_slope();",
          "new_line_content": "    // FIXME: Implement the full font-matching algorithm: https://www.w3.org/TR/css-fonts-4/#font-matching-algorithm",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": "s<Empty>();",
          "new_api": null,
          "old_text": "s<Empty>();\n      ",
          "new_text": null,
          "old_line_content": "                        props += !entry.has<Empty>();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": ", props)",
          "new_api": null,
          "old_text": ", props)",
          "new_text": null,
          "old_line_content": "                    dbgln(\"    - keyframe {}: {} properties\", it.key(), props);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "frame_set));",
          "new_api": null,
          "old_text": "frame_set));\n     ",
          "new_text": null,
          "old_line_content": "            rule_cache->rules_by_animation_keyframes.set(rule.name(), move(keyframe_set));",
          "new_line_content": "        ++style_sheet_index;",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "size",
          "new_api": null,
          "old_text": "he->other_rules.size());\n     ",
          "new_text": null,
          "old_line_content": "        dbgln(\"        Other: {}\", rule_cache->other_rules.size());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": "size",
          "new_api": null,
          "old_text": "he->other_rules.size());\n    }",
          "new_text": null,
          "old_line_content": "        dbgln(\"        Total: {}\", num_class_rules + num_id_rules + num_tag_name_rules + rule_cache->other_rules.size());",
          "new_line_content": "    return rule_cache;",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": "font_with_point_size",
          "new_api": null,
          "old_text": "loader.font_with_point_size(font_size_in_pt)",
          "new_text": null,
          "old_line_content": "            if (auto found_font = loader.font_with_point_size(font_size_in_pt))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": "get",
          "new_api": null,
          "old_text": "m_font_cache.get(font_selector)",
          "new_text": null,
          "old_line_content": "        if (auto found_font = m_font_cache.get(font_selector))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "le_source.has_value()) {\n    ",
          "new_text": null,
          "old_line_content": "        if (auto user_style_source = document().page()->user_style(); user_style_source.has_value()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": "value",
          "new_api": null,
          "old_text": "le_source.value()));\n    ",
          "new_text": null,
          "old_line_content": "            m_user_style_sheet = JS::make_handle(parse_css_stylesheet(CSS::Parser::ParsingContext(document()), user_style_source.value()));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "font_matching_algorithm",
          "new_api": null,
          "old_text": "font_matching_algorithm(key, font_size_in_pt)",
          "new_text": null,
          "old_line_content": "        if (auto found_font = font_matching_algorithm(key, font_size_in_pt))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "to_deprecated_string",
          "new_api": null,
          "old_text": "family.to_deprecated_string()",
          "new_text": null,
          "old_line_content": "        if (auto found_font = Gfx::FontDatabase::the().get(family.to_deprecated_string(), font_size_in_pt, weight, width, slope, Gfx::Font::AllowInexactSizeMatch::Yes))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "e_cache_for_cascade_origin",
          "new_api": null,
          "old_text": "e_cache_for_cascade_origin(CascadeOrigin::User);\n    m_",
          "new_text": null,
          "old_line_content": "    m_user_rule_cache = make_rule_cache_for_cascade_origin(CascadeOrigin::User);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "e_cache_for_cascade_origin",
          "new_api": null,
          "old_text": "e_cache_for_cascade_origin(CascadeOrigin::UserAgent);\n}\n\nvoi",
          "new_text": null,
          "old_line_content": "    m_user_agent_rule_cache = make_rule_cache_for_cascade_origin(CascadeOrigin::UserAgent);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "browsing_context",
          "new_api": null,
          "old_text": "().browsing_context())\n      ",
          "new_text": null,
          "old_line_content": "    if (auto const* browsing_context = document().browsing_context())",
          "new_line_content": "    return {};",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "_context->viewport_rect();\n    re",
          "new_text": null,
          "old_line_content": "        return browsing_context->viewport_rect();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "invalidate_style",
          "new_api": null,
          "old_text": "().invalidate_style();\n}\n\nvoi",
          "new_text": null,
          "old_line_content": "    document().invalidate_style();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": "rules",
          "new_api": null,
          "old_text": "ast<CSSStyleSheet const&>(sheet).rules()) {\n    ",
          "new_text": null,
          "old_line_content": "    for (auto const& rule : static_cast<CSSStyleSheet const&>(sheet).rules()) {",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 2809,
          "old_api": "font_face",
          "new_api": null,
          "old_text": "ast<CSSFontFaceRule const&>(*rule).font_face();\n      ",
          "new_text": null,
          "old_line_content": "        auto const& font_face = static_cast<CSSFontFaceRule const&>(*rule).font_face();",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "generic_font_name",
          "new_api": null,
          "old_text": "Platform::FontPlugin::the().generic_font_name(generic_font)",
          "new_text": null,
          "old_line_content": "        return find_font(String::from_deprecated_string(Platform::FontPlugin::the().generic_font_name(generic_font)).release_value_but_fixme_should_propagate_errors());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": "sources",
          "new_api": null,
          "old_text": "e.sources().is_empty())\n      ",
          "new_text": null,
          "old_line_content": "        if (font_face.sources().is_empty())",
          "new_line_content": "        FontFaceKey key {",
          "content_same": false
        },
        {
          "line": 2814,
          "old_api": "weight",
          "new_api": null,
          "old_text": "e.weight().value_or(0),\n      ",
          "new_text": null,
          "old_line_content": "            .weight = font_face.weight().value_or(0),",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "is_value_list",
          "new_api": null,
          "old_text": "font_family.is_value_list()",
          "new_text": null,
          "old_line_content": "    if (font_family.is_value_list()) {",
          "new_line_content": "        for (auto const& family : family_list) {",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": "contains",
          "new_api": null,
          "old_text": "_fonts.contains(key))\n      ",
          "new_text": null,
          "old_line_content": "        if (m_loaded_fonts.contains(key))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": "is_string",
          "new_api": null,
          "old_text": "family->is_string()",
          "new_text": null,
          "old_line_content": "            } else if (family->is_string()) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "family->to_string()",
          "new_text": null,
          "old_line_content": "                found_font = find_font(family->to_string());",
          "new_line_content": "            if (found_font)",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": "to_deprecated_string",
          "new_api": null,
          "old_text": "rl.to_deprecated_string()));\n    ",
          "new_text": null,
          "old_line_content": "            urls.append(m_document->parse_url(source.url.to_deprecated_string()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "empty",
          "new_api": null,
          "old_text": "empty())\n      ",
          "new_text": null,
          "old_line_content": "        if (urls.is_empty())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "is_string",
          "new_api": null,
          "old_text": "font_family.is_string()",
          "new_text": null,
          "old_line_content": "    } else if (font_family.is_string()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "font_family.to_string()",
          "new_text": null,
          "old_line_content": "        found_font = find_font(font_family.to_string());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "s));",
          "new_api": null,
          "old_text": "s));\n     ",
          "new_text": null,
          "old_line_content": "        auto loader = make<FontLoader>(const_cast<StyleComputer&>(*this), font_face.font_family(), move(urls));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": "der));\n    }",
          "new_api": null,
          "old_text": "der));\n    }",
          "new_text": null,
          "old_line_content": "        const_cast<StyleComputer&>(*this).m_loaded_fonts.set(key, move(loader));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": "with_size",
          "new_api": null,
          "old_text": "found_font->with_size(font_size_in_pt)",
          "new_text": null,
          "old_line_content": "            if (auto scaled_fallback_font = found_font->with_size(font_size_in_pt))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": "set",
          "new_api": null,
          "old_text": "m_font_cache.set(font_selector, *found_font)",
          "new_text": null,
          "old_line_content": "    m_font_cache.set(font_selector, *found_font);",
          "new_line_content": "    return found_font;",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": "compute_defaulted_property_value",
          "new_api": null,
          "old_text": "compute_defaulted_property_value(style, element, CSS::PropertyID::FontWeight, pseudo_element)",
          "new_text": null,
          "old_line_content": "    compute_defaulted_property_value(style, element, CSS::PropertyID::FontWeight, pseudo_element);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": "property",
          "new_api": null,
          "old_text": "style.property(CSS::PropertyID::FontWeight)",
          "new_text": null,
          "old_line_content": "    auto font_weight = style.property(CSS::PropertyID::FontWeight);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "pixel_size",
          "new_api": null,
          "old_text": "found_font->pixel_size()",
          "new_text": null,
          "old_line_content": "    style.set_property(CSS::PropertyID::FontSize, LengthStyleValue::create(CSS::Length::make_px(found_font->pixel_size())), nullptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "is<HTML::HTMLHtmlElement>(*element)",
          "new_api": null,
          "old_text": "is<HTML::HTMLHtmlElement>(*element)",
          "new_text": null,
          "old_line_content": "    if (element && is<HTML::HTMLHtmlElement>(*element)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": "calculate_root_element_font_metrics",
          "new_api": null,
          "old_text": "calculate_root_element_font_metrics(style)",
          "new_text": null,
          "old_line_content": "        const_cast<StyleComputer&>(*this).m_root_element_font_metrics = calculate_root_element_font_metrics(style);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": "StyleProperties::font_fallback(false, false)",
          "new_api": null,
          "old_text": "StyleProperties::font_fallback(false, false)",
          "new_text": null,
          "old_line_content": "    return StyleProperties::font_fallback(false, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": "element_to_inherit_style_from",
          "new_api": null,
          "old_text": "element_to_inherit_style_from(element, pseudo_element)",
          "new_text": null,
          "old_line_content": "    auto* parent_element = element_to_inherit_style_from(element, pseudo_element);",
          "new_line_content": "        return m_root_element_font_metrics.line_height;",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": "computed_css_values",
          "new_api": null,
          "old_text": "parent_element->computed_css_values()",
          "new_text": null,
          "old_line_content": "    auto const* computed_values = parent_element->computed_css_values();",
          "new_line_content": "        return m_root_element_font_metrics.line_height;",
          "content_same": false
        },
        {
          "line": 2376,
          "old_api": "pixel_metrics",
          "new_api": null,
          "old_text": "computed_values->computed_font().pixel_metrics()",
          "new_text": null,
          "old_line_content": "    auto parent_font_pixel_metrics = computed_values->computed_font().pixel_metrics();",
          "new_line_content": "    // FIXME: Can the parent font size be non-absolute here?",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": "absolute_length_to_px",
          "new_api": null,
          "old_text": "parent_font_size.absolute_length_to_px()",
          "new_text": null,
          "old_line_content": "    auto parent_font_size_value = parent_font_size.is_absolute() ? parent_font_size.absolute_length_to_px() : m_root_element_font_metrics.font_size;",
          "new_line_content": "    Length::FontMetrics parent_font_metrics { parent_font_size_value, parent_font_pixel_metrics, parent_parent_line_height };",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "    return computed_values->line_height(viewport_rect(), parent_font_metrics, m_root_element_font_metrics);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": "computed_font",
          "new_api": null,
          "old_text": "style.computed_font().pixel_metrics()",
          "new_text": null,
          "old_line_content": "    auto font_pixel_metrics = style.computed_font().pixel_metrics();",
          "new_line_content": "    Length::FontMetrics font_metrics { m_root_element_font_metrics.font_size, font_pixel_metrics, parent_or_root_line_height };",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "    auto font_size = style.property(CSS::PropertyID::FontSize)->as_length().length().to_px(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "percentage",
          "new_api": null,
          "old_text": "LengthStyleValue::create(\n            Length::make_px(font_size * static_cast<double>((*line_height_value_slot)->as_percentage().percentage().as_fraction())))",
          "new_text": null,
          "old_line_content": "        *line_height_value_slot = LengthStyleValue::create(",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "percentage",
          "new_api": null,
          "old_text": "*line_height_value_slot)->as_percentage().percentage().as_fraction()",
          "new_text": null,
          "old_line_content": "            Length::make_px(font_size * static_cast<double>((*line_height_value_slot)->as_percentage().percentage().as_fraction())));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2406,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "    auto line_height = style.line_height(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": "is_length",
          "new_api": null,
          "old_text": "*line_height_value_slot)->is_length()",
          "new_text": null,
          "old_line_content": "    if (line_height_value_slot.has_value() && (*line_height_value_slot)->is_length())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": "viewport_rect",
          "new_api": null,
          "old_text": "viewport_rect()",
          "new_text": null,
          "old_line_content": "        value_slot->style = value_slot->style->absolutized(viewport_rect(), font_metrics, m_root_element_font_metrics);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "float_",
          "new_api": null,
          "old_text": "yle.float_() !",
          "new_text": null,
          "old_line_content": "    if (style.position() == CSS::Position::Absolute || style.position() == CSS::Position::Fixed || style.float_() != CSS::Float::None)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "parent_element",
          "new_api": null,
          "old_text": "ent.parent_element();\n\n ",
          "new_text": null,
          "old_line_content": "    auto const* parent = pseudo_element.has_value() ? &element : element.parent_element();",
          "new_line_content": "    // A parent with a grid or flex display value blockifies the boxs display type. [CSS-GRID-1] [CSS-FLEXBOX-1]",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "computed_css_values",
          "new_api": null,
          "old_text": "->computed_css_values()->display();\n    ",
          "new_text": null,
          "old_line_content": "        auto const& parent_display = parent->computed_css_values()->display();",
          "new_line_content": "            return BoxTypeTransformation::Blockify;",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "is_flex_inside",
          "new_api": null,
          "old_text": "_display.is_flex_inside())\n    ",
          "new_text": null,
          "old_line_content": "        if (parent_display.is_grid_inside() || parent_display.is_flex_inside())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": "splay",
          "new_api": null,
          "old_text": "splay();\n    if",
          "new_text": null,
          "old_line_content": "    auto display = style.display();",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "is_contents",
          "new_api": null,
          "old_text": "is_contents())\n      ",
          "new_text": null,
          "old_line_content": "    if (display.is_none() || display.is_contents())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": "_box_type_transformation",
          "new_api": null,
          "old_text": "_box_type_transformation(style, element, pseudo_element)) {\n    ",
          "new_text": null,
          "old_line_content": "    switch (required_box_type_transformation(style, element, pseudo_element)) {",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": "is_block_outside",
          "new_api": null,
          "old_text": "is_block_outside())\n      ",
          "new_text": null,
          "old_line_content": "        if (display.is_block_outside())",
          "new_line_content": "        // If a layout-internal box is blockified, its inner display type converts to flow so that it becomes a block container.",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": "is_internal",
          "new_api": null,
          "old_text": "is_internal()) {\n    ",
          "new_text": null,
          "old_line_content": "        if (display.is_internal()) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "is_outside_and_inside",
          "new_api": null,
          "old_text": "is_outside_and_inside());\n\n    ",
          "new_text": null,
          "old_line_content": "            VERIFY(display.is_outside_and_inside());",
          "new_line_content": "            // For legacy reasons, if an inline block box (inline flow-root) is blockified, it becomes a block box (losing its flow-root nature).",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "is_inline_block",
          "new_api": null,
          "old_text": "is_inline_block()) {\n    ",
          "new_text": null,
          "old_line_content": "            if (display.is_inline_block()) {",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": "list_item",
          "new_api": null,
          "old_text": "list_item() };\n    ",
          "new_text": null,
          "old_line_content": "                new_display = CSS::Display { CSS::Display::Outside::Block, display.inside(), display.list_item() };",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "is_inline_outside",
          "new_api": null,
          "old_text": "is_inline_outside()) {\n    ",
          "new_text": null,
          "old_line_content": "        if (display.is_inline_outside()) {",
          "new_line_content": "            //        so that no block-level descendants break up the inline formatting context in which it participates.",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "is_flow_inside",
          "new_api": null,
          "old_text": "is_flow_inside()) {\n    ",
          "new_text": null,
          "old_line_content": "            if (display.is_flow_inside()) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "IXME: Inlinify inline box children recursively\");",
          "new_api": null,
          "old_text": "IXME: Inlinify inline box children recursively\");\n      ",
          "new_text": null,
          "old_line_content": "                dbgln(\"FIXME: Inlinify inline box children recursively\");",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "is_internal",
          "new_api": null,
          "old_text": "is_internal()) {\n    ",
          "new_text": null,
          "old_line_content": "        if (display.is_internal()) {",
          "new_line_content": "            // to be wrapped in an appropriately-typed anonymous inline-level box.)",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "is_outside_and_inside",
          "new_api": null,
          "old_text": "is_outside_and_inside());\n\n    ",
          "new_text": null,
          "old_line_content": "            VERIFY(display.is_outside_and_inside());",
          "new_line_content": "            // If a block box (block flow) is inlinified, its inner display type is set to flow-root so that it remains a block container.",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": "is_flow_inside",
          "new_api": null,
          "old_text": "is_flow_inside()) {\n    ",
          "new_text": null,
          "old_line_content": "            if (display.is_block_outside() && display.is_flow_inside()) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": "list_item",
          "new_api": null,
          "old_text": "list_item() };\n    ",
          "new_text": null,
          "old_line_content": "                new_display = CSS::Display { CSS::Display::Outside::Inline, CSS::Display::Inside::FlowRoot, display.list_item() };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "list_item",
          "new_api": null,
          "old_text": "list_item() };\n    ",
          "new_text": null,
          "old_line_content": "            new_display = CSS::Display { CSS::Display::Outside::Inline, display.inside(), display.list_item() };",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": "operty_source_declaration",
          "new_api": null,
          "old_text": "operty_source_declaration(CSS::PropertyID::Display));\n}\n\nNo",
          "new_text": null,
          "old_line_content": "        style.set_property(CSS::PropertyID::Display, DisplayStyleValue::create(new_display), style.property_source_declaration(CSS::PropertyID::Display));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": "height",
          "new_api": null,
          "old_text": "_rect().height())), null",
          "new_text": null,
          "old_line_content": "    style->set_property(CSS::PropertyID::Height, CSS::LengthStyleValue::create(CSS::Length::make_px(viewport_rect().height())), nullptr);",
          "new_line_content": "    return style;",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "play::from_short(CSS::Display::Short::Block)), nullp",
          "new_api": null,
          "old_text": "play::from_short(CSS::Display::Short::Block)), nullp",
          "new_text": null,
          "old_line_content": "    style->set_property(CSS::PropertyID::Display, CSS::DisplayStyleValue::create(CSS::Display::from_short(CSS::Display::Short::Block)), nullptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": "udo_element), Comput",
          "new_api": null,
          "old_text": "udo_element), Comput",
          "new_text": null,
          "old_line_content": "    auto style = TRY(compute_style_impl(element, move(pseudo_element), ComputeStyleMode::Normal));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "lease_nonnull",
          "new_api": null,
          "old_text": "lease_nonnull();\n}\n\nErr",
          "new_text": null,
          "old_line_content": "    return style.release_nonnull();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": "udo_element), Comput",
          "new_api": null,
          "old_text": "udo_element), Comput",
          "new_text": null,
          "old_line_content": "    return compute_style_impl(element, move(pseudo_element), ComputeStyleMode::CreatePseudoElementStyleIfNeeded);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "perties::create();\n    //",
          "new_api": null,
          "old_text": "perties::create();\n    //",
          "new_text": null,
          "old_line_content": "    auto style = StyleProperties::create();",
          "new_line_content": "    bool did_match_any_pseudo_element_rules = false;",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "cascaded_values",
          "new_api": null,
          "old_text": "cascaded_values(style, element, pseudo_element, did_match_any_pseudo_element_rules, mode));\n\n    ",
          "new_text": null,
          "old_line_content": "    TRY(compute_cascaded_values(style, element, pseudo_element, did_match_any_pseudo_element_rules, mode));",
          "new_line_content": "    if (mode == ComputeStyleMode::CreatePseudoElementStyleIfNeeded && !did_match_any_pseudo_element_rules)",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "font",
          "new_api": null,
          "old_text": "font(style, &element, pseudo_element);\n\n    /",
          "new_text": null,
          "old_line_content": "    compute_font(style, &element, pseudo_element);",
          "new_line_content": "    // 3. Absolutize values, turning font/viewport relative lengths into absolute lengths",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": "ze_values",
          "new_api": null,
          "old_text": "ze_values(style, &element, pseudo_element);\n\n    /",
          "new_text": null,
          "old_line_content": "    absolutize_values(style, &element, pseudo_element);",
          "new_line_content": "    // 4. Default the values, applying inheritance and 'initial' as needed",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": "defaulted_values",
          "new_api": null,
          "old_text": "defaulted_values(style, &element, pseudo_element);\n\n    /",
          "new_text": null,
          "old_line_content": "    compute_defaulted_values(style, &element, pseudo_element);",
          "new_line_content": "    // 5. Run automatic box type transformations",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "m_box_type_if_needed",
          "new_api": null,
          "old_text": "m_box_type_if_needed(style, element, pseudo_element);\n\n    r",
          "new_text": null,
          "old_line_content": "    transform_box_type_if_needed(style, element, pseudo_element);",
          "new_line_content": "    return style;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 75,
      "total_additions": 138,
      "total_deletions": 139,
      "total_api_changes": 352
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 352,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          2088,
          2087
        ]
      }
    },
    "api_calls_before": 1520,
    "api_calls_after": 1519,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 10,
      "total_diff_lines": 30
    }
  }
}
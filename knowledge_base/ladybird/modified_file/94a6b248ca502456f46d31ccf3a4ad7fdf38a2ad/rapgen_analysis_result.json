{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/94a6b248ca502456f46d31ccf3a4ad7fdf38a2ad",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/94a6b248ca502456f46d31ccf3a4ad7fdf38a2ad/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/94a6b248ca502456f46d31ccf3a4ad7fdf38a2ad/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/94a6b248ca502456f46d31ccf3a4ad7fdf38a2ad/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 671,
          "old_api": "block_size",
          "new_api": "size",
          "old_text": "fs().block_size()",
          "new_text": "size()",
          "old_line_content": "    u64 block_size = fs().block_size();",
          "new_line_content": "    u64 old_size = size();",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "dbgprintf",
          "new_api": "ceil_div",
          "old_text": "dbgprintf(\"Ext2FSInode::resize(): blocks needed before (size was %Q): %d\\n\", old_size, blocks_needed_before)",
          "new_text": "ceil_div(new_size, block_size)",
          "old_line_content": "    dbgprintf(\"Ext2FSInode::resize(): blocks needed before (size was %Q): %d\\n\", old_size, blocks_needed_before);",
          "new_line_content": "    int blocks_needed_after = ceil_div(new_size, block_size);",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "move",
          "new_api": "block_list_for_inode",
          "old_text": "move(new_blocks)",
          "new_text": "fs().block_list_for_inode(m_raw_inode)",
          "old_line_content": "        block_list.append(move(new_blocks));",
          "new_line_content": "    auto block_list = fs().block_list_for_inode(m_raw_inode);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "size",
          "new_api": "move",
          "old_text": "block_list.size()",
          "new_text": "move(new_blocks)",
          "old_line_content": "        dbgprintf(\"Ext2FSInode::resize(): Shrinking. Old block list is %d entries:\\n\", block_list.size());",
          "new_line_content": "        block_list.append(move(new_blocks));",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "size",
          "new_api": "dbgprintf",
          "old_text": "block_list.size()",
          "new_text": "dbgprintf(\"    # %u\\n\", block_index)",
          "old_line_content": "        while (block_list.size() != blocks_needed_after) {",
          "new_line_content": "            dbgprintf(\"    # %u\\n\", block_index);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "set_metadata_dirty",
          "new_api": "KResult",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "KResult(-EIO)",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "        return KResult(-EIO);",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "fs",
          "new_api": "ASSERT",
          "old_text": "fs()",
          "new_text": "ASSERT(count >= 0)",
          "old_line_content": "    Locker fs_locker(fs().m_lock);",
          "new_line_content": "    ASSERT(count >= 0);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "characters",
          "new_api": "is_symlink",
          "old_text": "String((const char*)data, count).characters()",
          "new_text": "is_symlink()",
          "old_line_content": "            dbgprintf(\"Ext2FSInode: write_bytes poking into i_block array for inline symlink '%s' (%u bytes)\\n\", String((const char*)data, count).characters(), count);",
          "new_line_content": "    if (is_symlink()) {",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "set_metadata_dirty",
          "new_api": "memcpy",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "memcpy(((u8*)m_raw_inode.i_block) + offset, data, (size_t)count)",
          "old_line_content": "            set_metadata_dirty(true);",
          "new_line_content": "            memcpy(((u8*)m_raw_inode.i_block) + offset, data, (size_t)count);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "resize",
          "new_api": "size",
          "old_text": "resize(new_size)",
          "new_text": "size()",
          "old_line_content": "    auto resize_result = resize(new_size);",
          "new_line_content": "    u64 old_size = size();",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "is_error",
          "new_api": "size",
          "old_text": "resize_result.is_error()",
          "new_text": "size()",
          "old_line_content": "    if (resize_result.is_error())",
          "new_line_content": "    u64 new_size = max(static_cast<u64>(offset) + count, (u64)size());",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "ByteBuffer::create_uninitialized(block_size)",
          "new_api": "index",
          "old_text": "ByteBuffer::create_uninitialized(block_size)",
          "new_text": "index()",
          "old_line_content": "    auto buffer_block = ByteBuffer::create_uninitialized(block_size);",
          "new_line_content": "    dbgprintf(\"Ext2FSInode::write_bytes: Writing %u bytes %d bytes into inode %u:%u from %p\\n\", count, offset, fsid(), index(), data);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "min",
          "new_api": "ByteBuffer::create_uninitialized(block_size)",
          "old_text": "min(block_size - offset_into_block, remaining_count)",
          "new_text": "ByteBuffer::create_uninitialized(block_size)",
          "old_line_content": "        int num_bytes_to_copy = min(block_size - offset_into_block, remaining_count);",
          "new_line_content": "    auto buffer_block = ByteBuffer::create_uninitialized(block_size);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "kprintf",
          "new_api": "ByteBuffer::create_uninitialized(block_size)",
          "old_text": "kprintf(\"Ext2FSInode::write_bytes: read_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi)",
          "new_text": "ByteBuffer::create_uninitialized(block_size)",
          "old_line_content": "                kprintf(\"Ext2FSInode::write_bytes: read_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi);",
          "new_line_content": "            block = ByteBuffer::create_uninitialized(block_size);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "dbgprintf",
          "new_api": "data",
          "old_text": "dbgprintf(\"Ext2FSInode::write_bytes: writing block %u (offset_into_block: %u)\\n\", m_block_list[bi], offset_into_block)",
          "new_text": "block.data()",
          "old_line_content": "        dbgprintf(\"Ext2FSInode::write_bytes: writing block %u (offset_into_block: %u)\\n\", m_block_list[bi], offset_into_block);",
          "new_line_content": "            memset(block.data() + padding_start, 0, padding_bytes);",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "ASSERT_NOT_REACHED",
          "new_api": "data",
          "old_text": "ASSERT_NOT_REACHED()",
          "new_text": "block.data()",
          "old_line_content": "            ASSERT_NOT_REACHED();",
          "new_line_content": "        bool success = fs().write_block(m_block_list[bi], block.data());",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "index",
          "new_api": "is_directory",
          "old_text": "index()",
          "new_text": "is_directory()",
          "old_line_content": "    kprintf(\"Ext2Inode::traverse_as_directory: inode=%u:\\n\", index());",
          "new_line_content": "    ASSERT(is_directory());",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "read_entire",
          "new_api": "index",
          "old_text": "read_entire()",
          "new_text": "index()",
          "old_line_content": "    auto buffer = read_entire();",
          "new_line_content": "    kprintf(\"Ext2Inode::traverse_as_directory: inode=%u:\\n\", index());",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "end_pointer",
          "new_api": "ASSERT",
          "old_text": "buffer.end_pointer()",
          "new_text": "ASSERT(buffer)",
          "old_line_content": "    while (entry < buffer.end_pointer()) {",
          "new_line_content": "    ASSERT(buffer);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "characters",
          "new_api": "end_pointer",
          "old_text": "String(entry->name, entry->name_len).characters()",
          "new_text": "buffer.end_pointer()",
          "old_line_content": "            kprintf(\"Ext2Inode::traverse_as_directory: %u, name_len: %u, rec_len: %u, file_type: %u, name: %s\\n\", entry->inode, entry->name_len, entry->rec_len, entry->file_type, String(entry->name, entry->name_len).characters());",
          "new_line_content": "    while (entry < buffer.end_pointer()) {",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "block_size",
          "new_api": "EXT2_DIR_REC_LEN",
          "old_text": "fs().block_size()",
          "new_text": "EXT2_DIR_REC_LEN(entry.name_length)",
          "old_line_content": "    auto block_size = fs().block_size();",
          "new_line_content": "        directory_size += EXT2_DIR_REC_LEN(entry.name_length);",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "ByteBuffer::create_uninitialized(occupied_size)",
          "new_api": "dbgprintf",
          "old_text": "ByteBuffer::create_uninitialized(occupied_size)",
          "new_text": "dbgprintf(\"Ext2FS: directory size: %u (occupied: %u)\\n\", directory_size, occupied_size)",
          "old_line_content": "    auto directory_data = ByteBuffer::create_uninitialized(occupied_size);",
          "new_line_content": "    dbgprintf(\"Ext2FS: directory size: %u (occupied: %u)\\n\", directory_size, occupied_size);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "size",
          "new_api": "ByteBuffer::create_uninitialized(occupied_size)",
          "old_text": "entries.size()",
          "new_text": "ByteBuffer::create_uninitialized(occupied_size)",
          "old_line_content": "    for (int i = 0; i < entries.size(); ++i) {",
          "new_line_content": "    auto directory_data = ByteBuffer::create_uninitialized(occupied_size);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "EXT2_DIR_REC_LEN",
          "new_api": "size",
          "old_text": "EXT2_DIR_REC_LEN(entry.name_length)",
          "new_text": "entries.size()",
          "old_line_content": "        int record_length = EXT2_DIR_REC_LEN(entry.name_length);",
          "new_line_content": "    for (int i = 0; i < entries.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "u8",
          "new_api": "index",
          "old_text": "u8(entry.file_type)",
          "new_text": "entry.inode.index()",
          "old_line_content": "        dbgprintf(\", file_type: %u\", u8(entry.file_type));",
          "new_line_content": "        dbgprintf(\"* inode: %u\", entry.inode.index());",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "dbgprintf",
          "new_api": "u16",
          "old_text": "dbgprintf(\", name: %s\\n\", entry.name)",
          "new_text": "u16(entry.name_length)",
          "old_line_content": "        dbgprintf(\", name: %s\\n\", entry.name);",
          "new_line_content": "        dbgprintf(\", name_len: %u\", u16(entry.name_length));",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "index",
          "new_api": "dbgprintf",
          "old_text": "entry.inode.index()",
          "new_text": "dbgprintf(\", name: %s\\n\", entry.name)",
          "old_line_content": "        stream << u32(entry.inode.index());",
          "new_line_content": "        dbgprintf(\", name: %s\\n\", entry.name);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "u8",
          "new_api": "index",
          "old_text": "u8(entry.file_type)",
          "new_text": "entry.inode.index()",
          "old_line_content": "        stream << u8(entry.file_type);",
          "new_line_content": "        stream << u32(entry.inode.index());",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "fill_to_end",
          "new_api": "u8",
          "old_text": "stream.fill_to_end(0)",
          "new_text": "u8(0)",
          "old_line_content": "    stream.fill_to_end(0);",
          "new_line_content": "            stream << u8(0);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "size",
          "new_api": "fill_to_end",
          "old_text": "directory_data.size()",
          "new_text": "stream.fill_to_end(0)",
          "old_line_content": "    return nwritten == directory_data.size();",
          "new_line_content": "    stream.fill_to_end(0);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "length",
          "new_api": "LOCKER",
          "old_text": "name.length()",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    if (name.length() > EXT2_NAME_LEN)",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "KResult",
          "new_api": "is_directory",
          "old_text": "KResult(-ENAMETOOLONG)",
          "new_text": "is_directory()",
          "old_line_content": "        return KResult(-ENAMETOOLONG);",
          "new_line_content": "    ASSERT(is_directory());",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "index",
          "new_api": "KResult",
          "old_text": "index()",
          "new_text": "KResult(-ENAMETOOLONG)",
          "old_line_content": "    dbg() << \"Ext2FSInode::add_child(): Adding inode \" << child_id.index() << \" with name '\" << name << \" and mode \" << mode << \" to directory \" << index();",
          "new_line_content": "        return KResult(-ENAMETOOLONG);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "get_inode",
          "new_api": "KResult",
          "old_text": "fs().get_inode(child_id)",
          "new_text": "KResult(-EEXIST)",
          "old_line_content": "    auto child_inode = fs().get_inode(child_id);",
          "new_line_content": "        return KResult(-EEXIST);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "write_directory",
          "new_api": "increment_link_count",
          "old_text": "write_directory(entries)",
          "new_text": "child_inode->increment_link_count()",
          "old_line_content": "    bool success = write_directory(entries);",
          "new_line_content": "        child_inode->increment_link_count();",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "index",
          "new_api": "to_ext2_file_type",
          "old_text": "child_id.index()",
          "new_text": "to_ext2_file_type(mode)",
          "old_line_content": "        m_lookup_cache.set(name, child_id.index());",
          "new_line_content": "    entries.empend(name.characters_without_null_termination(), name.length(), child_id, to_ext2_file_type(mode));",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "find",
          "new_api": "is_directory",
          "old_text": "m_lookup_cache.find(name)",
          "new_text": "is_directory()",
          "old_line_content": "    auto it = m_lookup_cache.find(name);",
          "new_line_content": "    ASSERT(is_directory());",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "fsid",
          "new_api": "KResult",
          "old_text": "fsid()",
          "new_text": "KResult(-ENOENT)",
          "old_line_content": "    InodeIdentifier child_id { fsid(), child_inode_index };",
          "new_line_content": "        return KResult(-ENOENT);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "index",
          "new_api": "fsid",
          "old_text": "index()",
          "new_text": "fsid()",
          "old_line_content": "    dbg() << \"Ext2FSInode::remove_child(): Removing '\" << name << \"' in directory \" << index();",
          "new_line_content": "    InodeIdentifier child_id { fsid(), child_inode_index };",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "KResult",
          "new_api": "write_directory",
          "old_text": "KResult(-EIO)",
          "new_text": "write_directory(entries)",
          "old_line_content": "        return KResult(-EIO);",
          "new_line_content": "    bool success = write_directory(entries);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "remove",
          "new_api": "KResult",
          "old_text": "m_lookup_cache.remove(name)",
          "new_text": "KResult(-EIO)",
          "old_line_content": "    m_lookup_cache.remove(name);",
          "new_line_content": "        return KResult(-EIO);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "decrement_link_count",
          "new_api": "remove",
          "old_text": "child_inode->decrement_link_count()",
          "new_text": "m_lookup_cache.remove(name)",
          "old_line_content": "    child_inode->decrement_link_count();",
          "new_line_content": "    m_lookup_cache.remove(name);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "write_block",
          "new_api": "read_block_containing_inode",
          "old_text": "write_block(block_index, block)",
          "new_text": "read_block_containing_inode(inode, block_index, offset, block)",
          "old_line_content": "    bool success = write_block(block_index, block);",
          "new_line_content": "    if (!read_block_containing_inode(inode, block_index, offset, block))",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": "super_block",
          "new_api": "group_descriptor",
          "old_text": "super_block()",
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "    int blocks_in_group = min(blocks_per_group(), super_block().s_blocks_count);",
          "new_line_content": "    auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "data",
          "new_api": "get_bitmap_block",
          "old_text": "cached_bitmap.buffer.data()",
          "new_text": "get_bitmap_block(bgd.bg_block_bitmap)",
          "old_line_content": "    auto block_bitmap = Bitmap::wrap(cached_bitmap.buffer.data(), blocks_in_group);",
          "new_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_block_bitmap);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "first_block_index",
          "new_api": "super_block",
          "old_text": "first_block_index()",
          "new_text": "super_block()",
          "old_line_content": "    BlockIndex first_block_in_group = (group_index - 1) * blocks_per_group() + first_block_index();",
          "new_line_content": "    int blocks_in_group = min(blocks_per_group(), super_block().s_blocks_count);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "find_first_unset",
          "new_api": "data",
          "old_text": "block_bitmap.find_first_unset()",
          "new_text": "cached_bitmap.buffer.data()",
          "old_line_content": "    int first_unset_bit_index = block_bitmap.find_first_unset();",
          "new_line_content": "    auto block_bitmap = Bitmap::wrap(cached_bitmap.buffer.data(), blocks_in_group);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "set_block_allocation_state",
          "new_api": "find_first_unset",
          "old_text": "set_block_allocation_state(block_index, true)",
          "new_text": "block_bitmap.find_first_unset()",
          "old_line_content": "    set_block_allocation_state(block_index, true);",
          "new_line_content": "    int first_unset_bit_index = block_bitmap.find_first_unset();",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "unchecked_append",
          "new_api": "ensure_capacity",
          "old_text": "blocks.unchecked_append(block_index)",
          "new_text": "blocks.ensure_capacity(count)",
          "old_line_content": "        blocks.unchecked_append(block_index);",
          "new_line_content": "    blocks.ensure_capacity(count);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "dbg",
          "new_api": "allocate_block",
          "old_text": "dbg()",
          "new_text": "allocate_block(preferred_group_index)",
          "old_line_content": "        dbg() << \"  > \" << block_index;",
          "new_line_content": "        auto block_index = allocate_block(preferred_group_index);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "block_size",
          "new_api": "dbgprintf",
          "old_text": "block_size()",
          "new_text": "dbgprintf(\"Ext2FS: allocate_inode(preferredGroup: %u, expected_size: %u)\\n\", preferred_group, expected_size)",
          "old_line_content": "    unsigned needed_blocks = ceil_div(expected_size, block_size());",
          "new_line_content": "    dbgprintf(\"Ext2FS: allocate_inode(preferredGroup: %u, expected_size: %u)\\n\", preferred_group, expected_size);",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "dbgprintf",
          "new_api": "block_size",
          "old_text": "dbgprintf(\"Ext2FS: minimum needed blocks: %u\\n\", needed_blocks)",
          "new_text": "block_size()",
          "old_line_content": "    dbgprintf(\"Ext2FS: minimum needed blocks: %u\\n\", needed_blocks);",
          "new_line_content": "    unsigned needed_blocks = ceil_div(expected_size, block_size());",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "group_descriptor",
          "new_api": "dbgprintf",
          "old_text": "group_descriptor(group_index)",
          "new_text": "dbgprintf(\"Ext2FS: allocate_inode: found suitable group [%u] for new inode with %u blocks needed :^)\\n\", group_index, needed_blocks)",
          "old_line_content": "    auto& bgd = group_descriptor(group_index);",
          "new_line_content": "    dbgprintf(\"Ext2FS: allocate_inode: found suitable group [%u] for new inode with %u blocks needed :^)\\n\", group_index, needed_blocks);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "inodes_per_group",
          "new_api": "super_block",
          "old_text": "inodes_per_group()",
          "new_text": "super_block()",
          "old_line_content": "    unsigned first_inode_in_group = (group_index - 1) * inodes_per_group() + 1;",
          "new_line_content": "    unsigned inodes_in_group = min(inodes_per_group(), super_block().s_inodes_count);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "data",
          "new_api": "inodes_per_group",
          "old_text": "cached_bitmap.buffer.data()",
          "new_text": "inodes_per_group()",
          "old_line_content": "    auto inode_bitmap = Bitmap::wrap(cached_bitmap.buffer.data(), inodes_in_group);",
          "new_line_content": "    unsigned first_inode_in_group = (group_index - 1) * inodes_per_group() + 1;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "get",
          "new_api": "get_bitmap_block",
          "old_text": "inode_bitmap.get(i)",
          "new_text": "get_bitmap_block(bgd.bg_inode_bitmap)",
          "old_line_content": "        if (inode_bitmap.get(i))",
          "new_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_inode_bitmap);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "get_inode_allocation_state",
          "new_api": "dbgprintf",
          "old_text": "get_inode_allocation_state(inode)",
          "new_text": "dbgprintf(\"Ext2FS: found suitable inode %u\\n\", inode)",
          "old_line_content": "    ASSERT(get_inode_allocation_state(inode) == false);",
          "new_line_content": "    dbgprintf(\"Ext2FS: found suitable inode %u\\n\", inode);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "group_index_from_inode",
          "new_api": "LOCKER",
          "old_text": "group_index_from_inode(index)",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    unsigned group_index = group_index_from_inode(index);",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "inodes_per_group",
          "new_api": "group_index_from_inode",
          "old_text": "inodes_per_group()",
          "new_text": "group_index_from_inode(index)",
          "old_line_content": "    unsigned bit_index = (index_in_group - 1) % inodes_per_group();",
          "new_line_content": "    unsigned group_index = group_index_from_inode(index);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "get_bitmap_block",
          "new_api": "inodes_per_group",
          "old_text": "const_cast<Ext2FS&>(*this).get_bitmap_block(bgd.bg_inode_bitmap)",
          "new_text": "inodes_per_group()",
          "old_line_content": "    auto& cached_bitmap = const_cast<Ext2FS&>(*this).get_bitmap_block(bgd.bg_inode_bitmap);",
          "new_line_content": "    unsigned index_in_group = index - ((group_index - 1) * inodes_per_group());",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "inodes_per_group",
          "new_api": "LOCKER",
          "old_text": "inodes_per_group()",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    unsigned index_in_group = inode_index - ((group_index - 1) * inodes_per_group());",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "inodes_per_group",
          "new_api": "group_index_from_inode",
          "old_text": "inodes_per_group()",
          "new_text": "group_index_from_inode(inode_index)",
          "old_line_content": "    unsigned bit_index = (index_in_group - 1) % inodes_per_group();",
          "new_line_content": "    unsigned group_index = group_index_from_inode(inode_index);",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "get_bitmap_block",
          "new_api": "inodes_per_group",
          "old_text": "get_bitmap_block(bgd.bg_inode_bitmap)",
          "new_text": "inodes_per_group()",
          "old_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_inode_bitmap);",
          "new_line_content": "    unsigned index_in_group = inode_index - ((group_index - 1) * inodes_per_group());",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "move",
          "new_api": "block_size",
          "old_text": "move(block)",
          "new_text": "block_size()",
          "old_line_content": "    m_cached_bitmaps.append(make<CachedBitmap>(bitmap_block_index, move(block)));",
          "new_line_content": "    auto block = ByteBuffer::create_uninitialized(block_size());",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "last",
          "new_api": "data",
          "old_text": "m_cached_bitmaps.last()",
          "new_text": "block.data()",
          "old_line_content": "    return *m_cached_bitmaps.last();",
          "new_line_content": "    bool success = read_block(bitmap_block_index, block.data());",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "group_index_from_block_index",
          "new_api": "dbgprintf",
          "old_text": "group_index_from_block_index(block_index)",
          "new_text": "dbgprintf(\"Ext2FS: set_block_allocation_state(block=%u, state=%u)\\n\", block_index, new_state)",
          "old_line_content": "    GroupIndex group_index = group_index_from_block_index(block_index);",
          "new_line_content": "    dbgprintf(\"Ext2FS: set_block_allocation_state(block=%u, state=%u)\\n\", block_index, new_state);",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "blocks_per_group",
          "new_api": "group_index_from_block_index",
          "old_text": "blocks_per_group()",
          "new_text": "group_index_from_block_index(block_index)",
          "old_line_content": "    unsigned bit_index = index_in_group % blocks_per_group();",
          "new_line_content": "    GroupIndex group_index = group_index_from_block_index(block_index);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "get_bitmap_block",
          "new_api": "blocks_per_group",
          "old_text": "get_bitmap_block(bgd.bg_block_bitmap)",
          "new_text": "blocks_per_group()",
          "old_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_block_bitmap);",
          "new_line_content": "    BlockIndex index_in_group = (block_index - first_block_index()) - ((group_index - 1) * blocks_per_group());",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "write_directory",
          "new_api": "identifier",
          "old_text": "static_cast<Ext2FSInode&>(*inode).write_directory(entries)",
          "new_text": "inode->identifier()",
          "old_line_content": "    bool success = static_cast<Ext2FSInode&>(*inode).write_directory(entries);",
          "new_line_content": "    entries.empend(\".\", inode->identifier(), EXT2_FT_DIR);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "ASSERT",
          "new_api": "empend",
          "old_text": "ASSERT(success)",
          "new_text": "entries.empend(\"..\", parent_id, EXT2_FT_DIR)",
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "    entries.empend(\"..\", parent_id, EXT2_FT_DIR);",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "get_inode",
          "new_api": "write_directory",
          "old_text": "get_inode(parent_id)",
          "new_text": "static_cast<Ext2FSInode&>(*inode).write_directory(entries)",
          "old_line_content": "    auto parent_inode = get_inode(parent_id);",
          "new_line_content": "    bool success = static_cast<Ext2FSInode&>(*inode).write_directory(entries);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "increment_link_count",
          "new_api": "ASSERT",
          "old_text": "parent_inode->increment_link_count()",
          "new_text": "ASSERT(success)",
          "old_line_content": "    error = parent_inode->increment_link_count();",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "dbgprintf",
          "new_api": "index",
          "old_text": "dbgprintf(\"Ext2FS: incremented bg_used_dirs_count %u -> %u\\n\", bgd.bg_used_dirs_count - 1, bgd.bg_used_dirs_count)",
          "new_text": "inode->identifier().index()",
          "old_line_content": "    dbgprintf(\"Ext2FS: incremented bg_used_dirs_count %u -> %u\\n\", bgd.bg_used_dirs_count - 1, bgd.bg_used_dirs_count);",
          "new_line_content": "    auto& bgd = const_cast<ext2_group_desc&>(group_descriptor(group_index_from_inode(inode->identifier().index())));",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "index",
          "new_api": "get_inode",
          "old_text": "parent_inode->identifier().index()",
          "new_text": "get_inode(parent_id)",
          "old_line_content": "    dbgprintf(\"Ext2FS: Adding inode '%s' (mode %o) to parent directory %u:\\n\", name.characters(), mode, parent_inode->identifier().index());",
          "new_line_content": "    auto parent_inode = get_inode(parent_id);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "block_size",
          "new_api": "index",
          "old_text": "block_size()",
          "new_text": "parent_inode->identifier().index()",
          "old_line_content": "    auto needed_blocks = ceil_div(size, block_size());",
          "new_line_content": "    dbgprintf(\"Ext2FS: Adding inode '%s' (mode %o) to parent directory %u:\\n\", name.characters(), mode, parent_inode->identifier().index());",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "set_inode_allocation_state",
          "new_api": "size",
          "old_text": "set_inode_allocation_state(inode_id, true)",
          "new_text": "blocks.size()",
          "old_line_content": "    bool success = set_inode_allocation_state(inode_id, true);",
          "new_line_content": "    ASSERT(blocks.size() == needed_blocks);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "is_directory",
          "new_api": "ASSERT",
          "old_text": "is_directory(mode)",
          "new_text": "ASSERT(success)",
          "old_line_content": "    if (is_directory(mode))",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "egid",
          "new_api": "memset",
          "old_text": "current->process().egid()",
          "new_text": "memset(&e2inode, 0, sizeof(ext2_inode))",
          "old_line_content": "    e2inode.i_gid = current->process().egid();",
          "new_line_content": "    memset(&e2inode, 0, sizeof(ext2_inode));",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "write_block_list_for_inode",
          "new_api": "is_block_device",
          "old_text": "write_block_list_for_inode(inode_id, e2inode, blocks)",
          "new_text": "is_block_device(mode)",
          "old_line_content": "    success = write_block_list_for_inode(inode_id, e2inode, blocks);",
          "new_line_content": "    else if (is_block_device(mode))",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "dbgprintf",
          "new_api": "ASSERT",
          "old_text": "dbgprintf(\"Ext2FS: writing initial metadata for inode %u\\n\", inode_id)",
          "new_text": "ASSERT(success)",
          "old_line_content": "    dbgprintf(\"Ext2FS: writing initial metadata for inode %u\\n\", inode_id);",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "write_ext2_inode",
          "new_api": "dbgprintf",
          "old_text": "write_ext2_inode(inode_id, e2inode)",
          "new_text": "dbgprintf(\"Ext2FS: writing initial metadata for inode %u\\n\", inode_id)",
          "old_line_content": "    success = write_ext2_inode(inode_id, e2inode);",
          "new_line_content": "    dbgprintf(\"Ext2FS: writing initial metadata for inode %u\\n\", inode_id);",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "remove",
          "new_api": "ASSERT",
          "old_text": "m_inode_cache.remove(inode_id)",
          "new_text": "ASSERT(success)",
          "old_line_content": "    m_inode_cache.remove(inode_id);",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "hash",
          "new_api": "is_directory",
          "old_text": "name.hash()",
          "new_text": "is_directory()",
          "old_line_content": "    auto it = m_lookup_cache.find(name.hash(), [&](auto& entry) { return entry.key == name; });",
          "new_line_content": "    ASSERT(is_directory());",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "end",
          "new_api": "populate_lookup_cache",
          "old_text": "m_lookup_cache.end()",
          "new_text": "populate_lookup_cache()",
          "old_line_content": "    if (it != m_lookup_cache.end())",
          "new_line_content": "    populate_lookup_cache();",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "fsid",
          "new_api": "LOCKER",
          "old_text": "fsid()",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "        return { fsid(), (*it).value };",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "set_metadata_dirty",
          "new_api": "is_readonly",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "fs().is_readonly()",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    if (fs().is_readonly())",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "set_metadata_dirty",
          "new_api": "is_readonly",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "fs().is_readonly()",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    if (fs().is_readonly())",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "set_metadata_dirty",
          "new_api": "is_readonly",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "fs().is_readonly()",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    if (fs().is_readonly())",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "set_metadata_dirty",
          "new_api": "is_readonly",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "fs().is_readonly()",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    if (fs().is_readonly())",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "ASSERT",
          "new_api": "LOCKER",
          "old_text": "ASSERT(m_raw_inode.i_links_count)",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    ASSERT(m_raw_inode.i_links_count);",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "index",
          "new_api": "ASSERT",
          "old_text": "index()",
          "new_text": "ASSERT(m_raw_inode.i_links_count)",
          "old_line_content": "        fs().uncache_inode(index());",
          "new_line_content": "    ASSERT(m_raw_inode.i_links_count);",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "size",
          "new_api": "is_directory",
          "old_text": "m_lookup_cache.size()",
          "new_text": "is_directory()",
          "old_line_content": "    return m_lookup_cache.size();",
          "new_line_content": "    ASSERT(is_directory());",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": "resize",
          "new_api": "LOCKER",
          "old_text": "resize(size)",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    auto result = resize(size);",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "set_metadata_dirty",
          "new_api": "resize",
          "old_text": "set_metadata_dirty(true)",
          "new_text": "resize(size)",
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    auto result = resize(size);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "ref_count",
          "new_api": "LOCKER",
          "old_text": "it.value->ref_count()",
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "        if (it.value->ref_count() > 1)",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "clear",
          "new_api": "KResult",
          "old_text": "m_inode_cache.clear()",
          "new_text": "KResult(-EBUSY)",
          "old_line_content": "    m_inode_cache.clear();",
          "new_line_content": "            return KResult(-EBUSY);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(found_a_group)",
          "old_line_content": "",
          "new_line_content": "    ASSERT(found_a_group);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "unsigned Ext2FS::free_block_count() const",
          "new_line_content": "    return super_block().s_blocks_count;",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "first_block_index",
          "old_text": null,
          "new_text": "first_block_index()",
          "old_line_content": "    BlockIndex block_index = (unsigned)first_unset_bit_index + first_block_in_group;",
          "new_line_content": "    BlockIndex first_block_in_group = (group_index - 1) * blocks_per_group() + first_block_index();",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(first_unset_bit_index != -1)",
          "old_line_content": "    return block_index;",
          "new_line_content": "    ASSERT(first_unset_bit_index != -1);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "set_block_allocation_state",
          "old_text": null,
          "new_text": "set_block_allocation_state(block_index, true)",
          "old_line_content": "",
          "new_line_content": "    set_block_allocation_state(block_index, true);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "unsigned Ext2FS::total_inode_count() const",
          "new_line_content": "    return super_block().s_free_blocks_count;",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "unsigned Ext2FS::free_inode_count() const",
          "new_line_content": "    return super_block().s_inodes_count;",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: allocate_blocks(preferred group: %u, count: %u)\\n\", preferred_group_index, count)",
          "old_line_content": "        return {};",
          "new_line_content": "    dbgprintf(\"Ext2FS: allocate_blocks(preferred group: %u, count: %u)\\n\", preferred_group_index, count);",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "KResult Ext2FS::prepare_to_unmount() const",
          "new_line_content": "    return super_block().s_free_inodes_count;",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "dbg",
          "old_text": null,
          "new_text": "dbg()",
          "old_line_content": "    for (int i = 0; i < count; ++i) {",
          "new_line_content": "    dbg() << \"Ext2FS: allocate_blocks:\";",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "ref_count",
          "old_text": null,
          "new_text": "it.value->ref_count()",
          "old_line_content": "",
          "new_line_content": "        if (it.value->ref_count() > 1)",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "unchecked_append",
          "old_text": null,
          "new_text": "blocks.unchecked_append(block_index)",
          "old_line_content": "#endif",
          "new_line_content": "        blocks.unchecked_append(block_index);",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "dbg",
          "old_text": null,
          "new_text": "dbg()",
          "old_line_content": "",
          "new_line_content": "        dbg() << \"  > \" << block_index;",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "m_inode_cache.clear()",
          "old_line_content": "",
          "new_line_content": "    m_inode_cache.clear();",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "blocks.size()",
          "old_line_content": "",
          "new_line_content": "    ASSERT(blocks.size() == count);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: minimum needed blocks: %u\\n\", needed_blocks)",
          "old_line_content": "    unsigned group_index = 0;",
          "new_line_content": "    dbgprintf(\"Ext2FS: minimum needed blocks: %u\\n\", needed_blocks);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "",
          "new_line_content": "        auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "is_suitable_group",
          "old_text": null,
          "new_text": "is_suitable_group(preferred_group)",
          "old_line_content": "        for (unsigned i = 1; i <= m_block_group_count; ++i) {",
          "new_line_content": "    if (preferred_group && is_suitable_group(preferred_group)) {",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": null,
          "new_api": "is_suitable_group",
          "old_text": null,
          "new_text": "is_suitable_group(i)",
          "old_line_content": "    }",
          "new_line_content": "            if (is_suitable_group(i))",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "kprintf",
          "old_text": null,
          "new_text": "kprintf(\"Ext2FS: allocate_inode: no suitable group found for new inode with %u blocks needed :(\\n\", needed_blocks)",
          "old_line_content": "",
          "new_line_content": "        kprintf(\"Ext2FS: allocate_inode: no suitable group found for new inode with %u blocks needed :(\\n\", needed_blocks);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "",
          "new_line_content": "    auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "cached_bitmap.buffer.data()",
          "old_line_content": "            continue;",
          "new_line_content": "    auto inode_bitmap = Bitmap::wrap(cached_bitmap.buffer.data(), inodes_in_group);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "inode_bitmap.size()",
          "old_line_content": "        first_free_inode_in_group = first_inode_in_group + i;",
          "new_line_content": "    for (int i = 0; i < inode_bitmap.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "inode_bitmap.get(i)",
          "old_line_content": "        break;",
          "new_line_content": "        if (inode_bitmap.get(i))",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "kprintf",
          "old_text": null,
          "new_text": "kprintf(\"Ext2FS: first_free_inode_in_group returned no inode, despite bgd claiming there are inodes :(\\n\")",
          "old_line_content": "",
          "new_line_content": "        kprintf(\"Ext2FS: first_free_inode_in_group returned no inode, despite bgd claiming there are inodes :(\\n\");",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "get_inode_allocation_state",
          "old_text": null,
          "new_text": "get_inode_allocation_state(inode)",
          "old_line_content": "",
          "new_line_content": "    ASSERT(get_inode_allocation_state(inode) == false);",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "blocks_per_group",
          "old_text": null,
          "new_text": "blocks_per_group()",
          "old_line_content": "unsigned Ext2FS::group_index_from_inode(unsigned inode) const",
          "new_line_content": "    return (block_index - 1) / blocks_per_group() + 1;",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "inodes_per_group",
          "old_text": null,
          "new_text": "inodes_per_group()",
          "old_line_content": "bool Ext2FS::get_inode_allocation_state(InodeIndex index) const",
          "new_line_content": "    return (inode - 1) / inodes_per_group() + 1;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "",
          "new_line_content": "    auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "get_bitmap_block",
          "old_text": null,
          "new_text": "const_cast<Ext2FS&>(*this).get_bitmap_block(bgd.bg_inode_bitmap)",
          "old_line_content": "",
          "new_line_content": "    auto& cached_bitmap = const_cast<Ext2FS&>(*this).get_bitmap_block(bgd.bg_inode_bitmap);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "inodes_per_group",
          "old_text": null,
          "new_text": "inodes_per_group()",
          "old_line_content": "bool Ext2FS::set_inode_allocation_state(InodeIndex inode_index, bool new_state)",
          "new_line_content": "    return cached_bitmap.bitmap(inodes_per_group()).get(bit_index);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "",
          "new_line_content": "    auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "inodes_per_group",
          "old_text": null,
          "new_text": "inodes_per_group()",
          "old_line_content": "",
          "new_line_content": "    unsigned bit_index = (index_in_group - 1) % inodes_per_group();",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "get_bitmap_block",
          "old_text": null,
          "new_text": "get_bitmap_block(bgd.bg_inode_bitmap)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_inode_bitmap);",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "inodes_per_group",
          "old_text": null,
          "new_text": "inodes_per_group()",
          "old_line_content": "#endif",
          "new_line_content": "    bool current_state = cached_bitmap.bitmap(inodes_per_group()).get(bit_index);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: set_inode_allocation_state(%u) %u -> %u\\n\", inode_index, current_state, new_state)",
          "old_line_content": "    if (current_state == new_state) {",
          "new_line_content": "    dbgprintf(\"Ext2FS: set_inode_allocation_state(%u) %u -> %u\\n\", inode_index, current_state, new_state);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "ASSERT_NOT_REACHED",
          "old_text": null,
          "new_text": "ASSERT_NOT_REACHED()",
          "old_line_content": "",
          "new_line_content": "        ASSERT_NOT_REACHED();",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "inodes_per_group",
          "old_text": null,
          "new_text": "inodes_per_group()",
          "old_line_content": "    // Update superblock",
          "new_line_content": "    cached_bitmap.bitmap(inodes_per_group()).set(bit_index, new_state);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "fs().block_size()",
          "old_line_content": "",
          "new_line_content": "    u64 block_size = fs().block_size();",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "ceil_div",
          "old_text": null,
          "new_text": "ceil_div(old_size, block_size)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    int blocks_needed_before = ceil_div(old_size, block_size);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: superblock free inode count %u -> %u\\n\", m_super_block.s_free_inodes_count, m_super_block.s_free_inodes_count - 1)",
          "old_line_content": "        --m_super_block.s_free_inodes_count;",
          "new_line_content": "    dbgprintf(\"Ext2FS: superblock free inode count %u -> %u\\n\", m_super_block.s_free_inodes_count, m_super_block.s_free_inodes_count - 1);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FSInode::resize(): blocks needed before (size was %Q): %d\\n\", old_size, blocks_needed_before)",
          "old_line_content": "",
          "new_line_content": "    dbgprintf(\"Ext2FSInode::resize(): blocks needed before (size was %Q): %d\\n\", old_size, blocks_needed_before);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FSInode::resize(): blocks needed after  (size is  %Q): %d\\n\", new_size, blocks_needed_after)",
          "old_line_content": "    if (blocks_needed_after > blocks_needed_before) {",
          "new_line_content": "    dbgprintf(\"Ext2FSInode::resize(): blocks needed after  (size is  %Q): %d\\n\", new_size, blocks_needed_after);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "fs().super_block()",
          "old_line_content": "",
          "new_line_content": "        if (additional_blocks_needed > fs().super_block().s_free_blocks_count)",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "KResult",
          "old_text": null,
          "new_text": "KResult(-ENOSPC)",
          "old_line_content": "",
          "new_line_content": "            return KResult(-ENOSPC);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "const_cast<ext2_group_desc&>(bgd)",
          "old_text": null,
          "new_text": "const_cast<ext2_group_desc&>(bgd)",
          "old_line_content": "    else",
          "new_line_content": "    auto& mutable_bgd = const_cast<ext2_group_desc&>(bgd);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "        auto new_blocks = fs().allocate_blocks(fs().group_index_from_inode(index()), blocks_needed_after - blocks_needed_before);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: group free inode count %u -> %u\\n\", bgd.bg_free_inodes_count, bgd.bg_free_inodes_count - 1)",
          "old_line_content": "    m_block_group_descriptors_dirty = true;",
          "new_line_content": "    dbgprintf(\"Ext2FS: group free inode count %u -> %u\\n\", bgd.bg_free_inodes_count, bgd.bg_free_inodes_count - 1);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "block_list.size()",
          "old_line_content": "        }",
          "new_line_content": "        dbgprintf(\"Ext2FSInode::resize(): Shrinking. Old block list is %d entries:\\n\", block_list.size());",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "block_list.size()",
          "old_line_content": "        }",
          "new_line_content": "        while (block_list.size() != blocks_needed_after) {",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "take_last",
          "old_text": null,
          "new_text": "block_list.take_last()",
          "old_line_content": "    }",
          "new_line_content": "            auto block_index = block_list.take_last();",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "set_block_allocation_state",
          "old_text": null,
          "new_text": "fs().set_block_allocation_state(block_index, false)",
          "old_line_content": "",
          "new_line_content": "            fs().set_block_allocation_state(block_index, false);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "block_size()",
          "old_line_content": "Ext2FS::CachedBitmap& Ext2FS::get_bitmap_block(BlockIndex bitmap_block_index)",
          "new_line_content": "    return block_size() == 1024 ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "",
          "new_line_content": "    bool success = fs().write_block_list_for_inode(index(), m_raw_inode, block_list);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "    return KSuccess;",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(block_list)",
          "old_line_content": "",
          "new_line_content": "    m_block_list = move(block_list);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(success)",
          "old_line_content": "}",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(block)",
          "old_line_content": "",
          "new_line_content": "    m_cached_bitmaps.append(make<CachedBitmap>(bitmap_block_index, move(block)));",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "last",
          "old_text": null,
          "new_text": "m_cached_bitmaps.last()",
          "old_line_content": "bool Ext2FS::set_block_allocation_state(BlockIndex block_index, bool new_state)",
          "new_line_content": "    return *m_cached_bitmaps.last();",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(offset >= 0)",
          "old_line_content": "    Locker inode_locker(m_lock);",
          "new_line_content": "    ASSERT(offset >= 0);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "fs",
          "old_text": null,
          "new_text": "fs()",
          "old_line_content": "        if ((offset + count) < max_inline_symlink_length) {",
          "new_line_content": "    Locker fs_locker(fs().m_lock);",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "",
          "new_line_content": "    auto& bgd = group_descriptor(group_index);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "String((const char*)data, count).characters()",
          "old_line_content": "            if ((offset + count) > (off_t)m_raw_inode.i_size)",
          "new_line_content": "            dbgprintf(\"Ext2FSInode: write_bytes poking into i_block array for inline symlink '%s' (%u bytes)\\n\", String((const char*)data, count).characters(), count);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "blocks_per_group",
          "old_text": null,
          "new_text": "blocks_per_group()",
          "old_line_content": "",
          "new_line_content": "    unsigned bit_index = index_in_group % blocks_per_group();",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "get_bitmap_block",
          "old_text": null,
          "new_text": "get_bitmap_block(bgd.bg_block_bitmap)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_block_bitmap);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "blocks_per_group",
          "old_text": null,
          "new_text": "blocks_per_group()",
          "old_line_content": "#endif",
          "new_line_content": "    bool current_state = cached_bitmap.bitmap(blocks_per_group()).get(bit_index);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "    }",
          "new_line_content": "            set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: block %u state: %u -> %u (in bitmap block %u)\\n\", block_index, current_state, new_state, bgd.bg_block_bitmap)",
          "old_line_content": "    if (current_state == new_state) {",
          "new_line_content": "    dbgprintf(\"Ext2FS: block %u state: %u -> %u (in bitmap block %u)\\n\", block_index, current_state, new_state, bgd.bg_block_bitmap);",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "fs().block_size()",
          "old_line_content": "",
          "new_line_content": "    const ssize_t block_size = fs().block_size();",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "ASSERT_NOT_REACHED",
          "old_text": null,
          "new_text": "ASSERT_NOT_REACHED()",
          "old_line_content": "",
          "new_line_content": "        ASSERT_NOT_REACHED();",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "resize(new_size)",
          "old_line_content": "",
          "new_line_content": "    auto resize_result = resize(new_size);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "resize_result.is_error()",
          "old_line_content": "    int first_block_logical_index = offset / block_size;",
          "new_line_content": "    if (resize_result.is_error())",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "blocks_per_group",
          "old_text": null,
          "new_text": "blocks_per_group()",
          "old_line_content": "    // Update superblock",
          "new_line_content": "    cached_bitmap.bitmap(blocks_per_group()).set(bit_index, new_state);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: superblock free block count %u -> %u\\n\", m_super_block.s_free_blocks_count, m_super_block.s_free_blocks_count - 1)",
          "old_line_content": "        --m_super_block.s_free_blocks_count;",
          "new_line_content": "    dbgprintf(\"Ext2FS: superblock free block count %u -> %u\\n\", m_super_block.s_free_blocks_count, m_super_block.s_free_blocks_count - 1);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_block_list.size()",
          "old_line_content": "    int offset_into_first_block = offset % block_size;",
          "new_line_content": "    if (last_block_logical_index >= m_block_list.size())",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_block_list.size()",
          "old_line_content": "",
          "new_line_content": "        last_block_logical_index = m_block_list.size() - 1;",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min((off_t)count, (off_t)new_size - offset)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    int remaining_count = min((off_t)count, (off_t)new_size - offset);",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "const_cast<ext2_group_desc&>(bgd)",
          "old_text": null,
          "new_text": "const_cast<ext2_group_desc&>(bgd)",
          "old_line_content": "    else",
          "new_line_content": "    auto& mutable_bgd = const_cast<ext2_group_desc&>(bgd);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: group %u free block count %u -> %u\\n\", group_index, bgd.bg_free_blocks_count, bgd.bg_free_blocks_count - 1)",
          "old_line_content": "    m_block_group_descriptors_dirty = true;",
          "new_line_content": "    dbgprintf(\"Ext2FS: group %u free block count %u -> %u\\n\", group_index, bgd.bg_free_blocks_count, bgd.bg_free_blocks_count - 1);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(block_size - offset_into_block, remaining_count)",
          "old_line_content": "        if (offset_into_block != 0 || num_bytes_to_copy != block_size) {",
          "new_line_content": "        int num_bytes_to_copy = min(block_size - offset_into_block, remaining_count);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "block.data()",
          "old_line_content": "                return -EIO;",
          "new_line_content": "            bool success = fs().read_block(m_block_list[bi], block.data());",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    // Fix up the mode to definitely be a directory.",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "kprintf",
          "old_text": null,
          "new_text": "kprintf(\"Ext2FSInode::write_bytes: read_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi)",
          "old_line_content": "        } else",
          "new_line_content": "                kprintf(\"Ext2FSInode::write_bytes: read_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "    // FIXME: This is a bit on the hackish side.",
          "new_line_content": "    ASSERT(parent_id.fsid() == fsid());",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "block.data()",
          "old_line_content": "            int padding_bytes = block_size - padding_start;",
          "new_line_content": "        memcpy(block.data() + offset_into_block, in, num_bytes_to_copy);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "block_size()",
          "old_line_content": "",
          "new_line_content": "    auto inode = create_inode(parent_id, name, mode, block_size(), 0, error);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FSInode::write_bytes padding last block of file with zero x %u (new_size=%u, offset_into_block=%u, num_bytes_to_copy=%u)\\n\", padding_bytes, new_size, offset_into_block, num_bytes_to_copy)",
          "old_line_content": "        }",
          "new_line_content": "            dbgprintf(\"Ext2FSInode::write_bytes padding last block of file with zero x %u (new_size=%u, offset_into_block=%u, num_bytes_to_copy=%u)\\n\", padding_bytes, new_size, offset_into_block, num_bytes_to_copy);",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "inode->identifier().index()",
          "old_line_content": "    Vector<DirectoryEntry> entries;",
          "new_line_content": "    dbgprintf(\"Ext2FS: create_directory: created new directory named '%s' with inode %u\\n\", name.characters(), inode->identifier().index());",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FSInode::write_bytes: writing block %u (offset_into_block: %u)\\n\", m_block_list[bi], offset_into_block)",
          "old_line_content": "        if (!success) {",
          "new_line_content": "        dbgprintf(\"Ext2FSInode::write_bytes: writing block %u (offset_into_block: %u)\\n\", m_block_list[bi], offset_into_block);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "kprintf",
          "old_text": null,
          "new_text": "kprintf(\"Ext2FSInode::write_bytes: write_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi)",
          "old_line_content": "        }",
          "new_line_content": "            kprintf(\"Ext2FSInode::write_bytes: write_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "ASSERT_NOT_REACHED",
          "old_text": null,
          "new_text": "ASSERT_NOT_REACHED()",
          "old_line_content": "        remaining_count -= num_bytes_to_copy;",
          "new_line_content": "            ASSERT_NOT_REACHED();",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "get_inode",
          "old_text": null,
          "new_text": "get_inode(parent_id)",
          "old_line_content": "        return nullptr;",
          "new_line_content": "    auto parent_inode = get_inode(parent_id);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "increment_link_count",
          "old_text": null,
          "new_text": "parent_inode->increment_link_count()",
          "old_line_content": "",
          "new_line_content": "    error = parent_inode->increment_link_count();",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_block_list.size()",
          "old_line_content": "    if (old_size != new_size)",
          "new_line_content": "    dbgprintf(\"Ext2FSInode::write_bytes: after write, i_size=%u, i_blocks=%u (%u blocks in list)\\n\", m_raw_inode.i_size, m_raw_inode.i_blocks, m_block_list.size());",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "dbgprintf",
          "old_text": null,
          "new_text": "dbgprintf(\"Ext2FS: incremented bg_used_dirs_count %u -> %u\\n\", bgd.bg_used_dirs_count - 1, bgd.bg_used_dirs_count)",
          "old_line_content": "    m_block_group_descriptors_dirty = true;",
          "new_line_content": "    dbgprintf(\"Ext2FS: incremented bg_used_dirs_count %u -> %u\\n\", bgd.bg_used_dirs_count - 1, bgd.bg_used_dirs_count);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "inode_size_changed",
          "old_text": null,
          "new_text": "inode_size_changed(old_size, new_size)",
          "old_line_content": "}",
          "new_line_content": "        inode_size_changed(old_size, new_size);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "inode_contents_changed",
          "old_text": null,
          "new_text": "inode_contents_changed(offset, count, data)",
          "old_line_content": "",
          "new_line_content": "    inode_contents_changed(offset, count, data);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    ASSERT(parent_id.fsid() == fsid());",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "read_entire",
          "old_text": null,
          "new_text": "read_entire()",
          "old_line_content": "",
          "new_line_content": "    auto buffer = read_entire();",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "buffer.data()",
          "old_line_content": "        if (entry->inode != 0) {",
          "new_line_content": "    auto* entry = reinterpret_cast<ext2_dir_entry_2*>(buffer.data());",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "block_size()",
          "old_line_content": "        error = -ENOSPC;",
          "new_line_content": "    auto needed_blocks = ceil_div(size, block_size());",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "        return {};",
          "new_line_content": "    if ((size_t)needed_blocks > super_block().s_free_blocks_count) {",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "dbg",
          "old_text": null,
          "new_text": "dbg()",
          "old_line_content": "    }",
          "new_line_content": "        dbg() << \"Ext2FS: create_inode: not enough free blocks\";",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "characters",
          "old_text": null,
          "new_text": "String(entry->name, entry->name_len).characters()",
          "old_line_content": "                break;",
          "new_line_content": "            kprintf(\"Ext2Inode::traverse_as_directory: %u, name_len: %u, rec_len: %u, file_type: %u, name: %s\\n\", entry->inode, entry->name_len, entry->rec_len, entry->file_type, String(entry->name, entry->name_len).characters());",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "        entry = (ext2_dir_entry_2*)((char*)entry + entry->rec_len);",
          "new_line_content": "            if (!callback({ entry->name, entry->name_len, { fsid(), entry->inode }, entry->file_type }))",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "allocate_inode",
          "old_text": null,
          "new_text": "allocate_inode(0, size)",
          "old_line_content": "        error = -ENOSPC;",
          "new_line_content": "    auto inode_id = allocate_inode(0, size);",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "kprintf",
          "old_text": null,
          "new_text": "kprintf(\"Ext2FS: create_inode: allocate_inode failed\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        kprintf(\"Ext2FS: create_inode: allocate_inode failed\\n\");",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "        return {};",
          "new_line_content": "    auto result = parent_inode->add_child({ fsid(), inode_id }, name, mode);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "result.is_error()",
          "old_line_content": "    }",
          "new_line_content": "    if (result.is_error()) {",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "    int directory_size = 0;",
          "new_line_content": "    dbgprintf(\"Ext2FS: New directory inode %u contents to write:\\n\", index());",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "group_index_from_inode",
          "old_text": null,
          "new_text": "group_index_from_inode(inode_id)",
          "old_line_content": "    // Looks like we're good, time to update the inode bitmap and group+global inode counters.",
          "new_line_content": "    auto blocks = allocate_blocks(group_index_from_inode(inode_id), needed_blocks);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "set_inode_allocation_state",
          "old_text": null,
          "new_text": "set_inode_allocation_state(inode_id, true)",
          "old_line_content": "    unsigned initial_links_count;",
          "new_line_content": "    bool success = set_inode_allocation_state(inode_id, true);",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "block_size",
          "old_text": null,
          "new_text": "fs().block_size()",
          "old_line_content": "    int occupied_size = blocks_needed * block_size;",
          "new_line_content": "    auto block_size = fs().block_size();",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "ceil_div",
          "old_text": null,
          "new_text": "ceil_div(directory_size, block_size)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    int blocks_needed = ceil_div(directory_size, block_size);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "is_directory",
          "old_text": null,
          "new_text": "is_directory(mode)",
          "old_line_content": "        initial_links_count = 1;",
          "new_line_content": "    if (is_directory(mode))",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "kgettimeofday",
          "old_text": null,
          "new_text": "kgettimeofday(now)",
          "old_line_content": "    e2inode.i_mode = mode;",
          "new_line_content": "    kgettimeofday(now);",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": null,
          "new_api": "euid",
          "old_text": null,
          "new_text": "current->process().euid()",
          "old_line_content": "    e2inode.i_atime = now.tv_sec;",
          "new_line_content": "    e2inode.i_uid = current->process().euid();",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "egid",
          "old_text": null,
          "new_text": "current->process().egid()",
          "old_line_content": "    e2inode.i_ctime = now.tv_sec;",
          "new_line_content": "    e2inode.i_gid = current->process().egid();",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "EXT2_DIR_REC_LEN",
          "old_text": null,
          "new_text": "EXT2_DIR_REC_LEN(entry.name_length)",
          "old_line_content": "",
          "new_line_content": "        int record_length = EXT2_DIR_REC_LEN(entry.name_length);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "entries.size()",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "        if (i == entries.size() - 1)",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "is_character_device",
          "old_text": null,
          "new_text": "is_character_device(mode)",
          "old_line_content": "        e2inode.i_block[1] = dev;",
          "new_line_content": "    if (is_character_device(mode))",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "u16",
          "old_text": null,
          "new_text": "u16(record_length)",
          "old_line_content": "#endif",
          "new_line_content": "        dbgprintf(\", rec_len: %u\", u16(record_length));",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "u8",
          "old_text": null,
          "new_text": "u8(entry.file_type)",
          "old_line_content": "",
          "new_line_content": "        dbgprintf(\", file_type: %u\", u8(entry.file_type));",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "write_block_list_for_inode",
          "old_text": null,
          "new_text": "write_block_list_for_inode(inode_id, e2inode, blocks)",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    success = write_block_list_for_inode(inode_id, e2inode, blocks);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "u16",
          "old_text": null,
          "new_text": "u16(record_length)",
          "old_line_content": "        stream << entry.name;",
          "new_line_content": "        stream << u16(record_length);",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "u8",
          "old_text": null,
          "new_text": "u8(entry.name_length)",
          "old_line_content": "",
          "new_line_content": "        stream << u8(entry.name_length);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "u8",
          "old_text": null,
          "new_text": "u8(entry.file_type)",
          "old_line_content": "        int padding = record_length - entry.name_length - 8;",
          "new_line_content": "        stream << u8(entry.file_type);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "write_ext2_inode",
          "old_text": null,
          "new_text": "write_ext2_inode(inode_id, e2inode)",
          "old_line_content": "    // We might have cached the fact that this inode didn't exist. Wipe the slate.",
          "new_line_content": "    success = write_ext2_inode(inode_id, e2inode);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "remove",
          "old_text": null,
          "new_text": "m_inode_cache.remove(inode_id)",
          "old_line_content": "}",
          "new_line_content": "    m_inode_cache.remove(inode_id);",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "void Ext2FSInode::populate_lookup_cache() const",
          "new_line_content": "    return get_inode({ fsid(), inode_id });",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "directory_data.data()",
          "old_line_content": "",
          "new_line_content": "    ssize_t nwritten = write_bytes(0, directory_data.size(), directory_data.data(), nullptr);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "directory_data.size()",
          "old_line_content": "KResult Ext2FSInode::add_child(InodeIdentifier child_id, const StringView& name, mode_t mode)",
          "new_line_content": "    return nwritten == directory_data.size();",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    HashMap<String, unsigned> children;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "m_lookup_cache.is_empty()",
          "old_line_content": "",
          "new_line_content": "    if (!m_lookup_cache.is_empty())",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "name.length()",
          "old_line_content": "#ifdef EXT2_DEBUG",
          "new_line_content": "    if (name.length() > EXT2_NAME_LEN)",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "set",
          "old_text": null,
          "new_text": "traverse_as_directory([&children](auto& entry) {\n        children.set(String(entry.name, entry.name_length), entry.inode.index());\n        return true;\n    })",
          "old_line_content": "    });",
          "new_line_content": "    traverse_as_directory([&children](auto& entry) {",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "entry.inode.index()",
          "old_line_content": "",
          "new_line_content": "        children.set(String(entry.name, entry.name_length), entry.inode.index());",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "    Vector<FS::DirectoryEntry> entries;",
          "new_line_content": "    dbg() << \"Ext2FSInode::add_child(): Adding inode \" << child_id.index() << \" with name '\" << name << \" and mode \" << mode << \" to directory \" << index();",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "m_lookup_cache.is_empty()",
          "old_line_content": "}",
          "new_line_content": "    if (!m_lookup_cache.is_empty())",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(children)",
          "old_line_content": "InodeIdentifier Ext2FSInode::lookup(StringView name)",
          "new_line_content": "    m_lookup_cache = move(children);",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "traverse_as_directory([&](auto& entry) {\n        if (name == entry.name) {\n            name_already_exists = true;\n            return false;\n        }\n        entries.append(entry);\n        return true;\n    })",
          "old_line_content": "            return false;",
          "new_line_content": "    traverse_as_directory([&](auto& entry) {",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "entries.append(entry)",
          "old_line_content": "    if (name_already_exists) {",
          "new_line_content": "        entries.append(entry);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "hash",
          "old_text": null,
          "new_text": "name.hash()",
          "old_line_content": "    return {};",
          "new_line_content": "    auto it = m_lookup_cache.find(name.hash(), [&](auto& entry) { return entry.key == name; });",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "m_lookup_cache.end()",
          "old_line_content": "}",
          "new_line_content": "    if (it != m_lookup_cache.end())",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "fsid",
          "old_text": null,
          "new_text": "fsid()",
          "old_line_content": "",
          "new_line_content": "        return { fsid(), (*it).value };",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "",
          "new_line_content": "        dbg() << \"Ext2FSInode::add_child(): Name '\" << name << \"' already exists in inode \" << index();",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "get_inode",
          "old_text": null,
          "new_text": "fs().get_inode(child_id)",
          "old_line_content": "",
          "new_line_content": "    auto child_inode = fs().get_inode(child_id);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "write_directory",
          "old_text": null,
          "new_text": "write_directory(entries)",
          "old_line_content": "    return KSuccess;",
          "new_line_content": "    bool success = write_directory(entries);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    m_raw_inode.i_atime = t;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "child_id.index()",
          "old_line_content": "",
          "new_line_content": "        m_lookup_cache.set(name, child_id.index());",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "",
          "new_line_content": "    dbg() << \"Ext2FSInode::remove_child(\" << name << \") in inode \" << index();",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    m_raw_inode.i_ctime = t;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "m_lookup_cache.find(name)",
          "old_line_content": "    child_inode_index = (*it).value;",
          "new_line_content": "    auto it = m_lookup_cache.find(name);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "m_lookup_cache.end()",
          "old_line_content": "",
          "new_line_content": "    if (it == m_lookup_cache.end())",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    m_raw_inode.i_mtime = t;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "    Vector<FS::DirectoryEntry> entries;",
          "new_line_content": "    dbg() << \"Ext2FSInode::remove_child(): Removing '\" << name << \"' in directory \" << index();",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "traverse_as_directory([&](auto& entry) {\n        if (name != entry.name)\n            entries.append(entry);\n        return true;\n    })",
          "old_line_content": "        return true;",
          "new_line_content": "    traverse_as_directory([&](auto& entry) {",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "entries.append(entry)",
          "old_line_content": "",
          "new_line_content": "            entries.append(entry);",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    ++m_raw_inode.i_links_count;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "get_inode",
          "old_text": null,
          "new_text": "fs().get_inode(child_id)",
          "old_line_content": "}",
          "new_line_content": "    auto child_inode = fs().get_inode(child_id);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "decrement_link_count",
          "old_text": null,
          "new_text": "child_inode->decrement_link_count()",
          "old_line_content": "",
          "new_line_content": "    child_inode->decrement_link_count();",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "is_readonly",
          "old_text": null,
          "new_text": "fs().is_readonly()",
          "old_line_content": "    --m_raw_inode.i_links_count;",
          "new_line_content": "    if (fs().is_readonly())",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "index()",
          "old_line_content": "}",
          "new_line_content": "        fs().uncache_inode(index());",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "unsigned Ext2FS::inodes_per_group() const",
          "new_line_content": "    return EXT2_INODES_PER_BLOCK(&super_block());",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "unsigned Ext2FS::inode_size() const",
          "new_line_content": "    return EXT2_INODES_PER_GROUP(&super_block());",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "remove",
          "old_text": null,
          "new_text": "m_inode_cache.remove(index)",
          "old_line_content": "size_t Ext2FSInode::directory_entry_count() const",
          "new_line_content": "    m_inode_cache.remove(index);",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "{",
          "new_line_content": "    return EXT2_INODE_SIZE(&super_block());",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "}",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "super_block",
          "old_text": null,
          "new_text": "super_block()",
          "old_line_content": "bool Ext2FS::write_ext2_inode(unsigned inode, const ext2_inode& e2inode)",
          "new_line_content": "    return EXT2_BLOCKS_PER_GROUP(&super_block());",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "populate_lookup_cache",
          "old_text": null,
          "new_text": "populate_lookup_cache()",
          "old_line_content": "",
          "new_line_content": "    populate_lookup_cache();",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_lookup_cache.size()",
          "old_line_content": "KResult Ext2FSInode::chmod(mode_t mode)",
          "new_line_content": "    return m_lookup_cache.size();",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    u8 block[max_block_size];",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    m_raw_inode.i_mode = mode;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "inode_size",
          "old_text": null,
          "new_text": "inode_size()",
          "old_line_content": "    return success;",
          "new_line_content": "    memcpy(reinterpret_cast<ext2_inode*>(block + offset), &e2inode, inode_size());",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "write_block",
          "old_text": null,
          "new_text": "write_block(block_index, block)",
          "old_line_content": "}",
          "new_line_content": "    bool success = write_block(block_index, block);",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(success)",
          "old_line_content": "",
          "new_line_content": "    ASSERT(success);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "    m_raw_inode.i_uid = uid;",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "LOCKER",
          "old_text": null,
          "new_text": "LOCKER(m_lock)",
          "old_line_content": "#endif",
          "new_line_content": "    LOCKER(m_lock);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "dbg",
          "old_text": null,
          "new_text": "dbg()",
          "old_line_content": "    GroupIndex group_index = preferred_group_index;",
          "new_line_content": "    dbg() << \"Ext2FS: allocate_block() preferred_group_index: \" << preferred_group_index;",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "set_metadata_dirty",
          "old_text": null,
          "new_text": "set_metadata_dirty(true)",
          "old_line_content": "",
          "new_line_content": "    set_metadata_dirty(true);",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(preferred_group_index)",
          "old_line_content": "        for (group_index = 1; group_index < m_block_group_count; ++group_index) {",
          "new_line_content": "    if (group_descriptor(preferred_group_index).bg_free_blocks_count) {",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "group_descriptor",
          "old_text": null,
          "new_text": "group_descriptor(group_index)",
          "old_line_content": "            }",
          "new_line_content": "            if (group_descriptor(group_index).bg_free_blocks_count) {",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "is_error",
          "old_text": null,
          "new_text": "result.is_error()",
          "old_line_content": "    return KSuccess;",
          "new_line_content": "    if (result.is_error())",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(found_a_group)",
          "new_text": null,
          "old_line_content": "    ASSERT(found_a_group);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "    auto& bgd = group_descriptor(group_index);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "get_bitmap_block",
          "new_api": null,
          "old_text": "get_bitmap_block(bgd.bg_block_bitmap)",
          "new_text": null,
          "old_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_block_bitmap);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return super_block().s_blocks_count;",
          "new_line_content": "unsigned Ext2FS::total_block_count() const",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(first_unset_bit_index != -1)",
          "new_text": null,
          "old_line_content": "    ASSERT(first_unset_bit_index != -1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return super_block().s_free_blocks_count;",
          "new_line_content": "unsigned Ext2FS::free_block_count() const",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return super_block().s_inodes_count;",
          "new_line_content": "unsigned Ext2FS::total_inode_count() const",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: allocate_blocks(preferred group: %u, count: %u)\\n\", preferred_group_index, count)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: allocate_blocks(preferred group: %u, count: %u)\\n\", preferred_group_index, count);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return super_block().s_free_inodes_count;",
          "new_line_content": "unsigned Ext2FS::free_inode_count() const",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "dbg",
          "new_api": null,
          "old_text": "dbg()",
          "new_text": null,
          "old_line_content": "    dbg() << \"Ext2FS: allocate_blocks:\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "ensure_capacity",
          "new_api": null,
          "old_text": "blocks.ensure_capacity(count)",
          "new_text": null,
          "old_line_content": "    blocks.ensure_capacity(count);",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "allocate_block",
          "new_api": null,
          "old_text": "allocate_block(preferred_group_index)",
          "new_text": null,
          "old_line_content": "        auto block_index = allocate_block(preferred_group_index);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "KResult",
          "new_api": null,
          "old_text": "KResult(-EBUSY)",
          "new_text": null,
          "old_line_content": "            return KResult(-EBUSY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "size",
          "new_api": null,
          "old_text": "blocks.size()",
          "new_text": null,
          "old_line_content": "    ASSERT(blocks.size() == count);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: allocate_inode(preferredGroup: %u, expected_size: %u)\\n\", preferred_group, expected_size)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: allocate_inode(preferredGroup: %u, expected_size: %u)\\n\", preferred_group, expected_size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "        auto& bgd = group_descriptor(group_index);",
          "new_line_content": "    unsigned group_index = 0;",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "is_suitable_group",
          "new_api": null,
          "old_text": "is_suitable_group(preferred_group)",
          "new_text": null,
          "old_line_content": "    if (preferred_group && is_suitable_group(preferred_group)) {",
          "new_line_content": "        return bgd.bg_free_inodes_count && bgd.bg_free_blocks_count >= needed_blocks;",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "is_suitable_group",
          "new_api": null,
          "old_text": "is_suitable_group(i)",
          "new_text": null,
          "old_line_content": "            if (is_suitable_group(i))",
          "new_line_content": "        group_index = preferred_group;",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "kprintf",
          "new_api": null,
          "old_text": "kprintf(\"Ext2FS: allocate_inode: no suitable group found for new inode with %u blocks needed :(\\n\", needed_blocks)",
          "new_text": null,
          "old_line_content": "        kprintf(\"Ext2FS: allocate_inode: no suitable group found for new inode with %u blocks needed :(\\n\", needed_blocks);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: allocate_inode: found suitable group [%u] for new inode with %u blocks needed :^)\\n\", group_index, needed_blocks)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: allocate_inode: found suitable group [%u] for new inode with %u blocks needed :^)\\n\", group_index, needed_blocks);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    unsigned inodes_in_group = min(inodes_per_group(), super_block().s_inodes_count);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "get_bitmap_block",
          "new_api": null,
          "old_text": "get_bitmap_block(bgd.bg_inode_bitmap)",
          "new_text": null,
          "old_line_content": "    auto& cached_bitmap = get_bitmap_block(bgd.bg_inode_bitmap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "size",
          "new_api": null,
          "old_text": "inode_bitmap.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < inode_bitmap.size(); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "kprintf",
          "new_api": null,
          "old_text": "kprintf(\"Ext2FS: first_free_inode_in_group returned no inode, despite bgd claiming there are inodes :(\\n\")",
          "new_text": null,
          "old_line_content": "        kprintf(\"Ext2FS: first_free_inode_in_group returned no inode, despite bgd claiming there are inodes :(\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: found suitable inode %u\\n\", inode)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: found suitable inode %u\\n\", inode);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "blocks_per_group",
          "new_api": null,
          "old_text": "blocks_per_group()",
          "new_text": null,
          "old_line_content": "    return (block_index - 1) / blocks_per_group() + 1;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "inodes_per_group",
          "new_api": null,
          "old_text": "inodes_per_group()",
          "new_text": null,
          "old_line_content": "    return (inode - 1) / inodes_per_group() + 1;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "    auto& bgd = group_descriptor(group_index);",
          "new_line_content": "    if (index == 0)",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "inodes_per_group",
          "new_api": null,
          "old_text": "inodes_per_group()",
          "new_text": null,
          "old_line_content": "    unsigned index_in_group = index - ((group_index - 1) * inodes_per_group());",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "group_index_from_inode",
          "new_api": null,
          "old_text": "group_index_from_inode(inode_index)",
          "new_text": null,
          "old_line_content": "    unsigned group_index = group_index_from_inode(inode_index);",
          "new_line_content": "bool Ext2FS::set_inode_allocation_state(InodeIndex inode_index, bool new_state)",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "    auto& bgd = group_descriptor(group_index);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "inodes_per_group",
          "new_api": null,
          "old_text": "inodes_per_group()",
          "new_text": null,
          "old_line_content": "    bool current_state = cached_bitmap.bitmap(inodes_per_group()).get(bit_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: set_inode_allocation_state(%u) %u -> %u\\n\", inode_index, current_state, new_state)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: set_inode_allocation_state(%u) %u -> %u\\n\", inode_index, current_state, new_state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "ASSERT_NOT_REACHED",
          "new_api": null,
          "old_text": "ASSERT_NOT_REACHED()",
          "new_text": null,
          "old_line_content": "        ASSERT_NOT_REACHED();",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "inodes_per_group",
          "new_api": null,
          "old_text": "inodes_per_group()",
          "new_text": null,
          "old_line_content": "    cached_bitmap.bitmap(inodes_per_group()).set(bit_index, new_state);",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "    u64 old_size = size();",
          "new_line_content": "    if (old_size == new_size)",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "ceil_div",
          "new_api": null,
          "old_text": "ceil_div(old_size, block_size)",
          "new_text": null,
          "old_line_content": "    int blocks_needed_before = ceil_div(old_size, block_size);",
          "new_line_content": "        return KSuccess;",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "ceil_div",
          "new_api": null,
          "old_text": "ceil_div(new_size, block_size)",
          "new_text": null,
          "old_line_content": "    int blocks_needed_after = ceil_div(new_size, block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: superblock free inode count %u -> %u\\n\", m_super_block.s_free_inodes_count, m_super_block.s_free_inodes_count - 1)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: superblock free inode count %u -> %u\\n\", m_super_block.s_free_inodes_count, m_super_block.s_free_inodes_count - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FSInode::resize(): blocks needed after  (size is  %Q): %d\\n\", new_size, blocks_needed_after)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FSInode::resize(): blocks needed after  (size is  %Q): %d\\n\", new_size, blocks_needed_after);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "fs().super_block()",
          "new_text": null,
          "old_line_content": "        if (additional_blocks_needed > fs().super_block().s_free_blocks_count)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "KResult",
          "new_api": null,
          "old_text": "KResult(-ENOSPC)",
          "new_text": null,
          "old_line_content": "            return KResult(-ENOSPC);",
          "new_line_content": "    if (blocks_needed_after > blocks_needed_before) {",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "const_cast<ext2_group_desc&>(bgd)",
          "new_api": null,
          "old_text": "const_cast<ext2_group_desc&>(bgd)",
          "new_text": null,
          "old_line_content": "    auto& mutable_bgd = const_cast<ext2_group_desc&>(bgd);",
          "new_line_content": "    m_super_block_dirty = true;",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "block_list_for_inode",
          "new_api": null,
          "old_text": "fs().block_list_for_inode(m_raw_inode)",
          "new_text": null,
          "old_line_content": "    auto block_list = fs().block_list_for_inode(m_raw_inode);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "        auto new_blocks = fs().allocate_blocks(fs().group_index_from_inode(index()), blocks_needed_after - blocks_needed_before);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: group free inode count %u -> %u\\n\", bgd.bg_free_inodes_count, bgd.bg_free_inodes_count - 1)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: group free inode count %u -> %u\\n\", bgd.bg_free_inodes_count, bgd.bg_free_inodes_count - 1);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"    # %u\\n\", block_index)",
          "new_text": null,
          "old_line_content": "            dbgprintf(\"    # %u\\n\", block_index);",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "take_last",
          "new_api": null,
          "old_text": "block_list.take_last()",
          "new_text": null,
          "old_line_content": "            auto block_index = block_list.take_last();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "set_block_allocation_state",
          "new_api": null,
          "old_text": "fs().set_block_allocation_state(block_index, false)",
          "new_text": null,
          "old_line_content": "            fs().set_block_allocation_state(block_index, false);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "block_size",
          "new_api": null,
          "old_text": "block_size()",
          "new_text": null,
          "old_line_content": "    return block_size() == 1024 ? 1 : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "    bool success = fs().write_block_list_for_inode(index(), m_raw_inode, block_list);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "KResult",
          "new_api": null,
          "old_text": "KResult(-EIO)",
          "new_text": null,
          "old_line_content": "        return KResult(-EIO);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "block_size",
          "new_api": null,
          "old_text": "block_size()",
          "new_text": null,
          "old_line_content": "    auto block = ByteBuffer::create_uninitialized(block_size());",
          "new_line_content": "            return *cached_bitmap;",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "data",
          "new_api": null,
          "old_text": "block.data()",
          "new_text": null,
          "old_line_content": "    bool success = read_block(bitmap_block_index, block.data());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(block_list)",
          "new_text": null,
          "old_line_content": "    m_block_list = move(block_list);",
          "new_line_content": "    m_raw_inode.i_size = new_size;",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(success)",
          "new_text": null,
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(offset >= 0)",
          "new_text": null,
          "old_line_content": "    ASSERT(offset >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(count >= 0)",
          "new_text": null,
          "old_line_content": "    ASSERT(count >= 0);",
          "new_line_content": "ssize_t Ext2FSInode::write_bytes(off_t offset, ssize_t count, const u8* data, FileDescription*)",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: set_block_allocation_state(block=%u, state=%u)\\n\", block_index, new_state)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: set_block_allocation_state(block=%u, state=%u)\\n\", block_index, new_state);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "is_symlink",
          "new_api": null,
          "old_text": "is_symlink()",
          "new_text": null,
          "old_line_content": "    if (is_symlink()) {",
          "new_line_content": "    Locker inode_locker(m_lock);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "    auto& bgd = group_descriptor(group_index);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "blocks_per_group",
          "new_api": null,
          "old_text": "blocks_per_group()",
          "new_text": null,
          "old_line_content": "    BlockIndex index_in_group = (block_index - first_block_index()) - ((group_index - 1) * blocks_per_group());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(((u8*)m_raw_inode.i_block) + offset, data, (size_t)count)",
          "new_text": null,
          "old_line_content": "            memcpy(((u8*)m_raw_inode.i_block) + offset, data, (size_t)count);",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "blocks_per_group",
          "new_api": null,
          "old_text": "blocks_per_group()",
          "new_text": null,
          "old_line_content": "    bool current_state = cached_bitmap.bitmap(blocks_per_group()).get(bit_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: block %u state: %u -> %u (in bitmap block %u)\\n\", block_index, current_state, new_state, bgd.bg_block_bitmap)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: block %u state: %u -> %u (in bitmap block %u)\\n\", block_index, current_state, new_state, bgd.bg_block_bitmap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "block_size",
          "new_api": null,
          "old_text": "fs().block_size()",
          "new_text": null,
          "old_line_content": "    const ssize_t block_size = fs().block_size();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "    u64 old_size = size();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "    u64 new_size = max(static_cast<u64>(offset) + count, (u64)size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "ASSERT_NOT_REACHED",
          "new_api": null,
          "old_text": "ASSERT_NOT_REACHED()",
          "new_text": null,
          "old_line_content": "        ASSERT_NOT_REACHED();",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "blocks_per_group",
          "new_api": null,
          "old_text": "blocks_per_group()",
          "new_text": null,
          "old_line_content": "    cached_bitmap.bitmap(blocks_per_group()).set(bit_index, new_state);",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: superblock free block count %u -> %u\\n\", m_super_block.s_free_blocks_count, m_super_block.s_free_blocks_count - 1)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: superblock free block count %u -> %u\\n\", m_super_block.s_free_blocks_count, m_super_block.s_free_blocks_count - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_block_list.size()",
          "new_text": null,
          "old_line_content": "    if (last_block_logical_index >= m_block_list.size())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_block_list.size()",
          "new_text": null,
          "old_line_content": "        last_block_logical_index = m_block_list.size() - 1;",
          "new_line_content": "    int first_block_logical_index = offset / block_size;",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "min",
          "new_api": null,
          "old_text": "min((off_t)count, (off_t)new_size - offset)",
          "new_text": null,
          "old_line_content": "    int remaining_count = min((off_t)count, (off_t)new_size - offset);",
          "new_line_content": "    int last_logical_block_index_in_file = new_size / block_size;",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "const_cast<ext2_group_desc&>(bgd)",
          "new_api": null,
          "old_text": "const_cast<ext2_group_desc&>(bgd)",
          "new_text": null,
          "old_line_content": "    auto& mutable_bgd = const_cast<ext2_group_desc&>(bgd);",
          "new_line_content": "    m_super_block_dirty = true;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FSInode::write_bytes: Writing %u bytes %d bytes into inode %u:%u from %p\\n\", count, offset, fsid(), index(), data);",
          "new_line_content": "    const u8* in = data;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: group %u free block count %u -> %u\\n\", group_index, bgd.bg_free_blocks_count, bgd.bg_free_blocks_count - 1)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: group %u free block count %u -> %u\\n\", group_index, bgd.bg_free_blocks_count, bgd.bg_free_blocks_count - 1);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "ByteBuffer::create_uninitialized(block_size)",
          "new_api": null,
          "old_text": "ByteBuffer::create_uninitialized(block_size)",
          "new_text": null,
          "old_line_content": "            block = ByteBuffer::create_uninitialized(block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "data",
          "new_api": null,
          "old_text": "block.data()",
          "new_text": null,
          "old_line_content": "            bool success = fs().read_block(m_block_list[bi], block.data());",
          "new_line_content": "        ByteBuffer block;",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "fsid",
          "new_api": null,
          "old_text": "fsid()",
          "new_text": null,
          "old_line_content": "    ASSERT(parent_id.fsid() == fsid());",
          "new_line_content": "RefPtr<Inode> Ext2FS::create_directory(InodeIdentifier parent_id, const String& name, mode_t mode, int& error)",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "data",
          "new_api": null,
          "old_text": "block.data()",
          "new_text": null,
          "old_line_content": "        memcpy(block.data() + offset_into_block, in, num_bytes_to_copy);",
          "new_line_content": "        } else",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "block_size",
          "new_api": null,
          "old_text": "block_size()",
          "new_text": null,
          "old_line_content": "    auto inode = create_inode(parent_id, name, mode, block_size(), 0, error);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FSInode::write_bytes padding last block of file with zero x %u (new_size=%u, offset_into_block=%u, num_bytes_to_copy=%u)\\n\", padding_bytes, new_size, offset_into_block, num_bytes_to_copy)",
          "new_text": null,
          "old_line_content": "            dbgprintf(\"Ext2FSInode::write_bytes padding last block of file with zero x %u (new_size=%u, offset_into_block=%u, num_bytes_to_copy=%u)\\n\", padding_bytes, new_size, offset_into_block, num_bytes_to_copy);",
          "new_line_content": "            int padding_start = new_size % block_size;",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "data",
          "new_api": null,
          "old_text": "block.data()",
          "new_text": null,
          "old_line_content": "            memset(block.data() + padding_start, 0, padding_bytes);",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "index",
          "new_api": null,
          "old_text": "inode->identifier().index()",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: create_directory: created new directory named '%s' with inode %u\\n\", name.characters(), inode->identifier().index());",
          "new_line_content": "        return nullptr;",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "identifier",
          "new_api": null,
          "old_text": "inode->identifier()",
          "new_text": null,
          "old_line_content": "    entries.empend(\".\", inode->identifier(), EXT2_FT_DIR);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "data",
          "new_api": null,
          "old_text": "block.data()",
          "new_text": null,
          "old_line_content": "        bool success = fs().write_block(m_block_list[bi], block.data());",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "empend",
          "new_api": null,
          "old_text": "entries.empend(\"..\", parent_id, EXT2_FT_DIR)",
          "new_text": null,
          "old_line_content": "    entries.empend(\"..\", parent_id, EXT2_FT_DIR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "kprintf",
          "new_api": null,
          "old_text": "kprintf(\"Ext2FSInode::write_bytes: write_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi)",
          "new_text": null,
          "old_line_content": "            kprintf(\"Ext2FSInode::write_bytes: write_block(%u) failed (lbi: %u)\\n\", m_block_list[bi], bi);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "index",
          "new_api": null,
          "old_text": "inode->identifier().index()",
          "new_text": null,
          "old_line_content": "    auto& bgd = const_cast<ext2_group_desc&>(group_descriptor(group_index_from_inode(inode->identifier().index())));",
          "new_line_content": "    if (error < 0)",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_block_list.size()",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FSInode::write_bytes: after write, i_size=%u, i_blocks=%u (%u blocks in list)\\n\", m_raw_inode.i_size, m_raw_inode.i_blocks, m_block_list.size());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "inode_size_changed",
          "new_api": null,
          "old_text": "inode_size_changed(old_size, new_size)",
          "new_text": null,
          "old_line_content": "        inode_size_changed(old_size, new_size);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "inode_contents_changed",
          "new_api": null,
          "old_text": "inode_contents_changed(offset, count, data)",
          "new_text": null,
          "old_line_content": "    inode_contents_changed(offset, count, data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "is_directory",
          "new_api": null,
          "old_text": "is_directory()",
          "new_text": null,
          "old_line_content": "    ASSERT(is_directory());",
          "new_line_content": "bool Ext2FSInode::traverse_as_directory(Function<bool(const FS::DirectoryEntry&)> callback) const",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "fsid",
          "new_api": null,
          "old_text": "fsid()",
          "new_text": null,
          "old_line_content": "    ASSERT(parent_id.fsid() == fsid());",
          "new_line_content": "RefPtr<Inode> Ext2FS::create_inode(InodeIdentifier parent_id, const String& name, mode_t mode, off_t size, dev_t dev, int& error)",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "get_inode",
          "new_api": null,
          "old_text": "get_inode(parent_id)",
          "new_text": null,
          "old_line_content": "    auto parent_inode = get_inode(parent_id);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(buffer)",
          "new_text": null,
          "old_line_content": "    ASSERT(buffer);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "data",
          "new_api": null,
          "old_text": "buffer.data()",
          "new_text": null,
          "old_line_content": "    auto* entry = reinterpret_cast<ext2_dir_entry_2*>(buffer.data());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    if ((size_t)needed_blocks > super_block().s_free_blocks_count) {",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "dbg",
          "new_api": null,
          "old_text": "dbg()",
          "new_text": null,
          "old_line_content": "        dbg() << \"Ext2FS: create_inode: not enough free blocks\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "fsid",
          "new_api": null,
          "old_text": "fsid()",
          "new_text": null,
          "old_line_content": "            if (!callback({ entry->name, entry->name_len, { fsid(), entry->inode }, entry->file_type }))",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "allocate_inode",
          "new_api": null,
          "old_text": "allocate_inode(0, size)",
          "new_text": null,
          "old_line_content": "    auto inode_id = allocate_inode(0, size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "kprintf",
          "new_api": null,
          "old_text": "kprintf(\"Ext2FS: create_inode: allocate_inode failed\\n\")",
          "new_text": null,
          "old_line_content": "        kprintf(\"Ext2FS: create_inode: allocate_inode failed\\n\");",
          "new_line_content": "    // NOTE: This doesn't commit the inode allocation just yet!",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "fsid",
          "new_api": null,
          "old_text": "fsid()",
          "new_text": null,
          "old_line_content": "    auto result = parent_inode->add_child({ fsid(), inode_id }, name, mode);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "result.is_error()",
          "new_text": null,
          "old_line_content": "    if (result.is_error()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: New directory inode %u contents to write:\\n\", index());",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "group_index_from_inode",
          "new_api": null,
          "old_text": "group_index_from_inode(inode_id)",
          "new_text": null,
          "old_line_content": "    auto blocks = allocate_blocks(group_index_from_inode(inode_id), needed_blocks);",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "size",
          "new_api": null,
          "old_text": "blocks.size()",
          "new_text": null,
          "old_line_content": "    ASSERT(blocks.size() == needed_blocks);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "EXT2_DIR_REC_LEN",
          "new_api": null,
          "old_text": "EXT2_DIR_REC_LEN(entry.name_length)",
          "new_text": null,
          "old_line_content": "        directory_size += EXT2_DIR_REC_LEN(entry.name_length);",
          "new_line_content": "    int directory_size = 0;",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(success)",
          "new_text": null,
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "ceil_div",
          "new_api": null,
          "old_text": "ceil_div(directory_size, block_size)",
          "new_text": null,
          "old_line_content": "    int blocks_needed = ceil_div(directory_size, block_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "dbgprintf",
          "new_api": null,
          "old_text": "dbgprintf(\"Ext2FS: directory size: %u (occupied: %u)\\n\", directory_size, occupied_size)",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Ext2FS: directory size: %u (occupied: %u)\\n\", directory_size, occupied_size);",
          "new_line_content": "    int occupied_size = blocks_needed * block_size;",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "kgettimeofday",
          "new_api": null,
          "old_text": "kgettimeofday(now)",
          "new_text": null,
          "old_line_content": "    kgettimeofday(now);",
          "new_line_content": "        initial_links_count = 1;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&e2inode, 0, sizeof(ext2_inode))",
          "new_text": null,
          "old_line_content": "    memset(&e2inode, 0, sizeof(ext2_inode));",
          "new_line_content": "    struct timeval now;",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "euid",
          "new_api": null,
          "old_text": "current->process().euid()",
          "new_text": null,
          "old_line_content": "    e2inode.i_uid = current->process().euid();",
          "new_line_content": "    ext2_inode e2inode;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "size",
          "new_api": null,
          "old_text": "entries.size()",
          "new_text": null,
          "old_line_content": "        if (i == entries.size() - 1)",
          "new_line_content": "        auto& entry = entries[i];",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "index",
          "new_api": null,
          "old_text": "entry.inode.index()",
          "new_text": null,
          "old_line_content": "        dbgprintf(\"* inode: %u\", entry.inode.index());",
          "new_line_content": "            record_length += occupied_size - directory_size;",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "u16",
          "new_api": null,
          "old_text": "u16(entry.name_length)",
          "new_text": null,
          "old_line_content": "        dbgprintf(\", name_len: %u\", u16(entry.name_length));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "u16",
          "new_api": null,
          "old_text": "u16(record_length)",
          "new_text": null,
          "old_line_content": "        dbgprintf(\", rec_len: %u\", u16(record_length));",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "is_character_device",
          "new_api": null,
          "old_text": "is_character_device(mode)",
          "new_text": null,
          "old_line_content": "    if (is_character_device(mode))",
          "new_line_content": "    e2inode.i_dtime = 0;",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "is_block_device",
          "new_api": null,
          "old_text": "is_block_device(mode)",
          "new_text": null,
          "old_line_content": "    else if (is_block_device(mode))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(success)",
          "new_text": null,
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "        e2inode.i_block[1] = dev;",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "u16",
          "new_api": null,
          "old_text": "u16(record_length)",
          "new_text": null,
          "old_line_content": "        stream << u16(record_length);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "u8",
          "new_api": null,
          "old_text": "u8(entry.name_length)",
          "new_text": null,
          "old_line_content": "        stream << u8(entry.name_length);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(success)",
          "new_text": null,
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "u8",
          "new_api": null,
          "old_text": "u8(0)",
          "new_text": null,
          "old_line_content": "            stream << u8(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "fsid",
          "new_api": null,
          "old_text": "fsid()",
          "new_text": null,
          "old_line_content": "    return get_inode({ fsid(), inode_id });",
          "new_line_content": "    // We might have cached the fact that this inode didn't exist. Wipe the slate.",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "data",
          "new_api": null,
          "old_text": "directory_data.data()",
          "new_text": null,
          "old_line_content": "    ssize_t nwritten = write_bytes(0, directory_data.size(), directory_data.data(), nullptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "m_lookup_cache.is_empty()",
          "new_text": null,
          "old_line_content": "    if (!m_lookup_cache.is_empty())",
          "new_line_content": "void Ext2FSInode::populate_lookup_cache() const",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "is_directory",
          "new_api": null,
          "old_text": "is_directory()",
          "new_text": null,
          "old_line_content": "    ASSERT(is_directory());",
          "new_line_content": "KResult Ext2FSInode::add_child(InodeIdentifier child_id, const StringView& name, mode_t mode)",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "set",
          "new_api": null,
          "old_text": "traverse_as_directory([&children](auto& entry) {\n        children.set(String(entry.name, entry.name_length), entry.inode.index());\n        return true;\n    })",
          "new_text": null,
          "old_line_content": "    traverse_as_directory([&children](auto& entry) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "index",
          "new_api": null,
          "old_text": "entry.inode.index()",
          "new_text": null,
          "old_line_content": "        children.set(String(entry.name, entry.name_length), entry.inode.index());",
          "new_line_content": "    HashMap<String, unsigned> children;",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "m_lookup_cache.is_empty()",
          "new_text": null,
          "old_line_content": "    if (!m_lookup_cache.is_empty())",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(children)",
          "new_text": null,
          "old_line_content": "    m_lookup_cache = move(children);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "append",
          "new_api": null,
          "old_text": "traverse_as_directory([&](auto& entry) {\n        if (name == entry.name) {\n            name_already_exists = true;\n            return false;\n        }\n        entries.append(entry);\n        return true;\n    })",
          "new_text": null,
          "old_line_content": "    traverse_as_directory([&](auto& entry) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "is_directory",
          "new_api": null,
          "old_text": "is_directory()",
          "new_text": null,
          "old_line_content": "    ASSERT(is_directory());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "populate_lookup_cache",
          "new_api": null,
          "old_text": "populate_lookup_cache()",
          "new_text": null,
          "old_line_content": "    populate_lookup_cache();",
          "new_line_content": "InodeIdentifier Ext2FSInode::lookup(StringView name)",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "append",
          "new_api": null,
          "old_text": "entries.append(entry)",
          "new_text": null,
          "old_line_content": "        entries.append(entry);",
          "new_line_content": "            name_already_exists = true;",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "        dbg() << \"Ext2FSInode::add_child(): Name '\" << name << \"' already exists in inode \" << index();",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "KResult",
          "new_api": null,
          "old_text": "KResult(-EEXIST)",
          "new_text": null,
          "old_line_content": "        return KResult(-EEXIST);",
          "new_line_content": "    });",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "increment_link_count",
          "new_api": null,
          "old_text": "child_inode->increment_link_count()",
          "new_text": null,
          "old_line_content": "        child_inode->increment_link_count();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "to_ext2_file_type",
          "new_api": null,
          "old_text": "to_ext2_file_type(mode)",
          "new_text": null,
          "old_line_content": "    entries.empend(name.characters_without_null_termination(), name.length(), child_id, to_ext2_file_type(mode));",
          "new_line_content": "    if (child_inode)",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "fs().is_readonly()",
          "new_text": null,
          "old_line_content": "    if (fs().is_readonly())",
          "new_line_content": "int Ext2FSInode::set_atime(time_t t)",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "index",
          "new_api": null,
          "old_text": "index()",
          "new_text": null,
          "old_line_content": "    dbg() << \"Ext2FSInode::remove_child(\" << name << \") in inode \" << index();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "is_directory",
          "new_api": null,
          "old_text": "is_directory()",
          "new_text": null,
          "old_line_content": "    ASSERT(is_directory());",
          "new_line_content": "#ifdef EXT2_DEBUG",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "fs().is_readonly()",
          "new_text": null,
          "old_line_content": "    if (fs().is_readonly())",
          "new_line_content": "int Ext2FSInode::set_ctime(time_t t)",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "end",
          "new_api": null,
          "old_text": "m_lookup_cache.end()",
          "new_text": null,
          "old_line_content": "    if (it == m_lookup_cache.end())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "KResult",
          "new_api": null,
          "old_text": "KResult(-ENOENT)",
          "new_text": null,
          "old_line_content": "        return KResult(-ENOENT);",
          "new_line_content": "    unsigned child_inode_index;",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "fs().is_readonly()",
          "new_text": null,
          "old_line_content": "    if (fs().is_readonly())",
          "new_line_content": "int Ext2FSInode::set_mtime(time_t t)",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "append",
          "new_api": null,
          "old_text": "traverse_as_directory([&](auto& entry) {\n        if (name != entry.name)\n            entries.append(entry);\n        return true;\n    })",
          "new_text": null,
          "old_line_content": "    traverse_as_directory([&](auto& entry) {",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "append",
          "new_api": null,
          "old_text": "entries.append(entry)",
          "new_text": null,
          "old_line_content": "            entries.append(entry);",
          "new_line_content": "    Vector<FS::DirectoryEntry> entries;",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "fs().is_readonly()",
          "new_text": null,
          "old_line_content": "    if (fs().is_readonly())",
          "new_line_content": "int Ext2FSInode::increment_link_count()",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "write_directory",
          "new_api": null,
          "old_text": "write_directory(entries)",
          "new_text": null,
          "old_line_content": "    bool success = write_directory(entries);",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "get_inode",
          "new_api": null,
          "old_text": "fs().get_inode(child_id)",
          "new_text": null,
          "old_line_content": "    auto child_inode = fs().get_inode(child_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "is_readonly",
          "new_api": null,
          "old_text": "fs().is_readonly()",
          "new_text": null,
          "old_line_content": "    if (fs().is_readonly())",
          "new_line_content": "int Ext2FSInode::decrement_link_count()",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return EXT2_INODES_PER_BLOCK(&super_block());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "set_metadata_dirty",
          "new_api": null,
          "old_text": "set_metadata_dirty(true)",
          "new_text": null,
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    --m_raw_inode.i_links_count;",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return EXT2_INODES_PER_GROUP(&super_block());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "remove",
          "new_api": null,
          "old_text": "m_inode_cache.remove(index)",
          "new_text": null,
          "old_line_content": "    m_inode_cache.remove(index);",
          "new_line_content": "void Ext2FS::uncache_inode(InodeIndex index)",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return EXT2_INODE_SIZE(&super_block());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "is_directory",
          "new_api": null,
          "old_text": "is_directory()",
          "new_text": null,
          "old_line_content": "    ASSERT(is_directory());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "size_t Ext2FSInode::directory_entry_count() const",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "super_block",
          "new_api": null,
          "old_text": "super_block()",
          "new_text": null,
          "old_line_content": "    return EXT2_BLOCKS_PER_GROUP(&super_block());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": "populate_lookup_cache",
          "new_api": null,
          "old_text": "populate_lookup_cache()",
          "new_text": null,
          "old_line_content": "    populate_lookup_cache();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "read_block_containing_inode",
          "new_api": null,
          "old_text": "read_block_containing_inode(inode, block_index, offset, block)",
          "new_text": null,
          "old_line_content": "    if (!read_block_containing_inode(inode, block_index, offset, block))",
          "new_line_content": "    unsigned block_index;",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "set_metadata_dirty",
          "new_api": null,
          "old_text": "set_metadata_dirty(true)",
          "new_text": null,
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "    if (m_raw_inode.i_mode == mode)",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "inode_size",
          "new_api": null,
          "old_text": "inode_size()",
          "new_text": null,
          "old_line_content": "    memcpy(reinterpret_cast<ext2_inode*>(block + offset), &e2inode, inode_size());",
          "new_line_content": "    u8 block[max_block_size];",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(success)",
          "new_text": null,
          "old_line_content": "    ASSERT(success);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "dbg",
          "new_api": null,
          "old_text": "dbg()",
          "new_text": null,
          "old_line_content": "    dbg() << \"Ext2FS: allocate_block() preferred_group_index: \" << preferred_group_index;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "set_metadata_dirty",
          "new_api": null,
          "old_text": "set_metadata_dirty(true)",
          "new_text": null,
          "old_line_content": "    set_metadata_dirty(true);",
          "new_line_content": "        return KSuccess;",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(preferred_group_index)",
          "new_text": null,
          "old_line_content": "    if (group_descriptor(preferred_group_index).bg_free_blocks_count) {",
          "new_line_content": "    bool found_a_group = false;",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": "LOCKER",
          "new_api": null,
          "old_text": "LOCKER(m_lock)",
          "new_text": null,
          "old_line_content": "    LOCKER(m_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "group_descriptor",
          "new_api": null,
          "old_text": "group_descriptor(group_index)",
          "new_text": null,
          "old_line_content": "            if (group_descriptor(group_index).bg_free_blocks_count) {",
          "new_line_content": "        found_a_group = true;",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "is_error",
          "new_api": null,
          "old_text": "result.is_error()",
          "new_text": null,
          "old_line_content": "    if (result.is_error())",
          "new_line_content": "    if ((off_t)m_raw_inode.i_size == size)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 96,
      "total_additions": 202,
      "total_deletions": 202,
      "total_api_changes": 500
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 500,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 687,
    "api_calls_after": 687,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 1,
      "total_diff_lines": 18
    }
  }
}
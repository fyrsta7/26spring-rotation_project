{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7ab62ecd16fe7bb86676d9d56a66d919e48cf685",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7ab62ecd16fe7bb86676d9d56a66d919e48cf685/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7ab62ecd16fe7bb86676d9d56a66d919e48cf685/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/7ab62ecd16fe7bb86676d9d56a66d919e48cf685/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 29,
          "old_api": "width",
          "new_api": "max",
          "old_text": "rect.width()",
          "new_text": "max(f, width_reciprocal * (top_left_radius_px + top_right_radius_px))",
          "old_line_content": "    f = min(f, rect.width() / (float)(bottom_left_radius_px + bottom_right_radius_px));",
          "new_line_content": "    f = max(f, width_reciprocal * (top_left_radius_px + top_right_radius_px));",
          "content_same": false
        },
        {
          "line": 30,
          "old_api": "height",
          "new_api": "max",
          "old_text": "rect.height()",
          "new_text": "max(f, height_reciprocal * (top_right_radius_px + bottom_right_radius_px))",
          "old_line_content": "    f = min(f, rect.height() / (float)(top_left_radius_px + bottom_left_radius_px));",
          "new_line_content": "    f = max(f, height_reciprocal * (top_right_radius_px + bottom_right_radius_px));",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": "bottom_right",
          "new_api": "top_right",
          "old_text": "rect.bottom_right()",
          "new_text": "rect.top_right()",
          "old_line_content": "            return { rect.bottom_left(), rect.bottom_right() };",
          "new_line_content": "            return { rect.top_left(), rect.top_right() };",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "bottom_left",
          "new_api": "bottom_right",
          "old_text": "rect.bottom_left()",
          "new_text": "rect.bottom_right()",
          "old_line_content": "            return { rect.top_left(), rect.bottom_left() };",
          "new_line_content": "            return { rect.top_right(), rect.bottom_right() };",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": "points_for_edge",
          "new_api": "bottom_left",
          "old_text": "points_for_edge(edge, rect)",
          "new_text": "rect.bottom_left()",
          "old_line_content": "    auto [p1, p2] = points_for_edge(edge, rect);",
          "new_line_content": "            return { rect.top_left(), rect.bottom_left() };",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": "Color::from_rgb(0x888888)",
          "new_api": "points_for_edge",
          "old_text": "Color::from_rgb(0x888888)",
          "new_text": "points_for_edge(edge, rect)",
          "old_line_content": "        auto bottom_right_color = Color::from_rgb(0x888888);",
          "new_line_content": "    auto [p1, p2] = points_for_edge(edge, rect);",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "Color::from_rgb(0x888888)",
          "new_api": "Color::from_rgb(0x5a5a5a)",
          "old_text": "Color::from_rgb(0x888888)",
          "new_text": "Color::from_rgb(0x5a5a5a)",
          "old_line_content": "        auto top_left_color = Color::from_rgb(0x888888);",
          "new_line_content": "        auto top_left_color = Color::from_rgb(0x5a5a5a);",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "Color::from_rgb(0x5a5a5a)",
          "new_api": "Color::from_rgb(0x888888)",
          "old_text": "Color::from_rgb(0x5a5a5a)",
          "new_text": "Color::from_rgb(0x888888)",
          "old_line_content": "        auto bottom_right_color = Color::from_rgb(0x5a5a5a);",
          "new_line_content": "        auto bottom_right_color = Color::from_rgb(0x888888);",
          "content_same": false
        },
        {
          "line": 122,
          "old_api": "y",
          "new_api": "translate_by",
          "old_text": "p2.y()",
          "new_text": "p1.translate_by(int_width / 2, int_width / 2)",
          "old_line_content": "        context.painter().draw_line({ (int)p1.x(), (int)p1.y() }, { (int)p2.x(), (int)p2.y() }, color, int_width, gfx_line_style);",
          "new_line_content": "            p1.translate_by(int_width / 2, int_width / 2);",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "x",
          "new_api": "width",
          "old_text": "border_rect.x()",
          "new_text": "border_rect.width()",
          "old_line_content": "        border_rect.x(),",
          "new_line_content": "        border_rect.width() - top_left_radius - top_right_radius,",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "y",
          "new_api": "height",
          "old_text": "border_rect.y()",
          "new_text": "border_rect.height()",
          "old_line_content": "        border_rect.y() + top_right_radius,",
          "new_line_content": "        border_rect.height()",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "x",
          "new_api": "width",
          "old_text": "border_rect.x()",
          "new_text": "border_rect.width()",
          "old_line_content": "        border_rect.x() + bottom_left_radius,",
          "new_line_content": "        border_rect.width(),",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "y",
          "new_api": "height",
          "old_text": "border_rect.y()",
          "new_text": "border_rect.height()",
          "old_line_content": "        border_rect.y(),",
          "new_line_content": "        border_rect.height() - top_right_radius - bottom_right_radius",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "x",
          "new_api": "width",
          "old_text": "border_rect.x()",
          "new_text": "border_rect.width()",
          "old_line_content": "        border_rect.x(),",
          "new_line_content": "        border_rect.width() - bottom_left_radius - bottom_right_radius,",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "y",
          "new_api": "height",
          "old_text": "border_rect.y()",
          "new_text": "border_rect.height()",
          "old_line_content": "        border_rect.y() + top_left_radius,",
          "new_line_content": "        border_rect.height()",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": "Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data)",
          "new_api": "width",
          "old_text": "Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data)",
          "new_text": "border_rect.width()",
          "old_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data);",
          "new_line_content": "        border_rect.width(),",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data)",
          "new_api": "height",
          "old_text": "Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data)",
          "new_text": "border_rect.height()",
          "old_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data);",
          "new_line_content": "        border_rect.height() - top_left_radius - bottom_left_radius",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": "set_x",
          "new_api": "x",
          "old_text": "center.set_x(radius)",
          "new_text": "to.x()",
          "old_line_content": "            center.set_x(radius);",
          "new_line_content": "        auto radius = fabsf(from.x() - to.x());",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "set_y",
          "new_api": "y",
          "old_text": "offset.set_y(1)",
          "new_text": "to.y()",
          "old_line_content": "            offset.set_y(1);",
          "new_line_content": "        if (from.x() < to.x() && from.y() > to.y()) {",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "x",
          "new_api": "set_y",
          "old_text": "from.x()",
          "new_text": "center.set_y(radius)",
          "old_line_content": "            circle_position.set_x(from.x());",
          "new_line_content": "            center.set_y(radius);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "set_x",
          "new_api": "y",
          "old_text": "offset.set_x(-1)",
          "new_text": "to.y()",
          "old_line_content": "            offset.set_x(-1);",
          "new_line_content": "        } else if (from.x() < to.x() && from.y() < to.y()) {",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "y",
          "new_api": "x",
          "old_text": "to.y()",
          "new_text": "from.x()",
          "old_line_content": "        } else if (from.x() > to.x() && from.y() < to.y()) {",
          "new_line_content": "            circle_position.set_x(from.x());",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "x",
          "new_api": "set_x",
          "old_text": "to.x()",
          "new_text": "offset.set_x(-1)",
          "old_line_content": "            circle_position.set_x(to.x());",
          "new_line_content": "            offset.set_x(-1);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "y",
          "new_api": "set_y",
          "old_text": "from.y()",
          "new_text": "offset.set_y(1)",
          "old_line_content": "            circle_position.set_y(from.y());",
          "new_line_content": "            offset.set_y(1);",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "set_x",
          "new_api": "y",
          "old_text": "offset.set_x(-1)",
          "new_text": "to.y()",
          "old_line_content": "            offset.set_x(-1);",
          "new_line_content": "        } else if (from.x() > to.x() && from.y() < to.y()) {",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "width",
          "new_api": "draw_quarter_circle",
          "old_text": "top_border_rect.width()",
          "new_text": "draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width)",
          "old_line_content": "        Gfx::FloatPoint arc_start = { top_left_radius + top_border_rect.width(), 0 };",
          "new_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "height",
          "new_api": "draw_quarter_circle",
          "old_text": "right_border_rect.height()",
          "new_text": "draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width)",
          "old_line_content": "        Gfx::FloatPoint arc_start = { bordered_rect.width(), top_right_radius + right_border_rect.height() };",
          "new_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "height",
          "new_api": "draw_quarter_circle",
          "old_text": "bordered_rect.height()",
          "new_text": "draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width)",
          "old_line_content": "        Gfx::FloatPoint arc_start = { bottom_left_radius, bordered_rect.height() };",
          "new_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 257,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "circle_position.x()",
          "old_line_content": "        };",
          "new_line_content": "            border_rect.x() + circle_position.x(),",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "circle_position.y()",
          "old_line_content": "",
          "new_line_content": "            border_rect.y() + circle_position.y(),",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "p2.y()",
          "old_line_content": "    float p2_step = 0;",
          "new_line_content": "        context.painter().draw_line({ (int)p1.x(), (int)p1.y() }, { (int)p2.x(), (int)p2.y() }, color, 1, gfx_line_style);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "painter",
          "old_text": null,
          "new_text": "context.painter().draw_circle_arc_intersecting(\n            Gfx::enclosing_int_rect(circle_rect),\n            (center + offset).to_rounded<int>(),\n            radius,\n            color,\n            thickness)",
          "old_line_content": "            color,",
          "new_line_content": "        context.painter().draw_circle_arc_intersecting(",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "Gfx::enclosing_int_rect(circle_rect)",
          "old_text": null,
          "new_text": "Gfx::enclosing_int_rect(circle_rect)",
          "old_line_content": "            thickness);",
          "new_line_content": "            Gfx::enclosing_int_rect(circle_rect),",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "center + offset).to_rounded<int>()",
          "old_text": null,
          "new_text": "center + offset).to_rounded<int>()",
          "old_line_content": "    };",
          "new_line_content": "            (center + offset).to_rounded<int>(),",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": null,
          "new_api": "draw_line",
          "old_text": null,
          "new_text": "draw_line(p1, p2)",
          "old_line_content": "        break;",
          "new_line_content": "            draw_line(p1, p2);",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p1.translate_by(p1_step, 1)",
          "old_line_content": "    case BorderEdge::Right:",
          "new_line_content": "            p1.translate_by(p1_step, 1);",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p2.translate_by(-p2_step, 1)",
          "old_line_content": "        p1_step = has_top_right_radius ? 0 : borders_data.top.width / (float)int_width;",
          "new_line_content": "            p2.translate_by(-p2_step, 1);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "top_border_rect.width()",
          "old_line_content": "",
          "new_line_content": "        Gfx::FloatPoint arc_start = { top_left_radius + top_border_rect.width(), 0 };",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "bordered_rect.width()",
          "old_line_content": "    if (bottom_right_radius != 0) {",
          "new_line_content": "        Gfx::FloatPoint arc_end = { bordered_rect.width(), top_right_radius };",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": null,
          "new_api": "draw_line",
          "old_text": null,
          "new_text": "draw_line(p1, p2)",
          "old_line_content": "        break;",
          "new_line_content": "            draw_line(p1, p2);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p1.translate_by(-1, p1_step)",
          "old_line_content": "    case BorderEdge::Bottom:",
          "new_line_content": "            p1.translate_by(-1, p1_step);",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p2.translate_by(-1, -p2_step)",
          "old_line_content": "        p1_step = has_bottom_left_radius ? 0 : borders_data.left.width / (float)int_width;",
          "new_line_content": "            p2.translate_by(-1, -p2_step);",
          "content_same": false
        },
        {
          "line": 31,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(f, width_reciprocal * (bottom_left_radius_px + bottom_right_radius_px))",
          "old_line_content": "",
          "new_line_content": "    f = max(f, width_reciprocal * (bottom_left_radius_px + bottom_right_radius_px));",
          "content_same": false
        },
        {
          "line": 32,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(f, height_reciprocal * (top_left_radius_px + bottom_left_radius_px))",
          "old_line_content": "    top_left_radius_px = (int)(top_left_radius_px * f);",
          "new_line_content": "    f = max(f, height_reciprocal * (top_left_radius_px + bottom_left_radius_px));",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "right_border_rect.height()",
          "old_line_content": "",
          "new_line_content": "        Gfx::FloatPoint arc_start = { bordered_rect.width(), top_right_radius + right_border_rect.height() };",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "bordered_rect.height()",
          "old_line_content": "    if (bottom_left_radius != 0) {",
          "new_line_content": "        Gfx::FloatPoint arc_end = { bottom_border_rect.width() + bottom_left_radius, bordered_rect.height() };",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "bordered_rect.height()",
          "old_line_content": "}",
          "new_line_content": "        Gfx::FloatPoint arc_start = { bottom_left_radius, bordered_rect.height() };",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "bordered_rect.height()",
          "old_line_content": "",
          "new_line_content": "        Gfx::FloatPoint arc_end = { 0, bordered_rect.height() - bottom_left_radius };",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": null,
          "new_api": "draw_line",
          "old_text": null,
          "new_text": "draw_line(p1, p2)",
          "old_line_content": "        break;",
          "new_line_content": "            draw_line(p1, p2);",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p1.translate_by(p1_step, -1)",
          "old_line_content": "    case BorderEdge::Left:",
          "new_line_content": "            p1.translate_by(p1_step, -1);",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p2.translate_by(-p2_step, -1)",
          "old_line_content": "        p1_step = has_top_left_radius ? 0 : borders_data.top.width / (float)int_width;",
          "new_line_content": "            p2.translate_by(-p2_step, -1);",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": null,
          "new_api": "draw_quarter_circle",
          "old_text": null,
          "new_text": "draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width)",
          "old_line_content": "}",
          "new_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width);",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "draw_line",
          "old_text": null,
          "new_text": "draw_line(p1, p2)",
          "old_line_content": "        break;",
          "new_line_content": "            draw_line(p1, p2);",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p1.translate_by(1, p1_step)",
          "old_line_content": "    }",
          "new_line_content": "            p1.translate_by(1, p1_step);",
          "content_same": false
        },
        {
          "line": 48,
          "old_api": null,
          "new_api": "enclosing_int_rect",
          "old_text": null,
          "new_text": "enclosing_int_rect(a_rect).to_type<float>()",
          "old_line_content": "        case BorderEdge::Top:",
          "new_line_content": "    auto rect = enclosing_int_rect(a_rect).to_type<float>();",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p2.translate_by(1, -p2_step)",
          "old_line_content": "}",
          "new_line_content": "            p2.translate_by(1, -p2_step);",
          "content_same": false
        },
        {
          "line": 50,
          "old_api": null,
          "new_api": "[&] {\n        switch (edge) {\n        case BorderEdge::Top:\n            return borders_data.top;\n        case BorderEdge::Right:\n            return borders_data.right;\n        case BorderEdge::Bottom:\n            return borders_data.bottom;\n        default: // BorderEdge::Left:\n            return borders_data.left;\n        }\n    }()",
          "old_text": null,
          "new_text": "[&] {\n        switch (edge) {\n        case BorderEdge::Top:\n            return borders_data.top;\n        case BorderEdge::Right:\n            return borders_data.right;\n        case BorderEdge::Bottom:\n            return borders_data.bottom;\n        default: // BorderEdge::Left:\n            return borders_data.left;\n        }\n    }()",
          "old_line_content": "        case BorderEdge::Right:",
          "new_line_content": "    const auto& border_data = [&] {",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "border_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        border_rect.x() + top_left_radius,",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "border_rect.y()",
          "old_line_content": "    Gfx::FloatRect right_border_rect = {",
          "new_line_content": "        border_rect.y(),",
          "content_same": false
        },
        {
          "line": 69,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max((int)width, 1)",
          "old_line_content": "        Gfx::FloatPoint p2;",
          "new_line_content": "    int int_width = max((int)width, 1);",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "border_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        border_rect.x(),",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "border_rect.y()",
          "old_line_content": "    Gfx::FloatRect bottom_border_rect = {",
          "new_line_content": "        border_rect.y() + top_right_radius,",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "border_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        border_rect.x() + bottom_left_radius,",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "border_rect.y()",
          "old_line_content": "    Gfx::FloatRect left_border_rect = {",
          "new_line_content": "        border_rect.y(),",
          "content_same": false
        },
        {
          "line": 83,
          "old_api": null,
          "new_api": "bottom_right",
          "old_text": null,
          "new_text": "rect.bottom_right()",
          "old_line_content": "    };",
          "new_line_content": "            return { rect.bottom_left(), rect.bottom_right() };",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "border_rect.x()",
          "old_line_content": "    };",
          "new_line_content": "        border_rect.x(),",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "border_rect.y()",
          "old_line_content": "",
          "new_line_content": "        border_rect.y() + top_left_radius,",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data)",
          "old_text": null,
          "new_text": "Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data)",
          "old_line_content": "",
          "new_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Top, top_border_rect, border_radius_data, borders_data);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data)",
          "old_text": null,
          "new_text": "Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data)",
          "old_line_content": "    // Draws a quarter circle clockwise",
          "new_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Right, right_border_rect, border_radius_data, borders_data);",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data)",
          "old_text": null,
          "new_text": "Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data)",
          "old_line_content": "    auto draw_quarter_circle = [&](Gfx::FloatPoint const& from, Gfx::FloatPoint const& to, Gfx::Color color, int thickness) {",
          "new_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data);",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data)",
          "old_text": null,
          "new_text": "Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data)",
          "old_line_content": "        Gfx::FloatPoint center = { 0, 0 };",
          "new_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data);",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": null,
          "new_api": "Color::from_rgb(0x888888)",
          "old_text": null,
          "new_text": "Color::from_rgb(0x888888)",
          "old_line_content": "",
          "new_line_content": "        auto top_left_color = Color::from_rgb(0x888888);",
          "content_same": false
        },
        {
          "line": 97,
          "old_api": null,
          "new_api": "Color::from_rgb(0x5a5a5a)",
          "old_text": null,
          "new_text": "Color::from_rgb(0x5a5a5a)",
          "old_line_content": "    auto gfx_line_style = Gfx::Painter::LineStyle::Solid;",
          "new_line_content": "        auto bottom_right_color = Color::from_rgb(0x5a5a5a);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "set_x",
          "old_text": null,
          "new_text": "center.set_x(radius)",
          "old_line_content": "            // top-right",
          "new_line_content": "            center.set_x(radius);",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "set_y",
          "old_text": null,
          "new_text": "center.set_y(radius)",
          "old_line_content": "            // bottom-right",
          "new_line_content": "            center.set_y(radius);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "x",
          "old_text": null,
          "new_text": "to.x()",
          "old_line_content": "            // bottom-left",
          "new_line_content": "            circle_position.set_x(to.x());",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "to.y()",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (from.x() > to.x() && from.y() > to.y()) {",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "to.y()",
          "old_line_content": "            return;",
          "new_line_content": "            circle_position.set_y(to.y());",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "set_x",
          "old_text": null,
          "new_text": "center.set_x(radius)",
          "old_line_content": "        }",
          "new_line_content": "            center.set_x(radius);",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": null,
          "new_api": "translate_by",
          "old_text": null,
          "new_text": "p2.translate_by(int_width / 2, -int_width / 2)",
          "old_line_content": "        return;",
          "new_line_content": "            p2.translate_by(int_width / 2, -int_width / 2);",
          "content_same": false
        },
        {
          "line": 126,
          "old_api": null,
          "new_api": "y",
          "old_text": null,
          "new_text": "p2.y()",
          "old_line_content": "    auto draw_line = [&](auto& p1, auto& p2) {",
          "new_line_content": "        context.painter().draw_line({ (int)p1.x(), (int)p1.y() }, { (int)p2.x(), (int)p2.y() }, color, int_width, gfx_line_style);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 259,
          "old_api": "painter",
          "new_api": null,
          "old_text": "context.painter().draw_circle_arc_intersecting(\n            Gfx::enclosing_int_rect(circle_rect),\n            (center + offset).to_rounded<int>(),\n            radius,\n            color,\n            thickness)",
          "new_text": null,
          "old_line_content": "        context.painter().draw_circle_arc_intersecting(",
          "new_line_content": "            radius,",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "Gfx::enclosing_int_rect(circle_rect)",
          "new_api": null,
          "old_text": "Gfx::enclosing_int_rect(circle_rect)",
          "new_text": null,
          "old_line_content": "            Gfx::enclosing_int_rect(circle_rect),",
          "new_line_content": "            radius",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "center + offset).to_rounded<int>()",
          "new_api": null,
          "old_text": "center + offset).to_rounded<int>()",
          "new_text": null,
          "old_line_content": "            (center + offset).to_rounded<int>(),",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 143,
          "old_api": "draw_line",
          "new_api": null,
          "old_text": "draw_line(p1, p2)",
          "new_text": null,
          "old_line_content": "            draw_line(p1, p2);",
          "new_line_content": "    case BorderEdge::Top:",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p1.translate_by(p1_step, 1)",
          "new_text": null,
          "old_line_content": "            p1.translate_by(p1_step, 1);",
          "new_line_content": "        p1_step = has_top_left_radius ? 0 : borders_data.left.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p2.translate_by(-p2_step, 1)",
          "new_text": null,
          "old_line_content": "            p2.translate_by(-p2_step, 1);",
          "new_line_content": "        p2_step = has_top_right_radius ? 0 : borders_data.right.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "draw_quarter_circle",
          "new_api": null,
          "old_text": "draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width)",
          "new_text": null,
          "old_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width);",
          "new_line_content": "    // FIXME: Which color to use?",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "width",
          "new_api": null,
          "old_text": "bordered_rect.width()",
          "new_text": null,
          "old_line_content": "        Gfx::FloatPoint arc_end = { bordered_rect.width(), top_right_radius };",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "draw_quarter_circle",
          "new_api": null,
          "old_text": "draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width)",
          "new_text": null,
          "old_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.top.color, borders_data.top.width);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": "draw_line",
          "new_api": null,
          "old_text": "draw_line(p1, p2)",
          "new_text": null,
          "old_line_content": "            draw_line(p1, p2);",
          "new_line_content": "    case BorderEdge::Right:",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p1.translate_by(-1, p1_step)",
          "new_text": null,
          "old_line_content": "            p1.translate_by(-1, p1_step);",
          "new_line_content": "        p1_step = has_top_right_radius ? 0 : borders_data.top.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p2.translate_by(-1, -p2_step)",
          "new_text": null,
          "old_line_content": "            p2.translate_by(-1, -p2_step);",
          "new_line_content": "        p2_step = has_bottom_right_radius ? 0 : borders_data.bottom.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "height",
          "new_api": null,
          "old_text": "bordered_rect.height()",
          "new_text": null,
          "old_line_content": "        Gfx::FloatPoint arc_end = { bottom_border_rect.width() + bottom_left_radius, bordered_rect.height() };",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "draw_quarter_circle",
          "new_api": null,
          "old_text": "draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width)",
          "new_text": null,
          "old_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "height",
          "new_api": null,
          "old_text": "bordered_rect.height()",
          "new_text": null,
          "old_line_content": "        Gfx::FloatPoint arc_end = { 0, bordered_rect.height() - bottom_left_radius };",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "draw_line",
          "new_api": null,
          "old_text": "draw_line(p1, p2)",
          "new_text": null,
          "old_line_content": "            draw_line(p1, p2);",
          "new_line_content": "    case BorderEdge::Bottom:",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p1.translate_by(p1_step, -1)",
          "new_text": null,
          "old_line_content": "            p1.translate_by(p1_step, -1);",
          "new_line_content": "        p1_step = has_bottom_left_radius ? 0 : borders_data.left.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p2.translate_by(-p2_step, -1)",
          "new_text": null,
          "old_line_content": "            p2.translate_by(-p2_step, -1);",
          "new_line_content": "        p2_step = has_bottom_right_radius ? 0 : borders_data.right.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "draw_quarter_circle",
          "new_api": null,
          "old_text": "draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width)",
          "new_text": null,
          "old_line_content": "        draw_quarter_circle(arc_start, arc_end, borders_data.bottom.color, borders_data.bottom.width);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "draw_line",
          "new_api": null,
          "old_text": "draw_line(p1, p2)",
          "new_text": null,
          "old_line_content": "            draw_line(p1, p2);",
          "new_line_content": "    case BorderEdge::Left:",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p1.translate_by(1, p1_step)",
          "new_text": null,
          "old_line_content": "            p1.translate_by(1, p1_step);",
          "new_line_content": "        p1_step = has_top_left_radius ? 0 : borders_data.top.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 44,
          "old_api": "enclosing_int_rect",
          "new_api": null,
          "old_text": "enclosing_int_rect(a_rect).to_type<float>()",
          "new_text": null,
          "old_line_content": "    auto rect = enclosing_int_rect(a_rect).to_type<float>();",
          "new_line_content": "void paint_border(PaintContext& context, BorderEdge edge, Gfx::FloatRect const& a_rect, BorderRadiusData const& border_radius_data, BordersData const& borders_data)",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p2.translate_by(1, -p2_step)",
          "new_text": null,
          "old_line_content": "            p2.translate_by(1, -p2_step);",
          "new_line_content": "        p2_step = has_bottom_left_radius ? 0 : borders_data.bottom.width / (float)int_width;",
          "content_same": false
        },
        {
          "line": 46,
          "old_api": "[&] {\n        switch (edge) {\n        case BorderEdge::Top:\n            return borders_data.top;\n        case BorderEdge::Right:\n            return borders_data.right;\n        case BorderEdge::Bottom:\n            return borders_data.bottom;\n        default: // BorderEdge::Left:\n            return borders_data.left;\n        }\n    }()",
          "new_api": null,
          "old_text": "[&] {\n        switch (edge) {\n        case BorderEdge::Top:\n            return borders_data.top;\n        case BorderEdge::Right:\n            return borders_data.right;\n        case BorderEdge::Bottom:\n            return borders_data.bottom;\n        default: // BorderEdge::Left:\n            return borders_data.left;\n        }\n    }()",
          "new_text": null,
          "old_line_content": "    const auto& border_data = [&] {",
          "new_line_content": "    // FIXME: This is a hack that snaps the incoming rect to integer pixel values before painting each side.",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "x",
          "new_api": null,
          "old_text": "border_rect.x()",
          "new_text": null,
          "old_line_content": "        border_rect.x() + top_left_radius,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "y",
          "new_api": null,
          "old_text": "border_rect.y()",
          "new_text": null,
          "old_line_content": "        border_rect.y(),",
          "new_line_content": "    // FIXME: Support elliptical border radii.",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "width",
          "new_api": null,
          "old_text": "border_rect.width()",
          "new_text": null,
          "old_line_content": "        border_rect.width() - top_left_radius - top_right_radius,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 65,
          "old_api": "max",
          "new_api": null,
          "old_text": "max((int)width, 1)",
          "new_text": null,
          "old_line_content": "    int int_width = max((int)width, 1);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "height",
          "new_api": null,
          "old_text": "border_rect.height()",
          "new_text": null,
          "old_line_content": "        border_rect.height()",
          "new_line_content": "    Gfx::FloatRect top_border_rect = {",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "width",
          "new_api": null,
          "old_text": "border_rect.width()",
          "new_text": null,
          "old_line_content": "        border_rect.width(),",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "height",
          "new_api": null,
          "old_text": "border_rect.height()",
          "new_text": null,
          "old_line_content": "        border_rect.height() - top_right_radius - bottom_right_radius",
          "new_line_content": "    Gfx::FloatRect right_border_rect = {",
          "content_same": false
        },
        {
          "line": 75,
          "old_api": "top_right",
          "new_api": null,
          "old_text": "rect.top_right()",
          "new_text": null,
          "old_line_content": "            return { rect.top_left(), rect.top_right() };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "width",
          "new_api": null,
          "old_text": "border_rect.width()",
          "new_text": null,
          "old_line_content": "        border_rect.width() - bottom_left_radius - bottom_right_radius,",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 77,
          "old_api": "bottom_right",
          "new_api": null,
          "old_text": "rect.bottom_right()",
          "new_text": null,
          "old_line_content": "            return { rect.top_right(), rect.bottom_right() };",
          "new_line_content": "        switch (edge) {",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "height",
          "new_api": null,
          "old_text": "border_rect.height()",
          "new_text": null,
          "old_line_content": "        border_rect.height()",
          "new_line_content": "    Gfx::FloatRect bottom_border_rect = {",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "width",
          "new_api": null,
          "old_text": "border_rect.width()",
          "new_text": null,
          "old_line_content": "        border_rect.width(),",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "height",
          "new_api": null,
          "old_text": "border_rect.height()",
          "new_text": null,
          "old_line_content": "        border_rect.height() - top_left_radius - bottom_left_radius",
          "new_line_content": "    Gfx::FloatRect left_border_rect = {",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "Color::from_rgb(0x5a5a5a)",
          "new_api": null,
          "old_text": "Color::from_rgb(0x5a5a5a)",
          "new_text": null,
          "old_line_content": "        auto top_left_color = Color::from_rgb(0x5a5a5a);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data)",
          "new_api": null,
          "old_text": "Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data)",
          "new_text": null,
          "old_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Bottom, bottom_border_rect, border_radius_data, borders_data);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data)",
          "new_api": null,
          "old_text": "Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data)",
          "new_text": null,
          "old_line_content": "    Painting::paint_border(context, Painting::BorderEdge::Left, left_border_rect, border_radius_data, borders_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "x",
          "new_api": null,
          "old_text": "to.x()",
          "new_text": null,
          "old_line_content": "        auto radius = fabsf(from.x() - to.x());",
          "new_line_content": "        Gfx::FloatPoint center = { 0, 0 };",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "y",
          "new_api": null,
          "old_text": "to.y()",
          "new_text": null,
          "old_line_content": "        if (from.x() < to.x() && from.y() > to.y()) {",
          "new_line_content": "        Gfx::FloatPoint circle_position = { 0, 0 };",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "set_y",
          "new_api": null,
          "old_text": "center.set_y(radius)",
          "new_text": null,
          "old_line_content": "            center.set_y(radius);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "y",
          "new_api": null,
          "old_text": "to.y()",
          "new_text": null,
          "old_line_content": "        } else if (from.x() < to.x() && from.y() < to.y()) {",
          "new_line_content": "            // top-left",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p1.translate_by(int_width / 2, int_width / 2)",
          "new_text": null,
          "old_line_content": "            p1.translate_by(int_width / 2, int_width / 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "translate_by",
          "new_api": null,
          "old_text": "p2.translate_by(-int_width / 2, int_width / 2)",
          "new_text": null,
          "old_line_content": "            p2.translate_by(-int_width / 2, int_width / 2);",
          "new_line_content": "    if (gfx_line_style != Gfx::Painter::LineStyle::Solid) {",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "set_y",
          "new_api": null,
          "old_text": "offset.set_y(1)",
          "new_text": null,
          "old_line_content": "            offset.set_y(1);",
          "new_line_content": "            // top-right",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "y",
          "new_api": null,
          "old_text": "to.y()",
          "new_text": null,
          "old_line_content": "        } else if (from.x() > to.x() && from.y() > to.y()) {",
          "new_line_content": "            // bottom-right",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "x",
          "new_api": null,
          "old_text": "circle_position.x()",
          "new_text": null,
          "old_line_content": "            border_rect.x() + circle_position.x(),",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "y",
          "new_api": null,
          "old_text": "circle_position.y()",
          "new_text": null,
          "old_line_content": "            border_rect.y() + circle_position.y(),",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": "y",
          "new_api": null,
          "old_text": "p2.y()",
          "new_text": null,
          "old_line_content": "        context.painter().draw_line({ (int)p1.x(), (int)p1.y() }, { (int)p2.x(), (int)p2.y() }, color, 1, gfx_line_style);",
          "new_line_content": "        return;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 53,
      "total_deletions": 51,
      "total_api_changes": 132
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 132,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          33,
          34,
          27,
          28
        ]
      }
    },
    "api_calls_before": 142,
    "api_calls_after": 140,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 4,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/a6734766ecf849d3a06ba321a8fac6c23a8d3435",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/a6734766ecf849d3a06ba321a8fac6c23a8d3435/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/a6734766ecf849d3a06ba321a8fac6c23a8d3435/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/a6734766ecf849d3a06ba321a8fac6c23a8d3435/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 581,
          "old_api": "m_next_href_id++);\n        break;",
          "new_api": "else {",
          "old_text": " m_next_href_id++);\n        break;\n   ",
          "new_text": "else {\n ",
          "old_line_content": "        m_current_attribute.href_id = String::format(\"%u\", m_next_href_id++);",
          "new_line_content": "            m_current_attribute.href_id = String();",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "// F",
          "new_api": "0);\n    }\n    auto par",
          "old_text": "\n            // F",
          "new_text": "0);\n    }\n    auto par",
          "old_line_content": "        if (!value.has_value()) {",
          "new_line_content": "        m_parameters.remove(0);",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "ith_capacity",
          "new_api": "split",
          "old_text": "ith_capacity();\n            m_inte",
          "new_text": "eters).split(';');\n    for (auto& par",
          "old_line_content": "            m_parameters.clear_with_capacity();",
          "new_line_content": "    auto paramparts = String::copy(m_parameters).split(';');",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": ");\n    for (auto& p :",
          "new_api": "}\n\n#if define",
          "old_text": ");\n    for (auto& p :",
          "new_text": "}\n\n#if define",
          "old_line_content": "    dbgprintf(\"Params: \");",
          "new_line_content": "        params.append(value.value());",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "endif\n\n    switch",
          "new_api": ":execute_escape_sequence: Handled final '%c'\\n\", final);\n    dbgprintf(\"Par",
          "old_text": "endif\n\n    switch",
          "new_text": ":execute_escape_sequence: Handled final '%c'\\n\", final);\n    dbgprintf(\"Par",
          "old_line_content": "    dbgprintf(\"\\b\\n\");",
          "new_line_content": "    dbgprintf(\"Terminal::execute_escape_sequence: Handled final '%c'\\n\", final);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "break;",
          "new_api": "endif\n\n    switch",
          "old_text": " break;\n   ",
          "new_text": "endif\n\n    switch",
          "old_line_content": "        CUU(params);",
          "new_line_content": "    dbgprintf(\"\\b\\n\");",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "for (auto& lin",
          "new_api": ":execute_escape_sequence: Unhandled final '%c'\\n\", final);\n        break;",
          "old_text": " for (auto& lin",
          "new_text": ":execute_escape_sequence: Unhandled final '%c'\\n\", final);\n        break;\n   ",
          "old_line_content": "    dbgprintf(\"\\n\");",
          "new_line_content": "        dbgprintf(\"Terminal::execute_escape_sequence: Unhandled final '%c'\\n\", final);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": ", codepoint);\n        }",
          "new_api": "{",
          "old_text": ", codepoint);\n        }\n        ",
          "new_text": "{\n           ",
          "old_line_content": "                dbgprintf(\"<U+%04x>\", codepoint);",
          "new_line_content": "        for (int i = 0; i < line.length(); i++) {",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "r_with_capacity",
          "new_api": "}\n#endif",
          "old_text": "r_with_capacity();\n}\n\nvoid Terminal::",
          "new_text": " }\n#endif\n\n    ",
          "old_line_content": "    m_intermediates.clear_with_capacity();",
          "new_line_content": "        dbgprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "));\n    m_need_full_f",
          "new_api": "oll_region_top));\n        add_line_",
          "old_text": "));\n    m_need_full_f",
          "new_text": "oll_region_top));\n        add_line_",
          "old_line_content": "    m_lines.insert(m_scroll_region_bottom, make<Line>(m_columns));",
          "new_line_content": "        auto line = move(m_lines.ptr_at(m_scroll_region_top));",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "lidate_cu",
          "new_api": "1u);\n    unsigned colum",
          "old_text": "lidate_cu",
          "new_text": "1u);\n    unsigned colum",
          "old_line_content": "    ASSERT(column < columns());",
          "new_line_content": "    unsigned row = min(a_row, m_rows - 1u);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "m_cursor_row =",
          "new_api": "mns - 1u);\n    if (row == m_c",
          "old_text": "\n    m_cursor_row =",
          "new_text": "mns - 1u);\n    if (row == m_c",
          "old_line_content": "    invalidate_cursor();",
          "new_line_content": "    unsigned column = min(a_column, m_columns - 1u);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "}\n\nvoid Terminal::",
          "new_api": "lidate_cu",
          "old_text": "\n}\n\nvoid Terminal::",
          "new_text": "lidate_cu",
          "old_line_content": "    invalidate_cursor();",
          "new_line_content": "    ASSERT(column < columns());",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "column",
          "new_api": "}\n\nvoid Terminal::",
          "old_text": "column",
          "new_text": "\n}\n\nvoid Terminal::",
          "old_line_content": "    ASSERT(row < rows());",
          "new_line_content": "    invalidate_cursor();",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "lumn].flags |= At",
          "new_api": "column",
          "old_text": "lumn].flags |= At",
          "new_text": "column",
          "old_line_content": "    line.attributes()[column].flags |= Attribute::Touched;",
          "new_line_content": "    ASSERT(row < rows());",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": ";\n\n    m_last_code_p",
          "new_api": "& line =",
          "old_text": ";\n\n    m_last_code_p",
          "new_text": "& line = ",
          "old_line_content": "    line.set_dirty(true);",
          "new_line_content": "    ASSERT(column < columns());",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "& params[0] =",
          "new_api": "minal::",
          "old_text": "& params[0] =",
          "new_text": "minal::",
          "old_line_content": "    if (params.size() == 1 && params[0] == 5) {",
          "new_line_content": "    CUU({});",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));\n    } else {",
          "new_api": "& params[0] =",
          "old_text": "[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));\n    } else {\n    ",
          "new_text": "& params[0] =",
          "old_line_content": "        emit_string(String::format(\"\\033[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));",
          "new_line_content": "    if (params.size() == 1 && params[0] == 5) {",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "R\";",
          "new_api": "\"); // Terminal status",
          "old_text": "R\";\n ",
          "new_text": "\"); // Terminal status",
          "old_line_content": "        dbg() << \"Unknown DSR\";",
          "new_line_content": "        emit_string(\"\\033[0n\"); // Terminal status OK!",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "};\n\n    auto a",
          "new_api": ":on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);\n#endif\n\n    auto f",
          "old_text": "    };\n\n    auto a",
          "new_text": ":on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);\n#endif\n\n    auto f",
          "old_line_content": "        on_code_point('%');",
          "new_line_content": "    dbgprintf(\"Terminal::on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "ch);\n            return",
          "new_api": "\", ch);\n        m_parser_s",
          "old_text": "ch);\n            return",
          "new_text": "\", ch);\n        m_parser_s",
          "old_line_content": "            m_parameters.append(ch);",
          "new_line_content": "            dbg() << \"Unexpected string terminator: \" << String::format(\"%02x\", ch);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "return;",
          "new_api": "row, m_cursor_column - 1);\n            return",
          "old_text": "     return;\n  ",
          "new_text": "row, m_cursor_column - 1);\n            return",
          "old_line_content": "        m_client.beep();",
          "new_line_content": "            set_cursor(m_cursor_row, m_cursor_column - 1);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "row, i);\n                re",
          "new_api": "return;",
          "old_text": "row, i);\n                re",
          "new_text": "     return;\n  ",
          "old_line_content": "                set_cursor(m_cursor_row, i);",
          "new_line_content": "        m_client.beep();",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "ut_charac",
          "new_api": "row, new_column);\n        return;",
          "old_text": "ut_charac",
          "new_text": "row, new_column);\n        return;\n  ",
          "old_line_content": "        newline();",
          "new_line_content": "        set_cursor(m_cursor_row, new_column);",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "ursor_row, m_cursor_column, code_point);\n    }\n}\n\nvoid Term",
          "new_api": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "old_text": "ursor_row, m_cursor_column, code_point);\n    }\n}\n\nvoid Term",
          "new_text": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "old_line_content": null,
          "new_line_content": "        put_character_at(m_cursor_row, m_cursor_column, code_point);",
          "content_same": true
        },
        {
          "line": 1016,
          "old_api": "void Terminal:",
          "new_api": "void Terminal::",
          "old_text": "\nvoid Terminal:",
          "new_text": "\nvoid Terminal::",
          "old_line_content": "    m_client.emit((const u8*)string.characters_without_null_termination(), string.length());",
          "new_line_content": "        on_input(str[i]);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "void Terminal:",
          "new_api": "StringBuilder",
          "old_text": "void Terminal:",
          "new_text": "\n\n    StringBuilder",
          "old_line_content": "    emit_string(sb.to_string());",
          "new_line_content": "        emit_string(\"\\033\");",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "mpty",
          "new_api": "y",
          "old_text": "mpty()) {\n        builder.",
          "new_text": "y()) {\n        builder.",
          "old_line_content": "    if (!m_intermediates.is_empty()) {",
          "new_line_content": "    if (!m_parameters.is_empty()) {",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "ermediates:\");\n        for (size_",
          "new_api": "ameters:\");\n        for (size_",
          "old_text": "ermediates:\");\n        for (size_",
          "new_text": "ameters:\");\n        for (size_",
          "old_line_content": "        builder.append(\" intermediates:\");",
          "new_line_content": "        builder.append(\" parameters:\");",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "(); ++i)\n            b",
          "new_api": "++i)\n            b",
          "old_text": "(); ++i)\n            b",
          "new_text": " ++i)\n            b",
          "old_line_content": "        for (size_t i = 0; i < m_intermediates.size(); ++i)",
          "new_line_content": "        for (size_t i = 0; i < m_parameters.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": ")m_intermediates[i]);\n    }\n    builder.",
          "new_api": ")m_parameters[i]);\n    }\n    if (!m_i",
          "old_text": ")m_intermediates[i]);\n    }\n    builder.",
          "new_text": ")m_parameters[i]);\n    }\n    if (!m_i",
          "old_line_content": "            builder.append((char)m_intermediates[i]);",
          "new_line_content": "            builder.append((char)m_parameters[i]);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": ";\n    inject_string(",
          "new_api": "mpty",
          "old_text": ";\n    inject_string(",
          "new_text": "mpty()) {\n        builder.",
          "old_line_content": "    builder.append(\"))\");",
          "new_line_content": "    if (!m_intermediates.is_empty()) {",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": ";\n}\n\nvoid Terminal:",
          "new_api": "ermediates:\");\n        for (size_",
          "old_text": ";\n}\n\nvoid Terminal:",
          "new_text": "ermediates:\");\n        for (size_",
          "old_line_content": "    inject_string(builder.to_string());",
          "new_line_content": "        builder.append(\" intermediates:\");",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "implemented xterm escape: %c))\\n\", m_final);\n    inject_string(",
          "new_api": ";\n}\n\nvoid Terminal:",
          "old_text": "implemented xterm escape: %c))\\n\", m_final);\n    inject_string(",
          "new_text": ";\n}\n\nvoid Terminal:",
          "old_line_content": "    auto message = String::format(\"((Unimplemented xterm escape: %c))\\n\", m_final);",
          "new_line_content": "    inject_string(builder.to_string());",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": ";\n    } else {",
          "new_api": "RESIZE to: %d rows\\n\", rows);\n#endif\n\n    if (ro",
          "old_text": ";\n    } else {\n    ",
          "new_text": " RESIZE to: %d rows\\n\", rows);\n#endif\n\n    if (ro",
          "old_line_content": "            m_lines.append(make<Line>(columns));",
          "new_line_content": "    dbgprintf(\"Terminal: RESIZE to: %d rows\\n\", rows);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "size",
          "new_api": "w, m_rows - 1);\n    m_cursor_colum",
          "old_text": "size(columns);\n    for (unsigned ",
          "new_text": "w, m_rows - 1);\n    m_cursor_colum",
          "old_line_content": "    m_horizontal_tabs.resize(columns);",
          "new_line_content": "    m_cursor_row = min((int)m_cursor_row, m_rows - 1);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "set_dirty",
          "new_api": "d_resize",
          "old_text": "].set_dirty(true);\n}\n\nvoid Terminal::",
          "new_text": "d_resize(m_columns, m_rows);\n}\n\nvoid Terminal::",
          "old_line_content": "    m_lines[m_cursor_row].set_dirty(true);",
          "new_line_content": "    m_client.terminal_did_resize(m_columns, m_rows);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "shtag",
          "new_api": ", column, 'E');\n            }",
          "old_text": "shtag",
          "new_text": ", column, 'E');\n            }\n    ",
          "old_line_content": "        dbg() << \"Unknown hashtag: '\" << hashtag << \"'\";",
          "new_line_content": "                put_character_at(row, column, 'E');",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "}\n\n}",
          "new_api": "return {}",
          "old_text": "}\n\n}\n",
          "new_text": "   return {}",
          "old_line_content": "    return line.attributes()[position.column()];",
          "new_line_content": "    if (position.row() >= static_cast<int>(line_count()))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1032,
          "old_api": null,
          "new_api": "\\033[OA\" : \"\\033[A\");\n        return;",
          "old_text": null,
          "new_text": "\\033[OA\" : \"\\033[A\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_Right:",
          "new_line_content": "        emit_string(ctrl ? \"\\033[OA\" : \"\\033[A\");",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "\\033[OB\" : \"\\033[B\");\n        return;",
          "old_text": null,
          "new_text": "\\033[OB\" : \"\\033[B\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_Left:",
          "new_line_content": "        emit_string(ctrl ? \"\\033[OB\" : \"\\033[B\");",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "\\033[OC\" : \"\\033[C\");\n        return;",
          "old_text": null,
          "new_text": "\\033[OC\" : \"\\033[C\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_Insert:",
          "new_line_content": "        emit_string(ctrl ? \"\\033[OC\" : \"\\033[C\");",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "\\033[OD\" : \"\\033[D\");\n        return;",
          "old_text": null,
          "new_text": "\\033[OD\" : \"\\033[D\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_Delete:",
          "new_line_content": "        emit_string(ctrl ? \"\\033[OD\" : \"\\033[D\");",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "\");\n        return;",
          "old_text": null,
          "new_text": "\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_Home:",
          "new_line_content": "        emit_string(\"\\033[2~\");",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "\");\n        return;",
          "old_text": null,
          "new_text": "\");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_End:",
          "new_line_content": "        emit_string(\"\\033[3~\");",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": ");\n        return;",
          "old_text": null,
          "new_text": ");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_PageUp:",
          "new_line_content": "        emit_string(\"\\033[H\");",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": ");\n        return;",
          "old_text": null,
          "new_text": ");\n        return;\n  ",
          "old_line_content": "    case KeyCode::Key_PageDown:",
          "new_line_content": "        emit_string(\"\\033[F\");",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "\");\n        return;",
          "old_text": null,
          "new_text": "\");\n        return;\n  ",
          "old_line_content": "    default:",
          "new_line_content": "        emit_string(\"\\033[5~\");",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "\");\n        return;",
          "old_text": null,
          "new_text": "\");\n        return;\n  ",
          "old_line_content": "",
          "new_line_content": "        emit_string(\"\\033[6~\");",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": ");\n        return;",
          "old_text": null,
          "new_text": ");\n        return;\n  ",
          "old_line_content": "    // attempt to treat it as a character...",
          "new_line_content": "        emit_string(\"\\033[Z\");",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "(code_point);\n\n    emit_string(s",
          "old_text": null,
          "new_text": "(code_point);\n\n    emit_string(s",
          "old_line_content": "void Terminal::unimplemented_escape()",
          "new_line_content": "    sb.append_code_point(code_point);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": ") {\n            m_cu",
          "old_text": null,
          "new_text": ") {\n            m_cu",
          "old_line_content": "        m_current_attribute.href = params[2];",
          "new_line_content": "        if (params[2].is_empty()) {",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "m_curr",
          "old_text": null,
          "new_text": "  m_curr",
          "old_line_content": "        // FIXME: Respect the provided ID",
          "new_line_content": "            m_current_attribute.href = String();",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": null,
          "new_api": "void Terminal:",
          "old_text": null,
          "new_text": "void Terminal:",
          "old_line_content": "    StringBuilder builder;",
          "new_line_content": "    emit_string(sb.to_string());",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "m_next_href_id++);\n        }",
          "old_text": null,
          "new_text": " m_next_href_id++);\n        }\n        ",
          "old_line_content": "        break;",
          "new_line_content": "            m_current_attribute.href_id = String::format(\"%u\", m_next_href_id++);",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "nimplemented escape: %c\", m_final);\n    if (!m_paramet",
          "old_text": null,
          "new_text": "nimplemented escape: %c\", m_final);\n    if (!m_paramet",
          "old_line_content": "    }",
          "new_line_content": "    builder.appendf(\"((Unimplemented escape: %c\", m_final);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "progress",
          "old_text": null,
          "new_text": "progress(numeric_params[1], numeric_params[2]);\n        break;\n   ",
          "old_line_content": "    }",
          "new_line_content": "        m_client.set_window_progress(numeric_params[1], numeric_params[2]);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "escape",
          "old_text": null,
          "new_text": "escape();\n        break;\n   ",
          "old_line_content": "void Terminal::execute_escape_sequence(u8 final)",
          "new_line_content": "        unimplemented_xterm_escape();",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "(); ++i)\n            b",
          "old_text": null,
          "new_text": "(); ++i)\n            b",
          "old_line_content": "}",
          "new_line_content": "        for (size_t i = 0; i < m_intermediates.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": ")m_intermediates[i]);\n    }\n    builder.",
          "old_text": null,
          "new_text": ")m_intermediates[i]);\n    }\n    builder.",
          "old_line_content": "",
          "new_line_content": "            builder.append((char)m_intermediates[i]);",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": ";\n    inject_string(",
          "old_text": null,
          "new_text": ";\n    inject_string(",
          "old_line_content": "{",
          "new_line_content": "    builder.append(\"))\");",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "> 0 && m_parameters",
          "old_text": null,
          "new_text": "> 0 && m_parameters",
          "old_line_content": "    for (auto& parampart : paramparts) {",
          "new_line_content": "    if (m_parameters.size() > 0 && m_parameters[0] == '?') {",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "implemented xterm escape: %c))\\n\", m_final);\n    inject_string(",
          "old_text": null,
          "new_text": "implemented xterm escape: %c))\\n\", m_final);\n    inject_string(",
          "old_line_content": "{",
          "new_line_content": "    auto message = String::format(\"((Unimplemented xterm escape: %c))\\n\", m_final);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "e);\n}\n\nvoid Terminal::",
          "old_text": null,
          "new_text": "e);\n}\n\nvoid Terminal::",
          "old_line_content": "    if (!columns)",
          "new_line_content": "    inject_string(message);",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "if (!value",
          "old_text": null,
          "new_text": "\n        if (!value",
          "old_line_content": "            return;",
          "new_line_content": "        auto value = parampart.to_uint();",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "// F",
          "old_text": null,
          "new_text": "\n            // F",
          "old_line_content": "        }",
          "new_line_content": "        if (!value.has_value()) {",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "ith_capacity",
          "old_text": null,
          "new_text": "ith_capacity();\n            m_inte",
          "old_line_content": "    }",
          "new_line_content": "            m_parameters.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "r_with_capacity",
          "old_text": null,
          "new_text": "r_with_capacity();\n            return",
          "old_line_content": "",
          "new_line_content": "            m_intermediates.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": ");\n    for (auto& p :",
          "old_text": null,
          "new_text": ");\n    for (auto& p :",
          "old_line_content": "#endif",
          "new_line_content": "    dbgprintf(\"Params: \");",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "s)",
          "old_text": null,
          "new_text": "s)\n           ",
          "old_line_content": "",
          "new_line_content": "        while (m_lines.size() < rows)",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "}\n    dbgprint",
          "old_text": null,
          "new_text": "\n    }\n    dbgprint",
          "old_line_content": "    switch (final) {",
          "new_line_content": "        dbgprintf(\"%d \", p);",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": null,
          "new_api": ";\n    } else {",
          "old_text": null,
          "new_text": ";\n    } else {\n    ",
          "old_line_content": "    for (int i = 0; i < rows; ++i)",
          "new_line_content": "            m_lines.append(make<Line>(columns));",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": ";\n    }\n\n    for (in",
          "old_text": null,
          "new_text": ";\n    }\n\n    for (in",
          "old_line_content": "",
          "new_line_content": "        m_lines.shrink(rows);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": null,
          "new_api": "h",
          "old_text": null,
          "new_text": "h(columns);\n\n    m_columns = c",
          "old_line_content": "    m_scroll_region_top = 0;",
          "new_line_content": "        m_lines[i].set_length(columns);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'C':",
          "new_line_content": "        CUU(params);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'D':",
          "new_line_content": "        CUD(params);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'H':",
          "new_line_content": "        CUF(params);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "lumn, m_columns - 1);\n    m_saved_cursor",
          "old_text": null,
          "new_text": "lumn, m_columns - 1);\n    m_saved_cursor",
          "old_line_content": "    for (unsigned i = 0; i < columns; ++i)",
          "new_line_content": "    m_cursor_column = min((int)m_cursor_column, m_columns - 1);",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "sor_row, m_rows - 1);\n    m_saved_cursor",
          "old_text": null,
          "new_text": "sor_row, m_rows - 1);\n    m_saved_cursor",
          "old_line_content": "        m_horizontal_tabs[i] = (i % 8) == 0;",
          "new_line_content": "    m_saved_cursor_row = min((int)m_saved_cursor_row, m_rows - 1);",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "sor_column, m_columns - 1);\n\n    m_horizontal_",
          "old_text": null,
          "new_text": "sor_column, m_columns - 1);\n\n    m_horizontal_",
          "old_line_content": "    // Rightmost column is always last tab on line.",
          "new_line_content": "    m_saved_cursor_column = min((int)m_saved_cursor_column, m_columns - 1);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'J':",
          "new_line_content": "        CUB(params);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'K':",
          "new_line_content": "        CUP(params);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "size(columns);\n    for (unsigned ",
          "old_line_content": "",
          "new_line_content": "    m_horizontal_tabs.resize(columns);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": "break;\n   ",
          "old_line_content": "    case 'M':",
          "new_line_content": "        ED(params);",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": "break;\n   ",
          "old_line_content": "    case 'P':",
          "new_line_content": "        EL(params);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "set_dirty",
          "old_text": null,
          "new_text": "].set_dirty(true);\n}\n\nvoid Terminal::",
          "old_line_content": "    switch (hashtag) {",
          "new_line_content": "    m_lines[m_cursor_row].set_dirty(true);",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "shtag",
          "old_text": null,
          "new_text": "shtag",
          "old_line_content": "{",
          "new_line_content": "        dbg() << \"Unknown hashtag: '\" << hashtag << \"'\";",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    case 'u':",
          "new_line_content": "        SGR(params);",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "if (position.",
          "old_text": null,
          "new_text": " if (position.",
          "old_line_content": "",
          "new_line_content": "    auto& line = this->line(position.row());",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "return {};",
          "old_text": null,
          "new_text": "   return {};",
          "old_line_content": "}",
          "new_line_content": "    if (position.column() >= line.length())",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "}\n\n}",
          "old_text": null,
          "new_text": "}\n\n}\n",
          "old_line_content": "",
          "new_line_content": "    return line.attributes()[position.column()];",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": "     break;\n   ",
          "old_line_content": "    case 'h':",
          "new_line_content": "        DECSTBM(params);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "arams);\n        break;",
          "old_text": null,
          "new_text": "arams);\n        break;\n   ",
          "old_line_content": "    case 'c':",
          "new_line_content": "        RM(question_param, params);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "arams);\n        break;",
          "old_text": null,
          "new_text": "arams);\n        break;\n   ",
          "old_line_content": "    case 'f':",
          "new_line_content": "        SM(question_param, params);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": "break;\n   ",
          "old_line_content": "    case 'n':",
          "new_line_content": "        DA(params);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    default:",
          "new_line_content": "        HVP(params);",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "break;",
          "old_text": null,
          "new_text": " break;\n   ",
          "old_line_content": "    }",
          "new_line_content": "        DSR(params);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "for (auto& lin",
          "old_text": null,
          "new_text": " for (auto& lin",
          "old_line_content": "            if (codepoint < 128)",
          "new_line_content": "    dbgprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "Line: \");\n        for (int i",
          "old_text": null,
          "new_text": " Line: \");\n        for (int i",
          "old_line_content": "            else",
          "new_line_content": "        dbgprintf(\"Terminal: Line: \");",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "if (co",
          "old_text": null,
          "new_text": "            if (co",
          "old_line_content": "        }",
          "new_line_content": "            u32 codepoint = line.code_point(i);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "r)codepoint);\n            else",
          "old_text": null,
          "new_text": "r)codepoint);\n            else\n ",
          "old_line_content": "    }",
          "new_line_content": "                dbgprintf(\"%c\", (char)codepoint);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": ", codepoint);\n        }",
          "old_text": null,
          "new_text": ", codepoint);\n        }\n        ",
          "old_line_content": "",
          "new_line_content": "                dbgprintf(\"<U+%04x>\", codepoint);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "ith_capacity",
          "old_text": null,
          "new_text": "ith_capacity();\n    m_intermediate",
          "old_line_content": "{",
          "new_line_content": "    m_parameters.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "r_with_capacity",
          "old_text": null,
          "new_text": "r_with_capacity();\n}\n\nvoid Terminal::",
          "old_line_content": "    u16 new_row = m_cursor_row;",
          "new_line_content": "    m_intermediates.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "lse {",
          "old_text": null,
          "new_text": "lse {\n     ",
          "old_line_content": "}",
          "new_line_content": "        scroll_up();",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "0);\n}\n\nvoid Terminal::",
          "old_text": null,
          "new_text": "0);\n}\n\nvoid Terminal::",
          "old_line_content": "    // NOTE: We have to invalidate the cursor first.",
          "new_line_content": "    set_cursor(new_row, 0);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "if (m_scroll_r",
          "old_text": null,
          "new_text": "\n    if (m_scroll_r",
          "old_line_content": "    }",
          "new_line_content": "    invalidate_cursor();",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "m_client.",
          "old_text": null,
          "new_text": " m_client.",
          "old_line_content": "    m_need_full_flush = true;",
          "new_line_content": "        add_line_to_history(move(line));",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "story_changed",
          "old_text": null,
          "new_text": "story_changed();\n    }\n    m_lines.",
          "old_line_content": "}",
          "new_line_content": "        m_client.terminal_history_changed();",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "oll_region_top);\n    m_lines.insert",
          "old_text": null,
          "new_text": "oll_region_top);\n    m_lines.insert",
          "old_line_content": "void Terminal::scroll_down()",
          "new_line_content": "    m_lines.remove(m_scroll_region_top);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "));\n    m_need_full_f",
          "old_text": null,
          "new_text": "));\n    m_need_full_f",
          "old_line_content": "{",
          "new_line_content": "    m_lines.insert(m_scroll_region_bottom, make<Line>(m_columns));",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "m_lines.remove",
          "old_text": null,
          "new_text": "\n    m_lines.remove",
          "old_line_content": "",
          "new_line_content": "    invalidate_cursor();",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "oll_region_bottom);\n    m_lines.insert",
          "old_text": null,
          "new_text": "oll_region_bottom);\n    m_lines.insert",
          "old_line_content": "void Terminal::set_cursor(unsigned a_row, unsigned a_column)",
          "new_line_content": "    m_lines.remove(m_scroll_region_bottom);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "));\n    m_need_full_f",
          "old_text": null,
          "new_text": "));\n    m_need_full_f",
          "old_line_content": "{",
          "new_line_content": "    m_lines.insert(m_scroll_region_top, make<Line>(m_columns));",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "column",
          "old_text": null,
          "new_text": "column",
          "old_line_content": "    m_stomp = false;",
          "new_line_content": "    ASSERT(row < rows());",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "m_cursor_row =",
          "old_text": null,
          "new_text": "\n    m_cursor_row =",
          "old_line_content": "}",
          "new_line_content": "    invalidate_cursor();",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "column, code_point);\n    line.attribute",
          "old_text": null,
          "new_text": "column, code_point);\n    line.attribute",
          "old_line_content": "    m_last_code_point = code_point;",
          "new_line_content": "    line.set_code_point(column, code_point);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "lumn] = m_current",
          "old_text": null,
          "new_text": "lumn] = m_current",
          "old_line_content": "}",
          "new_line_content": "    line.attributes()[column] = m_current_attribute;",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "lumn].flags |= At",
          "old_text": null,
          "new_text": "lumn].flags |= At",
          "old_line_content": "",
          "new_line_content": "    line.attributes()[column].flags |= Attribute::Touched;",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": ";\n\n    m_last_code_p",
          "old_text": null,
          "new_text": ";\n\n    m_last_code_p",
          "old_line_content": "void Terminal::NEL()",
          "new_line_content": "    line.set_dirty(true);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "erminal::",
          "old_text": null,
          "new_text": "erminal::",
          "old_line_content": "    // IND - Index (move down)",
          "new_line_content": "    newline();",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "minal::",
          "old_text": null,
          "new_text": "minal::",
          "old_line_content": "    // RI - Reverse Index (move up)",
          "new_line_content": "    CUD({});",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "& params[0] =",
          "old_text": null,
          "new_text": "& params[0] =",
          "old_line_content": "    }",
          "new_line_content": "    } else if (params.size() == 1 && params[0] == 6) {",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));\n    } else {",
          "old_text": null,
          "new_text": "[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));\n    } else {\n    ",
          "old_line_content": "",
          "new_line_content": "        emit_string(String::format(\"\\033[%d;%dR\", m_cursor_row + 1, m_cursor_column + 1));",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "R\";",
          "old_text": null,
          "new_text": "R\";\n ",
          "old_line_content": "{",
          "new_line_content": "        dbg() << \"Unknown DSR\";",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "};\n\n    auto a",
          "old_text": null,
          "new_text": "    };\n\n    auto a",
          "old_line_content": "        m_parser_code_point |= ch & 0x3f;",
          "new_line_content": "        on_code_point('%');",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "er_code_point);\n            m_pars",
          "old_text": null,
          "new_text": "er_code_point);\n            m_pars",
          "old_line_content": "    };",
          "new_line_content": "            on_code_point(m_parser_code_point);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "r_state + 1);\n        }\n    };",
          "old_text": null,
          "new_text": "r_state + 1);\n        }\n    };\n\n",
          "old_line_content": "    case GotEscape:",
          "new_line_content": "            m_parser_state = (ParserState)(m_parser_state + 1);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "lear_with_capacity",
          "old_text": null,
          "new_text": "lear_with_capacity();\n        } else if ",
          "old_line_content": "            m_parser_state = Normal;",
          "new_line_content": "            m_xterm_parameters.clear_with_capacity();",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "_pars",
          "old_text": null,
          "new_text": "_pars",
          "old_line_content": "            m_parser_state = Normal;",
          "new_line_content": "            IND();",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "pars",
          "old_text": null,
          "new_text": "pars",
          "old_line_content": "            m_parser_state = Normal;",
          "new_line_content": "            RI();",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "_pars",
          "old_text": null,
          "new_text": "_pars",
          "old_line_content": "            m_parser_state = Normal;",
          "new_line_content": "            NEL();",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "char",
          "old_text": null,
          "new_text": " char",
          "old_line_content": "        if (ch >= '0' && ch <= '9') {",
          "new_line_content": "            dbg() << \"Unexpected character in GotEscape '\" << (char)ch << \"'\";",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "m_pars",
          "old_text": null,
          "new_text": "\n            m_pars",
          "old_line_content": "        if (ch == 27) {",
          "new_line_content": "            execute_hashtag(ch);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": null,
          "new_api": "d",
          "old_text": null,
          "new_text": "d();\n            m_pars",
          "old_line_content": "        return;",
          "new_line_content": "            execute_xterm_command();",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "ppend",
          "old_text": null,
          "new_text": "ppend(ch);\n        return;\n  ",
          "old_line_content": "        else",
          "new_line_content": "        m_xterm_parameters.append(ch);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "d",
          "old_text": null,
          "new_text": "d();\n        else\n     ",
          "old_line_content": "    case ExpectParameter:",
          "new_line_content": "            execute_xterm_command();",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "haracter",
          "old_text": null,
          "new_text": "haracter(ch)) {\n            m_pa",
          "old_line_content": "        [[fallthrough]];",
          "new_line_content": "        if (is_valid_parameter_character(ch)) {",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "ch);\n            return",
          "old_text": null,
          "new_text": "ch);\n            return",
          "old_line_content": "    case ExpectIntermediate:",
          "new_line_content": "            m_parameters.append(ch);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "e_character",
          "old_text": null,
          "new_text": "e_character(ch)) {\n            m_in",
          "old_line_content": "        [[fallthrough]];",
          "new_line_content": "        if (is_valid_intermediate_character(ch)) {",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "nd",
          "old_text": null,
          "new_text": "nd(ch);\n            return",
          "old_line_content": "    case ExpectFinal:",
          "new_line_content": "            m_intermediates.append(ch);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "cter",
          "old_text": null,
          "new_text": "cter(ch)) {\n            m_pa",
          "old_line_content": "            return;",
          "new_line_content": "        if (is_valid_final_character(ch)) {",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "nce",
          "old_text": null,
          "new_text": "nce(ch);\n            m_swal",
          "old_line_content": "        m_swallow_current = false;",
          "new_line_content": "                execute_escape_sequence(ch);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "} else {",
          "old_text": null,
          "new_text": "       } else {\n ",
          "old_line_content": "",
          "new_line_content": "            fail_utf8_parse();",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": ";\n        }",
          "old_text": null,
          "new_text": ";\n        }\n        ",
          "old_line_content": "        if (!(ch & 0x80))",
          "new_line_content": "            advance_utf8_parse();",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "return;",
          "old_text": null,
          "new_text": "       return;\n  ",
          "old_line_content": "    case '\\0':",
          "new_line_content": "        fail_utf8_parse();",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "         ",
          "old_line_content": "        }",
          "new_line_content": "        for (unsigned i = m_cursor_column + 1; i < columns(); ++i) {",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "row, i);\n                re",
          "old_text": null,
          "new_text": "row, i);\n                re",
          "old_line_content": "    }",
          "new_line_content": "                set_cursor(m_cursor_row, i);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "row, 0);\n        return;",
          "old_text": null,
          "new_text": "row, 0);\n        return;\n  ",
          "old_line_content": "    }",
          "new_line_content": "        set_cursor(m_cursor_row, 0);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "eturn;",
          "old_text": null,
          "new_text": "eturn;\n  ",
          "old_line_content": "}",
          "new_line_content": "        newline();",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "void Terminal::",
          "old_text": null,
          "new_text": "\n\nvoid Terminal::",
          "old_line_content": "    auto new_column = m_cursor_column + 1;",
          "new_line_content": "    on_code_point(ch);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "put_char",
          "old_text": null,
          "new_text": " put_char",
          "old_line_content": "    if (m_stomp) {",
          "new_line_content": "    if (new_column < columns()) {",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "old_text": null,
          "new_text": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "old_line_content": "        m_stomp = false;",
          "new_line_content": "        put_character_at(m_cursor_row, m_cursor_column, code_point);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "ut_charac",
          "old_text": null,
          "new_text": "ut_charac",
          "old_line_content": "        m_stomp = true;",
          "new_line_content": "        newline();",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "row, 1);\n    } else {",
          "old_text": null,
          "new_text": "row, 1);\n    } else {\n     ",
          "old_line_content": "    }",
          "new_line_content": "        set_cursor(m_cursor_row, 1);",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "ursor_row, m_cursor_column, code_point);\n    }\n}\n\nvoid Term",
          "old_text": null,
          "new_text": "ursor_row, m_cursor_column, code_point);\n    }\n}\n\nvoid Term",
          "old_line_content": "{",
          "new_line_content": "        put_character_at(m_cursor_row, m_cursor_column, code_point);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "on_in",
          "old_text": null,
          "new_text": "       on_in",
          "old_line_content": "{",
          "new_line_content": "    for (size_t i = 0; i < str.length(); ++i)",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "void Terminal:",
          "old_text": null,
          "new_text": "\nvoid Terminal:",
          "old_line_content": "    bool ctrl = flags & Mod_Ctrl;",
          "new_line_content": "    m_client.emit((const u8*)string.characters_without_null_termination(), string.length());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1027,
          "old_api": "\\033[OA\" : \"\\033[A\");\n        return;",
          "new_api": null,
          "old_text": "\\033[OA\" : \"\\033[A\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(ctrl ? \"\\033[OA\" : \"\\033[A\");",
          "new_line_content": "    bool alt = flags & Mod_Alt;",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "\\033[OB\" : \"\\033[B\");\n        return;",
          "new_api": null,
          "old_text": "\\033[OB\" : \"\\033[B\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(ctrl ? \"\\033[OB\" : \"\\033[B\");",
          "new_line_content": "    switch (key) {",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "\\033[OC\" : \"\\033[C\");\n        return;",
          "new_api": null,
          "old_text": "\\033[OC\" : \"\\033[C\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(ctrl ? \"\\033[OC\" : \"\\033[C\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "\\033[OD\" : \"\\033[D\");\n        return;",
          "new_api": null,
          "old_text": "\\033[OD\" : \"\\033[D\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(ctrl ? \"\\033[OD\" : \"\\033[D\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "\");\n        return;",
          "new_api": null,
          "old_text": "\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[2~\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "\");\n        return;",
          "new_api": null,
          "old_text": "\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[3~\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": ");\n        return;",
          "new_api": null,
          "old_text": ");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[H\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": ");\n        return;",
          "new_api": null,
          "old_text": ");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[F\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "\");\n        return;",
          "new_api": null,
          "old_text": "\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[5~\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "\");\n        return;",
          "new_api": null,
          "old_text": "\");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[6~\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": ");\n        return;",
          "new_api": null,
          "old_text": ");\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[Z\");",
          "new_line_content": "        // Probably a modifier being pressed.",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "StringBuilder",
          "new_api": null,
          "old_text": "\n\n    StringBuilder",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "(code_point);\n\n    emit_string(s",
          "new_api": null,
          "old_text": "(code_point);\n\n    emit_string(s",
          "new_text": null,
          "old_line_content": "    sb.append_code_point(code_point);",
          "new_line_content": "    // Alt modifier sends escape prefix.",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "nimplemented escape: %c\", m_final);\n    if (!m_paramet",
          "new_api": null,
          "old_text": "nimplemented escape: %c\", m_final);\n    if (!m_paramet",
          "new_text": null,
          "old_line_content": "    builder.appendf(\"((Unimplemented escape: %c\", m_final);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "y",
          "new_api": null,
          "old_text": "y()) {\n        builder.",
          "new_text": null,
          "old_line_content": "    if (!m_parameters.is_empty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "ameters:\");\n        for (size_",
          "new_api": null,
          "old_text": "ameters:\");\n        for (size_",
          "new_text": null,
          "old_line_content": "        builder.append(\" parameters:\");",
          "new_line_content": "void Terminal::unimplemented_escape()",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "progress",
          "new_api": null,
          "old_text": "progress(numeric_params[1], numeric_params[2]);\n        break;\n   ",
          "new_text": null,
          "old_line_content": "        m_client.set_window_progress(numeric_params[1], numeric_params[2]);",
          "new_line_content": "            // FIXME: Respect the provided ID",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "++i)\n            b",
          "new_api": null,
          "old_text": " ++i)\n            b",
          "new_text": null,
          "old_line_content": "        for (size_t i = 0; i < m_parameters.size(); ++i)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": ")m_parameters[i]);\n    }\n    if (!m_i",
          "new_api": null,
          "old_text": ")m_parameters[i]);\n    }\n    if (!m_i",
          "new_text": null,
          "old_line_content": "            builder.append((char)m_parameters[i]);",
          "new_line_content": "    StringBuilder builder;",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "escape",
          "new_api": null,
          "old_text": "escape();\n        break;\n   ",
          "new_text": null,
          "old_line_content": "        unimplemented_xterm_escape();",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "> 0 && m_parameters",
          "new_api": null,
          "old_text": "> 0 && m_parameters",
          "new_text": null,
          "old_line_content": "    if (m_parameters.size() > 0 && m_parameters[0] == '?') {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "e);\n}\n\nvoid Terminal::",
          "new_api": null,
          "old_text": "e);\n}\n\nvoid Terminal::",
          "new_text": null,
          "old_line_content": "    inject_string(message);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "0);\n    }\n    auto par",
          "new_api": null,
          "old_text": "0);\n    }\n    auto par",
          "new_text": null,
          "old_line_content": "        m_parameters.remove(0);",
          "new_line_content": "    m_final = final;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "split",
          "new_api": null,
          "old_text": "eters).split(';');\n    for (auto& par",
          "new_text": null,
          "old_line_content": "    auto paramparts = String::copy(m_parameters).split(';');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "if (!value",
          "new_api": null,
          "old_text": "\n        if (!value",
          "new_text": null,
          "old_line_content": "        auto value = parampart.to_uint();",
          "new_line_content": "        question_param = true;",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "r_with_capacity",
          "new_api": null,
          "old_text": "r_with_capacity();\n            return",
          "new_text": null,
          "old_line_content": "            m_intermediates.clear_with_capacity();",
          "new_line_content": "    for (auto& parampart : paramparts) {",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "}\n\n#if define",
          "new_api": null,
          "old_text": "}\n\n#if define",
          "new_text": null,
          "old_line_content": "        params.append(value.value());",
          "new_line_content": "            // FIXME: Should we do something else?",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "RESIZE to: %d rows\\n\", rows);\n#endif\n\n    if (ro",
          "new_api": null,
          "old_text": " RESIZE to: %d rows\\n\", rows);\n#endif\n\n    if (ro",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Terminal: RESIZE to: %d rows\\n\", rows);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": ":execute_escape_sequence: Handled final '%c'\\n\", final);\n    dbgprintf(\"Par",
          "new_api": null,
          "old_text": ":execute_escape_sequence: Handled final '%c'\\n\", final);\n    dbgprintf(\"Par",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Terminal::execute_escape_sequence: Handled final '%c'\\n\", final);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": "s)",
          "new_api": null,
          "old_text": "s)\n           ",
          "new_text": null,
          "old_line_content": "        while (m_lines.size() < rows)",
          "new_line_content": "#if defined(TERMINAL_DEBUG)",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "}\n    dbgprint",
          "new_api": null,
          "old_text": "\n    }\n    dbgprint",
          "new_text": null,
          "old_line_content": "        dbgprintf(\"%d \", p);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": ";\n    }\n\n    for (in",
          "new_api": null,
          "old_text": ";\n    }\n\n    for (in",
          "new_text": null,
          "old_line_content": "        m_lines.shrink(rows);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "h",
          "new_api": null,
          "old_text": "h(columns);\n\n    m_columns = c",
          "new_text": null,
          "old_line_content": "        m_lines[i].set_length(columns);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        CUD(params);",
          "new_line_content": "    switch (final) {",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        CUF(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "w, m_rows - 1);\n    m_cursor_colum",
          "new_api": null,
          "old_text": "w, m_rows - 1);\n    m_cursor_colum",
          "new_text": null,
          "old_line_content": "    m_cursor_row = min((int)m_cursor_row, m_rows - 1);",
          "new_line_content": "    m_rows = rows;",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "lumn, m_columns - 1);\n    m_saved_cursor",
          "new_api": null,
          "old_text": "lumn, m_columns - 1);\n    m_saved_cursor",
          "new_text": null,
          "old_line_content": "    m_cursor_column = min((int)m_cursor_column, m_columns - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "sor_row, m_rows - 1);\n    m_saved_cursor",
          "new_api": null,
          "old_text": "sor_row, m_rows - 1);\n    m_saved_cursor",
          "new_text": null,
          "old_line_content": "    m_saved_cursor_row = min((int)m_saved_cursor_row, m_rows - 1);",
          "new_line_content": "    m_scroll_region_top = 0;",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        CUB(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "sor_column, m_columns - 1);\n\n    m_horizontal_",
          "new_api": null,
          "old_text": "sor_column, m_columns - 1);\n\n    m_horizontal_",
          "new_text": null,
          "old_line_content": "    m_saved_cursor_column = min((int)m_saved_cursor_column, m_columns - 1);",
          "new_line_content": "    m_scroll_region_bottom = rows - 1;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        CUP(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "break;",
          "new_api": null,
          "old_text": "break;\n   ",
          "new_text": null,
          "old_line_content": "        ED(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "break;",
          "new_api": null,
          "old_text": "break;\n   ",
          "new_text": null,
          "old_line_content": "        EL(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "d_resize",
          "new_api": null,
          "old_text": "d_resize(m_columns, m_rows);\n}\n\nvoid Terminal::",
          "new_text": null,
          "old_line_content": "    m_client.terminal_did_resize(m_columns, m_rows);",
          "new_line_content": "    for (unsigned i = 0; i < columns; ++i)",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": ", column, 'E');\n            }",
          "new_api": null,
          "old_text": ", column, 'E');\n            }\n    ",
          "new_text": null,
          "old_line_content": "                put_character_at(row, column, 'E');",
          "new_line_content": "    switch (hashtag) {",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "return {};",
          "new_api": null,
          "old_text": "\n        return {};",
          "new_text": null,
          "old_line_content": "    if (!position.is_valid())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "return {}",
          "new_api": null,
          "old_text": "   return {}",
          "new_text": null,
          "old_line_content": "    if (position.row() >= static_cast<int>(line_count()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        SGR(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "if (position.",
          "new_api": null,
          "old_text": " if (position.",
          "new_text": null,
          "old_line_content": "    auto& line = this->line(position.row());",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "break;",
          "new_api": null,
          "old_text": "     break;\n   ",
          "new_text": null,
          "old_line_content": "        DECSTBM(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "arams);\n        break;",
          "new_api": null,
          "old_text": "arams);\n        break;\n   ",
          "new_text": null,
          "old_line_content": "        RM(question_param, params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "arams);\n        break;",
          "new_api": null,
          "old_text": "arams);\n        break;\n   ",
          "new_text": null,
          "old_line_content": "        SM(question_param, params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "break;",
          "new_api": null,
          "old_text": "break;\n   ",
          "new_text": null,
          "old_line_content": "        DA(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        HVP(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "break;",
          "new_api": null,
          "old_text": " break;\n   ",
          "new_text": null,
          "old_line_content": "        DSR(params);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": ":execute_escape_sequence: Unhandled final '%c'\\n\", final);\n        break;",
          "new_api": null,
          "old_text": ":execute_escape_sequence: Unhandled final '%c'\\n\", final);\n        break;\n   ",
          "new_text": null,
          "old_line_content": "        dbgprintf(\"Terminal::execute_escape_sequence: Unhandled final '%c'\\n\", final);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "Line: \");\n        for (int i",
          "new_api": null,
          "old_text": " Line: \");\n        for (int i",
          "new_text": null,
          "old_line_content": "        dbgprintf(\"Terminal: Line: \");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "{",
          "new_api": null,
          "old_text": "{\n           ",
          "new_text": null,
          "old_line_content": "        for (int i = 0; i < line.length(); i++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "if (co",
          "new_api": null,
          "old_text": "            if (co",
          "new_text": null,
          "old_line_content": "            u32 codepoint = line.code_point(i);",
          "new_line_content": "#if defined(TERMINAL_DEBUG)",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "r)codepoint);\n            else",
          "new_api": null,
          "old_text": "r)codepoint);\n            else\n ",
          "new_text": null,
          "old_line_content": "                dbgprintf(\"%c\", (char)codepoint);",
          "new_line_content": "    for (auto& line : m_lines) {",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "}\n#endif",
          "new_api": null,
          "old_text": " }\n#endif\n\n    ",
          "new_text": null,
          "old_line_content": "        dbgprintf(\"\\n\");",
          "new_line_content": "            if (codepoint < 128)",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "ith_capacity",
          "new_api": null,
          "old_text": "ith_capacity();\n    m_intermediate",
          "new_text": null,
          "old_line_content": "    m_parameters.clear_with_capacity();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "lse {",
          "new_api": null,
          "old_text": "lse {\n     ",
          "new_text": null,
          "old_line_content": "        scroll_up();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "0);\n}\n\nvoid Terminal::",
          "new_api": null,
          "old_text": "0);\n}\n\nvoid Terminal::",
          "new_text": null,
          "old_line_content": "    set_cursor(new_row, 0);",
          "new_line_content": "    if (m_cursor_row == m_scroll_region_bottom) {",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "if (m_scroll_r",
          "new_api": null,
          "old_text": "\n    if (m_scroll_r",
          "new_text": null,
          "old_line_content": "    invalidate_cursor();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "oll_region_top));\n        add_line_",
          "new_api": null,
          "old_text": "oll_region_top));\n        add_line_",
          "new_text": null,
          "old_line_content": "        auto line = move(m_lines.ptr_at(m_scroll_region_top));",
          "new_line_content": "void Terminal::scroll_up()",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "m_client.",
          "new_api": null,
          "old_text": " m_client.",
          "new_text": null,
          "old_line_content": "        add_line_to_history(move(line));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "story_changed",
          "new_api": null,
          "old_text": "story_changed();\n    }\n    m_lines.",
          "new_text": null,
          "old_line_content": "        m_client.terminal_history_changed();",
          "new_line_content": "    // NOTE: We have to invalidate the cursor first.",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "oll_region_top);\n    m_lines.insert",
          "new_api": null,
          "old_text": "oll_region_top);\n    m_lines.insert",
          "new_text": null,
          "old_line_content": "    m_lines.remove(m_scroll_region_top);",
          "new_line_content": "    if (m_scroll_region_top == 0) {",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "m_lines.remove",
          "new_api": null,
          "old_text": "\n    m_lines.remove",
          "new_text": null,
          "old_line_content": "    invalidate_cursor();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "oll_region_bottom);\n    m_lines.insert",
          "new_api": null,
          "old_text": "oll_region_bottom);\n    m_lines.insert",
          "new_text": null,
          "old_line_content": "    m_lines.remove(m_scroll_region_bottom);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "));\n    m_need_full_f",
          "new_api": null,
          "old_text": "));\n    m_need_full_f",
          "new_text": null,
          "old_line_content": "    m_lines.insert(m_scroll_region_top, make<Line>(m_columns));",
          "new_line_content": "void Terminal::scroll_down()",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "1u);\n    unsigned colum",
          "new_api": null,
          "old_text": "1u);\n    unsigned colum",
          "new_text": null,
          "old_line_content": "    unsigned row = min(a_row, m_rows - 1u);",
          "new_line_content": "    m_need_full_flush = true;",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "mns - 1u);\n    if (row == m_c",
          "new_api": null,
          "old_text": "mns - 1u);\n    if (row == m_c",
          "new_text": null,
          "old_line_content": "    unsigned column = min(a_column, m_columns - 1u);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "column",
          "new_api": null,
          "old_text": "column",
          "new_text": null,
          "old_line_content": "    ASSERT(row < rows());",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "& line =",
          "new_api": null,
          "old_text": "& line = ",
          "new_text": null,
          "old_line_content": "    ASSERT(column < columns());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "column, code_point);\n    line.attribute",
          "new_api": null,
          "old_text": "column, code_point);\n    line.attribute",
          "new_text": null,
          "old_line_content": "    line.set_code_point(column, code_point);",
          "new_line_content": "void Terminal::put_character_at(unsigned row, unsigned column, u32 code_point)",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "lumn] = m_current",
          "new_api": null,
          "old_text": "lumn] = m_current",
          "new_text": null,
          "old_line_content": "    line.attributes()[column] = m_current_attribute;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "erminal::",
          "new_api": null,
          "old_text": "erminal::",
          "new_text": null,
          "old_line_content": "    newline();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "minal::",
          "new_api": null,
          "old_text": "minal::",
          "new_text": null,
          "old_line_content": "    CUD({});",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "minal::",
          "new_api": null,
          "old_text": "minal::",
          "new_text": null,
          "old_line_content": "    CUU({});",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "\"); // Terminal status",
          "new_api": null,
          "old_text": "\"); // Terminal status",
          "new_text": null,
          "old_line_content": "        emit_string(\"\\033[0n\"); // Terminal status OK!",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "& params[0] =",
          "new_api": null,
          "old_text": "& params[0] =",
          "new_text": null,
          "old_line_content": "    } else if (params.size() == 1 && params[0] == 6) {",
          "new_line_content": "void Terminal::DSR(const ParamVector& params)",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": ":on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);\n#endif\n\n    auto f",
          "new_api": null,
          "old_text": ":on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);\n#endif\n\n    auto f",
          "new_text": null,
          "old_line_content": "    dbgprintf(\"Terminal::on_char: %b (%c), fg=%u, bg=%u\\n\", ch, ch, m_current_attribute.foreground_color, m_current_attribute.background_color);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "er_code_point);\n            m_pars",
          "new_api": null,
          "old_text": "er_code_point);\n            m_pars",
          "new_text": null,
          "old_line_content": "            on_code_point(m_parser_code_point);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "r_state + 1);\n        }\n    };",
          "new_api": null,
          "old_text": "r_state + 1);\n        }\n    };\n\n",
          "new_text": null,
          "old_line_content": "            m_parser_state = (ParserState)(m_parser_state + 1);",
          "new_line_content": "        m_parser_code_point |= ch & 0x3f;",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "lear_with_capacity",
          "new_api": null,
          "old_text": "lear_with_capacity();\n        } else if ",
          "new_text": null,
          "old_line_content": "            m_xterm_parameters.clear_with_capacity();",
          "new_line_content": "        } else if (ch == '(') {",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "_pars",
          "new_api": null,
          "old_text": "_pars",
          "new_text": null,
          "old_line_content": "            IND();",
          "new_line_content": "            m_parser_state = ExpectXtermParameter;",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "pars",
          "new_api": null,
          "old_text": "pars",
          "new_text": null,
          "old_line_content": "            RI();",
          "new_line_content": "        } else if (ch == 'D') {",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "_pars",
          "new_api": null,
          "old_text": "_pars",
          "new_text": null,
          "old_line_content": "            NEL();",
          "new_line_content": "        } else if (ch == 'M') {",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "char",
          "new_api": null,
          "old_text": " char",
          "new_text": null,
          "old_line_content": "            dbg() << \"Unexpected character in GotEscape '\" << (char)ch << \"'\";",
          "new_line_content": "        } else if (ch == 'E') {",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "m_pars",
          "new_api": null,
          "old_text": "\n            m_pars",
          "new_text": null,
          "old_line_content": "            execute_hashtag(ch);",
          "new_line_content": "            m_parser_state = Normal;",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "d",
          "new_api": null,
          "old_text": "d();\n            m_pars",
          "new_text": null,
          "old_line_content": "            execute_xterm_command();",
          "new_line_content": "        if (ch == 27) {",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "ppend",
          "new_api": null,
          "old_text": "ppend(ch);\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        m_xterm_parameters.append(ch);",
          "new_line_content": "        if (ch == 7) {",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "d",
          "new_api": null,
          "old_text": "d();\n        else\n     ",
          "new_text": null,
          "old_line_content": "            execute_xterm_command();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "\", ch);\n        m_parser_s",
          "new_api": null,
          "old_text": "\", ch);\n        m_parser_s",
          "new_text": null,
          "old_line_content": "            dbg() << \"Unexpected string terminator: \" << String::format(\"%02x\", ch);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "haracter",
          "new_api": null,
          "old_text": "haracter(ch)) {\n            m_pa",
          "new_text": null,
          "old_line_content": "        if (is_valid_parameter_character(ch)) {",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "e_character",
          "new_api": null,
          "old_text": "e_character(ch)) {\n            m_in",
          "new_text": null,
          "old_line_content": "        if (is_valid_intermediate_character(ch)) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "nd",
          "new_api": null,
          "old_text": "nd(ch);\n            return",
          "new_text": null,
          "old_line_content": "            m_intermediates.append(ch);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "cter",
          "new_api": null,
          "old_text": "cter(ch)) {\n            m_pa",
          "new_text": null,
          "old_line_content": "        if (is_valid_final_character(ch)) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "nce",
          "new_api": null,
          "old_text": "nce(ch);\n            m_swal",
          "new_text": null,
          "old_line_content": "                execute_escape_sequence(ch);",
          "new_line_content": "        [[fallthrough]];",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "} else {",
          "new_api": null,
          "old_text": "       } else {\n ",
          "new_text": null,
          "old_line_content": "            fail_utf8_parse();",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": ";\n        }",
          "new_api": null,
          "old_text": ";\n        }\n        ",
          "new_text": null,
          "old_line_content": "            advance_utf8_parse();",
          "new_line_content": "    case UTF8Needs2Bytes:",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "return;",
          "new_api": null,
          "old_text": "       return;\n  ",
          "new_text": null,
          "old_line_content": "        fail_utf8_parse();",
          "new_line_content": "        if ((ch & 0xf8) == 0xf0) {",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "row, m_cursor_column - 1);\n            return",
          "new_api": null,
          "old_text": "row, m_cursor_column - 1);\n            return",
          "new_text": null,
          "old_line_content": "            set_cursor(m_cursor_row, m_cursor_column - 1);",
          "new_line_content": "        m_parser_state = GotEscape;",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "",
          "new_api": null,
          "old_text": "         ",
          "new_text": null,
          "old_line_content": "        for (unsigned i = m_cursor_column + 1; i < columns(); ++i) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "row, 0);\n        return;",
          "new_api": null,
          "old_text": "row, 0);\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        set_cursor(m_cursor_row, 0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "eturn;",
          "new_api": null,
          "old_text": "eturn;\n  ",
          "new_text": null,
          "old_line_content": "        newline();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "void Terminal::",
          "new_api": null,
          "old_text": "\n\nvoid Terminal::",
          "new_text": null,
          "old_line_content": "    on_code_point(ch);",
          "new_line_content": "    case '\\n':",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "put_char",
          "new_api": null,
          "old_text": " put_char",
          "new_text": null,
          "old_line_content": "    if (new_column < columns()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "new_api": null,
          "old_text": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "new_text": null,
          "old_line_content": "        put_character_at(m_cursor_row, m_cursor_column, code_point);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "row, new_column);\n        return;",
          "new_api": null,
          "old_text": "row, new_column);\n        return;\n  ",
          "new_text": null,
          "old_line_content": "        set_cursor(m_cursor_row, new_column);",
          "new_line_content": "void Terminal::on_code_point(u32 code_point)",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "new_api": null,
          "old_text": "ursor_row, m_cursor_column, code_point);\n        set_cursor",
          "new_text": null,
          "old_line_content": "        put_character_at(m_cursor_row, m_cursor_column, code_point);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "row, 1);\n    } else {",
          "new_api": null,
          "old_text": "row, 1);\n    } else {\n     ",
          "new_text": null,
          "old_line_content": "        set_cursor(m_cursor_row, 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "on_in",
          "new_api": null,
          "old_text": "       on_in",
          "new_text": null,
          "old_line_content": "    for (size_t i = 0; i < str.length(); ++i)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "void Terminal::",
          "new_api": null,
          "old_text": "\nvoid Terminal::",
          "new_text": null,
          "old_line_content": "        on_input(str[i]);",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 39,
      "total_additions": 119,
      "total_deletions": 116,
      "total_api_changes": 274
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 274,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          586,
          582,
          583
        ]
      }
    },
    "api_calls_before": 282,
    "api_calls_after": 285,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 3,
      "total_diff_lines": 23
    }
  }
}
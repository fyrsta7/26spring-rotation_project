{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c55909f1755ae85d03cf27d09d40a3c97a3c3926",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c55909f1755ae85d03cf27d09d40a3c97a3c3926/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c55909f1755ae85d03cf27d09d40a3c97a3c3926/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ladybird/modified_file/c55909f1755ae85d03cf27d09d40a3c97a3c3926/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 890,
          "old_api": "to_string",
          "new_api": "adopt_ref",
          "old_text": "m_basis->to_string()",
          "new_text": "adopt_ref(*new FlexStyleValue(grow, shrink, basis))",
          "old_line_content": "        return String::formatted(\"Flex grow: {}, shrink: {}, basis: {}\", m_grow->to_string(), m_shrink->to_string(), m_basis->to_string());",
          "new_line_content": "        return adopt_ref(*new FlexStyleValue(grow, shrink, basis));",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "to_string",
          "new_api": "adopt_ref",
          "old_text": "m_style_type->to_string()",
          "new_text": "adopt_ref(*new ListStyleStyleValue(position, image, style_type))",
          "old_line_content": "        return String::formatted(\"ListStyle position: {}, image: {}, style_type: {}\", m_position->to_string(), m_image->to_string(), m_style_type->to_string());",
          "new_line_content": "        return adopt_ref(*new ListStyleStyleValue(position, image, style_type));",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "to_string",
          "new_api": "adopt_ref",
          "old_text": "m_color->to_string()",
          "new_text": "adopt_ref(*new TextDecorationStyleValue(line, style, color))",
          "old_line_content": "        return String::formatted(\"TextDecoration line: {}, style: {}, color: {}\", m_line->to_string(), m_style->to_string(), m_color->to_string());",
          "new_line_content": "        return adopt_ref(*new TextDecorationStyleValue(line, style, color));",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "append",
          "new_api": "move",
          "old_text": "builder.append(',')",
          "new_text": "move(values)",
          "old_line_content": "                builder.append(',');",
          "new_line_content": "    static NonnullRefPtr<StyleValueList> create(NonnullRefPtrVector<StyleValue>&& values) { return adopt_ref(*new StyleValueList(move(values))); }",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "move",
          "new_api": "append",
          "old_text": "move(values)",
          "new_text": "builder.append(',')",
          "old_line_content": "        , m_values(move(values))",
          "new_line_content": "                builder.append(',');",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "id",
          "new_api": "move",
          "old_text": "static_cast<const IdentifierStyleValue&>(*this).id()",
          "new_text": "move(values)",
          "old_line_content": "        return static_cast<const IdentifierStyleValue&>(*this).id();",
          "new_line_content": "        , m_values(move(values))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1025,
          "old_api": null,
          "new_api": "adopt_ref",
          "old_text": null,
          "new_text": "adopt_ref(*new OverflowStyleValue(overflow_x, overflow_y))",
          "old_line_content": "    }",
          "new_line_content": "        return adopt_ref(*new OverflowStyleValue(overflow_x, overflow_y));",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_basis->to_string()",
          "old_line_content": "        , m_shrink(shrink)",
          "new_line_content": "        return String::formatted(\"Flex grow: {}, shrink: {}, basis: {}\", m_grow->to_string(), m_shrink->to_string(), m_basis->to_string());",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_overflow_y->to_string()",
          "old_line_content": "",
          "new_line_content": "        return String::formatted(\"{} {}\", m_overflow_x->to_string(), m_overflow_y->to_string());",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "adopt_ref",
          "old_text": null,
          "new_text": "adopt_ref(*new FlexFlowStyleValue(flex_direction, flex_wrap))",
          "old_line_content": "    }",
          "new_line_content": "        return adopt_ref(*new FlexFlowStyleValue(flex_direction, flex_wrap));",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_flex_wrap->to_string()",
          "old_line_content": "",
          "new_line_content": "        return String::formatted(\"FlexFlow flex_direction: {}, flex_wrap: {}\", m_flex_direction->to_string(), m_flex_wrap->to_string());",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_color->to_string()",
          "old_line_content": "        , m_style(style)",
          "new_line_content": "        return String::formatted(\"TextDecoration line: {}, style: {}, color: {}\", m_line->to_string(), m_style->to_string(), m_color->to_string());",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "adopt_ref",
          "old_text": null,
          "new_text": "adopt_ref(*new FontStyleValue(font_style, font_weight, font_size, line_height, font_families))",
          "old_line_content": "    {",
          "new_line_content": "    static NonnullRefPtr<FontStyleValue> create(NonnullRefPtr<StyleValue> font_style, NonnullRefPtr<StyleValue> font_weight, NonnullRefPtr<StyleValue> font_size, NonnullRefPtr<StyleValue> line_height, NonnullRefPtr<StyleValue> font_families) { return adopt_ref(*new FontStyleValue(font_style, font_weight, font_size, line_height, font_families)); }",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "other.type()",
          "old_line_content": "        : StyleValue(Type::BorderRadius)",
          "new_line_content": "        if (type() != other.type())",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "static_cast<BorderRadiusStyleValue const&>(other)",
          "old_text": null,
          "new_text": "static_cast<BorderRadiusStyleValue const&>(other)",
          "old_line_content": "        , m_vertical_radius(vertical_radius)",
          "new_line_content": "        auto& other_value = static_cast<BorderRadiusStyleValue const&>(other);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "String::formatted(\"Font style: {}, weight: {}, size: {}, line_height: {}, families: {}\",\n            m_font_style->to_string(), m_font_weight->to_string(), m_font_size->to_string(), m_line_height->to_string(), m_font_families->to_string())",
          "old_line_content": "        , m_line_height(line_height)",
          "new_line_content": "        return String::formatted(\"Font style: {}, weight: {}, size: {}, line_height: {}, families: {}\",",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "move",
          "old_text": null,
          "new_text": "move(values)",
          "old_line_content": "    }",
          "new_line_content": "        return adopt_ref(*new TransformationStyleValue(transform_function, move(values)));",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_font_families->to_string()",
          "old_line_content": "        , m_font_families(font_families)",
          "new_line_content": "            m_font_style->to_string(), m_font_weight->to_string(), m_font_size->to_string(), m_line_height->to_string(), m_font_families->to_string());",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "String::formatted(\"TransformationStyleValue\")",
          "old_text": null,
          "new_text": "String::formatted(\"TransformationStyleValue\")",
          "old_line_content": "",
          "new_line_content": "        return String::formatted(\"TransformationStyleValue\");",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "adopt_ref",
          "old_text": null,
          "new_text": "adopt_ref(*new CombinedBorderRadiusStyleValue(top_left, top_right, bottom_right, bottom_left))",
          "old_line_content": "    {",
          "new_line_content": "        return adopt_ref(*new CombinedBorderRadiusStyleValue(top_left, top_right, bottom_right, bottom_left));",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_bottom_left->vertical_radius().to_string()",
          "old_line_content": "    {",
          "new_line_content": "        return String::formatted(\"{} {} {} {} / {} {} {} {}\", m_top_left->horizontal_radius().to_string(), m_top_right->horizontal_radius().to_string(), m_bottom_right->horizontal_radius().to_string(), m_bottom_left->horizontal_radius().to_string(), m_top_left->vertical_radius().to_string(), m_top_right->vertical_radius().to_string(), m_bottom_right->vertical_radius().to_string(), m_bottom_left->vertical_radius().to_string());",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_values.size()",
          "old_line_content": "private:",
          "new_line_content": "        builder.appendff(\"List[{}](\", m_values.size());",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "m_values.size()",
          "old_line_content": "    StyleValueList(NonnullRefPtrVector<StyleValue>&& values)",
          "new_line_content": "        for (size_t i = 0; i < m_values.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_values[i].to_string()",
          "old_line_content": "    {",
          "new_line_content": "            builder.append(m_values[i].to_string());",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "builder.append(')')",
          "old_line_content": "",
          "new_line_content": "        builder.append(')');",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "builder.to_string()",
          "old_line_content": "    NonnullRefPtrVector<StyleValue> m_values;",
          "new_line_content": "        return builder.to_string();",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "to_string",
          "old_text": null,
          "new_text": "m_style_type->to_string()",
          "old_line_content": "        , m_image(image)",
          "new_line_content": "        return String::formatted(\"ListStyle position: {}, image: {}, style_type: {}\", m_position->to_string(), m_image->to_string(), m_style_type->to_string());",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "is_identifier",
          "old_text": null,
          "new_text": "is_identifier()",
          "old_line_content": "",
          "new_line_content": "    if (is_identifier())",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "id",
          "old_text": null,
          "new_text": "static_cast<const IdentifierStyleValue&>(*this).id()",
          "old_line_content": "",
          "new_line_content": "        return static_cast<const IdentifierStyleValue&>(*this).id();",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "is_auto",
          "old_text": null,
          "new_text": "is_auto()",
          "old_line_content": "",
          "new_line_content": "    if (is_auto())",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "m_overflow_y->to_string()",
          "new_text": null,
          "old_line_content": "        return String::formatted(\"{} {}\", m_overflow_x->to_string(), m_overflow_y->to_string());",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new FlexFlowStyleValue(flex_direction, flex_wrap))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new FlexFlowStyleValue(flex_direction, flex_wrap));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new TextDecorationStyleValue(line, style, color))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new TextDecorationStyleValue(line, style, color));",
          "new_line_content": "    NonnullRefPtr<StyleValue> m_overflow_y;",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "m_flex_wrap->to_string()",
          "new_text": null,
          "old_line_content": "        return String::formatted(\"FlexFlow flex_direction: {}, flex_wrap: {}\", m_flex_direction->to_string(), m_flex_wrap->to_string());",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new FontStyleValue(font_style, font_weight, font_size, line_height, font_families))",
          "new_text": null,
          "old_line_content": "    static NonnullRefPtr<FontStyleValue> create(NonnullRefPtr<StyleValue> font_style, NonnullRefPtr<StyleValue> font_weight, NonnullRefPtr<StyleValue> font_size, NonnullRefPtr<StyleValue> line_height, NonnullRefPtr<StyleValue> font_families) { return adopt_ref(*new FontStyleValue(font_style, font_weight, font_size, line_height, font_families)); }",
          "new_line_content": "        , m_flex_wrap(flex_wrap)",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "String::formatted(\"Font style: {}, weight: {}, size: {}, line_height: {}, families: {}\",\n            m_font_style->to_string(), m_font_weight->to_string(), m_font_size->to_string(), m_line_height->to_string(), m_font_families->to_string())",
          "new_text": null,
          "old_line_content": "        return String::formatted(\"Font style: {}, weight: {}, size: {}, line_height: {}, families: {}\",",
          "new_line_content": "    virtual ~FontStyleValue() override { }",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(values)",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new TransformationStyleValue(transform_function, move(values)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "m_font_families->to_string()",
          "new_text": null,
          "old_line_content": "            m_font_style->to_string(), m_font_weight->to_string(), m_font_size->to_string(), m_line_height->to_string(), m_font_families->to_string());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "String::formatted(\"TransformationStyleValue\")",
          "new_api": null,
          "old_text": "String::formatted(\"TransformationStyleValue\")",
          "new_text": null,
          "old_line_content": "        return String::formatted(\"TransformationStyleValue\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "move",
          "new_api": null,
          "old_text": "move(values)",
          "new_text": null,
          "old_line_content": "        , m_values(move(values))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new CombinedBorderRadiusStyleValue(top_left, top_right, bottom_right, bottom_left))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new CombinedBorderRadiusStyleValue(top_left, top_right, bottom_right, bottom_left));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new ListStyleStyleValue(position, image, style_type))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new ListStyleStyleValue(position, image, style_type));",
          "new_line_content": "    // FIXME: Implement font-stretch and font-variant.",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "m_bottom_left->vertical_radius().to_string()",
          "new_text": null,
          "old_line_content": "        return String::formatted(\"{} {} {} {} / {} {} {} {}\", m_top_left->horizontal_radius().to_string(), m_top_right->horizontal_radius().to_string(), m_bottom_right->horizontal_radius().to_string(), m_bottom_left->horizontal_radius().to_string(), m_top_left->vertical_radius().to_string(), m_top_right->vertical_radius().to_string(), m_bottom_right->vertical_radius().to_string(), m_bottom_left->vertical_radius().to_string());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_values.size()",
          "new_text": null,
          "old_line_content": "        builder.appendff(\"List[{}](\", m_values.size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "size",
          "new_api": null,
          "old_text": "m_values.size()",
          "new_text": null,
          "old_line_content": "        for (size_t i = 0; i < m_values.size(); ++i) {",
          "new_line_content": "class StyleValueList final : public StyleValue {",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "m_values[i].to_string()",
          "new_text": null,
          "old_line_content": "            builder.append(m_values[i].to_string());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "append",
          "new_api": null,
          "old_text": "builder.append(')')",
          "new_text": null,
          "old_line_content": "        builder.append(')');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "to_string",
          "new_api": null,
          "old_text": "builder.to_string()",
          "new_text": null,
          "old_line_content": "        return builder.to_string();",
          "new_line_content": "    virtual String to_string() const",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "is_identifier",
          "new_api": null,
          "old_text": "is_identifier()",
          "new_text": null,
          "old_line_content": "    if (is_identifier())",
          "new_line_content": "        : StyleValue(Type::ValueList)",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new FlexStyleValue(grow, shrink, basis))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new FlexStyleValue(grow, shrink, basis));",
          "new_line_content": "    NonnullRefPtr<BorderRadiusStyleValue> m_bottom_left;",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "is_auto",
          "new_api": null,
          "old_text": "is_auto()",
          "new_text": null,
          "old_line_content": "    if (is_auto())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "adopt_ref",
          "new_api": null,
          "old_text": "adopt_ref(*new OverflowStyleValue(overflow_x, overflow_y))",
          "new_text": null,
          "old_line_content": "        return adopt_ref(*new OverflowStyleValue(overflow_x, overflow_y));",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 6,
      "total_additions": 24,
      "total_deletions": 22,
      "total_api_changes": 52
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 52,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          832,
          833,
          834,
          825,
          826,
          828,
          830,
          831
        ]
      }
    },
    "api_calls_before": 170,
    "api_calls_after": 173,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 0,
      "total_diff_lines": 22
    }
  }
}
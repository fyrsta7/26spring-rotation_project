{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/curl/modified_file/86f266b00495277d3c797ecb565f21d60ac38332",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/curl/modified_file/86f266b00495277d3c797ecb565f21d60ac38332/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/curl/modified_file/86f266b00495277d3c797ecb565f21d60ac38332/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/curl/modified_file/86f266b00495277d3c797ecb565f21d60ac38332/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 417,
          "old_api": "ssl_read",
          "new_api": "ssl_handshake_status",
          "old_text": "ssl_read(conn->ssl[sockindex].ssl, NULL)",
          "new_text": "ssl_handshake_status(conn->ssl[sockindex].ssl)",
          "old_line_content": "      ssl_fcn_return = ssl_read(conn->ssl[sockindex].ssl, NULL);",
          "new_line_content": "    if(ssl_handshake_status(conn->ssl[sockindex].ssl) != SSL_OK) {",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "Curl_axtls_close",
          "new_api": "ssl_read",
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": "ssl_read(conn->ssl[sockindex].ssl, NULL)",
          "old_line_content": "        Curl_axtls_close(conn, sockindex);",
          "new_line_content": "        ssl_fcn_return = ssl_read(conn->ssl[sockindex].ssl, NULL);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "map_error_to_curl",
          "new_api": "Curl_axtls_close",
          "old_text": "map_error_to_curl(ssl_fcn_return)",
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "        return map_error_to_curl(ssl_fcn_return);",
          "new_line_content": "          Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "ssl_read",
          "new_api": "ssl_handshake_status",
          "old_text": "ssl_read(ssl, NULL)",
          "new_text": "ssl_handshake_status(ssl)",
          "old_line_content": "    ssl_fcn_return = ssl_read(ssl, NULL);",
          "new_line_content": "  while(ssl_handshake_status(ssl) != SSL_OK) {",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "ssl_display_error",
          "new_api": "Curl_axtls_close",
          "old_text": "ssl_display_error(ssl_fcn_return)",
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "      ssl_display_error(ssl_fcn_return); /* goes to stdout. */",
          "new_line_content": "      Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "map_error_to_curl",
          "new_api": "ssl_display_error",
          "old_text": "map_error_to_curl(ssl_fcn_return)",
          "new_text": "ssl_display_error(ssl_fcn_return)",
          "old_line_content": "      return map_error_to_curl(ssl_fcn_return);",
          "new_line_content": "      ssl_display_error(ssl_fcn_return); /* goes to stdout. */",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "map_error_to_curl",
          "new_api": "failf",
          "old_text": "map_error_to_curl((int) ret)",
          "new_text": "failf(conn->data, \"axTLS recv error (%d)\", ret)",
          "old_line_content": "      *err = map_error_to_curl((int) ret);",
          "new_line_content": "      failf(conn->data, \"axTLS recv error (%d)\", ret);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 517,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(data, \"  Curl_axtls_close_all\\n\")",
          "old_line_content": "}",
          "new_line_content": "  infof(data, \"  Curl_axtls_close_all\\n\");",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(conn->data, \"  Curl_axtls_check_cxn\\n\")",
          "old_line_content": "   return 1; /* connection still in place */",
          "new_line_content": "  infof(conn->data, \"  Curl_axtls_check_cxn\\n\");",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(conn->data, \"  Curl_axtls_close\\n\")",
          "old_line_content": "",
          "new_line_content": "  infof(conn->data, \"  Curl_axtls_close\\n\");",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "ssl_version",
          "old_text": null,
          "new_text": "ssl_version()",
          "old_line_content": "}",
          "new_line_content": "  return snprintf(buffer, size, \"axTLS/%s\", ssl_version());",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "free_ssl_structs",
          "old_text": null,
          "new_text": "free_ssl_structs(connssl)",
          "old_line_content": "}",
          "new_line_content": "  free_ssl_structs(connssl);",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "connect_prep",
          "old_text": null,
          "new_text": "connect_prep(conn, sockindex)",
          "old_line_content": "    if(conn_step != CURLE_OK) {",
          "new_line_content": "    conn_step = connect_prep(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "Curl_axtls_close",
          "old_text": null,
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "      return conn_step;",
          "new_line_content": "      Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "ssl_display_error",
          "old_text": null,
          "new_text": "ssl_display_error(ssl_fcn_return)",
          "old_line_content": "      }",
          "new_line_content": "          ssl_display_error(ssl_fcn_return); /* goes to stdout. */",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(conn->data, \"  Curl_axtls_shutdown\\n\")",
          "old_line_content": "",
          "new_line_content": "  infof(conn->data, \"  Curl_axtls_shutdown\\n\");",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "map_error_to_curl",
          "old_text": null,
          "new_text": "map_error_to_curl(ssl_fcn_return)",
          "old_line_content": "      else {",
          "new_line_content": "          return map_error_to_curl(ssl_fcn_return);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "infof (conn->data, \"handshake completed successfully\\n\")",
          "old_text": null,
          "new_text": "infof (conn->data, \"handshake completed successfully\\n\")",
          "old_line_content": "    conn->ssl[sockindex].connecting_state = ssl_connect_3;",
          "new_line_content": "    infof (conn->data, \"handshake completed successfully\\n\");",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "connect_finish",
          "old_text": null,
          "new_text": "connect_finish(conn, sockindex)",
          "old_line_content": "    if(conn_step != CURLE_OK) {",
          "new_line_content": "    conn_step = connect_finish(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "Curl_axtls_close",
          "old_text": null,
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "      return conn_step;",
          "new_line_content": "      Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "Curl_socket_ready",
          "old_text": null,
          "new_text": "Curl_socket_ready(conn->sock[sockindex],\n                                 CURL_SOCKET_BAD, SSL_SHUTDOWN_TIMEOUT)",
          "old_line_content": "                                 CURL_SOCKET_BAD, SSL_SHUTDOWN_TIMEOUT);",
          "new_line_content": "    int what = Curl_socket_ready(conn->sock[sockindex],",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "ssl_read",
          "old_text": null,
          "new_text": "ssl_read(connssl->ssl, &buf)",
          "old_line_content": "",
          "new_line_content": "      nread = (ssize_t)ssl_read(connssl->ssl, &buf);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "failf",
          "old_text": null,
          "new_text": "failf(data, \"close notify alert not received during shutdown\")",
          "old_line_content": "        retval = -1;",
          "new_line_content": "        failf(data, \"close notify alert not received during shutdown\");",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "failf",
          "old_text": null,
          "new_text": "failf(data, \"SSL shutdown timeout\")",
          "old_line_content": "    }",
          "new_line_content": "      failf(data, \"SSL shutdown timeout\");",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "failf",
          "old_text": null,
          "new_text": "failf(data, \"select/poll on SSL socket, errno: %d\", SOCKERRNO)",
          "old_line_content": "      retval = -1;",
          "new_line_content": "      failf(data, \"select/poll on SSL socket, errno: %d\", SOCKERRNO);",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": null,
          "new_api": "free_ssl_structs",
          "old_text": null,
          "new_text": "free_ssl_structs(connssl)",
          "old_line_content": "  }",
          "new_line_content": "    free_ssl_structs(connssl);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "connect_prep",
          "old_text": null,
          "new_text": "connect_prep(conn, sockindex)",
          "old_line_content": "  int ssl_fcn_return;",
          "new_line_content": "  CURLcode conn_step = connect_prep(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "Curl_axtls_close",
          "old_text": null,
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "    return conn_step;",
          "new_line_content": "    Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "ssl_read",
          "old_text": null,
          "new_text": "ssl_read(ssl, NULL)",
          "old_line_content": "    if(ssl_fcn_return < 0) {",
          "new_line_content": "    ssl_fcn_return = ssl_read(ssl, NULL);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(conn->data, \"  axtls_recv\\n\")",
          "old_line_content": "",
          "new_line_content": "  infof(conn->data, \"  axtls_recv\\n\");",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "map_error_to_curl",
          "old_text": null,
          "new_text": "map_error_to_curl(ssl_fcn_return)",
          "old_line_content": "    }",
          "new_line_content": "      return map_error_to_curl(ssl_fcn_return);",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "ssl_read",
          "old_text": null,
          "new_text": "ssl_read(connssl->ssl, &read_buf)",
          "old_line_content": "    if(ret > SSL_OK) {",
          "new_line_content": "    ret = ssl_read(connssl->ssl, &read_buf);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "usleep",
          "old_text": null,
          "new_text": "usleep(10000)",
          "old_line_content": "  }",
          "new_line_content": "    usleep(10000);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "infof (conn->data, \"handshake completed successfully\\n\")",
          "old_text": null,
          "new_text": "infof (conn->data, \"handshake completed successfully\\n\")",
          "old_line_content": "",
          "new_line_content": "  infof (conn->data, \"handshake completed successfully\\n\");",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, read_buf,\n             (size_t)ret > buffersize ? buffersize : (size_t)ret)",
          "old_line_content": "             (size_t)ret > buffersize ? buffersize : (size_t)ret);",
          "new_line_content": "      memcpy(buf, read_buf,",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "connect_finish",
          "old_text": null,
          "new_text": "connect_finish(conn, sockindex)",
          "old_line_content": "  if(conn_step != CURLE_OK) {",
          "new_line_content": "  conn_step = connect_finish(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "Curl_axtls_close",
          "old_text": null,
          "new_text": "Curl_axtls_close(conn, sockindex)",
          "old_line_content": "    return conn_step;",
          "new_line_content": "    Curl_axtls_close(conn, sockindex);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "Curl_axtls_close",
          "old_text": null,
          "new_text": "Curl_axtls_close(conn, num)",
          "old_line_content": "    }",
          "new_line_content": "      Curl_axtls_close(conn, num);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "map_error_to_curl",
          "old_text": null,
          "new_text": "map_error_to_curl((int) ret)",
          "old_line_content": "      ret = -1;",
          "new_line_content": "      *err = map_error_to_curl((int) ret);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "ssl_write",
          "old_text": null,
          "new_text": "ssl_write(conn->ssl[sockindex].ssl, mem, (int)len)",
          "old_line_content": "",
          "new_line_content": "  int rc = ssl_write(conn->ssl[sockindex].ssl, mem, (int)len);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "infof",
          "old_text": null,
          "new_text": "infof(conn->data, \"  axtls_send\\n\")",
          "old_line_content": "",
          "new_line_content": "  infof(conn->data, \"  axtls_send\\n\");",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "map_error_to_curl",
          "old_text": null,
          "new_text": "map_error_to_curl(rc)",
          "old_line_content": "    rc = -1; /* generic error code for send failure */",
          "new_line_content": "    *err = map_error_to_curl(rc);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 516,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(data, \"  Curl_axtls_close_all\\n\")",
          "new_text": null,
          "old_line_content": "  infof(data, \"  Curl_axtls_close_all\\n\");",
          "new_line_content": "  (void)data;",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(conn->data, \"  Curl_axtls_check_cxn\\n\")",
          "new_text": null,
          "old_line_content": "  infof(conn->data, \"  Curl_axtls_check_cxn\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(conn->data, \"  Curl_axtls_close\\n\")",
          "new_text": null,
          "old_line_content": "  infof(conn->data, \"  Curl_axtls_close\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "ssl_version",
          "new_api": null,
          "old_text": "ssl_version()",
          "new_text": null,
          "old_line_content": "  return snprintf(buffer, size, \"axTLS/%s\", ssl_version());",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "free_ssl_structs",
          "new_api": null,
          "old_text": "free_ssl_structs(connssl)",
          "new_text": null,
          "old_line_content": "  free_ssl_structs(connssl);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "connect_prep",
          "new_api": null,
          "old_text": "connect_prep(conn, sockindex)",
          "new_text": null,
          "old_line_content": "    conn_step = connect_prep(conn, sockindex);",
          "new_line_content": "  if(conn->ssl[sockindex].connecting_state == ssl_connect_1) {",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": null,
          "old_line_content": "      Curl_axtls_close(conn, sockindex);",
          "new_line_content": "    if(conn_step != CURLE_OK) {",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "ssl_handshake_status",
          "new_api": null,
          "old_text": "ssl_handshake_status(conn->ssl[sockindex].ssl)",
          "new_text": null,
          "old_line_content": "    if(ssl_handshake_status(conn->ssl[sockindex].ssl) != SSL_OK) {",
          "new_line_content": "    /* Check to make sure handshake was ok. */",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "ssl_display_error",
          "new_api": null,
          "old_text": "ssl_display_error(ssl_fcn_return)",
          "new_text": null,
          "old_line_content": "        ssl_display_error(ssl_fcn_return); /* goes to stdout. */",
          "new_line_content": "        if(ssl_fcn_return < 0) {",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(conn->data, \"  Curl_axtls_shutdown\\n\")",
          "new_text": null,
          "old_line_content": "  infof(conn->data, \"  Curl_axtls_shutdown\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "infof (conn->data, \"handshake completed successfully\\n\")",
          "new_api": null,
          "old_text": "infof (conn->data, \"handshake completed successfully\\n\")",
          "new_text": null,
          "old_line_content": "    infof (conn->data, \"handshake completed successfully\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "connect_finish",
          "new_api": null,
          "old_text": "connect_finish(conn, sockindex)",
          "new_text": null,
          "old_line_content": "    conn_step = connect_finish(conn, sockindex);",
          "new_line_content": "  if(conn->ssl[sockindex].connecting_state == ssl_connect_3) {",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": null,
          "old_line_content": "      Curl_axtls_close(conn, sockindex);",
          "new_line_content": "    if(conn_step != CURLE_OK) {",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "Curl_socket_ready",
          "new_api": null,
          "old_text": "Curl_socket_ready(conn->sock[sockindex],\n                                 CURL_SOCKET_BAD, SSL_SHUTDOWN_TIMEOUT)",
          "new_text": null,
          "old_line_content": "    int what = Curl_socket_ready(conn->sock[sockindex],",
          "new_line_content": "  if(connssl->ssl) {",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "ssl_read",
          "new_api": null,
          "old_text": "ssl_read(connssl->ssl, &buf)",
          "new_text": null,
          "old_line_content": "      nread = (ssize_t)ssl_read(connssl->ssl, &buf);",
          "new_line_content": "         free_ssl_structs. */",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "failf",
          "new_api": null,
          "old_text": "failf(data, \"close notify alert not received during shutdown\")",
          "new_text": null,
          "old_line_content": "        failf(data, \"close notify alert not received during shutdown\");",
          "new_line_content": "      if(nread < SSL_OK) {",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "failf",
          "new_api": null,
          "old_text": "failf(data, \"SSL shutdown timeout\")",
          "new_text": null,
          "old_line_content": "      failf(data, \"SSL shutdown timeout\");",
          "new_line_content": "      /* timeout */",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "failf",
          "new_api": null,
          "old_text": "failf(data, \"select/poll on SSL socket, errno: %d\", SOCKERRNO)",
          "new_text": null,
          "old_line_content": "      failf(data, \"select/poll on SSL socket, errno: %d\", SOCKERRNO);",
          "new_line_content": "      /* anything that gets here is fatally bad */",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "free_ssl_structs",
          "new_api": null,
          "old_text": "free_ssl_structs(connssl)",
          "new_text": null,
          "old_line_content": "    free_ssl_structs(connssl);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "connect_prep",
          "new_api": null,
          "old_text": "connect_prep(conn, sockindex)",
          "new_text": null,
          "old_line_content": "  CURLcode conn_step = connect_prep(conn, sockindex);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": null,
          "old_line_content": "    Curl_axtls_close(conn, sockindex);",
          "new_line_content": "  if(conn_step != CURLE_OK) {",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "ssl_handshake_status",
          "new_api": null,
          "old_text": "ssl_handshake_status(ssl)",
          "new_text": null,
          "old_line_content": "  while(ssl_handshake_status(ssl) != SSL_OK) {",
          "new_line_content": "  /* Check to make sure handshake was ok. */",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(conn->data, \"  axtls_recv\\n\")",
          "new_text": null,
          "old_line_content": "  infof(conn->data, \"  axtls_recv\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": null,
          "old_line_content": "      Curl_axtls_close(conn, sockindex);",
          "new_line_content": "    if(ssl_fcn_return < 0) {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "ssl_read",
          "new_api": null,
          "old_text": "ssl_read(connssl->ssl, &read_buf)",
          "new_text": null,
          "old_line_content": "    ret = ssl_read(connssl->ssl, &read_buf);",
          "new_line_content": "  if(connssl) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(10000)",
          "new_text": null,
          "old_line_content": "    usleep(10000);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "infof (conn->data, \"handshake completed successfully\\n\")",
          "new_api": null,
          "old_text": "infof (conn->data, \"handshake completed successfully\\n\")",
          "new_text": null,
          "old_line_content": "  infof (conn->data, \"handshake completed successfully\\n\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, read_buf,\n             (size_t)ret > buffersize ? buffersize : (size_t)ret)",
          "new_text": null,
          "old_line_content": "      memcpy(buf, read_buf,",
          "new_line_content": "         larger, then all data has been read already.  */",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "connect_finish",
          "new_api": null,
          "old_text": "connect_finish(conn, sockindex)",
          "new_text": null,
          "old_line_content": "  conn_step = connect_finish(conn, sockindex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, sockindex)",
          "new_text": null,
          "old_line_content": "    Curl_axtls_close(conn, sockindex);",
          "new_line_content": "  if(conn_step != CURLE_OK) {",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "Curl_axtls_close",
          "new_api": null,
          "old_text": "Curl_axtls_close(conn, num)",
          "new_text": null,
          "old_line_content": "      Curl_axtls_close(conn, num);",
          "new_line_content": "         team approves proposed fix. */",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "failf",
          "new_api": null,
          "old_text": "failf(conn->data, \"axTLS recv error (%d)\", ret)",
          "new_text": null,
          "old_line_content": "      failf(conn->data, \"axTLS recv error (%d)\", ret);",
          "new_line_content": "    else {",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "ssl_write",
          "new_api": null,
          "old_text": "ssl_write(conn->ssl[sockindex].ssl, mem, (int)len)",
          "new_text": null,
          "old_line_content": "  int rc = ssl_write(conn->ssl[sockindex].ssl, mem, (int)len);",
          "new_line_content": "  /* ssl_write() returns 'int' while write() and send() returns 'size_t' */",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "infof",
          "new_api": null,
          "old_text": "infof(conn->data, \"  axtls_send\\n\")",
          "new_text": null,
          "old_line_content": "  infof(conn->data, \"  axtls_send\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "map_error_to_curl",
          "new_api": null,
          "old_text": "map_error_to_curl(rc)",
          "new_text": null,
          "old_line_content": "    *err = map_error_to_curl(rc);",
          "new_line_content": "  if(rc < 0 ) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 35,
      "total_deletions": 35,
      "total_api_changes": 77
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 77,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          424,
          425,
          418,
          401
        ]
      }
    },
    "api_calls_before": 92,
    "api_calls_after": 92,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 8,
      "total_diff_lines": 36
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/react-native/modified_file/521011d4cc713dfce97dc8872fd0f5171e587b5d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/react-native/modified_file/521011d4cc713dfce97dc8872fd0f5171e587b5d/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/react-native/modified_file/521011d4cc713dfce97dc8872fd0f5171e587b5d/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/react-native/modified_file/521011d4cc713dfce97dc8872fd0f5171e587b5d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 246,
          "old_api": "folly::toJson(arguments)",
          "new_api": "str",
          "old_text": "folly::toJson(arguments)",
          "new_text": "ss.str()",
          "old_line_content": "       << \" arguments: \" << folly::toJson(arguments);",
          "new_line_content": "    return ss.str();",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "std::throw_with_nested(\n        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId))",
          "new_api": "std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId)",
          "old_text": "std::throw_with_nested(\n        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId))",
          "new_text": "std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId)",
          "old_line_content": "    std::throw_with_nested(",
          "new_line_content": "        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId));",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": "call",
          "new_api": "valueFromDynamic",
          "old_text": "invokeCallbackAndReturnFlushedQueue_->call(\n        *runtime_, callbackId, valueFromDynamic(*runtime_, arguments))",
          "new_text": "valueFromDynamic(*runtime_, arguments)",
          "old_line_content": "    ret = invokeCallbackAndReturnFlushedQueue_->call(",
          "new_line_content": "        *runtime_, callbackId, valueFromDynamic(*runtime_, arguments));",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "std::runtime_error(\n        folly::to<std::string>(\"Error invoking callback \", callbackId))",
          "new_api": "folly::to<std::string>(\"Error invoking callback \", callbackId)",
          "old_text": "std::runtime_error(\n        folly::to<std::string>(\"Error invoking callback \", callbackId))",
          "new_text": "folly::to<std::string>(\"Error invoking callback \", callbackId)",
          "old_line_content": "    std::throw_with_nested(std::runtime_error(",
          "new_line_content": "        folly::to<std::string>(\"Error invoking callback \", callbackId)));",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "c_str",
          "new_api": "size",
          "old_text": "jsonValue->c_str()",
          "new_text": "jsonValue->size()",
          "old_line_content": "          reinterpret_cast<const uint8_t *>(jsonValue->c_str()),",
          "new_line_content": "          jsonValue->size()));",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "getProperty",
          "new_api": "isObject",
          "old_text": "runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\")",
          "new_text": "batchedBridgeValue.isObject()",
          "old_line_content": "        runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");",
          "new_line_content": "    if (batchedBridgeValue.isUndefined() || !batchedBridgeValue.isObject()) {",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "isObject",
          "new_api": "JSINativeException",
          "old_text": "batchedBridgeValue.isObject()",
          "new_text": "JSINativeException(\n          \"Could not get BatchedBridge, make sure your bundle is packaged correctly\")",
          "old_line_content": "    if (batchedBridgeValue.isUndefined() || !batchedBridgeValue.isObject()) {",
          "new_line_content": "      throw JSINativeException(",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "asObject",
          "new_api": "getPropertyAsFunction",
          "old_text": "batchedBridgeValue.asObject(*runtime_)",
          "new_text": "batchedBridge.getPropertyAsFunction(\n        *runtime_, \"callFunctionReturnFlushedQueue\")",
          "old_line_content": "    Object batchedBridge = batchedBridgeValue.asObject(*runtime_);",
          "new_line_content": "    callFunctionReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "callNativeModules",
          "new_api": "dynamicFromValue",
          "old_text": "delegate_->callNativeModules(\n      *this, dynamicFromValue(*runtime_, queue), isEndOfBatch)",
          "new_text": "dynamicFromValue(*runtime_, queue)",
          "old_line_content": "  delegate_->callNativeModules(",
          "new_line_content": "      *this, dynamicFromValue(*runtime_, queue), isEndOfBatch);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "call",
          "new_api": "performMicrotaskCheckpoint",
          "old_text": "flushedQueue_->call(*runtime_)",
          "new_text": "performMicrotaskCheckpoint(*runtime_)",
          "old_line_content": "    Value ret = flushedQueue_->call(*runtime_);",
          "new_line_content": "    performMicrotaskCheckpoint(*runtime_);",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "performMicrotaskCheckpoint",
          "new_api": "callNativeModules",
          "old_text": "performMicrotaskCheckpoint(*runtime_)",
          "new_text": "callNativeModules(ret, true)",
          "old_line_content": "    performMicrotaskCheckpoint(*runtime_);",
          "new_line_content": "    callNativeModules(ret, true);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "bindBridge",
          "new_api": "call",
          "old_text": "bindBridge()",
          "new_text": "flushedQueue_->call(*runtime_)",
          "old_line_content": "    bindBridge();",
          "new_line_content": "    Value ret = flushedQueue_->call(*runtime_);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "call",
          "new_api": "performMicrotaskCheckpoint",
          "old_text": "flushedQueue_->call(*runtime_)",
          "new_text": "performMicrotaskCheckpoint(*runtime_)",
          "old_line_content": "    Value ret = flushedQueue_->call(*runtime_);",
          "new_line_content": "    performMicrotaskCheckpoint(*runtime_);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "performMicrotaskCheckpoint",
          "new_api": "callNativeModules",
          "old_text": "performMicrotaskCheckpoint(*runtime_)",
          "new_text": "callNativeModules(ret, true)",
          "old_line_content": "    performMicrotaskCheckpoint(*runtime_);",
          "new_line_content": "    callNativeModules(ret, true);",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "getNumber",
          "new_api": "getModule",
          "old_text": "args[1].getNumber()",
          "new_text": "bundleRegistry_->getModule(bundleId, moduleId)",
          "old_line_content": "  uint32_t bundleId = count == 2 ? folly::to<uint32_t>(args[1].getNumber()) : 0;",
          "new_line_content": "  auto module = bundleRegistry_->getModule(bundleId, moduleId);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "evaluateJavaScript",
          "new_api": "std::make_unique<StringBuffer>(module.code)",
          "old_text": "runtime_->evaluateJavaScript(\n      std::make_unique<StringBuffer>(module.code), module.name)",
          "new_text": "std::make_unique<StringBuffer>(module.code)",
          "old_line_content": "  runtime_->evaluateJavaScript(",
          "new_line_content": "      std::make_unique<StringBuffer>(module.code), module.name);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "std::make_unique<StringBuffer>(module.code)",
          "new_api": "facebook::jsi::Value()",
          "old_text": "std::make_unique<StringBuffer>(module.code)",
          "new_text": "facebook::jsi::Value()",
          "old_line_content": "      std::make_unique<StringBuffer>(module.code), module.name);",
          "new_line_content": "  return facebook::jsi::Value();",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "asObject",
          "new_api": "std::invalid_argument(\n        folly::to<std::string>(\"method parameters should be array\"))",
          "old_text": "args[2].asObject(*runtime_).isArray(*runtime_)",
          "new_text": "std::invalid_argument(\n        folly::to<std::string>(\"method parameters should be array\"))",
          "old_line_content": "  if (!args[2].isObject() || !args[2].asObject(*runtime_).isArray(*runtime_)) {",
          "new_line_content": "    throw std::invalid_argument(",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "std::invalid_argument(\n        folly::to<std::string>(\"method parameters should be array\"))",
          "new_api": "folly::to<std::string>(\"method parameters should be array\")",
          "old_text": "std::invalid_argument(\n        folly::to<std::string>(\"method parameters should be array\"))",
          "new_text": "folly::to<std::string>(\"method parameters should be array\")",
          "old_line_content": "    throw std::invalid_argument(",
          "new_line_content": "        folly::to<std::string>(\"method parameters should be array\"));",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "getModuleName",
          "new_api": "getModuleSyncMethodName",
          "old_text": "moduleRegistry_->getModuleName(moduleId)",
          "new_text": "moduleRegistry_->getModuleSyncMethodName(moduleId, methodId)",
          "old_line_content": "    moduleName = moduleRegistry_->getModuleName(moduleId);",
          "new_line_content": "    methodName = moduleRegistry_->getModuleSyncMethodName(moduleId, methodId);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "callSerializableNativeHook",
          "new_api": "dynamicFromValue",
          "old_text": "delegate_->callSerializableNativeHook(\n      *this, moduleId, methodId, dynamicFromValue(*runtime_, args[2]))",
          "new_text": "dynamicFromValue(*runtime_, args[2])",
          "old_line_content": "  MethodCallResult result = delegate_->callSerializableNativeHook(",
          "new_line_content": "      *this, moduleId, methodId, dynamicFromValue(*runtime_, args[2]));",
          "content_same": false
        },
        {
          "line": 512,
          "old_api": "hasValue",
          "new_api": "Value::undefined()",
          "old_text": "result.hasValue()",
          "new_text": "Value::undefined()",
          "old_line_content": "  if (!result.hasValue()) {",
          "new_line_content": "    return Value::undefined();",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "isString",
          "new_api": "asString",
          "old_text": "args[1].isString()",
          "new_text": "args[1].asString(*runtime_).utf8(*runtime_)",
          "old_line_content": "  if (count > 1 && args[1].isString()) {",
          "new_line_content": "    url = args[1].asString(*runtime_).utf8(*runtime_);",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "evaluateJavaScript",
          "new_api": "std::move(code)",
          "old_text": "runtime_->evaluateJavaScript(\n      std::make_unique<StringBuffer>(std::move(code)), url)",
          "new_text": "std::move(code)",
          "old_line_content": "  return runtime_->evaluateJavaScript(",
          "new_line_content": "      std::make_unique<StringBuffer>(std::move(code)), url);",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "asString",
          "new_api": "asNumber",
          "old_text": "args[0].asString(runtime).utf8(runtime)",
          "new_text": "args[1].asNumber()",
          "old_line_content": "                args[0].asString(runtime).utf8(runtime),",
          "new_line_content": "                folly::to<unsigned int>(args[1].asNumber()));",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "asNumber",
          "new_api": "Value::undefined()",
          "old_text": "args[1].asNumber()",
          "new_text": "Value::undefined()",
          "old_line_content": "                folly::to<unsigned int>(args[1].asNumber()));",
          "new_line_content": "            return Value::undefined();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 257,
          "old_api": null,
          "new_api": "valueFromDynamic",
          "old_text": null,
          "new_text": "valueFromDynamic(*runtime_, arguments)",
          "old_line_content": "              methodId,",
          "new_line_content": "              valueFromDynamic(*runtime_, arguments));",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "getProperty",
          "old_text": null,
          "new_text": "std::call_once(bindFlag_, [this] {\n    SystraceSection s(\"JSIExecutor::bindBridge (once)\");\n    Value batchedBridgeValue =\n        runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");\n    if (batchedBridgeValue.isUndefined() || !batchedBridgeValue.isObject()) {\n      throw JSINativeException(\n          \"Could not get BatchedBridge, make sure your bundle is packaged correctly\");\n    }\n\n    Object batchedBridge = batchedBridgeValue.asObject(*runtime_);\n    callFunctionReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(\n        *runtime_, \"callFunctionReturnFlushedQueue\");\n    invokeCallbackAndReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(\n        *runtime_, \"invokeCallbackAndReturnFlushedQueue\");\n    flushedQueue_ =\n        batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\");\n  })",
          "old_line_content": "void JSIExecutor::bindBridge() {",
          "new_line_content": "  std::call_once(bindFlag_, [this] {",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "result.value()",
          "old_line_content": "",
          "new_line_content": "  Value returnValue = valueFromDynamic(*runtime_, result.value());",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": null,
          "new_api": "std::move(errorProducer)",
          "old_text": null,
          "new_text": "std::move(errorProducer)",
          "old_line_content": "        },",
          "new_line_content": "        std::move(errorProducer));",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "std::throw_with_nested(\n        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId))",
          "old_text": null,
          "new_text": "std::throw_with_nested(\n        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId))",
          "old_line_content": "  } catch (...) {",
          "new_line_content": "    std::throw_with_nested(",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "BridgeNativeModulePerfLogger::syncMethodCallReturnConversionEnd(\n        moduleName.c_str(), methodName.c_str())",
          "old_line_content": "  if (moduleRegistry_) {",
          "new_line_content": "    BridgeNativeModulePerfLogger::syncMethodCallReturnConversionEnd(",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "getProperty",
          "old_text": null,
          "new_text": "runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\")",
          "old_line_content": "    Value batchedBridgeValue =",
          "new_line_content": "        runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "performMicrotaskCheckpoint",
          "old_text": null,
          "new_text": "performMicrotaskCheckpoint(*runtime_)",
          "old_line_content": "",
          "new_line_content": "  performMicrotaskCheckpoint(*runtime_);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "asObject",
          "old_text": null,
          "new_text": "batchedBridgeValue.asObject(*runtime_)",
          "old_line_content": "",
          "new_line_content": "    Object batchedBridge = batchedBridgeValue.asObject(*runtime_);",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": null,
          "new_api": "callNativeModules",
          "old_text": null,
          "new_text": "callNativeModules(ret, true)",
          "old_line_content": "",
          "new_line_content": "  callNativeModules(ret, true);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "getPropertyAsFunction",
          "old_text": null,
          "new_text": "batchedBridge.getPropertyAsFunction(\n        *runtime_, \"invokeCallbackAndReturnFlushedQueue\")",
          "old_line_content": "        *runtime_, \"callFunctionReturnFlushedQueue\");",
          "new_line_content": "    invokeCallbackAndReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "getPropertyAsFunction",
          "old_text": null,
          "new_text": "batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\")",
          "old_line_content": "    flushedQueue_ =",
          "new_line_content": "        batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\");",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "std::invalid_argument(\n        \"globalEvalWithSourceUrl arg count must be 1 or 2\")",
          "old_text": null,
          "new_text": "std::invalid_argument(\n        \"globalEvalWithSourceUrl arg count must be 1 or 2\")",
          "old_line_content": "  if (count != 1 && count != 2) {",
          "new_line_content": "    throw std::invalid_argument(",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "bindBridge",
          "old_text": null,
          "new_text": "bindBridge()",
          "old_line_content": "  if (!invokeCallbackAndReturnFlushedQueue_) {",
          "new_line_content": "    bindBridge();",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "asString",
          "old_text": null,
          "new_text": "args[0].asString(*runtime_).utf8(*runtime_)",
          "old_line_content": "",
          "new_line_content": "  auto code = args[0].asString(*runtime_).utf8(*runtime_);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "isString",
          "old_text": null,
          "new_text": "args[1].isString()",
          "old_line_content": "  std::string url;",
          "new_line_content": "  if (count > 1 && args[1].isString()) {",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "invokeCallbackAndReturnFlushedQueue_->call(\n        *runtime_, callbackId, valueFromDynamic(*runtime_, arguments))",
          "old_line_content": "  try {",
          "new_line_content": "    ret = invokeCallbackAndReturnFlushedQueue_->call(",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(delegate_)",
          "old_line_content": "  // module registry to the factory/ctor.",
          "new_line_content": "  CHECK(delegate_) << \"Attempting to use native modules without a delegate\";",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "std::runtime_error(\n        folly::to<std::string>(\"Error invoking callback \", callbackId))",
          "old_text": null,
          "new_text": "std::runtime_error(\n        folly::to<std::string>(\"Error invoking callback \", callbackId))",
          "old_line_content": "  } catch (...) {",
          "new_line_content": "    std::throw_with_nested(std::runtime_error(",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "evaluateJavaScript",
          "old_text": null,
          "new_text": "runtime_->evaluateJavaScript(\n      std::make_unique<StringBuffer>(std::move(code)), url)",
          "old_line_content": "",
          "new_line_content": "  return runtime_->evaluateJavaScript(",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "getPropertyAsObject",
          "old_text": null,
          "new_text": "runtime_->global().getPropertyAsObject(*runtime_, \"JSON\")\n    .getPropertyAsFunction(*runtime_, \"stringify\").call(*runtime_, queue)\n    .getString(*runtime_).utf8(*runtime_)",
          "old_line_content": "#if 0 // maybe useful for debugging",
          "new_line_content": "  std::string json = runtime_->global().getPropertyAsObject(*runtime_, \"JSON\")",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "performMicrotaskCheckpoint",
          "old_text": null,
          "new_text": "performMicrotaskCheckpoint(*runtime_)",
          "old_line_content": "",
          "new_line_content": "  performMicrotaskCheckpoint(*runtime_);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart()",
          "old_text": null,
          "new_text": "BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart()",
          "old_line_content": "#endif",
          "new_line_content": "  BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart();",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "global",
          "old_text": null,
          "new_text": "runtime.global().setProperty(\n      runtime,\n      \"nativeLoggingHook\",\n      Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),\n          2,\n          [logger = std::move(logger)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) {\n            if (count != 2) {\n              throw std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\");\n            }\n            logger(\n                args[0].asString(runtime).utf8(runtime),\n                folly::to<unsigned int>(args[1].asNumber()));\n            return Value::undefined();\n          }))",
          "old_line_content": "void bindNativeLogger(Runtime &runtime, Logger logger) {",
          "new_line_content": "  runtime.global().setProperty(",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "callNativeModules",
          "old_text": null,
          "new_text": "callNativeModules(ret, true)",
          "old_line_content": "",
          "new_line_content": "  callNativeModules(ret, true);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "callNativeModules",
          "old_text": null,
          "new_text": "delegate_->callNativeModules(\n      *this, dynamicFromValue(*runtime_, queue), isEndOfBatch)",
          "old_line_content": "",
          "new_line_content": "  delegate_->callNativeModules(",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "asString",
          "old_text": null,
          "new_text": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),\n          2,\n          [logger = std::move(logger)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) {\n            if (count != 2) {\n              throw std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\");\n            }\n            logger(\n                args[0].asString(runtime).utf8(runtime),\n                folly::to<unsigned int>(args[1].asNumber()));\n            return Value::undefined();\n          })",
          "old_line_content": "      \"nativeLoggingHook\",",
          "new_line_content": "      Function::createFromHostFunction(",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "PropNameID::forAscii(runtime, \"nativeLoggingHook\")",
          "old_text": null,
          "new_text": "PropNameID::forAscii(runtime, \"nativeLoggingHook\")",
          "old_line_content": "          runtime,",
          "new_line_content": "          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "setProperty",
          "old_text": null,
          "new_text": "runtime_->global().setProperty(\n      *runtime_,\n      propName.c_str(),\n      Value::createFromJsonUtf8(\n          *runtime_,\n          reinterpret_cast<const uint8_t *>(jsonValue->c_str()),\n          jsonValue->size()))",
          "old_line_content": "  SystraceSection s(\"JSIExecutor::setGlobalVariable\", \"propName\", propName);",
          "new_line_content": "  runtime_->global().setProperty(",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "flushedQueue_->call(*runtime_)",
          "old_line_content": "  if (flushedQueue_) {",
          "new_line_content": "    Value ret = flushedQueue_->call(*runtime_);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "propName.c_str()",
          "old_line_content": "      *runtime_,",
          "new_line_content": "      propName.c_str(),",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "jsonValue->c_str()",
          "old_line_content": "          *runtime_,",
          "new_line_content": "          reinterpret_cast<const uint8_t *>(jsonValue->c_str()),",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\")",
          "old_text": null,
          "new_text": "std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\")",
          "old_line_content": "            if (count != 2) {",
          "new_line_content": "              throw std::invalid_argument(",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "asString",
          "old_text": null,
          "new_text": "logger(\n                args[0].asString(runtime).utf8(runtime),\n                folly::to<unsigned int>(args[1].asNumber()))",
          "old_line_content": "            }",
          "new_line_content": "            logger(",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "description",
          "old_text": null,
          "new_text": "runtime_->description()",
          "old_line_content": "std::string JSIExecutor::getDescription() {",
          "new_line_content": "  return \"JSI (\" + runtime_->description() + \")\";",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "getProperty",
          "old_text": null,
          "new_text": "runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\")",
          "old_line_content": "  Value batchedBridge =",
          "new_line_content": "      runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "runtime_.get()",
          "old_line_content": "void *JSIExecutor::getJavaScriptContext() {",
          "new_line_content": "  return runtime_.get();",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "isUndefined",
          "old_text": null,
          "new_text": "batchedBridge.isUndefined()",
          "old_line_content": "  // BatchedBridge to be loaded as a side effect.",
          "new_line_content": "  if (!batchedBridge.isUndefined()) {",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "global",
          "old_text": null,
          "new_text": "runtime.global().setProperty(\n      runtime,\n      \"nativePerformanceNow\",\n      Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); }))",
          "old_line_content": "void bindNativePerformanceNow(Runtime &runtime, PerformanceNow performanceNow) {",
          "new_line_content": "  runtime.global().setProperty(",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "isInspectable",
          "old_text": null,
          "new_text": "runtime_->isInspectable()",
          "old_line_content": "bool JSIExecutor::isInspectable() {",
          "new_line_content": "  return runtime_->isInspectable();",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "bindBridge",
          "old_text": null,
          "new_text": "bindBridge()",
          "old_line_content": "    // get the pending queue of native calls.",
          "new_line_content": "    bindBridge();",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); })",
          "old_text": null,
          "new_text": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); })",
          "old_line_content": "      \"nativePerformanceNow\",",
          "new_line_content": "      Function::createFromHostFunction(",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "PropNameID::forAscii(runtime, \"nativePerformanceNow\")",
          "old_text": null,
          "new_text": "PropNameID::forAscii(runtime, \"nativePerformanceNow\")",
          "old_line_content": "          runtime,",
          "new_line_content": "          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "callNativeModules",
          "old_text": null,
          "new_text": "callNativeModules(nullptr, true)",
          "old_line_content": "    // nothing happens, which is correct.",
          "new_line_content": "    callNativeModules(nullptr, true);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "performanceNow",
          "old_text": null,
          "new_text": "performanceNow()",
          "old_line_content": "              const jsi::Value *args,",
          "new_line_content": "              size_t count) { return Value(performanceNow()); }));",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "std::invalid_argument(\"Got wrong number of args\")",
          "old_text": null,
          "new_text": "std::invalid_argument(\"Got wrong number of args\")",
          "old_line_content": "  if (count > 2 || count == 0) {",
          "new_line_content": "    throw std::invalid_argument(\"Got wrong number of args\");",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "getNumber",
          "old_text": null,
          "new_text": "args[0].getNumber()",
          "old_line_content": "",
          "new_line_content": "  uint32_t moduleId = folly::to<uint32_t>(args[0].getNumber());",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "evaluateJavaScript",
          "old_text": null,
          "new_text": "runtime_->evaluateJavaScript(\n      std::make_unique<StringBuffer>(module.code), module.name)",
          "old_line_content": "",
          "new_line_content": "  runtime_->evaluateJavaScript(",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "std::invalid_argument(\"nativeCallSyncHook arg count must be 3\")",
          "old_text": null,
          "new_text": "std::invalid_argument(\"nativeCallSyncHook arg count must be 3\")",
          "old_line_content": "  if (count != 3) {",
          "new_line_content": "    throw std::invalid_argument(\"nativeCallSyncHook arg count must be 3\");",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "asObject",
          "old_text": null,
          "new_text": "args[2].asObject(*runtime_).isArray(*runtime_)",
          "old_line_content": "",
          "new_line_content": "  if (!args[2].isObject() || !args[2].asObject(*runtime_).isArray(*runtime_)) {",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "getNumber",
          "old_text": null,
          "new_text": "args[0].getNumber()",
          "old_line_content": "",
          "new_line_content": "  unsigned int moduleId = static_cast<unsigned int>(args[0].getNumber());",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "getModuleName",
          "old_text": null,
          "new_text": "moduleRegistry_->getModuleName(moduleId)",
          "old_line_content": "  if (moduleRegistry_) {",
          "new_line_content": "    moduleName = moduleRegistry_->getModuleName(moduleId);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "BridgeNativeModulePerfLogger::syncMethodCallStart(\n        moduleName.c_str(), methodName.c_str())",
          "old_line_content": "",
          "new_line_content": "    BridgeNativeModulePerfLogger::syncMethodCallStart(",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "LOG",
          "old_text": null,
          "new_text": "LOG(INFO)",
          "old_line_content": "      // For non-severe memory trims, do nothing.",
          "new_line_content": "      LOG(INFO) << \"Memory warning (pressure level: \" << levelName",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "BridgeNativeModulePerfLogger::syncMethodCallArgConversionStart(\n        moduleName.c_str(), methodName.c_str())",
          "old_line_content": "",
          "new_line_content": "    BridgeNativeModulePerfLogger::syncMethodCallArgConversionStart(",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "callSerializableNativeHook",
          "old_text": null,
          "new_text": "delegate_->callSerializableNativeHook(\n      *this, moduleId, methodId, dynamicFromValue(*runtime_, args[2]))",
          "old_line_content": "",
          "new_line_content": "  MethodCallResult result = delegate_->callSerializableNativeHook(",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "LOG",
          "old_text": null,
          "new_text": "LOG(INFO)",
          "old_line_content": "      // collections.",
          "new_line_content": "      LOG(INFO) << \"Memory warning (pressure level: \" << levelName",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "collectGarbage",
          "old_text": null,
          "new_text": "runtime_->instrumentation().collectGarbage(levelName)",
          "old_line_content": "                << \") received by JS VM, running a GC\";",
          "new_line_content": "      runtime_->instrumentation().collectGarbage(levelName);",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "Value::undefined()",
          "old_text": null,
          "new_text": "Value::undefined()",
          "old_line_content": "",
          "new_line_content": "  Value ret = Value::undefined();",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "LOG",
          "old_text": null,
          "new_text": "LOG(WARNING)",
          "old_line_content": "      // meaningless.",
          "new_line_content": "      LOG(WARNING) << \"Memory warning (pressure level: \" << pressureLevel",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "scopedTimeoutInvoker_(\n        [&] {\n          ret = callFunctionReturnFlushedQueue_->call(\n              *runtime_,\n              moduleId,\n              methodId,\n              valueFromDynamic(*runtime_, arguments));\n        },\n        std::move(errorProducer))",
          "old_line_content": "  try {",
          "new_line_content": "    scopedTimeoutInvoker_(",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "callFunctionReturnFlushedQueue_->call(\n              *runtime_,\n              moduleId,\n              methodId,\n              valueFromDynamic(*runtime_, arguments))",
          "old_line_content": "        [&] {",
          "new_line_content": "          ret = callFunctionReturnFlushedQueue_->call(",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "hasValue",
          "old_text": null,
          "new_text": "result.hasValue()",
          "old_line_content": "",
          "new_line_content": "  if (!result.hasValue()) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 513,
          "old_api": "Value::undefined()",
          "new_api": null,
          "old_text": "Value::undefined()",
          "new_text": null,
          "old_line_content": "    return Value::undefined();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "valueFromDynamic",
          "new_api": null,
          "old_text": "valueFromDynamic(*runtime_, arguments)",
          "new_text": null,
          "old_line_content": "              valueFromDynamic(*runtime_, arguments));",
          "new_line_content": "        },",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "getProperty",
          "new_api": null,
          "old_text": "std::call_once(bindFlag_, [this] {\n    SystraceSection s(\"JSIExecutor::bindBridge (once)\");\n    Value batchedBridgeValue =\n        runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");\n    if (batchedBridgeValue.isUndefined() || !batchedBridgeValue.isObject()) {\n      throw JSINativeException(\n          \"Could not get BatchedBridge, make sure your bundle is packaged correctly\");\n    }\n\n    Object batchedBridge = batchedBridgeValue.asObject(*runtime_);\n    callFunctionReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(\n        *runtime_, \"callFunctionReturnFlushedQueue\");\n    invokeCallbackAndReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(\n        *runtime_, \"invokeCallbackAndReturnFlushedQueue\");\n    flushedQueue_ =\n        batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\");\n  })",
          "new_text": null,
          "old_line_content": "  std::call_once(bindFlag_, [this] {",
          "new_line_content": "    SystraceSection s(\"JSIExecutor::bindBridge (once)\");",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "value",
          "new_api": null,
          "old_text": "result.value()",
          "new_text": null,
          "old_line_content": "  Value returnValue = valueFromDynamic(*runtime_, result.value());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "std::move(errorProducer)",
          "new_api": null,
          "old_text": "std::move(errorProducer)",
          "new_text": null,
          "old_line_content": "        std::move(errorProducer));",
          "new_line_content": "  } catch (...) {",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId)",
          "new_api": null,
          "old_text": "std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId)",
          "new_text": null,
          "old_line_content": "        std::runtime_error(\"Error calling \" + moduleId + \".\" + methodId));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "JSINativeException",
          "new_api": null,
          "old_text": "JSINativeException(\n          \"Could not get BatchedBridge, make sure your bundle is packaged correctly\")",
          "new_text": null,
          "old_line_content": "      throw JSINativeException(",
          "new_line_content": "          \"Could not get BatchedBridge, make sure your bundle is packaged correctly\");",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "methodName.c_str()",
          "new_text": null,
          "old_line_content": "        moduleName.c_str(), methodName.c_str());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "performMicrotaskCheckpoint",
          "new_api": null,
          "old_text": "performMicrotaskCheckpoint(*runtime_)",
          "new_text": null,
          "old_line_content": "  performMicrotaskCheckpoint(*runtime_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "callNativeModules",
          "new_api": null,
          "old_text": "callNativeModules(ret, true)",
          "new_text": null,
          "old_line_content": "  callNativeModules(ret, true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "getPropertyAsFunction",
          "new_api": null,
          "old_text": "batchedBridge.getPropertyAsFunction(\n        *runtime_, \"callFunctionReturnFlushedQueue\")",
          "new_text": null,
          "old_line_content": "    callFunctionReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(",
          "new_line_content": "        *runtime_, \"callFunctionReturnFlushedQueue\");",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "getPropertyAsFunction",
          "new_api": null,
          "old_text": "batchedBridge.getPropertyAsFunction(\n        *runtime_, \"invokeCallbackAndReturnFlushedQueue\")",
          "new_text": null,
          "old_line_content": "    invokeCallbackAndReturnFlushedQueue_ = batchedBridge.getPropertyAsFunction(",
          "new_line_content": "        *runtime_, \"invokeCallbackAndReturnFlushedQueue\");",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "getPropertyAsFunction",
          "new_api": null,
          "old_text": "batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\")",
          "new_text": null,
          "old_line_content": "        batchedBridge.getPropertyAsFunction(*runtime_, \"flushedQueue\");",
          "new_line_content": "  });",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "std::invalid_argument(\n        \"globalEvalWithSourceUrl arg count must be 1 or 2\")",
          "new_api": null,
          "old_text": "std::invalid_argument(\n        \"globalEvalWithSourceUrl arg count must be 1 or 2\")",
          "new_text": null,
          "old_line_content": "    throw std::invalid_argument(",
          "new_line_content": "        \"globalEvalWithSourceUrl arg count must be 1 or 2\");",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "bindBridge",
          "new_api": null,
          "old_text": "bindBridge()",
          "new_text": null,
          "old_line_content": "    bindBridge();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "asString",
          "new_api": null,
          "old_text": "args[0].asString(*runtime_).utf8(*runtime_)",
          "new_text": null,
          "old_line_content": "  auto code = args[0].asString(*runtime_).utf8(*runtime_);",
          "new_line_content": "  std::string url;",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "asString",
          "new_api": null,
          "old_text": "args[1].asString(*runtime_).utf8(*runtime_)",
          "new_text": null,
          "old_line_content": "    url = args[1].asString(*runtime_).utf8(*runtime_);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "valueFromDynamic",
          "new_api": null,
          "old_text": "valueFromDynamic(*runtime_, arguments)",
          "new_text": null,
          "old_line_content": "        *runtime_, callbackId, valueFromDynamic(*runtime_, arguments));",
          "new_line_content": "  } catch (...) {",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "CHECK",
          "new_api": null,
          "old_text": "CHECK(delegate_)",
          "new_text": null,
          "old_line_content": "  CHECK(delegate_) << \"Attempting to use native modules without a delegate\";",
          "new_line_content": "#if 0 // maybe useful for debugging",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "folly::to<std::string>(\"Error invoking callback \", callbackId)",
          "new_api": null,
          "old_text": "folly::to<std::string>(\"Error invoking callback \", callbackId)",
          "new_text": null,
          "old_line_content": "        folly::to<std::string>(\"Error invoking callback \", callbackId)));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "std::move(code)",
          "new_api": null,
          "old_text": "std::move(code)",
          "new_text": null,
          "old_line_content": "      std::make_unique<StringBuffer>(std::move(code)), url);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "getPropertyAsObject",
          "new_api": null,
          "old_text": "runtime_->global().getPropertyAsObject(*runtime_, \"JSON\")\n    .getPropertyAsFunction(*runtime_, \"stringify\").call(*runtime_, queue)\n    .getString(*runtime_).utf8(*runtime_)",
          "new_text": null,
          "old_line_content": "  std::string json = runtime_->global().getPropertyAsObject(*runtime_, \"JSON\")",
          "new_line_content": "    .getPropertyAsFunction(*runtime_, \"stringify\").call(*runtime_, queue)",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "performMicrotaskCheckpoint",
          "new_api": null,
          "old_text": "performMicrotaskCheckpoint(*runtime_)",
          "new_text": null,
          "old_line_content": "  performMicrotaskCheckpoint(*runtime_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart()",
          "new_api": null,
          "old_text": "BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart()",
          "new_text": null,
          "old_line_content": "  BridgeNativeModulePerfLogger::asyncMethodCallBatchPreprocessStart();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "global",
          "new_api": null,
          "old_text": "runtime.global().setProperty(\n      runtime,\n      \"nativeLoggingHook\",\n      Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),\n          2,\n          [logger = std::move(logger)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) {\n            if (count != 2) {\n              throw std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\");\n            }\n            logger(\n                args[0].asString(runtime).utf8(runtime),\n                folly::to<unsigned int>(args[1].asNumber()));\n            return Value::undefined();\n          }))",
          "new_text": null,
          "old_line_content": "  runtime.global().setProperty(",
          "new_line_content": "      runtime,",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "callNativeModules",
          "new_api": null,
          "old_text": "callNativeModules(ret, true)",
          "new_text": null,
          "old_line_content": "  callNativeModules(ret, true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "dynamicFromValue",
          "new_api": null,
          "old_text": "dynamicFromValue(*runtime_, queue)",
          "new_text": null,
          "old_line_content": "      *this, dynamicFromValue(*runtime_, queue), isEndOfBatch);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "asString",
          "new_api": null,
          "old_text": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),\n          2,\n          [logger = std::move(logger)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) {\n            if (count != 2) {\n              throw std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\");\n            }\n            logger(\n                args[0].asString(runtime).utf8(runtime),\n                folly::to<unsigned int>(args[1].asNumber()));\n            return Value::undefined();\n          })",
          "new_text": null,
          "old_line_content": "      Function::createFromHostFunction(",
          "new_line_content": "          runtime,",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "PropNameID::forAscii(runtime, \"nativeLoggingHook\")",
          "new_api": null,
          "old_text": "PropNameID::forAscii(runtime, \"nativeLoggingHook\")",
          "new_text": null,
          "old_line_content": "          PropNameID::forAscii(runtime, \"nativeLoggingHook\"),",
          "new_line_content": "          2,",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "setProperty",
          "new_api": null,
          "old_text": "runtime_->global().setProperty(\n      *runtime_,\n      propName.c_str(),\n      Value::createFromJsonUtf8(\n          *runtime_,\n          reinterpret_cast<const uint8_t *>(jsonValue->c_str()),\n          jsonValue->size()))",
          "new_text": null,
          "old_line_content": "  runtime_->global().setProperty(",
          "new_line_content": "      *runtime_,",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "callNativeModules",
          "new_api": null,
          "old_text": "callNativeModules(ret, true)",
          "new_text": null,
          "old_line_content": "    callNativeModules(ret, true);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "Value::createFromJsonUtf8(\n          *runtime_,\n          reinterpret_cast<const uint8_t *>(jsonValue->c_str()),\n          jsonValue->size())",
          "new_text": null,
          "old_line_content": "      Value::createFromJsonUtf8(",
          "new_line_content": "          *runtime_,",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\")",
          "new_api": null,
          "old_text": "std::invalid_argument(\n                  \"nativeLoggingHook takes 2 arguments\")",
          "new_text": null,
          "old_line_content": "              throw std::invalid_argument(",
          "new_line_content": "                  \"nativeLoggingHook takes 2 arguments\");",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "size",
          "new_api": null,
          "old_text": "jsonValue->size()",
          "new_text": null,
          "old_line_content": "          jsonValue->size()));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "description",
          "new_api": null,
          "old_text": "runtime_->description()",
          "new_text": null,
          "old_line_content": "  return \"JSI (\" + runtime_->description() + \")\";",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "getProperty",
          "new_api": null,
          "old_text": "runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\")",
          "new_text": null,
          "old_line_content": "      runtime_->global().getProperty(*runtime_, \"__fbBatchedBridge\");",
          "new_line_content": "  // So here, if __fbBatchedBridge doesn't exist, then we know no native calls",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "Value::undefined()",
          "new_api": null,
          "old_text": "Value::undefined()",
          "new_text": null,
          "old_line_content": "            return Value::undefined();",
          "new_line_content": "          }));",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "get",
          "new_api": null,
          "old_text": "runtime_.get()",
          "new_text": null,
          "old_line_content": "  return runtime_.get();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "isUndefined",
          "new_api": null,
          "old_text": "batchedBridge.isUndefined()",
          "new_text": null,
          "old_line_content": "  if (!batchedBridge.isUndefined()) {",
          "new_line_content": "    // If calls were made, we bind to the JS bridge methods, and use them to",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "global",
          "new_api": null,
          "old_text": "runtime.global().setProperty(\n      runtime,\n      \"nativePerformanceNow\",\n      Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); }))",
          "new_text": null,
          "old_line_content": "  runtime.global().setProperty(",
          "new_line_content": "      runtime,",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "isInspectable",
          "new_api": null,
          "old_text": "runtime_->isInspectable()",
          "new_text": null,
          "old_line_content": "  return runtime_->isInspectable();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); })",
          "new_api": null,
          "old_text": "Function::createFromHostFunction(\n          runtime,\n          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),\n          0,\n          [performanceNow = std::move(performanceNow)](\n              jsi::Runtime &runtime,\n              const jsi::Value &,\n              const jsi::Value *args,\n              size_t count) { return Value(performanceNow()); })",
          "new_text": null,
          "old_line_content": "      Function::createFromHostFunction(",
          "new_line_content": "          runtime,",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "callNativeModules",
          "new_api": null,
          "old_text": "callNativeModules(ret, true)",
          "new_text": null,
          "old_line_content": "    callNativeModules(ret, true);",
          "new_line_content": "  } else if (delegate_) {",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "PropNameID::forAscii(runtime, \"nativePerformanceNow\")",
          "new_api": null,
          "old_text": "PropNameID::forAscii(runtime, \"nativePerformanceNow\")",
          "new_text": null,
          "old_line_content": "          PropNameID::forAscii(runtime, \"nativePerformanceNow\"),",
          "new_line_content": "          0,",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "callNativeModules",
          "new_api": null,
          "old_text": "callNativeModules(nullptr, true)",
          "new_text": null,
          "old_line_content": "    callNativeModules(nullptr, true);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "performanceNow",
          "new_api": null,
          "old_text": "performanceNow()",
          "new_text": null,
          "old_line_content": "              size_t count) { return Value(performanceNow()); }));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "std::invalid_argument(\"Got wrong number of args\")",
          "new_api": null,
          "old_text": "std::invalid_argument(\"Got wrong number of args\")",
          "new_text": null,
          "old_line_content": "    throw std::invalid_argument(\"Got wrong number of args\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "getModule",
          "new_api": null,
          "old_text": "bundleRegistry_->getModule(bundleId, moduleId)",
          "new_text": null,
          "old_line_content": "  auto module = bundleRegistry_->getModule(bundleId, moduleId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "facebook::jsi::Value()",
          "new_api": null,
          "old_text": "facebook::jsi::Value()",
          "new_text": null,
          "old_line_content": "  return facebook::jsi::Value();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "std::invalid_argument(\"nativeCallSyncHook arg count must be 3\")",
          "new_api": null,
          "old_text": "std::invalid_argument(\"nativeCallSyncHook arg count must be 3\")",
          "new_text": null,
          "old_line_content": "    throw std::invalid_argument(\"nativeCallSyncHook arg count must be 3\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "folly::to<std::string>(\"method parameters should be array\")",
          "new_api": null,
          "old_text": "folly::to<std::string>(\"method parameters should be array\")",
          "new_text": null,
          "old_line_content": "        folly::to<std::string>(\"method parameters should be array\"));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "getNumber",
          "new_api": null,
          "old_text": "args[1].getNumber()",
          "new_text": null,
          "old_line_content": "  unsigned int methodId = static_cast<unsigned int>(args[1].getNumber());",
          "new_line_content": "  std::string moduleName;",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "getModuleSyncMethodName",
          "new_api": null,
          "old_text": "moduleRegistry_->getModuleSyncMethodName(moduleId, methodId)",
          "new_text": null,
          "old_line_content": "    methodName = moduleRegistry_->getModuleSyncMethodName(moduleId, methodId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "methodName.c_str()",
          "new_text": null,
          "old_line_content": "        moduleName.c_str(), methodName.c_str());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "LOG",
          "new_api": null,
          "old_text": "LOG(INFO)",
          "new_text": null,
          "old_line_content": "      LOG(INFO) << \"Memory warning (pressure level: \" << levelName",
          "new_line_content": "                << \") received by JS VM, ignoring because it's non-severe\";",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "methodName.c_str()",
          "new_text": null,
          "old_line_content": "        moduleName.c_str(), methodName.c_str());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "dynamicFromValue",
          "new_api": null,
          "old_text": "dynamicFromValue(*runtime_, args[2])",
          "new_text": null,
          "old_line_content": "      *this, moduleId, methodId, dynamicFromValue(*runtime_, args[2]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "LOG",
          "new_api": null,
          "old_text": "LOG(INFO)",
          "new_text": null,
          "old_line_content": "      LOG(INFO) << \"Memory warning (pressure level: \" << levelName",
          "new_line_content": "                << \") received by JS VM, running a GC\";",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "collectGarbage",
          "new_api": null,
          "old_text": "runtime_->instrumentation().collectGarbage(levelName)",
          "new_text": null,
          "old_line_content": "      runtime_->instrumentation().collectGarbage(levelName);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str()",
          "new_text": null,
          "old_line_content": "    return ss.str();",
          "new_line_content": "  };",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "Value::undefined()",
          "new_api": null,
          "old_text": "Value::undefined()",
          "new_text": null,
          "old_line_content": "  Value ret = Value::undefined();",
          "new_line_content": "  try {",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "LOG",
          "new_api": null,
          "old_text": "LOG(WARNING)",
          "new_text": null,
          "old_line_content": "      LOG(WARNING) << \"Memory warning (pressure level: \" << pressureLevel",
          "new_line_content": "                   << \") received by JS VM, unrecognized pressure level\";",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": "call",
          "new_api": null,
          "old_text": "scopedTimeoutInvoker_(\n        [&] {\n          ret = callFunctionReturnFlushedQueue_->call(\n              *runtime_,\n              moduleId,\n              methodId,\n              valueFromDynamic(*runtime_, arguments));\n        },\n        std::move(errorProducer))",
          "new_text": null,
          "old_line_content": "    scopedTimeoutInvoker_(",
          "new_line_content": "        [&] {",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "call",
          "new_api": null,
          "old_text": "callFunctionReturnFlushedQueue_->call(\n              *runtime_,\n              moduleId,\n              methodId,\n              valueFromDynamic(*runtime_, arguments))",
          "new_text": null,
          "old_line_content": "          ret = callFunctionReturnFlushedQueue_->call(",
          "new_line_content": "              *runtime_,",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 26,
      "total_additions": 63,
      "total_deletions": 64,
      "total_api_changes": 153
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 153,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          245
        ]
      }
    },
    "api_calls_before": 198,
    "api_calls_after": 197,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
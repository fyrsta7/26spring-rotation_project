{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/34087ad2b55a187bd4a0c699a4bd7898cddcb425",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/34087ad2b55a187bd4a0c699a4bd7898cddcb425/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/34087ad2b55a187bd4a0c699a4bd7898cddcb425/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/34087ad2b55a187bd4a0c699a4bd7898cddcb425/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1602,
          "old_api": "tolower",
          "new_api": "register",
          "old_text": "tolower(*p)",
          "new_text": "register",
          "old_line_content": "\t\t*p = tolower(*p);",
          "new_line_content": "\tregister char *end = str + length;",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "tolower",
          "new_api": "MIN",
          "old_text": "tolower(*s1++)",
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t\tc1 = tolower(*s1++);",
          "new_line_content": "\tlen = MIN(len1, len2);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": "tolower",
          "new_api": "MIN",
          "old_text": "tolower(*s1++)",
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t\tc1 = tolower(*s1++);",
          "new_line_content": "\tlen = MIN(length, MIN(len1, len2));",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "str2num",
          "new_api": "init_num",
          "old_text": "str2num(&second, s2->value.str.val, 100)",
          "new_text": "init_num(&first)",
          "old_line_content": "\t\t\tstr2num(&second, s2->value.str.val, 100); /* ditto */",
          "new_line_content": "\t\t\tinit_num(&first);",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "bc_compare",
          "new_api": "init_num",
          "old_text": "bc_compare(first, second)",
          "new_text": "init_num(&second)",
          "old_line_content": "\t\t\tresult->value.lval = bc_compare(first, second);",
          "new_line_content": "\t\t\tinit_num(&second);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": "str2num",
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "new_text": "str2num(&first, s1->value.str.val, 100)",
          "old_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "new_line_content": "\t\t\tstr2num(&first, s1->value.str.val, 100); /* this scale should do */",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "free_num",
          "new_api": "bc_compare",
          "old_text": "free_num(&first)",
          "new_text": "bc_compare(first, second)",
          "old_line_content": "\t\t\tfree_num(&first);",
          "new_line_content": "\t\t\tresult->value.lval = bc_compare(first, second);",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "free_num",
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": "free_num(&second)",
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "old_line_content": "\t\t\tfree_num(&second);",
          "new_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": "strtod",
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.dval)",
          "new_text": "strtod(s2->value.str.val, NULL)",
          "old_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.dval);",
          "new_line_content": "\t\t\t\tdval2 = strtod(s2->value.str.val, NULL);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "EG",
          "new_api": "TSRMLS_FETCH",
          "old_text": "EG(precision)",
          "new_text": "TSRMLS_FETCH()",
          "old_line_content": "\tsprintf(op->value.str.val, \"%.*G\", (int) EG(precision), dval);",
          "new_line_content": "\tTSRMLS_FETCH();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1669,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(length, len2)",
          "old_line_content": "",
          "new_line_content": "\treturn MIN(length, len1) - MIN(length, len2);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(precision)",
          "old_line_content": "",
          "new_line_content": "\top->value.str.val = (char *) emalloc_rel(MAX_LENGTH_OF_DOUBLE + EG(precision) + 1);",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(op->value.str.val)",
          "old_line_content": "\t\tchar *p = op->value.str.val;",
          "new_line_content": "\top->value.str.len = strlen(op->value.str.val);",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "zend_binary_strcmp",
          "old_text": null,
          "new_text": "zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "old_line_content": "ZEND_API int zend_binary_zval_strncmp(zval *s1, zval *s2, zval *s3)",
          "new_line_content": "\treturn zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(p, '.')",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif ((p = strchr(p, '.'))) {",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(float_separator)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t*p = EG(float_separator)[0];",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "zend_binary_strncmp",
          "old_text": null,
          "new_text": "zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "old_line_content": "",
          "new_line_content": "\treturn zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": null,
          "new_api": "zend_binary_strcasecmp",
          "old_text": null,
          "new_text": "zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "old_line_content": "",
          "new_line_content": "\treturn zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": null,
          "new_api": "zend_binary_strncasecmp",
          "old_text": null,
          "new_text": "zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "old_line_content": "",
          "new_line_content": "\treturn zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "is_numeric_string",
          "old_text": null,
          "new_text": "is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)",
          "old_line_content": "\t\tif ((ret1==FLAG_IS_BC) || (ret2==FLAG_IS_BC)) {",
          "new_line_content": "\tif ((ret1=is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)) &&",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": null,
          "new_api": "is_numeric_string",
          "old_text": null,
          "new_text": "is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0)",
          "old_line_content": "\t\t\tbc_num first, second;",
          "new_line_content": "\t\t(ret2=is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0))) {",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "str2num",
          "old_text": null,
          "new_text": "str2num(&second, s2->value.str.val, 100)",
          "old_line_content": "\t\t\tresult->type = IS_LONG;",
          "new_line_content": "\t\t\tstr2num(&second, s2->value.str.val, 100); /* ditto */",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "emalloc",
          "old_text": null,
          "new_text": "emalloc(length+1)",
          "old_line_content": "",
          "new_line_content": "\tresult = emalloc(length+1);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "free_num",
          "old_text": null,
          "new_text": "free_num(&first)",
          "old_line_content": "#endif",
          "new_line_content": "\t\t\tfree_num(&first);",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "free_num",
          "old_text": null,
          "new_text": "free_num(&second)",
          "old_line_content": "\t\tif ((ret1==IS_DOUBLE) || (ret2==IS_DOUBLE)) {",
          "new_line_content": "\t\t\tfree_num(&second);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*p++)",
          "old_line_content": "\t",
          "new_line_content": "\t\t*result++ = tolower(*p++);",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(s1->value.str.val, NULL)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdval1 = strtod(s1->value.str.val, NULL);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": null,
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.dval)",
          "old_line_content": "\t\t\tresult->value.lval = lval1 - lval2;",
          "new_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.dval);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\twhile (p < end) {",
          "new_line_content": "\tregister char *p=str;",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": null,
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": null,
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*p)",
          "old_line_content": "}",
          "new_line_content": "\t\t*p = tolower(*p);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "zend_binary_zval_strcmp",
          "old_text": null,
          "new_text": "zend_binary_zval_strcmp(s1, s2)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tresult->value.lval = zend_binary_zval_strcmp(s1, s2);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": null,
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "old_line_content": "\treturn;\t",
          "new_line_content": "\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t} else {",
          "new_line_content": "\tretval = memcmp(s1, s2, MIN(len1, len2));",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "old_line_content": "\treturn result.value.lval;",
          "new_line_content": "\tif (compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t} else {",
          "new_line_content": "\tretval = memcmp(s1, s2, MIN(length, MIN(len1, len2)));",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": null,
          "new_api": "zend_hash_compare",
          "old_text": null,
          "new_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\treturn zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(length, len2)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn (MIN(length, len1) - MIN(length, len2));",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "zend_hash_compare",
          "old_text": null,
          "new_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\tresult->value.lval = zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "zend_compare_symbol_tables",
          "old_text": null,
          "new_text": "zend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\tzend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*s1++)",
          "old_line_content": "\t\t\treturn c1 - c2;",
          "new_line_content": "\t\tc1 = tolower(*s1++);",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*s2++)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tc2 = tolower(*s2++);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "Z_OBJ_HT_P",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(o2)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (Z_OBJ_HT_P(o1) != Z_OBJ_HT_P(o2)) {",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": null,
          "new_api": "Z_OBJ_HT_P",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(o1)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\tif (Z_OBJ_HT_P(o1)->compare_objects == NULL) {",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "Z_OBJ_HANDLE_P",
          "old_text": null,
          "new_text": "Z_OBJ_HANDLE_P(o2)",
          "old_line_content": "\t\t\tresult->value.lval = 1;",
          "new_line_content": "\t\tif (Z_OBJ_HANDLE_P(o1) == Z_OBJ_HANDLE_P(o2)) {",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": null,
          "new_api": "compare_objects",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\t\tresult->value.lval = Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*s1++)",
          "old_line_content": "\t\t\treturn c1 - c2;",
          "new_line_content": "\t\tc1 = tolower(*s1++);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*s2++)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tc2 = tolower(*s2++);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1666,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(length, len2)",
          "new_text": null,
          "old_line_content": "\treturn MIN(length, len1) - MIN(length, len2);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "TSRMLS_FETCH",
          "new_api": null,
          "old_text": "TSRMLS_FETCH()",
          "new_text": null,
          "old_line_content": "\tTSRMLS_FETCH();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(precision)",
          "new_text": null,
          "old_line_content": "\top->value.str.val = (char *) emalloc_rel(MAX_LENGTH_OF_DOUBLE + EG(precision) + 1);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(op->value.str.val)",
          "new_text": null,
          "old_line_content": "\top->value.str.len = strlen(op->value.str.val);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "zend_binary_strcmp",
          "new_api": null,
          "old_text": "zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(p, '.')",
          "new_text": null,
          "old_line_content": "\t\tif ((p = strchr(p, '.'))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "zend_binary_strncmp",
          "new_api": null,
          "old_text": "zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "zend_binary_strcasecmp",
          "new_api": null,
          "old_text": "zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "zend_binary_strncasecmp",
          "new_api": null,
          "old_text": "zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "is_numeric_string",
          "new_api": null,
          "old_text": "is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)",
          "new_text": null,
          "old_line_content": "\tif ((ret1=is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)) &&",
          "new_line_content": "\tlong lval1, lval2;",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "is_numeric_string",
          "new_api": null,
          "old_text": "is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0)",
          "new_text": null,
          "old_line_content": "\t\t(ret2=is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0))) {",
          "new_line_content": "\tdouble dval1, dval2;",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "init_num",
          "new_api": null,
          "old_text": "init_num(&first)",
          "new_text": null,
          "old_line_content": "\t\t\tinit_num(&first);",
          "new_line_content": "\t\t\tbc_num first, second;",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "init_num",
          "new_api": null,
          "old_text": "init_num(&second)",
          "new_text": null,
          "old_line_content": "\t\t\tinit_num(&second);",
          "new_line_content": "\t\t\t",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "str2num",
          "new_api": null,
          "old_text": "str2num(&first, s1->value.str.val, 100)",
          "new_text": null,
          "old_line_content": "\t\t\tstr2num(&first, s1->value.str.val, 100); /* this scale should do */",
          "new_line_content": "\t\t\t/* use the BC math library to compare the numbers */",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "emalloc",
          "new_api": null,
          "old_text": "emalloc(length+1)",
          "new_text": null,
          "old_line_content": "\tresult = emalloc(length+1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(p[length])",
          "new_text": null,
          "old_line_content": "\t\tresult[length] = tolower(p[length]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(s1->value.str.val, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdval1 = strtod(s1->value.str.val, NULL);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(s2->value.str.val, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdval2 = strtod(s2->value.str.val, NULL);",
          "new_line_content": "\t\t\tif (ret1!=IS_DOUBLE) {",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister char *p=str;",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister char *end = str + length;",
          "new_line_content": "ZEND_API void zend_str_tolower(char *str, unsigned int length)",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": null,
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "new_text": null,
          "old_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "new_line_content": "\t\t\tresult->type = IS_LONG;",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "zend_binary_zval_strcmp",
          "new_api": null,
          "old_text": "zend_binary_zval_strcmp(s1, s2)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = zend_binary_zval_strcmp(s1, s2);",
          "new_line_content": "\t\t\tresult->type = IS_LONG;",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": null,
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tretval = memcmp(s1, s2, MIN(len1, len2));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tretval = memcmp(s1, s2, MIN(length, MIN(len1, len2)));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "zend_hash_compare",
          "new_api": null,
          "old_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\treturn zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(length, len2)",
          "new_text": null,
          "old_line_content": "\t\treturn (MIN(length, len1) - MIN(length, len2));",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "zend_hash_compare",
          "new_api": null,
          "old_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tresult->value.lval = zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "new_line_content": "ZEND_API void zend_compare_symbol_tables(zval *result, HashTable *ht1, HashTable *ht2 TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tlen = MIN(len1, len2);",
          "new_line_content": "\tint len;",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "zend_compare_symbol_tables",
          "new_api": null,
          "old_text": "zend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tzend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(*s2++)",
          "new_text": null,
          "old_line_content": "\t\tc2 = tolower(*s2++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "Z_OBJ_HT_P",
          "new_api": null,
          "old_text": "Z_OBJ_HT_P(o2)",
          "new_text": null,
          "old_line_content": "\tif (Z_OBJ_HT_P(o1) != Z_OBJ_HT_P(o2)) {",
          "new_line_content": "ZEND_API void zend_compare_objects(zval *result, zval *o1, zval *o2 TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "Z_OBJ_HT_P",
          "new_api": null,
          "old_text": "Z_OBJ_HT_P(o1)",
          "new_text": null,
          "old_line_content": "\tif (Z_OBJ_HT_P(o1)->compare_objects == NULL) {",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "Z_OBJ_HANDLE_P",
          "new_api": null,
          "old_text": "Z_OBJ_HANDLE_P(o2)",
          "new_text": null,
          "old_line_content": "\t\tif (Z_OBJ_HANDLE_P(o1) == Z_OBJ_HANDLE_P(o2)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tlen = MIN(length, MIN(len1, len2));",
          "new_line_content": "\tint len;",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "compare_objects",
          "new_api": null,
          "old_text": "Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC);",
          "new_line_content": "\t\t}\t\t\t",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(*s2++)",
          "new_text": null,
          "old_line_content": "\t\tc2 = tolower(*s2++);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 10,
      "total_additions": 38,
      "total_deletions": 38,
      "total_api_changes": 86
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 86,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          1582,
          1585,
          1586,
          1589,
          1591,
          1593,
          1594,
          1595,
          1596
        ]
      }
    },
    "api_calls_before": 264,
    "api_calls_after": 264,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 7,
      "total_diff_lines": 34
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/b4fbf1d381d23ad3e9ad8f6df572adc1984a0a45",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/b4fbf1d381d23ad3e9ad8f6df572adc1984a0a45/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/b4fbf1d381d23ad3e9ad8f6df572adc1984a0a45/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/b4fbf1d381d23ad3e9ad8f6df572adc1984a0a45/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 739,
          "old_api": "STR_LEN",
          "new_api": "mart_str_alloc",
          "old_text": "STR_LEN(buf->s);",
          "new_text": "mart_str_alloc(buf, 2 + l + 2 + class_name_len + 2, 0);",
          "old_line_content": "\tres = ZSTR_VAL(buf->s) + ZSTR_LEN(buf->s);",
          "new_line_content": "\tnew_len = smart_str_alloc(buf, 2 + l + 2 + class_name_len + 2, 0);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "emcpy",
          "new_api": "STR_LEN",
          "old_text": "emcpy(res, \"O:\", 2);",
          "new_text": "STR_LEN(buf->s) ",
          "old_line_content": "\tmemcpy(res, \"O:\", 2);",
          "new_line_content": "\tZSTR_LEN(buf->s) = new_len;",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "STR_LEN",
          "new_api": "STR_VAL",
          "old_text": "STR_LEN(class_name);",
          "new_text": "STR_VAL(class_name),",
          "old_line_content": "\tres += ZSTR_LEN(class_name);",
          "new_line_content": "\tmemcpy(res, ZSTR_VAL(class_name), class_name_len);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "HP_CLEANUP_CLASS_ATTRIBUTES",
          "new_api": "emcpy",
          "old_text": "HP_CLEANUP_CLASS_ATTRIBUTES();",
          "new_text": "emcpy(res, \"\\\":\", 2);",
          "old_line_content": "\tPHP_CLEANUP_CLASS_ATTRIBUTES();",
          "new_line_content": "\tmemcpy(res, \"\\\":\", 2);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "end_call_function",
          "new_api": "G",
          "old_text": "end_call_function(&fci, &fci_cache);",
          "new_text": "G(serialize_lock)+",
          "old_line_content": "\tres = zend_call_function(&fci, &fci_cache);",
          "new_line_content": "\tBG(serialize_lock)++;",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "G",
          "new_api": "end_call_function",
          "old_text": "G(serialize_lock)-",
          "new_text": "end_call_function(&fci, &fci_cache);",
          "old_line_content": "\tBG(serialize_lock)--;",
          "new_line_content": "\tres = zend_call_function(&fci, &fci_cache);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "val_ptr_dtor",
          "new_api": "_ISUNDEF_P",
          "old_text": "val_ptr_dtor(retval);",
          "new_text": "_ISUNDEF_P(retval))",
          "old_line_content": "\t\tzval_ptr_dtor(retval);",
          "new_line_content": "\tif (res == FAILURE || Z_ISUNDEF_P(retval)) {",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "val_ptr_dtor",
          "new_api": "ASH_OF",
          "old_text": "val_ptr_dtor(retval);",
          "new_text": "ASH_OF(retval))",
          "old_line_content": "\t\tzval_ptr_dtor(retval);",
          "new_line_content": "\tif (!HASH_OF(retval)) {",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "STR_VAL",
          "new_api": "val_ptr_dtor",
          "old_text": "STR_VAL(obj->ce->name))",
          "new_text": "val_ptr_dtor(retval);",
          "old_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"%s::__sleep() should return an array only containing the names of instance-variables to serialize\", ZSTR_VAL(obj->ce->name));",
          "new_line_content": "\t\tzval_ptr_dtor(retval);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "end_call_known_instance_method_with_0_params",
          "new_api": "G",
          "old_text": "end_call_known_instance_method_with_0_params(\n\t\tZ_OBJCE_P(obj)->__serialize, Z_OBJ_P(obj), retval);",
          "new_text": "G(serialize_lock)+",
          "old_line_content": "\tzend_call_known_instance_method_with_0_params(",
          "new_line_content": "\tBG(serialize_lock)++;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "_OBJ_P",
          "new_api": "end_call_known_instance_method_with_0_params",
          "old_text": "_OBJ_P(obj),",
          "new_text": "end_call_known_instance_method_with_0_params(\n\t\tZ_OBJCE_P(obj)->__serialize, Z_OBJ_P(obj), retval);",
          "old_line_content": "\t\tZ_OBJCE_P(obj)->__serialize, Z_OBJ_P(obj), retval);",
          "new_line_content": "\tzend_call_known_instance_method_with_0_params(",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "G",
          "new_api": "_OBJ_P",
          "old_text": "G(serialize_lock)-",
          "new_text": "_OBJ_P(obj),",
          "old_line_content": "\tBG(serialize_lock)--;",
          "new_line_content": "\t\tZ_OBJCE_P(obj)->__serialize, Z_OBJ_P(obj), retval);",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "val_ptr_dtor",
          "new_api": "G",
          "old_text": "val_ptr_dtor(retval);",
          "new_text": "G(exception))",
          "old_line_content": "\t\tzval_ptr_dtor(retval);",
          "new_line_content": "\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "val_ptr_dtor",
          "new_api": "_TYPE_P",
          "old_text": "val_ptr_dtor(retval);",
          "new_text": "_TYPE_P(retval) ",
          "old_line_content": "\t\tzval_ptr_dtor(retval);",
          "new_line_content": "\tif (Z_TYPE_P(retval) != IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "_OBJCE_P",
          "new_api": "val_ptr_dtor",
          "old_text": "_OBJCE_P(obj)-",
          "new_text": "val_ptr_dtor(retval);",
          "old_line_content": "\t\tzend_type_error(\"%s::__serialize() must return an array\", ZSTR_VAL(Z_OBJCE_P(obj)->name));",
          "new_line_content": "\t\tzval_ptr_dtor(retval);",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "_INDIRECT_P",
          "new_api": "_TYPE_P",
          "old_text": "_INDIRECT_P(val);",
          "new_text": "_TYPE_P(val) ",
          "old_line_content": "\t\tval = Z_INDIRECT_P(val);",
          "new_line_content": "\tif (Z_TYPE_P(val) == IS_INDIRECT) {",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "_TYPE_P",
          "new_api": "_INDIRECT_P",
          "old_text": "_TYPE_P(val) ",
          "new_text": "_INDIRECT_P(val);",
          "old_line_content": "\t\tif (Z_TYPE_P(val) == IS_UNDEF) {",
          "new_line_content": "\t\tval = Z_INDIRECT_P(val);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "_OBJ_P",
          "new_api": "_TYPE_P",
          "old_text": "_OBJ_P(struc),",
          "new_text": "_TYPE_P(val) ",
          "old_line_content": "\t\t\tzend_property_info *info = zend_get_typed_property_info_for_slot(Z_OBJ_P(struc), val);",
          "new_line_content": "\t\tif (Z_TYPE_P(val) == IS_UNDEF) {",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "hp_error_docref",
          "new_api": "end_hash_add",
          "old_text": "hp_error_docref(NULL, E_NOTICE,\n\t\t\t\"\\\"%s\\\" is returned from __sleep() multiple times\", ZSTR_VAL(error_name));",
          "new_text": "end_hash_add(ht, name, val))",
          "old_line_content": "\t\tphp_error_docref(NULL, E_NOTICE,",
          "new_line_content": "\tif (!zend_hash_add(ht, name, val)) {",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "STR_VAL",
          "new_api": "hp_error_docref",
          "old_text": "STR_VAL(error_name))",
          "new_text": "hp_error_docref(NULL, E_NOTICE,\n\t\t\t\"\\\"%s\\\" is returned from __sleep() multiple times\", ZSTR_VAL(error_name));",
          "old_line_content": "\t\t\t\"\\\"%s\\\" is returned from __sleep() multiple times\", ZSTR_VAL(error_name));",
          "new_line_content": "\t\tphp_error_docref(NULL, E_NOTICE,",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "end_get_properties_for",
          "new_api": "_OBJCE_P",
          "old_text": "end_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "new_text": "_OBJCE_P(struc);",
          "old_line_content": "\tHashTable *props = zend_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "new_line_content": "\tzend_class_entry *ce = Z_OBJCE_P(struc);",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "_TYPE_P",
          "new_api": "VAL_DEREF",
          "old_text": "_TYPE_P(name_val) ",
          "new_text": "VAL_DEREF(name_val);",
          "old_line_content": "\t\tif (Z_TYPE_P(name_val) != IS_STRING) {",
          "new_line_content": "\t\tZVAL_DEREF(name_val);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "hp_error_docref",
          "new_api": "_TYPE_P",
          "old_text": "hp_error_docref(NULL, E_WARNING,\n\t\t\t\t\t\"%s::__sleep() should return an array only containing the names of instance-variables to serialize\",\n\t\t\t\t\tZSTR_VAL(ce->name));",
          "new_text": "_TYPE_P(name_val) ",
          "old_line_content": "\t\t\tphp_error_docref(NULL, E_WARNING,",
          "new_line_content": "\t\tif (Z_TYPE_P(name_val) != IS_STRING) {",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "hp_var_serialize_try_add_sleep_prop",
          "new_api": "val_get_tmp_string",
          "old_text": "hp_var_serialize_try_add_sleep_prop(ht, props, name, name, struc) ",
          "new_text": "val_get_tmp_string(name_val, &tmp_name);",
          "old_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, name, name, struc) == SUCCESS) {",
          "new_line_content": "\t\tname = zval_get_tmp_string(name_val, &tmp_name);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "end_tmp_string_release",
          "new_api": "hp_var_serialize_try_add_sleep_prop",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "hp_var_serialize_try_add_sleep_prop(ht, props, name, name, struc) ",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, name, name, struc) == SUCCESS) {",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "end_tmp_string_release",
          "new_api": "G",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "G(exception))",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "STR_LEN",
          "new_api": "end_mangle_property_name",
          "old_text": "STR_LEN(ce->name),",
          "new_text": "end_mangle_property_name(\n\t\t\tZSTR_VAL(ce->name), ZSTR_LEN(ce->name),\n\t\t\tZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "old_line_content": "\t\t\tZSTR_VAL(ce->name), ZSTR_LEN(ce->name),",
          "new_line_content": "\t\tpriv_name = zend_mangle_property_name(",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "hp_var_serialize_try_add_sleep_prop",
          "new_api": "STR_LEN",
          "old_text": "hp_var_serialize_try_add_sleep_prop(ht, props, priv_name, name, struc) ",
          "new_text": "STR_LEN(name),",
          "old_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, priv_name, name, struc) == SUCCESS) {",
          "new_line_content": "\t\t\tZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "end_tmp_string_release",
          "new_api": "hp_var_serialize_try_add_sleep_prop",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "hp_var_serialize_try_add_sleep_prop(ht, props, priv_name, name, struc) ",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, priv_name, name, struc) == SUCCESS) {",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "end_string_release",
          "new_api": "end_tmp_string_release",
          "old_text": "end_string_release(priv_name);",
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tzend_string_release(priv_name);",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "end_tmp_string_release",
          "new_api": "G",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "G(exception))",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "STR_LEN",
          "new_api": "end_mangle_property_name",
          "old_text": "STR_LEN(name),",
          "new_text": "end_mangle_property_name(\n\t\t\t\"*\", 1, ZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "old_line_content": "\t\t\t\"*\", 1, ZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "new_line_content": "\t\tprot_name = zend_mangle_property_name(",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "hp_var_serialize_try_add_sleep_prop",
          "new_api": "STR_LEN",
          "old_text": "hp_var_serialize_try_add_sleep_prop(ht, props, prot_name, name, struc) ",
          "new_text": "STR_LEN(name),",
          "old_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, prot_name, name, struc) == SUCCESS) {",
          "new_line_content": "\t\t\t\"*\", 1, ZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "end_tmp_string_release",
          "new_api": "hp_var_serialize_try_add_sleep_prop",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "hp_var_serialize_try_add_sleep_prop(ht, props, prot_name, name, struc) ",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (php_var_serialize_try_add_sleep_prop(ht, props, prot_name, name, struc) == SUCCESS) {",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "end_string_release",
          "new_api": "end_tmp_string_release",
          "old_text": "end_string_release(prot_name);",
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tzend_string_release(prot_name);",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "end_tmp_string_release",
          "new_api": "G",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "G(exception))",
          "old_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "STR_VAL",
          "new_api": "hp_error_docref",
          "old_text": "STR_VAL(name))",
          "new_text": "hp_error_docref(NULL, E_WARNING,\n\t\t\t\"\\\"%s\\\" returned as member variable from __sleep() but does not exist\", ZSTR_VAL(name));",
          "old_line_content": "\t\t\t\"\\\"%s\\\" returned as member variable from __sleep() but does not exist\", ZSTR_VAL(name));",
          "new_line_content": "\t\tphp_error_docref(NULL, E_WARNING,",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "end_tmp_string_release",
          "new_api": "STR_VAL",
          "old_text": "end_tmp_string_release(tmp_name);",
          "new_text": "STR_VAL(name))",
          "old_line_content": "\t\tzend_tmp_string_release(tmp_name);",
          "new_line_content": "\t\t\t\"\\\"%s\\\" returned as member variable from __sleep() but does not exist\", ZSTR_VAL(name));",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "END_HASH_FOREACH_END",
          "new_api": "end_tmp_string_release",
          "old_text": "END_HASH_FOREACH_END();",
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "mart_str_appendl",
          "new_api": "mart_str_append_unsigned",
          "old_text": "mart_str_appendl(buf, \":{\", 2);",
          "new_text": "mart_str_append_unsigned(buf, count);",
          "old_line_content": "\tsmart_str_appendl(buf, \":{\", 2);",
          "new_line_content": "\tsmart_str_append_unsigned(buf, count);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "_REFVAL_P",
          "new_api": "_REFCOUNT_P",
          "old_text": "_REFVAL_P(data);",
          "new_text": "_REFCOUNT_P(data) ",
          "old_line_content": "\t\t\t\tdata = Z_REFVAL_P(data);",
          "new_line_content": "\t\t\tif (Z_ISREF_P(data) && Z_REFCOUNT_P(data) == 1) {",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "_IS_RECURSIVE_P",
          "new_api": "_TYPE_P",
          "old_text": "_IS_RECURSIVE_P(data))",
          "new_text": "_TYPE_P(data) ",
          "old_line_content": "\t\t\t\tif (UNEXPECTED(Z_IS_RECURSIVE_P(data))",
          "new_line_content": "\t\t\tif (Z_TYPE_P(data) == IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "_ARR_P",
          "new_api": "_IS_RECURSIVE_P",
          "old_text": "_ARR_P(struc))",
          "new_text": "_IS_RECURSIVE_P(data))",
          "old_line_content": "\t\t\t\t\t|| UNEXPECTED(Z_TYPE_P(struc) == IS_ARRAY && Z_ARR_P(data) == Z_ARR_P(struc))) {",
          "new_line_content": "\t\t\t\tif (UNEXPECTED(Z_IS_RECURSIVE_P(data))",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "hp_add_var_hash",
          "new_api": "_ARR_P",
          "old_text": "hp_add_var_hash(var_hash, struc);",
          "new_text": "_ARR_P(struc))",
          "old_line_content": "\t\t\t\t\tphp_add_var_hash(var_hash, struc);",
          "new_line_content": "\t\t\t\t\t|| UNEXPECTED(Z_TYPE_P(struc) == IS_ARRAY && Z_ARR_P(data) == Z_ARR_P(struc))) {",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "mart_str_appendl",
          "new_api": "hp_add_var_hash",
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": "hp_add_var_hash(var_hash, struc);",
          "old_line_content": "\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\t\t\t\tphp_add_var_hash(var_hash, struc);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "_PROTECT_RECURSION_P",
          "new_api": "_REFCOUNTED_P",
          "old_text": "_PROTECT_RECURSION_P(data);",
          "new_text": "_REFCOUNTED_P(data))",
          "old_line_content": "\t\t\t\t\t\tZ_PROTECT_RECURSION_P(data);",
          "new_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(data)) {",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "_REFCOUNTED_P",
          "new_api": "hp_var_serialize_intern",
          "old_text": "_REFCOUNTED_P(data))",
          "new_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "old_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(data)) {",
          "new_line_content": "\t\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "_UNPROTECT_RECURSION_P",
          "new_api": "_REFCOUNTED_P",
          "old_text": "_UNPROTECT_RECURSION_P(data);",
          "new_text": "_REFCOUNTED_P(data))",
          "old_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(data);",
          "new_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(data)) {",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "hp_var_serialize_class_name",
          "new_api": "ASH_OF",
          "old_text": "hp_var_serialize_class_name(buf, struc);",
          "new_text": "ASH_OF(retval_ptr))",
          "old_line_content": "\t\tphp_var_serialize_class_name(buf, struc);",
          "new_line_content": "\tif (php_var_serialize_get_sleep_props(&props, struc, HASH_OF(retval_ptr)) == SUCCESS) {",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "hp_var_serialize_nested_data",
          "new_api": "hp_var_serialize_class_name",
          "old_text": "hp_var_serialize_nested_data(\n\t\t\tbuf, struc, &props, zend_hash_num_elements(&props), /* incomplete_class */ 0, var_hash);",
          "new_text": "hp_var_serialize_class_name(buf, struc);",
          "old_line_content": "\t\tphp_var_serialize_nested_data(",
          "new_line_content": "\t\tphp_var_serialize_class_name(buf, struc);",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "end_hash_num_elements",
          "new_api": "hp_var_serialize_nested_data",
          "old_text": "end_hash_num_elements(&props),",
          "new_text": "hp_var_serialize_nested_data(\n\t\t\tbuf, struc, &props, zend_hash_num_elements(&props), /* incomplete_class */ 0, var_hash);",
          "old_line_content": "\t\t\tbuf, struc, &props, zend_hash_num_elements(&props), /* incomplete_class */ 0, var_hash);",
          "new_line_content": "\t\tphp_var_serialize_nested_data(",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "mart_str_appendl",
          "new_api": "_ISREF_P",
          "old_text": "mart_str_appendl(buf, \"R:\", 2);",
          "new_text": "_ISREF_P(struc))",
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"R:\", 2);",
          "new_line_content": "\t\t} else if (Z_ISREF_P(struc)) {",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "mart_str_append_long",
          "new_api": "mart_str_appendl",
          "old_text": "mart_str_append_long(buf, var_already);",
          "new_text": "mart_str_appendl(buf, \"R:\", 2);",
          "old_line_content": "\t\t\tsmart_str_append_long(buf, var_already);",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"R:\", 2);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "mart_str_appendc",
          "new_api": "mart_str_append_long",
          "old_text": "mart_str_appendc(buf, ';');",
          "new_text": "mart_str_append_long(buf, var_already);",
          "old_line_content": "\t\t\tsmart_str_appendc(buf, ';');",
          "new_line_content": "\t\t\tsmart_str_append_long(buf, var_already);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "mart_str_appendl",
          "new_api": "_TYPE_P",
          "old_text": "mart_str_appendl(buf, \"r:\", 2);",
          "new_text": "_TYPE_P(struc) ",
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"r:\", 2);",
          "new_line_content": "\t\t} else if (Z_TYPE_P(struc) == IS_OBJECT) {",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "mart_str_append_long",
          "new_api": "mart_str_appendl",
          "old_text": "mart_str_append_long(buf, var_already);",
          "new_text": "mart_str_appendl(buf, \"r:\", 2);",
          "old_line_content": "\t\t\tsmart_str_append_long(buf, var_already);",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"r:\", 2);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "mart_str_appendc",
          "new_api": "mart_str_append_long",
          "old_text": "mart_str_appendc(buf, ';');",
          "new_text": "mart_str_append_long(buf, var_already);",
          "old_line_content": "\t\t\tsmart_str_appendc(buf, ';');",
          "new_line_content": "\t\t\tsmart_str_append_long(buf, var_already);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "trlen",
          "new_api": "G",
          "old_text": "trlen(tmp_str);",
          "new_text": "G(serialize_precision),",
          "old_line_content": "\t\t\tlen = strlen(tmp_str);",
          "new_line_content": "\t\t\tphp_gcvt(Z_DVAL_P(struc), (int)PG(serialize_precision), '.', 'E', tmp_str);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "mart_str_alloc",
          "new_api": "trlen",
          "old_text": "mart_str_alloc(buf, 2 + len + 1, 0);",
          "new_text": "trlen(tmp_str);",
          "old_line_content": "\t\t\tnew_len = smart_str_alloc(buf, 2 + len + 1, 0);",
          "new_line_content": "\t\t\tlen = strlen(tmp_str);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "STR_LEN",
          "new_api": "mart_str_alloc",
          "old_text": "STR_LEN(buf->s);",
          "new_text": "mart_str_alloc(buf, 2 + len + 1, 0);",
          "old_line_content": "\t\t\tres = ZSTR_VAL(buf->s) + ZSTR_LEN(buf->s);",
          "new_line_content": "\t\t\tnew_len = smart_str_alloc(buf, 2 + len + 1, 0);",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "hp_var_serialize_call_magic_serialize",
          "new_api": "_OBJ_P",
          "old_text": "hp_var_serialize_call_magic_serialize(&retval, &obj) ",
          "new_text": "_OBJ_P(struc))",
          "old_line_content": "\t\t\t\t\tif (php_var_serialize_call_magic_serialize(&retval, &obj) == FAILURE) {",
          "new_line_content": "\t\t\t\t\tZVAL_OBJ_COPY(&obj, Z_OBJ_P(struc));",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "G",
          "new_api": "hp_var_serialize_call_magic_serialize",
          "old_text": "G(exception))",
          "new_text": "hp_var_serialize_call_magic_serialize(&retval, &obj) ",
          "old_line_content": "\t\t\t\t\t\tif (!EG(exception)) {",
          "new_line_content": "\t\t\t\t\tif (php_var_serialize_call_magic_serialize(&retval, &obj) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "mart_str_appendl",
          "new_api": "G",
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": "G(exception))",
          "old_line_content": "\t\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\t\t\t\t\tif (!EG(exception)) {",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "_ARRVAL",
          "new_api": "hp_var_serialize_class_name",
          "old_text": "_ARRVAL(retval))",
          "new_text": "hp_var_serialize_class_name(buf, &obj);",
          "old_line_content": "\t\t\t\t\tsmart_str_append_unsigned(buf, zend_hash_num_elements(Z_ARRVAL(retval)));",
          "new_line_content": "\t\t\t\t\tphp_var_serialize_class_name(buf, &obj);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "mart_str_appendl",
          "new_api": "_ARRVAL",
          "old_text": "mart_str_appendl(buf, \":{\", 2);",
          "new_text": "_ARRVAL(retval))",
          "old_line_content": "\t\t\t\t\tsmart_str_appendl(buf, \":{\", 2);",
          "new_line_content": "\t\t\t\t\tsmart_str_append_unsigned(buf, zend_hash_num_elements(Z_ARRVAL(retval)));",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "_REFVAL_P",
          "new_api": "_REFCOUNT_P",
          "old_text": "_REFVAL_P(data);",
          "new_text": "_REFCOUNT_P(data) ",
          "old_line_content": "\t\t\t\t\t\t\tdata = Z_REFVAL_P(data);",
          "new_line_content": "\t\t\t\t\t\tif (Z_ISREF_P(data) && Z_REFCOUNT_P(data) == 1) {",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "END_HASH_FOREACH_END",
          "new_api": "hp_var_serialize_intern",
          "old_text": "END_HASH_FOREACH_END();",
          "new_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "old_line_content": "\t\t\t\t\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "mart_str_appendc",
          "new_api": "END_HASH_FOREACH_END",
          "old_text": "mart_str_appendc(buf, '}');",
          "new_text": "END_HASH_FOREACH_END();",
          "old_line_content": "\t\t\t\t\tsmart_str_appendc(buf, '}');",
          "new_line_content": "\t\t\t\t\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "STR_LEN",
          "new_api": "_OBJCE_P",
          "old_text": "STR_LEN(buf->s);",
          "new_text": "_OBJCE_P(struc)-",
          "old_line_content": "\t\t\t\t\t\tres = ZSTR_VAL(buf->s) + ZSTR_LEN(buf->s);",
          "new_line_content": "\t\t\t\t\t\tnew_len = smart_str_alloc(buf, 2 + l1 + 2 + ZSTR_LEN(Z_OBJCE_P(struc)->name) + 2 + l2 + 2 + serialized_length + 1, 0);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "emcpy",
          "new_api": "STR_LEN",
          "old_text": "emcpy(res, \"C:\", 2);",
          "new_text": "STR_LEN(buf->s) ",
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, \"C:\", 2);",
          "new_line_content": "\t\t\t\t\t\tZSTR_LEN(buf->s) = new_len;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "emcpy",
          "new_api": "_OBJCE_P",
          "old_text": "emcpy(res, \"\\\":\", 2);",
          "new_text": "_OBJCE_P(struc)-",
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, \"\\\":\", 2);",
          "new_line_content": "\t\t\t\t\t\tres += ZSTR_LEN(Z_OBJCE_P(struc)->name);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "_COUNTED_P",
          "new_api": "end_hash_index_find",
          "old_text": "_COUNTED_P(struc))",
          "new_text": "end_hash_index_find(&var_hash->ht,\n\t\t\t\t\t\t\t(zend_ulong) (zend_uintptr_t) Z_COUNTED_P(struc));",
          "old_line_content": "\t\t\t\t\t\t\t(zend_ulong) (zend_uintptr_t) Z_COUNTED_P(struc));",
          "new_line_content": "\t\t\t\t\t\tzval *var_idx = zend_hash_index_find(&var_hash->ht,",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "_FUNC_P",
          "new_api": "_OBJ_P",
          "old_text": "_FUNC_P(zv),",
          "new_text": "_OBJ_P(struc))",
          "old_line_content": "\t\t\t\t\t\tif (php_var_serialize_call_sleep(Z_OBJ(tmp), Z_FUNC_P(zv), &retval) == FAILURE) {",
          "new_line_content": "\t\t\t\t\t\tZVAL_OBJ_COPY(&tmp, Z_OBJ_P(struc));",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "G",
          "new_api": "_FUNC_P",
          "old_text": "G(exception))",
          "new_text": "_FUNC_P(zv),",
          "old_line_content": "\t\t\t\t\t\t\tif (!EG(exception)) {",
          "new_line_content": "\t\t\t\t\t\tif (php_var_serialize_call_sleep(Z_OBJ(tmp), Z_FUNC_P(zv), &retval) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "val_ptr_dtor",
          "new_api": "hp_var_serialize_class",
          "old_text": "val_ptr_dtor(&retval);",
          "new_text": "hp_var_serialize_class(buf, &tmp, &retval, var_hash);",
          "old_line_content": "\t\t\t\t\t\tzval_ptr_dtor(&retval);",
          "new_line_content": "\t\t\t\t\t\tphp_var_serialize_class(buf, &tmp, &retval, var_hash);",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "_OBJ",
          "new_api": "val_ptr_dtor",
          "old_text": "_OBJ(tmp))",
          "new_text": "val_ptr_dtor(&retval);",
          "old_line_content": "\t\t\t\t\t\tOBJ_RELEASE(Z_OBJ(tmp));",
          "new_line_content": "\t\t\t\t\t\tzval_ptr_dtor(&retval);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "_OBJ_HT_P",
          "new_api": "_OBJ_P",
          "old_text": "_OBJ_HT_P(struc)-",
          "new_text": "_OBJ_P(struc)-",
          "old_line_content": "\t\t\t\t && Z_OBJ_HT_P(struc)->get_properties_for == NULL",
          "new_line_content": "\t\t\t\tif (Z_OBJ_P(struc)->properties == NULL",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "_TYPE_P",
          "new_api": "BJ_PROP",
          "old_text": "_TYPE_P(prop) ",
          "new_text": "BJ_PROP(obj, prop_info->offset);",
          "old_line_content": "\t\t\t\t\t\tif (Z_TYPE_P(prop) == IS_UNDEF) {",
          "new_line_content": "\t\t\t\t\t\tprop = OBJ_PROP(obj, prop_info->offset);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "mart_str_appendl",
          "new_api": "mart_str_append_unsigned",
          "old_text": "mart_str_appendl(buf, \":{\", 2);",
          "new_text": "mart_str_append_unsigned(buf, count);",
          "old_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \":{\", 2);",
          "new_line_content": "\t\t\t\t\t\tsmart_str_append_unsigned(buf, count);",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "_TYPE_P",
          "new_api": "BJ_PROP",
          "old_text": "_TYPE_P(prop) ",
          "new_text": "BJ_PROP(obj, prop_info->offset);",
          "old_line_content": "\t\t\t\t\t\t\tif (Z_TYPE_P(prop) == IS_UNDEF) {",
          "new_line_content": "\t\t\t\t\t\t\tprop = OBJ_PROP(obj, prop_info->offset);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "_REFVAL_P",
          "new_api": "_REFCOUNT_P",
          "old_text": "_REFVAL_P(prop);",
          "new_text": "_REFCOUNT_P(prop) ",
          "old_line_content": "\t\t\t\t\t\t\t\tprop = Z_REFVAL_P(prop);",
          "new_line_content": "\t\t\t\t\t\t\tif (Z_ISREF_P(prop) && Z_REFCOUNT_P(prop) == 1) {",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "end_release_properties",
          "new_api": "hp_var_serialize_nested_data",
          "old_text": "end_release_properties(myht);",
          "new_text": "hp_var_serialize_nested_data(buf, struc, myht, count, incomplete_class, var_hash);",
          "old_line_content": "\t\t\t\tzend_release_properties(myht);",
          "new_line_content": "\t\t\t\tphp_var_serialize_nested_data(buf, struc, myht, count, incomplete_class, var_hash);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "_ARRVAL_P",
          "new_api": "mart_str_appendl",
          "old_text": "_ARRVAL_P(struc);",
          "new_text": "mart_str_appendl(buf, \"a:\", 2);",
          "old_line_content": "\t\t\tmyht = Z_ARRVAL_P(struc);",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"a:\", 2);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "hp_var_serialize_nested_data",
          "new_api": "_ARRVAL_P",
          "old_text": "hp_var_serialize_nested_data(\n\t\t\t\tbuf, struc, myht, zend_array_count(myht), /* incomplete_class */ 0, var_hash);",
          "new_text": "_ARRVAL_P(struc);",
          "old_line_content": "\t\t\tphp_var_serialize_nested_data(",
          "new_line_content": "\t\t\tmyht = Z_ARRVAL_P(struc);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "end_array_count",
          "new_api": "hp_var_serialize_nested_data",
          "old_text": "end_array_count(myht),",
          "new_text": "hp_var_serialize_nested_data(\n\t\t\t\tbuf, struc, myht, zend_array_count(myht), /* incomplete_class */ 0, var_hash);",
          "old_line_content": "\t\t\t\tbuf, struc, myht, zend_array_count(myht), /* incomplete_class */ 0, var_hash);",
          "new_line_content": "\t\t\tphp_var_serialize_nested_data(",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "mart_str_0",
          "new_api": "hp_var_serialize_intern",
          "old_text": "mart_str_0(buf);",
          "new_text": "hp_var_serialize_intern(buf, struc, *data);",
          "old_line_content": "\tsmart_str_0(buf);",
          "new_line_content": "\tphp_var_serialize_intern(buf, struc, *data);",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "malloc",
          "new_api": "G",
          "old_text": "malloc(sizeof(struct php_serialize_data));",
          "new_text": "G(serialize).",
          "old_line_content": "\t\td = emalloc(sizeof(struct php_serialize_data));",
          "new_line_content": "\tif (BG(serialize_lock) || !BG(serialize).level) {",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "end_hash_init",
          "new_api": "malloc",
          "old_text": "end_hash_init(&d->ht, 16, NULL, ZVAL_PTR_DTOR, 0);",
          "new_text": "malloc(sizeof(struct php_serialize_data));",
          "old_line_content": "\t\tzend_hash_init(&d->ht, 16, NULL, ZVAL_PTR_DTOR, 0);",
          "new_line_content": "\t\td = emalloc(sizeof(struct php_serialize_data));",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "end_hash_destroy",
          "new_api": "G",
          "old_text": "end_hash_destroy(&d->ht);",
          "new_text": "G(serialize).",
          "old_line_content": "\t\tzend_hash_destroy(&d->ht);",
          "new_line_content": "\tif (BG(serialize_lock) || BG(serialize).level == 1) {",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "free",
          "new_api": "end_hash_destroy",
          "old_text": "free(d);",
          "new_text": "end_hash_destroy(&d->ht);",
          "old_line_content": "\t\tefree(d);",
          "new_line_content": "\t\tzend_hash_destroy(&d->ht);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "_PARAM_ZVAL",
          "new_api": "END_PARSE_PARAMETERS_START",
          "old_text": "_PARAM_ZVAL(struc)\n",
          "new_text": "END_PARSE_PARAMETERS_START(1, 1)\n",
          "old_line_content": "\t\tZ_PARAM_ZVAL(struc)",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "END_PARSE_PARAMETERS_END",
          "new_api": "_PARAM_ZVAL",
          "old_text": "END_PARSE_PARAMETERS_END();",
          "new_text": "_PARAM_ZVAL(struc)\n",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_ZVAL(struc)",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "hp_var_serialize",
          "new_api": "HP_VAR_SERIALIZE_INIT",
          "old_text": "hp_var_serialize(&buf, struc, &var_hash);",
          "new_text": "HP_VAR_SERIALIZE_INIT(var_hash);",
          "old_line_content": "\tphp_var_serialize(&buf, struc, &var_hash);",
          "new_line_content": "\tPHP_VAR_SERIALIZE_INIT(var_hash);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "HP_VAR_SERIALIZE_DESTROY",
          "new_api": "hp_var_serialize",
          "old_text": "HP_VAR_SERIALIZE_DESTROY(var_hash);",
          "new_text": "hp_var_serialize(&buf, struc, &var_hash);",
          "old_line_content": "\tPHP_VAR_SERIALIZE_DESTROY(var_hash);",
          "new_line_content": "\tphp_var_serialize(&buf, struc, &var_hash);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "mart_str_free",
          "new_api": "G",
          "old_text": "mart_str_free(&buf);",
          "new_text": "G(exception))",
          "old_line_content": "\t\tsmart_str_free(&buf);",
          "new_line_content": "\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "ETURN_THROWS",
          "new_api": "mart_str_free",
          "old_text": "ETURN_THROWS();",
          "new_text": "mart_str_free(&buf);",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tsmart_str_free(&buf);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "hp_var_unserialize_get_max_depth",
          "new_api": "hp_var_unserialize_get_allowed_classes",
          "old_text": "hp_var_unserialize_get_max_depth(var_hash);",
          "new_text": "hp_var_unserialize_get_allowed_classes(var_hash);",
          "old_line_content": "\tprev_max_depth = php_var_unserialize_get_max_depth(var_hash);",
          "new_line_content": "\tprev_class_hash = php_var_unserialize_get_allowed_classes(var_hash);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "hp_var_unserialize_get_cur_depth",
          "new_api": "hp_var_unserialize_get_max_depth",
          "old_text": "hp_var_unserialize_get_cur_depth(var_hash);",
          "new_text": "hp_var_unserialize_get_max_depth(var_hash);",
          "old_line_content": "\tprev_cur_depth = php_var_unserialize_get_cur_depth(var_hash);",
          "new_line_content": "\tprev_max_depth = php_var_unserialize_get_max_depth(var_hash);",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "_TYPE_P",
          "new_api": "end_hash_str_find_deref",
          "old_text": "_TYPE_P(classes) ",
          "new_text": "end_hash_str_find_deref(options, \"allowed_classes\", sizeof(\"allowed_classes\")-1);",
          "old_line_content": "\t\tif (classes && Z_TYPE_P(classes) != IS_ARRAY && Z_TYPE_P(classes) != IS_TRUE && Z_TYPE_P(classes) != IS_FALSE) {",
          "new_line_content": "\t\tclasses = zend_hash_str_find_deref(options, \"allowed_classes\", sizeof(\"allowed_classes\")-1);",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "end_zval_type_name",
          "new_api": "_TYPE_P",
          "old_text": "end_zval_type_name(classes))",
          "new_text": "_TYPE_P(classes) ",
          "old_line_content": "\t\t\tzend_type_error(\"%s(): Option \\\"allowed_classes\\\" must be of type array|bool, %s given\", function_name, zend_zval_type_name(classes));",
          "new_line_content": "\t\tif (classes && Z_TYPE_P(classes) != IS_ARRAY && Z_TYPE_P(classes) != IS_TRUE && Z_TYPE_P(classes) != IS_FALSE) {",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "LLOC_HASHTABLE",
          "new_api": "end_is_true",
          "old_text": "LLOC_HASHTABLE(class_hash);",
          "new_text": "end_is_true(classes))",
          "old_line_content": "\t\t\tALLOC_HASHTABLE(class_hash);",
          "new_line_content": "\t\tif(classes && (Z_TYPE_P(classes) == IS_ARRAY || !zend_is_true(classes))) {",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "_ARRVAL_P",
          "new_api": "LLOC_HASHTABLE",
          "old_text": "_ARRVAL_P(classes))",
          "new_text": "LLOC_HASHTABLE(class_hash);",
          "old_line_content": "\t\t\tzend_hash_init(class_hash, (Z_TYPE_P(classes) == IS_ARRAY)?zend_hash_num_elements(Z_ARRVAL_P(classes)):0, NULL, NULL, 0);",
          "new_line_content": "\t\t\tALLOC_HASHTABLE(class_hash);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "_STR_P",
          "new_api": "onvert_to_string",
          "old_text": "_STR_P(entry))",
          "new_text": "onvert_to_string(entry);",
          "old_line_content": "\t\t\t\tlcname = zend_string_tolower(Z_STR_P(entry));",
          "new_line_content": "\t\t\t\tconvert_to_string(entry);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "end_hash_add_empty_element",
          "new_api": "_STR_P",
          "old_text": "end_hash_add_empty_element(class_hash, lcname);",
          "new_text": "_STR_P(entry))",
          "old_line_content": "\t\t\t\tzend_hash_add_empty_element(class_hash, lcname);",
          "new_line_content": "\t\t\t\tlcname = zend_string_tolower(Z_STR_P(entry));",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "end_string_release_ex",
          "new_api": "end_hash_add_empty_element",
          "old_text": "end_string_release_ex(lcname, 0);",
          "new_text": "end_hash_add_empty_element(class_hash, lcname);",
          "old_line_content": "\t\t        zend_string_release_ex(lcname, 0);",
          "new_line_content": "\t\t\t\tzend_hash_add_empty_element(class_hash, lcname);",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "END_HASH_FOREACH_END",
          "new_api": "end_string_release_ex",
          "old_text": "END_HASH_FOREACH_END();",
          "new_text": "end_string_release_ex(lcname, 0);",
          "old_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t        zend_string_release_ex(lcname, 0);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "end_zval_type_name",
          "new_api": "_TYPE_P",
          "old_text": "end_zval_type_name(max_depth))",
          "new_text": "_TYPE_P(max_depth) ",
          "old_line_content": "\t\t\t\tzend_type_error(\"%s(): Option \\\"max_depth\\\" must be of type int, %s given\", function_name, zend_zval_type_name(max_depth));",
          "new_line_content": "\t\t\tif (Z_TYPE_P(max_depth) != IS_LONG) {",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "end_value_error",
          "new_api": "_LVAL_P",
          "old_text": "end_value_error(\"%s(): Option \\\"max_depth\\\" must be greater than or equal to 0\", function_name);",
          "new_text": "_LVAL_P(max_depth) ",
          "old_line_content": "\t\t\t\tzend_value_error(\"%s(): Option \\\"max_depth\\\" must be greater than or equal to 0\", function_name);",
          "new_line_content": "\t\t\tif (Z_LVAL_P(max_depth) < 0) {",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "ar_tmp_var",
          "new_api": "G",
          "old_text": "ar_tmp_var(&var_hash);",
          "new_text": "G(unserialize).",
          "old_line_content": "\t\tretval = var_tmp_var(&var_hash);",
          "new_line_content": "\tif (BG(unserialize).level > 1) {",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "G",
          "new_api": "hp_var_unserialize",
          "old_text": "G(exception))",
          "new_text": "hp_var_unserialize(retval, &p, p + buf_len, &var_hash))",
          "old_line_content": "\t\tif (!EG(exception)) {",
          "new_line_content": "\tif (!php_var_unserialize(retval, &p, p + buf_len, &var_hash)) {",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "hp_error_docref",
          "new_api": "G",
          "old_text": "hp_error_docref(NULL, E_NOTICE, \"Error at offset \" ZEND_LONG_FMT \" of %zd bytes\",\n\t\t\t\t(zend_long)((char*)p - buf), buf_len);",
          "new_text": "G(exception))",
          "old_line_content": "\t\t\tphp_error_docref(NULL, E_NOTICE, \"Error at offset \" ZEND_LONG_FMT \" of %zd bytes\",",
          "new_line_content": "\t\tif (!EG(exception)) {",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "end_long)((char*)p - buf),",
          "new_api": "hp_error_docref",
          "old_text": "end_long)((char*)p - buf),",
          "new_text": "hp_error_docref(NULL, E_NOTICE, \"Error at offset \" ZEND_LONG_FMT \" of %zd bytes\",\n\t\t\t\t(zend_long)((char*)p - buf), buf_len);",
          "old_line_content": "\t\t\t\t(zend_long)((char*)p - buf), buf_len);",
          "new_line_content": "\t\t\tphp_error_docref(NULL, E_NOTICE, \"Error at offset \" ZEND_LONG_FMT \" of %zd bytes\",",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "val_ptr_dtor",
          "new_api": "G",
          "old_text": "val_ptr_dtor(return_value);",
          "new_text": "G(unserialize).",
          "old_line_content": "\t\t\tzval_ptr_dtor(return_value);",
          "new_line_content": "\t\tif (BG(unserialize).level <= 1) {",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "VAL_COPY",
          "new_api": "G",
          "old_text": "VAL_COPY(return_value, retval);",
          "new_text": "G(unserialize).",
          "old_line_content": "\t\tZVAL_COPY(return_value, retval);",
          "new_line_content": "\t} else if (BG(unserialize).level > 1) {",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "_REFCOUNTED_P",
          "new_api": "VAL_COPY",
          "old_text": "_REFCOUNTED_P(return_value))",
          "new_text": "VAL_COPY(return_value, retval);",
          "old_line_content": "\t} else if (Z_REFCOUNTED_P(return_value)) {",
          "new_line_content": "\t\tZVAL_COPY(return_value, retval);",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "_COUNTED_P",
          "new_api": "_REFCOUNTED_P",
          "old_text": "_COUNTED_P(return_value);",
          "new_text": "_REFCOUNTED_P(return_value))",
          "old_line_content": "\t\tzend_refcounted *ref = Z_COUNTED_P(return_value);",
          "new_line_content": "\t} else if (Z_REFCOUNTED_P(return_value)) {",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "c_check_possible_root",
          "new_api": "_COUNTED_P",
          "old_text": "c_check_possible_root(ref);",
          "new_text": "_COUNTED_P(return_value);",
          "old_line_content": "\t\tgc_check_possible_root(ref);",
          "new_line_content": "\t\tzend_refcounted *ref = Z_COUNTED_P(return_value);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "REE_HASHTABLE",
          "new_api": "end_hash_destroy",
          "old_text": "REE_HASHTABLE(class_hash);",
          "new_text": "end_hash_destroy(class_hash);",
          "old_line_content": "\t\tFREE_HASHTABLE(class_hash);",
          "new_line_content": "\t\tzend_hash_destroy(class_hash);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "hp_var_unserialize_set_max_depth",
          "new_api": "hp_var_unserialize_set_allowed_classes",
          "old_text": "hp_var_unserialize_set_max_depth(var_hash, prev_max_depth);",
          "new_text": "hp_var_unserialize_set_allowed_classes(var_hash, prev_class_hash);",
          "old_line_content": "\tphp_var_unserialize_set_max_depth(var_hash, prev_max_depth);",
          "new_line_content": "\tphp_var_unserialize_set_allowed_classes(var_hash, prev_class_hash);",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "hp_var_unserialize_set_cur_depth",
          "new_api": "hp_var_unserialize_set_max_depth",
          "old_text": "hp_var_unserialize_set_cur_depth(var_hash, prev_cur_depth);",
          "new_text": "hp_var_unserialize_set_max_depth(var_hash, prev_max_depth);",
          "old_line_content": "\tphp_var_unserialize_set_cur_depth(var_hash, prev_cur_depth);",
          "new_line_content": "\tphp_var_unserialize_set_max_depth(var_hash, prev_max_depth);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "HP_VAR_UNSERIALIZE_DESTROY",
          "new_api": "hp_var_unserialize_set_cur_depth",
          "old_text": "HP_VAR_UNSERIALIZE_DESTROY(var_hash);",
          "new_text": "hp_var_unserialize_set_cur_depth(var_hash, prev_cur_depth);",
          "old_line_content": "\tPHP_VAR_UNSERIALIZE_DESTROY(var_hash);",
          "new_line_content": "\tphp_var_unserialize_set_cur_depth(var_hash, prev_cur_depth);",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "end_unwrap_reference",
          "new_api": "_ISREF_P",
          "old_text": "end_unwrap_reference(return_value);",
          "new_text": "_ISREF_P(return_value))",
          "old_line_content": "\t\tzend_unwrap_reference(return_value);",
          "new_line_content": "\tif (Z_ISREF_P(return_value)) {",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "_PARAM_STRING",
          "new_api": "END_PARSE_PARAMETERS_START",
          "old_text": "_PARAM_STRING(buf, buf_len)\n",
          "new_text": "END_PARSE_PARAMETERS_START(1, 2)\n",
          "old_line_content": "\t\tZ_PARAM_STRING(buf, buf_len)",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "TD_PHP_INI_ENTRY",
          "new_api": "HP_INI_BEGIN",
          "old_text": "TD_PHP_INI_ENTRY(\"unserialize_max_depth\", \"4096\", PHP_INI_ALL, OnUpdateLong, unserialize_max_depth, php_basic_globals, basic_globals)\n",
          "new_text": "HP_INI_BEGIN()\n",
          "old_line_content": "\tSTD_PHP_INI_ENTRY(\"unserialize_max_depth\", \"4096\", PHP_INI_ALL, OnUpdateLong, unserialize_max_depth, php_basic_globals, basic_globals)",
          "new_line_content": "PHP_INI_BEGIN()",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "HP_INI_END",
          "new_api": "TD_PHP_INI_ENTRY",
          "old_text": "HP_INI_END()\n",
          "new_text": "TD_PHP_INI_ENTRY(\"unserialize_max_depth\", \"4096\", PHP_INI_ALL, OnUpdateLong, unserialize_max_depth, php_basic_globals, basic_globals)\n",
          "old_line_content": "PHP_INI_END()",
          "new_line_content": "\tSTD_PHP_INI_ENTRY(\"unserialize_max_depth\", \"4096\", PHP_INI_ALL, OnUpdateLong, unserialize_max_depth, php_basic_globals, basic_globals)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1034,
          "old_api": null,
          "new_api": "STR_LEN",
          "old_text": null,
          "new_text": "STR_LEN(buf->s) ",
          "old_line_content": "",
          "new_line_content": "\t\t\tZSTR_LEN(buf->s) = new_len;",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \"d:\", 2);",
          "old_line_content": "\t\t\tres += 2;",
          "new_line_content": "\t\t\tmemcpy(res, \"d:\", 2);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, tmp_str, len);",
          "old_line_content": "\t\t\tres[len] = ';';",
          "new_line_content": "\t\t\tmemcpy(res, tmp_str, len);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "_STRLEN_P",
          "old_text": null,
          "new_text": "_STRLEN_P(struc))",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tphp_var_serialize_string(buf, Z_STRVAL_P(struc), Z_STRLEN_P(struc));",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "_OBJCE_P",
          "old_text": null,
          "new_text": "_OBJCE_P(struc);",
          "old_line_content": "\t\t\t\tbool incomplete_class;",
          "new_line_content": "\t\t\t\tzend_class_entry *ce = Z_OBJCE_P(struc);",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "val_ptr_dtor",
          "old_text": null,
          "new_text": "val_ptr_dtor(&obj);",
          "old_line_content": "\t\t\t\t\t\treturn;",
          "new_line_content": "\t\t\t\t\t\tzval_ptr_dtor(&obj);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \":{\", 2);",
          "old_line_content": "\t\t\t\t\tZEND_HASH_FOREACH_KEY_VAL(Z_ARRVAL(retval), index, key, data) {",
          "new_line_content": "\t\t\t\t\tsmart_str_appendl(buf, \":{\", 2);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "hp_var_serialize_long",
          "old_text": null,
          "new_text": "hp_var_serialize_long(buf, index);",
          "old_line_content": "\t\t\t\t\t\t} else {",
          "new_line_content": "\t\t\t\t\t\t\tphp_var_serialize_long(buf, index);",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "STR_LEN",
          "old_text": null,
          "new_text": "STR_LEN(key))",
          "old_line_content": "\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(key), ZSTR_LEN(key));",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "_REFVAL_P",
          "old_text": null,
          "new_text": "_REFVAL_P(data);",
          "old_line_content": "\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tdata = Z_REFVAL_P(data);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "mart_str_appendc",
          "old_text": null,
          "new_text": "mart_str_appendc(buf, '}');",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tsmart_str_appendc(buf, '}');",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "val_ptr_dtor",
          "old_text": null,
          "new_text": "val_ptr_dtor(&retval);",
          "old_line_content": "\t\t\t\t\treturn;",
          "new_line_content": "\t\t\t\t\tzval_ptr_dtor(&retval);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "serialize",
          "old_text": null,
          "new_text": "e->serialize(struc, &serialized_data, &serialized_length, (zend_serialize_data *)var_hash) ",
          "old_line_content": "\t\t\t\t\t\tchar b1[32], b2[32], *s1, *s2, *res;",
          "new_line_content": "\t\t\t\t\tif (ce->serialize(struc, &serialized_data, &serialized_length, (zend_serialize_data *)var_hash) == SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "_OBJCE_P",
          "old_text": null,
          "new_text": "_OBJCE_P(struc)-",
          "old_line_content": "\t\t\t\t\t\tl1 = b1 + sizeof(b1) - 1 - s1;",
          "new_line_content": "\t\t\t\t\t\ts1 = zend_print_long_to_buf(b1 + sizeof(b1) - 1, ZSTR_LEN(Z_OBJCE_P(struc)->name));",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "end_print_long_to_buf",
          "old_text": null,
          "new_text": "end_print_long_to_buf(b2 + sizeof(b2) - 1, serialized_length);",
          "old_line_content": "\t\t\t\t\t\tl2 = b2 + sizeof(b2) - 1 - s2;",
          "new_line_content": "\t\t\t\t\t\ts2 = zend_print_long_to_buf(b2 + sizeof(b2) - 1, serialized_length);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \"C:\", 2);",
          "old_line_content": "\t\t\t\t\t\tres += 2;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, \"C:\", 2);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, s1, l1);",
          "old_line_content": "\t\t\t\t\t\tres += l1;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, s1, l1);",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \":\\\"\", 2);",
          "old_line_content": "\t\t\t\t\t\tres += 2;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, \":\\\"\", 2);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \"\\\":\", 2);",
          "old_line_content": "\t\t\t\t\t\tres += 2;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, \"\\\":\", 2);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, s2, l2);",
          "old_line_content": "\t\t\t\t\t\tres += l2;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, s2, l2);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \":{\", 2);",
          "old_line_content": "\t\t\t\t\t\tres += 2;",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, \":{\", 2);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, (char *) serialized_data, serialized_length);",
          "old_line_content": "\t\t\t\t\t\tres[serialized_length] = '}';",
          "new_line_content": "\t\t\t\t\t\tmemcpy(res, (char *) serialized_data, serialized_length);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "_COUNTED_P",
          "old_text": null,
          "new_text": "_COUNTED_P(struc))",
          "old_line_content": "\t\t\t\t\t\tif (var_idx) {",
          "new_line_content": "\t\t\t\t\t\t\t(zend_ulong) (zend_uintptr_t) Z_COUNTED_P(struc));",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "VAL_LONG",
          "old_text": null,
          "new_text": "VAL_LONG(var_idx, -1);",
          "old_line_content": "\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tZVAL_LONG(var_idx, -1);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(serialized_data);",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tefree(serialized_data);",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "STR_KNOWN",
          "old_text": null,
          "new_text": "STR_KNOWN(ZEND_STR_SLEEP),",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tzval *zv = zend_hash_find_ex(&ce->function_table, ZSTR_KNOWN(ZEND_STR_SLEEP), 1);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(exception))",
          "old_line_content": "\t\t\t\t\t\t\t\t/* we should still add element even if it's not OK,",
          "new_line_content": "\t\t\t\t\t\t\tif (!EG(exception)) {",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "_OBJ",
          "old_text": null,
          "new_text": "_OBJ(tmp))",
          "old_line_content": "\t\t\t\t\t\t\treturn;",
          "new_line_content": "\t\t\t\t\t\t\tOBJ_RELEASE(Z_OBJ(tmp));",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "_OBJ",
          "old_text": null,
          "new_text": "_OBJ(tmp))",
          "old_line_content": "\t\t\t\t\t\treturn;",
          "new_line_content": "\t\t\t\t\t\tOBJ_RELEASE(Z_OBJ(tmp));",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "hp_var_serialize_class_name",
          "old_text": null,
          "new_text": "hp_var_serialize_class_name(buf, struc);",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tincomplete_class = php_var_serialize_class_name(buf, struc);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "_OBJ_HT_P",
          "old_text": null,
          "new_text": "_OBJ_HT_P(struc)-",
          "old_line_content": "\t\t\t\t\t/* Optimized version without rebulding properties HashTable */",
          "new_line_content": "\t\t\t\t && Z_OBJ_HT_P(struc)->get_properties == zend_std_get_properties) {",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "_OBJ_P",
          "old_text": null,
          "new_text": "_OBJ_P(struc);",
          "old_line_content": "\t\t\t\t\tzend_class_entry *ce = obj->ce;",
          "new_line_content": "\t\t\t\t\tzend_object *obj = Z_OBJ_P(struc);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "_TYPE_P",
          "old_text": null,
          "new_text": "_TYPE_P(prop) ",
          "old_line_content": "\t\t\t\t\t\t\tcount--;",
          "new_line_content": "\t\t\t\t\t\tif (Z_TYPE_P(prop) == IS_UNDEF) {",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \":{\", 2);",
          "old_line_content": "\t\t\t\t\t\tfor (i = 0; i < ce->default_properties_count; i++) {",
          "new_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \":{\", 2);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "_TYPE_P",
          "old_text": null,
          "new_text": "_TYPE_P(prop) ",
          "old_line_content": "\t\t\t\t\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\t\t\t\tif (Z_TYPE_P(prop) == IS_UNDEF) {",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "STR_LEN",
          "old_text": null,
          "new_text": "STR_LEN(prop_info->name))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(prop_info->name), ZSTR_LEN(prop_info->name));",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "_REFVAL_P",
          "old_text": null,
          "new_text": "_REFVAL_P(prop);",
          "old_line_content": "\t\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t\tprop = Z_REFVAL_P(prop);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "hp_var_serialize_intern",
          "old_text": null,
          "new_text": "hp_var_serialize_intern(buf, prop, var_hash);",
          "old_line_content": "\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tphp_var_serialize_intern(buf, prop, var_hash);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "mart_str_appendc",
          "old_text": null,
          "new_text": "mart_str_appendc(buf, '}');",
          "old_line_content": "\t\t\t\t\t} else {",
          "new_line_content": "\t\t\t\t\t\tsmart_str_appendc(buf, '}');",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"0:{}\", 4);",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \"0:{}\", 4);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "end_get_properties_for",
          "old_text": null,
          "new_text": "end_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "old_line_content": "\t\t\t\t/* count after serializing name, since php_var_serialize_class_name",
          "new_line_content": "\t\t\t\tmyht = zend_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "end_array_count",
          "old_text": null,
          "new_text": "end_array_count(myht);",
          "old_line_content": "\t\t\t\tif (count > 0 && incomplete_class) {",
          "new_line_content": "\t\t\t\tcount = zend_array_count(myht);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "end_release_properties",
          "old_text": null,
          "new_text": "end_release_properties(myht);",
          "old_line_content": "\t\t\t\treturn;",
          "new_line_content": "\t\t\t\tzend_release_properties(myht);",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "end_array_count",
          "old_text": null,
          "new_text": "end_array_count(myht),",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\t\tbuf, struc, myht, zend_array_count(myht), /* incomplete_class */ 0, var_hash);",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "_REFVAL_P",
          "old_text": null,
          "new_text": "_REFVAL_P(struc);",
          "old_line_content": "\t\t\tgoto again;",
          "new_line_content": "\t\t\tstruc = Z_REFVAL_P(struc);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"i:0;\", 4);",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"i:0;\", 4);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "mart_str_0",
          "old_text": null,
          "new_text": "mart_str_0(buf);",
          "old_line_content": "}",
          "new_line_content": "\tsmart_str_0(buf);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "end_print_long_to_buf",
          "old_text": null,
          "new_text": "end_print_long_to_buf(b + sizeof(b) - 1, class_name_len);",
          "old_line_content": "\tl = b + sizeof(b) - 1 - s;",
          "new_line_content": "\ts = zend_print_long_to_buf(b + sizeof(b) - 1, class_name_len);",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "end_hash_init",
          "old_text": null,
          "new_text": "end_hash_init(&d->ht, 16, NULL, ZVAL_PTR_DTOR, 0);",
          "old_line_content": "\t\td->n = 0;",
          "new_line_content": "\t\tzend_hash_init(&d->ht, 16, NULL, ZVAL_PTR_DTOR, 0);",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \"O:\", 2);",
          "old_line_content": "\tres += 2;",
          "new_line_content": "\tmemcpy(res, \"O:\", 2);",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, s, l);",
          "old_line_content": "\tres += l;",
          "new_line_content": "\tmemcpy(res, s, l);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(serialize).",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tBG(serialize).level = 1;",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(res, \":\\\"\", 2);",
          "old_line_content": "\tres += 2;",
          "new_line_content": "\tmemcpy(res, \":\\\"\", 2);",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(serialize).",
          "old_line_content": "\t}",
          "new_line_content": "\t\t++BG(serialize).level;",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "HP_CLEANUP_CLASS_ATTRIBUTES",
          "old_text": null,
          "new_text": "HP_CLEANUP_CLASS_ATTRIBUTES();",
          "old_line_content": "\treturn incomplete_class;",
          "new_line_content": "\tPHP_CLEANUP_CLASS_ATTRIBUTES();",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(d);",
          "old_line_content": "\t}",
          "new_line_content": "\t\tefree(d);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(serialize).",
          "old_line_content": "\t}",
          "new_line_content": "\t\tBG(serialize).data = NULL;",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "VAL_UNDEF",
          "old_text": null,
          "new_text": "VAL_UNDEF(&fci.function_name);",
          "old_line_content": "",
          "new_line_content": "\tZVAL_UNDEF(&fci.function_name);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_END();",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(serialize_lock)-",
          "old_line_content": "",
          "new_line_content": "\tBG(serialize_lock)--;",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": null,
          "new_api": "HP_VAR_SERIALIZE_DESTROY",
          "old_text": null,
          "new_text": "HP_VAR_SERIALIZE_DESTROY(var_hash);",
          "old_line_content": "",
          "new_line_content": "\tPHP_VAR_SERIALIZE_DESTROY(var_hash);",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "val_ptr_dtor",
          "old_text": null,
          "new_text": "val_ptr_dtor(retval);",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\t\tzval_ptr_dtor(retval);",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "ETURN_THROWS",
          "old_text": null,
          "new_text": "ETURN_THROWS();",
          "old_line_content": "\t}",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "STR_VAL",
          "old_text": null,
          "new_text": "STR_VAL(obj->ce->name))",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"%s::__sleep() should return an array only containing the names of instance-variables to serialize\", ZSTR_VAL(obj->ce->name));",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": null,
          "new_api": "ETURN_NEW_STR",
          "old_text": null,
          "new_text": "ETURN_NEW_STR(buf.s);",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tRETURN_NEW_STR(buf.s);",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "ETURN_EMPTY_STRING",
          "old_text": null,
          "new_text": "ETURN_EMPTY_STRING();",
          "old_line_content": "\t}",
          "new_line_content": "\t\tRETURN_EMPTY_STRING();",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(serialize_lock)-",
          "old_line_content": "",
          "new_line_content": "\tBG(serialize_lock)--;",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": null,
          "new_api": "val_ptr_dtor",
          "old_text": null,
          "new_text": "val_ptr_dtor(retval);",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\t\tzval_ptr_dtor(retval);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "HP_VAR_UNSERIALIZE_INIT",
          "old_text": null,
          "new_text": "HP_VAR_UNSERIALIZE_INIT(var_hash);",
          "old_line_content": "",
          "new_line_content": "\tPHP_VAR_UNSERIALIZE_INIT(var_hash);",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "_OBJCE_P",
          "old_text": null,
          "new_text": "_OBJCE_P(obj)-",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\t\tzend_type_error(\"%s::__serialize() must return an array\", ZSTR_VAL(Z_OBJCE_P(obj)->name));",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "hp_var_unserialize_get_cur_depth",
          "old_text": null,
          "new_text": "hp_var_unserialize_get_cur_depth(var_hash);",
          "old_line_content": "\tif (options != NULL) {",
          "new_line_content": "\tprev_cur_depth = php_var_unserialize_get_cur_depth(var_hash);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "end_zval_type_name",
          "old_text": null,
          "new_text": "end_zval_type_name(classes))",
          "old_line_content": "\t\t\tgoto cleanup;",
          "new_line_content": "\t\t\tzend_type_error(\"%s(): Option \\\"allowed_classes\\\" must be of type array|bool, %s given\", function_name, zend_zval_type_name(classes));",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "end_hash_find",
          "old_text": null,
          "new_text": "end_hash_find(props, name);",
          "old_line_content": "\tif (val == NULL) {",
          "new_line_content": "\tzval *val = zend_hash_find(props, name);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "_ARRVAL_P",
          "old_text": null,
          "new_text": "_ARRVAL_P(classes))",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tzend_hash_init(class_hash, (Z_TYPE_P(classes) == IS_ARRAY)?zend_hash_num_elements(Z_ARRVAL_P(classes)):0, NULL, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "_TYPE_P",
          "old_text": null,
          "new_text": "_TYPE_P(classes) ",
          "old_line_content": "\t\t\tzval *entry;",
          "new_line_content": "\t\tif(class_hash && Z_TYPE_P(classes) == IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "_OBJ_P",
          "old_text": null,
          "new_text": "_OBJ_P(struc),",
          "old_line_content": "\t\t\tif (info) {",
          "new_line_content": "\t\t\tzend_property_info *info = zend_get_typed_property_info_for_slot(Z_OBJ_P(struc), val);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "END_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "END_HASH_FOREACH_END();",
          "old_line_content": "",
          "new_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "STR_VAL",
          "old_text": null,
          "new_text": "STR_VAL(error_name))",
          "old_line_content": "\t\treturn SUCCESS;",
          "new_line_content": "\t\t\t\"\\\"%s\\\" is returned from __sleep() multiple times\", ZSTR_VAL(error_name));",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(exception))",
          "old_line_content": "\t\t\t\tgoto cleanup;",
          "new_line_content": "\t\t\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "_TRY_ADDREF_P",
          "old_text": null,
          "new_text": "_TRY_ADDREF_P(val);",
          "old_line_content": "\treturn SUCCESS;",
          "new_line_content": "\tZ_TRY_ADDREF_P(val);",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "hp_var_unserialize_set_allowed_classes",
          "old_text": null,
          "new_text": "hp_var_unserialize_set_allowed_classes(var_hash, class_hash);",
          "old_line_content": "",
          "new_line_content": "\t\tphp_var_unserialize_set_allowed_classes(var_hash, class_hash);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "end_hash_str_find_deref",
          "old_text": null,
          "new_text": "end_hash_str_find_deref(options, \"max_depth\", sizeof(\"max_depth\") - 1);",
          "old_line_content": "\t\tif (max_depth) {",
          "new_line_content": "\t\tmax_depth = zend_hash_str_find_deref(options, \"max_depth\", sizeof(\"max_depth\") - 1);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "end_zval_type_name",
          "old_text": null,
          "new_text": "end_zval_type_name(max_depth))",
          "old_line_content": "\t\t\t\tgoto cleanup;",
          "new_line_content": "\t\t\t\tzend_type_error(\"%s(): Option \\\"max_depth\\\" must be of type int, %s given\", function_name, zend_zval_type_name(max_depth));",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "end_get_properties_for",
          "old_text": null,
          "new_text": "end_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "old_line_content": "\tzval *name_val;",
          "new_line_content": "\tHashTable *props = zend_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "end_value_error",
          "old_text": null,
          "new_text": "end_value_error(\"%s(): Option \\\"max_depth\\\" must be greater than or equal to 0\", function_name);",
          "old_line_content": "\t\t\t\tgoto cleanup;",
          "new_line_content": "\t\t\t\tzend_value_error(\"%s(): Option \\\"max_depth\\\" must be greater than or equal to 0\", function_name);",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "end_hash_num_elements",
          "old_text": null,
          "new_text": "end_hash_num_elements(sleep_retval),",
          "old_line_content": "\t/* TODO: Rewrite this by fetching the property info instead of trying out different",
          "new_line_content": "\tzend_hash_init(ht, zend_hash_num_elements(sleep_retval), NULL, ZVAL_PTR_DTOR, 0);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "_LVAL_P",
          "old_text": null,
          "new_text": "_LVAL_P(max_depth))",
          "old_line_content": "\t\t\t/* If the max_depth for a nested unserialize() call has been overridden,",
          "new_line_content": "\t\t\tphp_var_unserialize_set_max_depth(var_hash, Z_LVAL_P(max_depth));",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "hp_var_unserialize_set_cur_depth",
          "old_text": null,
          "new_text": "hp_var_unserialize_set_cur_depth(var_hash, 0);",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tphp_var_unserialize_set_cur_depth(var_hash, 0);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "hp_error_docref",
          "old_text": null,
          "new_text": "hp_error_docref(NULL, E_WARNING,\n\t\t\t\t\t\"%s::__sleep() should return an array only containing the names of instance-variables to serialize\",\n\t\t\t\t\tZSTR_VAL(ce->name));",
          "old_line_content": "\t\t\t\t\t\"%s::__sleep() should return an array only containing the names of instance-variables to serialize\",",
          "new_line_content": "\t\t\tphp_error_docref(NULL, E_WARNING,",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "ar_tmp_var",
          "old_text": null,
          "new_text": "ar_tmp_var(&var_hash);",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tretval = var_tmp_var(&var_hash);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "STR_VAL",
          "old_text": null,
          "new_text": "STR_VAL(ce->name))",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\tZSTR_VAL(ce->name));",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "end_tmp_string_release",
          "old_text": null,
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "end_long)((char*)p - buf),",
          "old_text": null,
          "new_text": "end_long)((char*)p - buf),",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t(zend_long)((char*)p - buf), buf_len);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": null,
          "new_api": "val_ptr_dtor",
          "old_text": null,
          "new_text": "val_ptr_dtor(return_value);",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tzval_ptr_dtor(return_value);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "end_tmp_string_release",
          "old_text": null,
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tretval = FAILURE;",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "c_check_possible_root",
          "old_text": null,
          "new_text": "c_check_possible_root(ref);",
          "old_line_content": "\t}",
          "new_line_content": "\t\tgc_check_possible_root(ref);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "end_string_release",
          "old_text": null,
          "new_text": "end_string_release(priv_name);",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tzend_string_release(priv_name);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "REE_HASHTABLE",
          "old_text": null,
          "new_text": "REE_HASHTABLE(class_hash);",
          "old_line_content": "\t}",
          "new_line_content": "\t\tFREE_HASHTABLE(class_hash);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "end_string_release",
          "old_text": null,
          "new_text": "end_string_release(priv_name);",
          "old_line_content": "",
          "new_line_content": "\t\tzend_string_release(priv_name);",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "end_tmp_string_release",
          "old_text": null,
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tretval = FAILURE;",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "HP_VAR_UNSERIALIZE_DESTROY",
          "old_text": null,
          "new_text": "HP_VAR_UNSERIALIZE_DESTROY(var_hash);",
          "old_line_content": "",
          "new_line_content": "\tPHP_VAR_UNSERIALIZE_DESTROY(var_hash);",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "end_unwrap_reference",
          "old_text": null,
          "new_text": "end_unwrap_reference(return_value);",
          "old_line_content": "\t}",
          "new_line_content": "\t\tzend_unwrap_reference(return_value);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "end_string_release",
          "old_text": null,
          "new_text": "end_string_release(prot_name);",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tzend_string_release(prot_name);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "end_string_release",
          "old_text": null,
          "new_text": "end_string_release(prot_name);",
          "old_line_content": "",
          "new_line_content": "\t\tzend_string_release(prot_name);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "end_tmp_string_release",
          "old_text": null,
          "new_text": "end_tmp_string_release(tmp_name);",
          "old_line_content": "\t\t\tretval = FAILURE;",
          "new_line_content": "\t\t\tzend_tmp_string_release(tmp_name);",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "_PARAM_STRING",
          "old_text": null,
          "new_text": "_PARAM_STRING(buf, buf_len)\n",
          "old_line_content": "\t\tZ_PARAM_OPTIONAL",
          "new_line_content": "\t\tZ_PARAM_STRING(buf, buf_len)",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "END_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "END_HASH_FOREACH_END();",
          "old_line_content": "",
          "new_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_END();",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "end_release_properties",
          "old_text": null,
          "new_text": "end_release_properties(props);",
          "old_line_content": "\treturn retval;",
          "new_line_content": "\tzend_release_properties(props);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": null,
          "new_api": "hp_unserialize_with_options",
          "old_text": null,
          "new_text": "hp_unserialize_with_options(return_value, buf, buf_len, options, \"unserialize\");",
          "old_line_content": "}",
          "new_line_content": "\tphp_unserialize_with_options(return_value, buf, buf_len, options, \"unserialize\");",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \":{\", 2);",
          "old_line_content": "\tif (count > 0) {",
          "new_line_content": "\tsmart_str_appendl(buf, \":{\", 2);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_START(0, 1)\n",
          "old_line_content": "\t\tZ_PARAM_OPTIONAL",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_END();",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "end_memory_usage",
          "old_text": null,
          "new_text": "end_memory_usage(real_usage))",
          "old_line_content": "}",
          "new_line_content": "\tRETURN_LONG(zend_memory_usage(real_usage));",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "end_string_equals_literal",
          "old_text": null,
          "new_text": "end_string_equals_literal(key, MAGIC_MEMBER))",
          "old_line_content": "\t\t\t\tincomplete_class = 0;",
          "new_line_content": "\t\t\tif (incomplete_class && zend_string_equals_literal(key, MAGIC_MEMBER)) {",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "hp_var_serialize_long",
          "old_text": null,
          "new_text": "hp_var_serialize_long(buf, index);",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\t\t\tphp_var_serialize_long(buf, index);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_START(0, 1)\n",
          "old_line_content": "\t\tZ_PARAM_OPTIONAL",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "STR_LEN",
          "old_text": null,
          "new_text": "STR_LEN(key))",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(key), ZSTR_LEN(key));",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "END_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "END_PARSE_PARAMETERS_END();",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "_REFVAL_P",
          "old_text": null,
          "new_text": "_REFVAL_P(data);",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdata = Z_REFVAL_P(data);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "end_memory_peak_usage",
          "old_text": null,
          "new_text": "end_memory_peak_usage(real_usage))",
          "old_line_content": "}",
          "new_line_content": "\tRETURN_LONG(zend_memory_peak_usage(real_usage));",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "HP_INI_END",
          "old_text": null,
          "new_text": "HP_INI_END()\n",
          "old_line_content": "",
          "new_line_content": "PHP_INI_END()",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\t\t} else {",
          "new_line_content": "\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "EGISTER_INI_ENTRIES",
          "old_text": null,
          "new_text": "EGISTER_INI_ENTRIES();",
          "old_line_content": "\treturn SUCCESS;",
          "new_line_content": "\tREGISTER_INI_ENTRIES();",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "_PROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "_PROTECT_RECURSION_P(data);",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tZ_PROTECT_RECURSION_P(data);",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "_UNPROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "_UNPROTECT_RECURSION_P(data);",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(data);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "hp_var_serialize_intern",
          "old_text": null,
          "new_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "END_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "END_HASH_FOREACH_END();",
          "old_line_content": "\t}",
          "new_line_content": "\t\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "mart_str_appendc",
          "old_text": null,
          "new_text": "mart_str_appendc(buf, '}');",
          "old_line_content": "}",
          "new_line_content": "\tsmart_str_appendc(buf, '}');",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": null,
          "new_api": "end_hash_num_elements",
          "old_text": null,
          "new_text": "end_hash_num_elements(&props),",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tbuf, struc, &props, zend_hash_num_elements(&props), /* incomplete_class */ 0, var_hash);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "end_hash_destroy",
          "old_text": null,
          "new_text": "end_hash_destroy(&props);",
          "old_line_content": "}",
          "new_line_content": "\tzend_hash_destroy(&props);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "G",
          "old_text": null,
          "new_text": "G(exception))",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "hp_add_var_hash",
          "old_text": null,
          "new_text": "hp_add_var_hash(var_hash, struc))",
          "old_line_content": "\t\tif (var_already == -1) {",
          "new_line_content": "\tif (var_hash && (var_already = php_add_var_hash(var_hash, struc))) {",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "mart_str_appendc",
          "old_text": null,
          "new_text": "mart_str_appendc(buf, ';');",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendc(buf, ';');",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "mart_str_appendc",
          "old_text": null,
          "new_text": "mart_str_appendc(buf, ';');",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendc(buf, ';');",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "_TYPE_P",
          "old_text": null,
          "new_text": "_TYPE_P(struc))",
          "old_line_content": "\t\tcase IS_FALSE:",
          "new_line_content": "\tswitch (Z_TYPE_P(struc)) {",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"b:0;\", 4);",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"b:0;\", 4);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"b:1;\", 4);",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"b:1;\", 4);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "mart_str_appendl",
          "old_text": null,
          "new_text": "mart_str_appendl(buf, \"N;\", 2);",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "_LVAL_P",
          "old_text": null,
          "new_text": "_LVAL_P(struc))",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tphp_var_serialize_long(buf, Z_LVAL_P(struc));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1029,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize_precision),",
          "new_text": null,
          "old_line_content": "\t\t\tphp_gcvt(Z_DVAL_P(struc), (int)PG(serialize_precision), '.', 'E', tmp_str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, \"d:\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(res, \"d:\", 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, tmp_str, len);",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(res, tmp_str, len);",
          "new_line_content": "\t\t\tres += 2;",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "_STRLEN_P",
          "new_api": null,
          "old_text": "_STRLEN_P(struc))",
          "new_text": null,
          "old_line_content": "\t\t\tphp_var_serialize_string(buf, Z_STRVAL_P(struc), Z_STRLEN_P(struc));",
          "new_line_content": "\t\tcase IS_STRING:",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "_OBJCE_P",
          "new_api": null,
          "old_text": "_OBJCE_P(struc);",
          "new_text": null,
          "old_line_content": "\t\t\t\tzend_class_entry *ce = Z_OBJCE_P(struc);",
          "new_line_content": "\t\tcase IS_OBJECT: {",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "_OBJ_P",
          "new_api": null,
          "old_text": "_OBJ_P(struc))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tZVAL_OBJ_COPY(&obj, Z_OBJ_P(struc));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "val_ptr_dtor",
          "new_api": null,
          "old_text": "val_ptr_dtor(&obj);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tzval_ptr_dtor(&obj);",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "hp_var_serialize_class_name",
          "new_api": null,
          "old_text": "hp_var_serialize_class_name(buf, &obj);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tphp_var_serialize_class_name(buf, &obj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "hp_var_serialize_long",
          "new_api": null,
          "old_text": "hp_var_serialize_long(buf, index);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tphp_var_serialize_long(buf, index);",
          "new_line_content": "\t\t\t\t\t\tif (!key) {",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "STR_LEN",
          "new_api": null,
          "old_text": "STR_LEN(key))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(key), ZSTR_LEN(key));",
          "new_line_content": "\t\t\t\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "_REFCOUNT_P",
          "new_api": null,
          "old_text": "_REFCOUNT_P(data) ",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tif (Z_ISREF_P(data) && Z_REFCOUNT_P(data) == 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "hp_var_serialize_intern",
          "new_api": null,
          "old_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "val_ptr_dtor",
          "new_api": null,
          "old_text": "val_ptr_dtor(&obj);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tzval_ptr_dtor(&obj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "serialize",
          "new_api": null,
          "old_text": "e->serialize(struc, &serialized_data, &serialized_length, (zend_serialize_data *)var_hash) ",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (ce->serialize(struc, &serialized_data, &serialized_length, (zend_serialize_data *)var_hash) == SUCCESS) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "_OBJCE_P",
          "new_api": null,
          "old_text": "_OBJCE_P(struc)-",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\ts1 = zend_print_long_to_buf(b1 + sizeof(b1) - 1, ZSTR_LEN(Z_OBJCE_P(struc)->name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "end_print_long_to_buf",
          "new_api": null,
          "old_text": "end_print_long_to_buf(b2 + sizeof(b2) - 1, serialized_length);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\ts2 = zend_print_long_to_buf(b2 + sizeof(b2) - 1, serialized_length);",
          "new_line_content": "\t\t\t\t\t\tl1 = b1 + sizeof(b1) - 1 - s1;",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "_OBJCE_P",
          "new_api": null,
          "old_text": "_OBJCE_P(struc)-",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tnew_len = smart_str_alloc(buf, 2 + l1 + 2 + ZSTR_LEN(Z_OBJCE_P(struc)->name) + 2 + l2 + 2 + serialized_length + 1, 0);",
          "new_line_content": "\t\t\t\t\t\tl2 = b2 + sizeof(b2) - 1 - s2;",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, s1, l1);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, s1, l1);",
          "new_line_content": "\t\t\t\t\t\tres += 2;",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, \":\\\"\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, \":\\\"\", 2);",
          "new_line_content": "\t\t\t\t\t\tres += l1;",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "_OBJCE_P",
          "new_api": null,
          "old_text": "_OBJCE_P(struc)-",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, ZSTR_VAL(Z_OBJCE_P(struc)->name), ZSTR_LEN(Z_OBJCE_P(struc)->name));",
          "new_line_content": "\t\t\t\t\t\tres += 2;",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, s2, l2);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, s2, l2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, \":{\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, \":{\", 2);",
          "new_line_content": "\t\t\t\t\t\tres += l2;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, (char *) serialized_data, serialized_length);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmemcpy(res, (char *) serialized_data, serialized_length);",
          "new_line_content": "\t\t\t\t\t\tres += 2;",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "end_hash_index_find",
          "new_api": null,
          "old_text": "end_hash_index_find(&var_hash->ht,\n\t\t\t\t\t\t\t(zend_ulong) (zend_uintptr_t) Z_COUNTED_P(struc));",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tzval *var_idx = zend_hash_index_find(&var_hash->ht,",
          "new_line_content": "\t\t\t\t\t\t/* Mark this value in the var_hash, to avoid creating references to it. */",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "VAL_LONG",
          "new_api": null,
          "old_text": "VAL_LONG(var_idx, -1);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tZVAL_LONG(var_idx, -1);",
          "new_line_content": "\t\t\t\t\t\tif (var_idx) {",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(serialized_data);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tefree(serialized_data);",
          "new_line_content": "\t\t\t\t\tif (serialized_data) {",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "STR_KNOWN",
          "new_api": null,
          "old_text": "STR_KNOWN(ZEND_STR_SLEEP),",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tzval *zv = zend_hash_find_ex(&ce->function_table, ZSTR_KNOWN(ZEND_STR_SLEEP), 1);",
          "new_line_content": "\t\t\t\tif (ce != PHP_IC_ENTRY) {",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "_OBJ_P",
          "new_api": null,
          "old_text": "_OBJ_P(struc))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tZVAL_OBJ_COPY(&tmp, Z_OBJ_P(struc));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\t\t\t\t\t\t\t * since we already wrote the length of the array before */",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "_OBJ",
          "new_api": null,
          "old_text": "_OBJ(tmp))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tOBJ_RELEASE(Z_OBJ(tmp));",
          "new_line_content": "\t\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "hp_var_serialize_class",
          "new_api": null,
          "old_text": "hp_var_serialize_class(buf, &tmp, &retval, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tphp_var_serialize_class(buf, &tmp, &retval, var_hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "hp_var_serialize_class_name",
          "new_api": null,
          "old_text": "hp_var_serialize_class_name(buf, struc);",
          "new_text": null,
          "old_line_content": "\t\t\t\tincomplete_class = php_var_serialize_class_name(buf, struc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "_OBJ_P",
          "new_api": null,
          "old_text": "_OBJ_P(struc)-",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (Z_OBJ_P(struc)->properties == NULL",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "_OBJ_P",
          "new_api": null,
          "old_text": "_OBJ_P(struc);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tzend_object *obj = Z_OBJ_P(struc);",
          "new_line_content": "\t\t\t\t\t/* Optimized version without rebulding properties HashTable */",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "BJ_PROP",
          "new_api": null,
          "old_text": "BJ_PROP(obj, prop_info->offset);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tprop = OBJ_PROP(obj, prop_info->offset);",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "mart_str_append_unsigned",
          "new_api": null,
          "old_text": "mart_str_append_unsigned(buf, count);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsmart_str_append_unsigned(buf, count);",
          "new_line_content": "\t\t\t\t\tif (count) {",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "BJ_PROP",
          "new_api": null,
          "old_text": "BJ_PROP(obj, prop_info->offset);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tprop = OBJ_PROP(obj, prop_info->offset);",
          "new_line_content": "\t\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "STR_LEN",
          "new_api": null,
          "old_text": "STR_LEN(prop_info->name))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(prop_info->name), ZSTR_LEN(prop_info->name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "_REFCOUNT_P",
          "new_api": null,
          "old_text": "_REFCOUNT_P(prop) ",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tif (Z_ISREF_P(prop) && Z_REFCOUNT_P(prop) == 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "hp_var_serialize_intern",
          "new_api": null,
          "old_text": "hp_var_serialize_intern(buf, prop, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tphp_var_serialize_intern(buf, prop, var_hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "mart_str_appendc",
          "new_api": null,
          "old_text": "mart_str_appendc(buf, '}');",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsmart_str_appendc(buf, '}');",
          "new_line_content": "\t\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"0:{}\", 4);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsmart_str_appendl(buf, \"0:{}\", 4);",
          "new_line_content": "\t\t\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "end_get_properties_for",
          "new_api": null,
          "old_text": "end_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "new_text": null,
          "old_line_content": "\t\t\t\tmyht = zend_get_properties_for(struc, ZEND_PROP_PURPOSE_SERIALIZE);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "end_array_count",
          "new_api": null,
          "old_text": "end_array_count(myht);",
          "new_text": null,
          "old_line_content": "\t\t\t\tcount = zend_array_count(myht);",
          "new_line_content": "\t\t\t\t * changes the count if the variable is incomplete class */",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "hp_var_serialize_nested_data",
          "new_api": null,
          "old_text": "hp_var_serialize_nested_data(buf, struc, myht, count, incomplete_class, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_var_serialize_nested_data(buf, struc, myht, count, incomplete_class, var_hash);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"a:\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"a:\", 2);",
          "new_line_content": "\t\tcase IS_ARRAY:",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "_REFVAL_P",
          "new_api": null,
          "old_text": "_REFVAL_P(struc);",
          "new_text": null,
          "old_line_content": "\t\t\tstruc = Z_REFVAL_P(struc);",
          "new_line_content": "\t\tcase IS_REFERENCE:",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"i:0;\", 4);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"i:0;\", 4);",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "hp_var_serialize_intern",
          "new_api": null,
          "old_text": "hp_var_serialize_intern(buf, struc, *data);",
          "new_text": null,
          "old_line_content": "\tphp_var_serialize_intern(buf, struc, *data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize).",
          "new_text": null,
          "old_line_content": "\tif (BG(serialize_lock) || !BG(serialize).level) {",
          "new_line_content": "\t/* fprintf(stderr, \"SERIALIZE_INIT      == lock: %u, level: %u\\n\", BG(serialize_lock), BG(serialize).level); */",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "STR_LEN",
          "new_api": null,
          "old_text": "STR_LEN(class_name) ",
          "new_text": null,
          "old_line_content": "\tnew_len = smart_str_alloc(buf, 2 + l + 2 + ZSTR_LEN(class_name) + 2, 0);",
          "new_line_content": "\tl = b + sizeof(b) - 1 - s;",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize_lock))",
          "new_text": null,
          "old_line_content": "\t\tif (!BG(serialize_lock)) {",
          "new_line_content": "\t\td->n = 0;",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, s, l);",
          "new_text": null,
          "old_line_content": "\tmemcpy(res, s, l);",
          "new_line_content": "\tres += 2;",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, \":\\\"\", 2);",
          "new_text": null,
          "old_line_content": "\tmemcpy(res, \":\\\"\", 2);",
          "new_line_content": "\tres += l;",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize).",
          "new_text": null,
          "old_line_content": "\t\td = BG(serialize).data;",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "STR_LEN",
          "new_api": null,
          "old_text": "STR_LEN(class_name))",
          "new_text": null,
          "old_line_content": "\tmemcpy(res, ZSTR_VAL(class_name), ZSTR_LEN(class_name));",
          "new_line_content": "\tres += 2;",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(res, \"\\\":\", 2);",
          "new_text": null,
          "old_line_content": "\tmemcpy(res, \"\\\":\", 2);",
          "new_line_content": "\tres += class_name_len;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize).",
          "new_text": null,
          "old_line_content": "\tif (BG(serialize_lock) || BG(serialize).level == 1) {",
          "new_line_content": "\t/* fprintf(stderr, \"SERIALIZE_DESTROY   == lock: %u, level: %u\\n\", BG(serialize_lock), BG(serialize).level); */",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize).",
          "new_text": null,
          "old_line_content": "\tif (!BG(serialize_lock) && !--BG(serialize).level) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "VAL_UNDEF",
          "new_api": null,
          "old_text": "VAL_UNDEF(&fci.function_name);",
          "new_text": null,
          "old_line_content": "\tZVAL_UNDEF(&fci.function_name);",
          "new_line_content": "\tfci.named_params = NULL;",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "END_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_START(1, 1)\n",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize_lock)+",
          "new_text": null,
          "old_line_content": "\tBG(serialize_lock)++;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "HP_VAR_SERIALIZE_INIT",
          "new_api": null,
          "old_text": "HP_VAR_SERIALIZE_INIT(var_hash);",
          "new_text": null,
          "old_line_content": "\tPHP_VAR_SERIALIZE_INIT(var_hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "_ISUNDEF_P",
          "new_api": null,
          "old_text": "_ISUNDEF_P(retval))",
          "new_text": null,
          "old_line_content": "\tif (res == FAILURE || Z_ISUNDEF_P(retval)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "ASH_OF",
          "new_api": null,
          "old_text": "ASH_OF(retval))",
          "new_text": null,
          "old_line_content": "\tif (!HASH_OF(retval)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "ETURN_NEW_STR",
          "new_api": null,
          "old_text": "ETURN_NEW_STR(buf.s);",
          "new_text": null,
          "old_line_content": "\t\tRETURN_NEW_STR(buf.s);",
          "new_line_content": "\tif (buf.s) {",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "ETURN_EMPTY_STRING",
          "new_api": null,
          "old_text": "ETURN_EMPTY_STRING();",
          "new_text": null,
          "old_line_content": "\t\tRETURN_EMPTY_STRING();",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(serialize_lock)+",
          "new_text": null,
          "old_line_content": "\tBG(serialize_lock)++;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(retval) ",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(retval) != IS_ARRAY) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "HP_VAR_UNSERIALIZE_INIT",
          "new_api": null,
          "old_text": "HP_VAR_UNSERIALIZE_INIT(var_hash);",
          "new_text": null,
          "old_line_content": "\tPHP_VAR_UNSERIALIZE_INIT(var_hash);",
          "new_line_content": "\tp = (const unsigned char*) buf;",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "hp_var_unserialize_get_allowed_classes",
          "new_api": null,
          "old_text": "hp_var_unserialize_get_allowed_classes(var_hash);",
          "new_text": null,
          "old_line_content": "\tprev_class_hash = php_var_unserialize_get_allowed_classes(var_hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "end_hash_str_find_deref",
          "new_api": null,
          "old_text": "end_hash_str_find_deref(options, \"allowed_classes\", sizeof(\"allowed_classes\")-1);",
          "new_text": null,
          "old_line_content": "\t\tclasses = zend_hash_str_find_deref(options, \"allowed_classes\", sizeof(\"allowed_classes\")-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "end_hash_find",
          "new_api": null,
          "old_text": "end_hash_find(props, name);",
          "new_text": null,
          "old_line_content": "\tzval *val = zend_hash_find(props, name);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "end_is_true",
          "new_api": null,
          "old_text": "end_is_true(classes))",
          "new_text": null,
          "old_line_content": "\t\tif(classes && (Z_TYPE_P(classes) == IS_ARRAY || !zend_is_true(classes))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(val) ",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(val) == IS_INDIRECT) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(classes) ",
          "new_text": null,
          "old_line_content": "\t\tif(class_hash && Z_TYPE_P(classes) == IS_ARRAY) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "onvert_to_string",
          "new_api": null,
          "old_text": "onvert_to_string(entry);",
          "new_text": null,
          "old_line_content": "\t\t\t\tconvert_to_string(entry);",
          "new_line_content": "\t\t\tZEND_HASH_FOREACH_VAL(Z_ARRVAL_P(classes), entry) {",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "end_hash_add",
          "new_api": null,
          "old_text": "end_hash_add(ht, name, val))",
          "new_text": null,
          "old_line_content": "\tif (!zend_hash_add(ht, name, val)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\t\t\tif (EG(exception)) {",
          "new_line_content": "\t\t\t/* Exception during string conversion. */",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "_TRY_ADDREF_P",
          "new_api": null,
          "old_text": "_TRY_ADDREF_P(val);",
          "new_text": null,
          "old_line_content": "\tZ_TRY_ADDREF_P(val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "hp_var_unserialize_set_allowed_classes",
          "new_api": null,
          "old_text": "hp_var_unserialize_set_allowed_classes(var_hash, class_hash);",
          "new_text": null,
          "old_line_content": "\t\tphp_var_unserialize_set_allowed_classes(var_hash, class_hash);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "end_hash_str_find_deref",
          "new_api": null,
          "old_text": "end_hash_str_find_deref(options, \"max_depth\", sizeof(\"max_depth\") - 1);",
          "new_text": null,
          "old_line_content": "\t\tmax_depth = zend_hash_str_find_deref(options, \"max_depth\", sizeof(\"max_depth\") - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(max_depth) ",
          "new_text": null,
          "old_line_content": "\t\t\tif (Z_TYPE_P(max_depth) != IS_LONG) {",
          "new_line_content": "\t\tif (max_depth) {",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "_OBJCE_P",
          "new_api": null,
          "old_text": "_OBJCE_P(struc);",
          "new_text": null,
          "old_line_content": "\tzend_class_entry *ce = Z_OBJCE_P(struc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": "_LVAL_P",
          "new_api": null,
          "old_text": "_LVAL_P(max_depth) ",
          "new_text": null,
          "old_line_content": "\t\t\tif (Z_LVAL_P(max_depth) < 0) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "end_hash_num_elements",
          "new_api": null,
          "old_text": "end_hash_num_elements(sleep_retval),",
          "new_text": null,
          "old_line_content": "\tzend_hash_init(ht, zend_hash_num_elements(sleep_retval), NULL, ZVAL_PTR_DTOR, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "_LVAL_P",
          "new_api": null,
          "old_text": "_LVAL_P(max_depth))",
          "new_text": null,
          "old_line_content": "\t\t\tphp_var_unserialize_set_max_depth(var_hash, Z_LVAL_P(max_depth));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "hp_var_unserialize_set_cur_depth",
          "new_api": null,
          "old_text": "hp_var_unserialize_set_cur_depth(var_hash, 0);",
          "new_text": null,
          "old_line_content": "\t\t\tphp_var_unserialize_set_cur_depth(var_hash, 0);",
          "new_line_content": "\t\t\t * start counting from zero again (for the nested call only). */",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "VAL_DEREF",
          "new_api": null,
          "old_text": "VAL_DEREF(name_val);",
          "new_text": null,
          "old_line_content": "\t\tZVAL_DEREF(name_val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(unserialize).",
          "new_text": null,
          "old_line_content": "\tif (BG(unserialize).level > 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "STR_VAL",
          "new_api": null,
          "old_text": "STR_VAL(ce->name))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tZSTR_VAL(ce->name));",
          "new_line_content": "\t\t\t\t\t\"%s::__sleep() should return an array only containing the names of instance-variables to serialize\",",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "hp_var_unserialize",
          "new_api": null,
          "old_text": "hp_var_unserialize(retval, &p, p + buf_len, &var_hash))",
          "new_text": null,
          "old_line_content": "\tif (!php_var_unserialize(retval, &p, p + buf_len, &var_hash)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "val_get_tmp_string",
          "new_api": null,
          "old_text": "val_get_tmp_string(name_val, &tmp_name);",
          "new_text": null,
          "old_line_content": "\t\tname = zval_get_tmp_string(name_val, &tmp_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(unserialize).",
          "new_text": null,
          "old_line_content": "\t\tif (BG(unserialize).level <= 1) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\t\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(unserialize).",
          "new_text": null,
          "old_line_content": "\t} else if (BG(unserialize).level > 1) {",
          "new_line_content": "\t\tRETVAL_FALSE;",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "end_mangle_property_name",
          "new_api": null,
          "old_text": "end_mangle_property_name(\n\t\t\tZSTR_VAL(ce->name), ZSTR_LEN(ce->name),\n\t\t\tZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "new_text": null,
          "old_line_content": "\t\tpriv_name = zend_mangle_property_name(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "end_hash_destroy",
          "new_api": null,
          "old_text": "end_hash_destroy(class_hash);",
          "new_text": null,
          "old_line_content": "\t\tzend_hash_destroy(class_hash);",
          "new_line_content": "\tif (class_hash) {",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "end_string_release",
          "new_api": null,
          "old_text": "end_string_release(priv_name);",
          "new_text": null,
          "old_line_content": "\t\tzend_string_release(priv_name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\t\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "hp_var_unserialize_set_allowed_classes",
          "new_api": null,
          "old_text": "hp_var_unserialize_set_allowed_classes(var_hash, prev_class_hash);",
          "new_text": null,
          "old_line_content": "\tphp_var_unserialize_set_allowed_classes(var_hash, prev_class_hash);",
          "new_line_content": "\t/* Reset to previous options in case this is a nested call */",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "end_mangle_property_name",
          "new_api": null,
          "old_text": "end_mangle_property_name(\n\t\t\t\"*\", 1, ZSTR_VAL(name), ZSTR_LEN(name), ce->type & ZEND_INTERNAL_CLASS);",
          "new_text": null,
          "old_line_content": "\t\tprot_name = zend_mangle_property_name(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "_ISREF_P",
          "new_api": null,
          "old_text": "_ISREF_P(return_value))",
          "new_text": null,
          "old_line_content": "\tif (Z_ISREF_P(return_value)) {",
          "new_line_content": "\t * the value we unwrap here. This is compatible with behavior in PHP <=7.0. */",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "end_string_release",
          "new_api": null,
          "old_text": "end_string_release(prot_name);",
          "new_text": null,
          "old_line_content": "\t\tzend_string_release(prot_name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\t\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "hp_error_docref",
          "new_api": null,
          "old_text": "hp_error_docref(NULL, E_WARNING,\n\t\t\t\"\\\"%s\\\" returned as member variable from __sleep() but does not exist\", ZSTR_VAL(name));",
          "new_text": null,
          "old_line_content": "\t\tphp_error_docref(NULL, E_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "END_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_START(1, 2)\n",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "END_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_END();",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_ARRAY_HT(options)",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "end_release_properties",
          "new_api": null,
          "old_text": "end_release_properties(props);",
          "new_text": null,
          "old_line_content": "\tzend_release_properties(props);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "hp_unserialize_with_options",
          "new_api": null,
          "old_text": "hp_unserialize_with_options(return_value, buf, buf_len, options, \"unserialize\");",
          "new_text": null,
          "old_line_content": "\tphp_unserialize_with_options(return_value, buf, buf_len, options, \"unserialize\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "mart_str_append_unsigned",
          "new_api": null,
          "old_text": "mart_str_append_unsigned(buf, count);",
          "new_text": null,
          "old_line_content": "\tsmart_str_append_unsigned(buf, count);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "END_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_START(0, 1)\n",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "END_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_END();",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_BOOL(real_usage)",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "end_memory_usage",
          "new_api": null,
          "old_text": "end_memory_usage(real_usage))",
          "new_text": null,
          "old_line_content": "\tRETURN_LONG(zend_memory_usage(real_usage));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "end_string_equals_literal",
          "new_api": null,
          "old_text": "end_string_equals_literal(key, MAGIC_MEMBER))",
          "new_text": null,
          "old_line_content": "\t\t\tif (incomplete_class && zend_string_equals_literal(key, MAGIC_MEMBER)) {",
          "new_line_content": "\t\tZEND_HASH_FOREACH_KEY_VAL_IND(ht, index, key, data) {",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "hp_var_serialize_long",
          "new_api": null,
          "old_text": "hp_var_serialize_long(buf, index);",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_var_serialize_long(buf, index);",
          "new_line_content": "\t\t\tif (!key) {",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "END_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_START(0, 1)\n",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "STR_LEN",
          "new_api": null,
          "old_text": "STR_LEN(key))",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_var_serialize_string(buf, ZSTR_VAL(key), ZSTR_LEN(key));",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "END_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "END_PARSE_PARAMETERS_END();",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_BOOL(real_usage)",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "_REFCOUNT_P",
          "new_api": null,
          "old_text": "_REFCOUNT_P(data) ",
          "new_text": null,
          "old_line_content": "\t\t\tif (Z_ISREF_P(data) && Z_REFCOUNT_P(data) == 1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "end_memory_peak_usage",
          "new_api": null,
          "old_text": "end_memory_peak_usage(real_usage))",
          "new_text": null,
          "old_line_content": "\tRETURN_LONG(zend_memory_peak_usage(real_usage));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "HP_INI_BEGIN",
          "new_api": null,
          "old_text": "HP_INI_BEGIN()\n",
          "new_text": null,
          "old_line_content": "PHP_INI_BEGIN()",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(data) ",
          "new_text": null,
          "old_line_content": "\t\t\tif (Z_TYPE_P(data) == IS_ARRAY) {",
          "new_line_content": "\t\t\t * since we already wrote the length of the array before */",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "EGISTER_INI_ENTRIES",
          "new_api": null,
          "old_text": "EGISTER_INI_ENTRIES();",
          "new_text": null,
          "old_line_content": "\tREGISTER_INI_ENTRIES();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "_REFCOUNTED_P",
          "new_api": null,
          "old_text": "_REFCOUNTED_P(data))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(data)) {",
          "new_line_content": "\t\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "hp_var_serialize_intern",
          "new_api": null,
          "old_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "hp_var_serialize_intern",
          "new_api": null,
          "old_text": "hp_var_serialize_intern(buf, data, var_hash);",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_var_serialize_intern(buf, data, var_hash);",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "END_HASH_FOREACH_END",
          "new_api": null,
          "old_text": "END_HASH_FOREACH_END();",
          "new_text": null,
          "old_line_content": "\t\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "mart_str_appendc",
          "new_api": null,
          "old_text": "mart_str_appendc(buf, '}');",
          "new_text": null,
          "old_line_content": "\tsmart_str_appendc(buf, '}');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "ASH_OF",
          "new_api": null,
          "old_text": "ASH_OF(retval_ptr))",
          "new_text": null,
          "old_line_content": "\tif (php_var_serialize_get_sleep_props(&props, struc, HASH_OF(retval_ptr)) == SUCCESS) {",
          "new_line_content": "\tHashTable props;",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "end_hash_destroy",
          "new_api": null,
          "old_text": "end_hash_destroy(&props);",
          "new_text": null,
          "old_line_content": "\tzend_hash_destroy(&props);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "G",
          "new_api": null,
          "old_text": "G(exception))",
          "new_text": null,
          "old_line_content": "\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "hp_add_var_hash",
          "new_api": null,
          "old_text": "hp_add_var_hash(var_hash, struc))",
          "new_text": null,
          "old_line_content": "\tif (var_hash && (var_already = php_add_var_hash(var_hash, struc))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\t\t/* Reference to an object that failed to serialize, replace with null. */",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "_ISREF_P",
          "new_api": null,
          "old_text": "_ISREF_P(struc))",
          "new_text": null,
          "old_line_content": "\t\t} else if (Z_ISREF_P(struc)) {",
          "new_line_content": "\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(struc) ",
          "new_text": null,
          "old_line_content": "\t\t} else if (Z_TYPE_P(struc) == IS_OBJECT) {",
          "new_line_content": "\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "_TYPE_P",
          "new_api": null,
          "old_text": "_TYPE_P(struc))",
          "new_text": null,
          "old_line_content": "\tswitch (Z_TYPE_P(struc)) {",
          "new_line_content": "again:",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"b:0;\", 4);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"b:0;\", 4);",
          "new_line_content": "\t\tcase IS_FALSE:",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"b:1;\", 4);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"b:1;\", 4);",
          "new_line_content": "\t\tcase IS_TRUE:",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "mart_str_appendl",
          "new_api": null,
          "old_text": "mart_str_appendl(buf, \"N;\", 2);",
          "new_text": null,
          "old_line_content": "\t\t\tsmart_str_appendl(buf, \"N;\", 2);",
          "new_line_content": "\t\tcase IS_NULL:",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "_LVAL_P",
          "new_api": null,
          "old_text": "_LVAL_P(struc))",
          "new_text": null,
          "old_line_content": "\t\t\tphp_var_serialize_long(buf, Z_LVAL_P(struc));",
          "new_line_content": "\t\tcase IS_LONG:",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 125,
      "total_additions": 144,
      "total_deletions": 144,
      "total_api_changes": 413
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 413,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          736
        ]
      }
    },
    "api_calls_before": 680,
    "api_calls_after": 677,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 4,
      "total_diff_lines": 29
    }
  }
}
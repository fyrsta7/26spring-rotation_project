{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/ca33ab59adc15a1bee3d77067317100cd03482b4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/ca33ab59adc15a1bee3d77067317100cd03482b4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/ca33ab59adc15a1bee3d77067317100cd03482b4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/ca33ab59adc15a1bee3d77067317100cd03482b4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2757,
          "old_api": "RETURN_THROWS",
          "new_api": "Z_PARAM_STR",
          "old_text": "RETURN_THROWS()",
          "new_text": "Z_PARAM_STR(encoding_name)",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZ_PARAM_STR(encoding_name)",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": "array_init",
          "new_api": "php_mb_get_encoding",
          "old_text": "array_init(return_value)",
          "new_text": "php_mb_get_encoding(encoding_name, 1)",
          "old_line_content": "\tarray_init(return_value);",
          "new_line_content": "\tencoding = php_mb_get_encoding(encoding_name, 1);",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": "Z_PARAM_STRING",
          "new_api": "ZEND_PARSE_PARAMETERS_START",
          "old_text": "Z_PARAM_STRING(linefeed, linefeed_len)",
          "new_text": "ZEND_PARSE_PARAMETERS_START(1, 5)",
          "old_line_content": "\t\tZ_PARAM_STRING(linefeed, linefeed_len)",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 5)",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": "Z_PARAM_LONG",
          "new_api": "Z_PARAM_STRING",
          "old_text": "Z_PARAM_LONG(indent)",
          "new_text": "Z_PARAM_STRING(string_val, string.len)",
          "old_line_content": "\t\tZ_PARAM_LONG(indent)",
          "new_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "content_same": false
        },
        {
          "line": 2802,
          "old_api": "MBSTRG",
          "new_api": "php_mb_get_encoding",
          "old_text": "MBSTRG(language)",
          "new_text": "php_mb_get_encoding(charset_name, 2)",
          "old_line_content": "\t\tconst mbfl_language *lang = mbfl_no2language(MBSTRG(language));",
          "new_line_content": "\t\tcharset = php_mb_get_encoding(charset_name, 2);",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "mbfl_no2encoding",
          "new_api": "RETURN_THROWS",
          "old_text": "mbfl_no2encoding(lang->mail_charset)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\t\t\tcharset = mbfl_no2encoding(lang->mail_charset);",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "efree",
          "new_api": "mbfl_string_init",
          "old_text": "efree(ret->val)",
          "new_text": "mbfl_string_init(&result)",
          "old_line_content": "\tefree(ret->val);",
          "new_line_content": "\tmbfl_string_init(&result);",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": "mbfl_string_init",
          "new_api": "ZEND_PARSE_PARAMETERS_START",
          "old_text": "mbfl_string_init(&result)",
          "new_text": "ZEND_PARSE_PARAMETERS_START(1, 1)",
          "old_line_content": "\tmbfl_string_init(&result);",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": "MBSTRG",
          "new_api": "Z_PARAM_STRING",
          "old_text": "MBSTRG(current_internal_encoding)",
          "new_text": "Z_PARAM_STRING(string_val, string.len)",
          "old_line_content": "\tret = mbfl_mime_header_decode(&string, &result, MBSTRG(current_internal_encoding));",
          "new_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "ZEND_ASSERT",
          "new_api": "ZEND_PARSE_PARAMETERS_END",
          "old_text": "ZEND_ASSERT(ret != NULL)",
          "new_text": "ZEND_PARSE_PARAMETERS_END()",
          "old_line_content": "\tZEND_ASSERT(ret != NULL);",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "efree",
          "new_api": "mbfl_string_init",
          "old_text": "efree(ret->val)",
          "new_text": "mbfl_string_init(&result)",
          "old_line_content": "\tefree(ret->val);",
          "new_line_content": "\tmbfl_string_init(&result);",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": "ZEND_PARSE_PARAMETERS_END",
          "new_api": "ZEND_PARSE_PARAMETERS_START",
          "old_text": "ZEND_PARSE_PARAMETERS_END()",
          "new_text": "ZEND_PARSE_PARAMETERS_START(1, 3)",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 3)",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": "_ja_jp_hantozen",
          "new_api": "mb_get_encoding",
          "old_text": "_ja_jp_hantozen(&string, &result, opt);\n\tZ",
          "new_text": "mb_get_encoding(encname, 3);\n\ti",
          "old_line_content": "\tret = mbfl_ja_jp_hantozen(&string, &result, opt);",
          "new_line_content": "\tstring.encoding = php_mb_get_encoding(encname, 3);",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "PE_P",
          "new_api": "RVAL_P",
          "old_text": "PE_P(var) == ",
          "new_text": "RVAL_P(var);\n\t\t",
          "old_line_content": "\t} else if (Z_TYPE_P(var) == IS_ARRAY || Z_TYPE_P(var) == IS_OBJECT) {",
          "new_line_content": "\t\tstring.val = (unsigned char *)Z_STRVAL_P(var);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "FCOUNTED_P",
          "new_api": "RLEN_P",
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": "RLEN_P(var);\n\t\t",
          "old_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "\t\tstring.len = Z_STRLEN_P(var);",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": "_RECURSIVE_P",
          "new_api": "_encoding_detector_feed",
          "old_text": "_RECURSIVE_P(var)) {\n",
          "new_text": "_encoding_detector_feed(identd, &string)) {\n",
          "old_line_content": "\t\t\tif (Z_IS_RECURSIVE_P(var)) {",
          "new_line_content": "\t\tif (mbfl_encoding_detector_feed(identd, &string)) {",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "OTECT_RECURSION_P",
          "new_api": "FCOUNTED_P",
          "old_text": "OTECT_RECURSION_P(var);\n\t\t",
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "\t\t\tZ_PROTECT_RECURSION_P(var);",
          "new_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "PROTECT_RECURSION_P",
          "new_api": "_OF",
          "old_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "new_text": "_OF(var);\n\t\t",
          "old_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "new_line_content": "\t\tht = HASH_OF(var);",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "_HASH_FOREACH_END",
          "new_api": "FCOUNTED_P",
          "old_text": "_HASH_FOREACH_END();\n\t\t",
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": "_ptr_dtor",
          "new_api": "PE_P",
          "old_text": "_ptr_dtor(orig_var);\n\t\t",
          "new_text": "PE_P(var) == ",
          "old_line_content": "\t\t\tzval_ptr_dtor(orig_var);",
          "new_line_content": "\tif (Z_TYPE_P(var) == IS_STRING) {",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "_STRINGL",
          "new_api": "RLEN_P",
          "old_text": "_STRINGL(orig_var, (char *)ret->val, ret->len);\n\t\t",
          "new_text": "RLEN_P(var);\n\t\t",
          "old_line_content": "\t\t\tZVAL_STRINGL(orig_var, (char *)ret->val, ret->len);",
          "new_line_content": "\t\tstring.len = Z_STRLEN_P(var);",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": "e",
          "new_api": "_buffer_converter_feed_result",
          "old_text": "e(ret->val);\n\t\t",
          "new_text": "_buffer_converter_feed_result(convd, &string, &result);\n\t\t",
          "old_line_content": "\t\t\tefree(ret->val);",
          "new_line_content": "\t\tret = mbfl_buffer_converter_feed_result(convd, &string, &result);",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "PE_P",
          "new_api": "_ptr_dtor",
          "old_text": "PE_P(var) == ",
          "new_text": "_ptr_dtor(orig_var);\n\t\t",
          "old_line_content": "\t} else if (Z_TYPE_P(var) == IS_ARRAY || Z_TYPE_P(var) == IS_OBJECT) {",
          "new_line_content": "\t\t\tzval_ptr_dtor(orig_var);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "RATE_ARRAY",
          "new_api": "_STRINGL",
          "old_text": "RATE_ARRAY(var);\n\t\t",
          "new_text": "_STRINGL(orig_var, (char *)ret->val, ret->len);\n\t\t",
          "old_line_content": "\t\t\tSEPARATE_ARRAY(var);",
          "new_line_content": "\t\t\tZVAL_STRINGL(orig_var, (char *)ret->val, ret->len);",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": "_RECURSIVE_P",
          "new_api": "PE_P",
          "old_text": "_RECURSIVE_P(var)) {\n",
          "new_text": "PE_P(var) == ",
          "old_line_content": "\t\t\tif (Z_IS_RECURSIVE_P(var)) {",
          "new_line_content": "\t} else if (Z_TYPE_P(var) == IS_ARRAY || Z_TYPE_P(var) == IS_OBJECT) {",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "PROTECT_RECURSION_P",
          "new_api": "_OF",
          "old_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "new_text": "_OF(var);\n\t\t",
          "old_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "new_line_content": "\t\tht = HASH_OF(var);",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": "_HASH_FOREACH_END",
          "new_api": "FCOUNTED_P",
          "old_text": "_HASH_FOREACH_END();\n\t\t",
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": "mb_get_encoding",
          "new_api": "RAM_ARRAY_HT_OR_STR",
          "old_text": "mb_get_encoding(to_enc_str, 1);\n\ti",
          "new_text": "RAM_ARRAY_HT_OR_STR(from_enc_ht, from_enc_str)\n\t\tZ",
          "old_line_content": "\tto_encoding = php_mb_get_encoding(to_enc_str, 1);",
          "new_line_content": "\t\tZ_PARAM_ARRAY_HT_OR_STR(from_enc_ht, from_enc_str)",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": "RN_THROWS",
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": "RN_THROWS();\n\t}",
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "_string_init_set",
          "new_api": "RN_THROWS",
          "old_text": "_string_init_set(&string, from_encoding);\n\tm",
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\tmbfl_string_init_set(&string, from_encoding);",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "mb_parse_encoding_array",
          "new_api": "_string_init_set",
          "old_text": "mb_parse_encoding_array(from_enc_ht, &elist, &elistsz, 2) == ",
          "new_text": "_string_init_set(&string, from_encoding);\n\tm",
          "old_line_content": "\t\tif (php_mb_parse_encoding_array(from_enc_ht, &elist, &elistsz, 2) == FAILURE) {",
          "new_line_content": "\tmbfl_string_init_set(&string, from_encoding);",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "RN_THROWS",
          "new_api": "_string_init",
          "old_text": "RN_THROWS();\n\t\t",
          "new_text": "_string_init(&result);\n\n\t",
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\tmbfl_string_init(&result);",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": "RN_THROWS",
          "new_api": "mb_parse_encoding_array",
          "old_text": "RN_THROWS();\n\t\t",
          "new_text": "mb_parse_encoding_array(from_enc_ht, &elist, &elistsz, 2) == ",
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\t\tif (php_mb_parse_encoding_array(from_enc_ht, &elist, &elistsz, 2) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "_VOIDP",
          "new_api": "RN_THROWS",
          "old_text": "_VOIDP(elist));\n\t",
          "new_text": "RN_THROWS();\n\t\t",
          "old_line_content": "\t\tefree(ZEND_VOIDP(elist));",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "_encoding_detector_judge",
          "new_api": "ecursive_encoder_detector_feed",
          "old_text": "_encoding_detector_judge(identd);\n\t\t",
          "new_text": "ecursive_encoder_detector_feed(identd, &args[n], &recursion_error)) {\n",
          "old_line_content": "\t\t\tfrom_encoding = mbfl_encoding_detector_judge(identd);",
          "new_line_content": "\t\t\t\tif (mb_recursive_encoder_detector_feed(identd, &args[n], &recursion_error)) {",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": "RG",
          "new_api": "_buffer_converter_new",
          "old_text": "RG(current_filter_illegal_substchar));\n\n",
          "new_text": "_buffer_converter_new(from_encoding, to_encoding, 0);\n\t/",
          "old_line_content": "\tmbfl_buffer_converter_illegal_substchar(convd, MBSTRG(current_filter_illegal_substchar));",
          "new_line_content": "\tconvd = mbfl_buffer_converter_new(from_encoding, to_encoding, 0);",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": "_HASH_FOREACH_END",
          "new_api": "_emalloc",
          "old_text": "_HASH_FOREACH_END();\n\n\t",
          "new_text": "_emalloc(n_elems, sizeof(int), 0);\n\ti",
          "old_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\tint *convmap = (int *)safe_emalloc(n_elems, sizeof(int), 0);",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": "RAM_BOOL",
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": "RAM_BOOL(is_hex)\n\tZE",
          "new_text": "_PARSE_PARAMETERS_START(2, 4)\n\t\tZ",
          "old_line_content": "\t\tZ_PARAM_BOOL(is_hex)",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(2, 4)",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": "RAM_STRING",
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": "RAM_STRING(str, string.len)\n\t\tZ",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_STRING(str, string.len)",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "RN_THROWS",
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": "RN_THROWS();\n\t}",
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "_conversion_map",
          "new_api": "mb_get_encoding",
          "old_text": "_conversion_map(target_hash, &mapsize);\n\ti",
          "new_text": "mb_get_encoding(encoding, 3);\n\ti",
          "old_line_content": "\tint *convmap = make_conversion_map(target_hash, &mapsize);",
          "new_line_content": "\tstring.encoding = php_mb_get_encoding(encoding, 3);",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "_html_numeric_entity",
          "new_api": "_conversion_map",
          "old_text": "_html_numeric_entity(&string, &result, convmap, mapsize, is_hex ? 2 : 0);\n\tZ",
          "new_text": "_conversion_map(target_hash, &mapsize);\n\ti",
          "old_line_content": "\tret = mbfl_html_numeric_entity(&string, &result, convmap, mapsize, is_hex ? 2 : 0);",
          "new_line_content": "\tint *convmap = make_conversion_map(target_hash, &mapsize);",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": "e",
          "new_api": "_html_numeric_entity",
          "old_text": "e(convmap);\n}\n",
          "new_text": "_html_numeric_entity(&string, &result, convmap, mapsize, is_hex ? 2 : 0);\n\tZ",
          "old_line_content": "\tefree(convmap);",
          "new_line_content": "\tret = mbfl_html_numeric_entity(&string, &result, convmap, mapsize, is_hex ? 2 : 0);",
          "content_same": false
        },
        {
          "line": 3230,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": "_PARSE_PARAMETERS_START(2, 3)\n\t\tZ",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(2, 3)",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": "RN_THROWS",
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": "RN_THROWS();\n\t}",
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "_conversion_map",
          "new_api": "mb_get_encoding",
          "old_text": "_conversion_map(target_hash, &mapsize);\n\ti",
          "new_text": "mb_get_encoding(encoding, 3);\n\ti",
          "old_line_content": "\tint *convmap = make_conversion_map(target_hash, &mapsize);",
          "new_line_content": "\tstring.encoding = php_mb_get_encoding(encoding, 3);",
          "content_same": false
        },
        {
          "line": 3243,
          "old_api": "_html_numeric_entity",
          "new_api": "_conversion_map",
          "old_text": "_html_numeric_entity(&string, &result, convmap, mapsize, 1);\n\tZ",
          "new_text": "_conversion_map(target_hash, &mapsize);\n\ti",
          "old_line_content": "\tret = mbfl_html_numeric_entity(&string, &result, convmap, mapsize, 1);",
          "new_line_content": "\tint *convmap = make_conversion_map(target_hash, &mapsize);",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": "e",
          "new_api": "_html_numeric_entity",
          "old_text": "e((void *)convmap);\n}\n",
          "new_text": "_html_numeric_entity(&string, &result, convmap, mapsize, 1);\n\tZ",
          "old_line_content": "\tefree((void *)convmap);",
          "new_line_content": "\tret = mbfl_html_numeric_entity(&string, &result, convmap, mapsize, 1);",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "_string_release_ex",
          "new_api": "_LEN",
          "old_text": "_string_release_ex(fld_name, 0);\n\t\t",
          "new_text": "_LEN(fld_name));\n\t",
          "old_line_content": "\t\t\t\t\t\t\t\tzend_string_release_ex(fld_name, 0);",
          "new_line_content": "\t\t\t\t\t\t\t\tphp_strtoupper(ZSTR_VAL(fld_name), ZSTR_LEN(fld_name));",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "_string_release_ex",
          "new_api": "_LEN",
          "old_text": "_string_release_ex(fld_name, 0);\n\t\t",
          "new_text": "_LEN(fld_name));\n\t",
          "old_line_content": "\t\t\tzend_string_release_ex(fld_name, 0);",
          "new_line_content": "\t\t\tphp_strtoupper(ZSTR_VAL(fld_name), ZSTR_LEN(fld_name));",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": "_no2encoding",
          "old_text": "_PARSE_PARAMETERS_START(3, 5)\n\t\tZ",
          "new_text": "_no2encoding(lang->mail_charset);\n\t\t",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(3, 5)",
          "new_line_content": "\t\ttran_cs = mbfl_no2encoding(lang->mail_charset);",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "RAM_PATH",
          "new_api": "_no2encoding",
          "old_text": "RAM_PATH(to, to_len)\n\t\tZ",
          "new_text": "_no2encoding(lang->mail_header_encoding);\n\t\t",
          "old_line_content": "\t\tZ_PARAM_PATH(to, to_len)",
          "new_line_content": "\t\thead_enc = mbfl_no2encoding(lang->mail_header_encoding);",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": "RAM_PATH",
          "new_api": "_no2encoding",
          "old_text": "RAM_PATH(subject, subject_len)\n\t\tZ",
          "new_text": "_no2encoding(lang->mail_body_encoding);\n\t}",
          "old_line_content": "\t\tZ_PARAM_PATH(subject, subject_len)",
          "new_line_content": "\t\tbody_enc = mbfl_no2encoding(lang->mail_body_encoding);",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": "RAM_PATH_STR_OR_NULL",
          "new_api": "RAM_PATH",
          "old_text": "RAM_PATH_STR_OR_NULL(extra_cmd)\n\tZE",
          "new_text": "RAM_PATH(to, to_len)\n\t\tZ",
          "old_line_content": "\t\tZ_PARAM_PATH_STR_OR_NULL(extra_cmd)",
          "new_line_content": "\t\tZ_PARAM_PATH(to, to_len)",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": "RAM_PATH",
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": "RAM_PATH(subject, subject_len)\n\t\tZ",
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_PATH(subject, subject_len)",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "_argument_value_error",
          "new_api": "RAM_PATH_STR_OR_NULL",
          "old_text": "_argument_value_error(4, \"must not contain any null bytes\");\n\t\t",
          "new_text": "RAM_PATH_STR_OR_NULL(extra_cmd)\n\tZE",
          "old_line_content": "\t\t\tzend_argument_value_error(4, \"must not contain any null bytes\");",
          "new_line_content": "\t\tZ_PARAM_PATH_STR_OR_NULL(extra_cmd)",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": "RN_THROWS",
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": "RN_THROWS();\n\t\t",
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": "mail_build_headers",
          "new_api": "_argument_value_error",
          "old_text": "mail_build_headers(headers_ht);\n\t\t",
          "new_text": "_argument_value_error(4, \"must not contain any null bytes\");\n\t\t",
          "old_line_content": "\t\tstr_headers = php_mail_build_headers(headers_ht);",
          "new_line_content": "\t\t\tzend_argument_value_error(4, \"must not contain any null bytes\");",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "xception)) {",
          "new_api": "RN_THROWS",
          "old_text": "xception)) {\n",
          "new_text": "RN_THROWS();\n\t\t",
          "old_line_content": "\t\tif (EG(exception)) {",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": "_hash_init",
          "new_api": "xception)) {",
          "old_text": "_hash_init(&ht_headers, 0, NULL, ZVAL_PTR_DTOR, 0);\n\n\t",
          "new_text": "xception)) {\n",
          "old_line_content": "\tzend_hash_init(&ht_headers, 0, NULL, ZVAL_PTR_DTOR, 0);",
          "new_line_content": "\t\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": "PE_P",
          "new_api": "_hash_str_find",
          "old_text": "PE_P(s) == ",
          "new_text": "_hash_str_find(&ht_headers, \"CONTENT-TYPE\", sizeof(\"CONTENT-TYPE\") - 1))) {",
          "old_line_content": "\t\tZEND_ASSERT(Z_TYPE_P(s) == IS_STRING);",
          "new_line_content": "\tif ((s = zend_hash_str_find(&ht_headers, \"CONTENT-TYPE\", sizeof(\"CONTENT-TYPE\") - 1))) {",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": "_name2encoding",
          "new_api": "asecmp",
          "old_text": "_name2encoding(charset);\n\t\t",
          "new_text": "asecmp(param_name, \"charset\") == ",
          "old_line_content": "\t\t\t\t\t\t\t_tran_cs = mbfl_name2encoding(charset);",
          "new_line_content": "\t\t\t\t\tif (strcasecmp(param_name, \"charset\") == 0) {",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "_mime_header_encode",
          "new_api": "RG",
          "old_text": "_mime_header_encode(&orig_str, &conv_str, tran_cs, head_enc, \"\\n\", sizeof(\"Subject: [PHP-jp nnnnnnnn]\"));\n\ti",
          "new_text": "RG(current_internal_encoding);\n\ti",
          "old_line_content": "\tpstr = mbfl_mime_header_encode(&orig_str, &conv_str, tran_cs, head_enc, \"\\n\", sizeof(\"Subject: [PHP-jp nnnnnnnn]\"));",
          "new_line_content": "\torig_str.encoding = MBSTRG(current_internal_encoding);",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": "_string_release_ex",
          "new_api": "_LEN",
          "old_text": "_string_release_ex(str_headers, 0);\n\t}",
          "new_text": "_LEN(str_headers);\n\t\t",
          "old_line_content": "\t\tzend_string_release_ex(str_headers, 0);",
          "new_line_content": "\t\tn = ZSTR_LEN(str_headers);",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "_hash_str_exists",
          "new_api": "_memory_device_strncat",
          "old_text": "_hash_str_exists(&ht_headers, \"MIME-VERSION\", sizeof(\"MIME-VERSION\") - 1)) {\n",
          "new_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t\t",
          "old_line_content": "\tif (!zend_hash_str_exists(&ht_headers, \"MIME-VERSION\", sizeof(\"MIME-VERSION\") - 1)) {",
          "new_line_content": "\t\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 3640,
          "old_api": "_memory_device_strncat",
          "new_api": "_string_release_ex",
          "old_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "new_text": "_string_release_ex(str_headers, 0);\n\t}",
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "new_line_content": "\t\tzend_string_release_ex(str_headers, 0);",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "_memory_device_strcat",
          "new_api": "_memory_device_strncat",
          "old_text": "_memory_device_strcat(&device, p);\n\t\t",
          "new_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER2, sizeof(PHP_MBSTR_MAIL_MIME_HEADER2) - 1);\n\n\t",
          "old_line_content": "\t\t\tmbfl_memory_device_strcat(&device, p);",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER2, sizeof(PHP_MBSTR_MAIL_MIME_HEADER2) - 1);",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "_memory_device_strncat",
          "new_api": "_encoding_preferred_mime_name",
          "old_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "new_text": "_encoding_preferred_mime_name(tran_cs);\n\t\t",
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "new_line_content": "\t\tp = (char *)mbfl_encoding_preferred_mime_name(tran_cs);",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": "_memory_device_strncat",
          "new_api": "_memory_device_strcat",
          "old_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER4, sizeof(PHP_MBSTR_MAIL_MIME_HEADER4) - 1);\n\t\t",
          "new_text": "_memory_device_strcat(&device, p);\n\t\t",
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER4, sizeof(PHP_MBSTR_MAIL_MIME_HEADER4) - 1);",
          "new_line_content": "\t\t\tmbfl_memory_device_strcat(&device, p);",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "_memory_device_strcat",
          "new_api": "_memory_device_strncat",
          "old_text": "_memory_device_strcat(&device, p);\n\t\t",
          "new_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER4, sizeof(PHP_MBSTR_MAIL_MIME_HEADER4) - 1);\n\t\t",
          "old_line_content": "\t\tmbfl_memory_device_strcat(&device, p);",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER4, sizeof(PHP_MBSTR_MAIL_MIME_HEADER4) - 1);",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "_memory_device_strncat",
          "new_api": "_encoding_preferred_mime_name",
          "old_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "new_text": "_encoding_preferred_mime_name(body_enc);\n\t\t",
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "new_line_content": "\t\tp = (char *)mbfl_encoding_preferred_mime_name(body_enc);",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": "_memory_device_output",
          "new_api": "_memory_device_strcat",
          "old_text": "_memory_device_output('\\0', &device);\n\ts",
          "new_text": "_memory_device_strcat(&device, p);\n\t\t",
          "old_line_content": "\tmbfl_memory_device_output('\\0', &device);",
          "new_line_content": "\t\tmbfl_memory_device_strcat(&device, p);",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "en",
          "new_api": "_memory_device_strncat",
          "old_text": "en((char *)device.buffer), 0)",
          "new_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "old_line_content": "\tstr_headers = zend_string_init((char *)device.buffer, strlen((char *)device.buffer), 0);",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "escape_shell_cmd",
          "new_api": "_memory_device_unput",
          "old_text": "escape_shell_cmd(force_extra_parameters);\n\t}",
          "new_text": "_memory_device_unput(&device);\n\tm",
          "old_line_content": "\t\textra_cmd = php_escape_shell_cmd(force_extra_parameters);",
          "new_line_content": "\tmbfl_memory_device_unput(&device);",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": "_VAL",
          "new_api": "en",
          "old_text": "_VAL(extra_cmd));\n\t",
          "new_text": "en((char *)device.buffer), 0)",
          "old_line_content": "\t\textra_cmd = php_escape_shell_cmd(ZSTR_VAL(extra_cmd));",
          "new_line_content": "\tstr_headers = zend_string_init((char *)device.buffer, strlen((char *)device.buffer), 0);",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "_VAL",
          "new_api": "escape_shell_cmd",
          "old_text": "_VAL(extra_cmd) : N",
          "new_text": "escape_shell_cmd(force_extra_parameters);\n\t}",
          "old_line_content": "\tif (!err && php_mail(to_r, subject, message, ZSTR_VAL(str_headers), extra_cmd ? ZSTR_VAL(extra_cmd) : NULL)) {",
          "new_line_content": "\t\textra_cmd = php_escape_shell_cmd(force_extra_parameters);",
          "content_same": false
        },
        {
          "line": 3692,
          "old_api": "_memory_device_clear",
          "new_api": "e",
          "old_text": "_memory_device_clear(&device);\n\tz",
          "new_text": "e((void *)subject_buf);\n\t}",
          "old_line_content": "\tmbfl_memory_device_clear(&device);",
          "new_line_content": "\t\tefree((void *)subject_buf);",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "_string_release_ex",
          "new_api": "e",
          "old_text": "_string_release_ex(str_headers, 0);\n\t}",
          "new_text": "e((void *)message_buf);\n\t}",
          "old_line_content": "\t\tzend_string_release_ex(str_headers, 0);",
          "new_line_content": "\t\tefree((void *)message_buf);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "_string_equals_literal_ci",
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": "_string_equals_literal_ci(type, \"all\")) {\n",
          "new_text": "_PARSE_PARAMETERS_START(0, 1)\n\t\tZ",
          "old_line_content": "\tif (!type || zend_string_equals_literal_ci(type, \"all\")) {",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "RG",
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": "RG(current_internal_encoding)->na",
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"internal_encoding\", (char *)MBSTRG(current_internal_encoding)->name);",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(http_input_identify)) {\n",
          "new_text": "_string_equals_literal_ci(type, \"all\")) {\n",
          "old_line_content": "\t\tif (MBSTRG(http_input_identify)) {",
          "new_line_content": "\tif (!type || zend_string_equals_literal_ci(type, \"all\")) {",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": "RG",
          "new_api": "y_init",
          "old_text": "RG(http_input_identify)->na",
          "new_text": "y_init(return_value);\n\t\t",
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"http_input\", (char *)MBSTRG(http_input_identify)->name);",
          "new_line_content": "\t\tarray_init(return_value);",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "_ini_string",
          "new_api": "RG",
          "old_text": "_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) !=",
          "new_text": "RG(http_input_identify)->na",
          "old_line_content": "\t\tif ((name = (char *)zend_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) != NULL) {",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"http_input\", (char *)MBSTRG(http_input_identify)->name);",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "assoc_string",
          "new_api": "_ini_string",
          "old_text": "assoc_string(return_value, \"mail_charset\", name);\n\t\t",
          "new_text": "_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) !=",
          "old_line_content": "\t\t\t\tadd_assoc_string(return_value, \"mail_charset\", name);",
          "new_line_content": "\t\tif ((name = (char *)zend_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "_no_encoding2name",
          "new_api": "assoc_string",
          "old_text": "_no_encoding2name(lang->mail_body_encoding)) !=",
          "new_text": "assoc_string(return_value, \"mail_charset\", name);\n\t\t",
          "old_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_body_encoding)) != NULL) {",
          "new_line_content": "\t\t\t\tadd_assoc_string(return_value, \"mail_charset\", name);",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": "RG",
          "new_api": "_no_encoding2name",
          "old_text": "RG(encoding_translation)) {\n",
          "new_text": "_no_encoding2name(lang->mail_body_encoding)) !=",
          "old_line_content": "\t\tif (MBSTRG(encoding_translation)) {",
          "new_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_body_encoding)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "RG",
          "new_api": "assoc_string",
          "old_text": "RG(current_detect_order_list_size);\n\t\t",
          "new_text": "assoc_string(return_value, \"encoding_translation\", \"Off\");\n\t\t",
          "old_line_content": "\t\tn = MBSTRG(current_detect_order_list_size);",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"encoding_translation\", \"Off\");",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "next_index_string",
          "new_api": "RG",
          "old_text": "next_index_string(&row, (*entry)->name);\n\t\t",
          "new_text": "RG(current_detect_order_list);\n\t\t",
          "old_line_content": "\t\t\t\tadd_next_index_string(&row, (*entry)->name);",
          "new_line_content": "\t\tentry = MBSTRG(current_detect_order_list);",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": "assoc_zval",
          "new_api": "y_init",
          "old_text": "assoc_zval(return_value, \"detect_order\", &row);\n\t\t",
          "new_text": "y_init(&row);\n\t\t",
          "old_line_content": "\t\t\tadd_assoc_zval(return_value, \"detect_order\", &row);",
          "new_line_content": "\t\t\tarray_init(&row);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": "RG",
          "new_api": "next_index_string",
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": "next_index_string(&row, (*entry)->name);\n\t\t",
          "old_line_content": "\t\tif (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_NONE) {",
          "new_line_content": "\t\t\t\tadd_next_index_string(&row, (*entry)->name);",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "assoc_string",
          "new_api": "assoc_zval",
          "old_text": "assoc_string(return_value, \"substitute_character\", \"long\");\n\t\t",
          "new_text": "assoc_zval(return_value, \"detect_order\", &row);\n\t\t",
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"substitute_character\", \"long\");",
          "new_line_content": "\t\t\tadd_assoc_zval(return_value, \"detect_order\", &row);",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": "assoc_string",
          "new_api": "RG",
          "old_text": "assoc_string(return_value, \"substitute_character\", \"entity\");\n\t\t",
          "new_text": "RG(current_filter_illegal_mode) == ",
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"substitute_character\", \"entity\");",
          "new_line_content": "\t\tif (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_NONE) {",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": "assoc_string",
          "new_api": "RG",
          "old_text": "assoc_string(return_value, \"strict_detection\", \"Off\");\n\t\t",
          "new_text": "RG(current_filter_illegal_substchar));\n\t",
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"strict_detection\", \"Off\");",
          "new_line_content": "\t\t\tadd_assoc_long(return_value, \"substitute_character\", MBSTRG(current_filter_illegal_substchar));",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "_string_equals_literal_ci",
          "new_api": "RG",
          "old_text": "_string_equals_literal_ci(type, \"internal_encoding\")) {\n",
          "new_text": "RG(strict_detection)) {\n",
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"internal_encoding\")) {",
          "new_line_content": "\t\tif (MBSTRG(strict_detection)) {",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "RG",
          "new_api": "assoc_string",
          "old_text": "RG(current_internal_encoding)) {\n",
          "new_text": "assoc_string(return_value, \"strict_detection\", \"On\");\n\t\t",
          "old_line_content": "\t\tif (MBSTRG(current_internal_encoding)) {",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"strict_detection\", \"On\");",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(http_input_identify)) {\n",
          "new_text": "_string_equals_literal_ci(type, \"internal_encoding\")) {\n",
          "old_line_content": "\t\tif (MBSTRG(http_input_identify)) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"internal_encoding\")) {",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(current_http_output_encoding)) {\n",
          "new_text": "_string_equals_literal_ci(type, \"http_input\")) {\n",
          "old_line_content": "\t\tif (MBSTRG(current_http_output_encoding)) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_input\")) {",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "_ini_string",
          "new_api": "_string_equals_literal_ci",
          "old_text": "_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) !=",
          "new_text": "_string_equals_literal_ci(type, \"http_output\")) {\n",
          "old_line_content": "\t\tif ((name = (char *)zend_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) != NULL) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_output\")) {",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "AL_STRING",
          "new_api": "RG",
          "old_text": "AL_STRING(name);\n\t\t",
          "new_text": "RG(current_http_output_encoding)) {\n",
          "old_line_content": "\t\t\tRETVAL_STRING(name);",
          "new_line_content": "\t\tif (MBSTRG(current_http_output_encoding)) {",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "_no_encoding2name",
          "new_api": "_string_equals_literal_ci",
          "old_text": "_no_encoding2name(lang->mail_charset)) !=",
          "new_text": "_string_equals_literal_ci(type, \"http_output_conv_mimetypes\")) {\n",
          "old_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_charset)) != NULL) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_output_conv_mimetypes\")) {",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "AL_STRING",
          "new_api": "_ini_string",
          "old_text": "AL_STRING(name);\n\t\t",
          "new_text": "_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) !=",
          "old_line_content": "\t\t\tRETVAL_STRING(name);",
          "new_line_content": "\t\tif ((name = (char *)zend_ini_string(\"mbstring.http_output_conv_mimetypes\", sizeof(\"mbstring.http_output_conv_mimetypes\") - 1, 0)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "_no_encoding2name",
          "new_api": "_string_equals_literal_ci",
          "old_text": "_no_encoding2name(lang->mail_header_encoding)) !=",
          "new_text": "_string_equals_literal_ci(type, \"mail_charset\")) {\n",
          "old_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_header_encoding)) != NULL) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_charset\")) {",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "AL_STRING",
          "new_api": "_no_encoding2name",
          "old_text": "AL_STRING(name);\n\t\t",
          "new_text": "_no_encoding2name(lang->mail_charset)) !=",
          "old_line_content": "\t\t\tRETVAL_STRING(name);",
          "new_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_charset)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "_no_encoding2name",
          "new_api": "_string_equals_literal_ci",
          "old_text": "_no_encoding2name(lang->mail_body_encoding)) !=",
          "new_text": "_string_equals_literal_ci(type, \"mail_header_encoding\")) {\n",
          "old_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_body_encoding)) != NULL) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_header_encoding\")) {",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "AL_STRING",
          "new_api": "_no_encoding2name",
          "old_text": "AL_STRING(name);\n\t\t",
          "new_text": "_no_encoding2name(lang->mail_header_encoding)) !=",
          "old_line_content": "\t\t\tRETVAL_STRING(name);",
          "new_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_header_encoding)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(illegalchars));\n\t",
          "new_text": "_string_equals_literal_ci(type, \"mail_body_encoding\")) {\n",
          "old_line_content": "\t\tRETVAL_LONG(MBSTRG(illegalchars));",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_body_encoding\")) {",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "_string_equals_literal_ci",
          "new_api": "_no_encoding2name",
          "old_text": "_string_equals_literal_ci(type, \"encoding_translation\")) {\n",
          "new_text": "_no_encoding2name(lang->mail_body_encoding)) !=",
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"encoding_translation\")) {",
          "new_line_content": "\t\tif (lang != NULL && (name = (char *)mbfl_no_encoding2name(lang->mail_body_encoding)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "RG",
          "new_api": "AL_STRING",
          "old_text": "RG(encoding_translation)) {\n",
          "new_text": "AL_STRING(name);\n\t\t",
          "old_line_content": "\t\tif (MBSTRG(encoding_translation)) {",
          "new_line_content": "\t\t\tRETVAL_STRING(name);",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": "AL_STRING",
          "new_api": "RG",
          "old_text": "AL_STRING(\"Off\");\n\t\t",
          "new_text": "RG(illegalchars));\n\t",
          "old_line_content": "\t\t\tRETVAL_STRING(\"Off\");",
          "new_line_content": "\t\tRETVAL_LONG(MBSTRG(illegalchars));",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": "_string_equals_literal_ci",
          "new_api": "RG",
          "old_text": "_string_equals_literal_ci(type, \"language\")) {\n",
          "new_text": "RG(encoding_translation)) {\n",
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"language\")) {",
          "new_line_content": "\t\tif (MBSTRG(encoding_translation)) {",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "RG",
          "new_api": "AL_STRING",
          "old_text": "RG(language))) !",
          "new_text": "AL_STRING(\"On\");\n\t\t",
          "old_line_content": "\t\tif ((name = (char *)mbfl_no_language2name(MBSTRG(language))) != NULL) {",
          "new_line_content": "\t\t\tRETVAL_STRING(\"On\");",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(current_detect_order_list_size);\n\t\t",
          "new_text": "_string_equals_literal_ci(type, \"language\")) {\n",
          "old_line_content": "\t\tn = MBSTRG(current_detect_order_list_size);",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"language\")) {",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "y_init",
          "new_api": "_string_equals_literal_ci",
          "old_text": "y_init(return_value);\n\t\t",
          "new_text": "_string_equals_literal_ci(type, \"detect_order\")) {\n",
          "old_line_content": "\t\t\tarray_init(return_value);",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"detect_order\")) {",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "next_index_string",
          "new_api": "RG",
          "old_text": "next_index_string(return_value, (*entry)->name);\n\t\t",
          "new_text": "RG(current_detect_order_list);\n\t\t",
          "old_line_content": "\t\t\t\tadd_next_index_string(return_value, (*entry)->name);",
          "new_line_content": "\t\tentry = MBSTRG(current_detect_order_list);",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": "RG",
          "new_api": "next_index_string",
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": "next_index_string(return_value, (*entry)->name);\n\t\t",
          "old_line_content": "\t\tif (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_NONE) {",
          "new_line_content": "\t\t\t\tadd_next_index_string(return_value, (*entry)->name);",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "RG",
          "new_api": "_string_equals_literal_ci",
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": "_string_equals_literal_ci(type, \"substitute_character\")) {\n",
          "old_line_content": "\t\t} else if (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_ENTITY) {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"substitute_character\")) {",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "AL_STRING",
          "new_api": "RG",
          "old_text": "AL_STRING(\"entity\");\n\t\t",
          "new_text": "RG(current_filter_illegal_mode) == ",
          "old_line_content": "\t\t\tRETVAL_STRING(\"entity\");",
          "new_line_content": "\t\tif (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_NONE) {",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "_string_equals_literal_ci",
          "new_api": "RG",
          "old_text": "_string_equals_literal_ci(type, \"strict_detection\")) {\n",
          "new_text": "RG(current_filter_illegal_mode) == ",
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"strict_detection\")) {",
          "new_line_content": "\t\t} else if (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_ENTITY) {",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "RG",
          "new_api": "AL_STRING",
          "old_text": "RG(strict_detection)) {\n",
          "new_text": "AL_STRING(\"entity\");\n\t\t",
          "old_line_content": "\t\tif (MBSTRG(strict_detection)) {",
          "new_line_content": "\t\t\tRETVAL_STRING(\"entity\");",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "er->filter_flush)(filter);\n\ti",
          "new_api": "_convert_filter_delete",
          "old_text": "er->filter_flush)(filter);\n\ti",
          "new_text": "_convert_filter_delete(filter);\n\t\t",
          "old_line_content": "\t(filter->filter_flush)(filter);",
          "new_line_content": "\t\t\tmbfl_convert_filter_delete(filter);",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "_DEREF",
          "new_api": "error_docref",
          "old_text": "_DEREF(entry);\n\t\t",
          "new_text": "error_docref(NULL, E_WARNING, \"Cannot not handle circular references\");\n\t\t",
          "old_line_content": "\t\tZVAL_DEREF(entry);",
          "new_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"Cannot not handle circular references\");",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "PE_P",
          "new_api": "_LEN",
          "old_text": "PE_P(entry)) {\n",
          "new_text": "_LEN(key), en",
          "old_line_content": "\t\tswitch (Z_TYPE_P(entry)) {",
          "new_line_content": "\t\t\tif (!php_mb_check_encoding(ZSTR_VAL(key), ZSTR_LEN(key), encoding)) {",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": "RN_THROWS",
          "new_api": "RAM_STR_OR_NULL",
          "old_text": "RN_THROWS();\n\t}",
          "new_text": "RAM_STR_OR_NULL(enc)\n\tZE",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZ_PARAM_STR_OR_NULL(enc)",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "_convert_filter_feed_string",
          "new_api": "_wchar_device_init",
          "old_text": "_convert_filter_feed_string(filter, (unsigned char*)str, str_len);\n\t\t",
          "new_text": "_wchar_device_init(&dev);\n\t\t",
          "old_line_content": "\t\tmbfl_convert_filter_feed_string(filter, (unsigned char*)str, str_len);",
          "new_line_content": "\t\tmbfl_wchar_device_init(&dev);",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": "_convert_filter_flush",
          "new_api": "_convert_filter_new",
          "old_text": "_convert_filter_flush(filter);\n\n\t",
          "new_text": "_convert_filter_new(enc, &mbfl_encoding_wchar, mbfl_wchar_device_output, 0, &dev);\n\t\t",
          "old_line_content": "\t\tmbfl_convert_filter_flush(filter);",
          "new_line_content": "\t\tfilter = mbfl_convert_filter_new(enc, &mbfl_encoding_wchar, mbfl_wchar_device_output, 0, &dev);",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "RN_LONG",
          "new_api": "RN_THROWS",
          "old_text": "RN_LONG(cp);\n}\n",
          "new_text": "RN_THROWS();\n\t\t",
          "old_line_content": "\tRETURN_LONG(cp);",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": "_VAL",
          "new_api": "_CHAR",
          "old_text": "_VAL(ret)[2] ",
          "new_text": "_CHAR(cp);\n\t\t",
          "old_line_content": "\t\t\tZSTR_VAL(ret)[2] = 0;",
          "new_line_content": "\t\t\tret = ZSTR_CHAR(cp);",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "_string_alloc",
          "new_api": "_VAL",
          "old_text": "_string_alloc(4, 0);\n\t\t",
          "new_text": "_VAL(ret)[0] ",
          "old_line_content": "\t\t\tret = zend_string_alloc(4, 0);",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[0] = 0xe0 | (cp >> 12);",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "_VAL",
          "new_api": "_string_alloc",
          "old_text": "_VAL(ret)[4] ",
          "new_text": "_string_alloc(4, 0);\n\t\t",
          "old_line_content": "\t\t\tZSTR_VAL(ret)[4] = 0;",
          "new_line_content": "\t\t\tret = zend_string_alloc(4, 0);",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "e",
          "new_api": "RG",
          "old_text": "e(ret_str);\n\t\t",
          "new_text": "RG(illegalchars);\n\tM",
          "old_line_content": "\t\tefree(ret_str);",
          "new_line_content": "\tlong orig_illegalchars = MBSTRG(illegalchars);",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "_string_init",
          "new_api": "e",
          "old_text": "_string_init(ret_str, ret_len, 0);\n\te",
          "new_text": "e(ret_str);\n\t\t",
          "old_line_content": "\tret = zend_string_init(ret_str, ret_len, 0);",
          "new_line_content": "\t\tefree(ret_str);",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "e",
          "new_api": "RG",
          "old_text": "e(ret_str);\n\tM",
          "new_text": "RG(illegalchars) = o",
          "old_line_content": "\tefree(ret_str);",
          "new_line_content": "\t\tMBSTRG(illegalchars) = orig_illegalchars;",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "mb_chr",
          "new_api": "RAM_LONG",
          "old_text": "mb_chr(cp, enc, 2);\n\ti",
          "new_text": "RAM_LONG(cp)\n\t\tZ",
          "old_line_content": "\tzend_string* ret = php_mb_chr(cp, enc, 2);",
          "new_line_content": "\t\tZ_PARAM_LONG(cp)",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "RN_STR",
          "new_api": "mb_chr",
          "old_text": "RN_STR(ret);\n}\n",
          "new_text": "mb_chr(cp, enc, 2);\n\ti",
          "old_line_content": "\tRETURN_STR(ret);",
          "new_line_content": "\tzend_string* ret = php_mb_chr(cp, enc, 2);",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "mb_get_encoding",
          "new_api": "RAM_STRING",
          "old_text": "mb_get_encoding(enc_name, 2);\n\ti",
          "new_text": "RAM_STRING(str, str_len)\n\t\tZ",
          "old_line_content": "\tconst mbfl_encoding *enc = php_mb_get_encoding(enc_name, 2);",
          "new_line_content": "\t\tZ_PARAM_STRING(str, str_len)",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "RG",
          "new_api": "_emalloc",
          "old_text": "RG(default_detect_order_list_size);\n\t\t",
          "new_text": "_emalloc(nentries, sizeof(mbfl_encoding*), 0);\n\t\t",
          "old_line_content": "\t\tnentries = MBSTRG(default_detect_order_list_size);",
          "new_line_content": "\t\tentry = (const mbfl_encoding **)safe_emalloc(nentries, sizeof(mbfl_encoding*), 0);",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "_emalloc",
          "new_api": "RG",
          "old_text": "_emalloc(nentries, sizeof(mbfl_encoding*), 0);\n\t\t",
          "new_text": "RG(detect_order_list), si",
          "old_line_content": "\t\tentry = (const mbfl_encoding **)safe_emalloc(nentries, sizeof(mbfl_encoding*), 0);",
          "new_line_content": "\t\tmemcpy(ZEND_VOIDP(entry), MBSTRG(detect_order_list), sizeof(mbfl_encoding*) * nentries);",
          "content_same": false
        },
        {
          "line": 4194,
          "old_api": "_no2encoding",
          "new_api": "RG",
          "old_text": "_no2encoding(src[i]);\n\t\t",
          "new_text": "RG(default_detect_order_list);\n\t\t",
          "old_line_content": "\t\t\tentry[i] = mbfl_no2encoding(src[i]);",
          "new_line_content": "\t\tconst enum mbfl_no_encoding *src = MBSTRG(default_detect_order_list);",
          "content_same": false
        },
        {
          "line": 4197,
          "old_api": "RG",
          "new_api": "_emalloc",
          "old_text": "RG(current_detect_order_list) = e",
          "new_text": "_emalloc(nentries, sizeof(mbfl_encoding*), 0);\n\t\t",
          "old_line_content": "\tMBSTRG(current_detect_order_list) = entry;",
          "new_line_content": "\t\tentry = (const mbfl_encoding **)safe_emalloc(nentries, sizeof(mbfl_encoding*), 0);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4096,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(ret)[4] ",
          "old_line_content": "",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[4] = 0;",
          "content_same": false
        },
        {
          "line": 3074,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_internal_encoding);\n\tm",
          "old_line_content": "\tif (from_enc_ht) {",
          "new_line_content": "\tfrom_encoding = MBSTRG(current_internal_encoding);",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": null,
          "new_api": "loc",
          "old_text": null,
          "new_text": "loc(buf_len + 1);\n\tb",
          "old_line_content": "\tbuf[4] = 0;",
          "new_line_content": "\tbuf = (char *) emalloc(buf_len + 1);",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": null,
          "new_api": "_LEN",
          "old_text": null,
          "new_text": "_LEN(from_enc_str), &e",
          "old_line_content": "\tif (elistsz == 0) {",
          "new_line_content": "\t\tif (php_mb_parse_encoding_list(ZSTR_VAL(from_enc_str), ZSTR_LEN(from_enc_str), &elist, &elistsz, /* persistent */ 0, /* arg_num */ 2, /* allow_pass_encoding */ 0) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(strict_detection));\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\torig_str.encoding = mbfl_identify_encoding(&orig_str, MBSTRG(current_detect_order_list), MBSTRG(current_detect_order_list_size), MBSTRG(strict_detection));",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "_mime_header_encode",
          "old_text": null,
          "new_text": "_mime_header_encode(&orig_str, &conv_str, tran_cs, head_enc, \"\\n\", sizeof(\"Subject: [PHP-jp nnnnnnnn]\"));\n\ti",
          "old_line_content": "\t/* message body */",
          "new_line_content": "\tpstr = mbfl_mime_header_encode(&orig_str, &conv_str, tran_cs, head_enc, \"\\n\", sizeof(\"Subject: [PHP-jp nnnnnnnn]\"));",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": null,
          "new_api": "mb_convert_encoding_ex",
          "old_text": null,
          "new_text": "mb_convert_encoding_ex(buf, buf_len, enc, &mbfl_encoding_ucs4be, &ret_len);\n\ti",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tret_str = php_mb_convert_encoding_ex(buf, buf_len, enc, &mbfl_encoding_ucs4be, &ret_len);",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(illegalchars) != ",
          "old_line_content": "\t}",
          "new_line_content": "\tif (MBSTRG(illegalchars) != 0) {",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(buf);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\tefree(buf);",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "_VOIDP",
          "old_text": null,
          "new_text": "_VOIDP(elist));\n\t",
          "old_line_content": "\tif (elistsz == 1) {",
          "new_line_content": "\t\tefree(ZEND_VOIDP(elist));",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": null,
          "new_api": "_argument_value_error",
          "old_text": null,
          "new_text": "_argument_value_error(2, \"must specify at least one encoding\");\n\t\t",
          "old_line_content": "\t\tfrom_encoding = *elist;",
          "new_line_content": "\t\tzend_argument_value_error(2, \"must specify at least one encoding\");",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_internal_encoding);\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\torig_str.encoding = MBSTRG(current_internal_encoding);",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(ret_str, ret_len, 0);\n\te",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tret = zend_string_init(ret_str, ret_len, 0);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret_str);\n\tM",
          "old_line_content": "}",
          "new_line_content": "\tefree(ret_str);",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(illegalchars) = o",
          "old_line_content": "",
          "new_line_content": "\tMBSTRG(illegalchars) = orig_illegalchars;",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(strict_detection));\n\t",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\tidentd = mbfl_encoding_detector_new(elist, elistsz, MBSTRG(strict_detection));",
          "content_same": false
        },
        {
          "line": 4126,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(buf);\n\tr",
          "old_line_content": "/* {{{ */",
          "new_line_content": "\tefree(buf);",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(strict_detection));\n\t",
          "old_line_content": "\t\tmbfl_string tmpstr;",
          "new_line_content": "\t\torig_str.encoding = mbfl_identify_encoding(&orig_str, MBSTRG(current_detect_order_list), MBSTRG(current_detect_order_list_size), MBSTRG(strict_detection));",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": null,
          "new_api": "_convert_encoding",
          "old_text": null,
          "new_text": "_convert_encoding(&orig_str, &tmpstr, tran_cs) != ",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (mbfl_convert_encoding(&orig_str, &tmpstr, tran_cs) != NULL) {",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": null,
          "new_api": "_convert_encoding",
          "old_text": null,
          "new_text": "_convert_encoding(&tmpstr, &conv_str, body_enc);\n\t\t",
          "old_line_content": "\t\tmessage_buf = message = (char *)pstr->val;",
          "new_line_content": "\t\t\tpstr = mbfl_convert_encoding(&tmpstr, &conv_str, body_enc);",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "_encoding_detector_judge",
          "old_text": null,
          "new_text": "_encoding_detector_judge(identd);\n\t\t",
          "old_line_content": "\t\t\t\tRETURN_FALSE;",
          "new_line_content": "\t\t\tfrom_encoding = mbfl_encoding_detector_judge(identd);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "_encoding_detector_delete",
          "old_text": null,
          "new_text": "_encoding_detector_delete(identd);\n\t\t",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tmbfl_encoding_detector_delete(identd);",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(tmpstr.val);\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tefree(tmpstr.val);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": null,
          "new_api": "_VOIDP",
          "old_text": null,
          "new_text": "_VOIDP(elist));\n\t",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tefree(ZEND_VOIDP(elist));",
          "content_same": false
        },
        {
          "line": 4137,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "error_docref",
          "old_text": null,
          "new_text": "error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");\n\t\t",
          "old_line_content": "\t\tif (!from_encoding) {",
          "new_line_content": "\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "error_docref",
          "old_text": null,
          "new_text": "error_docref(NULL, E_WARNING, \"Unable to detect encoding\");\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\t\tphp_error_docref(NULL, E_WARNING, \"Unable to detect encoding\");",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(str_headers);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tp = ZSTR_VAL(str_headers);",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": null,
          "new_api": "RN_STR",
          "old_text": null,
          "new_text": "RN_STR(ret);\n}\n",
          "old_line_content": "PHP_FUNCTION(mb_scrub)",
          "new_line_content": "\tRETURN_STR(ret);",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": null,
          "new_api": "_VOIDP",
          "old_text": null,
          "new_text": "_VOIDP(elist));\n\n",
          "old_line_content": "",
          "new_line_content": "\tefree(ZEND_VOIDP(elist));",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": null,
          "new_api": "_memory_device_strncat",
          "old_text": null,
          "new_text": "_memory_device_strncat(&device, p, n);\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, p, n);",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(convd != NULL);\n\n\t",
          "old_line_content": "\t/* convert */",
          "new_line_content": "\tZEND_ASSERT(convd != NULL);",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_filter_illegal_mode));\n\t",
          "old_line_content": "\twhile (n < argc) {",
          "new_line_content": "\tmbfl_buffer_converter_illegal_mode(convd, MBSTRG(current_filter_illegal_mode));",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_filter_illegal_substchar));\n\n",
          "old_line_content": "\t\tzval *zv = &args[n];",
          "new_line_content": "\tmbfl_buffer_converter_illegal_substchar(convd, MBSTRG(current_filter_illegal_substchar));",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "_hash_str_exists",
          "old_text": null,
          "new_text": "_hash_str_exists(&ht_headers, \"MIME-VERSION\", sizeof(\"MIME-VERSION\") - 1)) {\n",
          "old_line_content": "\tif (!suppressed_hdrs.cnt_type) {",
          "new_line_content": "\tif (!zend_hash_str_exists(&ht_headers, \"MIME-VERSION\", sizeof(\"MIME-VERSION\") - 1)) {",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "_memory_device_strncat",
          "old_text": null,
          "new_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "old_line_content": "",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "_DEREF",
          "old_text": null,
          "new_text": "_DEREF(zv);\n\t\t",
          "old_line_content": "\t\tn++;",
          "new_line_content": "\t\tZVAL_DEREF(zv);",
          "content_same": false
        },
        {
          "line": 4165,
          "old_api": null,
          "new_api": "mb_get_encoding",
          "old_text": null,
          "new_text": "mb_get_encoding(enc_name, 2);\n\ti",
          "old_line_content": "\tsize_t ret_len;",
          "new_line_content": "\tconst mbfl_encoding *enc = php_mb_get_encoding(enc_name, 2);",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": null,
          "new_api": "ecursive_convert_variable",
          "old_text": null,
          "new_text": "ecursive_convert_variable(convd, zv);\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\trecursion_error = mb_recursive_convert_variable(convd, zv);",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": null,
          "new_api": "_memory_device_strncat",
          "old_text": null,
          "new_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER3, sizeof(PHP_MBSTR_MAIL_MIME_HEADER3) - 1);\n\t\t",
          "old_line_content": "\tif (!suppressed_hdrs.cnt_trans_enc) {",
          "new_line_content": "\t\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER3, sizeof(PHP_MBSTR_MAIL_MIME_HEADER3) - 1);",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": null,
          "new_api": "_memory_device_strncat",
          "old_text": null,
          "new_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t}",
          "old_line_content": "\t\tif (p == NULL) {",
          "new_line_content": "\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": null,
          "new_api": "mb_convert_encoding_ex",
          "old_text": null,
          "new_text": "mb_convert_encoding_ex(str, str_len, enc, enc, &ret_len);\n\n\t",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tchar *ret = php_mb_convert_encoding_ex(str, str_len, enc, enc, &ret_len);",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": null,
          "new_api": "_buffer_illegalchars",
          "old_text": null,
          "new_text": "_buffer_illegalchars(convd);\n\tm",
          "old_line_content": "\t\tRETURN_FALSE;",
          "new_line_content": "\tMBSTRG(illegalchars) += mbfl_buffer_illegalchars(convd);",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": null,
          "new_api": "AL_STRINGL",
          "old_text": null,
          "new_text": "AL_STRINGL(ret, ret_len);\n\te",
          "old_line_content": "",
          "new_line_content": "\tRETVAL_STRINGL(ret, ret_len);",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret);\n}\n",
          "old_line_content": "/* {{{ php_mb_populate_current_detect_order_list */",
          "new_line_content": "\tefree(ret);",
          "content_same": false
        },
        {
          "line": 3148,
          "old_api": null,
          "new_api": "_buffer_converter_delete",
          "old_text": null,
          "new_text": "_buffer_converter_delete(convd);\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tmbfl_buffer_converter_delete(convd);",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "error_docref",
          "old_text": null,
          "new_text": "error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");\n\t\t",
          "old_line_content": "}",
          "new_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");",
          "content_same": false
        },
        {
          "line": 3155,
          "old_api": null,
          "new_api": "RN_STRING",
          "old_text": null,
          "new_text": "RN_STRING(from_encoding->name);\n}\n",
          "old_line_content": "",
          "new_line_content": "\tRETURN_STRING(from_encoding->name);",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": null,
          "new_api": "_memory_device_output",
          "old_text": null,
          "new_text": "_memory_device_output('\\0', &device);\n\ts",
          "old_line_content": "\t} else if (extra_cmd) {",
          "new_line_content": "\tmbfl_memory_device_output('\\0', &device);",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(extra_cmd));\n\t",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\textra_cmd = php_escape_shell_cmd(ZSTR_VAL(extra_cmd));",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(detect_order_list_size);\n\t\t",
          "old_line_content": "\t\tsize_t i;",
          "new_line_content": "\t\tnentries = MBSTRG(detect_order_list_size);",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "_hash_num_elements",
          "old_text": null,
          "new_text": "_hash_num_elements(target_hash);\n\ti",
          "old_line_content": "",
          "new_line_content": "\tint n_elems = zend_hash_num_elements(target_hash);",
          "content_same": false
        },
        {
          "line": 3168,
          "old_api": null,
          "new_api": "_argument_value_error",
          "old_text": null,
          "new_text": "_argument_value_error(2, \"must have a multiple of 4 elements\");\n\t\t",
          "old_line_content": "\tint *mapelm = convmap;",
          "new_line_content": "\t\tzend_argument_value_error(2, \"must have a multiple of 4 elements\");",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(extra_cmd) : N",
          "old_line_content": "",
          "new_line_content": "\tif (!err && php_mail(to_r, subject, message, ZSTR_VAL(str_headers), extra_cmd ? ZSTR_VAL(extra_cmd) : NULL)) {",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(default_detect_order_list_size);\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\tnentries = MBSTRG(default_detect_order_list_size);",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": null,
          "new_api": "_string_release_ex",
          "old_text": null,
          "new_text": "_string_release_ex(extra_cmd, 0);\n\t}",
          "old_line_content": "\t}",
          "new_line_content": "\t\tzend_string_release_ex(extra_cmd, 0);",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": null,
          "new_api": "_no2encoding",
          "old_text": null,
          "new_text": "_no2encoding(src[i]);\n\t\t",
          "old_line_content": "}",
          "new_line_content": "\t\t\tentry[i] = mbfl_no2encoding(src[i]);",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": null,
          "new_api": "_get_long",
          "old_text": null,
          "new_text": "_get_long(hash_entry);\n\t}",
          "old_line_content": "}",
          "new_line_content": "\t\t*mapelm++ = zval_get_long(hash_entry);",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": null,
          "new_api": "_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "_HASH_FOREACH_END();\n\n\t",
          "old_line_content": "",
          "new_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_detect_order_list) = e",
          "old_line_content": "/* {{{ static int php_mb_encoding_translation() */",
          "new_line_content": "\tMBSTRG(current_detect_order_list) = entry;",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_detect_order_list_size) = n",
          "old_line_content": "static int php_mb_encoding_translation(void)",
          "new_line_content": "\tMBSTRG(current_detect_order_list_size) = nentries;",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(to_r);\n\t}",
          "old_line_content": "\tif (message_buf) {",
          "new_line_content": "\t\tefree(to_r);",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(ret)[0] ",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[0] = 0xf0 | (cp >> 18);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": null,
          "new_api": "_memory_device_clear",
          "old_text": null,
          "new_text": "_memory_device_clear(&device);\n\tz",
          "old_line_content": "}",
          "new_line_content": "\tmbfl_memory_device_clear(&device);",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(encoding_translation);\n}\n",
          "old_line_content": "MBSTRING_API size_t php_mb_mbchar_bytes_ex(const char *s, const mbfl_encoding *enc)",
          "new_line_content": "\treturn MBSTRG(encoding_translation);",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": null,
          "new_api": "_hash_destroy",
          "old_text": null,
          "new_text": "_hash_destroy(&ht_headers);\n\ti",
          "old_line_content": "",
          "new_line_content": "\tzend_hash_destroy(&ht_headers);",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "_string_release_ex",
          "old_text": null,
          "new_text": "_string_release_ex(str_headers, 0);\n\t}",
          "old_line_content": "#undef MAIL_ASCIIZ_CHECK_MBSTRING",
          "new_line_content": "\t\tzend_string_release_ex(str_headers, 0);",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": null,
          "new_api": "RAM_ARRAY_HT",
          "old_text": null,
          "new_text": "RAM_ARRAY_HT(target_hash)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\t\tZ_PARAM_ARRAY_HT(target_hash)",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(ret)[3] ",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[3] = 0x80 | (cp & 0x3f);",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": null,
          "new_api": "RAM_BOOL",
          "old_text": null,
          "new_text": "RAM_BOOL(is_hex)\n\tZE",
          "old_line_content": "\tif (!string.encoding) {",
          "new_line_content": "\t\tZ_PARAM_BOOL(is_hex)",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(language));\n\t",
          "old_line_content": "\t\tZ_PARAM_STR(type)",
          "new_line_content": "\tconst mbfl_language *lang = mbfl_no2language(MBSTRG(language));",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\t// TODO: avoid reallocation ???",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(internal_encoding));\n}",
          "old_line_content": "MBSTRING_API char *php_mb_safe_strrchr_ex(const char *s, unsigned int c, size_t nbytes, const mbfl_encoding *enc)",
          "new_line_content": "\treturn php_mb_mbchar_bytes_ex(s, MBSTRG(internal_encoding));",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(ret != NULL);\n\t/",
          "old_line_content": "}",
          "new_line_content": "\tZEND_ASSERT(ret != NULL);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "AL_STRINGL",
          "old_text": null,
          "new_text": "AL_STRINGL((char *)ret->val, ret->len);\n\te",
          "old_line_content": "",
          "new_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret->val);\n\te",
          "old_line_content": "/* {{{ Converts HTML numeric entities to character code */",
          "new_line_content": "\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(convmap);\n}\n",
          "old_line_content": "PHP_FUNCTION(mb_decode_numericentity)",
          "new_line_content": "\tefree(convmap);",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_internal_encoding)) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (MBSTRG(current_internal_encoding)) {",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(http_input_identify)) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (MBSTRG(http_input_identify)) {",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_http_output_encoding)) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (MBSTRG(current_http_output_encoding)) {",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_http_output_encoding)->na",
          "old_line_content": "\t\tif (lang != NULL) {",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"http_output\", (char *)MBSTRG(current_http_output_encoding)->name);",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"http_output_conv_mimetypes\", name);\n\t\t",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"http_output_conv_mimetypes\", name);",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": null,
          "new_api": "mb_mbchar_bytes_ex",
          "old_text": null,
          "new_text": "mb_mbchar_bytes_ex(p, enc);\n\t\t",
          "old_line_content": "\t\t\t--nb;",
          "new_line_content": "\t\t\t\tnb = php_mb_mbchar_bytes_ex(p, enc);",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": null,
          "new_api": "php_mb_check_encoding",
          "old_text": null,
          "new_text": "php_mb_check_encoding(str, str_len, *elist)",
          "old_line_content": "\tstring.len = str_len;",
          "new_line_content": "\t\tret = (php_mb_check_encoding(str, str_len, *elist)) ? *elist : NULL;",
          "content_same": false
        },
        {
          "line": 3231,
          "old_api": null,
          "new_api": "RAM_STRING",
          "old_text": null,
          "new_text": "RAM_STRING(str, string.len)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\t\tZ_PARAM_STRING(str, string.len)",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": null,
          "new_api": "mbfl_string_init",
          "old_text": null,
          "new_text": "mbfl_string_init(&string)",
          "old_line_content": "",
          "new_line_content": "\t\tmbfl_string_init(&string);",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": null,
          "new_api": "RAM_ARRAY_HT",
          "old_text": null,
          "new_text": "RAM_ARRAY_HT(target_hash)\n\t\tZ",
          "old_line_content": "\tstring.val = (unsigned char *)str;",
          "new_line_content": "\t\tZ_PARAM_ARRAY_HT(target_hash)",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": null,
          "new_api": "_no_encoding2name",
          "old_text": null,
          "new_text": "_no_encoding2name(lang->mail_charset)) !=",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_charset)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": null,
          "new_api": "mbfl_identify_encoding",
          "old_text": null,
          "new_text": "mbfl_identify_encoding(&string, elist, size, strict)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tret = mbfl_identify_encoding(&string, elist, size, strict);",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "_no_encoding2name",
          "old_text": null,
          "new_text": "_no_encoding2name(lang->mail_header_encoding)) !=",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_header_encoding)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"mail_header_encoding\", name);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tadd_assoc_string(return_value, \"mail_header_encoding\", name);",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": null,
          "new_api": "ZEND_VOIDP",
          "old_text": null,
          "new_text": "ZEND_VOIDP(elist)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tefree(ZEND_VOIDP(elist));",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(illegalchars));\n\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tadd_assoc_long(return_value, \"illegal_chars\", MBSTRG(illegalchars));",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "mb_mbchar_bytes_ex",
          "old_text": null,
          "new_text": "mb_mbchar_bytes_ex(p, enc);\n\t\t",
          "old_line_content": "\t\t\tbcnt -= nbytes_char;",
          "new_line_content": "\t\t\tnbytes_char = php_mb_mbchar_bytes_ex(p, enc);",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\t// TODO: avoid reallocation ???",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "RETVAL_STRING",
          "old_text": null,
          "new_text": "RETVAL_STRING((char *)ret->name)",
          "old_line_content": "PHP_FUNCTION(mb_list_encodings)",
          "new_line_content": "\tRETVAL_STRING((char *)ret->name);",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(language))) !",
          "old_line_content": "\t\tif (n > 0) {",
          "new_line_content": "\t\tif ((name = (char *)mbfl_no_language2name(MBSTRG(language))) != NULL) {",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"language\", name);\n\t\t",
          "old_line_content": "\t\t\tsize_t i;",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"language\", name);",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(ret != NULL);\n\t/",
          "old_line_content": "}",
          "new_line_content": "\tZEND_ASSERT(ret != NULL);",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_detect_order_list_size);\n\t\t",
          "old_line_content": "\t\t\tfor (i = 0; i < n; i++) {",
          "new_line_content": "\t\tn = MBSTRG(current_detect_order_list_size);",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": null,
          "new_api": "AL_STRINGL",
          "old_text": null,
          "new_text": "AL_STRINGL((char *)ret->val, ret->len);\n\te",
          "old_line_content": "",
          "new_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret->val);\n\te",
          "old_line_content": "/* {{{ Sends an email message with MIME scheme */",
          "new_line_content": "\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": null,
          "new_api": "ZEND_PARSE_PARAMETERS_NONE",
          "old_text": null,
          "new_text": "ZEND_PARSE_PARAMETERS_NONE()",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_NONE();",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e((void *)convmap);\n}\n",
          "old_line_content": "",
          "new_line_content": "\tefree((void *)convmap);",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": null,
          "new_api": "array_init",
          "old_text": null,
          "new_text": "array_init(return_value)",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tarray_init(return_value);",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": null,
          "new_api": "mbfl_get_supported_encodings",
          "old_text": null,
          "new_text": "mbfl_get_supported_encodings()",
          "old_line_content": "",
          "new_line_content": "\tfor (const mbfl_encoding **encodings = mbfl_get_supported_encodings(); *encodings; encodings++) {",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "add_next_index_string",
          "old_text": null,
          "new_text": "add_next_index_string(return_value, (*encodings)->name)",
          "old_line_content": "/* {{{ Returns an array of the aliases of a given encoding name */",
          "new_line_content": "\t\tadd_next_index_string(return_value, (*encodings)->name);",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(internal_encoding));\n}",
          "old_line_content": "MBSTRING_API size_t php_mb_stripos(int mode, const char *old_haystack, size_t old_haystack_len, const char *old_needle, size_t old_needle_len, zend_long offset, const mbfl_encoding *enc)",
          "new_line_content": "\treturn php_mb_safe_strrchr_ex(s, c, nbytes, MBSTRG(internal_encoding));",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"substitute_character\", \"none\");\n\t\t",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"substitute_character\", \"none\");",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"substitute_character\", \"long\");\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"substitute_character\", \"long\");",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "ZEND_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "ZEND_PARSE_PARAMETERS_START(1, 1)",
          "old_line_content": "\tif (!encoding) {",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": null,
          "new_api": "_string_init_set",
          "old_text": null,
          "new_text": "_string_init_set(&haystack, enc);\n\tm",
          "old_line_content": "\t\t * offsets otherwise. */",
          "new_line_content": "\tmbfl_string_init_set(&haystack, enc);",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": null,
          "new_api": "_string_init_set",
          "old_text": null,
          "new_text": "_string_init_set(&needle, enc);\n\n\t",
          "old_line_content": "",
          "new_line_content": "\tmbfl_string_init_set(&needle, enc);",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "ZEND_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "ZEND_PARSE_PARAMETERS_END()",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "assoc_string",
          "old_text": null,
          "new_text": "assoc_string(return_value, \"strict_detection\", \"Off\");\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tadd_assoc_string(return_value, \"strict_detection\", \"Off\");",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\t\tfor (const char **alias = encoding->aliases; *alias; ++alias) {",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_internal_encoding)->na",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING((char *)MBSTRG(current_internal_encoding)->name);",
          "content_same": false
        },
        {
          "line": 4301,
          "old_api": null,
          "new_api": "ring_convert_case",
          "old_text": null,
          "new_text": "ring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_haystack, old_haystack_len, &len, enc);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\thaystack.val = (unsigned char *)mbstring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_haystack, old_haystack_len, &len, enc);",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "array_init",
          "old_text": null,
          "new_text": "array_init(return_value)",
          "old_line_content": "\t}",
          "new_line_content": "\tarray_init(return_value);",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": null,
          "new_api": "add_next_index_string",
          "old_text": null,
          "new_text": "add_next_index_string(return_value, (char *)*alias)",
          "old_line_content": "",
          "new_line_content": "\t\t\tadd_next_index_string(return_value, (char *)*alias);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(http_input_identify)->na",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING((char *)MBSTRG(http_input_identify)->name);",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_http_output_encoding)->na",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING((char *)MBSTRG(current_http_output_encoding)->name);",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": null,
          "new_api": "ring_convert_case",
          "old_text": null,
          "new_text": "ring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_needle, old_needle_len, &len, enc);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tneedle.val = (unsigned char *)mbstring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_needle, old_needle_len, &len, enc);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(name);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(name);",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(name);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(name);",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": null,
          "new_api": "_strpos",
          "old_text": null,
          "new_text": "_strpos(&haystack, &needle, offset, mode);\n\t}",
          "old_line_content": "\t}",
          "new_line_content": "\t\tn = mbfl_strpos(&haystack, &needle, offset, mode);",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(name);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(name);",
          "content_same": false
        },
        {
          "line": 2786,
          "old_api": null,
          "new_api": "MBSTRG",
          "old_text": null,
          "new_text": "MBSTRG(current_internal_encoding)",
          "old_line_content": "\t\tZ_PARAM_STR(charset_name)",
          "new_line_content": "\tstring.encoding = MBSTRG(current_internal_encoding);",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(haystack.val);\n\t}",
          "old_line_content": "\t}",
          "new_line_content": "\t\tefree(haystack.val);",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(token, token_pos, 0);\n\t\t",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tfld_name = zend_string_init(token, token_pos, 0);",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(needle.val);\n\t}",
          "old_line_content": "/* }}} */",
          "new_line_content": "\t\tefree(needle.val);",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": null,
          "new_api": "Z_PARAM_STRING",
          "old_text": null,
          "new_text": "Z_PARAM_STRING(trans_enc_name, trans_enc_name_len)",
          "old_line_content": "\tstring.val = (unsigned char*)string_val;",
          "new_line_content": "\t\tZ_PARAM_STRING(trans_enc_name, trans_enc_name_len)",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": null,
          "new_api": "Z_PARAM_STRING",
          "old_text": null,
          "new_text": "Z_PARAM_STRING(linefeed, linefeed_len)",
          "old_line_content": "\tcharset = &mbfl_encoding_pass;",
          "new_line_content": "\t\tZ_PARAM_STRING(linefeed, linefeed_len)",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": null,
          "new_api": "Z_PARAM_LONG",
          "old_text": null,
          "new_text": "Z_PARAM_LONG(indent)",
          "old_line_content": "\ttransenc = &mbfl_encoding_base64;",
          "new_line_content": "\t\tZ_PARAM_LONG(indent)",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": null,
          "new_api": "ZEND_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "ZEND_PARSE_PARAMETERS_END()",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": null,
          "new_api": "_string_equals_literal_ci",
          "old_text": null,
          "new_text": "_string_equals_literal_ci(type, \"illegal_chars\")) {\n",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"illegal_chars\")) {",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": null,
          "new_api": "_string_equals_literal_ci",
          "old_text": null,
          "new_text": "_string_equals_literal_ci(type, \"encoding_translation\")) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"encoding_translation\")) {",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(\"Off\");\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(\"Off\");",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(http_input_list);\n\t*",
          "old_line_content": "static void php_mb_gpc_set_input_encoding(const zend_encoding *encoding) /* {{{ */",
          "new_line_content": "\t*list = (const zend_encoding **)MBSTRG(http_input_list);",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(http_input_list_size);\n}\n",
          "old_line_content": "{",
          "new_line_content": "\t*list_size = MBSTRG(http_input_list_size);",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(name);\n\t\t",
          "old_line_content": "\t\tif (n > 0) {",
          "new_line_content": "\t\t\tRETVAL_STRING(name);",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_detect_order_list_size);\n\t\t",
          "old_line_content": "\t\t\tfor (i = 0; i < n; i++) {",
          "new_line_content": "\t\tn = MBSTRG(current_detect_order_list_size);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": null,
          "new_api": "MBSTRG",
          "old_text": null,
          "new_text": "MBSTRG(language)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tconst mbfl_language *lang = mbfl_no2language(MBSTRG(language));",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(http_input_identify) = (",
          "old_line_content": "",
          "new_line_content": "\tMBSTRG(http_input_identify) = (const mbfl_encoding*)encoding;",
          "content_same": false
        },
        {
          "line": 2809,
          "old_api": null,
          "new_api": "mbfl_no2encoding",
          "old_text": null,
          "new_text": "mbfl_no2encoding(lang->mail_charset)",
          "old_line_content": "\tif (trans_enc_name != NULL) {",
          "new_line_content": "\t\t\tcharset = mbfl_no2encoding(lang->mail_charset);",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": null,
          "new_api": "mbfl_no2encoding",
          "old_text": null,
          "new_text": "mbfl_no2encoding(lang->mail_header_encoding)",
          "old_line_content": "\t\tif (*trans_enc_name == 'B' || *trans_enc_name == 'b') {",
          "new_line_content": "\t\t\ttransenc = mbfl_no2encoding(lang->mail_header_encoding);",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "y_init",
          "old_text": null,
          "new_text": "y_init(return_value);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tarray_init(return_value);",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(\"none\");\n\t\t",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\tRETVAL_STRING(\"none\");",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(\"long\");\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(\"long\");",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(current_filter_illegal_substchar));\n\t",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\tRETVAL_LONG(MBSTRG(current_filter_illegal_substchar));",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": null,
          "new_api": "mbfl_mime_header_encode",
          "old_text": null,
          "new_text": "mbfl_mime_header_encode(&string, &result, charset, transenc, linefeed, indent)",
          "old_line_content": "}",
          "new_line_content": "\tret = mbfl_mime_header_encode(&string, &result, charset, transenc, linefeed, indent);",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": null,
          "new_api": "ZEND_ASSERT",
          "old_text": null,
          "new_text": "ZEND_ASSERT(ret != NULL)",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tZEND_ASSERT(ret != NULL);",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "_string_equals_literal_ci",
          "old_text": null,
          "new_text": "_string_equals_literal_ci(type, \"strict_detection\")) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"strict_detection\")) {",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": null,
          "new_api": "RETVAL_STRINGL",
          "old_text": null,
          "new_text": "RETVAL_STRINGL((char *)ret->val, ret->len)",
          "old_line_content": "/* {{{ Decodes the MIME \"encoded-word\" in the string */",
          "new_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t/* the string is already strdup()'ed */",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "efree",
          "old_text": null,
          "new_text": "efree(ret->val)",
          "old_line_content": "PHP_FUNCTION(mb_decode_mimeheader)",
          "new_line_content": "\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(strict_detection)) {\n",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tif (MBSTRG(strict_detection)) {",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(\"On\");\n\t\t",
          "old_line_content": "\t\t// TODO Convert to ValueError",
          "new_line_content": "\t\t\tRETVAL_STRING(\"On\");",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": null,
          "new_api": "AL_STRING",
          "old_text": null,
          "new_text": "AL_STRING(\"Off\");\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tRETVAL_STRING(\"Off\");",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": null,
          "new_api": "MBSTRG",
          "old_text": null,
          "new_text": "MBSTRG(current_internal_encoding)",
          "old_line_content": "",
          "new_line_content": "\tstring.encoding = MBSTRG(current_internal_encoding);",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": null,
          "new_api": "MBSTRG",
          "old_text": null,
          "new_text": "MBSTRG(current_internal_encoding)",
          "old_line_content": "}",
          "new_line_content": "\tret = mbfl_mime_header_decode(&string, &result, MBSTRG(current_internal_encoding));",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "ZEND_ASSERT",
          "old_text": null,
          "new_text": "ZEND_ASSERT(ret != NULL)",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tZEND_ASSERT(ret != NULL);",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "_convert_filter_new",
          "old_text": null,
          "new_text": "_convert_filter_new(encoding, &mbfl_encoding_wchar, mbfl_filt_check_errors, NULL, &filter);\n\n\t",
          "old_line_content": "\t\tif (filter->num_illegalchar) {",
          "new_line_content": "\tmbfl_convert_filter *filter = mbfl_convert_filter_new(encoding, &mbfl_encoding_wchar, mbfl_filt_check_errors, NULL, &filter);",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": null,
          "new_api": "RETVAL_STRINGL",
          "old_text": null,
          "new_text": "RETVAL_STRINGL((char *)ret->val, ret->len)",
          "old_line_content": "/* {{{ Conversion between full-width character and half-width character (Japanese) */",
          "new_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t/* the string is already strdup()'ed */",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": null,
          "new_api": "efree",
          "old_text": null,
          "new_text": "efree(ret->val)",
          "old_line_content": "PHP_FUNCTION(mb_convert_kana)",
          "new_line_content": "\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "er->filter_function)(c, filter);",
          "old_text": null,
          "new_text": "er->filter_function)(c, filter);\n\t\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\t(filter->filter_function)(c, filter);",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(token, token_pos, 0);\n\t\t",
          "old_line_content": "\t\t\t\t\t\t\t\t/* FIXME: some locale free implementation is",
          "new_line_content": "\t\t\t\t\t\t\t\tfld_val = zend_string_init(token, token_pos, 0);",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": null,
          "new_api": "er->filter_flush)(filter);\n\ti",
          "old_text": null,
          "new_text": "er->filter_flush)(filter);\n\ti",
          "old_line_content": "",
          "new_line_content": "\t(filter->filter_flush)(filter);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "_convert_filter_delete",
          "old_text": null,
          "new_text": "_convert_filter_delete(filter);\n\tr",
          "old_line_content": "{",
          "new_line_content": "\tmbfl_convert_filter_delete(filter);",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": null,
          "new_api": "Z_PARAM_STRING",
          "old_text": null,
          "new_text": "Z_PARAM_STRING(string_val, string.len)",
          "old_line_content": "",
          "new_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": null,
          "new_api": "_STR",
          "old_text": null,
          "new_text": "_STR(&val, fld_val);\n\n\t",
          "old_line_content": "\t\t\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t\tZVAL_STR(&val, fld_val);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": null,
          "new_api": "Z_PARAM_STR_OR_NULL",
          "old_text": null,
          "new_text": "Z_PARAM_STR_OR_NULL(encname)",
          "old_line_content": "\t/* \"Zen\" is , or \"full\"; \"Han\" is , or \"half\"",
          "new_line_content": "\t\tZ_PARAM_STR_OR_NULL(encname)",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": null,
          "new_api": "ZEND_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "ZEND_PARSE_PARAMETERS_END()",
          "old_line_content": "\t * This refers to \"fullwidth\" or \"halfwidth\" variants of characters used for writing Japanese */",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": null,
          "new_api": "_hash_update",
          "old_text": null,
          "new_text": "_hash_update(ht, fld_name, &val);\n\n\t",
          "old_line_content": "\t\t\t\t\t\t\tfld_name = fld_val = NULL;",
          "new_line_content": "\t\t\t\t\t\t\t\tzend_hash_update(ht, fld_name, &val);",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": null,
          "new_api": "_string_release_ex",
          "old_text": null,
          "new_text": "_string_release_ex(fld_name, 0);\n\t\t",
          "old_line_content": "\t\t\t\t\t\t\ttoken_pos = 0;",
          "new_line_content": "\t\t\t\t\t\t\t\tzend_string_release_ex(fld_name, 0);",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "S_RECURSIVE",
          "old_text": null,
          "new_text": "S_RECURSIVE(vars)) {\n",
          "old_line_content": "\tZEND_HASH_FOREACH_KEY_VAL(vars, idx, key, entry) {",
          "new_line_content": "\tif (GC_IS_RECURSIVE(vars)) {",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "RY_PROTECT_RECURSION",
          "old_text": null,
          "new_text": "RY_PROTECT_RECURSION(vars);\n\tZ",
          "old_line_content": "\t\t\t\tvalid = 0;",
          "new_line_content": "\tGC_TRY_PROTECT_RECURSION(vars);",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "_DEREF",
          "old_text": null,
          "new_text": "_DEREF(entry);\n\t\t",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\tZVAL_DEREF(entry);",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(entry)) {\n",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\tswitch (Z_TYPE_P(entry)) {",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "RLEN_P",
          "old_text": null,
          "new_text": "RLEN_P(entry), en",
          "old_line_content": "\t\t\tcase IS_ARRAY:",
          "new_line_content": "\t\t\t\tif (!php_mb_check_encoding(Z_STRVAL_P(entry), Z_STRLEN_P(entry), encoding)) {",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": null,
          "new_api": "RVAL_P",
          "old_text": null,
          "new_text": "RVAL_P(entry), en",
          "old_line_content": "\t\t\tcase IS_LONG:",
          "new_line_content": "\t\t\t\tif (!php_mb_check_encoding_recursive(Z_ARRVAL_P(entry), encoding)) {",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(token, token_pos, 0);\n\t\t",
          "old_line_content": "\t\t\t * really required here,,, */",
          "new_line_content": "\t\t\tfld_val = zend_string_init(token, token_pos, 0);",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": null,
          "new_api": "_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "_HASH_FOREACH_END();\n\tG",
          "old_line_content": "/* {{{ Check if the string is valid for the specified encoding */",
          "new_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": null,
          "new_api": "RY_UNPROTECT_RECURSION",
          "old_text": null,
          "new_text": "RY_UNPROTECT_RECURSION(vars);\n\tr",
          "old_line_content": "PHP_FUNCTION(mb_check_encoding)",
          "new_line_content": "\tGC_TRY_UNPROTECT_RECURSION(vars);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "_STR",
          "old_text": null,
          "new_text": "_STR(&val, fld_val);\n\n\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tZVAL_STR(&val, fld_val);",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": null,
          "new_api": "_hash_update",
          "old_text": null,
          "new_text": "_hash_update(ht, fld_name, &val);\n\n\t",
          "old_line_content": "\treturn state;",
          "new_line_content": "\t\t\tzend_hash_update(ht, fld_name, &val);",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": null,
          "new_api": "_string_release_ex",
          "old_text": null,
          "new_text": "_string_release_ex(fld_name, 0);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\t\tzend_string_release_ex(fld_name, 0);",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(0, 2)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 2)",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": null,
          "new_api": "mb_get_encoding",
          "old_text": null,
          "new_text": "mb_get_encoding(enc, 2);\n\ti",
          "old_line_content": "\tif (input_ht) {",
          "new_line_content": "\tencoding = php_mb_get_encoding(enc, 2);",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\t} else if (input_str) {",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": null,
          "new_api": "mb_check_encoding_recursive",
          "old_text": null,
          "new_text": "mb_check_encoding_recursive(input_ht, encoding));\n\t",
          "old_line_content": "\t\t\t\"Calling mb_check_encoding() without argument is deprecated\");",
          "new_line_content": "\t\tRETURN_BOOL(php_mb_check_encoding_recursive(input_ht, encoding));",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": null,
          "new_api": "STR",
          "old_text": null,
          "new_text": "STR(\"mail.force_extra_parameters\");\n\ts",
          "old_line_content": "",
          "new_line_content": "\tchar *force_extra_parameters = INI_STR(\"mail.force_extra_parameters\");",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": null,
          "new_api": "_LEN",
          "old_text": null,
          "new_text": "_LEN(input_str), en",
          "old_line_content": "\t\t/* FIXME: Actually check all inputs, except $_FILES file content. */",
          "new_line_content": "\t\tRETURN_BOOL(php_mb_check_encoding(ZSTR_VAL(input_str), ZSTR_LEN(input_str), encoding));",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": null,
          "new_api": "error_docref",
          "old_text": null,
          "new_text": "error_docref(NULL, E_DEPRECATED,\n\t\t\t\"Calling mb_check_encoding() without argument is deprecated\");\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\tphp_error_docref(NULL, E_DEPRECATED,",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\t// TODO: avoid reallocation ???",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(illegalchars) == ",
          "old_line_content": "",
          "new_line_content": "\t\tRETURN_BOOL(MBSTRG(illegalchars) == 0);",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": null,
          "new_api": "_ja_jp_hantozen",
          "old_text": null,
          "new_text": "_ja_jp_hantozen(&string, &result, opt);\n\tZ",
          "old_line_content": "}",
          "new_line_content": "\tret = mbfl_ja_jp_hantozen(&string, &result, opt);",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(ret != NULL);\n\t/",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tZEND_ASSERT(ret != NULL);",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": null,
          "new_api": "AL_STRINGL",
          "old_text": null,
          "new_text": "AL_STRINGL((char *)ret->val, ret->len);\t\t/",
          "old_line_content": "static int mb_recursive_encoder_detector_feed(mbfl_encoding_detector *identd, zval *var, int *recursion_error) /* {{{ */",
          "new_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t\t/* the string is already strdup()'ed */",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret->val);\n}\n",
          "old_line_content": "{",
          "new_line_content": "\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(str_len > 0);\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_ASSERT(str_len > 0);",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": null,
          "new_api": "mb_get_encoding",
          "old_text": null,
          "new_text": "mb_get_encoding(enc_name, enc_name_arg_num);\n\ti",
          "old_line_content": "\tno_enc = enc->no_encoding;",
          "new_line_content": "\tenc = php_mb_get_encoding(enc_name, enc_name_arg_num);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "_memory_device_init",
          "old_text": null,
          "new_text": "_memory_device_init(&device, 0, 0);\n\tm",
          "old_line_content": "\ttran_cs = &mbfl_encoding_utf8;",
          "new_line_content": "\tmbfl_memory_device_init(&device, 0, 0);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "_DEREF",
          "old_text": null,
          "new_text": "_DEREF(var);\n\ti",
          "old_line_content": "\t\t\treturn 1; /* complete detecting */",
          "new_line_content": "\tZVAL_DEREF(var);",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(var) == ",
          "old_line_content": "\t\t}",
          "new_line_content": "\tif (Z_TYPE_P(var) == IS_STRING) {",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(&orig_str);\n\tm",
          "old_line_content": "\thead_enc = &mbfl_encoding_base64;",
          "new_line_content": "\tmbfl_string_init(&orig_str);",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": null,
          "new_api": "_string_init",
          "old_text": null,
          "new_text": "_string_init(&conv_str);\n\n\t",
          "old_line_content": "\tbody_enc = &mbfl_encoding_base64;",
          "new_line_content": "\tmbfl_string_init(&conv_str);",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": null,
          "new_api": "mb_is_unsupported_no_encoding",
          "old_text": null,
          "new_text": "mb_is_unsupported_no_encoding(no_enc)) {\n",
          "old_line_content": "\t{",
          "new_line_content": "\tif (php_mb_is_unsupported_no_encoding(no_enc)) {",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": null,
          "new_api": "_value_error",
          "old_text": null,
          "new_text": "_value_error(\"mb_ord() does not support the \\\"%s\\\" encoding\", enc->name);\n\t\t",
          "old_line_content": "\t\tmbfl_wchar_device dev;",
          "new_line_content": "\t\tzend_value_error(\"mb_ord() does not support the \\\"%s\\\" encoding\", enc->name);",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(var) == ",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t} else if (Z_TYPE_P(var) == IS_ARRAY || Z_TYPE_P(var) == IS_OBJECT) {",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": null,
          "new_api": "RG",
          "old_text": null,
          "new_text": "RG(language));\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tlang = mbfl_no2language(MBSTRG(language));",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": null,
          "new_api": "_RECURSIVE_P",
          "old_text": null,
          "new_text": "_RECURSIVE_P(var)) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (Z_IS_RECURSIVE_P(var)) {",
          "content_same": false
        },
        {
          "line": 2970,
          "old_api": null,
          "new_api": "OTECT_RECURSION_P",
          "old_text": null,
          "new_text": "OTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "\t\t\tZEND_HASH_FOREACH_VAL_IND(ht, entry) {",
          "new_line_content": "\t\t\tZ_PROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(3, 5)\n\t\tZ",
          "old_line_content": "\t\tZ_PARAM_ARRAY_HT_OR_STR(headers_ht, str_headers)",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(3, 5)",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": null,
          "new_api": "RAM_PATH",
          "old_text": null,
          "new_text": "RAM_PATH(message, message_len)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\t\tZ_PARAM_PATH(message, message_len)",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": null,
          "new_api": "_ASSERT",
          "old_text": null,
          "new_text": "_ASSERT(filter != NULL);\n\n\t",
          "old_line_content": "\t\tif (dev.pos < 1 || filter->num_illegalchar || dev.buffer[0] == MBFL_BAD_INPUT) {",
          "new_line_content": "\t\tZEND_ASSERT(filter != NULL);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": null,
          "new_api": "ecursive_encoder_detector_feed",
          "old_text": null,
          "new_text": "ecursive_encoder_detector_feed(identd, entry, recursion_error)) {\n",
          "old_line_content": "\t\t\t\t} else if (*recursion_error) {",
          "new_line_content": "\t\t\t\tif (mb_recursive_encoder_detector_feed(identd, entry, recursion_error)) {",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "_convert_filter_feed_string",
          "old_text": null,
          "new_text": "_convert_filter_feed_string(filter, (unsigned char*)str, str_len);\n\t\t",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\tmbfl_convert_filter_feed_string(filter, (unsigned char*)str, str_len);",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": null,
          "new_api": "_convert_filter_flush",
          "old_text": null,
          "new_text": "_convert_filter_flush(filter);\n\n\t",
          "old_line_content": "\t\t\tcp = dev.buffer[0];",
          "new_line_content": "\t\tmbfl_convert_filter_flush(filter);",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": null,
          "new_api": "_LEN",
          "old_text": null,
          "new_text": "_LEN(str_headers)) {\n",
          "old_line_content": "\t} else if (headers_ht) {",
          "new_line_content": "\t\tif (strlen(ZSTR_VAL(str_headers)) != ZSTR_LEN(str_headers)) {",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": null,
          "new_api": "PROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "trim",
          "old_text": null,
          "new_text": "trim(str_headers, NULL, 0, 2);\n\t}",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tstr_headers = php_trim(str_headers, NULL, 0, 2);",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": null,
          "new_api": "_convert_filter_delete",
          "old_text": null,
          "new_text": "_convert_filter_delete(filter);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\tmbfl_convert_filter_delete(filter);",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "_HASH_FOREACH_END();\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": null,
          "new_api": "mail_build_headers",
          "old_text": null,
          "new_text": "mail_build_headers(headers_ht);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\tstr_headers = php_mail_build_headers(headers_ht);",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": null,
          "new_api": "FCOUNTED_P",
          "old_text": null,
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "} /* }}} */",
          "new_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": null,
          "new_api": "PROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": null,
          "new_api": "_wchar_device_clear",
          "old_text": null,
          "new_text": "_wchar_device_clear(&dev);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\tmbfl_wchar_device_clear(&dev);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": null,
          "new_api": "_hash_init",
          "old_text": null,
          "new_text": "_hash_init(&ht_headers, 0, NULL, ZVAL_PTR_DTOR, 0);\n\n\t",
          "old_line_content": "",
          "new_line_content": "\tzend_hash_init(&ht_headers, 0, NULL, ZVAL_PTR_DTOR, 0);",
          "content_same": false
        },
        {
          "line": 3508,
          "old_api": null,
          "new_api": "_LEN",
          "old_text": null,
          "new_text": "_LEN(str_headers));\n\t",
          "old_line_content": "\t\tchar *param_name;",
          "new_line_content": "\t\t_php_mbstr_parse_mail_headers(&ht_headers, ZSTR_VAL(str_headers), ZSTR_LEN(str_headers));",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "RAM_STRING",
          "old_text": null,
          "new_text": "RAM_STRING(str, str_len)\n\t\tZ",
          "old_line_content": "\tif (str_len == 0) {",
          "new_line_content": "\t\tZ_PARAM_STRING(str, str_len)",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "_DEREF",
          "old_text": null,
          "new_text": "_DEREF(var);\n\ti",
          "old_line_content": "\t\tif (ret != NULL) {",
          "new_line_content": "\tZVAL_DEREF(var);",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(s) == ",
          "old_line_content": "\t\t\tdo {",
          "new_line_content": "\t\tZEND_ASSERT(Z_TYPE_P(s) == IS_STRING);",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "RVAL_P",
          "old_text": null,
          "new_text": "RVAL_P(var);\n\t\t",
          "old_line_content": "\t\t\t// TODO: avoid reallocation ???",
          "new_line_content": "\t\tstring.val = (unsigned char *)Z_STRVAL_P(var);",
          "content_same": false
        },
        {
          "line": 3517,
          "old_api": null,
          "new_api": "RVAL_P",
          "old_text": null,
          "new_text": "RVAL_P(s), ';",
          "old_line_content": "\t\t\t\t++p;",
          "new_line_content": "\t\tp = strchr(Z_STRVAL_P(s), ';');",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_END",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "_argument_value_error",
          "old_text": null,
          "new_text": "_argument_value_error(1, \"must not be empty\");\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\tzend_argument_value_error(1, \"must not be empty\");",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": null,
          "new_api": "RN_THROWS",
          "old_text": null,
          "new_text": "RN_THROWS();\n\t}",
          "old_line_content": "\tif (0 > cp) {",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": null,
          "new_api": "mb_ord",
          "old_text": null,
          "new_text": "mb_ord(str, str_len, enc, 2);\n\n\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\tcp = php_mb_ord(str, str_len, enc, 2);",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(ret->val);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tefree(ret->val);",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "strtok_r",
          "old_text": null,
          "new_text": "strtok_r(p, \"= \", &tmp)) !=",
          "old_line_content": "\t\t\t\t\t\tif (charset != NULL) {",
          "new_line_content": "\t\t\t\tif ((param_name = php_strtok_r(p, \"= \", &tmp)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(var) == ",
          "old_line_content": "\t\t\t\treturn 1;",
          "new_line_content": "\t\tif (Z_TYPE_P(var) == IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "RATE_ARRAY",
          "old_text": null,
          "new_text": "RATE_ARRAY(var);\n\t\t",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tSEPARATE_ARRAY(var);",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "strtok_r",
          "old_text": null,
          "new_text": "strtok_r(NULL, \"= \\\"\", &tmp);\n\t\t",
          "old_line_content": "\t\t\t\t\t\tif (!_tran_cs) {",
          "new_line_content": "\t\t\t\t\t\tcharset = php_strtok_r(NULL, \"= \\\"\", &tmp);",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": null,
          "new_api": "FCOUNTED_P",
          "old_text": null,
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": null,
          "new_api": "_RECURSIVE_P",
          "old_text": null,
          "new_text": "_RECURSIVE_P(var)) {\n",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (Z_IS_RECURSIVE_P(var)) {",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": null,
          "new_api": "_name2encoding",
          "old_text": null,
          "new_text": "_name2encoding(charset);\n\t\t",
          "old_line_content": "\t\t\t\t\t\t\t_tran_cs = &mbfl_encoding_ascii;",
          "new_line_content": "\t\t\t\t\t\t\t_tran_cs = mbfl_name2encoding(charset);",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "RN_LONG",
          "old_text": null,
          "new_text": "RN_LONG(cp);\n}\n",
          "old_line_content": "static inline zend_string *php_mb_chr(zend_long cp, zend_string *enc_name, uint32_t enc_name_arg_num)",
          "new_line_content": "\tRETURN_LONG(cp);",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": null,
          "new_api": "OTECT_RECURSION_P",
          "old_text": null,
          "new_text": "OTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "\t\t\tZEND_HASH_FOREACH_VAL_IND(ht, entry) {",
          "new_line_content": "\t\t\tZ_PROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "error_docref",
          "old_text": null,
          "new_text": "error_docref(NULL, E_WARNING, \"Unsupported charset \\\"%s\\\" - will be regarded as ascii\", charset);\n\t\t",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Unsupported charset \\\"%s\\\" - will be regarded as ascii\", charset);",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": null,
          "new_api": "ecursive_convert_variable",
          "old_text": null,
          "new_text": "ecursive_convert_variable(convd, entry)) {\n",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\tif (mb_recursive_convert_variable(convd, entry)) {",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "PROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "mb_get_encoding",
          "old_text": null,
          "new_text": "mb_get_encoding(enc_name, enc_name_arg_num);\n\ti",
          "old_line_content": "\tno_enc = enc->no_encoding;",
          "new_line_content": "\tenc = php_mb_get_encoding(enc_name, enc_name_arg_num);",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": null,
          "new_api": "_HASH_FOREACH_END",
          "old_text": null,
          "new_text": "_HASH_FOREACH_END();\n\t\t",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t} ZEND_HASH_FOREACH_END();",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": null,
          "new_api": "_hash_str_find",
          "old_text": null,
          "new_text": "_hash_str_find(&ht_headers, \"CONTENT-TRANSFER-ENCODING\", sizeof(\"CONTENT-TRANSFER-ENCODING\") - 1))) {",
          "old_line_content": "\t\tswitch (_body_enc ? _body_enc->no_encoding : mbfl_no_encoding_invalid) {",
          "new_line_content": "\tif ((s = zend_hash_str_find(&ht_headers, \"CONTENT-TRANSFER-ENCODING\", sizeof(\"CONTENT-TRANSFER-ENCODING\") - 1))) {",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": null,
          "new_api": "FCOUNTED_P",
          "old_text": null,
          "new_text": "FCOUNTED_P(var)) {\n",
          "old_line_content": "} /* }}} */",
          "new_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": null,
          "new_api": "PROTECT_RECURSION_P",
          "old_text": null,
          "new_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "old_line_content": "",
          "new_line_content": "\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": null,
          "new_api": "PE_P",
          "old_text": null,
          "new_text": "PE_P(s) == ",
          "old_line_content": "\t\t\tcase mbfl_no_encoding_8bit:",
          "new_line_content": "\t\tZEND_ASSERT(Z_TYPE_P(s) == IS_STRING);",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": null,
          "new_api": "RVAL_P",
          "old_text": null,
          "new_text": "RVAL_P(s));\n\t",
          "old_line_content": "\t\t\t\tbody_enc = _body_enc;",
          "new_line_content": "\t\t_body_enc = mbfl_name2encoding(Z_STRVAL_P(s));",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": null,
          "new_api": "mb_is_unsupported_no_encoding",
          "old_text": null,
          "new_text": "mb_is_unsupported_no_encoding(no_enc)) {\n",
          "old_line_content": "\tif (cp < 0 || cp > 0x10ffff) {",
          "new_line_content": "\tif (php_mb_is_unsupported_no_encoding(no_enc)) {",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": null,
          "new_api": "_value_error",
          "old_text": null,
          "new_text": "_value_error(\"mb_chr() does not support the \\\"%s\\\" encoding\", enc->name);\n\t\t",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\t\tzend_value_error(\"mb_chr() does not support the \\\"%s\\\" encoding\", enc->name);",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": null,
          "new_api": "RVAL_P",
          "old_text": null,
          "new_text": "RVAL_P(s));\n\t",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Unsupported transfer encoding \\\"%s\\\" - will be regarded as 8bit\", Z_STRVAL_P(s));",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": null,
          "new_api": "mb_is_no_encoding_utf8",
          "old_text": null,
          "new_text": "mb_is_no_encoding_utf8(no_enc)) {\n",
          "old_line_content": "\t\tif (cp < 0x80) {",
          "new_line_content": "\tif (php_mb_is_no_encoding_utf8(no_enc)) {",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": null,
          "new_api": "ndup",
          "old_text": null,
          "new_text": "ndup(to, to_len);\n\t\t",
          "old_line_content": "\t\t\tto_r[to_len - 1] = '\\0';",
          "new_line_content": "\t\tto_r = estrndup(to, to_len);",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": null,
          "new_api": "ace",
          "old_text": null,
          "new_text": "ace((unsigned char) to_r[to_len - 1])) {\n",
          "old_line_content": "\t\tfor (i = 0; to_r[i]; i++) {",
          "new_line_content": "\t\t\tif (!isspace((unsigned char) to_r[to_len - 1])) {",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": null,
          "new_api": "_PARSE_PARAMETERS_START",
          "old_text": null,
          "new_text": "_PARSE_PARAMETERS_START(3, -1)\n\t\tZ",
          "old_line_content": "",
          "new_line_content": "\tZEND_PARSE_PARAMETERS_START(3, -1)",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": null,
          "new_api": "RAM_STR",
          "old_text": null,
          "new_text": "RAM_STR(to_enc_str)\n\t\tZ",
          "old_line_content": "\t/* new encoding */",
          "new_line_content": "\t\tZ_PARAM_STR(to_enc_str)",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "_string_alloc",
          "old_text": null,
          "new_text": "_string_alloc(3, 0);\n\t\t",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\tret = zend_string_alloc(3, 0);",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": null,
          "new_api": "RAM_VARIADIC",
          "old_text": null,
          "new_text": "RAM_VARIADIC('+', args, argc)\n\tZE",
          "old_line_content": "\tif (!to_encoding) {",
          "new_line_content": "\t\tZ_PARAM_VARIADIC('+', args, argc)",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": null,
          "new_api": "trl",
          "old_text": null,
          "new_text": "trl((unsigned char) to_r[i])) {\n",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\tif (iscntrl((unsigned char) to_r[i])) {",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "mb_get_encoding",
          "old_text": null,
          "new_text": "mb_get_encoding(to_enc_str, 1);\n\ti",
          "old_line_content": "\t/* initialize string */",
          "new_line_content": "\tto_encoding = php_mb_get_encoding(to_enc_str, 1);",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(ret)[1] ",
          "old_line_content": "",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[1] = 0x80 | ((cp >> 12) & 0x3f);",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": null,
          "new_api": "_VAL",
          "old_text": null,
          "new_text": "_VAL(ret)[2] ",
          "old_line_content": "\t\treturn ret;",
          "new_line_content": "\t\t\tZSTR_VAL(ret)[2] = 0x80 | ((cp >> 6) & 0x3f);",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": null,
          "new_api": "_LONG_HEADER_SEP_MBSTRING",
          "old_text": null,
          "new_text": "_LONG_HEADER_SEP_MBSTRING(to_r, i);\n\t\t",
          "old_line_content": "\t\tto_r = to;",
          "new_line_content": "\t\t\tSKIP_LONG_HEADER_SEP_MBSTRING(to_r, i);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4098,
          "old_api": "loc",
          "new_api": null,
          "old_text": "loc(buf_len + 1);\n\tb",
          "new_text": null,
          "old_line_content": "\tbuf = (char *) emalloc(buf_len + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_internal_encoding);\n\ti",
          "new_text": null,
          "old_line_content": "\torig_str.encoding = MBSTRG(current_internal_encoding);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(from_enc_str), &e",
          "new_text": null,
          "old_line_content": "\t\tif (php_mb_parse_encoding_list(ZSTR_VAL(from_enc_str), ZSTR_LEN(from_enc_str), &elist, &elistsz, /* persistent */ 0, /* arg_num */ 2, /* allow_pass_encoding */ 0) == FAILURE) {",
          "new_line_content": "\tif (from_enc_ht) {",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(strict_detection));\n\t",
          "new_text": null,
          "old_line_content": "\t\torig_str.encoding = mbfl_identify_encoding(&orig_str, MBSTRG(current_detect_order_list), MBSTRG(current_detect_order_list_size), MBSTRG(strict_detection));",
          "new_line_content": "\torig_str.val = (unsigned char *)subject;",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars);\n\tM",
          "new_text": null,
          "old_line_content": "\tlong orig_illegalchars = MBSTRG(illegalchars);",
          "new_line_content": "\tbuf[3] = cp & 0xff;",
          "content_same": false
        },
        {
          "line": 4108,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars) = 0",
          "new_text": null,
          "old_line_content": "\tMBSTRG(illegalchars) = 0;",
          "new_line_content": "\tbuf[4] = 0;",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": "mb_convert_encoding_ex",
          "new_api": null,
          "old_text": "mb_convert_encoding_ex(buf, buf_len, enc, &mbfl_encoding_ucs4be, &ret_len);\n\ti",
          "new_text": null,
          "old_line_content": "\tret_str = php_mb_convert_encoding_ex(buf, buf_len, enc, &mbfl_encoding_ucs4be, &ret_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars) != ",
          "new_text": null,
          "old_line_content": "\tif (MBSTRG(illegalchars) != 0) {",
          "new_line_content": "\tchar *ret_str;",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(buf);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tefree(buf);",
          "new_line_content": "\tsize_t ret_len;",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": "_argument_value_error",
          "new_api": null,
          "old_text": "_argument_value_error(2, \"must specify at least one encoding\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(2, \"must specify at least one encoding\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3087,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t}",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_internal_encoding);\n\n\t",
          "new_text": null,
          "old_line_content": "\torig_str.encoding = MBSTRG(current_internal_encoding);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(strict_detection));\n\t",
          "new_text": null,
          "old_line_content": "\t\torig_str.encoding = mbfl_identify_encoding(&orig_str, MBSTRG(current_detect_order_list), MBSTRG(current_detect_order_list_size), MBSTRG(strict_detection));",
          "new_line_content": "\torig_str.len = message_len;",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars) = o",
          "new_text": null,
          "old_line_content": "\tMBSTRG(illegalchars) = orig_illegalchars;",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(strict_detection));\n\t",
          "new_text": null,
          "old_line_content": "\t\tidentd = mbfl_encoding_detector_new(elist, elistsz, MBSTRG(strict_detection));",
          "new_line_content": "\tif (elistsz == 1) {",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(buf);\n\tr",
          "new_text": null,
          "old_line_content": "\tefree(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "ecursive_encoder_detector_feed",
          "new_api": null,
          "old_text": "ecursive_encoder_detector_feed(identd, &args[n], &recursion_error)) {\n",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (mb_recursive_encoder_detector_feed(identd, &args[n], &recursion_error)) {",
          "new_line_content": "\t\tfrom_encoding = NULL;",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "_convert_encoding",
          "new_api": null,
          "old_text": "_convert_encoding(&orig_str, &tmpstr, tran_cs) != ",
          "new_text": null,
          "old_line_content": "\t\tif (mbfl_convert_encoding(&orig_str, &tmpstr, tran_cs) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": "_convert_encoding",
          "new_api": null,
          "old_text": "_convert_encoding(&tmpstr, &conv_str, body_enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tpstr = mbfl_convert_encoding(&tmpstr, &conv_str, body_enc);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(tmpstr.val);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tefree(tmpstr.val);",
          "new_line_content": "\t\tmbfl_string tmpstr;",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "_encoding_detector_delete",
          "new_api": null,
          "old_text": "_encoding_detector_delete(identd);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tmbfl_encoding_detector_delete(identd);",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "_VOIDP",
          "new_api": null,
          "old_text": "_VOIDP(elist));\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tefree(ZEND_VOIDP(elist));",
          "new_line_content": "\t\t\t\tn++;",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "new_line_content": "PHP_FUNCTION(mb_chr)",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "RAM_LONG",
          "new_api": null,
          "old_text": "RAM_LONG(cp)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_LONG(cp)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_WARNING, \"Unable to detect encoding\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tphp_error_docref(NULL, E_WARNING, \"Unable to detect encoding\");",
          "new_line_content": "\t\t\t\tRETURN_FALSE;",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": "_VOIDP",
          "new_api": null,
          "old_text": "_VOIDP(elist));\n\t",
          "new_text": null,
          "old_line_content": "\t\t\tefree(ZEND_VOIDP(elist));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": "_VAL",
          "new_api": null,
          "old_text": "_VAL(str_headers);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tp = ZSTR_VAL(str_headers);",
          "new_line_content": "#define PHP_MBSTR_MAIL_MIME_HEADER1 \"MIME-Version: 1.0\"",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(str_headers);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tn = ZSTR_LEN(str_headers);",
          "new_line_content": "#define PHP_MBSTR_MAIL_MIME_HEADER2 \"Content-Type: text/plain\"",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "_memory_device_strncat",
          "new_api": null,
          "old_text": "_memory_device_strncat(&device, p, n);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, p, n);",
          "new_line_content": "#define PHP_MBSTR_MAIL_MIME_HEADER3 \"; charset=\"",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": "_memory_device_strncat",
          "new_api": null,
          "old_text": "_memory_device_strncat(&device, \"\\n\", 1);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tmbfl_memory_device_strncat(&device, \"\\n\", 1);",
          "new_line_content": "\tif (str_headers != NULL) {",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "_buffer_converter_new",
          "new_api": null,
          "old_text": "_buffer_converter_new(from_encoding, to_encoding, 0);\n\t/",
          "new_text": null,
          "old_line_content": "\tconvd = mbfl_buffer_converter_new(from_encoding, to_encoding, 0);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(convd != NULL);\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(convd != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_filter_illegal_mode));\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_buffer_converter_illegal_mode(convd, MBSTRG(current_filter_illegal_mode));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "_memory_device_strncat",
          "new_api": null,
          "old_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER1, sizeof(PHP_MBSTR_MAIL_MIME_HEADER1) - 1);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER1, sizeof(PHP_MBSTR_MAIL_MIME_HEADER1) - 1);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": "RAM_STRING",
          "new_api": null,
          "old_text": "RAM_STRING(str, str_len)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(str, str_len)",
          "new_line_content": "\tchar* str;",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "_DEREF",
          "new_api": null,
          "old_text": "_DEREF(zv);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tZVAL_DEREF(zv);",
          "new_line_content": "\t/* convert */",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": "ecursive_convert_variable",
          "new_api": null,
          "old_text": "ecursive_convert_variable(convd, zv);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\trecursion_error = mb_recursive_convert_variable(convd, zv);",
          "new_line_content": "\tn = 0;",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "_encoding_preferred_mime_name",
          "new_api": null,
          "old_text": "_encoding_preferred_mime_name(tran_cs);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tp = (char *)mbfl_encoding_preferred_mime_name(tran_cs);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t}",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZ_PARAM_STR_OR_NULL(enc_name)",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": "_memory_device_strncat",
          "new_api": null,
          "old_text": "_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER3, sizeof(PHP_MBSTR_MAIL_MIME_HEADER3) - 1);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tmbfl_memory_device_strncat(&device, PHP_MBSTR_MAIL_MIME_HEADER3, sizeof(PHP_MBSTR_MAIL_MIME_HEADER3) - 1);",
          "new_line_content": "\tif (!suppressed_hdrs.cnt_type) {",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": "mb_convert_encoding_ex",
          "new_api": null,
          "old_text": "mb_convert_encoding_ex(str, str_len, enc, enc, &ret_len);\n\n\t",
          "new_text": null,
          "old_line_content": "\tchar *ret = php_mb_convert_encoding_ex(str, str_len, enc, enc, &ret_len);",
          "new_line_content": "\tif (!enc) {",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": "_buffer_illegalchars",
          "new_api": null,
          "old_text": "_buffer_illegalchars(convd);\n\tm",
          "new_text": null,
          "old_line_content": "\tMBSTRG(illegalchars) += mbfl_buffer_illegalchars(convd);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": "AL_STRINGL",
          "new_api": null,
          "old_text": "AL_STRINGL(ret, ret_len);\n\te",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL(ret, ret_len);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(ret);\n}\n",
          "new_text": null,
          "old_line_content": "\tefree(ret);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": "_buffer_converter_delete",
          "new_api": null,
          "old_text": "_buffer_converter_delete(convd);\n\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_buffer_converter_delete(convd);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"Cannot handle recursive references\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "_encoding_preferred_mime_name",
          "new_api": null,
          "old_text": "_encoding_preferred_mime_name(body_enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tp = (char *)mbfl_encoding_preferred_mime_name(body_enc);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": "RN_STRING",
          "new_api": null,
          "old_text": "RN_STRING(from_encoding->name);\n}\n",
          "new_text": null,
          "old_line_content": "\tRETURN_STRING(from_encoding->name);",
          "new_line_content": "\tif (recursion_error) {",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "_memory_device_unput",
          "new_api": null,
          "old_text": "_memory_device_unput(&device);\n\tm",
          "new_text": null,
          "old_line_content": "\tmbfl_memory_device_unput(&device);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "_LONG_HEADER_SEP_MBSTRING",
          "new_api": null,
          "old_text": "_LONG_HEADER_SEP_MBSTRING(to_r, i);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tSKIP_LONG_HEADER_SEP_MBSTRING(to_r, i);",
          "new_line_content": "\t\t\t/* According to RFC 822, section 3.1.1 long headers may be separated into",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_detect_order_list)) {\n",
          "new_text": null,
          "old_line_content": "\tif (MBSTRG(current_detect_order_list)) {",
          "new_line_content": "static void php_mb_populate_current_detect_order_list(void)",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(detect_order_list_size)) {\n",
          "new_text": null,
          "old_line_content": "\tif (MBSTRG(detect_order_list) && MBSTRG(detect_order_list_size)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": "_hash_num_elements",
          "new_api": null,
          "old_text": "_hash_num_elements(target_hash);\n\ti",
          "new_text": null,
          "old_line_content": "\tint n_elems = zend_hash_num_elements(target_hash);",
          "new_line_content": "/* Convert PHP array to data structure required by mbfl_html_numeric_entity */",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": "_emalloc",
          "new_api": null,
          "old_text": "_emalloc(nentries, sizeof(mbfl_encoding*), 0);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tentry = (const mbfl_encoding **)safe_emalloc(nentries, sizeof(mbfl_encoding*), 0);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(detect_order_list), si",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(ZEND_VOIDP(entry), MBSTRG(detect_order_list), sizeof(mbfl_encoding*) * nentries);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": "_argument_value_error",
          "new_api": null,
          "old_text": "_argument_value_error(2, \"must have a multiple of 4 elements\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(2, \"must have a multiple of 4 elements\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": "_emalloc",
          "new_api": null,
          "old_text": "_emalloc(n_elems, sizeof(int), 0);\n\ti",
          "new_text": null,
          "old_line_content": "\tint *convmap = (int *)safe_emalloc(n_elems, sizeof(int), 0);",
          "new_line_content": "\tif (n_elems % 4 != 0) {",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": "_string_release_ex",
          "new_api": null,
          "old_text": "_string_release_ex(extra_cmd, 0);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tzend_string_release_ex(extra_cmd, 0);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": "_get_long",
          "new_api": null,
          "old_text": "_get_long(hash_entry);\n\t}",
          "new_text": null,
          "old_line_content": "\t\t*mapelm++ = zval_get_long(hash_entry);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(to_r);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tefree(to_r);",
          "new_line_content": "\tif (extra_cmd) {",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_detect_order_list_size) = n",
          "new_text": null,
          "old_line_content": "\tMBSTRG(current_detect_order_list_size) = nentries;",
          "new_line_content": "\t\tfor (i = 0; i < nentries; i++) {",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "e",
          "new_api": null,
          "old_text": "e((void *)subject_buf);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tefree((void *)subject_buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": "e",
          "new_api": null,
          "old_text": "e((void *)message_buf);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tefree((void *)message_buf);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(encoding_translation);\n}\n",
          "new_text": null,
          "old_line_content": "\treturn MBSTRG(encoding_translation);",
          "new_line_content": "/* }}} */",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "_hash_destroy",
          "new_api": null,
          "old_text": "_hash_destroy(&ht_headers);\n\ti",
          "new_text": null,
          "old_line_content": "\tzend_hash_destroy(&ht_headers);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(2, 4)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(2, 4)",
          "new_line_content": "\tint mapsize;",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": "RAM_STRING",
          "new_api": null,
          "old_text": "RAM_STRING(str, string.len)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(str, string.len)",
          "new_line_content": "\tHashTable *target_hash;",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "RAM_ARRAY_HT",
          "new_api": null,
          "old_text": "RAM_ARRAY_HT(target_hash)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_ARRAY_HT(target_hash)",
          "new_line_content": "\tbool is_hex = 0;",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(encoding, 3);\n\ti",
          "new_text": null,
          "old_line_content": "\tstring.encoding = php_mb_get_encoding(encoding, 3);",
          "new_line_content": "\t\tZ_PARAM_STR_OR_NULL(encoding)",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(language));\n\t",
          "new_text": null,
          "old_line_content": "\tconst mbfl_language *lang = mbfl_no2language(MBSTRG(language));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(0, 1)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 1)",
          "new_line_content": "\tchar *name;",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(internal_encoding));\n}",
          "new_text": null,
          "old_line_content": "\treturn php_mb_mbchar_bytes_ex(s, MBSTRG(internal_encoding));",
          "new_line_content": "/* }}} */",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(ret != NULL);\n\t/",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(ret != NULL);",
          "new_line_content": "\tif (convmap == NULL) {",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\tconst mbfl_encoding **entry;",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": "AL_STRINGL",
          "new_api": null,
          "old_text": "AL_STRINGL((char *)ret->val, ret->len);\n\te",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(ret->val);\n\te",
          "new_text": null,
          "old_line_content": "\tefree(ret->val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "y_init",
          "new_api": null,
          "old_text": "y_init(return_value);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tarray_init(return_value);",
          "new_line_content": "\t\tZ_PARAM_OPTIONAL",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_internal_encoding)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (MBSTRG(current_internal_encoding)) {",
          "new_line_content": "\t\tZ_PARAM_STR(type)",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_http_output_encoding)->na",
          "new_text": null,
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"http_output\", (char *)MBSTRG(current_http_output_encoding)->name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": "assoc_string",
          "new_api": null,
          "old_text": "assoc_string(return_value, \"http_output_conv_mimetypes\", name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"http_output_conv_mimetypes\", name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "mb_mbchar_bytes_ex",
          "new_api": null,
          "old_text": "mb_mbchar_bytes_ex(p, enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tnb = php_mb_mbchar_bytes_ex(p, enc);",
          "new_line_content": "\t\twhile (*p != '\\0') {",
          "content_same": false
        },
        {
          "line": 3225,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(2, 3)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(2, 3)",
          "new_line_content": "\tzend_string *encoding = NULL;",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": "RAM_STRING",
          "new_api": null,
          "old_text": "RAM_STRING(str, string.len)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(str, string.len)",
          "new_line_content": "\tint mapsize;",
          "content_same": false
        },
        {
          "line": 3227,
          "old_api": "RAM_ARRAY_HT",
          "new_api": null,
          "old_text": "RAM_ARRAY_HT(target_hash)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_ARRAY_HT(target_hash)",
          "new_line_content": "\tHashTable *target_hash;",
          "content_same": false
        },
        {
          "line": 2716,
          "old_api": "mbfl_string_init",
          "new_api": null,
          "old_text": "mbfl_string_init(&string)",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init(&string);",
          "new_line_content": "\tif (strict && size == 1) {",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": "_no_encoding2name",
          "new_api": null,
          "old_text": "_no_encoding2name(lang->mail_charset)) !=",
          "new_text": null,
          "old_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_charset)) != NULL) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": "_no_encoding2name",
          "new_api": null,
          "old_text": "_no_encoding2name(lang->mail_header_encoding)) !=",
          "new_text": null,
          "old_line_content": "\t\t\tif ((name = (char *)mbfl_no_encoding2name(lang->mail_header_encoding)) != NULL) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": "mbfl_identify_encoding",
          "new_api": null,
          "old_text": "mbfl_identify_encoding(&string, elist, size, strict)",
          "new_text": null,
          "old_line_content": "\tret = mbfl_identify_encoding(&string, elist, size, strict);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": "assoc_string",
          "new_api": null,
          "old_text": "assoc_string(return_value, \"mail_header_encoding\", name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tadd_assoc_string(return_value, \"mail_header_encoding\", name);",
          "new_line_content": "\t\tif (lang != NULL) {",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(encoding, 3);\n\ti",
          "new_text": null,
          "old_line_content": "\tstring.encoding = php_mb_get_encoding(encoding, 3);",
          "new_line_content": "\t\tZ_PARAM_OPTIONAL",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": "ZEND_VOIDP",
          "new_api": null,
          "old_text": "ZEND_VOIDP(elist)",
          "new_text": null,
          "old_line_content": "\t\tefree(ZEND_VOIDP(elist));",
          "new_line_content": "\t\tstring.len = str_len;",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "assoc_string",
          "new_api": null,
          "old_text": "assoc_string(return_value, \"mail_body_encoding\", name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tadd_assoc_string(return_value, \"mail_body_encoding\", name);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars));\n\t",
          "new_text": null,
          "old_line_content": "\t\tadd_assoc_long(return_value, \"illegal_chars\", MBSTRG(illegalchars));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "mb_mbchar_bytes_ex",
          "new_api": null,
          "old_text": "mb_mbchar_bytes_ex(p, enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tnbytes_char = php_mb_mbchar_bytes_ex(p, enc);",
          "new_line_content": "\t\tsize_t nbytes_char;",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "assoc_string",
          "new_api": null,
          "old_text": "assoc_string(return_value, \"encoding_translation\", \"Off\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"encoding_translation\", \"Off\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": "RETVAL_STRING",
          "new_api": null,
          "old_text": "RETVAL_STRING((char *)ret->name)",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRING((char *)ret->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(ret != NULL);\n\t/",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(ret != NULL);",
          "new_line_content": "\tif (convmap == NULL) {",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_detect_order_list);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tentry = MBSTRG(current_detect_order_list);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": "AL_STRINGL",
          "new_api": null,
          "old_text": "AL_STRINGL((char *)ret->val, ret->len);\n\te",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3247,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(ret->val);\n\te",
          "new_text": null,
          "old_line_content": "\tefree(ret->val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": "ZEND_PARSE_PARAMETERS_NONE",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_NONE()",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_NONE();",
          "new_line_content": "/* }}} */",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "y_init",
          "new_api": null,
          "old_text": "y_init(&row);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tarray_init(&row);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": "array_init",
          "new_api": null,
          "old_text": "array_init(return_value)",
          "new_text": null,
          "old_line_content": "\tarray_init(return_value);",
          "new_line_content": "/* {{{ Returns an array of all supported entity encodings */",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": "mbfl_get_supported_encodings",
          "new_api": null,
          "old_text": "mbfl_get_supported_encodings()",
          "new_text": null,
          "old_line_content": "\tfor (const mbfl_encoding **encodings = mbfl_get_supported_encodings(); *encodings; encodings++) {",
          "new_line_content": "PHP_FUNCTION(mb_list_encodings)",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": "add_next_index_string",
          "new_api": null,
          "old_text": "add_next_index_string(return_value, (*encodings)->name)",
          "new_text": null,
          "old_line_content": "\t\tadd_next_index_string(return_value, (*encodings)->name);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(internal_encoding));\n}",
          "new_text": null,
          "old_line_content": "\treturn php_mb_safe_strrchr_ex(s, c, nbytes, MBSTRG(internal_encoding));",
          "new_line_content": "/* }}} */",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": "assoc_string",
          "new_api": null,
          "old_text": "assoc_string(return_value, \"substitute_character\", \"none\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tadd_assoc_string(return_value, \"substitute_character\", \"none\");",
          "new_line_content": "\t\t\t\tentry++;",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": null,
          "old_line_content": "\t\t} else if (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_LONG) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": null,
          "old_line_content": "\t\t} else if (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_ENTITY) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": "ZEND_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_START(1, 1)",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "new_line_content": "PHP_FUNCTION(mb_encoding_aliases)",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": "_string_init_set",
          "new_api": null,
          "old_text": "_string_init_set(&haystack, enc);\n\tm",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init_set(&haystack, enc);",
          "new_line_content": "MBSTRING_API size_t php_mb_stripos(int mode, const char *old_haystack, size_t old_haystack_len, const char *old_needle, size_t old_needle_len, zend_long offset, const mbfl_encoding *enc)",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": "_string_init_set",
          "new_api": null,
          "old_text": "_string_init_set(&needle, enc);\n\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init_set(&needle, enc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "Z_PARAM_STR",
          "new_api": null,
          "old_text": "Z_PARAM_STR(encoding_name)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STR(encoding_name)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "ZEND_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_END()",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\tconst mbfl_encoding *encoding;",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": "php_mb_get_encoding",
          "new_api": null,
          "old_text": "php_mb_get_encoding(encoding_name, 1)",
          "new_text": null,
          "old_line_content": "\tencoding = php_mb_get_encoding(encoding_name, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_internal_encoding)->na",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING((char *)MBSTRG(current_internal_encoding)->name);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": "ring_convert_case",
          "new_api": null,
          "old_text": "ring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_haystack, old_haystack_len, &len, enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\thaystack.val = (unsigned char *)mbstring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_haystack, old_haystack_len, &len, enc);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"http_input\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_input\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": "add_next_index_string",
          "new_api": null,
          "old_text": "add_next_index_string(return_value, (char *)*alias)",
          "new_text": null,
          "old_line_content": "\t\t\tadd_next_index_string(return_value, (char *)*alias);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"http_output\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_output\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"http_output_conv_mimetypes\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"http_output_conv_mimetypes\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "ring_convert_case",
          "new_api": null,
          "old_text": "ring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_needle, old_needle_len, &len, enc);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tneedle.val = (unsigned char *)mbstring_convert_case(PHP_UNICODE_CASE_FOLD_SIMPLE, (char *)old_needle, old_needle_len, &len, enc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"mail_charset\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_charset\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"mail_header_encoding\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_header_encoding\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "_strpos",
          "new_api": null,
          "old_text": "_strpos(&haystack, &needle, offset, mode);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tn = mbfl_strpos(&haystack, &needle, offset, mode);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": "MBSTRG",
          "new_api": null,
          "old_text": "MBSTRG(current_internal_encoding)",
          "new_text": null,
          "old_line_content": "\tstring.encoding = MBSTRG(current_internal_encoding);",
          "new_line_content": "\tsize_t trans_enc_name_len;",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(haystack.val);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tefree(haystack.val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": "ZEND_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_START(1, 5)",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 5)",
          "new_line_content": "\tsize_t linefeed_len;",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": "Z_PARAM_STRING",
          "new_api": null,
          "old_text": "Z_PARAM_STRING(string_val, string.len)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "new_line_content": "\tzend_long indent = 0;",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(token, token_pos, 0);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tfld_name = zend_string_init(token, token_pos, 0);",
          "new_line_content": "\t\t\t\t\ttoken_pos++;",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(needle.val);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tefree(needle.val);",
          "new_line_content": "\tif (haystack.val) {",
          "content_same": false
        },
        {
          "line": 2787,
          "old_api": "Z_PARAM_STRING",
          "new_api": null,
          "old_text": "Z_PARAM_STRING(trans_enc_name, trans_enc_name_len)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(trans_enc_name, trans_enc_name_len)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"mail_body_encoding\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"mail_body_encoding\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"illegal_chars\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"illegal_chars\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": "ZEND_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_END()",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "\t\tZ_PARAM_OPTIONAL",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(\"On\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(\"On\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(http_input_list);\n\t*",
          "new_text": null,
          "old_line_content": "\t*list = (const zend_encoding **)MBSTRG(http_input_list);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(http_input_list_size);\n}\n",
          "new_text": null,
          "old_line_content": "\t*list_size = MBSTRG(http_input_list_size);",
          "new_line_content": "/* }}} */",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "php_mb_get_encoding",
          "new_api": null,
          "old_text": "php_mb_get_encoding(charset_name, 2)",
          "new_text": null,
          "old_line_content": "\t\tcharset = php_mb_get_encoding(charset_name, 2);",
          "new_line_content": "\tstring.val = (unsigned char*)string_val;",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(name);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\ttransenc = &mbfl_encoding_base64;",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"detect_order\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"detect_order\")) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(http_input_identify) = (",
          "new_text": null,
          "old_line_content": "\tMBSTRG(http_input_identify) = (const mbfl_encoding*)encoding;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "mbfl_no2encoding",
          "new_api": null,
          "old_text": "mbfl_no2encoding(lang->mail_header_encoding)",
          "new_text": null,
          "old_line_content": "\t\t\ttransenc = mbfl_no2encoding(lang->mail_header_encoding);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "_string_equals_literal_ci",
          "new_api": null,
          "old_text": "_string_equals_literal_ci(type, \"substitute_character\")) {\n",
          "new_text": null,
          "old_line_content": "\t} else if (zend_string_equals_literal_ci(type, \"substitute_character\")) {",
          "new_line_content": "\t\t\tfor (i = 0; i < n; i++) {",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(\"none\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(\"none\");",
          "new_line_content": "\t\t\t\tentry++;",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_filter_illegal_mode) == ",
          "new_text": null,
          "old_line_content": "\t\t} else if (MBSTRG(current_filter_illegal_mode) == MBFL_OUTPUTFILTER_ILLEGAL_MODE_LONG) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(\"long\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(\"long\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": "mbfl_string_init",
          "new_api": null,
          "old_text": "mbfl_string_init(&result)",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init(&result);",
          "new_line_content": "\t\t} else if (*trans_enc_name == 'Q' || *trans_enc_name == 'q') {",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": "mbfl_mime_header_encode",
          "new_api": null,
          "old_text": "mbfl_mime_header_encode(&string, &result, charset, transenc, linefeed, indent)",
          "new_text": null,
          "old_line_content": "\tret = mbfl_mime_header_encode(&string, &result, charset, transenc, linefeed, indent);",
          "new_line_content": "\t\t\ttransenc = &mbfl_encoding_qprint;",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": "ZEND_ASSERT",
          "new_api": null,
          "old_text": "ZEND_ASSERT(ret != NULL)",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(ret != NULL);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(\"On\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(\"On\");",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "RETVAL_STRINGL",
          "new_api": null,
          "old_text": "RETVAL_STRINGL((char *)ret->val, ret->len)",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t/* the string is already strdup()'ed */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "AL_STRING",
          "new_api": null,
          "old_text": "AL_STRING(\"Off\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETVAL_STRING(\"Off\");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": "MBSTRG",
          "new_api": null,
          "old_text": "MBSTRG(current_internal_encoding)",
          "new_text": null,
          "old_line_content": "\tstring.encoding = MBSTRG(current_internal_encoding);",
          "new_line_content": "PHP_FUNCTION(mb_decode_mimeheader)",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": "ZEND_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_START(1, 1)",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 1)",
          "new_line_content": "\tchar *string_val;",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": "Z_PARAM_STRING",
          "new_api": null,
          "old_text": "Z_PARAM_STRING(string_val, string.len)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "new_line_content": "\tmbfl_string string, result, *ret;",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "ZEND_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_END()",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "_convert_filter_new",
          "new_api": null,
          "old_text": "_convert_filter_new(encoding, &mbfl_encoding_wchar, mbfl_filt_check_errors, NULL, &filter);\n\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_convert_filter *filter = mbfl_convert_filter_new(encoding, &mbfl_encoding_wchar, mbfl_filt_check_errors, NULL, &filter);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "RETVAL_STRINGL",
          "new_api": null,
          "old_text": "RETVAL_STRINGL((char *)ret->val, ret->len)",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t/* the string is already strdup()'ed */",
          "new_line_content": "\tstring.val = (unsigned char*)string_val;",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "er->filter_function)(c, filter);",
          "new_api": null,
          "old_text": "er->filter_function)(c, filter);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t(filter->filter_function)(c, filter);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "_convert_filter_delete",
          "new_api": null,
          "old_text": "_convert_filter_delete(filter);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tmbfl_convert_filter_delete(filter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(token, token_pos, 0);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tfld_val = zend_string_init(token, token_pos, 0);",
          "new_line_content": "\t\t\t\t\t\tZEND_FALLTHROUGH;",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "_convert_filter_delete",
          "new_api": null,
          "old_text": "_convert_filter_delete(filter);\n\tr",
          "new_text": null,
          "old_line_content": "\tmbfl_convert_filter_delete(filter);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "ZEND_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "ZEND_PARSE_PARAMETERS_START(1, 3)",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 3)",
          "new_line_content": "\tmbfl_string string, result, *ret;",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "Z_PARAM_STRING",
          "new_api": null,
          "old_text": "Z_PARAM_STRING(string_val, string.len)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(string_val, string.len)",
          "new_line_content": "\tchar *optstr = NULL, *string_val;",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(fld_name));\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tphp_strtoupper(ZSTR_VAL(fld_name), ZSTR_LEN(fld_name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "_STR",
          "new_api": null,
          "old_text": "_STR(&val, fld_val);\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tZVAL_STR(&val, fld_val);",
          "new_line_content": "\t\t\t\t\t\t\tif (fld_name != NULL && fld_val != NULL) {",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "Z_PARAM_STR_OR_NULL",
          "new_api": null,
          "old_text": "Z_PARAM_STR_OR_NULL(encname)",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STR_OR_NULL(encname)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3373,
          "old_api": "_hash_update",
          "new_api": null,
          "old_text": "_hash_update(ht, fld_name, &val);\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tzend_hash_update(ht, fld_name, &val);",
          "new_line_content": "\t\t\t\t\t\t\t\t/* FIXME: some locale free implementation is",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "S_RECURSIVE",
          "new_api": null,
          "old_text": "S_RECURSIVE(vars)) {\n",
          "new_text": null,
          "old_line_content": "\tif (GC_IS_RECURSIVE(vars)) {",
          "new_line_content": "\tzval *entry;",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_WARNING, \"Cannot not handle circular references\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tphp_error_docref(NULL, E_WARNING, \"Cannot not handle circular references\");",
          "new_line_content": "\tint valid = 1;",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "RY_PROTECT_RECURSION",
          "new_api": null,
          "old_text": "RY_PROTECT_RECURSION(vars);\n\tZ",
          "new_text": null,
          "old_line_content": "\tGC_TRY_PROTECT_RECURSION(vars);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(key), en",
          "new_text": null,
          "old_line_content": "\t\t\tif (!php_mb_check_encoding(ZSTR_VAL(key), ZSTR_LEN(key), encoding)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": "RLEN_P",
          "new_api": null,
          "old_text": "RLEN_P(entry), en",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!php_mb_check_encoding(Z_STRVAL_P(entry), Z_STRLEN_P(entry), encoding)) {",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(entry), en",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!php_mb_check_encoding_recursive(Z_ARRVAL_P(entry), encoding)) {",
          "new_line_content": "\t\t\t\t\tvalid = 0;",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(token, token_pos, 0);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tfld_val = zend_string_init(token, token_pos, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": "_HASH_FOREACH_END",
          "new_api": null,
          "old_text": "_HASH_FOREACH_END();\n\tG",
          "new_text": null,
          "old_line_content": "\t} ZEND_HASH_FOREACH_END();",
          "new_line_content": "\t\t\tdefault:",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "RY_UNPROTECT_RECURSION",
          "new_api": null,
          "old_text": "RY_UNPROTECT_RECURSION(vars);\n\tr",
          "new_text": null,
          "old_line_content": "\tGC_TRY_UNPROTECT_RECURSION(vars);",
          "new_line_content": "\t\t\t\t/* Other types are error. */",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(fld_name));\n\t",
          "new_text": null,
          "old_line_content": "\t\t\tphp_strtoupper(ZSTR_VAL(fld_name), ZSTR_LEN(fld_name));",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": "_STR",
          "new_api": null,
          "old_text": "_STR(&val, fld_val);\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\tZVAL_STR(&val, fld_val);",
          "new_line_content": "\t\tif (fld_name != NULL && fld_val != NULL) {",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "_hash_update",
          "new_api": null,
          "old_text": "_hash_update(ht, fld_name, &val);\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\tzend_hash_update(ht, fld_name, &val);",
          "new_line_content": "\t\t\t/* FIXME: some locale free implementation is",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(0, 2)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(0, 2)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": "RAM_STR_OR_NULL",
          "new_api": null,
          "old_text": "RAM_STR_OR_NULL(enc)\n\tZE",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STR_OR_NULL(enc)",
          "new_line_content": "\tconst mbfl_encoding *encoding;",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(enc, 2);\n\ti",
          "new_text": null,
          "old_line_content": "\tencoding = php_mb_get_encoding(enc, 2);",
          "new_line_content": "\t\tZ_PARAM_OPTIONAL",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "mb_check_encoding_recursive",
          "new_api": null,
          "old_text": "mb_check_encoding_recursive(input_ht, encoding));\n\t",
          "new_text": null,
          "old_line_content": "\t\tRETURN_BOOL(php_mb_check_encoding_recursive(input_ht, encoding));",
          "new_line_content": "\tif (!encoding) {",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "STR",
          "new_api": null,
          "old_text": "STR(\"mail.force_extra_parameters\");\n\ts",
          "new_text": null,
          "old_line_content": "\tchar *force_extra_parameters = INI_STR(\"mail.force_extra_parameters\");",
          "new_line_content": "\tzend_string *extra_cmd = NULL;",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(input_str), en",
          "new_text": null,
          "old_line_content": "\t\tRETURN_BOOL(php_mb_check_encoding(ZSTR_VAL(input_str), ZSTR_LEN(input_str), encoding));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_DEPRECATED,\n\t\t\t\"Calling mb_check_encoding() without argument is deprecated\");\n\n\t",
          "new_text": null,
          "old_line_content": "\t\tphp_error_docref(NULL, E_DEPRECATED,",
          "new_line_content": "\tif (input_ht) {",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(encname, 3);\n\ti",
          "new_text": null,
          "old_line_content": "\tstring.encoding = php_mb_get_encoding(encname, 3);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t}",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(illegalchars) == ",
          "new_text": null,
          "old_line_content": "\t\tRETURN_BOOL(MBSTRG(illegalchars) == 0);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(ret != NULL);\n\t/",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(ret != NULL);",
          "new_line_content": "\tif (!string.encoding) {",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "AL_STRINGL",
          "new_api": null,
          "old_text": "AL_STRINGL((char *)ret->val, ret->len);\t\t/",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL((char *)ret->val, ret->len);\t\t/* the string is already strdup()'ed */",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(ret->val);\n}\n",
          "new_text": null,
          "old_line_content": "\tefree(ret->val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(str_len > 0);\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(str_len > 0);",
          "new_line_content": "\tconst uint32_t enc_name_arg_num)",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(enc_name, enc_name_arg_num);\n\ti",
          "new_text": null,
          "old_line_content": "\tenc = php_mb_get_encoding(enc_name, enc_name_arg_num);",
          "new_line_content": "\tconst mbfl_encoding *enc;",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "_memory_device_init",
          "new_api": null,
          "old_text": "_memory_device_init(&device, 0, 0);\n\tm",
          "new_text": null,
          "old_line_content": "\tmbfl_memory_device_init(&device, 0, 0);",
          "new_line_content": "\tHashTable ht_headers;",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "_DEREF",
          "new_api": null,
          "old_text": "_DEREF(var);\n\ti",
          "new_text": null,
          "old_line_content": "\tZVAL_DEREF(var);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "PE_P",
          "new_api": null,
          "old_text": "PE_P(var) == ",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(var) == IS_STRING) {",
          "new_line_content": "\tmbfl_string string;",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tstring.val = (unsigned char *)Z_STRVAL_P(var);",
          "new_line_content": "\tHashTable *ht;",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "RLEN_P",
          "new_api": null,
          "old_text": "RLEN_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tstring.len = Z_STRLEN_P(var);",
          "new_line_content": "\tzval *entry;",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "_encoding_detector_feed",
          "new_api": null,
          "old_text": "_encoding_detector_feed(identd, &string)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (mbfl_encoding_detector_feed(identd, &string)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(&orig_str);\n\tm",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init(&orig_str);",
          "new_line_content": "\tzval *s;",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(&conv_str);\n\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init(&conv_str);",
          "new_line_content": "\textern void mbfl_memory_device_unput(mbfl_memory_device *device);",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(language));\n\t",
          "new_text": null,
          "old_line_content": "\tlang = mbfl_no2language(MBSTRG(language));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "mb_is_unsupported_no_encoding",
          "new_api": null,
          "old_text": "mb_is_unsupported_no_encoding(no_enc)) {\n",
          "new_text": null,
          "old_line_content": "\tif (php_mb_is_unsupported_no_encoding(no_enc)) {",
          "new_line_content": "\tif (!enc) {",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": "_no2encoding",
          "new_api": null,
          "old_text": "_no2encoding(lang->mail_charset);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\ttran_cs = mbfl_no2encoding(lang->mail_charset);",
          "new_line_content": "\ttran_cs = &mbfl_encoding_utf8;",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "_no2encoding",
          "new_api": null,
          "old_text": "_no2encoding(lang->mail_header_encoding);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\thead_enc = mbfl_no2encoding(lang->mail_header_encoding);",
          "new_line_content": "\thead_enc = &mbfl_encoding_base64;",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "_no2encoding",
          "new_api": null,
          "old_text": "_no2encoding(lang->mail_body_encoding);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tbody_enc = mbfl_no2encoding(lang->mail_body_encoding);",
          "new_line_content": "\tbody_enc = &mbfl_encoding_base64;",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "_value_error",
          "new_api": null,
          "old_text": "_value_error(\"mb_ord() does not support the \\\"%s\\\" encoding\", enc->name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tzend_value_error(\"mb_ord() does not support the \\\"%s\\\" encoding\", enc->name);",
          "new_line_content": "\t\treturn -2;",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": "_wchar_device_init",
          "new_api": null,
          "old_text": "_wchar_device_init(&dev);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tmbfl_wchar_device_init(&dev);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "_convert_filter_new",
          "new_api": null,
          "old_text": "_convert_filter_new(enc, &mbfl_encoding_wchar, mbfl_wchar_device_output, 0, &dev);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tfilter = mbfl_convert_filter_new(enc, &mbfl_encoding_wchar, mbfl_wchar_device_output, 0, &dev);",
          "new_line_content": "\t\tmbfl_wchar_device dev;",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": "_OF",
          "new_api": null,
          "old_text": "_OF(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tht = HASH_OF(var);",
          "new_line_content": "\t\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": "RAM_PATH",
          "new_api": null,
          "old_text": "RAM_PATH(message, message_len)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_PATH(message, message_len)",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "_ASSERT",
          "new_api": null,
          "old_text": "_ASSERT(filter != NULL);\n\n\t",
          "new_text": null,
          "old_line_content": "\t\tZEND_ASSERT(filter != NULL);",
          "new_line_content": "\t\tzend_long cp;",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": "ecursive_encoder_detector_feed",
          "new_api": null,
          "old_text": "ecursive_encoder_detector_feed(identd, entry, recursion_error)) {\n",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (mb_recursive_encoder_detector_feed(identd, entry, recursion_error)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": "FCOUNTED_P",
          "new_api": null,
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(str_headers)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (strlen(ZSTR_VAL(str_headers)) != ZSTR_LEN(str_headers)) {",
          "new_line_content": "\t\tZ_PARAM_ARRAY_HT_OR_STR(headers_ht, str_headers)",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "trim",
          "new_api": null,
          "old_text": "trim(str_headers, NULL, 0, 2);\n\t}",
          "new_text": null,
          "old_line_content": "\t\tstr_headers = php_trim(str_headers, NULL, 0, 2);",
          "new_line_content": "\tif (str_headers) {",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "_convert_filter_delete",
          "new_api": null,
          "old_text": "_convert_filter_delete(filter);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tmbfl_convert_filter_delete(filter);",
          "new_line_content": "\t\t\tcp = -1;",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": "_wchar_device_clear",
          "new_api": null,
          "old_text": "_wchar_device_clear(&dev);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tmbfl_wchar_device_clear(&dev);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "FCOUNTED_P",
          "new_api": null,
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "\t\t\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": "PROTECT_RECURSION_P",
          "new_api": null,
          "old_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": "_LEN",
          "new_api": null,
          "old_text": "_LEN(str_headers));\n\t",
          "new_text": null,
          "old_line_content": "\t\t_php_mbstr_parse_mail_headers(&ht_headers, ZSTR_VAL(str_headers), ZSTR_LEN(str_headers));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "_hash_str_find",
          "new_api": null,
          "old_text": "_hash_str_find(&ht_headers, \"CONTENT-TYPE\", sizeof(\"CONTENT-TYPE\") - 1))) {",
          "new_text": null,
          "old_line_content": "\tif ((s = zend_hash_str_find(&ht_headers, \"CONTENT-TYPE\", sizeof(\"CONTENT-TYPE\") - 1))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(1, 2)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(1, 2)",
          "new_line_content": "\tchar *str;",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "RAM_STRING",
          "new_api": null,
          "old_text": "RAM_STRING(str, str_len)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STRING(str, str_len)",
          "new_line_content": "\tsize_t str_len;",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "_DEREF",
          "new_api": null,
          "old_text": "_DEREF(var);\n\ti",
          "new_text": null,
          "old_line_content": "\tZVAL_DEREF(var);",
          "new_line_content": "\tmbfl_string string, result, *ret;",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "PE_P",
          "new_api": null,
          "old_text": "PE_P(var) == ",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(var) == IS_STRING) {",
          "new_line_content": "\tHashTable *ht;",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tstring.val = (unsigned char *)Z_STRVAL_P(var);",
          "new_line_content": "\tzval *entry, *orig_var;",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "RLEN_P",
          "new_api": null,
          "old_text": "RLEN_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tstring.len = Z_STRLEN_P(var);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "_buffer_converter_feed_result",
          "new_api": null,
          "old_text": "_buffer_converter_feed_result(convd, &string, &result);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tret = mbfl_buffer_converter_feed_result(convd, &string, &result);",
          "new_line_content": "\torig_var = var;",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(s), ';",
          "new_text": null,
          "old_line_content": "\t\tp = strchr(Z_STRVAL_P(s), ';');",
          "new_line_content": "\t\tchar *tmp;",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "_argument_value_error",
          "new_api": null,
          "old_text": "_argument_value_error(1, \"must not be empty\");\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(1, \"must not be empty\");",
          "new_line_content": "\t\tZ_PARAM_OPTIONAL",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t}",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZ_PARAM_STR_OR_NULL(enc)",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "mb_ord",
          "new_api": null,
          "old_text": "mb_ord(str, str_len, enc, 2);\n\n\t",
          "new_text": null,
          "old_line_content": "\tcp = php_mb_ord(str, str_len, enc, 2);",
          "new_line_content": "\tif (str_len == 0) {",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "strtok_r",
          "new_api": null,
          "old_text": "strtok_r(p, \"= \", &tmp)) !=",
          "new_text": null,
          "old_line_content": "\t\t\t\tif ((param_name = php_strtok_r(p, \"= \", &tmp)) != NULL) {",
          "new_line_content": "\t\t\tdo {",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "asecmp",
          "new_api": null,
          "old_text": "asecmp(param_name, \"charset\") == ",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (strcasecmp(param_name, \"charset\") == 0) {",
          "new_line_content": "\t\t\t\t++p;",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "PE_P",
          "new_api": null,
          "old_text": "PE_P(var) == ",
          "new_text": null,
          "old_line_content": "\t\tif (Z_TYPE_P(var) == IS_ARRAY) {",
          "new_line_content": "\t\t\t// TODO: avoid reallocation ???",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": "RN_THROWS",
          "new_api": null,
          "old_text": "RN_THROWS();\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "strtok_r",
          "new_api": null,
          "old_text": "strtok_r(NULL, \"= \\\"\", &tmp);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tcharset = php_strtok_r(NULL, \"= \\\"\", &tmp);",
          "new_line_content": "\t\t\tif (*p != '\\0') {",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": "FCOUNTED_P",
          "new_api": null,
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": "OTECT_RECURSION_P",
          "new_api": null,
          "old_text": "OTECT_RECURSION_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tZ_PROTECT_RECURSION_P(var);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "error_docref",
          "new_api": null,
          "old_text": "error_docref(NULL, E_WARNING, \"Unsupported charset \\\"%s\\\" - will be regarded as ascii\", charset);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Unsupported charset \\\"%s\\\" - will be regarded as ascii\", charset);",
          "new_line_content": "\t\t\t\t\t\tif (charset != NULL) {",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": "_OF",
          "new_api": null,
          "old_text": "_OF(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tht = HASH_OF(var);",
          "new_line_content": "\t\t\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "ecursive_convert_variable",
          "new_api": null,
          "old_text": "ecursive_convert_variable(convd, entry)) {\n",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (mb_recursive_convert_variable(convd, entry)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "FCOUNTED_P",
          "new_api": null,
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "mb_get_encoding",
          "new_api": null,
          "old_text": "mb_get_encoding(enc_name, enc_name_arg_num);\n\ti",
          "new_text": null,
          "old_line_content": "\tenc = php_mb_get_encoding(enc_name, enc_name_arg_num);",
          "new_line_content": "\tenum mbfl_no_encoding no_enc;",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "_hash_str_find",
          "new_api": null,
          "old_text": "_hash_str_find(&ht_headers, \"CONTENT-TRANSFER-ENCODING\", sizeof(\"CONTENT-TRANSFER-ENCODING\") - 1))) {",
          "new_text": null,
          "old_line_content": "\tif ((s = zend_hash_str_find(&ht_headers, \"CONTENT-TRANSFER-ENCODING\", sizeof(\"CONTENT-TRANSFER-ENCODING\") - 1))) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": "FCOUNTED_P",
          "new_api": null,
          "old_text": "FCOUNTED_P(var)) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (Z_REFCOUNTED_P(var)) {",
          "new_line_content": "\t\t\t\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": "PROTECT_RECURSION_P",
          "new_api": null,
          "old_text": "PROTECT_RECURSION_P(var);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tZ_UNPROTECT_RECURSION_P(var);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "PE_P",
          "new_api": null,
          "old_text": "PE_P(s) == ",
          "new_text": null,
          "old_line_content": "\t\tZEND_ASSERT(Z_TYPE_P(s) == IS_STRING);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(s));\n\t",
          "new_text": null,
          "old_line_content": "\t\t_body_enc = mbfl_name2encoding(Z_STRVAL_P(s));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "mb_is_unsupported_no_encoding",
          "new_api": null,
          "old_text": "mb_is_unsupported_no_encoding(no_enc)) {\n",
          "new_text": null,
          "old_line_content": "\tif (php_mb_is_unsupported_no_encoding(no_enc)) {",
          "new_line_content": "\tif (!enc) {",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": "_value_error",
          "new_api": null,
          "old_text": "_value_error(\"mb_chr() does not support the \\\"%s\\\" encoding\", enc->name);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tzend_value_error(\"mb_chr() does not support the \\\"%s\\\" encoding\", enc->name);",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": "RVAL_P",
          "new_api": null,
          "old_text": "RVAL_P(s));\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tphp_error_docref(NULL, E_WARNING, \"Unsupported transfer encoding \\\"%s\\\" - will be regarded as 8bit\", Z_STRVAL_P(s));",
          "new_line_content": "\t\t\tcase mbfl_no_encoding_8bit:",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "mb_is_no_encoding_utf8",
          "new_api": null,
          "old_text": "mb_is_no_encoding_utf8(no_enc)) {\n",
          "new_text": null,
          "old_line_content": "\tif (php_mb_is_no_encoding_utf8(no_enc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": "_CHAR",
          "new_api": null,
          "old_text": "_CHAR(cp);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tret = ZSTR_CHAR(cp);",
          "new_line_content": "\t\tif (cp > 0xd7ff && 0xe000 > cp) {",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": "_string_alloc",
          "new_api": null,
          "old_text": "_string_alloc(2, 0);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\tret = zend_string_alloc(2, 0);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "ndup",
          "new_api": null,
          "old_text": "ndup(to, to_len);\n\t\t",
          "new_text": null,
          "old_line_content": "\t\tto_r = estrndup(to, to_len);",
          "new_line_content": "\t\tsuppressed_hdrs.cnt_trans_enc = 1;",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "_VAL",
          "new_api": null,
          "old_text": "_VAL(ret)[0] ",
          "new_text": null,
          "old_line_content": "\t\t\tZSTR_VAL(ret)[0] = 0xc0 | (cp >> 6);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "ace",
          "new_api": null,
          "old_text": "ace((unsigned char) to_r[to_len - 1])) {\n",
          "new_text": null,
          "old_line_content": "\t\t\tif (!isspace((unsigned char) to_r[to_len - 1])) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4077,
          "old_api": "_VAL",
          "new_api": null,
          "old_text": "_VAL(ret)[1] ",
          "new_text": null,
          "old_line_content": "\t\t\tZSTR_VAL(ret)[1] = 0x80 | (cp & 0x3f);",
          "new_line_content": "\t\tif (cp < 0x80) {",
          "content_same": false
        },
        {
          "line": 3056,
          "old_api": "_PARSE_PARAMETERS_START",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_START(3, -1)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_START(3, -1)",
          "new_line_content": "\tint n, argc;",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": "RAM_STR",
          "new_api": null,
          "old_text": "RAM_STR(to_enc_str)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_STR(to_enc_str)",
          "new_line_content": "\tsize_t elistsz;",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "RAM_ARRAY_HT_OR_STR",
          "new_api": null,
          "old_text": "RAM_ARRAY_HT_OR_STR(from_enc_ht, from_enc_str)\n\t\tZ",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_ARRAY_HT_OR_STR(from_enc_ht, from_enc_str)",
          "new_line_content": "\tconst mbfl_encoding **elist;",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "RAM_VARIADIC",
          "new_api": null,
          "old_text": "RAM_VARIADIC('+', args, argc)\n\tZE",
          "new_text": null,
          "old_line_content": "\t\tZ_PARAM_VARIADIC('+', args, argc)",
          "new_line_content": "\tint recursion_error = 0;",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "_PARSE_PARAMETERS_END",
          "new_api": null,
          "old_text": "_PARSE_PARAMETERS_END();\n\n\t",
          "new_text": null,
          "old_line_content": "\tZEND_PARSE_PARAMETERS_END();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": "trl",
          "new_api": null,
          "old_text": "trl((unsigned char) to_r[i])) {\n",
          "new_text": null,
          "old_line_content": "\t\tif (iscntrl((unsigned char) to_r[i])) {",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "_VAL",
          "new_api": null,
          "old_text": "_VAL(ret)[3] ",
          "new_text": null,
          "old_line_content": "\t\t\tZSTR_VAL(ret)[3] = 0;",
          "new_line_content": "\t\t} else if (cp < 0x10000) {",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": "_VAL",
          "new_api": null,
          "old_text": "_VAL(ret)[3] ",
          "new_text": null,
          "old_line_content": "\t\t\tZSTR_VAL(ret)[3] = 0x80 | (cp & 0x3f);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": "RG",
          "new_api": null,
          "old_text": "RG(current_internal_encoding);\n\tm",
          "new_text": null,
          "old_line_content": "\tfrom_encoding = MBSTRG(current_internal_encoding);",
          "new_line_content": "\tif (!to_encoding) {",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "_string_init",
          "new_api": null,
          "old_text": "_string_init(&result);\n\n\t",
          "new_text": null,
          "old_line_content": "\tmbfl_string_init(&result);",
          "new_line_content": "\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 139,
      "total_additions": 282,
      "total_deletions": 281,
      "total_api_changes": 702
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 702,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          2721,
          2724,
          2717
        ]
      }
    },
    "api_calls_before": 1325,
    "api_calls_after": 1326,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 4,
      "total_diff_lines": 25
    }
  }
}
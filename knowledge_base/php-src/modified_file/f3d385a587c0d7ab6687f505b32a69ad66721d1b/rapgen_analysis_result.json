{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/f3d385a587c0d7ab6687f505b32a69ad66721d1b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/f3d385a587c0d7ab6687f505b32a69ad66721d1b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/f3d385a587c0d7ab6687f505b32a69ad66721d1b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/f3d385a587c0d7ab6687f505b32a69ad66721d1b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 790,
          "old_api": "MAKE_STD_ZVAL",
          "new_api": "ZVAL_STRINGL",
          "old_text": "MAKE_STD_ZVAL(autoload_function)",
          "new_text": "ZVAL_STRINGL(&autoload_function, \"__autoload\", sizeof(\"__autoload\")-1,  0)",
          "old_line_content": "\tMAKE_STD_ZVAL(autoload_function);",
          "new_line_content": "\tZVAL_STRINGL(&autoload_function, \"__autoload\", sizeof(\"__autoload\")-1,  0);",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "MAKE_STD_ZVAL",
          "new_api": "ZVAL_STRINGL",
          "old_text": "MAKE_STD_ZVAL(class_name)",
          "new_text": "ZVAL_STRINGL(class_name_ptr, name, name_length, 0)",
          "old_line_content": "\tMAKE_STD_ZVAL(class_name);",
          "new_line_content": "\tZVAL_STRINGL(class_name_ptr, name, name_length, 0);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "strlen",
          "new_api": "strcat",
          "old_text": "strlen(str)",
          "new_text": "strcat(pv.value.str.val, str)",
          "old_line_content": "\t\tpv.value.str.len = strlen(str)+sizeof(\"return  ;\")-1;",
          "new_line_content": "\t\tstrcat(pv.value.str.val, str);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "emalloc",
          "new_api": "strcat",
          "old_text": "emalloc(pv.value.str.len+1)",
          "new_text": "strcat(pv.value.str.val, \" ;\")",
          "old_line_content": "\t\tpv.value.str.val = emalloc(pv.value.str.len+1);",
          "new_line_content": "\t\tstrcat(pv.value.str.val, \" ;\");",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "strcat",
          "new_api": "strlen",
          "old_text": "strcat(pv.value.str.val, str)",
          "new_text": "strlen(str)",
          "old_line_content": "\t\tstrcat(pv.value.str.val, str);",
          "new_line_content": "\t\tpv.value.str.len = strlen(str);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "strcat",
          "new_api": "estrndup",
          "old_text": "strcat(pv.value.str.val, \" ;\")",
          "new_text": "estrndup(str, pv.value.str.len)",
          "old_line_content": "\t\tstrcat(pv.value.str.val, \" ;\");",
          "new_line_content": "\t\tpv.value.str.val = estrndup(str, pv.value.str.len);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "EG",
          "new_api": "efree",
          "old_text": "EG(active_op_array)",
          "new_text": "efree(new_op_array)",
          "old_line_content": "\t\tEG(active_op_array) = original_active_op_array;",
          "new_line_content": "\t\tefree(new_op_array);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "zend_eval_string",
          "new_api": "EG",
          "old_text": "zend_eval_string(str, retval_ptr, string_name TSRMLS_CC)",
          "new_text": "EG(exception)",
          "old_line_content": "\tresult = zend_eval_string(str, retval_ptr, string_name TSRMLS_CC);",
          "new_line_content": "\t\tzval_ptr_dtor(&EG(exception));",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "CG",
          "new_api": "INIT_ZVAL",
          "old_text": "CG(active_op_array)",
          "new_text": "INIT_ZVAL(ret_opline->op1.u.constant)",
          "old_line_content": "\tret_opline = get_next_op(CG(active_op_array) TSRMLS_CC);",
          "new_line_content": "\tINIT_ZVAL(ret_opline->op1.u.constant);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "INIT_ZVAL",
          "new_api": "CG",
          "old_text": "INIT_ZVAL(ret_opline->op1.u.constant)",
          "new_text": "CG(active_op_array)",
          "old_line_content": "\tINIT_ZVAL(ret_opline->op1.u.constant);",
          "new_line_content": "\tif (!CG(active_op_array)->start_op) {",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "SET_UNUSED",
          "new_api": "CG",
          "old_text": "SET_UNUSED(ret_opline->op2)",
          "new_text": "CG(active_op_array)",
          "old_line_content": "\tSET_UNUSED(ret_opline->op2);",
          "new_line_content": "\t\tCG(active_op_array)->start_op = CG(active_op_array)->opcodes;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "CG",
          "new_api": "zval_ptr_dtor",
          "old_text": "CG(active_op_array)",
          "new_text": "zval_ptr_dtor(&local_retval)",
          "old_line_content": "\tEG(active_op_array) = CG(active_op_array);",
          "new_line_content": "\t\tzval_ptr_dtor(&local_retval);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "zval_ptr_dtor",
          "new_api": "CG",
          "old_text": "zval_ptr_dtor(&local_retval)",
          "new_text": "CG(active_op_array)",
          "old_line_content": "\t\tzval_ptr_dtor(&local_retval);",
          "new_line_content": "\tCG(active_op_array)->last--;\t/* get rid of that ZEND_RETURN */",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "TSRMLS_FETCH",
          "new_api": "zend_on_timeout",
          "old_text": "TSRMLS_FETCH()",
          "new_text": "zend_on_timeout(EG(timeout_seconds) TSRMLS_CC)",
          "old_line_content": "\tTSRMLS_FETCH();",
          "new_line_content": "\t\tzend_on_timeout(EG(timeout_seconds) TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "zend_on_timeout",
          "new_api": "zend_error",
          "old_text": "zend_on_timeout(EG(timeout_seconds) TSRMLS_CC)",
          "new_text": "zend_error(E_ERROR, \"Maximum execution time of %d second%s exceeded\",\n\t\t\t  EG(timeout_seconds), EG(timeout_seconds) == 1 ? \"\" : \"s\")",
          "old_line_content": "\t\tzend_on_timeout(EG(timeout_seconds) TSRMLS_CC);",
          "new_line_content": "\tzend_error(E_ERROR, \"Maximum execution time of %d second%s exceeded\",",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "HBRUSH)(COLOR_BACKGROUND + 5)",
          "new_api": "RegisterClass",
          "old_text": "HBRUSH)(COLOR_BACKGROUND + 5)",
          "new_text": "RegisterClass(&wc)",
          "old_line_content": "\twc.hbrBackground=(HBRUSH)(COLOR_BACKGROUND + 5);",
          "new_line_content": "\tif (!RegisterClass(&wc)) {",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "RegisterClass",
          "new_api": "CreateWindow",
          "old_text": "RegisterClass(&wc)",
          "new_text": "CreateWindow(wc.lpszClassName, wc.lpszClassName, 0, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, NULL, NULL)",
          "old_line_content": "\tif (!RegisterClass(&wc)) {",
          "new_line_content": "\ttimeout_window = CreateWindow(wc.lpszClassName, wc.lpszClassName, 0, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "CreateWindow",
          "new_api": "SendMessage",
          "old_text": "CreateWindow(wc.lpszClassName, wc.lpszClassName, 0, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, NULL, NULL)",
          "new_text": "SendMessage(timeout_window, message.message, message.wParam, message.lParam)",
          "old_line_content": "\ttimeout_window = CreateWindow(wc.lpszClassName, wc.lpszClassName, 0, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, NULL, NULL);",
          "new_line_content": "\t\tSendMessage(timeout_window, message.message, message.wParam, message.lParam);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "setitimer",
          "new_api": "sigaddset",
          "old_text": "setitimer(ITIMER_PROF, &t_r, NULL)",
          "new_text": "sigaddset(&sigset, SIGPROF)",
          "old_line_content": "\t\tsetitimer(ITIMER_PROF, &t_r, NULL);",
          "new_line_content": "\t\tsigaddset(&sigset, SIGPROF);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "signal",
          "new_api": "sigprocmask",
          "old_text": "signal(SIGPROF, zend_timeout)",
          "new_text": "sigprocmask(SIG_UNBLOCK, &sigset, NULL)",
          "old_line_content": "\t\tsignal(SIGPROF, zend_timeout);",
          "new_line_content": "\t\tsigprocmask(SIG_UNBLOCK, &sigset, NULL);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "EG",
          "new_api": "zend_error",
          "old_text": "EG(scope)",
          "new_text": "zend_error(E_ERROR, \"Cannot access parent:: when no class scope is active\")",
          "old_line_content": "\t\t\treturn EG(scope);",
          "new_line_content": "\t\t\t\tzend_error(E_ERROR, \"Cannot access parent:: when no class scope is active\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1029,
          "old_api": null,
          "new_api": "DestroyWindow",
          "old_text": null,
          "new_text": "DestroyWindow(timeout_window)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\tDestroyWindow(timeout_window);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "UnregisterClass",
          "old_text": null,
          "new_text": "UnregisterClass(wc.lpszClassName, NULL)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tUnregisterClass(wc.lpszClassName, NULL);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(interactive)",
          "old_line_content": "\tzend_op *ret_opline;",
          "new_line_content": "\tif (!CG(interactive)",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "\tzval *local_retval=NULL;",
          "new_line_content": "\t\t|| CG(active_op_array)->backpatch_count>0",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "",
          "new_line_content": "\t\t|| CG(active_op_array)->function_name",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "CreateEvent",
          "old_text": null,
          "new_text": "CreateEvent(NULL, FALSE, FALSE, NULL)",
          "old_line_content": "",
          "new_line_content": "\ttimeout_thread_event = CreateEvent(NULL, FALSE, FALSE, NULL);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "_beginthreadex",
          "old_text": null,
          "new_text": "_beginthreadex(NULL, 0, timeout_thread_proc, NULL, 0, &timeout_thread_id)",
          "old_line_content": "void zend_init_timeout_thread()",
          "new_line_content": "\t_beginthreadex(NULL, 0, timeout_thread_proc, NULL, 0, &timeout_thread_id);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "WaitForSingleObject",
          "old_text": null,
          "new_text": "WaitForSingleObject(timeout_thread_event, INFINITE)",
          "old_line_content": "{",
          "new_line_content": "\tWaitForSingleObject(timeout_thread_event, INFINITE);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\tret_opline = get_next_op(CG(active_op_array) TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "SET_UNUSED",
          "old_text": null,
          "new_text": "SET_UNUSED(ret_opline->op2)",
          "old_line_content": "\tret_opline->opcode = ZEND_RETURN;",
          "new_line_content": "\tSET_UNUSED(ret_opline->op2);",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "INIT_PZVAL",
          "old_text": null,
          "new_text": "INIT_PZVAL(class_name_ptr)",
          "old_line_content": "",
          "new_line_content": "\tINIT_PZVAL(class_name_ptr);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "PostThreadMessage",
          "old_text": null,
          "new_text": "PostThreadMessage(timeout_thread_id, WM_QUIT, 0, 0)",
          "old_line_content": "\tif (!timeout_thread_initialized) {",
          "new_line_content": "\tPostThreadMessage(timeout_thread_id, WM_QUIT, 0, 0);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "\t}",
          "new_line_content": "\tend=CG(active_op_array)->opcodes+CG(active_op_array)->last;",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(exception)",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\tif (EG(exception)) {",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"__autoload threw an exception\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tzend_error(E_ERROR, \"__autoload threw an exception\");",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "TSRMLS_FETCH",
          "old_text": null,
          "new_text": "TSRMLS_FETCH()",
          "old_line_content": "",
          "new_line_content": "\tTSRMLS_FETCH();",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(timeout_seconds)",
          "old_line_content": "{",
          "new_line_content": "\tEG(timeout_seconds) = seconds;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "zval_ptr_dtor",
          "old_text": null,
          "new_text": "zval_ptr_dtor(&retval_ptr)",
          "old_line_content": "\t}",
          "new_line_content": "\tzval_ptr_dtor(&retval_ptr);",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "InterlockedIncrement",
          "old_text": null,
          "new_text": "InterlockedIncrement(&timeout_thread_initialized)",
          "old_line_content": "",
          "new_line_content": "\tif (timeout_thread_initialized==0 && InterlockedIncrement(&timeout_thread_initialized)==1) {",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(class_table)",
          "old_line_content": "\t/* If an exception is thrown retval_ptr will be NULL but we bailout before we reach this point */",
          "new_line_content": "\treturn zend_hash_find(EG(class_table), name, name_length + 1, (void **) ce);",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(return_value_ptr_ptr)",
          "old_line_content": "\t\topline++;",
          "new_line_content": "\tEG(return_value_ptr_ptr) = &local_retval;",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "    }",
          "new_line_content": "\tEG(active_op_array) = CG(active_op_array);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "",
          "new_line_content": "\tzend_execute(CG(active_op_array) TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "zend_init_timeout_thread",
          "old_text": null,
          "new_text": "zend_init_timeout_thread()",
          "old_line_content": "\t\t/* We start up this process-wide thread here and not in zend_startup(), because if Zend",
          "new_line_content": "\t\tzend_init_timeout_thread();",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "GetCurrentThreadId",
          "old_text": null,
          "new_text": "GetCurrentThreadId()",
          "old_line_content": "\t\t */",
          "new_line_content": "\tPostThreadMessage(timeout_thread_id, WM_REGISTER_ZEND_TIMEOUT, (WPARAM) GetCurrentThreadId(), (LPARAM) seconds);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(active_op_array)",
          "old_line_content": "{",
          "new_line_content": "\tzend_op_array *original_active_op_array = EG(active_op_array);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(function_state_ptr)",
          "old_line_content": "\tzval pv;",
          "new_line_content": "\tzend_function_state *original_function_state_ptr = EG(function_state_ptr);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(active_op_array)",
          "old_line_content": "\t}",
          "new_line_content": "\tCG(active_op_array)->start_op = CG(active_op_array)->opcodes+CG(active_op_array)->last;",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str)",
          "old_line_content": "\tint retval;",
          "new_line_content": "\t\tpv.value.str.len = strlen(str)+sizeof(\"return  ;\")-1;",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "emalloc",
          "old_text": null,
          "new_text": "emalloc(pv.value.str.len+1)",
          "old_line_content": "",
          "new_line_content": "\t\tpv.value.str.val = emalloc(pv.value.str.len+1);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(pv.value.str.val, \"return \")",
          "old_line_content": "\tif (retval_ptr) {",
          "new_line_content": "\t\tstrcpy(pv.value.str.val, \"return \");",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "TSRMLS_FETCH",
          "old_text": null,
          "new_text": "TSRMLS_FETCH()",
          "old_line_content": "",
          "new_line_content": "\tTSRMLS_FETCH();",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "setitimer",
          "old_text": null,
          "new_text": "setitimer(ITIMER_PROF, &t_r, NULL)",
          "old_line_content": "\t\tt_r.it_value.tv_sec = seconds;",
          "new_line_content": "\t\tsetitimer(ITIMER_PROF, &t_r, NULL);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGPROF, zend_timeout)",
          "old_line_content": "\t\tt_r.it_value.tv_usec = t_r.it_interval.tv_sec = t_r.it_interval.tv_usec = 0;",
          "new_line_content": "\t\tsignal(SIGPROF, zend_timeout);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&sigset)",
          "old_line_content": "",
          "new_line_content": "\t\tsigemptyset(&sigset);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(timeout_seconds)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t  EG(timeout_seconds), EG(timeout_seconds) == 1 ? \"\" : \"s\");",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(handle_op_arrays)",
          "old_line_content": "",
          "new_line_content": "\toriginal_handle_op_arrays = CG(handle_op_arrays);",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "CG",
          "old_text": null,
          "new_text": "CG(handle_op_arrays)",
          "old_line_content": "\t/*printf(\"Evaluating '%s'\\n\", pv.value.str.val);*/",
          "new_line_content": "\tCG(handle_op_arrays) = 0;",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "compile_string",
          "old_text": null,
          "new_text": "compile_string(&pv, string_name TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\tnew_op_array = compile_string(&pv, string_name TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "GetCurrentThreadId",
          "old_text": null,
          "new_text": "GetCurrentThreadId()",
          "old_line_content": "void zend_unset_timeout(TSRMLS_D)",
          "new_line_content": "\tPostThreadMessage(timeout_thread_id, WM_UNREGISTER_ZEND_TIMEOUT, (WPARAM) GetCurrentThreadId(), (LPARAM) 0);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "PostQuitMessage",
          "old_text": null,
          "new_text": "PostQuitMessage(0)",
          "old_line_content": "{",
          "new_line_content": "\t\t\tPostQuitMessage(0);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(return_value_ptr_ptr)",
          "old_line_content": "",
          "new_line_content": "\t\tzval **original_return_value_ptr_ptr = EG(return_value_ptr_ptr);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(opline_ptr)",
          "old_line_content": "\tif (new_op_array) {",
          "new_line_content": "\t\tzend_op **original_opline_ptr = EG(opline_ptr);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "KillTimer",
          "old_text": null,
          "new_text": "KillTimer(timeout_window, wParam)",
          "old_line_content": "\t\tcase WM_REGISTER_ZEND_TIMEOUT:",
          "new_line_content": "\t\t\t\tKillTimer(timeout_window, wParam);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "setitimer",
          "old_text": null,
          "new_text": "setitimer(ITIMER_PROF, &no_timeout, NULL)",
          "old_line_content": "",
          "new_line_content": "\t\tsetitimer(ITIMER_PROF, &no_timeout, NULL);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": null,
          "new_api": "SetTimer",
          "old_text": null,
          "new_text": "SetTimer(timeout_window, wParam, lParam*1000, NULL)",
          "old_line_content": "\t\t\tif (lParam==0) {",
          "new_line_content": "\t\t\t\tSetTimer(timeout_window, wParam, lParam*1000, NULL);",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(no_extensions)",
          "old_line_content": "",
          "new_line_content": "\t\tEG(no_extensions)=1;",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "KillTimer",
          "old_text": null,
          "new_text": "KillTimer(timeout_window, wParam)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tKillTimer(timeout_window, wParam);",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "COPY_PZVAL_TO_ZVAL",
          "old_text": null,
          "new_text": "COPY_PZVAL_TO_ZVAL(*retval_ptr, local_retval_ptr)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tCOPY_PZVAL_TO_ZVAL(*retval_ptr, local_retval_ptr);",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "zval_ptr_dtor",
          "old_text": null,
          "new_text": "zval_ptr_dtor(&local_retval_ptr)",
          "old_line_content": "\t\t\tif (retval_ptr) {",
          "new_line_content": "\t\t\t\tzval_ptr_dtor(&local_retval_ptr);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "ts_resource_ex",
          "old_text": null,
          "new_text": "ts_resource_ex(0, &wParam)",
          "old_line_content": "#ifdef ZTS",
          "new_line_content": "\t\t\t\ttsrm_ls = ts_resource_ex(0, &wParam);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "INIT_ZVAL",
          "old_text": null,
          "new_text": "INIT_ZVAL(*retval_ptr)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tINIT_ZVAL(*retval_ptr);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(scope)",
          "old_line_content": "check_fetch_type:",
          "new_line_content": "\t\t\tif (!EG(scope)) {",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Cannot access self:: when no class scope is active\")",
          "old_line_content": "\tswitch (fetch_type) {",
          "new_line_content": "\t\t\t\tzend_error(E_ERROR, \"Cannot access self:: when no class scope is active\");",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(no_extensions)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\tEG(no_extensions)=0;",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(opline_ptr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tEG(opline_ptr) = original_opline_ptr;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(active_op_array)",
          "old_line_content": "",
          "new_line_content": "\t\tEG(active_op_array) = original_active_op_array;",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "KillTimer",
          "old_text": null,
          "new_text": "KillTimer(timeout_window, wParam)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tKillTimer(timeout_window, wParam);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(timed_out)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\tEG(timed_out) = 1;",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "DefWindowProc",
          "old_text": null,
          "new_text": "DefWindowProc(hWnd, message, wParam, lParam)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\treturn DefWindowProc(hWnd, message, wParam, lParam);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(scope)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!EG(scope)) {",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "zend_get_class_fetch_type",
          "old_text": null,
          "new_text": "zend_get_class_fetch_type(class_name, class_name_len)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tfetch_type = zend_get_class_fetch_type(class_name, class_name_len);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&pv)",
          "old_line_content": "\t} else {",
          "new_line_content": "\tzval_dtor(&pv);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "zend_lookup_class",
          "old_text": null,
          "new_text": "zend_lookup_class(class_name, class_name_len, &pce TSRMLS_CC)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\tif (zend_lookup_class(class_name, class_name_len, &pce TSRMLS_CC)==FAILURE) {",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Class '%s' not found\", class_name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tzend_error(E_ERROR, \"Class '%s' not found\", class_name);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(exception)",
          "old_line_content": "ZEND_API int zend_eval_string_ex(char *str, zval *retval_ptr, char *string_name, int handle_exceptions TSRMLS_DC)",
          "new_line_content": "\tzval *exception = EG(exception);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "HBRUSH)(COLOR_BACKGROUND + 5)",
          "old_text": null,
          "new_text": "HBRUSH)(COLOR_BACKGROUND + 5)",
          "old_line_content": "\twc.hInstance=NULL;",
          "new_line_content": "\twc.hbrBackground=(HBRUSH)(COLOR_BACKGROUND + 5);",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "zend_eval_string",
          "old_text": null,
          "new_text": "zend_eval_string(str, retval_ptr, string_name TSRMLS_CC)",
          "old_line_content": "\tif (handle_exceptions) {",
          "new_line_content": "\tresult = zend_eval_string(str, retval_ptr, string_name TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "zend_exception_error",
          "old_text": null,
          "new_text": "zend_exception_error(EG(exception) TSRMLS_CC)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tzend_exception_error(EG(exception) TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "SetEvent",
          "old_text": null,
          "new_text": "SetEvent(timeout_thread_event)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tSetEvent(timeout_thread_event);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "GetMessage",
          "old_text": null,
          "new_text": "GetMessage(&message, NULL, 0, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\twhile (GetMessage(&message, NULL, 0, 0)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "SetEvent",
          "new_api": null,
          "old_text": "SetEvent(timeout_thread_event)",
          "new_text": null,
          "old_line_content": "\tSetEvent(timeout_thread_event);",
          "new_line_content": "\t\tif (message.message == WM_QUIT) {",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "GetMessage",
          "new_api": null,
          "old_text": "GetMessage(&message, NULL, 0, 0)",
          "new_text": null,
          "old_line_content": "\twhile (GetMessage(&message, NULL, 0, 0)) {",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "SendMessage",
          "new_api": null,
          "old_text": "SendMessage(timeout_window, message.message, message.wParam, message.lParam)",
          "new_text": null,
          "old_line_content": "\t\tSendMessage(timeout_window, message.message, message.wParam, message.lParam);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "DestroyWindow",
          "new_api": null,
          "old_text": "DestroyWindow(timeout_window)",
          "new_text": null,
          "old_line_content": "\tDestroyWindow(timeout_window);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "UnregisterClass",
          "new_api": null,
          "old_text": "UnregisterClass(wc.lpszClassName, NULL)",
          "new_text": null,
          "old_line_content": "\tUnregisterClass(wc.lpszClassName, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\t\t|| CG(active_op_array)->backpatch_count>0",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\t\t|| CG(active_op_array)->function_name",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\t\t|| CG(active_op_array)->type!=ZEND_USER_FUNCTION) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "CreateEvent",
          "new_api": null,
          "old_text": "CreateEvent(NULL, FALSE, FALSE, NULL)",
          "new_text": null,
          "old_line_content": "\ttimeout_thread_event = CreateEvent(NULL, FALSE, FALSE, NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "_beginthreadex",
          "new_api": null,
          "old_text": "_beginthreadex(NULL, 0, timeout_thread_proc, NULL, 0, &timeout_thread_id)",
          "new_text": null,
          "old_line_content": "\t_beginthreadex(NULL, 0, timeout_thread_proc, NULL, 0, &timeout_thread_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "WaitForSingleObject",
          "new_api": null,
          "old_text": "WaitForSingleObject(timeout_thread_event, INFINITE)",
          "new_text": null,
          "old_line_content": "\tWaitForSingleObject(timeout_thread_event, INFINITE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "ZVAL_STRINGL",
          "new_api": null,
          "old_text": "ZVAL_STRINGL(autoload_function, \"__autoload\", sizeof(\"__autoload\")-1,  1)",
          "new_text": null,
          "old_line_content": "\tZVAL_STRINGL(autoload_function, \"__autoload\", sizeof(\"__autoload\")-1,  1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tif (!CG(active_op_array)->start_op) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "ZVAL_STRINGL",
          "new_api": null,
          "old_text": "ZVAL_STRINGL(class_name, name, name_length, 1)",
          "new_text": null,
          "old_line_content": "\tZVAL_STRINGL(class_name, name, name_length, 1);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "PostThreadMessage",
          "new_api": null,
          "old_text": "PostThreadMessage(timeout_thread_id, WM_QUIT, 0, 0)",
          "new_text": null,
          "old_line_content": "\tPostThreadMessage(timeout_thread_id, WM_QUIT, 0, 0);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\topline=CG(active_op_array)->start_op;",
          "new_line_content": "    while (opline<end) {",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tend=CG(active_op_array)->opcodes+CG(active_op_array)->last;",
          "new_line_content": "        if (opline->op1.op_type==IS_CONST) {",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "zval_ptr_dtor",
          "new_api": null,
          "old_text": "zval_ptr_dtor(&autoload_function)",
          "new_text": null,
          "old_line_content": "\tzval_ptr_dtor(&autoload_function);",
          "new_line_content": "\tif (retval == FAILURE) {",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "zval_ptr_dtor",
          "new_api": null,
          "old_text": "zval_ptr_dtor(&class_name)",
          "new_text": null,
          "old_line_content": "\tzval_ptr_dtor(&class_name);",
          "new_line_content": "\t\treturn FAILURE;",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(exception)",
          "new_text": null,
          "old_line_content": "\tif (EG(exception)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"__autoload threw an exception\")",
          "new_text": null,
          "old_line_content": "\t\tzend_error(E_ERROR, \"__autoload threw an exception\");",
          "new_line_content": "\t/* If an exception is thrown retval_ptr will be NULL but we bailout before we reach this point */",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "TSRMLS_FETCH",
          "new_api": null,
          "old_text": "TSRMLS_FETCH()",
          "new_text": null,
          "old_line_content": "\tTSRMLS_FETCH();",
          "new_line_content": "#ifdef ZEND_WIN32",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(timeout_seconds)",
          "new_text": null,
          "old_line_content": "\tEG(timeout_seconds) = seconds;",
          "new_line_content": "\t\t/* We start up this process-wide thread here and not in zend_startup(), because if Zend",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "zval_ptr_dtor",
          "new_api": null,
          "old_text": "zval_ptr_dtor(&retval_ptr)",
          "new_text": null,
          "old_line_content": "\tzval_ptr_dtor(&retval_ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "InterlockedIncrement",
          "new_api": null,
          "old_text": "InterlockedIncrement(&timeout_thread_initialized)",
          "new_text": null,
          "old_line_content": "\tif (timeout_thread_initialized==0 && InterlockedIncrement(&timeout_thread_initialized)==1) {",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(class_table)",
          "new_text": null,
          "old_line_content": "\treturn zend_hash_find(EG(class_table), name, name_length + 1, (void **) ce);",
          "new_line_content": "ZEND_API int zend_eval_string(char *str, zval *retval_ptr, char *string_name TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(return_value_ptr_ptr)",
          "new_text": null,
          "old_line_content": "\tEG(return_value_ptr_ptr) = &local_retval;",
          "new_line_content": "\tif (local_retval) {",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tzend_execute(CG(active_op_array) TSRMLS_CC);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "zend_init_timeout_thread",
          "new_api": null,
          "old_text": "zend_init_timeout_thread()",
          "new_text": null,
          "old_line_content": "\t\tzend_init_timeout_thread();",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "GetCurrentThreadId",
          "new_api": null,
          "old_text": "GetCurrentThreadId()",
          "new_text": null,
          "old_line_content": "\tPostThreadMessage(timeout_thread_id, WM_REGISTER_ZEND_TIMEOUT, (WPARAM) GetCurrentThreadId(), (LPARAM) seconds);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tzend_op_array *original_active_op_array = EG(active_op_array);",
          "new_line_content": "\tint retval;",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(function_state_ptr)",
          "new_text": null,
          "old_line_content": "\tzend_function_state *original_function_state_ptr = EG(function_state_ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tCG(active_op_array)->last--;\t/* get rid of that ZEND_RETURN */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(active_op_array)",
          "new_text": null,
          "old_line_content": "\tCG(active_op_array)->start_op = CG(active_op_array)->opcodes+CG(active_op_array)->last;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(pv.value.str.val, \"return \")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(pv.value.str.val, \"return \");",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&sigset)",
          "new_text": null,
          "old_line_content": "\t\tsigemptyset(&sigset);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "sigaddset",
          "new_api": null,
          "old_text": "sigaddset(&sigset, SIGPROF)",
          "new_text": null,
          "old_line_content": "\t\tsigaddset(&sigset, SIGPROF);",
          "new_line_content": "#\tendif",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "sigprocmask",
          "new_api": null,
          "old_text": "sigprocmask(SIG_UNBLOCK, &sigset, NULL)",
          "new_text": null,
          "old_line_content": "\t\tsigprocmask(SIG_UNBLOCK, &sigset, NULL);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str)",
          "new_text": null,
          "old_line_content": "\t\tpv.value.str.len = strlen(str);",
          "new_line_content": "\tpv.type = IS_STRING;",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "estrndup",
          "new_api": null,
          "old_text": "estrndup(str, pv.value.str.len)",
          "new_text": null,
          "old_line_content": "\t\tpv.value.str.val = estrndup(str, pv.value.str.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Maximum execution time of %d second%s exceeded\",\n\t\t\t  EG(timeout_seconds), EG(timeout_seconds) == 1 ? \"\" : \"s\")",
          "new_text": null,
          "old_line_content": "\tzend_error(E_ERROR, \"Maximum execution time of %d second%s exceeded\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(timeout_seconds)",
          "new_text": null,
          "old_line_content": "\t\t\t  EG(timeout_seconds), EG(timeout_seconds) == 1 ? \"\" : \"s\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(handle_op_arrays)",
          "new_text": null,
          "old_line_content": "\tCG(handle_op_arrays) = 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "compile_string",
          "new_api": null,
          "old_text": "compile_string(&pv, string_name TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tnew_op_array = compile_string(&pv, string_name TSRMLS_CC);",
          "new_line_content": "\tif (new_op_array) {",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "CG",
          "new_api": null,
          "old_text": "CG(handle_op_arrays)",
          "new_text": null,
          "old_line_content": "\tCG(handle_op_arrays) = original_handle_op_arrays;",
          "new_line_content": "\t\tzval *local_retval_ptr=NULL;",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "PostQuitMessage",
          "new_api": null,
          "old_text": "PostQuitMessage(0)",
          "new_text": null,
          "old_line_content": "\t\t\tPostQuitMessage(0);",
          "new_line_content": "\t\t\t/* wParam is the thread id pointer, lParam is the timeout amount in seconds */",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "GetCurrentThreadId",
          "new_api": null,
          "old_text": "GetCurrentThreadId()",
          "new_text": null,
          "old_line_content": "\tPostThreadMessage(timeout_thread_id, WM_UNREGISTER_ZEND_TIMEOUT, (WPARAM) GetCurrentThreadId(), (LPARAM) 0);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "KillTimer",
          "new_api": null,
          "old_text": "KillTimer(timeout_window, wParam)",
          "new_text": null,
          "old_line_content": "\t\t\t\tKillTimer(timeout_window, wParam);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(return_value_ptr_ptr)",
          "new_text": null,
          "old_line_content": "\t\tEG(return_value_ptr_ptr) = &local_retval_ptr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(active_op_array)",
          "new_text": null,
          "old_line_content": "\t\tEG(active_op_array) = new_op_array;",
          "new_line_content": "\t\tzend_execute(new_op_array TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(no_extensions)",
          "new_text": null,
          "old_line_content": "\t\tEG(no_extensions)=1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "SetTimer",
          "new_api": null,
          "old_text": "SetTimer(timeout_window, wParam, lParam*1000, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tSetTimer(timeout_window, wParam, lParam*1000, NULL);",
          "new_line_content": "\t\tcase WM_UNREGISTER_ZEND_TIMEOUT:",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "setitimer",
          "new_api": null,
          "old_text": "setitimer(ITIMER_PROF, &no_timeout, NULL)",
          "new_text": null,
          "old_line_content": "\t\tsetitimer(ITIMER_PROF, &no_timeout, NULL);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "KillTimer",
          "new_api": null,
          "old_text": "KillTimer(timeout_window, wParam)",
          "new_text": null,
          "old_line_content": "\t\t\tKillTimer(timeout_window, wParam);",
          "new_line_content": "#ifdef ZTS",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "COPY_PZVAL_TO_ZVAL",
          "new_api": null,
          "old_text": "COPY_PZVAL_TO_ZVAL(*retval_ptr, local_retval_ptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tCOPY_PZVAL_TO_ZVAL(*retval_ptr, local_retval_ptr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "zval_ptr_dtor",
          "new_api": null,
          "old_text": "zval_ptr_dtor(&local_retval_ptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tzval_ptr_dtor(&local_retval_ptr);",
          "new_line_content": "\t\t\tif (retval_ptr) {",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "ts_resource_ex",
          "new_api": null,
          "old_text": "ts_resource_ex(0, &wParam)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttsrm_ls = ts_resource_ex(0, &wParam);",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "INIT_ZVAL",
          "new_api": null,
          "old_text": "INIT_ZVAL(*retval_ptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tINIT_ZVAL(*retval_ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Cannot access self:: when no class scope is active\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tzend_error(E_ERROR, \"Cannot access self:: when no class scope is active\");",
          "new_line_content": "\t\tcase ZEND_FETCH_CLASS_PARENT:",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "KillTimer",
          "new_api": null,
          "old_text": "KillTimer(timeout_window, wParam)",
          "new_text": null,
          "old_line_content": "\t\t\t\tKillTimer(timeout_window, wParam);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(opline_ptr)",
          "new_text": null,
          "old_line_content": "\t\tEG(opline_ptr) = original_opline_ptr;",
          "new_line_content": "\t\tdestroy_op_array(new_op_array TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(timed_out)",
          "new_text": null,
          "old_line_content": "\t\t\t\tEG(timed_out) = 1;",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "efree",
          "new_api": null,
          "old_text": "efree(new_op_array)",
          "new_text": null,
          "old_line_content": "\t\tefree(new_op_array);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(return_value_ptr_ptr)",
          "new_text": null,
          "old_line_content": "\t\tEG(return_value_ptr_ptr) = original_return_value_ptr_ptr;",
          "new_line_content": "\t\tretval = FAILURE;",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "DefWindowProc",
          "new_api": null,
          "old_text": "DefWindowProc(hWnd, message, wParam, lParam)",
          "new_text": null,
          "old_line_content": "\t\t\treturn DefWindowProc(hWnd, message, wParam, lParam);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Cannot access parent:: when current class scope has no parent\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tzend_error(E_ERROR, \"Cannot access parent:: when current class scope has no parent\");",
          "new_line_content": "\t\tcase ZEND_FETCH_CLASS_AUTO: {",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(scope)",
          "new_text": null,
          "old_line_content": "\t\t\treturn EG(scope)->parent;",
          "new_line_content": "\t\t\t\tif (fetch_type!=ZEND_FETCH_CLASS_DEFAULT) {",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "zend_get_class_fetch_type",
          "new_api": null,
          "old_text": "zend_get_class_fetch_type(class_name, class_name_len)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfetch_type = zend_get_class_fetch_type(class_name, class_name_len);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&pv)",
          "new_text": null,
          "old_line_content": "\tzval_dtor(&pv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "zend_lookup_class",
          "new_api": null,
          "old_text": "zend_lookup_class(class_name, class_name_len, &pce TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (zend_lookup_class(class_name, class_name_len, &pce TSRMLS_CC)==FAILURE) {",
          "new_line_content": "\treturn *pce;",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Class '%s' not found\", class_name)",
          "new_text": null,
          "old_line_content": "\t\tzend_error(E_ERROR, \"Class '%s' not found\", class_name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "zend_exception_error",
          "new_api": null,
          "old_text": "zend_exception_error(EG(exception) TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\t\tzend_exception_error(EG(exception) TSRMLS_CC);",
          "new_line_content": "\t\tresult = FAILURE;",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(exception)",
          "new_text": null,
          "old_line_content": "\t\tzval_ptr_dtor(&EG(exception));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(exception)",
          "new_text": null,
          "old_line_content": "\t\tEG(exception) = exception;",
          "new_line_content": "\treturn result;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 21,
      "total_additions": 71,
      "total_deletions": 74,
      "total_api_changes": 166
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 166,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          781,
          782,
          795,
          797,
          798
        ]
      }
    },
    "api_calls_before": 440,
    "api_calls_after": 437,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 11,
      "total_diff_lines": 40
    }
  }
}
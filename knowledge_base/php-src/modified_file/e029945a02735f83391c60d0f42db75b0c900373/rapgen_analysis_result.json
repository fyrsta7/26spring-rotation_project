{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/e029945a02735f83391c60d0f42db75b0c900373",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/e029945a02735f83391c60d0f42db75b0c900373/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/e029945a02735f83391c60d0f42db75b0c900373/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/e029945a02735f83391c60d0f42db75b0c900373/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 1414,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "zendi_convert_scalar_to_number",
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": "zendi_convert_scalar_to_number(op1, op1_copy, result)",
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\tzendi_convert_scalar_to_number(op1, op1_copy, result);",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "Z_DVAL_P",
          "new_api": "Z_LVAL_P",
          "old_text": "Z_DVAL_P(op2)",
          "new_text": "Z_LVAL_P(op2)",
          "old_line_content": "\t\tZ_DVAL_P(result) = (Z_TYPE_P(op1) == IS_LONG ? (double) Z_LVAL_P(op1) : Z_DVAL_P(op1)) - (Z_TYPE_P(op2) == IS_LONG ? (double) Z_LVAL_P(op2) : Z_DVAL_P(op2));",
          "new_line_content": "\t\tZVAL_LONG(result, Z_LVAL_P(op1)>Z_LVAL_P(op2)?1:(Z_LVAL_P(op1)<Z_LVAL_P(op2)?-1:0));",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "Z_DVAL_P",
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": "Z_DVAL_P(result)",
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "\t\tZVAL_LONG(result, ZEND_NORMALIZE_BOOL(Z_DVAL_P(result)));",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "Z_DVAL_P",
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": "Z_DVAL_P(result)",
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t\tZVAL_LONG(result, ZEND_NORMALIZE_BOOL(Z_DVAL_P(result)));",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "ZVAL_LONG",
          "new_api": "Z_TYPE_P",
          "old_text": "ZVAL_LONG(result, -1)",
          "new_text": "Z_TYPE_P(op1)",
          "old_line_content": "\t\tZVAL_LONG(result, -1);",
          "new_line_content": "\tif (Z_TYPE_P(op1)==IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "ZVAL_LONG",
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": "ZVAL_LONG(result, 1)",
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t\tZVAL_LONG(result, 1);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "ZVAL_LONG",
          "new_api": "Z_TYPE_P",
          "old_text": "ZVAL_LONG(result, 1)",
          "new_text": "Z_TYPE_P(op2)",
          "old_line_content": "\t\tZVAL_LONG(result, 1);",
          "new_line_content": "\tif (Z_TYPE_P(op2)==IS_ARRAY) {",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "ZVAL_LONG",
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": "ZVAL_LONG(result, -1)",
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t\tZVAL_LONG(result, -1);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "ZVAL_LONG",
          "new_api": "Z_TYPE_P",
          "old_text": "ZVAL_LONG(result, -1)",
          "new_text": "Z_TYPE_P(op1)",
          "old_line_content": "\t\tZVAL_LONG(result, -1);",
          "new_line_content": "\tif (Z_TYPE_P(op1)==IS_OBJECT) {",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "ZVAL_LONG",
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": "ZVAL_LONG(result, 1)",
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t\tZVAL_LONG(result, 1);",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "ZVAL_BOOL",
          "new_api": "Z_TYPE_P",
          "old_text": "ZVAL_BOOL(result, 0)",
          "new_text": "Z_TYPE_P(op2)",
          "old_line_content": "\tZVAL_BOOL(result, 0);",
          "new_line_content": "\tif (Z_TYPE_P(op2)==IS_OBJECT) {",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": "ZVAL_LONG",
          "old_text": "COMPARE_RETURN_AND_FREE(FAILURE)",
          "new_text": "ZVAL_LONG(result, -1)",
          "old_line_content": "\tCOMPARE_RETURN_AND_FREE(FAILURE);",
          "new_line_content": "\t\tZVAL_LONG(result, -1);",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "ZVAL_DOUBLE",
          "new_api": "is_numeric_string",
          "old_text": "ZVAL_DOUBLE(op1, d+1)",
          "new_text": "is_numeric_string(strval, op1->value.str.len, &lval, &dval, 0)",
          "old_line_content": "\t\t\t\t\t\t\tZVAL_DOUBLE(op1, d+1);",
          "new_line_content": "\t\t\t\tswitch (is_numeric_string(strval, op1->value.str.len, &lval, &dval, 0)) {",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "efree",
          "new_api": "ZVAL_DOUBLE",
          "old_text": "efree(strval)",
          "new_text": "ZVAL_DOUBLE(op1, d+1)",
          "old_line_content": "\t\t\t\t\t\tefree(strval); /* should never be empty_string */",
          "new_line_content": "\t\t\t\t\t\t\tZVAL_DOUBLE(op1, d+1);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "is_numeric_string",
          "new_api": "STR_FREE",
          "old_text": "is_numeric_string(op1->value.str.val, op1->value.str.len, &lval, &dval, 0)",
          "new_text": "STR_FREE(op1->value.str.val)",
          "old_line_content": "\t\t\tswitch (is_numeric_string(op1->value.str.val, op1->value.str.len, &lval, &dval, 0)) {",
          "new_line_content": "\t\t\t\tSTR_FREE(op1->value.str.val);",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "ZVAL_DOUBLE",
          "new_api": "is_numeric_string",
          "old_text": "ZVAL_DOUBLE(op1, d-1)",
          "new_text": "is_numeric_string(op1->value.str.val, op1->value.str.len, &lval, &dval, 0)",
          "old_line_content": "\t\t\t\t\t\tZVAL_DOUBLE(op1, d-1);",
          "new_line_content": "\t\t\tswitch (is_numeric_string(op1->value.str.val, op1->value.str.len, &lval, &dval, 0)) {",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "zend_tolower",
          "new_api": "register",
          "old_text": "zend_tolower((int)*str++)",
          "new_text": "register",
          "old_line_content": "\t\t*result++ = zend_tolower((int)*str++);",
          "new_line_content": "\tregister unsigned char *str = (unsigned char*)source;",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "zend_binary_strncmp",
          "new_api": "zend_binary_strcmp",
          "old_text": "zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "new_text": "zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "old_line_content": "\treturn zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "new_line_content": "\treturn zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "Z_OBJ_HT_P",
          "new_api": "Z_OBJ_HANDLE_P",
          "old_text": "Z_OBJ_HT_P(o1)",
          "new_text": "Z_OBJ_HANDLE_P(o2)",
          "old_line_content": "\tif (Z_OBJ_HT_P(o1)->compare_objects == NULL) {",
          "new_line_content": "\tif (Z_OBJ_HANDLE_P(o1) == Z_OBJ_HANDLE_P(o2)) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1541,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "old_line_content": "\t\tresult->value.lval = 1;",
          "new_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": null,
          "new_api": "convert_to_boolean",
          "old_text": null,
          "new_text": "convert_to_boolean(result)",
          "old_line_content": "\t}",
          "new_line_content": "\tconvert_to_boolean(result);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "old_line_content": "\t\tresult->value.lval = 1;",
          "new_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "convert_to_boolean",
          "old_text": null,
          "new_text": "convert_to_boolean(result)",
          "old_line_content": "\t}",
          "new_line_content": "\tconvert_to_boolean(result);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "old_line_content": "\t\tif (result->value.lval < 0) {",
          "new_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Unsupported operand types\")",
          "old_line_content": "ZEND_API int is_smaller_or_equal_function(zval *result, zval *op1, zval *op2 TSRMLS_DC)",
          "new_line_content": "\tzend_error(E_ERROR, \"Unsupported operand types\");",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "old_line_content": "\t\tif (result->value.lval <= 0) {",
          "new_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Unsupported operand types\")",
          "old_line_content": "ZEND_API zend_bool instanceof_function_ex(zend_class_entry *instance_ce, zend_class_entry *ce, zend_bool interfaces_only TSRMLS_DC)",
          "new_line_content": "\tzend_error(E_ERROR, \"Unsupported operand types\");",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "instanceof_function",
          "old_text": null,
          "new_text": "instanceof_function(instance_ce->interfaces[i], ce TSRMLS_CC)",
          "old_line_content": "\t\twhile (instance_ce) {",
          "new_line_content": "\t\tif (instanceof_function(instance_ce->interfaces[i], ce TSRMLS_CC)) {",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": null,
          "new_api": "instanceof_function_ex",
          "old_text": null,
          "new_text": "instanceof_function_ex(instance_ce, ce, 0 TSRMLS_CC)",
          "old_line_content": "#define NUMERIC 3",
          "new_line_content": "\treturn instanceof_function_ex(instance_ce, ce, 0 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "STR_FREE",
          "old_text": null,
          "new_text": "STR_FREE(str->value.str.val)",
          "old_line_content": "",
          "new_line_content": "\t\tSTR_FREE(str->value.str.val);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "estrndup",
          "old_text": null,
          "new_text": "estrndup(\"1\", sizeof(\"1\")-1)",
          "old_line_content": "\twhile (pos >= 0) {",
          "new_line_content": "\t\tstr->value.str.val = estrndup(\"1\", sizeof(\"1\")-1);",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "emalloc",
          "old_text": null,
          "new_text": "emalloc(str->value.str.len+1+1)",
          "old_line_content": "            case NUMERIC:",
          "new_line_content": "        t = (char *) emalloc(str->value.str.len+1+1);",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(t+1, str->value.str.val, str->value.str.len)",
          "old_line_content": "            \tt[0] = '1';",
          "new_line_content": "        memcpy(t+1, str->value.str.val, str->value.str.len);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "STR_FREE",
          "old_text": null,
          "new_text": "STR_FREE(str->value.str.val)",
          "old_line_content": "",
          "new_line_content": "        STR_FREE(str->value.str.val);",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "ZVAL_DOUBLE",
          "old_text": null,
          "new_text": "ZVAL_DOUBLE(op1, d+1)",
          "old_line_content": "\t\tcase IS_DOUBLE:",
          "new_line_content": "\t\t\t\tZVAL_DOUBLE(op1, d+1);",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "efree",
          "old_text": null,
          "new_text": "efree(strval)",
          "old_line_content": "\t\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\tefree(strval); /* should never be empty_string */",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "increment_string",
          "old_text": null,
          "new_text": "increment_string(op1)",
          "old_line_content": "\t\tdefault:",
          "new_line_content": "\t\t\t\t\t\tincrement_string(op1);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": null,
          "new_api": "ZVAL_DOUBLE",
          "old_text": null,
          "new_text": "ZVAL_DOUBLE(op1, d-1)",
          "old_line_content": "\t\tcase IS_DOUBLE:",
          "new_line_content": "\t\t\t\tZVAL_DOUBLE(op1, d-1);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "STR_FREE",
          "old_text": null,
          "new_text": "STR_FREE(op1->value.str.val)",
          "old_line_content": "\t\t\t\t\t\top1->value.lval = lval-1;",
          "new_line_content": "\t\t\t\t\tSTR_FREE(op1->value.str.val);",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "ZVAL_DOUBLE",
          "old_text": null,
          "new_text": "ZVAL_DOUBLE(op1, d-1)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\tZVAL_DOUBLE(op1, d-1);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": null,
          "new_api": "STR_FREE",
          "old_text": null,
          "new_text": "STR_FREE(op1->value.str.val)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tSTR_FREE(op1->value.str.val);",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "convert_to_boolean",
          "old_text": null,
          "new_text": "convert_to_boolean(op)",
          "old_line_content": "ZEND_API void zend_update_current_locale()",
          "new_line_content": "\tconvert_to_boolean(op);",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "_get_current_locale",
          "old_text": null,
          "new_text": "_get_current_locale()",
          "old_line_content": "{",
          "new_line_content": "\tcurrent_locale = _get_current_locale();",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t}",
          "new_line_content": "\tregister unsigned char *result = (unsigned char*)dest;",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t*result = '\\0';",
          "new_line_content": "\tregister unsigned char *end = str + length;",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*str++)",
          "old_line_content": "}",
          "new_line_content": "\t\t*result++ = zend_tolower((int)*str++);",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t\tp++;",
          "new_line_content": "\tregister unsigned char *p = (unsigned char*)str;",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t}",
          "new_line_content": "\tregister unsigned char *end = p + length;",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*p)",
          "old_line_content": "ZEND_API int zend_binary_strcmp(char *s1, uint len1, char *s2, uint len2)",
          "new_line_content": "\t\t*p = zend_tolower((int)*p);",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t}",
          "new_line_content": "\tretval = memcmp(s1, s2, MIN(len1, len2));",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t}",
          "new_line_content": "\tretval = memcmp(s1, s2, MIN(length, MIN(len1, len2)));",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(length, len2)",
          "old_line_content": "",
          "new_line_content": "\t\treturn (MIN(length, len1) - MIN(length, len2));",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t\tif (c1 != c2) {",
          "new_line_content": "\tlen = MIN(len1, len2);",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*(unsigned char *)s1++)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tc1 = zend_tolower((int)*(unsigned char *)s1++);",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*(unsigned char *)s2++)",
          "old_line_content": "",
          "new_line_content": "\t\tc2 = zend_tolower((int)*(unsigned char *)s2++);",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "Z_OBJ_HANDLE_P",
          "old_text": null,
          "new_text": "Z_OBJ_HANDLE_P(op2)",
          "old_line_content": "\t\tZVAL_LONG(result, Z_OBJ_HT_P(op1)->compare_objects(op1, op2 TSRMLS_CC));",
          "new_line_content": "\t\tif (Z_OBJ_HANDLE_P(op1) == Z_OBJ_HANDLE_P(op2)) {",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "ZVAL_LONG",
          "old_text": null,
          "new_text": "ZVAL_LONG(result, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tZVAL_LONG(result, 0);",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "",
          "new_line_content": "\t\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(len1, len2)",
          "old_line_content": "\t\tif (c1 != c2) {",
          "new_line_content": "\tlen = MIN(length, MIN(len1, len2));",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "zendi_convert_scalar_to_number",
          "old_text": null,
          "new_text": "zendi_convert_scalar_to_number(op2, op2_copy, result)",
          "old_line_content": "\t}",
          "new_line_content": "\tzendi_convert_scalar_to_number(op2, op2_copy, result);",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*(unsigned char *)s1++)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tc1 = zend_tolower((int)*(unsigned char *)s1++);",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "zend_tolower",
          "old_text": null,
          "new_text": "zend_tolower((int)*(unsigned char *)s2++)",
          "old_line_content": "",
          "new_line_content": "\t\tc2 = zend_tolower((int)*(unsigned char *)s2++);",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "Z_TYPE_P",
          "old_text": null,
          "new_text": "Z_TYPE_P(op1)",
          "old_line_content": "\t}",
          "new_line_content": "\tif ((Z_TYPE_P(op1) == IS_DOUBLE || Z_TYPE_P(op1) == IS_LONG)",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "Z_DVAL_P",
          "old_text": null,
          "new_text": "Z_DVAL_P(op2)",
          "old_line_content": "\t\tzend_compare_arrays(result, op1, op2 TSRMLS_CC);",
          "new_line_content": "\t\tZ_DVAL_P(result) = (Z_TYPE_P(op1) == IS_LONG ? (double) Z_LVAL_P(op1) : Z_DVAL_P(op1)) - (Z_TYPE_P(op2) == IS_LONG ? (double) Z_LVAL_P(op2) : Z_DVAL_P(op2));",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(length, len2)",
          "old_line_content": "{",
          "new_line_content": "\treturn MIN(length, len1) - MIN(length, len2);",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": null,
          "new_api": "zend_binary_strncmp",
          "old_text": null,
          "new_text": "zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "old_line_content": "{",
          "new_line_content": "\treturn zend_binary_strncmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "zend_binary_strcasecmp",
          "old_text": null,
          "new_text": "zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "old_line_content": "{",
          "new_line_content": "\treturn zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "old_line_content": "}",
          "new_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": null,
          "new_api": "zend_binary_strncasecmp",
          "old_text": null,
          "new_text": "zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "old_line_content": "{",
          "new_line_content": "\treturn zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "ZVAL_BOOL",
          "old_text": null,
          "new_text": "ZVAL_BOOL(result, 0)",
          "old_line_content": "static int hash_zval_identical_function(const zval **z1, const zval **z2)",
          "new_line_content": "\tZVAL_BOOL(result, 0);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "COMPARE_RETURN_AND_FREE",
          "old_text": null,
          "new_text": "COMPARE_RETURN_AND_FREE(FAILURE)",
          "old_line_content": "{",
          "new_line_content": "\tCOMPARE_RETURN_AND_FREE(FAILURE);",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "is_numeric_string",
          "old_text": null,
          "new_text": "is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)",
          "old_line_content": "\t\t\t} else if (ret2!=IS_DOUBLE) {",
          "new_line_content": "\tif ((ret1=is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)) &&",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "TSRMLS_FETCH",
          "old_text": null,
          "new_text": "TSRMLS_FETCH()",
          "old_line_content": "\t * and non zero otherwise.",
          "new_line_content": "\tTSRMLS_FETCH();",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": null,
          "new_api": "is_numeric_string",
          "old_text": null,
          "new_text": "is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0)",
          "old_line_content": "\t\t\t\tdval2 = (double) lval2;",
          "new_line_content": "\t\t(ret2=is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0))) {",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": null,
          "new_api": "zend_finite",
          "old_text": null,
          "new_text": "zend_finite(dval1)",
          "old_line_content": "\t\t\tresult->value.dval = dval1 - dval2;",
          "new_line_content": "\t\t\t} else if (dval1 == dval2 && !zend_finite(dval1)) {",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "is_identical_function",
          "old_text": null,
          "new_text": "is_identical_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\tif (is_identical_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": null,
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.dval)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.dval);",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "zend_binary_zval_strcmp",
          "old_text": null,
          "new_text": "zend_binary_zval_strcmp(s1, s2)",
          "old_line_content": "}",
          "new_line_content": "\t\tresult->value.lval = zend_binary_zval_strcmp(s1, s2);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "ZEND_NORMALIZE_BOOL",
          "old_text": null,
          "new_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "old_line_content": "",
          "new_line_content": "\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "compare_function",
          "old_text": null,
          "new_text": "compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "old_line_content": "",
          "new_line_content": "\tif (compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(op1->value.str.val, op2->value.str.val, op1->value.str.len)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t&& (!memcmp(op1->value.str.val, op2->value.str.val, op1->value.str.len))) {",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": null,
          "new_api": "zend_hash_compare",
          "old_text": null,
          "new_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "old_line_content": "ZEND_API void zend_compare_symbol_tables(zval *result, HashTable *ht1, HashTable *ht2 TSRMLS_DC)",
          "new_line_content": "\treturn zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": null,
          "new_api": "zend_hash_compare",
          "old_text": null,
          "new_text": "zend_hash_compare(op1->value.ht, op2->value.ht, (compare_func_t) hash_zval_identical_function, 1 TSRMLS_CC)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tif (zend_hash_compare(op1->value.ht, op2->value.ht, (compare_func_t) hash_zval_identical_function, 1 TSRMLS_CC)==0) {",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "zend_hash_compare",
          "old_text": null,
          "new_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "old_line_content": "{",
          "new_line_content": "\tresult->value.lval = zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "Z_OBJ_HT_P",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(op2)",
          "old_line_content": "\t\t\t\t\t */",
          "new_line_content": "\t\t\tif (Z_OBJ_HT_P(op1) == Z_OBJ_HT_P(op2)) {",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(ze1_compatibility_mode)",
          "old_line_content": "\t\t\t\t\tresult->value.lval = !result->value.lval;",
          "new_line_content": "\t\t\t\tif (EG(ze1_compatibility_mode)) {",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": null,
          "new_api": "zend_compare_symbol_tables",
          "old_text": null,
          "new_text": "zend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC)",
          "old_line_content": "{",
          "new_line_content": "\tzend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "Z_OBJ_HANDLE_P",
          "old_text": null,
          "new_text": "Z_OBJ_HANDLE_P(op2)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tresult->value.lval = (Z_OBJ_HANDLE_P(op1) == Z_OBJ_HANDLE_P(op2));",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "ZVAL_BOOL",
          "old_text": null,
          "new_text": "ZVAL_BOOL(result, 0)",
          "old_line_content": "",
          "new_line_content": "\t\t\tZVAL_BOOL(result, 0);",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": null,
          "new_api": "Z_OBJ_HT_P",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(o1)",
          "old_line_content": "}",
          "new_line_content": "\tif (Z_OBJ_HT_P(o1)->compare_objects == NULL) {",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": null,
          "new_api": "compare_objects",
          "old_text": null,
          "new_text": "Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC)",
          "old_line_content": "{",
          "new_line_content": "\t\tresult->value.lval = Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": null,
          "new_api": "is_identical_function",
          "old_text": null,
          "new_text": "is_identical_function(result, op1, op2 TSRMLS_CC)",
          "old_line_content": "}",
          "new_line_content": "   if (is_identical_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(precision)",
          "old_line_content": " * tab-width: 4",
          "new_line_content": "\top->value.str.len = zend_spprintf(&op->value.str.val, 0, \"%.*G\", (int) EG(precision), (double)op->value.dval);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1536,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "zendi_convert_scalar_to_number",
          "new_api": null,
          "old_text": "zendi_convert_scalar_to_number(op1, op1_copy, result)",
          "new_text": null,
          "old_line_content": "\tzendi_convert_scalar_to_number(op1, op1_copy, result);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "zendi_convert_scalar_to_number",
          "new_api": null,
          "old_text": "zendi_convert_scalar_to_number(op2, op2_copy, result)",
          "new_text": null,
          "old_line_content": "\tzendi_convert_scalar_to_number(op2, op2_copy, result);",
          "new_line_content": "\t\tZVAL_LONG(result, Z_OBJ_HT_P(op1)->compare_objects(op1, op2 TSRMLS_CC));",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "convert_to_boolean",
          "new_api": null,
          "old_text": "convert_to_boolean(result)",
          "new_text": null,
          "old_line_content": "\tconvert_to_boolean(result);",
          "new_line_content": "ZEND_API int is_equal_function(zval *result, zval *op1, zval *op2 TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(op2)",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(op1) == IS_LONG && Z_TYPE_P(op2) == IS_LONG) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "Z_LVAL_P",
          "new_api": null,
          "old_text": "Z_LVAL_P(op2)",
          "new_text": null,
          "old_line_content": "\t\tZVAL_LONG(result, Z_LVAL_P(op1)>Z_LVAL_P(op2)?1:(Z_LVAL_P(op1)<Z_LVAL_P(op2)?-1:0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": "ZVAL_DOUBLE",
          "new_api": null,
          "old_text": "ZVAL_DOUBLE(op1, d-1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tZVAL_DOUBLE(op1, d-1);",
          "new_line_content": "\t",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tlen = MIN(length, MIN(len1, len2));",
          "new_line_content": "ZEND_API int zend_binary_strncasecmp(char *s1, uint len1, char *s2, uint len2, uint length)",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(op1)",
          "new_text": null,
          "old_line_content": "\tif ((Z_TYPE_P(op1) == IS_DOUBLE || Z_TYPE_P(op1) == IS_LONG)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "zend_tolower",
          "new_api": null,
          "old_text": "zend_tolower((int)*(unsigned char *)s1++)",
          "new_text": null,
          "old_line_content": "\t\tc1 = zend_tolower((int)*(unsigned char *)s1++);",
          "new_line_content": "\tint c1, c2;",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "STR_FREE",
          "new_api": null,
          "old_text": "STR_FREE(op1->value.str.val)",
          "new_text": null,
          "old_line_content": "\t\t\t\tSTR_FREE(op1->value.str.val);",
          "new_line_content": "\t\tcase IS_DOUBLE:",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": "zend_tolower",
          "new_api": null,
          "old_text": "zend_tolower((int)*(unsigned char *)s2++)",
          "new_text": null,
          "old_line_content": "\t\tc2 = zend_tolower((int)*(unsigned char *)s2++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": null,
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": null,
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(length, len2)",
          "new_text": null,
          "old_line_content": "\treturn MIN(length, len1) - MIN(length, len2);",
          "new_line_content": "\t\tif (c1 != c2) {",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": "zend_binary_strcmp",
          "new_api": null,
          "old_text": "zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strcmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "STR_FREE",
          "new_api": null,
          "old_text": "STR_FREE(op1->value.str.val)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tSTR_FREE(op1->value.str.val);",
          "new_line_content": "\t\t\t\top1->type = IS_LONG;",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "convert_to_boolean",
          "new_api": null,
          "old_text": "convert_to_boolean(result)",
          "new_text": null,
          "old_line_content": "\tconvert_to_boolean(result);",
          "new_line_content": "ZEND_API int is_not_equal_function(zval *result, zval *op1, zval *op2 TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "ZVAL_LONG",
          "new_api": null,
          "old_text": "ZVAL_LONG(result, 1)",
          "new_text": null,
          "old_line_content": "\t\tZVAL_LONG(result, 1);",
          "new_line_content": "\t\tzend_compare_arrays(result, op1, op2 TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(op2)",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(op2)==IS_ARRAY) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(op1)",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(op1)==IS_OBJECT) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "STR_FREE",
          "new_api": null,
          "old_text": "STR_FREE(op1->value.str.val)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tSTR_FREE(op1->value.str.val);",
          "new_line_content": "\t\t\t\t\t\top1->value.lval = lval-1;",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "zend_binary_strcasecmp",
          "new_api": null,
          "old_text": "zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strcasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(op2)",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(op2)==IS_OBJECT) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "zend_binary_strncasecmp",
          "new_api": null,
          "old_text": "zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval)",
          "new_text": null,
          "old_line_content": "\treturn zend_binary_strncasecmp(s1->value.str.val, s1->value.str.len, s2->value.str.val, s2->value.str.len, s3->value.lval);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "estrndup",
          "new_api": null,
          "old_text": "estrndup(\"1\", sizeof(\"1\")-1)",
          "new_text": null,
          "old_line_content": "\t\tstr->value.str.val = estrndup(\"1\", sizeof(\"1\")-1);",
          "new_line_content": "    int last=0; /* Shut up the compiler warning */",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "emalloc",
          "new_api": null,
          "old_text": "emalloc(str->value.str.len+1+1)",
          "new_text": null,
          "old_line_content": "        t = (char *) emalloc(str->value.str.len+1+1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "TSRMLS_FETCH",
          "new_api": null,
          "old_text": "TSRMLS_FETCH()",
          "new_text": null,
          "old_line_content": "\tTSRMLS_FETCH();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(t+1, str->value.str.val, str->value.str.len)",
          "new_text": null,
          "old_line_content": "        memcpy(t+1, str->value.str.val, str->value.str.len);",
          "new_line_content": "        pos--;",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "convert_to_boolean",
          "new_api": null,
          "old_text": "convert_to_boolean(op)",
          "new_text": null,
          "old_line_content": "\tconvert_to_boolean(op);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "is_numeric_string",
          "new_api": null,
          "old_text": "is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)",
          "new_text": null,
          "old_line_content": "\tif ((ret1=is_numeric_string(s1->value.str.val, s1->value.str.len, &lval1, &dval1, 0)) &&",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "is_numeric_string",
          "new_api": null,
          "old_text": "is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0)",
          "new_text": null,
          "old_line_content": "\t\t(ret2=is_numeric_string(s2->value.str.val, s2->value.str.len, &lval2, &dval2, 0))) {",
          "new_line_content": "\tint ret1, ret2;",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": "_get_current_locale",
          "new_api": null,
          "old_text": "_get_current_locale()",
          "new_text": null,
          "old_line_content": "\tcurrent_locale = _get_current_locale();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "is_identical_function",
          "new_api": null,
          "old_text": "is_identical_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (is_identical_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "new_line_content": "\t/* is_identical_function() returns 1 in case of identity and 0 in case",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Unsupported operand types\")",
          "new_text": null,
          "old_line_content": "\tzend_error(E_ERROR, \"Unsupported operand types\");",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "zend_finite",
          "new_api": null,
          "old_text": "zend_finite(dval1)",
          "new_text": null,
          "old_line_content": "\t\t\t} else if (dval1 == dval2 && !zend_finite(dval1)) {",
          "new_line_content": "\t\tif ((ret1==IS_DOUBLE) || (ret2==IS_DOUBLE)) {",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister unsigned char *str = (unsigned char*)source;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister unsigned char *result = (unsigned char*)dest;",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(result, op1, op2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "STR_FREE",
          "new_api": null,
          "old_text": "STR_FREE(str->value.str.val)",
          "new_text": null,
          "old_line_content": "        STR_FREE(str->value.str.val);",
          "new_line_content": "            \tbreak;",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister unsigned char *end = str + length;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": null,
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.dval)",
          "new_text": null,
          "old_line_content": "\t\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.dval);",
          "new_line_content": "\t\t\t\t/* Both values overflowed and have the same sign,",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "zend_binary_zval_strcmp",
          "new_api": null,
          "old_text": "zend_binary_zval_strcmp(s1, s2)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = zend_binary_zval_strcmp(s1, s2);",
          "new_line_content": "\t\t\tresult->value.lval = lval1 > lval2 ? 1 : (lval1 < lval2 ? -1 : 0);",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": "ZEND_NORMALIZE_BOOL",
          "new_api": null,
          "old_text": "ZEND_NORMALIZE_BOOL(result->value.lval)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = ZEND_NORMALIZE_BOOL(result->value.lval);",
          "new_line_content": "\t\t\tresult->type = IS_LONG;",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister unsigned char *p = (unsigned char*)str;",
          "new_line_content": "\treturn dest;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "ZVAL_DOUBLE",
          "new_api": null,
          "old_text": "ZVAL_DOUBLE(op1, d+1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tZVAL_DOUBLE(op1, d+1);",
          "new_line_content": "\tswitch (op1->type) {",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "register",
          "new_api": null,
          "old_text": "register",
          "new_text": null,
          "old_line_content": "\tregister unsigned char *end = p + length;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "zend_tolower",
          "new_api": null,
          "old_text": "zend_tolower((int)*p)",
          "new_text": null,
          "old_line_content": "\t\t*p = zend_tolower((int)*p);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "compare_function",
          "new_api": null,
          "old_text": "compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tif (compare_function(&result, (zval *) *z1, (zval *) *z2 TSRMLS_CC)==FAILURE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(op1->value.str.val, op2->value.str.val, op1->value.str.len)",
          "new_text": null,
          "old_line_content": "\t\t\t\t&& (!memcmp(op1->value.str.val, op2->value.str.val, op1->value.str.len))) {",
          "new_line_content": "\t\tcase IS_DOUBLE:",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Unsupported operand types\")",
          "new_text": null,
          "old_line_content": "\tzend_error(E_ERROR, \"Unsupported operand types\");",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tretval = memcmp(s1, s2, MIN(len1, len2));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "zend_hash_compare",
          "new_api": null,
          "old_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\treturn zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "new_line_content": "\treturn result.value.lval;",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "zend_hash_compare",
          "new_api": null,
          "old_text": "zend_hash_compare(op1->value.ht, op2->value.ht, (compare_func_t) hash_zval_identical_function, 1 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\t\t\tif (zend_hash_compare(op1->value.ht, op2->value.ht, (compare_func_t) hash_zval_identical_function, 1 TSRMLS_CC)==0) {",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "is_numeric_string",
          "new_api": null,
          "old_text": "is_numeric_string(strval, op1->value.str.len, &lval, &dval, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tswitch (is_numeric_string(strval, op1->value.str.len, &lval, &dval, 0)) {",
          "new_line_content": "\t\tcase IS_STRING: {",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "instanceof_function",
          "new_api": null,
          "old_text": "instanceof_function(instance_ce->interfaces[i], ce TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\t\tif (instanceof_function(instance_ce->interfaces[i], ce TSRMLS_CC)) {",
          "new_line_content": "ZEND_API zend_bool instanceof_function_ex(zend_class_entry *instance_ce, zend_class_entry *ce, zend_bool interfaces_only TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "zend_hash_compare",
          "new_api": null,
          "old_text": "zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tresult->value.lval = zend_hash_compare(ht1, ht2, (compare_func_t) hash_zval_compare_function, 0 TSRMLS_CC);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "Z_OBJ_HT_P",
          "new_api": null,
          "old_text": "Z_OBJ_HT_P(op2)",
          "new_text": null,
          "old_line_content": "\t\t\tif (Z_OBJ_HT_P(op1) == Z_OBJ_HT_P(op2)) {",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(ze1_compatibility_mode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (EG(ze1_compatibility_mode)) {",
          "new_line_content": "\t\t\t\tresult->value.lval = 0;",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tretval = memcmp(s1, s2, MIN(length, MIN(len1, len2)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(length, len2)",
          "new_text": null,
          "old_line_content": "\t\treturn (MIN(length, len1) - MIN(length, len2));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": "zend_compare_symbol_tables",
          "new_api": null,
          "old_text": "zend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\tzend_compare_symbol_tables(result, a1->value.ht, a2->value.ht TSRMLS_CC);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "Z_OBJ_HANDLE_P",
          "new_api": null,
          "old_text": "Z_OBJ_HANDLE_P(op2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tresult->value.lval = (Z_OBJ_HANDLE_P(op1) == Z_OBJ_HANDLE_P(op2));",
          "new_line_content": "\t\t\t\t\t/* comparison returns 0 in case of equality and",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": "Z_OBJ_HANDLE_P",
          "new_api": null,
          "old_text": "Z_OBJ_HANDLE_P(o2)",
          "new_text": null,
          "old_line_content": "\tif (Z_OBJ_HANDLE_P(o1) == Z_OBJ_HANDLE_P(o2)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "instanceof_function_ex",
          "new_api": null,
          "old_text": "instanceof_function_ex(instance_ce, ce, 0 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\treturn instanceof_function_ex(instance_ce, ce, 0 TSRMLS_CC);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "ZVAL_BOOL",
          "new_api": null,
          "old_text": "ZVAL_BOOL(result, 0)",
          "new_text": null,
          "old_line_content": "\t\t\tZVAL_BOOL(result, 0);",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "increment_string",
          "new_api": null,
          "old_text": "increment_string(op1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tincrement_string(op1);",
          "new_line_content": "\t\t\t\t\t\top1->type = IS_DOUBLE;",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(len1, len2)",
          "new_text": null,
          "old_line_content": "\tlen = MIN(len1, len2);",
          "new_line_content": "ZEND_API int zend_binary_strcasecmp(char *s1, uint len1, char *s2, uint len2)",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "zend_tolower",
          "new_api": null,
          "old_text": "zend_tolower((int)*(unsigned char *)s1++)",
          "new_text": null,
          "old_line_content": "\t\tc1 = zend_tolower((int)*(unsigned char *)s1++);",
          "new_line_content": "\tint c1, c2;",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "zend_tolower",
          "new_api": null,
          "old_text": "zend_tolower((int)*(unsigned char *)s2++)",
          "new_text": null,
          "old_line_content": "\t\tc2 = zend_tolower((int)*(unsigned char *)s2++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "compare_objects",
          "new_api": null,
          "old_text": "Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "\t\tresult->value.lval = Z_OBJ_HT_P(o1)->compare_objects(o1, o2 TSRMLS_CC);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "is_identical_function",
          "new_api": null,
          "old_text": "is_identical_function(result, op1, op2 TSRMLS_CC)",
          "new_text": null,
          "old_line_content": "   if (is_identical_function(result, op1, op2 TSRMLS_CC) == FAILURE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(precision)",
          "new_text": null,
          "old_line_content": "\top->value.str.len = zend_spprintf(&op->value.str.val, 0, \"%.*G\", (int) EG(precision), (double)op->value.dval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "STR_FREE",
          "new_api": null,
          "old_text": "STR_FREE(str->value.str.val)",
          "new_text": null,
          "old_line_content": "\t\tSTR_FREE(str->value.str.val);",
          "new_line_content": "    char *t;",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "COMPARE_RETURN_AND_FREE",
          "new_api": null,
          "old_text": "COMPARE_RETURN_AND_FREE(SUCCESS)",
          "new_text": null,
          "old_line_content": "\t\tCOMPARE_RETURN_AND_FREE(SUCCESS);",
          "new_line_content": "\t\t\t/* object handles are identical, apprently this is the same object */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 19,
      "total_additions": 79,
      "total_deletions": 76,
      "total_api_changes": 174
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 174,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 403,
    "api_calls_after": 407,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
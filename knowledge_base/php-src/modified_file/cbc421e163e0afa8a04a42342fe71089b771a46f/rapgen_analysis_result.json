{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/cbc421e163e0afa8a04a42342fe71089b771a46f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/cbc421e163e0afa8a04a42342fe71089b771a46f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/cbc421e163e0afa8a04a42342fe71089b771a46f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/cbc421e163e0afa8a04a42342fe71089b771a46f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 594,
          "old_api": "dom_process_parse_chunk",
          "new_api": "decode",
          "old_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\t\tdecoding_buffer_used,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "new_text": "decoding_encoding_ctx->decode_data->decode(&decoding_encoding_ctx->decode, &buf_ref, buf_end)",
          "old_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "new_line_content": "\t\tdecode_status = decoding_encoding_ctx->decode_data->decode(&decoding_encoding_ctx->decode, &buf_ref, buf_end);",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "lxb_encoding_encode_buf_used_set",
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": "lxb_encoding_encode_buf_used_set(&decoding_encoding_ctx->encode, 0)",
          "new_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "old_line_content": "\t\t\tlxb_encoding_encode_buf_used_set(&decoding_encoding_ctx->encode, 0);",
          "new_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": "lxb_encoding_encode_finish",
          "old_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "new_text": "lxb_encoding_encode_finish(&decoding_encoding_ctx->encode)",
          "old_line_content": "\t\t\tlxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode),",
          "new_line_content": "\t(void) lxb_encoding_encode_finish(&decoding_encoding_ctx->encode);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "zend_argument_value_error",
          "new_api": "strlen",
          "old_text": "zend_argument_value_error(1, \"must be a valid document encoding\")",
          "new_text": "strlen(\"UTF-8\")",
          "old_line_content": "\t\tzend_argument_value_error(1, \"must be a valid document encoding\");",
          "new_line_content": "\tsize_t encoding_len = strlen(\"UTF-8\");",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "RETURN_THROWS",
          "new_api": "ZEND_NUM_ARGS",
          "old_text": "RETURN_THROWS()",
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"|p\", &encoding, &encoding_len) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "UNEXPECTED",
          "new_api": "lxb_encoding_data_by_name",
          "old_text": "UNEXPECTED(lxml_doc == NULL)",
          "new_text": "lxb_encoding_data_by_name((const lxb_char_t *) encoding, encoding_len)",
          "old_line_content": "\tif (UNEXPECTED(lxml_doc == NULL)) {",
          "new_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name((const lxb_char_t *) encoding, encoding_len);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "xmlStrdup",
          "new_api": "RETURN_THROWS",
          "old_text": "xmlStrdup((const xmlChar *) encoding)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tlxml_doc->encoding = xmlStrdup((const xmlChar *) encoding);",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "zend_parse_parameters",
          "new_api": "RETURN_THROWS",
          "old_text": "zend_parse_parameters(\n\t\tZEND_NUM_ARGS(),\n\t\t\"s|lp!\",\n\t\t&source,\n\t\t&source_len,\n\t\t&options,\n\t\t&override_encoding,\n\t\t&override_encoding_len\n\t)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tif (zend_parse_parameters(",
          "new_line_content": "\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "RETURN_THROWS",
          "new_api": "ZEND_NUM_ARGS",
          "old_text": "RETURN_THROWS()",
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZEND_NUM_ARGS(),",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "dom_reset_line_column_cache",
          "new_api": "check_options_validity",
          "old_text": "dom_reset_line_column_cache(&application_data.cache_tokenizer)",
          "new_text": "check_options_validity(2, options)",
          "old_line_content": "\tdom_reset_line_column_cache(&application_data.cache_tokenizer);",
          "new_line_content": "\tif (!check_options_validity(2, options)) {",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "RETURN_THROWS",
          "new_api": "dom_decoding_encoding_ctx_init",
          "old_text": "RETURN_THROWS()",
          "new_text": "dom_decoding_encoding_ctx_init(&decoding_encoding_ctx)",
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\tdom_decoding_encoding_ctx_init(&decoding_encoding_ctx);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "dom_setup_parser_encoding_manually",
          "new_api": "lxb_encoding_data_by_name",
          "old_text": "dom_setup_parser_encoding_manually(buf_ref, encoding_data, &decoding_encoding_ctx, &application_data)",
          "new_text": "lxb_encoding_data_by_name(\n\t\t\t(const lxb_char_t *) override_encoding,\n\t\t\toverride_encoding_len\n\t\t)",
          "old_line_content": "\t\tdom_setup_parser_encoding_manually(buf_ref, encoding_data, &decoding_encoding_ctx, &application_data);",
          "new_line_content": "\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "lxb_html_document_create",
          "new_api": "zend_argument_value_error",
          "old_text": "lxb_html_document_create()",
          "new_text": "zend_argument_value_error(3, \"must be a valid document encoding\")",
          "old_line_content": "\tlxb_html_document_t *document = lxb_html_document_create();",
          "new_line_content": "\t\t\tzend_argument_value_error(3, \"must be a valid document encoding\");",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "UNEXPECTED",
          "new_api": "RETURN_THROWS",
          "old_text": "UNEXPECTED(document == NULL)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tif (UNEXPECTED(document == NULL)) {",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "lxb_html_document_parse_chunk_begin",
          "new_api": "dom_setup_parser_encoding_implicitly",
          "old_text": "lxb_html_document_parse_chunk_begin(document)",
          "new_text": "dom_setup_parser_encoding_implicitly(&buf_ref, &source_len, &decoding_encoding_ctx, &application_data)",
          "old_line_content": "\tlxb_status_t lexbor_status = lxb_html_document_parse_chunk_begin(document);",
          "new_line_content": "\t\tdom_setup_parser_encoding_implicitly(&buf_ref, &source_len, &decoding_encoding_ctx, &application_data);",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "lexbor_libxml2_bridge_convert_document",
          "new_api": "lxb_html_document_parse_chunk_end",
          "old_text": "lexbor_libxml2_bridge_convert_document(\n\t\tdocument,\n\t\t&lxml_doc,\n\t\toptions & XML_PARSE_COMPACT,\n\t\t!(options & DOM_HTML_NO_DEFAULT_NS),\n\t\tns_mapper\n\t)",
          "new_text": "lxb_html_document_parse_chunk_end(document)",
          "old_line_content": "\tlexbor_libxml2_bridge_status bridge_status = lexbor_libxml2_bridge_convert_document(",
          "new_line_content": "\tlexbor_status = lxb_html_document_parse_chunk_end(document);",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "UNEXPECTED",
          "new_api": "lexbor_libxml2_bridge_convert_document",
          "old_text": "UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)",
          "new_text": "lexbor_libxml2_bridge_convert_document(\n\t\tdocument,\n\t\t&lxml_doc,\n\t\toptions & XML_PARSE_COMPACT,\n\t\t!(options & DOM_HTML_NO_DEFAULT_NS),\n\t\tns_mapper\n\t)",
          "old_line_content": "\tif (UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)) {",
          "new_line_content": "\tlexbor_libxml2_bridge_status bridge_status = lexbor_libxml2_bridge_convert_document(",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "lxb_html_document_destroy",
          "new_api": "UNEXPECTED",
          "old_text": "lxb_html_document_destroy(document)",
          "new_text": "UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)",
          "old_line_content": "\t\tlxb_html_document_destroy(document);",
          "new_line_content": "\tif (UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)) {",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "dom_post_process_html5_loading",
          "new_api": "dom_lexbor_libxml2_bridge_status_code_to_string",
          "old_text": "dom_post_process_html5_loading(lxml_doc, options, &ctx.observations)",
          "new_text": "dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status)",
          "old_line_content": "\tdom_post_process_html5_loading(lxml_doc, options, &ctx.observations);",
          "new_line_content": "\t\t\tdom_lexbor_libxml2_bridge_status_code_to_string(bridge_status),",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "xmlStrdup",
          "new_api": "lxb_html_document_destroy",
          "old_text": "xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name)",
          "new_text": "lxb_html_document_destroy(document)",
          "old_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name);",
          "new_line_content": "\t\tlxb_html_document_destroy(document);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "php_dom_instantiate_object_helper",
          "new_api": "dom_post_process_html5_loading",
          "old_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "new_text": "dom_post_process_html5_loading(lxml_doc, options, &ctx.observations)",
          "old_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "new_line_content": "\tdom_post_process_html5_loading(lxml_doc, options, &ctx.observations);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "RETURN_THROWS",
          "new_api": "ZEND_NUM_ARGS",
          "old_text": "RETURN_THROWS()",
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\tZEND_NUM_ARGS(),",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "dom_reset_line_column_cache",
          "new_api": "check_options_validity",
          "old_text": "dom_reset_line_column_cache(&application_data.cache_tokenizer)",
          "new_text": "check_options_validity(2, options)",
          "old_line_content": "\tdom_reset_line_column_cache(&application_data.cache_tokenizer);",
          "new_line_content": "\tif (!check_options_validity(2, options)) {",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "zend_argument_value_error",
          "new_api": "dom_decoding_encoding_ctx_init",
          "old_text": "zend_argument_value_error(3, \"must be a valid document encoding\")",
          "new_text": "dom_decoding_encoding_ctx_init(&decoding_encoding_ctx)",
          "old_line_content": "\t\t\tzend_argument_value_error(3, \"must be a valid document encoding\");",
          "new_line_content": "\tdom_decoding_encoding_ctx_init(&decoding_encoding_ctx);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "php_libxml_get_stream_context",
          "new_api": "zend_argument_value_error",
          "old_text": "php_libxml_get_stream_context()",
          "new_text": "zend_argument_value_error(3, \"must be a valid document encoding\")",
          "old_line_content": "\tstream = php_stream_open_wrapper_ex(filename, \"rb\", REPORT_ERRORS, &opened_path, php_libxml_get_stream_context());",
          "new_line_content": "\t\t\tzend_argument_value_error(3, \"must be a valid document encoding\");",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "php_libxml_sniff_charset_from_stream",
          "new_api": "EG",
          "old_text": "php_libxml_sniff_charset_from_stream(stream)",
          "new_text": "EG(exception)",
          "old_line_content": "\t\tzend_string *charset = php_libxml_sniff_charset_from_stream(stream);",
          "new_line_content": "\t\tif (!EG(exception)) {",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "ZSTR_VAL",
          "new_api": "RETURN_THROWS",
          "old_text": "ZSTR_VAL(charset)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\t\t\t\t(const lxb_char_t *) ZSTR_VAL(charset),",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "dom_setup_parser_encoding_manually",
          "new_api": "php_libxml_sniff_charset_from_stream",
          "old_text": "dom_setup_parser_encoding_manually(\n\t\t\t\t\t(const lxb_char_t *) buf,\n\t\t\t\t\tencoding_data,\n\t\t\t\t\t&decoding_encoding_ctx,\n\t\t\t\t\t&application_data\n\t\t\t\t)",
          "new_text": "php_libxml_sniff_charset_from_stream(stream)",
          "old_line_content": "\t\t\t\tdom_setup_parser_encoding_manually(",
          "new_line_content": "\t\tzend_string *charset = php_libxml_sniff_charset_from_stream(stream);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "lexbor_libxml2_bridge_convert_document",
          "new_api": "lxb_html_document_parse_chunk_end",
          "old_text": "lexbor_libxml2_bridge_convert_document(\n\t\tdocument,\n\t\t&lxml_doc,\n\t\toptions & XML_PARSE_COMPACT,\n\t\t!(options & DOM_HTML_NO_DEFAULT_NS),\n\t\tns_mapper\n\t)",
          "new_text": "lxb_html_document_parse_chunk_end(document)",
          "old_line_content": "\tlexbor_libxml2_bridge_status bridge_status = lexbor_libxml2_bridge_convert_document(",
          "new_line_content": "\tlexbor_status = lxb_html_document_parse_chunk_end(document);",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "UNEXPECTED",
          "new_api": "lexbor_libxml2_bridge_convert_document",
          "old_text": "UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)",
          "new_text": "lexbor_libxml2_bridge_convert_document(\n\t\tdocument,\n\t\t&lxml_doc,\n\t\toptions & XML_PARSE_COMPACT,\n\t\t!(options & DOM_HTML_NO_DEFAULT_NS),\n\t\tns_mapper\n\t)",
          "old_line_content": "\tif (UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)) {",
          "new_line_content": "\tlexbor_libxml2_bridge_status bridge_status = lexbor_libxml2_bridge_convert_document(",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "dom_post_process_html5_loading",
          "new_api": "lexbor_libxml2_bridge_copy_observations",
          "old_text": "dom_post_process_html5_loading(lxml_doc, options, &ctx.observations)",
          "new_text": "lexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations)",
          "old_line_content": "\tdom_post_process_html5_loading(lxml_doc, options, &ctx.observations);",
          "new_line_content": "\tlexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations);",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "xmlFree",
          "new_api": "ZSTR_VAL",
          "old_text": "xmlFree(converted)",
          "new_text": "ZSTR_VAL(opened_path)",
          "old_line_content": "\t\t\t\txmlFree(converted);",
          "new_line_content": "\t\txmlChar *converted = xmlPathToURI((const xmlChar *) ZSTR_VAL(opened_path));",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "xmlFree",
          "new_api": "strncmp",
          "old_text": "xmlFree(buffer)",
          "new_text": "strncmp((const char *) converted, \"file:/\", sizeof(\"file:/\") - 1)",
          "old_line_content": "\t\t\t\txmlFree(buffer);",
          "new_line_content": "\t\tif (strncmp((const char *) converted, \"file:/\", sizeof(\"file:/\") - 1) != 0) {",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "xmlFree",
          "new_api": "xmlStrdup",
          "old_text": "xmlFree(converted)",
          "new_text": "xmlStrdup((const xmlChar *) \"file://\")",
          "old_line_content": "\t\t\t\txmlFree(converted);",
          "new_line_content": "\t\t\txmlChar *buffer = xmlStrdup((const xmlChar *) \"file://\");",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "php_dom_libxml_fix_file_path",
          "new_api": "xmlFree",
          "old_text": "php_dom_libxml_fix_file_path(converted)",
          "new_text": "xmlFree(buffer)",
          "old_line_content": "\t\t\tconverted = php_dom_libxml_fix_file_path(converted);",
          "new_line_content": "\t\t\t\txmlFree(buffer);",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "zend_string_release_ex",
          "new_api": "php_dom_throw_error",
          "old_text": "zend_string_release_ex(opened_path, false)",
          "new_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "old_line_content": "\t\tzend_string_release_ex(opened_path, false);",
          "new_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "smart_str_appendl",
          "new_api": "php_stream_close",
          "old_text": "smart_str_appendl((smart_str *) ctx, buf, size)",
          "new_text": "php_stream_close(stream)",
          "old_line_content": "\tsmart_str_appendl((smart_str *) ctx, buf, size);",
          "new_line_content": "\tphp_stream_close(stream);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "lxb_encoding_encode_buf_used_set",
          "new_api": "encode",
          "old_text": "lxb_encoding_encode_buf_used_set(output->encode, 0)",
          "new_text": "output->encoding_data->encode(output->encode, &codepoints_ref, codepoints_end)",
          "old_line_content": "\t\t\tlxb_encoding_encode_buf_used_set(output->encode, 0);",
          "new_line_content": "\t\t\tencode_status = output->encoding_data->encode(output->encode, &codepoints_ref, codepoints_end);",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "strlen",
          "new_api": "lxb_encoding_decode_buf_used_set",
          "old_text": "strlen(buf)",
          "new_text": "lxb_encoding_decode_buf_used_set(output->decode, 0)",
          "old_line_content": "\treturn dom_saveHTML_write_string_len(application_data, buf, strlen(buf));",
          "new_line_content": "\t\tlxb_encoding_decode_buf_used_set(output->decode, 0);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "lxb_encoding_encode_init",
          "new_api": "lxb_encoding_data_by_name",
          "old_text": "lxb_encoding_encode_init(&encode, encoding_data, encoding_output, sizeof(encoding_output) / sizeof(*encoding_output))",
          "new_text": "lxb_encoding_data_by_name(\n\t\t(const lxb_char_t *) docp->encoding,\n\t\tstrlen((const char *) docp->encoding)\n\t)",
          "old_line_content": "\t(void) lxb_encoding_encode_init(&encode, encoding_data, encoding_output, sizeof(encoding_output) / sizeof(*encoding_output));",
          "new_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "lxb_encoding_decode_replace_set",
          "new_api": "lxb_encoding_encode_init",
          "old_text": "lxb_encoding_decode_replace_set(&decode, LXB_ENCODING_REPLACEMENT_BUFFER, LXB_ENCODING_REPLACEMENT_BUFFER_LEN)",
          "new_text": "lxb_encoding_encode_init(&encode, encoding_data, encoding_output, sizeof(encoding_output) / sizeof(*encoding_output))",
          "old_line_content": "\tlxb_encoding_decode_replace_set(&decode, LXB_ENCODING_REPLACEMENT_BUFFER, LXB_ENCODING_REPLACEMENT_BUFFER_LEN);",
          "new_line_content": "\t(void) lxb_encoding_encode_init(&encode, encoding_data, encoding_output, sizeof(encoding_output) / sizeof(*encoding_output));",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "write_output",
          "new_api": "dom_html5_serialize_outer",
          "old_text": "output_ctx->write_output(\n\t\t\toutput_ctx->output_data,\n\t\t\t(const char *) encoding_output,\n\t\t\tlxb_encoding_encode_buf_used(&encode))",
          "new_text": "dom_html5_serialize_outer(&ctx, node)",
          "old_line_content": "\t\tif (UNEXPECTED(output_ctx->write_output(",
          "new_line_content": "\tif (UNEXPECTED(dom_html5_serialize_outer(&ctx, node) != SUCCESS)) {",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "lxb_encoding_encode_finish",
          "new_api": "write_output",
          "old_text": "lxb_encoding_encode_finish(&encode)",
          "new_text": "output_ctx->write_output(\n\t\t\toutput_ctx->output_data,\n\t\t\t(const char *) encoding_output,\n\t\t\tlxb_encoding_encode_buf_used(&encode))",
          "old_line_content": "\t(void) lxb_encoding_encode_finish(&encode);",
          "new_line_content": "\t\tif (UNEXPECTED(output_ctx->write_output(",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": "php_libxml_get_stream_context",
          "new_api": "RETURN_THROWS",
          "old_text": "php_libxml_get_stream_context()",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tphp_stream *stream = php_stream_open_wrapper_ex(file, \"wb\", REPORT_ERRORS, /* opened_path */ NULL, php_libxml_get_stream_context());",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "DOM_GET_OBJ",
          "new_api": "RETURN_THROWS",
          "old_text": "DOM_GET_OBJ(docp, id, xmlDocPtr, intern)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tDOM_GET_OBJ(docp, id, xmlDocPtr, intern);",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "RETURN_LONG",
          "new_api": "dom_common_save",
          "old_text": "RETURN_LONG(bytes)",
          "new_text": "dom_common_save(&output_ctx, docp, (const xmlNode *) docp)",
          "old_line_content": "\tRETURN_LONG(bytes);",
          "new_line_content": "\tif (UNEXPECTED(dom_common_save(&output_ctx, docp, (const xmlNode *) docp) != SUCCESS)) {",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "php_dom_throw_error",
          "new_api": "RETURN_THROWS",
          "old_text": "php_dom_throw_error(WRONG_DOCUMENT_ERR, true)",
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\t\t\tphp_dom_throw_error(WRONG_DOCUMENT_ERR, true);",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "DOM_PROP_NODE",
          "new_api": "dom_common_save",
          "old_text": "DOM_PROP_NODE(xmlDocPtr, docp, obj)",
          "new_text": "dom_common_save(&output_ctx, docp, node)",
          "old_line_content": "\tDOM_PROP_NODE(xmlDocPtr, docp, obj);",
          "new_line_content": "\tzend_result result = dom_common_save(&output_ctx, docp, node);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "Z_TYPE_P",
          "new_api": "smart_str_extract",
          "old_text": "Z_TYPE_P(newval)",
          "new_text": "smart_str_extract(&buf)",
          "old_line_content": "\tZEND_ASSERT(Z_TYPE_P(newval) == IS_STRING || Z_TYPE_P(newval) == IS_NULL);",
          "new_line_content": "\tRETURN_STR(smart_str_extract(&buf));",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "zend_value_error",
          "new_api": "xmlStrdup",
          "old_text": "zend_value_error(\"Invalid document encoding\")",
          "new_text": "xmlStrdup((const xmlChar *) encoding_data->name)",
          "old_line_content": "\tzend_value_error(\"Invalid document encoding\");",
          "new_line_content": "\t\tdocp->encoding = xmlStrdup((const xmlChar *) encoding_data->name);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1025,
          "old_api": null,
          "new_api": "dom_setup_parser_encoding_implicitly",
          "old_text": null,
          "new_text": "dom_setup_parser_encoding_implicitly(&buf_ref, (size_t *) &read, &decoding_encoding_ctx, &application_data)",
          "old_line_content": "\t\t\t&buf_ref,",
          "new_line_content": "\t\t\tdom_setup_parser_encoding_implicitly(&buf_ref, (size_t *) &read, &decoding_encoding_ctx, &application_data);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "dom_parse_decode_encode_step",
          "old_text": null,
          "new_text": "dom_parse_decode_encode_step(\n\t\t\t&ctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\t&buf_ref,\n\t\t\tbuf_end,\n\t\t\t&decoding_encoding_ctx,\n\t\t\t&tokenizer_error_offset,\n\t\t\t&tree_error_offset\n\t\t)",
          "old_line_content": "\t\t\t&tree_error_offset",
          "new_line_content": "\t\tbool result = dom_parse_decode_encode_step(",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "lxb_encoding_decode_utf_8_single",
          "old_text": null,
          "new_text": "lxb_encoding_decode_utf_8_single(&decoding_encoding_ctx->decode, &buf_ref, buf_end)",
          "old_line_content": "\t\t\t\tlast_output,",
          "new_line_content": "\t\tlxb_codepoint_t codepoint = lxb_encoding_decode_utf_8_single(&decoding_encoding_ctx->decode, &buf_ref, buf_end);",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(codepoint > LXB_ENCODING_MAX_CODEPOINT)",
          "old_line_content": "\t\t\t\tbuf_ref - last_output,",
          "new_line_content": "\t\tif (UNEXPECTED(codepoint > LXB_ENCODING_MAX_CODEPOINT)) {",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "dom_parse_decode_encode_finish",
          "old_text": null,
          "new_text": "dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)",
          "old_line_content": "",
          "new_line_content": "\tif (!dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)) {",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tbuf_ref - last_output - skip,\n\t\t\t\tlast_output,\n\t\t\t\tbuf_ref - last_output,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "old_line_content": "\t\t\t\ttree_error_offset",
          "new_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_create",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_create()",
          "old_line_content": "\t\tns_mapper",
          "new_line_content": "\tns_mapper = php_dom_libxml_ns_mapper_create();",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tLXB_ENCODING_REPLACEMENT_SIZE,\n\t\t\t\tLXB_ENCODING_REPLACEMENT_BYTES,\n\t\t\t\t0,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "old_line_content": "\t\t\t\ttree_error_offset",
          "new_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)",
          "old_line_content": "",
          "new_line_content": "\tif (UNEXPECTED(bridge_status != LEXBOR_LIBXML2_BRIDGE_STATUS_OK)) {",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "dom_lexbor_libxml2_bridge_status_code_to_string",
          "old_text": null,
          "new_text": "dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status)",
          "old_line_content": "\tif (decoding_encoding_ctx.decode_data) {",
          "new_line_content": "\t\tphp_libxml_ctx_error(NULL, \"%s in %s\", dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status), filename);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "lxb_html_document_destroy",
          "old_text": null,
          "new_text": "lxb_html_document_destroy(document)",
          "old_line_content": "\t}",
          "new_line_content": "\tlxb_html_document_destroy(document);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "dom_post_process_html5_loading",
          "old_text": null,
          "new_text": "dom_post_process_html5_loading(lxml_doc, options, &ctx.observations)",
          "old_line_content": "\tif (stream->wrapper == &php_plain_files_wrapper && opened_path != NULL) {",
          "new_line_content": "\tdom_post_process_html5_loading(lxml_doc, options, &ctx.observations);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref - last_output,\n\t\t\tlast_output,\n\t\t\tbuf_ref - last_output,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t)",
          "old_line_content": "\t\t\ttree_error_offset",
          "new_line_content": "\t\t&& !dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name)",
          "old_line_content": "\t\t\tgoto fail_oom;",
          "new_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) \"UTF-8\")",
          "old_line_content": "\t\t/* Check for \"file:/\" instead of \"file://\" because of libxml2 quirk */",
          "new_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) \"UTF-8\");",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(!converted)",
          "old_line_content": "\t\t\t\tgoto fail_oom;",
          "new_line_content": "\t\tif (UNEXPECTED(!converted)) {",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(!buffer)",
          "old_line_content": "\t\t\t\tgoto fail_oom;",
          "new_line_content": "\t\t\tif (UNEXPECTED(!buffer)) {",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "xmlFree",
          "old_text": null,
          "new_text": "xmlFree(converted)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\txmlFree(converted);",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": null,
          "new_api": "xmlStrcat",
          "old_text": null,
          "new_text": "xmlStrcat(buffer, converted)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t\txmlChar *new_buffer = xmlStrcat(buffer, converted);",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(!new_buffer)",
          "old_line_content": "#if PHP_WIN32",
          "new_line_content": "\t\t\tif (UNEXPECTED(!new_buffer)) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "xmlFree",
          "old_text": null,
          "new_text": "xmlFree(converted)",
          "old_line_content": "#endif",
          "new_line_content": "\t\t\t\txmlFree(converted);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "xmlFree",
          "old_text": null,
          "new_text": "xmlFree(converted)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\t\txmlFree(converted);",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "php_dom_libxml_fix_file_path",
          "old_text": null,
          "new_text": "php_dom_libxml_fix_file_path(converted)",
          "old_line_content": "\tif (opened_path != NULL) {",
          "new_line_content": "\t\t\tconverted = php_dom_libxml_fix_file_path(converted);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) filename)",
          "old_line_content": "",
          "new_line_content": "\t\tlxml_doc->URL = xmlStrdup((const xmlChar *) filename);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "old_line_content": "\t\t\t\tparser,",
          "new_line_content": "\t\tsize_t decoding_buffer_used = lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "zend_string_release_ex",
          "old_text": null,
          "new_text": "zend_string_release_ex(opened_path, false)",
          "old_line_content": "\t\t(xmlNodePtr) lxml_doc,",
          "new_line_content": "\t\tzend_string_release_ex(opened_path, false);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "encode",
          "old_text": null,
          "new_text": "decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end)",
          "old_line_content": "\t\t\t\tdecoding_buffer_used,",
          "new_line_content": "\t\t\tencode_status = decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "ZEND_ASSERT",
          "old_text": null,
          "new_text": "ZEND_ASSERT(encode_status != LXB_STATUS_ERROR && \"parameters and replacements should be valid\")",
          "old_line_content": "\t\t\t\ttokenizer_error_offset,",
          "new_line_content": "\t\t\tZEND_ASSERT(encode_status != LXB_STATUS_ERROR && \"parameters and replacements should be valid\");",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\t\tdecoding_buffer_used,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "old_line_content": "\t\t\t\ttree_error_offset",
          "new_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "php_dom_instantiate_object_helper",
          "old_text": null,
          "new_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "old_line_content": "\treturn;",
          "new_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "php_stream_close",
          "old_text": null,
          "new_text": "php_stream_close(stream)",
          "old_line_content": "\t);",
          "new_line_content": "\tphp_stream_close(stream);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_header",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_header(ns_mapper)",
          "old_line_content": "\t}",
          "new_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(ns_mapper);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used_set",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used_set(&decoding_encoding_ctx->encode, 0)",
          "old_line_content": "\treturn false;",
          "new_line_content": "\t\t\tlxb_encoding_encode_buf_used_set(&decoding_encoding_ctx->encode, 0);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used_set",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used_set(&decoding_encoding_ctx->decode, 0)",
          "old_line_content": "",
          "new_line_content": "\t\tlxb_encoding_decode_buf_used_set(&decoding_encoding_ctx->decode, 0);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_destroy",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_destroy(ns_mapper)",
          "old_line_content": "",
          "new_line_content": "\t\tphp_dom_libxml_ns_mapper_destroy(ns_mapper);",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "lxb_html_document_destroy",
          "old_text": null,
          "new_text": "lxb_html_document_destroy(document)",
          "old_line_content": "{",
          "new_line_content": "\tlxb_html_document_destroy(document);",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "zend_string_release_ex",
          "old_text": null,
          "new_text": "zend_string_release_ex(opened_path, false)",
          "old_line_content": "}",
          "new_line_content": "\t\tzend_string_release_ex(opened_path, false);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "smart_str_appendl",
          "old_text": null,
          "new_text": "smart_str_appendl((smart_str *) ctx, buf, size)",
          "old_line_content": "\t\treturn FAILURE;",
          "new_line_content": "\tsmart_str_appendl((smart_str *) ctx, buf, size);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "php_stream_write",
          "old_text": null,
          "new_text": "php_stream_write(stream, buf, len)",
          "old_line_content": "\tdom_output_ctx *output = (dom_output_ctx *) application_data;",
          "new_line_content": "\tif (UNEXPECTED(php_stream_write(stream, buf, len) < 0)) {",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "dom_decode_encode_fast_path",
          "old_text": null,
          "new_text": "dom_decode_encode_fast_path(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref_ref,\n\t\t\tbuf_end,\n\t\t\tdecoding_encoding_ctx,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t\t)",
          "old_line_content": "\t\t\ttree_error_offset",
          "new_line_content": "\t\treturn dom_decode_encode_fast_path(",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": null,
          "new_api": "dom_decode_encode_slow_path",
          "old_text": null,
          "new_text": "dom_decode_encode_slow_path(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref_ref,\n\t\t\tbuf_end,\n\t\t\tdecoding_encoding_ctx,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t\t)",
          "old_line_content": "\t\t\ttree_error_offset",
          "new_line_content": "\t\treturn dom_decode_encode_slow_path(",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "decode",
          "old_text": null,
          "new_text": "output->decoding_data->decode(output->decode, &buf_ref, buf_end)",
          "old_line_content": "\t\t\t\t(const char *) output->encoding_output,",
          "new_line_content": "\t\tdecode_status = output->decoding_data->decode(output->decode, &buf_ref, buf_end);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(output->decode)",
          "old_line_content": "\t\t\t\treturn FAILURE;",
          "new_line_content": "\t\tconst lxb_codepoint_t *codepoints_end = codepoints_ref + lxb_encoding_decode_buf_used(output->decode);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "write_output",
          "old_text": null,
          "new_text": "output->write_output(\n\t\t\t\toutput->output_data,\n\t\t\t\t(const char *) output->encoding_output,\n\t\t\t\tlxb_encoding_encode_buf_used(output->encode)\n\t\t\t)",
          "old_line_content": "\t\t} while (encode_status == LXB_STATUS_SMALL_BUFFER);",
          "new_line_content": "\t\t\tif (UNEXPECTED(output->write_output(",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(output->encode)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(output->encode)",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used_set",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used_set(output->encode, 0)",
          "old_line_content": "static zend_result dom_saveHTML_write_string(void *application_data, const char *buf)",
          "new_line_content": "\t\t\tlxb_encoding_encode_buf_used_set(output->encode, 0);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "lxb_encoding_decode_finish",
          "old_text": null,
          "new_text": "lxb_encoding_decode_finish(&decoding_encoding_ctx->decode)",
          "old_line_content": "\t\t\t\tdocument,",
          "new_line_content": "\t\t(void) lxb_encoding_decode_finish(&decoding_encoding_ctx->decode);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "old_line_content": "\t\t\t\tparser,",
          "new_line_content": "\t\tsize_t decoding_buffer_size = lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buf)",
          "old_line_content": "\t\t(const lxb_char_t *) docp->encoding,",
          "new_line_content": "\treturn dom_saveHTML_write_string_len(application_data, buf, strlen(buf));",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "encode",
          "old_text": null,
          "new_text": "decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end)",
          "old_line_content": "\t\t\t\ttokenizer_error_offset,",
          "new_line_content": "\t\t\t(void) decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end);",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\t\tdecoding_buffer_size,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "old_line_content": "\t\t\t\ttree_error_offset",
          "new_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "lxb_encoding_data",
          "old_text": null,
          "new_text": "lxb_encoding_data(LXB_ENCODING_UTF_8)",
          "old_line_content": "\tlxb_codepoint_t codepoints[4096];",
          "new_line_content": "\tconst lxb_encoding_data_t *decoding_data = lxb_encoding_data(LXB_ENCODING_UTF_8);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen((const char *) docp->encoding)",
          "old_line_content": "\tif (encoding_data->encoding == LXB_ENCODING_UTF_8) {",
          "new_line_content": "\t\tstrlen((const char *) docp->encoding)",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "lxb_encoding_decode_init",
          "old_text": null,
          "new_text": "lxb_encoding_decode_init(&decode, decoding_data, codepoints, sizeof(codepoints) / sizeof(*codepoints))",
          "old_line_content": "",
          "new_line_content": "\t(void) lxb_encoding_decode_init(&decode, decoding_data, codepoints, sizeof(codepoints) / sizeof(*codepoints));",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "lxb_encoding_encode_replace_set",
          "old_text": null,
          "new_text": "lxb_encoding_encode_replace_set(&encode, LXB_ENCODING_REPLACEMENT_BYTES, LXB_ENCODING_REPLACEMENT_SIZE)",
          "old_line_content": "\toutput_ctx->decoding_data = decoding_data;",
          "new_line_content": "\t\tlxb_encoding_encode_replace_set(&encode, LXB_ENCODING_REPLACEMENT_BYTES, LXB_ENCODING_REPLACEMENT_SIZE);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "old_line_content": "\t\t\ttokenizer_error_offset,",
          "new_line_content": "\tif (lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "dom_process_parse_chunk",
          "old_text": null,
          "new_text": "dom_process_parse_chunk(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\tlxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode),\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t)",
          "old_line_content": "\t\t\ttree_error_offset",
          "new_line_content": "\t\t&& !dom_process_parse_chunk(",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "lxb_encoding_encode_replace_set",
          "old_text": null,
          "new_text": "lxb_encoding_encode_replace_set(&encode, (const lxb_char_t *) \"?\", 1)",
          "old_line_content": "\toutput_ctx->codepoints = codepoints;",
          "new_line_content": "\t\tlxb_encoding_encode_replace_set(&encode, (const lxb_char_t *) \"?\", 1);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "lxb_encoding_decode_replace_set",
          "old_text": null,
          "new_text": "lxb_encoding_decode_replace_set(&decode, LXB_ENCODING_REPLACEMENT_BUFFER, LXB_ENCODING_REPLACEMENT_BUFFER_LEN)",
          "old_line_content": "",
          "new_line_content": "\tlxb_encoding_decode_replace_set(&decode, LXB_ENCODING_REPLACEMENT_BUFFER, LXB_ENCODING_REPLACEMENT_BUFFER_LEN);",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "old_line_content": "\treturn true;",
          "new_line_content": "\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "old_line_content": "",
          "new_line_content": "\t\t\tlxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode),",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "lxb_encoding_decode_finish",
          "old_text": null,
          "new_text": "lxb_encoding_decode_finish(&decode)",
          "old_line_content": "\t\t)) {",
          "new_line_content": "\t(void) lxb_encoding_decode_finish(&decode);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "zend_argument_value_error",
          "old_text": null,
          "new_text": "zend_argument_value_error(arg_num, \"contains invalid flags (allowed flags: \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_NOERROR, \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_COMPACT, \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_HTML_NOIMPLIED, \"\n\t\t\t\t\t\t\t\t\t\t   \"DOM\\\\NO_DEFAULT_NS)\")",
          "old_line_content": "}",
          "new_line_content": "\t\tzend_argument_value_error(arg_num, \"contains invalid flags (allowed flags: \"",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(&decode)",
          "old_line_content": "\t\t\treturn FAILURE;",
          "new_line_content": "\tif (lxb_encoding_decode_buf_used(&decode)) {",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "lxb_encoding_decode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_decode_buf_used(&decode)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t(void) encoding_data->encode(&encode, &codepoints_ref, codepoints_ref + lxb_encoding_decode_buf_used(&decode));",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&encode)",
          "old_line_content": "\t\t\toutput_ctx->output_data,",
          "new_line_content": "\t\t\tlxb_encoding_encode_buf_used(&encode)) != SUCCESS",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": null,
          "new_api": "lxb_encoding_encode_finish",
          "old_text": null,
          "new_text": "lxb_encoding_encode_finish(&encode)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t(void) lxb_encoding_encode_finish(&encode);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&encode)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (lxb_encoding_encode_buf_used(&encode)) {",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "write_output",
          "old_text": null,
          "new_text": "output_ctx->write_output(\n\t\t\toutput_ctx->output_data,\n\t\t\t(const char *) encoding_output,\n\t\t\tlxb_encoding_encode_buf_used(&encode))",
          "old_line_content": "",
          "new_line_content": "\t\tif (UNEXPECTED(output_ctx->write_output(",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\t}",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "lxb_encoding_encode_buf_used",
          "old_text": null,
          "new_text": "lxb_encoding_encode_buf_used(&encode)",
          "old_line_content": "",
          "new_line_content": "\t\t\tlxb_encoding_encode_buf_used(&encode)) != SUCCESS",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "zend_argument_value_error",
          "old_text": null,
          "new_text": "zend_argument_value_error(1, \"must be a valid document encoding\")",
          "old_line_content": "",
          "new_line_content": "\t\tzend_argument_value_error(1, \"must be a valid document encoding\");",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "php_dom_create_html_doc",
          "old_text": null,
          "new_text": "php_dom_create_html_doc()",
          "old_line_content": "\t\treturn_value,",
          "new_line_content": "\txmlDocPtr lxml_doc = php_dom_create_html_doc();",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(lxml_doc == NULL)",
          "old_line_content": "\t\tdom_html_document_class_entry,",
          "new_line_content": "\tif (UNEXPECTED(lxml_doc == NULL)) {",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) encoding)",
          "old_line_content": "\tintern->document->class_type = PHP_LIBXML_CLASS_MODERN;",
          "new_line_content": "\tlxml_doc->encoding = xmlStrdup((const xmlChar *) encoding);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "php_dom_instantiate_object_helper",
          "old_text": null,
          "new_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "old_line_content": "\treturn;",
          "new_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"p\", &file, &file_len) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_create",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_create()",
          "old_line_content": "PHP_METHOD(DOM_HTMLDocument, createFromString)",
          "new_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(php_dom_libxml_ns_mapper_create());",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "zend_argument_value_error",
          "old_text": null,
          "new_text": "zend_argument_value_error(1, \"must not be empty\")",
          "old_line_content": "",
          "new_line_content": "\t\tzend_argument_value_error(1, \"must not be empty\");",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "php_dom_throw_error",
          "old_text": null,
          "new_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "old_line_content": "\tzend_long options = 0;",
          "new_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "php_libxml_get_stream_context",
          "old_text": null,
          "new_text": "php_libxml_get_stream_context()",
          "old_line_content": "\toutput_ctx.output_data = stream;",
          "new_line_content": "\tphp_stream *stream = php_stream_open_wrapper_ex(file, \"wb\", REPORT_ERRORS, /* opened_path */ NULL, php_libxml_get_stream_context());",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "DOM_GET_OBJ",
          "old_text": null,
          "new_text": "DOM_GET_OBJ(docp, id, xmlDocPtr, intern)",
          "old_line_content": "\t}",
          "new_line_content": "\tDOM_GET_OBJ(docp, id, xmlDocPtr, intern);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "zend_parse_parameters",
          "old_text": null,
          "new_text": "zend_parse_parameters(\n\t\tZEND_NUM_ARGS(),\n\t\t\"s|lp!\",\n\t\t&source,\n\t\t&source_len,\n\t\t&options,\n\t\t&override_encoding,\n\t\t&override_encoding_len\n\t)",
          "old_line_content": "\t) == FAILURE) {",
          "new_line_content": "\tif (zend_parse_parameters(",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "php_stream_close",
          "old_text": null,
          "new_text": "php_stream_close(stream)",
          "old_line_content": "}",
          "new_line_content": "\t\tphp_stream_close(stream);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "php_stream_tell",
          "old_text": null,
          "new_text": "php_stream_tell(stream)",
          "old_line_content": "\tzval *nodep = NULL;",
          "new_line_content": "\tzend_long bytes = php_stream_tell(stream);",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "php_stream_close",
          "old_text": null,
          "new_text": "php_stream_close(stream)",
          "old_line_content": "\tconst xmlDoc *docp;",
          "new_line_content": "\tphp_stream_close(stream);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tapplication_data.input_name = \"Entity\";",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "RETURN_LONG",
          "old_text": null,
          "new_text": "RETURN_LONG(bytes)",
          "old_line_content": "\tdom_object *intern, *nodeobj;",
          "new_line_content": "\tRETURN_LONG(bytes);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tlexbor_libxml2_bridge_parse_context ctx;",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "\t\tif (node->doc != docp) {",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"|O!\", &nodep, dom_modern_node_class_entry) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "dom_reset_line_column_cache",
          "old_text": null,
          "new_text": "dom_reset_line_column_cache(&application_data.cache_tokenizer)",
          "old_line_content": "\t\t);",
          "new_line_content": "\tdom_reset_line_column_cache(&application_data.cache_tokenizer);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "lexbor_libxml2_bridge_parse_context_init",
          "old_text": null,
          "new_text": "lexbor_libxml2_bridge_parse_context_init(&ctx)",
          "old_line_content": "\tctx.application_data = &application_data;",
          "new_line_content": "\tlexbor_libxml2_bridge_parse_context_init(&ctx);",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "DOM_GET_OBJ",
          "old_text": null,
          "new_text": "DOM_GET_OBJ(docp, ZEND_THIS, xmlDocPtr, intern)",
          "old_line_content": "\t} else {",
          "new_line_content": "\tDOM_GET_OBJ(docp, ZEND_THIS, xmlDocPtr, intern);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "lexbor_libxml2_bridge_parse_set_error_callbacks",
          "old_text": null,
          "new_text": "lexbor_libxml2_bridge_parse_set_error_callbacks(\n\t\t\t&ctx,\n\t\t\tdom_lexbor_libxml2_bridge_tokenizer_error_reporter,\n\t\t\tdom_lexbor_libxml2_bridge_tree_error_reporter\n\t\t)",
          "old_line_content": "\tsize_t tokenizer_error_offset = 0;",
          "new_line_content": "\t\tlexbor_libxml2_bridge_parse_set_error_callbacks(",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "DOM_GET_OBJ",
          "old_text": null,
          "new_text": "DOM_GET_OBJ(node, nodep, xmlNodePtr, nodeobj)",
          "old_line_content": "",
          "new_line_content": "\t\tDOM_GET_OBJ(node, nodep, xmlNodePtr, nodeobj);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "php_dom_throw_error",
          "old_text": null,
          "new_text": "php_dom_throw_error(WRONG_DOCUMENT_ERR, true)",
          "old_line_content": "\tdom_output_ctx output_ctx;",
          "new_line_content": "\t\t\tphp_dom_throw_error(WRONG_DOCUMENT_ERR, true);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\toutput_ctx.output_data = &buf;",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "ZEND_ASSERT",
          "old_text": null,
          "new_text": "ZEND_ASSERT(result == SUCCESS)",
          "old_line_content": "",
          "new_line_content": "\tZEND_ASSERT(result == SUCCESS);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "dom_setup_parser_encoding_manually",
          "old_text": null,
          "new_text": "dom_setup_parser_encoding_manually(buf_ref, encoding_data, &decoding_encoding_ctx, &application_data)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdom_setup_parser_encoding_manually(buf_ref, encoding_data, &decoding_encoding_ctx, &application_data);",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "DOM_PROP_NODE",
          "old_text": null,
          "new_text": "DOM_PROP_NODE(xmlDocPtr, docp, obj)",
          "old_line_content": "",
          "new_line_content": "\tDOM_PROP_NODE(xmlDocPtr, docp, obj);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "Z_TYPE_P",
          "old_text": null,
          "new_text": "Z_TYPE_P(newval)",
          "old_line_content": "",
          "new_line_content": "\tZEND_ASSERT(Z_TYPE_P(newval) == IS_STRING || Z_TYPE_P(newval) == IS_NULL);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "lxb_html_document_create",
          "old_text": null,
          "new_text": "lxb_html_document_create()",
          "old_line_content": "\t}",
          "new_line_content": "\tlxb_html_document_t *document = lxb_html_document_create();",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(document == NULL)",
          "old_line_content": "",
          "new_line_content": "\tif (UNEXPECTED(document == NULL)) {",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "Z_TYPE_P",
          "old_text": null,
          "new_text": "Z_TYPE_P(newval)",
          "old_line_content": "\t\txmlFree(BAD_CAST docp->encoding);",
          "new_line_content": "\tif (Z_TYPE_P(newval) == IS_NULL) {",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "Z_STR_P",
          "old_text": null,
          "new_text": "Z_STR_P(newval)",
          "old_line_content": "\t}",
          "new_line_content": "\tzend_string *str = Z_STR_P(newval);",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "lxb_html_document_parse_chunk_begin",
          "old_text": null,
          "new_text": "lxb_html_document_parse_chunk_begin(document)",
          "old_line_content": "\t\tsize_t chunk_size = source_len;",
          "new_line_content": "\tlxb_status_t lexbor_status = lxb_html_document_parse_chunk_begin(document);",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(lexbor_status != LXB_STATUS_OK)",
          "old_line_content": "\t\tconst size_t MAX_CHUNK_SIZE = sizeof(decoding_encoding_ctx.encoding_output) / sizeof(*decoding_encoding_ctx.encoding_output);",
          "new_line_content": "\tif (UNEXPECTED(lexbor_status != LXB_STATUS_OK)) {",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "ZSTR_LEN",
          "old_text": null,
          "new_text": "ZSTR_LEN(str)",
          "old_line_content": "",
          "new_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name((const lxb_char_t *) ZSTR_VAL(str), ZSTR_LEN(str));",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "zend_value_error",
          "old_text": null,
          "new_text": "zend_value_error(\"Invalid document encoding\")",
          "old_line_content": "",
          "new_line_content": "\tzend_value_error(\"Invalid document encoding\");",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "dom_parse_decode_encode_step",
          "old_text": null,
          "new_text": "dom_parse_decode_encode_step(\n\t\t\t&ctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\t&buf_ref,\n\t\t\tbuf_end,\n\t\t\t&decoding_encoding_ctx,\n\t\t\t&tokenizer_error_offset,\n\t\t\t&tree_error_offset\n\t\t)",
          "old_line_content": "\t\t\t&tree_error_offset",
          "new_line_content": "\t\tbool result = dom_parse_decode_encode_step(",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "dom_parse_decode_encode_finish",
          "old_text": null,
          "new_text": "dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)",
          "old_line_content": "",
          "new_line_content": "\tif (!dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)) {",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_create",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_create()",
          "old_line_content": "\t\tns_mapper",
          "new_line_content": "\tphp_dom_libxml_ns_mapper *ns_mapper = php_dom_libxml_ns_mapper_create();",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "lexbor_libxml2_bridge_copy_observations",
          "old_text": null,
          "new_text": "lexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations)",
          "old_line_content": "\t\t);",
          "new_line_content": "\tlexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_destroy",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_destroy(ns_mapper)",
          "old_line_content": "\t\tRETURN_FALSE;",
          "new_line_content": "\t\tphp_dom_libxml_ns_mapper_destroy(ns_mapper);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "php_libxml_ctx_error",
          "old_text": null,
          "new_text": "php_libxml_ctx_error(\n\t\t\tNULL,\n\t\t\t\"%s in %s\",\n\t\t\tdom_lexbor_libxml2_bridge_status_code_to_string(bridge_status),\n\t\t\tapplication_data.input_name\n\t\t)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tphp_libxml_ctx_error(",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "lxb_html_document_destroy",
          "old_text": null,
          "new_text": "lxb_html_document_destroy(document)",
          "old_line_content": "\t}",
          "new_line_content": "\tlxb_html_document_destroy(document);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name)",
          "old_line_content": "\t\t(xmlNodePtr) lxml_doc,",
          "new_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "xmlStrdup",
          "old_text": null,
          "new_text": "xmlStrdup((const xmlChar *) \"UTF-8\")",
          "old_line_content": "\t);",
          "new_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) \"UTF-8\");",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "php_dom_instantiate_object_helper",
          "old_text": null,
          "new_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "old_line_content": "\treturn;",
          "new_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "php_dom_libxml_ns_mapper_header",
          "old_text": null,
          "new_text": "php_dom_libxml_ns_mapper_header(ns_mapper)",
          "old_line_content": "",
          "new_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(ns_mapper);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "lxb_html_document_destroy",
          "old_text": null,
          "new_text": "lxb_html_document_destroy(document)",
          "old_line_content": "\tphp_dom_libxml_ns_mapper *ns_mapper = NULL;",
          "new_line_content": "\tlxb_html_document_destroy(document);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "php_dom_throw_error",
          "old_text": null,
          "new_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "old_line_content": "\tsize_t filename_len, override_encoding_len;",
          "new_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tzend_long options = 0;",
          "new_line_content": "\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "zend_parse_parameters",
          "old_text": null,
          "new_text": "zend_parse_parameters(\n\t\tZEND_NUM_ARGS(),\n\t\t\"p|lp!\",\n\t\t&filename,\n\t\t&filename_len,\n\t\t&options,\n\t\t&override_encoding,\n\t\t&override_encoding_len\n\t)",
          "old_line_content": "\t) == FAILURE) {",
          "new_line_content": "\tif (zend_parse_parameters(",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(filename, \"%00\")",
          "old_line_content": "",
          "new_line_content": "\tif (strstr(filename, \"%00\")) {",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "zend_argument_value_error",
          "old_text": null,
          "new_text": "zend_argument_value_error(1, \"must not contain percent-encoded NUL bytes\")",
          "old_line_content": "\tdom_lexbor_libxml2_bridge_application_data application_data;",
          "new_line_content": "\t\tzend_argument_value_error(1, \"must not contain percent-encoded NUL bytes\");",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tapplication_data.input_name = filename;",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tlexbor_libxml2_bridge_parse_context ctx;",
          "new_line_content": "\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "dom_reset_line_column_cache",
          "old_text": null,
          "new_text": "dom_reset_line_column_cache(&application_data.cache_tokenizer)",
          "old_line_content": "\t\t);",
          "new_line_content": "\tdom_reset_line_column_cache(&application_data.cache_tokenizer);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "lexbor_libxml2_bridge_parse_context_init",
          "old_text": null,
          "new_text": "lexbor_libxml2_bridge_parse_context_init(&ctx)",
          "old_line_content": "\tctx.application_data = &application_data;",
          "new_line_content": "\tlexbor_libxml2_bridge_parse_context_init(&ctx);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "lexbor_libxml2_bridge_parse_set_error_callbacks",
          "old_text": null,
          "new_text": "lexbor_libxml2_bridge_parse_set_error_callbacks(\n\t\t\t&ctx,\n\t\t\tdom_lexbor_libxml2_bridge_tokenizer_error_reporter,\n\t\t\tdom_lexbor_libxml2_bridge_tree_error_reporter\n\t\t)",
          "old_line_content": "\tchar buf[4096];",
          "new_line_content": "\t\tlexbor_libxml2_bridge_parse_set_error_callbacks(",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "lxb_encoding_data_by_name",
          "old_text": null,
          "new_text": "lxb_encoding_data_by_name(\n\t\t\t(const lxb_char_t *) override_encoding,\n\t\t\toverride_encoding_len\n\t\t)",
          "old_line_content": "\t\tshould_determine_encoding_implicitly = false;",
          "new_line_content": "\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "RETURN_THROWS",
          "old_text": null,
          "new_text": "RETURN_THROWS()",
          "old_line_content": "\tif (!stream) {",
          "new_line_content": "\t\t\tRETURN_THROWS();",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "dom_setup_parser_encoding_manually",
          "old_text": null,
          "new_text": "dom_setup_parser_encoding_manually((const lxb_char_t *) buf, encoding_data, &decoding_encoding_ctx, &application_data)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tdom_setup_parser_encoding_manually((const lxb_char_t *) buf, encoding_data, &decoding_encoding_ctx, &application_data);",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "php_libxml_get_stream_context",
          "old_text": null,
          "new_text": "php_libxml_get_stream_context()",
          "old_line_content": "\t/* MIME sniff */",
          "new_line_content": "\tstream = php_stream_open_wrapper_ex(filename, \"rb\", REPORT_ERRORS, &opened_path, php_libxml_get_stream_context());",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Cannot open file '%s'\", filename)",
          "old_line_content": "\t\tif (charset != NULL) {",
          "new_line_content": "\t\t\tzend_throw_exception_ex(NULL, 0, \"Cannot open file '%s'\", filename);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "lxb_encoding_data_by_name",
          "old_text": null,
          "new_text": "lxb_encoding_data_by_name(\n\t\t\t\t(const lxb_char_t *) ZSTR_VAL(charset),\n\t\t\t\tZSTR_LEN(charset)\n\t\t\t)",
          "old_line_content": "\t\t\t\t\tencoding_data,",
          "new_line_content": "\t\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "ZSTR_VAL",
          "old_text": null,
          "new_text": "ZSTR_VAL(charset)",
          "old_line_content": "\t\t\t\t\t&decoding_encoding_ctx,",
          "new_line_content": "\t\t\t\t(const lxb_char_t *) ZSTR_VAL(charset),",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "ZSTR_LEN",
          "old_text": null,
          "new_text": "ZSTR_LEN(charset)",
          "old_line_content": "\t\t\t\t\t&application_data",
          "new_line_content": "\t\t\t\tZSTR_LEN(charset)",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "dom_setup_parser_encoding_manually",
          "old_text": null,
          "new_text": "dom_setup_parser_encoding_manually(\n\t\t\t\t\t(const lxb_char_t *) buf,\n\t\t\t\t\tencoding_data,\n\t\t\t\t\t&decoding_encoding_ctx,\n\t\t\t\t\t&application_data\n\t\t\t\t)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tdom_setup_parser_encoding_manually(",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "zend_string_release_ex",
          "old_text": null,
          "new_text": "zend_string_release_ex(charset, false)",
          "old_line_content": "",
          "new_line_content": "\t\t\tzend_string_release_ex(charset, false);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "lxb_html_document_create",
          "old_text": null,
          "new_text": "lxb_html_document_create()",
          "old_line_content": "\t}",
          "new_line_content": "\tlxb_html_document_t *document = lxb_html_document_create();",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(document == NULL)",
          "old_line_content": "",
          "new_line_content": "\tif (UNEXPECTED(document == NULL)) {",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "lxb_html_document_parse_chunk_begin",
          "old_text": null,
          "new_text": "lxb_html_document_parse_chunk_begin(document)",
          "old_line_content": "\tlxb_html_parser_t *parser = document->dom_document.parser;",
          "new_line_content": "\tlxb_status_t lexbor_status = lxb_html_document_parse_chunk_begin(document);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "UNEXPECTED",
          "old_text": null,
          "new_text": "UNEXPECTED(lexbor_status != LXB_STATUS_OK)",
          "old_line_content": "",
          "new_line_content": "\tif (UNEXPECTED(lexbor_status != LXB_STATUS_OK)) {",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "php_stream_read",
          "old_text": null,
          "new_text": "php_stream_read(stream, buf, sizeof(buf))",
          "old_line_content": "\t\tconst lxb_char_t *buf_end = buf_ref + read;",
          "new_line_content": "\twhile ((read = php_stream_read(stream, buf, sizeof(buf))) > 0) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 522,
          "old_api": "lxb_encoding_decode_utf_8_single",
          "new_api": null,
          "old_text": "lxb_encoding_decode_utf_8_single(&decoding_encoding_ctx->decode, &buf_ref, buf_end)",
          "new_text": null,
          "old_line_content": "\t\tlxb_codepoint_t codepoint = lxb_encoding_decode_utf_8_single(&decoding_encoding_ctx->decode, &buf_ref, buf_end);",
          "new_line_content": "\t\t\t/* Fast path within the fast path: try to skip non-mb bytes in bulk if we are not in a state where we",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(codepoint > LXB_ENCODING_MAX_CODEPOINT)",
          "new_text": null,
          "old_line_content": "\t\tif (UNEXPECTED(codepoint > LXB_ENCODING_MAX_CODEPOINT)) {",
          "new_line_content": "\t\t\t * need more UTF-8 bytes to complete a sequence.",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "dom_parse_decode_encode_finish",
          "new_api": null,
          "old_text": "dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)",
          "new_text": null,
          "old_line_content": "\tif (!dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)) {",
          "new_line_content": "\t\t\t&tokenizer_error_offset,",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "dom_process_parse_chunk",
          "new_api": null,
          "old_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tbuf_ref - last_output - skip,\n\t\t\t\tlast_output,\n\t\t\t\tbuf_ref - last_output,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "new_line_content": "\t\t\t * we need to process the same byte multiple times sometimes when mixing ASCII with multibyte. */",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "lxb_html_document_parse_chunk_end",
          "new_api": null,
          "old_text": "lxb_html_document_parse_chunk_end(document)",
          "new_text": null,
          "old_line_content": "\tlexbor_status = lxb_html_document_parse_chunk_end(document);",
          "new_line_content": "\t\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "php_dom_libxml_ns_mapper_create",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_create()",
          "new_text": null,
          "old_line_content": "\tns_mapper = php_dom_libxml_ns_mapper_create();",
          "new_line_content": "\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "dom_process_parse_chunk",
          "new_api": null,
          "old_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tLXB_ENCODING_REPLACEMENT_SIZE,\n\t\t\t\tLXB_ENCODING_REPLACEMENT_BYTES,\n\t\t\t\t0,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "new_line_content": "\t\t\t\tbuf_ref - last_output - skip,",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "lexbor_libxml2_bridge_copy_observations",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations)",
          "new_text": null,
          "old_line_content": "\tlexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations);",
          "new_line_content": "\txmlDocPtr lxml_doc;",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "dom_lexbor_libxml2_bridge_status_code_to_string",
          "new_api": null,
          "old_text": "dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status)",
          "new_text": null,
          "old_line_content": "\t\tphp_libxml_ctx_error(NULL, \"%s in %s\", dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status), filename);",
          "new_line_content": "\t\tdocument,",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "lxb_html_document_destroy",
          "new_api": null,
          "old_text": "lxb_html_document_destroy(document)",
          "new_text": null,
          "old_line_content": "\tlxb_html_document_destroy(document);",
          "new_line_content": "\t\tns_mapper",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "dom_process_parse_chunk",
          "new_api": null,
          "old_text": "dom_process_parse_chunk(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref - last_output,\n\t\t\tlast_output,\n\t\t\tbuf_ref - last_output,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t)",
          "new_text": null,
          "old_line_content": "\t\t&& !dom_process_parse_chunk(",
          "new_line_content": "\t\t\t\ttree_error_offset",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name)",
          "new_text": null,
          "old_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) decoding_encoding_ctx.decode_data->name);",
          "new_line_content": "\t\tRETVAL_FALSE;",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) \"UTF-8\")",
          "new_text": null,
          "old_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) \"UTF-8\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "ZSTR_VAL",
          "new_api": null,
          "old_text": "ZSTR_VAL(opened_path)",
          "new_text": null,
          "old_line_content": "\t\txmlChar *converted = xmlPathToURI((const xmlChar *) ZSTR_VAL(opened_path));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(!converted)",
          "new_text": null,
          "old_line_content": "\t\tif (UNEXPECTED(!converted)) {",
          "new_line_content": "\tif (decoding_encoding_ctx.decode_data) {",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp((const char *) converted, \"file:/\", sizeof(\"file:/\") - 1)",
          "new_text": null,
          "old_line_content": "\t\tif (strncmp((const char *) converted, \"file:/\", sizeof(\"file:/\") - 1) != 0) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) \"file://\")",
          "new_text": null,
          "old_line_content": "\t\t\txmlChar *buffer = xmlStrdup((const xmlChar *) \"file://\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(!buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNEXPECTED(!buffer)) {",
          "new_line_content": "\tif (stream->wrapper == &php_plain_files_wrapper && opened_path != NULL) {",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "xmlStrcat",
          "new_api": null,
          "old_text": "xmlStrcat(buffer, converted)",
          "new_text": null,
          "old_line_content": "\t\t\txmlChar *new_buffer = xmlStrcat(buffer, converted);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(!new_buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNEXPECTED(!new_buffer)) {",
          "new_line_content": "\t\t/* Check for \"file:/\" instead of \"file://\" because of libxml2 quirk */",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "xmlFree",
          "new_api": null,
          "old_text": "xmlFree(converted)",
          "new_text": null,
          "old_line_content": "\t\t\txmlFree(converted);",
          "new_line_content": "\t\t\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "decode",
          "new_api": null,
          "old_text": "decoding_encoding_ctx->decode_data->decode(&decoding_encoding_ctx->decode, &buf_ref, buf_end)",
          "new_text": null,
          "old_line_content": "\t\tdecode_status = decoding_encoding_ctx->decode_data->decode(&decoding_encoding_ctx->decode, &buf_ref, buf_end);",
          "new_line_content": "\tdom_decoding_encoding_ctx *decoding_encoding_ctx,",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) filename)",
          "new_text": null,
          "old_line_content": "\t\tlxml_doc->URL = xmlStrdup((const xmlChar *) filename);",
          "new_line_content": "\t\t\tlxml_doc->URL = new_buffer;",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "new_text": null,
          "old_line_content": "\t\tsize_t decoding_buffer_used = lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode);",
          "new_line_content": ")",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "zend_string_release_ex",
          "new_api": null,
          "old_text": "zend_string_release_ex(opened_path, false)",
          "new_text": null,
          "old_line_content": "\t\tzend_string_release_ex(opened_path, false);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "encode",
          "new_api": null,
          "old_text": "decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end)",
          "new_text": null,
          "old_line_content": "\t\t\tencode_status = decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end);",
          "new_line_content": "\tlexbor_status_t decode_status, encode_status;",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "ZEND_ASSERT",
          "new_api": null,
          "old_text": "ZEND_ASSERT(encode_status != LXB_STATUS_ERROR && \"parameters and replacements should be valid\")",
          "new_text": null,
          "old_line_content": "\t\t\tZEND_ASSERT(encode_status != LXB_STATUS_ERROR && \"parameters and replacements should be valid\");",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "php_stream_close",
          "new_api": null,
          "old_text": "php_stream_close(stream)",
          "new_text": null,
          "old_line_content": "\tphp_stream_close(stream);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "php_dom_instantiate_object_helper",
          "new_api": null,
          "old_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "new_text": null,
          "old_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "new_line_content": "\t\tconst lxb_codepoint_t *codepoints_end = decoding_encoding_ctx->codepoints + decoding_buffer_used;",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "php_dom_libxml_ns_mapper_header",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_header(ns_mapper)",
          "new_text": null,
          "old_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(ns_mapper);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "php_dom_throw_error",
          "new_api": null,
          "old_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "new_text": null,
          "old_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "new_line_content": "\t\t(xmlNodePtr) lxml_doc,",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "lxb_encoding_decode_buf_used_set",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used_set(&decoding_encoding_ctx->decode, 0)",
          "new_text": null,
          "old_line_content": "\t\tlxb_encoding_decode_buf_used_set(&decoding_encoding_ctx->decode, 0);",
          "new_line_content": "\t\t\t\tdecoding_buffer_used,",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "php_dom_libxml_ns_mapper_destroy",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_destroy(ns_mapper)",
          "new_text": null,
          "old_line_content": "\t\tphp_dom_libxml_ns_mapper_destroy(ns_mapper);",
          "new_line_content": "\tintern->document->class_type = PHP_LIBXML_CLASS_MODERN;",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "lxb_html_document_destroy",
          "new_api": null,
          "old_text": "lxb_html_document_destroy(document)",
          "new_text": null,
          "old_line_content": "\tlxb_html_document_destroy(document);",
          "new_line_content": "\treturn;",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "php_stream_close",
          "new_api": null,
          "old_text": "php_stream_close(stream)",
          "new_text": null,
          "old_line_content": "\tphp_stream_close(stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "php_stream_write",
          "new_api": null,
          "old_text": "php_stream_write(stream, buf, len)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(php_stream_write(stream, buf, len) < 0)) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "dom_decode_encode_fast_path",
          "new_api": null,
          "old_text": "dom_decode_encode_fast_path(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref_ref,\n\t\t\tbuf_end,\n\t\t\tdecoding_encoding_ctx,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\treturn dom_decode_encode_fast_path(",
          "new_line_content": "\tconst lxb_char_t **buf_ref_ref,",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "dom_decode_encode_slow_path",
          "new_api": null,
          "old_text": "dom_decode_encode_slow_path(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tbuf_ref_ref,\n\t\t\tbuf_end,\n\t\t\tdecoding_encoding_ctx,\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\treturn dom_decode_encode_slow_path(",
          "new_line_content": "\t\t\tparser,",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "decode",
          "new_api": null,
          "old_text": "output->decoding_data->decode(output->decode, &buf_ref, buf_end)",
          "new_text": null,
          "old_line_content": "\t\tdecode_status = output->decoding_data->decode(output->decode, &buf_ref, buf_end);",
          "new_line_content": "static zend_result dom_saveHTML_write_string_len(void *application_data, const char *buf, size_t len)",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used(output->decode)",
          "new_text": null,
          "old_line_content": "\t\tconst lxb_codepoint_t *codepoints_end = codepoints_ref + lxb_encoding_decode_buf_used(output->decode);",
          "new_line_content": "\tlxb_status_t decode_status, encode_status;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "encode",
          "new_api": null,
          "old_text": "output->encoding_data->encode(output->encode, &codepoints_ref, codepoints_end)",
          "new_text": null,
          "old_line_content": "\t\t\tencode_status = output->encoding_data->encode(output->encode, &codepoints_ref, codepoints_end);",
          "new_line_content": "\tconst lxb_char_t *buf_end = buf_ref + len;",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "write_output",
          "new_api": null,
          "old_text": "output->write_output(\n\t\t\t\toutput->output_data,\n\t\t\t\t(const char *) output->encoding_output,\n\t\t\t\tlxb_encoding_encode_buf_used(output->encode)\n\t\t\t)",
          "new_text": null,
          "old_line_content": "\t\t\tif (UNEXPECTED(output->write_output(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(output->encode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(output->encode)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "lxb_encoding_decode_buf_used_set",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used_set(output->decode, 0)",
          "new_text": null,
          "old_line_content": "\t\tlxb_encoding_decode_buf_used_set(output->decode, 0);",
          "new_line_content": "\t\t\t\toutput->output_data,",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "lxb_encoding_decode_finish",
          "new_api": null,
          "old_text": "lxb_encoding_decode_finish(&decoding_encoding_ctx->decode)",
          "new_text": null,
          "old_line_content": "\t\t(void) lxb_encoding_decode_finish(&decoding_encoding_ctx->decode);",
          "new_line_content": "\tlxb_html_parser_t *parser,",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode)",
          "new_text": null,
          "old_line_content": "\t\tsize_t decoding_buffer_size = lxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode);",
          "new_line_content": "\tdom_decoding_encoding_ctx *decoding_encoding_ctx,",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "encode",
          "new_api": null,
          "old_text": "decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end)",
          "new_text": null,
          "old_line_content": "\t\t\t(void) decoding_encoding_ctx->encode_data->encode(&decoding_encoding_ctx->encode, &codepoints_ref, codepoints_end);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "dom_process_parse_chunk",
          "new_api": null,
          "old_text": "dom_process_parse_chunk(\n\t\t\t\tctx,\n\t\t\t\tdocument,\n\t\t\t\tparser,\n\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\t\tdecoding_buffer_size,\n\t\t\t\ttokenizer_error_offset,\n\t\t\t\ttree_error_offset\n\t\t\t)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!dom_process_parse_chunk(",
          "new_line_content": "\tif (!decoding_encoding_ctx->fast_path) {",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "lxb_encoding_data",
          "new_api": null,
          "old_text": "lxb_encoding_data(LXB_ENCODING_UTF_8)",
          "new_text": null,
          "old_line_content": "\tconst lxb_encoding_data_t *decoding_data = lxb_encoding_data(LXB_ENCODING_UTF_8);",
          "new_line_content": "static zend_result dom_saveHTML_write_string(void *application_data, const char *buf)",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "lxb_encoding_data_by_name",
          "new_api": null,
          "old_text": "lxb_encoding_data_by_name(\n\t\t(const lxb_char_t *) docp->encoding,\n\t\tstrlen((const char *) docp->encoding)\n\t)",
          "new_text": null,
          "old_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((const char *) docp->encoding)",
          "new_text": null,
          "old_line_content": "\t\tstrlen((const char *) docp->encoding)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "new_line_content": "\t\tif (decoding_buffer_size > 0) {",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "lxb_encoding_decode_init",
          "new_api": null,
          "old_text": "lxb_encoding_decode_init(&decode, decoding_data, codepoints, sizeof(codepoints) / sizeof(*codepoints))",
          "new_text": null,
          "old_line_content": "\t(void) lxb_encoding_decode_init(&decode, decoding_data, codepoints, sizeof(codepoints) / sizeof(*codepoints));",
          "new_line_content": "\t\t(const lxb_char_t *) docp->encoding,",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "lxb_encoding_encode_replace_set",
          "new_api": null,
          "old_text": "lxb_encoding_encode_replace_set(&encode, LXB_ENCODING_REPLACEMENT_BYTES, LXB_ENCODING_REPLACEMENT_SIZE)",
          "new_text": null,
          "old_line_content": "\t\tlxb_encoding_encode_replace_set(&encode, LXB_ENCODING_REPLACEMENT_BYTES, LXB_ENCODING_REPLACEMENT_SIZE);",
          "new_line_content": "\t);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "lxb_encoding_encode_finish",
          "new_api": null,
          "old_text": "lxb_encoding_encode_finish(&decoding_encoding_ctx->encode)",
          "new_text": null,
          "old_line_content": "\t(void) lxb_encoding_encode_finish(&decoding_encoding_ctx->encode);",
          "new_line_content": "\t\t\t\tdecoding_buffer_size,",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "new_text": null,
          "old_line_content": "\tif (lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "new_line_content": "\t\t\t\ttokenizer_error_offset,",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "dom_process_parse_chunk",
          "new_api": null,
          "old_text": "dom_process_parse_chunk(\n\t\t\tctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),\n\t\t\tdecoding_encoding_ctx->encoding_output,\n\t\t\tlxb_encoding_decode_buf_used(&decoding_encoding_ctx->decode),\n\t\t\ttokenizer_error_offset,\n\t\t\ttree_error_offset\n\t)",
          "new_text": null,
          "old_line_content": "\t\t&& !dom_process_parse_chunk(",
          "new_line_content": "\t\t\t\ttree_error_offset",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "lxb_encoding_encode_replace_set",
          "new_api": null,
          "old_text": "lxb_encoding_encode_replace_set(&encode, (const lxb_char_t *) \"?\", 1)",
          "new_text": null,
          "old_line_content": "\t\tlxb_encoding_encode_replace_set(&encode, (const lxb_char_t *) \"?\", 1);",
          "new_line_content": "\tlxb_char_t encoding_output[4096];",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode)",
          "new_text": null,
          "old_line_content": "\t\t\tlxb_encoding_encode_buf_used(&decoding_encoding_ctx->encode),",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "dom_html5_serialize_outer",
          "new_api": null,
          "old_text": "dom_html5_serialize_outer(&ctx, node)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(dom_html5_serialize_outer(&ctx, node) != SUCCESS)) {",
          "new_line_content": "\toutput_ctx->decode = &decode;",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "lxb_encoding_decode_finish",
          "new_api": null,
          "old_text": "lxb_encoding_decode_finish(&decode)",
          "new_text": null,
          "old_line_content": "\t(void) lxb_encoding_decode_finish(&decode);",
          "new_line_content": "\tdom_html5_serialize_context ctx;",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "zend_argument_value_error",
          "new_api": null,
          "old_text": "zend_argument_value_error(arg_num, \"contains invalid flags (allowed flags: \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_NOERROR, \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_COMPACT, \"\n\t\t\t\t\t\t\t\t\t\t   \"LIBXML_HTML_NOIMPLIED, \"\n\t\t\t\t\t\t\t\t\t\t   \"DOM\\\\NO_DEFAULT_NS)\")",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(arg_num, \"contains invalid flags (allowed flags: \"",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used(&decode)",
          "new_text": null,
          "old_line_content": "\tif (lxb_encoding_decode_buf_used(&decode)) {",
          "new_line_content": "\tctx.write_string_len = dom_saveHTML_write_string_len;",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "lxb_encoding_decode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_decode_buf_used(&decode)",
          "new_text": null,
          "old_line_content": "\t\t(void) encoding_data->encode(&encode, &codepoints_ref, codepoints_ref + lxb_encoding_decode_buf_used(&decode));",
          "new_line_content": "\tctx.application_data = output_ctx;",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&encode)",
          "new_text": null,
          "old_line_content": "\t\t\tlxb_encoding_encode_buf_used(&encode)) != SUCCESS",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&encode)",
          "new_text": null,
          "old_line_content": "\tif (lxb_encoding_encode_buf_used(&encode)) {",
          "new_line_content": "\t\t\toutput_ctx->output_data,",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "write_output",
          "new_api": null,
          "old_text": "output_ctx->write_output(\n\t\t\toutput_ctx->output_data,\n\t\t\t(const char *) encoding_output,\n\t\t\tlxb_encoding_encode_buf_used(&encode))",
          "new_text": null,
          "old_line_content": "\t\tif (UNEXPECTED(output_ctx->write_output(",
          "new_line_content": "\t\t\t(const char *) encoding_output,",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"UTF-8\")",
          "new_text": null,
          "old_line_content": "\tsize_t encoding_len = strlen(\"UTF-8\");",
          "new_line_content": "\t\treturn false;",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"|p\", &encoding, &encoding_len) == FAILURE) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\treturn true;",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "lxb_encoding_encode_buf_used",
          "new_api": null,
          "old_text": "lxb_encoding_encode_buf_used(&encode)",
          "new_text": null,
          "old_line_content": "\t\t\tlxb_encoding_encode_buf_used(&encode)) != SUCCESS",
          "new_line_content": "\t\t\treturn FAILURE;",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "lxb_encoding_data_by_name",
          "new_api": null,
          "old_text": "lxb_encoding_data_by_name((const lxb_char_t *) encoding, encoding_len)",
          "new_text": null,
          "old_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name((const lxb_char_t *) encoding, encoding_len);",
          "new_line_content": "PHP_METHOD(DOM_HTMLDocument, createEmpty)",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "php_dom_create_html_doc",
          "new_api": null,
          "old_text": "php_dom_create_html_doc()",
          "new_text": null,
          "old_line_content": "\txmlDocPtr lxml_doc = php_dom_create_html_doc();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "php_dom_instantiate_object_helper",
          "new_api": null,
          "old_text": "php_dom_instantiate_object_helper(\n\t\treturn_value,\n\t\tdom_html_document_class_entry,\n\t\t(xmlNodePtr) lxml_doc,\n\t\tNULL\n\t)",
          "new_text": null,
          "old_line_content": "\tdom_object *intern = php_dom_instantiate_object_helper(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"p\", &file, &file_len) == FAILURE) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\tzval *id;",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "php_dom_libxml_ns_mapper_create",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_create()",
          "new_text": null,
          "old_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(php_dom_libxml_ns_mapper_create());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "zend_argument_value_error",
          "new_api": null,
          "old_text": "zend_argument_value_error(1, \"must not be empty\")",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(1, \"must not be empty\");",
          "new_line_content": "\tchar *file;",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "php_dom_throw_error",
          "new_api": null,
          "old_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "new_text": null,
          "old_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "new_line_content": "\t\t(xmlNodePtr) lxml_doc,",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\tRETURN_THROWS();",
          "new_line_content": "\t\tNULL",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "\t\tZEND_NUM_ARGS(),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "dom_common_save",
          "new_api": null,
          "old_text": "dom_common_save(&output_ctx, docp, (const xmlNode *) docp)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(dom_common_save(&output_ctx, docp, (const xmlNode *) docp) != SUCCESS)) {",
          "new_line_content": "\t\tRETURN_FALSE;",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "php_stream_close",
          "new_api": null,
          "old_text": "php_stream_close(stream)",
          "new_text": null,
          "old_line_content": "\t\tphp_stream_close(stream);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "php_stream_tell",
          "new_api": null,
          "old_text": "php_stream_tell(stream)",
          "new_text": null,
          "old_line_content": "\tzend_long bytes = php_stream_tell(stream);",
          "new_line_content": "\tdom_output_ctx output_ctx;",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "php_stream_close",
          "new_api": null,
          "old_text": "php_stream_close(stream)",
          "new_text": null,
          "old_line_content": "\tphp_stream_close(stream);",
          "new_line_content": "\toutput_ctx.output_data = stream;",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "check_options_validity",
          "new_api": null,
          "old_text": "check_options_validity(2, options)",
          "new_text": null,
          "old_line_content": "\tif (!check_options_validity(2, options)) {",
          "new_line_content": "\t\t&source_len,",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\t&options,",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"|O!\", &nodep, dom_modern_node_class_entry) == FAILURE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "PHP_METHOD(DOM_HTMLDocument, saveHTML)",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "lexbor_libxml2_bridge_parse_context_init",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_parse_context_init(&ctx)",
          "new_text": null,
          "old_line_content": "\tlexbor_libxml2_bridge_parse_context_init(&ctx);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "DOM_GET_OBJ",
          "new_api": null,
          "old_text": "DOM_GET_OBJ(docp, ZEND_THIS, xmlDocPtr, intern)",
          "new_text": null,
          "old_line_content": "\tDOM_GET_OBJ(docp, ZEND_THIS, xmlDocPtr, intern);",
          "new_line_content": "\tconst xmlDoc *docp;",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "lexbor_libxml2_bridge_parse_set_error_callbacks",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_parse_set_error_callbacks(\n\t\t\t&ctx,\n\t\t\tdom_lexbor_libxml2_bridge_tokenizer_error_reporter,\n\t\t\tdom_lexbor_libxml2_bridge_tree_error_reporter\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tlexbor_libxml2_bridge_parse_set_error_callbacks(",
          "new_line_content": "\tdom_lexbor_libxml2_bridge_application_data application_data;",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "DOM_GET_OBJ",
          "new_api": null,
          "old_text": "DOM_GET_OBJ(node, nodep, xmlNodePtr, nodeobj)",
          "new_text": null,
          "old_line_content": "\t\tDOM_GET_OBJ(node, nodep, xmlNodePtr, nodeobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "dom_decoding_encoding_ctx_init",
          "new_api": null,
          "old_text": "dom_decoding_encoding_ctx_init(&decoding_encoding_ctx)",
          "new_text": null,
          "old_line_content": "\tdom_decoding_encoding_ctx_init(&decoding_encoding_ctx);",
          "new_line_content": "\tctx.application_data = &application_data;",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "lxb_encoding_data_by_name",
          "new_api": null,
          "old_text": "lxb_encoding_data_by_name(\n\t\t\t(const lxb_char_t *) override_encoding,\n\t\t\toverride_encoding_len\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "new_line_content": "\tsize_t tokenizer_error_offset = 0;",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "dom_common_save",
          "new_api": null,
          "old_text": "dom_common_save(&output_ctx, docp, node)",
          "new_text": null,
          "old_line_content": "\tzend_result result = dom_common_save(&output_ctx, docp, node);",
          "new_line_content": "\t\tnode = (const xmlNode *) docp;",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "ZEND_ASSERT",
          "new_api": null,
          "old_text": "ZEND_ASSERT(result == SUCCESS)",
          "new_text": null,
          "old_line_content": "\tZEND_ASSERT(result == SUCCESS);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "smart_str_extract",
          "new_api": null,
          "old_text": "smart_str_extract(&buf)",
          "new_text": null,
          "old_line_content": "\tRETURN_STR(smart_str_extract(&buf));",
          "new_line_content": "\tsmart_str buf = {0};",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "zend_argument_value_error",
          "new_api": null,
          "old_text": "zend_argument_value_error(3, \"must be a valid document encoding\")",
          "new_text": null,
          "old_line_content": "\t\t\tzend_argument_value_error(3, \"must be a valid document encoding\");",
          "new_line_content": "\tdom_decoding_encoding_ctx decoding_encoding_ctx;",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "dom_setup_parser_encoding_implicitly",
          "new_api": null,
          "old_text": "dom_setup_parser_encoding_implicitly(&buf_ref, &source_len, &decoding_encoding_ctx, &application_data)",
          "new_text": null,
          "old_line_content": "\t\tdom_setup_parser_encoding_implicitly(&buf_ref, &source_len, &decoding_encoding_ctx, &application_data);",
          "new_line_content": "\t\t\toverride_encoding_len",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "Z_TYPE_P",
          "new_api": null,
          "old_text": "Z_TYPE_P(newval)",
          "new_text": null,
          "old_line_content": "\tif (Z_TYPE_P(newval) == IS_NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "Z_STR_P",
          "new_api": null,
          "old_text": "Z_STR_P(newval)",
          "new_text": null,
          "old_line_content": "\tzend_string *str = Z_STR_P(newval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "ZSTR_LEN",
          "new_api": null,
          "old_text": "ZSTR_LEN(str)",
          "new_text": null,
          "old_line_content": "\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name((const lxb_char_t *) ZSTR_VAL(str), ZSTR_LEN(str));",
          "new_line_content": "\t/* Typed property, can only be IS_STRING or IS_NULL. */",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(lexbor_status != LXB_STATUS_OK)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(lexbor_status != LXB_STATUS_OK)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) encoding_data->name)",
          "new_text": null,
          "old_line_content": "\t\tdocp->encoding = xmlStrdup((const xmlChar *) encoding_data->name);",
          "new_line_content": "\t\tgoto invalid_encoding;",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "dom_parse_decode_encode_step",
          "new_api": null,
          "old_text": "dom_parse_decode_encode_step(\n\t\t\t&ctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\t&buf_ref,\n\t\t\tbuf_end,\n\t\t\t&decoding_encoding_ctx,\n\t\t\t&tokenizer_error_offset,\n\t\t\t&tree_error_offset\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tbool result = dom_parse_decode_encode_step(",
          "new_line_content": "\t\tsize_t chunk_size = source_len;",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "dom_parse_decode_encode_finish",
          "new_api": null,
          "old_text": "dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)",
          "new_text": null,
          "old_line_content": "\tif (!dom_parse_decode_encode_finish(&ctx, document, parser, &decoding_encoding_ctx, &tokenizer_error_offset, &tree_error_offset)) {",
          "new_line_content": "\t\t\t&tokenizer_error_offset,",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "lxb_html_document_parse_chunk_end",
          "new_api": null,
          "old_text": "lxb_html_document_parse_chunk_end(document)",
          "new_text": null,
          "old_line_content": "\tlexbor_status = lxb_html_document_parse_chunk_end(document);",
          "new_line_content": "\t\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "php_dom_libxml_ns_mapper_create",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_create()",
          "new_text": null,
          "old_line_content": "\tphp_dom_libxml_ns_mapper *ns_mapper = php_dom_libxml_ns_mapper_create();",
          "new_line_content": "\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "lexbor_libxml2_bridge_copy_observations",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations)",
          "new_text": null,
          "old_line_content": "\tlexbor_libxml2_bridge_copy_observations(parser->tree, &ctx.observations);",
          "new_line_content": "\txmlDocPtr lxml_doc;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "php_dom_libxml_ns_mapper_destroy",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_destroy(ns_mapper)",
          "new_text": null,
          "old_line_content": "\t\tphp_dom_libxml_ns_mapper_destroy(ns_mapper);",
          "new_line_content": "\t\tdocument,",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "php_libxml_ctx_error",
          "new_api": null,
          "old_text": "php_libxml_ctx_error(\n\t\t\tNULL,\n\t\t\t\"%s in %s\",\n\t\t\tdom_lexbor_libxml2_bridge_status_code_to_string(bridge_status),\n\t\t\tapplication_data.input_name\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tphp_libxml_ctx_error(",
          "new_line_content": "\t\t&lxml_doc,",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "dom_lexbor_libxml2_bridge_status_code_to_string",
          "new_api": null,
          "old_text": "dom_lexbor_libxml2_bridge_status_code_to_string(bridge_status)",
          "new_text": null,
          "old_line_content": "\t\t\tdom_lexbor_libxml2_bridge_status_code_to_string(bridge_status),",
          "new_line_content": "\t\tns_mapper",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "lxb_html_document_destroy",
          "new_api": null,
          "old_text": "lxb_html_document_destroy(document)",
          "new_text": null,
          "old_line_content": "\tlxb_html_document_destroy(document);",
          "new_line_content": "\t\t\tNULL,",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "xmlStrdup",
          "new_api": null,
          "old_text": "xmlStrdup((const xmlChar *) \"UTF-8\")",
          "new_text": null,
          "old_line_content": "\t\tlxml_doc->encoding = xmlStrdup((const xmlChar *) \"UTF-8\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "php_dom_libxml_ns_mapper_header",
          "new_api": null,
          "old_text": "php_dom_libxml_ns_mapper_header(ns_mapper)",
          "new_text": null,
          "old_line_content": "\tintern->document->private_data = php_dom_libxml_ns_mapper_header(ns_mapper);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "lxb_html_document_destroy",
          "new_api": null,
          "old_text": "lxb_html_document_destroy(document)",
          "new_text": null,
          "old_line_content": "\tlxb_html_document_destroy(document);",
          "new_line_content": "\t\t(xmlNodePtr) lxml_doc,",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "php_dom_throw_error",
          "new_api": null,
          "old_text": "php_dom_throw_error(INVALID_STATE_ERR, true)",
          "new_text": null,
          "old_line_content": "\tphp_dom_throw_error(INVALID_STATE_ERR, true);",
          "new_line_content": "\t\tNULL",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\tRETURN_THROWS();",
          "new_line_content": "\t);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "zend_parse_parameters",
          "new_api": null,
          "old_text": "zend_parse_parameters(\n\t\tZEND_NUM_ARGS(),\n\t\t\"p|lp!\",\n\t\t&filename,\n\t\t&filename_len,\n\t\t&options,\n\t\t&override_encoding,\n\t\t&override_encoding_len\n\t)",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "\t\tZEND_NUM_ARGS(),",
          "new_line_content": "PHP_METHOD(DOM_HTMLDocument, createFromFile)",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(filename, \"%00\")",
          "new_text": null,
          "old_line_content": "\tif (strstr(filename, \"%00\")) {",
          "new_line_content": "\t\t&options,",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "zend_argument_value_error",
          "new_api": null,
          "old_text": "zend_argument_value_error(1, \"must not contain percent-encoded NUL bytes\")",
          "new_text": null,
          "old_line_content": "\t\tzend_argument_value_error(1, \"must not contain percent-encoded NUL bytes\");",
          "new_line_content": "\t\t&override_encoding,",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t\t&override_encoding_len",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "check_options_validity",
          "new_api": null,
          "old_text": "check_options_validity(2, options)",
          "new_text": null,
          "old_line_content": "\tif (!check_options_validity(2, options)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "lexbor_libxml2_bridge_parse_context_init",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_parse_context_init(&ctx)",
          "new_text": null,
          "old_line_content": "\tlexbor_libxml2_bridge_parse_context_init(&ctx);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "lexbor_libxml2_bridge_parse_set_error_callbacks",
          "new_api": null,
          "old_text": "lexbor_libxml2_bridge_parse_set_error_callbacks(\n\t\t\t&ctx,\n\t\t\tdom_lexbor_libxml2_bridge_tokenizer_error_reporter,\n\t\t\tdom_lexbor_libxml2_bridge_tree_error_reporter\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tlexbor_libxml2_bridge_parse_set_error_callbacks(",
          "new_line_content": "\tdom_lexbor_libxml2_bridge_application_data application_data;",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "dom_decoding_encoding_ctx_init",
          "new_api": null,
          "old_text": "dom_decoding_encoding_ctx_init(&decoding_encoding_ctx)",
          "new_text": null,
          "old_line_content": "\tdom_decoding_encoding_ctx_init(&decoding_encoding_ctx);",
          "new_line_content": "\t\t);",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "lxb_encoding_data_by_name",
          "new_api": null,
          "old_text": "lxb_encoding_data_by_name(\n\t\t\t(const lxb_char_t *) override_encoding,\n\t\t\toverride_encoding_len\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\t\tRETURN_THROWS();",
          "new_line_content": "\tbool should_determine_encoding_implicitly = true; /* First read => determine encoding implicitly */",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "dom_setup_parser_encoding_manually",
          "new_api": null,
          "old_text": "dom_setup_parser_encoding_manually((const lxb_char_t *) buf, encoding_data, &decoding_encoding_ctx, &application_data)",
          "new_text": null,
          "old_line_content": "\t\tdom_setup_parser_encoding_manually((const lxb_char_t *) buf, encoding_data, &decoding_encoding_ctx, &application_data);",
          "new_line_content": "\t\t\t(const lxb_char_t *) override_encoding,",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(exception)",
          "new_text": null,
          "old_line_content": "\t\tif (!EG(exception)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "zend_throw_exception_ex",
          "new_api": null,
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Cannot open file '%s'\", filename)",
          "new_text": null,
          "old_line_content": "\t\t\tzend_throw_exception_ex(NULL, 0, \"Cannot open file '%s'\", filename);",
          "new_line_content": "\t\tshould_determine_encoding_implicitly = false;",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "RETURN_THROWS",
          "new_api": null,
          "old_text": "RETURN_THROWS()",
          "new_text": null,
          "old_line_content": "\t\tRETURN_THROWS();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "lxb_encoding_data_by_name",
          "new_api": null,
          "old_text": "lxb_encoding_data_by_name(\n\t\t\t\t(const lxb_char_t *) ZSTR_VAL(charset),\n\t\t\t\tZSTR_LEN(charset)\n\t\t\t)",
          "new_text": null,
          "old_line_content": "\t\t\tconst lxb_encoding_data_t *encoding_data = lxb_encoding_data_by_name(",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "ZSTR_LEN",
          "new_api": null,
          "old_text": "ZSTR_LEN(charset)",
          "new_text": null,
          "old_line_content": "\t\t\t\tZSTR_LEN(charset)",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "zend_string_release_ex",
          "new_api": null,
          "old_text": "zend_string_release_ex(charset, false)",
          "new_text": null,
          "old_line_content": "\t\t\tzend_string_release_ex(charset, false);",
          "new_line_content": "\t\t\t\tshould_determine_encoding_implicitly = false;",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "lxb_html_document_create",
          "new_api": null,
          "old_text": "lxb_html_document_create()",
          "new_text": null,
          "old_line_content": "\tlxb_html_document_t *document = lxb_html_document_create();",
          "new_line_content": "\t\t\t\t\t&decoding_encoding_ctx,",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(document == NULL)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(document == NULL)) {",
          "new_line_content": "\t\t\t\t\t&application_data",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "lxb_html_document_parse_chunk_begin",
          "new_api": null,
          "old_text": "lxb_html_document_parse_chunk_begin(document)",
          "new_text": null,
          "old_line_content": "\tlxb_status_t lexbor_status = lxb_html_document_parse_chunk_begin(document);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "UNEXPECTED",
          "new_api": null,
          "old_text": "UNEXPECTED(lexbor_status != LXB_STATUS_OK)",
          "new_text": null,
          "old_line_content": "\tif (UNEXPECTED(lexbor_status != LXB_STATUS_OK)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "php_stream_read",
          "new_api": null,
          "old_text": "php_stream_read(stream, buf, sizeof(buf))",
          "new_text": null,
          "old_line_content": "\twhile ((read = php_stream_read(stream, buf, sizeof(buf))) > 0) {",
          "new_line_content": "\t\tgoto fail_oom;",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "dom_setup_parser_encoding_implicitly",
          "new_api": null,
          "old_text": "dom_setup_parser_encoding_implicitly(&buf_ref, (size_t *) &read, &decoding_encoding_ctx, &application_data)",
          "new_text": null,
          "old_line_content": "\t\t\tdom_setup_parser_encoding_implicitly(&buf_ref, (size_t *) &read, &decoding_encoding_ctx, &application_data);",
          "new_line_content": "\tssize_t read;",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "dom_parse_decode_encode_step",
          "new_api": null,
          "old_text": "dom_parse_decode_encode_step(\n\t\t\t&ctx,\n\t\t\tdocument,\n\t\t\tparser,\n\t\t\t&buf_ref,\n\t\t\tbuf_end,\n\t\t\t&decoding_encoding_ctx,\n\t\t\t&tokenizer_error_offset,\n\t\t\t&tree_error_offset\n\t\t)",
          "new_text": null,
          "old_line_content": "\t\tbool result = dom_parse_decode_encode_step(",
          "new_line_content": "\t\tconst lxb_char_t *buf_ref = (const lxb_char_t *) buf;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 50,
      "total_additions": 148,
      "total_deletions": 148,
      "total_api_changes": 346
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 346,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          520,
          521,
          524,
          526,
          527,
          528,
          529
        ]
      }
    },
    "api_calls_before": 267,
    "api_calls_after": 267,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 1,
      "total_diff_lines": 23
    }
  }
}
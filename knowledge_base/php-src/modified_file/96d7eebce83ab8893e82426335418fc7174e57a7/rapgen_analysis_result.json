{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/96d7eebce83ab8893e82426335418fc7174e57a7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/96d7eebce83ab8893e82426335418fc7174e57a7/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/96d7eebce83ab8893e82426335418fc7174e57a7/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/php-src/modified_file/96d7eebce83ab8893e82426335418fc7174e57a7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 943,
          "old_api": "hp_str_to_str",
          "new_api": "hp_memnstr",
          "old_text": "hp_str_to_str(ret, retlen, entity, entity_length, replacement, replacement_len, &retlen);",
          "new_text": "hp_memnstr(ret, entity, entity_length, ret+retlen))",
          "old_line_content": "\t\t\t\treplaced = php_str_to_str(ret, retlen, entity, entity_length, replacement, replacement_len, &retlen);",
          "new_line_content": "\t\t\t\tif (php_memnstr(ret, entity, entity_length, ret+retlen)) {",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "free",
          "new_api": "hp_str_to_str",
          "old_text": "free(ret);",
          "new_text": "hp_str_to_str(ret, retlen, entity, entity_length, replacement, replacement_len, &retlen);",
          "old_line_content": "\t\t\t\tefree(ret);",
          "new_line_content": "\t\t\t\t\treplaced = php_str_to_str(ret, retlen, entity, entity_length, replacement, replacement_len, &retlen);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "hp_escape_html_entities",
          "new_api": "END_NUM_ARGS",
          "old_text": "hp_escape_html_entities(str, str_len, &len, all, quote_style, hint_charset TSRMLS_CC);",
          "new_text": "END_NUM_ARGS() ",
          "old_line_content": "\treplaced = php_escape_html_entities(str, str_len, &len, all, quote_style, hint_charset TSRMLS_CC);",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"s|ls\", &str, &str_len, &quote_style, &hint_charset, &hint_charset_len) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "rray_init",
          "new_api": "END_NUM_ARGS",
          "old_text": "rray_init(return_value);",
          "new_text": "END_NUM_ARGS() ",
          "old_line_content": "\tarray_init(return_value);",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"|ll\", &which, &quote_style) == FAILURE) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1280,
          "old_api": null,
          "new_api": "dd_assoc_stringl",
          "old_text": null,
          "new_text": "dd_assoc_stringl(return_value, ind, basic_entities[j].entity, basic_entities[j].entitylen, 1);",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tadd_assoc_stringl(return_value, ind, basic_entities[j].entity, basic_entities[j].entitylen, 1);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "dd_assoc_stringl",
          "old_text": null,
          "new_text": "dd_assoc_stringl(return_value, \"&\", \"&amp;\", sizeof(\"&amp;\") - 1, 1);",
          "old_line_content": "}",
          "new_line_content": "\t\t\tadd_assoc_stringl(return_value, \"&\", \"&amp;\", sizeof(\"&amp;\") - 1, 1);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "hp_escape_html_entities",
          "old_text": null,
          "new_text": "hp_escape_html_entities(str, str_len, &len, all, quote_style, hint_charset TSRMLS_CC);",
          "old_line_content": "",
          "new_line_content": "\treplaced = php_escape_html_entities(str, str_len, &len, all, quote_style, hint_charset TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "ETVAL_STRINGL",
          "old_text": null,
          "new_text": "ETVAL_STRINGL(replaced, len, 0);",
          "old_line_content": "#define HTML_SPECIALCHARS \t0",
          "new_line_content": "\tRETVAL_STRINGL(replaced, len, 0);",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "EGISTER_LONG_CONSTANT",
          "old_text": null,
          "new_text": "EGISTER_LONG_CONSTANT(\"HTML_ENTITIES\", HTML_ENTITIES, CONST_PERSISTENT|CONST_CS);",
          "old_line_content": "}",
          "new_line_content": "\tREGISTER_LONG_CONSTANT(\"HTML_ENTITIES\", HTML_ENTITIES, CONST_PERSISTENT|CONST_CS);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "EGISTER_LONG_CONSTANT",
          "old_text": null,
          "new_text": "EGISTER_LONG_CONSTANT(\"ENT_COMPAT\", ENT_COMPAT, CONST_PERSISTENT|CONST_CS);",
          "old_line_content": "/* }}} */",
          "new_line_content": "\tREGISTER_LONG_CONSTANT(\"ENT_COMPAT\", ENT_COMPAT, CONST_PERSISTENT|CONST_CS);",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "EGISTER_LONG_CONSTANT",
          "old_text": null,
          "new_text": "EGISTER_LONG_CONSTANT(\"ENT_QUOTES\", ENT_QUOTES, CONST_PERSISTENT|CONST_CS);",
          "old_line_content": "",
          "new_line_content": "\tREGISTER_LONG_CONSTANT(\"ENT_QUOTES\", ENT_QUOTES, CONST_PERSISTENT|CONST_CS);",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "EGISTER_LONG_CONSTANT",
          "old_text": null,
          "new_text": "EGISTER_LONG_CONSTANT(\"ENT_NOQUOTES\", ENT_NOQUOTES, CONST_PERSISTENT|CONST_CS);",
          "old_line_content": "/* {{{ proto string htmlspecialchars(string string [, int quote_style][, string charset])",
          "new_line_content": "\tREGISTER_LONG_CONSTANT(\"ENT_NOQUOTES\", ENT_NOQUOTES, CONST_PERSISTENT|CONST_CS);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ret);",
          "old_line_content": "\t\t\t\tret = replaced;",
          "new_line_content": "\t\t\t\t\tefree(ret);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "etermine_charset",
          "old_text": null,
          "new_text": "etermine_charset(hint_charset TSRMLS_CC);",
          "old_line_content": "\tif (maxlen < 128)",
          "new_line_content": "\tenum entity_charset charset = determine_charset(hint_charset TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "hp_html_entities",
          "old_text": null,
          "new_text": "hp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 0);",
          "old_line_content": "/* {{{ proto string html_entity_decode(string string [, int quote_style][, string charset])",
          "new_line_content": "\tphp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 0);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "malloc (maxlen);",
          "old_text": null,
          "new_text": "malloc (maxlen);",
          "old_line_content": "\twhile (i < oldlen) {",
          "new_line_content": "\treplaced = emalloc (maxlen);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "hp_memnstr",
          "old_text": null,
          "new_text": "hp_memnstr(ret, basic_entities[j].entity, basic_entities[j].entitylen, ret+retlen))",
          "old_line_content": "\t\tret = replaced;",
          "new_line_content": "\t\tif (php_memnstr(ret, basic_entities[j].entity, basic_entities[j].entitylen, ret+retlen)) {\t\t",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "hp_str_to_str",
          "old_text": null,
          "new_text": "hp_str_to_str(ret, retlen, basic_entities[j].entity, basic_entities[j].entitylen, replacement, 1, &retlen);",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\treplaced = php_str_to_str(ret, retlen, basic_entities[j].entity, basic_entities[j].entitylen, replacement, 1, &retlen);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ret);",
          "old_line_content": "",
          "new_line_content": "\t\t\tefree(ret);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "et_next_char",
          "old_text": null,
          "new_text": "et_next_char(charset, old, &i, mbsequence, &mbseqlen);",
          "old_line_content": "\t\tif (len + 9 > maxlen)",
          "new_line_content": "\t\tunsigned short this_char = get_next_char(charset, old, &i, mbsequence, &mbseqlen);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "END_NUM_ARGS",
          "old_text": null,
          "new_text": "END_NUM_ARGS() ",
          "old_line_content": "",
          "new_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"s|ls\", &str, &str_len,",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "realloc (replaced, maxlen += 128);",
          "old_text": null,
          "new_text": "realloc (replaced, maxlen += 128);",
          "old_line_content": "\t\t\tunsigned char *rep = NULL;",
          "new_line_content": "\t\t\treplaced = erealloc (replaced, maxlen += 128);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "hp_unescape_html_entities",
          "old_text": null,
          "new_text": "hp_unescape_html_entities(str, str_len, &len, 1, quote_style, hint_charset TSRMLS_CC);",
          "old_line_content": "",
          "new_line_content": "\treplaced = php_unescape_html_entities(str, str_len, &len, 1, quote_style, hint_charset TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "ETVAL_STRINGL",
          "old_text": null,
          "new_text": "ETVAL_STRINGL(replaced, len, 0);",
          "old_line_content": "",
          "new_line_content": "\tRETVAL_STRINGL(replaced, len, 0);",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "hp_html_entities",
          "old_text": null,
          "new_text": "hp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 1);",
          "old_line_content": "/* {{{ proto array get_html_translation_table([int table [, int quote_style]])",
          "new_line_content": "\tphp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 1);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "trtol",
          "old_text": null,
          "new_text": "trtol(p + 3, &next, 16);",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\tcode = strtol(p + 3, &next, 16);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "trtol",
          "old_text": null,
          "new_text": "trtol(p + 2, &next, 10);",
          "old_line_content": "\t\t\t\t\t\tswitch (charset) {",
          "new_line_content": "\t\t\t\t\t\tcode = strtol(p + 2, &next, 10);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "hp_utf32_utf8",
          "old_text": null,
          "new_text": "hp_utf32_utf8(q, code);",
          "old_line_content": "\t\t\t\t\t\t\tcase cs_8859_5:",
          "new_line_content": "\t\t\t\t\t\t\t\tq += php_utf32_utf8(q, code);",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "etermine_charset",
          "old_text": null,
          "new_text": "etermine_charset(NULL TSRMLS_CC);",
          "old_line_content": "\t}",
          "new_line_content": "\tenum entity_charset charset = determine_charset(NULL TSRMLS_CC);",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "trcpy",
          "old_text": null,
          "new_text": "trcpy(replaced + len, rep);",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tstrcpy(replaced + len, rep);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "trlen",
          "old_text": null,
          "new_text": "trlen(rep);",
          "old_line_content": "\t\tif (!matches_map) {\t",
          "new_line_content": "\t\t\t\tlen += strlen(rep);",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "rray_init",
          "old_text": null,
          "new_text": "rray_init(return_value);",
          "old_line_content": "\tswitch (which) {",
          "new_line_content": "\tarray_init(return_value);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(replaced + len, \"&amp;\", sizeof(\"&amp;\") - 1);",
          "old_line_content": "\t\t\t\tfor (j = 0; basic_entities[j].charcode != 0; j++) {",
          "new_line_content": "\t\t\t\tmemcpy(replaced + len, \"&amp;\", sizeof(\"&amp;\") - 1);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(buffer, \"&%s;\", entity_map[j].table[i]);",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tsprintf(buffer, \"&%s;\", entity_map[j].table[i]);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(replaced + len, basic_entities[j].entity, basic_entities[j].entitylen);",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tmemcpy(replaced + len, basic_entities[j].entity, basic_entities[j].entitylen);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "dd_assoc_string",
          "old_text": null,
          "new_text": "dd_assoc_string(return_value, ind, buffer, 1);",
          "old_line_content": "\t\t\t/* break thru */",
          "new_line_content": "\t\t\t\t\tadd_assoc_string(return_value, ind, buffer, 1);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "emcpy",
          "old_text": null,
          "new_text": "emcpy(replaced + len, mbsequence, mbseqlen);",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tmemcpy(replaced + len, mbsequence, mbseqlen);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1173,
          "old_api": "END_NUM_ARGS",
          "new_api": null,
          "old_text": "END_NUM_ARGS() ",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"s|ls\", &str, &str_len, &quote_style, &hint_charset, &hint_charset_len) == FAILURE) {",
          "new_line_content": "\tint len;",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "ETVAL_STRINGL",
          "new_api": null,
          "old_text": "ETVAL_STRINGL(replaced, len, 0);",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL(replaced, len, 0);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "EGISTER_LONG_CONSTANT",
          "new_api": null,
          "old_text": "EGISTER_LONG_CONSTANT(\"HTML_SPECIALCHARS\", HTML_SPECIALCHARS, CONST_PERSISTENT|CONST_CS);",
          "new_text": null,
          "old_line_content": "\tREGISTER_LONG_CONSTANT(\"HTML_SPECIALCHARS\", HTML_SPECIALCHARS, CONST_PERSISTENT|CONST_CS);",
          "new_line_content": "/* {{{ register_html_constants",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "EGISTER_LONG_CONSTANT",
          "new_api": null,
          "old_text": "EGISTER_LONG_CONSTANT(\"HTML_ENTITIES\", HTML_ENTITIES, CONST_PERSISTENT|CONST_CS);",
          "new_text": null,
          "old_line_content": "\tREGISTER_LONG_CONSTANT(\"HTML_ENTITIES\", HTML_ENTITIES, CONST_PERSISTENT|CONST_CS);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "EGISTER_LONG_CONSTANT",
          "new_api": null,
          "old_text": "EGISTER_LONG_CONSTANT(\"ENT_COMPAT\", ENT_COMPAT, CONST_PERSISTENT|CONST_CS);",
          "new_text": null,
          "old_line_content": "\tREGISTER_LONG_CONSTANT(\"ENT_COMPAT\", ENT_COMPAT, CONST_PERSISTENT|CONST_CS);",
          "new_line_content": "void register_html_constants(INIT_FUNC_ARGS)",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "EGISTER_LONG_CONSTANT",
          "new_api": null,
          "old_text": "EGISTER_LONG_CONSTANT(\"ENT_QUOTES\", ENT_QUOTES, CONST_PERSISTENT|CONST_CS);",
          "new_text": null,
          "old_line_content": "\tREGISTER_LONG_CONSTANT(\"ENT_QUOTES\", ENT_QUOTES, CONST_PERSISTENT|CONST_CS);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "etermine_charset",
          "new_api": null,
          "old_text": "etermine_charset(hint_charset TSRMLS_CC);",
          "new_text": null,
          "old_line_content": "\tenum entity_charset charset = determine_charset(hint_charset TSRMLS_CC);",
          "new_line_content": "PHPAPI char *php_escape_html_entities(unsigned char *old, int oldlen, int *newlen, int all, int quote_style, char *hint_charset TSRMLS_DC)",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "hp_html_entities",
          "new_api": null,
          "old_text": "hp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 0);",
          "new_text": null,
          "old_line_content": "\tphp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 0);",
          "new_line_content": "/* {{{ proto string htmlspecialchars(string string [, int quote_style][, string charset])",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "malloc (maxlen);",
          "new_api": null,
          "old_text": "malloc (maxlen);",
          "new_text": null,
          "old_line_content": "\treplaced = emalloc (maxlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "et_next_char",
          "new_api": null,
          "old_text": "et_next_char(charset, old, &i, mbsequence, &mbseqlen);",
          "new_text": null,
          "old_line_content": "\t\tunsigned short this_char = get_next_char(charset, old, &i, mbsequence, &mbseqlen);",
          "new_line_content": "\ti = 0;",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "END_NUM_ARGS",
          "new_api": null,
          "old_text": "END_NUM_ARGS() ",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"s|ls\", &str, &str_len,",
          "new_line_content": "\tint str_len, hint_charset_len, len;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "hp_str_to_str",
          "new_api": null,
          "old_text": "hp_str_to_str(ret, retlen, basic_entities[j].entity, basic_entities[j].entitylen, replacement, 1, &retlen);",
          "new_text": null,
          "old_line_content": "\t\treplaced = php_str_to_str(ret, retlen, basic_entities[j].entity, basic_entities[j].entitylen, replacement, 1, &retlen);",
          "new_line_content": "\t\treplacement[1] = '\\0';",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ret);",
          "new_text": null,
          "old_line_content": "\t\tefree(ret);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "realloc (replaced, maxlen += 128);",
          "new_api": null,
          "old_text": "realloc (replaced, maxlen += 128);",
          "new_text": null,
          "old_line_content": "\t\t\treplaced = erealloc (replaced, maxlen += 128);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "hp_unescape_html_entities",
          "new_api": null,
          "old_text": "hp_unescape_html_entities(str, str_len, &len, 1, quote_style, hint_charset TSRMLS_CC);",
          "new_text": null,
          "old_line_content": "\treplaced = php_unescape_html_entities(str, str_len, &len, 1, quote_style, hint_charset TSRMLS_CC);",
          "new_line_content": "\t\t\t\t\t\t\t  &quote_style, &hint_charset, &hint_charset_len) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "ETVAL_STRINGL",
          "new_api": null,
          "old_text": "ETVAL_STRINGL(replaced, len, 0);",
          "new_text": null,
          "old_line_content": "\tRETVAL_STRINGL(replaced, len, 0);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "hp_html_entities",
          "new_api": null,
          "old_text": "hp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 1);",
          "new_text": null,
          "old_line_content": "\tphp_html_entities(INTERNAL_FUNCTION_PARAM_PASSTHRU, 1);",
          "new_line_content": "/* {{{ proto string htmlentities(string string [, int quote_style][, string charset])",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "trtol",
          "new_api": null,
          "old_text": "trtol(p + 3, &next, 16);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tcode = strtol(p + 3, &next, 16);",
          "new_line_content": "\t\t\t\tif (p[1] == '#') {",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "trtol",
          "new_api": null,
          "old_text": "trtol(p + 2, &next, 10);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tcode = strtol(p + 2, &next, 10);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "hp_utf32_utf8",
          "new_api": null,
          "old_text": "hp_utf32_utf8(q, code);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tq += php_utf32_utf8(q, code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "etermine_charset",
          "new_api": null,
          "old_text": "etermine_charset(NULL TSRMLS_CC);",
          "new_text": null,
          "old_line_content": "\tenum entity_charset charset = determine_charset(NULL TSRMLS_CC);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "END_NUM_ARGS",
          "new_api": null,
          "old_text": "END_NUM_ARGS() ",
          "new_text": null,
          "old_line_content": "\tif (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"|ll\", &which, &quote_style) == FAILURE) {",
          "new_line_content": "\tint i, j;",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "trcpy",
          "new_api": null,
          "old_text": "trcpy(replaced + len, rep);",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrcpy(replaced + len, rep);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "trlen",
          "new_api": null,
          "old_text": "trlen(rep);",
          "new_text": null,
          "old_line_content": "\t\t\t\tlen += strlen(rep);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(replaced + len, \"&amp;\", sizeof(\"&amp;\") - 1);",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(replaced + len, \"&amp;\", sizeof(\"&amp;\") - 1);",
          "new_line_content": "\t\tif (!matches_map) {\t",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(buffer, \"&%s;\", entity_map[j].table[i]);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsprintf(buffer, \"&%s;\", entity_map[j].table[i]);",
          "new_line_content": "\t\t\t\t\tif (entity_map[j].table[i] == NULL)",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(replaced + len, basic_entities[j].entity, basic_entities[j].entitylen);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmemcpy(replaced + len, basic_entities[j].entity, basic_entities[j].entitylen);",
          "new_line_content": "\t\t\t\t\t\t\t(quote_style & basic_entities[j].flags) == 0)) {",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "dd_assoc_string",
          "new_api": null,
          "old_text": "dd_assoc_string(return_value, ind, buffer, 1);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tadd_assoc_string(return_value, ind, buffer, 1);",
          "new_line_content": "\t\t\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "emcpy",
          "new_api": null,
          "old_text": "emcpy(replaced + len, mbsequence, mbseqlen);",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmemcpy(replaced + len, mbsequence, mbseqlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "dd_assoc_stringl",
          "new_api": null,
          "old_text": "dd_assoc_stringl(return_value, ind, basic_entities[j].entity, basic_entities[j].entitylen, 1);",
          "new_text": null,
          "old_line_content": "\t\t\t\tadd_assoc_stringl(return_value, ind, basic_entities[j].entity, basic_entities[j].entitylen, 1);",
          "new_line_content": "\t\t\t\tif (basic_entities[j].flags && (quote_style & basic_entities[j].flags) == 0)",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "dd_assoc_stringl",
          "new_api": null,
          "old_text": "dd_assoc_stringl(return_value, \"&\", \"&amp;\", sizeof(\"&amp;\") - 1, 1);",
          "new_text": null,
          "old_line_content": "\t\t\tadd_assoc_stringl(return_value, \"&\", \"&amp;\", sizeof(\"&amp;\") - 1, 1);",
          "new_line_content": "\t\t\t\t",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 4,
      "total_additions": 33,
      "total_deletions": 31,
      "total_api_changes": 68
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 68,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          963,
          964,
          946,
          947,
          957
        ]
      }
    },
    "api_calls_before": 72,
    "api_calls_after": 74,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 7,
      "total_diff_lines": 37
    }
  }
}
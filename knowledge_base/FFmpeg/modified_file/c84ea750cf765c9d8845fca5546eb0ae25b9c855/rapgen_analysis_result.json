{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c84ea750cf765c9d8845fca5546eb0ae25b9c855",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c84ea750cf765c9d8845fca5546eb0ae25b9c855/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c84ea750cf765c9d8845fca5546eb0ae25b9c855/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c84ea750cf765c9d8845fca5546eb0ae25b9c855/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 300,
          "old_api": "section_cb",
          "new_api": "AV_RB16",
          "old_text": "tss->section_cb(tss1, tss->section_buf, tss->section_h_size)",
          "new_text": "AV_RB16(tss->section_buf + 1)",
          "old_line_content": "            tss->section_cb(tss1, tss->section_buf, tss->section_h_size);",
          "new_line_content": "        len = (AV_RB16(tss->section_buf + 1) & 0xfff) + 3;",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "av_malloc",
          "new_api": "av_mallocz",
          "old_text": "av_malloc(MAX_SECTION_SIZE)",
          "new_text": "av_mallocz(sizeof(MpegTSFilter))",
          "old_line_content": "    sec->section_buf = av_malloc(MAX_SECTION_SIZE);",
          "new_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "av_free",
          "new_api": "av_freep",
          "old_text": "av_free(filter)",
          "new_text": "av_freep(&filter->u.section_filter.section_buf)",
          "old_line_content": "    av_free(filter);",
          "new_line_content": "        av_freep(&filter->u.section_filter.section_buf);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "AVERROR",
          "new_api": "mpegts_find_stream_type",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, ISO_types)",
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "    mpegts_find_stream_type(st, pes->stream_type, ISO_types);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "memcpy",
          "new_api": "AV_RL32",
          "old_text": "memcpy(sub_pes, pes, sizeof(*sub_pes))",
          "new_text": "AV_RL32(\"HDMV\")",
          "old_line_content": "            memcpy(sub_pes, pes, sizeof(*sub_pes));",
          "new_line_content": "    if (prog_reg_desc == AV_RL32(\"HDMV\") &&",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "avformat_new_stream",
          "new_api": "mpegts_find_stream_type",
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, HDMV_types)",
          "old_line_content": "            sub_st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "        mpegts_find_stream_type(st, pes->stream_type, HDMV_types);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "memset",
          "new_api": "av_init_packet",
          "old_text": "memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": "av_init_packet(pkt)",
          "old_line_content": "    memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "    av_init_packet(pkt);",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "get_bits1",
          "new_api": "init_get_bits",
          "old_text": "get_bits1(&gb)",
          "new_text": "init_get_bits(&gb, buf, buf_size*8)",
          "old_line_content": "        idle_flag = get_bits1(&gb);",
          "new_line_content": "    init_get_bits(&gb, buf, buf_size*8);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "skip_bits",
          "new_api": "get_bits1",
          "old_text": "skip_bits(&gb, sl->degr_prior_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "                skip_bits(&gb, sl->degr_prior_len);",
          "new_line_content": "        idle_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "skip_bits_long",
          "new_api": "get_bits1",
          "old_text": "skip_bits_long(&gb, sl->ocr_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            skip_bits_long(&gb, sl->ocr_len);",
          "new_line_content": "        padding_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "get_bits64",
          "new_api": "get_bits1",
          "old_text": "get_bits64(&gb, sl->timestamp_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            dts = get_bits64(&gb, sl->timestamp_len);",
          "new_line_content": "                get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "get_bits64",
          "new_api": "skip_bits_long",
          "old_text": "get_bits64(&gb, sl->timestamp_len)",
          "new_text": "skip_bits_long(&gb, sl->au_seq_num_len)",
          "old_line_content": "            cts = get_bits64(&gb, sl->timestamp_len);",
          "new_line_content": "                skip_bits_long(&gb, sl->au_seq_num_len);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "skip_bits_long",
          "new_api": "get_bits1",
          "old_text": "skip_bits_long(&gb, sl->au_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            skip_bits_long(&gb, sl->au_len);",
          "new_line_content": "                dts_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "avpriv_set_pts_info",
          "new_api": "skip_bits_long",
          "old_text": "avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res)",
          "new_text": "skip_bits_long(&gb, sl->au_len)",
          "old_line_content": "        avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res);",
          "new_line_content": "            skip_bits_long(&gb, sl->au_len);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "get_bits_count",
          "new_api": "skip_bits_long",
          "old_text": "get_bits_count(&gb)",
          "new_text": "skip_bits_long(&gb, sl->inst_bitrate_len)",
          "old_line_content": "    return (get_bits_count(&gb) + 7) >> 3;",
          "new_line_content": "            skip_bits_long(&gb, sl->inst_bitrate_len);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "av_dlog",
          "new_api": "memcpy",
          "old_text": "av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code)",
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "                    av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code);",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "AVERROR",
          "new_api": "av_dlog",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code)",
          "old_line_content": "                            return AVERROR(ENOMEM);",
          "new_line_content": "                    av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "av_dlog",
          "new_api": "av_buffer_alloc",
          "old_text": "av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",\n                                    pes->pid, pes->stream_type)",
          "new_text": "av_buffer_alloc(pes->total_size +\n                                                  FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "                            av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",",
          "new_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size +",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "memcpy",
          "new_api": "new_pes_packet",
          "old_text": "memcpy(pes->buffer->data + pes->data_index, p, buf_size)",
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "                memcpy(pes->buffer->data + pes->data_index, p, buf_size);",
          "new_line_content": "                    new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "parse_mp4_descr",
          "new_api": "avio_tell",
          "old_text": "parse_mp4_descr(d, off, len, 0)",
          "new_text": "avio_tell(pb)",
          "old_line_content": "        if (parse_mp4_descr(d, off, len, 0) < 0)",
          "new_line_content": "    int64_t new_off = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "avio_r8",
          "new_api": "parse_mp4_descr",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "parse_mp4_descr(d, off, len, 0)",
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "        if (parse_mp4_descr(d, off, len, 0) < 0)",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "avio_r8",
          "new_api": "update_offsets",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "        update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "avio_rb16",
          "new_api": "avio_r8",
          "old_text": "avio_rb16(&d->pb)",
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    id_flags = avio_rb16(&d->pb);",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "ff_mp4_parse_es_descr",
          "new_api": "parse_mp4_descr_arr",
          "old_text": "ff_mp4_parse_es_descr(&d->pb, &es_id)",
          "new_text": "parse_mp4_descr_arr(d, off, len)",
          "old_line_content": "    ff_mp4_parse_es_descr(&d->pb, &es_id);",
          "new_line_content": "        return parse_mp4_descr_arr(d, off, len); //ES_Descriptor[]",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "avio_r8",
          "new_api": "avio_read",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "avio_read(&d->pb, descr->dec_config_descr, len)",
          "old_line_content": "    predefined = avio_r8(&d->pb);",
          "new_line_content": "    avio_read(&d->pb, descr->dec_config_descr, len);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(&d->pb)",
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "                                       avio_rb32(&d->pb);",
          "new_line_content": "    predefined = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "avpriv_report_missing_feature",
          "new_api": "avio_rb32",
          "old_text": "avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\")",
          "new_text": "avio_rb32(&d->pb)",
          "old_line_content": "        avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\");",
          "new_line_content": "        descr->sl.timestamp_res      = avio_rb32(&d->pb);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "av_log",
          "new_api": "avpriv_report_missing_feature",
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len)",
          "new_text": "avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\")",
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len);",
          "new_line_content": "        avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\");",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "parse_MP4IODescrTag",
          "new_api": "av_log",
          "old_text": "parse_MP4IODescrTag(d, off, len1)",
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\")",
          "old_line_content": "        parse_MP4IODescrTag(d, off, len1);",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\");",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "avio_tell",
          "new_api": "avio_seek",
          "old_text": "avio_tell(&d.pb)",
          "new_text": "avio_seek(&d->pb, off + len1, SEEK_SET)",
          "old_line_content": "    parse_mp4_descr(&d, avio_tell(&d.pb), size, MP4IODescrTag);",
          "new_line_content": "    avio_seek(&d->pb, off + len1, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "av_log",
          "new_api": "mp4_read_od",
          "old_text": "av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid)",
          "new_text": "mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "old_line_content": "                av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid);",
          "new_line_content": "    mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "ffio_init_context",
          "new_api": "av_log",
          "old_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                              mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid)",
          "old_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "new_line_content": "                av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "mpegts_find_stream_type",
          "new_api": "get8",
          "old_text": "mpegts_find_stream_type(st, desc_tag, DESC_types)",
          "new_text": "get8(pp, desc_list_end)",
          "old_line_content": "        mpegts_find_stream_type(st, desc_tag, DESC_types);",
          "new_line_content": "    desc_len = get8(pp, desc_list_end);",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "ffio_init_context",
          "new_api": "mpegts_find_stream_type",
          "old_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                          mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": "mpegts_find_stream_type(st, desc_tag, DESC_types)",
          "old_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "new_line_content": "        mpegts_find_stream_type(st, desc_tag, DESC_types);",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "get16",
          "new_api": "ffio_init_context",
          "old_text": "get16(pp, desc_end)",
          "new_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                          mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "        get16(pp, desc_end);",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "get8",
          "new_api": "ffio_init_context",
          "old_text": "get8(pp, desc_end)",
          "new_text": "ffio_init_context(&pb, mp4_descr->dec_config_descr,\n                          mp4_descr->dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "        language[2] = get8(pp, desc_end);",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr->dec_config_descr,",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "av_dict_set",
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "old_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "memcmp",
          "new_api": "get8",
          "old_text": "memcmp(st->codec->extradata, *pp, 4)",
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            if (st->codec->extradata_size == 4 && memcmp(st->codec->extradata, *pp, 4))",
          "new_line_content": "        switch(get8(pp, desc_end)) {",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "get8",
          "new_api": "av_malloc",
          "old_text": "get8(pp, desc_end)",
          "new_text": "av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "            language[i + 0] = get8(pp, desc_end);",
          "new_line_content": "            st->codec->extradata = av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "av_dict_set",
          "new_api": "get8",
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "            language[i + 1] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "add_pid_to_pmt",
          "new_api": "av_dlog",
          "old_text": "add_pid_to_pmt(ts, h->id, pcr_pid)",
          "new_text": "av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",\n           h->id, h->sec_num, h->last_sec_num)",
          "old_line_content": "    add_pid_to_pmt(ts, h->id, pcr_pid);",
          "new_line_content": "    av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "get8",
          "new_api": "add_pid_to_pmt",
          "old_text": "get8(&p, p_end)",
          "new_text": "add_pid_to_pmt(ts, h->id, pcr_pid)",
          "old_line_content": "        len = get8(&p, p_end);",
          "new_line_content": "    add_pid_to_pmt(ts, h->id, pcr_pid);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "avformat_new_stream",
          "new_api": "mpegts_close_filter",
          "old_text": "avformat_new_stream(ts->stream, NULL)",
          "new_text": "mpegts_close_filter(ts, ts->pids[pid])",
          "old_line_content": "                st = avformat_new_stream(ts->stream, NULL);",
          "new_line_content": "            if (ts->pids[pid]) mpegts_close_filter(ts, ts->pids[pid]); //wrongly added sdt filter probably",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "hex_dump_debug",
          "new_api": "av_free",
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": "av_free(mp4_descr[i].dec_config_descr)",
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "get16",
          "new_api": "hex_dump_debug",
          "old_text": "get16(&p, p_end)",
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "        sid = get16(&p, p_end);",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "add_pid_to_pmt",
          "new_api": "av_dlog",
          "old_text": "add_pid_to_pmt(ts, sid, pmt_pid)",
          "new_text": "av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid)",
          "old_line_content": "            add_pid_to_pmt(ts, sid, pmt_pid);",
          "new_line_content": "        av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "get8",
          "new_api": "hex_dump_debug",
          "old_text": "get8(&p, p_end)",
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "    val = get8(&p, p_end);",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "get16",
          "new_api": "parse_section_header",
          "old_text": "get16(&p, p_end)",
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "        sid = get16(&p, p_end);",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "get8",
          "new_api": "get16",
          "old_text": "get8(&p, desc_list_end)",
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            desc_len = get8(&p, desc_list_end);",
          "new_line_content": "        desc_list_len = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": "getstr8",
          "new_api": "av_dlog",
          "old_text": "getstr8(&p, p_end)",
          "new_text": "av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",\n                   desc_tag, desc_len)",
          "old_line_content": "                name = getstr8(&p, p_end);",
          "new_line_content": "            av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "av_dict_set",
          "new_api": "get8",
          "old_text": "av_dict_set(&program->metadata, \"service_provider\", provider_name, 0)",
          "new_text": "get8(&p, p_end)",
          "old_line_content": "                        av_dict_set(&program->metadata, \"service_provider\", provider_name, 0);",
          "new_line_content": "                service_type = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "av_free",
          "new_api": "getstr8",
          "old_text": "av_free(name)",
          "new_text": "getstr8(&p, p_end)",
          "old_line_content": "                av_free(name);",
          "new_line_content": "                provider_name = getstr8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "write_section_data",
          "new_api": "avio_tell",
          "old_text": "write_section_data(s, tss,\n                                   p, len, 0)",
          "new_text": "avio_tell(ts->stream->pb)",
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "    pos = avio_tell(ts->stream->pb);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "memset",
          "new_api": "av_buffer_unref",
          "old_text": "memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": "av_buffer_unref(&pes->buffer)",
          "old_line_content": "    memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                   av_buffer_unref(&pes->buffer);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "finished_reading_packet",
          "new_api": "memset",
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": "memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "        finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "    memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "av_log",
          "new_api": "get_packet_size",
          "old_text": "av_log(s, AV_LOG_ERROR, \"Unable to seek back to the start\\n\")",
          "new_text": "get_packet_size(buf, sizeof(buf))",
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"Unable to seek back to the start\\n\");",
          "new_line_content": "    ts->raw_packet_size = get_packet_size(buf, sizeof(buf));",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "av_dlog",
          "new_api": "av_log",
          "old_text": "av_dlog(ts->stream, \"tuning done\\n\")",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Unable to seek back to the start\\n\")",
          "old_line_content": "        av_dlog(ts->stream, \"tuning done\\n\");",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"Unable to seek back to the start\\n\");",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "finished_reading_packet",
          "new_api": "AV_RB16",
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": "AV_RB16(data + 1)",
          "old_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "            pid = AV_RB16(data + 1) & 0x1fff;",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "parse_pcr",
          "new_api": "avio_tell",
          "old_text": "parse_pcr(&pcr_h, &pcr_l, pkt->data)",
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, pkt->data) == 0) {",
          "new_line_content": "    pkt->pos= avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "avio_seek",
          "new_api": "avio_tell",
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "            pos = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "mpegts_close_filter",
          "new_api": "AVERROR",
          "old_text": "mpegts_close_filter(ts, ts->pids[i])",
          "new_text": "AVERROR(EINTR)",
          "old_line_content": "        if (ts->pids[i]) mpegts_close_filter(ts, ts->pids[i]);",
          "new_line_content": "        ret = AVERROR(EINTR);",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "avio_seek",
          "new_api": "AV_RB16",
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": "AV_RB16(buf + 1)",
          "old_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "            if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "avio_read",
          "new_api": "parse_pcr",
          "old_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "new_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "old_line_content": "            if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "new_line_content": "                parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "av_free",
          "new_api": "handle_packet",
          "old_text": "av_free(ts)",
          "new_text": "handle_packet(ts, buf)",
          "old_line_content": "    av_free(ts);",
          "new_line_content": "            handle_packet(ts, buf);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    int id_flags;",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    if (len < 2)",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "} StreamType;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    if (!(id_flags & 0x0020)) { //URL_Flag",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            if (ts->pids[pmt_pid])",
          "new_line_content": "        pmt_pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "av_new_program",
          "old_text": null,
          "new_text": "av_new_program(ts->stream, sid)",
          "old_line_content": "static void sdt_cb(MpegTSFilter *filter, const uint8_t *section, int section_len)",
          "new_line_content": "            av_new_program(ts->stream, sid);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "mpegts_close_filter",
          "old_text": null,
          "new_text": "mpegts_close_filter(ts, ts->pids[pmt_pid])",
          "old_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "new_line_content": "                mpegts_close_filter(ts, ts->pids[pmt_pid]);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1)",
          "old_line_content": "    SectionHeader h1, *h = &h1;",
          "new_line_content": "            mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "    int es_id = 0;",
          "new_line_content": "    id_flags = avio_rb16(&d->pb);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "add_pat_entry",
          "old_text": null,
          "new_text": "add_pat_entry(ts, sid)",
          "old_line_content": "    const uint8_t *p, *p_end, *desc_list_end, *desc_end;",
          "new_line_content": "            add_pat_entry(ts, sid);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "        return -1;",
          "new_line_content": "        update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "clear_programs",
          "old_text": null,
          "new_text": "clear_programs(ts)",
          "old_line_content": "}",
          "new_line_content": "    clear_programs(ts);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "add_pid_to_pmt",
          "old_text": null,
          "new_text": "add_pid_to_pmt(ts, sid, 0)",
          "old_line_content": "    int onid, val, sid, desc_list_len, desc_tag, desc_len, service_type;",
          "new_line_content": "            add_pid_to_pmt(ts, sid, 0); //add pat pid to program",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "add_pid_to_pmt",
          "old_text": null,
          "new_text": "add_pid_to_pmt(ts, sid, pmt_pid)",
          "old_line_content": "    char *name, *provider_name;",
          "new_line_content": "            add_pid_to_pmt(ts, sid, pmt_pid);",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "mpegts_close_filter",
          "old_text": null,
          "new_text": "mpegts_close_filter(ts, ts->pids[i])",
          "old_line_content": "                              int64_t *ppos, int64_t pos_limit)",
          "new_line_content": "        if (ts->pids[i]) mpegts_close_filter(ts, ts->pids[i]);",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": null,
          "new_api": "clear_programs",
          "old_text": null,
          "new_text": "clear_programs(ts)",
          "old_line_content": "",
          "new_line_content": "    clear_programs(ts);",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "mpegts_free",
          "old_text": null,
          "new_text": "mpegts_free(ts)",
          "old_line_content": "    const int find_next= 1;",
          "new_line_content": "    mpegts_free(ts);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "{",
          "new_line_content": "    avio_rb16(&d->pb); // ID",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "ff_mp4_parse_es_descr",
          "old_text": null,
          "new_text": "ff_mp4_parse_es_descr(&d->pb, &es_id)",
          "old_line_content": "}",
          "new_line_content": "    ff_mp4_parse_es_descr(&d->pb, &es_id);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"SDT:\\n\")",
          "old_line_content": "        return;",
          "new_line_content": "    av_dlog(ts->stream, \"SDT:\\n\");",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    Mp4Descr *descr = d->active_descr;",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "parse_mp4_descr",
          "old_text": null,
          "new_text": "parse_mp4_descr(d, off, len, MP4DecConfigDescrTag)",
          "old_line_content": "    if (!descr)",
          "new_line_content": "    parse_mp4_descr(d, off, len, MP4DecConfigDescrTag);",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "        return -1;",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "parse_mp4_descr",
          "old_text": null,
          "new_text": "parse_mp4_descr(d, off, len, MP4SLDescrTag)",
          "old_line_content": "    if (!descr->dec_config_descr)",
          "new_line_content": "        parse_mp4_descr(d, off, len, MP4SLDescrTag);",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if (val < 0)",
          "new_line_content": "    onid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "            pos -= ts->raw_packet_size;",
          "new_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "old_line_content": "            if (pos < 0)",
          "new_line_content": "            if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "        if (desc_list_len < 0)",
          "new_line_content": "    val = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if (desc_list_end > p_end)",
          "new_line_content": "        sid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len)",
          "old_line_content": "    int predefined;",
          "new_line_content": "    d->active_descr->dec_config_descr = av_malloc(len);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        return -1;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('d','r','a','c')",
          "old_line_content": "static const StreamType DESC_types[] = {",
          "new_line_content": "    { MKTAG('d','r','a','c'), AVMEDIA_TYPE_VIDEO, AV_CODEC_ID_DIRAC },",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('A','C','-','3')",
          "old_line_content": "    { 0x6a, AVMEDIA_TYPE_AUDIO,             AV_CODEC_ID_AC3 }, /* AC-3 descriptor */",
          "new_line_content": "    { MKTAG('A','C','-','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('B','S','S','D')",
          "old_line_content": "    { 0x7a, AVMEDIA_TYPE_AUDIO,            AV_CODEC_ID_EAC3 }, /* E-AC-3 descriptor */",
          "new_line_content": "    { MKTAG('B','S','S','D'), AVMEDIA_TYPE_AUDIO, AV_CODEC_ID_S302M },",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','1')",
          "old_line_content": "    { 0x7b, AVMEDIA_TYPE_AUDIO,             AV_CODEC_ID_DTS },",
          "new_line_content": "    { MKTAG('D','T','S','1'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "    return timestamp;",
          "new_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "old_line_content": "}",
          "new_line_content": "            if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','2')",
          "old_line_content": "    { 0x56, AVMEDIA_TYPE_SUBTITLE, AV_CODEC_ID_DVB_TELETEXT },",
          "new_line_content": "    { MKTAG('D','T','S','2'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf + 1)",
          "old_line_content": "static int read_seek(AVFormatContext *s, int stream_index, int64_t target_ts, int flags){",
          "new_line_content": "            if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "old_line_content": "    MpegTSContext *ts = s->priv_data;",
          "new_line_content": "                parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','3')",
          "old_line_content": "    { 0x59, AVMEDIA_TYPE_SUBTITLE, AV_CODEC_ID_DVB_SUBTITLE }, /* subtitling descriptor */",
          "new_line_content": "    { MKTAG('D','T','S','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('V','C','-','1')",
          "old_line_content": "    { 0 },",
          "new_line_content": "    { MKTAG('V','C','-','1'), AVMEDIA_TYPE_VIDEO,   AV_CODEC_ID_VC1 },",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, desc_list_end)",
          "old_line_content": "            switch(desc_tag) {",
          "new_line_content": "            desc_tag = get8(&p, desc_list_end);",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, desc_list_end)",
          "old_line_content": "                if (service_type < 0)",
          "new_line_content": "            desc_len = get8(&p, desc_list_end);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, pkt)",
          "old_line_content": "    return ret;",
          "new_line_content": "                    new_pes_packet(pes, pkt);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(&d->pb)",
          "old_line_content": "    }",
          "new_line_content": "                                       avio_rb32(&d->pb);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    return 0;",
          "new_line_content": "        descr->sl.timestamp_len      = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": null,
          "new_api": "ff_seek_frame_binary",
          "old_text": null,
          "new_text": "ff_seek_frame_binary(s, stream_index, target_ts, flags)",
          "old_line_content": "        pos += ts->raw_packet_size;",
          "new_line_content": "    if (ff_seek_frame_binary(s, stream_index, target_ts, flags) < 0)",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "}",
          "new_line_content": "        descr->sl.ocr_len            = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "",
          "new_line_content": "        descr->sl.au_len             = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "",
          "new_line_content": "    pos= avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "static int parse_mp4_descr(MP4DescrParseContext *d, int64_t off, int len,",
          "new_line_content": "        descr->sl.inst_bitrate_len   = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "                           int target_tag) {",
          "new_line_content": "        lengths                      = avio_rb16(&d->pb);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "        avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "old_line_content": "/**************************************************************/",
          "new_line_content": "        if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "getstr8",
          "old_text": null,
          "new_text": "getstr8(&p, p_end)",
          "old_line_content": "            default:",
          "new_line_content": "                name = getstr8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": null,
          "new_api": "av_new_program",
          "old_text": null,
          "new_text": "av_new_program(ts->stream, sid)",
          "old_line_content": "            }",
          "new_line_content": "                    AVProgram *program = av_new_program(ts->stream, sid);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&program->metadata, \"service_name\", name, 0)",
          "old_line_content": "        }",
          "new_line_content": "                        av_dict_set(&program->metadata, \"service_name\", name, 0);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&program->metadata, \"service_provider\", provider_name, 0)",
          "old_line_content": "        p = desc_list_end;",
          "new_line_content": "                        av_dict_set(&program->metadata, \"service_provider\", provider_name, 0);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 33, 1, 90000)",
          "old_line_content": "",
          "new_line_content": "    avpriv_set_pts_info(st, 33, 1, 90000);",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "    avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(name)",
          "old_line_content": "",
          "new_line_content": "                av_free(name);",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(provider_name)",
          "old_line_content": "/* handle one TS packet */",
          "new_line_content": "                av_free(provider_name);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "ff_mp4_read_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_descr(d->s, &d->pb, &tag)",
          "old_line_content": "",
          "new_line_content": "    int len1 = ff_mp4_read_descr(d->s, &d->pb, &tag);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    if (target_tag && tag != target_tag) {",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "discard_pid",
          "old_text": null,
          "new_text": "discard_pid(ts, pid)",
          "old_line_content": "    afc = (packet[3] >> 4) & 3;",
          "new_line_content": "    if(pid && discard_pid(ts, pid))",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len)",
          "old_line_content": "        goto done;",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len);",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(pes->stream, AV_LOG_DEBUG,\n           \"stream=%d stream_type=%x pid=%x prog_reg_desc=%.4s\\n\",\n           st->index, pes->stream_type, pes->pid, (char*)&prog_reg_desc)",
          "old_line_content": "            // HDMV TrueHD streams also contain an AC3 coded version of the",
          "new_line_content": "    av_log(pes->stream, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MpegTSContext))",
          "old_line_content": "   packet is output */",
          "new_line_content": "    ts = av_mallocz(sizeof(MpegTSContext));",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag)",
          "old_line_content": "    case MP4ESDescrTag:",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag);",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(packet + 1)",
          "old_line_content": "",
          "new_line_content": "    pid = AV_RB16(packet + 1) & 0x1fff;",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(sizeof(*sub_pes))",
          "old_line_content": "            sub_st->id = pes->pid;",
          "new_line_content": "            PESContext *sub_pes = av_malloc(sizeof(*sub_pes));",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "parse_MP4IODescrTag",
          "old_text": null,
          "new_text": "parse_MP4IODescrTag(d, off, len1)",
          "old_line_content": "    case MP4SLDescrTag:",
          "new_line_content": "        parse_MP4IODescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            sub_st->priv_data = sub_pes;",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(sub_pes, pes, sizeof(*sub_pes))",
          "old_line_content": "            sub_st->codec->codec_type = AVMEDIA_TYPE_AUDIO;",
          "new_line_content": "            memcpy(sub_pes, pes, sizeof(*sub_pes));",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "parse_MP4ODescrTag",
          "old_text": null,
          "new_text": "parse_MP4ODescrTag(d, off, len1)",
          "old_line_content": "    }",
          "new_line_content": "        parse_MP4ODescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "            sub_st->need_parsing = AVSTREAM_PARSE_FULL;",
          "new_line_content": "            sub_st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "parse_MP4ESDescrTag",
          "old_text": null,
          "new_text": "parse_MP4ESDescrTag(d, off, len1)",
          "old_line_content": "    d->level--;",
          "new_line_content": "        parse_MP4ESDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(sub_pes)",
          "old_line_content": "        }",
          "new_line_content": "                av_free(sub_pes);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    }",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "parse_MP4DecConfigDescrTag",
          "old_text": null,
          "new_text": "parse_MP4DecConfigDescrTag(d, off, len1)",
          "old_line_content": "}",
          "new_line_content": "        parse_MP4DecConfigDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": null,
          "new_api": "add_pes_stream",
          "old_text": null,
          "new_text": "add_pes_stream(ts, pid, -1)",
          "old_line_content": "    is_discontinuity = has_adaptation",
          "new_line_content": "        add_pes_stream(ts, pid, -1);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(sub_st, 33, 1, 90000)",
          "old_line_content": "    return 0;",
          "new_line_content": "            avpriv_set_pts_info(sub_st, 33, 1, 90000);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "parse_MP4SLDescrTag",
          "old_text": null,
          "new_text": "parse_MP4SLDescrTag(d, off, len1)",
          "old_line_content": "                         Mp4Descr *descr, int *descr_count, int max_descr_count)",
          "new_line_content": "        parse_MP4SLDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "mpegts_find_stream_type",
          "old_text": null,
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, MISC_types)",
          "old_line_content": "    pkt->size = pes->data_index;",
          "new_line_content": "        mpegts_find_stream_type(st, pes->stream_type, MISC_types);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "init_MP4DescrParseContext",
          "old_text": null,
          "new_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "old_line_content": "{",
          "new_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": null,
          "new_api": "mpegts_free",
          "old_text": null,
          "new_text": "mpegts_free(ts)",
          "old_line_content": "    .read_close     = mpegts_read_close,",
          "new_line_content": "    mpegts_free(ts);",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(ts)",
          "old_line_content": "    .read_seek      = read_seek,",
          "new_line_content": "    av_free(ts);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(&d.pb)",
          "old_line_content": "        return -1;",
          "new_line_content": "    parse_mp4_descr(&d, avio_tell(&d.pb), size, MP4IODescrTag);",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ts->stream, AV_LOG_WARNING,\n               \"Continuity check failed for pid %d expected %d got %d\\n\",\n               pid, expected_cc, cc)",
          "old_line_content": "    p = packet + 4;",
          "new_line_content": "        av_log(ts->stream, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\")",
          "old_line_content": "AVInputFormat ff_mpegtsraw_demuxer = {",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\"),",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\")",
          "old_line_content": "    pkt->dts = pes->dts;",
          "new_line_content": "        av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\");",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "    pkt->flags = pes->flags;",
          "new_line_content": "    memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "init_MP4DescrParseContext",
          "old_text": null,
          "new_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "old_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "new_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(&d.pb)",
          "old_line_content": "    AVIOContext pb;",
          "new_line_content": "    parse_mp4_descr_arr(&d, avio_tell(&d.pb), size);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\")",
          "old_line_content": "",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\"),",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(&h, &p, p_end)",
          "old_line_content": "            PESContext *pes;",
          "new_line_content": "    if (parse_section_header(&h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, len, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "    if (padding_flag)",
          "new_line_content": "        au_start_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, p_end - p, 1)",
          "old_line_content": "        // Note: The position here points actually behind the current packet.",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "",
          "new_line_content": "        au_end_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, p_end - p, 0)",
          "old_line_content": "",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "        if (sl->degr_prior_len)",
          "new_line_content": "        ocr_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&gb, 3)",
          "old_line_content": "            if (sl->use_rand_acc_pt)",
          "new_line_content": "        padding_bits = get_bits(&gb, 3);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "pes_cb",
          "old_text": null,
          "new_text": "tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,\n                                            pos - ts->raw_packet_size)",
          "old_line_content": "{",
          "new_line_content": "        if ((ret = tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "skip_bits_long",
          "old_text": null,
          "new_text": "skip_bits_long(&gb, sl->packet_seq_num_len)",
          "old_line_content": "            if (sl->use_timestamps) {",
          "new_line_content": "            skip_bits_long(&gb, sl->packet_seq_num_len);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "ffio_init_context",
          "old_text": null,
          "new_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                              mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "            } else if (st->codec->codec_id < AV_CODEC_ID_FIRST_AUDIO) {",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&gb, sl->degr_prior_len)",
          "old_line_content": "            }",
          "new_line_content": "                skip_bits(&gb, sl->degr_prior_len);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_dec_config_descr(s, st, &pb)",
          "old_line_content": "            } else if (st->codec->codec_id < AV_CODEC_ID_FIRST_SUBTITLE) {",
          "new_line_content": "            ff_mp4_read_dec_config_descr(s, st, &pb);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "skip_bits_long",
          "old_text": null,
          "new_text": "skip_bits_long(&gb, sl->ocr_len)",
          "old_line_content": "        if (sl->inst_bitrate_len)",
          "new_line_content": "            skip_bits_long(&gb, sl->ocr_len);",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "}",
          "new_line_content": "        c = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "        if (inst_bitrate_flag)",
          "new_line_content": "                cts_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -1, SEEK_CUR)",
          "old_line_content": "{",
          "new_line_content": "            avio_seek(pb, -1, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "    if (dts != AV_NOPTS_VALUE)",
          "new_line_content": "            inst_bitrate_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "get_bits64",
          "old_text": null,
          "new_text": "get_bits64(&gb, sl->timestamp_len)",
          "old_line_content": "    if (cts != AV_NOPTS_VALUE)",
          "new_line_content": "            dts = get_bits64(&gb, sl->timestamp_len);",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\")",
          "old_line_content": "    for(;;) {",
          "new_line_content": "    av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\");",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "get_bits64",
          "old_text": null,
          "new_text": "get_bits64(&gb, sl->timestamp_len)",
          "old_line_content": "",
          "new_line_content": "            cts = get_bits64(&gb, sl->timestamp_len);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(mp4_descr[i].dec_config_descr)",
          "old_line_content": "    int i;",
          "new_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "ffio_read_indirect",
          "old_text": null,
          "new_text": "ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data)",
          "old_line_content": "        } else {",
          "new_line_content": "        len = ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res)",
          "old_line_content": "    MpegTSContext *ts = pes->ts;",
          "new_line_content": "        avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res);",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&gb)",
          "old_line_content": "    int len, code;",
          "new_line_content": "    return (get_bits_count(&gb) + 7) >> 3;",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_list_end)",
          "old_line_content": "",
          "new_line_content": "    desc_tag = get8(pp, desc_list_end);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR)",
          "old_line_content": "",
          "new_line_content": "            avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "mpegts_resync",
          "old_text": null,
          "new_text": "mpegts_resync(s)",
          "old_line_content": "static void finished_reading_packet(AVFormatContext *s, int raw_packet_size)",
          "new_line_content": "            if (mpegts_resync(s) < 0)",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "{",
          "new_line_content": "                return AVERROR(EAGAIN);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len)",
          "old_line_content": "        for (i = 0; i < mp4_descr_count; i++)",
          "new_line_content": "    av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "            len = PES_START_SIZE - pes->data_index;",
          "new_line_content": "            new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, desc_end)",
          "old_line_content": "                st->codec->extradata_size > 0)",
          "new_line_content": "        desc_es_id = get16(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, skip)",
          "old_line_content": "        int i;",
          "new_line_content": "        avio_skip(pb, skip);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "old_line_content": "            mp4_descr->dec_config_descr_len && mp4_descr->es_id == pid) {",
          "new_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "                }",
          "new_line_content": "    if (avio_tell(s->pb) != ts->last_pos) {",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"Skipping after seek\\n\")",
          "old_line_content": "            }",
          "new_line_content": "        av_dlog(ts->stream, \"Skipping after seek\\n\");",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1)",
          "old_line_content": "            if (st->codec->codec_id == AV_CODEC_ID_AAC &&",
          "new_line_content": "                mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, desc_end)",
          "old_line_content": "        break;",
          "new_line_content": "        get16(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        /* hearing impaired subtitles detection */",
          "new_line_content": "        language[0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        case 0x20: /* DVB subtitles (for the hard of hearing) with no monitor aspect ratio criticality */",
          "new_line_content": "        language[2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(ts->stream, NULL)",
          "old_line_content": "                        pes->total_size = MAX_PES_PAYLOAD;",
          "new_line_content": "                        pes->st = avformat_new_stream(ts->stream, NULL);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tss->section_buf, buf, buf_size)",
          "old_line_content": "        tss->section_index += len;",
          "new_line_content": "        memcpy(tss->section_buf, buf, buf_size);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "                    /* allocate pes buffer */",
          "new_line_content": "                            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "        case 0x22: /* DVB subtitles (for the hard of hearing) for display on 16:9 aspect ratio monitor */",
          "new_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "mpegts_set_stream_info",
          "old_text": null,
          "new_text": "mpegts_set_stream_info(pes->st, pes, 0, 0)",
          "old_line_content": "                                                  FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                        mpegts_set_stream_info(pes->st, pes, 0, 0);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        case 0x25: /* DVB subtitles (for the hard of hearing) with plano-stereoscopic disparity for display on a high definition monitor */",
          "new_line_content": "        language[0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            st->disposition |= AV_DISPOSITION_HEARING_IMPAIRED;",
          "new_line_content": "        language[1] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(pes->header + 4)",
          "old_line_content": "",
          "new_line_content": "                    pes->total_size = AV_RB16(pes->header + 4);",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            break;",
          "new_line_content": "        language[2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "old_line_content": "",
          "new_line_content": "        ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": null,
          "new_api": "handle_packet",
          "old_text": null,
          "new_text": "handle_packet(ts, data)",
          "old_line_content": "    const int size= p->buf_size;",
          "new_line_content": "        ret = handle_packet(ts, data);",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tss->section_buf + tss->section_index, buf, len)",
          "old_line_content": "",
          "new_line_content": "        memcpy(tss->section_buf + tss->section_index, buf, len);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "    int score, fec_score, dvhs_score;",
          "new_line_content": "        finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "    if (check_count < CHECK_COUNT)",
          "new_line_content": "    ts->last_pos = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "                        }",
          "new_line_content": "                        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(st->codec->extradata, *pp, 4)",
          "old_line_content": "        break;",
          "new_line_content": "            if (st->codec->extradata_size == 4 && memcmp(st->codec->extradata, *pp, 4))",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(fc, \"DVB sub with multiple IDs\")",
          "old_line_content": "    case 0x0a: /* ISO 639 language descriptor */",
          "new_line_content": "                avpriv_request_sample(fc, \"DVB sub with multiple IDs\");",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",\n                                    pes->pid, pes->stream_type)",
          "old_line_content": "                skip:",
          "new_line_content": "                            av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_32_IEEE)",
          "old_line_content": "    MpegTSFilter *filter;",
          "new_line_content": "            av_crc(av_crc_get_table(AV_CRC_32_IEEE), -1,",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(st->codec->extradata, *pp, 4)",
          "old_line_content": "            language[i + 3] = ',';",
          "new_line_content": "                memcpy(st->codec->extradata, *pp, 4);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "section_cb",
          "old_text": null,
          "new_text": "tss->section_cb(tss1, tss->section_buf, tss->section_h_size)",
          "old_line_content": "",
          "new_line_content": "            tss->section_cb(tss1, tss->section_buf, tss->section_h_size);",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(p->buf, TS_PACKET_SIZE     *check_count, TS_PACKET_SIZE     , NULL)",
          "old_line_content": "}",
          "new_line_content": "    score     = analyze(p->buf, TS_PACKET_SIZE     *check_count, TS_PACKET_SIZE     , NULL)*CHECK_COUNT/check_count;",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "            case 0x03: st->disposition |= AV_DISPOSITION_VISUAL_IMPAIRED; break;",
          "new_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(p->buf, TS_DVHS_PACKET_SIZE*check_count, TS_DVHS_PACKET_SIZE, NULL)",
          "old_line_content": "",
          "new_line_content": "    dvhs_score= analyze(p->buf, TS_DVHS_PACKET_SIZE*check_count, TS_DVHS_PACKET_SIZE, NULL)*CHECK_COUNT/check_count;",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(p->buf, TS_FEC_PACKET_SIZE *check_count, TS_FEC_PACKET_SIZE , NULL)",
          "old_line_content": "/* return the 90kHz PCR and the extension for the 27MHz PCR. return",
          "new_line_content": "    fec_score = analyze(p->buf, TS_FEC_PACKET_SIZE *check_count, TS_FEC_PACKET_SIZE , NULL)*CHECK_COUNT/check_count;",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "old_line_content": "   (-1) if not available */",
          "new_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            language[i - 1] = 0;",
          "new_line_content": "            language[i + 0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        }",
          "new_line_content": "            language[i + 2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "    case 0x05: /* registration descriptor */",
          "new_line_content": "        switch (get8(pp, desc_end)) {",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid)",
          "old_line_content": "    filter->last_cc = -1;",
          "new_line_content": "    av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid);",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "    }",
          "new_line_content": "            av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "            if (len < 0)",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "bytestream_get_le32",
          "old_text": null,
          "new_text": "bytestream_get_le32(pp)",
          "old_line_content": "",
          "new_line_content": "        st->codec->codec_tag = bytestream_get_le32(pp);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag)",
          "old_line_content": "static void pmt_cb(MpegTSFilter *filter, const uint8_t *section, int section_len)",
          "new_line_content": "        av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag);",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "mpegts_find_stream_type",
          "old_text": null,
          "new_text": "mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types)",
          "old_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "new_line_content": "            mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(MAX_SECTION_SIZE)",
          "old_line_content": "                                     void *opaque)",
          "new_line_content": "    sec->section_buf = av_malloc(MAX_SECTION_SIZE);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(filter)",
          "old_line_content": "    MpegTSPESFilter *pes;",
          "new_line_content": "        av_free(filter);",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(p)",
          "old_line_content": "    int len;",
          "new_line_content": "    v = AV_RB32(p);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "                pes->dts = AV_NOPTS_VALUE;",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MpegTSFilter))",
          "old_line_content": "    return filter;",
          "new_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "        /* normal demux */",
          "new_line_content": "    pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"PMT: len %i\\n\", section_len)",
          "old_line_content": "    if (h->tid != PMT_TID)",
          "new_line_content": "    av_dlog(ts->stream, \"PMT: len %i\\n\", section_len);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                    /* Skip PES private data, program packet sequence counter and P-STD buffer */",
          "new_line_content": "                    pes->dts = pes->pts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "hex_dump_debug",
          "old_text": null,
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "        return;",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, buf, sizeof(buf))",
          "old_line_content": "",
          "new_line_content": "    len = avio_read(pb, buf, sizeof(buf));",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                    r += skip;",
          "new_line_content": "                    pes->pts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "    if (pcr_pid < 0)",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                        (r + 2) <= (pes->header + pes->pes_header_size)) {",
          "new_line_content": "                    pes->dts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "        if (avio_seek(pb, pos, SEEK_SET) < 0 && pb->seekable)",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "clear_program",
          "old_text": null,
          "new_text": "clear_program(ts, h->id)",
          "old_line_content": "        return;",
          "new_line_content": "    clear_program(ts, h->id);",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "    program_info_length &= 0xfff;",
          "new_line_content": "    pcr_pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "old_line_content": "        s->ctx_flags |= AVFMTCTX_NOHEADER;",
          "new_line_content": "        mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "old_line_content": "        AVStream *st;",
          "new_line_content": "        mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "av_buffer_unref",
          "old_text": null,
          "new_text": "av_buffer_unref(&pes->buffer)",
          "old_line_content": "",
          "new_line_content": "        av_buffer_unref(&pes->buffer);",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": null,
          "new_api": "handle_packets",
          "old_text": null,
          "new_text": "handle_packets(ts, s->probesize / ts->raw_packet_size)",
          "old_line_content": "        int64_t pcrs[2], pcr_h;",
          "new_line_content": "        handle_packets(ts, s->probesize / ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&filter->u.pes_filter.opaque)",
          "old_line_content": "    int x=0;",
          "new_line_content": "            av_freep(&filter->u.pes_filter.opaque);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if(len > program_info_length - 2)",
          "new_line_content": "    program_info_length = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"tuning done\\n\")",
          "old_line_content": "        /* only read packets */",
          "new_line_content": "        av_dlog(ts->stream, \"tuning done\\n\");",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(filter)",
          "old_line_content": "",
          "new_line_content": "    av_free(filter);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "read_sl_header",
          "old_text": null,
          "new_text": "read_sl_header(pes, &pes->sl, p, buf_size)",
          "old_line_content": "                    pes->total_size = MAX_PES_PAYLOAD;",
          "new_line_content": "                    int sl_header_bytes = read_sl_header(pes, &pes->sl, p, buf_size);",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "            len -= 2;",
          "new_line_content": "        len = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"program tag: 0x%02x len=%d\\n\", tag, len)",
          "old_line_content": "                          &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "new_line_content": "        av_dlog(ts->stream, \"program tag: 0x%02x len=%d\\n\", tag, len);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(stat, 0, packet_size*sizeof(int))",
          "old_line_content": "        x++;",
          "new_line_content": "    memset(stat, 0, packet_size*sizeof(int));",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(s, NULL)",
          "old_line_content": "        for(;;) {",
          "new_line_content": "        st = avformat_new_stream(s, NULL);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    p += program_info_length;",
          "new_line_content": "            get8(&p, p_end); // scope",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "av_buffer_alloc",
          "old_text": null,
          "new_text": "av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "            }",
          "new_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    if (p >= p_end)",
          "new_line_content": "            get8(&p, p_end); // label",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            /* emit complete packets with known packet size",
          "new_line_content": "                        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "mp4_read_iods",
          "old_text": null,
          "new_text": "mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,\n                          &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "old_line_content": "",
          "new_line_content": "            mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 60, 1, 27000000)",
          "old_line_content": "                return -1;",
          "new_line_content": "        avpriv_set_pts_info(st, 60, 1, 27000000);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "bytestream_get_le32",
          "old_text": null,
          "new_text": "bytestream_get_le32(&p)",
          "old_line_content": "        ts->stop_parse = 1;",
          "new_line_content": "            prog_reg_desc = bytestream_get_le32(&p);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->buffer->data + pes->data_index, p, buf_size)",
          "old_line_content": "                ts->stop_parse = 1;",
          "new_line_content": "                memcpy(pes->buffer->data + pes->data_index, p, buf_size);",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "old_line_content": "                if (nb_pcrs >= 2)",
          "new_line_content": "            ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&pcr_h, &pcr_l, data)",
          "old_line_content": "            nb_packets++;",
          "new_line_content": "                parse_pcr(&pcr_h, &pcr_l, data) == 0) {",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "        }",
          "new_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "",
          "new_line_content": "                new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "            if (!pes->st) {",
          "new_line_content": "        stream_type = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_PACKET_SIZE, NULL)",
          "old_line_content": "",
          "new_line_content": "    score    = analyze(buf, size, TS_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL)",
          "old_line_content": "typedef struct SectionHeader {",
          "new_line_content": "    dvhs_score    = analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_FEC_PACKET_SIZE, NULL)",
          "old_line_content": "    uint8_t tid;",
          "new_line_content": "    fec_score= analyze(buf, size, TS_FEC_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "old_line_content": "    uint16_t id;",
          "new_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            }",
          "new_line_content": "        pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "        st->start_time = ts->cur_pcr;",
          "new_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "        } else {",
          "new_line_content": "                pes->st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",\n                st->start_time / 1000000.0, pcrs[0] / 27e6, ts->pcr_incr)",
          "old_line_content": "",
          "new_line_content": "        av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(PESContext))",
          "old_line_content": "    if (!tss) {",
          "new_line_content": "    pes = av_mallocz(sizeof(PESContext));",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "add_pes_stream",
          "old_text": null,
          "new_text": "add_pes_stream(ts, pid, pcr_pid)",
          "old_line_content": "                st->id = pid;",
          "new_line_content": "            pes = add_pes_stream(ts, pid, pcr_pid);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "            }",
          "new_line_content": "                st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, pos, SEEK_SET)",
          "old_line_content": "    MpegTSContext *ts = s->priv_data;",
          "new_line_content": "    avio_seek(pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "ff_find_stream_index",
          "old_text": null,
          "new_text": "ff_find_stream_index(ts->stream, pid)",
          "old_line_content": "            goto out;",
          "new_line_content": "            int idx = ff_find_stream_index(ts->stream, pid);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "mpegts_open_pes_filter",
          "old_text": null,
          "new_text": "mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes)",
          "old_line_content": "    AVIOContext pb;",
          "new_line_content": "    tss = mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(ts->stream, NULL)",
          "old_line_content": "",
          "new_line_content": "                st = avformat_new_stream(ts->stream, NULL);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(pes)",
          "old_line_content": "    Mp4Descr *active_descr;",
          "new_line_content": "        av_free(pes);",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": null,
          "new_api": "av_new_packet",
          "old_text": null,
          "new_text": "av_new_packet(pkt, TS_PACKET_SIZE)",
          "old_line_content": "    if (ts->mpeg2ts_compute_pcr) {",
          "new_line_content": "    if (av_new_packet(pkt, TS_PACKET_SIZE) < 0)",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "mpegts_set_stream_info",
          "old_text": null,
          "new_text": "mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc)",
          "old_line_content": "        if (desc_list_end > p_end)",
          "new_line_content": "            mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc);",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        /* compute exact PCR for each packet */",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "add_pid_to_pmt",
          "old_text": null,
          "new_text": "add_pid_to_pmt(ts, h->id, pid)",
          "old_line_content": "        for(;;) {",
          "new_line_content": "        add_pid_to_pmt(ts, h->id, pid);",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, pkt->data, ts->raw_packet_size, &data)",
          "old_line_content": "            /* we read the next PCR (XXX: optimize it by using a bigger buffer */",
          "new_line_content": "    ret = read_packet(s, pkt->data, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "ff_program_add_stream_index",
          "old_text": null,
          "new_text": "ff_program_add_stream_index(ts->stream, h->id, st->index)",
          "old_line_content": "                mp4_descr, mp4_descr_count, pid, ts) < 0)",
          "new_line_content": "        ff_program_add_stream_index(ts->stream, h->id, st->index);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(p)",
          "old_line_content": "    char *str;",
          "new_line_content": "    c = AV_RB16(p);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "",
          "new_line_content": "        desc_list_len = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "av_free_packet",
          "old_text": null,
          "new_text": "av_free_packet(pkt)",
          "old_line_content": "            for(i = 0; i < MAX_PACKET_READAHEAD; i++) {",
          "new_line_content": "        av_free_packet(pkt);",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pkt->data, data, ts->raw_packet_size)",
          "old_line_content": "                    /* XXX: not precise enough */",
          "new_line_content": "        memcpy(pkt->data, data, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "                    ts->pcr_incr = ((next_pcr_h - pcr_h) * 300 + (next_pcr_l - pcr_l)) /",
          "new_line_content": "    finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&pcr_h, &pcr_l, pkt->data)",
          "old_line_content": "                }",
          "new_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, pkt->data) == 0) {",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "ff_parse_mpeg2_descriptor",
          "old_text": null,
          "new_text": "ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,\n                mp4_descr, mp4_descr_count, pid, ts)",
          "old_line_content": "",
          "new_line_content": "            if (ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET)",
          "old_line_content": "            ts->cur_pcr = pcr_h * 300 + pcr_l;",
          "new_line_content": "                avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "ffio_init_context",
          "old_text": null,
          "new_text": "ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,\n                          NULL, NULL, NULL, NULL)",
          "old_line_content": "    return 0;",
          "new_line_content": "    if ((ret = ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"HDMV\")",
          "old_line_content": "}",
          "new_line_content": "            if (pes && prog_reg_desc == AV_RL32(\"HDMV\") && stream_type == 0x83 && pes->sub_st) {",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    *pp = p;",
          "new_line_content": "    len = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": null,
          "new_api": "ff_program_add_stream_index",
          "old_text": null,
          "new_text": "ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index)",
          "old_line_content": "",
          "new_line_content": "                ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index);",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, pcr_buf, 12)",
          "old_line_content": "        }",
          "new_line_content": "                avio_read(s->pb, pcr_buf, 12);",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf)",
          "old_line_content": "        pkt->pts = ts->cur_pcr;",
          "new_line_content": "                if (parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf) == 0) {",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len + 1)",
          "old_line_content": "                                const uint8_t **pp, const uint8_t *p_end)",
          "new_line_content": "    str = av_malloc(len + 1);",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(str, p, len)",
          "old_line_content": "",
          "new_line_content": "    memcpy(str, p, len);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"PAT:\\n\")",
          "old_line_content": "    for(;;) {",
          "new_line_content": "    av_dlog(ts->stream, \"PAT:\\n\");",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "        return -1;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "        if (pmt_pid < 0)",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, p_end)",
          "old_line_content": "    h->sec_num = val;",
          "new_line_content": "    val = get16(pp, p_end);",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "handle_packets",
          "old_text": null,
          "new_text": "handle_packets(ts, 0)",
          "old_line_content": "                }",
          "new_line_content": "    ret = handle_packets(ts, 0);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "    h->last_sec_num = val;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            /* NIT info */",
          "new_line_content": "        sid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "typedef struct {",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1537,
          "old_api": "mpegts_close_filter",
          "new_api": null,
          "old_text": "mpegts_close_filter(ts, ts->pids[pmt_pid])",
          "new_text": null,
          "old_line_content": "                mpegts_close_filter(ts, ts->pids[pmt_pid]);",
          "new_line_content": "        if (pmt_pid < 0)",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "            mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "add_pat_entry",
          "new_api": null,
          "old_text": "add_pat_entry(ts, sid)",
          "new_text": null,
          "old_line_content": "            add_pat_entry(ts, sid);",
          "new_line_content": "        pmt_pid &= 0x1fff;",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "add_pid_to_pmt",
          "new_api": null,
          "old_text": "add_pid_to_pmt(ts, sid, 0)",
          "new_text": null,
          "old_line_content": "            add_pid_to_pmt(ts, sid, 0); //add pat pid to program",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": "clear_programs",
          "new_api": null,
          "old_text": "clear_programs(ts)",
          "new_text": null,
          "old_line_content": "    clear_programs(ts);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": "mpegts_free",
          "new_api": null,
          "old_text": "mpegts_free(ts)",
          "new_text": null,
          "old_line_content": "    mpegts_free(ts);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid)",
          "new_text": null,
          "old_line_content": "        av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"SDT:\\n\")",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"SDT:\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "hex_dump_debug",
          "new_api": null,
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": null,
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "parse_mp4_descr",
          "new_api": null,
          "old_text": "parse_mp4_descr(d, off, len, MP4DecConfigDescrTag)",
          "new_text": null,
          "old_line_content": "    parse_mp4_descr(d, off, len, MP4DecConfigDescrTag);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "static int parse_MP4ESDescrTag(MP4DescrParseContext *d, int64_t off, int len)",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "parse_mp4_descr",
          "new_api": null,
          "old_text": "parse_mp4_descr(d, off, len, MP4SLDescrTag)",
          "new_text": null,
          "old_line_content": "        parse_mp4_descr(d, off, len, MP4SLDescrTag);",
          "new_line_content": "    int es_id = 0;",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    onid = get16(&p, p_end);",
          "new_line_content": "    char *name, *provider_name;",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "static int64_t mpegts_get_pcr(AVFormatContext *s, int stream_index,",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "new_text": null,
          "old_line_content": "            if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "new_line_content": "                              int64_t *ppos, int64_t pos_limit)",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf + 1)",
          "new_text": null,
          "old_line_content": "            if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "new_line_content": "    MpegTSContext *ts = s->priv_data;",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "new_text": null,
          "old_line_content": "                parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "new_line_content": "    int64_t pos, timestamp;",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(len)",
          "new_text": null,
          "old_line_content": "    d->active_descr->dec_config_descr = av_malloc(len);",
          "new_line_content": "    if (len > 0)",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    d->active_descr = NULL;",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "        val = get8(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(&d->pb, descr->dec_config_descr, len)",
          "new_text": null,
          "old_line_content": "    avio_read(&d->pb, descr->dec_config_descr, len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('d','r','a','c')",
          "new_text": null,
          "old_line_content": "    { MKTAG('d','r','a','c'), AVMEDIA_TYPE_VIDEO, AV_CODEC_ID_DIRAC },",
          "new_line_content": "    { 0 },",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('A','C','-','3')",
          "new_text": null,
          "old_line_content": "    { MKTAG('A','C','-','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('B','S','S','D')",
          "new_text": null,
          "old_line_content": "    { MKTAG('B','S','S','D'), AVMEDIA_TYPE_AUDIO, AV_CODEC_ID_S302M },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','1')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','1'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "/* ATSC ? */",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','2')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','2'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "static const StreamType MISC_types[] = {",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','3')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "    { 0x81, AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('V','C','-','1')",
          "new_text": null,
          "old_line_content": "    { MKTAG('V','C','-','1'), AVMEDIA_TYPE_VIDEO,   AV_CODEC_ID_VC1 },",
          "new_line_content": "    { 0x8a, AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf + 1)",
          "new_text": null,
          "old_line_content": "            if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "new_text": null,
          "old_line_content": "                parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "new_line_content": "            pos += ts->raw_packet_size;",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        desc_list_len = get16(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        int flags = avio_r8(&d->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",\n                   desc_tag, desc_len)",
          "new_text": null,
          "old_line_content": "            av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",",
          "new_line_content": "        if (desc_list_end > p_end)",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.timestamp_res      = avio_rb32(&d->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "                service_type = get8(&p, p_end);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.timestamp_len      = avio_r8(&d->pb);",
          "new_line_content": "    if (!predefined) {",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": "ff_seek_frame_binary",
          "new_api": null,
          "old_text": "ff_seek_frame_binary(s, stream_index, target_ts, flags)",
          "new_text": null,
          "old_line_content": "    if (ff_seek_frame_binary(s, stream_index, target_ts, flags) < 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.ocr_len            = avio_r8(&d->pb);",
          "new_line_content": "        int lengths;",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.inst_bitrate_len   = avio_r8(&d->pb);",
          "new_line_content": "        descr->sl.use_au_start       = !!(flags & 0x80);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    pos= avio_tell(s->pb);",
          "new_line_content": "    return timestamp;",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(&d->pb)",
          "new_text": null,
          "old_line_content": "        lengths                      = avio_rb16(&d->pb);",
          "new_line_content": "        descr->sl.use_au_end         = !!(flags & 0x40);",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "getstr8",
          "new_api": null,
          "old_text": "getstr8(&p, p_end)",
          "new_text": null,
          "old_line_content": "                provider_name = getstr8(&p, p_end);",
          "new_line_content": "            if (desc_end > desc_list_end)",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "        avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "static int read_seek(AVFormatContext *s, int stream_index, int64_t target_ts, int flags){",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "new_text": null,
          "old_line_content": "        if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "new_line_content": "    MpegTSContext *ts = s->priv_data;",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "av_new_program",
          "new_api": null,
          "old_text": "av_new_program(ts->stream, sid)",
          "new_text": null,
          "old_line_content": "                    AVProgram *program = av_new_program(ts->stream, sid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&program->metadata, \"service_name\", name, 0)",
          "new_text": null,
          "old_line_content": "                        av_dict_set(&program->metadata, \"service_name\", name, 0);",
          "new_line_content": "            case 0x48:",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 33, 1, 90000)",
          "new_text": null,
          "old_line_content": "    avpriv_set_pts_info(st, 33, 1, 90000);",
          "new_line_content": "        if (stream_type == types->stream_type) {",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(provider_name)",
          "new_text": null,
          "old_line_content": "                av_free(provider_name);",
          "new_line_content": "                if (!provider_name)",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "ff_mp4_read_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_descr(d->s, &d->pb, &tag)",
          "new_text": null,
          "old_line_content": "    int len1 = ff_mp4_read_descr(d->s, &d->pb, &tag);",
          "new_line_content": "        descr->sl.au_seq_num_len     = (lengths >> 7) & 0x1f;",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "        descr->sl.packet_seq_num_len = (lengths >> 2) & 0x1f;",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(pes->stream, AV_LOG_DEBUG,\n           \"stream=%d stream_type=%x pid=%x prog_reg_desc=%.4s\\n\",\n           st->index, pes->stream_type, pes->pid, (char*)&prog_reg_desc)",
          "new_text": null,
          "old_line_content": "    av_log(pes->stream, AV_LOG_DEBUG,",
          "new_line_content": "static int mpegts_set_stream_info(AVStream *st, PESContext *pes,",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\");",
          "new_line_content": "static int parse_mp4_descr(MP4DescrParseContext *d, int64_t off, int len,",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSContext))",
          "new_text": null,
          "old_line_content": "    ts = av_mallocz(sizeof(MpegTSContext));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, ISO_types)",
          "new_text": null,
          "old_line_content": "    mpegts_find_stream_type(st, pes->stream_type, ISO_types);",
          "new_line_content": "    st->codec->codec_id   = AV_CODEC_ID_NONE;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"HDMV\")",
          "new_text": null,
          "old_line_content": "    if (prog_reg_desc == AV_RL32(\"HDMV\") &&",
          "new_line_content": "    st->need_parsing = AVSTREAM_PARSE_FULL;",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, HDMV_types)",
          "new_text": null,
          "old_line_content": "        mpegts_find_stream_type(st, pes->stream_type, HDMV_types);",
          "new_line_content": "    pes->stream_type = stream_type;",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag)",
          "new_text": null,
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag);",
          "new_line_content": "    if (len < 0 || len1 > len || len1 <= 0) {",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(packet + 1)",
          "new_text": null,
          "old_line_content": "    pid = AV_RB16(packet + 1) & 0x1fff;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(sizeof(*sub_pes))",
          "new_text": null,
          "old_line_content": "            PESContext *sub_pes = av_malloc(sizeof(*sub_pes));",
          "new_line_content": "    st->codec->codec_tag = pes->stream_type;",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "discard_pid",
          "new_api": null,
          "old_text": "discard_pid(ts, pid)",
          "new_text": null,
          "old_line_content": "    if(pid && discard_pid(ts, pid))",
          "new_line_content": "/* handle one TS packet */",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "parse_MP4ODescrTag",
          "new_api": null,
          "old_text": "parse_MP4ODescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4ODescrTag(d, off, len1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "add_pes_stream",
          "new_api": null,
          "old_text": "add_pes_stream(ts, pid, -1)",
          "new_text": null,
          "old_line_content": "        add_pes_stream(ts, pid, -1);",
          "new_line_content": "    int len, pid, cc, expected_cc, cc_ok, afc, is_start, is_discontinuity,",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "parse_MP4ESDescrTag",
          "new_api": null,
          "old_text": "parse_MP4ESDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4ESDescrTag(d, off, len1);",
          "new_line_content": "        goto done;",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(sub_pes)",
          "new_text": null,
          "old_line_content": "                av_free(sub_pes);",
          "new_line_content": "            // HDMV TrueHD streams also contain an AC3 coded version of the",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "            // audio track - add a second stream for this",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "parse_MP4DecConfigDescrTag",
          "new_api": null,
          "old_text": "parse_MP4DecConfigDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4DecConfigDescrTag(d, off, len1);",
          "new_line_content": "    switch (tag) {",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(sub_st, 33, 1, 90000)",
          "new_text": null,
          "old_line_content": "            avpriv_set_pts_info(sub_st, 33, 1, 90000);",
          "new_line_content": "            if (!sub_pes)",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "parse_MP4SLDescrTag",
          "new_api": null,
          "old_text": "parse_MP4SLDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4SLDescrTag(d, off, len1);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(&d->pb, off + len1, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(&d->pb, off + len1, SEEK_SET);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "handle_packet",
          "new_api": null,
          "old_text": "handle_packet(ts, buf)",
          "new_text": null,
          "old_line_content": "            handle_packet(ts, buf);",
          "new_line_content": "    ts->pkt = pkt;",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, MISC_types)",
          "new_text": null,
          "old_line_content": "        mpegts_find_stream_type(st, pes->stream_type, MISC_types);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "init_MP4DescrParseContext",
          "new_api": null,
          "old_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "new_text": null,
          "old_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "av_init_packet",
          "new_api": null,
          "old_text": "av_init_packet(pkt)",
          "new_text": null,
          "old_line_content": "    av_init_packet(pkt);",
          "new_line_content": "            sub_pes->sub_st = pes->sub_st = sub_st;",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": "mpegts_free",
          "new_api": null,
          "old_text": "mpegts_free(ts)",
          "new_text": null,
          "old_line_content": "    mpegts_free(ts);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ts->stream, AV_LOG_WARNING,\n               \"Continuity check failed for pid %d expected %d got %d\\n\",\n               pid, expected_cc, cc)",
          "new_text": null,
          "old_line_content": "        av_log(ts->stream, AV_LOG_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\"),",
          "new_line_content": "    return len1 - len;",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "init_MP4DescrParseContext",
          "new_api": null,
          "old_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "new_text": null,
          "old_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(&d.pb)",
          "new_text": null,
          "old_line_content": "    parse_mp4_descr_arr(&d, avio_tell(&d.pb), size);",
          "new_line_content": "    *descr_count = d.descr_count;",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\"),",
          "new_line_content": "    .read_probe     = mpegts_probe,",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(ts->stream->pb)",
          "new_text": null,
          "old_line_content": "    pos = avio_tell(ts->stream->pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(&h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(&h, &p, p_end) < 0)",
          "new_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "mp4_read_od",
          "new_api": null,
          "old_text": "mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "new_text": null,
          "old_line_content": "    mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "new_line_content": "    int mp4_descr_count = 0;",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&gb, buf, buf_size*8)",
          "new_text": null,
          "old_line_content": "    init_get_bits(&gb, buf, buf_size*8);",
          "new_line_content": "    pes->data_index = 0;",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        au_start_flag = get_bits1(&gb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "write_section_data",
          "new_api": null,
          "old_text": "write_section_data(s, tss,\n                                   p, p_end - p, 1)",
          "new_text": null,
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        au_end_flag = get_bits1(&gb);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "write_section_data",
          "new_api": null,
          "old_text": "write_section_data(s, tss,\n                                   p, p_end - p, 0)",
          "new_text": null,
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "                /* check whether filter has been closed */",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        ocr_flag = get_bits1(&gb);",
          "new_line_content": "    int dts_flag = -1, cts_flag = -1;",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        padding_flag = get_bits1(&gb);",
          "new_line_content": "    if (sl->use_au_start)",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&gb, 3)",
          "new_text": null,
          "old_line_content": "        padding_bits = get_bits(&gb, 3);",
          "new_line_content": "    if (sl->use_au_end)",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "pes_cb",
          "new_api": null,
          "old_text": "tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,\n                                            pos - ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        if ((ret = tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,",
          "new_line_content": "                                   p, p_end - p, 1);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->packet_seq_num_len)",
          "new_text": null,
          "old_line_content": "            skip_bits_long(&gb, sl->packet_seq_num_len);",
          "new_line_content": "    if (sl->ocr_len > 0)",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "            if (get_bits1(&gb))",
          "new_line_content": "    if (sl->use_idle)",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(s, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(s, st, &pb);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "                get_bits1(&gb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->au_seq_num_len)",
          "new_text": null,
          "old_line_content": "                skip_bits_long(&gb, sl->au_seq_num_len);",
          "new_line_content": "        if (sl->packet_seq_num_len)",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "                dts_flag = get_bits1(&gb);",
          "new_line_content": "        if (sl->degr_prior_len)",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "        c = avio_r8(pb);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, -1, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, -1, SEEK_CUR);",
          "new_line_content": "   get_packet_size() ?) */",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "            inst_bitrate_flag = get_bits1(&gb);",
          "new_line_content": "        if (au_start_flag) {",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\");",
          "new_line_content": "    int c, i;",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mp4_descr[i].dec_config_descr)",
          "new_text": null,
          "old_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "new_line_content": "            if (st->codec->codec_id <= AV_CODEC_ID_NONE) {",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->inst_bitrate_len)",
          "new_text": null,
          "old_line_content": "            skip_bits_long(&gb, sl->inst_bitrate_len);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "ffio_read_indirect",
          "new_api": null,
          "old_text": "ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data)",
          "new_text": null,
          "old_line_content": "        len = ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data);",
          "new_line_content": "    /* no sync found */",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_list_end)",
          "new_text": null,
          "old_line_content": "    desc_tag = get8(pp, desc_list_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_list_end)",
          "new_text": null,
          "old_line_content": "    desc_len = get8(pp, desc_list_end);",
          "new_line_content": "                              Mp4Descr *mp4_descr, int mp4_descr_count, int pid,",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "mpegts_resync",
          "new_api": null,
          "old_text": "mpegts_resync(s)",
          "new_text": null,
          "old_line_content": "            if (mpegts_resync(s) < 0)",
          "new_line_content": "    AVIOContext *pb = s->pb;",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "                return AVERROR(EAGAIN);",
          "new_line_content": "    int len;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len)",
          "new_text": null,
          "old_line_content": "    av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "            new_pes_packet(pes, ts->pkt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        desc_es_id = get16(pp, desc_end);",
          "new_line_content": "    if (desc_end > desc_list_end)",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, skip)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, skip);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "new_line_content": "    switch(desc_tag) {",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    if (avio_tell(s->pb) != ts->last_pos) {",
          "new_line_content": "    if (skip > 0)",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"Skipping after seek\\n\")",
          "new_text": null,
          "old_line_content": "        av_dlog(ts->stream, \"Skipping after seek\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "        pes->state = MPEGTS_HEADER;",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "                mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1);",
          "new_line_content": "        for (i = 0; i < mp4_descr_count; i++)",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&pes->buffer)",
          "new_text": null,
          "old_line_content": "                   av_buffer_unref(&pes->buffer);",
          "new_line_content": "    uint8_t *data;",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "ffio_init_context",
          "new_api": null,
          "old_text": "ffio_init_context(&pb, mp4_descr->dec_config_descr,\n                          mp4_descr->dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "            ffio_init_context(&pb, mp4_descr->dec_config_descr,",
          "new_line_content": "                st->codec->extradata_size > 0)",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "new_line_content": "            if (st->codec->codec_id == AV_CODEC_ID_MPEG4SYSTEMS)",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[0] = get8(pp, desc_end);",
          "new_line_content": "            mp4_descr->dec_config_descr_len && mp4_descr->es_id == pid) {",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[1] = get8(pp, desc_end);",
          "new_line_content": "            AVIOContext pb;",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(ts->stream, NULL)",
          "new_text": null,
          "old_line_content": "                        pes->st = avformat_new_stream(ts->stream, NULL);",
          "new_line_content": "                    /* it must be an mpeg2 PES stream */",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tss->section_buf, buf, buf_size)",
          "new_text": null,
          "old_line_content": "        memcpy(tss->section_buf, buf, buf_size);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "read_packet",
          "new_api": null,
          "old_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "new_text": null,
          "old_line_content": "        ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "mpegts_set_stream_info",
          "new_api": null,
          "old_text": "mpegts_set_stream_info(pes->st, pes, 0, 0)",
          "new_text": null,
          "old_line_content": "                        mpegts_set_stream_info(pes->st, pes, 0, 0);",
          "new_line_content": "                    if ((pes->st && pes->st->discard == AVDISCARD_ALL &&",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[0] = get8(pp, desc_end);",
          "new_line_content": "                st->need_parsing = 0;",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[1] = get8(pp, desc_end);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(pes->header + 4)",
          "new_text": null,
          "old_line_content": "                    pes->total_size = AV_RB16(pes->header + 4);",
          "new_line_content": "                        goto skip;",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[2] = get8(pp, desc_end);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "handle_packet",
          "new_api": null,
          "old_text": "handle_packet(ts, data)",
          "new_text": null,
          "old_line_content": "        ret = handle_packet(ts, data);",
          "new_line_content": "    packet_num = 0;",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tss->section_buf + tss->section_index, buf, len)",
          "new_text": null,
          "old_line_content": "        memcpy(tss->section_buf + tss->section_index, buf, len);",
          "new_line_content": "    if (is_start) {",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    ts->last_pos = avio_tell(s->pb);",
          "new_line_content": "        packet_num++;",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "av_buffer_alloc",
          "new_api": null,
          "old_text": "av_buffer_alloc(pes->total_size +\n                                                  FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size +",
          "new_line_content": "                        pes->st->id = pes->pid;",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(tss->section_buf + 1)",
          "new_text": null,
          "old_line_content": "        len = (AV_RB16(tss->section_buf + 1) & 0xfff) + 3;",
          "new_line_content": "        if (tss->end_of_section_reached)",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(fc, \"DVB sub with multiple IDs\")",
          "new_text": null,
          "old_line_content": "                avpriv_request_sample(fc, \"DVB sub with multiple IDs\");",
          "new_line_content": "        case 0x20: /* DVB subtitles (for the hard of hearing) with no monitor aspect ratio criticality */",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "            st->codec->extradata = av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "        case 0x22: /* DVB subtitles (for the hard of hearing) for display on 16:9 aspect ratio monitor */",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf, TS_PACKET_SIZE     *check_count, TS_PACKET_SIZE     , NULL)",
          "new_text": null,
          "old_line_content": "    score     = analyze(p->buf, TS_PACKET_SIZE     *check_count, TS_PACKET_SIZE     , NULL)*CHECK_COUNT/check_count;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_32_IEEE)",
          "new_text": null,
          "old_line_content": "            av_crc(av_crc_get_table(AV_CRC_32_IEEE), -1,",
          "new_line_content": "    /* compute section length if possible */",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(st->codec->extradata, *pp, 4)",
          "new_text": null,
          "old_line_content": "                memcpy(st->codec->extradata, *pp, 4);",
          "new_line_content": "        case 0x25: /* DVB subtitles (for the hard of hearing) with plano-stereoscopic disparity for display on a high definition monitor */",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf, TS_DVHS_PACKET_SIZE*check_count, TS_DVHS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    dvhs_score= analyze(p->buf, TS_DVHS_PACKET_SIZE*check_count, TS_DVHS_PACKET_SIZE, NULL)*CHECK_COUNT/check_count;",
          "new_line_content": "static int mpegts_probe(AVProbeData *p)",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf, TS_FEC_PACKET_SIZE *check_count, TS_FEC_PACKET_SIZE , NULL)",
          "new_text": null,
          "old_line_content": "    fec_score = analyze(p->buf, TS_FEC_PACKET_SIZE *check_count, TS_FEC_PACKET_SIZE , NULL)*CHECK_COUNT/check_count;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": null,
          "old_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "        if (st->codec->extradata) {",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "new_text": null,
          "old_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "new_line_content": "    const int size= p->buf_size;",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "            language[i + 1] = get8(pp, desc_end);",
          "new_line_content": "            if (st->codec->extradata) {",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "            language[i + 2] = get8(pp, desc_end);",
          "new_line_content": "                st->codec->extradata_size = 4;",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        switch (get8(pp, desc_end)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSFilter))",
          "new_text": null,
          "old_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "new_line_content": "                                         SectionCallback *section_cb, void *opaque,",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "bytestream_get_le32",
          "new_api": null,
          "old_text": "bytestream_get_le32(pp)",
          "new_text": null,
          "old_line_content": "        st->codec->codec_tag = bytestream_get_le32(pp);",
          "new_line_content": "            case 0x01: st->disposition |= AV_DISPOSITION_CLEAN_EFFECTS; break;",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag)",
          "new_text": null,
          "old_line_content": "        av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag);",
          "new_line_content": "            case 0x02: st->disposition |= AV_DISPOSITION_HEARING_IMPAIRED; break;",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types)",
          "new_text": null,
          "old_line_content": "            mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(filter)",
          "new_text": null,
          "old_line_content": "        av_free(filter);",
          "new_line_content": "    ts->pids[pid] = filter;",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "AV_RB32",
          "new_api": null,
          "old_text": "AV_RB32(p)",
          "new_text": null,
          "old_line_content": "    v = AV_RB32(p);",
          "new_line_content": "    p = packet + 4;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "            if (pes->data_index == PES_HEADER_SIZE) {",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSFilter))",
          "new_text": null,
          "old_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "    pos = avio_tell(pb);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"PMT: len %i\\n\", section_len)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"PMT: len %i\\n\", section_len);",
          "new_line_content": "    PESContext *pes;",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->dts = pes->pts = ff_parse_pes_pts(r);",
          "new_line_content": "            p += len;",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "hex_dump_debug",
          "new_api": null,
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": null,
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "    AVStream *st;",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, buf, sizeof(buf))",
          "new_text": null,
          "old_line_content": "    len = avio_read(pb, buf, sizeof(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->pts = ff_parse_pes_pts(r);",
          "new_line_content": "                const uint8_t *r;",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "    uint32_t prog_reg_desc = 0; /* registration descriptor */",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->dts = ff_parse_pes_pts(r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "get_packet_size",
          "new_api": null,
          "old_text": "get_packet_size(buf, sizeof(buf))",
          "new_text": null,
          "old_line_content": "    ts->raw_packet_size = get_packet_size(buf, sizeof(buf));",
          "new_line_content": "    MpegTSContext *ts = s->priv_data;",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",\n           h->id, h->sec_num, h->last_sec_num)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",",
          "new_line_content": "    int mp4_descr_count = 0;",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "        if (avio_seek(pb, pos, SEEK_SET) < 0 && pb->seekable)",
          "new_line_content": "        goto fail;",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "clear_program",
          "new_api": null,
          "old_text": "clear_program(ts, h->id)",
          "new_text": null,
          "old_line_content": "    clear_program(ts, h->id);",
          "new_line_content": "    p_end = section + section_len - 4;",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    pcr_pid = get16(&p, p_end);",
          "new_line_content": "    p = section;",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&filter->u.section_filter.section_buf)",
          "new_text": null,
          "old_line_content": "        av_freep(&filter->u.section_filter.section_buf);",
          "new_line_content": "    pes->pes_cb = pes_cb;",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "        mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "new_line_content": "        goto fail;",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "        mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "new_line_content": "    ts->auto_guess = 0;",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&pes->buffer)",
          "new_text": null,
          "old_line_content": "        av_buffer_unref(&pes->buffer);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "handle_packets",
          "new_api": null,
          "old_text": "handle_packets(ts, s->probesize / ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        handle_packets(ts, s->probesize / ts->raw_packet_size);",
          "new_line_content": "    if (s->iformat == &ff_mpegts_demuxer) {",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"pcr_pid=0x%x\\n\", pcr_pid)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"pcr_pid=0x%x\\n\", pcr_pid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&filter->u.pes_filter.opaque)",
          "new_text": null,
          "old_line_content": "            av_freep(&filter->u.pes_filter.opaque);",
          "new_line_content": "    int pid;",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    program_info_length = get16(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "read_sl_header",
          "new_api": null,
          "old_text": "read_sl_header(pes, &pes->sl, p, buf_size)",
          "new_text": null,
          "old_line_content": "                    int sl_header_bytes = read_sl_header(pes, &pes->sl, p, buf_size);",
          "new_line_content": "                        (r + 2) <= (pes->header + pes->pes_header_size)) {",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "        tag = get8(&p, p_end);",
          "new_line_content": "    pcr_pid &= 0x1fff;",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(stat, 0, packet_size*sizeof(int))",
          "new_text": null,
          "old_line_content": "    memset(stat, 0, packet_size*sizeof(int));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "                    new_pes_packet(pes, ts->pkt);",
          "new_line_content": "                if (pes->stream_type == 0x12 && buf_size > 0) {",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "            get8(&p, p_end); // scope",
          "new_line_content": "        uint8_t tag, len;",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "av_buffer_alloc",
          "new_api": null,
          "old_text": "av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                    pes->pes_header_size += sl_header_bytes;",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(s, NULL)",
          "new_text": null,
          "old_line_content": "        st = avformat_new_stream(s, NULL);",
          "new_line_content": "        s->ctx_flags |= AVFMTCTX_NOHEADER;",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                        return AVERROR(ENOMEM);",
          "new_line_content": "                    buf_size -= sl_header_bytes;",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "mp4_read_iods",
          "new_api": null,
          "old_text": "mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,\n                          &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "new_text": null,
          "old_line_content": "            mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 60, 1, 27000000)",
          "new_text": null,
          "old_line_content": "        avpriv_set_pts_info(st, 60, 1, 27000000);",
          "new_line_content": "        int pcr_pid, pid, nb_packets, nb_pcrs, ret, pcr_l;",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "bytestream_get_le32",
          "new_api": null,
          "old_text": "bytestream_get_le32(&p)",
          "new_text": null,
          "old_line_content": "            prog_reg_desc = bytestream_get_le32(&p);",
          "new_line_content": "        if(len > program_info_length - 2)",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "read_packet",
          "new_api": null,
          "old_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "new_text": null,
          "old_line_content": "            ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "new_line_content": "        if (!st)",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(data + 1)",
          "new_text": null,
          "old_line_content": "            pid = AV_RB16(data + 1) & 0x1fff;",
          "new_line_content": "        st->codec->codec_type = AVMEDIA_TYPE_DATA;",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&pcr_h, &pcr_l, data)",
          "new_text": null,
          "old_line_content": "                parse_pcr(&pcr_h, &pcr_l, data) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "finished_reading_packet",
          "new_api": null,
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "        /* we iterate until we find two PCRs to estimate the bitrate */",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "                new_pes_packet(pes, ts->pkt);",
          "new_line_content": "                pes->data_index += buf_size;",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "        stream_type = get8(&p, p_end);",
          "new_line_content": "    p += program_info_length;",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    score    = analyze(buf, size, TS_PACKET_SIZE, NULL);",
          "new_line_content": "    return best_score;",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    dvhs_score    = analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_FEC_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    fec_score= analyze(buf, size, TS_FEC_PACKET_SIZE, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "new_text": null,
          "old_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "new_line_content": "/* autodetect fec presence. Must have at least 1024 bytes  */",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        pid = get16(&p, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": null,
          "old_line_content": "                pes->st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "        if (stream_type < 0)",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",\n                st->start_time / 1000000.0, pcrs[0] / 27e6, ts->pcr_incr)",
          "new_text": null,
          "old_line_content": "        av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "mpegts_close_filter",
          "new_api": null,
          "old_text": "mpegts_close_filter(ts, ts->pids[pid])",
          "new_text": null,
          "old_line_content": "            if (ts->pids[pid]) mpegts_close_filter(ts, ts->pids[pid]); //wrongly added sdt filter probably",
          "new_line_content": "        pid &= 0x1fff;",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(PESContext))",
          "new_text": null,
          "old_line_content": "    pes = av_mallocz(sizeof(PESContext));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "add_pes_stream",
          "new_api": null,
          "old_text": "add_pes_stream(ts, pid, pcr_pid)",
          "new_text": null,
          "old_line_content": "            pes = add_pes_stream(ts, pid, pcr_pid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": null,
          "old_line_content": "                st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "        if (ts->pids[pid] && ts->pids[pid]->type == MPEGTS_PES) {",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(pb, pos, SEEK_SET);",
          "new_line_content": "        /* NOTE1: the bitrate is computed without the FEC */",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "ff_find_stream_index",
          "new_api": null,
          "old_text": "ff_find_stream_index(ts->stream, pid)",
          "new_text": null,
          "old_line_content": "            int idx = ff_find_stream_index(ts->stream, pid);",
          "new_line_content": "                pes->st->id = pes->pid;",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "mpegts_open_pes_filter",
          "new_api": null,
          "old_text": "mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes)",
          "new_text": null,
          "old_line_content": "    tss = mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes);",
          "new_line_content": "    /* if no pid found, then add a pid context */",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(pes)",
          "new_text": null,
          "old_line_content": "        av_free(pes);",
          "new_line_content": "    if (!pes)",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "av_new_packet",
          "new_api": null,
          "old_text": "av_new_packet(pkt, TS_PACKET_SIZE)",
          "new_text": null,
          "old_line_content": "    if (av_new_packet(pkt, TS_PACKET_SIZE) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "mpegts_set_stream_info",
          "new_api": null,
          "old_text": "mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc)",
          "new_text": null,
          "old_line_content": "            mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "static int mpegts_raw_read_packet(AVFormatContext *s,",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "add_pid_to_pmt",
          "new_api": null,
          "old_text": "add_pid_to_pmt(ts, h->id, pid)",
          "new_text": null,
          "old_line_content": "        add_pid_to_pmt(ts, h->id, pid);",
          "new_line_content": "                st->id = pid;",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    pkt->pos= avio_tell(s->pb);",
          "new_line_content": "                                  AVPacket *pkt)",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "ff_program_add_stream_index",
          "new_api": null,
          "old_text": "ff_program_add_stream_index(ts->stream, h->id, st->index)",
          "new_text": null,
          "old_line_content": "        ff_program_add_stream_index(ts->stream, h->id, st->index);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(p)",
          "new_text": null,
          "old_line_content": "    c = AV_RB16(p);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        desc_list_len = get16(&p, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "read_packet",
          "new_api": null,
          "old_text": "read_packet(s, pkt->data, ts->raw_packet_size, &data)",
          "new_text": null,
          "old_line_content": "    ret = read_packet(s, pkt->data, ts->raw_packet_size, &data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "av_free_packet",
          "new_api": null,
          "old_text": "av_free_packet(pkt)",
          "new_text": null,
          "old_line_content": "        av_free_packet(pkt);",
          "new_line_content": "    int ret, i;",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pkt->data, data, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        memcpy(pkt->data, data, ts->raw_packet_size);",
          "new_line_content": "    uint8_t *data;",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "finished_reading_packet",
          "new_api": null,
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "    finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "ff_parse_mpeg2_descriptor",
          "new_api": null,
          "old_text": "ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,\n                mp4_descr, mp4_descr_count, pid, ts)",
          "new_text": null,
          "old_line_content": "            if (ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "            pos = avio_tell(s->pb);",
          "new_line_content": "    if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "ffio_init_context",
          "new_api": null,
          "old_text": "ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,\n                          NULL, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if ((ret = ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,",
          "new_line_content": "    int level;",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"HDMV\")",
          "new_text": null,
          "old_line_content": "            if (pes && prog_reg_desc == AV_RL32(\"HDMV\") && stream_type == 0x83 && pes->sub_st) {",
          "new_line_content": "        if (desc_list_len < 0)",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "    len = get8(&p, p_end);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "ff_program_add_stream_index",
          "new_api": null,
          "old_text": "ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index)",
          "new_text": null,
          "old_line_content": "                ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(s->pb, pcr_buf, 12)",
          "new_text": null,
          "old_line_content": "                avio_read(s->pb, pcr_buf, 12);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf)",
          "new_text": null,
          "old_line_content": "                if (parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf) == 0) {",
          "new_line_content": "    if (data != pkt->data)",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(len + 1)",
          "new_text": null,
          "old_line_content": "    str = av_malloc(len + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(str, p, len)",
          "new_text": null,
          "old_line_content": "    memcpy(str, p, len);",
          "new_line_content": "    char *str;",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mp4_descr[i].dec_config_descr)",
          "new_text": null,
          "old_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "    int64_t new_off = avio_tell(pb);",
          "new_line_content": "    d->s = s;",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"PAT:\\n\")",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"PAT:\\n\");",
          "new_line_content": "    for (i = 0; i < mp4_descr_count; i++)",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    str[len] = '\\0';",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get16(pp, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "        update_offsets(&d->pb, &off, &len);",
          "new_line_content": "    *off = new_off;",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "handle_packets",
          "new_api": null,
          "old_text": "handle_packets(ts, 0)",
          "new_text": null,
          "old_line_content": "    ret = handle_packets(ts, 0);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    int val;",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "clear_programs",
          "new_api": null,
          "old_text": "clear_programs(ts)",
          "new_text": null,
          "old_line_content": "    clear_programs(ts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_rb16(&d->pb); // ID",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "    while (len > 0) {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    if (val < 0)",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "parse_mp4_descr_arr",
          "new_api": null,
          "old_text": "parse_mp4_descr_arr(d, off, len)",
          "new_text": null,
          "old_line_content": "    return parse_mp4_descr_arr(d, off, len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        pmt_pid = get16(&p, p_end);",
          "new_line_content": "    p = section;",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, pkt)",
          "new_text": null,
          "old_line_content": "                    new_pes_packet(pes, pkt);",
          "new_line_content": "    int ret, i;",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINTR)",
          "new_text": null,
          "old_line_content": "        ret = AVERROR(EINTR);",
          "new_line_content": "                if (pes->state == MPEGTS_PAYLOAD && pes->data_index > 0) {",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "av_new_program",
          "new_api": null,
          "old_text": "av_new_program(ts->stream, sid)",
          "new_text": null,
          "old_line_content": "            av_new_program(ts->stream, sid);",
          "new_line_content": "            break;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 64,
      "total_additions": 261,
      "total_deletions": 261,
      "total_api_changes": 586
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 586,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          242,
          243,
          244,
          245,
          246,
          247,
          248,
          249,
          250,
          251,
          252
        ]
      }
    },
    "api_calls_before": 339,
    "api_calls_after": 339,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 0,
      "total_diff_lines": 23
    }
  }
}
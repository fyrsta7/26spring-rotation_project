{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/9d8533368f55e1f6a0ea30d6492b26399b030066",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/9d8533368f55e1f6a0ea30d6492b26399b030066/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/9d8533368f55e1f6a0ea30d6492b26399b030066/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/9d8533368f55e1f6a0ea30d6492b26399b030066/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 429,
          "old_api": "log2_tab",
          "new_api": "FFMAX",
          "old_text": "log2_tab(s->windowed_samples, AC3_WINDOW_SIZE)",
          "new_text": "FFMAX(0, v)",
          "old_line_content": "    int v = 14 - log2_tab(s->windowed_samples, AC3_WINDOW_SIZE);",
          "new_line_content": "    v = FFMAX(0, v);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "FFMAX",
          "new_api": "lshift_tab",
          "old_text": "FFMAX(0, v)",
          "new_text": "lshift_tab(s->windowed_samples, AC3_WINDOW_SIZE, v)",
          "old_line_content": "    v = FFMAX(0, v);",
          "new_line_content": "    lshift_tab(s->windowed_samples, AC3_WINDOW_SIZE, v);",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "put_bits_ptr",
          "new_api": "assert",
          "old_text": "put_bits_ptr(&s->pb)",
          "new_text": "assert(pad_bytes >= 0)",
          "old_line_content": "    pad_bytes = s->frame_size - (put_bits_ptr(&s->pb) - frame) - 2;",
          "new_line_content": "    assert(pad_bytes >= 0);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "pow_poly",
          "new_api": "mul_poly",
          "old_text": "pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY)",
          "new_text": "mul_poly(crc_inv, crc1, CRC16_POLY)",
          "old_line_content": "    crc_inv = pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY);",
          "new_line_content": "    crc1    = mul_poly(crc_inv, crc1, CRC16_POLY);",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "mul_poly",
          "new_api": "AV_WB16",
          "old_text": "mul_poly(crc_inv, crc1, CRC16_POLY)",
          "new_text": "AV_WB16(frame + 2, crc1)",
          "old_line_content": "    crc1    = mul_poly(crc_inv, crc1, CRC16_POLY);",
          "new_line_content": "    AV_WB16(frame + 2, crc1);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "avcodec_guess_channel_layout",
          "new_api": "av_get_channel_layout_nb_channels",
          "old_text": "avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL)",
          "new_text": "av_get_channel_layout_nb_channels(ch_layout)",
          "old_line_content": "        ch_layout = avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL);",
          "new_line_content": "    if (av_get_channel_layout_nb_channels(ch_layout) != channels)",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "av_get_channel_layout_nb_channels",
          "new_api": "AVERROR",
          "old_text": "av_get_channel_layout_nb_channels(ch_layout)",
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    if (av_get_channel_layout_nb_channels(ch_layout) != channels)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\")",
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\");",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\")",
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\");",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "sin",
          "new_api": "cos",
          "old_text": "sin(a)",
          "new_text": "cos(a)",
          "old_line_content": "            sum_re += in1[n].re * cos(a) - in1[n].im * sin(a);",
          "new_line_content": "            sum_im += in1[n].re * sin(a) + in1[n].im * cos(a);",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "av_log_set_level",
          "new_api": "mdct_init",
          "old_text": "av_log_set_level(AV_LOG_DEBUG)",
          "new_text": "mdct_init(9)",
          "old_line_content": "    av_log_set_level(AV_LOG_DEBUG);",
          "new_line_content": "    mdct_init(9);",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "fft_test",
          "new_api": "mdct_test",
          "old_text": "fft_test(&lfg)",
          "new_text": "mdct_test(&lfg)",
          "old_line_content": "    fft_test(&lfg);",
          "new_line_content": "    mdct_test(&lfg);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1031,
          "old_api": null,
          "new_api": "count_frame_bits",
          "old_text": null,
          "new_text": "count_frame_bits(s)",
          "old_line_content": "{",
          "new_line_content": "    count_frame_bits(s);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "bit_alloc_masking",
          "old_text": null,
          "new_text": "bit_alloc_masking(s)",
          "old_line_content": "",
          "new_line_content": "    bit_alloc_masking(s);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "calc_exp_diff",
          "old_text": null,
          "new_text": "calc_exp_diff(exp[blk], exp[blk-1], AC3_MAX_COEFS)",
          "old_line_content": "    for (blk = 1; blk < AC3_MAX_BLOCKS; blk++) {",
          "new_line_content": "        exp_diff = calc_exp_diff(exp[blk], exp[blk-1], AC3_MAX_COEFS);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "cbr_bit_allocation",
          "old_text": null,
          "new_text": "cbr_bit_allocation(s)",
          "old_line_content": "",
          "new_line_content": "    return cbr_bit_allocation(s);",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    default:",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"\n                                      \"encoder will guess the layout, but it \"\n                                      \"might be incorrect.\\n\")",
          "old_line_content": "    if (!avctx->channel_layout) {",
          "new_line_content": "        av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "set_channel_info",
          "old_text": null,
          "new_text": "set_channel_info(s, avctx->channels, &avctx->channel_layout)",
          "old_line_content": "    }",
          "new_line_content": "    ret = set_channel_info(s, avctx->channels, &avctx->channel_layout);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(v >= 0 && v < levels)",
          "old_line_content": "    }",
          "new_line_content": "    assert(v >= 0 && v < levels);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\")",
          "old_line_content": "    if (ret) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\");",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\")",
          "old_line_content": "    if (i == 9) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\");",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "compute_exp_strategy_ch",
          "old_text": null,
          "new_text": "compute_exp_strategy_ch(exp_str1[ch], exp1[ch])",
          "old_line_content": "",
          "new_line_content": "        compute_exp_strategy_ch(exp_str1[ch], exp1[ch]);",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(v >= -m)",
          "old_line_content": "        v = m - 1;",
          "new_line_content": "    assert(v >= -m);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\")",
          "old_line_content": "    if (i == 19) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\");",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 3)",
          "old_line_content": "        case 1:",
          "new_line_content": "            v = sym_quant(c, e, 3);",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(cutoff, 1, s->sample_rate >> 1)",
          "old_line_content": "        int fbw_coeffs;",
          "new_line_content": "        cutoff         = av_clip(cutoff, 1, s->sample_rate >> 1);",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip((fbw_coeffs - 73) / 3, 0, 60)",
          "old_line_content": "        fbw_coeffs     = cutoff * 2 * AC3_MAX_COEFS / s->sample_rate;",
          "new_line_content": "        bw_code        = av_clip((fbw_coeffs - 73) / 3, 0, 60);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 5)",
          "old_line_content": "        case 2:",
          "new_line_content": "            v = sym_quant(c, e, 5);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(exp_min >= 0 && exp_min <= 24)",
          "old_line_content": "        exp_min = exp[k];",
          "new_line_content": "        assert(exp_min >= 0 && exp_min <= 24);",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),\n                     alloc_fail)",
          "old_line_content": "",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],\n                          (AC3_FRAME_SIZE+AC3_BLOCK_SIZE) * sizeof(**s->planar_samples),\n                          alloc_fail)",
          "old_line_content": "    for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail)",
          "old_line_content": "    }",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap1_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->mdct_coef_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->bap1_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(exp1[i], exp1[i-1] + 2)",
          "old_line_content": "    for (i = 1; i <= nb_groups; i++)",
          "new_line_content": "        exp1[i] = FFMIN(exp1[i], exp1[i-1] + 2);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->exp_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->mdct_coef_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(exp1[i], exp1[i+1] + 2)",
          "old_line_content": "    for (i = nb_groups-1; i >= 0; i--)",
          "new_line_content": "        exp1[i] = FFMIN(exp1[i], exp1[i+1] + 2);",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 7)",
          "old_line_content": "        case 3:",
          "new_line_content": "            v = sym_quant(c, e, 7);",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->encoded_exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->encoded_exp_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->exp_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->encoded_exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->grouped_exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     128 * sizeof(*s->grouped_exp_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->encoded_exp_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->grouped_exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 11)",
          "old_line_content": "        case 4:",
          "new_line_content": "            v = sym_quant(c, e, 11);",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->psd_buffer), alloc_fail)",
          "old_line_content": "                     128 * sizeof(*s->grouped_exp_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->band_psd_buffer, AC3_MAX_BLOCKS * s->channels *\n                     64 * sizeof(*s->band_psd_buffer), alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->psd_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->band_psd_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *\n                     64 * sizeof(*s->mask_buffer), alloc_fail)",
          "old_line_content": "                     64 * sizeof(*s->band_psd_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->qmant_buffer), alloc_fail)",
          "old_line_content": "                     64 * sizeof(*s->mask_buffer), alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),\n                         alloc_fail)",
          "old_line_content": "        AC3Block *block = &s->blocks[blk];",
          "new_line_content": "        FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),\n                          alloc_fail)",
          "old_line_content": "                         alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 15)",
          "old_line_content": "        case 5:",
          "new_line_content": "            v = sym_quant(c, e, 15);",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->encoded_exp, s->channels * sizeof(*block->encoded_exp),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->encoded_exp, s->channels * sizeof(*block->encoded_exp),",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, 14)",
          "old_line_content": "        case 14:",
          "new_line_content": "            v = asym_quant(c, e, 14);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, 16)",
          "old_line_content": "        case 15:",
          "new_line_content": "            v = asym_quant(c, e, 16);",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, b - 1)",
          "old_line_content": "        default:",
          "new_line_content": "            v = asym_quant(c, e, b - 1);",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),\n                          alloc_fail)",
          "old_line_content": "                          alloc_fail);",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "exponent_min",
          "old_text": null,
          "new_text": "exponent_min(block->exp[ch], block1->exp[ch], s->nb_coefs[ch])",
          "old_line_content": "            while (blk1 < AC3_MAX_BLOCKS && block1->exp_strategy[ch] == EXP_REUSE) {",
          "new_line_content": "                exponent_min(block->exp[ch], block1->exp[ch], s->nb_coefs[ch]);",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "encode_exponents_blk_ch",
          "old_text": null,
          "new_text": "encode_exponents_blk_ch(block->encoded_exp[ch],\n                                    block->exp[ch], s->nb_coefs[ch],\n                                    block->exp_strategy[ch],\n                                    &block->num_exp_groups[ch])",
          "old_line_content": "            }",
          "new_line_content": "            encode_exponents_blk_ch(block->encoded_exp[ch],",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(block2->encoded_exp[ch], block->encoded_exp[ch],\n                       s->nb_coefs[ch] * sizeof(uint8_t))",
          "old_line_content": "            for (blk2 = blk+1; blk2 < blk1; blk2++, block2++) {",
          "new_line_content": "                memcpy(block2->encoded_exp[ch], block->encoded_exp[ch],",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "alloc_fail:",
          "new_line_content": "    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "quantize_mantissas_blk_ch",
          "old_text": null,
          "new_text": "quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],\n                                      block->encoded_exp[ch], block->bap[ch],\n                                      block->qmant[ch], s->nb_coefs[ch])",
          "old_line_content": "        for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "            quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, 0x0b77)",
          "old_line_content": "{",
          "new_line_content": "    put_bits(&s->pb, 16, 0x0b77);   /* frame header */",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "ac3_common_init",
          "old_text": null,
          "new_text": "ac3_common_init()",
          "old_line_content": "",
          "new_line_content": "    ac3_common_init();",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "validate_options",
          "old_text": null,
          "new_text": "validate_options(avctx, s)",
          "old_line_content": "",
          "new_line_content": "    ret = validate_options(avctx, s);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 1)",
          "old_line_content": "    if ((s->channel_mode & 0x01) && s->channel_mode != AC3_CHMODE_MONO)",
          "new_line_content": "        put_bits(&s->pb, 2, 1);     /* XXX -4.5 dB */",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 1)",
          "old_line_content": "    if (s->channel_mode & 0x04)",
          "new_line_content": "        put_bits(&s->pb, 2, 1);     /* XXX -6 dB */",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 0)",
          "old_line_content": "    if (s->channel_mode == AC3_CHMODE_STEREO)",
          "new_line_content": "        put_bits(&s->pb, 2, 0);     /* surround not indicated */",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "set_bandwidth",
          "old_text": null,
          "new_text": "set_bandwidth(s, avctx->cutoff)",
          "old_line_content": "",
          "new_line_content": "    set_bandwidth(s, avctx->cutoff);",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "bit_alloc_init",
          "old_text": null,
          "new_text": "bit_alloc_init(s)",
          "old_line_content": "",
          "new_line_content": "    bit_alloc_init(s);",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "mdct_init",
          "old_text": null,
          "new_text": "mdct_init(9)",
          "old_line_content": "",
          "new_line_content": "    mdct_init(9);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "allocate_buffers",
          "old_text": null,
          "new_text": "allocate_buffers(avctx)",
          "old_line_content": "",
          "new_line_content": "    ret = allocate_buffers(avctx);",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "ac3_encode_close",
          "old_text": null,
          "new_text": "ac3_encode_close(avctx)",
          "old_line_content": "    if (ret) {",
          "new_line_content": "        ac3_encode_close(avctx);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "avcodec_alloc_frame",
          "old_text": null,
          "new_text": "avcodec_alloc_frame()",
          "old_line_content": "",
          "new_line_content": "    avctx->coded_frame= avcodec_alloc_frame();",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "new_line_content": "        put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "new_line_content": "        put_bits(&s->pb, 1, 1);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "    /* dynamic range codes */",
          "new_line_content": "    put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": "    if (!block_num) {",
          "new_line_content": "        put_bits(&s->pb, 1, 1); /* coupling strategy present */",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(lfg)",
          "old_line_content": "    for (i = 0; i < FN; i++) {",
          "new_line_content": "        in[i].re = av_lfg_get(lfg) % 65535 - 32767;",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "    } else {",
          "new_line_content": "        put_bits(&s->pb, 1, 0); /* no new coupling strategy */",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "fft",
          "old_text": null,
          "new_text": "fft(in, 7)",
          "old_line_content": "    }",
          "new_line_content": "    fft(in, 7);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "extract_exponents",
          "old_text": null,
          "new_text": "extract_exponents(s)",
          "old_line_content": "{",
          "new_line_content": "    extract_exponents(s);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": null,
          "new_api": "compute_exp_strategy",
          "old_text": null,
          "new_text": "compute_exp_strategy(s)",
          "old_line_content": "",
          "new_line_content": "    compute_exp_strategy(s);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "encode_exponents",
          "old_text": null,
          "new_text": "encode_exponents(s)",
          "old_line_content": "",
          "new_line_content": "    encode_exponents(s);",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": "            /* first block must define rematrixing (rematstr) */",
          "new_line_content": "            put_bits(&s->pb, 1, 1);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "group_exponents",
          "old_text": null,
          "new_text": "group_exponents(s)",
          "old_line_content": "",
          "new_line_content": "    group_exponents(s);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "sin",
          "old_text": null,
          "new_text": "sin(a)",
          "old_line_content": "            a = -2 * M_PI * (n * k) / FN;",
          "new_line_content": "            sum_re += in1[n].re * cos(a) - in1[n].im * sin(a);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "            for (rbnd = 0; rbnd < 4; rbnd++)",
          "new_line_content": "                put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",\n               k, in[k].re, in[k].im, sum_re / FN, sum_im / FN)",
          "old_line_content": "        }",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "            /* no matrixing (but should be used in the future) */",
          "new_line_content": "            put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, block->exp_strategy[ch])",
          "old_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "new_line_content": "        put_bits(&s->pb, 2, block->exp_strategy[ch]);",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel])",
          "old_line_content": "    if (s->lfe_on)",
          "new_line_content": "        put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel]);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 6, s->bandwidth_code[ch])",
          "old_line_content": "        if (block->exp_strategy[ch] != EXP_REUSE)",
          "new_line_content": "            put_bits(&s->pb, 6, s->bandwidth_code[ch]);",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(lfg)",
          "old_line_content": "    for (i = 0; i < MDCT_SAMPLES; i++) {",
          "new_line_content": "        input[i]  = (av_lfg_get(lfg) % 65535 - 32767) * 9 / 10;",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "mdct512",
          "old_text": null,
          "new_text": "mdct512(output, input)",
          "old_line_content": "",
          "new_line_content": "    mdct512(output, input);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, block->grouped_exp[ch][0])",
          "old_line_content": "        /* DC exponent */",
          "new_line_content": "        put_bits(&s->pb, 4, block->grouped_exp[ch][0]);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "cos",
          "old_text": null,
          "new_text": "cos(a)",
          "old_line_content": "            a = (2*M_PI*(2*n+1+MDCT_SAMPLES/2)*(2*k+1) / (4 * MDCT_SAMPLES));",
          "new_line_content": "            s += input1[n] * cos(a);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 7, block->grouped_exp[ch][i])",
          "old_line_content": "        for (i = 1; i <= block->num_exp_groups[ch]; i++)",
          "new_line_content": "            put_bits(&s->pb, 7, block->grouped_exp[ch][i]);",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 0)",
          "old_line_content": "        if (ch != s->lfe_channel)",
          "new_line_content": "            put_bits(&s->pb, 2, 0);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i])",
          "old_line_content": "    for (i = 0; i < AC3_MAX_COEFS; i++) {",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i]);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, baie)",
          "old_line_content": "    baie = (block_num == 0);",
          "new_line_content": "    put_bits(&s->pb, 1, baie);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, s->slow_decay_code)",
          "old_line_content": "    if (baie) {",
          "new_line_content": "        put_bits(&s->pb, 2, s->slow_decay_code);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax)",
          "old_line_content": "    }",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, baie)",
          "old_line_content": "    /* snr offset */",
          "new_line_content": "    put_bits(&s->pb, 1, baie);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 6, s->coarse_snr_offset)",
          "old_line_content": "    if (baie) {",
          "new_line_content": "        put_bits(&s->pb, 6, s->coarse_snr_offset);",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": null,
          "new_api": "av_log_set_level",
          "old_text": null,
          "new_text": "av_log_set_level(AV_LOG_DEBUG)",
          "old_line_content": "",
          "new_line_content": "    av_log_set_level(AV_LOG_DEBUG);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->fine_snr_offset[ch])",
          "old_line_content": "        for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "            put_bits(&s->pb, 4, s->fine_snr_offset[ch]);",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": null,
          "new_api": "fft_test",
          "old_text": null,
          "new_text": "fft_test(&lfg)",
          "old_line_content": "",
          "new_line_content": "    fft_test(&lfg);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 1, 0); /* no delta bit allocation */",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,   5, q)",
          "old_line_content": "            case 0:                                         break;",
          "new_line_content": "            case 1: if (q != 128) put_bits(&s->pb,   5, q); break;",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "old_line_content": "    .sample_fmts = (const enum AVSampleFormat[]){AV_SAMPLE_FMT_S16,AV_SAMPLE_FMT_NONE},",
          "new_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&rot[MDCT_SAMPLES/4], &in[0], 3*MDCT_SAMPLES/4*sizeof(*in))",
          "old_line_content": "    for (;i < MDCT_SAMPLES; i++)",
          "new_line_content": "    memcpy(&rot[MDCT_SAMPLES/4], &in[0], 3*MDCT_SAMPLES/4*sizeof(*in));",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "CMUL",
          "old_text": null,
          "new_text": "CMUL(x[i].re, x[i].im, re, im, -xcos1[i], xsin1[i])",
          "old_line_content": "        im = -((int)rot[MDCT_SAMPLES/2+2*i] - (int)rot[MDCT_SAMPLES/2-1-2*i]) >> 1;",
          "new_line_content": "        CMUL(x[i].re, x[i].im, re, im, -xcos1[i], xsin1[i]);",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "mul_poly",
          "old_text": null,
          "new_text": "mul_poly(r, a, poly)",
          "old_line_content": "        if (n & 1)",
          "new_line_content": "            r = mul_poly(r, a, poly);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "fft",
          "old_text": null,
          "new_text": "fft(x, MDCT_NBITS - 2)",
          "old_line_content": "",
          "new_line_content": "    fft(x, MDCT_NBITS - 2);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "CMUL",
          "old_text": null,
          "new_text": "CMUL(re1, im1, re, im, xsin1[i], xcos1[i])",
          "old_line_content": "        im = x[i].im;",
          "new_line_content": "        CMUL(re1, im1, re, im, xsin1[i], xcos1[i]);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    /* pad the remainder of the frame with zeros */",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "put_bits_ptr",
          "old_text": null,
          "new_text": "put_bits_ptr(&s->pb)",
          "old_line_content": "    frame = s->pb.buf;",
          "new_line_content": "    pad_bytes = s->frame_size - (put_bits_ptr(&s->pb) - frame) - 2;",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "MUL16",
          "old_text": null,
          "new_text": "MUL16(input[i],     window[i])",
          "old_line_content": "    for (i = 0; i < n2; i++) {",
          "new_line_content": "        output[i]     = MUL16(input[i],     window[i]) >> 15;",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "put_bits_ptr",
          "old_text": null,
          "new_text": "put_bits_ptr(&s->pb)",
          "old_line_content": "    if (pad_bytes > 0)",
          "new_line_content": "        memset(put_bits_ptr(&s->pb), 0, pad_bytes);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "old_line_content": "    /* this is not so easy because it is at the beginning of the data... */",
          "new_line_content": "    crc1 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "pow_poly",
          "old_text": null,
          "new_text": "pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY)",
          "old_line_content": "    /* XXX: could precompute crc_inv */",
          "new_line_content": "    crc_inv = pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "old_line_content": "    /* compute crc2 */",
          "new_line_content": "    crc2 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(block->psd[ch],  block1->psd[ch],  AC3_MAX_COEFS*sizeof(block->psd[0][0]))",
          "old_line_content": "                AC3Block *block1 = &s->blocks[blk-1];",
          "new_line_content": "                memcpy(block->psd[ch],  block1->psd[ch],  AC3_MAX_COEFS*sizeof(block->psd[0][0]));",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "AV_WB16",
          "old_text": null,
          "new_text": "AV_WB16(frame + frame_size - 2, crc2)",
          "old_line_content": "                             frame_size - frame_size_58 - 2));",
          "new_line_content": "    AV_WB16(frame + frame_size - 2, crc2);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "abs",
          "old_text": null,
          "new_text": "abs(tab[i])",
          "old_line_content": "    for (i = 0; i < n; i++)",
          "new_line_content": "        v |= abs(tab[i]);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_psd",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_psd(block->encoded_exp[ch], 0,\n                                          s->nb_coefs[ch],\n                                          block->psd[ch], block->band_psd[ch])",
          "old_line_content": "            } else {",
          "new_line_content": "                ff_ac3_bit_alloc_calc_psd(block->encoded_exp[ch], 0,",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(v)",
          "old_line_content": "",
          "new_line_content": "    return av_log2(v);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_mask",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_mask(&s->bit_alloc, block->band_psd[ch],\n                                           0, s->nb_coefs[ch],\n                                           ff_ac3_fast_gain_tab[s->fast_gain_code[ch]],\n                                           ch == s->lfe_channel,\n                                           DBA_NONE, 0, NULL, NULL, NULL,\n                                           block->mask[ch])",
          "old_line_content": "                                          block->psd[ch], block->band_psd[ch]);",
          "new_line_content": "                ff_ac3_bit_alloc_calc_mask(&s->bit_alloc, block->band_psd[ch],",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE)",
          "old_line_content": "",
          "new_line_content": "    init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "output_frame_header",
          "old_text": null,
          "new_text": "output_frame_header(s)",
          "old_line_content": "",
          "new_line_content": "    output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "output_audio_block",
          "old_text": null,
          "new_text": "output_audio_block(s, blk)",
          "old_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++)",
          "new_line_content": "        output_audio_block(s, blk);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "output_frame_end",
          "old_text": null,
          "new_text": "output_frame_end(s)",
          "old_line_content": "",
          "new_line_content": "    output_frame_end(s);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "adjust_frame_size",
          "old_text": null,
          "new_text": "adjust_frame_size(s)",
          "old_line_content": "    if (s->bit_alloc.sr_code == 1)",
          "new_line_content": "        adjust_frame_size(s);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "deinterleave_input_samples",
          "old_text": null,
          "new_text": "deinterleave_input_samples(s, samples)",
          "old_line_content": "",
          "new_line_content": "    deinterleave_input_samples(s, samples);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "log2_tab",
          "old_text": null,
          "new_text": "log2_tab(s->windowed_samples, AC3_WINDOW_SIZE)",
          "old_line_content": "{",
          "new_line_content": "    int v = 14 - log2_tab(s->windowed_samples, AC3_WINDOW_SIZE);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "apply_mdct",
          "old_text": null,
          "new_text": "apply_mdct(s)",
          "old_line_content": "",
          "new_line_content": "    apply_mdct(s);",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "process_exponents",
          "old_text": null,
          "new_text": "process_exponents(s)",
          "old_line_content": "",
          "new_line_content": "    process_exponents(s);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": null,
          "new_api": "compute_bit_allocation",
          "old_text": null,
          "new_text": "compute_bit_allocation(s)",
          "old_line_content": "",
          "new_line_content": "    ret = compute_bit_allocation(s);",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\")",
          "old_line_content": "    if (ret) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\");",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "quantize_mantissas",
          "old_text": null,
          "new_text": "quantize_mantissas(s)",
          "old_line_content": "",
          "new_line_content": "    quantize_mantissas(s);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "reset_block_bap",
          "old_text": null,
          "new_text": "reset_block_bap(s)",
          "old_line_content": "",
          "new_line_content": "    reset_block_bap(s);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "output_frame",
          "old_text": null,
          "new_text": "output_frame(s, frame)",
          "old_line_content": "",
          "new_line_content": "    output_frame(s, frame);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_bap",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,\n                                      s->nb_coefs[ch], snr_offset,\n                                      s->bit_alloc.floor, ff_ac3_bap_tab,\n                                      block->bap[ch])",
          "old_line_content": "        for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "            ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "apply_window",
          "old_text": null,
          "new_text": "apply_window(s->windowed_samples, input_samples, ff_ac3_window, AC3_WINDOW_SIZE)",
          "old_line_content": "",
          "new_line_content": "            apply_window(s->windowed_samples, input_samples, ff_ac3_window, AC3_WINDOW_SIZE);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "normalize_samples",
          "old_text": null,
          "new_text": "normalize_samples(s)",
          "old_line_content": "",
          "new_line_content": "            block->exp_shift[ch] = normalize_samples(s);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "compute_mantissa_size",
          "old_text": null,
          "new_text": "compute_mantissa_size(s, block->bap[ch], s->nb_coefs[ch])",
          "old_line_content": "                                      block->bap[ch]);",
          "new_line_content": "            mantissa_bits += compute_mantissa_size(s, block->bap[ch], s->nb_coefs[ch]);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "mdct512",
          "old_text": null,
          "new_text": "mdct512(block->mdct_coef[ch], s->windowed_samples)",
          "old_line_content": "",
          "new_line_content": "            mdct512(block->mdct_coef[ch], s->windowed_samples);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->planar_samples[ch])",
          "old_line_content": "    for (ch = 0; ch < s->channels; ch++)",
          "new_line_content": "        av_freep(&s->planar_samples[ch]);",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->bap)",
          "old_line_content": "        AC3Block *block = &s->blocks[blk];",
          "new_line_content": "        av_freep(&block->bap);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "abs",
          "old_text": null,
          "new_text": "abs(block->mdct_coef[ch][i])",
          "old_line_content": "                int e;",
          "new_line_content": "                int v = abs(block->mdct_coef[ch][i]);",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset)",
          "old_line_content": "    while (snr_offset >= 0 &&",
          "new_line_content": "           bit_alloc(s, snr_offset) > bits_left) {",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(v)",
          "old_line_content": "                else {",
          "new_line_content": "                    e = 23 - av_log2(v) + block->exp_shift[ch];",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    if (snr_offset < 0)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->coded_frame)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&avctx->coded_frame);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 64)",
          "old_line_content": "    while (snr_offset + 64 <= 1023 &&",
          "new_line_content": "           bit_alloc(s, snr_offset + 64) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 16)",
          "old_line_content": "    while (snr_offset + 16 <= 1023 &&",
          "new_line_content": "           bit_alloc(s, snr_offset + 16) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 4)",
          "old_line_content": "    while (snr_offset + 4 <= 1023 &&",
          "new_line_content": "           bit_alloc(s, snr_offset + 4) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    if (channels < 1 || channels > AC3_MAX_CHANNELS)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 1)",
          "old_line_content": "    while (snr_offset + 1 <= 1023 &&",
          "new_line_content": "           bit_alloc(s, snr_offset + 1) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    if ((uint64_t)*channel_layout > 0x7FF)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "abs",
          "old_text": null,
          "new_text": "abs(exp1[i] - exp2[i])",
          "old_line_content": "    for (i = 0; i < n; i++)",
          "new_line_content": "        sum += abs(exp1[i] - exp2[i]);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "avcodec_guess_channel_layout",
          "old_text": null,
          "new_text": "avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL)",
          "old_line_content": "    if (!ch_layout)",
          "new_line_content": "        ch_layout = avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "reset_block_bap",
          "old_text": null,
          "new_text": "reset_block_bap(s)",
          "old_line_content": "    FFSWAP(uint8_t *, s->bap_buffer, s->bap1_buffer);",
          "new_line_content": "    reset_block_bap(s);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1032,
          "old_api": "count_frame_bits",
          "new_api": null,
          "old_text": "count_frame_bits(s)",
          "new_text": null,
          "old_line_content": "    count_frame_bits(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "bit_alloc_masking",
          "new_api": null,
          "old_text": "bit_alloc_masking(s)",
          "new_text": null,
          "old_line_content": "    bit_alloc_masking(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "calc_exp_diff",
          "new_api": null,
          "old_text": "calc_exp_diff(exp[blk], exp[blk-1], AC3_MAX_COEFS)",
          "new_text": null,
          "old_line_content": "        exp_diff = calc_exp_diff(exp[blk], exp[blk-1], AC3_MAX_COEFS);",
          "new_line_content": "        if (exp_diff > EXP_DIFF_THRESHOLD)",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "cbr_bit_allocation",
          "new_api": null,
          "old_text": "cbr_bit_allocation(s)",
          "new_text": null,
          "old_line_content": "    return cbr_bit_allocation(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"\n                                      \"encoder will guess the layout, but it \"\n                                      \"might be incorrect.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"",
          "new_line_content": "                                      \"encoder will guess the layout, but it \"",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(v >= 0 && v < levels)",
          "new_text": null,
          "old_line_content": "    assert(v >= 0 && v < levels);",
          "new_line_content": "    return v;",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "set_channel_info",
          "new_api": null,
          "old_text": "set_channel_info(s, avctx->channels, &avctx->channel_layout)",
          "new_text": null,
          "old_line_content": "    ret = set_channel_info(s, avctx->channels, &avctx->channel_layout);",
          "new_line_content": "    if (ret) {",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\");",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "compute_exp_strategy_ch",
          "new_api": null,
          "old_text": "compute_exp_strategy_ch(exp_str1[ch], exp1[ch])",
          "new_text": null,
          "old_line_content": "        compute_exp_strategy_ch(exp_str1[ch], exp1[ch]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(v >= -m)",
          "new_text": null,
          "old_line_content": "    assert(v >= -m);",
          "new_line_content": "    return v & ((1 << qbits)-1);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 3)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 3);",
          "new_line_content": "            switch (s->mant1_cnt) {",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(cutoff, 1, s->sample_rate >> 1)",
          "new_text": null,
          "old_line_content": "        cutoff         = av_clip(cutoff, 1, s->sample_rate >> 1);",
          "new_line_content": "        fbw_coeffs     = cutoff * 2 * AC3_MAX_COEFS / s->sample_rate;",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip((fbw_coeffs - 73) / 3, 0, 60)",
          "new_text": null,
          "old_line_content": "        bw_code        = av_clip((fbw_coeffs - 73) / 3, 0, 60);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 5)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 5);",
          "new_line_content": "            switch (s->mant2_cnt) {",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(exp_min >= 0 && exp_min <= 24)",
          "new_text": null,
          "old_line_content": "        assert(exp_min >= 0 && exp_min <= 24);",
          "new_line_content": "        for (j = 1; j < group_size; j++) {",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),\n                     alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),",
          "new_line_content": "                     alloc_fail);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],\n                          (AC3_FRAME_SIZE+AC3_BLOCK_SIZE) * sizeof(**s->planar_samples),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],",
          "new_line_content": "                          (AC3_FRAME_SIZE+AC3_BLOCK_SIZE) * sizeof(**s->planar_samples),",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail);",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap1_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->bap1_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->mdct_coef_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->mdct_coef_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(exp1[i], exp1[i-1] + 2)",
          "new_text": null,
          "old_line_content": "        exp1[i] = FFMIN(exp1[i], exp1[i-1] + 2);",
          "new_line_content": "    for (i = nb_groups-1; i >= 0; i--)",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->exp_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->exp_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(exp1[i], exp1[i+1] + 2)",
          "new_text": null,
          "old_line_content": "        exp1[i] = FFMIN(exp1[i], exp1[i+1] + 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->encoded_exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->encoded_exp_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->encoded_exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->encoded_exp_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 7)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 7);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->grouped_exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     128 * sizeof(*s->grouped_exp_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->grouped_exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     128 * sizeof(*s->grouped_exp_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 11)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 11);",
          "new_line_content": "            switch (s->mant4_cnt) {",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->psd_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->psd_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->band_psd_buffer, AC3_MAX_BLOCKS * s->channels *\n                     64 * sizeof(*s->band_psd_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->band_psd_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     64 * sizeof(*s->band_psd_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *\n                     64 * sizeof(*s->mask_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     64 * sizeof(*s->mask_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->qmant_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     AC3_MAX_COEFS * sizeof(*s->qmant_buffer), alloc_fail);",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),\n                         alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),",
          "new_line_content": "                         alloc_fail);",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 15)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 15);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->encoded_exp, s->channels * sizeof(*block->encoded_exp),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->encoded_exp, s->channels * sizeof(*block->encoded_exp),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, 14)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, 14);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, 16)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, 16);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, b - 1)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, b - 1);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "exponent_min",
          "new_api": null,
          "old_text": "exponent_min(block->exp[ch], block1->exp[ch], s->nb_coefs[ch])",
          "new_text": null,
          "old_line_content": "                exponent_min(block->exp[ch], block1->exp[ch], s->nb_coefs[ch]);",
          "new_line_content": "                blk1++;",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "encode_exponents_blk_ch",
          "new_api": null,
          "old_text": "encode_exponents_blk_ch(block->encoded_exp[ch],\n                                    block->exp[ch], s->nb_coefs[ch],\n                                    block->exp_strategy[ch],\n                                    &block->num_exp_groups[ch])",
          "new_text": null,
          "old_line_content": "            encode_exponents_blk_ch(block->encoded_exp[ch],",
          "new_line_content": "                                    block->exp[ch], s->nb_coefs[ch],",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(block2->encoded_exp[ch], block->encoded_exp[ch],\n                       s->nb_coefs[ch] * sizeof(uint8_t))",
          "new_text": null,
          "old_line_content": "                memcpy(block2->encoded_exp[ch], block->encoded_exp[ch],",
          "new_line_content": "                       s->nb_coefs[ch] * sizeof(uint8_t));",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "    return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "quantize_mantissas_blk_ch",
          "new_api": null,
          "old_text": "quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],\n                                      block->encoded_exp[ch], block->bap[ch],\n                                      block->qmant[ch], s->nb_coefs[ch])",
          "new_text": null,
          "old_line_content": "            quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],",
          "new_line_content": "                                      block->encoded_exp[ch], block->bap[ch],",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "ac3_common_init",
          "new_api": null,
          "old_text": "ac3_common_init()",
          "new_text": null,
          "old_line_content": "    ac3_common_init();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "validate_options",
          "new_api": null,
          "old_text": "validate_options(avctx, s)",
          "new_text": null,
          "old_line_content": "    ret = validate_options(avctx, s);",
          "new_line_content": "    if (ret)",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3,  s->channel_mode)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 3,  s->channel_mode);",
          "new_line_content": "    if ((s->channel_mode & 0x01) && s->channel_mode != AC3_CHMODE_MONO)",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, 1);     /* XXX -4.5 dB */",
          "new_line_content": "    if (s->channel_mode & 0x04)",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, 1);     /* XXX -6 dB */",
          "new_line_content": "    if (s->channel_mode == AC3_CHMODE_STEREO)",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "set_bandwidth",
          "new_api": null,
          "old_text": "set_bandwidth(s, avctx->cutoff)",
          "new_text": null,
          "old_line_content": "    set_bandwidth(s, avctx->cutoff);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "bit_alloc_init",
          "new_api": null,
          "old_text": "bit_alloc_init(s)",
          "new_text": null,
          "old_line_content": "    bit_alloc_init(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "mdct_init",
          "new_api": null,
          "old_text": "mdct_init(9)",
          "new_text": null,
          "old_line_content": "    mdct_init(9);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "allocate_buffers",
          "new_api": null,
          "old_text": "allocate_buffers(avctx)",
          "new_text": null,
          "old_line_content": "    ret = allocate_buffers(avctx);",
          "new_line_content": "    if (ret) {",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0);         /* no additional bit stream info */",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "ac3_encode_close",
          "new_api": null,
          "old_text": "ac3_encode_close(avctx)",
          "new_text": null,
          "old_line_content": "        ac3_encode_close(avctx);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "avcodec_alloc_frame",
          "new_api": null,
          "old_text": "avcodec_alloc_frame()",
          "new_text": null,
          "old_line_content": "    avctx->coded_frame= avcodec_alloc_frame();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no coupling strategy */",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(lfg)",
          "new_text": null,
          "old_line_content": "        in[i].im = av_lfg_get(lfg) % 65535 - 32767;",
          "new_line_content": "        in1[i]   = in[i];",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no new coupling strategy */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "fft",
          "new_api": null,
          "old_text": "fft(in, 7)",
          "new_text": null,
          "old_line_content": "    fft(in, 7);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "extract_exponents",
          "new_api": null,
          "old_text": "extract_exponents(s)",
          "new_text": null,
          "old_line_content": "    extract_exponents(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "compute_exp_strategy",
          "new_api": null,
          "old_text": "compute_exp_strategy(s)",
          "new_text": null,
          "old_line_content": "    compute_exp_strategy(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "encode_exponents",
          "new_api": null,
          "old_text": "encode_exponents(s)",
          "new_text": null,
          "old_line_content": "    encode_exponents(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "group_exponents",
          "new_api": null,
          "old_text": "group_exponents(s)",
          "new_text": null,
          "old_line_content": "    group_exponents(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "cos",
          "new_api": null,
          "old_text": "cos(a)",
          "new_text": null,
          "old_line_content": "            sum_im += in1[n].re * sin(a) + in1[n].im * cos(a);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "                put_bits(&s->pb, 1, 0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",\n               k, in[k].re, in[k].im, sum_re / FN, sum_im / FN)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",",
          "new_line_content": "               k, in[k].re, in[k].im, sum_re / FN, sum_im / FN);",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 1, 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, block->exp_strategy[ch])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, block->exp_strategy[ch]);",
          "new_line_content": "    if (s->lfe_on)",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6, s->bandwidth_code[ch])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 6, s->bandwidth_code[ch]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(lfg)",
          "new_text": null,
          "old_line_content": "        input[i]  = (av_lfg_get(lfg) % 65535 - 32767) * 9 / 10;",
          "new_line_content": "        input1[i] = input[i];",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "mdct512",
          "new_api": null,
          "old_text": "mdct512(output, input)",
          "new_text": null,
          "old_line_content": "    mdct512(output, input);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, block->grouped_exp[ch][0])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, block->grouped_exp[ch][0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "cos",
          "new_api": null,
          "old_text": "cos(a)",
          "new_text": null,
          "old_line_content": "            s += input1[n] * cos(a);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 7, block->grouped_exp[ch][i])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 7, block->grouped_exp[ch][i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 2, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i])",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i]);",
          "new_line_content": "        e = output[i] - output1[i];",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, baie)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, baie);",
          "new_line_content": "    if (baie) {",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax)",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, s->floor_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 3, s->floor_code);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, baie)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, baie);",
          "new_line_content": "    if (baie) {",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6, s->coarse_snr_offset)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 6, s->coarse_snr_offset);",
          "new_line_content": "        for (ch = 0; ch < s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "mdct_init",
          "new_api": null,
          "old_text": "mdct_init(9)",
          "new_text": null,
          "old_line_content": "    mdct_init(9);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, s->fast_gain_code[ch])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 3, s->fast_gain_code[ch]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "mdct_test",
          "new_api": null,
          "old_text": "mdct_test(&lfg)",
          "new_text": null,
          "old_line_content": "    mdct_test(&lfg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0); /* no data to skip */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "new_text": null,
          "old_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "new_line_content": "    .channel_layouts = (const int64_t[]){",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, b-1, q)",
          "new_text": null,
          "old_line_content": "            default:              put_bits(&s->pb, b-1, q); break;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "CMUL",
          "new_api": null,
          "old_text": "CMUL(x[i].re, x[i].im, re, im, -xcos1[i], xsin1[i])",
          "new_text": null,
          "old_line_content": "        CMUL(x[i].re, x[i].im, re, im, -xcos1[i], xsin1[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "fft",
          "new_api": null,
          "old_text": "fft(x, MDCT_NBITS - 2)",
          "new_text": null,
          "old_line_content": "    fft(x, MDCT_NBITS - 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "mul_poly",
          "new_api": null,
          "old_text": "mul_poly(a, a, poly)",
          "new_text": null,
          "old_line_content": "        a = mul_poly(a, a, poly);",
          "new_line_content": "        n >>= 1;",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "CMUL",
          "new_api": null,
          "old_text": "CMUL(re1, im1, re, im, xsin1[i], xcos1[i])",
          "new_text": null,
          "old_line_content": "        CMUL(re1, im1, re, im, xsin1[i], xcos1[i]);",
          "new_line_content": "        out[                 2*i] = im1;",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    frame = s->pb.buf;",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pad_bytes >= 0)",
          "new_text": null,
          "old_line_content": "    assert(pad_bytes >= 0);",
          "new_line_content": "    if (pad_bytes > 0)",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "MUL16",
          "new_api": null,
          "old_text": "MUL16(input[n-i-1], window[i])",
          "new_text": null,
          "old_line_content": "        output[n-i-1] = MUL16(input[n-i-1], window[i]) >> 15;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "put_bits_ptr",
          "new_api": null,
          "old_text": "put_bits_ptr(&s->pb)",
          "new_text": null,
          "old_line_content": "        memset(put_bits_ptr(&s->pb), 0, pad_bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "new_text": null,
          "old_line_content": "    crc1 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "new_line_content": "                             frame + 4, frame_size_58 - 4));",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "AV_WB16",
          "new_api": null,
          "old_text": "AV_WB16(frame + 2, crc1)",
          "new_text": null,
          "old_line_content": "    AV_WB16(frame + 2, crc1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "new_text": null,
          "old_line_content": "    crc2 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "new_line_content": "                             frame + frame_size_58,",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(block->mask[ch], block1->mask[ch], AC3_CRITICAL_BANDS*sizeof(block->mask[0][0]))",
          "new_text": null,
          "old_line_content": "                memcpy(block->mask[ch], block1->mask[ch], AC3_CRITICAL_BANDS*sizeof(block->mask[0][0]));",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "AV_WB16",
          "new_api": null,
          "old_text": "AV_WB16(frame + frame_size - 2, crc2)",
          "new_text": null,
          "old_line_content": "    AV_WB16(frame + frame_size - 2, crc2);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(tab[i])",
          "new_text": null,
          "old_line_content": "        v |= abs(tab[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "ff_ac3_bit_alloc_calc_psd",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_psd(block->encoded_exp[ch], 0,\n                                          s->nb_coefs[ch],\n                                          block->psd[ch], block->band_psd[ch])",
          "new_text": null,
          "old_line_content": "                ff_ac3_bit_alloc_calc_psd(block->encoded_exp[ch], 0,",
          "new_line_content": "                                          s->nb_coefs[ch],",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(v)",
          "new_text": null,
          "old_line_content": "    return av_log2(v);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "ff_ac3_bit_alloc_calc_mask",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_mask(&s->bit_alloc, block->band_psd[ch],\n                                           0, s->nb_coefs[ch],\n                                           ff_ac3_fast_gain_tab[s->fast_gain_code[ch]],\n                                           ch == s->lfe_channel,\n                                           DBA_NONE, 0, NULL, NULL, NULL,\n                                           block->mask[ch])",
          "new_text": null,
          "old_line_content": "                ff_ac3_bit_alloc_calc_mask(&s->bit_alloc, block->band_psd[ch],",
          "new_line_content": "                                           0, s->nb_coefs[ch],",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE)",
          "new_text": null,
          "old_line_content": "    init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "output_frame_header",
          "new_api": null,
          "old_text": "output_frame_header(s)",
          "new_text": null,
          "old_line_content": "    output_frame_header(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "output_audio_block",
          "new_api": null,
          "old_text": "output_audio_block(s, blk)",
          "new_text": null,
          "old_line_content": "        output_audio_block(s, blk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "output_frame_end",
          "new_api": null,
          "old_text": "output_frame_end(s)",
          "new_text": null,
          "old_line_content": "    output_frame_end(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "adjust_frame_size",
          "new_api": null,
          "old_text": "adjust_frame_size(s)",
          "new_text": null,
          "old_line_content": "        adjust_frame_size(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "deinterleave_input_samples",
          "new_api": null,
          "old_text": "deinterleave_input_samples(s, samples)",
          "new_text": null,
          "old_line_content": "    deinterleave_input_samples(s, samples);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "apply_mdct",
          "new_api": null,
          "old_text": "apply_mdct(s)",
          "new_text": null,
          "old_line_content": "    apply_mdct(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "lshift_tab",
          "new_api": null,
          "old_text": "lshift_tab(s->windowed_samples, AC3_WINDOW_SIZE, v)",
          "new_text": null,
          "old_line_content": "    lshift_tab(s->windowed_samples, AC3_WINDOW_SIZE, v);",
          "new_line_content": "    return v - 9;",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "process_exponents",
          "new_api": null,
          "old_text": "process_exponents(s)",
          "new_text": null,
          "old_line_content": "    process_exponents(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "compute_bit_allocation",
          "new_api": null,
          "old_text": "compute_bit_allocation(s)",
          "new_text": null,
          "old_line_content": "    ret = compute_bit_allocation(s);",
          "new_line_content": "    if (ret) {",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\");",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "quantize_mantissas",
          "new_api": null,
          "old_text": "quantize_mantissas(s)",
          "new_text": null,
          "old_line_content": "    quantize_mantissas(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "reset_block_bap",
          "new_api": null,
          "old_text": "reset_block_bap(s)",
          "new_text": null,
          "old_line_content": "    reset_block_bap(s);",
          "new_line_content": "    mantissa_bits = 0;",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "output_frame",
          "new_api": null,
          "old_text": "output_frame(s, frame)",
          "new_text": null,
          "old_line_content": "    output_frame(s, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "ff_ac3_bit_alloc_calc_bap",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,\n                                      s->nb_coefs[ch], snr_offset,\n                                      s->bit_alloc.floor, ff_ac3_bap_tab,\n                                      block->bap[ch])",
          "new_text": null,
          "old_line_content": "            ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,",
          "new_line_content": "                                      s->nb_coefs[ch], snr_offset,",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "apply_window",
          "new_api": null,
          "old_text": "apply_window(s->windowed_samples, input_samples, ff_ac3_window, AC3_WINDOW_SIZE)",
          "new_text": null,
          "old_line_content": "            apply_window(s->windowed_samples, input_samples, ff_ac3_window, AC3_WINDOW_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "normalize_samples",
          "new_api": null,
          "old_text": "normalize_samples(s)",
          "new_text": null,
          "old_line_content": "            block->exp_shift[ch] = normalize_samples(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "compute_mantissa_size",
          "new_api": null,
          "old_text": "compute_mantissa_size(s, block->bap[ch], s->nb_coefs[ch])",
          "new_text": null,
          "old_line_content": "            mantissa_bits += compute_mantissa_size(s, block->bap[ch], s->nb_coefs[ch]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "mdct512",
          "new_api": null,
          "old_text": "mdct512(block->mdct_coef[ch], s->windowed_samples)",
          "new_text": null,
          "old_line_content": "            mdct512(block->mdct_coef[ch], s->windowed_samples);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->qmant_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->qmant_buffer);",
          "new_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++) {",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(block->mdct_coef[ch][i])",
          "new_text": null,
          "old_line_content": "                int v = abs(block->mdct_coef[ch][i]);",
          "new_line_content": "                if (v == 0)",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset) > bits_left) {",
          "new_line_content": "        snr_offset -= 64;",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(v)",
          "new_text": null,
          "old_line_content": "                    e = 23 - av_log2(v) + block->exp_shift[ch];",
          "new_line_content": "                    if (e >= 24) {",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&block->qmant)",
          "new_text": null,
          "old_line_content": "        av_freep(&block->qmant);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->coded_frame)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->coded_frame);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 64)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 64) <= bits_left) {",
          "new_line_content": "        snr_offset += 64;",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 16)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 16) <= bits_left) {",
          "new_line_content": "        snr_offset += 16;",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 4)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 4) <= bits_left) {",
          "new_line_content": "        snr_offset += 4;",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    if ((uint64_t)*channel_layout > 0x7FF)",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 1)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 1) <= bits_left) {",
          "new_line_content": "        snr_offset++;",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    ch_layout = *channel_layout;",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(exp1[i] - exp2[i])",
          "new_text": null,
          "old_line_content": "        sum += abs(exp1[i] - exp2[i]);",
          "new_line_content": "    return sum;",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "reset_block_bap",
          "new_api": null,
          "old_text": "reset_block_bap(s)",
          "new_text": null,
          "old_line_content": "    reset_block_bap(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 12,
      "total_additions": 154,
      "total_deletions": 153,
      "total_api_changes": 319
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 319,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          343
        ]
      }
    },
    "api_calls_before": 242,
    "api_calls_after": 243,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/849a50041c1c27e16da2ed235940af97a6673d3c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/849a50041c1c27e16da2ed235940af97a6673d3c/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/849a50041c1c27e16da2ed235940af97a6673d3c/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/849a50041c1c27e16da2ed235940af97a6673d3c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 720,
          "old_api": "\"+m\"(index)",
          "new_api": "\"m\"(minusindex)",
          "old_text": "\"+m\"(index)",
          "new_text": "\"m\"(minusindex)",
          "old_line_content": "        :\"=&a\"(coeff_count), \"+r\"(significant_coeff_ctx_base), \"+m\"(index)\\",
          "new_line_content": "        :\"r\"(c), \"m\"(minusstart), \"m\"(end), \"m\"(minusindex)\\",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "get_cabac",
          "new_api": "get_cabac_bypass",
          "old_text": "get_cabac(c, state)",
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "        if(get_cabac(c, state)==0){",
          "new_line_content": "            if(is_signed && get_cabac_bypass(c)){",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 770,
          "old_api": null,
          "new_api": "get_cabac",
          "old_text": null,
          "new_text": "get_cabac(c, state)",
          "old_line_content": "    for(i=1; i<max; i++){",
          "new_line_content": "        if(get_cabac(c, state)==0){",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "",
          "new_line_content": "    while(get_cabac_bypass(c)){",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "get_cabac",
          "old_text": null,
          "new_text": "get_cabac(c, state)",
          "old_line_content": "    for(i=0; i<max; i++){",
          "new_line_content": "        if(get_cabac(c, state)==0)",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "\"+m\"(index)",
          "old_text": null,
          "new_text": "\"+m\"(index)",
          "old_line_content": "        \"movl %%ebx, \"LOW      \"(%3)            \\n\\t\"",
          "new_line_content": "        :\"=&a\"(coeff_count), \"+r\"(significant_coeff_ctx_base), \"+m\"(index)\\",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "    while(m>>=1){",
          "new_line_content": "        v+= v + get_cabac_bypass(c);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "",
          "new_line_content": "    if(is_signed && get_cabac_bypass(c)){",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "get_cabac",
          "old_text": null,
          "new_text": "get_cabac(c, state)",
          "old_line_content": "",
          "new_line_content": "    if(get_cabac(c, state)==0)",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "renorm_cabac_decoder_once",
          "old_text": null,
          "new_text": "renorm_cabac_decoder_once(c)",
          "old_line_content": "    if(c->low < c->range<<17){",
          "new_line_content": "        renorm_cabac_decoder_once(c);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 772,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "            if(is_signed && get_cabac_bypass(c)){",
          "new_line_content": "                return -i;",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "    while(get_cabac_bypass(c)){",
          "new_line_content": "        i+= m;",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "get_cabac",
          "new_api": null,
          "old_text": "get_cabac(c, state)",
          "new_text": null,
          "old_line_content": "        if(get_cabac(c, state)==0)",
          "new_line_content": "            return i;",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "\"m\"(minusindex)",
          "new_api": null,
          "old_text": "\"m\"(minusindex)",
          "new_text": null,
          "old_line_content": "        :\"r\"(c), \"m\"(minusstart), \"m\"(end), \"m\"(minusindex)\\",
          "new_line_content": "        : \"%ecx\", \"%ebx\", \"%edx\", \"%esi\", \"memory\"\\",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "        v+= v + get_cabac_bypass(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "    if(is_signed && get_cabac_bypass(c)){",
          "new_line_content": "        return -i;",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "get_cabac",
          "new_api": null,
          "old_text": "get_cabac(c, state)",
          "new_text": null,
          "old_line_content": "    if(get_cabac(c, state)==0)",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "renorm_cabac_decoder_once",
          "new_api": null,
          "old_text": "renorm_cabac_decoder_once(c)",
          "new_text": null,
          "old_line_content": "        renorm_cabac_decoder_once(c);",
          "new_line_content": "        return 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 8,
      "total_deletions": 8,
      "total_api_changes": 18
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 18,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          713,
          698,
          702,
          679
        ]
      }
    },
    "api_calls_before": 66,
    "api_calls_after": 66,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 3,
      "total_diff_lines": 35
    }
  }
}
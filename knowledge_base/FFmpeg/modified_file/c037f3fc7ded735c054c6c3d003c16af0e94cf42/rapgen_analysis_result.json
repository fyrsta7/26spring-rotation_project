{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c037f3fc7ded735c054c6c3d003c16af0e94cf42",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c037f3fc7ded735c054c6c3d003c16af0e94cf42/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c037f3fc7ded735c054c6c3d003c16af0e94cf42/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c037f3fc7ded735c054c6c3d003c16af0e94cf42/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 837,
          "old_api": "put_mb_modes",
          "new_api": "put_qscale",
          "old_text": "put_mb_modes(s, 5, 0x03, 0, 0)",
          "new_text": "put_qscale(s)",
          "old_line_content": "                put_mb_modes(s, 5, 0x03, 0, 0);",
          "new_line_content": "                put_qscale(s);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "memset",
          "new_api": "get_bits_diff",
          "old_text": "memset(s->last_mv, 0, sizeof(s->last_mv))",
          "new_text": "get_bits_diff(s)",
          "old_line_content": "            memset(s->last_mv, 0, sizeof(s->last_mv));",
          "new_line_content": "            s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "get_bits_diff",
          "new_api": "put_mb_modes",
          "old_text": "get_bits_diff(s)",
          "new_text": "put_mb_modes(s, 2, 1, 0, 0)",
          "old_line_content": "                        s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                            put_mb_modes(s, 2, 1, 0, 0);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "put_mb_modes",
          "new_api": "put_qscale",
          "old_text": "put_mb_modes(s, 1, 1, 1, 0)",
          "new_text": "put_qscale(s)",
          "old_line_content": "                            put_mb_modes(s, 1, 1, 1, 0);    /* motion + cbp */",
          "new_line_content": "                            put_qscale(s);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "get_bits_diff",
          "new_api": "put_mb_modes",
          "old_text": "get_bits_diff(s)",
          "new_text": "put_mb_modes(s, 1, 1, 1, 0)",
          "old_line_content": "                        s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                            put_mb_modes(s, 1, 1, 1, 0);    /* motion + cbp */",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "mpeg1_encode_motion",
          "new_api": "get_bits_diff",
          "old_text": "mpeg1_encode_motion(s,\n                                            motion_x - s->last_mv[0][0][0],\n                                            s->f_code)",
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                        s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "mpeg1_encode_motion",
          "new_api": "get_bits_diff",
          "old_text": "mpeg1_encode_motion(s,\n                                        motion_x - s->last_mv[0][0][0],\n                                        s->f_code)",
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                    s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "put_mb_modes",
          "new_api": "put_qscale",
          "old_text": "put_mb_modes(s, 1, 1, 1, 1)",
          "new_text": "put_qscale(s)",
          "old_line_content": "                        put_mb_modes(s, 1, 1, 1, 1);    /* motion + cbp */",
          "new_line_content": "                        put_qscale(s);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "put_bits",
          "new_api": "get_bits_diff",
          "old_text": "put_bits(&s->pb, 1, s->field_select[0][i])",
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                    put_bits(&s->pb, 1, s->field_select[0][i]);",
          "new_line_content": "                s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "put_mb_modes",
          "new_api": "put_qscale",
          "old_text": "put_mb_modes(s, 5 - s->mv_dir, 3, 1, 0)",
          "new_text": "put_qscale(s)",
          "old_line_content": "                        put_mb_modes(s, 5 - s->mv_dir, 3, 1, 0);",
          "new_line_content": "                        put_qscale(s);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "mpeg1_encode_motion",
          "new_api": "get_bits_diff",
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][0][0] - s->last_mv[0][0][0],\n                                        s->f_code)",
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "put_mb_modes",
          "new_api": "put_qscale",
          "old_text": "put_mb_modes(s, 5 - s->mv_dir, 3, 1, 1)",
          "new_text": "put_qscale(s)",
          "old_line_content": "                        put_mb_modes(s, 5 - s->mv_dir, 3, 1, 1);",
          "new_line_content": "                        put_qscale(s);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "ff_mpeg1_init_uni_ac_vlc",
          "new_api": "ff_rl_init",
          "old_text": "ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg1, uni_mpeg1_ac_vlc_len)",
          "new_text": "ff_rl_init(&ff_rl_mpeg2, mpeg12_static_rl_table_store[1])",
          "old_line_content": "    ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg1, uni_mpeg1_ac_vlc_len);",
          "new_line_content": "    ff_rl_init(&ff_rl_mpeg2, mpeg12_static_rl_table_store[1]);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "OFFSET",
          "new_api": "FF_MPV_OFFSET",
          "old_text": "OFFSET(a53_cc)",
          "new_text": "FF_MPV_OFFSET(q_scale_type)",
          "old_line_content": "    { \"a53cc\", \"Use A53 Closed Captions (if available)\", OFFSET(a53_cc),         AV_OPT_TYPE_BOOL, { .i64 = 1 }, 0, 1, VE },",
          "new_line_content": "    { \"non_linear_quant\", \"Use nonlinear quantizer.\",    FF_MPV_OFFSET(q_scale_type),   AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, VE },",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "OFFSET",
          "new_api": "FF_MPV_OFFSET",
          "old_text": "OFFSET(seq_disp_ext)",
          "new_text": "FF_MPV_OFFSET(alternate_scan)",
          "old_line_content": "    { \"seq_disp_ext\",     \"Write sequence_display_extension blocks.\", OFFSET(seq_disp_ext), AV_OPT_TYPE_INT, { .i64 = -1 }, -1, 1, VE, \"seq_disp_ext\" },",
          "new_line_content": "    { \"alternate_scan\",   \"Enable alternate scantable.\", FF_MPV_OFFSET(alternate_scan), AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, VE },",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1029,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                if (chroma_y_shift) {",
          "new_line_content": "            s->mv_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp][1],\n                             ff_mpeg12_mbPatTable[cbp][0])",
          "old_line_content": "                             ff_mpeg12_mbPatTable[cbp][0]);",
          "new_line_content": "                    put_bits(&s->pb,",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp >> 2][1],\n                             ff_mpeg12_mbPatTable[cbp >> 2][0])",
          "old_line_content": "                             ff_mpeg12_mbPatTable[cbp >> 2][0]);",
          "new_line_content": "                    put_bits(&s->pb,",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, 2, cbp)",
          "old_line_content": "            }",
          "new_line_content": "                    put_sbits(&s->pb, 2, cbp);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "mpeg1_encode_block",
          "old_text": null,
          "new_text": "mpeg1_encode_block(s, block[i], i)",
          "old_line_content": "        if (s->mb_intra)",
          "new_line_content": "                mpeg1_encode_block(s, block[i], i);",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "}",
          "new_line_content": "            s->p_tex_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "mpeg1_encode_mb_internal",
          "old_text": null,
          "new_text": "mpeg1_encode_mb_internal(s, block, motion_x, motion_y, 8, 0)",
          "old_line_content": "",
          "new_line_content": "        mpeg1_encode_mb_internal(s, block, motion_x, motion_y, 8, 0);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "ff_rl_init",
          "old_text": null,
          "new_text": "ff_rl_init(&ff_rl_mpeg1, mpeg12_static_rl_table_store[0])",
          "old_line_content": "",
          "new_line_content": "    ff_rl_init(&ff_rl_mpeg1, mpeg12_static_rl_table_store[0]);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "ff_mpeg1_init_uni_ac_vlc",
          "old_text": null,
          "new_text": "ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg1, uni_mpeg1_ac_vlc_len)",
          "old_line_content": "",
          "new_line_content": "    ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg1, uni_mpeg1_ac_vlc_len);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "ff_mpeg1_init_uni_ac_vlc",
          "old_text": null,
          "new_text": "ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg2, uni_mpeg2_ac_vlc_len)",
          "old_line_content": "    /* build unified dc encoding tables */",
          "new_line_content": "    ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg2, uni_mpeg2_ac_vlc_len);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(diff)",
          "old_line_content": "            diff--;",
          "new_line_content": "        adiff = FFABS(diff);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(2 * adiff)",
          "old_line_content": "        bits = ff_mpeg12_vlc_dc_lum_bits[index] + index;",
          "new_line_content": "        index = av_log2(2 * adiff);",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "av_mod_uintp2",
          "old_text": null,
          "new_text": "av_mod_uintp2(diff, index)",
          "old_line_content": "",
          "new_line_content": "               av_mod_uintp2(diff, index);",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": null,
          "new_api": "av_mod_uintp2",
          "old_text": null,
          "new_text": "av_mod_uintp2(diff, index)",
          "old_line_content": "    }",
          "new_line_content": "               av_mod_uintp2(diff, index);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "ff_mpeg12_common_init",
          "old_text": null,
          "new_text": "ff_mpeg12_common_init(s)",
          "old_line_content": "    s->me.mv_penalty = mv_penalty;",
          "new_line_content": "    ff_mpeg12_common_init(s);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "ff_thread_once",
          "old_text": null,
          "new_text": "ff_thread_once(&init_static_once, mpeg12_encode_init_static)",
          "old_line_content": "",
          "new_line_content": "    ff_thread_once(&init_static_once, mpeg12_encode_init_static);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(a53_cc)",
          "old_line_content": "    {     \"auto\",   NULL, 0, AV_OPT_TYPE_CONST,  {.i64 = -1},  0, 0, VE, \"seq_disp_ext\" },",
          "new_line_content": "    { \"a53cc\", \"Use A53 Closed Captions (if available)\", OFFSET(a53_cc),         AV_OPT_TYPE_BOOL, { .i64 = 1 }, 0, 1, VE },",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(seq_disp_ext)",
          "old_line_content": "    {     \"never\",  NULL, 0, AV_OPT_TYPE_CONST,  {.i64 = 0 },  0, 0, VE, \"seq_disp_ext\" },",
          "new_line_content": "    { \"seq_disp_ext\",     \"Write sequence_display_extension blocks.\", OFFSET(seq_disp_ext), AV_OPT_TYPE_INT, { .i64 = -1 }, -1, 1, VE, \"seq_disp_ext\" },",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(video_format)",
          "old_line_content": "    {     \"pal\",          NULL, 0, AV_OPT_TYPE_CONST,  {.i64 = VIDEO_FORMAT_PAL        },  0, 0, VE, \"video_format\" },",
          "new_line_content": "    { \"video_format\",     \"Video_format in the sequence_display_extension indicating the source of the video.\", OFFSET(video_format), AV_OPT_TYPE_INT, { .i64 = VIDEO_FORMAT_UNSPECIFIED }, 0, 7, VE, \"video_format\" },",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "LEVEL",
          "old_text": null,
          "new_text": "LEVEL(\"main\",     8)",
          "old_line_content": "#undef LEVEL",
          "new_line_content": "    { LEVEL(\"main\",     8) },",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "LEVEL",
          "old_text": null,
          "new_text": "LEVEL(\"low\",     10)",
          "old_line_content": "    FF_MPV_COMMON_OPTS",
          "new_line_content": "    { LEVEL(\"low\",     10) },",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "FF_MPV_OFFSET",
          "old_text": null,
          "new_text": "FF_MPV_OFFSET(mpeg_quant)",
          "old_line_content": "    FF_MPV_DEPRECATED_MATRIX_OPT",
          "new_line_content": "    { \"mpeg_quant\",       \"Deprecated, does nothing\", FF_MPV_OFFSET(mpeg_quant),",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "mpeg12_class",
          "old_text": null,
          "new_text": "mpeg12_class(1)",
          "old_line_content": "",
          "new_line_content": "mpeg12_class(1)",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "mpeg12_class",
          "old_text": null,
          "new_text": "mpeg12_class(2)",
          "old_line_content": "const AVCodec ff_mpeg1video_encoder = {",
          "new_line_content": "mpeg12_class(2)",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"MPEG-1 video\")",
          "old_line_content": "    .id                   = AV_CODEC_ID_MPEG1VIDEO,",
          "new_line_content": "    .long_name            = NULL_IF_CONFIG_SMALL(\"MPEG-1 video\"),",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"MPEG-2 video\")",
          "old_line_content": "    .id                   = AV_CODEC_ID_MPEG2VIDEO,",
          "new_line_content": "    .long_name            = NULL_IF_CONFIG_SMALL(\"MPEG-2 video\"),",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "IS_MPEG1",
          "old_text": null,
          "new_text": "IS_MPEG1(s)",
          "old_line_content": "         (s->pict_type == AV_PICTURE_TYPE_B && s->mv_dir == s->last_mv_dir &&",
          "new_line_content": "         (mb_y != s->end_mb_y - 1 && IS_MPEG1(s))) &&",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(s->mb_skip_run == 0)",
          "old_line_content": "        } else {",
          "new_line_content": "            av_assert0(s->mb_skip_run == 0);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "encode_mb_skip_run",
          "old_text": null,
          "new_text": "encode_mb_skip_run(s, s->mb_skip_run)",
          "old_line_content": "",
          "new_line_content": "            encode_mb_skip_run(s, s->mb_skip_run);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 2, 1, 0, 0)",
          "old_line_content": "            } else {",
          "new_line_content": "                put_mb_modes(s, 2, 1, 0, 0);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "put_qscale",
          "old_text": null,
          "new_text": "put_qscale(s)",
          "old_line_content": "                /* macroblock_type: macroblock_quant = 0 */",
          "new_line_content": "                put_qscale(s);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 1, 1, 0, 0)",
          "old_line_content": "            }",
          "new_line_content": "                put_mb_modes(s, 1, 1, 0, 0);",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "        } else if (s->mb_intra) {",
          "new_line_content": "            s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 6, 0x01, 0, 0)",
          "old_line_content": "            } else {",
          "new_line_content": "                put_mb_modes(s, 6, 0x01, 0, 0);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5, 0x03, 0, 0)",
          "old_line_content": "            }",
          "new_line_content": "                put_mb_modes(s, 5, 0x03, 0, 0);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(s->last_mv, 0, sizeof(s->last_mv))",
          "old_line_content": "            if (s->mv_type == MV_TYPE_16X16) {",
          "new_line_content": "            memset(s->last_mv, 0, sizeof(s->last_mv));",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5, 1, 0, 0)",
          "old_line_content": "                        } else {",
          "new_line_content": "                            put_mb_modes(s, 5, 1, 0, 0);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "put_qscale",
          "old_text": null,
          "new_text": "put_qscale(s)",
          "old_line_content": "                            /* macroblock_pattern only */",
          "new_line_content": "                            put_qscale(s);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                        if (s->dquant) {",
          "new_line_content": "                        s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5, 2, 1, 0)",
          "old_line_content": "                        } else {",
          "new_line_content": "                            put_mb_modes(s, 5, 2, 1, 0);    /* motion + cbp */",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            motion_x - s->last_mv[0][0][0],\n                                            s->f_code)",
          "old_line_content": "                                            s->f_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            motion_y - s->last_mv[0][0][1],\n                                            s->f_code)",
          "old_line_content": "                                            s->f_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                } else {",
          "new_line_content": "                        s->mv_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 2)",
          "old_line_content": "                    // RAL: f_code parameter added",
          "new_line_content": "                        put_bits(&s->pb, 2, 2);     /* motion_type: frame */",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        motion_x - s->last_mv[0][0][0],\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        motion_y - s->last_mv[0][0][1],\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                s->last_mv[0][1][0] = s->last_mv[0][0][0] = motion_x;",
          "new_line_content": "                    s->mv_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(!s->frame_pred_frame_dct && s->mv_type == MV_TYPE_FIELD)",
          "old_line_content": "                if (cbp) {",
          "new_line_content": "                av_assert2(!s->frame_pred_frame_dct && s->mv_type == MV_TYPE_FIELD);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5, 2, 1, 1)",
          "old_line_content": "                    } else {",
          "new_line_content": "                        put_mb_modes(s, 5, 2, 1, 1);    /* motion + cbp */",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 1, 1, 1, 1)",
          "old_line_content": "                } else {",
          "new_line_content": "                        put_mb_modes(s, 1, 1, 1, 1);    /* motion + cbp */",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 3, 1)",
          "old_line_content": "                    s->qscale -= s->dquant;",
          "new_line_content": "                    put_bits(&s->pb, 3, 1);             /* motion only */",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 1)",
          "old_line_content": "                }",
          "new_line_content": "                    put_bits(&s->pb, 2, 1);             /* motion_type: field */",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, s->field_select[0][i])",
          "old_line_content": "                                        s->mv[0][i][0] - s->last_mv[0][i][0],",
          "new_line_content": "                    put_bits(&s->pb, 1, s->field_select[0][i]);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][i][0] - s->last_mv[0][i][0],\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][i][1] - (s->last_mv[0][i][1] >> 1),\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "            if (cbp) {",
          "new_line_content": "                s->mv_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp][1],\n                             ff_mpeg12_mbPatTable[cbp][0])",
          "old_line_content": "                             ff_mpeg12_mbPatTable[cbp][0]);",
          "new_line_content": "                    put_bits(&s->pb,",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp >> 2][1],\n                             ff_mpeg12_mbPatTable[cbp >> 2][0])",
          "old_line_content": "                             ff_mpeg12_mbPatTable[cbp >> 2][0]);",
          "new_line_content": "                    put_bits(&s->pb,",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, 2, cbp)",
          "old_line_content": "            }",
          "new_line_content": "                    put_sbits(&s->pb, 2, cbp);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 8 - s->mv_dir, 2, 1, 0)",
          "old_line_content": "                    } else {",
          "new_line_content": "                            put_mb_modes(s, 8 - s->mv_dir, 2, 1, 0);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5 - s->mv_dir, 3, 1, 0)",
          "old_line_content": "                } else {                        // No coded bloc pattern",
          "new_line_content": "                        put_mb_modes(s, 5 - s->mv_dir, 3, 1, 0);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 2)",
          "old_line_content": "                }",
          "new_line_content": "                        put_bits(&s->pb, 2, 2); /* motion_type: frame */",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][0][0] - s->last_mv[0][0][0],\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][0][1] - s->last_mv[0][0][1],\n                                        s->f_code)",
          "old_line_content": "                                        s->f_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[1][0][0] - s->last_mv[1][0][0],\n                                        s->b_code)",
          "old_line_content": "                                        s->b_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                        s->mv[1][0][1] - s->last_mv[1][0][1],\n                                        s->b_code)",
          "old_line_content": "                                        s->b_code);",
          "new_line_content": "                    mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(s->mv_type == MV_TYPE_FIELD)",
          "old_line_content": "                if (cbp) {                      // With coded bloc pattern",
          "new_line_content": "                av_assert2(s->mv_type == MV_TYPE_FIELD);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(!s->frame_pred_frame_dct)",
          "old_line_content": "                    if (s->dquant) {",
          "new_line_content": "                av_assert2(!s->frame_pred_frame_dct);",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 8 - s->mv_dir, 2, 1, 1)",
          "old_line_content": "                    } else {",
          "new_line_content": "                            put_mb_modes(s, 8 - s->mv_dir, 2, 1, 1);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "put_mb_modes",
          "old_text": null,
          "new_text": "put_mb_modes(s, 5 - s->mv_dir, 3, 1, 1)",
          "old_line_content": "                } else {                        // No coded bloc pattern",
          "new_line_content": "                        put_mb_modes(s, 5 - s->mv_dir, 3, 1, 1);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 5 - s->mv_dir, 2)",
          "old_line_content": "                    s->qscale -= s->dquant;",
          "new_line_content": "                    put_bits(&s->pb, 5 - s->mv_dir, 2);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, 1)",
          "old_line_content": "                }",
          "new_line_content": "                    put_bits(&s->pb, 2, 1);     /* motion_type: field */",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": null,
          "new_api": "get_bits_diff",
          "old_text": null,
          "new_text": "get_bits_diff(s)",
          "old_line_content": "                    for (i = 0; i < 2; i++) {",
          "new_line_content": "                s->misc_bits += get_bits_diff(s);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, s->field_select[0][i])",
          "old_line_content": "                                            s->mv[0][i][0] - s->last_mv[0][i][0],",
          "new_line_content": "                        put_bits(&s->pb, 1, s->field_select[0][i]);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            s->mv[0][i][0] - s->last_mv[0][i][0],\n                                            s->f_code)",
          "old_line_content": "                                            s->f_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            s->mv[0][i][1] - (s->last_mv[0][i][1] >> 1),\n                                            s->f_code)",
          "old_line_content": "                                            s->f_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, s->field_select[1][i])",
          "old_line_content": "                                            s->mv[1][i][0] - s->last_mv[1][i][0],",
          "new_line_content": "                        put_bits(&s->pb, 1, s->field_select[1][i]);",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            s->mv[1][i][0] - s->last_mv[1][i][0],\n                                            s->b_code)",
          "old_line_content": "                                            s->b_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "mpeg1_encode_motion",
          "old_text": null,
          "new_text": "mpeg1_encode_motion(s,\n                                            s->mv[1][i][1] - (s->last_mv[1][i][1] >> 1),\n                                            s->b_code)",
          "old_line_content": "                                            s->b_code);",
          "new_line_content": "                        mpeg1_encode_motion(s,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1027,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "            s->mv_bits += get_bits_diff(s);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp][1],\n                             ff_mpeg12_mbPatTable[cbp][0])",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb,",
          "new_line_content": "            if (cbp) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp >> 2][1],\n                             ff_mpeg12_mbPatTable[cbp >> 2][0])",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb,",
          "new_line_content": "                             ff_mpeg12_mbPatTable[cbp][0]);",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, 2, cbp)",
          "new_text": null,
          "old_line_content": "                    put_sbits(&s->pb, 2, cbp);",
          "new_line_content": "                             ff_mpeg12_mbPatTable[cbp >> 2][1],",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "mpeg1_encode_block",
          "new_api": null,
          "old_text": "mpeg1_encode_block(s, block[i], i)",
          "new_text": null,
          "old_line_content": "                mpeg1_encode_block(s, block[i], i);",
          "new_line_content": "        for (i = 0; i < mb_block_count; i++)",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "            s->i_tex_bits += get_bits_diff(s);",
          "new_line_content": "        s->mb_skip_run = 0;",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "mpeg1_encode_mb_internal",
          "new_api": null,
          "old_text": "mpeg1_encode_mb_internal(s, block, motion_x, motion_y, 6, 1)",
          "new_text": null,
          "old_line_content": "        mpeg1_encode_mb_internal(s, block, motion_x, motion_y, 6, 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "ff_rl_init",
          "new_api": null,
          "old_text": "ff_rl_init(&ff_rl_mpeg1, mpeg12_static_rl_table_store[0])",
          "new_text": null,
          "old_line_content": "    ff_rl_init(&ff_rl_mpeg1, mpeg12_static_rl_table_store[0]);",
          "new_line_content": "    static uint8_t mpeg12_static_rl_table_store[2][2][2*MAX_RUN + MAX_LEVEL + 3];",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "ff_rl_init",
          "new_api": null,
          "old_text": "ff_rl_init(&ff_rl_mpeg2, mpeg12_static_rl_table_store[1])",
          "new_text": null,
          "old_line_content": "    ff_rl_init(&ff_rl_mpeg2, mpeg12_static_rl_table_store[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "ff_mpeg1_init_uni_ac_vlc",
          "new_api": null,
          "old_text": "ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg2, uni_mpeg2_ac_vlc_len)",
          "new_text": null,
          "old_line_content": "    ff_mpeg1_init_uni_ac_vlc(&ff_rl_mpeg2, uni_mpeg2_ac_vlc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(diff)",
          "new_text": null,
          "old_line_content": "        adiff = FFABS(diff);",
          "new_line_content": "        int diff = i;",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(2 * adiff)",
          "new_text": null,
          "old_line_content": "        index = av_log2(2 * adiff);",
          "new_line_content": "        if (diff < 0)",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "av_mod_uintp2",
          "new_api": null,
          "old_text": "av_mod_uintp2(diff, index)",
          "new_text": null,
          "old_line_content": "               av_mod_uintp2(diff, index);",
          "new_line_content": "        bits = ff_mpeg12_vlc_dc_lum_bits[index] + index;",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "av_mod_uintp2",
          "new_api": null,
          "old_text": "av_mod_uintp2(diff, index)",
          "new_text": null,
          "old_line_content": "               av_mod_uintp2(diff, index);",
          "new_line_content": "        bits = ff_mpeg12_vlc_dc_chroma_bits[index] + index;",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "ff_mpeg12_common_init",
          "new_api": null,
          "old_text": "ff_mpeg12_common_init(s)",
          "new_text": null,
          "old_line_content": "    ff_mpeg12_common_init(s);",
          "new_line_content": "    static AVOnce init_static_once = AV_ONCE_INIT;",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "ff_thread_once",
          "new_api": null,
          "old_text": "ff_thread_once(&init_static_once, mpeg12_encode_init_static)",
          "new_text": null,
          "old_line_content": "    ff_thread_once(&init_static_once, mpeg12_encode_init_static);",
          "new_line_content": "    s->inter_ac_vlc_last_length = uni_mpeg1_ac_vlc_len;",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "FF_MPV_OFFSET",
          "new_api": null,
          "old_text": "FF_MPV_OFFSET(intra_vlc_format)",
          "new_text": null,
          "old_line_content": "      FF_MPV_OFFSET(intra_vlc_format),    AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, VE },",
          "new_line_content": "    COMMON_OPTS",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "FF_MPV_OFFSET",
          "new_api": null,
          "old_text": "FF_MPV_OFFSET(q_scale_type)",
          "new_text": null,
          "old_line_content": "    { \"non_linear_quant\", \"Use nonlinear quantizer.\",    FF_MPV_OFFSET(q_scale_type),   AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, VE },",
          "new_line_content": "    { \"intra_vlc\",        \"Use MPEG-2 intra VLC table.\",",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(video_format)",
          "new_text": null,
          "old_line_content": "    { \"video_format\",     \"Video_format in the sequence_display_extension indicating the source of the video.\", OFFSET(video_format), AV_OPT_TYPE_INT, { .i64 = VIDEO_FORMAT_UNSPECIFIED }, 0, 7, VE, \"video_format\" },",
          "new_line_content": "    {     \"never\",  NULL, 0, AV_OPT_TYPE_CONST,  {.i64 = 0 },  0, 0, VE, \"seq_disp_ext\" },",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "LEVEL",
          "new_api": null,
          "old_text": "LEVEL(\"high\",     4)",
          "new_text": null,
          "old_line_content": "    { LEVEL(\"high\",     4) },",
          "new_line_content": "    {     \"unspecified\",  NULL, 0, AV_OPT_TYPE_CONST,  {.i64 = VIDEO_FORMAT_UNSPECIFIED},  0, 0, VE, \"video_format\" },",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "LEVEL",
          "new_api": null,
          "old_text": "LEVEL(\"high1440\", 6)",
          "new_text": null,
          "old_line_content": "    { LEVEL(\"high1440\", 6) },",
          "new_line_content": "#define LEVEL(name, value) name, NULL, 0, AV_OPT_TYPE_CONST, { .i64 = value }, 0, 0, VE, \"avctx.level\"",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "FF_MPV_OFFSET",
          "new_api": null,
          "old_text": "FF_MPV_OFFSET(mpeg_quant)",
          "new_text": null,
          "old_line_content": "    { \"mpeg_quant\",       \"Deprecated, does nothing\", FF_MPV_OFFSET(mpeg_quant),",
          "new_line_content": "    FF_MPV_COMMON_OPTS",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "mpeg12_class",
          "new_api": null,
          "old_text": "mpeg12_class(1)",
          "new_text": null,
          "old_line_content": "mpeg12_class(1)",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "mpeg12_class",
          "new_api": null,
          "old_text": "mpeg12_class(2)",
          "new_text": null,
          "old_line_content": "mpeg12_class(2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"MPEG-1 video\")",
          "new_text": null,
          "old_line_content": "    .long_name            = NULL_IF_CONFIG_SMALL(\"MPEG-1 video\"),",
          "new_line_content": "const AVCodec ff_mpeg1video_encoder = {",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"MPEG-2 video\")",
          "new_text": null,
          "old_line_content": "    .long_name            = NULL_IF_CONFIG_SMALL(\"MPEG-2 video\"),",
          "new_line_content": "const AVCodec ff_mpeg2video_encoder = {",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(s->mb_skip_run == 0)",
          "new_text": null,
          "old_line_content": "            av_assert0(s->mb_skip_run == 0);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "encode_mb_skip_run",
          "new_api": null,
          "old_text": "encode_mb_skip_run(s, s->mb_x)",
          "new_text": null,
          "old_line_content": "            encode_mb_skip_run(s, s->mb_x);",
          "new_line_content": "        if (first_mb) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 2, 1, 0, 0)",
          "new_text": null,
          "old_line_content": "                put_mb_modes(s, 2, 1, 0, 0);",
          "new_line_content": "            if (s->dquant && cbp) {",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                put_qscale(s);",
          "new_line_content": "                /* macroblock_type: macroblock_quant = 1 */",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 1, 1, 0, 0)",
          "new_text": null,
          "old_line_content": "                put_mb_modes(s, 1, 1, 0, 0);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "            s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                s->qscale -= s->dquant;",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 6, 0x01, 0, 0)",
          "new_text": null,
          "old_line_content": "                put_mb_modes(s, 6, 0x01, 0, 0);",
          "new_line_content": "        } else if (s->mb_intra) {",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                put_qscale(s);",
          "new_line_content": "            if (s->dquant && cbp) {",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "            s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                s->qscale -= s->dquant;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 5, 1, 0, 0)",
          "new_text": null,
          "old_line_content": "                            put_mb_modes(s, 5, 1, 0, 0);",
          "new_line_content": "                        if (s->dquant) {",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                            put_qscale(s);",
          "new_line_content": "                            /* macroblock_pattern & quant */",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 2, 1, 0, 0)",
          "new_text": null,
          "old_line_content": "                            put_mb_modes(s, 2, 1, 0, 0);",
          "new_line_content": "                        } else {",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 5, 2, 1, 0)",
          "new_text": null,
          "old_line_content": "                            put_mb_modes(s, 5, 2, 1, 0);    /* motion + cbp */",
          "new_line_content": "                    } else {",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                            put_qscale(s);",
          "new_line_content": "                        if (s->dquant) {",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                            motion_y - s->last_mv[0][0][1],\n                                            s->f_code)",
          "new_text": null,
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                                            s->f_code);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                        s->mv_bits += get_bits_diff(s);",
          "new_line_content": "                                            motion_y - s->last_mv[0][0][1],",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, 1)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 3, 1);         /* motion only */",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                    s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                    if (!s->frame_pred_frame_dct)",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        motion_y - s->last_mv[0][0][1],\n                                        s->f_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                                        s->f_code);",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                    s->mv_bits += get_bits_diff(s);",
          "new_line_content": "                                        s->f_code);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(!s->frame_pred_frame_dct && s->mv_type == MV_TYPE_FIELD)",
          "new_text": null,
          "old_line_content": "                av_assert2(!s->frame_pred_frame_dct && s->mv_type == MV_TYPE_FIELD);",
          "new_line_content": "                s->last_mv[0][1][1] = s->last_mv[0][0][1] = motion_y;",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 5, 2, 1, 1)",
          "new_text": null,
          "old_line_content": "                        put_mb_modes(s, 5, 2, 1, 1);    /* motion + cbp */",
          "new_line_content": "                if (cbp) {",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                        put_qscale(s);",
          "new_line_content": "                    if (s->dquant) {",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, 1)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 3, 1);             /* motion only */",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 1)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 2, 1);             /* motion_type: field */",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                    s->qscale -= s->dquant;",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][i][0] - s->last_mv[0][i][0],\n                                        s->f_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                for (i = 0; i < 2; i++) {",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][i][1] - (s->last_mv[0][i][1] >> 1),\n                                        s->f_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                                        s->mv[0][i][0] - s->last_mv[0][i][0],",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                s->mv_bits += get_bits_diff(s);",
          "new_line_content": "                    s->last_mv[0][i][1] = 2 * s->mv[0][i][1];",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp][1],\n                             ff_mpeg12_mbPatTable[cbp][0])",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb,",
          "new_line_content": "            if (cbp) {",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,\n                             ff_mpeg12_mbPatTable[cbp >> 2][1],\n                             ff_mpeg12_mbPatTable[cbp >> 2][0])",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb,",
          "new_line_content": "                             ff_mpeg12_mbPatTable[cbp][0]);",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, 2, cbp)",
          "new_text": null,
          "old_line_content": "                    put_sbits(&s->pb, 2, cbp);",
          "new_line_content": "                             ff_mpeg12_mbPatTable[cbp >> 2][1],",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 6, 3, 1, 0)",
          "new_text": null,
          "old_line_content": "                            put_mb_modes(s, 6, 3, 1, 0);",
          "new_line_content": "                    if (s->dquant) {",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                        put_qscale(s);",
          "new_line_content": "                        else",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 5 - s->mv_dir, 2)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 5 - s->mv_dir, 2);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                    s->qscale -= s->dquant;",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[0][0][1] - s->last_mv[0][0][1],\n                                        s->f_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                                        s->mv[0][0][0] - s->last_mv[0][0][0],",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[1][0][0] - s->last_mv[1][0][0],\n                                        s->b_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                        s->mv[1][0][1] - s->last_mv[1][0][1],\n                                        s->b_code)",
          "new_text": null,
          "old_line_content": "                    mpeg1_encode_motion(s,",
          "new_line_content": "                                        s->mv[1][0][0] - s->last_mv[1][0][0],",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(s->mv_type == MV_TYPE_FIELD)",
          "new_text": null,
          "old_line_content": "                av_assert2(s->mv_type == MV_TYPE_FIELD);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(!s->frame_pred_frame_dct)",
          "new_text": null,
          "old_line_content": "                av_assert2(!s->frame_pred_frame_dct);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "put_mb_modes",
          "new_api": null,
          "old_text": "put_mb_modes(s, 6, 3, 1, 1)",
          "new_text": null,
          "old_line_content": "                            put_mb_modes(s, 6, 3, 1, 1);",
          "new_line_content": "                    if (s->dquant) {",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "put_qscale",
          "new_api": null,
          "old_text": "put_qscale(s)",
          "new_text": null,
          "old_line_content": "                        put_qscale(s);",
          "new_line_content": "                        else",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 5 - s->mv_dir, 2)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 5 - s->mv_dir, 2);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 1)",
          "new_text": null,
          "old_line_content": "                    put_bits(&s->pb, 2, 1);     /* motion_type: field */",
          "new_line_content": "                } else {                        // No coded bloc pattern",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "get_bits_diff",
          "new_api": null,
          "old_text": "get_bits_diff(s)",
          "new_text": null,
          "old_line_content": "                s->misc_bits += get_bits_diff(s);",
          "new_line_content": "                    s->qscale -= s->dquant;",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, s->field_select[0][i])",
          "new_text": null,
          "old_line_content": "                        put_bits(&s->pb, 1, s->field_select[0][i]);",
          "new_line_content": "                if (s->mv_dir & MV_DIR_FORWARD) {",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                            s->mv[0][i][0] - s->last_mv[0][i][0],\n                                            s->f_code)",
          "new_text": null,
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                    for (i = 0; i < 2; i++) {",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                            s->mv[0][i][1] - (s->last_mv[0][i][1] >> 1),\n                                            s->f_code)",
          "new_text": null,
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                                            s->mv[0][i][0] - s->last_mv[0][i][0],",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, s->field_select[1][i])",
          "new_text": null,
          "old_line_content": "                        put_bits(&s->pb, 1, s->field_select[1][i]);",
          "new_line_content": "                if (s->mv_dir & MV_DIR_BACKWARD) {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                            s->mv[1][i][0] - s->last_mv[1][i][0],\n                                            s->b_code)",
          "new_text": null,
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                    for (i = 0; i < 2; i++) {",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "mpeg1_encode_motion",
          "new_api": null,
          "old_text": "mpeg1_encode_motion(s,\n                                            s->mv[1][i][1] - (s->last_mv[1][i][1] >> 1),\n                                            s->b_code)",
          "new_text": null,
          "old_line_content": "                        mpeg1_encode_motion(s,",
          "new_line_content": "                                            s->mv[1][i][0] - s->last_mv[1][i][0],",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 79,
      "total_deletions": 78,
      "total_api_changes": 172
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 172,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          792,
          779,
          780
        ]
      }
    },
    "api_calls_before": 280,
    "api_calls_after": 281,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 1,
      "total_diff_lines": 23
    }
  }
}
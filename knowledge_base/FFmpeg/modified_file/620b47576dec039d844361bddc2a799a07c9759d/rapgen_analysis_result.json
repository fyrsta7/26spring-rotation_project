{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/620b47576dec039d844361bddc2a799a07c9759d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/620b47576dec039d844361bddc2a799a07c9759d/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/620b47576dec039d844361bddc2a799a07c9759d/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/620b47576dec039d844361bddc2a799a07c9759d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 656,
          "old_api": "av_frame_free",
          "new_api": "av_frame_clone",
          "old_text": "av_frame_free(&s->prev)",
          "new_text": "av_frame_clone(inpicref)",
          "old_line_content": "            av_frame_free(&s->prev);",
          "new_line_content": "        out = oleft = oright = av_frame_clone(inpicref);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "AVERROR",
          "new_api": "av_frame_free",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "            av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "ff_filter_frame",
          "new_api": "av_frame_free",
          "old_text": "ff_filter_frame(outlink, inpicref)",
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "        return ff_filter_frame(outlink, inpicref);",
          "new_line_content": "        av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "av_frame_free",
          "new_api": "ff_get_video_buffer",
          "old_text": "av_frame_free(&s->prev)",
          "new_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "old_line_content": "            av_frame_free(&s->prev);",
          "new_line_content": "        out = oleft = oright = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "AVERROR",
          "new_api": "av_frame_free",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "            av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "av_frame_copy_props",
          "new_api": "AVERROR",
          "old_text": "av_frame_copy_props(out, inpicref)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        av_frame_copy_props(out, inpicref);",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "av_frame_free",
          "new_api": "ff_get_video_buffer",
          "old_text": "av_frame_free(&oleft)",
          "new_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "old_line_content": "                av_frame_free(&oleft);",
          "new_line_content": "            oright = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "AVERROR",
          "new_api": "av_frame_free",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "                av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "av_frame_copy_props",
          "new_api": "AVERROR",
          "old_text": "av_frame_copy_props(oright, s->prev)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            av_frame_copy_props(oright, s->prev);",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "av_assert0",
          "new_api": "AV_RN64",
          "old_text": "av_assert0(0)",
          "new_text": "AV_RN64(&right[p])",
          "old_line_content": "        av_assert0(0);",
          "new_line_content": "                        AV_WN64(&dst[x+8], !(b&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "av_frame_free",
          "new_api": "ff_filter_frame",
          "old_text": "av_frame_free(&s->prev)",
          "new_text": "ff_filter_frame(outlink, oright)",
          "old_line_content": "        av_frame_free(&s->prev);",
          "new_line_content": "        ff_filter_frame(outlink, oright);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 770,
          "old_api": null,
          "new_api": "av_image_copy_plane",
          "old_text": null,
          "new_text": "av_image_copy_plane(oright->data[i] + out_off_right[i],\n                                oright->linesize[i] * s->out.row_step,\n                                iright->data[i] + s->in_off_right[i],\n                                iright->linesize[i] * s->in.row_step,\n                                s->linesize[i], s->pheight[i])",
          "old_line_content": "                                iright->data[i] + s->in_off_right[i],",
          "new_line_content": "            av_image_copy_plane(oright->data[i] + out_off_right[i],",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(uint8_t*, left, right)",
          "old_line_content": "                    break;",
          "new_line_content": "                    FFSWAP(uint8_t*, left, right);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": null,
          "new_api": "AV_RN16",
          "old_text": null,
          "new_text": "AV_RN16(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WN16(&dst[x  ],   b&1  ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "AV_RN16",
          "old_text": null,
          "new_text": "AV_RN16(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WN16(&dst[x+2], !(b&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "        }",
          "new_line_content": "            av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    } else if ((s->out.format == MONO_L && s->in.format == ALTERNATING_LR) ||",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "AV_RB24",
          "old_text": null,
          "new_text": "AV_RB24(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WB24(&dst[x  ],   b&1  ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "AV_RB24",
          "old_text": null,
          "new_text": "AV_RB24(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WB24(&dst[x+3], !(b&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, s->prev)",
          "old_line_content": "        s->prev = NULL;",
          "new_line_content": "        ret = ff_filter_frame(outlink, s->prev);",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "        return ret;",
          "new_line_content": "        av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "AV_RN32",
          "old_text": null,
          "new_text": "AV_RN32(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WN32(&dst[x  ],   b&1  ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "AV_RN32",
          "old_text": null,
          "new_text": "AV_RN32(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WN32(&dst[x+4], !(b&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "AV_RB48",
          "old_text": null,
          "new_text": "AV_RB48(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WB48(&dst[x  ],   b&1  ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, inpicref)",
          "old_line_content": "               (s->out.format == ALTERNATING_RL && s->in.format == ALTERNATING_LR)) {",
          "new_line_content": "        return ff_filter_frame(outlink, inpicref);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "AV_RB48",
          "old_text": null,
          "new_text": "AV_RB48(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WB48(&dst[x+6], !(b&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "av_image_copy_plane",
          "old_text": null,
          "new_text": "av_image_copy_plane(out->data[i], out->linesize[i],\n                                    iright->data[i] + s->in_off_left[i],\n                                    iright->linesize[i] * s->in.row_step,\n                                    s->linesize[i], s->pheight[i])",
          "old_line_content": "    case ANAGLYPH_RB_GRAY:",
          "new_line_content": "                av_image_copy_plane(out->data[i], out->linesize[i],",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, inpicref)",
          "old_line_content": "        s->prev = NULL;",
          "new_line_content": "        ff_filter_frame(outlink, inpicref);",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, s->prev)",
          "old_line_content": "        return ret;",
          "new_line_content": "        ret = ff_filter_frame(outlink, s->prev);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "AV_RN64",
          "old_text": null,
          "new_text": "AV_RN64(&right[p])",
          "old_line_content": "    default:",
          "new_line_content": "                        AV_WN64(&dst[x  ],   b&1 ?  AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "        }",
          "new_line_content": "            av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "        out = oleft;",
          "new_line_content": "        av_assert0(0);",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "av_frame_copy_props",
          "old_text": null,
          "new_text": "av_frame_copy_props(out, inpicref)",
          "old_line_content": "        if (s->out.format == ALTERNATING_LR ||",
          "new_line_content": "        av_frame_copy_props(out, inpicref);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(AVFrame *, oleft, oright)",
          "old_line_content": "               s->in.format == ALTERNATING_RL) {",
          "new_line_content": "            FFSWAP(AVFrame *, oleft, oright);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "            }",
          "new_line_content": "                av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "av_frame_copy_props",
          "old_text": null,
          "new_text": "av_frame_copy_props(oright, s->prev)",
          "old_line_content": "    }",
          "new_line_content": "            av_frame_copy_props(oright, s->prev);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "execute",
          "old_text": null,
          "new_text": "ctx->internal->execute(ctx, filter_slice, &td, NULL,\n                               FFMIN(s->out.height, ctx->graph->nb_threads))",
          "old_line_content": "",
          "new_line_content": "        ctx->internal->execute(ctx, filter_slice, &td, NULL,",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(s->out.height, ctx->graph->nb_threads)",
          "old_line_content": "            for (y = 0; y < s->pheight[i]; y++) {",
          "new_line_content": "                               FFMIN(s->out.height, ctx->graph->nb_threads));",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "",
          "new_line_content": "        av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "static av_cold void uninit(AVFilterContext *ctx)",
          "new_line_content": "        av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "    Stereo3DContext *s = ctx->priv;",
          "new_line_content": "        av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&inpicref)",
          "old_line_content": "",
          "new_line_content": "        av_frame_free(&inpicref);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "FF_CEIL_RSHIFT",
          "old_text": null,
          "new_text": "FF_CEIL_RSHIFT(s->out.off_left  * s->pixstep[i], hsub)",
          "old_line_content": "    }",
          "new_line_content": "        out_off_left[i]  = (FF_CEIL_RSHIFT(s->out.row_left,  vsub) + s->out.off_lstep) * oleft->linesize[i]  + FF_CEIL_RSHIFT(s->out.off_left  * s->pixstep[i], hsub);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "FF_CEIL_RSHIFT",
          "old_text": null,
          "new_text": "FF_CEIL_RSHIFT(s->out.off_right * s->pixstep[i], hsub)",
          "old_line_content": "",
          "new_line_content": "        out_off_right[i] = (FF_CEIL_RSHIFT(s->out.row_right, vsub) + s->out.off_rstep) * oright->linesize[i] + FF_CEIL_RSHIFT(s->out.off_right * s->pixstep[i], hsub);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, out)",
          "old_line_content": "}",
          "new_line_content": "    return ff_filter_frame(outlink, out);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->prev)",
          "old_line_content": "    },",
          "new_line_content": "    av_frame_free(&s->prev);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(uint8_t*, left, right)",
          "old_line_content": "                case 2:",
          "new_line_content": "                    FFSWAP(uint8_t*, left, right);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "AV_RN16",
          "old_text": null,
          "new_text": "AV_RN16(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WN16(&dst[x  ], (b&1) == (y&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "AV_RN16",
          "old_text": null,
          "new_text": "AV_RN16(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WN16(&dst[x+2], (b&1) != (y&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "AV_RB24",
          "old_text": null,
          "new_text": "AV_RB24(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WB24(&dst[x  ], (b&1) == (y&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "AV_RB24",
          "old_text": null,
          "new_text": "AV_RB24(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WB24(&dst[x+3], (b&1) != (y&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"Convert video stereoscopic 3D view.\")",
          "old_line_content": "};",
          "new_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Convert video stereoscopic 3D view.\"),",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "AV_RN32",
          "old_text": null,
          "new_text": "AV_RN32(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WN32(&dst[x  ], (b&1) == (y&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "AV_RN32",
          "old_text": null,
          "new_text": "AV_RN32(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WN32(&dst[x+4], (b&1) != (y&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "AV_RB48",
          "old_text": null,
          "new_text": "AV_RB48(&right[p])",
          "old_line_content": "                    }",
          "new_line_content": "                        AV_WB48(&dst[x  ], (b&1) == (y&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "AV_RB48",
          "old_text": null,
          "new_text": "AV_RB48(&right[p])",
          "old_line_content": "                    break;",
          "new_line_content": "                        AV_WB48(&dst[x+6], (b&1) != (y&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(oleft->data[i] + j * s->linesize[i], 0, s->linesize[i])",
          "old_line_content": "    case SIDE_BY_SIDE_LR:",
          "new_line_content": "                memset(oleft->data[i] + j * s->linesize[i], 0, s->linesize[i]);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "AV_RN64",
          "old_text": null,
          "new_text": "AV_RN64(&right[p])",
          "old_line_content": "    case INTERLEAVE_COLS_LR:",
          "new_line_content": "                        AV_WN64(&dst[x  ], (b&1) == (y&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "AV_RN64",
          "old_text": null,
          "new_text": "AV_RN64(&right[p])",
          "old_line_content": "    case INTERLEAVE_COLS_RL:",
          "new_line_content": "                        AV_WN64(&dst[x+8], (b&1) != (y&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "av_image_copy_plane",
          "old_text": null,
          "new_text": "av_image_copy_plane(oleft->data[i] + out_off_left[i],\n                                oleft->linesize[i] * s->out.row_step,\n                                ileft->data[i] + s->in_off_left[i],\n                                ileft->linesize[i] * s->in.row_step,\n                                s->linesize[i], s->pheight[i])",
          "old_line_content": "                                ileft->data[i] + s->in_off_left[i],",
          "new_line_content": "            av_image_copy_plane(oleft->data[i] + out_off_left[i],",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 768,
          "old_api": "av_image_copy_plane",
          "new_api": null,
          "old_text": "av_image_copy_plane(oright->data[i] + out_off_right[i],\n                                oright->linesize[i] * s->out.row_step,\n                                iright->data[i] + s->in_off_right[i],\n                                iright->linesize[i] * s->in.row_step,\n                                s->linesize[i], s->pheight[i])",
          "new_text": null,
          "old_line_content": "            av_image_copy_plane(oright->data[i] + out_off_right[i],",
          "new_line_content": "                                ileft->linesize[i] * s->in.row_step,",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(uint8_t*, left, right)",
          "new_text": null,
          "old_line_content": "                    FFSWAP(uint8_t*, left, right);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "AV_RN16",
          "new_api": null,
          "old_text": "AV_RN16(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN16(&dst[x  ],   b&1  ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "new_line_content": "                case 1:",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "AV_RN16",
          "new_api": null,
          "old_text": "AV_RN16(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN16(&dst[x+2], !(b&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=2, p++, b++) {",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "AV_RB24",
          "new_api": null,
          "old_text": "AV_RB24(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB24(&dst[x  ],   b&1  ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "new_line_content": "                case 2:",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "AV_RB24",
          "new_api": null,
          "old_text": "AV_RB24(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB24(&dst[x+3], !(b&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=4, p+=2, b++) {",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "av_frame_clone",
          "new_api": null,
          "old_text": "av_frame_clone(inpicref)",
          "new_text": null,
          "old_line_content": "        out = oleft = oright = av_frame_clone(inpicref);",
          "new_line_content": "         s->in.format == INTERLEAVE_ROWS_LR ||",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&inpicref)",
          "new_text": null,
          "old_line_content": "            av_frame_free(&inpicref);",
          "new_line_content": "        if (!out) {",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "AV_RN32",
          "new_api": null,
          "old_text": "AV_RN32(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN32(&dst[x  ],   b&1  ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "new_line_content": "                case 3:",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "AV_RN32",
          "new_api": null,
          "old_text": "AV_RN32(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN32(&dst[x+4], !(b&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=6, p+=3, b++) {",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, s->prev)",
          "new_text": null,
          "old_line_content": "        ret = ff_filter_frame(outlink, s->prev);",
          "new_line_content": "               (s->out.format == MONO_R && s->in.format == ALTERNATING_RL)) {",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&inpicref)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&inpicref);",
          "new_line_content": "        s->prev->pts /= 2;",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "AV_RB48",
          "new_api": null,
          "old_text": "AV_RB48(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB48(&dst[x  ],   b&1  ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "new_line_content": "                case 4:",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "AV_RB48",
          "new_api": null,
          "old_text": "AV_RB48(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB48(&dst[x+6], !(b&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=8, p+=4, b++) {",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "av_image_copy_plane",
          "new_api": null,
          "old_text": "av_image_copy_plane(out->data[i], out->linesize[i],\n                                    iright->data[i] + s->in_off_left[i],\n                                    iright->linesize[i] * s->in.row_step,\n                                    s->linesize[i], s->pheight[i])",
          "new_text": null,
          "old_line_content": "                av_image_copy_plane(out->data[i], out->linesize[i],",
          "new_line_content": "            out->height = outlink->h;",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->prev)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&s->prev);",
          "new_line_content": "    } else if ((s->out.format == MONO_L && s->in.format == ALTERNATING_RL) ||",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "AV_RN64",
          "new_api": null,
          "old_text": "AV_RN64(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN64(&dst[x  ],   b&1 ?  AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "new_line_content": "                case 6:",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "AV_RN64",
          "new_api": null,
          "old_text": "AV_RN64(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN64(&dst[x+8], !(b&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=12, p+=6, b++) {",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, inpicref)",
          "new_text": null,
          "old_line_content": "        ff_filter_frame(outlink, inpicref);",
          "new_line_content": "               (s->out.format == ALTERNATING_RL && s->in.format == ALTERNATING_LR)) {",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, s->prev)",
          "new_text": null,
          "old_line_content": "        ret = ff_filter_frame(outlink, s->prev);",
          "new_line_content": "        FFSWAP(int64_t, s->prev->pts, inpicref->pts);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "ff_get_video_buffer",
          "new_api": null,
          "old_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "new_text": null,
          "old_line_content": "        out = oleft = oright = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&inpicref)",
          "new_text": null,
          "old_line_content": "            av_frame_free(&inpicref);",
          "new_line_content": "        if (!out) {",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(AVFrame *, oleft, oright)",
          "new_text": null,
          "old_line_content": "            FFSWAP(AVFrame *, oleft, oright);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, oright)",
          "new_text": null,
          "old_line_content": "        ff_filter_frame(outlink, oright);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->prev)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&s->prev);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "ff_get_video_buffer",
          "new_api": null,
          "old_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "new_text": null,
          "old_line_content": "            oright = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "new_line_content": "        if (s->out.format == ALTERNATING_LR ||",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->prev)",
          "new_text": null,
          "old_line_content": "                av_frame_free(&s->prev);",
          "new_line_content": "            if (!oright) {",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "execute",
          "new_api": null,
          "old_text": "ctx->internal->execute(ctx, filter_slice, &td, NULL,\n                               FFMIN(s->out.height, ctx->graph->nb_threads))",
          "new_text": null,
          "old_line_content": "        ctx->internal->execute(ctx, filter_slice, &td, NULL,",
          "new_line_content": "    case ANAGLYPH_GM_DUBOIS:",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(s->out.height, ctx->graph->nb_threads)",
          "new_text": null,
          "old_line_content": "                               FFMIN(s->out.height, ctx->graph->nb_threads));",
          "new_line_content": "    case ANAGLYPH_YB_GRAY:",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&inpicref)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&inpicref);",
          "new_line_content": "        out = oleft;",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&inpicref)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&inpicref);",
          "new_line_content": "        s->prev = inpicref;",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, out)",
          "new_text": null,
          "old_line_content": "    return ff_filter_frame(outlink, out);",
          "new_line_content": "               s->in.format == ALTERNATING_RL) {",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "FF_CEIL_RSHIFT",
          "new_api": null,
          "old_text": "FF_CEIL_RSHIFT(s->in.off_left   * s->pixstep[i], hsub)",
          "new_text": null,
          "old_line_content": "        s->in_off_left[i]   = (FF_CEIL_RSHIFT(s->in.row_left,   vsub) + s->in.off_lstep)  * ileft->linesize[i]  + FF_CEIL_RSHIFT(s->in.off_left   * s->pixstep[i], hsub);",
          "new_line_content": "        int hsub = i == 1 || i == 2 ? s->hsub : 0;",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "FF_CEIL_RSHIFT",
          "new_api": null,
          "old_text": "FF_CEIL_RSHIFT(s->in.off_right  * s->pixstep[i], hsub)",
          "new_text": null,
          "old_line_content": "        s->in_off_right[i]  = (FF_CEIL_RSHIFT(s->in.row_right,  vsub) + s->in.off_rstep)  * iright->linesize[i] + FF_CEIL_RSHIFT(s->in.off_right  * s->pixstep[i], hsub);",
          "new_line_content": "        int vsub = i == 1 || i == 2 ? s->vsub : 0;",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->prev)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&s->prev);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(uint8_t*, left, right)",
          "new_text": null,
          "old_line_content": "                    FFSWAP(uint8_t*, left, right);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "AV_RN16",
          "new_api": null,
          "old_text": "AV_RN16(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN16(&dst[x  ], (b&1) == (y&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "new_line_content": "                case 1:",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "AV_RN16",
          "new_api": null,
          "old_text": "AV_RN16(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN16(&dst[x+2], (b&1) != (y&1) ? AV_RN16(&left[p]) : AV_RN16(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=2, p++, b++) {",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "AV_RB24",
          "new_api": null,
          "old_text": "AV_RB24(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB24(&dst[x  ], (b&1) == (y&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "new_line_content": "                case 2:",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "AV_RB24",
          "new_api": null,
          "old_text": "AV_RB24(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB24(&dst[x+3], (b&1) != (y&1) ? AV_RB24(&left[p]) : AV_RB24(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=4, p+=2, b++) {",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"Convert video stereoscopic 3D view.\")",
          "new_text": null,
          "old_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Convert video stereoscopic 3D view.\"),",
          "new_line_content": "        .type         = AVMEDIA_TYPE_VIDEO,",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "AV_RN32",
          "new_api": null,
          "old_text": "AV_RN32(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN32(&dst[x  ], (b&1) == (y&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "new_line_content": "                case 3:",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "AV_RN32",
          "new_api": null,
          "old_text": "AV_RN32(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN32(&dst[x+4], (b&1) != (y&1) ? AV_RN32(&left[p]) : AV_RN32(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=6, p+=3, b++) {",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "AV_RB48",
          "new_api": null,
          "old_text": "AV_RB48(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB48(&dst[x  ], (b&1) == (y&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "new_line_content": "                case 4:",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "AV_RB48",
          "new_api": null,
          "old_text": "AV_RB48(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WB48(&dst[x+6], (b&1) != (y&1) ? AV_RB48(&left[p]) : AV_RB48(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=8, p+=4, b++) {",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "AV_RN64",
          "new_api": null,
          "old_text": "AV_RN64(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN64(&dst[x  ], (b&1) == (y&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "new_line_content": "                case 6:",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "AV_RN64",
          "new_api": null,
          "old_text": "AV_RN64(&right[p])",
          "new_text": null,
          "old_line_content": "                        AV_WN64(&dst[x+8], (b&1) != (y&1) ? AV_RN64(&left[p]) : AV_RN64(&right[p]));",
          "new_line_content": "                    for (x = 0, b = 0, p = 0; x < s->linesize[i] * 2; x+=12, p+=6, b++) {",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(oleft->data[i] + j * s->linesize[i], 0, s->linesize[i])",
          "new_text": null,
          "old_line_content": "                memset(oleft->data[i] + j * s->linesize[i], 0, s->linesize[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "av_image_copy_plane",
          "new_api": null,
          "old_text": "av_image_copy_plane(oleft->data[i] + out_off_left[i],\n                                oleft->linesize[i] * s->out.row_step,\n                                ileft->data[i] + s->in_off_left[i],\n                                ileft->linesize[i] * s->in.row_step,\n                                s->linesize[i], s->pheight[i])",
          "new_text": null,
          "old_line_content": "            av_image_copy_plane(oleft->data[i] + out_off_left[i],",
          "new_line_content": "copy:",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 11,
      "total_additions": 49,
      "total_deletions": 49,
      "total_api_changes": 109
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 109,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          781,
          782,
          655,
          783,
          653,
          784,
          785,
          786
        ]
      }
    },
    "api_calls_before": 145,
    "api_calls_after": 145,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 1,
      "total_diff_lines": 29
    }
  }
}
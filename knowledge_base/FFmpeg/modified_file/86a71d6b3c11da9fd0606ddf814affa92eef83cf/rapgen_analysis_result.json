{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/86a71d6b3c11da9fd0606ddf814affa92eef83cf",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/86a71d6b3c11da9fd0606ddf814affa92eef83cf/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/86a71d6b3c11da9fd0606ddf814affa92eef83cf/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/86a71d6b3c11da9fd0606ddf814affa92eef83cf/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 947,
          "old_api": "submit_encode_frame",
          "new_api": "av_rescale_q",
          "old_text": "submit_encode_frame(of, ost, frame)",
          "new_text": "av_rescale_q(frame->pts, frame->time_base, enc->time_base)",
          "old_line_content": "    ret = submit_encode_frame(of, ost, frame);",
          "new_line_content": "            av_rescale_q(frame->pts, frame->time_base, enc->time_base) -",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "av_rescale_q",
          "new_api": "av_shrink_packet",
          "old_text": "av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase)",
          "new_text": "av_shrink_packet(pkt, subtitle_out_size)",
          "old_line_content": "                pkt->pts += av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase);",
          "new_line_content": "        av_shrink_packet(pkt, subtitle_out_size);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "av_q2d",
          "new_api": "adjust_frame_pts_to_encoder_tb",
          "old_text": "av_q2d(enc->time_base)",
          "new_text": "adjust_frame_pts_to_encoder_tb(of, ost, next_picture)",
          "old_line_content": "        duration = FFMIN(duration, 1/(av_q2d(ost->frame_rate) * av_q2d(enc->time_base)));",
          "new_line_content": "    sync_ipts = adjust_frame_pts_to_encoder_tb(of, ost, next_picture);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "memmove",
          "new_api": "llrint",
          "old_text": "memmove(ost->last_nb0_frames + 1,\n            ost->last_nb0_frames,\n            sizeof(ost->last_nb0_frames[0]) * (FF_ARRAY_ELEMS(ost->last_nb0_frames) - 1))",
          "new_text": "llrint(sync_ipts)",
          "old_line_content": "    memmove(ost->last_nb0_frames + 1,",
          "new_line_content": "            ost->next_pts = llrint(sync_ipts);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "av_log",
          "new_api": "memmove",
          "old_text": "av_log(NULL, AV_LOG_VERBOSE,\n               \"*** dropping frame %\"PRId64\" from stream %d at ts %\"PRId64\"\\n\",\n               ost->vsync_frame_number, ost->st->index, ost->last_frame->pts)",
          "new_text": "memmove(ost->last_nb0_frames + 1,\n            ost->last_nb0_frames,\n            sizeof(ost->last_nb0_frames[0]) * (FF_ARRAY_ELEMS(ost->last_nb0_frames) - 1))",
          "old_line_content": "        av_log(NULL, AV_LOG_VERBOSE,",
          "new_line_content": "    memmove(ost->last_nb0_frames + 1,",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "av_buffersink_get_type",
          "new_api": "av_buffersink_get_frame_flags",
          "old_text": "av_buffersink_get_type(filter)",
          "new_text": "av_buffersink_get_frame_flags(filter, filtered_frame,\n                                               AV_BUFFERSINK_FLAG_NO_REQUEST)",
          "old_line_content": "                    if (av_buffersink_get_type(filter) == AVMEDIA_TYPE_VIDEO)",
          "new_line_content": "            ret = av_buffersink_get_frame_flags(filter, filtered_frame,",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "av_ts2str",
          "new_api": "av_buffersink_get_time_base",
          "old_text": "av_ts2str(filtered_frame->pts)",
          "new_text": "av_buffersink_get_time_base(filter)",
          "old_line_content": "                           av_ts2str(filtered_frame->pts),",
          "new_line_content": "                AVRational tb = av_buffersink_get_time_base(filter);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "av_ts2timestr",
          "new_api": "av_rescale_q",
          "old_text": "av_ts2timestr(filtered_frame->pts, &tb)",
          "new_text": "av_rescale_q(filtered_frame->pts, tb,\n                                                    AV_TIME_BASE_Q)",
          "old_line_content": "                           av_ts2timestr(filtered_frame->pts, &tb),",
          "new_line_content": "                ost->last_filter_pts = av_rescale_q(filtered_frame->pts, tb,",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "av_frame_unref",
          "new_api": "do_audio_out",
          "old_text": "av_frame_unref(filtered_frame)",
          "new_text": "do_audio_out(of, ost, filtered_frame)",
          "old_line_content": "            av_frame_unref(filtered_frame);",
          "new_line_content": "                do_audio_out(of, ost, filtered_frame);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "av_bprintf",
          "new_api": "av_bprint_init",
          "old_text": "av_bprintf(&buf, \"q=%2.1f \", q)",
          "new_text": "av_bprint_init(&buf, 0, AV_BPRINT_SIZE_AUTOMATIC)",
          "old_line_content": "            av_bprintf(&buf, \"q=%2.1f \", q);",
          "new_line_content": "    av_bprint_init(&buf, 0, AV_BPRINT_SIZE_AUTOMATIC);",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "av_bprintf",
          "new_api": "av_bprint_init",
          "old_text": "av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",\n                       ost->file_index, ost->index, q)",
          "new_text": "av_bprint_init(&buf_script, 0, AV_BPRINT_SIZE_AUTOMATIC)",
          "old_line_content": "            av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",",
          "new_line_content": "    av_bprint_init(&buf_script, 0, AV_BPRINT_SIZE_AUTOMATIC);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "av_bprintf",
          "new_api": "atomic_load",
          "old_text": "av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",\n                       ost->file_index, ost->index, q)",
          "new_text": "atomic_load(&ost->packets_written)",
          "old_line_content": "            av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",",
          "new_line_content": "            uint64_t frame_number = atomic_load(&ost->packets_written);",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "lrintf",
          "new_api": "av_bprintf",
          "old_text": "lrintf(q)",
          "new_text": "av_bprintf(&buf_script, \"fps=%.2f\\n\", fps)",
          "old_line_content": "                int qp = lrintf(q);",
          "new_line_content": "            av_bprintf(&buf_script, \"fps=%.2f\\n\", fps);",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "FF_ARRAY_ELEMS",
          "new_api": "av_bprintf",
          "old_text": "FF_ARRAY_ELEMS(qp_histogram)",
          "new_text": "av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",\n                       ost->file_index, ost->index, q)",
          "old_line_content": "                if (qp >= 0 && qp < FF_ARRAY_ELEMS(qp_histogram))",
          "new_line_content": "            av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "av_log2",
          "new_api": "av_bprintf",
          "old_text": "av_log2(qp_histogram[j] + 1)",
          "new_text": "av_bprintf(&buf, \"L\")",
          "old_line_content": "                    av_bprintf(&buf, \"%X\", av_log2(qp_histogram[j] + 1));",
          "new_line_content": "                av_bprintf(&buf, \"L\");",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "av_bprintf",
          "new_api": "psnr",
          "old_text": "av_bprintf(&buf_script, \"stream_%d_%d_psnr_all=%2.2f\\n\",\n                           ost->file_index, ost->index, p)",
          "new_text": "psnr(error / scale)",
          "old_line_content": "                av_bprintf(&buf_script, \"stream_%d_%d_psnr_all=%2.2f\\n\",",
          "new_line_content": "                    p = psnr(error / scale);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "FFMAX",
          "new_api": "av_bprintf",
          "old_text": "FFMAX(pts, ost->last_mux_dts)",
          "new_text": "av_bprintf(&buf_script, \"stream_%d_%d_psnr_all=%2.2f\\n\",\n                           ost->file_index, ost->index, p)",
          "old_line_content": "            pts = FFMAX(pts, ost->last_mux_dts);",
          "new_line_content": "                av_bprintf(&buf_script, \"stream_%d_%d_psnr_all=%2.2f\\n\",",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "fprintf",
          "new_api": "av_bprintf",
          "old_text": "fprintf(stderr, \"%s    %c\", buf.str, end)",
          "new_text": "av_bprintf(&buf, \" speed=%4.3gx\", speed)",
          "old_line_content": "            fprintf(stderr, \"%s    %c\", buf.str, end);",
          "new_line_content": "        av_bprintf(&buf, \" speed=%4.3gx\", speed);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "av_bprint_finalize",
          "new_api": "av_log_get_level",
          "old_text": "av_bprint_finalize(&buf, NULL)",
          "new_text": "av_log_get_level()",
          "old_line_content": "    av_bprint_finalize(&buf, NULL);",
          "new_line_content": "        if (print_stats==1 && AV_LOG_INFO > av_log_get_level()) {",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "av_bprintf",
          "new_api": "av_log",
          "old_text": "av_bprintf(&buf_script, \"progress=%s\\n\",\n                   is_last_report ? \"end\" : \"continue\")",
          "new_text": "av_log(NULL, AV_LOG_INFO, \"%s    %c\", buf.str, end)",
          "old_line_content": "        av_bprintf(&buf_script, \"progress=%s\\n\",",
          "new_line_content": "            av_log(NULL, AV_LOG_INFO, \"%s    %c\", buf.str, end);",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "avio_write",
          "new_api": "fflush",
          "old_text": "avio_write(progress_avio, buf_script.str,\n                   FFMIN(buf_script.len, buf_script.size - 1))",
          "new_text": "fflush(stderr)",
          "old_line_content": "        avio_write(progress_avio, buf_script.str,",
          "new_line_content": "        fflush(stderr);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": "avio_flush",
          "new_api": "av_bprint_finalize",
          "old_text": "avio_flush(progress_avio)",
          "new_text": "av_bprint_finalize(&buf, NULL)",
          "old_line_content": "        avio_flush(progress_avio);",
          "new_line_content": "    av_bprint_finalize(&buf, NULL);",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "avio_closep",
          "new_api": "av_bprintf",
          "old_text": "avio_closep(&progress_avio)",
          "new_text": "av_bprintf(&buf_script, \"progress=%s\\n\",\n                   is_last_report ? \"end\" : \"continue\")",
          "old_line_content": "            if ((ret = avio_closep(&progress_avio)) < 0)",
          "new_line_content": "        av_bprintf(&buf_script, \"progress=%s\\n\",",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "av_err2str",
          "new_api": "avio_write",
          "old_text": "av_err2str(ret)",
          "new_text": "avio_write(progress_avio, buf_script.str,\n                   FFMIN(buf_script.len, buf_script.size - 1))",
          "old_line_content": "                       \"Error closing progress log, loss of information possible: %s\\n\", av_err2str(ret));",
          "new_line_content": "        avio_write(progress_avio, buf_script.str,",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "print_final_stats",
          "new_api": "av_err2str",
          "old_text": "print_final_stats(total_size)",
          "new_text": "av_err2str(ret)",
          "old_line_content": "        print_final_stats(total_size);",
          "new_line_content": "                       \"Error closing progress log, loss of information possible: %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "configure_filtergraph",
          "new_api": "exit_program",
          "old_text": "configure_filtergraph(fg)",
          "new_text": "exit_program(1)",
          "old_line_content": "                ret = configure_filtergraph(fg);",
          "new_line_content": "                        exit_program(1);",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "init_output_stream_wrapper",
          "new_api": "av_log",
          "old_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Error configuring filter graph\\n\")",
          "old_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "new_line_content": "                    av_log(NULL, AV_LOG_ERROR, \"Error configuring filter graph\\n\");",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": "av_rescale_q",
          "new_api": "av_packet_ref",
          "old_text": "av_rescale_q(ist->dts, AV_TIME_BASE_Q, ost->mux_timebase)",
          "new_text": "av_packet_ref(opkt, pkt)",
          "old_line_content": "        opkt->dts = av_rescale_q(ist->dts, AV_TIME_BASE_Q, ost->mux_timebase);",
          "new_line_content": "    if (av_packet_ref(opkt, pkt) < 0)",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "ifilter_parameters_from_frame",
          "new_api": "av_frame_get_side_data",
          "old_text": "ifilter_parameters_from_frame(ifilter, frame)",
          "new_text": "av_frame_get_side_data(frame, AV_FRAME_DATA_DISPLAYMATRIX)",
          "old_line_content": "        ret = ifilter_parameters_from_frame(ifilter, frame);",
          "new_line_content": "    if (sd = av_frame_get_side_data(frame, AV_FRAME_DATA_DISPLAYMATRIX)) {",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": "ifilter_has_all_input_formats",
          "new_api": "ifilter_parameters_from_frame",
          "old_text": "ifilter_has_all_input_formats(fg)",
          "new_text": "ifilter_parameters_from_frame(ifilter, frame)",
          "old_line_content": "        if (!ifilter_has_all_input_formats(fg)) {",
          "new_line_content": "        ret = ifilter_parameters_from_frame(ifilter, frame);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "av_frame_free",
          "new_api": "ifilter_has_all_input_formats",
          "old_text": "av_frame_free(&tmp)",
          "new_text": "ifilter_has_all_input_formats(fg)",
          "old_line_content": "                av_frame_free(&tmp);",
          "new_line_content": "        if (!ifilter_has_all_input_formats(fg)) {",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": "reap_filters",
          "new_api": "av_fifo_write",
          "old_text": "reap_filters(1)",
          "new_text": "av_fifo_write(ifilter->frame_queue, &tmp, 1)",
          "old_line_content": "        ret = reap_filters(1);",
          "new_line_content": "            ret = av_fifo_write(ifilter->frame_queue, &tmp, 1);",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "av_err2str",
          "new_api": "av_frame_free",
          "old_text": "av_err2str(ret)",
          "new_text": "av_frame_free(&tmp)",
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "new_line_content": "                av_frame_free(&tmp);",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "av_buffersrc_add_frame_flags",
          "new_api": "configure_filtergraph",
          "old_text": "av_buffersrc_add_frame_flags(ifilter->filter, frame, buffersrc_flags)",
          "new_text": "configure_filtergraph(fg)",
          "old_line_content": "    ret = av_buffersrc_add_frame_flags(ifilter->filter, frame, buffersrc_flags);",
          "new_line_content": "        ret = configure_filtergraph(fg);",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "avcodec_receive_frame",
          "new_api": "avcodec_send_packet",
          "old_text": "avcodec_receive_frame(avctx, frame)",
          "new_text": "avcodec_send_packet(avctx, pkt)",
          "old_line_content": "    ret = avcodec_receive_frame(avctx, frame);",
          "new_line_content": "        ret = avcodec_send_packet(avctx, pkt);",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "av_err2str",
          "new_api": "av_assert1",
          "old_text": "av_err2str(ret)",
          "new_text": "av_assert1(ist->nb_filters > 0)",
          "old_line_content": "                   \"Failed to inject frame into filter network: %s\\n\", av_err2str(ret));",
          "new_line_content": "    av_assert1(ist->nb_filters > 0); /* ensure ret is initialized */",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "av_log",
          "new_api": "update_benchmark",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Sample rate %d invalid\\n\", avctx->sample_rate)",
          "new_text": "update_benchmark(NULL)",
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Sample rate %d invalid\\n\", avctx->sample_rate);",
          "new_line_content": "    update_benchmark(NULL);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "update_benchmark",
          "new_api": "av_realloc_array",
          "old_text": "update_benchmark(NULL)",
          "new_text": "av_realloc_array(ist->dts_buffer, ist->nb_dts_buffer + 1, sizeof(ist->dts_buffer[0]))",
          "old_line_content": "    update_benchmark(NULL);",
          "new_line_content": "        void *new = av_realloc_array(ist->dts_buffer, ist->nb_dts_buffer + 1, sizeof(ist->dts_buffer[0]));",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "update_benchmark",
          "new_api": "AVERROR",
          "old_text": "update_benchmark(\"decode_video %d.%d\", ist->file_index, ist->st->index)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    update_benchmark(\"decode_video %d.%d\", ist->file_index, ist->st->index);",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "av_log",
          "new_api": "av_rescale_q",
          "old_text": "av_log(NULL, AV_LOG_INFO, \"decoder -> ist_index:%d type:video \"\n               \"frame_pts:%s frame_pts_time:%s best_effort_ts:%\"PRId64\" best_effort_ts_time:%s keyframe:%d frame_type:%d time_base:%d/%d\\n\",\n               ist->st->index, av_ts2str(decoded_frame->pts),\n               av_ts2timestr(decoded_frame->pts, &ist->st->time_base),\n               best_effort_timestamp,\n               av_ts2timestr(best_effort_timestamp, &ist->st->time_base),\n               decoded_frame->key_frame, decoded_frame->pict_type,\n               ist->st->time_base.num, ist->st->time_base.den)",
          "new_text": "av_rescale_q(decoded_frame->pts = best_effort_timestamp, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"decoder -> ist_index:%d type:video \"",
          "new_line_content": "        int64_t ts = av_rescale_q(decoded_frame->pts = best_effort_timestamp, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": "av_rescale",
          "new_api": "sub2video_flush",
          "old_text": "av_rescale(subtitle.pts - ist->prev_sub.subtitle.pts,\n                             1000, AV_TIME_BASE)",
          "new_text": "sub2video_flush(ist)",
          "old_line_content": "            end = av_rescale(subtitle.pts - ist->prev_sub.subtitle.pts,",
          "new_line_content": "            sub2video_flush(ist);",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": "av_fifo_write",
          "new_api": "sub2video_update",
          "old_text": "av_fifo_write(ist->sub2video.sub_queue, &subtitle, 1)",
          "new_text": "sub2video_update(ist, INT64_MIN, &subtitle)",
          "old_line_content": "        ret = av_fifo_write(ist->sub2video.sub_queue, &subtitle, 1);",
          "new_line_content": "        sub2video_update(ist, INT64_MIN, &subtitle);",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": "av_rescale_q",
          "new_api": "av_packet_unref",
          "old_text": "av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": "av_packet_unref(avpkt)",
          "old_line_content": "        ist->next_dts = ist->dts = av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "        av_packet_unref(avpkt);",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": "av_rescale_q",
          "new_api": "av_packet_unref",
          "old_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": "av_packet_unref(avpkt)",
          "old_line_content": "                    duration_dts = av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "            av_packet_unref(avpkt);",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "exit_program",
          "new_api": "av_log",
          "old_text": "exit_program(1)",
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Error while decoding stream #%d:%d: %s\\n\",\n                       ist->file_index, ist->st->index, av_err2str(ret))",
          "old_line_content": "                exit_program(1);",
          "new_line_content": "                av_log(NULL, AV_LOG_ERROR, \"Error while decoding stream #%d:%d: %s\\n\",",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "av_inv_q",
          "new_api": "av_rescale_q",
          "old_text": "av_inv_q(ist->framerate)",
          "new_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "                int64_t next_dts = av_rescale_q(ist->next_dts, time_base_q, av_inv_q(ist->framerate));",
          "new_line_content": "                ist->next_dts += av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "AV_NOWARN_DEPRECATED",
          "new_api": "avcodec_get_name",
          "old_text": "AV_NOWARN_DEPRECATED({\n        ist->dec_ctx->thread_safe_callbacks = 1;\n        })",
          "new_text": "avcodec_get_name(ist->dec_ctx->codec_id)",
          "old_line_content": "        AV_NOWARN_DEPRECATED({",
          "new_line_content": "                    avcodec_get_name(ist->dec_ctx->codec_id), ist->file_index, ist->st->index);",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "av_dict_set",
          "new_api": "AV_NOWARN_DEPRECATED",
          "old_text": "av_dict_set(&ist->decoder_opts, \"compute_edt\", \"1\", AV_DICT_DONT_OVERWRITE)",
          "new_text": "AV_NOWARN_DEPRECATED({\n        ist->dec_ctx->thread_safe_callbacks = 1;\n        })",
          "old_line_content": "            av_dict_set(&ist->decoder_opts, \"compute_edt\", \"1\", AV_DICT_DONT_OVERWRITE);",
          "new_line_content": "        AV_NOWARN_DEPRECATED({",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "av_dict_get",
          "new_api": "av_log",
          "old_text": "av_dict_get(ist->decoder_opts, \"threads\", NULL, 0)",
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Warning using DVB subtitles for filtering and output at the same time is not fully supported, also see -compute_edt [0|1]\\n\")",
          "old_line_content": "        if (!av_dict_get(ist->decoder_opts, \"threads\", NULL, 0))",
          "new_line_content": "                av_log(NULL, AV_LOG_WARNING, \"Warning using DVB subtitles for filtering and output at the same time is not fully supported, also see -compute_edt [0|1]\\n\");",
          "content_same": false
        },
        {
          "line": 2554,
          "old_api": "snprintf",
          "new_api": "av_dict_set",
          "old_text": "snprintf(error, error_len, \"Device setup failed for \"\n                     \"decoder on input stream #%d:%d : %s\",\n                     ist->file_index, ist->st->index, av_err2str(ret))",
          "new_text": "av_dict_set(&ist->decoder_opts, \"threads\", \"auto\", 0)",
          "old_line_content": "            snprintf(error, error_len, \"Device setup failed for \"",
          "new_line_content": "            av_dict_set(&ist->decoder_opts, \"threads\", \"auto\", 0);",
          "content_same": false
        },
        {
          "line": 2567,
          "old_api": "av_err2str",
          "new_api": "avcodec_open2",
          "old_text": "av_err2str(ret)",
          "new_text": "avcodec_open2(ist->dec_ctx, codec, &ist->decoder_opts)",
          "old_line_content": "                     ist->file_index, ist->st->index, av_err2str(ret));",
          "new_line_content": "        if ((ret = avcodec_open2(ist->dec_ctx, codec, &ist->decoder_opts)) < 0) {",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "avcodec_free_context",
          "new_api": "av_log",
          "old_text": "avcodec_free_context(&codec_ctx)",
          "new_text": "av_log(NULL, AV_LOG_FATAL,\n               \"Error setting up codec context options.\\n\")",
          "old_line_content": "    avcodec_free_context(&codec_ctx);",
          "new_line_content": "        av_log(NULL, AV_LOG_FATAL,",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": "av_log",
          "new_api": "avcodec_free_context",
          "old_text": "av_log(NULL, AV_LOG_FATAL,\n               \"Error getting reference codec parameters.\\n\")",
          "new_text": "avcodec_free_context(&codec_ctx)",
          "old_line_content": "        av_log(NULL, AV_LOG_FATAL,",
          "new_line_content": "        avcodec_free_context(&codec_ctx);",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": "av_inv_q",
          "new_api": "avformat_transfer_internal_stream_timing_info",
          "old_text": "av_inv_q(ost->frame_rate)",
          "new_text": "avformat_transfer_internal_stream_timing_info(of->format, ost->st, ist->st, copy_tb)",
          "old_line_content": "            ost->st->time_base = av_inv_q(ost->frame_rate);",
          "new_line_content": "    ret = avformat_transfer_internal_stream_timing_info(of->format, ost->st, ist->st, copy_tb);",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": "av_rescale_q",
          "new_api": "av_inv_q",
          "old_text": "av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base)",
          "new_text": "av_inv_q(ost->frame_rate)",
          "old_line_content": "        ost->st->duration = av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base);",
          "new_line_content": "            ost->st->time_base = av_inv_q(ost->frame_rate);",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "av_stream_new_side_data",
          "new_api": "AVERROR",
          "old_text": "av_stream_new_side_data(ost->st, AV_PKT_DATA_DISPLAYMATRIX,\n                                              sizeof(int32_t) * 9)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        uint8_t *sd = av_stream_new_side_data(ost->st, AV_PKT_DATA_DISPLAYMATRIX,",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": "av_strlcpy",
          "new_api": "av_mallocz",
          "old_text": "av_strlcpy(encoder_string, \"Lavc \", encoder_string_len)",
          "new_text": "av_mallocz(encoder_string_len)",
          "old_line_content": "        av_strlcpy(encoder_string, \"Lavc \", encoder_string_len);",
          "new_line_content": "    encoder_string     = av_mallocz(encoder_string_len);",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "av_dict_set",
          "new_api": "AVERROR",
          "old_text": "av_dict_set(&ost->st->metadata, \"encoder\",  encoder_string,\n                AV_DICT_DONT_STRDUP_VAL | AV_DICT_DONT_OVERWRITE)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    av_dict_set(&ost->st->metadata, \"encoder\",  encoder_string,",
          "new_line_content": "        report_and_exit(AVERROR(ENOMEM));",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "av_buffersink_get_format",
          "new_api": "av_reduce",
          "old_text": "av_buffersink_get_format(ost->filter->filter)",
          "new_text": "av_reduce(&ost->frame_rate.num, &ost->frame_rate.den,\n                      ost->frame_rate.num, ost->frame_rate.den, 65535)",
          "old_line_content": "        enc_ctx->sample_fmt     = av_buffersink_get_format(ost->filter->filter);",
          "new_line_content": "            av_reduce(&ost->frame_rate.num, &ost->frame_rate.den,",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": "FFMIN",
          "new_api": "av_buffersink_get_ch_layout",
          "old_text": "FFMIN(dec_ctx->bits_per_raw_sample,\n                                                 av_get_bytes_per_sample(enc_ctx->sample_fmt) << 3)",
          "new_text": "av_buffersink_get_ch_layout(ost->filter->filter, &enc_ctx->ch_layout)",
          "old_line_content": "            enc_ctx->bits_per_raw_sample = FFMIN(dec_ctx->bits_per_raw_sample,",
          "new_line_content": "        ret = av_buffersink_get_ch_layout(ost->filter->filter, &enc_ctx->ch_layout);",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": "av_inv_q",
          "new_api": "FFMIN",
          "old_text": "av_inv_q(ost->frame_rate)",
          "new_text": "FFMIN(dec_ctx->bits_per_raw_sample,\n                                                 av_get_bytes_per_sample(enc_ctx->sample_fmt) << 3)",
          "old_line_content": "        init_encoder_time_base(ost, av_inv_q(ost->frame_rate));",
          "new_line_content": "            enc_ctx->bits_per_raw_sample = FFMIN(dec_ctx->bits_per_raw_sample,",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": "av_buffersink_get_time_base",
          "new_api": "av_make_q",
          "old_text": "av_buffersink_get_time_base(ost->filter->filter)",
          "new_text": "av_make_q(1, enc_ctx->sample_rate)",
          "old_line_content": "            enc_ctx->time_base = av_buffersink_get_time_base(ost->filter->filter);",
          "new_line_content": "        init_encoder_time_base(ost, av_make_q(1, enc_ctx->sample_rate));",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "av_log",
          "new_api": "av_inv_q",
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"Frame rate very high for a muxer not efficiently supporting it.\\n\"\n                                       \"Please consider specifying a lower framerate, a different muxer or \"\n                                       \"setting vsync/fps_mode to vfr\\n\")",
          "new_text": "av_inv_q(ost->frame_rate)",
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"Frame rate very high for a muxer not efficiently supporting it.\\n\"",
          "new_line_content": "        init_encoder_time_base(ost, av_inv_q(ost->frame_rate));",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "av_buffersink_get_format",
          "new_api": "av_buffersink_get_w",
          "old_text": "av_buffersink_get_format(ost->filter->filter)",
          "new_text": "av_buffersink_get_w(ost->filter->filter)",
          "old_line_content": "        enc_ctx->pix_fmt = av_buffersink_get_format(ost->filter->filter);",
          "new_line_content": "        enc_ctx->width  = av_buffersink_get_w(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "FFMIN",
          "new_api": "av_buffersink_get_sample_aspect_ratio",
          "old_text": "FFMIN(dec_ctx->bits_per_raw_sample,\n                                                 av_pix_fmt_desc_get(enc_ctx->pix_fmt)->comp[0].depth)",
          "new_text": "av_buffersink_get_sample_aspect_ratio(ost->filter->filter)",
          "old_line_content": "            enc_ctx->bits_per_raw_sample = FFMIN(dec_ctx->bits_per_raw_sample,",
          "new_line_content": "            av_buffersink_get_sample_aspect_ratio(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "hw_device_setup_for_encode",
          "new_api": "init_output_stream_encode",
          "old_text": "hw_device_setup_for_encode(ost)",
          "new_text": "init_output_stream_encode(ost, frame)",
          "old_line_content": "        ret = hw_device_setup_for_encode(ost);",
          "new_line_content": "        ret = init_output_stream_encode(ost, frame);",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "av_err2str",
          "new_api": "av_dict_get",
          "old_text": "av_err2str(ret)",
          "new_text": "av_dict_get(ost->encoder_opts, \"threads\", NULL, 0)",
          "old_line_content": "                     ost->file_index, ost->index, av_err2str(ret));",
          "new_line_content": "        if (!av_dict_get(ost->encoder_opts, \"threads\", NULL, 0))",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "snprintf",
          "new_api": "av_err2str",
          "old_text": "snprintf(error, error_len,\n                     \"Error while opening encoder for output stream #%d:%d - \"\n                     \"maybe incorrect parameters such as bit_rate, rate, width or height\",\n                    ost->file_index, ost->index)",
          "new_text": "av_err2str(ret)",
          "old_line_content": "            snprintf(error, error_len,",
          "new_line_content": "                     ost->file_index, ost->index, av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "exit_program",
          "new_api": "av_log",
          "old_text": "exit_program(1)",
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"The bitrate parameter is set too low.\"\n                                         \" It takes bits/s as argument, not kbits/s\\n\")",
          "old_line_content": "            exit_program(1);",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"The bitrate parameter is set too low.\"",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": "av_add_q",
          "new_api": "av_display_rotation_set",
          "old_text": "av_add_q(ost->enc_ctx->time_base, (AVRational){0, 1})",
          "new_text": "av_display_rotation_set((int32_t *)dst, 0)",
          "old_line_content": "            ost->st->time_base = av_add_q(ost->enc_ctx->time_base, (AVRational){0, 1});",
          "new_line_content": "                        av_display_rotation_set((int32_t *)dst, 0);",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": "of_stream_init",
          "new_api": "av_rescale_q",
          "old_text": "of_stream_init(output_files[ost->file_index], ost)",
          "new_text": "av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base)",
          "old_line_content": "    ret = of_stream_init(output_files[ost->file_index], ost);",
          "new_line_content": "            ost->st->duration = av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base);",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": "av_log",
          "new_api": "ist_iter",
          "old_text": "av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ist->filters[j]->graph->index)",
          "new_text": "ist_iter(ist)",
          "old_line_content": "                    av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ist->filters[j]->graph->index);",
          "new_line_content": "    for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist)) {",
          "content_same": false
        },
        {
          "line": 3159,
          "old_api": "av_log",
          "new_api": "avcodec_descriptor_get",
          "old_text": "av_log(NULL, AV_LOG_INFO, \" (%s (%s) -> %s (%s))\",\n                   in_codec_name, decoder_name,\n                   out_codec_name, encoder_name)",
          "new_text": "avcodec_descriptor_get(out_codec->id)",
          "old_line_content": "            av_log(NULL, AV_LOG_INFO, \" (%s (%s) -> %s (%s))\",",
          "new_line_content": "                desc = avcodec_descriptor_get(out_codec->id);",
          "content_same": false
        },
        {
          "line": 3260,
          "old_api": "fprintf",
          "new_api": "av_log_get_level",
          "old_text": "fprintf(stderr, \"\\nEnter command: <target>|all <time>|-1 <command>[ <argument>]\\n\")",
          "new_text": "av_log_get_level()",
          "old_line_content": "        fprintf(stderr, \"\\nEnter command: <target>|all <time>|-1 <command>[ <argument>]\\n\");",
          "new_line_content": "    if (key == '+') av_log_set_level(av_log_get_level()+10);",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": "set_tty_echo",
          "new_api": "fprintf",
          "old_text": "set_tty_echo(0)",
          "new_text": "fprintf(stderr, \"\\nEnter command: <target>|all <time>|-1 <command>[ <argument>]\\n\")",
          "old_line_content": "        set_tty_echo(0);",
          "new_line_content": "        fprintf(stderr, \"\\nEnter command: <target>|all <time>|-1 <command>[ <argument>]\\n\");",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": "sscanf",
          "new_api": "read_key",
          "old_text": "sscanf(buf, \"%63[^ ] %lf %255[^ ] %255[^\\n]\", target, &time, command, arg)",
          "new_text": "read_key()",
          "old_line_content": "            (n = sscanf(buf, \"%63[^ ] %lf %255[^ ] %255[^\\n]\", target, &time, command, arg)) >= 3) {",
          "new_line_content": "        while ((k = read_key()) != '\\n' && k != '\\r' && i < sizeof(buf)-1)",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": "avfilter_graph_send_command",
          "new_api": "sscanf",
          "old_text": "avfilter_graph_send_command(fg->graph, target, command, arg, buf, sizeof(buf),\n                                                          key == 'c' ? AVFILTER_CMD_FLAG_ONE : 0)",
          "new_text": "sscanf(buf, \"%63[^ ] %lf %255[^ ] %255[^\\n]\", target, &time, command, arg)",
          "old_line_content": "                        ret = avfilter_graph_send_command(fg->graph, target, command, arg, buf, sizeof(buf),",
          "new_line_content": "            (n = sscanf(buf, \"%63[^ ] %lf %255[^ ] %255[^\\n]\", target, &time, command, arg)) >= 3) {",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": "avfilter_graph_queue_command",
          "new_api": "avfilter_graph_send_command",
          "old_text": "avfilter_graph_queue_command(fg->graph, target, command, arg, 0, time)",
          "new_text": "avfilter_graph_send_command(fg->graph, target, command, arg, buf, sizeof(buf),\n                                                          key == 'c' ? AVFILTER_CMD_FLAG_ONE : 0)",
          "old_line_content": "                        ret = avfilter_graph_queue_command(fg->graph, target, command, arg, 0, time);",
          "new_line_content": "                        ret = avfilter_graph_send_command(fg->graph, target, command, arg, buf, sizeof(buf),",
          "content_same": false
        },
        {
          "line": 3286,
          "old_api": "av_err2str",
          "new_api": "fprintf",
          "old_text": "av_err2str(ret)",
          "new_text": "fprintf(stderr, \"Command reply for stream %d: ret:%d res:\\n%s\", i, ret, buf)",
          "old_line_content": "                            fprintf(stderr, \"Queuing command failed with error %s\\n\", av_err2str(ret));",
          "new_line_content": "                        fprintf(stderr, \"Command reply for stream %d: ret:%d res:\\n%s\", i, ret, buf);",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": "av_log",
          "new_api": "avfilter_graph_queue_command",
          "old_text": "av_log(NULL, AV_LOG_ERROR,\n                   \"Parse error, at least 3 arguments were expected, \"\n                   \"only %d given in string '%s'\\n\", n, buf)",
          "new_text": "avfilter_graph_queue_command(fg->graph, target, command, arg, 0, time)",
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR,",
          "new_line_content": "                        ret = avfilter_graph_queue_command(fg->graph, target, command, arg, 0, time);",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": "sscanf",
          "new_api": "set_tty_echo",
          "old_text": "sscanf(buf, \"%d\", &debug)",
          "new_text": "set_tty_echo(1)",
          "old_line_content": "            if (k <= 0 || sscanf(buf, \"%d\", &debug)!=1)",
          "new_line_content": "            set_tty_echo(1);",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": "fprintf",
          "new_api": "read_key",
          "old_text": "fprintf(stderr,\"error parsing debug value\\n\")",
          "new_text": "read_key()",
          "old_line_content": "                fprintf(stderr,\"error parsing debug value\\n\");",
          "new_line_content": "            while ((k = read_key()) != '\\n' && k != '\\r' && i < sizeof(buf)-1)",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": "ost_iter",
          "new_api": "set_tty_echo",
          "old_text": "ost_iter(ost)",
          "new_text": "set_tty_echo(0)",
          "old_line_content": "        for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "            set_tty_echo(0);",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "fprintf",
          "new_api": "ist_iter",
          "old_text": "fprintf(stderr,\"debug=%d\\n\", debug)",
          "new_text": "ist_iter(ist)",
          "old_line_content": "        fprintf(stderr,\"debug=%d\\n\", debug);",
          "new_line_content": "        for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist))",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": "avcodec_flush_buffers",
          "new_api": "av_rescale_q",
          "old_text": "avcodec_flush_buffers(ist->dec_ctx)",
          "new_text": "av_rescale_q(ist->nb_samples,\n                                              (AVRational){ 1, ist->dec_ctx->sample_rate},\n                                              ist->st->time_base)",
          "old_line_content": "            avcodec_flush_buffers(ist->dec_ctx);",
          "new_line_content": "                dur.duration   = av_rescale_q(ist->nb_samples,",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "av_get_media_type_string",
          "new_api": "FFABS",
          "old_text": "av_get_media_type_string(ist->par->codec_type)",
          "new_text": "FFABS(delta)",
          "old_line_content": "                       av_get_media_type_string(ist->par->codec_type),",
          "new_line_content": "            if (FFABS(delta) > 1LL * dts_delta_threshold * AV_TIME_BASE ||",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "FFABS",
          "new_api": "av_get_media_type_string",
          "old_text": "FFABS(delta)",
          "new_text": "av_get_media_type_string(ist->par->codec_type)",
          "old_line_content": "            if (FFABS(delta) > 1LL * dts_error_threshold * AV_TIME_BASE) {",
          "new_line_content": "                       av_get_media_type_string(ist->par->codec_type),",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": "av_rescale_q",
          "new_api": "FFABS",
          "old_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": "FFABS(delta)",
          "old_line_content": "                pkt->pts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "new_line_content": "        if (FFABS(delta) > 1LL * dts_delta_threshold * AV_TIME_BASE) {",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": "exit_program",
          "new_api": "decode_flush",
          "old_text": "exit_program(1)",
          "new_text": "decode_flush(ifile)",
          "old_line_content": "                exit_program(1);",
          "new_line_content": "        decode_flush(ifile);",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "memcpy",
          "new_api": "av_packet_get_side_data",
          "old_text": "memcpy(dst_data, src_sd->data, src_sd->size)",
          "new_text": "av_packet_get_side_data(pkt, src_sd->type, NULL)",
          "old_line_content": "            memcpy(dst_data, src_sd->data, src_sd->size);",
          "new_line_content": "            if (av_packet_get_side_data(pkt, src_sd->type, NULL))",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": "ts_discontinuity_process",
          "new_api": "AVERROR",
          "old_text": "ts_discontinuity_process(ifile, ist, pkt)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    ts_discontinuity_process(ifile, ist, pkt);",
          "new_line_content": "                report_and_exit(AVERROR(ENOMEM));",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": "av_ts2timestr",
          "new_api": "ts_discontinuity_process",
          "old_text": "av_ts2timestr(pkt->dts, &ist->st->time_base)",
          "new_text": "ts_discontinuity_process(ifile, ist, pkt)",
          "old_line_content": "               av_ts2str(pkt->dts), av_ts2timestr(pkt->dts, &ist->st->time_base),",
          "new_line_content": "    ts_discontinuity_process(ifile, ist, pkt);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "av_ts2timestr",
          "new_api": "av_log",
          "old_text": "av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q)",
          "new_text": "av_log(NULL, AV_LOG_INFO, \"demuxer+ffmpeg -> ist_index:%d:%d type:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s duration:%s duration_time:%s off:%s off_time:%s\\n\",\n               ifile->index, pkt->stream_index,\n               av_get_media_type_string(ist->par->codec_type),\n               av_ts2str(pkt->pts), av_ts2timestr(pkt->pts, &ist->st->time_base),\n               av_ts2str(pkt->dts), av_ts2timestr(pkt->dts, &ist->st->time_base),\n               av_ts2str(pkt->duration), av_ts2timestr(pkt->duration, &ist->st->time_base),\n               av_ts2str(input_files[ist->file_index]->ts_offset),\n               av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q))",
          "old_line_content": "               av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q));",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"demuxer+ffmpeg -> ist_index:%d:%d type:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s duration:%s duration_time:%s off:%s off_time:%s\\n\",",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "sub2video_heartbeat",
          "new_api": "av_ts2timestr",
          "old_text": "sub2video_heartbeat(ist, pkt->pts)",
          "new_text": "av_ts2timestr(pkt->pts, &ist->st->time_base)",
          "old_line_content": "    sub2video_heartbeat(ist, pkt->pts);",
          "new_line_content": "               av_ts2str(pkt->pts), av_ts2timestr(pkt->pts, &ist->st->time_base),",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "process_input_packet",
          "new_api": "av_ts2timestr",
          "old_text": "process_input_packet(ist, pkt, 0)",
          "new_text": "av_ts2timestr(pkt->duration, &ist->st->time_base)",
          "old_line_content": "    process_input_packet(ist, pkt, 0);",
          "new_line_content": "               av_ts2str(pkt->duration), av_ts2timestr(pkt->duration, &ist->st->time_base),",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": "close_output_stream",
          "new_api": "avfilter_graph_request_oldest",
          "old_text": "close_output_stream(graph->outputs[i]->ost)",
          "new_text": "avfilter_graph_request_oldest(graph->graph)",
          "old_line_content": "            close_output_stream(graph->outputs[i]->ost);",
          "new_line_content": "    ret = avfilter_graph_request_oldest(graph->graph);",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": "av_log",
          "new_api": "choose_output",
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"No more inputs to read from, finishing.\\n\")",
          "new_text": "choose_output()",
          "old_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"No more inputs to read from, finishing.\\n\");",
          "new_line_content": "    ost = choose_output();",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": "check_keyboard_interaction",
          "new_api": "av_gettime_relative",
          "old_text": "check_keyboard_interaction(cur_time)",
          "new_text": "av_gettime_relative()",
          "old_line_content": "            if (check_keyboard_interaction(cur_time) < 0)",
          "new_line_content": "    timer_start = av_gettime_relative();",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "av_err2str",
          "new_api": "need_output",
          "old_text": "av_err2str(ret)",
          "new_text": "need_output()",
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "new_line_content": "        if (!need_output()) {",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "print_report",
          "new_api": "transcode_step",
          "old_text": "print_report(0, timer_start, cur_time)",
          "new_text": "transcode_step()",
          "old_line_content": "        print_report(0, timer_start, cur_time);",
          "new_line_content": "        ret = transcode_step();",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "term_exit",
          "new_api": "ist_iter",
          "old_text": "term_exit()",
          "new_text": "ist_iter(ist)",
          "old_line_content": "    term_exit();",
          "new_line_content": "    for (ist = ist_iter(NULL); ist; ist = ist_iter(ist)) {",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "ost_iter",
          "new_api": "exit_program",
          "old_text": "ost_iter(ost)",
          "new_text": "exit_program(1)",
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "exit_program",
          "new_api": "av_log",
          "old_text": "exit_program(1)",
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"Empty output on stream %d.\\n\", i)",
          "old_line_content": "        exit_program(1);",
          "new_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Empty output on stream %d.\\n\", i);",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "GetProcessMemoryInfo",
          "new_api": "getrusage",
          "old_text": "GetProcessMemoryInfo(proc, &memcounters, sizeof(memcounters))",
          "new_text": "getrusage(RUSAGE_SELF, &rusage)",
          "old_line_content": "    GetProcessMemoryInfo(proc, &memcounters, sizeof(memcounters));",
          "new_line_content": "    getrusage(RUSAGE_SELF, &rusage);",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "parse_loglevel",
          "new_api": "init_dynload",
          "old_text": "parse_loglevel(argc, argv, options)",
          "new_text": "init_dynload()",
          "old_line_content": "    parse_loglevel(argc, argv, options);",
          "new_line_content": "    init_dynload();",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "show_banner",
          "new_api": "parse_loglevel",
          "old_text": "show_banner(argc, argv, options)",
          "new_text": "parse_loglevel(argc, argv, options)",
          "old_line_content": "    show_banner(argc, argv, options);",
          "new_line_content": "    parse_loglevel(argc, argv, options);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "ffmpeg_parse_options",
          "new_api": "avdevice_register_all",
          "old_text": "ffmpeg_parse_options(argc, argv)",
          "new_text": "avdevice_register_all()",
          "old_line_content": "    ret = ffmpeg_parse_options(argc, argv);",
          "new_line_content": "    avdevice_register_all();",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "exit_program",
          "new_api": "avformat_network_init",
          "old_text": "exit_program(1)",
          "new_text": "avformat_network_init()",
          "old_line_content": "        exit_program(1);",
          "new_line_content": "    avformat_network_init();",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "exit_program",
          "new_api": "ffmpeg_parse_options",
          "old_text": "exit_program(1)",
          "new_text": "ffmpeg_parse_options(argc, argv)",
          "old_line_content": "        exit_program(1);",
          "new_line_content": "    ret = ffmpeg_parse_options(argc, argv);",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "av_log",
          "new_api": "show_usage",
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"At least one output file must be specified\\n\")",
          "new_text": "show_usage()",
          "old_line_content": "        av_log(NULL, AV_LOG_FATAL, \"At least one output file must be specified\\n\");",
          "new_line_content": "        show_usage();",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": "exit_program",
          "new_api": "av_log",
          "old_text": "exit_program(1)",
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Use -h to get full help or, even better, run 'man %s'\\n\", program_name)",
          "old_line_content": "        exit_program(1);",
          "new_line_content": "        av_log(NULL, AV_LOG_WARNING, \"Use -h to get full help or, even better, run 'man %s'\\n\", program_name);",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": "av_log",
          "new_api": "exit_program",
          "old_text": "av_log(NULL, AV_LOG_INFO,\n               \"bench: utime=%0.3fs stime=%0.3fs rtime=%0.3fs\\n\",\n               utime / 1000000.0, stime / 1000000.0, rtime / 1000000.0)",
          "new_text": "exit_program(1)",
          "old_line_content": "        av_log(NULL, AV_LOG_INFO,",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": "exit_program",
          "new_api": "av_log",
          "old_text": "exit_program(69)",
          "new_text": "av_log(NULL, AV_LOG_INFO,\n               \"bench: utime=%0.3fs stime=%0.3fs rtime=%0.3fs\\n\",\n               utime / 1000000.0, stime / 1000000.0, rtime / 1000000.0)",
          "old_line_content": "        exit_program(69);",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO,",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2058,
          "old_api": null,
          "new_api": "av_rescale_delta",
          "old_text": null,
          "new_text": "av_rescale_delta(decoded_frame_tb, decoded_frame->pts,\n                                              (AVRational){1, avctx->sample_rate}, decoded_frame->nb_samples, &ist->filter_in_rescale_delta_last,\n                                              (AVRational){1, avctx->sample_rate})",
          "old_line_content": "    return err < 0 ? err : ret;",
          "new_line_content": "        decoded_frame->pts = av_rescale_delta(decoded_frame_tb, decoded_frame->pts,",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": null,
          "new_api": "send_frame_to_filters",
          "old_text": null,
          "new_text": "send_frame_to_filters(ist, decoded_frame)",
          "old_line_content": "                        int *decode_failed)",
          "new_line_content": "    err = send_frame_to_filters(ist, decoded_frame);",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": null,
          "new_api": "av_frame_unref",
          "old_text": null,
          "new_text": "av_frame_unref(decoded_frame)",
          "old_line_content": "    AVFrame *decoded_frame = ist->decoded_frame;",
          "new_line_content": "    av_frame_unref(decoded_frame);",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(ist->dts, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "    if (eof) {",
          "new_line_content": "        dts = av_rescale_q(ist->dts, AV_TIME_BASE_Q, ist->st->time_base);",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": null,
          "new_api": "update_benchmark",
          "old_text": null,
          "new_text": "update_benchmark(NULL)",
          "old_line_content": "    // or the parser does not has_b_frames correctly",
          "new_line_content": "    update_benchmark(NULL);",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": null,
          "new_api": "decode",
          "old_text": null,
          "new_text": "decode(ist->dec_ctx, decoded_frame, got_output, pkt)",
          "old_line_content": "    if (ist->par->video_delay < ist->dec_ctx->has_b_frames) {",
          "new_line_content": "    ret = decode(ist->dec_ctx, decoded_frame, got_output, pkt);",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "update_benchmark",
          "old_text": null,
          "new_text": "update_benchmark(\"decode_video %d.%d\", ist->file_index, ist->st->index)",
          "old_line_content": "        if (ist->dec_ctx->codec_id == AV_CODEC_ID_H264) {",
          "new_line_content": "    update_benchmark(\"decode_video %d.%d\", ist->file_index, ist->st->index);",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ist->dec_ctx, AV_LOG_WARNING,\n                   \"video_delay is larger in decoder than demuxer %d > %d.\\n\"\n                   \"If you want to help, upload a sample \"\n                   \"of this file to https://streams.videolan.org/upload/ \"\n                   \"and contact the ffmpeg-devel mailing list. (ffmpeg-devel@ffmpeg.org)\\n\",\n                   ist->dec_ctx->has_b_frames,\n                   ist->par->video_delay)",
          "old_line_content": "    }",
          "new_line_content": "            av_log(ist->dec_ctx, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": null,
          "new_api": "check_decode_result",
          "old_text": null,
          "new_text": "check_decode_result(ist, got_output, ret)",
          "old_line_content": "                decoded_frame->width,",
          "new_line_content": "        check_decode_result(ist, got_output, ret);",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"Frame parameters mismatch context %d,%d,%d != %d,%d,%d\\n\",\n                decoded_frame->width,\n                decoded_frame->height,\n                decoded_frame->format,\n                ist->dec_ctx->width,\n                ist->dec_ctx->height,\n                ist->dec_ctx->pix_fmt)",
          "old_line_content": "        }",
          "new_line_content": "            av_log(NULL, AV_LOG_DEBUG, \"Frame parameters mismatch context %d,%d,%d != %d,%d,%d\\n\",",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": null,
          "new_api": "hwaccel_retrieve_data",
          "old_text": null,
          "new_text": "ist->hwaccel_retrieve_data(ist->dec_ctx, decoded_frame)",
          "old_line_content": "",
          "new_line_content": "        err = ist->hwaccel_retrieve_data(ist->dec_ctx, decoded_frame);",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"decoder -> ist_index:%d type:video \"\n               \"frame_pts:%s frame_pts_time:%s best_effort_ts:%\"PRId64\" best_effort_ts_time:%s keyframe:%d frame_type:%d time_base:%d/%d\\n\",\n               ist->st->index, av_ts2str(decoded_frame->pts),\n               av_ts2timestr(decoded_frame->pts, &ist->st->time_base),\n               best_effort_timestamp,\n               av_ts2timestr(best_effort_timestamp, &ist->st->time_base),\n               decoded_frame->key_frame, decoded_frame->pict_type,\n               ist->st->time_base.num, ist->st->time_base.den)",
          "old_line_content": "               ist->st->time_base.num, ist->st->time_base.den);",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"decoder -> ist_index:%d type:video \"",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": null,
          "new_api": "av_ts2str",
          "old_text": null,
          "new_text": "av_ts2str(decoded_frame->pts)",
          "old_line_content": "",
          "new_line_content": "               ist->st->index, av_ts2str(decoded_frame->pts),",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "av_ts2timestr",
          "old_text": null,
          "new_text": "av_ts2timestr(decoded_frame->pts, &ist->st->time_base)",
          "old_line_content": "    if (ist->st->sample_aspect_ratio.num)",
          "new_line_content": "               av_ts2timestr(decoded_frame->pts, &ist->st->time_base),",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "av_ts2timestr",
          "old_text": null,
          "new_text": "av_ts2timestr(best_effort_timestamp, &ist->st->time_base)",
          "old_line_content": "",
          "new_line_content": "               av_ts2timestr(best_effort_timestamp, &ist->st->time_base),",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": null,
          "new_api": "send_frame_to_filters",
          "old_text": null,
          "new_text": "send_frame_to_filters(ist, decoded_frame)",
          "old_line_content": "static int transcode_subtitles(InputStream *ist, AVPacket *pkt, int *got_output,",
          "new_line_content": "    err = send_frame_to_filters(ist, decoded_frame);",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": null,
          "new_api": "av_frame_unref",
          "old_text": null,
          "new_text": "av_frame_unref(decoded_frame)",
          "old_line_content": "    AVSubtitle subtitle;",
          "new_line_content": "    av_frame_unref(decoded_frame);",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "avcodec_decode_subtitle2",
          "old_text": null,
          "new_text": "avcodec_decode_subtitle2(ist->dec_ctx,\n                                       &subtitle, got_output, pkt)",
          "old_line_content": "        if (!pkt->size)",
          "new_line_content": "    int ret = avcodec_decode_subtitle2(ist->dec_ctx,",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": null,
          "new_api": "check_decode_result",
          "old_text": null,
          "new_text": "check_decode_result(NULL, got_output, ret)",
          "old_line_content": "    }",
          "new_line_content": "    check_decode_result(NULL, got_output, ret);",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": null,
          "new_api": "av_rescale",
          "old_text": null,
          "new_text": "av_rescale(subtitle.pts - ist->prev_sub.subtitle.pts,\n                             1000, AV_TIME_BASE)",
          "old_line_content": "                ist->prev_sub.subtitle.end_display_time = end;",
          "new_line_content": "            end = av_rescale(subtitle.pts - ist->prev_sub.subtitle.pts,",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG,\n                       \"Subtitle duration reduced from %\"PRId32\" to %d%s\\n\",\n                       ist->prev_sub.subtitle.end_display_time, end,\n                       end <= 0 ? \", dropping it\" : \"\")",
          "old_line_content": "        FFSWAP(int,        *got_output, ist->prev_sub.got_output);",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(AVSubtitle, subtitle,    ist->prev_sub.subtitle)",
          "old_line_content": "",
          "new_line_content": "        FFSWAP(AVSubtitle, subtitle,    ist->prev_sub.subtitle);",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": null,
          "new_api": "av_fifo_alloc2",
          "old_text": null,
          "new_text": "av_fifo_alloc2(8, sizeof(AVSubtitle), AV_FIFO_FLAG_AUTO_GROW)",
          "old_line_content": "        free_sub = 0;",
          "new_line_content": "            ist->sub2video.sub_queue = av_fifo_alloc2(8, sizeof(AVSubtitle), AV_FIFO_FLAG_AUTO_GROW);",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "            report_and_exit(AVERROR(ENOMEM));",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": null,
          "new_api": "av_fifo_write",
          "old_text": null,
          "new_text": "av_fifo_write(ist->sub2video.sub_queue, &subtitle, 1)",
          "old_line_content": "        goto out;",
          "new_line_content": "        ret = av_fifo_write(ist->sub2video.sub_queue, &subtitle, 1);",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    ist->frames_decoded++;",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": null,
          "new_api": "check_output_constraints",
          "old_text": null,
          "new_text": "check_output_constraints(ist, ost)",
          "old_line_content": "out:",
          "new_line_content": "        if (!check_output_constraints(ist, ost) || !ost->enc_ctx",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": null,
          "new_api": "do_subtitle_out",
          "old_text": null,
          "new_text": "do_subtitle_out(output_files[ost->file_index], ost, &subtitle)",
          "old_line_content": "}",
          "new_line_content": "        do_subtitle_out(output_files[ost->file_index], ost, &subtitle);",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "avsubtitle_free",
          "old_text": null,
          "new_text": "avsubtitle_free(&subtitle)",
          "old_line_content": "    /* TODO keep pts also in stream time base to avoid converting back */",
          "new_line_content": "        avsubtitle_free(&subtitle);",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": null,
          "new_api": "av_rescale_q_rnd",
          "old_text": null,
          "new_text": "av_rescale_q_rnd(ist->pts, AV_TIME_BASE_Q, ist->st->time_base,\n                                   AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX)",
          "old_line_content": "    }",
          "new_line_content": "    int64_t pts = av_rescale_q_rnd(ist->pts, AV_TIME_BASE_Q, ist->st->time_base,",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "ifilter_send_eof",
          "old_text": null,
          "new_text": "ifilter_send_eof(ist->filters[i], pts)",
          "old_line_content": "/* pkt = NULL means EOF (needed to flush decoder buffers) */",
          "new_line_content": "        ret = ifilter_send_eof(ist->filters[i], pts);",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(ist->st->avg_frame_rate)",
          "old_line_content": "        ist->saw_first_ts = 1;",
          "new_line_content": "        ist->dts = ist->st->avg_frame_rate.num ? - ist->dec_ctx->has_b_frames * AV_TIME_BASE / av_q2d(ist->st->avg_frame_rate) : 0;",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        ist->next_dts = ist->dts;",
          "new_line_content": "            ist->dts += av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": null,
          "new_api": "av_packet_ref",
          "old_text": null,
          "new_text": "av_packet_ref(avpkt, pkt)",
          "old_line_content": "        if (par->codec_type != AVMEDIA_TYPE_VIDEO || !ist->decoding_needed)",
          "new_line_content": "        ret = av_packet_ref(avpkt, pkt);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        int64_t duration_dts = 0;",
          "new_line_content": "        ist->next_dts = ist->dts = av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": null,
          "new_api": "decode_audio    (ist, repeating ? NULL : avpkt, &got_output,\n                                   &decode_failed)",
          "old_text": null,
          "new_text": "decode_audio    (ist, repeating ? NULL : avpkt, &got_output,\n                                   &decode_failed)",
          "old_line_content": "            if (!repeating || !pkt || got_output) {",
          "new_line_content": "            ret = decode_audio    (ist, repeating ? NULL : avpkt, &got_output,",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": null,
          "new_api": "decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,\n                                   &decode_failed)",
          "old_text": null,
          "new_text": "decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,\n                                   &decode_failed)",
          "old_line_content": "                                ist->last_pkt_repeat_pict + 1  :",
          "new_line_content": "            ret = decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "                                    ist->dec_ctx->framerate.num / ist->dec_ctx->ticks_per_frame;",
          "new_line_content": "                    duration_dts = av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(duration_pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        case AVMEDIA_TYPE_SUBTITLE:",
          "new_line_content": "                    ist->next_pts += av_rescale_q(duration_pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": null,
          "new_api": "av_packet_unref",
          "old_text": null,
          "new_text": "av_packet_unref(avpkt)",
          "old_line_content": "                ret = AVERROR_EOF;",
          "new_line_content": "            av_packet_unref(avpkt);",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": null,
          "new_api": "transcode_subtitles",
          "old_text": null,
          "new_text": "transcode_subtitles(ist, avpkt, &got_output, &decode_failed)",
          "old_line_content": "        }",
          "new_line_content": "            ret = transcode_subtitles(ist, avpkt, &got_output, &decode_failed);",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": null,
          "new_api": "av_packet_unref",
          "old_text": null,
          "new_text": "av_packet_unref(avpkt)",
          "old_line_content": "            eof_reached = 1;",
          "new_line_content": "            av_packet_unref(avpkt);",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "            break;",
          "new_line_content": "                       ist->file_index, ist->st->index, av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"Error while processing the decoded \"\n                       \"data for stream #%d:%d\\n\", ist->file_index, ist->st->index)",
          "old_line_content": "",
          "new_line_content": "                av_log(NULL, AV_LOG_FATAL, \"Error while processing the decoded \"",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "        if (!got_output)",
          "new_line_content": "                exit_program(1);",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": null,
          "new_api": "send_filter_eof",
          "old_text": null,
          "new_text": "send_filter_eof(ist)",
          "old_line_content": "    /* handle stream copy */",
          "new_line_content": "        int ret = send_filter_eof(ist);",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"Error marking filters as finished\\n\")",
          "old_line_content": "        ist->dts = ist->next_dts;",
          "new_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Error marking filters as finished\\n\");",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "        switch (par->codec_type) {",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": null,
          "new_api": "av_assert1",
          "old_text": null,
          "new_text": "av_assert1(pkt->duration >= 0)",
          "old_line_content": "            break;",
          "new_line_content": "            av_assert1(pkt->duration >= 0);",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "av_inv_q",
          "old_text": null,
          "new_text": "av_inv_q(ist->framerate)",
          "old_line_content": "                            ist->dec_ctx->ticks_per_frame;",
          "new_line_content": "                int64_t next_dts = av_rescale_q(ist->next_dts, time_base_q, av_inv_q(ist->framerate));",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "av_inv_q",
          "old_text": null,
          "new_text": "av_inv_q(ist->framerate)",
          "old_line_content": "                ist->next_dts += ((int64_t)AV_TIME_BASE *",
          "new_line_content": "                ist->next_dts = av_rescale_q(next_dts + 1, av_inv_q(ist->framerate), time_base_q);",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "                                  ist->dec_ctx->framerate.num / ist->dec_ctx->ticks_per_frame;",
          "new_line_content": "                ist->next_dts += av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": null,
          "new_api": "check_output_constraints",
          "old_text": null,
          "new_text": "check_output_constraints(ist, ost)",
          "old_line_content": "    return !eof_reached;",
          "new_line_content": "        if (!check_output_constraints(ist, ost) || ost->enc_ctx ||",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": null,
          "new_api": "do_streamcopy",
          "old_text": null,
          "new_text": "do_streamcopy(ist, ost, pkt)",
          "old_line_content": "{",
          "new_line_content": "        do_streamcopy(ist, ost, pkt);",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": null,
          "new_api": "av_pix_fmt_desc_get",
          "old_text": null,
          "new_text": "av_pix_fmt_desc_get(*p)",
          "old_line_content": "        if (ist->hwaccel_id == HWACCEL_GENERIC ||",
          "new_line_content": "        const AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(*p);",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": null,
          "new_api": "avcodec_get_hw_config",
          "old_text": null,
          "new_text": "avcodec_get_hw_config(s->codec, i)",
          "old_line_content": "                    break;",
          "new_line_content": "                config = avcodec_get_hw_config(s->codec, i);",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": null,
          "new_api": "hwaccel_decode_init",
          "old_text": null,
          "new_text": "hwaccel_decode_init(s)",
          "old_line_content": "                           ist->file_index, ist->st->index);",
          "new_line_content": "            ret = hwaccel_decode_init(s);",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL,\n                           \"%s hwaccel requested for input stream #%d:%d, \"\n                           \"but cannot be initialized.\\n\",\n                           av_hwdevice_get_type_name(config->device_type),\n                           ist->file_index, ist->st->index)",
          "old_line_content": "                continue;",
          "new_line_content": "                    av_log(NULL, AV_LOG_FATAL,",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": null,
          "new_api": "av_hwdevice_get_type_name",
          "old_text": null,
          "new_text": "av_hwdevice_get_type_name(config->device_type)",
          "old_line_content": "            ist->hwaccel_pix_fmt = *p;",
          "new_line_content": "                           av_hwdevice_get_type_name(config->device_type),",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(error, error_len, \"Decoder (codec %s) not found for input stream #%d:%d\",\n                    avcodec_get_name(ist->dec_ctx->codec_id), ist->file_index, ist->st->index)",
          "old_line_content": "#if LIBAVCODEC_VERSION_MAJOR < 60",
          "new_line_content": "            snprintf(error, error_len, \"Decoder (codec %s) not found for input stream #%d:%d\",",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        ist->dec_ctx->thread_safe_callbacks = 1;",
          "new_line_content": "            return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&ist->decoder_opts, \"compute_edt\", \"1\", AV_DICT_DONT_OVERWRITE)",
          "old_line_content": "        ist->dec_ctx->pkt_timebase = ist->st->time_base;",
          "new_line_content": "            av_dict_set(&ist->decoder_opts, \"compute_edt\", \"1\", AV_DICT_DONT_OVERWRITE);",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(ist->decoder_opts, \"threads\", NULL, 0)",
          "old_line_content": "        if (ret < 0) {",
          "new_line_content": "        if (!av_dict_get(ist->decoder_opts, \"threads\", NULL, 0))",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&ist->decoder_opts, \"threads\", \"1\", 0)",
          "old_line_content": "            return ret;",
          "new_line_content": "            av_dict_set(&ist->decoder_opts, \"threads\", \"1\", 0);",
          "content_same": false
        },
        {
          "line": 2559,
          "old_api": null,
          "new_api": "hw_device_setup_for_decode",
          "old_text": null,
          "new_text": "hw_device_setup_for_decode(ist)",
          "old_line_content": "",
          "new_line_content": "        ret = hw_device_setup_for_decode(ist);",
          "content_same": false
        },
        {
          "line": 2561,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(error, error_len, \"Device setup failed for \"\n                     \"decoder on input stream #%d:%d : %s\",\n                     ist->file_index, ist->st->index, av_err2str(ret))",
          "old_line_content": "            if (ret == AVERROR_EXPERIMENTAL)",
          "new_line_content": "            snprintf(error, error_len, \"Device setup failed for \"",
          "content_same": false
        },
        {
          "line": 2563,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "",
          "new_line_content": "                     ist->file_index, ist->st->index, av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": null,
          "new_api": "abort_codec_experimental",
          "old_text": null,
          "new_text": "abort_codec_experimental(codec, 0)",
          "old_line_content": "        }",
          "new_line_content": "                abort_codec_experimental(codec, 0);",
          "content_same": false
        },
        {
          "line": 2571,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(error, error_len,\n                     \"Error while opening decoder for input stream \"\n                     \"#%d:%d : %s\",\n                     ist->file_index, ist->st->index, av_err2str(ret))",
          "old_line_content": "    }",
          "new_line_content": "            snprintf(error, error_len,",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "    ist->next_dts = AV_NOPTS_VALUE;",
          "new_line_content": "                     ist->file_index, ist->st->index, av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": null,
          "new_api": "assert_avoptions",
          "old_text": null,
          "new_text": "assert_avoptions(ist->decoder_opts)",
          "old_line_content": "}",
          "new_line_content": "        assert_avoptions(ist->decoder_opts);",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(ist && !ost->filter)",
          "old_line_content": "    if (ret >= 0)",
          "new_line_content": "    av_assert0(ist && !ost->filter);",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": null,
          "new_api": "avcodec_alloc_context3",
          "old_text": null,
          "new_text": "avcodec_alloc_context3(NULL)",
          "old_line_content": "    if (ret < 0) {",
          "new_line_content": "    codec_ctx = avcodec_alloc_context3(NULL);",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "               \"Error setting up codec context options.\\n\");",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "avcodec_parameters_to_context",
          "old_text": null,
          "new_text": "avcodec_parameters_to_context(codec_ctx, ist->par)",
          "old_line_content": "        return ret;",
          "new_line_content": "    ret = avcodec_parameters_to_context(codec_ctx, ist->par);",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": null,
          "new_api": "av_opt_set_dict",
          "old_text": null,
          "new_text": "av_opt_set_dict(codec_ctx, &ost->encoder_opts)",
          "old_line_content": "",
          "new_line_content": "        ret = av_opt_set_dict(codec_ctx, &ost->encoder_opts);",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "avcodec_parameters_from_context",
          "old_text": null,
          "new_text": "avcodec_parameters_from_context(par, codec_ctx)",
          "old_line_content": "",
          "new_line_content": "    ret = avcodec_parameters_from_context(par, codec_ctx);",
          "content_same": false
        },
        {
          "line": 2614,
          "old_api": null,
          "new_api": "avcodec_free_context",
          "old_text": null,
          "new_text": "avcodec_free_context(&codec_ctx)",
          "old_line_content": "    if (!codec_tag) {",
          "new_line_content": "    avcodec_free_context(&codec_ctx);",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL,\n               \"Error getting reference codec parameters.\\n\")",
          "old_line_content": "        if (!of->format->codec_tag ||",
          "new_line_content": "        av_log(NULL, AV_LOG_FATAL,",
          "content_same": false
        },
        {
          "line": 2624,
          "old_api": null,
          "new_api": "av_codec_get_id (of->format->codec_tag, par->codec_tag)",
          "old_text": null,
          "new_text": "av_codec_get_id (of->format->codec_tag, par->codec_tag)",
          "old_line_content": "    if (!ost->frame_rate.num)",
          "new_line_content": "            av_codec_get_id (of->format->codec_tag, par->codec_tag) == par->codec_id ||",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": null,
          "new_api": "av_codec_get_tag2",
          "old_text": null,
          "new_text": "av_codec_get_tag2(of->format->codec_tag, par->codec_id, &codec_tag_tmp)",
          "old_line_content": "        ost->frame_rate = ist->framerate;",
          "new_line_content": "            !av_codec_get_tag2(of->format->codec_tag, par->codec_id, &codec_tag_tmp))",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": null,
          "new_api": "av_stream_get_codec_timebase",
          "old_text": null,
          "new_text": "av_stream_get_codec_timebase(ost->st)",
          "old_line_content": "    if (!ost->copy_prior_start) {",
          "new_line_content": "            ost->st->time_base = av_add_q(av_stream_get_codec_timebase(ost->st), (AVRational){0, 1});",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base)",
          "old_line_content": "                                       ifile->start_time + ifile->ts_offset);",
          "new_line_content": "        ost->st->duration = av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base);",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(ost->ts_copy_start,\n                                       ifile->start_time + ifile->ts_offset)",
          "old_line_content": "            const AVPacketSideData *sd_src = &ist->st->side_data[i];",
          "new_line_content": "            ost->ts_copy_start = FFMAX(ost->ts_copy_start,",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": null,
          "new_api": "av_stream_new_side_data",
          "old_text": null,
          "new_text": "av_stream_new_side_data(ost->st, sd_src->type, sd_src->size)",
          "old_line_content": "#if FFMPEG_ROTATION_METADATA",
          "new_line_content": "            dst_data = av_stream_new_side_data(ost->st, sd_src->type, sd_src->size);",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst_data, sd_src->data, sd_src->size)",
          "old_line_content": "                                              sizeof(int32_t) * 9);",
          "new_line_content": "            memcpy(dst_data, sd_src->data, sd_src->size);",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "av_stream_new_side_data",
          "old_text": null,
          "new_text": "av_stream_new_side_data(ost->st, AV_PKT_DATA_DISPLAYMATRIX,\n                                              sizeof(int32_t) * 9)",
          "old_line_content": "    switch (par->codec_type) {",
          "new_line_content": "        uint8_t *sd = av_stream_new_side_data(ost->st, AV_PKT_DATA_DISPLAYMATRIX,",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": null,
          "new_api": "av_display_rotation_set",
          "old_text": null,
          "new_text": "av_display_rotation_set((int32_t *)sd, -ost->rotate_override_value)",
          "old_line_content": "            par->codec_id == AV_CODEC_ID_MP3)",
          "new_line_content": "            av_display_rotation_set((int32_t *)sd, -ost->rotate_override_value);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": null,
          "new_api": "av_mul_q",
          "old_text": null,
          "new_text": "av_mul_q(ost->frame_aspect_ratio,\n                         (AVRational){ par->height, par->width })",
          "old_line_content": "        else",
          "new_line_content": "                av_mul_q(ost->frame_aspect_ratio,",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Overriding aspect ratio \"\n                   \"with stream copy may produce invalid files\\n\")",
          "old_line_content": "        ost->st->sample_aspect_ratio = par->sample_aspect_ratio = sar;",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"Overriding aspect ratio \"",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(ost->st->metadata, \"encoder\",  NULL, 0)",
          "old_line_content": "",
          "new_line_content": "    if (av_dict_get(ost->st->metadata, \"encoder\",  NULL, 0))",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cname)",
          "old_line_content": "    else",
          "new_line_content": "    encoder_string_len = sizeof(LIBAVCODEC_IDENT) + strlen(cname) + 2;",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": null,
          "new_api": "av_strlcpy",
          "old_text": null,
          "new_text": "av_strlcpy(encoder_string, LIBAVCODEC_IDENT \" \", encoder_string_len)",
          "old_line_content": "",
          "new_line_content": "        av_strlcpy(encoder_string, LIBAVCODEC_IDENT \" \", encoder_string_len);",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": null,
          "new_api": "av_strlcpy",
          "old_text": null,
          "new_text": "av_strlcpy(encoder_string, \"Lavc \", encoder_string_len)",
          "old_line_content": "{",
          "new_line_content": "        av_strlcpy(encoder_string, \"Lavc \", encoder_string_len);",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "av_strlcat",
          "old_text": null,
          "new_text": "av_strlcat(encoder_string, cname, encoder_string_len)",
          "old_line_content": "    InputStream *ist = ost->ist;",
          "new_line_content": "    av_strlcat(encoder_string, cname, encoder_string_len);",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&ost->st->metadata, \"encoder\",  encoder_string,\n                AV_DICT_DONT_STRDUP_VAL | AV_DICT_DONT_OVERWRITE)",
          "old_line_content": "    AVCodecContext *enc_ctx = ost->enc_ctx;",
          "new_line_content": "    av_dict_set(&ost->st->metadata, \"encoder\",  encoder_string,",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING,\n               \"Input stream data for output stream #%d:%d not available, \"\n               \"using default time base\\n\", ost->file_index, ost->index)",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": null,
          "new_api": "set_encoder_id",
          "old_text": null,
          "new_text": "set_encoder_id(output_files[ost->file_index], ost)",
          "old_line_content": "        if (!ost->frame_rate.num)",
          "new_line_content": "    set_encoder_id(output_files[ost->file_index], ost);",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": null,
          "new_api": "av_buffersink_get_frame_rate",
          "old_text": null,
          "new_text": "av_buffersink_get_frame_rate(ost->filter->filter)",
          "old_line_content": "                   \"if you want a different framerate.\\n\",",
          "new_line_content": "            ost->frame_rate = av_buffersink_get_frame_rate(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING,\n                   \"No information \"\n                   \"about the input framerate is available. Falling \"\n                   \"back to a default value of 25fps for output stream #%d:%d. Use the -r option \"\n                   \"if you want a different framerate.\\n\",\n                   ost->file_index, ost->index)",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(ost->max_frame_rate)",
          "old_line_content": "        }",
          "new_line_content": "            (av_q2d(ost->frame_rate) > av_q2d(ost->max_frame_rate) ||",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": null,
          "new_api": "av_find_nearest_q_idx",
          "old_text": null,
          "new_text": "av_find_nearest_q_idx(ost->frame_rate, enc_ctx->codec->supported_framerates)",
          "old_line_content": "        }",
          "new_line_content": "            int idx = av_find_nearest_q_idx(ost->frame_rate, enc_ctx->codec->supported_framerates);",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": null,
          "new_api": "av_buffersink_get_format",
          "old_text": null,
          "new_text": "av_buffersink_get_format(ost->filter->filter)",
          "old_line_content": "            enc_ctx->bits_per_raw_sample = ost->bits_per_raw_sample;",
          "new_line_content": "        enc_ctx->sample_fmt     = av_buffersink_get_format(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2809,
          "old_api": null,
          "new_api": "av_buffersink_get_sample_rate",
          "old_text": null,
          "new_text": "av_buffersink_get_sample_rate(ost->filter->filter)",
          "old_line_content": "        else if (dec_ctx && ost->filter->graph->is_meta)",
          "new_line_content": "        enc_ctx->sample_rate    = av_buffersink_get_sample_rate(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": null,
          "new_api": "av_get_bytes_per_sample",
          "old_text": null,
          "new_text": "av_get_bytes_per_sample(enc_ctx->sample_fmt)",
          "old_line_content": "",
          "new_line_content": "                                                 av_get_bytes_per_sample(enc_ctx->sample_fmt) << 3);",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "av_buffersink_get_time_base",
          "old_text": null,
          "new_text": "av_buffersink_get_time_base(ost->filter->filter)",
          "old_line_content": "        }",
          "new_line_content": "            enc_ctx->time_base = av_buffersink_get_time_base(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(enc_ctx->time_base)",
          "old_line_content": "",
          "new_line_content": "        if (   av_q2d(enc_ctx->time_base) < 0.001 && ost->vsync_method != VSYNC_PASSTHROUGH",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Frame rate very high for a muxer not efficiently supporting it.\\n\"\n                                       \"Please consider specifying a lower framerate, a different muxer or \"\n                                       \"setting vsync/fps_mode to vfr\\n\")",
          "old_line_content": "        enc_ctx->sample_aspect_ratio = ost->st->sample_aspect_ratio =",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"Frame rate very high for a muxer not efficiently supporting it.\\n\"",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": null,
          "new_api": "av_buffersink_get_h",
          "old_text": null,
          "new_text": "av_buffersink_get_h(ost->filter->filter)",
          "old_line_content": "",
          "new_line_content": "        enc_ctx->height = av_buffersink_get_h(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": null,
          "new_api": "av_mul_q",
          "old_text": null,
          "new_text": "av_mul_q(ost->frame_aspect_ratio, (AVRational){ enc_ctx->height, enc_ctx->width })",
          "old_line_content": "        else if (dec_ctx && ost->filter->graph->is_meta)",
          "new_line_content": "            av_mul_q(ost->frame_aspect_ratio, (AVRational){ enc_ctx->height, enc_ctx->width }) :",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": null,
          "new_api": "av_buffersink_get_format",
          "old_text": null,
          "new_text": "av_buffersink_get_format(ost->filter->filter)",
          "old_line_content": "",
          "new_line_content": "        enc_ctx->pix_fmt = av_buffersink_get_format(ost->filter->filter);",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(dec_ctx->bits_per_raw_sample,\n                                                 av_pix_fmt_desc_get(enc_ctx->pix_fmt)->comp[0].depth)",
          "old_line_content": "            enc_ctx->colorspace             = frame->colorspace;",
          "new_line_content": "            enc_ctx->bits_per_raw_sample = FFMIN(dec_ctx->bits_per_raw_sample,",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": null,
          "new_api": "av_pix_fmt_desc_get",
          "old_text": null,
          "new_text": "av_pix_fmt_desc_get(enc_ctx->pix_fmt)",
          "old_line_content": "            enc_ctx->chroma_sample_location = frame->chroma_location;",
          "new_line_content": "                                                 av_pix_fmt_desc_get(enc_ctx->pix_fmt)->comp[0].depth);",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(dec_ctx->subtitle_header_size + 1)",
          "old_line_content": "        if (ist && ist->dec->type == AVMEDIA_TYPE_SUBTITLE &&",
          "new_line_content": "            ost->enc_ctx->subtitle_header = av_mallocz(dec_ctx->subtitle_header_size + 1);",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            int input_props = 0, output_props = 0;",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ost->enc_ctx->subtitle_header, dec_ctx->subtitle_header,\n                   dec_ctx->subtitle_header_size)",
          "old_line_content": "            AVCodecDescriptor const *input_descriptor =",
          "new_line_content": "            memcpy(ost->enc_ctx->subtitle_header, dec_ctx->subtitle_header,",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": null,
          "new_api": "avcodec_descriptor_get",
          "old_text": null,
          "new_text": "avcodec_descriptor_get(ist->dec->id)",
          "old_line_content": "            if (input_props && output_props && input_props != output_props) {",
          "new_line_content": "                avcodec_descriptor_get(ist->dec->id);",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": null,
          "new_api": "avcodec_descriptor_get",
          "old_text": null,
          "new_text": "avcodec_descriptor_get(ost->enc_ctx->codec_id)",
          "old_line_content": "                       \"Subtitle encoding currently only possible from text to text \"",
          "new_line_content": "                avcodec_descriptor_get(ost->enc_ctx->codec_id);",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR,\n                       \"Subtitle encoding currently only possible from text to text \"\n                       \"or bitmap to bitmap\")",
          "old_line_content": "        break;",
          "new_line_content": "                av_log(NULL, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "    if (ost->sq_idx_encode >= 0)",
          "new_line_content": "        abort();",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": null,
          "new_api": "sq_set_tb",
          "old_text": null,
          "new_text": "sq_set_tb(of->sq_encode, ost->sq_idx_encode, enc_ctx->time_base)",
          "old_line_content": "static int init_output_stream(OutputStream *ost, AVFrame *frame,",
          "new_line_content": "        sq_set_tb(of->sq_encode, ost->sq_idx_encode, enc_ctx->time_base);",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&ost->encoder_opts, \"threads\", \"auto\", 0)",
          "old_line_content": "            return ret;",
          "new_line_content": "            av_dict_set(&ost->encoder_opts, \"threads\", \"auto\", 0);",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": null,
          "new_api": "hw_device_setup_for_encode",
          "old_text": null,
          "new_text": "hw_device_setup_for_encode(ost)",
          "old_line_content": "",
          "new_line_content": "        ret = hw_device_setup_for_encode(ost);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(error, error_len, \"Device setup failed for \"\n                     \"encoder on output stream #%d:%d : %s\",\n                     ost->file_index, ost->index, av_err2str(ret))",
          "old_line_content": "            if (ret == AVERROR_EXPERIMENTAL)",
          "new_line_content": "            snprintf(error, error_len, \"Device setup failed for \"",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": null,
          "new_api": "avcodec_open2",
          "old_text": null,
          "new_text": "avcodec_open2(ost->enc_ctx, codec, &ost->encoder_opts)",
          "old_line_content": "            return ret;",
          "new_line_content": "        if ((ret = avcodec_open2(ost->enc_ctx, codec, &ost->encoder_opts)) < 0) {",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": null,
          "new_api": "abort_codec_experimental",
          "old_text": null,
          "new_text": "abort_codec_experimental(codec, 1)",
          "old_line_content": "        if (codec->type == AVMEDIA_TYPE_AUDIO &&",
          "new_line_content": "                abort_codec_experimental(codec, 1);",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(error, error_len,\n                     \"Error while opening encoder for output stream #%d:%d - \"\n                     \"maybe incorrect parameters such as bit_rate, rate, width or height\",\n                    ost->file_index, ost->index)",
          "old_line_content": "            !(codec->capabilities & AV_CODEC_CAP_VARIABLE_FRAME_SIZE))",
          "new_line_content": "            snprintf(error, error_len,",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": null,
          "new_api": "av_buffersink_set_frame_size",
          "old_text": null,
          "new_text": "av_buffersink_set_frame_size(ost->filter->filter,\n                                            ost->enc_ctx->frame_size)",
          "old_line_content": "",
          "new_line_content": "            av_buffersink_set_frame_size(ost->filter->filter,",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": null,
          "new_api": "assert_avoptions",
          "old_text": null,
          "new_text": "assert_avoptions(ost->encoder_opts)",
          "old_line_content": "        if (ret < 0) {",
          "new_line_content": "        assert_avoptions(ost->encoder_opts);",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": null,
          "new_api": "avcodec_parameters_from_context",
          "old_text": null,
          "new_text": "avcodec_parameters_from_context(ost->st->codecpar, ost->enc_ctx)",
          "old_line_content": "        if (ost->enc_ctx->nb_coded_side_data) {",
          "new_line_content": "        ret = avcodec_parameters_from_context(ost->st->codecpar, ost->enc_ctx);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL,\n                   \"Error initializing the output stream codec context.\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_FATAL,",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "                const AVPacketSideData *sd_src = &ost->enc_ctx->coded_side_data[i];",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "check_recording_time",
          "old_text": null,
          "new_text": "check_recording_time(ost, ost->next_pts, ost->enc_ctx->time_base)",
          "old_line_content": "",
          "new_line_content": "    if (!check_recording_time(ost, ost->next_pts, ost->enc_ctx->time_base))",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(start_time, AV_TIME_BASE_Q,   enc->time_base)",
          "old_line_content": "    if (ret < 0 && ret != AVERROR_EOF)",
          "new_line_content": "            av_rescale_q(start_time, AV_TIME_BASE_Q,   enc->time_base);",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "av_stream_new_side_data",
          "old_text": null,
          "new_text": "av_stream_new_side_data(ost->st, sd_src->type, sd_src->size)",
          "old_line_content": "        /*",
          "new_line_content": "                dst_data = av_stream_new_side_data(ost->st, sd_src->type, sd_src->size);",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "         * from the input stream's global side data. All side data should",
          "new_line_content": "                    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst_data, sd_src->data, sd_src->size)",
          "old_line_content": "         * really be funneled over AVFrame and libavfilter, then added back to",
          "new_line_content": "                memcpy(dst_data, sd_src->data, sd_src->size);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "submit_encode_frame",
          "old_text": null,
          "new_text": "submit_encode_frame(of, ost, frame)",
          "old_line_content": "                            AVSubtitle *sub)",
          "new_line_content": "    ret = submit_encode_frame(of, ost, frame);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    int subtitle_out_max_size = 1024 * 1024;",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": null,
          "new_api": "av_stream_new_side_data",
          "old_text": null,
          "new_text": "av_stream_new_side_data(ost->st, sd->type, sd->size)",
          "old_line_content": "            }",
          "new_line_content": "                    uint8_t *dst = av_stream_new_side_data(ost->st, sd->type, sd->size);",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "                        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Subtitle packets must have a pts\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_ERROR, \"Subtitle packets must have a pts\\n\");",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst, sd->data, sd->size)",
          "old_line_content": "        // copy timebase while removing common factors",
          "new_line_content": "                    memcpy(dst, sd->data, sd->size);",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "       packet to clear them */",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": null,
          "new_api": "av_add_q",
          "old_text": null,
          "new_text": "av_add_q(ost->enc_ctx->time_base, (AVRational){0, 1})",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "            ost->st->time_base = av_add_q(ost->enc_ctx->time_base, (AVRational){0, 1});",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": null,
          "new_api": "init_output_stream_streamcopy",
          "old_text": null,
          "new_text": "init_output_stream_streamcopy(ost)",
          "old_line_content": "        return ret;",
          "new_line_content": "        ret = init_output_stream_streamcopy(ost);",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": null,
          "new_api": "of_stream_init",
          "old_text": null,
          "new_text": "of_stream_init(output_files[ost->file_index], ost)",
          "old_line_content": "static int transcode_init(void)",
          "new_line_content": "    ret = of_stream_init(output_files[ost->file_index], ost);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "check_recording_time",
          "old_text": null,
          "new_text": "check_recording_time(ost, pts, AV_TIME_BASE_Q)",
          "old_line_content": "        sub->pts = pts;",
          "new_line_content": "        if (!check_recording_time(ost, pts, AV_TIME_BASE_Q))",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "av_new_packet",
          "old_text": null,
          "new_text": "av_new_packet(pkt, subtitle_out_max_size)",
          "old_line_content": "        sub->end_display_time  -= sub->start_display_time;",
          "new_line_content": "        ret = av_new_packet(pkt, subtitle_out_max_size);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        if (i == 1)",
          "new_line_content": "            report_and_exit(AVERROR(ENOMEM));",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, AV_TIME_BASE_Q)",
          "old_line_content": "",
          "new_line_content": "        sub->pts               += av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": null,
          "new_api": "av_gettime_relative",
          "old_text": null,
          "new_text": "av_gettime_relative()",
          "old_line_content": "",
          "new_line_content": "                ifile->streams[j]->start = av_gettime_relative();",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "avcodec_encode_subtitle",
          "old_text": null,
          "new_text": "avcodec_encode_subtitle(enc, pkt->data, pkt->size, sub)",
          "old_line_content": "",
          "new_line_content": "        subtitle_out_size = avcodec_encode_subtitle(enc, pkt->data, pkt->size, sub);",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": null,
          "new_api": "ist_iter",
          "old_text": null,
          "new_text": "ist_iter(ist)",
          "old_line_content": "     * - when the first AVFrame is received in do_video_out",
          "new_line_content": "    for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist))",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": null,
          "new_api": "init_input_stream",
          "old_text": null,
          "new_text": "init_input_stream(ist, error, sizeof(error))",
          "old_line_content": "     * - just before the first AVFrame is received in either transcode_step",
          "new_line_content": "        if ((ret = init_input_stream(ist, error, sizeof(error))) < 0)",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"Subtitle encoding failed\\n\")",
          "old_line_content": "        if (enc->codec_id == AV_CODEC_ID_DVB_SUBTITLE) {",
          "new_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Subtitle encoding failed\\n\");",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "            /* XXX: the pts correction is handled here. Maybe handling",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(sub->pts, AV_TIME_BASE_Q, ost->mux_timebase)",
          "old_line_content": "            else",
          "new_line_content": "        pkt->pts  = av_rescale_q(sub->pts, AV_TIME_BASE_Q, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase)",
          "old_line_content": "}",
          "new_line_content": "                pkt->pts += av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(sub->end_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase)",
          "old_line_content": "static enum AVPictureType forced_kf_apply(KeyframeForceCtx *kf, AVRational tb,",
          "new_line_content": "                pkt->pts += av_rescale_q(sub->end_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "of_output_packet",
          "old_text": null,
          "new_text": "of_output_packet(of, pkt, ost, 0)",
          "old_line_content": "    double pts_time;",
          "new_line_content": "        of_output_packet(of, pkt, ost, 0);",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": null,
          "new_api": "init_output_stream_wrapper",
          "old_text": null,
          "new_text": "init_output_stream_wrapper(ost, NULL, 0)",
          "old_line_content": "        InputFile *ifile = input_files[i];",
          "new_line_content": "        ret = init_output_stream_wrapper(ost, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(tb)",
          "old_line_content": "        kf->expr_const_values[FKF_T] = pts_time;",
          "new_line_content": "    pts_time = (in_picture->pts - kf->ref_pts) * av_q2d(tb);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "av_compare_ts",
          "old_text": null,
          "new_text": "av_compare_ts(in_picture->pts, tb, kf->pts[kf->index], AV_TIME_BASE_Q)",
          "old_line_content": "                           kf->expr_const_values, NULL);",
          "new_line_content": "        av_compare_ts(in_picture->pts, tb, kf->pts[kf->index], AV_TIME_BASE_Q) >= 0) {",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "av_expr_eval",
          "old_text": null,
          "new_text": "av_expr_eval(kf->pexpr,\n                           kf->expr_const_values, NULL)",
          "old_line_content": "                kf->expr_const_values[FKF_PREV_FORCED_T],",
          "new_line_content": "        res = av_expr_eval(kf->pexpr,",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(NULL, \"force_key_frame: n:%f n_forced:%f prev_forced_n:%f t:%f prev_forced_t:%f -> res:%f\\n\",\n                kf->expr_const_values[FKF_N],\n                kf->expr_const_values[FKF_N_FORCED],\n                kf->expr_const_values[FKF_PREV_FORCED_N],\n                kf->expr_const_values[FKF_T],\n                kf->expr_const_values[FKF_PREV_FORCED_T],\n                res)",
          "old_line_content": "",
          "new_line_content": "        ff_dlog(NULL, \"force_key_frame: n:%f n_forced:%f prev_forced_n:%f t:%f prev_forced_t:%f -> res:%f\\n\",",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"Stream mapping:\\n\")",
          "old_line_content": "                if (nb_filtergraphs > 1)",
          "new_line_content": "    av_log(NULL, AV_LOG_INFO, \"Stream mapping:\\n\");",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": null,
          "new_api": "filtergraph_is_simple",
          "old_text": null,
          "new_text": "filtergraph_is_simple(ist->filters[j]->graph)",
          "old_line_content": "            }",
          "new_line_content": "            if (!filtergraph_is_simple(ist->filters[j]->graph)) {",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d (%s) -> %s\",\n                       ist->file_index, ist->st->index, ist->dec ? ist->dec->name : \"?\",\n                       ist->filters[j]->name)",
          "old_line_content": "        }",
          "new_line_content": "                av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d (%s) -> %s\",",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ist->filters[j]->graph->index)",
          "old_line_content": "        if (ost->attachment_filename) {",
          "new_line_content": "                    av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ist->filters[j]->graph->index);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"\\n\")",
          "old_line_content": "            /* an attached file */",
          "new_line_content": "                av_log(NULL, AV_LOG_INFO, \"\\n\");",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": null,
          "new_api": "filtergraph_is_simple",
          "old_text": null,
          "new_text": "filtergraph_is_simple(ost->filter->graph)",
          "old_line_content": "                   ost->index, ost->enc_ctx->codec->name);",
          "new_line_content": "        if (ost->filter && !filtergraph_is_simple(ost->filter->graph)) {",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"  %s\", ost->filter->name)",
          "old_line_content": "        }",
          "new_line_content": "            av_log(NULL, AV_LOG_INFO, \"  %s\", ost->filter->name);",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"Forced keyframe at time %f\\n\", pts_time)",
          "old_line_content": "                         AVFrame *next_picture)",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"Forced keyframe at time %f\\n\", pts_time);",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \" -> Stream #%d:%d (%s)\\n\", ost->file_index,\n                   ost->index, ost->enc_ctx->codec->name)",
          "old_line_content": "               ost->ist->st->index,",
          "new_line_content": "            av_log(NULL, AV_LOG_INFO, \" -> Stream #%d:%d (%s)\\n\", ost->file_index,",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d -> #%d:%d\",\n               ost->ist->file_index,\n               ost->ist->st->index,\n               ost->file_index,\n               ost->index)",
          "old_line_content": "            const AVCodec *out_codec   = ost->enc_ctx->codec;",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d -> #%d:%d\",",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "init_output_stream_wrapper",
          "old_text": null,
          "new_text": "init_output_stream_wrapper(ost, next_picture, 1)",
          "old_line_content": "    if(ist && ist->st->start_time != AV_NOPTS_VALUE && ist->first_dts != AV_NOPTS_VALUE && ost->frame_rate.num)",
          "new_line_content": "    init_output_stream_wrapper(ost, next_picture, 1);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "av_buffersink_get_frame_rate",
          "old_text": null,
          "new_text": "av_buffersink_get_frame_rate(filter)",
          "old_line_content": "    if (!ost->filters_script &&",
          "new_line_content": "    frame_rate = av_buffersink_get_frame_rate(filter);",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": null,
          "new_api": "avcodec_descriptor_get",
          "old_text": null,
          "new_text": "avcodec_descriptor_get(in_codec->id)",
          "old_line_content": "            if (out_codec) {",
          "new_line_content": "                desc = avcodec_descriptor_get(in_codec->id);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(enc->time_base)",
          "old_line_content": "        (nb_filtergraphs == 0 || !filtergraphs[0]->graph_desc) &&",
          "new_line_content": "        duration = 1/(av_q2d(frame_rate) * av_q2d(enc->time_base));",
          "content_same": false
        },
        {
          "line": 3153,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(decoder_name, in_codec_name)",
          "old_line_content": "                if (desc)",
          "new_line_content": "                if (!strcmp(decoder_name, in_codec_name))",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(enc->time_base)",
          "old_line_content": "                                          ost->last_nb0_frames[1],",
          "new_line_content": "        lrintf(next_picture->duration * av_q2d(ist->st->time_base) / av_q2d(enc->time_base)) > 0) {",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "av_q2d",
          "old_text": null,
          "new_text": "av_q2d(enc->time_base)",
          "old_line_content": "                                          ost->last_nb0_frames[2]);",
          "new_line_content": "        duration = lrintf(next_picture->duration * av_q2d(ist->st->time_base) / av_q2d(enc->time_base));",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(encoder_name, out_codec_name)",
          "old_line_content": "        } else",
          "new_line_content": "                if (!strcmp(encoder_name, out_codec_name))",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \" (%s (%s) -> %s (%s))\",\n                   in_codec_name, decoder_name,\n                   out_codec_name, encoder_name)",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_INFO, \" (%s (%s) -> %s (%s))\",",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "mid_pred",
          "old_text": null,
          "new_text": "mid_pred(ost->last_nb0_frames[0],\n                                          ost->last_nb0_frames[1],\n                                          ost->last_nb0_frames[2])",
          "old_line_content": "        delta  = delta0 + duration;",
          "new_line_content": "        nb0_frames = nb_frames = mid_pred(ost->last_nb0_frames[0],",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \" (copy)\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(NULL, AV_LOG_INFO, \" (copy)\");",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"\\n\");",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"%s\\n\", error)",
          "old_line_content": "}",
          "new_line_content": "        av_log(NULL, AV_LOG_ERROR, \"%s\\n\", error);",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": null,
          "new_api": "atomic_store",
          "old_text": null,
          "new_text": "atomic_store(&transcode_init_done, 1)",
          "old_line_content": "{",
          "new_line_content": "    atomic_store(&transcode_init_done, 1);",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"Past duration %f too large\\n\", -delta0)",
          "old_line_content": "",
          "new_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"Past duration %f too large\\n\", -delta0);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "    return 0;",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"Clipping frame in rate conversion by %f\\n\", -delta0)",
          "old_line_content": "        case VSYNC_VSCFR:",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"Clipping frame in rate conversion by %f\\n\", -delta0);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(delta0)",
          "old_line_content": "            if (frame_drop_threshold && delta < frame_drop_threshold && ost->vsync_frame_number) {",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"Not duplicating %d initial frames\\n\", (int)lrintf(delta0));",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "llrint",
          "old_text": null,
          "new_text": "llrint(sync_ipts)",
          "old_line_content": "                nb_frames = 0;",
          "new_line_content": "                ost->next_pts = llrint(sync_ipts);",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "                   INT64_MIN : ost->last_mux_dts;",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "llrintf",
          "old_text": null,
          "new_text": "llrintf(delta)",
          "old_line_content": "            if (delta <= -0.6)",
          "new_line_content": "                nb_frames = llrintf(delta);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "llrintf",
          "old_text": null,
          "new_text": "llrintf(delta0 - 0.6)",
          "old_line_content": "            else if (delta > 0.6)",
          "new_line_content": "                    nb0_frames = llrintf(delta0 - 0.6);",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG,\n                    \"cur_dts is invalid st:%d (%d) [init:%d i_done:%d finish:%d] (this is harmless if it occurs once at the start per stream)\\n\",\n                    ost->st->index, ost->st->id, ost->initialized, ost->inputs_done, ost->finished)",
          "old_line_content": "",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "llrint",
          "old_text": null,
          "new_text": "llrint(sync_ipts)",
          "old_line_content": "            break;",
          "new_line_content": "                ost->next_pts = llrint(sync_ipts);",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "    ost->last_nb0_frames[0] = nb0_frames;",
          "new_line_content": "            av_assert0(0);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "FF_ARRAY_ELEMS",
          "old_text": null,
          "new_text": "FF_ARRAY_ELEMS(ost->last_nb0_frames)",
          "old_line_content": "               ost->vsync_frame_number, ost->st->index, ost->last_frame->pts);",
          "new_line_content": "            sizeof(ost->last_nb0_frames[0]) * (FF_ARRAY_ELEMS(ost->last_nb0_frames) - 1));",
          "content_same": false
        },
        {
          "line": 3236,
          "old_api": null,
          "new_api": "tcgetattr",
          "old_text": null,
          "new_text": "tcgetattr(0, &tty)",
          "old_line_content": "",
          "new_line_content": "    if (tcgetattr(0, &tty) == 0) {",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE,\n               \"*** dropping frame %\"PRId64\" from stream %d at ts %\"PRId64\"\\n\",\n               ost->vsync_frame_number, ost->st->index, ost->last_frame->pts)",
          "old_line_content": "            nb_frames_drop++;",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE,",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "tcsetattr",
          "old_text": null,
          "new_text": "tcsetattr(0, TCSANOW, &tty)",
          "old_line_content": "    int i, ret, key;",
          "new_line_content": "        tcsetattr(0, TCSANOW, &tty);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"*** %\"PRId64\" dup!\\n\", nb_frames - 1)",
          "old_line_content": "    ost->kf.dropped_keyframe = ost->last_dropped && next_picture && next_picture->key_frame;",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"*** %\"PRId64\" dup!\\n\", nb_frames - 1);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"More than %\"PRIu64\" frames duplicated\\n\", dup_warning)",
          "old_line_content": "    /* duplicates frame if needed */",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"More than %\"PRIu64\" frames duplicated\\n\", dup_warning);",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": null,
          "new_api": "read_key",
          "old_text": null,
          "new_text": "read_key()",
          "old_line_content": "    }",
          "new_line_content": "        key =  read_key();",
          "content_same": false
        },
        {
          "line": 3257,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"\\n\\n[q] command received. Exiting.\\n\\n\")",
          "old_line_content": "        char buf[4096], target[64], command[256], arg[256] = {0};",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"\\n\\n[q] command received. Exiting.\\n\\n\");",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": null,
          "new_api": "av_log_get_level",
          "old_text": null,
          "new_text": "av_log_get_level()",
          "old_line_content": "        i = 0;",
          "new_line_content": "    if (key == '-') av_log_set_level(av_log_get_level()-10);",
          "content_same": false
        },
        {
          "line": 3269,
          "old_api": null,
          "new_api": "set_tty_echo",
          "old_text": null,
          "new_text": "set_tty_echo(1)",
          "old_line_content": "        if (k > 0 &&",
          "new_line_content": "        set_tty_echo(1);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "check_recording_time",
          "old_text": null,
          "new_text": "check_recording_time(ost, in_picture->pts, ost->enc_ctx->time_base)",
          "old_line_content": "        if (ret == AVERROR_EOF)",
          "new_line_content": "        if (!check_recording_time(ost, in_picture->pts, ost->enc_ctx->time_base))",
          "content_same": false
        },
        {
          "line": 3274,
          "old_api": null,
          "new_api": "set_tty_echo",
          "old_text": null,
          "new_text": "set_tty_echo(0)",
          "old_line_content": "                FilterGraph *fg = filtergraphs[i];",
          "new_line_content": "        set_tty_echo(0);",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "                if (fg->graph) {",
          "new_line_content": "        fprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "forced_kf_apply",
          "old_text": null,
          "new_text": "forced_kf_apply(&ost->kf, enc->time_base, in_picture, i)",
          "old_line_content": "",
          "new_line_content": "        in_picture->pict_type = forced_kf_apply(&ost->kf, enc->time_base, in_picture, i);",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"Processing command target:%s time:%f command:%s arg:%s\",\n                   target, time, command, arg)",
          "old_line_content": "                                                          key == 'c' ? AVFILTER_CMD_FLAG_ONE : 0);",
          "new_line_content": "            av_log(NULL, AV_LOG_DEBUG, \"Processing command target:%s time:%f command:%s arg:%s\",",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "submit_encode_frame",
          "old_text": null,
          "new_text": "submit_encode_frame(of, ost, in_picture)",
          "old_line_content": "        ost->vsync_frame_number++;",
          "new_line_content": "        ret = submit_encode_frame(of, ost, in_picture);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    if (next_picture)",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 3288,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Queuing commands only on filters supporting the specific command is unsupported\\n\")",
          "old_line_content": "                }",
          "new_line_content": "                        fprintf(stderr, \"Queuing commands only on filters supporting the specific command is unsupported\\n\");",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "av_frame_unref",
          "old_text": null,
          "new_text": "av_frame_unref(ost->last_frame)",
          "old_line_content": " * activity.",
          "new_line_content": "    av_frame_unref(ost->last_frame);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "av_frame_move_ref",
          "old_text": null,
          "new_text": "av_frame_move_ref(ost->last_frame, next_picture)",
          "old_line_content": " * @return  0 for success, <0 for severe errors",
          "new_line_content": "        av_frame_move_ref(ost->last_frame, next_picture);",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "                   \"only %d given in string '%s'\\n\", n, buf);",
          "new_line_content": "                            fprintf(stderr, \"Queuing command failed with error %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR,\n                   \"Parse error, at least 3 arguments were expected, \"\n                   \"only %d given in string '%s'\\n\", n, buf)",
          "old_line_content": "        if(key == 'D') {",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "            continue;",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": null,
          "new_api": "ist_iter",
          "old_text": null,
          "new_text": "ist_iter(NULL)",
          "old_line_content": "                debug += debug;",
          "new_line_content": "            InputStream *ist = ist_iter(NULL);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "av_buffersink_get_type",
          "old_text": null,
          "new_text": "av_buffersink_get_type(filter)",
          "old_line_content": "                                               AV_BUFFERSINK_FLAG_NO_REQUEST);",
          "new_line_content": "        if (av_buffersink_get_type(filter) == AVMEDIA_TYPE_AUDIO)",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "init_output_stream_wrapper",
          "old_text": null,
          "new_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "old_line_content": "            if (ret < 0) {",
          "new_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "            if (ost->enc_ctx)",
          "new_line_content": "            fprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": null,
          "new_api": "sscanf",
          "old_text": null,
          "new_text": "sscanf(buf, \"%d\", &debug)",
          "old_line_content": "                ost->enc_ctx->debug = debug;",
          "new_line_content": "            if (k <= 0 || sscanf(buf, \"%d\", &debug)!=1)",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"error parsing debug value\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                fprintf(stderr,\"error parsing debug value\\n\");",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "    if (key == '?'){",
          "new_line_content": "        for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "                break;",
          "new_line_content": "                if (ret != AVERROR(EAGAIN) && ret != AVERROR_EOF) {",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING,\n                           \"Error in av_buffersink_get_frame_flags(): %s\\n\", av_err2str(ret))",
          "old_line_content": "            }",
          "new_line_content": "                    av_log(NULL, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "            if (ost->finished) {",
          "new_line_content": "                           \"Error in av_buffersink_get_frame_flags(): %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": null,
          "new_api": "av_log_set_level",
          "old_text": null,
          "new_text": "av_log_set_level(AV_LOG_DEBUG)",
          "old_line_content": "                        \"-      decrease verbosity\\n\"",
          "new_line_content": "        if(debug) av_log_set_level(AV_LOG_DEBUG);",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": null,
          "new_api": "av_buffersink_get_type",
          "old_text": null,
          "new_text": "av_buffersink_get_type(filter)",
          "old_line_content": "                continue;",
          "new_line_content": "                    if (av_buffersink_get_type(filter) == AVMEDIA_TYPE_VIDEO)",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "do_video_out",
          "old_text": null,
          "new_text": "do_video_out(of, ost, NULL)",
          "old_line_content": "            }",
          "new_line_content": "                        do_video_out(of, ost, NULL);",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"debug=%d\\n\", debug)",
          "old_line_content": "                        \"c      Send command to first matching filter supporting it\\n\"",
          "new_line_content": "        fprintf(stderr,\"debug=%d\\n\", debug);",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"key    function\\n\"\n                        \"?      show this help\\n\"\n                        \"+      increase verbosity\\n\"\n                        \"-      decrease verbosity\\n\"\n                        \"c      Send command to first matching filter supporting it\\n\"\n                        \"C      Send/Queue command to all matching filters\\n\"\n                        \"D      cycle through available debug modes\\n\"\n                        \"h      dump packets/hex press to cycle through the 3 states\\n\"\n                        \"q      quit\\n\"\n                        \"s      Show QP histogram\\n\"\n        )",
          "old_line_content": "                        \"h      dump packets/hex press to cycle through the 3 states\\n\"",
          "new_line_content": "        fprintf(stderr, \"key    function\\n\"",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "av_frame_unref",
          "old_text": null,
          "new_text": "av_frame_unref(filtered_frame)",
          "old_line_content": "                                                    AV_TIME_BASE_Q);",
          "new_line_content": "                av_frame_unref(filtered_frame);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"filter_raw -> pts:%s pts_time:%s time_base:%d/%d\\n\",\n                           av_ts2str(filtered_frame->pts),\n                           av_ts2timestr(filtered_frame->pts, &tb),\n                           tb.num, tb.den)",
          "old_line_content": "            case AVMEDIA_TYPE_VIDEO:",
          "new_line_content": "                    av_log(NULL, AV_LOG_INFO, \"filter_raw -> pts:%s pts_time:%s time_base:%d/%d\\n\",",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "av_ts2str",
          "old_text": null,
          "new_text": "av_ts2str(filtered_frame->pts)",
          "old_line_content": "                if (!ost->frame_aspect_ratio.num)",
          "new_line_content": "                           av_ts2str(filtered_frame->pts),",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "av_ts2timestr",
          "old_text": null,
          "new_text": "av_ts2timestr(filtered_frame->pts, &tb)",
          "old_line_content": "                    enc->sample_aspect_ratio = filtered_frame->sample_aspect_ratio;",
          "new_line_content": "                           av_ts2timestr(filtered_frame->pts, &tb),",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "{",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost))",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "av_buffersink_get_type",
          "old_text": null,
          "new_text": "av_buffersink_get_type(filter)",
          "old_line_content": "            case AVMEDIA_TYPE_AUDIO:",
          "new_line_content": "            switch (av_buffersink_get_type(filter)) {",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "do_video_out",
          "old_text": null,
          "new_text": "do_video_out(of, ost, filtered_frame)",
          "old_line_content": "                    break;",
          "new_line_content": "                do_video_out(of, ost, filtered_frame);",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        InputStream *ist = ifile->streams[i];",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost))",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR,\n                           \"Audio filter graph output is not normalized and encoder does not support parameter changes\\n\")",
          "old_line_content": "                // TODO support subtitle filters",
          "new_line_content": "                    av_log(NULL, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "    return 0;",
          "new_line_content": "                av_assert0(0);",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": null,
          "new_api": "process_input_packet",
          "old_text": null,
          "new_text": "process_input_packet(ist, NULL, 1)",
          "old_line_content": "",
          "new_line_content": "            ret = process_input_packet(ist, NULL, 1);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "av_frame_unref",
          "old_text": null,
          "new_text": "av_frame_unref(filtered_frame)",
          "old_line_content": "static void print_final_stats(int64_t total_size)",
          "new_line_content": "            av_frame_unref(filtered_frame);",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": null,
          "new_api": "av_thread_message_queue_send",
          "old_text": null,
          "new_text": "av_thread_message_queue_send(ifile->audio_duration_queue, &dur, 0)",
          "old_line_content": "",
          "new_line_content": "                av_thread_message_queue_send(ifile->audio_duration_queue, &dur, 0);",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": null,
          "new_api": "avcodec_flush_buffers",
          "old_text": null,
          "new_text": "avcodec_flush_buffers(ist->dec_ctx)",
          "old_line_content": "{",
          "new_line_content": "            avcodec_flush_buffers(ist->dec_ctx);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "            case AVMEDIA_TYPE_SUBTITLE: subtitle_size += s; break;",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": null,
          "new_api": "av_rescale_q_rnd",
          "old_text": null,
          "new_text": "av_rescale_q_rnd(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q,\n                                       AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX)",
          "old_line_content": "                                            AV_ROUND_NEAR_INF|AV_ROUND_PASS_MINMAX);",
          "new_line_content": "    int64_t pkt_dts = av_rescale_q_rnd(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q,",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": null,
          "new_api": "av_rescale_q_rnd",
          "old_text": null,
          "new_text": "av_rescale_q_rnd(pkt->dts + (1LL<<ist->st->pts_wrap_bits),\n                                            ist->st->time_base, AV_TIME_BASE_Q,\n                                            AV_ROUND_NEAR_INF|AV_ROUND_PASS_MINMAX)",
          "old_line_content": "    if (ist->next_dts != AV_NOPTS_VALUE && !disable_discontinuity_correction) {",
          "new_line_content": "        int64_t wrap_dts = av_rescale_q_rnd(pkt->dts + (1LL<<ist->st->pts_wrap_bits),",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(ist->pts, ist->dts)",
          "old_line_content": "                       delta, ifile->ts_offset_discont);",
          "new_line_content": "                pkt_dts + AV_TIME_BASE/10 < FFMAX(ist->pts, ist->dts)) {",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG,\n                       \"timestamp discontinuity for stream #%d:%d \"\n                       \"(id=%d, type=%s): %\"PRId64\", new offset= %\"PRId64\"\\n\",\n                       ist->file_index, ist->st->index, ist->st->id,\n                       av_get_media_type_string(ist->par->codec_type),\n                       delta, ifile->ts_offset_discont)",
          "old_line_content": "                if (pkt->pts != AV_NOPTS_VALUE)",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"%f%%\", percent)",
          "old_line_content": "        InputFile *f = input_files[i];",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"%f%%\", percent);",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"unknown\")",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"unknown\");",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "                pkt->dts = AV_NOPTS_VALUE;",
          "new_line_content": "                pkt->dts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "            if (pkt->pts != AV_NOPTS_VALUE){",
          "new_line_content": "                    pkt->pts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"Input file #%d (%s):\\n\",\n               i, f->ctx->url)",
          "old_line_content": "            total_size    += ist->data_size;",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"Input file #%d (%s):\\n\",",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        }",
          "new_line_content": "                int64_t pkt_pts = av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(delta)",
          "old_line_content": "               fmt_is_discont && ifile->last_ts != AV_NOPTS_VALUE) {",
          "new_line_content": "                if (FFABS(delta) > 1LL * dts_error_threshold * AV_TIME_BASE) {",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"PTS %\"PRId64\", next:%\"PRId64\" invalid dropping st:%d\\n\", pkt->pts, ist->next_dts, pkt->stream_index)",
          "old_line_content": "        int64_t delta = pkt_dts - ifile->last_ts;",
          "new_line_content": "                    av_log(NULL, AV_LOG_WARNING, \"PTS %\"PRId64\", next:%\"PRId64\" invalid dropping st:%d\\n\", pkt->pts, ist->next_dts, pkt->stream_index);",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Input stream #%d:%d (%s): \",\n                   i, j, av_get_media_type_string(type))",
          "old_line_content": "                       ist->frames_decoded);",
          "new_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"  Input stream #%d:%d (%s): \",",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "av_get_media_type_string",
          "old_text": null,
          "new_text": "av_get_media_type_string(type)",
          "old_line_content": "                if (type == AVMEDIA_TYPE_AUDIO)",
          "new_line_content": "                   i, j, av_get_media_type_string(type));",
          "content_same": false
        },
        {
          "line": 3453,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG,\n                   \"Inter stream timestamp discontinuity %\"PRId64\", new offset= %\"PRId64\"\\n\",\n                   delta, ifile->ts_offset_discont)",
          "old_line_content": "    }",
          "new_line_content": "            av_log(NULL, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"; \")",
          "old_line_content": "               total_packets, total_size);",
          "new_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"; \");",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "}",
          "new_line_content": "            pkt->dts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"\\n\")",
          "old_line_content": "    for (i = 0; i < nb_output_files; i++) {",
          "new_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"\\n\");",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "static void ts_discontinuity_process(InputFile *ifile, InputStream *ist,",
          "new_line_content": "                pkt->pts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) demuxed\\n\",\n               total_packets, total_size)",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) demuxed\\n\",",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "                                  ist->st->time_base);",
          "new_line_content": "    ifile->last_ts = av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(ifile->ts_offset_discont, AV_TIME_BASE_Q,\n                                  ist->st->time_base)",
          "old_line_content": "    if (pkt->pts != AV_NOPTS_VALUE)",
          "new_line_content": "    int64_t offset = av_rescale_q(ifile->ts_offset_discont, AV_TIME_BASE_Q,",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"Output file #%d (%s):\\n\",\n               i, of->url)",
          "old_line_content": "            total_size    += ost->data_size_mux;",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"Output file #%d (%s):\\n\",",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "atomic_load",
          "old_text": null,
          "new_text": "atomic_load(&ost->packets_written)",
          "old_line_content": "                if (type == AVMEDIA_TYPE_AUDIO)",
          "new_line_content": "            total_packets += atomic_load(&ost->packets_written);",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": null,
          "new_api": "av_get_media_type_string",
          "old_text": null,
          "new_text": "av_get_media_type_string(type)",
          "old_line_content": "            }",
          "new_line_content": "                   i, j, av_get_media_type_string(type));",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "ts_discontinuity_detect",
          "old_text": null,
          "new_text": "ts_discontinuity_detect(ifile, ist, pkt)",
          "old_line_content": " *   this function should be called again",
          "new_line_content": "        ts_discontinuity_detect(ifile, ist, pkt);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"; \")",
          "old_line_content": "        }",
          "new_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"; \");",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" packets muxed (%\"PRIu64\" bytes); \",\n                   atomic_load(&ost->packets_written), ost->data_size_mux)",
          "old_line_content": "               total_packets, total_size);",
          "new_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" packets muxed (%\"PRIu64\" bytes); \",",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "atomic_load",
          "old_text": null,
          "new_text": "atomic_load(&ost->packets_written)",
          "old_line_content": "    }",
          "new_line_content": "                   atomic_load(&ost->packets_written), ost->data_size_mux);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) muxed\\n\",\n               total_packets, total_size)",
          "old_line_content": "        } else {",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) muxed\\n\",",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Output file is empty, nothing was encoded \")",
          "old_line_content": "}",
          "new_line_content": "        av_log(NULL, AV_LOG_WARNING, \"Output file is empty, nothing was encoded \");",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"\\n\")",
          "old_line_content": "static void print_report(int is_last_report, int64_t timer_start, int64_t cur_time)",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"\\n\");",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": null,
          "new_api": "ifile_get_packet",
          "old_text": null,
          "new_text": "ifile_get_packet(ifile, &pkt)",
          "old_line_content": "        /* the input file is looped: flush the decoders */",
          "new_line_content": "    ret = ifile_get_packet(ifile, &pkt);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"(check -ss / -t / -frames parameters if used)\\n\")",
          "old_line_content": "    AVBPrint buf, buf_script;",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"(check -ss / -t / -frames parameters if used)\\n\");",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "        }",
          "new_line_content": "        return AVERROR(EAGAIN);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "of_filesize",
          "old_text": null,
          "new_text": "of_filesize(output_files[0])",
          "old_line_content": "    static int qp_histogram[52];",
          "new_line_content": "    int64_t total_size = of_filesize(output_files[0]);",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "print_error",
          "old_text": null,
          "new_text": "print_error(is->url, ret)",
          "old_line_content": "            if (ist->processing_needed) {",
          "new_line_content": "            print_error(is->url, ret);",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "                if (ret>0)",
          "new_line_content": "                exit_program(1);",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": null,
          "new_api": "process_input_packet",
          "old_text": null,
          "new_text": "process_input_packet(ist, NULL, 0)",
          "old_line_content": "                if (ost->ist == ist &&",
          "new_line_content": "                ret = process_input_packet(ist, NULL, 0);",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        }",
          "new_line_content": "            for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": null,
          "new_api": "of_output_packet",
          "old_text": null,
          "new_text": "of_output_packet(of, ost->pkt, ost, 1)",
          "old_line_content": "    }",
          "new_line_content": "                    of_output_packet(of, ost->pkt, ost, 1);",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "    ist->data_size += pkt->size;",
          "new_line_content": "        return AVERROR(EAGAIN);",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": null,
          "new_api": "reset_eagain",
          "old_text": null,
          "new_text": "reset_eagain()",
          "old_line_content": "    if (ist->discard)",
          "new_line_content": "    reset_eagain();",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "                       ost->file_index, ost->index, q);",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"q=%2.1f \", q)",
          "old_line_content": "",
          "new_line_content": "            av_bprintf(&buf, \"q=%2.1f \", q);",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",\n                       ost->file_index, ost->index, q)",
          "old_line_content": "            fps = t > 1 ? frame_number / t : 0;",
          "new_line_content": "            av_bprintf(&buf_script, \"stream_%d_%d_q=%.1f\\n\",",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"frame=%\"PRId64\"\\n\", frame_number)",
          "old_line_content": "                int j;",
          "new_line_content": "            av_bprintf(&buf_script, \"frame=%\"PRId64\"\\n\", frame_number);",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": null,
          "new_api": "av_packet_new_side_data",
          "old_text": null,
          "new_text": "av_packet_new_side_data(pkt, src_sd->type, src_sd->size)",
          "old_line_content": "",
          "new_line_content": "            dst_data = av_packet_new_side_data(pkt, src_sd->type, src_sd->size);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(q)",
          "old_line_content": "            if (enc && (enc->flags & AV_CODEC_FLAG_PSNR) &&",
          "new_line_content": "                int qp = lrintf(q);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "FF_ARRAY_ELEMS",
          "old_text": null,
          "new_text": "FF_ARRAY_ELEMS(qp_histogram)",
          "old_line_content": "                (ost->pict_type != AV_PICTURE_TYPE_NONE || is_last_report)) {",
          "new_line_content": "                if (qp >= 0 && qp < FF_ARRAY_ELEMS(qp_histogram))",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst_data, src_sd->data, src_sd->size)",
          "old_line_content": "    if (debug_ts) {",
          "new_line_content": "            memcpy(dst_data, src_sd->data, src_sd->size);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(qp_histogram[j] + 1)",
          "old_line_content": "                double scale, scale_sum = 0;",
          "new_line_content": "                    av_bprintf(&buf, \"%X\", av_log2(qp_histogram[j] + 1));",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": null,
          "new_api": "av_get_media_type_string",
          "old_text": null,
          "new_text": "av_get_media_type_string(ist->par->codec_type)",
          "old_line_content": "",
          "new_line_content": "               av_get_media_type_string(ist->par->codec_type),",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "av_ts2timestr",
          "old_text": null,
          "new_text": "av_ts2timestr(pkt->dts, &ist->st->time_base)",
          "old_line_content": "",
          "new_line_content": "               av_ts2str(pkt->dts), av_ts2timestr(pkt->dts, &ist->st->time_base),",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"PSNR=\")",
          "old_line_content": "                        scale = enc->width * enc->height * 255.0 * 255.0;",
          "new_line_content": "                av_bprintf(&buf, \"PSNR=\");",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": null,
          "new_api": "av_ts2str",
          "old_text": null,
          "new_text": "av_ts2str(input_files[ist->file_index]->ts_offset)",
          "old_line_content": "",
          "new_line_content": "               av_ts2str(input_files[ist->file_index]->ts_offset),",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "av_ts2timestr",
          "old_text": null,
          "new_text": "av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q)",
          "old_line_content": "discard_packet:",
          "new_line_content": "               av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q));",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": null,
          "new_api": "sub2video_heartbeat",
          "old_text": null,
          "new_text": "sub2video_heartbeat(ist, pkt->pts)",
          "old_line_content": "    return 0;",
          "new_line_content": "    sub2video_heartbeat(ist, pkt->pts);",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": null,
          "new_api": "process_input_packet",
          "old_text": null,
          "new_text": "process_input_packet(ist, pkt, 0)",
          "old_line_content": "",
          "new_line_content": "    process_input_packet(ist, pkt, 0);",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": null,
          "new_api": "av_packet_free",
          "old_text": null,
          "new_text": "av_packet_free(&pkt)",
          "old_line_content": " *",
          "new_line_content": "    av_packet_free(&pkt);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"%c:%2.2f \", type[j], p)",
          "old_line_content": "                           ost->file_index, ost->index, p);",
          "new_line_content": "                    av_bprintf(&buf, \"%c:%2.2f \", type[j], p);",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"stream_%d_%d_psnr_%c=%2.2f\\n\",\n                               ost->file_index, ost->index, type[j] | 32, p)",
          "old_line_content": "            }",
          "new_line_content": "                    av_bprintf(&buf_script, \"stream_%d_%d_psnr_%c=%2.2f\\n\",",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "psnr",
          "old_text": null,
          "new_text": "psnr(error_sum / scale_sum)",
          "old_line_content": "        /* compute min output value */",
          "new_line_content": "                p = psnr(error_sum / scale_sum);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "psnr",
          "old_text": null,
          "new_text": "psnr(error_sum / scale_sum)",
          "old_line_content": "        if (ost->last_mux_dts != AV_NOPTS_VALUE) {",
          "new_line_content": "                av_bprintf(&buf, \"*:%2.2f \", psnr(error_sum / scale_sum));",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(pts, ost->last_mux_dts)",
          "old_line_content": "        }",
          "new_line_content": "            pts = FFMAX(pts, ost->last_mux_dts);",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": null,
          "new_api": "reap_filters",
          "old_text": null,
          "new_text": "reap_filters(0)",
          "old_line_content": "    }",
          "new_line_content": "        return reap_filters(0);",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "reap_filters",
          "old_text": null,
          "new_text": "reap_filters(1)",
          "old_line_content": "",
          "new_line_content": "        ret = reap_filters(1);",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": null,
          "new_api": "close_output_stream",
          "old_text": null,
          "new_text": "close_output_stream(graph->outputs[i]->ost)",
          "old_line_content": "        ifilter = graph->inputs[i];",
          "new_line_content": "            close_output_stream(graph->outputs[i]->ost);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(pts)",
          "old_line_content": "",
          "new_line_content": "    secs = FFABS(pts) / AV_TIME_BASE;",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(pts)",
          "old_line_content": "    bitrate = pts && total_size >= 0 ? total_size * 8 / (pts / 1000.0) : -1;",
          "new_line_content": "    us = FFABS(pts) % AV_TIME_BASE;",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "            input_files[ist->file_index]->eof_reached)",
          "new_line_content": "    if (ret != AVERROR(EAGAIN))",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": null,
          "new_api": "av_buffersrc_get_nb_failed_requests",
          "old_text": null,
          "new_text": "av_buffersrc_get_nb_failed_requests(ifilter->filter)",
          "old_line_content": "    if (!*best_ist)",
          "new_line_content": "        nb_requests = av_buffersrc_get_nb_failed_requests(ifilter->filter);",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"size=N/A time=\")",
          "old_line_content": "    }",
          "new_line_content": "    if (total_size < 0) av_bprintf(&buf, \"size=N/A time=\");",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"size=%8.0fkB time=\", total_size / 1024.0)",
          "old_line_content": "",
          "new_line_content": "    else                av_bprintf(&buf, \"size=%8.0fkB time=\", total_size / 1024.0);",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \"%s%02d:%02d:%02d.%02d \",\n                   hours_sign, hours, mins, secs, (100 * us) / AV_TIME_BASE)",
          "old_line_content": "    }else{",
          "new_line_content": "        av_bprintf(&buf, \"%s%02d:%02d:%02d.%02d \",",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"out_time_us=N/A\\n\")",
          "old_line_content": "                   hours_sign, hours, mins, secs, us);",
          "new_line_content": "        av_bprintf(&buf_script, \"out_time_us=N/A\\n\");",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"out_time_ms=N/A\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        av_bprintf(&buf_script, \"out_time_ms=N/A\\n\");",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"out_time=N/A\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_bprintf(&buf_script, \"out_time=N/A\\n\");",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": null,
          "new_api": "got_eagain",
          "old_text": null,
          "new_text": "got_eagain()",
          "old_line_content": "    }",
          "new_line_content": "        if (got_eagain()) {",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": null,
          "new_api": "reset_eagain",
          "old_text": null,
          "new_text": "reset_eagain()",
          "old_line_content": "",
          "new_line_content": "            reset_eagain();",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": null,
          "new_api": "av_usleep",
          "old_text": null,
          "new_text": "av_usleep(10000)",
          "old_line_content": "    if (ost->filter && !ost->filter->graph->graph) {",
          "new_line_content": "            av_usleep(10000);",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"No more inputs to read from, finishing.\\n\")",
          "old_line_content": "            if (ret < 0) {",
          "new_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"No more inputs to read from, finishing.\\n\");",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \" dup=%\"PRId64\" drop=%\"PRId64, nb_frames_dup, nb_frames_drop)",
          "old_line_content": "    } else {",
          "new_line_content": "        av_bprintf(&buf, \" dup=%\"PRId64\" drop=%\"PRId64, nb_frames_dup, nb_frames_drop);",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": null,
          "new_api": "ifilter_has_all_input_formats",
          "old_text": null,
          "new_text": "ifilter_has_all_input_formats(ost->filter->graph)",
          "old_line_content": "    }",
          "new_line_content": "        if (ifilter_has_all_input_formats(ost->filter->graph)) {",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf, \" speed=N/A\")",
          "old_line_content": "    if (print_stats || is_last_report) {",
          "new_line_content": "        av_bprintf(&buf, \" speed=N/A\");",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"speed=N/A\\n\")",
          "old_line_content": "        const char end = is_last_report ? '\\n' : '\\r';",
          "new_line_content": "        av_bprintf(&buf_script, \"speed=N/A\\n\");",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": null,
          "new_api": "configure_filtergraph",
          "old_text": null,
          "new_text": "configure_filtergraph(ost->filter->graph)",
          "old_line_content": "",
          "new_line_content": "            ret = configure_filtergraph(ost->filter->graph);",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\")",
          "old_line_content": "        /*",
          "new_line_content": "                av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\");",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "av_bprintf",
          "old_text": null,
          "new_text": "av_bprintf(&buf_script, \"speed=%4.3gx\\n\", speed)",
          "old_line_content": "        } else",
          "new_line_content": "        av_bprintf(&buf_script, \"speed=%4.3gx\\n\", speed);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"%s    %c\", buf.str, end)",
          "old_line_content": "",
          "new_line_content": "            fprintf(stderr, \"%s    %c\", buf.str, end);",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(buf_script.len, buf_script.size - 1)",
          "old_line_content": "        }",
          "new_line_content": "                   FFMIN(buf_script.len, buf_script.size - 1));",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "avio_flush",
          "old_text": null,
          "new_text": "avio_flush(progress_avio)",
          "old_line_content": "    }",
          "new_line_content": "        avio_flush(progress_avio);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "av_bprint_finalize",
          "old_text": null,
          "new_text": "av_bprint_finalize(&buf_script, NULL)",
          "old_line_content": "",
          "new_line_content": "        av_bprint_finalize(&buf_script, NULL);",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "avio_closep",
          "old_text": null,
          "new_text": "avio_closep(&progress_avio)",
          "old_line_content": "",
          "new_line_content": "            if ((ret = avio_closep(&progress_avio)) < 0)",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR,\n                       \"Error closing progress log, loss of information possible: %s\\n\", av_err2str(ret))",
          "old_line_content": "    if (is_last_report)",
          "new_line_content": "                av_log(NULL, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": null,
          "new_api": "av_buffersink_get_type",
          "old_text": null,
          "new_text": "av_buffersink_get_type(ost->filter->filter)",
          "old_line_content": "    } else if (ost->filter) {",
          "new_line_content": "        if (av_buffersink_get_type(ost->filter->filter) == AVMEDIA_TYPE_AUDIO)",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": null,
          "new_api": "init_output_stream_wrapper",
          "old_text": null,
          "new_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "old_line_content": "        int i;",
          "new_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "transcode_from_filter",
          "old_text": null,
          "new_text": "transcode_from_filter(ost->filter->graph, &ist)",
          "old_line_content": "            InputFilter *ifilter = ost->filter->graph->inputs[i];",
          "new_line_content": "        if ((ret = transcode_from_filter(ost->filter->graph, &ist)) < 0)",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "print_final_stats",
          "old_text": null,
          "new_text": "print_final_stats(total_size)",
          "old_line_content": "    // We never got any input. Set a fake format, which will",
          "new_line_content": "        print_final_stats(total_size);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "av_channel_layout_copy",
          "old_text": null,
          "new_text": "av_channel_layout_copy(&ifilter->ch_layout, &par->ch_layout)",
          "old_line_content": "static void flush_encoders(void)",
          "new_line_content": "    ret = av_channel_layout_copy(&ifilter->ch_layout, &par->ch_layout);",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(ist)",
          "old_line_content": "        return 0;",
          "new_line_content": "        av_assert0(ist);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "process_input",
          "old_text": null,
          "new_text": "process_input(ist->file_index)",
          "old_line_content": "    if (ret < 0)",
          "new_line_content": "    ret = process_input(ist->file_index);",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "        return ret == AVERROR_EOF ? 0 : ret;",
          "new_line_content": "    if (ret == AVERROR(EAGAIN)) {",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        AVCodecContext *enc = ost->enc_ctx;",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "SQFRAME",
          "old_text": null,
          "new_text": "SQFRAME(NULL)",
          "old_line_content": "        if (!enc)",
          "new_line_content": "            sq_send(of->sq_encode, ost->sq_idx_encode, SQFRAME(NULL));",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "reap_filters",
          "old_text": null,
          "new_text": "reap_filters(0)",
          "old_line_content": "{",
          "new_line_content": "    return reap_filters(0);",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        // Try to enable encoding with no input frames.",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING,\n                   \"Finishing stream %d:%d without any data written to it.\\n\",\n                   ost->file_index, ost->st->index)",
          "old_line_content": "                    InputFilter *ifilter = fg->inputs[x];",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "transcode_init",
          "old_text": null,
          "new_text": "transcode_init()",
          "old_line_content": "",
          "new_line_content": "    ret = transcode_init();",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_INFO, \"Press [q] to stop, [?] for help\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_INFO, \"Press [q] to stop, [?] for help\\n\");",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "ifilter_parameters_from_codecpar",
          "old_text": null,
          "new_text": "ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par)",
          "old_line_content": "                    continue;",
          "new_line_content": "                        ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par) < 0) {",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Error copying paramerets from input stream\\n\")",
          "old_line_content": "",
          "new_line_content": "                        av_log(NULL, AV_LOG_ERROR, \"Error copying paramerets from input stream\\n\");",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "av_gettime_relative",
          "old_text": null,
          "new_text": "av_gettime_relative()",
          "old_line_content": "        /* check if there's any stream where output is still needed */",
          "new_line_content": "        int64_t cur_time= av_gettime_relative();",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "ifilter_has_all_input_formats",
          "old_text": null,
          "new_text": "ifilter_has_all_input_formats(fg)",
          "old_line_content": "                }",
          "new_line_content": "                if (!ifilter_has_all_input_formats(fg))",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": null,
          "new_api": "check_keyboard_interaction",
          "old_text": null,
          "new_text": "check_keyboard_interaction(cur_time)",
          "old_line_content": "        }",
          "new_line_content": "            if (check_keyboard_interaction(cur_time) < 0)",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "configure_filtergraph",
          "old_text": null,
          "new_text": "configure_filtergraph(fg)",
          "old_line_content": "            }",
          "new_line_content": "                ret = configure_filtergraph(fg);",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_VERBOSE, \"No more output streams to write to, finishing.\\n\")",
          "old_line_content": "            break;",
          "new_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"No more output streams to write to, finishing.\\n\");",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "        }",
          "new_line_content": "                    exit_program(1);",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": null,
          "new_api": "of_output_packet",
          "old_text": null,
          "new_text": "of_output_packet(of, ost->pkt, ost, 1)",
          "old_line_content": "            continue;",
          "new_line_content": "                of_output_packet(of, ost->pkt, ost, 1);",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "init_output_stream_wrapper",
          "old_text": null,
          "new_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "old_line_content": "        if (ret != AVERROR_EOF)",
          "new_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": null,
          "new_api": "print_report",
          "old_text": null,
          "new_text": "print_report(0, timer_start, cur_time)",
          "old_line_content": "        }",
          "new_line_content": "        print_report(0, timer_start, cur_time);",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "submit_encode_frame",
          "old_text": null,
          "new_text": "submit_encode_frame(of, ost, NULL)",
          "old_line_content": " * Check whether a packet from ist should be written into ost at this time",
          "new_line_content": "        ret = submit_encode_frame(of, ost, NULL);",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "static int check_output_constraints(InputStream *ist, OutputStream *ost)",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": null,
          "new_api": "process_input_packet",
          "old_text": null,
          "new_text": "process_input_packet(ist, NULL, 0)",
          "old_line_content": "    /* write the trailer if needed */",
          "new_line_content": "            process_input_packet(ist, NULL, 0);",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": null,
          "new_api": "flush_encoders",
          "old_text": null,
          "new_text": "flush_encoders()",
          "old_line_content": "        if (ret < 0 && exit_on_error)",
          "new_line_content": "    flush_encoders();",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": null,
          "new_api": "term_exit",
          "old_text": null,
          "new_text": "term_exit()",
          "old_line_content": "    }",
          "new_line_content": "    term_exit();",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "of_write_trailer",
          "old_text": null,
          "new_text": "of_write_trailer(output_files[i])",
          "old_line_content": "",
          "new_line_content": "        ret = of_write_trailer(output_files[i]);",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": null,
          "new_api": "av_gettime_relative",
          "old_text": null,
          "new_text": "av_gettime_relative()",
          "old_line_content": "        if (!packets_written && (abort_on_flags & ABORT_ON_FLAG_EMPTY_OUTPUT_STREAM)) {",
          "new_line_content": "    print_report(1, timer_start, av_gettime_relative());",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "ost_iter",
          "old_text": null,
          "new_text": "ost_iter(ost)",
          "old_line_content": "        }",
          "new_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": null,
          "new_api": "atomic_load",
          "old_text": null,
          "new_text": "atomic_load(&ost->packets_written)",
          "old_line_content": "",
          "new_line_content": "        packets_written = atomic_load(&ost->packets_written);",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit_program(1);",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(start_time, AV_TIME_BASE_Q, ost->mux_timebase)",
          "old_line_content": "        return;",
          "new_line_content": "    int64_t ost_tb_start_time = av_rescale_q(start_time, AV_TIME_BASE_Q, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "av_packet_unref",
          "old_text": null,
          "new_text": "av_packet_unref(opkt)",
          "old_line_content": "    if (!ost->streamcopy_started && !(pkt->flags & AV_PKT_FLAG_KEY) &&",
          "new_line_content": "    av_packet_unref(opkt);",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"Empty output\\n\")",
          "old_line_content": "    ret = 0;",
          "new_line_content": "        av_log(NULL, AV_LOG_FATAL, \"Empty output\\n\");",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": null,
          "new_api": "of_output_packet",
          "old_text": null,
          "new_text": "of_output_packet(of, opkt, ost, 1)",
          "old_line_content": "",
          "new_line_content": "        of_output_packet(of, opkt, ost, 1);",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "hw_device_free_all",
          "old_text": null,
          "new_text": "hw_device_free_all()",
          "old_line_content": "}",
          "new_line_content": "    hw_device_free_all();",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(ost->ts_copy_start, AV_TIME_BASE_Q, ist->st->time_base)",
          "old_line_content": "        return;",
          "new_line_content": "            pkt->pts < av_rescale_q(ost->ts_copy_start, AV_TIME_BASE_Q, ist->st->time_base))",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "av_gettime_relative",
          "old_text": null,
          "new_text": "av_gettime_relative()",
          "old_line_content": "    time_stamps.sys_usec =",
          "new_line_content": "    BenchmarkTimeStamps time_stamps = { av_gettime_relative() };",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_SELF, &rusage)",
          "old_line_content": "    FILETIME c, e, k, u;",
          "new_line_content": "    getrusage(RUSAGE_SELF, &rusage);",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "close_output_stream",
          "old_text": null,
          "new_text": "close_output_stream(ost)",
          "old_line_content": "            start_time += f->start_time != AV_NOPTS_VALUE ? f->start_time : 0;",
          "new_line_content": "        close_output_stream(ost);",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": null,
          "new_api": "GetCurrentProcess",
          "old_text": null,
          "new_text": "GetCurrentProcess()",
          "old_line_content": "    time_stamps.user_usec = time_stamps.sys_usec = 0;",
          "new_line_content": "    proc = GetCurrentProcess();",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "GetProcessTimes",
          "old_text": null,
          "new_text": "GetProcessTimes(proc, &c, &e, &k, &u)",
          "old_line_content": "#endif",
          "new_line_content": "    GetProcessTimes(proc, &c, &e, &k, &u);",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "close_output_stream",
          "old_text": null,
          "new_text": "close_output_stream(ost)",
          "old_line_content": "",
          "new_line_content": "            close_output_stream(ost);",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    } else if (ost->st->codecpar->codec_type == AVMEDIA_TYPE_AUDIO) {",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->pts, ist->st->time_base, ost->mux_timebase)",
          "old_line_content": "            duration = ist->par->frame_size;",
          "new_line_content": "        opkt->pts = av_rescale_q(pkt->pts, ist->st->time_base, ost->mux_timebase) - ost_tb_start_time;",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(ist->dts, AV_TIME_BASE_Q, ost->mux_timebase)",
          "old_line_content": "                                    &ist->filter_in_rescale_delta_last, ost->mux_timebase);",
          "new_line_content": "        opkt->dts = av_rescale_q(ist->dts, AV_TIME_BASE_Q, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "av_get_audio_frame_duration2",
          "old_text": null,
          "new_text": "av_get_audio_frame_duration2(ist->par, pkt->size)",
          "old_line_content": "        opkt->pts = opkt->dts - ost_tb_start_time;",
          "new_line_content": "        int duration = av_get_audio_frame_duration2(ist->par, pkt->size);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "av_rescale_delta",
          "old_text": null,
          "new_text": "av_rescale_delta(ist->st->time_base, pkt->dts,\n                                    (AVRational){1, ist->par->sample_rate}, duration,\n                                    &ist->filter_in_rescale_delta_last, ost->mux_timebase)",
          "old_line_content": "    opkt->dts -= ost_tb_start_time;",
          "new_line_content": "        opkt->dts = av_rescale_delta(ist->st->time_base, pkt->dts,",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "GetCurrentProcess",
          "old_text": null,
          "new_text": "GetCurrentProcess()",
          "old_line_content": "}",
          "new_line_content": "    proc = GetCurrentProcess();",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "GetProcessMemoryInfo",
          "old_text": null,
          "new_text": "GetProcessMemoryInfo(proc, &memcounters, sizeof(memcounters))",
          "old_line_content": "int main(int argc, char **argv)",
          "new_line_content": "    GetProcessMemoryInfo(proc, &memcounters, sizeof(memcounters));",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->dts, ist->st->time_base, ost->mux_timebase)",
          "old_line_content": "    ost->streamcopy_started = 1;",
          "new_line_content": "        opkt->dts = av_rescale_q(pkt->dts, ist->st->time_base, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->duration, ist->st->time_base, ost->mux_timebase)",
          "old_line_content": "static void check_decode_result(InputStream *ist, int *got_output, int ret)",
          "new_line_content": "    opkt->duration = av_rescale_q(pkt->duration, ist->st->time_base, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "of_output_packet",
          "old_text": null,
          "new_text": "of_output_packet(of, opkt, ost, 0)",
          "old_line_content": "    if (*got_output || ret<0)",
          "new_line_content": "    of_output_packet(of, opkt, ost, 0);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "register_exit",
          "old_text": null,
          "new_text": "register_exit(ffmpeg_cleanup)",
          "old_line_content": "#if CONFIG_AVDEVICE",
          "new_line_content": "    register_exit(ffmpeg_cleanup);",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "setvbuf",
          "old_text": null,
          "new_text": "setvbuf(stderr,NULL,_IONBF,0)",
          "old_line_content": "#endif",
          "new_line_content": "    setvbuf(stderr,NULL,_IONBF,0); /* win32 runtime needs this */",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": null,
          "new_api": "av_log_set_flags",
          "old_text": null,
          "new_text": "av_log_set_flags(AV_LOG_SKIP_REPEATED)",
          "old_line_content": "",
          "new_line_content": "    av_log_set_flags(AV_LOG_SKIP_REPEATED);",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, exit_on_error ? AV_LOG_FATAL : AV_LOG_WARNING,\n                   \"%s: corrupt decoded frame in stream %d\\n\", input_files[ist->file_index]->ctx->url, ist->st->index)",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, exit_on_error ? AV_LOG_FATAL : AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": null,
          "new_api": "show_banner",
          "old_text": null,
          "new_text": "show_banner(argc, argv, options)",
          "old_line_content": "    if (nb_output_files <= 0 && nb_input_files == 0) {",
          "new_line_content": "    show_banner(argc, argv, options);",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "{",
          "new_line_content": "                exit_program(1);",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_FATAL, \"At least one output file must be specified\\n\")",
          "old_line_content": "    if (do_benchmark) {",
          "new_line_content": "        av_log(NULL, AV_LOG_FATAL, \"At least one output file must be specified\\n\");",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(1)",
          "old_line_content": "        int64_t utime, stime, rtime;",
          "new_line_content": "        exit_program(1);",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": null,
          "new_api": "get_benchmark_time_stamps",
          "old_text": null,
          "new_text": "get_benchmark_time_stamps()",
          "old_line_content": "        stime = current_time.sys_usec  - ti.sys_usec;",
          "new_line_content": "    current_time = ti = get_benchmark_time_stamps();",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": null,
          "new_api": "transcode",
          "old_text": null,
          "new_text": "transcode()",
          "old_line_content": "        rtime = current_time.real_usec - ti.real_usec;",
          "new_line_content": "    if (transcode() < 0)",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "get_benchmark_time_stamps",
          "old_text": null,
          "new_text": "get_benchmark_time_stamps()",
          "old_line_content": "    }",
          "new_line_content": "        current_time = get_benchmark_time_stamps();",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%\"PRIu64\" frames successfully decoded, %\"PRIu64\" decoding errors\\n\",\n           decode_error_stat[0], decode_error_stat[1])",
          "old_line_content": "}",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%\"PRIu64\" frames successfully decoded, %\"PRIu64\" decoding errors\\n\",",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "av_channel_layout_compare",
          "old_text": null,
          "new_text": "av_channel_layout_compare(&ifilter->ch_layout, &frame->ch_layout)",
          "old_line_content": "",
          "new_line_content": "                       av_channel_layout_compare(&ifilter->ch_layout, &frame->ch_layout);",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(69)",
          "old_line_content": "",
          "new_line_content": "        exit_program(69);",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "exit_program",
          "old_text": null,
          "new_text": "exit_program(received_nb_signals ? 255 : main_return_code)",
          "old_line_content": "",
          "new_line_content": "    exit_program(received_nb_signals ? 255 : main_return_code);",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(sd->data, ifilter->displaymatrix, sizeof(int32_t) * 9)",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "        if (!ifilter->displaymatrix || memcmp(sd->data, ifilter->displaymatrix, sizeof(int32_t) * 9))",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "av_frame_clone",
          "old_text": null,
          "new_text": "av_frame_clone(frame)",
          "old_line_content": "",
          "new_line_content": "            AVFrame *tmp = av_frame_clone(frame);",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        }",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "reap_filters",
          "old_text": null,
          "new_text": "reap_filters(1)",
          "old_line_content": "        if (ret < 0) {",
          "new_line_content": "        ret = reap_filters(1);",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "            return ret;",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\")",
          "old_line_content": "        if (ret != AVERROR_EOF)",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\");",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": null,
          "new_api": "av_buffersrc_add_frame_flags",
          "old_text": null,
          "new_text": "av_buffersrc_add_frame_flags(ifilter->filter, frame, buffersrc_flags)",
          "old_line_content": "    return 0;",
          "new_line_content": "    ret = av_buffersrc_add_frame_flags(ifilter->filter, frame, buffersrc_flags);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "static int ifilter_send_eof(InputFilter *ifilter, int64_t pts)",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": null,
          "new_api": "av_buffersrc_close",
          "old_text": null,
          "new_text": "av_buffersrc_close(ifilter->filter, pts, AV_BUFFERSRC_FLAG_PUSH)",
          "old_line_content": "            if (ret < 0)",
          "new_line_content": "        ret = av_buffersrc_close(ifilter->filter, pts, AV_BUFFERSRC_FLAG_PUSH);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": null,
          "new_api": "ifilter_parameters_from_codecpar",
          "old_text": null,
          "new_text": "ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par)",
          "old_line_content": "        }",
          "new_line_content": "            ret = ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par);",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR, \"Cannot determine format of input stream %d:%d after EOF\\n\", ifilter->ist->file_index, ifilter->ist->st->index)",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Cannot determine format of input stream %d:%d after EOF\\n\", ifilter->ist->file_index, ifilter->ist->st->index);",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "avcodec_receive_frame",
          "old_text": null,
          "new_text": "avcodec_receive_frame(avctx, frame)",
          "old_line_content": "}",
          "new_line_content": "    ret = avcodec_receive_frame(avctx, frame);",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "",
          "new_line_content": "    if (ret < 0 && ret != AVERROR(EAGAIN))",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": null,
          "new_api": "ifilter_send_frame",
          "old_text": null,
          "new_text": "ifilter_send_frame(ist->filters[i], decoded_frame, i < ist->nb_filters - 1)",
          "old_line_content": "        }",
          "new_line_content": "        ret = ifilter_send_frame(ist->filters[i], decoded_frame, i < ist->nb_filters - 1);",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_ERROR,\n                   \"Failed to inject frame into filter network: %s\\n\", av_err2str(ret))",
          "old_line_content": "",
          "new_line_content": "            av_log(NULL, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "av_err2str",
          "old_text": null,
          "new_text": "av_err2str(ret)",
          "old_line_content": "static int decode_audio(InputStream *ist, AVPacket *pkt, int *got_output,",
          "new_line_content": "                   \"Failed to inject frame into filter network: %s\\n\", av_err2str(ret));",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "decode",
          "old_text": null,
          "new_text": "decode(avctx, decoded_frame, got_output, pkt)",
          "old_line_content": "        ret = AVERROR_INVALIDDATA;",
          "new_line_content": "    ret = decode(avctx, decoded_frame, got_output, pkt);",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "update_benchmark",
          "old_text": null,
          "new_text": "update_benchmark(\"decode_audio %d.%d\", ist->file_index, ist->st->index)",
          "old_line_content": "    }",
          "new_line_content": "    update_benchmark(\"decode_audio %d.%d\", ist->file_index, ist->st->index);",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Sample rate %d invalid\\n\", avctx->sample_rate)",
          "old_line_content": "    if (!*got_output || ret < 0)",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Sample rate %d invalid\\n\", avctx->sample_rate);",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": null,
          "new_api": "check_decode_result",
          "old_text": null,
          "new_text": "check_decode_result(ist, got_output, ret)",
          "old_line_content": "",
          "new_line_content": "        check_decode_result(ist, got_output, ret);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2051,
          "old_api": "av_rescale_delta",
          "new_api": null,
          "old_text": "av_rescale_delta(decoded_frame_tb, decoded_frame->pts,\n                                              (AVRational){1, avctx->sample_rate}, decoded_frame->nb_samples, &ist->filter_in_rescale_delta_last,\n                                              (AVRational){1, avctx->sample_rate})",
          "new_text": null,
          "old_line_content": "        decoded_frame->pts = av_rescale_delta(decoded_frame_tb, decoded_frame->pts,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "send_frame_to_filters",
          "new_api": null,
          "old_text": "send_frame_to_filters(ist, decoded_frame)",
          "new_text": null,
          "old_line_content": "    err = send_frame_to_filters(ist, decoded_frame);",
          "new_line_content": "    if (pkt)",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "av_frame_unref",
          "new_api": null,
          "old_text": "av_frame_unref(decoded_frame)",
          "new_text": null,
          "old_line_content": "    av_frame_unref(decoded_frame);",
          "new_line_content": "    if (decoded_frame->pts != AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 2076,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(ist->dts, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": null,
          "old_line_content": "        dts = av_rescale_q(ist->dts, AV_TIME_BASE_Q, ist->st->time_base);",
          "new_line_content": "    // With fate-indeo3-2, we're getting 0-sized packets before EOF for some",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "av_realloc_array",
          "new_api": null,
          "old_text": "av_realloc_array(ist->dts_buffer, ist->nb_dts_buffer + 1, sizeof(ist->dts_buffer[0]))",
          "new_text": null,
          "old_line_content": "        void *new = av_realloc_array(ist->dts_buffer, ist->nb_dts_buffer + 1, sizeof(ist->dts_buffer[0]));",
          "new_line_content": "    if (pkt) {",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "decode",
          "new_api": null,
          "old_text": "decode(ist->dec_ctx, decoded_frame, got_output, pkt)",
          "new_text": null,
          "old_line_content": "    ret = decode(ist->dec_ctx, decoded_frame, got_output, pkt);",
          "new_line_content": "        if (!new)",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ist->dec_ctx, AV_LOG_WARNING,\n                   \"video_delay is larger in decoder than demuxer %d > %d.\\n\"\n                   \"If you want to help, upload a sample \"\n                   \"of this file to https://streams.videolan.org/upload/ \"\n                   \"and contact the ffmpeg-devel mailing list. (ffmpeg-devel@ffmpeg.org)\\n\",\n                   ist->dec_ctx->has_b_frames,\n                   ist->par->video_delay)",
          "new_text": null,
          "old_line_content": "            av_log(ist->dec_ctx, AV_LOG_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "check_decode_result",
          "new_api": null,
          "old_text": "check_decode_result(ist, got_output, ret)",
          "new_text": null,
          "old_line_content": "        check_decode_result(ist, got_output, ret);",
          "new_line_content": "                   \"of this file to https://streams.videolan.org/upload/ \"",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"Frame parameters mismatch context %d,%d,%d != %d,%d,%d\\n\",\n                decoded_frame->width,\n                decoded_frame->height,\n                decoded_frame->format,\n                ist->dec_ctx->width,\n                ist->dec_ctx->height,\n                ist->dec_ctx->pix_fmt)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_DEBUG, \"Frame parameters mismatch context %d,%d,%d != %d,%d,%d\\n\",",
          "new_line_content": "    if (ret != AVERROR_EOF)",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "hwaccel_retrieve_data",
          "new_api": null,
          "old_text": "ist->hwaccel_retrieve_data(ist->dec_ctx, decoded_frame)",
          "new_text": null,
          "old_line_content": "        err = ist->hwaccel_retrieve_data(ist->dec_ctx, decoded_frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(decoded_frame->pts = best_effort_timestamp, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        int64_t ts = av_rescale_q(decoded_frame->pts = best_effort_timestamp, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "av_ts2str",
          "new_api": null,
          "old_text": "av_ts2str(decoded_frame->pts)",
          "new_text": null,
          "old_line_content": "               ist->st->index, av_ts2str(decoded_frame->pts),",
          "new_line_content": "        if (ts != AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": "av_ts2timestr",
          "new_api": null,
          "old_text": "av_ts2timestr(decoded_frame->pts, &ist->st->time_base)",
          "new_text": null,
          "old_line_content": "               av_ts2timestr(decoded_frame->pts, &ist->st->time_base),",
          "new_line_content": "            ist->next_pts = ist->pts = ts;",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": "av_ts2timestr",
          "new_api": null,
          "old_text": "av_ts2timestr(best_effort_timestamp, &ist->st->time_base)",
          "new_text": null,
          "old_line_content": "               av_ts2timestr(best_effort_timestamp, &ist->st->time_base),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": "send_frame_to_filters",
          "new_api": null,
          "old_text": "send_frame_to_filters(ist, decoded_frame)",
          "new_text": null,
          "old_line_content": "    err = send_frame_to_filters(ist, decoded_frame);",
          "new_line_content": "               decoded_frame->key_frame, decoded_frame->pict_type,",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "av_frame_unref",
          "new_api": null,
          "old_text": "av_frame_unref(decoded_frame)",
          "new_text": null,
          "old_line_content": "    av_frame_unref(decoded_frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "avcodec_decode_subtitle2",
          "new_api": null,
          "old_text": "avcodec_decode_subtitle2(ist->dec_ctx,\n                                       &subtitle, got_output, pkt)",
          "new_text": null,
          "old_line_content": "    int ret = avcodec_decode_subtitle2(ist->dec_ctx,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": "check_decode_result",
          "new_api": null,
          "old_text": "check_decode_result(NULL, got_output, ret)",
          "new_text": null,
          "old_line_content": "    check_decode_result(NULL, got_output, ret);",
          "new_line_content": "                               int *decode_failed)",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": "sub2video_flush",
          "new_api": null,
          "old_text": "sub2video_flush(ist)",
          "new_text": null,
          "old_line_content": "            sub2video_flush(ist);",
          "new_line_content": "                                       &subtitle, got_output, pkt);",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG,\n                       \"Subtitle duration reduced from %\"PRId32\" to %d%s\\n\",\n                       ist->prev_sub.subtitle.end_display_time, end,\n                       end <= 0 ? \", dropping it\" : \"\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(AVSubtitle, subtitle,    ist->prev_sub.subtitle)",
          "new_text": null,
          "old_line_content": "        FFSWAP(AVSubtitle, subtitle,    ist->prev_sub.subtitle);",
          "new_line_content": "                       ist->prev_sub.subtitle.end_display_time, end,",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": "sub2video_update",
          "new_api": null,
          "old_text": "sub2video_update(ist, INT64_MIN, &subtitle)",
          "new_text": null,
          "old_line_content": "        sub2video_update(ist, INT64_MIN, &subtitle);",
          "new_line_content": "            goto out;",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": "av_fifo_alloc2",
          "new_api": null,
          "old_text": "av_fifo_alloc2(8, sizeof(AVSubtitle), AV_FIFO_FLAG_AUTO_GROW)",
          "new_text": null,
          "old_line_content": "            ist->sub2video.sub_queue = av_fifo_alloc2(8, sizeof(AVSubtitle), AV_FIFO_FLAG_AUTO_GROW);",
          "new_line_content": "    if (!*got_output)",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            report_and_exit(AVERROR(ENOMEM));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "        if (!ist->sub2video.sub_queue)",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": "check_output_constraints",
          "new_api": null,
          "old_text": "check_output_constraints(ist, ost)",
          "new_text": null,
          "old_line_content": "        if (!check_output_constraints(ist, ost) || !ost->enc_ctx",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": "do_subtitle_out",
          "new_api": null,
          "old_text": "do_subtitle_out(output_files[ost->file_index], ost, &subtitle)",
          "new_text": null,
          "old_line_content": "        do_subtitle_out(output_files[ost->file_index], ost, &subtitle);",
          "new_line_content": "    ist->frames_decoded++;",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": "avsubtitle_free",
          "new_api": null,
          "old_text": "avsubtitle_free(&subtitle)",
          "new_text": null,
          "old_line_content": "        avsubtitle_free(&subtitle);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "av_rescale_q_rnd",
          "new_api": null,
          "old_text": "av_rescale_q_rnd(ist->pts, AV_TIME_BASE_Q, ist->st->time_base,\n                                   AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX)",
          "new_text": null,
          "old_line_content": "    int64_t pts = av_rescale_q_rnd(ist->pts, AV_TIME_BASE_Q, ist->st->time_base,",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "ifilter_send_eof",
          "new_api": null,
          "old_text": "ifilter_send_eof(ist->filters[i], pts)",
          "new_text": null,
          "old_line_content": "        ret = ifilter_send_eof(ist->filters[i], pts);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(ist->st->avg_frame_rate)",
          "new_text": null,
          "old_line_content": "        ist->dts = ist->st->avg_frame_rate.num ? - ist->dec_ctx->has_b_frames * AV_TIME_BASE / av_q2d(ist->st->avg_frame_rate) : 0;",
          "new_line_content": "    int repeating = 0;",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "            ist->dts += av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref(avpkt)",
          "new_text": null,
          "old_line_content": "        av_packet_unref(avpkt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "av_packet_ref",
          "new_api": null,
          "old_text": "av_packet_ref(avpkt, pkt)",
          "new_text": null,
          "old_line_content": "        ret = av_packet_ref(avpkt, pkt);",
          "new_line_content": "    if (ist->next_dts == AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "decode_audio    (ist, repeating ? NULL : avpkt, &got_output,\n                                   &decode_failed)",
          "new_api": null,
          "old_text": "decode_audio    (ist, repeating ? NULL : avpkt, &got_output,\n                                   &decode_failed)",
          "new_text": null,
          "old_line_content": "            ret = decode_audio    (ist, repeating ? NULL : avpkt, &got_output,",
          "new_line_content": "        int decode_failed = 0;",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref(avpkt)",
          "new_text": null,
          "old_line_content": "            av_packet_unref(avpkt);",
          "new_line_content": "        ist->pts = ist->next_pts;",
          "content_same": false
        },
        {
          "line": 2330,
          "old_api": "decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,\n                                   &decode_failed)",
          "new_api": null,
          "old_text": "decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,\n                                   &decode_failed)",
          "new_text": null,
          "old_line_content": "            ret = decode_video    (ist, repeating ? NULL : avpkt, &got_output, &duration_pts, !pkt,",
          "new_line_content": "        switch (par->codec_type) {",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(duration_pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "                    ist->next_pts += av_rescale_q(duration_pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "                    ist->next_dts += duration_dts;",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref(avpkt)",
          "new_text": null,
          "old_line_content": "            av_packet_unref(avpkt);",
          "new_line_content": "            if (got_output) {",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "transcode_subtitles",
          "new_api": null,
          "old_text": "transcode_subtitles(ist, avpkt, &got_output, &decode_failed)",
          "new_text": null,
          "old_line_content": "            ret = transcode_subtitles(ist, avpkt, &got_output, &decode_failed);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref(avpkt)",
          "new_text": null,
          "old_line_content": "            av_packet_unref(avpkt);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Error while decoding stream #%d:%d: %s\\n\",\n                       ist->file_index, ist->st->index, av_err2str(ret))",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_ERROR, \"Error while decoding stream #%d:%d: %s\\n\",",
          "new_line_content": "        if (ret == AVERROR_EOF) {",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": "av_err2str",
          "new_api": null,
          "old_text": "av_err2str(ret)",
          "new_text": null,
          "old_line_content": "                       ist->file_index, ist->st->index, av_err2str(ret));",
          "new_line_content": "            eof_reached = 1;",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"Error while processing the decoded \"\n                       \"data for stream #%d:%d\\n\", ist->file_index, ist->st->index)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_FATAL, \"Error while processing the decoded \"",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": "send_filter_eof",
          "new_api": null,
          "old_text": "send_filter_eof(ist)",
          "new_text": null,
          "old_line_content": "        int ret = send_filter_eof(ist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"Error marking filters as finished\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Error marking filters as finished\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": "av_assert1",
          "new_api": null,
          "old_text": "av_assert1(pkt->duration >= 0)",
          "new_text": null,
          "old_line_content": "            av_assert1(pkt->duration >= 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "                ist->next_dts += av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "        switch (par->codec_type) {",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": "av_inv_q",
          "new_api": null,
          "old_text": "av_inv_q(ist->framerate)",
          "new_text": null,
          "old_line_content": "                ist->next_dts = av_rescale_q(next_dts + 1, av_inv_q(ist->framerate), time_base_q);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "                ist->next_dts += av_rescale_q(pkt->duration, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "        case AVMEDIA_TYPE_VIDEO:",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": "check_output_constraints",
          "new_api": null,
          "old_text": "check_output_constraints(ist, ost)",
          "new_text": null,
          "old_line_content": "        if (!check_output_constraints(ist, ost) || ost->enc_ctx ||",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2460,
          "old_api": "do_streamcopy",
          "new_api": null,
          "old_text": "do_streamcopy(ist, ost, pkt)",
          "new_text": null,
          "old_line_content": "        do_streamcopy(ist, ost, pkt);",
          "new_line_content": "        eof_reached = 1;",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(*p)",
          "new_text": null,
          "old_line_content": "        const AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(*p);",
          "new_line_content": "static enum AVPixelFormat get_format(AVCodecContext *s, const enum AVPixelFormat *pix_fmts)",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "avcodec_get_hw_config",
          "new_api": null,
          "old_text": "avcodec_get_hw_config(s->codec, i)",
          "new_text": null,
          "old_line_content": "                config = avcodec_get_hw_config(s->codec, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": "hwaccel_decode_init",
          "new_api": null,
          "old_text": "hwaccel_decode_init(s)",
          "new_text": null,
          "old_line_content": "            ret = hwaccel_decode_init(s);",
          "new_line_content": "                      AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX))",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL,\n                           \"%s hwaccel requested for input stream #%d:%d, \"\n                           \"but cannot be initialized.\\n\",\n                           av_hwdevice_get_type_name(config->device_type),\n                           ist->file_index, ist->st->index)",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_FATAL,",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": "av_hwdevice_get_type_name",
          "new_api": null,
          "old_text": "av_hwdevice_get_type_name(config->device_type)",
          "new_text": null,
          "old_line_content": "                           av_hwdevice_get_type_name(config->device_type),",
          "new_line_content": "        if (config && config->device_type == ist->hwaccel_device_type) {",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(error, error_len, \"Decoder (codec %s) not found for input stream #%d:%d\",\n                    avcodec_get_name(ist->dec_ctx->codec_id), ist->file_index, ist->st->index)",
          "new_text": null,
          "old_line_content": "            snprintf(error, error_len, \"Decoder (codec %s) not found for input stream #%d:%d\",",
          "new_line_content": "static int init_input_stream(InputStream *ist, char *error, int error_len)",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": "avcodec_get_name",
          "new_api": null,
          "old_text": "avcodec_get_name(ist->dec_ctx->codec_id)",
          "new_text": null,
          "old_line_content": "                    avcodec_get_name(ist->dec_ctx->codec_id), ist->file_index, ist->st->index);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "            return AVERROR(EINVAL);",
          "new_line_content": "    int ret;",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"Warning using DVB subtitles for filtering and output at the same time is not fully supported, also see -compute_edt [0|1]\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_WARNING, \"Warning using DVB subtitles for filtering and output at the same time is not fully supported, also see -compute_edt [0|1]\\n\");",
          "new_line_content": "        })",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&ist->decoder_opts, \"threads\", \"auto\", 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&ist->decoder_opts, \"threads\", \"auto\", 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&ist->decoder_opts, \"threads\", \"1\", 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&ist->decoder_opts, \"threads\", \"1\", 0);",
          "new_line_content": "         * audio, and video decoders such as cuvid or mediacodec */",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": "hw_device_setup_for_decode",
          "new_api": null,
          "old_text": "hw_device_setup_for_decode(ist)",
          "new_text": null,
          "old_line_content": "        ret = hw_device_setup_for_decode(ist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2556,
          "old_api": "av_err2str",
          "new_api": null,
          "old_text": "av_err2str(ret)",
          "new_text": null,
          "old_line_content": "                     ist->file_index, ist->st->index, av_err2str(ret));",
          "new_line_content": "        if (ist->st->disposition & AV_DISPOSITION_ATTACHED_PIC)",
          "content_same": false
        },
        {
          "line": 2560,
          "old_api": "avcodec_open2",
          "new_api": null,
          "old_text": "avcodec_open2(ist->dec_ctx, codec, &ist->decoder_opts)",
          "new_text": null,
          "old_line_content": "        if ((ret = avcodec_open2(ist->dec_ctx, codec, &ist->decoder_opts)) < 0) {",
          "new_line_content": "        if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 2562,
          "old_api": "abort_codec_experimental",
          "new_api": null,
          "old_text": "abort_codec_experimental(codec, 0)",
          "new_text": null,
          "old_line_content": "                abort_codec_experimental(codec, 0);",
          "new_line_content": "                     \"decoder on input stream #%d:%d : %s\",",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(error, error_len,\n                     \"Error while opening decoder for input stream \"\n                     \"#%d:%d : %s\",\n                     ist->file_index, ist->st->index, av_err2str(ret))",
          "new_text": null,
          "old_line_content": "            snprintf(error, error_len,",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 2570,
          "old_api": "assert_avoptions",
          "new_api": null,
          "old_text": "assert_avoptions(ist->decoder_opts)",
          "new_text": null,
          "old_line_content": "        assert_avoptions(ist->decoder_opts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(ist && !ost->filter)",
          "new_text": null,
          "old_line_content": "    av_assert0(ist && !ost->filter);",
          "new_line_content": "    InputFile *ifile = input_files[ist->file_index];",
          "content_same": false
        },
        {
          "line": 2592,
          "old_api": "avcodec_alloc_context3",
          "new_api": null,
          "old_text": "avcodec_alloc_context3(NULL)",
          "new_text": null,
          "old_line_content": "    codec_ctx = avcodec_alloc_context3(NULL);",
          "new_line_content": "    AVCodecContext *codec_ctx;",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    int i, ret;",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": "avcodec_parameters_to_context",
          "new_api": null,
          "old_text": "avcodec_parameters_to_context(codec_ctx, ist->par)",
          "new_text": null,
          "old_line_content": "    ret = avcodec_parameters_to_context(codec_ctx, ist->par);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "av_opt_set_dict",
          "new_api": null,
          "old_text": "av_opt_set_dict(codec_ctx, &ost->encoder_opts)",
          "new_text": null,
          "old_line_content": "        ret = av_opt_set_dict(codec_ctx, &ost->encoder_opts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2600,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL,\n               \"Error setting up codec context options.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_FATAL,",
          "new_line_content": "    if (!codec_ctx)",
          "content_same": false
        },
        {
          "line": 2602,
          "old_api": "avcodec_free_context",
          "new_api": null,
          "old_text": "avcodec_free_context(&codec_ctx)",
          "new_text": null,
          "old_line_content": "        avcodec_free_context(&codec_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "avcodec_parameters_from_context",
          "new_api": null,
          "old_text": "avcodec_parameters_from_context(par, codec_ctx)",
          "new_text": null,
          "old_line_content": "    ret = avcodec_parameters_from_context(par, codec_ctx);",
          "new_line_content": "    if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": "av_codec_get_id (of->format->codec_tag, par->codec_tag)",
          "new_api": null,
          "old_text": "av_codec_get_id (of->format->codec_tag, par->codec_tag)",
          "new_text": null,
          "old_line_content": "            av_codec_get_id (of->format->codec_tag, par->codec_tag) == par->codec_id ||",
          "new_line_content": "               \"Error getting reference codec parameters.\\n\");",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": "av_codec_get_tag2",
          "new_api": null,
          "old_text": "av_codec_get_tag2(of->format->codec_tag, par->codec_id, &codec_tag_tmp)",
          "new_text": null,
          "old_line_content": "            !av_codec_get_tag2(of->format->codec_tag, par->codec_id, &codec_tag_tmp))",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": "avformat_transfer_internal_stream_timing_info",
          "new_api": null,
          "old_text": "avformat_transfer_internal_stream_timing_info(of->format, ost->st, ist->st, copy_tb)",
          "new_text": null,
          "old_line_content": "    ret = avformat_transfer_internal_stream_timing_info(of->format, ost->st, ist->st, copy_tb);",
          "new_line_content": "        ost->frame_rate = ist->framerate;",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "av_stream_get_codec_timebase",
          "new_api": null,
          "old_text": "av_stream_get_codec_timebase(ost->st)",
          "new_text": null,
          "old_line_content": "            ost->st->time_base = av_add_q(av_stream_get_codec_timebase(ost->st), (AVRational){0, 1});",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 2652,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(ost->ts_copy_start,\n                                       ifile->start_time + ifile->ts_offset)",
          "new_text": null,
          "old_line_content": "            ost->ts_copy_start = FFMAX(ost->ts_copy_start,",
          "new_line_content": "    if (ost->st->duration <= 0 && ist->st->duration > 0)",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": "av_stream_new_side_data",
          "new_api": null,
          "old_text": "av_stream_new_side_data(ost->st, sd_src->type, sd_src->size)",
          "new_text": null,
          "old_line_content": "            dst_data = av_stream_new_side_data(ost->st, sd_src->type, sd_src->size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "    if (ist->st->nb_side_data) {",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst_data, sd_src->data, sd_src->size)",
          "new_text": null,
          "old_line_content": "            memcpy(dst_data, sd_src->data, sd_src->size);",
          "new_line_content": "        for (i = 0; i < ist->st->nb_side_data; i++) {",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "av_display_rotation_set",
          "new_api": null,
          "old_text": "av_display_rotation_set((int32_t *)sd, -ost->rotate_override_value)",
          "new_text": null,
          "old_line_content": "            av_display_rotation_set((int32_t *)sd, -ost->rotate_override_value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": "av_mul_q",
          "new_api": null,
          "old_text": "av_mul_q(ost->frame_aspect_ratio,\n                         (AVRational){ par->height, par->width })",
          "new_text": null,
          "old_line_content": "                av_mul_q(ost->frame_aspect_ratio,",
          "new_line_content": "            par->block_align = 0;",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"Overriding aspect ratio \"\n                   \"with stream copy may produce invalid files\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"Overriding aspect ratio \"",
          "new_line_content": "            par->block_align = 0;",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(ost->st->metadata, \"encoder\",  NULL, 0)",
          "new_text": null,
          "old_line_content": "    if (av_dict_get(ost->st->metadata, \"encoder\",  NULL, 0))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cname)",
          "new_text": null,
          "old_line_content": "    encoder_string_len = sizeof(LIBAVCODEC_IDENT) + strlen(cname) + 2;",
          "new_line_content": "    const char *cname = ost->enc_ctx->codec->name;",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(encoder_string_len)",
          "new_text": null,
          "old_line_content": "    encoder_string     = av_mallocz(encoder_string_len);",
          "new_line_content": "    uint8_t *encoder_string;",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        report_and_exit(AVERROR(ENOMEM));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "av_strlcpy",
          "new_api": null,
          "old_text": "av_strlcpy(encoder_string, LIBAVCODEC_IDENT \" \", encoder_string_len)",
          "new_text": null,
          "old_line_content": "        av_strlcpy(encoder_string, LIBAVCODEC_IDENT \" \", encoder_string_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": "av_strlcat",
          "new_api": null,
          "old_text": "av_strlcat(encoder_string, cname, encoder_string_len)",
          "new_text": null,
          "old_line_content": "    av_strlcat(encoder_string, cname, encoder_string_len);",
          "new_line_content": "    if (!encoder_string)",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING,\n               \"Input stream data for output stream #%d:%d not available, \"\n               \"using default time base\\n\", ost->file_index, ost->index)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "set_encoder_id",
          "new_api": null,
          "old_text": "set_encoder_id(output_files[ost->file_index], ost)",
          "new_text": null,
          "old_line_content": "    set_encoder_id(output_files[ost->file_index], ost);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "av_buffersink_get_frame_rate",
          "new_api": null,
          "old_text": "av_buffersink_get_frame_rate(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "            ost->frame_rate = av_buffersink_get_frame_rate(ost->filter->filter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING,\n                   \"No information \"\n                   \"about the input framerate is available. Falling \"\n                   \"back to a default value of 25fps for output stream #%d:%d. Use the -r option \"\n                   \"if you want a different framerate.\\n\",\n                   ost->file_index, ost->index)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(ost->max_frame_rate)",
          "new_text": null,
          "old_line_content": "            (av_q2d(ost->frame_rate) > av_q2d(ost->max_frame_rate) ||",
          "new_line_content": "                   \"about the input framerate is available. Falling \"",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": "av_find_nearest_q_idx",
          "new_api": null,
          "old_text": "av_find_nearest_q_idx(ost->frame_rate, enc_ctx->codec->supported_framerates)",
          "new_text": null,
          "old_line_content": "            int idx = av_find_nearest_q_idx(ost->frame_rate, enc_ctx->codec->supported_framerates);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "av_reduce",
          "new_api": null,
          "old_text": "av_reduce(&ost->frame_rate.num, &ost->frame_rate.den,\n                      ost->frame_rate.num, ost->frame_rate.den, 65535)",
          "new_text": null,
          "old_line_content": "            av_reduce(&ost->frame_rate.num, &ost->frame_rate.den,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2802,
          "old_api": "av_buffersink_get_sample_rate",
          "new_api": null,
          "old_text": "av_buffersink_get_sample_rate(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "        enc_ctx->sample_rate    = av_buffersink_get_sample_rate(ost->filter->filter);",
          "new_line_content": "                      ost->frame_rate.num, ost->frame_rate.den, 65535);",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": "av_buffersink_get_ch_layout",
          "new_api": null,
          "old_text": "av_buffersink_get_ch_layout(ost->filter->filter, &enc_ctx->ch_layout)",
          "new_text": null,
          "old_line_content": "        ret = av_buffersink_get_ch_layout(ost->filter->filter, &enc_ctx->ch_layout);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "av_get_bytes_per_sample",
          "new_api": null,
          "old_text": "av_get_bytes_per_sample(enc_ctx->sample_fmt)",
          "new_text": null,
          "old_line_content": "                                                 av_get_bytes_per_sample(enc_ctx->sample_fmt) << 3);",
          "new_line_content": "        if (ret < 0)",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": "av_make_q",
          "new_api": null,
          "old_text": "av_make_q(1, enc_ctx->sample_rate)",
          "new_text": null,
          "old_line_content": "        init_encoder_time_base(ost, av_make_q(1, enc_ctx->sample_rate));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(enc_ctx->time_base)",
          "new_text": null,
          "old_line_content": "        if (   av_q2d(enc_ctx->time_base) < 0.001 && ost->vsync_method != VSYNC_PASSTHROUGH",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "av_buffersink_get_w",
          "new_api": null,
          "old_text": "av_buffersink_get_w(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "        enc_ctx->width  = av_buffersink_get_w(ost->filter->filter);",
          "new_line_content": "           && (ost->vsync_method == VSYNC_CFR || ost->vsync_method == VSYNC_VSCFR ||",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": "av_buffersink_get_h",
          "new_api": null,
          "old_text": "av_buffersink_get_h(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "        enc_ctx->height = av_buffersink_get_h(ost->filter->filter);",
          "new_line_content": "               (ost->vsync_method == VSYNC_AUTO && !(of->format->flags & AVFMT_VARIABLE_FPS)))){",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "av_mul_q",
          "new_api": null,
          "old_text": "av_mul_q(ost->frame_aspect_ratio, (AVRational){ enc_ctx->height, enc_ctx->width })",
          "new_text": null,
          "old_line_content": "            av_mul_q(ost->frame_aspect_ratio, (AVRational){ enc_ctx->height, enc_ctx->width }) :",
          "new_line_content": "                                       \"setting vsync/fps_mode to vfr\\n\");",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": "av_buffersink_get_sample_aspect_ratio",
          "new_api": null,
          "old_text": "av_buffersink_get_sample_aspect_ratio(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "            av_buffersink_get_sample_aspect_ratio(ost->filter->filter);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(enc_ctx->pix_fmt)",
          "new_text": null,
          "old_line_content": "                                                 av_pix_fmt_desc_get(enc_ctx->pix_fmt)->comp[0].depth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2887,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(dec_ctx->subtitle_header_size + 1)",
          "new_text": null,
          "old_line_content": "            ost->enc_ctx->subtitle_header = av_mallocz(dec_ctx->subtitle_header_size + 1);",
          "new_line_content": "        enc_ctx->time_base = AV_TIME_BASE_Q;",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "            enc_ctx->width     = ost->ist->par->width;",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ost->enc_ctx->subtitle_header, dec_ctx->subtitle_header,\n                   dec_ctx->subtitle_header_size)",
          "new_text": null,
          "old_line_content": "            memcpy(ost->enc_ctx->subtitle_header, dec_ctx->subtitle_header,",
          "new_line_content": "            enc_ctx->height    = ost->ist->par->height;",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "avcodec_descriptor_get",
          "new_api": null,
          "old_text": "avcodec_descriptor_get(ist->dec->id)",
          "new_text": null,
          "old_line_content": "                avcodec_descriptor_get(ist->dec->id);",
          "new_line_content": "                   dec_ctx->subtitle_header_size);",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": "avcodec_descriptor_get",
          "new_api": null,
          "old_text": "avcodec_descriptor_get(ost->enc_ctx->codec_id)",
          "new_text": null,
          "old_line_content": "                avcodec_descriptor_get(ost->enc_ctx->codec_id);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR,\n                       \"Subtitle encoding currently only possible from text to text \"\n                       \"or bitmap to bitmap\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_ERROR,",
          "new_line_content": "            AVCodecDescriptor const *output_descriptor =",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "        abort();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": "sq_set_tb",
          "new_api": null,
          "old_text": "sq_set_tb(of->sq_encode, ost->sq_idx_encode, enc_ctx->time_base)",
          "new_text": null,
          "old_line_content": "        sq_set_tb(of->sq_encode, ost->sq_idx_encode, enc_ctx->time_base);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "init_output_stream_encode",
          "new_api": null,
          "old_text": "init_output_stream_encode(ost, frame)",
          "new_text": null,
          "old_line_content": "        ret = init_output_stream_encode(ost, frame);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(ost->encoder_opts, \"threads\", NULL, 0)",
          "new_text": null,
          "old_line_content": "        if (!av_dict_get(ost->encoder_opts, \"threads\", NULL, 0))",
          "new_line_content": "        const AVCodec *codec = ost->enc_ctx->codec;",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&ost->encoder_opts, \"threads\", \"auto\", 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&ost->encoder_opts, \"threads\", \"auto\", 0);",
          "new_line_content": "        InputStream *ist = ost->ist;",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(error, error_len, \"Device setup failed for \"\n                     \"encoder on output stream #%d:%d : %s\",\n                     ost->file_index, ost->index, av_err2str(ret))",
          "new_text": null,
          "old_line_content": "            snprintf(error, error_len, \"Device setup failed for \"",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "avcodec_open2",
          "new_api": null,
          "old_text": "avcodec_open2(ost->enc_ctx, codec, &ost->encoder_opts)",
          "new_text": null,
          "old_line_content": "        if ((ret = avcodec_open2(ost->enc_ctx, codec, &ost->encoder_opts)) < 0) {",
          "new_line_content": "        if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": "abort_codec_experimental",
          "new_api": null,
          "old_text": "abort_codec_experimental(codec, 1)",
          "new_text": null,
          "old_line_content": "                abort_codec_experimental(codec, 1);",
          "new_line_content": "                     \"encoder on output stream #%d:%d : %s\",",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "av_buffersink_set_frame_size",
          "new_api": null,
          "old_text": "av_buffersink_set_frame_size(ost->filter->filter,\n                                            ost->enc_ctx->frame_size)",
          "new_text": null,
          "old_line_content": "            av_buffersink_set_frame_size(ost->filter->filter,",
          "new_line_content": "                     \"Error while opening encoder for output stream #%d:%d - \"",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": "assert_avoptions",
          "new_api": null,
          "old_text": "assert_avoptions(ost->encoder_opts)",
          "new_text": null,
          "old_line_content": "        assert_avoptions(ost->encoder_opts);",
          "new_line_content": "                    ost->file_index, ost->index);",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"The bitrate parameter is set too low.\"\n                                         \" It takes bits/s as argument, not kbits/s\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"The bitrate parameter is set too low.\"",
          "new_line_content": "        if (codec->type == AVMEDIA_TYPE_AUDIO &&",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "avcodec_parameters_from_context",
          "new_api": null,
          "old_text": "avcodec_parameters_from_context(ost->st->codecpar, ost->enc_ctx)",
          "new_text": null,
          "old_line_content": "        ret = avcodec_parameters_from_context(ost->st->codecpar, ost->enc_ctx);",
          "new_line_content": "                                            ost->enc_ctx->frame_size);",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL,\n                   \"Error initializing the output stream codec context.\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_FATAL,",
          "new_line_content": "        if (ost->enc_ctx->bit_rate && ost->enc_ctx->bit_rate < 1000 &&",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "adjust_frame_pts_to_encoder_tb",
          "new_api": null,
          "old_text": "adjust_frame_pts_to_encoder_tb(of, ost, frame)",
          "new_text": null,
          "old_line_content": "    adjust_frame_pts_to_encoder_tb(of, ost, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "check_recording_time",
          "new_api": null,
          "old_text": "check_recording_time(ost, ost->next_pts, ost->enc_ctx->time_base)",
          "new_text": null,
          "old_line_content": "    if (!check_recording_time(ost, ost->next_pts, ost->enc_ctx->time_base))",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "av_stream_new_side_data",
          "new_api": null,
          "old_text": "av_stream_new_side_data(ost->st, sd_src->type, sd_src->size)",
          "new_text": null,
          "old_line_content": "                dst_data = av_stream_new_side_data(ost->st, sd_src->type, sd_src->size);",
          "new_line_content": "        if (ost->enc_ctx->nb_coded_side_data) {",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                    return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst_data, sd_src->data, sd_src->size)",
          "new_text": null,
          "old_line_content": "                memcpy(dst_data, sd_src->data, sd_src->size);",
          "new_line_content": "            for (i = 0; i < ost->enc_ctx->nb_coded_side_data; i++) {",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "        exit_program(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": "av_stream_new_side_data",
          "new_api": null,
          "old_text": "av_stream_new_side_data(ost->st, sd->type, sd->size)",
          "new_text": null,
          "old_line_content": "                    uint8_t *dst = av_stream_new_side_data(ost->st, sd->type, sd->size);",
          "new_line_content": "         * global side data.",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                        return AVERROR(ENOMEM);",
          "new_line_content": "        if (ist) {",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Subtitle packets must have a pts\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_ERROR, \"Subtitle packets must have a pts\\n\");",
          "new_line_content": "    int subtitle_out_max_size = 1024 * 1024;",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst, sd->data, sd->size)",
          "new_text": null,
          "old_line_content": "                    memcpy(dst, sd->data, sd->size);",
          "new_line_content": "            int i;",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "    AVCodecContext *enc;",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": "av_display_rotation_set",
          "new_api": null,
          "old_text": "av_display_rotation_set((int32_t *)dst, 0)",
          "new_text": null,
          "old_line_content": "                        av_display_rotation_set((int32_t *)dst, 0);",
          "new_line_content": "                AVPacketSideData *sd = &ist->st->side_data[i];",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base)",
          "new_text": null,
          "old_line_content": "            ost->st->duration = av_rescale_q(ist->st->duration, ist->st->time_base, ost->st->time_base);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "init_output_stream_streamcopy",
          "new_api": null,
          "old_text": "init_output_stream_streamcopy(ost)",
          "new_text": null,
          "old_line_content": "        ret = init_output_stream_streamcopy(ost);",
          "new_line_content": "        if (ost->st->time_base.num <= 0 || ost->st->time_base.den <= 0)",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "check_recording_time",
          "new_api": null,
          "old_text": "check_recording_time(ost, pts, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        if (!check_recording_time(ost, pts, AV_TIME_BASE_Q))",
          "new_line_content": "    /* shift timestamp to honor -ss and make check_recording_time() work with -t */",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "av_new_packet",
          "new_api": null,
          "old_text": "av_new_packet(pkt, subtitle_out_max_size)",
          "new_text": null,
          "old_line_content": "        ret = av_new_packet(pkt, subtitle_out_max_size);",
          "new_line_content": "        pts -= output_files[ost->file_index]->start_time;",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            report_and_exit(AVERROR(ENOMEM));",
          "new_line_content": "        unsigned save_num_rects = sub->num_rects;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        sub->pts               += av_rescale_q(sub->start_display_time, (AVRational){ 1, 1000 }, AV_TIME_BASE_Q);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "av_gettime_relative",
          "new_api": null,
          "old_text": "av_gettime_relative()",
          "new_text": null,
          "old_line_content": "                ifile->streams[j]->start = av_gettime_relative();",
          "new_line_content": "    char error[1024] = {0};",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "avcodec_encode_subtitle",
          "new_api": null,
          "old_text": "avcodec_encode_subtitle(enc, pkt->data, pkt->size, sub)",
          "new_text": null,
          "old_line_content": "        subtitle_out_size = avcodec_encode_subtitle(enc, pkt->data, pkt->size, sub);",
          "new_line_content": "        sub->end_display_time  -= sub->start_display_time;",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "ist_iter",
          "new_api": null,
          "old_text": "ist_iter(ist)",
          "new_text": null,
          "old_line_content": "    for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist))",
          "new_line_content": "        InputFile *ifile = input_files[i];",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "init_input_stream",
          "new_api": null,
          "old_text": "init_input_stream(ist, error, sizeof(error))",
          "new_text": null,
          "old_line_content": "        if ((ret = init_input_stream(ist, error, sizeof(error))) < 0)",
          "new_line_content": "        if (ifile->readrate || ifile->rate_emu)",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"Subtitle encoding failed\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Subtitle encoding failed\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "        ost->frames_encoded++;",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "av_shrink_packet",
          "new_api": null,
          "old_text": "av_shrink_packet(pkt, subtitle_out_size)",
          "new_text": null,
          "old_line_content": "        av_shrink_packet(pkt, subtitle_out_size);",
          "new_line_content": "        if (i == 1)",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(sub->pts, AV_TIME_BASE_Q, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "        pkt->pts  = av_rescale_q(sub->pts, AV_TIME_BASE_Q, ost->mux_timebase);",
          "new_line_content": "            sub->num_rects = save_num_rects;",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(sub->end_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "        pkt->duration = av_rescale_q(sub->end_display_time, (AVRational){ 1, 1000 }, ost->mux_timebase);",
          "new_line_content": "        if (subtitle_out_size < 0) {",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "     * Encoded AVFrame based streams will get initialized as follows:",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "init_output_stream_wrapper",
          "new_api": null,
          "old_text": "init_output_stream_wrapper(ost, NULL, 0)",
          "new_text": null,
          "old_line_content": "        ret = init_output_stream_wrapper(ost, NULL, 0);",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "of_output_packet",
          "new_api": null,
          "old_text": "of_output_packet(of, pkt, ost, 0)",
          "new_text": null,
          "old_line_content": "        of_output_packet(of, pkt, ost, 0);",
          "new_line_content": "               it in the codec would be better */",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(tb)",
          "new_text": null,
          "old_line_content": "    pts_time = (in_picture->pts - kf->ref_pts) * av_q2d(tb);",
          "new_line_content": "                                          const AVFrame *in_picture, int dup_idx)",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "av_compare_ts",
          "new_api": null,
          "old_text": "av_compare_ts(in_picture->pts, tb, kf->pts[kf->index], AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        av_compare_ts(in_picture->pts, tb, kf->pts[kf->index], AV_TIME_BASE_Q) >= 0) {",
          "new_line_content": "    double pts_time;",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "av_expr_eval",
          "new_api": null,
          "old_text": "av_expr_eval(kf->pexpr,\n                           kf->expr_const_values, NULL)",
          "new_text": null,
          "old_line_content": "        res = av_expr_eval(kf->pexpr,",
          "new_line_content": "    if (kf->index < kf->nb_pts &&",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(NULL, \"force_key_frame: n:%f n_forced:%f prev_forced_n:%f t:%f prev_forced_t:%f -> res:%f\\n\",\n                kf->expr_const_values[FKF_N],\n                kf->expr_const_values[FKF_N_FORCED],\n                kf->expr_const_values[FKF_PREV_FORCED_N],\n                kf->expr_const_values[FKF_T],\n                kf->expr_const_values[FKF_PREV_FORCED_T],\n                res)",
          "new_text": null,
          "old_line_content": "        ff_dlog(NULL, \"force_key_frame: n:%f n_forced:%f prev_forced_n:%f t:%f prev_forced_t:%f -> res:%f\\n\",",
          "new_line_content": "        kf->index++;",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"Stream mapping:\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_INFO, \"Stream mapping:\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": "ist_iter",
          "new_api": null,
          "old_text": "ist_iter(ist)",
          "new_text": null,
          "old_line_content": "    for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist)) {",
          "new_line_content": "            p->discard = discard;",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "filtergraph_is_simple",
          "new_api": null,
          "old_text": "filtergraph_is_simple(ist->filters[j]->graph)",
          "new_text": null,
          "old_line_content": "            if (!filtergraph_is_simple(ist->filters[j]->graph)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d (%s) -> %s\",\n                       ist->file_index, ist->st->index, ist->dec ? ist->dec->name : \"?\",\n                       ist->filters[j]->name)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_INFO, \"  Stream #%d:%d (%s) -> %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_INFO, \"\\n\");",
          "new_line_content": "        for (int j = 0; j < ist->nb_filters; j++) {",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "                if (nb_filtergraphs > 1)",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"  File %s -> Stream #%d:%d\\n\",\n                   ost->attachment_filename, ost->file_index, ost->index)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_INFO, \"  File %s -> Stream #%d:%d\\n\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "filtergraph_is_simple",
          "new_api": null,
          "old_text": "filtergraph_is_simple(ost->filter->graph)",
          "new_text": null,
          "old_line_content": "        if (ost->filter && !filtergraph_is_simple(ost->filter->graph)) {",
          "new_line_content": "        if (ost->attachment_filename) {",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ost->filter->graph->index)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_INFO, \" (graph %d)\", ost->filter->graph->index);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"Forced keyframe at time %f\\n\", pts_time)",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"Forced keyframe at time %f\\n\", pts_time);",
          "new_line_content": "        if ((in_picture->key_frame == 1) || kf->dropped_keyframe)",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \" -> Stream #%d:%d (%s)\\n\", ost->file_index,\n                   ost->index, ost->enc_ctx->codec->name)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_INFO, \" -> Stream #%d:%d (%s)\\n\", ost->file_index,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "init_output_stream_wrapper",
          "new_api": null,
          "old_text": "init_output_stream_wrapper(ost, next_picture, 1)",
          "new_text": null,
          "old_line_content": "    init_output_stream_wrapper(ost, next_picture, 1);",
          "new_line_content": "    int64_t nb_frames, nb0_frames, i;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "adjust_frame_pts_to_encoder_tb",
          "new_api": null,
          "old_text": "adjust_frame_pts_to_encoder_tb(of, ost, next_picture)",
          "new_text": null,
          "old_line_content": "    sync_ipts = adjust_frame_pts_to_encoder_tb(of, ost, next_picture);",
          "new_line_content": "    double delta, delta0;",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "av_buffersink_get_frame_rate",
          "new_api": null,
          "old_text": "av_buffersink_get_frame_rate(filter)",
          "new_text": null,
          "old_line_content": "    frame_rate = av_buffersink_get_frame_rate(filter);",
          "new_line_content": "    double sync_ipts = AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": "avcodec_descriptor_get",
          "new_api": null,
          "old_text": "avcodec_descriptor_get(in_codec->id)",
          "new_text": null,
          "old_line_content": "                desc = avcodec_descriptor_get(in_codec->id);",
          "new_line_content": "            const char *in_codec_name  = \"?\";",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(enc->time_base)",
          "new_text": null,
          "old_line_content": "        duration = 1/(av_q2d(frame_rate) * av_q2d(enc->time_base));",
          "new_line_content": "    AVFilterContext *filter = ost->filter->filter;",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(decoder_name, in_codec_name)",
          "new_text": null,
          "old_line_content": "                if (!strcmp(decoder_name, in_codec_name))",
          "new_line_content": "            const AVCodecDescriptor *desc;",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": "avcodec_descriptor_get",
          "new_api": null,
          "old_text": "avcodec_descriptor_get(out_codec->id)",
          "new_text": null,
          "old_line_content": "                desc = avcodec_descriptor_get(out_codec->id);",
          "new_line_content": "                    in_codec_name = desc->name;",
          "content_same": false
        },
        {
          "line": 3155,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(encoder_name, out_codec_name)",
          "new_text": null,
          "old_line_content": "                if (!strcmp(encoder_name, out_codec_name))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "av_q2d",
          "new_api": null,
          "old_text": "av_q2d(enc->time_base)",
          "new_text": null,
          "old_line_content": "        duration = lrintf(next_picture->duration * av_q2d(ist->st->time_base) / av_q2d(enc->time_base));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "mid_pred",
          "new_api": null,
          "old_text": "mid_pred(ost->last_nb0_frames[0],\n                                          ost->last_nb0_frames[1],\n                                          ost->last_nb0_frames[2])",
          "new_text": null,
          "old_line_content": "        nb0_frames = nb_frames = mid_pred(ost->last_nb0_frames[0],",
          "new_line_content": "        ist &&",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \" (copy)\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_INFO, \" (copy)\");",
          "new_line_content": "                    encoder_name = \"native\";",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3168,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"%s\\n\", error)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_ERROR, \"%s\\n\", error);",
          "new_line_content": "                   out_codec_name, encoder_name);",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": "atomic_store",
          "new_api": null,
          "old_text": "atomic_store(&transcode_init_done, 1)",
          "new_text": null,
          "old_line_content": "    atomic_store(&transcode_init_done, 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"Past duration %f too large\\n\", -delta0)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"Past duration %f too large\\n\", -delta0);",
          "new_line_content": "        nb_frames = 1;",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"Clipping frame in rate conversion by %f\\n\", -delta0)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"Clipping frame in rate conversion by %f\\n\", -delta0);",
          "new_line_content": "        if (delta0 < 0 &&",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(delta0)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"Not duplicating %d initial frames\\n\", (int)lrintf(delta0));",
          "new_line_content": "            duration += delta0;",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "llrint",
          "new_api": null,
          "old_text": "llrint(sync_ipts)",
          "new_text": null,
          "old_line_content": "                ost->next_pts = llrint(sync_ipts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": " * @return  selected output stream, or NULL if none available",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "llrintf",
          "new_api": null,
          "old_text": "llrintf(delta)",
          "new_text": null,
          "old_line_content": "                nb_frames = llrintf(delta);",
          "new_line_content": "        case VSYNC_CFR:",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "llrintf",
          "new_api": null,
          "old_text": "llrintf(delta0 - 0.6)",
          "new_text": null,
          "old_line_content": "                    nb0_frames = llrintf(delta0 - 0.6);",
          "new_line_content": "            if (frame_drop_threshold && delta < frame_drop_threshold && ost->vsync_frame_number) {",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG,\n                    \"cur_dts is invalid st:%d (%d) [init:%d i_done:%d finish:%d] (this is harmless if it occurs once at the start per stream)\\n\",\n                    ost->st->index, ost->st->id, ost->initialized, ost->inputs_done, ost->finished)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "llrint",
          "new_api": null,
          "old_text": "llrint(sync_ipts)",
          "new_text": null,
          "old_line_content": "                ost->next_pts = llrint(sync_ipts);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "llrint",
          "new_api": null,
          "old_text": "llrint(sync_ipts)",
          "new_text": null,
          "old_line_content": "            ost->next_pts = llrint(sync_ipts);",
          "new_line_content": "            else if (delta > 0.6)",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(0)",
          "new_text": null,
          "old_line_content": "            av_assert0(0);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "FF_ARRAY_ELEMS",
          "new_api": null,
          "old_text": "FF_ARRAY_ELEMS(ost->last_nb0_frames)",
          "new_text": null,
          "old_line_content": "            sizeof(ost->last_nb0_frames[0]) * (FF_ARRAY_ELEMS(ost->last_nb0_frames) - 1));",
          "new_line_content": "        default:",
          "content_same": false
        },
        {
          "line": 3229,
          "old_api": "tcgetattr",
          "new_api": null,
          "old_text": "tcgetattr(0, &tty)",
          "new_text": null,
          "old_line_content": "    if (tcgetattr(0, &tty) == 0) {",
          "new_line_content": "    return ost_min;",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "tcsetattr",
          "new_api": null,
          "old_text": "tcsetattr(0, TCSANOW, &tty)",
          "new_text": null,
          "old_line_content": "        tcsetattr(0, TCSANOW, &tty);",
          "new_line_content": "static void set_tty_echo(int on)",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"%\"PRId64\" frame duplication too large, skipping\\n\", nb_frames - 1)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"%\"PRId64\" frame duplication too large, skipping\\n\", nb_frames - 1);",
          "new_line_content": "        nb_frames_drop++;",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"*** %\"PRId64\" dup!\\n\", nb_frames - 1)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"*** %\"PRId64\" dup!\\n\", nb_frames - 1);",
          "new_line_content": "    if (nb_frames > (nb0_frames && ost->last_dropped) + (nb_frames > nb0_frames)) {",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": "read_key",
          "new_api": null,
          "old_text": "read_key()",
          "new_text": null,
          "old_line_content": "        key =  read_key();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3250,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"\\n\\n[q] command received. Exiting.\\n\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"\\n\\n[q] command received. Exiting.\\n\\n\");",
          "new_line_content": "    /* read_key() returns 0 on EOF */",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": "av_log_get_level",
          "new_api": null,
          "old_text": "av_log_get_level()",
          "new_text": null,
          "old_line_content": "    if (key == '+') av_log_set_level(av_log_get_level()+10);",
          "new_line_content": "        last_time = cur_time;",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": "av_log_get_level",
          "new_api": null,
          "old_text": "av_log_get_level()",
          "new_text": null,
          "old_line_content": "    if (key == '-') av_log_set_level(av_log_get_level()-10);",
          "new_line_content": "    }else",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "set_tty_echo",
          "new_api": null,
          "old_text": "set_tty_echo(1)",
          "new_text": null,
          "old_line_content": "        set_tty_echo(1);",
          "new_line_content": "    if (key == 's') qp_hist     ^= 1;",
          "content_same": false
        },
        {
          "line": 3263,
          "old_api": "read_key",
          "new_api": null,
          "old_text": "read_key()",
          "new_text": null,
          "old_line_content": "        while ((k = read_key()) != '\\n' && k != '\\r' && i < sizeof(buf)-1)",
          "new_line_content": "    if (key == 'c' || key == 'C'){",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "check_recording_time",
          "new_api": null,
          "old_text": "check_recording_time(ost, in_picture->pts, ost->enc_ctx->time_base)",
          "new_text": null,
          "old_line_content": "        if (!check_recording_time(ost, in_picture->pts, ost->enc_ctx->time_base))",
          "new_line_content": "            in_picture = next_picture;",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"\\n\")",
          "new_text": null,
          "old_line_content": "        fprintf(stderr, \"\\n\");",
          "new_line_content": "        i = 0;",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "forced_kf_apply",
          "new_api": null,
          "old_text": "forced_kf_apply(&ost->kf, enc->time_base, in_picture, i)",
          "new_text": null,
          "old_line_content": "        in_picture->pict_type = forced_kf_apply(&ost->kf, enc->time_base, in_picture, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3271,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"Processing command target:%s time:%f command:%s arg:%s\",\n                   target, time, command, arg)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_DEBUG, \"Processing command target:%s time:%f command:%s arg:%s\",",
          "new_line_content": "            if (k > 0)",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "submit_encode_frame",
          "new_api": null,
          "old_text": "submit_encode_frame(of, ost, in_picture)",
          "new_text": null,
          "old_line_content": "        ret = submit_encode_frame(of, ost, in_picture);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "        in_picture->quality = enc->global_quality;",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Command reply for stream %d: ret:%d res:\\n%s\", i, ret, buf)",
          "new_text": null,
          "old_line_content": "                        fprintf(stderr, \"Command reply for stream %d: ret:%d res:\\n%s\", i, ret, buf);",
          "new_line_content": "                   target, time, command, arg);",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Queuing commands only on filters supporting the specific command is unsupported\\n\")",
          "new_text": null,
          "old_line_content": "                        fprintf(stderr, \"Queuing commands only on filters supporting the specific command is unsupported\\n\");",
          "new_line_content": "                FilterGraph *fg = filtergraphs[i];",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "av_frame_unref",
          "new_api": null,
          "old_text": "av_frame_unref(ost->last_frame)",
          "new_text": null,
          "old_line_content": "    av_frame_unref(ost->last_frame);",
          "new_line_content": "        else if (ret < 0)",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "av_frame_move_ref",
          "new_api": null,
          "old_text": "av_frame_move_ref(ost->last_frame, next_picture)",
          "new_text": null,
          "old_line_content": "        av_frame_move_ref(ost->last_frame, next_picture);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": " * @return  0 for success, <0 for severe errors",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "ist_iter",
          "new_api": null,
          "old_text": "ist_iter(NULL)",
          "new_text": null,
          "old_line_content": "            InputStream *ist = ist_iter(NULL);",
          "new_line_content": "                   \"Parse error, at least 3 arguments were expected, \"",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": "set_tty_echo",
          "new_api": null,
          "old_text": "set_tty_echo(1)",
          "new_text": null,
          "old_line_content": "            set_tty_echo(1);",
          "new_line_content": "            if(!debug) debug = 1;",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": "read_key",
          "new_api": null,
          "old_text": "read_key()",
          "new_text": null,
          "old_line_content": "            while ((k = read_key()) != '\\n' && k != '\\r' && i < sizeof(buf)-1)",
          "new_line_content": "            while (debug & FF_DEBUG_DCT_COEFF) //unsupported, would just crash",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": "set_tty_echo",
          "new_api": null,
          "old_text": "set_tty_echo(0)",
          "new_text": null,
          "old_line_content": "            set_tty_echo(0);",
          "new_line_content": "            int k = 0;",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "av_buffersink_get_type",
          "new_api": null,
          "old_text": "av_buffersink_get_type(filter)",
          "new_text": null,
          "old_line_content": "        if (av_buffersink_get_type(filter) == AVMEDIA_TYPE_AUDIO)",
          "new_line_content": "         * Currently we are fully reliant on the lavfi filter chain to",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "init_output_stream_wrapper",
          "new_api": null,
          "old_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "new_text": null,
          "old_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "new_line_content": "         * do the buffering deed for us, and thus the frame size parameter",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"\\n\")",
          "new_text": null,
          "old_line_content": "            fprintf(stderr, \"\\n\");",
          "new_line_content": "            i = 0;",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": "ist_iter",
          "new_api": null,
          "old_text": "ist_iter(ist)",
          "new_text": null,
          "old_line_content": "        for (InputStream *ist = ist_iter(NULL); ist; ist = ist_iter(ist))",
          "new_line_content": "                    buf[i++] = k;",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "av_buffersink_get_frame_flags",
          "new_api": null,
          "old_text": "av_buffersink_get_frame_flags(filter, filtered_frame,\n                                               AV_BUFFERSINK_FLAG_NO_REQUEST)",
          "new_text": null,
          "old_line_content": "            ret = av_buffersink_get_frame_flags(filter, filtered_frame,",
          "new_line_content": "         */",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "                if (ret != AVERROR(EAGAIN) && ret != AVERROR_EOF) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING,\n                           \"Error in av_buffersink_get_frame_flags(): %s\\n\", av_err2str(ret))",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_WARNING,",
          "new_line_content": "        filtered_frame = ost->filtered_frame;",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "av_err2str",
          "new_api": null,
          "old_text": "av_err2str(ret)",
          "new_text": null,
          "old_line_content": "                           \"Error in av_buffersink_get_frame_flags(): %s\\n\", av_err2str(ret));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "av_log_set_level",
          "new_api": null,
          "old_text": "av_log_set_level(AV_LOG_DEBUG)",
          "new_text": null,
          "old_line_content": "        if(debug) av_log_set_level(AV_LOG_DEBUG);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "do_video_out",
          "new_api": null,
          "old_text": "do_video_out(of, ost, NULL)",
          "new_text": null,
          "old_line_content": "                        do_video_out(of, ost, NULL);",
          "new_line_content": "                                               AV_BUFFERSINK_FLAG_NO_REQUEST);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"key    function\\n\"\n                        \"?      show this help\\n\"\n                        \"+      increase verbosity\\n\"\n                        \"-      decrease verbosity\\n\"\n                        \"c      Send command to first matching filter supporting it\\n\"\n                        \"C      Send/Queue command to all matching filters\\n\"\n                        \"D      cycle through available debug modes\\n\"\n                        \"h      dump packets/hex press to cycle through the 3 states\\n\"\n                        \"q      quit\\n\"\n                        \"s      Show QP histogram\\n\"\n        )",
          "new_text": null,
          "old_line_content": "        fprintf(stderr, \"key    function\\n\"",
          "new_line_content": "            if (ost->enc_ctx)",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "av_frame_unref",
          "new_api": null,
          "old_text": "av_frame_unref(filtered_frame)",
          "new_text": null,
          "old_line_content": "                av_frame_unref(filtered_frame);",
          "new_line_content": "                } else if (flush && ret == AVERROR_EOF) {",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "av_buffersink_get_time_base",
          "new_api": null,
          "old_text": "av_buffersink_get_time_base(filter)",
          "new_text": null,
          "old_line_content": "                AVRational tb = av_buffersink_get_time_base(filter);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(filtered_frame->pts, tb,\n                                                    AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "                ost->last_filter_pts = av_rescale_q(filtered_frame->pts, tb,",
          "new_line_content": "            if (ost->finished) {",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"filter_raw -> pts:%s pts_time:%s time_base:%d/%d\\n\",\n                           av_ts2str(filtered_frame->pts),\n                           av_ts2timestr(filtered_frame->pts, &tb),\n                           tb.num, tb.den)",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_INFO, \"filter_raw -> pts:%s pts_time:%s time_base:%d/%d\\n\",",
          "new_line_content": "            if (filtered_frame->pts != AV_NOPTS_VALUE) {",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost))",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "av_buffersink_get_type",
          "new_api": null,
          "old_text": "av_buffersink_get_type(filter)",
          "new_text": null,
          "old_line_content": "            switch (av_buffersink_get_type(filter)) {",
          "new_line_content": "                if (debug_ts)",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "do_video_out",
          "new_api": null,
          "old_text": "do_video_out(of, ost, filtered_frame)",
          "new_text": null,
          "old_line_content": "                do_video_out(of, ost, filtered_frame);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR,\n                           \"Audio filter graph output is not normalized and encoder does not support parameter changes\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_ERROR,",
          "new_line_content": "                    enc->sample_aspect_ratio = filtered_frame->sample_aspect_ratio;",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "do_audio_out",
          "new_api": null,
          "old_text": "do_audio_out(of, ost, filtered_frame)",
          "new_text": null,
          "old_line_content": "                do_audio_out(of, ost, filtered_frame);",
          "new_line_content": "            case AVMEDIA_TYPE_AUDIO:",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(0)",
          "new_text": null,
          "old_line_content": "                av_assert0(0);",
          "new_line_content": "                           \"Audio filter graph output is not normalized and encoder does not support parameter changes\\n\");",
          "content_same": false
        },
        {
          "line": 3373,
          "old_api": "process_input_packet",
          "new_api": null,
          "old_text": "process_input_packet(ist, NULL, 1)",
          "new_text": null,
          "old_line_content": "            ret = process_input_packet(ist, NULL, 1);",
          "new_line_content": "        InputStream *ist = ifile->streams[i];",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(ist->nb_samples,\n                                              (AVRational){ 1, ist->dec_ctx->sample_rate},\n                                              ist->st->time_base)",
          "new_text": null,
          "old_line_content": "                dur.duration   = av_rescale_q(ist->nb_samples,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "av_thread_message_queue_send",
          "new_api": null,
          "old_text": "av_thread_message_queue_send(ifile->audio_duration_queue, &dur, 0)",
          "new_text": null,
          "old_line_content": "                av_thread_message_queue_send(ifile->audio_duration_queue, &dur, 0);",
          "new_line_content": "                LastFrameDuration dur;",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "    uint64_t video_size = 0, audio_size = 0, extra_size = 0, other_size = 0;",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "av_rescale_q_rnd",
          "new_api": null,
          "old_text": "av_rescale_q_rnd(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q,\n                                       AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX)",
          "new_text": null,
          "old_line_content": "    int64_t pkt_dts = av_rescale_q_rnd(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3404,
          "old_api": "av_rescale_q_rnd",
          "new_api": null,
          "old_text": "av_rescale_q_rnd(pkt->dts + (1LL<<ist->st->pts_wrap_bits),\n                                            ist->st->time_base, AV_TIME_BASE_Q,\n                                            AV_ROUND_NEAR_INF|AV_ROUND_PASS_MINMAX)",
          "new_text": null,
          "old_line_content": "        int64_t wrap_dts = av_rescale_q_rnd(pkt->dts + (1LL<<ist->st->pts_wrap_bits),",
          "new_line_content": "    const int fmt_is_discont = ifile->ctx->iformat->flags & AVFMT_TS_DISCONT;",
          "content_same": false
        },
        {
          "line": 3407,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(pkt_dts - ist->next_dts)",
          "new_text": null,
          "old_line_content": "        if (FFABS(wrap_dts - ist->next_dts) < FFABS(pkt_dts - ist->next_dts)/10)",
          "new_line_content": "                                       AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"video:%1.0fkB audio:%1.0fkB subtitle:%1.0fkB other streams:%1.0fkB global headers:%1.0fkB muxing overhead: \",\n           video_size / 1024.0,\n           audio_size / 1024.0,\n           subtitle_size / 1024.0,\n           other_size / 1024.0,\n           extra_size / 1024.0)",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_INFO, \"video:%1.0fkB audio:%1.0fkB subtitle:%1.0fkB other streams:%1.0fkB global headers:%1.0fkB muxing overhead: \",",
          "new_line_content": "            != AV_CODEC_FLAG_PASS1)",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(ist->pts, ist->dts)",
          "new_text": null,
          "old_line_content": "                pkt_dts + AV_TIME_BASE/10 < FFMAX(ist->pts, ist->dts)) {",
          "new_line_content": "            disable_discontinuity_correction = 0;",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG,\n                       \"timestamp discontinuity for stream #%d:%d \"\n                       \"(id=%d, type=%s): %\"PRId64\", new offset= %\"PRId64\"\\n\",\n                       ist->file_index, ist->st->index, ist->st->id,\n                       av_get_media_type_string(ist->par->codec_type),\n                       delta, ifile->ts_offset_discont)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"unknown\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"unknown\");",
          "new_line_content": "           audio_size / 1024.0,",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_INFO, \"\\n\");",
          "new_line_content": "           subtitle_size / 1024.0,",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": null,
          "old_line_content": "                pkt->dts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "new_line_content": "                ifile->ts_offset_discont -= delta;",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": null,
          "old_line_content": "                    pkt->pts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "new_line_content": "                       \"timestamp discontinuity for stream #%d:%d \"",
          "content_same": false
        },
        {
          "line": 3429,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"DTS %\"PRId64\", next:%\"PRId64\" st:%d invalid dropping\\n\", pkt->dts, ist->next_dts, pkt->stream_index)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_WARNING, \"DTS %\"PRId64\", next:%\"PRId64\" st:%d invalid dropping\\n\", pkt->dts, ist->next_dts, pkt->stream_index);",
          "new_line_content": "                       delta, ifile->ts_offset_discont);",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "                int64_t pkt_pts = av_rescale_q(pkt->pts, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Input stream #%d:%d (%s): \",\n                   i, j, av_get_media_type_string(type))",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"  Input stream #%d:%d (%s): \",",
          "new_line_content": "        for (j = 0; j < f->nb_streams; j++) {",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "av_get_media_type_string",
          "new_api": null,
          "old_text": "av_get_media_type_string(type)",
          "new_text": null,
          "old_line_content": "                   i, j, av_get_media_type_string(type));",
          "new_line_content": "            InputStream *ist = f->streams[j];",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" packets read (%\"PRIu64\" bytes); \",\n                   ist->nb_packets, ist->data_size)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" packets read (%\"PRIu64\" bytes); \",",
          "new_line_content": "            enum AVMediaType type = ist->par->codec_type;",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" frames decoded\",\n                       ist->frames_decoded)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" frames decoded\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(delta)",
          "new_text": null,
          "old_line_content": "        if (FFABS(delta) > 1LL * dts_delta_threshold * AV_TIME_BASE) {",
          "new_line_content": "                    pkt->pts = AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG,\n                   \"Inter stream timestamp discontinuity %\"PRId64\", new offset= %\"PRId64\"\\n\",\n                   delta, ifile->ts_offset_discont)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_DEBUG,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"; \")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"; \");",
          "new_line_content": "                   ist->nb_packets, ist->data_size);",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": null,
          "old_line_content": "            pkt->dts -= av_rescale_q(delta, AV_TIME_BASE_Q, ist->st->time_base);",
          "new_line_content": "               fmt_is_discont && ifile->last_ts != AV_NOPTS_VALUE) {",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "    ifile->last_ts = av_rescale_q(pkt->dts, ist->st->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "                   delta, ifile->ts_offset_discont);",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(ifile->ts_offset_discont, AV_TIME_BASE_Q,\n                                  ist->st->time_base)",
          "new_text": null,
          "old_line_content": "    int64_t offset = av_rescale_q(ifile->ts_offset_discont, AV_TIME_BASE_Q,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"Output file #%d (%s):\\n\",\n               i, of->url)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"Output file #%d (%s):\\n\",",
          "new_line_content": "               total_packets, total_size);",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "atomic_load",
          "new_api": null,
          "old_text": "atomic_load(&ost->packets_written)",
          "new_text": null,
          "old_line_content": "            total_packets += atomic_load(&ost->packets_written);",
          "new_line_content": "               i, of->url);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Output stream #%d:%d (%s): \",\n                   i, j, av_get_media_type_string(type))",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"  Output stream #%d:%d (%s): \",",
          "new_line_content": "        for (j = 0; j < of->nb_streams; j++) {",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "av_get_media_type_string",
          "new_api": null,
          "old_text": "av_get_media_type_string(type)",
          "new_text": null,
          "old_line_content": "                   i, j, av_get_media_type_string(type));",
          "new_line_content": "            OutputStream *ost = of->streams[j];",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" frames encoded\",\n                       ost->frames_encoded)",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_VERBOSE, \"%\"PRIu64\" frames encoded\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "ts_discontinuity_detect",
          "new_api": null,
          "old_text": "ts_discontinuity_detect(ifile, ist, pkt)",
          "new_text": null,
          "old_line_content": "        ts_discontinuity_detect(ifile, ist, pkt);",
          "new_line_content": "    if (pkt->pts != AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \" (%\"PRIu64\" samples)\", ost->samples_encoded)",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_VERBOSE, \" (%\"PRIu64\" samples)\", ost->samples_encoded);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "atomic_load",
          "new_api": null,
          "old_text": "atomic_load(&ost->packets_written)",
          "new_text": null,
          "old_line_content": "                   atomic_load(&ost->packets_written), ost->data_size_mux);",
          "new_line_content": "                       ost->frames_encoded);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) muxed\\n\",\n               total_packets, total_size)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_VERBOSE, \"  Total: %\"PRIu64\" packets (%\"PRIu64\" bytes) muxed\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": "ifile_get_packet",
          "new_api": null,
          "old_text": "ifile_get_packet(ifile, &pkt)",
          "new_text": null,
          "old_line_content": "    ret = ifile_get_packet(ifile, &pkt);",
          "new_line_content": "    InputFile *ifile = input_files[file_index];",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"(check -ss / -t / -frames parameters if used)\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"(check -ss / -t / -frames parameters if used)\\n\");",
          "new_line_content": "               total_packets, total_size);",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "    if (ret == AVERROR(EAGAIN)) {",
          "new_line_content": "    InputStream *ist;",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": "decode_flush",
          "new_api": null,
          "old_text": "decode_flush(ifile)",
          "new_text": null,
          "old_line_content": "        decode_flush(ifile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "of_filesize",
          "new_api": null,
          "old_text": "of_filesize(output_files[0])",
          "new_text": null,
          "old_line_content": "    int64_t total_size = of_filesize(output_files[0]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": "print_error",
          "new_api": null,
          "old_text": "print_error(is->url, ret)",
          "new_text": null,
          "old_line_content": "            print_error(is->url, ret);",
          "new_line_content": "    if (ret == 1) {",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": "process_input_packet",
          "new_api": null,
          "old_text": "process_input_packet(ist, NULL, 0)",
          "new_text": null,
          "old_line_content": "                ret = process_input_packet(ist, NULL, 0);",
          "new_line_content": "            if (exit_on_error)",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "            for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "            if (ist->processing_needed) {",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "of_output_packet",
          "new_api": null,
          "old_text": "of_output_packet(of, ost->pkt, ost, 1)",
          "new_text": null,
          "old_line_content": "                    of_output_packet(of, ost->pkt, ost, 1);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EAGAIN);",
          "new_line_content": "                    OutputFile *of = output_files[ost->file_index];",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "av_bprint_init",
          "new_api": null,
          "old_text": "av_bprint_init(&buf, 0, AV_BPRINT_SIZE_AUTOMATIC)",
          "new_text": null,
          "old_line_content": "    av_bprint_init(&buf, 0, AV_BPRINT_SIZE_AUTOMATIC);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "av_bprint_init",
          "new_api": null,
          "old_text": "av_bprint_init(&buf_script, 0, AV_BPRINT_SIZE_AUTOMATIC)",
          "new_text": null,
          "old_line_content": "    av_bprint_init(&buf_script, 0, AV_BPRINT_SIZE_AUTOMATIC);",
          "new_line_content": "        last_time = cur_time;",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "reset_eagain",
          "new_api": null,
          "old_text": "reset_eagain()",
          "new_text": null,
          "old_line_content": "    reset_eagain();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "atomic_load",
          "new_api": null,
          "old_text": "atomic_load(&ost->packets_written)",
          "new_text": null,
          "old_line_content": "            uint64_t frame_number = atomic_load(&ost->packets_written);",
          "new_line_content": "        if (vid && ost->st->codecpar->codec_type == AVMEDIA_TYPE_VIDEO) {",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"frame=%5\"PRId64\" fps=%3.*f q=%3.1f \",\n                     frame_number, fps < 9.95, fps, q)",
          "new_text": null,
          "old_line_content": "            av_bprintf(&buf, \"frame=%5\"PRId64\" fps=%3.*f q=%3.1f \",",
          "new_line_content": "                       ost->file_index, ost->index, q);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"frame=%\"PRId64\"\\n\", frame_number)",
          "new_text": null,
          "old_line_content": "            av_bprintf(&buf_script, \"frame=%\"PRId64\"\\n\", frame_number);",
          "new_line_content": "        if (!vid && ost->st->codecpar->codec_type == AVMEDIA_TYPE_VIDEO) {",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"fps=%.2f\\n\", fps)",
          "new_text": null,
          "old_line_content": "            av_bprintf(&buf_script, \"fps=%.2f\\n\", fps);",
          "new_line_content": "            float fps;",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "av_packet_get_side_data",
          "new_api": null,
          "old_text": "av_packet_get_side_data(pkt, src_sd->type, NULL)",
          "new_text": null,
          "old_line_content": "            if (av_packet_get_side_data(pkt, src_sd->type, NULL))",
          "new_line_content": "        for (i = 0; i < ist->st->nb_side_data; i++) {",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "av_packet_new_side_data",
          "new_api": null,
          "old_text": "av_packet_new_side_data(pkt, src_sd->type, src_sd->size)",
          "new_text": null,
          "old_line_content": "            dst_data = av_packet_new_side_data(pkt, src_sd->type, src_sd->size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                report_and_exit(AVERROR(ENOMEM));",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 3568,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"demuxer+ffmpeg -> ist_index:%d:%d type:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s duration:%s duration_time:%s off:%s off_time:%s\\n\",\n               ifile->index, pkt->stream_index,\n               av_get_media_type_string(ist->par->codec_type),\n               av_ts2str(pkt->pts), av_ts2timestr(pkt->pts, &ist->st->time_base),\n               av_ts2str(pkt->dts), av_ts2timestr(pkt->dts, &ist->st->time_base),\n               av_ts2str(pkt->duration), av_ts2timestr(pkt->duration, &ist->st->time_base),\n               av_ts2str(input_files[ist->file_index]->ts_offset),\n               av_ts2timestr(input_files[ist->file_index]->ts_offset, &AV_TIME_BASE_Q))",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"demuxer+ffmpeg -> ist_index:%d:%d type:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s duration:%s duration_time:%s off:%s off_time:%s\\n\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": "av_get_media_type_string",
          "new_api": null,
          "old_text": "av_get_media_type_string(ist->par->codec_type)",
          "new_text": null,
          "old_line_content": "               av_get_media_type_string(ist->par->codec_type),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "av_ts2timestr",
          "new_api": null,
          "old_text": "av_ts2timestr(pkt->pts, &ist->st->time_base)",
          "new_text": null,
          "old_line_content": "               av_ts2str(pkt->pts), av_ts2timestr(pkt->pts, &ist->st->time_base),",
          "new_line_content": "    // detect and try to correct for timestamp discontinuities",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"PSNR=\")",
          "new_text": null,
          "old_line_content": "                av_bprintf(&buf, \"PSNR=\");",
          "new_line_content": "            if (enc && (enc->flags & AV_CODEC_FLAG_PSNR) &&",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "av_ts2timestr",
          "new_api": null,
          "old_text": "av_ts2timestr(pkt->duration, &ist->st->time_base)",
          "new_text": null,
          "old_line_content": "               av_ts2str(pkt->duration), av_ts2timestr(pkt->duration, &ist->st->time_base),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "av_ts2str",
          "new_api": null,
          "old_text": "av_ts2str(input_files[ist->file_index]->ts_offset)",
          "new_text": null,
          "old_line_content": "               av_ts2str(input_files[ist->file_index]->ts_offset),",
          "new_line_content": "    if (debug_ts) {",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": "av_packet_free",
          "new_api": null,
          "old_text": "av_packet_free(&pkt)",
          "new_text": null,
          "old_line_content": "    av_packet_free(&pkt);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "psnr",
          "new_api": null,
          "old_text": "psnr(error / scale)",
          "new_text": null,
          "old_line_content": "                    p = psnr(error / scale);",
          "new_line_content": "                        error = ost->error[j];",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"%c:%2.2f \", type[j], p)",
          "new_text": null,
          "old_line_content": "                    av_bprintf(&buf, \"%c:%2.2f \", type[j], p);",
          "new_line_content": "                        scale = enc->width * enc->height * 255.0 * 255.0;",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"stream_%d_%d_psnr_%c=%2.2f\\n\",\n                               ost->file_index, ost->index, type[j] | 32, p)",
          "new_text": null,
          "old_line_content": "                    av_bprintf(&buf_script, \"stream_%d_%d_psnr_%c=%2.2f\\n\",",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "psnr",
          "new_api": null,
          "old_text": "psnr(error_sum / scale_sum)",
          "new_text": null,
          "old_line_content": "                p = psnr(error_sum / scale_sum);",
          "new_line_content": "                    error_sum += error;",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "psnr",
          "new_api": null,
          "old_text": "psnr(error_sum / scale_sum)",
          "new_text": null,
          "old_line_content": "                av_bprintf(&buf, \"*:%2.2f \", psnr(error_sum / scale_sum));",
          "new_line_content": "                    scale_sum += scale;",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "avfilter_graph_request_oldest",
          "new_api": null,
          "old_text": "avfilter_graph_request_oldest(graph->graph)",
          "new_text": null,
          "old_line_content": "    ret = avfilter_graph_request_oldest(graph->graph);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "reap_filters",
          "new_api": null,
          "old_text": "reap_filters(0)",
          "new_text": null,
          "old_line_content": "        return reap_filters(0);",
          "new_line_content": "    int nb_requests, nb_requests_max = 0;",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": "reap_filters",
          "new_api": null,
          "old_text": "reap_filters(1)",
          "new_text": null,
          "old_line_content": "        ret = reap_filters(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(pts)",
          "new_text": null,
          "old_line_content": "    secs = FFABS(pts) / AV_TIME_BASE;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(pts)",
          "new_text": null,
          "old_line_content": "    us = FFABS(pts) % AV_TIME_BASE;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "    if (ret != AVERROR(EAGAIN))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": "av_buffersrc_get_nb_failed_requests",
          "new_api": null,
          "old_text": "av_buffersrc_get_nb_failed_requests(ifilter->filter)",
          "new_text": null,
          "old_line_content": "        nb_requests = av_buffersrc_get_nb_failed_requests(ifilter->filter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"size=N/A time=\")",
          "new_text": null,
          "old_line_content": "    if (total_size < 0) av_bprintf(&buf, \"size=N/A time=\");",
          "new_line_content": "    hours = mins / 60;",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"size=%8.0fkB time=\", total_size / 1024.0)",
          "new_text": null,
          "old_line_content": "    else                av_bprintf(&buf, \"size=%8.0fkB time=\", total_size / 1024.0);",
          "new_line_content": "    mins %= 60;",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"N/A \")",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf, \"N/A \");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"%s%02d:%02d:%02d.%02d \",\n                   hours_sign, hours, mins, secs, (100 * us) / AV_TIME_BASE)",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf, \"%s%02d:%02d:%02d.%02d \",",
          "new_line_content": "    speed = t != 0.0 ? (double)pts / AV_TIME_BASE / t : -1;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"bitrate=N/A\\n\")",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf_script, \"bitrate=N/A\\n\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \"bitrate=%6.1fkbits/s\", bitrate)",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf, \"bitrate=%6.1fkbits/s\", bitrate);",
          "new_line_content": "                   hours_sign, hours, mins, secs, (100 * us) / AV_TIME_BASE);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"bitrate=%6.1fkbits/s\\n\", bitrate)",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf_script, \"bitrate=%6.1fkbits/s\\n\", bitrate);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"out_time=N/A\\n\")",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf_script, \"out_time=N/A\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "choose_output",
          "new_api": null,
          "old_text": "choose_output()",
          "new_text": null,
          "old_line_content": "    ost = choose_output();",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "got_eagain",
          "new_api": null,
          "old_text": "got_eagain()",
          "new_text": null,
          "old_line_content": "        if (got_eagain()) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"out_time=%s%02d:%02d:%02d.%06d\\n\",\n                   hours_sign, hours, mins, secs, us)",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf_script, \"out_time=%s%02d:%02d:%02d.%06d\\n\",",
          "new_line_content": "    if (pts == AV_NOPTS_VALUE) {",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "reset_eagain",
          "new_api": null,
          "old_text": "reset_eagain()",
          "new_text": null,
          "old_line_content": "            reset_eagain();",
          "new_line_content": "    OutputStream *ost;",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "av_usleep",
          "new_api": null,
          "old_text": "av_usleep(10000)",
          "new_text": null,
          "old_line_content": "            av_usleep(10000);",
          "new_line_content": "    InputStream  *ist = NULL;",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "ifilter_has_all_input_formats",
          "new_api": null,
          "old_text": "ifilter_has_all_input_formats(ost->filter->graph)",
          "new_text": null,
          "old_line_content": "        if (ifilter_has_all_input_formats(ost->filter->graph)) {",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf, \" speed=N/A\")",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf, \" speed=N/A\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "av_bprintf",
          "new_api": null,
          "old_text": "av_bprintf(&buf_script, \"speed=N/A\\n\")",
          "new_text": null,
          "old_line_content": "        av_bprintf(&buf_script, \"speed=N/A\\n\");",
          "new_line_content": "    if (nb_frames_dup || nb_frames_drop)",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "configure_filtergraph",
          "new_api": null,
          "old_text": "configure_filtergraph(ost->filter->graph)",
          "new_text": null,
          "old_line_content": "            ret = configure_filtergraph(ost->filter->graph);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\");",
          "new_line_content": "        return AVERROR_EOF;",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "av_log_get_level",
          "new_api": null,
          "old_text": "av_log_get_level()",
          "new_text": null,
          "old_line_content": "        if (print_stats==1 && AV_LOG_INFO > av_log_get_level()) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"%s    %c\", buf.str, end)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_INFO, \"%s    %c\", buf.str, end);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stderr)",
          "new_text": null,
          "old_line_content": "        fflush(stderr);",
          "new_line_content": "    if (print_stats || is_last_report) {",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(buf_script.len, buf_script.size - 1)",
          "new_text": null,
          "old_line_content": "                   FFMIN(buf_script.len, buf_script.size - 1));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "av_bprint_finalize",
          "new_api": null,
          "old_text": "av_bprint_finalize(&buf_script, NULL)",
          "new_text": null,
          "old_line_content": "        av_bprint_finalize(&buf_script, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR,\n                       \"Error closing progress log, loss of information possible: %s\\n\", av_err2str(ret))",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_ERROR,",
          "new_line_content": "                   is_last_report ? \"end\" : \"continue\");",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": "av_buffersink_get_type",
          "new_api": null,
          "old_text": "av_buffersink_get_type(ost->filter->filter)",
          "new_text": null,
          "old_line_content": "        if (av_buffersink_get_type(ost->filter->filter) == AVMEDIA_TYPE_AUDIO)",
          "new_line_content": "         *",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "init_output_stream_wrapper",
          "new_api": null,
          "old_text": "init_output_stream_wrapper(ost, NULL, 1)",
          "new_text": null,
          "old_line_content": "            init_output_stream_wrapper(ost, NULL, 1);",
          "new_line_content": "         * In other words, if avfilter_graph_request_oldest would not make",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "transcode_from_filter",
          "new_api": null,
          "old_text": "transcode_from_filter(ost->filter->graph, &ist)",
          "new_text": null,
          "old_line_content": "        if ((ret = transcode_from_filter(ost->filter->graph, &ist)) < 0)",
          "new_line_content": "         * av_buffersink_get_samples useless (by just causing the return",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "av_channel_layout_copy",
          "new_api": null,
          "old_text": "av_channel_layout_copy(&ifilter->ch_layout, &par->ch_layout)",
          "new_text": null,
          "old_line_content": "    ret = av_channel_layout_copy(&ifilter->ch_layout, &par->ch_layout);",
          "new_line_content": "    // We never got any input. Set a fake format, which will",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(ist)",
          "new_text": null,
          "old_line_content": "        av_assert0(ist);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": "process_input",
          "new_api": null,
          "old_text": "process_input(ist->file_index)",
          "new_text": null,
          "old_line_content": "    ret = process_input(ist->file_index);",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "    if (ret == AVERROR(EAGAIN)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "SQFRAME",
          "new_api": null,
          "old_text": "SQFRAME(NULL)",
          "new_text": null,
          "old_line_content": "            sq_send(of->sq_encode, ost->sq_idx_encode, SQFRAME(NULL));",
          "new_line_content": "static void flush_encoders(void)",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "reap_filters",
          "new_api": null,
          "old_text": "reap_filters(0)",
          "new_text": null,
          "old_line_content": "    return reap_filters(0);",
          "new_line_content": "            ost->unavailable = 1;",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "ost_iter",
          "new_api": null,
          "old_text": "ost_iter(ost)",
          "new_text": null,
          "old_line_content": "    for (OutputStream *ost = ost_iter(NULL); ost; ost = ost_iter(ost)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING,\n                   \"Finishing stream %d:%d without any data written to it.\\n\",\n                   ost->file_index, ost->st->index)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING,",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "transcode_init",
          "new_api": null,
          "old_text": "transcode_init()",
          "new_text": null,
          "old_line_content": "    ret = transcode_init();",
          "new_line_content": "static int transcode(void)",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_INFO, \"Press [q] to stop, [?] for help\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_INFO, \"Press [q] to stop, [?] for help\\n\");",
          "new_line_content": "    int64_t total_packets_written = 0;",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "av_gettime_relative",
          "new_api": null,
          "old_text": "av_gettime_relative()",
          "new_text": null,
          "old_line_content": "    timer_start = av_gettime_relative();",
          "new_line_content": "    if (ret < 0)",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "ifilter_parameters_from_codecpar",
          "new_api": null,
          "old_text": "ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par)",
          "new_text": null,
          "old_line_content": "                        ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par) < 0) {",
          "new_line_content": "                   ost->file_index, ost->st->index);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Error copying paramerets from input stream\\n\")",
          "new_text": null,
          "old_line_content": "                        av_log(NULL, AV_LOG_ERROR, \"Error copying paramerets from input stream\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "                        exit_program(1);",
          "new_line_content": "            if (ost->filter && !fg->graph) {",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "av_gettime_relative",
          "new_api": null,
          "old_text": "av_gettime_relative()",
          "new_text": null,
          "old_line_content": "        int64_t cur_time= av_gettime_relative();",
          "new_line_content": "    if (stdin_interaction) {",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "ifilter_has_all_input_formats",
          "new_api": null,
          "old_text": "ifilter_has_all_input_formats(fg)",
          "new_text": null,
          "old_line_content": "                if (!ifilter_has_all_input_formats(fg))",
          "new_line_content": "                    if (ifilter->format < 0 &&",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "need_output",
          "new_api": null,
          "old_text": "need_output()",
          "new_text": null,
          "old_line_content": "        if (!need_output()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Error configuring filter graph\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(NULL, AV_LOG_ERROR, \"Error configuring filter graph\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "                    exit_program(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_VERBOSE, \"No more output streams to write to, finishing.\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_VERBOSE, \"No more output streams to write to, finishing.\\n\");",
          "new_line_content": "        /* if 'q' pressed, exits */",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "of_output_packet",
          "new_api": null,
          "old_text": "of_output_packet(of, ost->pkt, ost, 1)",
          "new_text": null,
          "old_line_content": "                of_output_packet(of, ost->pkt, ost, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "transcode_step",
          "new_api": null,
          "old_text": "transcode_step()",
          "new_text": null,
          "old_line_content": "        ret = transcode_step();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "submit_encode_frame",
          "new_api": null,
          "old_text": "submit_encode_frame(of, ost, NULL)",
          "new_text": null,
          "old_line_content": "        ret = submit_encode_frame(of, ost, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "ist_iter",
          "new_api": null,
          "old_text": "ist_iter(ist)",
          "new_text": null,
          "old_line_content": "    for (ist = ist_iter(NULL); ist; ist = ist_iter(ist)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": "process_input_packet",
          "new_api": null,
          "old_text": "process_input_packet(ist, NULL, 0)",
          "new_text": null,
          "old_line_content": "            process_input_packet(ist, NULL, 0);",
          "new_line_content": "        /* dump report by using the output first video and audio streams */",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": "flush_encoders",
          "new_api": null,
          "old_text": "flush_encoders()",
          "new_text": null,
          "old_line_content": "    flush_encoders();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": "of_write_trailer",
          "new_api": null,
          "old_text": "of_write_trailer(output_files[i])",
          "new_text": null,
          "old_line_content": "        ret = of_write_trailer(output_files[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "av_gettime_relative",
          "new_api": null,
          "old_text": "av_gettime_relative()",
          "new_text": null,
          "old_line_content": "    print_report(1, timer_start, av_gettime_relative());",
          "new_line_content": "    for (i = 0; i < nb_output_files; i++) {",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "atomic_load",
          "new_api": null,
          "old_text": "atomic_load(&ost->packets_written)",
          "new_text": null,
          "old_line_content": "        packets_written = atomic_load(&ost->packets_written);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"Empty output on stream %d.\\n\", i)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_FATAL, \"Empty output on stream %d.\\n\", i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "            exit_program(1);",
          "new_line_content": "    /* close each encoder */",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(start_time, AV_TIME_BASE_Q, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "    int64_t ost_tb_start_time = av_rescale_q(start_time, AV_TIME_BASE_Q, ost->mux_timebase);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref(opkt)",
          "new_text": null,
          "old_line_content": "    av_packet_unref(opkt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_FATAL, \"Empty output\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_FATAL, \"Empty output\\n\");",
          "new_line_content": "        if (!packets_written && (abort_on_flags & ABORT_ON_FLAG_EMPTY_OUTPUT_STREAM)) {",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "of_output_packet",
          "new_api": null,
          "old_text": "of_output_packet(of, opkt, ost, 1)",
          "new_text": null,
          "old_line_content": "        of_output_packet(of, opkt, ost, 1);",
          "new_line_content": "    int64_t start_time = (of->start_time == AV_NOPTS_VALUE) ? 0 : of->start_time;",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": "hw_device_free_all",
          "new_api": null,
          "old_text": "hw_device_free_all()",
          "new_text": null,
          "old_line_content": "    hw_device_free_all();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(ost->ts_copy_start, AV_TIME_BASE_Q, ist->st->time_base)",
          "new_text": null,
          "old_line_content": "            pkt->pts < av_rescale_q(ost->ts_copy_start, AV_TIME_BASE_Q, ist->st->time_base))",
          "new_line_content": "    if (!ost->streamcopy_started && !(pkt->flags & AV_PKT_FLAG_KEY) &&",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": "av_gettime_relative",
          "new_api": null,
          "old_text": "av_gettime_relative()",
          "new_text": null,
          "old_line_content": "    BenchmarkTimeStamps time_stamps = { av_gettime_relative() };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &rusage)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_SELF, &rusage);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "close_output_stream",
          "new_api": null,
          "old_text": "close_output_stream(ost)",
          "new_text": null,
          "old_line_content": "        close_output_stream(ost);",
          "new_line_content": "            ist->pts < ost->ts_copy_start :",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": "GetCurrentProcess",
          "new_api": null,
          "old_text": "GetCurrentProcess()",
          "new_text": null,
          "old_line_content": "    proc = GetCurrentProcess();",
          "new_line_content": "    time_stamps.user_usec =",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "GetProcessTimes",
          "new_api": null,
          "old_text": "GetProcessTimes(proc, &c, &e, &k, &u)",
          "new_text": null,
          "old_line_content": "    GetProcessTimes(proc, &c, &e, &k, &u);",
          "new_line_content": "        (rusage.ru_utime.tv_sec * 1000000LL) + rusage.ru_utime.tv_usec;",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "close_output_stream",
          "new_api": null,
          "old_text": "close_output_stream(ost)",
          "new_text": null,
          "old_line_content": "            close_output_stream(ost);",
          "new_line_content": "    if (f->recording_time != INT64_MAX) {",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": "av_packet_ref",
          "new_api": null,
          "old_text": "av_packet_ref(opkt, pkt)",
          "new_text": null,
          "old_line_content": "    if (av_packet_ref(opkt, pkt) < 0)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "        exit_program(1);",
          "new_line_content": "        if (ist->pts >= f->recording_time + start_time) {",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->pts, ist->st->time_base, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "        opkt->pts = av_rescale_q(pkt->pts, ist->st->time_base, ost->mux_timebase) - ost_tb_start_time;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &rusage)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_SELF, &rusage);",
          "new_line_content": "    return time_stamps;",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "av_get_audio_frame_duration2",
          "new_api": null,
          "old_text": "av_get_audio_frame_duration2(ist->par, pkt->size)",
          "new_text": null,
          "old_line_content": "        int duration = av_get_audio_frame_duration2(ist->par, pkt->size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "av_rescale_delta",
          "new_api": null,
          "old_text": "av_rescale_delta(ist->st->time_base, pkt->dts,\n                                    (AVRational){1, ist->par->sample_rate}, duration,\n                                    &ist->filter_in_rescale_delta_last, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "        opkt->dts = av_rescale_delta(ist->st->time_base, pkt->dts,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3852,
          "old_api": "GetCurrentProcess",
          "new_api": null,
          "old_text": "GetCurrentProcess()",
          "new_text": null,
          "old_line_content": "    proc = GetCurrentProcess();",
          "new_line_content": "#if HAVE_GETRUSAGE && HAVE_STRUCT_RUSAGE_RU_MAXRSS",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->dts, ist->st->time_base, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "        opkt->dts = av_rescale_q(pkt->dts, ist->st->time_base, ost->mux_timebase);",
          "new_line_content": "            duration = ist->par->frame_size;",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->duration, ist->st->time_base, ost->mux_timebase)",
          "new_text": null,
          "old_line_content": "    opkt->duration = av_rescale_q(pkt->duration, ist->st->time_base, ost->mux_timebase);",
          "new_line_content": "                                    &ist->filter_in_rescale_delta_last, ost->mux_timebase);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "of_output_packet",
          "new_api": null,
          "old_text": "of_output_packet(of, opkt, ost, 0)",
          "new_text": null,
          "old_line_content": "    of_output_packet(of, opkt, ost, 0);",
          "new_line_content": "        opkt->pts = opkt->dts - ost_tb_start_time;",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": "init_dynload",
          "new_api": null,
          "old_text": "init_dynload()",
          "new_text": null,
          "old_line_content": "    init_dynload();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "register_exit",
          "new_api": null,
          "old_text": "register_exit(ffmpeg_cleanup)",
          "new_text": null,
          "old_line_content": "    register_exit(ffmpeg_cleanup);",
          "new_line_content": "int main(int argc, char **argv)",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "setvbuf",
          "new_api": null,
          "old_text": "setvbuf(stderr,NULL,_IONBF,0)",
          "new_text": null,
          "old_line_content": "    setvbuf(stderr,NULL,_IONBF,0); /* win32 runtime needs this */",
          "new_line_content": "    int ret;",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "av_log_set_flags",
          "new_api": null,
          "old_text": "av_log_set_flags(AV_LOG_SKIP_REPEATED)",
          "new_text": null,
          "old_line_content": "    av_log_set_flags(AV_LOG_SKIP_REPEATED);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "        exit_program(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "avdevice_register_all",
          "new_api": null,
          "old_text": "avdevice_register_all()",
          "new_text": null,
          "old_line_content": "    avdevice_register_all();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, exit_on_error ? AV_LOG_FATAL : AV_LOG_WARNING,\n                   \"%s: corrupt decoded frame in stream %d\\n\", input_files[ist->file_index]->ctx->url, ist->st->index)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, exit_on_error ? AV_LOG_FATAL : AV_LOG_WARNING,",
          "new_line_content": "        decode_error_stat[ret<0] ++;",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "avformat_network_init",
          "new_api": null,
          "old_text": "avformat_network_init()",
          "new_text": null,
          "old_line_content": "    avformat_network_init();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "show_usage",
          "new_api": null,
          "old_text": "show_usage()",
          "new_text": null,
          "old_line_content": "        show_usage();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"Use -h to get full help or, even better, run 'man %s'\\n\", program_name)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_WARNING, \"Use -h to get full help or, even better, run 'man %s'\\n\", program_name);",
          "new_line_content": "    /* parse options and open all input/output files */",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": "get_benchmark_time_stamps",
          "new_api": null,
          "old_text": "get_benchmark_time_stamps()",
          "new_text": null,
          "old_line_content": "    current_time = ti = get_benchmark_time_stamps();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "transcode",
          "new_api": null,
          "old_text": "transcode()",
          "new_text": null,
          "old_line_content": "    if (transcode() < 0)",
          "new_line_content": "    /* file converter / grab */",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(1)",
          "new_text": null,
          "old_line_content": "        exit_program(1);",
          "new_line_content": "    if (nb_output_files <= 0) {",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "get_benchmark_time_stamps",
          "new_api": null,
          "old_text": "get_benchmark_time_stamps()",
          "new_text": null,
          "old_line_content": "        current_time = get_benchmark_time_stamps();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%\"PRIu64\" frames successfully decoded, %\"PRIu64\" decoding errors\\n\",\n           decode_error_stat[0], decode_error_stat[1])",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%\"PRIu64\" frames successfully decoded, %\"PRIu64\" decoding errors\\n\",",
          "new_line_content": "        utime = current_time.user_usec - ti.user_usec;",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "av_channel_layout_compare",
          "new_api": null,
          "old_text": "av_channel_layout_compare(&ifilter->ch_layout, &frame->ch_layout)",
          "new_text": null,
          "old_line_content": "                       av_channel_layout_compare(&ifilter->ch_layout, &frame->ch_layout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "exit_program",
          "new_api": null,
          "old_text": "exit_program(received_nb_signals ? 255 : main_return_code)",
          "new_text": null,
          "old_line_content": "    exit_program(received_nb_signals ? 255 : main_return_code);",
          "new_line_content": "               utime / 1000000.0, stime / 1000000.0, rtime / 1000000.0);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "av_frame_get_side_data",
          "new_api": null,
          "old_text": "av_frame_get_side_data(frame, AV_FRAME_DATA_DISPLAYMATRIX)",
          "new_text": null,
          "old_line_content": "    if (sd = av_frame_get_side_data(frame, AV_FRAME_DATA_DISPLAYMATRIX)) {",
          "new_line_content": "    if (!ifilter->ist->reinit_filters && fg->graph)",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(sd->data, ifilter->displaymatrix, sizeof(int32_t) * 9)",
          "new_text": null,
          "old_line_content": "        if (!ifilter->displaymatrix || memcmp(sd->data, ifilter->displaymatrix, sizeof(int32_t) * 9))",
          "new_line_content": "        need_reinit = 0;",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "av_frame_clone",
          "new_api": null,
          "old_text": "av_frame_clone(frame)",
          "new_text": null,
          "old_line_content": "            AVFrame *tmp = av_frame_clone(frame);",
          "new_line_content": "        if (ret < 0)",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "av_fifo_write",
          "new_api": null,
          "old_text": "av_fifo_write(ifilter->frame_queue, &tmp, 1)",
          "new_text": null,
          "old_line_content": "            ret = av_fifo_write(ifilter->frame_queue, &tmp, 1);",
          "new_line_content": "    /* (re)init the graph if possible, otherwise buffer the frame and return */",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "configure_filtergraph",
          "new_api": null,
          "old_text": "configure_filtergraph(fg)",
          "new_text": null,
          "old_line_content": "        ret = configure_filtergraph(fg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error reinitializing filters!\\n\");",
          "new_line_content": "        if (ret < 0 && ret != AVERROR_EOF) {",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "av_err2str",
          "new_api": null,
          "old_text": "av_err2str(ret)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Error while filtering: %s\\n\", av_err2str(ret));",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "av_buffersrc_close",
          "new_api": null,
          "old_text": "av_buffersrc_close(ifilter->filter, pts, AV_BUFFERSRC_FLAG_PUSH)",
          "new_text": null,
          "old_line_content": "        ret = av_buffersrc_close(ifilter->filter, pts, AV_BUFFERSRC_FLAG_PUSH);",
          "new_line_content": "static int ifilter_send_eof(InputFilter *ifilter, int64_t pts)",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "ifilter_parameters_from_codecpar",
          "new_api": null,
          "old_text": "ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par)",
          "new_text": null,
          "old_line_content": "            ret = ifilter_parameters_from_codecpar(ifilter, ifilter->ist->par);",
          "new_line_content": "    if (ifilter->filter) {",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR, \"Cannot determine format of input stream %d:%d after EOF\\n\", ifilter->ist->file_index, ifilter->ist->st->index)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR, \"Cannot determine format of input stream %d:%d after EOF\\n\", ifilter->ist->file_index, ifilter->ist->st->index);",
          "new_line_content": "        // the filtergraph was never configured",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "avcodec_send_packet",
          "new_api": null,
          "old_text": "avcodec_send_packet(avctx, pkt)",
          "new_text": null,
          "old_line_content": "        ret = avcodec_send_packet(avctx, pkt);",
          "new_line_content": "static int decode(AVCodecContext *avctx, AVFrame *frame, int *got_frame, AVPacket *pkt)",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "    if (ret < 0 && ret != AVERROR(EAGAIN))",
          "new_line_content": "        // In particular, we don't expect AVERROR(EAGAIN), because we read all",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "av_assert1",
          "new_api": null,
          "old_text": "av_assert1(ist->nb_filters > 0)",
          "new_text": null,
          "old_line_content": "    av_assert1(ist->nb_filters > 0); /* ensure ret is initialized */",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": "ifilter_send_frame",
          "new_api": null,
          "old_text": "ifilter_send_frame(ist->filters[i], decoded_frame, i < ist->nb_filters - 1)",
          "new_text": null,
          "old_line_content": "        ret = ifilter_send_frame(ist->filters[i], decoded_frame, i < ist->nb_filters - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_ERROR,\n                   \"Failed to inject frame into filter network: %s\\n\", av_err2str(ret))",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "update_benchmark",
          "new_api": null,
          "old_text": "update_benchmark(NULL)",
          "new_text": null,
          "old_line_content": "    update_benchmark(NULL);",
          "new_line_content": "                        int *decode_failed)",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "decode",
          "new_api": null,
          "old_text": "decode(avctx, decoded_frame, got_output, pkt)",
          "new_text": null,
          "old_line_content": "    ret = decode(avctx, decoded_frame, got_output, pkt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "update_benchmark",
          "new_api": null,
          "old_text": "update_benchmark(\"decode_audio %d.%d\", ist->file_index, ist->st->index)",
          "new_text": null,
          "old_line_content": "    update_benchmark(\"decode_audio %d.%d\", ist->file_index, ist->st->index);",
          "new_line_content": "    AVFrame *decoded_frame = ist->decoded_frame;",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "check_decode_result",
          "new_api": null,
          "old_text": "check_decode_result(ist, got_output, ret)",
          "new_text": null,
          "old_line_content": "        check_decode_result(ist, got_output, ret);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 113,
      "total_additions": 450,
      "total_deletions": 449,
      "total_api_changes": 1012
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 1012,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          936,
          944,
          945,
          946,
          950,
          951
        ]
      }
    },
    "api_calls_before": 828,
    "api_calls_after": 829,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 2,
      "total_diff_lines": 30
    }
  }
}
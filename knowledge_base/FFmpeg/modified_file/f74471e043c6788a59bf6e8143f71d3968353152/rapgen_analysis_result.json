{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/f74471e043c6788a59bf6e8143f71d3968353152",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/f74471e043c6788a59bf6e8143f71d3968353152/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/f74471e043c6788a59bf6e8143f71d3968353152/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/f74471e043c6788a59bf6e8143f71d3968353152/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1042,
          "old_api": "find_optimal_param",
          "new_api": "FFABS",
          "old_text": "find_optimal_param(2*sum[i], n)",
          "new_text": "FFABS(lt)",
          "old_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "new_line_content": "        sum[0] += FFABS(lt);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "rice_encode_count",
          "new_api": "FFABS",
          "old_text": "rice_encode_count(2*sum[i], n, k)",
          "new_text": "FFABS(rt)",
          "old_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "new_line_content": "        sum[1] += FFABS(rt);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "put_bits_count",
          "new_api": "put_bits",
          "old_text": "put_bits_count(&s->pb)",
          "new_text": "put_bits(&s->pb, 8, s->sr_code[1])",
          "old_line_content": "    crc = av_crc(av_crc07, 0, s->pb.buf, put_bits_count(&s->pb)>>3);",
          "new_line_content": "        put_bits(&s->pb, 8, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "put_bits",
          "new_api": "put_sbits",
          "old_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "output_subframe_constant",
          "new_api": "put_bits",
          "old_text": "output_subframe_constant(s, ch)",
          "new_text": "put_bits(&s->pb, 6, sub->type_code)",
          "old_line_content": "            output_subframe_constant(s, ch);",
          "new_line_content": "        put_bits(&s->pb, 6, sub->type_code);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "encode_residual",
          "new_api": "copy_samples",
          "old_text": "encode_residual(s, ch)",
          "new_text": "copy_samples(s, samples)",
          "old_line_content": "        encode_residual(s, ch);",
          "new_line_content": "    copy_samples(s, samples);",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "init_put_bits",
          "new_api": "channel_decorrelation",
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": "channel_decorrelation(s)",
          "old_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "    channel_decorrelation(s);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "output_frame_footer",
          "new_api": "encode_residual",
          "old_text": "output_frame_footer(s)",
          "new_text": "encode_residual(s, ch)",
          "old_line_content": "    output_frame_footer(s);",
          "new_line_content": "        encode_residual(s, ch);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "encode_residual_v",
          "new_api": "put_bits_count",
          "old_text": "encode_residual_v(s, ch)",
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "            encode_residual_v(s, ch);",
          "new_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "output_frame_footer",
          "new_api": "encode_residual_v",
          "old_text": "output_frame_footer(s)",
          "new_text": "encode_residual_v(s, ch)",
          "old_line_content": "        output_frame_footer(s);",
          "new_line_content": "            encode_residual_v(s, ch);",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "av_log",
          "new_api": "output_frame_footer",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "new_text": "output_frame_footer(s)",
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "new_line_content": "        output_frame_footer(s);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1284,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "        if(sub->type == FLAC_SUBFRAME_CONSTANT) {",
          "new_line_content": "        put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_VERBATIM) {",
          "new_line_content": "        put_bits(&s->pb, 1, 0); /* no wasted bits */",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, s->sr_code[1])",
          "old_line_content": "}",
          "new_line_content": "        put_bits(&s->pb, 16, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "static void output_subframe_constant(FlacEncodeContext *s, int ch)",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "{",
          "new_line_content": "    crc = av_crc(av_crc07, 0, s->pb.buf, put_bits_count(&s->pb)>>3);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, crc)",
          "old_line_content": "    FlacSubframe *sub;",
          "new_line_content": "    put_bits(&s->pb, 8, crc);",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "output_subframe_constant",
          "old_text": null,
          "new_text": "output_subframe_constant(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_LPC) {",
          "new_line_content": "            output_subframe_constant(s, ch);",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "output_subframe_verbatim",
          "old_text": null,
          "new_text": "output_subframe_verbatim(s, ch)",
          "old_line_content": "        }",
          "new_line_content": "            output_subframe_verbatim(s, ch);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "output_subframe_fixed",
          "old_text": null,
          "new_text": "output_subframe_fixed(s, ch)",
          "old_line_content": "}",
          "new_line_content": "            output_subframe_fixed(s, ch);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS((lt + rt) >> 1)",
          "old_line_content": "    /* estimate bit counts */",
          "new_line_content": "        sum[2] += FFABS((lt + rt) >> 1);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(lt - rt)",
          "old_line_content": "    for(i=0; i<4; i++) {",
          "new_line_content": "        sum[3] += FFABS(lt - rt);",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": null,
          "new_api": "output_subframe_lpc",
          "old_text": null,
          "new_text": "output_subframe_lpc(s, ch)",
          "old_line_content": "static void output_frame_footer(FlacEncodeContext *s)",
          "new_line_content": "            output_subframe_lpc(s, ch);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, i)",
          "old_line_content": "            }",
          "new_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "calc_rice_params_fixed",
          "old_text": null,
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "old_line_content": "        }",
          "new_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "    int i;",
          "new_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "find_optimal_param",
          "old_text": null,
          "new_text": "find_optimal_param(2*sum[i], n)",
          "old_line_content": "    score[0] = sum[0] + sum[1];",
          "new_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "rice_encode_count",
          "old_text": null,
          "new_text": "rice_encode_count(2*sum[i], n, k)",
          "old_line_content": "    score[1] = sum[0] + sum[3];",
          "new_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "static int flac_encode_frame(AVCodecContext *avctx, uint8_t *frame,",
          "new_line_content": "    crc = bswap_16(av_crc(av_crc8005, 0, s->pb.buf, put_bits_count(&s->pb)>>3));",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, crc)",
          "old_line_content": "                             int buf_size, void *data)",
          "new_line_content": "    put_bits(&s->pb, 16, crc);",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "{",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "old_line_content": "    }",
          "new_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "calc_rice_params_fixed",
          "old_text": null,
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "old_line_content": "",
          "new_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "lpc_calc_coefs",
          "old_text": null,
          "new_text": "lpc_calc_coefs(smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "old_line_content": "        int levels = 1 << omethod;",
          "new_line_content": "    opt_order = lpc_calc_coefs(smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "{",
          "new_line_content": "    encode_residual_verbatim(res, smp, n);",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "{",
          "new_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "init_frame",
          "old_text": null,
          "new_text": "init_frame(s)",
          "old_line_content": "",
          "new_line_content": "    init_frame(s);",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "old_line_content": "                opt_order = order;",
          "new_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "old_line_content": "            }",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "",
          "new_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "output_frame_header",
          "old_text": null,
          "new_text": "output_frame_header(s)",
          "old_line_content": "    if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "new_line_content": "    output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "output_subframes",
          "old_text": null,
          "new_text": "output_subframes(s)",
          "old_line_content": "        /* frame too large. use verbatim mode */",
          "new_line_content": "    output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "output_frame_footer",
          "old_text": null,
          "new_text": "output_frame_footer(s)",
          "old_line_content": "        for(ch=0; ch<s->channels; ch++) {",
          "new_line_content": "    output_frame_footer(s);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 2, 0)",
          "old_line_content": "    parts = (1 << porder);",
          "new_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "            }",
          "new_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, porder)",
          "old_line_content": "    for(p=0; p<parts; p++) {",
          "new_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "",
          "new_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "output_frame_header",
          "old_text": null,
          "new_text": "output_frame_header(s)",
          "old_line_content": "        if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "new_line_content": "        output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "output_subframes",
          "old_text": null,
          "new_text": "output_subframes(s)",
          "old_line_content": "            /* still too large. must be an error. */",
          "new_line_content": "        output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "            return -1;",
          "new_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "old_line_content": "        }",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, k)",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(&ctx->pb, 4, k);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "old_line_content": "    s->frame_count++;",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "estimate_stereo_mode",
          "old_text": null,
          "new_text": "estimate_stereo_mode(left, right, n)",
          "old_line_content": "    }",
          "new_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "set_sr_golomb_flac",
          "old_text": null,
          "new_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "old_line_content": "static void output_subframe_fixed(FlacEncodeContext *ctx, int ch)",
          "new_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bits, -1, sizeof(bits))",
          "old_line_content": "                if(i<min_order-1 || i>=max_order || bits[i] < UINT32_MAX)",
          "new_line_content": "        memset(bits, -1, sizeof(bits));",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->extradata)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&avctx->extradata);",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "            }",
          "new_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->coded_frame)",
          "old_line_content": "    \"flac\",",
          "new_line_content": "    av_freep(&avctx->coded_frame);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "old_line_content": "        }",
          "new_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "}",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "    int i, cbits;",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "old_line_content": "static int encode_residual_v(FlacEncodeContext *ctx, int ch)",
          "new_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "old_line_content": "{",
          "new_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(bits >= 0 && bits <= 31)",
          "old_line_content": "static void write_utf8(PutBitContext *pb, uint32_t val)",
          "new_line_content": "    assert(bits >= 0 && bits <= 31);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "old_line_content": "    uint8_t tmp;",
          "new_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 8, tmp)",
          "old_line_content": "    FlacFrame *frame;",
          "new_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "old_line_content": "    /* residual */",
          "new_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "old_line_content": "}",
          "new_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, 0xFFF8)",
          "old_line_content": "    } else {",
          "new_line_content": "    put_bits(&s->pb, 16, 0xFFF8);",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "    FlacFrame *frame;",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->sr_code[0])",
          "old_line_content": "    }",
          "new_line_content": "    put_bits(&s->pb, 4, s->sr_code[0]);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "    max_order = ctx->options.max_prediction_order;",
          "new_line_content": "        encode_residual_verbatim(res, smp, n);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, frame->ch_mode)",
          "old_line_content": "    if(frame->bs_code[0] == 6) {",
          "new_line_content": "        put_bits(&s->pb, 4, frame->ch_mode);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 3, 4)",
          "old_line_content": "    } else if(frame->bs_code[0] == 7) {",
          "new_line_content": "    put_bits(&s->pb, 3, 4); /* bits-per-sample code */",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "write_utf8",
          "old_text": null,
          "new_text": "write_utf8(&s->pb, s->frame_count)",
          "old_line_content": "    }",
          "new_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1280,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6, sub->type_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 6, sub->type_code);",
          "new_line_content": "    for(ch=0; ch<s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no wasted bits */",
          "new_line_content": "        sub = &frame->subframes[ch];",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "    encode_residual_verbatim(res, smp, n);",
          "new_line_content": "        return sub->obits;",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    if(s->sr_code[0] == 12) {",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 8, crc)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 8, crc);",
          "new_line_content": "    } else if(s->sr_code[0] > 12) {",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "output_subframe_verbatim",
          "new_api": null,
          "old_text": "output_subframe_verbatim(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_verbatim(s, ch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "output_subframe_fixed",
          "new_api": null,
          "old_text": "output_subframe_fixed(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_fixed(s, ch);",
          "new_line_content": "        if(sub->type == FLAC_SUBFRAME_CONSTANT) {",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "encode_residual_fixed",
          "new_api": null,
          "old_text": "encode_residual_fixed(res, smp, n, i)",
          "new_text": null,
          "old_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "new_line_content": "        uint32_t bits[MAX_FIXED_ORDER+1];",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS((lt + rt) >> 1)",
          "new_text": null,
          "old_line_content": "        sum[2] += FFABS((lt + rt) >> 1);",
          "new_line_content": "    /* calculate sum of 2nd order residual for each channel */",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(lt - rt)",
          "new_text": null,
          "old_line_content": "        sum[3] += FFABS(lt - rt);",
          "new_line_content": "    sum[0] = sum[1] = sum[2] = sum[3] = 0;",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(lt)",
          "new_text": null,
          "old_line_content": "        sum[0] += FFABS(lt);",
          "new_line_content": "    for(i=2; i<n; i++) {",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(rt)",
          "new_text": null,
          "old_line_content": "        sum[1] += FFABS(rt);",
          "new_line_content": "        lt = left_ch[i] - 2*left_ch[i-1] + left_ch[i-2];",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "output_subframe_lpc",
          "new_api": null,
          "old_text": "output_subframe_lpc(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_lpc(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_VERBATIM) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "new_line_content": "        if(max_order > MAX_FIXED_ORDER) max_order = MAX_FIXED_ORDER;",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "    FlacSubframe *sub;",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "encode_residual_fixed",
          "new_api": null,
          "old_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "new_text": null,
          "old_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "    crc = bswap_16(av_crc(av_crc8005, 0, s->pb.buf, put_bits_count(&s->pb)>>3));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, crc)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 16, crc);",
          "new_line_content": "static void output_frame_footer(FlacEncodeContext *s)",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "new_text": null,
          "old_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "new_line_content": "        sub->order = opt_order;",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "lpc_calc_coefs",
          "new_api": null,
          "old_text": "lpc_calc_coefs(smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "new_text": null,
          "old_line_content": "    opt_order = lpc_calc_coefs(smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "    frame = &s->frame;",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "init_frame",
          "new_api": null,
          "old_text": "init_frame(s)",
          "new_text": null,
          "old_line_content": "    init_frame(s);",
          "new_line_content": "    int out_bytes;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "copy_samples",
          "new_api": null,
          "old_text": "copy_samples(s, samples)",
          "new_text": null,
          "old_line_content": "    copy_samples(s, samples);",
          "new_line_content": "    s = avctx->priv_data;",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "channel_decorrelation",
          "new_api": null,
          "old_text": "channel_decorrelation(s)",
          "new_text": null,
          "old_line_content": "    channel_decorrelation(s);",
          "new_line_content": "    s->blocksize = avctx->frame_size;",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "new_text": null,
          "old_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "new_line_content": "        opt_order = max_order-1;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "        bits[opt_index] = UINT32_MAX;",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "output_frame_header",
          "new_api": null,
          "old_text": "output_frame_header(s)",
          "new_text": null,
          "old_line_content": "    output_frame_header(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "output_subframes",
          "new_api": null,
          "old_text": "output_subframes(s)",
          "new_text": null,
          "old_line_content": "    output_subframes(s);",
          "new_line_content": "    for(ch=0; ch<s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 2, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "new_line_content": "    sub = &frame->subframes[ch];",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": null,
          "old_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "        // brute-force optimal order search",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, porder)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": null,
          "old_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "    if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "output_frame_header",
          "new_api": null,
          "old_text": "output_frame_header(s)",
          "new_text": null,
          "old_line_content": "        output_frame_header(s);",
          "new_line_content": "        /* frame too large. use verbatim mode */",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "output_subframes",
          "new_api": null,
          "old_text": "output_subframes(s)",
          "new_text": null,
          "old_line_content": "        output_subframes(s);",
          "new_line_content": "        for(ch=0; ch<s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "        uint32_t bits[MAX_LPC_ORDER];",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, k)",
          "new_text": null,
          "old_line_content": "        put_bits(&ctx->pb, 4, k);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "estimate_stereo_mode",
          "new_api": null,
          "old_text": "estimate_stereo_mode(left, right, n)",
          "new_text": null,
          "old_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "new_line_content": "    if(ctx->channels != 2) {",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "set_sr_golomb_flac",
          "new_api": null,
          "old_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "new_text": null,
          "old_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "new_line_content": "    for(p=0; p<parts; p++) {",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bits, -1, sizeof(bits))",
          "new_text": null,
          "old_line_content": "        memset(bits, -1, sizeof(bits));",
          "new_line_content": "    } else if(omethod == ORDER_METHOD_LOG) {",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->extradata)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->extradata);",
          "new_line_content": "    return out_bytes;",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": null,
          "old_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "        for(step=16 ;step; step>>=1){",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->coded_frame)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->coded_frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "            int last= opt_order;",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "    frame = &ctx->frame;",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "    for(i=0; i<sub->order; i++) {",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "new_text": null,
          "old_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "new_line_content": "    sub->type_code = sub->type | (sub->order-1);",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "new_text": null,
          "old_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "new_line_content": "    sub->shift = shift[sub->order-1];",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(bits >= 0 && bits <= 31)",
          "new_text": null,
          "old_line_content": "    assert(bits >= 0 && bits <= 31);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "new_text": null,
          "old_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "    frame = &ctx->frame;",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 8, tmp)",
          "new_text": null,
          "old_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "new_text": null,
          "old_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "new_line_content": "    /* LPC coefficients */",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, 0xFFF8)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 16, 0xFFF8);",
          "new_line_content": "    FlacFrame *frame;",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, frame->bs_code[0])",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 4, frame->bs_code[0]);",
          "new_line_content": "    int crc;",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, s->sr_code[0])",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 4, s->sr_code[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "    for(i=0; i<sub->order; i++) {",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, s->ch_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, s->ch_code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "        encode_residual_verbatim(res, smp, n);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, 4)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 3, 4); /* bits-per-sample code */",
          "new_line_content": "    if(frame->ch_mode == FLAC_CHMODE_NOT_STEREO) {",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "write_utf8",
          "new_api": null,
          "old_text": "write_utf8(&s->pb, s->frame_count)",
          "new_text": null,
          "old_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 8, frame->bs_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 8, frame->bs_code[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 11,
      "total_additions": 67,
      "total_deletions": 67,
      "total_api_changes": 145
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 145,
        "non_api_lines": 12,
        "non_api_line_numbers": [
          841,
          845,
          846,
          847,
          848,
          849,
          850,
          851,
          852,
          854,
          855,
          856
        ]
      }
    },
    "api_calls_before": 170,
    "api_calls_after": 170,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 6,
      "total_diff_lines": 34
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/1112ba012df38d486694154b03f5007341f43b24",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/1112ba012df38d486694154b03f5007341f43b24/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/1112ba012df38d486694154b03f5007341f43b24/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/1112ba012df38d486694154b03f5007341f43b24/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2851,
          "old_api": "av_free",
          "new_api": "av_freep",
          "old_text": "av_free(sc->stts_data)",
          "new_text": "av_freep(&sc->stts_data)",
          "old_line_content": "    av_free(sc->stts_data);",
          "new_line_content": "    av_freep(&sc->stts_data);",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": "av_freep",
          "new_api": "avio_rb24",
          "old_text": "av_freep(&sc->ctts_data)",
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    av_freep(&sc->ctts_data);",
          "new_line_content": "    avio_rb24(pb); /* flags */",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "av_fast_realloc",
          "new_api": "avio_rb32",
          "old_text": "av_fast_realloc(NULL, &sc->ctts_allocated_size, entries * sizeof(*sc->ctts_data))",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    sc->ctts_data = av_fast_realloc(NULL, &sc->ctts_allocated_size, entries * sizeof(*sc->ctts_data));",
          "new_line_content": "    entries = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "AVERROR",
          "new_api": "av_log",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"track[%u].ctts.entries = %u\\n\", c->fc->nb_streams - 1, entries)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"track[%u].ctts.entries = %u\\n\", c->fc->nb_streams - 1, entries);",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "av_log",
          "new_api": "av_fast_realloc",
          "old_text": "av_log(c->fc, AV_LOG_TRACE,\n                   \"ignoring CTTS entry with count=%d duration=%d\\n\",\n                   count, duration)",
          "new_text": "av_fast_realloc(NULL, &sc->ctts_allocated_size, entries * sizeof(*sc->ctts_data))",
          "old_line_content": "            av_log(c->fc, AV_LOG_TRACE,",
          "new_line_content": "    sc->ctts_data = av_fast_realloc(NULL, &sc->ctts_allocated_size, entries * sizeof(*sc->ctts_data));",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": "add_ctts_entry",
          "new_api": "avio_rb32",
          "old_text": "add_ctts_entry(&sc->ctts_data, &ctts_count, &sc->ctts_allocated_size,\n                       count, duration)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        add_ctts_entry(&sc->ctts_data, &ctts_count, &sc->ctts_allocated_size,",
          "new_line_content": "        int duration =avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "av_log",
          "new_api": "MKTAG",
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Duplicated SBGP atom\\n\")",
          "new_text": "MKTAG( 'r','a','p',' ')",
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Duplicated SBGP atom\\n\");",
          "new_line_content": "    if (grouping_type != MKTAG( 'r','a','p',' '))",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "av_malloc_array",
          "new_api": "avio_rb32",
          "old_text": "av_malloc_array(entries, sizeof(*sc->rap_group))",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    sc->rap_group = av_malloc_array(entries, sizeof(*sc->rap_group));",
          "new_line_content": "        avio_rb32(pb); /* grouping_type_parameter */",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "AVERROR",
          "new_api": "avio_rb32",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    entries = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": "avio_rb32",
          "new_api": "av_log",
          "old_text": "avio_rb32(pb)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Duplicated SBGP atom\\n\")",
          "old_line_content": "        sc->rap_group[i].index = avio_rb32(pb); /* group_description_index */",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Duplicated SBGP atom\\n\");",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": "av_log",
          "new_api": "fix_index_entry_timestamps",
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"drop a frame at curr_cts: %\"PRId64\" @ %\"PRId64\"\\n\", curr_cts, index)",
          "new_text": "fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,\n                                                       frame_duration_buffer, num_discarded_begin)",
          "old_line_content": "                    av_log(mov->fc, AV_LOG_DEBUG, \"drop a frame at curr_cts: %\"PRId64\" @ %\"PRId64\"\\n\", curr_cts, index);",
          "new_line_content": "                            fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "av_freep",
          "new_api": "FFMIN",
          "old_text": "av_freep(&frame_duration_buffer)",
          "new_text": "FFMIN(min_corrected_pts, edit_list_dts_counter + curr_ctts + msc->dts_shift)",
          "old_line_content": "                        av_freep(&frame_duration_buffer);",
          "new_line_content": "                    min_corrected_pts = FFMIN(min_corrected_pts, edit_list_dts_counter + curr_ctts + msc->dts_shift);",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "av_log",
          "new_api": "fix_index_entry_timestamps",
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot add index entry\\n\")",
          "new_text": "fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,\n                                                   frame_duration_buffer, num_discarded_begin)",
          "old_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"Cannot add index entry\\n\");",
          "new_line_content": "                        fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "mov_stsc_index_valid",
          "new_api": "add_ctts_entry",
          "old_text": "mov_stsc_index_valid(stsc_index, sc->stsc_count)",
          "new_text": "add_ctts_entry(&sc->ctts_data, &sc->ctts_count,\n                                   &sc->ctts_allocated_size, 1,\n                                   ctts_data_old[i].duration)",
          "old_line_content": "            while (mov_stsc_index_valid(stsc_index, sc->stsc_count) &&",
          "new_line_content": "                    add_ctts_entry(&sc->ctts_data, &sc->ctts_count,",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "av_log",
          "new_api": "ff_rfps_add_frame",
          "old_text": "av_log(mov->fc, AV_LOG_WARNING,\n                           \"Invalid SampleDelta %d in STTS, at %d st:%d\\n\",\n                           sc->stts_data[stts_index].duration, stts_index,\n                           st->index)",
          "new_text": "ff_rfps_add_frame(mov->fc, st, current_dts)",
          "old_line_content": "                    av_log(mov->fc, AV_LOG_WARNING,",
          "new_line_content": "                        ff_rfps_add_frame(mov->fc, st, current_dts);",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": "strcmp",
          "new_api": "av_url_split",
          "old_text": "strcmp(src_proto, ref_proto)",
          "new_text": "av_url_split(ref_proto, sizeof(ref_proto), ref_auth, sizeof(ref_auth), ref_host, sizeof(ref_host), &ref_port, NULL, 0, ref)",
          "old_line_content": "    } else if (strcmp(src_proto, ref_proto) ||",
          "new_line_content": "    av_url_split(ref_proto, sizeof(ref_proto), ref_auth, sizeof(ref_auth), ref_host, sizeof(ref_host), &ref_port, NULL, 0, ref);",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "strcmp",
          "new_api": "strlen",
          "old_text": "strcmp(src_host, ref_host)",
          "new_text": "strlen(src)",
          "old_line_content": "               strcmp(src_host, ref_host) ||",
          "new_line_content": "    if (strlen(src) == 0) {",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "AVERROR",
          "new_api": "av_strlcat",
          "old_text": "AVERROR(ENOENT)",
          "new_text": "av_strlcat(filename, ref->path + l + 1, sizeof(filename))",
          "old_line_content": "                    return AVERROR(ENOENT);",
          "new_line_content": "            av_strlcat(filename, ref->path + l + 1, sizeof(filename));",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "io_open",
          "new_api": "strstr",
          "old_text": "c->fc->io_open(c->fc, pb, filename, AVIO_FLAG_READ, NULL)",
          "new_text": "strstr(ref->path + l + 1, \"..\")",
          "old_line_content": "            if (!c->fc->io_open(c->fc, pb, filename, AVIO_FLAG_READ, NULL))",
          "new_line_content": "                if(strstr(ref->path + l + 1, \"..\") ||",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Using absolute path on user request, \"\n               \"this is a possible security issue\\n\")",
          "new_text": "AVERROR(ENOENT)",
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Using absolute path on user request, \"",
          "new_line_content": "                    return AVERROR(ENOENT);",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "av_log",
          "new_api": "io_open",
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"Absolute path %s not tried for security reasons, \"\n               \"set demuxer option use_absolute_path to allow absolute paths\\n\",\n               ref->path)",
          "new_text": "c->fc->io_open(c->fc, pb, filename, AVIO_FLAG_READ, NULL)",
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "            if (!c->fc->io_open(c->fc, pb, filename, AVIO_FLAG_READ, NULL))",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "AVERROR",
          "new_api": "io_open",
          "old_text": "AVERROR(ENOENT)",
          "new_text": "c->fc->io_open(c->fc, pb, ref->path, AVIO_FLAG_READ, NULL)",
          "old_line_content": "    return AVERROR(ENOENT);",
          "new_line_content": "        if (!c->fc->io_open(c->fc, pb, ref->path, AVIO_FLAG_READ, NULL))",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "av_log",
          "new_api": "mov_read_default",
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"stream %d, missing mandatory atoms, broken header\\n\",\n               st->index)",
          "new_text": "mov_read_default(c, pb, atom)",
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"stream %d, missing mandatory atoms, broken header\\n\",",
          "new_line_content": "    if ((ret = mov_read_default(c, pb, atom)) < 0)",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": "mov_build_index",
          "new_api": "av_log",
          "old_text": "mov_build_index(c, st)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"stream %d, missing mandatory atoms, broken header\\n\",\n               st->index)",
          "old_line_content": "    mov_build_index(c, st);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"stream %d, missing mandatory atoms, broken header\\n\",",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": "mov_open_dref",
          "new_api": "fix_timescale",
          "old_text": "mov_open_dref(c, &sc->pb, c->fc->filename, dref)",
          "new_text": "fix_timescale(c, sc)",
          "old_line_content": "            if (mov_open_dref(c, &sc->pb, c->fc->filename, dref) < 0)",
          "new_line_content": "    fix_timescale(c, sc);",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": "mov_read_default",
          "new_api": "av_freep",
          "old_text": "mov_read_default(c, pb, atom)",
          "new_text": "av_freep(&sc->rap_group)",
          "old_line_content": "    ret = mov_read_default(c, pb, atom);",
          "new_line_content": "    av_freep(&sc->rap_group);",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "av_mallocz",
          "new_api": "avio_skip",
          "old_text": "av_mallocz(c->meta_keys_count * sizeof(*c->meta_keys))",
          "new_text": "avio_skip(pb, 4)",
          "old_line_content": "    c->meta_keys = av_mallocz(c->meta_keys_count * sizeof(*c->meta_keys));",
          "new_line_content": "    avio_skip(pb, 4);",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "MKTAG",
          "new_api": "avio_rb32",
          "old_text": "MKTAG('m','d','t','a')",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        if (type != MKTAG('m','d','t','a')) {",
          "new_line_content": "        uint32_t key_size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "avio_skip",
          "new_api": "avio_rl32",
          "old_text": "avio_skip(pb, key_size)",
          "new_text": "avio_rl32(pb)",
          "old_line_content": "            avio_skip(pb, key_size);",
          "new_line_content": "        uint32_t type = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": "av_mallocz",
          "new_api": "av_log",
          "old_text": "av_mallocz(key_size + 1)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n                   \"The key# %\"PRIu32\" in meta has invalid size:\"\n                   \"%\"PRIu32\"\\n\", i, key_size)",
          "old_line_content": "        c->meta_keys[i] = av_mallocz(key_size + 1);",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": "avio_tell",
          "new_api": "AVERROR",
          "old_text": "avio_tell(pb)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    int64_t end = avio_tell(pb) + atom.size;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4269,
          "old_api": "MKTAG",
          "new_api": "avio_rl32",
          "old_text": "MKTAG('n', 'a', 'm', 'e')",
          "new_text": "avio_rl32(pb)",
          "old_line_content": "        else if (tag == MKTAG('n', 'a', 'm', 'e'))",
          "new_line_content": "        tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": "avio_skip",
          "new_api": "avio_tell",
          "old_text": "avio_skip(pb, 4)",
          "new_text": "avio_tell(pb)",
          "old_line_content": "            avio_skip(pb, 4);",
          "new_line_content": "        if (len < 12 || len - 12 > end - avio_tell(pb))",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "av_malloc",
          "new_api": "MKTAG",
          "old_text": "av_malloc(len + 1)",
          "new_text": "MKTAG('n', 'a', 'm', 'e')",
          "old_line_content": "        *p = av_malloc(len + 1);",
          "new_line_content": "        else if (tag == MKTAG('n', 'a', 'm', 'e'))",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "AVERROR",
          "new_api": "MKTAG",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "MKTAG('d', 'a', 't', 'a')",
          "old_line_content": "            ret = AVERROR(ENOMEM);",
          "new_line_content": "        else if (tag == MKTAG('d', 'a', 't', 'a') && len > 4) {",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": "strcmp",
          "new_api": "ffio_read_size",
          "old_text": "strcmp(key, \"iTunSMPB\")",
          "new_text": "ffio_read_size(pb, *p, len)",
          "old_line_content": "        if (strcmp(key, \"iTunSMPB\") == 0) {",
          "new_line_content": "        ret = ffio_read_size(pb, *p, len);",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": "sscanf",
          "new_api": "av_freep",
          "old_text": "sscanf(val, \"%*X %X %X %X\", &priming, &remainder, &samples)",
          "new_text": "av_freep(p)",
          "old_line_content": "            if(sscanf(val, \"%*X %X %X %X\", &priming, &remainder, &samples) == 3){",
          "new_line_content": "            av_freep(p);",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": "avio_seek",
          "new_api": "av_dict_set",
          "old_text": "avio_seek(pb, end, SEEK_SET)",
          "new_text": "av_dict_set(&c->fc->metadata, key, val,\n                        AV_DICT_DONT_STRDUP_KEY | AV_DICT_DONT_STRDUP_VAL)",
          "old_line_content": "    avio_seek(pb, end, SEEK_SET);",
          "new_line_content": "            av_dict_set(&c->fc->metadata, key, val,",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "avio_rl32",
          "new_api": "av_freep",
          "old_text": "avio_rl32(pb)",
          "new_text": "av_freep(&key)",
          "old_line_content": "        uint32_t tag = avio_rl32(pb);",
          "new_line_content": "    av_freep(&key);",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": "MKTAG",
          "new_api": "av_freep",
          "old_text": "MKTAG('h','d','l','r')",
          "new_text": "av_freep(&mean)",
          "old_line_content": "        if (tag == MKTAG('h','d','l','r')) {",
          "new_line_content": "    av_freep(&mean);",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        avio_rb32(pb); /* modification time */",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "avio_rb32",
          "new_api": "avio_rb64",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_rb64(pb)",
          "old_line_content": "    (version == 1) ? avio_rb64(pb) : avio_rb32(pb);",
          "new_line_content": "        avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": "avio_rb16",
          "new_api": "avio_rb32",
          "old_text": "avio_rb16(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    avio_rb16(pb); /* alternate group */",
          "new_line_content": "    st->id = (int)avio_rb32(pb); /* track id (NOT 0 !)*/",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": "avio_rb16",
          "new_api": "avio_rb32",
          "old_text": "avio_rb16(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    avio_rb16(pb); /* volume */",
          "new_line_content": "    avio_rb32(pb); /* reserved */",
          "content_same": false
        },
        {
          "line": 4385,
          "old_api": "avio_rb32",
          "new_api": "avio_rb16",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_rb16(pb)",
          "old_line_content": "        display_matrix[i][0] = avio_rb32(pb);   // 16.16 fixed point",
          "new_line_content": "    avio_rb16(pb); /* alternate group */",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": "avio_rb32",
          "new_api": "avio_rb16",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_rb16(pb)",
          "old_line_content": "        display_matrix[i][1] = avio_rb32(pb);   // 16.16 fixed point",
          "new_line_content": "    avio_rb16(pb); /* volume */",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": "avio_rb32",
          "new_api": "avio_rb16",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_rb16(pb)",
          "old_line_content": "        display_matrix[i][2] = avio_rb32(pb);   //  2.30 fixed point",
          "new_line_content": "    avio_rb16(pb); /* reserved */",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "av_display_rotation_get",
          "new_api": "av_malloc",
          "old_text": "av_display_rotation_get(sc->display_matrix)",
          "new_text": "av_malloc(sizeof(int32_t) * 9)",
          "old_line_content": "        rotate = av_display_rotation_get(sc->display_matrix);",
          "new_line_content": "        sc->display_matrix = av_malloc(sizeof(int32_t) * 9);",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": "avio_rb32",
          "new_api": "avio_rb64",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_rb64(pb)",
          "old_line_content": "                     avio_rb32(pb) : trex->flags;",
          "new_line_content": "                             avio_rb64(pb) : flags & MOV_TFHD_DEFAULT_BASE_IS_MOOF ?",
          "content_same": false
        },
        {
          "line": 4527,
          "old_api": "avio_r8",
          "new_api": "av_reallocp_array",
          "old_text": "avio_r8(pb)",
          "new_text": "av_reallocp_array(&c->trex_data, c->trex_count + 1,\n                                 sizeof(*c->trex_data))",
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "    if ((err = av_reallocp_array(&c->trex_data, c->trex_count + 1,",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": "avio_rb64",
          "new_api": "av_log",
          "old_text": "avio_rb64(pb)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id)",
          "old_line_content": "        base_media_decode_time = avio_rb64(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id);",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": "avio_rb24",
          "new_api": "get_frag_stream_info",
          "old_text": "avio_rb24(pb)",
          "new_text": "get_frag_stream_info(&c->frag_index, i, frag->track_id)",
          "old_line_content": "    flags = avio_rb24(pb);",
          "new_line_content": "        frag_stream_info = get_frag_stream_info(&c->frag_index, i, frag->track_id);",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": "get_current_frag_stream_info",
          "new_api": "avio_rb24",
          "old_text": "get_current_frag_stream_info(&c->frag_index)",
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    frag_stream_info = get_current_frag_stream_info(&c->frag_index);",
          "new_line_content": "    flags = avio_rb24(pb);",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "av_log",
          "new_api": "avio_rb32",
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"found mfra time %\"PRId64\n                    \", using it for pts\\n\", pts)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found mfra time %\"PRId64",
          "new_line_content": "    if (flags & MOV_TRUN_DATA_OFFSET)        data_offset        = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": "memset",
          "new_api": "av_fast_realloc",
          "old_text": "memset(sc->ctts_data + sc->ctts_count, 0,\n           (st->nb_index_entries - sc->ctts_count) * sizeof(*sc->ctts_data))",
          "new_text": "av_fast_realloc(sc->ctts_data, &sc->ctts_allocated_size,\n                                requested_size)",
          "old_line_content": "    memset(sc->ctts_data + sc->ctts_count, 0,",
          "new_line_content": "    ctts_data = av_fast_realloc(sc->ctts_data, &sc->ctts_allocated_size,",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": "memmove",
          "new_api": "memset",
          "old_text": "memmove(sc->ctts_data + index_entry_pos + entries,\n                sc->ctts_data + index_entry_pos,\n                sizeof(*sc->ctts_data) * (sc->ctts_count - index_entry_pos))",
          "new_text": "memset(sc->ctts_data + sc->ctts_count, 0,\n           (st->nb_index_entries - sc->ctts_count) * sizeof(*sc->ctts_data))",
          "old_line_content": "        memmove(sc->ctts_data + index_entry_pos + entries,",
          "new_line_content": "    memset(sc->ctts_data + sc->ctts_count, 0,",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": "avio_rb64",
          "new_api": "av_log",
          "old_text": "avio_rb64(pb)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Invalid sidx timescale 1/%d\\n\", timescale.den)",
          "old_line_content": "        offset += avio_rb64(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Invalid sidx timescale 1/%d\\n\", timescale.den);",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": "avio_rb16",
          "new_api": "avio_rb32",
          "old_text": "avio_rb16(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    item_count = avio_rb16(pb);",
          "new_line_content": "        pts = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": "update_frag_index",
          "new_api": "avio_rb32",
          "old_text": "update_frag_index(c, offset)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        index = update_frag_index(c, offset);",
          "new_line_content": "        uint32_t size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "get_frag_stream_info",
          "new_api": "avio_rb32",
          "old_text": "get_frag_stream_info(&c->frag_index, index, track_id)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        frag_stream_info = get_frag_stream_info(&c->frag_index, index, track_id);",
          "new_line_content": "        uint32_t duration = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": "mov_read_mdat",
          "new_api": "avio_skip",
          "old_text": "mov_read_mdat(c, pb, atom)",
          "new_text": "avio_skip(pb, atom.size - 4)",
          "old_line_content": "    err = mov_read_mdat(c, pb, atom);",
          "new_line_content": "        avio_skip(pb, atom.size - 4);",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": "avio_rb32",
          "new_api": "MKTAG",
          "old_text": "avio_rb32(pb)",
          "new_text": "MKTAG('d','c','o','m')",
          "old_line_content": "    moov_len = avio_rb32(pb); /* uncompressed size */",
          "new_line_content": "    if (avio_rl32(pb) != MKTAG('d','c','o','m'))",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "av_malloc",
          "new_api": "av_log",
          "old_text": "av_malloc(cmov_len)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"unknown compression for cmov atom !\\n\")",
          "old_line_content": "    cmov_data = av_malloc(cmov_len);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"unknown compression for cmov atom !\\n\");",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "av_malloc",
          "new_api": "avio_rb32",
          "old_text": "av_malloc(moov_len)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    moov_data = av_malloc(moov_len);",
          "new_line_content": "    avio_rb32(pb); /* cmvd atom */",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": "AVERROR",
          "new_api": "avio_rb32",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    moov_len = avio_rb32(pb); /* uncompressed size */",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "ffio_init_context",
          "new_api": "AVERROR",
          "old_text": "ffio_init_context(&ctx, moov_data, moov_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    if (ffio_init_context(&ctx, moov_data, moov_len, 0, NULL, NULL, NULL, NULL) != 0)",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "av_free",
          "new_api": "uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len)",
          "old_text": "av_free(moov_data)",
          "new_text": "uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len)",
          "old_line_content": "    av_free(moov_data);",
          "new_line_content": "    if (uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len) != Z_OK)",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "AVERROR",
          "new_api": "MKTAG",
          "old_text": "AVERROR(ENOSYS)",
          "new_text": "MKTAG('m','o','o','v')",
          "old_line_content": "    return AVERROR(ENOSYS);",
          "new_line_content": "    atom.type = MKTAG('m','o','o','v');",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": "av_free",
          "new_api": "av_log",
          "old_text": "av_free(sc->elst_data)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"ELST atom of %\"PRId64\" bytes, bigger than %d entries.\", atom.size, edit_count)",
          "old_line_content": "    av_free(sc->elst_data);",
          "new_line_content": "                av_log(c->fc, AV_LOG_WARNING, \"ELST atom of %\"PRId64\" bytes, bigger than %d entries.\", atom.size, edit_count);",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "avio_rb64",
          "new_api": "av_malloc_array",
          "old_text": "avio_rb64(pb)",
          "new_text": "av_malloc_array(edit_count, sizeof(*sc->elst_data))",
          "old_line_content": "            e->duration = avio_rb64(pb);",
          "new_line_content": "    sc->elst_data = av_malloc_array(edit_count, sizeof(*sc->elst_data));",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "avio_rb32",
          "new_api": "av_log",
          "old_text": "avio_rb32(pb)",
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"track[%u].edit_count = %i\\n\", c->fc->nb_streams - 1, edit_count)",
          "old_line_content": "            e->duration = avio_rb32(pb); /* segment duration */",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"track[%u].edit_count = %i\\n\", c->fc->nb_streams - 1, edit_count);",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "av_log",
          "new_api": "avio_rb64",
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"duration=%\"PRId64\" time=%\"PRId64\" rate=%f\\n\",\n               e->duration, e->time, e->rate)",
          "new_text": "avio_rb64(pb)",
          "old_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"duration=%\"PRId64\" time=%\"PRId64\" rate=%f\\n\",",
          "new_line_content": "            e->time     = avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 5118,
          "old_api": "avio_skip",
          "new_api": "av_log",
          "old_text": "avio_skip(pb, 3)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty VP Codec Configuration box\\n\")",
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty VP Codec Configuration box\\n\");",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "avio_r8",
          "new_api": "av_log",
          "old_text": "avio_r8(pb)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported VP Codec Configuration box version %d\\n\", version)",
          "old_line_content": "    color_space     = avio_r8(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported VP Codec Configuration box version %d\\n\", version);",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": "av_color_transfer_name",
          "new_api": "avio_r8",
          "old_text": "av_color_transfer_name(color_trc)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "    if (!av_color_transfer_name(color_trc))",
          "new_line_content": "    color_range     = avio_r8(pb); /* bitDepth, chromaSubsampling, videoFullRangeFlag */",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "av_color_space_name",
          "new_api": "avio_r8",
          "old_text": "av_color_space_name(color_space)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "    if (!av_color_space_name(color_space))",
          "new_line_content": "    color_trc       = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "avio_skip",
          "new_api": "av_log",
          "old_text": "avio_skip(pb, 3)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Mastering Display Metadata box\\n\")",
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Mastering Display Metadata box\\n\");",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": "AVERROR",
          "new_api": "avio_r8",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": "avio_rb16",
          "new_api": "avio_skip",
          "old_text": "avio_rb16(pb)",
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "                av_make_q(lrint(((double)avio_rb16(pb) / (1 << 16)) * chroma_den), chroma_den);",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "avio_rb16",
          "new_api": "av_mastering_display_metadata_alloc",
          "old_text": "avio_rb16(pb)",
          "new_text": "av_mastering_display_metadata_alloc()",
          "old_line_content": "    sc->mastering->white_point[0] = av_make_q(avio_rb16(pb), chroma_den);",
          "new_line_content": "    sc->mastering = av_mastering_display_metadata_alloc();",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "avio_skip",
          "new_api": "av_log",
          "old_text": "avio_skip(pb, 3)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level box\\n\")",
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level box\\n\");",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "AVERROR",
          "new_api": "avio_r8",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "avio_rb16",
          "new_api": "av_log",
          "old_text": "avio_rb16(pb)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported Content Light Level box version %d\\n\", version)",
          "old_line_content": "    sc->coll->MaxCLL  = avio_rb16(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported Content Light Level box version %d\\n\", version);",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": "avio_rb16",
          "new_api": "av_log",
          "old_text": "avio_rb16(pb)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level Info box\\n\")",
          "old_line_content": "    sc->coll->MaxFALL = avio_rb16(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level Info box\\n\");",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "MKTAG",
          "new_api": "av_log",
          "old_text": "MKTAG('s','v','h','d')",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty spherical video box\\n\")",
          "old_line_content": "    if (tag != MKTAG('s','v','h','d')) {",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty spherical video box\\n\");",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": "avio_r8",
          "new_api": "avio_rb32",
          "old_text": "avio_r8(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "    size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5363,
          "old_api": "avio_skip",
          "new_api": "av_log",
          "old_text": "avio_skip(pb, 3)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing spherical video header\\n\")",
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing spherical video header\\n\");",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "    size = avio_rb32(pb);",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "av_log",
          "new_api": "avio_skip",
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing projection box\\n\")",
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing projection box\\n\");",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": "avio_rl32",
          "new_api": "MKTAG",
          "old_text": "avio_rl32(pb)",
          "new_text": "MKTAG('p','r','o','j')",
          "old_line_content": "    tag = avio_rl32(pb);",
          "new_line_content": "    if (tag != MKTAG('p','r','o','j')) {",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": "MKTAG",
          "new_api": "av_log",
          "old_text": "MKTAG('p','r','h','d')",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing projection box\\n\")",
          "old_line_content": "    if (tag != MKTAG('p','r','h','d')) {",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing projection box\\n\");",
          "content_same": false
        },
        {
          "line": 5385,
          "old_api": "avio_r8",
          "new_api": "avio_rb32",
          "old_text": "avio_r8(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "    size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5391,
          "old_api": "avio_skip",
          "new_api": "av_log",
          "old_text": "avio_skip(pb, 3)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing projection header box\\n\")",
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing projection header box\\n\");",
          "content_same": false
        },
        {
          "line": 5394,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "    yaw   = avio_rb32(pb);",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": "avio_rb32",
          "new_api": "av_log",
          "old_text": "avio_rb32(pb)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",\n               version)",
          "old_line_content": "    roll  = avio_rb32(pb);",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "avio_r8",
          "new_api": "avio_rb32",
          "old_text": "avio_r8(pb)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "    yaw   = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": "av_log",
          "new_api": "avio_rb32",
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",\n               version)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",",
          "new_line_content": "    roll  = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5411,
          "old_api": "MKTAG",
          "new_api": "avio_rl32",
          "old_text": "MKTAG('c','b','m','p')",
          "new_text": "avio_rl32(pb)",
          "old_line_content": "    case MKTAG('c','b','m','p'):",
          "new_line_content": "    tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(pb)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        layout = avio_rb32(pb);",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": "MKTAG",
          "new_api": "avio_rb32",
          "old_text": "MKTAG('e','q','u','i')",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    case MKTAG('e','q','u','i'):",
          "new_line_content": "        layout = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": "avio_rb32",
          "new_api": "av_log",
          "old_text": "avio_rb32(pb)",
          "new_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"Unsupported cubemap layout %d\\n\", layout)",
          "old_line_content": "        b = avio_rb32(pb);",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 5428,
          "old_api": "av_log",
          "new_api": "avio_rb32",
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n                   \"Invalid bounding rectangle coordinates \"\n                   \"%\"PRIu32\",%\"PRIu32\",%\"PRIu32\",%\"PRIu32\"\\n\", l, t, r, b)",
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "        padding = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": "av_stristr",
          "new_api": "AVERROR",
          "old_text": "av_stristr(buffer, \"<GSpherical:StitchingSoftware>\")",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        av_stristr(buffer, \"<GSpherical:StitchingSoftware>\") &&",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5483,
          "old_api": "av_stristr",
          "new_api": "ffio_read_size",
          "old_text": "av_stristr(buffer, \"<GSpherical:Stitched>\")",
          "new_text": "ffio_read_size(pb, buffer, len)",
          "old_line_content": "        (val = av_stristr(buffer, \"<GSpherical:Stitched>\")) &&",
          "new_line_content": "    ret = ffio_read_size(pb, buffer, len);",
          "content_same": false
        },
        {
          "line": 5496,
          "old_api": "av_stristr",
          "new_api": "av_spherical_alloc",
          "old_text": "av_stristr(buffer, \"left-right\")",
          "new_text": "av_spherical_alloc(&sc->spherical_size)",
          "old_line_content": "            if (av_stristr(buffer, \"left-right\"))",
          "new_line_content": "        sc->spherical = av_spherical_alloc(&sc->spherical_size);",
          "content_same": false
        },
        {
          "line": 5523,
          "old_api": "av_free",
          "new_api": "av_stristr",
          "old_text": "av_free(buffer)",
          "new_text": "av_stristr(buffer, \"<GSpherical:InitialViewPitchDegrees>\")",
          "old_line_content": "    av_free(buffer);",
          "new_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewPitchDegrees>\");",
          "content_same": false
        },
        {
          "line": 5577,
          "old_api": "av_free",
          "new_api": "avio_skip",
          "old_text": "av_free(buffer)",
          "new_text": "avio_skip(pb, 4)",
          "old_line_content": "            av_free(buffer);",
          "new_line_content": "        ret = avio_skip(pb, 4); // zeroes",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": "av_free",
          "new_api": "av_mallocz",
          "old_text": "av_free(buffer)",
          "new_text": "av_mallocz(len + 1)",
          "old_line_content": "            av_free(buffer);",
          "new_line_content": "        buffer = av_mallocz(len + 1);",
          "content_same": false
        },
        {
          "line": 5604,
          "old_api": "memcmp",
          "new_api": "strtol",
          "old_text": "memcmp(uuid, uuid_xmp, sizeof(uuid))",
          "new_text": "strtol(ptr, &endptr, 10)",
          "old_line_content": "    } else if (!memcmp(uuid, uuid_xmp, sizeof(uuid))) {",
          "new_line_content": "            ret = strtol(ptr, &endptr, 10);",
          "content_same": false
        },
        {
          "line": 5612,
          "old_api": "avio_read",
          "new_api": "av_free",
          "old_text": "avio_read(pb, buffer, len)",
          "new_text": "av_free(buffer)",
          "old_line_content": "            ret = avio_read(pb, buffer, len);",
          "new_line_content": "        av_free(buffer);",
          "content_same": false
        },
        {
          "line": 5617,
          "old_api": "av_free",
          "new_api": "av_mallocz",
          "old_text": "av_free(buffer)",
          "new_text": "av_mallocz(len + 1)",
          "old_line_content": "                av_free(buffer);",
          "new_line_content": "            buffer = av_mallocz(len + 1);",
          "content_same": false
        },
        {
          "line": 5621,
          "old_api": "av_dict_set",
          "new_api": "avio_read",
          "old_text": "av_dict_set(&c->fc->metadata, \"xmp\", buffer, 0)",
          "new_text": "avio_read(pb, buffer, len)",
          "old_line_content": "            av_dict_set(&c->fc->metadata, \"xmp\", buffer, 0);",
          "new_line_content": "            ret = avio_read(pb, buffer, len);",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": "mov_parse_uuid_spherical",
          "new_api": "av_free",
          "old_text": "mov_parse_uuid_spherical(sc, pb, len)",
          "new_text": "av_free(buffer)",
          "old_line_content": "        ret = mov_parse_uuid_spherical(sc, pb, len);",
          "new_line_content": "            av_free(buffer);",
          "content_same": false
        },
        {
          "line": 5726,
          "old_api": "FFMIN",
          "new_api": "av_log",
          "old_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"duplicate senc atom\\n\")",
          "old_line_content": "    if (atom.size < 8 || atom.size > FFMIN(INT_MAX, SIZE_MAX)) {",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"duplicate senc atom\\n\");",
          "content_same": false
        },
        {
          "line": 5736,
          "old_api": "AVERROR",
          "new_api": "av_log",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"senc atom size %\"PRId64\" invalid\\n\", atom.size)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"senc atom size %\"PRId64\" invalid\\n\", atom.size);",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": "avio_read",
          "new_api": "av_malloc",
          "old_text": "avio_read(pb, sc->cenc.auxiliary_info, auxiliary_info_size)",
          "new_text": "av_malloc(auxiliary_info_size)",
          "old_line_content": "    if (avio_read(pb, sc->cenc.auxiliary_info, auxiliary_info_size) != auxiliary_info_size) {",
          "new_line_content": "    sc->cenc.auxiliary_info = av_malloc(auxiliary_info_size);",
          "content_same": false
        },
        {
          "line": 5788,
          "old_api": "avio_r8",
          "new_api": "avio_rb24",
          "old_text": "avio_r8(pb)",
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    sc->cenc.auxiliary_info_default_size = avio_r8(pb);",
          "new_line_content": "    flags = avio_rb24(pb);",
          "content_same": false
        },
        {
          "line": 5805,
          "old_api": "AVERROR",
          "new_api": "av_log",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"saiz atom auxiliary_info_sizes size %\"PRId64\" invalid\\n\", atom.size)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"saiz atom auxiliary_info_sizes size %\"PRId64\" invalid\\n\", atom.size);",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": "av_log",
          "new_api": "avio_r8",
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"STREAMINFO must be first FLACMetadataBlock\\n\")",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"STREAMINFO must be first FLACMetadataBlock\\n\");",
          "new_line_content": "    if (avio_r8(pb) != 0)",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "AVERROR",
          "new_api": "avio_r8",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "avio_r8(pb)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    if (avio_r8(pb) != 0) {",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": "AV_RB16",
          "new_api": "MKTAG",
          "old_text": "AV_RB16(st->codecpar->extradata + 10)",
          "new_text": "MKTAG('O','p','u','s')",
          "old_line_content": "    pre_skip = AV_RB16(st->codecpar->extradata + 10);",
          "new_line_content": "    AV_WL32(st->codecpar->extradata, MKTAG('O','p','u','s'));",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": "AV_WL16",
          "new_api": "MKTAG",
          "old_text": "AV_WL16(st->codecpar->extradata + 10, pre_skip)",
          "new_text": "MKTAG('H','e','a','d')",
          "old_line_content": "    AV_WL16(st->codecpar->extradata + 10, pre_skip);",
          "new_line_content": "    AV_WL32(st->codecpar->extradata + 4, MKTAG('H','e','a','d'));",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "AV_RB32",
          "new_api": "AV_WB8",
          "old_text": "AV_RB32(st->codecpar->extradata + 12)",
          "new_text": "AV_WB8(st->codecpar->extradata + 8, 1)",
          "old_line_content": "    AV_WL32(st->codecpar->extradata + 12, AV_RB32(st->codecpar->extradata + 12));",
          "new_line_content": "    AV_WB8(st->codecpar->extradata + 8, 1); /* OpusHead version */",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": "AV_RB16",
          "new_api": "avio_read",
          "old_text": "AV_RB16(st->codecpar->extradata + 16)",
          "new_text": "avio_read(pb, st->codecpar->extradata + 9, size - 9)",
          "old_line_content": "    AV_WL16(st->codecpar->extradata + 16, AV_RB16(st->codecpar->extradata + 16));",
          "new_line_content": "    avio_read(pb, st->codecpar->extradata + 9, size - 9);",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": "MKTAG",
          "new_api": "av_rescale_q",
          "old_text": "MKTAG('A','P','R','G')",
          "new_text": "av_rescale_q(OPUS_SEEK_PREROLL_MS,\n                                              (AVRational){1, 1000},\n                                              (AVRational){1, 48000})",
          "old_line_content": "{ MKTAG('A','P','R','G'), mov_read_avid },",
          "new_line_content": "    st->codecpar->seek_preroll = av_rescale_q(OPUS_SEEK_PREROLL_MS,",
          "content_same": false
        },
        {
          "line": 6127,
          "old_api": "avio_seek",
          "new_api": "avio_rl32",
          "old_text": "avio_seek(pb, -8, SEEK_CUR)",
          "new_text": "avio_rl32(pb)",
          "old_line_content": "                avio_seek(pb, -8, SEEK_CUR);",
          "new_line_content": "            a.type = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 6134,
          "old_api": "MKTAG",
          "new_api": "avio_read",
          "old_text": "MKTAG('r','o','o','t')",
          "new_text": "avio_read(pb, buf, 8)",
          "old_line_content": "            if (atom.type != MKTAG('r','o','o','t') &&",
          "new_line_content": "                if (avio_read(pb, buf, 8) != 8)",
          "content_same": false
        },
        {
          "line": 6140,
          "old_api": "avio_skip",
          "new_api": "MKTAG",
          "old_text": "avio_skip(pb, -8)",
          "new_text": "MKTAG('m','o','o','v')",
          "old_line_content": "                    avio_skip(pb, -8);",
          "new_line_content": "                    a.type = MKTAG('m','o','o','v');",
          "content_same": false
        },
        {
          "line": 6168,
          "old_api": "MKTAG",
          "new_api": "FFMIN",
          "old_text": "MKTAG('u','d','t','a')",
          "new_text": "FFMIN(a.size, atom.size - total_size)",
          "old_line_content": "        if (!parse && (atom.type == MKTAG('u','d','t','a') ||",
          "new_line_content": "        a.size = FFMIN(a.size, atom.size - total_size);",
          "content_same": false
        },
        {
          "line": 6185,
          "old_api": "parse",
          "new_api": "MKTAG",
          "old_text": "parse(c, pb, a)",
          "new_text": "MKTAG('k','e','y','s')",
          "old_line_content": "            int err = parse(c, pb, a);",
          "new_line_content": "            a.type == MKTAG('k','e','y','s')) {",
          "content_same": false
        },
        {
          "line": 6192,
          "old_api": "avio_size",
          "new_api": "avio_tell",
          "old_text": "avio_size(pb)",
          "new_text": "avio_tell(pb)",
          "old_line_content": "                 start_pos + a.size == avio_size(pb))) {",
          "new_line_content": "            int64_t start_pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 6241,
          "old_api": "AV_RB32",
          "new_api": "AV_RL32",
          "old_text": "AV_RB32(p->buf+offset)",
          "new_text": "AV_RL32(p->buf + offset + 4)",
          "old_line_content": "            if (AV_RB32(p->buf+offset) < 8 &&",
          "new_line_content": "        tag = AV_RL32(p->buf + offset + 4);",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": "AV_RB64",
          "new_api": "MKTAG",
          "old_text": "AV_RB64(p->buf+offset + 8)",
          "new_text": "MKTAG('m','o','o','v')",
          "old_line_content": "                 AV_RB64(p->buf+offset + 8) == 0)) {",
          "new_line_content": "        case MKTAG('m','o','o','v'):",
          "content_same": false
        },
        {
          "line": 6250,
          "old_api": "FFMAX",
          "new_api": "AV_RB32",
          "old_text": "FFMAX(score, 5)",
          "new_text": "AV_RB32(p->buf+offset)",
          "old_line_content": "                score = FFMAX(score, 5);",
          "new_line_content": "            if (AV_RB32(p->buf+offset) < 8 &&",
          "content_same": false
        },
        {
          "line": 6254,
          "old_api": "AV_RB32",
          "new_api": "FFMAX",
          "old_text": "AV_RB32(p->buf+offset)",
          "new_text": "FFMAX(score, AVPROBE_SCORE_EXTENSION)",
          "old_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "new_line_content": "                score = FFMAX(score, AVPROBE_SCORE_EXTENSION);",
          "content_same": false
        },
        {
          "line": 6259,
          "old_api": "MKTAG",
          "new_api": "FFMAX",
          "old_text": "MKTAG('f','r','e','e')",
          "new_text": "FFMAX(score, 5)",
          "old_line_content": "        case MKTAG('f','r','e','e'):",
          "new_line_content": "                score = FFMAX(score, 5);",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": "FFMAX",
          "new_api": "MKTAG",
          "old_text": "FFMAX(score, AVPROBE_SCORE_EXTENSION)",
          "new_text": "MKTAG('p','i','c','t')",
          "old_line_content": "            score  = FFMAX(score, AVPROBE_SCORE_EXTENSION);",
          "new_line_content": "        case MKTAG('p','i','c','t'):",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "AV_RB32",
          "new_api": "FFMAX",
          "old_text": "AV_RB32(p->buf+offset)",
          "new_text": "FFMAX(score, AVPROBE_SCORE_MAX - 5)",
          "old_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "new_line_content": "            score  = FFMAX(score, AVPROBE_SCORE_MAX - 5);",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": "AV_RB32",
          "new_api": "MKTAG",
          "old_text": "AV_RB32(p->buf+offset)",
          "new_text": "MKTAG(0x82,0x82,0x7f,0x7d)",
          "old_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "new_line_content": "        case MKTAG(0x82,0x82,0x7f,0x7d):",
          "content_same": false
        },
        {
          "line": 6335,
          "old_api": "av_log",
          "new_api": "avio_tell",
          "old_text": "av_log(s, AV_LOG_ERROR, \"Failed to retrieve first frame\\n\")",
          "new_text": "avio_tell(sc->pb)",
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"Failed to retrieve first frame\\n\");",
          "new_line_content": "        cur_pos = avio_tell(sc->pb);",
          "content_same": false
        },
        {
          "line": 6372,
          "old_api": "av_mallocz",
          "new_api": "av_log",
          "old_text": "av_mallocz(title_len)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Chapter %d not found in file\\n\", i)",
          "old_line_content": "                if (!(title = av_mallocz(title_len)))",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"Chapter %d not found in file\\n\", i);",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": "avio_rb16",
          "new_api": "av_mallocz",
          "old_text": "avio_rb16(sc->pb)",
          "new_text": "av_mallocz(title_len)",
          "old_line_content": "                    ch = avio_rb16(sc->pb);",
          "new_line_content": "                if (!(title = av_mallocz(title_len)))",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "av_freep",
          "new_api": "AV_WB16",
          "old_text": "av_freep(&title)",
          "new_text": "AV_WB16(title, ch)",
          "old_line_content": "                av_freep(&title);",
          "new_line_content": "                        AV_WB16(title, ch);",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "avio_seek",
          "new_api": "avio_get_str",
          "old_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "new_text": "avio_get_str(sc->pb, INT_MAX, title + 2, len - 1)",
          "old_line_content": "        avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "new_line_content": "                            avio_get_str(sc->pb, INT_MAX, title + 2, len - 1);",
          "content_same": false
        },
        {
          "line": 6422,
          "old_api": "avio_tell",
          "new_api": "av_dict_set",
          "old_text": "avio_tell(sc->pb)",
          "new_text": "av_dict_set(&st->metadata, \"timecode\",\n                av_timecode_make_string(&tc, buf, value), 0)",
          "old_line_content": "    int64_t cur_pos = avio_tell(sc->pb);",
          "new_line_content": "    av_dict_set(&st->metadata, \"timecode\",",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": "avio_r8",
          "new_api": "avio_tell",
          "old_text": "avio_r8(s->pb)",
          "new_text": "avio_tell(sc->pb)",
          "old_line_content": "    mm = avio_r8(s->pb);",
          "new_line_content": "    int64_t cur_pos = avio_tell(sc->pb);",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": "av_dict_set",
          "new_api": "avio_seek",
          "old_text": "av_dict_set(&st->metadata, \"timecode\", buf, 0)",
          "new_text": "avio_seek(sc->pb, st->index_entries->pos, SEEK_SET)",
          "old_line_content": "    av_dict_set(&st->metadata, \"timecode\", buf, 0);",
          "new_line_content": "    avio_seek(sc->pb, st->index_entries->pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6439,
          "old_api": "avio_seek",
          "new_api": "avio_r8",
          "old_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "new_text": "avio_r8(s->pb)",
          "old_line_content": "    avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "new_line_content": "    hh = avio_r8(s->pb);",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "av_freep",
          "new_api": "ff_format_io_close",
          "old_text": "av_freep(&sc->elst_data)",
          "new_text": "ff_format_io_close(s, &sc->pb)",
          "old_line_content": "        av_freep(&sc->elst_data);",
          "new_line_content": "            ff_format_io_close(s, &sc->pb);",
          "content_same": false
        },
        {
          "line": 6509,
          "old_api": "av_free",
          "new_api": "av_freep",
          "old_text": "av_free(sc->extradata[j])",
          "new_text": "av_freep(&sc->stts_data)",
          "old_line_content": "                av_free(sc->extradata[j]);",
          "new_line_content": "        av_freep(&sc->stts_data);",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": "av_freep",
          "new_api": "av_free",
          "old_text": "av_freep(&sc->spherical)",
          "new_text": "av_free(sc->extradata[j])",
          "old_line_content": "        av_freep(&sc->spherical);",
          "new_line_content": "                av_free(sc->extradata[j]);",
          "content_same": false
        },
        {
          "line": 6524,
          "old_api": "avformat_free_context",
          "new_api": "av_aes_ctr_free",
          "old_text": "avformat_free_context(mov->dv_fctx)",
          "new_text": "av_aes_ctr_free(sc->cenc.aes_ctr)",
          "old_line_content": "        avformat_free_context(mov->dv_fctx);",
          "new_line_content": "        av_aes_ctr_free(sc->cenc.aes_ctr);",
          "content_same": false
        },
        {
          "line": 6595,
          "old_api": "avio_r8",
          "new_api": "avio_tell",
          "old_text": "avio_r8(f)",
          "new_text": "avio_tell(f)",
          "old_line_content": "    version = avio_r8(f);",
          "new_line_content": "    int64_t pos = avio_tell(f);",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": "avio_rb24",
          "new_api": "avio_rb32",
          "old_text": "avio_rb24(f)",
          "new_text": "avio_rb32(f)",
          "old_line_content": "    avio_rb24(f);",
          "new_line_content": "    uint32_t size = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": "avio_rb32",
          "new_api": "MKBETAG",
          "old_text": "avio_rb32(f)",
          "new_text": "MKBETAG('t', 'f', 'r', 'a')",
          "old_line_content": "    item_count = avio_rb32(f);",
          "new_line_content": "    if (avio_rb32(f) != MKBETAG('t', 'f', 'r', 'a')) {",
          "content_same": false
        },
        {
          "line": 6605,
          "old_api": "avio_feof",
          "new_api": "avio_rb24",
          "old_text": "avio_feof(f)",
          "new_text": "avio_rb24(f)",
          "old_line_content": "        if (avio_feof(f)) {",
          "new_line_content": "    avio_rb24(f);",
          "content_same": false
        },
        {
          "line": 6614,
          "old_api": "avio_rb32",
          "new_api": "avio_feof",
          "old_text": "avio_rb32(f)",
          "new_text": "avio_feof(f)",
          "old_line_content": "            offset = avio_rb32(f);",
          "new_line_content": "        if (avio_feof(f)) {",
          "content_same": false
        },
        {
          "line": 6620,
          "old_api": "update_frag_index",
          "new_api": "avio_rb64",
          "old_text": "update_frag_index(mov, offset)",
          "new_text": "avio_rb64(f)",
          "old_line_content": "        index = update_frag_index(mov, offset);",
          "new_line_content": "            offset = avio_rb64(f);",
          "content_same": false
        },
        {
          "line": 6629,
          "old_api": "avio_r8",
          "new_api": "update_frag_index",
          "old_text": "avio_r8(f)",
          "new_text": "update_frag_index(mov, offset)",
          "old_line_content": "            avio_r8(f);",
          "new_line_content": "        index = update_frag_index(mov, offset);",
          "content_same": false
        },
        {
          "line": 6640,
          "old_api": "avio_size",
          "new_api": "avio_r8",
          "old_text": "avio_size(f)",
          "new_text": "avio_r8(f)",
          "old_line_content": "    int64_t stream_size = avio_size(f);",
          "new_line_content": "            avio_r8(f);",
          "content_same": false
        },
        {
          "line": 6649,
          "old_api": "avio_rb32",
          "new_api": "avio_size",
          "old_text": "avio_rb32(f)",
          "new_text": "avio_size(f)",
          "old_line_content": "    mfra_size = avio_rb32(f);",
          "new_line_content": "    int64_t stream_size = avio_size(f);",
          "content_same": false
        },
        {
          "line": 6663,
          "old_api": "av_log",
          "new_api": "avio_seek",
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (tag mismatch)\\n\")",
          "new_text": "avio_seek(f, -mfra_size, SEEK_CUR)",
          "old_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (tag mismatch)\\n\");",
          "new_line_content": "    if ((seek_ret = avio_seek(f, -mfra_size, SEEK_CUR)) < 0) {",
          "content_same": false
        },
        {
          "line": 6668,
          "old_api": "read_tfra",
          "new_api": "av_log",
          "old_text": "read_tfra(c, f)",
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (size mismatch)\\n\")",
          "old_line_content": "        ret = read_tfra(c, f);",
          "new_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (size mismatch)\\n\");",
          "content_same": false
        },
        {
          "line": 6701,
          "old_api": "avio_size",
          "new_api": "av_log",
          "old_text": "avio_size(pb)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Invalid decryption key len %d expected %d\\n\",\n            mov->decryption_key_len, AES_CTR_KEY_SIZE)",
          "old_line_content": "        atom.size = avio_size(pb);",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"Invalid decryption key len %d expected %d\\n\",",
          "content_same": false
        },
        {
          "line": 6710,
          "old_api": "av_log",
          "new_api": "avio_size",
          "old_text": "av_log(s, AV_LOG_ERROR, \"error reading header\\n\")",
          "new_text": "avio_size(pb)",
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"error reading header\\n\");",
          "new_line_content": "        atom.size = avio_size(pb);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": "mov_read_close",
          "new_api": "avio_seek",
          "old_text": "mov_read_close(s)",
          "new_text": "avio_seek(pb, 0, SEEK_SET)",
          "old_line_content": "        mov_read_close(s);",
          "new_line_content": "            avio_seek(pb, 0, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6720,
          "old_api": "avio_tell",
          "new_api": "mov_read_close",
          "old_text": "avio_tell(pb)",
          "new_text": "mov_read_close(s)",
          "old_line_content": "    av_log(mov->fc, AV_LOG_TRACE, \"on_parse_exit_offset=%\"PRId64\"\\n\", avio_tell(pb));",
          "new_line_content": "            mov_read_close(s);",
          "content_same": false
        },
        {
          "line": 6726,
          "old_api": "AV_RL32",
          "new_api": "mov_read_close",
          "old_text": "AV_RL32(\"tmcd\")",
          "new_text": "mov_read_close(s)",
          "old_line_content": "            if (s->streams[i]->codecpar->codec_tag == AV_RL32(\"tmcd\")) {",
          "new_line_content": "        mov_read_close(s);",
          "content_same": false
        },
        {
          "line": 6729,
          "old_api": "mov_read_rtmd_track",
          "new_api": "avio_tell",
          "old_text": "mov_read_rtmd_track(s, s->streams[i])",
          "new_text": "avio_tell(pb)",
          "old_line_content": "                mov_read_rtmd_track(s, s->streams[i]);",
          "new_line_content": "    av_log(mov->fc, AV_LOG_TRACE, \"on_parse_exit_offset=%\"PRId64\"\\n\", avio_tell(pb));",
          "content_same": false
        },
        {
          "line": 7017,
          "old_api": "should_retry",
          "new_api": "FFMIN",
          "old_text": "should_retry(sc->pb, ret64)",
          "new_text": "FFMIN(sample->pos, mov->next_root_atom)",
          "old_line_content": "            if (should_retry(sc->pb, ret64)) {",
          "new_line_content": "        sample->pos = FFMIN(sample->pos, mov->next_root_atom);",
          "content_same": false
        },
        {
          "line": 7018,
          "old_api": "mov_current_sample_dec",
          "new_api": "FFMIN",
          "old_text": "mov_current_sample_dec(sc)",
          "new_text": "FFMIN(sample->size, (mov->next_root_atom - sample->pos))",
          "old_line_content": "                mov_current_sample_dec(sc);",
          "new_line_content": "        sample->size = FFMIN(sample->size, (mov->next_root_atom - sample->pos));",
          "content_same": false
        },
        {
          "line": 7040,
          "old_api": "av_log",
          "new_api": "mov_current_sample_dec",
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot append palette to packet\\n\")",
          "new_text": "mov_current_sample_dec(sc)",
          "old_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"Cannot append palette to packet\\n\");",
          "new_line_content": "                mov_current_sample_dec(sc);",
          "content_same": false
        },
        {
          "line": 7049,
          "old_api": "av_freep",
          "new_api": "av_log",
          "old_text": "av_freep(&pkt->data)",
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot append palette to packet\\n\")",
          "old_line_content": "            av_freep(&pkt->data);",
          "new_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"Cannot append palette to packet\\n\");",
          "content_same": false
        },
        {
          "line": 7051,
          "old_api": "avpriv_dv_get_packet",
          "new_api": "memcpy",
          "old_text": "avpriv_dv_get_packet(mov->dv_demux, pkt)",
          "new_text": "memcpy(pal, sc->palette, AVPALETTE_SIZE)",
          "old_line_content": "            ret = avpriv_dv_get_packet(mov->dv_demux, pkt);",
          "new_line_content": "                memcpy(pal, sc->palette, AVPALETTE_SIZE);",
          "content_same": false
        },
        {
          "line": 7057,
          "old_api": "AV_RB32",
          "new_api": "avpriv_dv_produce_packet",
          "old_text": "AV_RB32(pkt->data)",
          "new_text": "avpriv_dv_produce_packet(mov->dv_demux, pkt, pkt->data, pkt->size, pkt->pos)",
          "old_line_content": "            if (ff_mpa_check_header(AV_RB32(pkt->data)) < 0)",
          "new_line_content": "            avpriv_dv_produce_packet(mov->dv_demux, pkt, pkt->data, pkt->size, pkt->pos);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6144,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','o','o','v')",
          "old_line_content": "            }",
          "new_line_content": "                atom.type != MKTAG('m','o','o','v'))",
          "content_same": false
        },
        {
          "line": 6146,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','d','a','t')",
          "old_line_content": "            if (a.size == 1 && total_size + 8 <= atom.size) { /* 64 bit extended size */",
          "new_line_content": "                if (a.type == MKTAG('t','r','a','k') || a.type == MKTAG('m','d','a','t'))",
          "content_same": false
        },
        {
          "line": 6148,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Broken file, trak/mdat not at top-level\\n\")",
          "old_line_content": "                total_size += 8;",
          "new_line_content": "                    av_log(c->fc, AV_LOG_ERROR, \"Broken file, trak/mdat not at top-level\\n\");",
          "content_same": false
        },
        {
          "line": 6149,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, -8)",
          "old_line_content": "            }",
          "new_line_content": "                    avio_skip(pb, -8);",
          "content_same": false
        },
        {
          "line": 6156,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "        a.size -= 8;",
          "new_line_content": "                a.size = avio_rb64(pb) - 8;",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 64, 1, sc->time_scale)",
          "old_line_content": "                       \"stream %d, error opening alias: path='%s', dir='%s', \"",
          "new_line_content": "    avpriv_set_pts_info(st, 64, 1, sc->time_scale);",
          "content_same": false
        },
        {
          "line": 6160,
          "old_api": null,
          "new_api": "\"PRId64\"\\n\",\n               av_fourcc2str(a.type)",
          "old_text": null,
          "new_text": "\"PRId64\"\\n\",\n               av_fourcc2str(a.type)",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"type:'%s' parent:'%s' sz: %\"PRId64\" %\"PRId64\" %\"PRId64\"\\n\",",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "mov_build_index",
          "old_text": null,
          "new_text": "mov_build_index(c, st)",
          "old_line_content": "                       st->index, dref->path, dref->dir, dref->filename,",
          "new_line_content": "    mov_build_index(c, st);",
          "content_same": false
        },
        {
          "line": 6161,
          "old_api": null,
          "new_api": "av_fourcc2str",
          "old_text": null,
          "new_text": "av_fourcc2str(atom.type)",
          "old_line_content": "        for (i = 0; mov_default_parse_table[i].type; i++)",
          "new_line_content": "               av_fourcc2str(a.type), av_fourcc2str(atom.type), a.size, total_size, atom.size);",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": null,
          "new_api": "mov_open_dref",
          "old_text": null,
          "new_text": "mov_open_dref(c, &sc->pb, c->fc->filename, dref)",
          "old_line_content": "                   \"stream %d, alias: path='%s', dir='%s', \"",
          "new_line_content": "            if (mov_open_dref(c, &sc->pb, c->fc->filename, dref) < 0)",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n                       \"stream %d, error opening alias: path='%s', dir='%s', \"\n                       \"filename='%s', volume='%s', nlvl_from=%d, nlvl_to=%d\\n\",\n                       st->index, dref->path, dref->dir, dref->filename,\n                       dref->volume, dref->nlvl_from, dref->nlvl_to)",
          "old_line_content": "                   \"filename='%s', volume='%s', nlvl_from=%d, nlvl_to=%d.\"",
          "new_line_content": "                av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"Skipped opening external track: \"\n                   \"stream %d, alias: path='%s', dir='%s', \"\n                   \"filename='%s', volume='%s', nlvl_from=%d, nlvl_to=%d.\"\n                   \"Set enable_drefs to allow this.\\n\",\n                   st->index, dref->path, dref->dir, dref->filename,\n                   dref->volume, dref->nlvl_from, dref->nlvl_to)",
          "old_line_content": "        sc->pb = c->fc->pb;",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 6177,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('u','d','t','a')",
          "old_line_content": "            parse = mov_read_keys;",
          "new_line_content": "        if (!parse && (atom.type == MKTAG('u','d','t','a') ||",
          "content_same": false
        },
        {
          "line": 6178,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('i','l','s','t')",
          "old_line_content": "        }",
          "new_line_content": "                       atom.type == MKTAG('i','l','s','t')))",
          "content_same": false
        },
        {
          "line": 6184,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','e','t','a')",
          "old_line_content": "            int64_t left;",
          "new_line_content": "            atom.type == MKTAG('m','e','t','a') &&",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": null,
          "new_api": "av_d2q",
          "old_text": null,
          "new_text": "av_d2q(((double)st->codecpar->height * sc->width) /\n                                             ((double)st->codecpar->width * sc->height), INT_MAX)",
          "old_line_content": "    }",
          "new_line_content": "            st->sample_aspect_ratio = av_d2q(((double)st->codecpar->height * sc->width) /",
          "content_same": false
        },
        {
          "line": 6190,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, a.size)",
          "old_line_content": "            if (c->found_moov && c->found_mdat &&",
          "new_line_content": "            avio_skip(pb, a.size);",
          "content_same": false
        },
        {
          "line": 6194,
          "old_api": null,
          "new_api": "parse",
          "old_text": null,
          "new_text": "parse(c, pb, a)",
          "old_line_content": "                    c->next_root_atom = start_pos + a.size;",
          "new_line_content": "            int err = parse(c, pb, a);",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": null,
          "new_api": "av_reduce",
          "old_text": null,
          "new_text": "av_reduce(&st->r_frame_rate.num, &st->r_frame_rate.den,\n                      sc->time_scale, sc->stts_data[0].duration, INT_MAX)",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "            av_reduce(&st->r_frame_rate.num, &st->r_frame_rate.den,",
          "content_same": false
        },
        {
          "line": 6201,
          "old_api": null,
          "new_api": "avio_size",
          "old_text": null,
          "new_text": "avio_size(pb)",
          "old_line_content": "            else if (left < 0) {",
          "new_line_content": "                 start_pos + a.size == avio_size(pb))) {",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": null,
          "new_api": "TAG_IS_AVCI",
          "old_text": null,
          "new_text": "TAG_IS_AVCI(st->codecpar->codec_tag)",
          "old_line_content": "#endif",
          "new_line_content": "        TAG_IS_AVCI(st->codecpar->codec_tag)) {",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": null,
          "new_api": "ff_generate_avci_extradata",
          "old_text": null,
          "new_text": "ff_generate_avci_extradata(st)",
          "old_line_content": "#if CONFIG_H263_DECODER",
          "new_line_content": "        ret = ff_generate_avci_extradata(st);",
          "content_same": false
        },
        {
          "line": 6207,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "        }",
          "new_line_content": "            left = a.size - avio_tell(pb) + start_pos;",
          "content_same": false
        },
        {
          "line": 6209,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, left)",
          "old_line_content": "        total_size += a.size;",
          "new_line_content": "                avio_skip(pb, left);",
          "content_same": false
        },
        {
          "line": 6211,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING,\n                       \"overread end of atom '%.4s' by %\"PRId64\" bytes\\n\",\n                       (char*)&a.type, -left)",
          "old_line_content": "",
          "new_line_content": "                av_log(c->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, left, SEEK_CUR)",
          "old_line_content": "",
          "new_line_content": "                avio_seek(pb, left, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 6222,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, atom.size - total_size)",
          "old_line_content": "    uint32_t tag;",
          "new_line_content": "        avio_skip(pb, atom.size - total_size);",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->chunk_offsets)",
          "old_line_content": "}",
          "new_line_content": "    av_freep(&sc->chunk_offsets);",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->sample_sizes)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&sc->sample_sizes);",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->keyframes)",
          "old_line_content": "static int mov_read_ilst(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "    av_freep(&sc->keyframes);",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->stts_data)",
          "old_line_content": "{",
          "new_line_content": "    av_freep(&sc->stts_data);",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->stps_data)",
          "old_line_content": "    int ret;",
          "new_line_content": "    av_freep(&sc->stps_data);",
          "content_same": false
        },
        {
          "line": 4189,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->elst_data)",
          "old_line_content": "    c->itunes_metadata = 1;",
          "new_line_content": "    av_freep(&sc->elst_data);",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": null,
          "new_api": "mov_read_default",
          "old_text": null,
          "new_text": "mov_read_default(c, pb, atom)",
          "old_line_content": "",
          "new_line_content": "    ret = mov_read_default(c, pb, atom);",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('f','t','y','p')",
          "old_line_content": "                    )) {",
          "new_line_content": "        case MKTAG('f','t','y','p'):",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(p->buf+offset)",
          "old_line_content": "            } else {",
          "new_line_content": "                (AV_RB32(p->buf+offset) != 1 ||",
          "content_same": false
        },
        {
          "line": 6253,
          "old_api": null,
          "new_api": "AV_RB64",
          "old_text": null,
          "new_text": "AV_RB64(p->buf+offset + 8)",
          "old_line_content": "            }",
          "new_line_content": "                 AV_RB64(p->buf+offset + 8) == 0)) {",
          "content_same": false
        },
        {
          "line": 6255,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('f','t','y','p')",
          "old_line_content": "            break;",
          "new_line_content": "            } else if (tag == MKTAG('f','t','y','p') &&",
          "content_same": false
        },
        {
          "line": 6256,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('j','p','2',' ')",
          "old_line_content": "        /* those are more common words, so rate then a bit less */",
          "new_line_content": "                       (   AV_RL32(p->buf + offset + 8) == MKTAG('j','p','2',' ')",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    if (!c->meta_keys)",
          "new_line_content": "    count = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"The 'keys' atom with the invalid key count: %\"PRIu32\"\\n\", count)",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(c->meta_keys_count * sizeof(*c->meta_keys))",
          "old_line_content": "                   \"The key# %\"PRIu32\" in meta has invalid size:\"",
          "new_line_content": "    c->meta_keys = av_mallocz(c->meta_keys_count * sizeof(*c->meta_keys));",
          "content_same": false
        },
        {
          "line": 6269,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('j','u','n','k')",
          "old_line_content": "            /* if we only find those cause probedata is too small at least rate them */",
          "new_line_content": "        case MKTAG('j','u','n','k'):",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            return AVERROR_INVALIDDATA;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(p->buf+offset)",
          "old_line_content": "            break;",
          "new_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('s','k','i','p')",
          "old_line_content": "        }",
          "new_line_content": "        case MKTAG('s','k','i','p'):",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('u','u','i','d')",
          "old_line_content": "    }",
          "new_line_content": "        case MKTAG('u','u','i','d'):",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('p','r','f','l')",
          "old_line_content": "    if(score > AVPROBE_SCORE_MAX - 50 && moov_offset != -1) {",
          "new_line_content": "        case MKTAG('p','r','f','l'):",
          "content_same": false
        },
        {
          "line": 6279,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(score, AVPROBE_SCORE_EXTENSION)",
          "old_line_content": "         * MOV-packed MPEG-PS */",
          "new_line_content": "            score  = FFMAX(score, AVPROBE_SCORE_EXTENSION);",
          "content_same": false
        },
        {
          "line": 6280,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(p->buf+offset)",
          "old_line_content": "        offset = moov_offset;",
          "new_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','d','t','a')",
          "old_line_content": "    return 0;",
          "new_line_content": "        if (type != MKTAG('m','d','t','a')) {",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, key_size)",
          "old_line_content": "}",
          "new_line_content": "            avio_skip(pb, key_size);",
          "content_same": false
        },
        {
          "line": 6283,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(p->buf+offset)",
          "old_line_content": "               /* We found an actual hdlr atom */",
          "new_line_content": "            offset = FFMAX(4, AV_RB32(p->buf+offset)) + offset;",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(key_size + 1)",
          "old_line_content": "static int mov_read_custom(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "        c->meta_keys[i] = av_mallocz(key_size + 1);",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, c->meta_keys[i], key_size)",
          "old_line_content": "    uint8_t *key = NULL, *val = NULL, *mean = NULL;",
          "new_line_content": "        avio_read(pb, c->meta_keys[i], key_size);",
          "content_same": false
        },
        {
          "line": 6293,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('h','d','l','r')",
          "old_line_content": "            }else",
          "new_line_content": "            if(AV_RL32(p->buf + offset     ) == MKTAG('h','d','l','r') &&",
          "content_same": false
        },
        {
          "line": 6294,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','h','l','r')",
          "old_line_content": "                /* Keep looking */",
          "new_line_content": "               AV_RL32(p->buf + offset +  8) == MKTAG('m','h','l','r') &&",
          "content_same": false
        },
        {
          "line": 6295,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('M','P','E','G')",
          "old_line_content": "                offset+=2;",
          "new_line_content": "               AV_RL32(p->buf + offset + 12) == MKTAG('M','P','E','G')){",
          "content_same": false
        },
        {
          "line": 6136,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -8, SEEK_CUR)",
          "old_line_content": "            {",
          "new_line_content": "                avio_seek(pb, -8, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "    st = c->fc->streams[c->fc->nb_streams-1];",
          "new_line_content": "    int64_t end = avio_tell(pb) + atom.size;",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"Found media data tag MPEG indicating this is a MOV-packed MPEG-PS.\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                av_log(NULL, AV_LOG_WARNING, \"Found media data tag MPEG indicating this is a MOV-packed MPEG-PS.\\n\");",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "        len -= 12;",
          "new_line_content": "        if (end - avio_tell(pb) <= 12)",
          "content_same": false
        },
        {
          "line": 4268,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            p = &mean;",
          "new_line_content": "        len = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 4)",
          "old_line_content": "            p = &key;",
          "new_line_content": "        avio_skip(pb, 4); // flags",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m', 'e', 'a', 'n')",
          "old_line_content": "            break;",
          "new_line_content": "        if (tag == MKTAG('m', 'e', 'a', 'n'))",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 4)",
          "old_line_content": "            break;",
          "new_line_content": "            avio_skip(pb, 4);",
          "content_same": false
        },
        {
          "line": 6330,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Referenced QT chapter track not found\\n\")",
          "old_line_content": "            if (st->nb_index_entries) {",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"Referenced QT chapter track not found\\n\");",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len + 1)",
          "old_line_content": "        }",
          "new_line_content": "        *p = av_malloc(len + 1);",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    }",
          "new_line_content": "            ret = AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6343,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "old_line_content": "                st->attached_pic.stream_index = st->index;",
          "new_line_content": "                if (avio_seek(sc->pb, sample->pos, SEEK_SET) != sample->pos) {",
          "content_same": false
        },
        {
          "line": 6344,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Failed to retrieve first frame\\n\")",
          "old_line_content": "                st->attached_pic.flags       |= AV_PKT_FLAG_KEY;",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"Failed to retrieve first frame\\n\");",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": null,
          "new_api": "av_get_packet",
          "old_text": null,
          "new_text": "av_get_packet(sc->pb, &pkt, sample->size)",
          "old_line_content": "            st->codecpar->codec_id = AV_CODEC_ID_BIN_DATA;",
          "new_line_content": "                if (av_get_packet(sc->pb, &pkt, sample->size) < 0)",
          "content_same": false
        },
        {
          "line": 4301,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key, \"iTunSMPB\")",
          "old_line_content": "                        AV_DICT_DONT_STRDUP_KEY | AV_DICT_DONT_STRDUP_VAL);",
          "new_line_content": "        if (strcmp(key, \"iTunSMPB\") == 0) {",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": null,
          "new_api": "sscanf",
          "old_text": null,
          "new_text": "sscanf(val, \"%*X %X %X %X\", &priming, &remainder, &samples)",
          "old_line_content": "        }",
          "new_line_content": "            if(sscanf(val, \"%*X %X %X %X\", &priming, &remainder, &samples) == 3){",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key, \"cdec\")",
          "old_line_content": "",
          "new_line_content": "        if (strcmp(key, \"cdec\") != 0) {",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_VERBOSE,\n               \"Unhandled or malformed custom metadata of size %\"PRId64\"\\n\", atom.size)",
          "old_line_content": "}",
          "new_line_content": "        av_log(c->fc, AV_LOG_VERBOSE,",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, end, SEEK_SET)",
          "old_line_content": "    while (atom.size > 8) {",
          "new_line_content": "    avio_seek(pb, end, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6367,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING, \"ignoring stream duration which is shorter than chapters\\n\")",
          "old_line_content": "                // the first two bytes are the length of the title",
          "new_line_content": "                    av_log(s, AV_LOG_WARNING, \"ignoring stream duration which is shorter than chapters\\n\");",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&val)",
          "old_line_content": "        atom.size -= 4;",
          "new_line_content": "    av_freep(&val);",
          "content_same": false
        },
        {
          "line": 6371,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "old_line_content": "                title_len = 2*len + 1;",
          "new_line_content": "                if (avio_seek(sc->pb, sample->pos, SEEK_SET) != sample->pos) {",
          "content_same": false
        },
        {
          "line": 4328,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "}",
          "new_line_content": "        uint32_t tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(sc->pb)",
          "old_line_content": "                // instead by the presence of a BOM",
          "new_line_content": "                len = avio_rb16(sc->pb);",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('h','d','l','r')",
          "old_line_content": "// return 1 when matrix is identity, 0 otherwise",
          "new_line_content": "        if (tag == MKTAG('h','d','l','r')) {",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -8, SEEK_CUR)",
          "old_line_content": "#define IS_MATRIX_IDENT(matrix)            \\",
          "new_line_content": "            avio_seek(pb, -8, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": null,
          "new_api": "mov_read_default",
          "old_text": null,
          "new_text": "mov_read_default(c, pb, atom)",
          "old_line_content": "      (matrix)[1][1] == (1 << 16) &&       \\",
          "new_line_content": "            return mov_read_default(c, pb, atom);",
          "content_same": false
        },
        {
          "line": 6390,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(sc->pb)",
          "old_line_content": "                        else",
          "new_line_content": "                    ch = avio_rb16(sc->pb);",
          "content_same": false
        },
        {
          "line": 6392,
          "old_api": null,
          "new_api": "avio_get_str16be",
          "old_text": null,
          "new_text": "avio_get_str16be(sc->pb, len, title, title_len)",
          "old_line_content": "                    }",
          "new_line_content": "                        avio_get_str16be(sc->pb, len, title, title_len);",
          "content_same": false
        },
        {
          "line": 6394,
          "old_api": null,
          "new_api": "avio_get_str16le",
          "old_text": null,
          "new_text": "avio_get_str16le(sc->pb, len, title, title_len)",
          "old_line_content": "",
          "new_line_content": "                        avio_get_str16le(sc->pb, len, title, title_len);",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "avpriv_new_chapter",
          "old_text": null,
          "new_text": "avpriv_new_chapter(s, i, st->time_base, sample->timestamp, end, title)",
          "old_line_content": "static int parse_timecode_in_framenum_format(AVFormatContext *s, AVStream *st,",
          "new_line_content": "                avpriv_new_chapter(s, i, st->time_base, sample->timestamp, end, title);",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&title)",
          "old_line_content": "                                             uint32_t value, int flags)",
          "new_line_content": "                av_freep(&title);",
          "content_same": false
        },
        {
          "line": 6409,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "old_line_content": "    AVRational rate = st->avg_frame_rate;",
          "new_line_content": "        avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    }",
          "new_line_content": "    flags = avio_rb24(pb);",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "    /* highlevel (considering edits) duration in movie timebase */",
          "new_line_content": "        avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 6419,
          "old_api": null,
          "new_api": "av_timecode_init",
          "old_text": null,
          "new_text": "av_timecode_init(&tc, rate, flags, 0, s)",
          "old_line_content": "{",
          "new_line_content": "    int ret = av_timecode_init(&tc, rate, flags, 0, s);",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        avio_rb32(pb); /* modification time */",
          "content_same": false
        },
        {
          "line": 6423,
          "old_api": null,
          "new_api": "av_timecode_make_string",
          "old_text": null,
          "new_text": "av_timecode_make_string(&tc, buf, value)",
          "old_line_content": "    int hh, mm, ss, ff, drop;",
          "new_line_content": "                av_timecode_make_string(&tc, buf, value), 0);",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    //read in the display matrix (outlined in ISO 14496-12, Section 6.2.2)",
          "new_line_content": "    (version == 1) ? avio_rb64(pb) : avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    // they're kept in fixed point format through all calculations",
          "new_line_content": "    avio_rb32(pb); /* reserved */",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    // save u,v,z to store the whole matrix in the AV_PKT_DATA_DISPLAYMATRIX",
          "new_line_content": "    avio_rb32(pb); /* reserved */",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    for (i = 0; i < 3; i++) {",
          "new_line_content": "    avio_rb16(pb); /* layer */",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(s->pb, 13)",
          "old_line_content": "",
          "new_line_content": "    avio_skip(s->pb, 13);",
          "content_same": false
        },
        {
          "line": 6440,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(s->pb)",
          "old_line_content": "    return 0;",
          "new_line_content": "    mm = avio_r8(s->pb);",
          "content_same": false
        },
        {
          "line": 6441,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(s->pb)",
          "old_line_content": "}",
          "new_line_content": "    ss = avio_r8(s->pb);",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        display_matrix[i][0] = avio_rb32(pb);   // 16.16 fixed point",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    // apply the moov display matrix (after the tkhd one)",
          "new_line_content": "        display_matrix[i][1] = avio_rb32(pb);   // 16.16 fixed point",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    for (i = 0; i < 3; i++) {",
          "new_line_content": "        display_matrix[i][2] = avio_rb32(pb);   //  2.30 fixed point",
          "content_same": false
        },
        {
          "line": 6442,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(s->pb)",
          "old_line_content": "",
          "new_line_content": "    drop = avio_r8(s->pb);",
          "content_same": false
        },
        {
          "line": 6443,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(s->pb)",
          "old_line_content": "static int mov_read_timecode_track(AVFormatContext *s, AVStream *st)",
          "new_line_content": "    ff = avio_r8(s->pb);",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            for (e = 0; e < 3; e++) {",
          "new_line_content": "    width = avio_rb32(pb);       // 16.16 fixed point track width",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "                res_display_matrix[i][j] +=",
          "new_line_content": "    height = avio_rb32(pb);      // 16.16 fixed point track height",
          "content_same": false
        },
        {
          "line": 6444,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf, AV_TIMECODE_STR_SIZE, \"%02d:%02d:%02d%c%02d\",\n             hh, mm, ss, drop ? ';' : ':', ff)",
          "old_line_content": "{",
          "new_line_content": "    snprintf(buf, AV_TIMECODE_STR_SIZE, \"%02d:%02d:%02d%c%02d\",",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"timecode\", buf, 0)",
          "old_line_content": "    int flags = 0;",
          "new_line_content": "    av_dict_set(&st->metadata, \"timecode\", buf, 0);",
          "content_same": false
        },
        {
          "line": 6448,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "old_line_content": "    uint32_t value;",
          "new_line_content": "    avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6456,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(sc->pb)",
          "old_line_content": "    if (sc->tmcd_flags & 0x0001) flags |= AV_TIMECODE_FLAG_DROPFRAME;",
          "new_line_content": "    int64_t cur_pos = avio_tell(sc->pb);",
          "content_same": false
        },
        {
          "line": 6462,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, st->index_entries->pos, SEEK_SET)",
          "old_line_content": "     * No sample with tmcd track can be found with a QT timecode at the moment,",
          "new_line_content": "    avio_seek(sc->pb, st->index_entries->pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6463,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(s->pb)",
          "old_line_content": "     * despite what the tmcd track \"suggests\" (Counter flag set to 0 means QT",
          "new_line_content": "    value = avio_rb32(s->pb);",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": null,
          "new_api": "IS_MATRIX_IDENT",
          "old_text": null,
          "new_text": "IS_MATRIX_IDENT(res_display_matrix)",
          "old_line_content": "            for (j = 0; j < 3; j++)",
          "new_line_content": "    if (!IS_MATRIX_IDENT(res_display_matrix)) {",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->display_matrix)",
          "old_line_content": "#if FF_API_OLD_ROTATE_API",
          "new_line_content": "        av_freep(&sc->display_matrix);",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            char rotate_buf[64];",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6474,
          "old_api": null,
          "new_api": "parse_timecode_in_framenum_format",
          "old_text": null,
          "new_text": "parse_timecode_in_framenum_format(s, st, value, flags)",
          "old_line_content": "    int i, j;",
          "new_line_content": "    parse_timecode_in_framenum_format(s, st, value, flags);",
          "content_same": false
        },
        {
          "line": 6476,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "old_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "new_line_content": "    avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": null,
          "new_api": "av_display_rotation_get",
          "old_text": null,
          "new_text": "av_display_rotation_get(sc->display_matrix)",
          "old_line_content": "#endif",
          "new_line_content": "        rotate = av_display_rotation_get(sc->display_matrix);",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(rotate)",
          "old_line_content": "    }",
          "new_line_content": "        if (!isnan(rotate)) {",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(rotate_buf, sizeof(rotate_buf), \"%g\", rotate)",
          "old_line_content": "        double disp_transform[2];",
          "new_line_content": "            snprintf(rotate_buf, sizeof(rotate_buf), \"%g\", rotate);",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"rotate\", rotate_buf, 0)",
          "old_line_content": "",
          "new_line_content": "            av_dict_set(&st->metadata, \"rotate\", rotate_buf, 0);",
          "content_same": false
        },
        {
          "line": 6492,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->ctts_data)",
          "old_line_content": "        if (!sc->pb_is_copied)",
          "new_line_content": "        av_freep(&sc->ctts_data);",
          "content_same": false
        },
        {
          "line": 6494,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->drefs[j].path)",
          "old_line_content": "",
          "new_line_content": "            av_freep(&sc->drefs[j].path);",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->drefs[j].dir)",
          "old_line_content": "        sc->pb = NULL;",
          "new_line_content": "            av_freep(&sc->drefs[j].dir);",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": null,
          "new_api": "hypot",
          "old_text": null,
          "new_text": "hypot(sc->display_matrix[0 + i],\n                                      sc->display_matrix[3 + i])",
          "old_line_content": "    }",
          "new_line_content": "            disp_transform[i] = hypot(sc->display_matrix[0 + i],",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs((disp_transform[0] / disp_transform[1]) - 1.0)",
          "old_line_content": "{",
          "new_line_content": "            fabs((disp_transform[0] / disp_transform[1]) - 1.0) > 0.01)",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": null,
          "new_api": "av_d2q",
          "old_text": null,
          "new_text": "av_d2q(\n                disp_transform[0] / disp_transform[1],\n                INT_MAX)",
          "old_line_content": "    MOVFragment *frag = &c->fragment;",
          "new_line_content": "            st->sample_aspect_ratio = av_d2q(",
          "content_same": false
        },
        {
          "line": 6506,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->stsc_data)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&sc->stsc_data);",
          "content_same": false
        },
        {
          "line": 6507,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->sample_sizes)",
          "old_line_content": "        if (sc->extradata)",
          "new_line_content": "        av_freep(&sc->sample_sizes);",
          "content_same": false
        },
        {
          "line": 6508,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->keyframes)",
          "old_line_content": "            for (j = 0; j < sc->stsd_count; j++)",
          "new_line_content": "        av_freep(&sc->keyframes);",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->rap_group)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&sc->rap_group);",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        if (c->trex_data[i].track_id == frag->track_id) {",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "            trex = &c->trex_data[i];",
          "new_line_content": "    flags = avio_rb24(pb);",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        }",
          "new_line_content": "    track_id = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": null,
          "new_api": "set_frag_stream",
          "old_text": null,
          "new_text": "set_frag_stream(&c->frag_index, track_id)",
          "old_line_content": "    }",
          "new_line_content": "    set_frag_stream(&c->frag_index, track_id);",
          "content_same": false
        },
        {
          "line": 6522,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->cenc.auxiliary_info)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&sc->cenc.auxiliary_info);",
          "content_same": false
        },
        {
          "line": 6523,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->cenc.auxiliary_info_sizes)",
          "old_line_content": "    if (mov->dv_demux) {",
          "new_line_content": "        av_freep(&sc->cenc.auxiliary_info_sizes);",
          "content_same": false
        },
        {
          "line": 6526,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->stereo3d)",
          "old_line_content": "    }",
          "new_line_content": "        av_freep(&sc->stereo3d);",
          "content_same": false
        },
        {
          "line": 6527,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->spherical)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&sc->spherical);",
          "content_same": false
        },
        {
          "line": 6528,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->mastering)",
          "old_line_content": "    if (mov->meta_keys) {",
          "new_line_content": "        av_freep(&sc->mastering);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding trex\\n\")",
          "old_line_content": "    frag->duration = flags & MOV_TFHD_DEFAULT_DURATION ?",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding trex\\n\");",
          "content_same": false
        },
        {
          "line": 6529,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->coll)",
          "old_line_content": "        for (i = 1; i < mov->meta_keys_count; i++) {",
          "new_line_content": "        av_freep(&sc->coll);",
          "content_same": false
        },
        {
          "line": 6533,
          "old_api": null,
          "new_api": "avformat_free_context",
          "old_text": null,
          "new_text": "avformat_free_context(mov->dv_fctx)",
          "old_line_content": "    }",
          "new_line_content": "        avformat_free_context(mov->dv_fctx);",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "    frag->stsd_id  = flags & MOV_TFHD_STSD_ID ? avio_rb32(pb) : trex->stsd_id;",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "                     avio_rb32(pb) : trex->duration;",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "{",
          "new_line_content": "                     avio_rb32(pb) : trex->size;",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    void *new_tracks;",
          "new_line_content": "                     avio_rb32(pb) : trex->flags;",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"frag flags 0x%x\\n\", frag->flags)",
          "old_line_content": "",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"frag flags 0x%x\\n\", frag->flags);",
          "content_same": false
        },
        {
          "line": 6545,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->bitrates)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&mov->bitrates);",
          "content_same": false
        },
        {
          "line": 6548,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->frag_index.item[i].stream_info)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&mov->frag_index.item[i].stream_info);",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->frag_index.item)",
          "old_line_content": "{",
          "new_line_content": "    av_freep(&mov->frag_index.item);",
          "content_same": false
        },
        {
          "line": 6552,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->aes_decrypt)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&mov->aes_decrypt);",
          "content_same": false
        },
        {
          "line": 6553,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->chapter_tracks)",
          "old_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "new_line_content": "    av_freep(&mov->chapter_tracks);",
          "content_same": false
        },
        {
          "line": 4507,
          "old_api": null,
          "new_api": "av_malloc_array",
          "old_text": null,
          "new_text": "av_malloc_array(num, sizeof(int))",
          "old_line_content": "",
          "new_line_content": "    if (!(new_tracks = av_malloc_array(num, sizeof(int))))",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    return 0;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(c->chapter_tracks)",
          "old_line_content": "",
          "new_line_content": "    av_free(c->chapter_tracks);",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        c->chapter_tracks[i] = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 6581,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('t','m','c','d')",
          "old_line_content": "}",
          "new_line_content": "        if (st->codecpar->codec_tag  == MKTAG('t','m','c','d') &&",
          "content_same": false
        },
        {
          "line": 6582,
          "old_api": null,
          "new_api": "tmcd_is_referenced",
          "old_text": null,
          "new_text": "tmcd_is_referenced(s, i + 1)",
          "old_line_content": "",
          "new_line_content": "            !tmcd_is_referenced(s, i + 1)) {",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(st->metadata, \"timecode\", NULL, 0)",
          "old_line_content": "static int read_tfra(MOVContext *mov, AVIOContext *f)",
          "new_line_content": "            AVDictionaryEntry *tcr = av_dict_get(st->metadata, \"timecode\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 4537,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "static int mov_read_tfdt(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "    avio_rb24(pb); /* flags */",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "{",
          "new_line_content": "    trex->track_id = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4539,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    MOVFragment *frag = &c->fragment;",
          "new_line_content": "    trex->stsd_id  = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    AVStream *st = NULL;",
          "new_line_content": "    trex->duration = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    MOVStreamContext *sc;",
          "new_line_content": "    trex->size     = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    int version, i;",
          "new_line_content": "    trex->flags    = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&s->metadata, \"timecode\", tcr->value, 0)",
          "old_line_content": "    int version, fieldlength, i, j;",
          "new_line_content": "                av_dict_set(&s->metadata, \"timecode\", tcr->value, 0);",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_VERBOSE, \"found tfra\\n\")",
          "old_line_content": "        int index;",
          "new_line_content": "    av_log(mov->fc, AV_LOG_VERBOSE, \"found tfra\\n\");",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(f)",
          "old_line_content": "",
          "new_line_content": "    version = avio_r8(f);",
          "content_same": false
        },
        {
          "line": 6606,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "            return AVERROR_INVALIDDATA;",
          "new_line_content": "    track_id = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 6607,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "        }",
          "new_line_content": "    fieldlength = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "",
          "new_line_content": "    item_count = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "    if (frag_stream_info)",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "        frag_stream_info->tfdt_dts = base_media_decode_time;",
          "new_line_content": "    avio_rb24(pb); /* flags */",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "",
          "new_line_content": "        base_media_decode_time = avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 6619,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(f)",
          "old_line_content": "        // initial PTS of the fragment.",
          "new_line_content": "            time   = avio_rb64(f);",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "}",
          "new_line_content": "        base_media_decode_time = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 6622,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "        if (frag_stream_info &&",
          "new_line_content": "            time   = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 6623,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "            frag_stream_info->first_tfra_pts == AV_NOPTS_VALUE)",
          "new_line_content": "            offset = avio_rb32(f);",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": null,
          "new_api": "get_current_frag_stream_info",
          "old_text": null,
          "new_text": "get_current_frag_stream_info(&c->frag_index)",
          "old_line_content": "{",
          "new_line_content": "    frag_stream_info = get_current_frag_stream_info(&c->frag_index);",
          "content_same": false
        },
        {
          "line": 6630,
          "old_api": null,
          "new_api": "get_frag_stream_info",
          "old_text": null,
          "new_text": "get_frag_stream_info(&mov->frag_index, index, track_id)",
          "old_line_content": "        for (j = 0; j < ((fieldlength >> 0) & 3) + 1; j++)",
          "new_line_content": "        frag_stream_info = get_frag_stream_info(&mov->frag_index, index, track_id);",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(f)",
          "old_line_content": "}",
          "new_line_content": "            avio_r8(f);",
          "content_same": false
        },
        {
          "line": 6638,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(f)",
          "old_line_content": "static int mov_read_mfra(MOVContext *c, AVIOContext *f)",
          "new_line_content": "            avio_r8(f);",
          "content_same": false
        },
        {
          "line": 6643,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(f, pos + size, SEEK_SET)",
          "old_line_content": "    int32_t mfra_size;",
          "new_line_content": "    avio_seek(f, pos + size, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(f)",
          "old_line_content": "    if (mfra_size < 0 || mfra_size > stream_size) {",
          "new_line_content": "    int64_t original_pos = avio_tell(f);",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id)",
          "old_line_content": "    //",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id);",
          "content_same": false
        },
        {
          "line": 6660,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (unreasonable size)\\n\")",
          "old_line_content": "        goto fail;",
          "new_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (unreasonable size)\\n\");",
          "content_same": false
        },
        {
          "line": 6667,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(f)",
          "old_line_content": "    do {",
          "new_line_content": "    if (avio_rb32(f) != mfra_size) {",
          "content_same": false
        },
        {
          "line": 6671,
          "old_api": null,
          "new_api": "MKBETAG",
          "old_text": null,
          "new_text": "MKBETAG('m', 'f', 'r', 'a')",
          "old_line_content": "    } while (!ret);",
          "new_line_content": "    if (avio_rb32(f) != MKBETAG('m', 'f', 'r', 'a')) {",
          "content_same": false
        },
        {
          "line": 6672,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (tag mismatch)\\n\")",
          "old_line_content": "    ret = 0;",
          "new_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (tag mismatch)\\n\");",
          "content_same": false
        },
        {
          "line": 6675,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_VERBOSE, \"stream has mfra\\n\")",
          "old_line_content": "    if (seek_ret < 0) {",
          "new_line_content": "    av_log(c->fc, AV_LOG_VERBOSE, \"stream has mfra\\n\");",
          "content_same": false
        },
        {
          "line": 6677,
          "old_api": null,
          "new_api": "read_tfra",
          "old_text": null,
          "new_text": "read_tfra(c, f)",
          "old_line_content": "               \"failed to seek back after looking for mfra\\n\");",
          "new_line_content": "        ret = read_tfra(c, f);",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 4633,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    if (frag_stream_info)",
          "new_line_content": "    entries = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"flags 0x%x entries %u\\n\", flags, entries)",
          "old_line_content": "    {",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"flags 0x%x entries %u\\n\", flags, entries);",
          "content_same": false
        },
        {
          "line": 6683,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(f, original_pos, SEEK_SET)",
          "old_line_content": "static int mov_read_header(AVFormatContext *s)",
          "new_line_content": "    seek_ret = avio_seek(f, original_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"failed to seek back after looking for mfra\\n\")",
          "old_line_content": "    MOVContext *mov = s->priv_data;",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "                    \", using it for pts\\n\", pts);",
          "new_line_content": "    if (flags & MOV_TRUN_FIRST_SAMPLE_FLAGS) first_sample_flags = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4641,
          "old_api": null,
          "new_api": "get_current_frag_stream_info",
          "old_text": null,
          "new_text": "get_current_frag_stream_info(&c->frag_index)",
          "old_line_content": "            // FIXME: sidx earliest_presentation_time is *PTS*, s.b.",
          "new_line_content": "    frag_stream_info = get_current_frag_stream_info(&c->frag_index);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"found mfra time %\"PRId64\n                    \", using it for pts\\n\", pts)",
          "old_line_content": "            dts = frag_stream_info->tfdt_dts - sc->time_offset;",
          "new_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found mfra time %\"PRId64",
          "content_same": false
        },
        {
          "line": 6697,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"root\")",
          "old_line_content": "    mov->fc = s;",
          "new_line_content": "    MOVAtom atom = { AV_RL32(\"root\") };",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"found sidx time %\"PRId64\n                    \", using it for pts\\n\", pts)",
          "old_line_content": "                    \", using it for dts\\n\", dts);",
          "new_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found sidx time %\"PRId64",
          "content_same": false
        },
        {
          "line": 6703,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        atom.size = INT64_MAX;",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64\n                    \", using it for dts\\n\", dts)",
          "old_line_content": "    distance = 0;",
          "new_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64\n                \", using it for dts\\n\", dts)",
          "old_line_content": "        entries = UINT_MAX / sizeof(AVIndexEntry) - st->nb_index_entries;",
          "new_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64",
          "content_same": false
        },
        {
          "line": 6718,
          "old_api": null,
          "new_api": "mov_read_default",
          "old_text": null,
          "new_text": "mov_read_default(mov, pb, atom)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "        if ((err = mov_read_default(mov, pb, atom)) < 0) {",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"first sample flags 0x%x\\n\", first_sample_flags)",
          "old_line_content": "",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"first sample flags 0x%x\\n\", first_sample_flags);",
          "content_same": false
        },
        {
          "line": 6719,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"error reading header\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"error reading header\\n\");",
          "content_same": false
        },
        {
          "line": 4676,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Failed to add index entry\\n\")",
          "old_line_content": "    if(!new_entries)",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Failed to add index entry\\n\");",
          "content_same": false
        },
        {
          "line": 6725,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"moov atom not found\\n\")",
          "old_line_content": "        for (i = 0; i < s->nb_streams; i++)",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"moov atom not found\\n\");",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "av_fast_realloc",
          "old_text": null,
          "new_text": "av_fast_realloc(st->index_entries,\n                                  &st->index_entries_allocated_size,\n                                  requested_size)",
          "old_line_content": "                                requested_size);",
          "new_line_content": "    new_entries = av_fast_realloc(st->index_entries,",
          "content_same": false
        },
        {
          "line": 6733,
          "old_api": null,
          "new_api": "mov_read_chapters",
          "old_text": null,
          "new_text": "mov_read_chapters(s)",
          "old_line_content": "    /* copy timecode metadata from tmcd tracks to the related video streams */",
          "new_line_content": "            mov_read_chapters(s);",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"tmcd\")",
          "old_line_content": "        AVStream *st = s->streams[i];",
          "new_line_content": "            if (s->streams[i]->codecpar->codec_tag == AV_RL32(\"tmcd\")) {",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": null,
          "new_api": "mov_read_timecode_track",
          "old_text": null,
          "new_text": "mov_read_timecode_track(s, s->streams[i])",
          "old_line_content": "        MOVStreamContext *sc = st->priv_data;",
          "new_line_content": "                mov_read_timecode_track(s, s->streams[i]);",
          "content_same": false
        },
        {
          "line": 6737,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"rtmd\")",
          "old_line_content": "        if (sc->timecode_track > 0) {",
          "new_line_content": "            } else if (s->streams[i]->codecpar->codec_tag == AV_RL32(\"rtmd\")) {",
          "content_same": false
        },
        {
          "line": 6738,
          "old_api": null,
          "new_api": "mov_read_rtmd_track",
          "old_text": null,
          "new_text": "mov_read_rtmd_track(s, s->streams[i])",
          "old_line_content": "            AVDictionaryEntry *tcr;",
          "new_line_content": "                mov_read_rtmd_track(s, s->streams[i]);",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    if (index_entry_pos < st->nb_index_entries) {",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(st->index_entries + index_entry_pos + entries,\n                st->index_entries + index_entry_pos,\n                sizeof(*st->index_entries) *\n                (st->nb_index_entries - index_entry_pos))",
          "old_line_content": "        }",
          "new_line_content": "        memmove(st->index_entries + index_entry_pos + entries,",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(sc->ctts_data + index_entry_pos + entries,\n                sc->ctts_data + index_entry_pos,\n                sizeof(*sc->ctts_data) * (sc->ctts_count - index_entry_pos))",
          "old_line_content": "    sc->ctts_count = st->nb_index_entries;",
          "new_line_content": "        memmove(sc->ctts_data + index_entry_pos + entries,",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(s->streams[tmcd_st_id]->metadata, \"timecode\", NULL, 0)",
          "old_line_content": "        MOVStreamContext *sc = st->priv_data;",
          "new_line_content": "            tcr = av_dict_get(s->streams[tmcd_st_id]->metadata, \"timecode\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 6758,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"timecode\", tcr->value, 0)",
          "old_line_content": "        if(st->codecpar->codec_type == AVMEDIA_TYPE_AUDIO && st->codecpar->codec_id == AV_CODEC_ID_AAC) {",
          "new_line_content": "                av_dict_set(&st->metadata, \"timecode\", tcr->value, 0);",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": null,
          "new_api": "export_orphan_timecode",
          "old_text": null,
          "new_text": "export_orphan_timecode(s)",
          "old_line_content": "        if (st->codecpar->codec_type == AVMEDIA_TYPE_VIDEO && sc->nb_frames_for_fps > 0 && sc->duration_for_fps > 0)",
          "new_line_content": "    export_orphan_timecode(s);",
          "content_same": false
        },
        {
          "line": 6766,
          "old_api": null,
          "new_api": "fix_timescale",
          "old_text": null,
          "new_text": "fix_timescale(mov, sc)",
          "old_line_content": "                st->codecpar->width  = sc->width;",
          "new_line_content": "        fix_timescale(mov, sc);",
          "content_same": false
        },
        {
          "line": 6771,
          "old_api": null,
          "new_api": "av_reduce",
          "old_text": null,
          "new_text": "av_reduce(&st->avg_frame_rate.num, &st->avg_frame_rate.den,\n                      sc->time_scale*(int64_t)sc->nb_frames_for_fps, sc->duration_for_fps, INT_MAX)",
          "old_line_content": "                    return err;",
          "new_line_content": "            av_reduce(&st->avg_frame_rate.num, &st->avg_frame_rate.den,",
          "content_same": false
        },
        {
          "line": 6779,
          "old_api": null,
          "new_api": "mov_rewrite_dvd_sub_extradata",
          "old_text": null,
          "new_text": "mov_rewrite_dvd_sub_extradata(st)",
          "old_line_content": "            st->need_parsing = AVSTREAM_PARSE_FULL;",
          "new_line_content": "                if ((err = mov_rewrite_dvd_sub_extradata(st)) < 0)",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "                dts -= ctts_duration;",
          "new_line_content": "        if (flags & MOV_TRUN_SAMPLE_DURATION) sample_duration = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            } else {",
          "new_line_content": "        if (flags & MOV_TRUN_SAMPLE_SIZE)     sample_size     = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "                dts -= sc->time_offset;",
          "new_line_content": "        if (flags & MOV_TRUN_SAMPLE_FLAGS)    sample_flags    = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            }",
          "new_line_content": "        if (flags & MOV_TRUN_SAMPLE_CTS)      ctts_duration   = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": null,
          "new_api": "mov_update_dts_shift",
          "old_text": null,
          "new_text": "mov_update_dts_shift(sc, ctts_duration)",
          "old_line_content": "                   \"pts %\"PRId64\" calculated dts %\"PRId64",
          "new_line_content": "        mov_update_dts_shift(sc, ctts_duration);",
          "content_same": false
        },
        {
          "line": 6787,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_VERBOSE, \"Forcing full parsing for mp3 stream\\n\")",
          "old_line_content": "            if (st->duration > 0) {",
          "new_line_content": "            av_log(s, AV_LOG_VERBOSE, \"Forcing full parsing for mp3 stream\\n\");",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG,\n                   \"pts %\"PRId64\" calculated dts %\"PRId64\n                   \" sc->dts_shift %d ctts.duration %d\"\n                   \" sc->time_offset %\"PRId64\n                   \" flags & MOV_TRUN_SAMPLE_CTS %d\\n\",\n                   pts, dts,\n                   sc->dts_shift, ctts_duration,\n                   sc->time_offset, flags & MOV_TRUN_SAMPLE_CTS)",
          "old_line_content": "        }",
          "new_line_content": "            av_log(c->fc, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 6798,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",\n                           sc->data_size, sc->time_scale)",
          "old_line_content": "",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",",
          "content_same": false
        },
        {
          "line": 6800,
          "old_api": null,
          "new_api": "mov_read_close",
          "old_text": null,
          "new_text": "mov_read_close(s)",
          "old_line_content": "        for (i = 0; i < s->nb_streams; i++) {",
          "new_line_content": "                    mov_read_close(s);",
          "content_same": false
        },
        {
          "line": 6814,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",\n                           sc->data_size, sc->time_scale)",
          "old_line_content": "    }",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",",
          "content_same": false
        },
        {
          "line": 6816,
          "old_api": null,
          "new_api": "mov_read_close",
          "old_text": null,
          "new_text": "mov_read_close(s)",
          "old_line_content": "    for (i = 0; i < mov->bitrates_count && i < s->nb_streams; i++) {",
          "new_line_content": "                    mov_read_close(s);",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %d, offset %\"PRIx64\", dts %\"PRId64\", \"\n                \"size %u, distance %d, keyframe %d\\n\", st->index,\n                index_entry_pos, offset, dts, sample_size, distance, keyframe)",
          "old_line_content": "    }",
          "new_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %d, offset %\"PRIx64\", dts %\"PRId64\", \"",
          "content_same": false
        },
        {
          "line": 6831,
          "old_api": null,
          "new_api": "ff_rfps_calculate",
          "old_text": null,
          "new_text": "ff_rfps_calculate(s)",
          "old_line_content": "            if (err < 0) {",
          "new_line_content": "    ff_rfps_calculate(s);",
          "content_same": false
        },
        {
          "line": 6839,
          "old_api": null,
          "new_api": "ff_replaygain_export",
          "old_text": null,
          "new_text": "ff_replaygain_export(st, s->metadata)",
          "old_line_content": "                                              sizeof(int32_t) * 9);",
          "new_line_content": "            err = ff_replaygain_export(st, s->metadata);",
          "content_same": false
        },
        {
          "line": 6841,
          "old_api": null,
          "new_api": "mov_read_close",
          "old_text": null,
          "new_text": "mov_read_close(s)",
          "old_line_content": "                    return err;",
          "new_line_content": "                mov_read_close(s);",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(st->index_entries + index_entry_pos,\n                st->index_entries + index_entry_pos + gap,\n                sizeof(*st->index_entries) *\n                (st->nb_index_entries - (index_entry_pos + gap)))",
          "old_line_content": "        st->nb_index_entries -= gap;",
          "new_line_content": "        memmove(st->index_entries + index_entry_pos,",
          "content_same": false
        },
        {
          "line": 6847,
          "old_api": null,
          "new_api": "av_stream_add_side_data",
          "old_text": null,
          "new_text": "av_stream_add_side_data(st, AV_PKT_DATA_DISPLAYMATRIX, (uint8_t*)sc->display_matrix,\n                                              sizeof(int32_t) * 9)",
          "old_line_content": "                                              (uint8_t *)sc->stereo3d,",
          "new_line_content": "                err = av_stream_add_side_data(st, AV_PKT_DATA_DISPLAYMATRIX, (uint8_t*)sc->display_matrix,",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(sc->ctts_data + index_entry_pos,\n                sc->ctts_data + index_entry_pos + gap,\n                sizeof(*sc->ctts_data) *\n                (sc->ctts_count - (index_entry_pos + gap)))",
          "old_line_content": "        }",
          "new_line_content": "        memmove(sc->ctts_data + index_entry_pos,",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": null,
          "new_api": "fix_frag_index_entries",
          "old_text": null,
          "new_text": "fix_frag_index_entries(&c->frag_index, next_frag_index,\n                           frag->track_id, entries)",
          "old_line_content": "",
          "new_line_content": "    fix_frag_index_entries(&c->frag_index, next_frag_index,",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted TRUN atom\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted TRUN atom\\n\");",
          "content_same": false
        },
        {
          "line": 6882,
          "old_api": null,
          "new_api": "av_stream_add_side_data",
          "old_text": null,
          "new_text": "av_stream_add_side_data(st, AV_PKT_DATA_CONTENT_LIGHT_LEVEL,\n                                              (uint8_t *)sc->coll,\n                                              sc->coll_size)",
          "old_line_content": "        }",
          "new_line_content": "                err = av_stream_add_side_data(st, AV_PKT_DATA_CONTENT_LIGHT_LEVEL,",
          "content_same": false
        },
        {
          "line": 6893,
          "old_api": null,
          "new_api": "ff_configure_buffers_for_index",
          "old_text": null,
          "new_text": "ff_configure_buffers_for_index(s, AV_TIME_BASE)",
          "old_line_content": "static AVIndexEntry *mov_find_next_sample(AVFormatContext *s, AVStream **st)",
          "new_line_content": "    ff_configure_buffers_for_index(s, AV_TIME_BASE);",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "    if (version > 1) {",
          "new_line_content": "    int64_t offset = avio_tell(pb) + atom.size, pts, timestamp;",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "    for (i = 0; i < c->fc->nb_streams; i++) {",
          "new_line_content": "    version = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(c->fc, \"sidx version %u\", version)",
          "old_line_content": "            st = c->fc->streams[i];",
          "new_line_content": "        avpriv_request_sample(c->fc, \"sidx version %u\", version);",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    if (!st) {",
          "new_line_content": "    avio_rb24(pb); // flags",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    track_id = avio_rb32(pb); // Reference ID",
          "content_same": false
        },
        {
          "line": 6912,
          "old_api": null,
          "new_api": "av_rescale",
          "old_text": null,
          "new_text": "av_rescale(current_sample->timestamp, AV_TIME_BASE, msc->time_scale)",
          "old_line_content": "                *st = avst;",
          "new_line_content": "            int64_t dts = av_rescale(current_sample->timestamp, AV_TIME_BASE, msc->time_scale);",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_TRACE, \"stream %d, sample %d, dts %\"PRId64\"\\n\", i, msc->current_sample, dts)",
          "old_line_content": "            }",
          "new_line_content": "            av_log(s, AV_LOG_TRACE, \"stream %d, sample %d, dts %\"PRId64\"\\n\", i, msc->current_sample, dts);",
          "content_same": false
        },
        {
          "line": 6917,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(best_dts - dts)",
          "old_line_content": "}",
          "new_line_content": "                 ((FFABS(best_dts - dts) <= AV_TIME_BASE && current_sample->pos < sample->pos) ||",
          "content_same": false
        },
        {
          "line": 6918,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(best_dts - dts)",
          "old_line_content": "",
          "new_line_content": "                  (FFABS(best_dts - dts) > AV_TIME_BASE && dts < best_dts)))))) {",
          "content_same": false
        },
        {
          "line": 6929,
          "old_api": null,
          "new_api": "avio_feof",
          "old_text": null,
          "new_text": "avio_feof(pb)",
          "old_line_content": "    MOVContext *mov = s->priv_data;",
          "new_line_content": "    if (error_code == AVERROR_EOF || avio_feof(pb))",
          "content_same": false
        },
        {
          "line": 4887,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        offset += avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "        int index;",
          "new_line_content": "        pts = avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "        MOVFragmentStreamInfo * frag_stream_info;",
          "new_line_content": "        offset += avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 4893,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "        if (size & 0x80000000) {",
          "new_line_content": "    avio_rb16(pb); // reserved",
          "content_same": false
        },
        {
          "line": 6942,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, target, SEEK_SET)",
          "old_line_content": "        if (index + 1 < mov->frag_index.nb_items)",
          "new_line_content": "    if (avio_seek(s->pb, target, SEEK_SET) != target) {",
          "content_same": false
        },
        {
          "line": 4895,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "            return AVERROR_PATCHWELCOME;",
          "new_line_content": "    item_count = avio_rb16(pb);",
          "content_same": false
        },
        {
          "line": 6943,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"root atom offset 0x%\"PRIx64\": partial file\\n\", target)",
          "old_line_content": "            mov->next_root_atom = mov->frag_index.item[index + 1].moof_offset;",
          "new_line_content": "        av_log(mov->fc, AV_LOG_ERROR, \"root atom offset 0x%\"PRIx64\": partial file\\n\", target);",
          "content_same": false
        },
        {
          "line": 6949,
          "old_api": null,
          "new_api": "search_frag_moof_offset",
          "old_text": null,
          "new_text": "search_frag_moof_offset(&mov->frag_index, target)",
          "old_line_content": "    mov->found_mdat = 0;",
          "new_line_content": "        index = search_frag_moof_offset(&mov->frag_index, target);",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    if (!sc->stts_data)",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(c->fc, \"sidx reference_type 1\")",
          "old_line_content": "            frag_stream_info->sidx_pts = timestamp;",
          "new_line_content": "            avpriv_request_sample(c->fc, \"sidx reference_type 1\");",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        pts += duration;",
          "new_line_content": "        avio_rb32(pb); // sap_flags",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pts, st->time_base, timescale)",
          "old_line_content": "    }",
          "new_line_content": "        timestamp = av_rescale_q(pts, st->time_base, timescale);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(i, 1024 * 1024)",
          "old_line_content": "        unsigned int sample_count;",
          "new_line_content": "        unsigned min_entries = FFMIN(FFMAX(i, 1024 * 1024), entries);",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": null,
          "new_api": "update_frag_index",
          "old_text": null,
          "new_text": "update_frag_index(c, offset)",
          "old_line_content": "    st->duration = sc->track_end = pts;",
          "new_line_content": "        index = update_frag_index(c, offset);",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": null,
          "new_api": "get_frag_stream_info",
          "old_text": null,
          "new_text": "get_frag_stream_info(&c->frag_index, index, track_id)",
          "old_line_content": "",
          "new_line_content": "        frag_stream_info = get_frag_stream_info(&c->frag_index, index, track_id);",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": null,
          "new_api": "av_fast_realloc",
          "old_text": null,
          "new_text": "av_fast_realloc(sc->stts_data, &alloc_size,\n                                             min_entries * sizeof(*sc->stts_data))",
          "old_line_content": "",
          "new_line_content": "        MOVStts *stts_data = av_fast_realloc(sc->stts_data, &alloc_size,",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->stts_data)",
          "old_line_content": "",
          "new_line_content": "            av_freep(&sc->stts_data);",
          "content_same": false
        },
        {
          "line": 2865,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        sc->stts_data[i].duration= sample_duration;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"root\")",
          "old_line_content": "",
          "new_line_content": "    ret = mov_read_default(mov, s->pb, (MOVAtom){ AV_RL32(\"root\"), INT64_MAX });",
          "content_same": false
        },
        {
          "line": 6963,
          "old_api": null,
          "new_api": "avio_feof",
          "old_text": null,
          "new_text": "avio_feof(s->pb)",
          "old_line_content": "    uint8_t *side, *extradata;",
          "new_line_content": "    if (avio_feof(s->pb))",
          "content_same": false
        },
        {
          "line": 6965,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "",
          "new_line_content": "    av_log(s, AV_LOG_TRACE, \"read fragments, offset 0x%\"PRIx64\"\\n\", avio_tell(s->pb));",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        if (   i+1 == entries",
          "new_line_content": "        sample_count=avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            && i",
          "new_line_content": "        sample_duration = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": null,
          "new_api": "avio_size",
          "old_text": null,
          "new_text": "avio_size(pb)",
          "old_line_content": "                    ref_st = c->fc->streams[j];",
          "new_line_content": "    if (offset == avio_size(pb)) {",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"sample_count=%d, sample_duration=%d\\n\",\n                sample_count, sample_duration)",
          "old_line_content": "        duration+=(int64_t)sample_duration*sample_count;",
          "new_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"sample_count=%d, sample_duration=%d\\n\",",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": null,
          "new_api": "av_packet_new_side_data",
          "old_text": null,
          "new_text": "av_packet_new_side_data(pkt,\n                                       AV_PKT_DATA_NEW_EXTRADATA,\n                                       extradata_size)",
          "old_line_content": "}",
          "new_line_content": "        side = av_packet_new_side_data(pkt,",
          "content_same": false
        },
        {
          "line": 6986,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    MOVContext *mov = s->priv_data;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6987,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(side, extradata, extradata_size)",
          "old_line_content": "    MOVStreamContext *sc;",
          "new_line_content": "        memcpy(side, extradata, extradata_size);",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": null,
          "new_api": "av_rescale",
          "old_text": null,
          "new_text": "av_rescale(ref_st->duration, sc->time_scale, ref_sc->time_scale)",
          "old_line_content": "",
          "new_line_content": "                st->duration = sc->track_end = av_rescale(ref_st->duration, sc->time_scale, ref_sc->time_scale);",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted STTS atom\\n\")",
          "old_line_content": "}",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted STTS atom\\n\");",
          "content_same": false
        },
        {
          "line": 7003,
          "old_api": null,
          "new_api": "mov_find_next_sample",
          "old_text": null,
          "new_text": "mov_find_next_sample(s, &st)",
          "old_line_content": "    /* must be done just before reading, to avoid infinite loop on sample */",
          "new_line_content": "    sample = mov_find_next_sample(s, &st);",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_WARNING, \"mov_update_dts_shift(): dts_shift set to %d\\n\", INT_MAX)",
          "old_line_content": "    AVStream *st;",
          "new_line_content": "            av_log(NULL, AV_LOG_WARNING, \"mov_update_dts_shift(): dts_shift set to %d\\n\", INT_MAX);",
          "content_same": false
        },
        {
          "line": 7007,
          "old_api": null,
          "new_api": "mov_switch_root",
          "old_text": null,
          "new_text": "mov_switch_root(s, mov->next_root_atom, -1)",
          "old_line_content": "    if (mov->next_root_atom) {",
          "new_line_content": "        if ((ret = mov_switch_root(s, mov->next_root_atom, -1)) < 0)",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    }",
          "new_line_content": "    if (avio_rb32(pb) != 0) { /* 0 sized mdat atom... use the 'wide' atom size */",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(sc->dts_shift, -duration)",
          "old_line_content": "",
          "new_line_content": "        sc->dts_shift = FFMAX(sc->dts_shift, -duration);",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "",
          "new_line_content": "    atom.type = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','d','a','t')",
          "old_line_content": "{",
          "new_line_content": "    if (atom.type != MKTAG('m','d','a','t')) {",
          "content_same": false
        },
        {
          "line": 4967,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, atom.size)",
          "old_line_content": "#if CONFIG_ZLIB",
          "new_line_content": "        avio_skip(pb, atom.size);",
          "content_same": false
        },
        {
          "line": 7014,
          "old_api": null,
          "new_api": "mov_current_sample_inc",
          "old_text": null,
          "new_text": "mov_current_sample_inc(sc)",
          "old_line_content": "        if (ret64 != sample->pos) {",
          "new_line_content": "    mov_current_sample_inc(sc);",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": null,
          "new_api": "mov_read_mdat",
          "old_text": null,
          "new_text": "mov_read_mdat(c, pb, atom)",
          "old_line_content": "    uint8_t *moov_data; /* uncompressed data */",
          "new_line_content": "    err = mov_read_mdat(c, pb, atom);",
          "content_same": false
        },
        {
          "line": 7022,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "        int64_t ret64 = avio_seek(sc->pb, sample->pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 7026,
          "old_api": null,
          "new_api": "should_retry",
          "old_text": null,
          "new_text": "should_retry(sc->pb, ret64)",
          "old_line_content": "        }",
          "new_line_content": "            if (should_retry(sc->pb, ret64)) {",
          "content_same": false
        },
        {
          "line": 7027,
          "old_api": null,
          "new_api": "mov_current_sample_dec",
          "old_text": null,
          "new_text": "mov_current_sample_dec(sc)",
          "old_line_content": "",
          "new_line_content": "                mov_current_sample_dec(sc);",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    avio_rb32(pb); /* dcom atom */",
          "content_same": false
        },
        {
          "line": 7033,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Nonkey frame from stream %d discarded due to AVDISCARD_NONKEY\\n\", sc->ffindex)",
          "old_line_content": "            return ret;",
          "new_line_content": "            av_log(mov->fc, AV_LOG_DEBUG, \"Nonkey frame from stream %d discarded due to AVDISCARD_NONKEY\\n\", sc->ffindex);",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->ctts_data)",
          "old_line_content": "        if (count <= 0) {",
          "new_line_content": "    av_freep(&sc->ctts_data);",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('z','l','i','b')",
          "old_line_content": "",
          "new_line_content": "    if (avio_rl32(pb) != MKTAG('z','l','i','b')) {",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "                   count, duration);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": null,
          "new_api": "av_get_packet",
          "old_text": null,
          "new_text": "av_get_packet(sc->pb, pkt, sample->size)",
          "old_line_content": "",
          "new_line_content": "        ret = av_get_packet(sc->pb, pkt, sample->size);",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('c','m','v','d')",
          "old_line_content": "    if (!moov_data) {",
          "new_line_content": "    if (avio_rl32(pb) != MKTAG('c','m','v','d'))",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        int count    =avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 7039,
          "old_api": null,
          "new_api": "should_retry",
          "old_text": null,
          "new_text": "should_retry(sc->pb, ret)",
          "old_line_content": "            if (!pal) {",
          "new_line_content": "            if (should_retry(sc->pb, ret)) {",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(cmov_len)",
          "old_line_content": "    if (ret < 0)",
          "new_line_content": "    cmov_data = av_malloc(cmov_len);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(moov_len)",
          "old_line_content": "    ret = AVERROR_INVALIDDATA;",
          "new_line_content": "    moov_data = av_malloc(moov_len);",
          "content_same": false
        },
        {
          "line": 7047,
          "old_api": null,
          "new_api": "av_packet_new_side_data",
          "old_text": null,
          "new_text": "av_packet_new_side_data(pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE)",
          "old_line_content": "        if (mov->dv_demux && sc->dv_audio_container) {",
          "new_line_content": "            pal = av_packet_new_side_data(pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(cmov_data)",
          "old_line_content": "        goto free_and_return;",
          "new_line_content": "        av_free(cmov_data);",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": null,
          "new_api": "add_ctts_entry",
          "old_text": null,
          "new_text": "add_ctts_entry(&sc->ctts_data, &ctts_count, &sc->ctts_allocated_size,\n                       count, duration)",
          "old_line_content": "            sc->ctts_count = 0;",
          "new_line_content": "        add_ctts_entry(&sc->ctts_data, &ctts_count, &sc->ctts_allocated_size,",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": null,
          "new_api": "ffio_read_size",
          "old_text": null,
          "new_text": "ffio_read_size(pb, cmov_data, cmov_len)",
          "old_line_content": "    ctx.seekable = AVIO_SEEKABLE_NORMAL;",
          "new_line_content": "    ret = ffio_read_size(pb, cmov_data, cmov_len);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"count=%d, duration=%d\\n\",\n                count, duration)",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"count=%d, duration=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": null,
          "new_api": "FFNABS",
          "old_text": null,
          "new_text": "FFNABS(duration)",
          "old_line_content": "    }",
          "new_line_content": "        if (FFNABS(duration) < -(1<<28) && i+2<entries) {",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"CTTS invalid\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING, \"CTTS invalid\\n\");",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sc->ctts_data)",
          "old_line_content": "    sc->ctts_count = ctts_count;",
          "new_line_content": "            av_freep(&sc->ctts_data);",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": null,
          "new_api": "ffio_init_context",
          "old_text": null,
          "new_text": "ffio_init_context(&ctx, moov_data, moov_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "    return ret;",
          "new_line_content": "    if (ffio_init_context(&ctx, moov_data, moov_len, 0, NULL, NULL, NULL, NULL) != 0)",
          "content_same": false
        },
        {
          "line": 7058,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&pkt->data)",
          "old_line_content": "                st->need_parsing = AVSTREAM_PARSE_FULL;",
          "new_line_content": "            av_freep(&pkt->data);",
          "content_same": false
        },
        {
          "line": 7060,
          "old_api": null,
          "new_api": "avpriv_dv_get_packet",
          "old_text": null,
          "new_text": "avpriv_dv_get_packet(mov->dv_demux, pkt)",
          "old_line_content": "    }",
          "new_line_content": "            ret = avpriv_dv_get_packet(mov->dv_demux, pkt);",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": null,
          "new_api": "mov_update_dts_shift",
          "old_text": null,
          "new_text": "mov_update_dts_shift(sc, duration)",
          "old_line_content": "",
          "new_line_content": "            mov_update_dts_shift(sc, duration);",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": null,
          "new_api": "mov_read_default",
          "old_text": null,
          "new_text": "mov_read_default(c, &ctx, atom)",
          "old_line_content": "}",
          "new_line_content": "    ret = mov_read_default(c, &ctx, atom);",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(moov_data)",
          "old_line_content": "/* edit list atom */",
          "new_line_content": "    av_free(moov_data);",
          "content_same": false
        },
        {
          "line": 5019,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(cmov_data)",
          "old_line_content": "static int mov_read_elst(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "    av_free(cmov_data);",
          "content_same": false
        },
        {
          "line": 7066,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(pkt->data)",
          "old_line_content": "    }",
          "new_line_content": "            if (ff_mpa_check_header(AV_RB32(pkt->data)) < 0)",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted CTTS atom\\n\")",
          "old_line_content": "static int mov_read_sbgp(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted CTTS atom\\n\");",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"this file requires zlib support compiled in\\n\")",
          "old_line_content": "    int i, edit_count, version;",
          "new_line_content": "    av_log(c->fc, AV_LOG_ERROR, \"this file requires zlib support compiled in\\n\");",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOSYS)",
          "old_line_content": "    int64_t elst_entry_size;",
          "new_line_content": "    return AVERROR(ENOSYS);",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"dts shift %d\\n\", sc->dts_shift)",
          "old_line_content": "    unsigned int i, entries;",
          "new_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"dts shift %d\\n\", sc->dts_shift);",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "                   edit_count, atom.size + 8);",
          "new_line_content": "    version = avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "            return AVERROR_INVALIDDATA;",
          "new_line_content": "    avio_rb24(pb); /* flags */",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        } else {",
          "new_line_content": "    edit_count = avio_rb32(pb); /* entries */",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "    if (!entries)",
          "new_line_content": "    version = avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    avio_rb24(pb); /* flags */",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "    if (sc->rap_group)",
          "new_line_content": "    grouping_type = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Invalid edit list entry_count: %d for elst atom of size: %\"PRId64\" bytes.\\n\",\n                   edit_count, atom.size + 8)",
          "old_line_content": "    }",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"Invalid edit list entry_count: %d for elst atom of size: %\"PRId64\" bytes.\\n\",",
          "content_same": false
        },
        {
          "line": 7101,
          "old_api": null,
          "new_api": "mov_stsc_index_valid",
          "old_text": null,
          "new_text": "mov_stsc_index_valid(sc->stsc_index, sc->stsc_count)",
          "old_line_content": "            if (ret < 0)",
          "new_line_content": "        if (mov_stsc_index_valid(sc->stsc_index, sc->stsc_count) &&",
          "content_same": false
        },
        {
          "line": 7102,
          "old_api": null,
          "new_api": "mov_get_stsc_samples",
          "old_text": null,
          "new_text": "mov_get_stsc_samples(sc, sc->stsc_index)",
          "old_line_content": "                return ret;",
          "new_line_content": "            mov_get_stsc_samples(sc, sc->stsc_index) == sc->stsc_sample) {",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(sc->rap_group)",
          "old_line_content": "    }",
          "new_line_content": "    av_free(sc->rap_group);",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": null,
          "new_api": "av_malloc_array",
          "old_text": null,
          "new_text": "av_malloc_array(entries, sizeof(*sc->rap_group))",
          "old_line_content": "    sc->rap_group_count = i;",
          "new_line_content": "    sc->rap_group = av_malloc_array(entries, sizeof(*sc->rap_group));",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Duplicated ELST atom\\n\")",
          "old_line_content": "        MOVElst *e = &sc->elst_data[i];",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Duplicated ELST atom\\n\");",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    if (pb->eof_reached) {",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(sc->elst_data)",
          "old_line_content": "",
          "new_line_content": "    av_free(sc->elst_data);",
          "content_same": false
        },
        {
          "line": 7109,
          "old_api": null,
          "new_api": "mov_change_extradata",
          "old_text": null,
          "new_text": "mov_change_extradata(sc, pkt)",
          "old_line_content": "    if (sc->cenc.aes_ctr) {",
          "new_line_content": "            ret = mov_change_extradata(sc, pkt);",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    }",
          "new_line_content": "        sc->rap_group[i].count = avio_rb32(pb); /* sample_count */",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        sc->rap_group[i].index = avio_rb32(pb); /* group_description_index */",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            atom.size -= 16;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 7116,
          "old_api": null,
          "new_api": "aax_filter",
          "old_text": null,
          "new_text": "aax_filter(pkt->data, pkt->size, mov)",
          "old_line_content": "    return 0;",
          "new_line_content": "        aax_filter(pkt->data, pkt->size, mov);",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted SBGP atom\\n\")",
          "old_line_content": " */",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted SBGP atom\\n\");",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": null,
          "new_api": "avio_rb64",
          "old_text": null,
          "new_text": "avio_rb64(pb)",
          "old_line_content": "        atom.size -= 4;",
          "new_line_content": "            e->duration = avio_rb64(pb);",
          "content_same": false
        },
        {
          "line": 7119,
          "old_api": null,
          "new_api": "cenc_filter",
          "old_text": null,
          "new_text": "cenc_filter(mov, sc, current_index, pkt->data, pkt->size)",
          "old_line_content": "static int mov_seek_fragment(AVFormatContext *s, AVStream *st, int64_t timestamp)",
          "new_line_content": "        ret = cenc_filter(mov, sc, current_index, pkt->data, pkt->size);",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        if (e->time < 0 && e->time != -1 &&",
          "new_line_content": "            e->duration = avio_rb32(pb); /* segment duration */",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            c->fc->strict_std_compliance >= FF_COMPLIANCE_STRICT) {",
          "new_line_content": "            e->time     = (int32_t)avio_rb32(pb); /* media time */",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            return AVERROR_INVALIDDATA;",
          "new_line_content": "        e->rate = avio_rb32(pb) / 65536.0;",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_TRACE, \"duration=%\"PRId64\" time=%\"PRId64\" rate=%f\\n\",\n               e->duration, e->time, e->rate)",
          "old_line_content": "    }",
          "new_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"duration=%\"PRId64\" time=%\"PRId64\" rate=%f\\n\",",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Track %d, edit %d: Invalid edit list media time=%\"PRId64\"\\n\",\n                   c->fc->nb_streams-1, i, e->time)",
          "old_line_content": "",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"Track %d, edit %d: Invalid edit list media time=%\"PRId64\"\\n\",",
          "content_same": false
        },
        {
          "line": 7136,
          "old_api": null,
          "new_api": "search_frag_timestamp",
          "old_text": null,
          "new_text": "search_frag_timestamp(&mov->frag_index, st, timestamp)",
          "old_line_content": "}",
          "new_line_content": "    index = search_frag_timestamp(&mov->frag_index, st, timestamp);",
          "content_same": false
        },
        {
          "line": 7140,
          "old_api": null,
          "new_api": "mov_switch_root",
          "old_text": null,
          "new_text": "mov_switch_root(s, -1, index)",
          "old_line_content": "    MOVStreamContext *sc = st->priv_data;",
          "new_line_content": "        return mov_switch_root(s, -1, index);",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(mov->fc, \"Support for mvhd.timescale = 0 with editlists\")",
          "old_line_content": " * Find the closest previous frame to the timestamp_pts, in e_old index",
          "new_line_content": "      avpriv_request_sample(mov->fc, \"Support for mvhd.timescale = 0 with editlists\");",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": null,
          "new_api": "av_rescale",
          "old_text": null,
          "new_text": "av_rescale(*edit_list_duration, msc->time_scale,\n                                     global_timescale)",
          "old_line_content": " * Note that if ctts_data is not NULL, we will always search for a key frame",
          "new_line_content": "    *edit_list_duration = av_rescale(*edit_list_duration, msc->time_scale,",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    if (c->fc->nb_streams < 1)",
          "new_line_content": "    sc->timecode_track = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 7155,
          "old_api": null,
          "new_api": "mov_seek_fragment",
          "old_text": null,
          "new_text": "mov_seek_fragment(s, st, timestamp)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    ret = mov_seek_fragment(s, st, timestamp);",
          "content_same": false
        },
        {
          "line": 7159,
          "old_api": null,
          "new_api": "av_index_search_timestamp",
          "old_text": null,
          "new_text": "av_index_search_timestamp(st, timestamp, flags)",
          "old_line_content": "    if (sc->ctts_data) {",
          "new_line_content": "    sample = av_index_search_timestamp(st, timestamp, flags);",
          "content_same": false
        },
        {
          "line": 7160,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_TRACE, \"stream %d, timestamp %\"PRId64\", sample %d\\n\", st->index, timestamp, sample)",
          "old_line_content": "        time_sample = 0;",
          "new_line_content": "    av_log(s, AV_LOG_TRACE, \"stream %d, timestamp %\"PRId64\", sample %d\\n\", st->index, timestamp, sample);",
          "content_same": false
        },
        {
          "line": 7165,
          "old_api": null,
          "new_api": "mov_current_sample_set",
          "old_text": null,
          "new_text": "mov_current_sample_set(sc, sample)",
          "old_line_content": "                sc->ctts_sample = sc->current_sample - time_sample;",
          "new_line_content": "    mov_current_sample_set(sc, sample);",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_TRACE, \"stream %d, found sample %d\\n\", st->index, sc->current_sample)",
          "old_line_content": "                break;",
          "new_line_content": "    av_log(s, AV_LOG_TRACE, \"stream %d, found sample %d\\n\", st->index, sc->current_sample);",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 2)",
          "old_line_content": "        color_primaries = AVCOL_PRI_UNSPECIFIED;",
          "new_line_content": "    avio_skip(pb, 2); /* profile + level */",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        color_trc = AVCOL_TRC_UNSPECIFIED;",
          "new_line_content": "    color_primaries = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        color_space = AVCOL_SPC_UNSPECIFIED;",
          "new_line_content": "    color_space     = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "",
          "new_line_content": "    if (avio_rb16(pb)) /* codecIntializationDataSize */",
          "content_same": false
        },
        {
          "line": 7184,
          "old_api": null,
          "new_api": "mov_get_stsc_samples",
          "old_text": null,
          "new_text": "mov_get_stsc_samples(sc, i)",
          "old_line_content": "    return sample;",
          "new_line_content": "        int next = time_sample + mov_get_stsc_samples(sc, i);",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": null,
          "new_api": "av_color_primaries_name",
          "old_text": null,
          "new_text": "av_color_primaries_name(color_primaries)",
          "old_line_content": "    st->codecpar->color_trc       = color_trc;",
          "new_line_content": "    if (!av_color_primaries_name(color_primaries))",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": null,
          "new_api": "av_color_transfer_name",
          "old_text": null,
          "new_text": "av_color_transfer_name(color_trc)",
          "old_line_content": "",
          "new_line_content": "    if (!av_color_transfer_name(color_trc))",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(index)",
          "old_line_content": "    st->index_entries = e_old;",
          "new_line_content": "    av_assert0(index);",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "av_color_space_name",
          "old_text": null,
          "new_text": "av_color_space_name(color_space)",
          "old_line_content": "}",
          "new_line_content": "    if (!av_color_space_name(color_space))",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": null,
          "new_api": "av_index_search_timestamp",
          "old_text": null,
          "new_text": "av_index_search_timestamp(st, timestamp_pts, flag | AVSEEK_FLAG_BACKWARD)",
          "old_line_content": "            }",
          "new_line_content": "    *index = av_index_search_timestamp(st, timestamp_pts, flag | AVSEEK_FLAG_BACKWARD);",
          "content_same": false
        },
        {
          "line": 7207,
          "old_api": null,
          "new_api": "mov_seek_stream",
          "old_text": null,
          "new_text": "mov_seek_stream(s, st, sample_time, flags)",
          "old_line_content": "            int64_t timestamp;",
          "new_line_content": "    sample = mov_seek_stream(s, st, sample_time, flags);",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(ctts_index)",
          "old_line_content": "                    (*ctts_index)++;",
          "new_line_content": "        av_assert0(ctts_index);",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(ctts_sample)",
          "old_line_content": "                    *ctts_sample = 0;",
          "new_line_content": "        av_assert0(ctts_sample);",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported Mastering Display Metadata box version %d\\n\", version)",
          "old_line_content": "    for (i = 0; i < 3; i++)",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported Mastering Display Metadata box version %d\\n\", version);",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": null,
          "new_api": "av_mastering_display_metadata_alloc",
          "old_text": null,
          "new_text": "av_mastering_display_metadata_alloc()",
          "old_line_content": "        sc->mastering->white_point[i] =",
          "new_line_content": "    sc->mastering = av_mastering_display_metadata_alloc();",
          "content_same": false
        },
        {
          "line": 7224,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(seek_timestamp, s->streams[stream_index]->time_base, st->time_base)",
          "old_line_content": "        }",
          "new_line_content": "            timestamp = av_rescale_q(seek_timestamp, s->streams[stream_index]->time_base, st->time_base);",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    sc->mastering->max_luminance =",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 7225,
          "old_api": null,
          "new_api": "mov_seek_stream",
          "old_text": null,
          "new_text": "mov_seek_stream(s, st, timestamp, flags)",
          "old_line_content": "        while (1) {",
          "new_line_content": "            mov_seek_stream(s, st, timestamp, flags);",
          "content_same": false
        },
        {
          "line": 5183,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    sc->mastering->has_primaries = 1;",
          "new_line_content": "                av_make_q(lrint(((double)avio_rb16(pb) / (1 << 16)) * chroma_den), chroma_den);",
          "content_same": false
        },
        {
          "line": 7232,
          "old_api": null,
          "new_api": "mov_current_sample_set",
          "old_text": null,
          "new_text": "mov_current_sample_set(sc, 0)",
          "old_line_content": "                break;",
          "new_line_content": "            mov_current_sample_set(sc, 0);",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    return 0;",
          "new_line_content": "            av_make_q(lrint(((double)avio_rb16(pb) / (1 << 16)) * chroma_den), chroma_den);",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        av_make_q(lrint(((double)avio_rb32(pb) / (1 <<  8)) * luma_den), luma_den);",
          "content_same": false
        },
        {
          "line": 7236,
          "old_api": null,
          "new_api": "mov_find_next_sample",
          "old_text": null,
          "new_text": "mov_find_next_sample(s, &st)",
          "old_line_content": "    return 0;",
          "new_line_content": "            AVIndexEntry *entry = mov_find_next_sample(s, &st);",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "{",
          "new_line_content": "        av_make_q(lrint(((double)avio_rb32(pb) / (1 << 14)) * luma_den), luma_den);",
          "content_same": false
        },
        {
          "line": 7242,
          "old_api": null,
          "new_api": "mov_current_sample_inc",
          "old_text": null,
          "new_text": "mov_current_sample_inc(sc)",
          "old_line_content": "    {\"use_absolute_path\",",
          "new_line_content": "            mov_current_sample_inc(sc);",
          "content_same": false
        },
        {
          "line": 7253,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(use_absolute_path)",
          "old_line_content": "        \"Modify the AVIndex according to the editlists. Use this option to decode in the order specified by the edits.\",",
          "new_line_content": "        OFFSET(use_absolute_path), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "content_same": false
        },
        {
          "line": 7257,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(seek_individually)",
          "old_line_content": "        0, 1, FLAGS},",
          "new_line_content": "        OFFSET(seek_individually), AV_OPT_TYPE_BOOL, { .i64 = 1 },",
          "content_same": false
        },
        {
          "line": 7259,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(ignore_editlist)",
          "old_line_content": "        \"use mfra for fragment timestamps\",",
          "new_line_content": "    {\"ignore_editlist\", \"Ignore the edit list atom.\", OFFSET(ignore_editlist), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Invalid Mastering Display Color Volume box\\n\")",
          "old_line_content": "        const int j = mapping[i];",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Invalid Mastering Display Color Volume box\\n\");",
          "content_same": false
        },
        {
          "line": 7263,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(advanced_editlist)",
          "old_line_content": "    {\"auto\", \"auto\", 0, AV_OPT_TYPE_CONST, {.i64 = FF_MOV_FLAG_MFRA_AUTO}, 0, 0,",
          "new_line_content": "        OFFSET(advanced_editlist), AV_OPT_TYPE_BOOL, {.i64 = 1},",
          "content_same": false
        },
        {
          "line": 7265,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(ignore_chapters)",
          "old_line_content": "    {\"dts\", \"dts\", 0, AV_OPT_TYPE_CONST, {.i64 = FF_MOV_FLAG_MFRA_DTS}, 0, 0,",
          "new_line_content": "    {\"ignore_chapters\", \"\", OFFSET(ignore_chapters), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    sc->mastering->has_luminance = 1;",
          "new_line_content": "        sc->mastering->display_primaries[j][0] = av_make_q(avio_rb16(pb), chroma_den);",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    sc->mastering->has_primaries = 1;",
          "new_line_content": "        sc->mastering->display_primaries[j][1] = av_make_q(avio_rb16(pb), chroma_den);",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    return 0;",
          "new_line_content": "    sc->mastering->white_point[0] = av_make_q(avio_rb16(pb), chroma_den);",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "}",
          "new_line_content": "    sc->mastering->white_point[1] = av_make_q(avio_rb16(pb), chroma_den);",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "static int mov_read_coll(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "    sc->mastering->max_luminance = av_make_q(avio_rb32(pb), luma_den);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "{",
          "new_line_content": "    sc->mastering->min_luminance = av_make_q(avio_rb32(pb), luma_den);",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(min_size_needed, 2 * st->index_entries_allocated_size)",
          "old_line_content": "    if(!entries)",
          "new_line_content": "        FFMAX(min_size_needed, 2 * st->index_entries_allocated_size) :",
          "content_same": false
        },
        {
          "line": 7278,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(export_all)",
          "old_line_content": "        .flags = AV_OPT_FLAG_DECODING_PARAM },",
          "new_line_content": "    { \"export_all\", \"Export unrecognized metadata entries\", OFFSET(export_all),",
          "content_same": false
        },
        {
          "line": 7282,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(activation_bytes)",
          "old_line_content": "",
          "new_line_content": "    { \"activation_bytes\", \"Secret bytes for Audible AAX files\", OFFSET(activation_bytes),",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": null,
          "new_api": "av_fast_realloc",
          "old_text": null,
          "new_text": "av_fast_realloc(st->index_entries,\n                              &st->index_entries_allocated_size,\n                              requested_size)",
          "old_line_content": "    ie= &entries[index];",
          "new_line_content": "    entries = av_fast_realloc(st->index_entries,",
          "content_same": false
        },
        {
          "line": 7285,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(audible_fixed_key)",
          "old_line_content": "",
          "new_line_content": "        \"Fixed key used for handling Audible AAX files\", OFFSET(audible_fixed_key),",
          "content_same": false
        },
        {
          "line": 7288,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(decryption_key)",
          "old_line_content": "    .item_name  = av_default_item_name,",
          "new_line_content": "    { \"decryption_key\", \"The media decryption key (hex)\", OFFSET(decryption_key), AV_OPT_TYPE_BINARY, .flags = AV_OPT_FLAG_DECODING_PARAM },",
          "content_same": false
        },
        {
          "line": 7289,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(enable_drefs)",
          "old_line_content": "    .option     = mov_options,",
          "new_line_content": "    { \"enable_drefs\", \"Enable external track support.\", OFFSET(enable_drefs), AV_OPT_TYPE_BOOL,",
          "content_same": false
        },
        {
          "line": 7304,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\")",
          "old_line_content": "    .flags          = AVFMT_NO_BYTE_SEEK,",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\"),",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "    return 0;",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5259,
          "old_api": null,
          "new_api": "av_content_light_metadata_alloc",
          "old_text": null,
          "new_text": "av_content_light_metadata_alloc(&sc->coll_size)",
          "old_line_content": "",
          "new_line_content": "    sc->coll = av_content_light_metadata_alloc(&sc->coll_size);",
          "content_same": false
        },
        {
          "line": 5261,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "{",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(end_index >= 0 && end_index <= st->nb_index_entries)",
          "old_line_content": " * Returns the new ctts_count if successful, else returns -1.",
          "new_line_content": "    av_assert0(end_index >= 0 && end_index <= st->nb_index_entries);",
          "content_same": false
        },
        {
          "line": 5263,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "",
          "new_line_content": "    sc->coll->MaxCLL  = avio_rb16(pb);",
          "content_same": false
        },
        {
          "line": 5264,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    if (c->fc->nb_streams < 1)",
          "new_line_content": "    sc->coll->MaxFALL = avio_rb16(pb);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(min_size_needed, 2 * (*allocated_size))",
          "old_line_content": "        return -1;",
          "new_line_content": "        FFMAX(min_size_needed, 2 * (*allocated_size)) :",
          "content_same": false
        },
        {
          "line": 5283,
          "old_api": null,
          "new_api": "av_content_light_metadata_alloc",
          "old_text": null,
          "new_text": "av_content_light_metadata_alloc(&sc->coll_size)",
          "old_line_content": "",
          "new_line_content": "    sc->coll = av_content_light_metadata_alloc(&sc->coll_size);",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "{",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "av_fast_realloc",
          "old_text": null,
          "new_text": "av_fast_realloc(*ctts_data, allocated_size, requested_size)",
          "old_line_content": "",
          "new_line_content": "    ctts_buf_new = av_fast_realloc(*ctts_data, allocated_size, requested_size);",
          "content_same": false
        },
        {
          "line": 5287,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    MOVStreamContext *sc;",
          "new_line_content": "    sc->coll->MaxCLL  = avio_rb16(pb);",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(pb)",
          "old_line_content": "    enum AVStereo3DType type;",
          "new_line_content": "    sc->coll->MaxFALL = avio_rb16(pb);",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty stereoscopic video box\\n\")",
          "old_line_content": "        break;",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty stereoscopic video box\\n\");",
          "content_same": false
        },
        {
          "line": 5310,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 4)",
          "old_line_content": "        break;",
          "new_line_content": "    avio_skip(pb, 4); /* version + flags */",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        type = AV_STEREO3D_SIDEBYSIDE;",
          "new_line_content": "    mode = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown st3d mode value %d\\n\", mode)",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown st3d mode value %d\\n\", mode);",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": null,
          "new_api": "av_stereo3d_alloc",
          "old_text": null,
          "new_text": "av_stereo3d_alloc()",
          "old_line_content": "{",
          "new_line_content": "    sc->stereo3d = av_stereo3d_alloc();",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    MOVStreamContext *sc;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(st->codecpar->video_delay, num_swaps)",
          "old_line_content": "               st->codecpar->video_delay, st->index);",
          "new_line_content": "            st->codecpar->video_delay = FFMAX(st->codecpar->video_delay, num_swaps);",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_DEBUG, \"Setting codecpar->delay to %d for stream st: %d\\n\",\n               st->codecpar->video_delay, st->index)",
          "old_line_content": "    if (sc->index_ranges &&",
          "new_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"Setting codecpar->delay to %d for stream st: %d\\n\",",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 5362,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('s','v','h','d')",
          "old_line_content": "    }",
          "new_line_content": "    if (tag != MKTAG('s','v','h','d')) {",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",\n               version)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",",
          "content_same": false
        },
        {
          "line": 5373,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, size - 12)",
          "old_line_content": "        return 0;",
          "new_line_content": "    avio_skip(pb, size - 12); /* metadata_source */",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "    size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5379,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "",
          "new_line_content": "    tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 5389,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    tag = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('p','r','h','d')",
          "old_line_content": "    }",
          "new_line_content": "    if (tag != MKTAG('p','r','h','d')) {",
          "content_same": false
        },
        {
          "line": 5400,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    if (version != 0) {",
          "new_line_content": "    pitch = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, 3)",
          "old_line_content": "        projection = AV_SPHERICAL_CUBEMAP;",
          "new_line_content": "    avio_skip(pb, 3); /* flags */",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('c','b','m','p')",
          "old_line_content": "        break;",
          "new_line_content": "    case MKTAG('c','b','m','p'):",
          "content_same": false
        },
        {
          "line": 5430,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('e','q','u','i')",
          "old_line_content": "                   \"%\"PRIu32\",%\"PRIu32\",%\"PRIu32\",%\"PRIu32\"\\n\", l, t, r, b);",
          "new_line_content": "    case MKTAG('e','q','u','i'):",
          "content_same": false
        },
        {
          "line": 5431,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "            return AVERROR_INVALIDDATA;",
          "new_line_content": "        t = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5432,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        }",
          "new_line_content": "        b = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        l = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "        if (l || t || r || b)",
          "new_line_content": "        r = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 5437,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n                   \"Invalid bounding rectangle coordinates \"\n                   \"%\"PRIu32\",%\"PRIu32\",%\"PRIu32\",%\"PRIu32\"\\n\", l, t, r, b)",
          "old_line_content": "            projection = AV_SPHERICAL_EQUIRECTANGULAR;",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc((msc->elst_count + 1) * sizeof(msc->index_ranges[0]))",
          "old_line_content": "    st->index_entries = NULL;",
          "new_line_content": "    msc->index_ranges = av_malloc((msc->elst_count + 1) * sizeof(msc->index_ranges[0]));",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot allocate index ranges buffer\\n\")",
          "old_line_content": "    st->nb_index_entries = 0;",
          "new_line_content": "        av_log(mov->fc, AV_LOG_ERROR, \"Cannot allocate index ranges buffer\\n\");",
          "content_same": false
        },
        {
          "line": 5449,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Unknown projection type\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Unknown projection type\\n\");",
          "content_same": false
        },
        {
          "line": 5453,
          "old_api": null,
          "new_api": "av_spherical_alloc",
          "old_text": null,
          "new_text": "av_spherical_alloc(&sc->spherical_size)",
          "old_line_content": "",
          "new_line_content": "    sc->spherical = av_spherical_alloc(&sc->spherical_size);",
          "content_same": false
        },
        {
          "line": 5455,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Shifting DTS by %d because of negative CTTS.\\n\", msc->dts_shift)",
          "old_line_content": "        edit_list_index++;",
          "new_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Shifting DTS by %d because of negative CTTS.\\n\", msc->dts_shift);",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": null,
          "new_api": "get_edit_list_entry",
          "old_text": null,
          "new_text": "get_edit_list_entry(mov, msc, edit_list_index, &edit_list_media_time,\n                               &edit_list_duration, mov->time_scale)",
          "old_line_content": "            empty_edits_sum_duration += edit_list_duration;",
          "new_line_content": "    while (get_edit_list_entry(mov, msc, edit_list_index, &edit_list_media_time,",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len + 1)",
          "old_line_content": "        goto out;",
          "new_line_content": "    uint8_t *buffer = av_malloc(len + 1);",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Processing st: %d, edit list %\"PRId64\" - media time: %\"PRId64\", duration: %\"PRId64\"\\n\",\n               st->index, edit_list_index, edit_list_media_time, edit_list_duration)",
          "old_line_content": "        }",
          "new_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Processing st: %d, edit list %\"PRId64\" - media time: %\"PRId64\", duration: %\"PRId64\"\\n\",",
          "content_same": false
        },
        {
          "line": 5489,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:StitchingSoftware>\")",
          "old_line_content": "            goto out;",
          "new_line_content": "        av_stristr(buffer, \"<GSpherical:StitchingSoftware>\") &&",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:Spherical>\")",
          "old_line_content": "",
          "new_line_content": "        (val = av_stristr(buffer, \"<GSpherical:Spherical>\")) &&",
          "content_same": false
        },
        {
          "line": 5491,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(val, \"true\")",
          "old_line_content": "        sc->spherical->projection = AV_SPHERICAL_EQUIRECTANGULAR;",
          "new_line_content": "        av_stristr(val, \"true\") &&",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:Stitched>\")",
          "old_line_content": "",
          "new_line_content": "        (val = av_stristr(buffer, \"<GSpherical:Stitched>\")) &&",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:ProjectionType>\")",
          "old_line_content": "            enum AVStereo3DType mode;",
          "new_line_content": "        (val = av_stristr(buffer, \"<GSpherical:ProjectionType>\")) &&",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(val, \"equirectangular\")",
          "old_line_content": "",
          "new_line_content": "        av_stristr(val, \"equirectangular\")) {",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:StereoMode>\")",
          "old_line_content": "",
          "new_line_content": "        if (av_stristr(buffer, \"<GSpherical:StereoMode>\") && !sc->stereo3d) {",
          "content_same": false
        },
        {
          "line": 5505,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"left-right\")",
          "old_line_content": "                goto out;",
          "new_line_content": "            if (av_stristr(buffer, \"left-right\"))",
          "content_same": false
        },
        {
          "line": 5507,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"top-bottom\")",
          "old_line_content": "            sc->stereo3d->type = mode;",
          "new_line_content": "            else if (av_stristr(buffer, \"top-bottom\"))",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(search_timestamp - msc->time_scale, e_old[0].timestamp)",
          "old_line_content": "                                        &index, &ctts_index_old, &ctts_sample_old) < 0) {",
          "new_line_content": "            search_timestamp = FFMAX(search_timestamp - msc->time_scale, e_old[0].timestamp);",
          "content_same": false
        },
        {
          "line": 5512,
          "old_api": null,
          "new_api": "av_stereo3d_alloc",
          "old_text": null,
          "new_text": "av_stereo3d_alloc()",
          "old_line_content": "        if (val)",
          "new_line_content": "            sc->stereo3d = av_stereo3d_alloc();",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": null,
          "new_api": "find_prev_closest_index",
          "old_text": null,
          "new_text": "find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, 0,\n                                    &index, &ctts_index_old, &ctts_sample_old)",
          "old_line_content": "                       st->index, edit_list_index, search_timestamp);",
          "new_line_content": "        if (find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, 0,",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING,\n                   \"st: %d edit list: %\"PRId64\" Missing key frame while searching for timestamp: %\"PRId64\"\\n\",\n                   st->index, edit_list_index, search_timestamp)",
          "old_line_content": "                ctts_index_old = 0;",
          "new_line_content": "            av_log(mov->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "find_prev_closest_index",
          "old_text": null,
          "new_text": "find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, AVSEEK_FLAG_ANY,\n                                        &index, &ctts_index_old, &ctts_sample_old)",
          "old_line_content": "        }",
          "new_line_content": "            if (find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, AVSEEK_FLAG_ANY,",
          "content_same": false
        },
        {
          "line": 5520,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:InitialViewHeadingDegrees>\")",
          "old_line_content": "    }",
          "new_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewHeadingDegrees>\");",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING,\n                       \"st: %d edit list %\"PRId64\" Cannot find an index entry before timestamp: %\"PRId64\".\\n\",\n                       st->index, edit_list_index, search_timestamp)",
          "old_line_content": "        edit_list_start_ctts_sample = ctts_sample_old;",
          "new_line_content": "                av_log(mov->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 5522,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(val, NULL, 10)",
          "old_line_content": "out:",
          "new_line_content": "            sc->spherical->yaw = strtol(val, NULL, 10) * (1 << 16);",
          "content_same": false
        },
        {
          "line": 5525,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(val, NULL, 10)",
          "old_line_content": "}",
          "new_line_content": "            sc->spherical->pitch = strtol(val, NULL, 10) * (1 << 16);",
          "content_same": false
        },
        {
          "line": 5526,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(buffer, \"<GSpherical:InitialViewRollDegrees>\")",
          "old_line_content": "",
          "new_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewRollDegrees>\");",
          "content_same": false
        },
        {
          "line": 5528,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(val, NULL, 10)",
          "old_line_content": "{",
          "new_line_content": "            sc->spherical->roll = strtol(val, NULL, 10) * (1 << 16);",
          "content_same": false
        },
        {
          "line": 5532,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "    uint8_t uuid[16];",
          "new_line_content": "    av_free(buffer);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": null,
          "new_api": "add_ctts_entry",
          "old_text": null,
          "new_text": "add_ctts_entry(&msc->ctts_data, &msc->ctts_count,\n                                       &msc->ctts_allocated_size,\n                                       ctts_data_old[ctts_index_old].count - edit_list_start_ctts_sample,\n                                       ctts_data_old[ctts_index_old].duration)",
          "old_line_content": "                    }",
          "new_line_content": "                    if (add_ctts_entry(&msc->ctts_data, &msc->ctts_count,",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "old_line_content": "    if (ret < 0) {",
          "new_line_content": "    if (atom.size < sizeof(uuid) || atom.size >= FFMIN(INT_MAX, SIZE_MAX))",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",\n                               ctts_index_old,\n                               ctts_data_old[ctts_index_old].count - edit_list_start_ctts_sample,\n                               ctts_data_old[ctts_index_old].duration)",
          "old_line_content": "                }",
          "new_line_content": "                        av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, uuid, sizeof(uuid))",
          "old_line_content": "        size_t len = atom.size - sizeof(uuid);",
          "new_line_content": "    ret = avio_read(pb, uuid, sizeof(uuid));",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(uuid, uuid_isml_manifest, sizeof(uuid))",
          "old_line_content": "        len -= 4;",
          "new_line_content": "    if (!memcmp(uuid, uuid_isml_manifest, sizeof(uuid))) {",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        }",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5584,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, buffer, len)",
          "old_line_content": "        ptr = buffer;",
          "new_line_content": "        ret = avio_read(pb, buffer, len);",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&frame_duration_buffer)",
          "old_line_content": "                    if (st->codecpar->codec_type == AVMEDIA_TYPE_AUDIO && edit_list_start_encountered == 0) {",
          "new_line_content": "                            av_freep(&frame_duration_buffer);",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "            ptr += sizeof(\"systemBitrate=\\\"\") - 1;",
          "new_line_content": "            av_free(buffer);",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"skip %d audio samples from curr_cts: %\"PRId64\"\\n\", packet_skip_samples, curr_cts)",
          "old_line_content": "                        if (!frame_duration_buffer) {",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_DEBUG, \"skip %d audio samples from curr_cts: %\"PRId64\"\\n\", packet_skip_samples, curr_cts);",
          "content_same": false
        },
        {
          "line": 5589,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "            if (!c->bitrates) {",
          "new_line_content": "            av_free(buffer);",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"drop a frame at curr_cts: %\"PRId64\" @ %\"PRId64\"\\n\", curr_cts, index)",
          "old_line_content": "                        }",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_DEBUG, \"drop a frame at curr_cts: %\"PRId64\" @ %\"PRId64\"\\n\", curr_cts, index);",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": null,
          "new_api": "av_stristr",
          "old_text": null,
          "new_text": "av_stristr(ptr, \"systemBitrate=\\\"\")",
          "old_line_content": "            errno = 0;",
          "new_line_content": "        while ((ptr = av_stristr(ptr, \"systemBitrate=\\\"\"))) {",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": null,
          "new_api": "av_realloc",
          "old_text": null,
          "new_text": "av_realloc(frame_duration_buffer,\n                                                           num_discarded_begin * sizeof(int64_t))",
          "old_line_content": "                        if (first_non_zero_audio_edit > 0 && st->codecpar->codec_id != AV_CODEC_ID_VORBIS) {",
          "new_line_content": "                        frame_duration_buffer = av_realloc(frame_duration_buffer,",
          "content_same": false
        },
        {
          "line": 5597,
          "old_api": null,
          "new_api": "av_realloc_f",
          "old_text": null,
          "new_text": "av_realloc_f(c->bitrates, c->bitrates_count, sizeof(*c->bitrates))",
          "old_line_content": "                c->bitrates[c->bitrates_count - 1] = 0;",
          "new_line_content": "            c->bitrates = av_realloc_f(c->bitrates, c->bitrates_count, sizeof(*c->bitrates));",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot reallocate frame duration buffer\\n\")",
          "old_line_content": "                    }",
          "new_line_content": "                            av_log(mov->fc, AV_LOG_ERROR, \"Cannot reallocate frame duration buffer\\n\");",
          "content_same": false
        },
        {
          "line": 5600,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "            }",
          "new_line_content": "                av_free(buffer);",
          "content_same": false
        },
        {
          "line": 5601,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        }",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5613,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(uuid, uuid_xmp, sizeof(uuid))",
          "old_line_content": "            if (ret < 0) {",
          "new_line_content": "    } else if (!memcmp(uuid, uuid_xmp, sizeof(uuid))) {",
          "content_same": false
        },
        {
          "line": 5619,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            }",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&frame_duration_buffer)",
          "old_line_content": "            }",
          "new_line_content": "                        av_freep(&frame_duration_buffer);",
          "content_same": false
        },
        {
          "line": 5623,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "        } else {",
          "new_line_content": "                av_free(buffer);",
          "content_same": false
        },
        {
          "line": 5626,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buffer)",
          "old_line_content": "            if (ret < 0)",
          "new_line_content": "                av_free(buffer);",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": null,
          "new_api": "add_index_entry",
          "old_text": null,
          "new_text": "add_index_entry(st, current->pos, edit_list_dts_counter, current->size,\n                                current->min_distance, flags)",
          "old_line_content": "                current_index_range->start = index;",
          "new_line_content": "            if (add_index_entry(st, current->pos, edit_list_dts_counter, current->size,",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot add index entry\\n\")",
          "old_line_content": "            current_index_range->end = index + 1;",
          "new_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"Cannot add index entry\\n\");",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&c->fc->metadata, \"xmp\", buffer, 0)",
          "old_line_content": "        size_t len = atom.size - sizeof(uuid);",
          "new_line_content": "            av_dict_set(&c->fc->metadata, \"xmp\", buffer, 0);",
          "content_same": false
        },
        {
          "line": 5634,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, len)",
          "old_line_content": "        if (!sc->spherical)",
          "new_line_content": "            ret = avio_skip(pb, len);",
          "content_same": false
        },
        {
          "line": 5638,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(uuid, uuid_spherical, sizeof(uuid))",
          "old_line_content": "    return 0;",
          "new_line_content": "    } else if (!memcmp(uuid, uuid_spherical, sizeof(uuid))) {",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": null,
          "new_api": "mov_parse_uuid_spherical",
          "old_text": null,
          "new_text": "mov_parse_uuid_spherical(sc, pb, len)",
          "old_line_content": "",
          "new_line_content": "        ret = mov_parse_uuid_spherical(sc, pb, len);",
          "content_same": false
        },
        {
          "line": 5644,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Invalid spherical metadata found\\n\")",
          "old_line_content": "    uint8_t content[16];",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING, \"Invalid spherical metadata found\\n\");",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "add_ctts_entry",
          "old_text": null,
          "new_text": "add_ctts_entry(&msc->ctts_data, &msc->ctts_count,\n                                           &msc->ctts_allocated_size,\n                                           ctts_sample_old - edit_list_start_ctts_sample,\n                                           ctts_data_old[ctts_index_old].duration)",
          "old_line_content": "                    }",
          "new_line_content": "                        if (add_ctts_entry(&msc->ctts_data, &msc->ctts_count,",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(sizeof(content), atom.size)",
          "old_line_content": "    }",
          "new_line_content": "    ret = avio_read(pb, content, FFMIN(sizeof(content), atom.size));",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",\n                                   ctts_index_old, ctts_sample_old - edit_list_start_ctts_sample,\n                                   ctts_data_old[ctts_index_old].duration)",
          "old_line_content": "        }",
          "new_line_content": "                            av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",",
          "content_same": false
        },
        {
          "line": 5664,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(content, \"Anevia\\x1A\\x1A\", 8)",
          "old_line_content": "{",
          "new_line_content": "        && !memcmp(content, \"Anevia\\x1A\\x1A\", 8)",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": null,
          "new_api": "avio_rl32",
          "old_text": null,
          "new_text": "avio_rl32(pb)",
          "old_line_content": "",
          "new_line_content": "    uint32_t format = avio_rl32(pb);",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Offset DTS by %\"PRId64\" to make first pts zero.\\n\", min_corrected_pts)",
          "old_line_content": "",
          "new_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Offset DTS by %\"PRId64\" to make first pts zero.\\n\", min_corrected_pts);",
          "content_same": false
        },
        {
          "line": 5686,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('e','n','c','v')",
          "old_line_content": "        }",
          "new_line_content": "    case MKTAG('e','n','c','v'):        // encrypted video",
          "content_same": false
        },
        {
          "line": 5687,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('e','n','c','a')",
          "old_line_content": "",
          "new_line_content": "    case MKTAG('e','n','c','a'):        // encrypted audio",
          "content_same": false
        },
        {
          "line": 5688,
          "old_api": null,
          "new_api": "mov_codec_id",
          "old_text": null,
          "new_text": "mov_codec_id(st, format)",
          "old_line_content": "        st->codecpar->codec_id = id;",
          "new_line_content": "        id = mov_codec_id(st, format);",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(e_old)",
          "old_line_content": "}",
          "new_line_content": "    av_free(e_old);",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(ctts_data_old)",
          "old_line_content": "",
          "new_line_content": "    av_free(ctts_data_old);",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&frame_duration_buffer)",
          "old_line_content": "static void mov_build_index(MOVContext *mov, AVStream *st)",
          "new_line_content": "    av_freep(&frame_duration_buffer);",
          "content_same": false
        },
        {
          "line": 5691,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"ignoring 'frma' atom of '%.4s', stream has codec id %d\\n\",\n                   (char*)&format, st->codecpar->codec_id)",
          "old_line_content": "",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"ignoring 'frma' atom of '%.4s', stream format is '%.4s'\\n\",\n                   (char*)&format, (char*)&sc->format)",
          "old_line_content": "",
          "new_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 5730,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 5731,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "    /* save the auxiliary info as is */",
          "new_line_content": "    sc->cenc.use_subsamples = avio_rb24(pb) & 0x02; /* flags */",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_rb32(pb);        /* entries */",
          "content_same": false
        },
        {
          "line": 5735,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "old_line_content": "    if (!sc->cenc.auxiliary_info) {",
          "new_line_content": "    if (atom.size < 8 || atom.size > FFMIN(INT_MAX, SIZE_MAX)) {",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING, \"multiple edit list entries, \"\n                   \"Use -advanced_editlist to correctly decode otherwise \"\n                   \"a/v desync might occur\\n\")",
          "old_line_content": "            if (!mov->advanced_editlist)",
          "new_line_content": "            av_log(mov->fc, AV_LOG_WARNING, \"multiple edit list entries, \"",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "av_rescale",
          "old_text": null,
          "new_text": "av_rescale(empty_duration, sc->time_scale, mov->time_scale)",
          "old_line_content": "    }",
          "new_line_content": "                empty_duration = av_rescale(empty_duration, sc->time_scale, mov->time_scale);",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, sc->cenc.auxiliary_info, auxiliary_info_size)",
          "old_line_content": "    }",
          "new_line_content": "    if (avio_read(pb, sc->cenc.auxiliary_info, auxiliary_info_size) != auxiliary_info_size) {",
          "content_same": false
        },
        {
          "line": 5753,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info\")",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info\");",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": null,
          "new_api": "av_aes_ctr_alloc",
          "old_text": null,
          "new_text": "av_aes_ctr_alloc()",
          "old_line_content": "{",
          "new_line_content": "    sc->cenc.aes_ctr = av_aes_ctr_alloc();",
          "content_same": false
        },
        {
          "line": 5760,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    MOVStreamContext *sc;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": null,
          "new_api": "av_aes_ctr_init",
          "old_text": null,
          "new_text": "av_aes_ctr_init(sc->cenc.aes_ctr, c->decryption_key)",
          "old_line_content": "    int flags;",
          "new_line_content": "    return av_aes_ctr_init(sc->cenc.aes_ctr, c->decryption_key);",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": null,
          "new_api": "av_reallocp_array",
          "old_text": null,
          "new_text": "av_reallocp_array(&st->index_entries,\n                              st->nb_index_entries + sc->sample_count,\n                              sizeof(*st->index_entries))",
          "old_line_content": "            // Expand ctts entries such that we have a 1-1 mapping with samples",
          "new_line_content": "        if (av_reallocp_array(&st->index_entries,",
          "content_same": false
        },
        {
          "line": 5781,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"duplicate saiz atom\\n\")",
          "old_line_content": "    if ((flags & 0x01) != 0) {",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"duplicate saiz atom\\n\");",
          "content_same": false
        },
        {
          "line": 5787,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_r8(pb); /* version */",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": null,
          "new_api": "av_fast_realloc",
          "old_text": null,
          "new_text": "av_fast_realloc(NULL, &sc->ctts_allocated_size,\n                                    sc->sample_count * sizeof(*sc->ctts_data))",
          "old_line_content": "                            sc->ctts_count < sc->sample_count; j++)",
          "new_line_content": "            sc->ctts_data = av_fast_realloc(NULL, &sc->ctts_allocated_size,",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(ctts_data_old)",
          "old_line_content": "                                   ctts_data_old[i].duration);",
          "new_line_content": "                av_free(ctts_data_old);",
          "content_same": false
        },
        {
          "line": 5793,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    }",
          "new_line_content": "        avio_rb32(pb);    /* info type */",
          "content_same": false
        },
        {
          "line": 5794,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "",
          "new_line_content": "        avio_rb32(pb);    /* info type param */",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    sc->cenc.auxiliary_info_default_size = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 5798,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "    }",
          "new_line_content": "    avio_rb32(pb);    /* entries */",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(ctts_data_old)",
          "old_line_content": "",
          "new_line_content": "            av_free(ctts_data_old);",
          "content_same": false
        },
        {
          "line": 5804,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "old_line_content": "    if (!sc->cenc.auxiliary_info_sizes) {",
          "new_line_content": "    if (atom.size > FFMIN(INT_MAX, SIZE_MAX)) {",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": null,
          "new_api": "mov_stsc_index_valid",
          "old_text": null,
          "new_text": "mov_stsc_index_valid(stsc_index, sc->stsc_count)",
          "old_line_content": "            if (sc->stsz_sample_size>0 && sc->stsz_sample_size < sc->sample_size) {",
          "new_line_content": "            while (mov_stsc_index_valid(stsc_index, sc->stsc_count) &&",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(data_size)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    sc->cenc.auxiliary_info_sizes = av_malloc(data_size);",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too large), ignoring\\n\", sc->stsz_sample_size)",
          "old_line_content": "                int keyframe = 0;",
          "new_line_content": "                av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too large), ignoring\\n\", sc->stsz_sample_size);",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too small), ignoring\\n\", sc->stsz_sample_size)",
          "old_line_content": "                }",
          "new_line_content": "                av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too small), ignoring\\n\", sc->stsz_sample_size);",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, sc->cenc.auxiliary_info_sizes, data_size)",
          "old_line_content": "{",
          "new_line_content": "    if (avio_read(pb, sc->cenc.auxiliary_info_sizes, data_size) != data_size) {",
          "content_same": false
        },
        {
          "line": 5820,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info sizes\")",
          "old_line_content": "    AVStream *st;",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info sizes\");",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"wrong sample count\\n\")",
          "old_line_content": "                    keyframe = 1;",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_ERROR, \"wrong sample count\\n\");",
          "content_same": false
        },
        {
          "line": 5844,
          "old_api": null,
          "new_api": "avio_rb24",
          "old_text": null,
          "new_text": "avio_rb24(pb)",
          "old_line_content": "",
          "new_line_content": "    avio_rb24(pb); /* Flags */",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, buf, sizeof(buf))",
          "old_line_content": "    if (ret < 0)",
          "new_line_content": "    avio_read(pb, buf, sizeof(buf));",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": null,
          "new_api": "flac_parse_block_header",
          "old_text": null,
          "new_text": "flac_parse_block_header(buf, &last, &type, &size)",
          "old_line_content": "        return ret;",
          "new_line_content": "    flac_parse_block_header(buf, &last, &type, &size);",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": null,
          "new_api": "ff_get_extradata",
          "old_text": null,
          "new_text": "ff_get_extradata(c->fc, st->codecpar, pb, size)",
          "old_line_content": "",
          "new_line_content": "    ret = ff_get_extradata(c->fc, st->codecpar, pb, size);",
          "content_same": false
        },
        {
          "line": 5859,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"non-STREAMINFO FLACMetadataBlock(s) ignored\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"non-STREAMINFO FLACMetadataBlock(s) ignored\\n\");",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %u, offset %\"PRIx64\", dts %\"PRId64\", \"\n                            \"size %u, distance %u, keyframe %d\\n\", st->index, current_sample,\n                            current_offset, current_dts, sample_size, distance, keyframe)",
          "old_line_content": "",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %u, offset %\"PRIx64\", dts %\"PRId64\", \"",
          "content_same": false
        },
        {
          "line": 5873,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c, AV_LOG_ERROR, \"current sample %\"PRId64\" greater than the number of auxiliary info sample sizes %\"SIZE_SPECIFIER\"\\n\",\n                index, sc->cenc.auxiliary_info_sizes_count)",
          "old_line_content": "",
          "new_line_content": "            av_log(c, AV_LOG_ERROR, \"current sample %\"PRId64\" greater than the number of auxiliary info sample sizes %\"SIZE_SPECIFIER\"\\n\",",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_WARNING,\n                           \"Invalid SampleDelta %d in STTS, at %d st:%d\\n\",\n                           sc->stts_data[stts_index].duration, stts_index,\n                           st->index)",
          "old_line_content": "                    current_dts += dts_correction;",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c, AV_LOG_ERROR, \"auxiliary info offset %\"SIZE_SPECIFIER\" greater than auxiliary info size %\"SIZE_SPECIFIER\"\\n\",\n            auxiliary_info_seek_offset, (size_t)(sc->cenc.auxiliary_info_end - sc->cenc.auxiliary_info))",
          "old_line_content": "",
          "new_line_content": "        av_log(c, AV_LOG_ERROR, \"auxiliary info offset %\"SIZE_SPECIFIER\" greater than auxiliary info size %\"SIZE_SPECIFIER\"\\n\",",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": null,
          "new_api": "mov_seek_auxiliary_info",
          "old_text": null,
          "new_text": "mov_seek_auxiliary_info(c, sc, index)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "        ret = mov_seek_auxiliary_info(c, sc, index);",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read iv from the auxiliary info\\n\")",
          "old_line_content": "        /* decrypt the whole packet */",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read iv from the auxiliary info\\n\");",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": null,
          "new_api": "av_aes_ctr_set_iv",
          "old_text": null,
          "new_text": "av_aes_ctr_set_iv(sc->cenc.aes_ctr, sc->cenc.auxiliary_info_pos)",
          "old_line_content": "",
          "new_line_content": "    av_aes_ctr_set_iv(sc->cenc.aes_ctr, sc->cenc.auxiliary_info_pos);",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"error unaligned chunk\\n\")",
          "old_line_content": "            } else {",
          "new_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"error unaligned chunk\\n\");",
          "content_same": false
        },
        {
          "line": 5921,
          "old_api": null,
          "new_api": "av_aes_ctr_crypt",
          "old_text": null,
          "new_text": "av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, size)",
          "old_line_content": "",
          "new_line_content": "        av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, size);",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample count from the auxiliary info\\n\")",
          "old_line_content": "        if (6 > sc->cenc.auxiliary_info_end - sc->cenc.auxiliary_info_pos) {",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample count from the auxiliary info\\n\");",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "mov_stsc_index_valid",
          "old_text": null,
          "new_text": "mov_stsc_index_valid(i, sc->stsc_count)",
          "old_line_content": "            return;",
          "new_line_content": "            if (mov_stsc_index_valid(i, sc->stsc_count))",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(sc->cenc.auxiliary_info_pos)",
          "old_line_content": "",
          "new_line_content": "    subsample_count = AV_RB16(sc->cenc.auxiliary_info_pos);",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample from the auxiliary info\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample from the auxiliary info\\n\");",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_TRACE, \"chunk count %u\\n\", total)",
          "old_line_content": "        st->index_entries_allocated_size = (st->nb_index_entries + total) * sizeof(*st->index_entries);",
          "new_line_content": "        av_log(mov->fc, AV_LOG_TRACE, \"chunk count %u\\n\", total);",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": null,
          "new_api": "av_reallocp_array",
          "old_text": null,
          "new_text": "av_reallocp_array(&st->index_entries,\n                              st->nb_index_entries + total,\n                              sizeof(*st->index_entries))",
          "old_line_content": "        for (i = 0; i < sc->chunk_count; i++) {",
          "new_line_content": "        if (av_reallocp_array(&st->index_entries,",
          "content_same": false
        },
        {
          "line": 5942,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(sc->cenc.auxiliary_info_pos)",
          "old_line_content": "",
          "new_line_content": "        clear_bytes = AV_RB16(sc->cenc.auxiliary_info_pos);",
          "content_same": false
        },
        {
          "line": 5944,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(sc->cenc.auxiliary_info_pos)",
          "old_line_content": "        input += clear_bytes;",
          "new_line_content": "        encrypted_bytes = AV_RB32(sc->cenc.auxiliary_info_pos);",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"subsample size exceeds the packet size left\\n\")",
          "old_line_content": "        input += encrypted_bytes;",
          "new_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"subsample size exceeds the packet size left\\n\");",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": null,
          "new_api": "mov_stsc_index_valid",
          "old_text": null,
          "new_text": "mov_stsc_index_valid(stsc_index, sc->stsc_count)",
          "old_line_content": "                if (sc->samples_per_frame > 1 && !sc->bytes_per_frame) {",
          "new_line_content": "            if (mov_stsc_index_valid(stsc_index, sc->stsc_count) &&",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": null,
          "new_api": "av_aes_ctr_crypt",
          "old_text": null,
          "new_text": "av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, encrypted_bytes)",
          "old_line_content": "    sc->cenc.auxiliary_info_index++;",
          "new_line_content": "        av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, encrypted_bytes);",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"leftover packet bytes after subsample processing\\n\")",
          "old_line_content": "{",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"leftover packet bytes after subsample processing\\n\");",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(mov->fc,\n                           \"Zero bytes per frame, but %d samples per frame\",\n                           sc->samples_per_frame)",
          "old_line_content": "                } else {",
          "new_line_content": "                    avpriv_request_sample(mov->fc,",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN((1024 / sc->samples_per_frame)*\n                                        sc->samples_per_frame, chunk_samples)",
          "old_line_content": "                if (st->nb_index_entries >= total) {",
          "new_line_content": "                        samples = FFMIN((1024 / sc->samples_per_frame)*",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(1024, chunk_samples)",
          "old_line_content": "                if (size > 0x3FFFFFFF) {",
          "new_line_content": "                        samples = FFMIN(1024, chunk_samples);",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_ERROR, \"wrong chunk count %u\\n\", total)",
          "old_line_content": "                e->timestamp = current_dts;",
          "new_line_content": "                    av_log(mov->fc, AV_LOG_ERROR, \"wrong chunk count %u\\n\", total);",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"unsupported OpusSpecificBox version\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"unsupported OpusSpecificBox version\\n\");",
          "content_same": false
        },
        {
          "line": 5992,
          "old_api": null,
          "new_api": "ff_alloc_extradata",
          "old_text": null,
          "new_text": "ff_alloc_extradata(st->codecpar, size)",
          "old_line_content": "       little-endian; aside from the preceeding magic and version they're",
          "new_line_content": "    if (ff_alloc_extradata(st->codecpar, size))",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "       otherwise currently identical.  Data after output gain at offset 16",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(mov->fc, AV_LOG_TRACE, \"AVIndex stream %d, chunk %u, offset %\"PRIx64\", dts %\"PRId64\", \"\n                       \"size %u, duration %u\\n\", st->index, i, current_offset, current_dts,\n                       size, samples)",
          "old_line_content": "    }",
          "new_line_content": "                av_log(mov->fc, AV_LOG_TRACE, \"AVIndex stream %d, chunk %u, offset %\"PRIx64\", dts %\"PRId64\", \"",
          "content_same": false
        },
        {
          "line": 6004,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(st->codecpar->extradata + 10)",
          "old_line_content": "",
          "new_line_content": "    pre_skip = AV_RB16(st->codecpar->extradata + 10);",
          "content_same": false
        },
        {
          "line": 6005,
          "old_api": null,
          "new_api": "AV_WL16",
          "old_text": null,
          "new_text": "AV_WL16(st->codecpar->extradata + 10, pre_skip)",
          "old_line_content": "    return 0;",
          "new_line_content": "    AV_WL16(st->codecpar->extradata + 10, pre_skip);",
          "content_same": false
        },
        {
          "line": 6006,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(st->codecpar->extradata + 12)",
          "old_line_content": "}",
          "new_line_content": "    AV_WL32(st->codecpar->extradata + 12, AV_RB32(st->codecpar->extradata + 12));",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(st->codecpar->extradata + 16)",
          "old_line_content": "",
          "new_line_content": "    AV_WL16(st->codecpar->extradata + 16, AV_RB16(st->codecpar->extradata + 16));",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": null,
          "new_api": "mov_fix_index",
          "old_text": null,
          "new_text": "mov_fix_index(mov, st)",
          "old_line_content": "    char src_auth[256];",
          "new_line_content": "        mov_fix_index(mov, st);",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "mov_estimate_video_delay",
          "old_text": null,
          "new_text": "mov_estimate_video_delay(mov, st)",
          "old_line_content": "    char ref_host[256];",
          "new_line_content": "    mov_estimate_video_delay(mov, st);",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": null,
          "new_api": "av_url_split",
          "old_text": null,
          "new_text": "av_url_split(src_proto, sizeof(src_proto), src_auth, sizeof(src_auth), src_host, sizeof(src_host), &src_port, NULL, 0, src)",
          "old_line_content": "        return 0;",
          "new_line_content": "    av_url_split(src_proto, sizeof(src_proto), src_auth, sizeof(src_auth), src_host, sizeof(src_host), &src_port, NULL, 0, src);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(src_auth)",
          "old_line_content": "        return 0;",
          "new_line_content": "    } else if (strlen(src_auth) + 1 >= sizeof(src_auth) ||",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref_auth)",
          "old_line_content": "    } else",
          "new_line_content": "        strlen(ref_auth) + 1 >= sizeof(ref_auth) ||",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(src_host)",
          "old_line_content": "        return 1;",
          "new_line_content": "        strlen(src_host) + 1 >= sizeof(src_host) ||",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref_host)",
          "old_line_content": "}",
          "new_line_content": "        strlen(ref_host) + 1 >= sizeof(ref_host)) {",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(src_proto, ref_proto)",
          "old_line_content": "static int mov_open_dref(MOVContext *c, AVIOContext **pb, const char *src, MOVDref *ref)",
          "new_line_content": "    } else if (strcmp(src_proto, ref_proto) ||",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(src_auth, ref_auth)",
          "old_line_content": "{",
          "new_line_content": "               strcmp(src_auth, ref_auth) ||",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(src_host, ref_host)",
          "old_line_content": "    /* try relative path, we do not try the absolute because it can leak information about our",
          "new_line_content": "               strcmp(src_host, ref_host) ||",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(src, '/')",
          "old_line_content": "                if (i == ref->nlvl_to - 1)",
          "new_line_content": "        src_path = strrchr(src, '/');",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref->path)",
          "old_line_content": "        if (i == ref->nlvl_to - 1 && src_path - src  < sizeof(filename)) {",
          "new_line_content": "        for (i = 0, l = strlen(ref->path) - 1; l >= 0; l--)",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(filename, src, src_path - src)",
          "old_line_content": "",
          "new_line_content": "            memcpy(filename, src, src_path - src);",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": null,
          "new_api": "av_strlcat",
          "old_text": null,
          "new_text": "av_strlcat(filename, \"../\", sizeof(filename))",
          "old_line_content": "                        \"set demuxer option use_absolute_path to allow it anyway\\n\",",
          "new_line_content": "                av_strlcat(filename, \"../\", sizeof(filename));",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "test_same_origin",
          "old_text": null,
          "new_text": "test_same_origin(src, filename)",
          "old_line_content": "",
          "new_line_content": "                int same_origin = test_same_origin(src, filename);",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n                        \"Reference with mismatching origin, %s not tried for security reasons, \"\n                        \"set demuxer option use_absolute_path to allow it anyway\\n\",\n                        ref->path)",
          "old_line_content": "                   (ref->nlvl_from > 1 && same_origin < 0) ||",
          "new_line_content": "                    av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOENT)",
          "old_line_content": "",
          "new_line_content": "                    return AVERROR(ENOENT);",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(ref->path + l + 1, \":\")",
          "old_line_content": "                return 0;",
          "new_line_content": "                   strstr(ref->path + l + 1, \":\") ||",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('d','f','L','a')",
          "old_line_content": "{ 0, NULL }",
          "new_line_content": "{ MKTAG('d','f','L','a'), mov_read_dfla },",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(filename)",
          "old_line_content": "            return 0;",
          "new_line_content": "            if (strlen(filename) + 1 == sizeof(filename))",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOENT)",
          "old_line_content": "    } else {",
          "new_line_content": "                return AVERROR(ENOENT);",
          "content_same": false
        },
        {
          "line": 6096,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('s','t','3','d')",
          "old_line_content": "};",
          "new_line_content": "{ MKTAG('s','t','3','d'), mov_read_st3d }, /* stereoscopic 3D video box */",
          "content_same": false
        },
        {
          "line": 6097,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('s','v','3','d')",
          "old_line_content": "",
          "new_line_content": "{ MKTAG('s','v','3','d'), mov_read_sv3d }, /* spherical video box */",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('d','O','p','s')",
          "old_line_content": "static int mov_read_default(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "new_line_content": "{ MKTAG('d','O','p','s'), mov_read_dops },",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('S','m','D','m')",
          "old_line_content": "{",
          "new_line_content": "{ MKTAG('S','m','D','m'), mov_read_smdm },",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"Using absolute path on user request, \"\n               \"this is a possible security issue\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Using absolute path on user request, \"",
          "content_same": false
        },
        {
          "line": 6100,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('C','o','L','L')",
          "old_line_content": "    int64_t total_size = 0;",
          "new_line_content": "{ MKTAG('C','o','L','L'), mov_read_coll },",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('v','p','c','C')",
          "old_line_content": "    MOVAtom a;",
          "new_line_content": "{ MKTAG('v','p','c','C'), mov_read_vpcc },",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','d','c','v')",
          "old_line_content": "    int i;",
          "new_line_content": "{ MKTAG('m','d','c','v'), mov_read_mdcv },",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('c','l','l','i')",
          "old_line_content": "",
          "new_line_content": "{ MKTAG('c','l','l','i'), mov_read_clli },",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"Absolute path %s not tried for security reasons, \"\n               \"set demuxer option use_absolute_path to allow absolute paths\\n\",\n               ref->path)",
          "old_line_content": "static void fix_timescale(MOVContext *c, MOVStreamContext *sc)",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOENT)",
          "old_line_content": "            sc->time_scale = 1;",
          "new_line_content": "    return AVERROR(ENOENT);",
          "content_same": false
        },
        {
          "line": 6114,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_ERROR, \"Atoms too deeply nested\\n\")",
          "old_line_content": "        a.size = atom.size;",
          "new_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Atoms too deeply nested\\n\");",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(c->fc, AV_LOG_WARNING, \"stream %d, timescale not set\\n\", sc->ffindex)",
          "old_line_content": "    AVStream *st;",
          "new_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"stream %d, timescale not set\\n\", sc->ffindex);",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": null,
          "new_api": "avio_feof",
          "old_text": null,
          "new_text": "avio_feof(pb)",
          "old_line_content": "                c->fc->strict_std_compliance < FF_COMPLIANCE_STRICT &&",
          "new_line_content": "    while (total_size <= atom.size - 8 && !avio_feof(pb)) {",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(pb)",
          "old_line_content": "                    return AVERROR_INVALIDDATA;",
          "new_line_content": "            a.size = avio_rb32(pb);",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(c->fc, NULL)",
          "old_line_content": "    c->trak_index = st->index;",
          "new_line_content": "    st = avformat_new_stream(c->fc, NULL);",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "    if (!st) return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MOVStreamContext))",
          "old_line_content": "        return ret;",
          "new_line_content": "    sc = av_mallocz(sizeof(MOVStreamContext));",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "    if (!sc) return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 6138,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('c','m','o','v')",
          "old_line_content": "                {",
          "new_line_content": "                    *type == MKTAG('c','m','o','v')) {",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('r','o','o','t')",
          "old_line_content": "                }",
          "new_line_content": "            if (atom.type != MKTAG('r','o','o','t') &&",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6147,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "                a.size = avio_rb64(pb) - 8;",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "fix_timescale",
          "new_api": null,
          "old_text": "fix_timescale(c, sc)",
          "new_text": null,
          "old_line_content": "    fix_timescale(c, sc);",
          "new_line_content": "    /* sanity checks */",
          "content_same": false
        },
        {
          "line": 4102,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 64, 1, sc->time_scale)",
          "new_text": null,
          "old_line_content": "    avpriv_set_pts_info(st, 64, 1, sc->time_scale);",
          "new_line_content": "                            (!sc->sample_size && !sc->sample_count))) ||",
          "content_same": false
        },
        {
          "line": 6151,
          "old_api": "\"PRId64\"\\n\",\n               av_fourcc2str(a.type)",
          "new_api": null,
          "old_text": "\"PRId64\"\\n\",\n               av_fourcc2str(a.type)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"type:'%s' parent:'%s' sz: %\"PRId64\" %\"PRId64\" %\"PRId64\"\\n\",",
          "new_line_content": "                    return 0;",
          "content_same": false
        },
        {
          "line": 6152,
          "old_api": "av_fourcc2str",
          "new_api": null,
          "old_text": "av_fourcc2str(atom.type)",
          "new_text": null,
          "old_line_content": "               av_fourcc2str(a.type), av_fourcc2str(atom.type), a.size, total_size, atom.size);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n                       \"stream %d, error opening alias: path='%s', dir='%s', \"\n                       \"filename='%s', volume='%s', nlvl_from=%d, nlvl_to=%d\\n\",\n                       st->index, dref->path, dref->dir, dref->filename,\n                       dref->volume, dref->nlvl_from, dref->nlvl_to)",
          "new_text": null,
          "old_line_content": "                av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6159,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(a.size, atom.size - total_size)",
          "new_text": null,
          "old_line_content": "        a.size = FFMIN(a.size, atom.size - total_size);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"Skipped opening external track: \"\n                   \"stream %d, alias: path='%s', dir='%s', \"\n                   \"filename='%s', volume='%s', nlvl_from=%d, nlvl_to=%d.\"\n                   \"Set enable_drefs to allow this.\\n\",\n                   st->index, dref->path, dref->dir, dref->filename,\n                   dref->volume, dref->nlvl_from, dref->nlvl_to)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "new_line_content": "        MOVDref *dref = &sc->drefs[sc->dref_id - 1];",
          "content_same": false
        },
        {
          "line": 6169,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('i','l','s','t')",
          "new_text": null,
          "old_line_content": "                       atom.type == MKTAG('i','l','s','t')))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6175,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','e','t','a')",
          "new_text": null,
          "old_line_content": "            atom.type == MKTAG('m','e','t','a') &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6176,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('k','e','y','s')",
          "new_text": null,
          "old_line_content": "            a.type == MKTAG('k','e','y','s')) {",
          "new_line_content": "        // container is user data",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "av_d2q",
          "new_api": null,
          "old_text": "av_d2q(((double)st->codecpar->height * sc->width) /\n                                             ((double)st->codecpar->width * sc->height), INT_MAX)",
          "new_text": null,
          "old_line_content": "            st->sample_aspect_ratio = av_d2q(((double)st->codecpar->height * sc->width) /",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6181,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, a.size)",
          "new_text": null,
          "old_line_content": "            avio_skip(pb, a.size);",
          "new_line_content": "        // Supports parsing the QuickTime Metadata Keys.",
          "content_same": false
        },
        {
          "line": 6183,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "            int64_t start_pos = avio_tell(pb);",
          "new_line_content": "        if (!parse && c->found_hdlr_mdta &&",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "av_reduce",
          "new_api": null,
          "old_text": "av_reduce(&st->r_frame_rate.num, &st->r_frame_rate.den,\n                      sc->time_scale, sc->stts_data[0].duration, INT_MAX)",
          "new_text": null,
          "old_line_content": "            av_reduce(&st->r_frame_rate.num, &st->r_frame_rate.den,",
          "new_line_content": "        if (!st->sample_aspect_ratio.num && st->codecpar->width && st->codecpar->height &&",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "TAG_IS_AVCI",
          "new_api": null,
          "old_text": "TAG_IS_AVCI(st->codecpar->codec_tag)",
          "new_text": null,
          "old_line_content": "        TAG_IS_AVCI(st->codecpar->codec_tag)) {",
          "new_line_content": "#if FF_API_R_FRAME_RATE",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "ff_generate_avci_extradata",
          "new_api": null,
          "old_text": "ff_generate_avci_extradata(st)",
          "new_text": null,
          "old_line_content": "        ret = ff_generate_avci_extradata(st);",
          "new_line_content": "        if (sc->stts_count == 1 || (sc->stts_count == 2 && sc->stts_data[1].count == 1))",
          "content_same": false
        },
        {
          "line": 6198,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "            left = a.size - avio_tell(pb) + start_pos;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6200,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, left)",
          "new_text": null,
          "old_line_content": "                avio_skip(pb, left);",
          "new_line_content": "                ((!(pb->seekable & AVIO_SEEKABLE_NORMAL) || c->fc->flags & AVFMT_FLAG_IGNIDX || c->frag_index.complete) ||",
          "content_same": false
        },
        {
          "line": 6202,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING,\n                       \"overread end of atom '%.4s' by %\"PRId64\" bytes\\n\",\n                       (char*)&a.type, -left)",
          "new_text": null,
          "old_line_content": "                av_log(c->fc, AV_LOG_WARNING,",
          "new_line_content": "                if (!(pb->seekable & AVIO_SEEKABLE_NORMAL) || c->fc->flags & AVFMT_FLAG_IGNIDX || c->frag_index.complete)",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, left, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "                avio_seek(pb, left, SEEK_CUR);",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, atom.size - total_size)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, atom.size - total_size);",
          "new_line_content": "                       (char*)&a.type, -left);",
          "content_same": false
        },
        {
          "line": 4175,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->chunk_offsets)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->chunk_offsets);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->sample_sizes)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->sample_sizes);",
          "new_line_content": "    // If the duration of the mp3 packets is not constant, then they could need a parser",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->keyframes)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->keyframes);",
          "new_line_content": "    if (st->codecpar->codec_id == AV_CODEC_ID_MP3",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->stts_data)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->stts_data);",
          "new_line_content": "        && sc->stts_count > 3",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->stps_data)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->stps_data);",
          "new_line_content": "        && sc->stts_count*10 > st->nb_frames",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->elst_data)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->elst_data);",
          "new_line_content": "        && sc->time_scale == st->codecpar->sample_rate) {",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->rap_group)",
          "new_text": null,
          "old_line_content": "    av_freep(&sc->rap_group);",
          "new_line_content": "            st->need_parsing = AVSTREAM_PARSE_FULL;",
          "content_same": false
        },
        {
          "line": 6232,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(p->buf + offset + 4)",
          "new_text": null,
          "old_line_content": "        tag = AV_RL32(p->buf + offset + 4);",
          "new_line_content": "    int score = 0;",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','o','o','v')",
          "new_text": null,
          "old_line_content": "        case MKTAG('m','o','o','v'):",
          "new_line_content": "    /* check file header */",
          "content_same": false
        },
        {
          "line": 6237,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','d','a','t')",
          "new_text": null,
          "old_line_content": "        case MKTAG('m','d','a','t'):",
          "new_line_content": "    for (;;) {",
          "content_same": false
        },
        {
          "line": 6238,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('p','n','o','t')",
          "new_text": null,
          "old_line_content": "        case MKTAG('p','n','o','t'): /* detect movs with preview pics like ew.mov and april.mov */",
          "new_line_content": "        /* ignore invalid offset */",
          "content_same": false
        },
        {
          "line": 6239,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('u','d','t','a')",
          "new_text": null,
          "old_line_content": "        case MKTAG('u','d','t','a'): /* Packet Video PVAuthor adds this and a lot of more junk */",
          "new_line_content": "        if ((offset + 8) > (unsigned int)p->buf_size)",
          "content_same": false
        },
        {
          "line": 6240,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('f','t','y','p')",
          "new_text": null,
          "old_line_content": "        case MKTAG('f','t','y','p'):",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6242,
          "old_api": "AV_RB32",
          "new_api": null,
          "old_text": "AV_RB32(p->buf+offset)",
          "new_text": null,
          "old_line_content": "                (AV_RB32(p->buf+offset) != 1 ||",
          "new_line_content": "        switch(tag) {",
          "content_same": false
        },
        {
          "line": 6245,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(score, AVPROBE_SCORE_EXTENSION)",
          "new_text": null,
          "old_line_content": "                score = FFMAX(score, AVPROBE_SCORE_EXTENSION);",
          "new_line_content": "            moov_offset = offset + 4;",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 4)",
          "new_text": null,
          "old_line_content": "    avio_skip(pb, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    count = avio_rb32(pb);",
          "new_line_content": "static int mov_read_keys(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"The 'keys' atom with the invalid key count: %\"PRIu32\"\\n\", count)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "    uint32_t count;",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('w','i','d','e')",
          "new_text": null,
          "old_line_content": "        case MKTAG('w','i','d','e'):",
          "new_line_content": "                    )) {",
          "content_same": false
        },
        {
          "line": 6260,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('j','u','n','k')",
          "new_text": null,
          "old_line_content": "        case MKTAG('j','u','n','k'):",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6261,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('p','i','c','t')",
          "new_text": null,
          "old_line_content": "        case MKTAG('p','i','c','t'):",
          "new_line_content": "                score = AVPROBE_SCORE_MAX;",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    if (count > UINT_MAX / sizeof(*c->meta_keys) - 1) {",
          "content_same": false
        },
        {
          "line": 6262,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(score, AVPROBE_SCORE_MAX - 5)",
          "new_text": null,
          "old_line_content": "            score  = FFMAX(score, AVPROBE_SCORE_MAX - 5);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        uint32_t key_size = avio_rb32(pb);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "        uint32_t type = avio_rl32(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6265,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG(0x82,0x82,0x7f,0x7d)",
          "new_text": null,
          "old_line_content": "        case MKTAG(0x82,0x82,0x7f,0x7d):",
          "new_line_content": "        /* those are more common words, so rate then a bit less */",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n                   \"The key# %\"PRIu32\" in meta has invalid size:\"\n                   \"%\"PRIu32\"\\n\", i, key_size)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "    c->meta_keys_count = count + 1;",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "                   \"%\"PRIu32\"\\n\", i, key_size);",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, c->meta_keys[i], key_size)",
          "new_text": null,
          "old_line_content": "        avio_read(pb, c->meta_keys[i], key_size);",
          "new_line_content": "            return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 6284,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('h','d','l','r')",
          "new_text": null,
          "old_line_content": "            if(AV_RL32(p->buf + offset     ) == MKTAG('h','d','l','r') &&",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6285,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','h','l','r')",
          "new_text": null,
          "old_line_content": "               AV_RL32(p->buf + offset +  8) == MKTAG('m','h','l','r') &&",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6286,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('M','P','E','G')",
          "new_text": null,
          "old_line_content": "               AV_RL32(p->buf + offset + 12) == MKTAG('M','P','E','G')){",
          "new_line_content": "    if(score > AVPROBE_SCORE_MAX - 50 && moov_offset != -1) {",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"Found media data tag MPEG indicating this is a MOV-packed MPEG-PS.\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_WARNING, \"Found media data tag MPEG indicating this is a MOV-packed MPEG-PS.\\n\");",
          "new_line_content": "        /* moov atom in the header - we should make sure that this is not a",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "        if (end - avio_tell(pb) <= 12)",
          "new_line_content": "    if (c->fc->nb_streams < 1)",
          "content_same": false
        },
        {
          "line": 4259,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        len = avio_rb32(pb);",
          "new_line_content": "    sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "        tag = avio_rl32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 4)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, 4); // flags",
          "new_line_content": "    for (i = 0; i < 3; i++) {",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "        if (len < 12 || len - 12 > end - avio_tell(pb))",
          "new_line_content": "        uint32_t len, tag;",
          "content_same": false
        },
        {
          "line": 4267,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m', 'e', 'a', 'n')",
          "new_text": null,
          "old_line_content": "        if (tag == MKTAG('m', 'e', 'a', 'n'))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('d', 'a', 't', 'a')",
          "new_text": null,
          "old_line_content": "        else if (tag == MKTAG('d', 'a', 't', 'a') && len > 4) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6321,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Referenced QT chapter track not found\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"Referenced QT chapter track not found\\n\");",
          "new_line_content": "    for (j = 0; j < mov->nb_chapter_tracks; j++) {",
          "content_same": false
        },
        {
          "line": 6326,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(sc->pb)",
          "new_text": null,
          "old_line_content": "        cur_pos = avio_tell(sc->pb);",
          "new_line_content": "                st = s->streams[i];",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": "ffio_read_size",
          "new_api": null,
          "old_text": "ffio_read_size(pb, *p, len)",
          "new_text": null,
          "old_line_content": "        ret = ffio_read_size(pb, *p, len);",
          "new_line_content": "            p = &val;",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(p)",
          "new_text": null,
          "old_line_content": "            av_freep(p);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6334,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                if (avio_seek(sc->pb, sample->pos, SEEK_SET) != sample->pos) {",
          "new_line_content": "        sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 6339,
          "old_api": "av_get_packet",
          "new_api": null,
          "old_text": "av_get_packet(sc->pb, &pkt, sample->size)",
          "new_text": null,
          "old_line_content": "                if (av_get_packet(sc->pb, &pkt, sample->size) < 0)",
          "new_line_content": "            if (st->nb_index_entries) {",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(key, \"cdec\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(key, \"cdec\") != 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4300,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&c->fc->metadata, key, val,\n                        AV_DICT_DONT_STRDUP_KEY | AV_DICT_DONT_STRDUP_VAL)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&c->fc->metadata, key, val,",
          "new_line_content": "    if (mean && key && val) {",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_VERBOSE,\n               \"Unhandled or malformed custom metadata of size %\"PRId64\"\\n\", atom.size)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_VERBOSE,",
          "new_line_content": "                    sc->start_pad = priming;",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&key)",
          "new_text": null,
          "old_line_content": "    av_freep(&key);",
          "new_line_content": "                        AV_DICT_DONT_STRDUP_KEY | AV_DICT_DONT_STRDUP_VAL);",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&val)",
          "new_text": null,
          "old_line_content": "    av_freep(&val);",
          "new_line_content": "            key = val = NULL;",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mean)",
          "new_text": null,
          "old_line_content": "    av_freep(&mean);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING, \"ignoring stream duration which is shorter than chapters\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_WARNING, \"ignoring stream duration which is shorter than chapters\\n\");",
          "new_line_content": "            st->discard = AVDISCARD_ALL;",
          "content_same": false
        },
        {
          "line": 6362,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                if (avio_seek(sc->pb, sample->pos, SEEK_SET) != sample->pos) {",
          "new_line_content": "                uint8_t *title;",
          "content_same": false
        },
        {
          "line": 6363,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Chapter %d not found in file\\n\", i)",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"Chapter %d not found in file\\n\", i);",
          "new_line_content": "                uint16_t ch;",
          "content_same": false
        },
        {
          "line": 6368,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(sc->pb)",
          "new_text": null,
          "old_line_content": "                len = avio_rb16(sc->pb);",
          "new_line_content": "                    end = AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, -8, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, -8, SEEK_CUR);",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": "mov_read_default",
          "new_api": null,
          "old_text": "mov_read_default(c, pb, atom)",
          "new_text": null,
          "old_line_content": "            return mov_read_default(c, pb, atom);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6383,
          "old_api": "avio_get_str16be",
          "new_api": null,
          "old_text": "avio_get_str16be(sc->pb, len, title, title_len)",
          "new_text": null,
          "old_line_content": "                        avio_get_str16be(sc->pb, len, title, title_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6385,
          "old_api": "avio_get_str16le",
          "new_api": null,
          "old_text": "avio_get_str16le(sc->pb, len, title, title_len)",
          "new_text": null,
          "old_line_content": "                        avio_get_str16le(sc->pb, len, title, title_len);",
          "new_line_content": "                // atom following, but in practice are only utf-8 or utf-16, distinguished",
          "content_same": false
        },
        {
          "line": 6387,
          "old_api": "AV_WB16",
          "new_api": null,
          "old_text": "AV_WB16(title, ch)",
          "new_text": null,
          "old_line_content": "                        AV_WB16(title, ch);",
          "new_line_content": "                if (!len) {",
          "content_same": false
        },
        {
          "line": 6391,
          "old_api": "avio_get_str",
          "new_api": null,
          "old_text": "avio_get_str(sc->pb, INT_MAX, title + 2, len - 1)",
          "new_text": null,
          "old_line_content": "                            avio_get_str(sc->pb, INT_MAX, title + 2, len - 1);",
          "new_line_content": "                    if (ch == 0xfeff)",
          "content_same": false
        },
        {
          "line": 6395,
          "old_api": "avpriv_new_chapter",
          "new_api": null,
          "old_text": "avpriv_new_chapter(s, i, st->time_base, sample->timestamp, end, title)",
          "new_text": null,
          "old_line_content": "                avpriv_new_chapter(s, i, st->time_base, sample->timestamp, end, title);",
          "new_line_content": "                    else {",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "    MOVStreamContext *sc;",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    flags = avio_rb24(pb);",
          "new_line_content": "    int version;",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb64(pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb64(pb);",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams-1];",
          "content_same": false
        },
        {
          "line": 6410,
          "old_api": "av_timecode_init",
          "new_api": null,
          "old_text": "av_timecode_init(&tc, rate, flags, 0, s)",
          "new_text": null,
          "old_line_content": "    int ret = av_timecode_init(&tc, rate, flags, 0, s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb32(pb); /* creation time */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6413,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"timecode\",\n                av_timecode_make_string(&tc, buf, value), 0)",
          "new_text": null,
          "old_line_content": "    av_dict_set(&st->metadata, \"timecode\",",
          "new_line_content": "static int parse_timecode_in_framenum_format(AVFormatContext *s, AVStream *st,",
          "content_same": false
        },
        {
          "line": 6414,
          "old_api": "av_timecode_make_string",
          "new_api": null,
          "old_text": "av_timecode_make_string(&tc, buf, value)",
          "new_text": null,
          "old_line_content": "                av_timecode_make_string(&tc, buf, value), 0);",
          "new_line_content": "                                             uint32_t value, int flags)",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    st->id = (int)avio_rb32(pb); /* track id (NOT 0 !)*/",
          "new_line_content": "    st->disposition |= (flags & MOV_TKHD_FLAG_ENABLED) ? AV_DISPOSITION_DEFAULT : 0;",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb); /* reserved */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb); /* reserved */",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb16(pb); /* layer */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb16(pb); /* reserved */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6428,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, st->index_entries->pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(sc->pb, st->index_entries->pos, SEEK_SET);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6429,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(s->pb, 13)",
          "new_text": null,
          "old_line_content": "    avio_skip(s->pb, 13);",
          "new_line_content": "    MOVStreamContext *sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(s->pb)",
          "new_text": null,
          "old_line_content": "    hh = avio_r8(s->pb);",
          "new_line_content": "    char buf[AV_TIMECODE_STR_SIZE];",
          "content_same": false
        },
        {
          "line": 6432,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(s->pb)",
          "new_text": null,
          "old_line_content": "    ss = avio_r8(s->pb);",
          "new_line_content": "    int hh, mm, ss, ff, drop;",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(s->pb)",
          "new_text": null,
          "old_line_content": "    drop = avio_r8(s->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(s->pb)",
          "new_text": null,
          "old_line_content": "    ff = avio_r8(s->pb);",
          "new_line_content": "    if (!st->nb_index_entries)",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf, AV_TIMECODE_STR_SIZE, \"%02d:%02d:%02d%c%02d\",\n             hh, mm, ss, drop ? ';' : ':', ff)",
          "new_text": null,
          "old_line_content": "    snprintf(buf, AV_TIMECODE_STR_SIZE, \"%02d:%02d:%02d%c%02d\",",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    width = avio_rb32(pb);       // 16.16 fixed point track width",
          "new_line_content": "    // they're kept in fixed point format through all calculations",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    height = avio_rb32(pb);      // 16.16 fixed point track height",
          "new_line_content": "    // save u,v,z to store the whole matrix in the AV_PKT_DATA_DISPLAYMATRIX",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(sc->pb)",
          "new_text": null,
          "old_line_content": "    int64_t cur_pos = avio_tell(sc->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6453,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, st->index_entries->pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(sc->pb, st->index_entries->pos, SEEK_SET);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6454,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(s->pb)",
          "new_text": null,
          "old_line_content": "    value = avio_rb32(s->pb);",
          "new_line_content": "    MOVStreamContext *sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "IS_MATRIX_IDENT",
          "new_api": null,
          "old_text": "IS_MATRIX_IDENT(res_display_matrix)",
          "new_text": null,
          "old_line_content": "    if (!IS_MATRIX_IDENT(res_display_matrix)) {",
          "new_line_content": "            for (e = 0; e < 3; e++) {",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->display_matrix)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->display_matrix);",
          "new_line_content": "                     c->movie_display_matrix[e][j]) >> sh[e];",
          "content_same": false
        },
        {
          "line": 4412,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(sizeof(int32_t) * 9)",
          "new_text": null,
          "old_line_content": "        sc->display_matrix = av_malloc(sizeof(int32_t) * 9);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6465,
          "old_api": "parse_timecode_in_framenum_format",
          "new_api": null,
          "old_text": "parse_timecode_in_framenum_format(s, st, value, flags)",
          "new_text": null,
          "old_line_content": "    parse_timecode_in_framenum_format(s, st, value, flags);",
          "new_line_content": "    if (sc->tmcd_flags & 0x0001) flags |= AV_TIMECODE_FLAG_DROPFRAME;",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, cur_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(sc->pb, cur_pos, SEEK_SET);",
          "new_line_content": "    if (sc->tmcd_flags & 0x0004) flags |= AV_TIMECODE_FLAG_ALLOWNEGATIVE;",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(rotate)",
          "new_text": null,
          "old_line_content": "        if (!isnan(rotate)) {",
          "new_line_content": "        if (!sc->display_matrix)",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(rotate_buf, sizeof(rotate_buf), \"%g\", rotate)",
          "new_text": null,
          "old_line_content": "            snprintf(rotate_buf, sizeof(rotate_buf), \"%g\", rotate);",
          "new_line_content": "                sc->display_matrix[i * 3 + j] = res_display_matrix[i][j];",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"rotate\", rotate_buf, 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&st->metadata, \"rotate\", rotate_buf, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6483,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->ctts_data)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->ctts_data);",
          "new_line_content": "    int i, j;",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->drefs[j].path)",
          "new_text": null,
          "old_line_content": "            av_freep(&sc->drefs[j].path);",
          "new_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 6486,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->drefs[j].dir)",
          "new_text": null,
          "old_line_content": "            av_freep(&sc->drefs[j].dir);",
          "new_line_content": "        AVStream *st = s->streams[i];",
          "content_same": false
        },
        {
          "line": 4439,
          "old_api": "hypot",
          "new_api": null,
          "old_text": "hypot(sc->display_matrix[0 + i],\n                                      sc->display_matrix[3 + i])",
          "new_text": null,
          "old_line_content": "            disp_transform[i] = hypot(sc->display_matrix[0 + i],",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->drefs)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->drefs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs((disp_transform[0] / disp_transform[1]) - 1.0)",
          "new_text": null,
          "old_line_content": "            fabs((disp_transform[0] / disp_transform[1]) - 1.0) > 0.01)",
          "new_line_content": "    if (width && height && sc->display_matrix) {",
          "content_same": false
        },
        {
          "line": 4445,
          "old_api": "av_d2q",
          "new_api": null,
          "old_text": "av_d2q(\n                disp_transform[0] / disp_transform[1],\n                INT_MAX)",
          "new_text": null,
          "old_line_content": "            st->sample_aspect_ratio = av_d2q(",
          "new_line_content": "        double disp_transform[2];",
          "content_same": false
        },
        {
          "line": 6493,
          "old_api": "ff_format_io_close",
          "new_api": null,
          "old_text": "ff_format_io_close(s, &sc->pb)",
          "new_text": null,
          "old_line_content": "            ff_format_io_close(s, &sc->pb);",
          "new_line_content": "        for (j = 0; j < sc->drefs_count; j++) {",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->chunk_offsets)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->chunk_offsets);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6498,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->sample_sizes)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->sample_sizes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6499,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->keyframes)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->keyframes);",
          "new_line_content": "        sc->drefs_count = 0;",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->stts_data)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->stts_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6501,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->stps_data)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->stps_data);",
          "new_line_content": "        if (!sc->pb_is_copied)",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->rap_group)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->rap_group);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6504,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->display_matrix)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->display_matrix);",
          "new_line_content": "        sc->pb = NULL;",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    flags = avio_rb24(pb);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    track_id = avio_rb32(pb);",
          "new_line_content": "static int mov_read_tfhd(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": "set_frag_stream",
          "new_api": null,
          "old_text": "set_frag_stream(&c->frag_index, track_id)",
          "new_text": null,
          "old_line_content": "    set_frag_stream(&c->frag_index, track_id);",
          "new_line_content": "    int flags, track_id, i;",
          "content_same": false
        },
        {
          "line": 6515,
          "old_api": "av_aes_ctr_free",
          "new_api": null,
          "old_text": "av_aes_ctr_free(sc->cenc.aes_ctr)",
          "new_text": null,
          "old_line_content": "        av_aes_ctr_free(sc->cenc.aes_ctr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6517,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->stereo3d)",
          "new_text": null,
          "old_line_content": "        av_freep(&sc->stereo3d);",
          "new_line_content": "            for (j = 0; j < sc->stsd_count; j++)",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding trex\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding trex\\n\");",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "                             avio_rb64(pb) : flags & MOV_TFHD_DEFAULT_BASE_IS_MOOF ?",
          "new_line_content": "            trex = &c->trex_data[i];",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    frag->stsd_id  = flags & MOV_TFHD_STSD_ID ? avio_rb32(pb) : trex->stsd_id;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "                     avio_rb32(pb) : trex->duration;",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 6530,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->meta_keys[i])",
          "new_text": null,
          "old_line_content": "            av_freep(&mov->meta_keys[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "                     avio_rb32(pb) : trex->size;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6532,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->meta_keys)",
          "new_text": null,
          "old_line_content": "        av_freep(&mov->meta_keys);",
          "new_line_content": "    if (mov->dv_demux) {",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"frag flags 0x%x\\n\", frag->flags)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"frag flags 0x%x\\n\", frag->flags);",
          "new_line_content": "                             frag->moof_offset : frag->implicit_offset;",
          "content_same": false
        },
        {
          "line": 6535,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->trex_data)",
          "new_text": null,
          "old_line_content": "    av_freep(&mov->trex_data);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->bitrates)",
          "new_text": null,
          "old_line_content": "    av_freep(&mov->bitrates);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6543,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->aes_decrypt)",
          "new_text": null,
          "old_line_content": "    av_freep(&mov->aes_decrypt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(num, sizeof(int))",
          "new_text": null,
          "old_line_content": "    if (!(new_tracks = av_malloc_array(num, sizeof(int))))",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(c->chapter_tracks)",
          "new_text": null,
          "old_line_content": "    av_free(c->chapter_tracks);",
          "new_line_content": "static int mov_read_chap(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        c->chapter_tracks[i] = avio_rb32(pb);",
          "new_line_content": "    num = atom.size / 4;",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": "av_reallocp_array",
          "new_api": null,
          "old_text": "av_reallocp_array(&c->trex_data, c->trex_count + 1,\n                                 sizeof(*c->trex_data))",
          "new_text": null,
          "old_line_content": "    if ((err = av_reallocp_array(&c->trex_data, c->trex_count + 1,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6572,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('t','m','c','d')",
          "new_text": null,
          "old_line_content": "        if (st->codecpar->codec_tag  == MKTAG('t','m','c','d') &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6573,
          "old_api": "tmcd_is_referenced",
          "new_api": null,
          "old_text": "tmcd_is_referenced(s, i + 1)",
          "new_text": null,
          "old_line_content": "            !tmcd_is_referenced(s, i + 1)) {",
          "new_line_content": "/* look for a tmcd track not referenced by any video track, and export it globally */",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(st->metadata, \"timecode\", NULL, 0)",
          "new_text": null,
          "old_line_content": "            AVDictionaryEntry *tcr = av_dict_get(st->metadata, \"timecode\", NULL, 0);",
          "new_line_content": "static void export_orphan_timecode(AVFormatContext *s)",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* flags */",
          "new_line_content": "                                 sizeof(*c->trex_data))) < 0) {",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    trex->track_id = avio_rb32(pb);",
          "new_line_content": "        c->trex_count = 0;",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    trex->stsd_id  = avio_rb32(pb);",
          "new_line_content": "        return err;",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    trex->duration = avio_rb32(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    trex->size     = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    trex->flags    = avio_rb32(pb);",
          "new_line_content": "    c->fc->duration = AV_NOPTS_VALUE; // the duration from mvhd is not representing the whole file when fragments are used.",
          "content_same": false
        },
        {
          "line": 6576,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&s->metadata, \"timecode\", tcr->value, 0)",
          "new_text": null,
          "old_line_content": "                av_dict_set(&s->metadata, \"timecode\", tcr->value, 0);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(f)",
          "new_text": null,
          "old_line_content": "    int64_t pos = avio_tell(f);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(f)",
          "new_text": null,
          "old_line_content": "    uint32_t size = avio_rb32(f);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6590,
          "old_api": "MKBETAG",
          "new_api": null,
          "old_text": "MKBETAG('t', 'f', 'r', 'a')",
          "new_text": null,
          "old_line_content": "    if (avio_rb32(f) != MKBETAG('t', 'f', 'r', 'a')) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6593,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_VERBOSE, \"found tfra\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(mov->fc, AV_LOG_VERBOSE, \"found tfra\\n\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(f)",
          "new_text": null,
          "old_line_content": "    track_id = avio_rb32(f);",
          "new_line_content": "    unsigned track_id, item_count;",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(f)",
          "new_text": null,
          "old_line_content": "    fieldlength = avio_rb32(f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4553,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id);",
          "new_line_content": "    int64_t base_media_decode_time;",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* flags */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6610,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(f)",
          "new_text": null,
          "old_line_content": "            time   = avio_rb64(f);",
          "new_line_content": "        int64_t time, offset;",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(f)",
          "new_text": null,
          "old_line_content": "            offset = avio_rb64(f);",
          "new_line_content": "        int index;",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        base_media_decode_time = avio_rb32(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6613,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(f)",
          "new_text": null,
          "old_line_content": "            time   = avio_rb32(f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "get_current_frag_stream_info",
          "new_api": null,
          "old_text": "get_current_frag_stream_info(&c->frag_index)",
          "new_text": null,
          "old_line_content": "    frag_stream_info = get_current_frag_stream_info(&c->frag_index);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 6621,
          "old_api": "get_frag_stream_info",
          "new_api": null,
          "old_text": "get_frag_stream_info(&mov->frag_index, index, track_id)",
          "new_text": null,
          "old_line_content": "        frag_stream_info = get_frag_stream_info(&mov->frag_index, index, track_id);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6627,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(f)",
          "new_text": null,
          "old_line_content": "            avio_r8(f);",
          "new_line_content": "        // access sample.  So it's entry in the tfra can be used as the",
          "content_same": false
        },
        {
          "line": 6631,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(f)",
          "new_text": null,
          "old_line_content": "            avio_r8(f);",
          "new_line_content": "        if (frag_stream_info &&",
          "content_same": false
        },
        {
          "line": 6634,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(f, pos + size, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(f, pos + size, SEEK_SET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(f)",
          "new_text": null,
          "old_line_content": "    int64_t original_pos = avio_tell(f);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(f, stream_size - 4, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if ((seek_ret = avio_seek(f, stream_size - 4, SEEK_SET)) < 0) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"could not find corresponding track id %u\\n\", frag->track_id);",
          "new_line_content": "    MOVFragmentStreamInfo * frag_stream_info;",
          "content_same": false
        },
        {
          "line": 6651,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (unreasonable size)\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (unreasonable size)\\n\");",
          "new_line_content": "    int64_t seek_ret;",
          "content_same": false
        },
        {
          "line": 6659,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (size mismatch)\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"doesn't look like mfra (size mismatch)\\n\");",
          "new_line_content": "    if (mfra_size < 0 || mfra_size > stream_size) {",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": "get_frag_stream_info",
          "new_api": null,
          "old_text": "get_frag_stream_info(&c->frag_index, i, frag->track_id)",
          "new_text": null,
          "old_line_content": "        frag_stream_info = get_frag_stream_info(&c->frag_index, i, frag->track_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "MKBETAG",
          "new_api": null,
          "old_text": "MKBETAG('m', 'f', 'r', 'a')",
          "new_text": null,
          "old_line_content": "    if (avio_rb32(f) != MKBETAG('m', 'f', 'r', 'a')) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6666,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_VERBOSE, \"stream has mfra\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_VERBOSE, \"stream has mfra\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "    for (i = c->frag_index.current + 1; i < c->frag_index.nb_items; i++) {",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    entries = avio_rb32(pb);",
          "new_line_content": "        if (frag_stream_info && frag_stream_info->index_entry >= 0) {",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"flags 0x%x entries %u\\n\", flags, entries)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"flags 0x%x entries %u\\n\", flags, entries);",
          "new_line_content": "            next_frag_index = i;",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(f, original_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    seek_ret = avio_seek(f, original_pos, SEEK_SET);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6676,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n               \"failed to seek back after looking for mfra\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "    do {",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    if (flags & MOV_TRUN_DATA_OFFSET)        data_offset        = avio_rb32(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    if (flags & MOV_TRUN_FIRST_SAMPLE_FLAGS) first_sample_flags = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6688,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"root\")",
          "new_text": null,
          "old_line_content": "    MOVAtom atom = { AV_RL32(\"root\") };",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"found sidx time %\"PRId64\n                    \", using it for pts\\n\", pts)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found sidx time %\"PRId64",
          "new_line_content": "        if (frag_stream_info->first_tfra_pts != AV_NOPTS_VALUE &&",
          "content_same": false
        },
        {
          "line": 6692,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Invalid decryption key len %d expected %d\\n\",\n            mov->decryption_key_len, AES_CTR_KEY_SIZE)",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"Invalid decryption key len %d expected %d\\n\",",
          "new_line_content": "static int mov_read_header(AVFormatContext *s)",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    MOVContext *mov = s->priv_data;",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"found tfdt time %\"PRId64\n                    \", using it for dts\\n\", dts)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found tfdt time %\"PRId64",
          "new_line_content": "                    \", using it for pts\\n\", pts);",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64\n                    \", using it for dts\\n\", dts)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_DEBUG, \"found track end time %\"PRId64",
          "new_line_content": "            dts = frag_stream_info->sidx_pts - sc->time_offset;",
          "content_same": false
        },
        {
          "line": 6708,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, 0, SEEK_SET)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, 0, SEEK_SET);",
          "new_line_content": "    /* .mov and .mp4 aren't streamable anyway (only progressive download if moov is before mdat) */",
          "content_same": false
        },
        {
          "line": 6709,
          "old_api": "mov_read_default",
          "new_api": null,
          "old_text": "mov_read_default(mov, pb, atom)",
          "new_text": null,
          "old_line_content": "        if ((err = mov_read_default(mov, pb, atom)) < 0) {",
          "new_line_content": "    if (pb->seekable & AVIO_SEEKABLE_NORMAL)",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"first sample flags 0x%x\\n\", first_sample_flags)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"first sample flags 0x%x\\n\", first_sample_flags);",
          "new_line_content": "                    \", using it for dts\\n\", dts);",
          "content_same": false
        },
        {
          "line": 6711,
          "old_api": "mov_read_close",
          "new_api": null,
          "old_text": "mov_read_close(s)",
          "new_text": null,
          "old_line_content": "            mov_read_close(s);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Failed to add index entry\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Failed to add index entry\\n\");",
          "new_line_content": "                \", using it for dts\\n\", dts);",
          "content_same": false
        },
        {
          "line": 6716,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"moov atom not found\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"moov atom not found\\n\");",
          "new_line_content": "        if (mov->moov_retry)",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "av_fast_realloc",
          "new_api": null,
          "old_text": "av_fast_realloc(st->index_entries,\n                                  &st->index_entries_allocated_size,\n                                  requested_size)",
          "new_text": null,
          "old_line_content": "    new_entries = av_fast_realloc(st->index_entries,",
          "new_line_content": "    // realloc space for new index entries",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": "mov_read_chapters",
          "new_api": null,
          "old_text": "mov_read_chapters(s)",
          "new_text": null,
          "old_line_content": "            mov_read_chapters(s);",
          "new_line_content": "    if (!mov->found_moov) {",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6727,
          "old_api": "mov_read_timecode_track",
          "new_api": null,
          "old_text": "mov_read_timecode_track(s, s->streams[i])",
          "new_text": null,
          "old_line_content": "                mov_read_timecode_track(s, s->streams[i]);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 6728,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"rtmd\")",
          "new_text": null,
          "old_line_content": "            } else if (s->streams[i]->codecpar->codec_tag == AV_RL32(\"rtmd\")) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "av_fast_realloc",
          "new_api": null,
          "old_text": "av_fast_realloc(sc->ctts_data, &sc->ctts_allocated_size,\n                                requested_size)",
          "new_text": null,
          "old_line_content": "    ctts_data = av_fast_realloc(sc->ctts_data, &sc->ctts_allocated_size,",
          "new_line_content": "    requested_size = (st->nb_index_entries + entries) * sizeof(AVIndexEntry);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "                                  requested_size);",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(st->index_entries + index_entry_pos + entries,\n                st->index_entries + index_entry_pos,\n                sizeof(*st->index_entries) *\n                (st->nb_index_entries - index_entry_pos))",
          "new_text": null,
          "old_line_content": "        memmove(st->index_entries + index_entry_pos + entries,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6747,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(s->streams[tmcd_st_id]->metadata, \"timecode\", NULL, 0)",
          "new_text": null,
          "old_line_content": "            tcr = av_dict_get(s->streams[tmcd_st_id]->metadata, \"timecode\", NULL, 0);",
          "new_line_content": "            AVDictionaryEntry *tcr;",
          "content_same": false
        },
        {
          "line": 6749,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"timecode\", tcr->value, 0)",
          "new_text": null,
          "old_line_content": "                av_dict_set(&st->metadata, \"timecode\", tcr->value, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": "export_orphan_timecode",
          "new_api": null,
          "old_text": "export_orphan_timecode(s)",
          "new_text": null,
          "old_line_content": "    export_orphan_timecode(s);",
          "new_line_content": "                    tmcd_st_id = j;",
          "content_same": false
        },
        {
          "line": 6757,
          "old_api": "fix_timescale",
          "new_api": null,
          "old_text": "fix_timescale(mov, sc)",
          "new_text": null,
          "old_line_content": "        fix_timescale(mov, sc);",
          "new_line_content": "            if (tcr)",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": "av_reduce",
          "new_api": null,
          "old_text": "av_reduce(&st->avg_frame_rate.num, &st->avg_frame_rate.den,\n                      sc->time_scale*(int64_t)sc->nb_frames_for_fps, sc->duration_for_fps, INT_MAX)",
          "new_text": null,
          "old_line_content": "            av_reduce(&st->avg_frame_rate.num, &st->avg_frame_rate.den,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": "mov_rewrite_dvd_sub_extradata",
          "new_api": null,
          "old_text": "mov_rewrite_dvd_sub_extradata(st)",
          "new_text": null,
          "old_line_content": "                if ((err = mov_rewrite_dvd_sub_extradata(st)) < 0)",
          "new_line_content": "        if (st->codecpar->codec_type == AVMEDIA_TYPE_VIDEO && sc->nb_frames_for_fps > 0 && sc->duration_for_fps > 0)",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        if (flags & MOV_TRUN_SAMPLE_DURATION) sample_duration = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        if (flags & MOV_TRUN_SAMPLE_SIZE)     sample_size     = avio_rb32(pb);",
          "new_line_content": "    for (i = 0; i < entries && !pb->eof_reached; i++) {",
          "content_same": false
        },
        {
          "line": 4727,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        if (flags & MOV_TRUN_SAMPLE_FLAGS)    sample_flags    = avio_rb32(pb);",
          "new_line_content": "        unsigned sample_size = frag->size;",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        if (flags & MOV_TRUN_SAMPLE_CTS)      ctts_duration   = avio_rb32(pb);",
          "new_line_content": "        int sample_flags = i ? frag->flags : first_sample_flags;",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": "mov_update_dts_shift",
          "new_api": null,
          "old_text": "mov_update_dts_shift(sc, ctts_duration)",
          "new_text": null,
          "old_line_content": "        mov_update_dts_shift(sc, ctts_duration);",
          "new_line_content": "        unsigned ctts_duration = 0;",
          "content_same": false
        },
        {
          "line": 6778,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_VERBOSE, \"Forcing full parsing for mp3 stream\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_VERBOSE, \"Forcing full parsing for mp3 stream\\n\");",
          "new_line_content": "            if (st->codecpar->codec_id == AV_CODEC_ID_DVD_SUBTITLE) {",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG,\n                   \"pts %\"PRId64\" calculated dts %\"PRId64\n                   \" sc->dts_shift %d ctts.duration %d\"\n                   \" sc->time_offset %\"PRId64\n                   \" flags & MOV_TRUN_SAMPLE_CTS %d\\n\",\n                   pts, dts,\n                   sc->dts_shift, ctts_duration,\n                   sc->time_offset, flags & MOV_TRUN_SAMPLE_CTS)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_DEBUG,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6789,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",\n                           sc->data_size, sc->time_scale)",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6791,
          "old_api": "mov_read_close",
          "new_api": null,
          "old_text": "mov_read_close(s)",
          "new_text": null,
          "old_line_content": "                    mov_read_close(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6805,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",\n                           sc->data_size, sc->time_scale)",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"Overflow during bit rate calculation %\"PRId64\" * 8 * %d\\n\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6807,
          "old_api": "mov_read_close",
          "new_api": null,
          "old_text": "mov_read_close(s)",
          "new_text": null,
          "old_line_content": "                    mov_read_close(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %d, offset %\"PRIx64\", dts %\"PRId64\", \"\n                \"size %u, distance %d, keyframe %d\\n\", st->index,\n                index_entry_pos, offset, dts, sample_size, distance, keyframe)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"AVIndex stream %d, sample %d, offset %\"PRIx64\", dts %\"PRId64\", \"",
          "new_line_content": "        st->index_entries[index_entry_pos].timestamp = dts;",
          "content_same": false
        },
        {
          "line": 6822,
          "old_api": "ff_rfps_calculate",
          "new_api": null,
          "old_text": "ff_rfps_calculate(s)",
          "new_text": null,
          "old_line_content": "    ff_rfps_calculate(s);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6830,
          "old_api": "ff_replaygain_export",
          "new_api": null,
          "old_text": "ff_replaygain_export(st, s->metadata)",
          "new_text": null,
          "old_line_content": "            err = ff_replaygain_export(st, s->metadata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6832,
          "old_api": "mov_read_close",
          "new_api": null,
          "old_text": "mov_read_close(s)",
          "new_text": null,
          "old_line_content": "                mov_read_close(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(st->index_entries + index_entry_pos,\n                st->index_entries + index_entry_pos + gap,\n                sizeof(*st->index_entries) *\n                (st->nb_index_entries - (index_entry_pos + gap)))",
          "new_text": null,
          "old_line_content": "        memmove(st->index_entries + index_entry_pos,",
          "new_line_content": "        offset += sample_size;",
          "content_same": false
        },
        {
          "line": 6838,
          "old_api": "av_stream_add_side_data",
          "new_api": null,
          "old_text": "av_stream_add_side_data(st, AV_PKT_DATA_DISPLAYMATRIX, (uint8_t*)sc->display_matrix,\n                                              sizeof(int32_t) * 9)",
          "new_text": null,
          "old_line_content": "                err = av_stream_add_side_data(st, AV_PKT_DATA_DISPLAYMATRIX, (uint8_t*)sc->display_matrix,",
          "new_line_content": "        case AVMEDIA_TYPE_AUDIO:",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(sc->ctts_data + index_entry_pos,\n                sc->ctts_data + index_entry_pos + gap,\n                sizeof(*sc->ctts_data) *\n                (sc->ctts_count - (index_entry_pos + gap)))",
          "new_text": null,
          "old_line_content": "        memmove(sc->ctts_data + index_entry_pos,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6846,
          "old_api": "av_stream_add_side_data",
          "new_api": null,
          "old_text": "av_stream_add_side_data(st, AV_PKT_DATA_STEREO3D,\n                                              (uint8_t *)sc->stereo3d,\n                                              sizeof(*sc->stereo3d))",
          "new_text": null,
          "old_line_content": "                err = av_stream_add_side_data(st, AV_PKT_DATA_STEREO3D,",
          "new_line_content": "            if (sc->display_matrix) {",
          "content_same": false
        },
        {
          "line": 4820,
          "old_api": "fix_frag_index_entries",
          "new_api": null,
          "old_text": "fix_frag_index_entries(&c->frag_index, next_frag_index,\n                           frag->track_id, entries)",
          "new_text": null,
          "old_line_content": "    fix_frag_index_entries(&c->frag_index, next_frag_index,",
          "new_line_content": "    for (i = index_entry_pos; i < st->nb_index_entries; i++) {",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted TRUN atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted TRUN atom\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6884,
          "old_api": "ff_configure_buffers_for_index",
          "new_api": null,
          "old_text": "ff_configure_buffers_for_index(s, AV_TIME_BASE)",
          "new_text": null,
          "old_line_content": "    ff_configure_buffers_for_index(s, AV_TIME_BASE);",
          "new_line_content": "                                              sc->coll_size);",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "    int64_t offset = avio_tell(pb) + atom.size, pts, timestamp;",
          "new_line_content": "    sc->track_end = dts + sc->time_offset;",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(c->fc, \"sidx version %u\", version)",
          "new_text": null,
          "old_line_content": "        avpriv_request_sample(c->fc, \"sidx version %u\", version);",
          "new_line_content": "    uint8_t version;",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); // flags",
          "new_line_content": "    MOVStreamContext *sc, *ref_sc = NULL;",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    track_id = avio_rb32(pb); // Reference ID",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6903,
          "old_api": "av_rescale",
          "new_api": null,
          "old_text": "av_rescale(current_sample->timestamp, AV_TIME_BASE, msc->time_scale)",
          "new_text": null,
          "old_line_content": "            int64_t dts = av_rescale(current_sample->timestamp, AV_TIME_BASE, msc->time_scale);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6904,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_TRACE, \"stream %d, sample %d, dts %\"PRId64\"\\n\", i, msc->current_sample, dts)",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_TRACE, \"stream %d, sample %d, dts %\"PRId64\"\\n\", i, msc->current_sample, dts);",
          "new_line_content": "    AVIndexEntry *sample = NULL;",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(best_dts - dts)",
          "new_text": null,
          "old_line_content": "                 ((FFABS(best_dts - dts) <= AV_TIME_BASE && current_sample->pos < sample->pos) ||",
          "new_line_content": "        AVStream *avst = s->streams[i];",
          "content_same": false
        },
        {
          "line": 6909,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(best_dts - dts)",
          "new_text": null,
          "old_line_content": "                  (FFABS(best_dts - dts) > AV_TIME_BASE && dts < best_dts)))))) {",
          "new_line_content": "        MOVStreamContext *msc = avst->priv_data;",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"could not find corresponding track id %d\\n\", track_id)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"could not find corresponding track id %d\\n\", track_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    timescale = av_make_q(1, avio_rb32(pb));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6920,
          "old_api": "avio_feof",
          "new_api": null,
          "old_text": "avio_feof(pb)",
          "new_text": null,
          "old_line_content": "    if (error_code == AVERROR_EOF || avio_feof(pb))",
          "new_line_content": "                best_dts = dts;",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        pts = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "        pts = avio_rb64(pb);",
          "new_line_content": "    if (timescale.den <= 0) {",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb16(pb); // reserved",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6933,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, target, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (avio_seek(s->pb, target, SEEK_SET) != target) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6934,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"root atom offset 0x%\"PRIx64\": partial file\\n\", target)",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_ERROR, \"root atom offset 0x%\"PRIx64\": partial file\\n\", target);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        uint32_t size = avio_rb32(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        uint32_t duration = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6940,
          "old_api": "search_frag_moof_offset",
          "new_api": null,
          "old_text": "search_frag_moof_offset(&mov->frag_index, target)",
          "new_text": null,
          "old_line_content": "        index = search_frag_moof_offset(&mov->frag_index, target);",
          "new_line_content": "    if (index >= 0 && index < mov->frag_index.nb_items)",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(c->fc, \"sidx reference_type 1\")",
          "new_text": null,
          "old_line_content": "            avpriv_request_sample(c->fc, \"sidx reference_type 1\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4897,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb32(pb); // sap_flags",
          "new_line_content": "    for (i = 0; i < item_count; i++) {",
          "content_same": false
        },
        {
          "line": 4898,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pts, st->time_base, timescale)",
          "new_text": null,
          "old_line_content": "        timestamp = av_rescale_q(pts, st->time_base, timescale);",
          "new_line_content": "        int index;",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(entries, sizeof(*sc->stts_data))",
          "new_text": null,
          "old_line_content": "    sc->stts_data = av_malloc_array(entries, sizeof(*sc->stts_data));",
          "new_line_content": "    if (entries >= INT_MAX / sizeof(*sc->stts_data))",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6951,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"root\")",
          "new_text": null,
          "old_line_content": "    ret = mov_read_default(mov, s->pb, (MOVAtom){ AV_RL32(\"root\"), INT64_MAX });",
          "new_line_content": "        if (index + 1 < mov->frag_index.nb_items)",
          "content_same": false
        },
        {
          "line": 6954,
          "old_api": "avio_feof",
          "new_api": null,
          "old_text": "avio_feof(s->pb)",
          "new_text": null,
          "old_line_content": "    if (avio_feof(s->pb))",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 6956,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    av_log(s, AV_LOG_TRACE, \"read fragments, offset 0x%\"PRIx64\"\\n\", avio_tell(s->pb));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        sample_count=avio_rb32(pb);",
          "new_line_content": "                                             min_entries * sizeof(*sc->stts_data));",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        sample_duration = avio_rb32(pb);",
          "new_line_content": "        if (!stts_data) {",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "avio_size",
          "new_api": null,
          "old_text": "avio_size(pb)",
          "new_text": null,
          "old_line_content": "    if (offset == avio_size(pb)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"sample_count=%d, sample_duration=%d\\n\",\n                sample_count, sample_duration)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_TRACE, \"sample_count=%d, sample_duration=%d\\n\",",
          "new_line_content": "        sc->stts_count = min_entries;",
          "content_same": false
        },
        {
          "line": 6973,
          "old_api": "av_packet_new_side_data",
          "new_api": null,
          "old_text": "av_packet_new_side_data(pkt,\n                                       AV_PKT_DATA_NEW_EXTRADATA,\n                                       extradata_size)",
          "new_text": null,
          "old_line_content": "        side = av_packet_new_side_data(pkt,",
          "new_line_content": "    int extradata_size;",
          "content_same": false
        },
        {
          "line": 6977,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6978,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(side, extradata, extradata_size)",
          "new_text": null,
          "old_line_content": "        memcpy(side, extradata, extradata_size);",
          "new_line_content": "    /* Notify the decoder that extradata changed. */",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": "av_rescale",
          "new_api": null,
          "old_text": "av_rescale(ref_st->duration, sc->time_scale, ref_sc->time_scale)",
          "new_text": null,
          "old_line_content": "                st->duration = sc->track_end = av_rescale(ref_st->duration, sc->time_scale, ref_sc->time_scale);",
          "new_line_content": "                    ref_sc = ref_st->priv_data;",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted STTS atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted STTS atom\\n\");",
          "new_line_content": "        total_sample_count+=sample_count;",
          "content_same": false
        },
        {
          "line": 6994,
          "old_api": "mov_find_next_sample",
          "new_api": null,
          "old_text": "mov_find_next_sample(s, &st)",
          "new_text": null,
          "old_line_content": "    sample = mov_find_next_sample(s, &st);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_WARNING, \"mov_update_dts_shift(): dts_shift set to %d\\n\", INT_MAX)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_WARNING, \"mov_update_dts_shift(): dts_shift set to %d\\n\", INT_MAX);",
          "new_line_content": "        st->duration= duration;",
          "content_same": false
        },
        {
          "line": 6998,
          "old_api": "mov_switch_root",
          "new_api": null,
          "old_text": "mov_switch_root(s, mov->next_root_atom, -1)",
          "new_text": null,
          "old_line_content": "        if ((ret = mov_switch_root(s, mov->next_root_atom, -1)) < 0)",
          "new_line_content": "    AVStream *st = NULL;",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    if (avio_rb32(pb) != 0) { /* 0 sized mdat atom... use the 'wide' atom size */",
          "new_line_content": "/* this atom should be null (from specs), but some buggy files put the 'moov' atom inside it... */",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(sc->dts_shift, -duration)",
          "new_text": null,
          "old_line_content": "        sc->dts_shift = FFMAX(sc->dts_shift, -duration);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4952,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, atom.size - 4)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, atom.size - 4);",
          "new_line_content": "/* like the files created with Adobe Premiere 5.0, for samples see */",
          "content_same": false
        },
        {
          "line": 4955,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    atom.type = avio_rl32(pb);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','d','a','t')",
          "new_text": null,
          "old_line_content": "    if (atom.type != MKTAG('m','d','a','t')) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, atom.size)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, atom.size);",
          "new_line_content": "    if (atom.size < 8)",
          "content_same": false
        },
        {
          "line": 7005,
          "old_api": "mov_current_sample_inc",
          "new_api": null,
          "old_text": "mov_current_sample_inc(sc)",
          "new_text": null,
          "old_line_content": "    mov_current_sample_inc(sc);",
          "new_line_content": "        if (!mov->next_root_atom)",
          "content_same": false
        },
        {
          "line": 7008,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(sample->pos, mov->next_root_atom)",
          "new_text": null,
          "old_line_content": "        sample->pos = FFMIN(sample->pos, mov->next_root_atom);",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 7009,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(sample->size, (mov->next_root_atom - sample->pos))",
          "new_text": null,
          "old_line_content": "        sample->size = FFMIN(sample->size, (mov->next_root_atom - sample->pos));",
          "new_line_content": "        goto retry;",
          "content_same": false
        },
        {
          "line": 7013,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(sc->pb, sample->pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "        int64_t ret64 = avio_seek(sc->pb, sample->pos, SEEK_SET);",
          "new_line_content": "    current_index = sc->current_index;",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "    AVStream *st;",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* flags */",
          "new_line_content": "    MOVStreamContext *sc;",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    entries = avio_rb32(pb);",
          "new_line_content": "    unsigned int i, entries, ctts_count = 0;",
          "content_same": false
        },
        {
          "line": 7015,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"stream %d, offset 0x%\"PRIx64\": partial file\\n\",\n                   sc->ffindex, sample->pos)",
          "new_text": null,
          "old_line_content": "            av_log(mov->fc, AV_LOG_ERROR, \"stream %d, offset 0x%\"PRIx64\": partial file\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"track[%u].ctts.entries = %u\\n\", c->fc->nb_streams - 1, entries)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"track[%u].ctts.entries = %u\\n\", c->fc->nb_streams - 1, entries);",
          "new_line_content": "    if (c->fc->nb_streams < 1)",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb); /* dcom atom */",
          "new_line_content": "static int mov_read_cmov(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('d','c','o','m')",
          "new_text": null,
          "old_line_content": "    if (avio_rl32(pb) != MKTAG('d','c','o','m'))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('z','l','i','b')",
          "new_text": null,
          "old_line_content": "    if (avio_rl32(pb) != MKTAG('z','l','i','b')) {",
          "new_line_content": "    AVIOContext ctx;",
          "content_same": false
        },
        {
          "line": 4978,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"unknown compression for cmov atom !\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"unknown compression for cmov atom !\\n\");",
          "new_line_content": "    uint8_t *cmov_data;",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": "av_get_packet",
          "new_api": null,
          "old_text": "av_get_packet(sc->pb, pkt, sample->size)",
          "new_text": null,
          "old_line_content": "        ret = av_get_packet(sc->pb, pkt, sample->size);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4981,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb); /* cmvd atom */",
          "new_line_content": "    int ret = -1;",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','m','v','d')",
          "new_text": null,
          "old_line_content": "    if (avio_rl32(pb) != MKTAG('c','m','v','d'))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        int count    =avio_rb32(pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 2936,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        int duration =avio_rb32(pb);",
          "new_line_content": "    if (entries >= UINT_MAX / sizeof(*sc->ctts_data))",
          "content_same": false
        },
        {
          "line": 7030,
          "old_api": "should_retry",
          "new_api": null,
          "old_text": "should_retry(sc->pb, ret)",
          "new_text": null,
          "old_line_content": "            if (should_retry(sc->pb, ret)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": "mov_current_sample_dec",
          "new_api": null,
          "old_text": "mov_current_sample_dec(sc)",
          "new_text": null,
          "old_line_content": "                mov_current_sample_dec(sc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": "av_packet_new_side_data",
          "new_api": null,
          "old_text": "av_packet_new_side_data(pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE)",
          "new_text": null,
          "old_line_content": "            pal = av_packet_new_side_data(pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE);",
          "new_line_content": "        if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(cmov_data)",
          "new_text": null,
          "old_line_content": "        av_free(cmov_data);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 7042,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pal, sc->palette, AVPALETTE_SIZE)",
          "new_text": null,
          "old_line_content": "                memcpy(pal, sc->palette, AVPALETTE_SIZE);",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "ffio_read_size",
          "new_api": null,
          "old_text": "ffio_read_size(pb, cmov_data, cmov_len)",
          "new_text": null,
          "old_line_content": "    ret = ffio_read_size(pb, cmov_data, cmov_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": "FFNABS",
          "new_api": null,
          "old_text": "FFNABS(duration)",
          "new_text": null,
          "old_line_content": "        if (FFNABS(duration) < -(1<<28) && i+2<entries) {",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"CTTS invalid\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_WARNING, \"CTTS invalid\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sc->ctts_data)",
          "new_text": null,
          "old_line_content": "            av_freep(&sc->ctts_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len)",
          "new_api": null,
          "old_text": "uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len)",
          "new_text": null,
          "old_line_content": "    if (uncompress (moov_data, (uLongf *) &moov_len, (const Bytef *)cmov_data, cmov_len) != Z_OK)",
          "new_line_content": "    if (!moov_data) {",
          "content_same": false
        },
        {
          "line": 7048,
          "old_api": "avpriv_dv_produce_packet",
          "new_api": null,
          "old_text": "avpriv_dv_produce_packet(mov->dv_demux, pkt, pkt->data, pkt->size, pkt->pos)",
          "new_text": null,
          "old_line_content": "            avpriv_dv_produce_packet(mov->dv_demux, pkt, pkt->data, pkt->size, pkt->pos);",
          "new_line_content": "            if (!pal) {",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','o','o','v')",
          "new_text": null,
          "old_line_content": "    atom.type = MKTAG('m','o','o','v');",
          "new_line_content": "    if (ret < 0)",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "mov_update_dts_shift",
          "new_api": null,
          "old_text": "mov_update_dts_shift(sc, duration)",
          "new_text": null,
          "old_line_content": "            mov_update_dts_shift(sc, duration);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": "mov_read_default",
          "new_api": null,
          "old_text": "mov_read_default(c, &ctx, atom)",
          "new_text": null,
          "old_line_content": "    ret = mov_read_default(c, &ctx, atom);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(cmov_data)",
          "new_text": null,
          "old_line_content": "    av_free(cmov_data);",
          "new_line_content": "        goto free_and_return;",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted CTTS atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted CTTS atom\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"this file requires zlib support compiled in\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_ERROR, \"this file requires zlib support compiled in\\n\");",
          "new_line_content": "    ctx.seekable = AVIO_SEEKABLE_NORMAL;",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"dts shift %d\\n\", sc->dts_shift)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"dts shift %d\\n\", sc->dts_shift);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb); /* version */",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5030,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* flags */",
          "new_line_content": "    MOVStreamContext *sc;",
          "content_same": false
        },
        {
          "line": 5031,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    edit_count = avio_rb32(pb); /* entries */",
          "new_line_content": "    int i, edit_count, version;",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb); /* version */",
          "new_line_content": "    unsigned int i, entries;",
          "content_same": false
        },
        {
          "line": 2988,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* flags */",
          "new_line_content": "    uint8_t version;",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Invalid edit list entry_count: %d for elst atom of size: %\"PRId64\" bytes.\\n\",\n                   edit_count, atom.size + 8)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"Invalid edit list entry_count: %d for elst atom of size: %\"PRId64\" bytes.\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    grouping_type = avio_rl32(pb);",
          "new_line_content": "    uint32_t grouping_type;",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG( 'r','a','p',' ')",
          "new_text": null,
          "old_line_content": "    if (grouping_type != MKTAG( 'r','a','p',' '))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb32(pb); /* grouping_type_parameter */",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams-1];",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"ELST atom of %\"PRId64\" bytes, bigger than %d entries.\", atom.size, edit_count)",
          "new_text": null,
          "old_line_content": "                av_log(c->fc, AV_LOG_WARNING, \"ELST atom of %\"PRId64\" bytes, bigger than %d entries.\", atom.size, edit_count);",
          "new_line_content": "    elst_entry_size = version == 1 ? 20 : 12;",
          "content_same": false
        },
        {
          "line": 2995,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    entries = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7092,
          "old_api": "mov_stsc_index_valid",
          "new_api": null,
          "old_text": "mov_stsc_index_valid(sc->stsc_index, sc->stsc_count)",
          "new_text": null,
          "old_line_content": "        if (mov_stsc_index_valid(sc->stsc_index, sc->stsc_count) &&",
          "new_line_content": "        goto retry;",
          "content_same": false
        },
        {
          "line": 7093,
          "old_api": "mov_get_stsc_samples",
          "new_api": null,
          "old_text": "mov_get_stsc_samples(sc, sc->stsc_index)",
          "new_text": null,
          "old_line_content": "            mov_get_stsc_samples(sc, sc->stsc_index) == sc->stsc_sample) {",
          "new_line_content": "    pkt->flags |= sample->flags & AVINDEX_KEYFRAME ? AV_PKT_FLAG_KEY : 0;",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(sc->rap_group)",
          "new_text": null,
          "old_line_content": "    av_free(sc->rap_group);",
          "new_line_content": "        return 0; /* only support 'rap ' grouping */",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Duplicated ELST atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Duplicated ELST atom\\n\");",
          "new_line_content": "            if (edit_count * elst_entry_size != atom.size) {",
          "content_same": false
        },
        {
          "line": 7100,
          "old_api": "mov_change_extradata",
          "new_api": null,
          "old_text": "mov_change_extradata(sc, pkt)",
          "new_text": null,
          "old_line_content": "            ret = mov_change_extradata(sc, pkt);",
          "new_line_content": "        sc->stsc_sample++;",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(edit_count, sizeof(*sc->elst_data))",
          "new_text": null,
          "old_line_content": "    sc->elst_data = av_malloc_array(edit_count, sizeof(*sc->elst_data));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        sc->rap_group[i].count = avio_rb32(pb); /* sample_count */",
          "new_line_content": "    if (sc->rap_group)",
          "content_same": false
        },
        {
          "line": 5056,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_TRACE, \"track[%u].edit_count = %i\\n\", c->fc->nb_streams - 1, edit_count)",
          "new_text": null,
          "old_line_content": "    av_log(c->fc, AV_LOG_TRACE, \"track[%u].edit_count = %i\\n\", c->fc->nb_streams - 1, edit_count);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 7107,
          "old_api": "aax_filter",
          "new_api": null,
          "old_text": "aax_filter(pkt->data, pkt->size, mov)",
          "new_text": null,
          "old_line_content": "        aax_filter(pkt->data, pkt->size, mov);",
          "new_line_content": "                   sc->stsc_data[sc->stsc_index].id - 1 < sc->stsd_count &&",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted SBGP atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"reached eof, corrupted SBGP atom\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7110,
          "old_api": "cenc_filter",
          "new_api": null,
          "old_text": "cenc_filter(mov, sc, current_index, pkt->data, pkt->size)",
          "new_text": null,
          "old_line_content": "        ret = cenc_filter(mov, sc, current_index, pkt->data, pkt->size);",
          "new_line_content": "            if (ret < 0)",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "avio_rb64",
          "new_api": null,
          "old_text": "avio_rb64(pb)",
          "new_text": null,
          "old_line_content": "            e->time     = avio_rb64(pb);",
          "new_line_content": "    if (!sc->elst_data)",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "            e->time     = (int32_t)avio_rb32(pb); /* media time */",
          "new_line_content": "    for (i = 0; i < edit_count && atom.size > 0 && !pb->eof_reached; i++) {",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        e->rate = avio_rb32(pb) / 65536.0;",
          "new_line_content": "        if (version == 1) {",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Track %d, edit %d: Invalid edit list media time=%\"PRId64\"\\n\",\n                   c->fc->nb_streams-1, i, e->time)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"Track %d, edit %d: Invalid edit list media time=%\"PRId64\"\\n\",",
          "new_line_content": "            atom.size -= 8;",
          "content_same": false
        },
        {
          "line": 7127,
          "old_api": "search_frag_timestamp",
          "new_api": null,
          "old_text": "search_frag_timestamp(&mov->frag_index, st, timestamp)",
          "new_text": null,
          "old_line_content": "    index = search_frag_timestamp(&mov->frag_index, st, timestamp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7131,
          "old_api": "mov_switch_root",
          "new_api": null,
          "old_text": "mov_switch_root(s, -1, index)",
          "new_text": null,
          "old_line_content": "        return mov_switch_root(s, -1, index);",
          "new_line_content": "    int index;",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(mov->fc, \"Support for mvhd.timescale = 0 with editlists\")",
          "new_text": null,
          "old_line_content": "      avpriv_request_sample(mov->fc, \"Support for mvhd.timescale = 0 with editlists\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": "av_rescale",
          "new_api": null,
          "old_text": "av_rescale(*edit_list_duration, msc->time_scale,\n                                     global_timescale)",
          "new_text": null,
          "old_line_content": "    *edit_list_duration = av_rescale(*edit_list_duration, msc->time_scale,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    sc->timecode_track = avio_rb32(pb);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7146,
          "old_api": "mov_seek_fragment",
          "new_api": null,
          "old_text": "mov_seek_fragment(s, st, timestamp)",
          "new_text": null,
          "old_line_content": "    ret = mov_seek_fragment(s, st, timestamp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7150,
          "old_api": "av_index_search_timestamp",
          "new_api": null,
          "old_text": "av_index_search_timestamp(st, timestamp, flags)",
          "new_text": null,
          "old_line_content": "    sample = av_index_search_timestamp(st, timestamp, flags);",
          "new_line_content": "    int sample, time_sample, ret;",
          "content_same": false
        },
        {
          "line": 7151,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_TRACE, \"stream %d, timestamp %\"PRId64\", sample %d\\n\", st->index, timestamp, sample)",
          "new_text": null,
          "old_line_content": "    av_log(s, AV_LOG_TRACE, \"stream %d, timestamp %\"PRId64\", sample %d\\n\", st->index, timestamp, sample);",
          "new_line_content": "    unsigned int i;",
          "content_same": false
        },
        {
          "line": 7156,
          "old_api": "mov_current_sample_set",
          "new_api": null,
          "old_text": "mov_current_sample_set(sc, sample)",
          "new_text": null,
          "old_line_content": "    mov_current_sample_set(sc, sample);",
          "new_line_content": "    if (ret < 0)",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty VP Codec Configuration box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty VP Codec Configuration box\\n\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7157,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_TRACE, \"stream %d, found sample %d\\n\", st->index, sc->current_sample)",
          "new_text": null,
          "old_line_content": "    av_log(s, AV_LOG_TRACE, \"stream %d, found sample %d\\n\", st->index, sc->current_sample);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "    if (c->fc->nb_streams < 1)",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported VP Codec Configuration box version %d\\n\", version)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported VP Codec Configuration box version %d\\n\", version);",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams - 1];",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 2)",
          "new_text": null,
          "old_line_content": "    avio_skip(pb, 2); /* profile + level */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    color_range     = avio_r8(pb); /* bitDepth, chromaSubsampling, videoFullRangeFlag */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    color_trc       = avio_r8(pb);",
          "new_line_content": "    if (version != 1) {",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    if (avio_rb16(pb)) /* codecIntializationDataSize */",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 7175,
          "old_api": "mov_get_stsc_samples",
          "new_api": null,
          "old_text": "mov_get_stsc_samples(sc, i)",
          "new_text": null,
          "old_line_content": "        int next = time_sample + mov_get_stsc_samples(sc, i);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 5128,
          "old_api": "av_color_primaries_name",
          "new_api": null,
          "old_text": "av_color_primaries_name(color_primaries)",
          "new_text": null,
          "old_line_content": "    if (!av_color_primaries_name(color_primaries))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(index)",
          "new_text": null,
          "old_line_content": "    av_assert0(index);",
          "new_line_content": "                                   int64_t* ctts_index,",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "av_index_search_timestamp",
          "new_api": null,
          "old_text": "av_index_search_timestamp(st, timestamp_pts, flag | AVSEEK_FLAG_BACKWARD)",
          "new_text": null,
          "old_line_content": "    *index = av_index_search_timestamp(st, timestamp_pts, flag | AVSEEK_FLAG_BACKWARD);",
          "new_line_content": "    // If dts_shift > 0, then all the index timestamps will have to be offset by",
          "content_same": false
        },
        {
          "line": 7198,
          "old_api": "mov_seek_stream",
          "new_api": null,
          "old_text": "mov_seek_stream(s, st, sample_time, flags)",
          "new_text": null,
          "old_line_content": "    sample = mov_seek_stream(s, st, sample_time, flags);",
          "new_line_content": "    MOVContext *mc = s->priv_data;",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Mastering Display Metadata box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Mastering Display Metadata box\\n\");",
          "new_line_content": "    const int luma_den = 10000;",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(ctts_index)",
          "new_text": null,
          "old_line_content": "        av_assert0(ctts_index);",
          "new_line_content": "                (e_old[i - 1].flags & AVINDEX_KEYFRAME)) {",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(ctts_sample)",
          "new_text": null,
          "old_line_content": "        av_assert0(ctts_sample);",
          "new_line_content": "                *index = i - 1;",
          "content_same": false
        },
        {
          "line": 5160,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported Mastering Display Metadata box version %d\\n\", version)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported Mastering Display Metadata box version %d\\n\", version);",
          "new_line_content": "    sc = c->fc->streams[c->fc->nb_streams - 1]->priv_data;",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": "av_mastering_display_metadata_alloc",
          "new_api": null,
          "old_text": "av_mastering_display_metadata_alloc()",
          "new_text": null,
          "old_line_content": "    sc->mastering = av_mastering_display_metadata_alloc();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7215,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(seek_timestamp, s->streams[stream_index]->time_base, st->time_base)",
          "new_text": null,
          "old_line_content": "            timestamp = av_rescale_q(seek_timestamp, s->streams[stream_index]->time_base, st->time_base);",
          "new_line_content": "        for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 7216,
          "old_api": "mov_seek_stream",
          "new_api": null,
          "old_text": "mov_seek_stream(s, st, timestamp, flags)",
          "new_text": null,
          "old_line_content": "            mov_seek_stream(s, st, timestamp, flags);",
          "new_line_content": "            int64_t timestamp;",
          "content_same": false
        },
        {
          "line": 7223,
          "old_api": "mov_current_sample_set",
          "new_api": null,
          "old_text": "mov_current_sample_set(sc, 0)",
          "new_text": null,
          "old_line_content": "            mov_current_sample_set(sc, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5177,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "            av_make_q(lrint(((double)avio_rb16(pb) / (1 << 16)) * chroma_den), chroma_den);",
          "new_line_content": "    if (!sc->mastering)",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        av_make_q(lrint(((double)avio_rb32(pb) / (1 <<  8)) * luma_den), luma_den);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7227,
          "old_api": "mov_find_next_sample",
          "new_api": null,
          "old_text": "mov_find_next_sample(s, &st)",
          "new_text": null,
          "old_line_content": "            AVIndexEntry *entry = mov_find_next_sample(s, &st);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        av_make_q(lrint(((double)avio_rb32(pb) / (1 << 14)) * luma_den), luma_den);",
          "new_line_content": "        for (j = 0; j < 2; j++)",
          "content_same": false
        },
        {
          "line": 7233,
          "old_api": "mov_current_sample_inc",
          "new_api": null,
          "old_text": "mov_current_sample_inc(sc)",
          "new_text": null,
          "old_line_content": "            mov_current_sample_inc(sc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7244,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(use_absolute_path)",
          "new_text": null,
          "old_line_content": "        OFFSET(use_absolute_path), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7248,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(seek_individually)",
          "new_text": null,
          "old_line_content": "        OFFSET(seek_individually), AV_OPT_TYPE_BOOL, { .i64 = 1 },",
          "new_line_content": "#define OFFSET(x) offsetof(MOVContext, x)",
          "content_same": false
        },
        {
          "line": 7250,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(ignore_editlist)",
          "new_text": null,
          "old_line_content": "    {\"ignore_editlist\", \"Ignore the edit list atom.\", OFFSET(ignore_editlist), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "new_line_content": "static const AVOption mov_options[] = {",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Invalid Mastering Display Color Volume box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Invalid Mastering Display Color Volume box\\n\");",
          "new_line_content": "    const int luma_den = 10000;",
          "content_same": false
        },
        {
          "line": 7254,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(advanced_editlist)",
          "new_text": null,
          "old_line_content": "        OFFSET(advanced_editlist), AV_OPT_TYPE_BOOL, {.i64 = 1},",
          "new_line_content": "        0, 1, FLAGS},",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "av_mastering_display_metadata_alloc",
          "new_api": null,
          "old_text": "av_mastering_display_metadata_alloc()",
          "new_text": null,
          "old_line_content": "    sc->mastering = av_mastering_display_metadata_alloc();",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 7256,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(ignore_chapters)",
          "new_text": null,
          "old_line_content": "    {\"ignore_chapters\", \"\", OFFSET(ignore_chapters), AV_OPT_TYPE_BOOL, {.i64 = 0},",
          "new_line_content": "        \"Seek each stream individually to the to the closest point\",",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    sc = c->fc->streams[c->fc->nb_streams - 1]->priv_data;",
          "content_same": false
        },
        {
          "line": 7260,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(use_mfra_for)",
          "new_text": null,
          "old_line_content": "        OFFSET(use_mfra_for), AV_OPT_TYPE_INT, {.i64 = FF_MOV_FLAG_MFRA_AUTO},",
          "new_line_content": "        0, 1, FLAGS},",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "        sc->mastering->display_primaries[j][0] = av_make_q(avio_rb16(pb), chroma_den);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "        sc->mastering->display_primaries[j][1] = av_make_q(avio_rb16(pb), chroma_den);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    sc->mastering->white_point[1] = av_make_q(avio_rb16(pb), chroma_den);",
          "new_line_content": "    if (!sc->mastering)",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    sc->mastering->max_luminance = av_make_q(avio_rb32(pb), luma_den);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5220,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    sc->mastering->min_luminance = av_make_q(avio_rb32(pb), luma_den);",
          "new_line_content": "    for (i = 0; i < 3; i++) {",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(min_size_needed, 2 * st->index_entries_allocated_size)",
          "new_text": null,
          "old_line_content": "        FFMAX(min_size_needed, 2 * st->index_entries_allocated_size) :",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7271,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(export_xmp)",
          "new_text": null,
          "old_line_content": "    { \"export_xmp\", \"Export full XMP metadata\", OFFSET(export_xmp),",
          "new_line_content": "        \"use_mfra_for\"},",
          "content_same": false
        },
        {
          "line": 7273,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(activation_bytes)",
          "new_text": null,
          "old_line_content": "    { \"activation_bytes\", \"Secret bytes for Audible AAX files\", OFFSET(activation_bytes),",
          "new_line_content": "        FLAGS, \"use_mfra_for\" },",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": "av_fast_realloc",
          "new_api": null,
          "old_text": "av_fast_realloc(st->index_entries,\n                              &st->index_entries_allocated_size,\n                              requested_size)",
          "new_text": null,
          "old_line_content": "    entries = av_fast_realloc(st->index_entries,",
          "new_line_content": "    // Another difference from ff_add_index_entry function.",
          "content_same": false
        },
        {
          "line": 7276,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(audible_fixed_key)",
          "new_text": null,
          "old_line_content": "        \"Fixed key used for handling Audible AAX files\", OFFSET(audible_fixed_key),",
          "new_line_content": "    {\"pts\", \"pts\", 0, AV_OPT_TYPE_CONST, {.i64 = FF_MOV_FLAG_MFRA_PTS}, 0, 0,",
          "content_same": false
        },
        {
          "line": 7279,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(decryption_key)",
          "new_text": null,
          "old_line_content": "    { \"decryption_key\", \"The media decryption key (hex)\", OFFSET(decryption_key), AV_OPT_TYPE_BINARY, .flags = AV_OPT_FLAG_DECODING_PARAM },",
          "new_line_content": "        AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, .flags = FLAGS },",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level box\\n\");",
          "new_line_content": "    MOVStreamContext *sc;",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    version = avio_r8(pb);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unsupported Content Light Level box version %d\\n\", version)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unsupported Content Light Level box version %d\\n\", version);",
          "new_line_content": "    sc = c->fc->streams[c->fc->nb_streams - 1]->priv_data;",
          "content_same": false
        },
        {
          "line": 7295,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\"),",
          "new_line_content": "static const AVClass mov_class = {",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": "av_content_light_metadata_alloc",
          "new_api": null,
          "old_text": "av_content_light_metadata_alloc(&sc->coll_size)",
          "new_text": null,
          "old_line_content": "    sc->coll = av_content_light_metadata_alloc(&sc->coll_size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(end_index >= 0 && end_index <= st->nb_index_entries)",
          "new_text": null,
          "old_line_content": "    av_assert0(end_index >= 0 && end_index <= st->nb_index_entries);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    sc->coll->MaxFALL = avio_rb16(pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5270,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level Info box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty Content Light Level Info box\\n\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3224,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(min_size_needed, 2 * (*allocated_size))",
          "new_text": null,
          "old_line_content": "        FFMAX(min_size_needed, 2 * (*allocated_size)) :",
          "new_line_content": " * Returns the new ctts_count if successful, else returns -1.",
          "content_same": false
        },
        {
          "line": 5274,
          "old_api": "av_content_light_metadata_alloc",
          "new_api": null,
          "old_text": "av_content_light_metadata_alloc(&sc->coll_size)",
          "new_text": null,
          "old_line_content": "    sc->coll = av_content_light_metadata_alloc(&sc->coll_size);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    sc = c->fc->streams[c->fc->nb_streams - 1]->priv_data;",
          "content_same": false
        },
        {
          "line": 3230,
          "old_api": "av_fast_realloc",
          "new_api": null,
          "old_text": "av_fast_realloc(*ctts_data, allocated_size, requested_size)",
          "new_text": null,
          "old_line_content": "    ctts_buf_new = av_fast_realloc(*ctts_data, allocated_size, requested_size);",
          "new_line_content": "    const size_t min_size_needed = (*ctts_count + 1) * sizeof(MOVStts);",
          "content_same": false
        },
        {
          "line": 5278,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(pb)",
          "new_text": null,
          "old_line_content": "    sc->coll->MaxCLL  = avio_rb16(pb);",
          "new_line_content": "    if (atom.size < 4) {",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty stereoscopic video box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty stereoscopic video box\\n\");",
          "new_line_content": "    int mode;",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 4)",
          "new_text": null,
          "old_line_content": "    avio_skip(pb, 4); /* version + flags */",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    mode = avio_r8(pb);",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams - 1];",
          "content_same": false
        },
        {
          "line": 5315,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown st3d mode value %d\\n\", mode)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown st3d mode value %d\\n\", mode);",
          "new_line_content": "        type = AV_STEREO3D_2D;",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": "av_stereo3d_alloc",
          "new_api": null,
          "old_text": "av_stereo3d_alloc()",
          "new_text": null,
          "old_line_content": "    sc->stereo3d = av_stereo3d_alloc();",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        type = AV_STEREO3D_SIDEBYSIDE;",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(st->codecpar->video_delay, num_swaps)",
          "new_text": null,
          "old_line_content": "            st->codecpar->video_delay = FFMAX(st->codecpar->video_delay, num_swaps);",
          "new_line_content": "            num_swaps = 0;",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_DEBUG, \"Setting codecpar->delay to %d for stream st: %d\\n\",\n               st->codecpar->video_delay, st->index)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_DEBUG, \"Setting codecpar->delay to %d for stream st: %d\\n\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5344,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Empty spherical video box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Empty spherical video box\\n\");",
          "new_line_content": "    enum AVSphericalProjection projection;",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    size = avio_rb32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    tag = avio_rl32(pb);",
          "new_line_content": "    if (atom.size < 8) {",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing spherical video header\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing spherical video header\\n\");",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5359,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",\n               version)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, size - 12)",
          "new_text": null,
          "old_line_content": "    avio_skip(pb, size - 12); /* metadata_source */",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5370,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    tag = avio_rl32(pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('p','r','o','j')",
          "new_text": null,
          "old_line_content": "    if (tag != MKTAG('p','r','o','j')) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5376,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    size = avio_rb32(pb);",
          "new_line_content": "    if (size > atom.size)",
          "content_same": false
        },
        {
          "line": 5382,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Missing projection header box\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Missing projection header box\\n\");",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",\n               version)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"Unknown spherical version %d\\n\",",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5395,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    pitch = avio_rb32(pb);",
          "new_line_content": "    if (version != 0) {",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    size = avio_rb32(pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5402,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    tag = avio_rl32(pb);",
          "new_line_content": "    /* 16.16 fixed point */",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 3)",
          "new_text": null,
          "old_line_content": "    avio_skip(pb, 3); /* flags */",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5419,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        padding = avio_rb32(pb);",
          "new_line_content": "    switch (tag) {",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        t = avio_rb32(pb);",
          "new_line_content": "        if (layout) {",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        l = avio_rb32(pb);",
          "new_line_content": "                   \"Unsupported cubemap layout %d\\n\", layout);",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        r = avio_rb32(pb);",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc((msc->elst_count + 1) * sizeof(msc->index_ranges[0]))",
          "new_text": null,
          "old_line_content": "    msc->index_ranges = av_malloc((msc->elst_count + 1) * sizeof(msc->index_ranges[0]));",
          "new_line_content": "    MOVIndexRange *current_index_range;",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot allocate index ranges buffer\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_ERROR, \"Cannot allocate index ranges buffer\\n\");",
          "new_line_content": "    int found_keyframe_after_edit = 0;",
          "content_same": false
        },
        {
          "line": 5440,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Unknown projection type\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Unknown projection type\\n\");",
          "new_line_content": "            return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": "av_spherical_alloc",
          "new_api": null,
          "old_text": "av_spherical_alloc(&sc->spherical_size)",
          "new_text": null,
          "old_line_content": "    sc->spherical = av_spherical_alloc(&sc->spherical_size);",
          "new_line_content": "            projection = AV_SPHERICAL_EQUIRECTANGULAR_TILE;",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "            projection = AV_SPHERICAL_EQUIRECTANGULAR;",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Shifting DTS by %d because of negative CTTS.\\n\", msc->dts_shift)",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Shifting DTS by %d because of negative CTTS.\\n\", msc->dts_shift);",
          "new_line_content": "    msc->ctts_count = 0;",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": "get_edit_list_entry",
          "new_api": null,
          "old_text": "get_edit_list_entry(mov, msc, edit_list_index, &edit_list_media_time,\n                               &edit_list_duration, mov->time_scale)",
          "new_text": null,
          "old_line_content": "    while (get_edit_list_entry(mov, msc, edit_list_index, &edit_list_media_time,",
          "new_line_content": "    // If the dts_shift is positive (in case of negative ctts values in mov),",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(len + 1)",
          "new_text": null,
          "old_line_content": "    uint8_t *buffer = av_malloc(len + 1);",
          "new_line_content": "    sc->spherical->bound_right  = r;",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Processing st: %d, edit list %\"PRId64\" - media time: %\"PRId64\", duration: %\"PRId64\"\\n\",\n               st->index, edit_list_index, edit_list_media_time, edit_list_duration)",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Processing st: %d, edit list %\"PRId64\" - media time: %\"PRId64\", duration: %\"PRId64\"\\n\",",
          "new_line_content": "    if (msc->dts_shift > 0) {",
          "content_same": false
        },
        {
          "line": 5471,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": "ffio_read_size",
          "new_api": null,
          "old_text": "ffio_read_size(pb, buffer, len)",
          "new_text": null,
          "old_line_content": "    ret = ffio_read_size(pb, buffer, len);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5481,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"<GSpherical:Spherical>\")",
          "new_text": null,
          "old_line_content": "        (val = av_stristr(buffer, \"<GSpherical:Spherical>\")) &&",
          "new_line_content": "    buffer[len] = '\\0';",
          "content_same": false
        },
        {
          "line": 5482,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(val, \"true\")",
          "new_text": null,
          "old_line_content": "        av_stristr(val, \"true\") &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(val, \"true\")",
          "new_text": null,
          "old_line_content": "        av_stristr(val, \"true\") &&",
          "new_line_content": "    if (ret < 0)",
          "content_same": false
        },
        {
          "line": 5485,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"<GSpherical:ProjectionType>\")",
          "new_text": null,
          "old_line_content": "        (val = av_stristr(buffer, \"<GSpherical:ProjectionType>\")) &&",
          "new_line_content": "        goto out;",
          "content_same": false
        },
        {
          "line": 5486,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(val, \"equirectangular\")",
          "new_text": null,
          "old_line_content": "        av_stristr(val, \"equirectangular\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5487,
          "old_api": "av_spherical_alloc",
          "new_api": null,
          "old_text": "av_spherical_alloc(&sc->spherical_size)",
          "new_text": null,
          "old_line_content": "        sc->spherical = av_spherical_alloc(&sc->spherical_size);",
          "new_line_content": "    /* Check for mandatory keys and values, try to support XML as best-effort */",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"top-bottom\")",
          "new_text": null,
          "old_line_content": "            else if (av_stristr(buffer, \"top-bottom\"))",
          "new_line_content": "            goto out;",
          "content_same": false
        },
        {
          "line": 3454,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(search_timestamp - msc->time_scale, e_old[0].timestamp)",
          "new_text": null,
          "old_line_content": "            search_timestamp = FFMAX(search_timestamp - msc->time_scale, e_old[0].timestamp);",
          "new_line_content": "        // While reordering frame index according to edit list we must handle properly",
          "content_same": false
        },
        {
          "line": 5503,
          "old_api": "av_stereo3d_alloc",
          "new_api": null,
          "old_text": "av_stereo3d_alloc()",
          "new_text": null,
          "old_line_content": "            sc->stereo3d = av_stereo3d_alloc();",
          "new_line_content": "            enum AVStereo3DType mode;",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "find_prev_closest_index",
          "new_api": null,
          "old_text": "find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, 0,\n                                    &index, &ctts_index_old, &ctts_sample_old)",
          "new_text": null,
          "old_line_content": "        if (find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, 0,",
          "new_line_content": "        // All frames which are outside edit list entry time boundaries will be dropped after decoding.",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_WARNING,\n                   \"st: %d edit list: %\"PRId64\" Missing key frame while searching for timestamp: %\"PRId64\"\\n\",\n                   st->index, edit_list_index, search_timestamp)",
          "new_text": null,
          "old_line_content": "            av_log(mov->fc, AV_LOG_WARNING,",
          "new_line_content": "        if (st->codecpar->codec_type == AVMEDIA_TYPE_AUDIO) {",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": "find_prev_closest_index",
          "new_api": null,
          "old_text": "find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, AVSEEK_FLAG_ANY,\n                                        &index, &ctts_index_old, &ctts_sample_old)",
          "new_text": null,
          "old_line_content": "            if (find_prev_closest_index(st, e_old, nb_old, ctts_data_old, ctts_count_old, search_timestamp, AVSEEK_FLAG_ANY,",
          "new_line_content": "            // edit_list_media_time to cover the decoder delay.",
          "content_same": false
        },
        {
          "line": 5511,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"<GSpherical:InitialViewHeadingDegrees>\")",
          "new_text": null,
          "old_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewHeadingDegrees>\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_WARNING,\n                       \"st: %d edit list %\"PRId64\" Cannot find an index entry before timestamp: %\"PRId64\".\\n\",\n                       st->index, edit_list_index, search_timestamp)",
          "new_text": null,
          "old_line_content": "                av_log(mov->fc, AV_LOG_WARNING,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(val, NULL, 10)",
          "new_text": null,
          "old_line_content": "            sc->spherical->yaw = strtol(val, NULL, 10) * (1 << 16);",
          "new_line_content": "            if (!sc->stereo3d)",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"<GSpherical:InitialViewPitchDegrees>\")",
          "new_text": null,
          "old_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewPitchDegrees>\");",
          "new_line_content": "                goto out;",
          "content_same": false
        },
        {
          "line": 5516,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(val, NULL, 10)",
          "new_text": null,
          "old_line_content": "            sc->spherical->pitch = strtol(val, NULL, 10) * (1 << 16);",
          "new_line_content": "            sc->stereo3d->type = mode;",
          "content_same": false
        },
        {
          "line": 5517,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(buffer, \"<GSpherical:InitialViewRollDegrees>\")",
          "new_text": null,
          "old_line_content": "        val = av_stristr(buffer, \"<GSpherical:InitialViewRollDegrees>\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5519,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(val, NULL, 10)",
          "new_text": null,
          "old_line_content": "            sc->spherical->roll = strtol(val, NULL, 10) * (1 << 16);",
          "new_line_content": "        /* orientation */",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"stts: %\"PRId64\" ctts: %\"PRId64\", ctts_index: %\"PRId64\", ctts_count: %\"PRId64\"\\n\",\n                       curr_cts, curr_ctts, ctts_index_old, ctts_count_old)",
          "new_text": null,
          "old_line_content": "                av_log(mov->fc, AV_LOG_DEBUG, \"stts: %\"PRId64\" ctts: %\"PRId64\", ctts_index: %\"PRId64\", ctts_count: %\"PRId64\"\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "add_ctts_entry",
          "new_api": null,
          "old_text": "add_ctts_entry(&msc->ctts_data, &msc->ctts_count,\n                                       &msc->ctts_allocated_size,\n                                       ctts_data_old[ctts_index_old].count - edit_list_start_ctts_sample,\n                                       ctts_data_old[ctts_index_old].duration)",
          "new_text": null,
          "old_line_content": "                    if (add_ctts_entry(&msc->ctts_data, &msc->ctts_count,",
          "new_line_content": "            curr_ctts = 0;",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "new_text": null,
          "old_line_content": "    if (atom.size < sizeof(uuid) || atom.size >= FFMIN(INT_MAX, SIZE_MAX))",
          "new_line_content": "    static const uint8_t uuid_xmp[] = {",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, uuid, sizeof(uuid))",
          "new_text": null,
          "old_line_content": "    ret = avio_read(pb, uuid, sizeof(uuid));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5560,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(uuid, uuid_isml_manifest, sizeof(uuid))",
          "new_text": null,
          "old_line_content": "    if (!memcmp(uuid, uuid_isml_manifest, sizeof(uuid))) {",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams - 1];",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, 4)",
          "new_text": null,
          "old_line_content": "        ret = avio_skip(pb, 4); // zeroes",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(len + 1)",
          "new_text": null,
          "old_line_content": "        buffer = av_mallocz(len + 1);",
          "new_line_content": "        char *endptr;",
          "content_same": false
        },
        {
          "line": 5573,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": "fix_index_entry_timestamps",
          "new_api": null,
          "old_text": "fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,\n                                                       frame_duration_buffer, num_discarded_begin)",
          "new_text": null,
          "old_line_content": "                            fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,",
          "new_line_content": "                    st->skip_samples += packet_skip_samples;",
          "content_same": false
        },
        {
          "line": 5575,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, buffer, len)",
          "new_text": null,
          "old_line_content": "        ret = avio_read(pb, buffer, len);",
          "new_line_content": "            return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&frame_duration_buffer)",
          "new_text": null,
          "old_line_content": "                            av_freep(&frame_duration_buffer);",
          "new_line_content": "                    // Shift the index entry timestamp by packet_skip_samples to be correct.",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"skip %d audio samples from curr_cts: %\"PRId64\"\\n\", packet_skip_samples, curr_cts)",
          "new_text": null,
          "old_line_content": "                    av_log(mov->fc, AV_LOG_DEBUG, \"skip %d audio samples from curr_cts: %\"PRId64\"\\n\", packet_skip_samples, curr_cts);",
          "new_line_content": "                        // Make timestamps strictly monotonically increasing for audio, by rewriting timestamps for",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": "av_stristr",
          "new_api": null,
          "old_text": "av_stristr(ptr, \"systemBitrate=\\\"\")",
          "new_text": null,
          "old_line_content": "        while ((ptr = av_stristr(ptr, \"systemBitrate=\\\"\"))) {",
          "new_line_content": "        if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "av_realloc",
          "new_api": null,
          "old_text": "av_realloc(frame_duration_buffer,\n                                                           num_discarded_begin * sizeof(int64_t))",
          "new_text": null,
          "old_line_content": "                        frame_duration_buffer = av_realloc(frame_duration_buffer,",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": "av_realloc_f",
          "new_api": null,
          "old_text": "av_realloc_f(c->bitrates, c->bitrates_count, sizeof(*c->bitrates))",
          "new_text": null,
          "old_line_content": "            c->bitrates = av_realloc_f(c->bitrates, c->bitrates_count, sizeof(*c->bitrates));",
          "new_line_content": "        } else if (ret != len) {",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot reallocate frame duration buffer\\n\")",
          "new_text": null,
          "old_line_content": "                            av_log(mov->fc, AV_LOG_ERROR, \"Cannot reallocate frame duration buffer\\n\");",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buffer)",
          "new_text": null,
          "old_line_content": "                av_free(buffer);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(ptr, &endptr, 10)",
          "new_text": null,
          "old_line_content": "            ret = strtol(ptr, &endptr, 10);",
          "new_line_content": "            ptr += sizeof(\"systemBitrate=\\\"\") - 1;",
          "content_same": false
        },
        {
          "line": 5603,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buffer)",
          "new_text": null,
          "old_line_content": "        av_free(buffer);",
          "new_line_content": "            errno = 0;",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(min_corrected_pts, edit_list_dts_counter + curr_ctts + msc->dts_shift)",
          "new_text": null,
          "old_line_content": "                    min_corrected_pts = FFMIN(min_corrected_pts, edit_list_dts_counter + curr_ctts + msc->dts_shift);",
          "new_line_content": "                        if (first_non_zero_audio_edit > 0 && st->codecpar->codec_id != AV_CODEC_ID_VORBIS) {",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(len + 1)",
          "new_text": null,
          "old_line_content": "            buffer = av_mallocz(len + 1);",
          "new_line_content": "                c->bitrates[c->bitrates_count - 1] = ret;",
          "content_same": false
        },
        {
          "line": 5610,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "fix_index_entry_timestamps",
          "new_api": null,
          "old_text": "fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,\n                                                   frame_duration_buffer, num_discarded_begin)",
          "new_text": null,
          "old_line_content": "                        fix_index_entry_timestamps(st, st->nb_index_entries, edit_list_dts_counter,",
          "new_line_content": "                    min_corrected_pts = edit_list_dts_counter + curr_ctts + msc->dts_shift;",
          "content_same": false
        },
        {
          "line": 5614,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buffer)",
          "new_text": null,
          "old_line_content": "                av_free(buffer);",
          "new_line_content": "        uint8_t *buffer;",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "add_index_entry",
          "new_api": null,
          "old_text": "add_index_entry(st, current->pos, edit_list_dts_counter, current->size,\n                                current->min_distance, flags)",
          "new_text": null,
          "old_line_content": "            if (add_index_entry(st, current->pos, edit_list_dts_counter, current->size,",
          "new_line_content": "                    // discarded packets.",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buffer)",
          "new_text": null,
          "old_line_content": "            av_free(buffer);",
          "new_line_content": "            if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, len)",
          "new_text": null,
          "old_line_content": "            ret = avio_skip(pb, len);",
          "new_line_content": "            } else if (ret != len) {",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(uuid, uuid_spherical, sizeof(uuid))",
          "new_text": null,
          "old_line_content": "    } else if (!memcmp(uuid, uuid_spherical, sizeof(uuid))) {",
          "new_line_content": "            buffer[len] = '\\0';",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"Invalid spherical metadata found\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_WARNING, \"Invalid spherical metadata found\\n\");",
          "new_line_content": "            if (ret < 0)",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "add_ctts_entry",
          "new_api": null,
          "old_text": "add_ctts_entry(&msc->ctts_data, &msc->ctts_count,\n                                           &msc->ctts_allocated_size,\n                                           ctts_sample_old - edit_list_start_ctts_sample,\n                                           ctts_data_old[ctts_index_old].duration)",
          "new_text": null,
          "old_line_content": "                        if (add_ctts_entry(&msc->ctts_data, &msc->ctts_count,",
          "new_line_content": "                if (ctts_data_old) {",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(sizeof(content), atom.size)",
          "new_text": null,
          "old_line_content": "    ret = avio_read(pb, content, FFMIN(sizeof(content), atom.size));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",\n                                   ctts_index_old, ctts_sample_old - edit_list_start_ctts_sample,\n                                   ctts_data_old[ctts_index_old].duration)",
          "new_text": null,
          "old_line_content": "                            av_log(mov->fc, AV_LOG_ERROR, \"Cannot add CTTS entry %\"PRId64\" - {%\"PRId64\", %d}\\n\",",
          "new_line_content": "                    if (st->codecpar->codec_type != AVMEDIA_TYPE_AUDIO && found_keyframe_after_edit == 0) {",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(content, \"Anevia\\x1A\\x1A\", 8)",
          "new_text": null,
          "old_line_content": "        && !memcmp(content, \"Anevia\\x1A\\x1A\", 8)",
          "new_line_content": "    if (atom.size < 8)",
          "content_same": false
        },
        {
          "line": 5665,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "    uint32_t format = avio_rl32(pb);",
          "new_line_content": "        && c->use_mfra_for == FF_MOV_FLAG_MFRA_AUTO) {",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_DEBUG, \"Offset DTS by %\"PRId64\" to make first pts zero.\\n\", min_corrected_pts)",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_DEBUG, \"Offset DTS by %\"PRId64\" to make first pts zero.\\n\", min_corrected_pts);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('e','n','c','v')",
          "new_text": null,
          "old_line_content": "    case MKTAG('e','n','c','v'):        // encrypted video",
          "new_line_content": "    AVStream *st;",
          "content_same": false
        },
        {
          "line": 5678,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('e','n','c','a')",
          "new_text": null,
          "old_line_content": "    case MKTAG('e','n','c','a'):        // encrypted audio",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": "mov_codec_id",
          "new_api": null,
          "old_text": "mov_codec_id(st, format)",
          "new_text": null,
          "old_line_content": "        id = mov_codec_id(st, format);",
          "new_line_content": "    if (c->fc->nb_streams < 1)",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(e_old)",
          "new_text": null,
          "old_line_content": "    av_free(e_old);",
          "new_line_content": "            st->index_entries[i].timestamp -= min_corrected_pts;",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(ctts_data_old)",
          "new_text": null,
          "old_line_content": "    av_free(ctts_data_old);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&frame_duration_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&frame_duration_buffer);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"ignoring 'frma' atom of '%.4s', stream has codec id %d\\n\",\n                   (char*)&format, st->codecpar->codec_id)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "new_line_content": "    sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 5694,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING,\n                   \"ignoring 'frma' atom of '%.4s', stream format is '%.4s'\\n\",\n                   (char*)&format, (char*)&sc->format)",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_WARNING,",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5717,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"duplicate senc atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"duplicate senc atom\\n\");",
          "new_line_content": "    size_t auxiliary_info_size;",
          "content_same": false
        },
        {
          "line": 5721,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5722,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    sc->cenc.use_subsamples = avio_rb24(pb) & 0x02; /* flags */",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams - 1];",
          "content_same": false
        },
        {
          "line": 5724,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb);        /* entries */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_WARNING, \"multiple edit list entries, \"\n                   \"Use -advanced_editlist to correctly decode otherwise \"\n                   \"a/v desync might occur\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(mov->fc, AV_LOG_WARNING, \"multiple edit list entries, \"",
          "new_line_content": "                edit_start_index = 1;",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"senc atom size %\"PRId64\" invalid\\n\", atom.size)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"senc atom size %\"PRId64\" invalid\\n\", atom.size);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "av_rescale",
          "new_api": null,
          "old_text": "av_rescale(empty_duration, sc->time_scale, mov->time_scale)",
          "new_text": null,
          "old_line_content": "                empty_duration = av_rescale(empty_duration, sc->time_scale, mov->time_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(auxiliary_info_size)",
          "new_text": null,
          "old_line_content": "    sc->cenc.auxiliary_info = av_malloc(auxiliary_info_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5744,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info\");",
          "new_line_content": "    if (!sc->cenc.auxiliary_info) {",
          "content_same": false
        },
        {
          "line": 5749,
          "old_api": "av_aes_ctr_alloc",
          "new_api": null,
          "old_text": "av_aes_ctr_alloc()",
          "new_text": null,
          "old_line_content": "    sc->cenc.aes_ctr = av_aes_ctr_alloc();",
          "new_line_content": "    sc->cenc.auxiliary_info_pos = sc->cenc.auxiliary_info;",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": "av_aes_ctr_init",
          "new_api": null,
          "old_text": "av_aes_ctr_init(sc->cenc.aes_ctr, c->decryption_key)",
          "new_text": null,
          "old_line_content": "    return av_aes_ctr_init(sc->cenc.aes_ctr, c->decryption_key);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": "av_reallocp_array",
          "new_api": null,
          "old_text": "av_reallocp_array(&st->index_entries,\n                              st->nb_index_entries + sc->sample_count,\n                              sizeof(*st->index_entries))",
          "new_text": null,
          "old_line_content": "        if (av_reallocp_array(&st->index_entries,",
          "new_line_content": "        int key_off = (sc->keyframe_count && sc->keyframes[0] > 0) || (sc->stps_count && sc->stps_data[0] > 0);",
          "content_same": false
        },
        {
          "line": 5772,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"duplicate saiz atom\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"duplicate saiz atom\\n\");",
          "new_line_content": "    int flags;",
          "content_same": false
        },
        {
          "line": 5778,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(pb); /* version */",
          "new_line_content": "    sc = st->priv_data;",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    flags = avio_rb24(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": "av_fast_realloc",
          "new_api": null,
          "old_text": "av_fast_realloc(NULL, &sc->ctts_allocated_size,\n                                    sc->sample_count * sizeof(*sc->ctts_data))",
          "new_text": null,
          "old_line_content": "            sc->ctts_data = av_fast_realloc(NULL, &sc->ctts_allocated_size,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(ctts_data_old)",
          "new_text": null,
          "old_line_content": "                av_free(ctts_data_old);",
          "new_line_content": "        if (ctts_data_old) {",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb32(pb);    /* info type */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5785,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "        avio_rb32(pb);    /* info type param */",
          "new_line_content": "    atom_header_size = 9;",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb32(pb);    /* entries */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "add_ctts_entry",
          "new_api": null,
          "old_text": "add_ctts_entry(&sc->ctts_data, &sc->ctts_count,\n                                   &sc->ctts_allocated_size, 1,\n                                   ctts_data_old[i].duration)",
          "new_text": null,
          "old_line_content": "                    add_ctts_entry(&sc->ctts_data, &sc->ctts_count,",
          "new_line_content": "                                    sc->sample_count * sizeof(*sc->ctts_data));",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(ctts_data_old)",
          "new_text": null,
          "old_line_content": "            av_free(ctts_data_old);",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(INT_MAX, SIZE_MAX)",
          "new_text": null,
          "old_line_content": "    if (atom.size > FFMIN(INT_MAX, SIZE_MAX)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5796,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"saiz atom auxiliary_info_sizes size %\"PRId64\" invalid\\n\", atom.size)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"saiz atom auxiliary_info_sizes size %\"PRId64\" invalid\\n\", atom.size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(data_size)",
          "new_text": null,
          "old_line_content": "    sc->cenc.auxiliary_info_sizes = av_malloc(data_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too large), ignoring\\n\", sc->stsz_sample_size)",
          "new_text": null,
          "old_line_content": "                av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too large), ignoring\\n\", sc->stsz_sample_size);",
          "new_line_content": "        for (i = 0; i < sc->chunk_count; i++) {",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too small), ignoring\\n\", sc->stsz_sample_size)",
          "new_text": null,
          "old_line_content": "                av_log(mov->fc, AV_LOG_WARNING, \"STSZ sample size %d invalid (too small), ignoring\\n\", sc->stsz_sample_size);",
          "new_line_content": "                i + 1 == sc->stsc_data[stsc_index + 1].first)",
          "content_same": false
        },
        {
          "line": 5810,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, sc->cenc.auxiliary_info_sizes, data_size)",
          "new_text": null,
          "old_line_content": "    if (avio_read(pb, sc->cenc.auxiliary_info_sizes, data_size) != data_size) {",
          "new_line_content": "    data_size = atom.size - atom_header_size;",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info sizes\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read the auxiliary info sizes\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"wrong sample count\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(mov->fc, AV_LOG_ERROR, \"wrong sample count\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5832,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    if (avio_r8(pb) != 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "avio_rb24",
          "new_api": null,
          "old_text": "avio_rb24(pb)",
          "new_text": null,
          "old_line_content": "    avio_rb24(pb); /* Flags */",
          "new_line_content": "    st = c->fc->streams[c->fc->nb_streams-1];",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, buf, sizeof(buf))",
          "new_text": null,
          "old_line_content": "    avio_read(pb, buf, sizeof(buf));",
          "new_line_content": "    if ((uint64_t)atom.size > (1<<30) || atom.size < 42)",
          "content_same": false
        },
        {
          "line": 5838,
          "old_api": "flac_parse_block_header",
          "new_api": null,
          "old_text": "flac_parse_block_header(buf, &last, &type, &size)",
          "new_text": null,
          "old_line_content": "    flac_parse_block_header(buf, &last, &type, &size);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": "ff_get_extradata",
          "new_api": null,
          "old_text": "ff_get_extradata(c->fc, st->codecpar, pb, size)",
          "new_text": null,
          "old_line_content": "    ret = ff_get_extradata(c->fc, st->codecpar, pb, size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Sample size %u is too large\\n\", sample_size)",
          "new_text": null,
          "old_line_content": "                        av_log(mov->fc, AV_LOG_ERROR, \"Sample size %u is too large\\n\", sample_size);",
          "new_line_content": "                    && (st->codecpar->codec_type == AVMEDIA_TYPE_AUDIO || (i==0 && j==0)))",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "ff_rfps_add_frame",
          "new_api": null,
          "old_text": "ff_rfps_add_frame(mov->fc, st, current_dts)",
          "new_text": null,
          "old_line_content": "                        ff_rfps_add_frame(mov->fc, st, current_dts);",
          "new_line_content": "                    e->pos = current_offset;",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c, AV_LOG_ERROR, \"current sample %\"PRId64\" greater than the number of auxiliary info sample sizes %\"SIZE_SPECIFIER\"\\n\",\n                index, sc->cenc.auxiliary_info_sizes_count)",
          "new_text": null,
          "old_line_content": "            av_log(c, AV_LOG_ERROR, \"current sample %\"PRId64\" greater than the number of auxiliary info sample sizes %\"SIZE_SPECIFIER\"\\n\",",
          "new_line_content": "static int mov_seek_auxiliary_info(MOVContext *c, MOVStreamContext *sc, int64_t index)",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c, AV_LOG_ERROR, \"auxiliary info offset %\"SIZE_SPECIFIER\" greater than auxiliary info size %\"SIZE_SPECIFIER\"\\n\",\n            auxiliary_info_seek_offset, (size_t)(sc->cenc.auxiliary_info_end - sc->cenc.auxiliary_info))",
          "new_text": null,
          "old_line_content": "        av_log(c, AV_LOG_ERROR, \"auxiliary info offset %\"SIZE_SPECIFIER\" greater than auxiliary info size %\"SIZE_SPECIFIER\"\\n\",",
          "new_line_content": "            return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": "mov_seek_auxiliary_info",
          "new_api": null,
          "old_text": "mov_seek_auxiliary_info(c, sc, index)",
          "new_text": null,
          "old_line_content": "        ret = mov_seek_auxiliary_info(c, sc, index);",
          "new_line_content": "static int cenc_filter(MOVContext *c, MOVStreamContext *sc, int64_t index, uint8_t *input, int size)",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read iv from the auxiliary info\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read iv from the auxiliary info\\n\");",
          "new_line_content": "    if (index != sc->cenc.auxiliary_info_index) {",
          "content_same": false
        },
        {
          "line": 5906,
          "old_api": "av_aes_ctr_set_iv",
          "new_api": null,
          "old_text": "av_aes_ctr_set_iv(sc->cenc.aes_ctr, sc->cenc.auxiliary_info_pos)",
          "new_text": null,
          "old_line_content": "    av_aes_ctr_set_iv(sc->cenc.aes_ctr, sc->cenc.auxiliary_info_pos);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"error unaligned chunk\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(mov->fc, AV_LOG_ERROR, \"error unaligned chunk\\n\");",
          "new_line_content": "        unsigned chunk_samples, total = 0;",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "av_aes_ctr_crypt",
          "new_api": null,
          "old_text": "av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, size)",
          "new_text": null,
          "old_line_content": "        av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, size);",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample count from the auxiliary info\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample count from the auxiliary info\\n\");",
          "new_line_content": "    if (!sc->cenc.use_subsamples)",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "mov_stsc_index_valid",
          "new_api": null,
          "old_text": "mov_stsc_index_valid(i, sc->stsc_count)",
          "new_text": null,
          "old_line_content": "            if (mov_stsc_index_valid(i, sc->stsc_count))",
          "new_line_content": "            if (sc->samples_per_frame >= 160) { // gsm",
          "content_same": false
        },
        {
          "line": 5922,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(sc->cenc.auxiliary_info_pos)",
          "new_text": null,
          "old_line_content": "    subsample_count = AV_RB16(sc->cenc.auxiliary_info_pos);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 5928,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample from the auxiliary info\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"failed to read subsample from the auxiliary info\\n\");",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_TRACE, \"chunk count %u\\n\", total)",
          "new_text": null,
          "old_line_content": "        av_log(mov->fc, AV_LOG_TRACE, \"chunk count %u\\n\", total);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "av_reallocp_array",
          "new_api": null,
          "old_text": "av_reallocp_array(&st->index_entries,\n                              st->nb_index_entries + total,\n                              sizeof(*st->index_entries))",
          "new_text": null,
          "old_line_content": "        if (av_reallocp_array(&st->index_entries,",
          "new_line_content": "                chunk_count = sc->stsc_data[i+1].first - sc->stsc_data[i].first;",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(sc->cenc.auxiliary_info_pos)",
          "new_text": null,
          "old_line_content": "        clear_bytes = AV_RB16(sc->cenc.auxiliary_info_pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": "AV_RB32",
          "new_api": null,
          "old_text": "AV_RB32(sc->cenc.auxiliary_info_pos)",
          "new_text": null,
          "old_line_content": "        encrypted_bytes = AV_RB32(sc->cenc.auxiliary_info_pos);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"subsample size exceeds the packet size left\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(c->fc, AV_LOG_ERROR, \"subsample size exceeds the packet size left\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "mov_stsc_index_valid",
          "new_api": null,
          "old_text": "mov_stsc_index_valid(stsc_index, sc->stsc_count)",
          "new_text": null,
          "old_line_content": "            if (mov_stsc_index_valid(stsc_index, sc->stsc_count) &&",
          "new_line_content": "                              sizeof(*st->index_entries)) < 0) {",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": "av_aes_ctr_crypt",
          "new_api": null,
          "old_text": "av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, encrypted_bytes)",
          "new_text": null,
          "old_line_content": "        av_aes_ctr_crypt(sc->cenc.aes_ctr, input, input, encrypted_bytes);",
          "new_line_content": "        if ((uint64_t)clear_bytes + encrypted_bytes > input_end - input) {",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"leftover packet bytes after subsample processing\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"leftover packet bytes after subsample processing\\n\");",
          "new_line_content": "        /* skip the clear bytes */",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(mov->fc,\n                           \"Zero bytes per frame, but %d samples per frame\",\n                           sc->samples_per_frame)",
          "new_text": null,
          "old_line_content": "                    avpriv_request_sample(mov->fc,",
          "new_line_content": "                i + 1 == sc->stsc_data[stsc_index + 1].first)",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN((1024 / sc->samples_per_frame)*\n                                        sc->samples_per_frame, chunk_samples)",
          "new_text": null,
          "old_line_content": "                        samples = FFMIN((1024 / sc->samples_per_frame)*",
          "new_line_content": "                           sc->samples_per_frame);",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(1024, chunk_samples)",
          "new_text": null,
          "old_line_content": "                        samples = FFMIN(1024, chunk_samples);",
          "new_line_content": "                if (sc->samples_per_frame >= 160) { // gsm",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"wrong chunk count %u\\n\", total)",
          "new_text": null,
          "old_line_content": "                    av_log(mov->fc, AV_LOG_ERROR, \"wrong chunk count %u\\n\", total);",
          "new_line_content": "                                        sc->samples_per_frame, chunk_samples);",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "    if (avio_r8(pb) != 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5976,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"unsupported OpusSpecificBox version\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"unsupported OpusSpecificBox version\\n\");",
          "new_line_content": "    if (c->fc->nb_streams < 1)",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(mov->fc, AV_LOG_ERROR, \"Sample size %u is too large\\n\", size)",
          "new_text": null,
          "old_line_content": "                    av_log(mov->fc, AV_LOG_ERROR, \"Sample size %u is too large\\n\", size);",
          "new_line_content": "                        size = samples * sc->sample_size;",
          "content_same": false
        },
        {
          "line": 5983,
          "old_api": "ff_alloc_extradata",
          "new_api": null,
          "old_text": "ff_alloc_extradata(st->codecpar, size)",
          "new_text": null,
          "old_line_content": "    if (ff_alloc_extradata(st->codecpar, size))",
          "new_line_content": "    /* Check OpusSpecificBox version. */",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('O','p','u','s')",
          "new_text": null,
          "old_line_content": "    AV_WL32(st->codecpar->extradata, MKTAG('O','p','u','s'));",
          "new_line_content": "        return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('H','e','a','d')",
          "new_text": null,
          "old_line_content": "    AV_WL32(st->codecpar->extradata + 4, MKTAG('H','e','a','d'));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": "AV_WB8",
          "new_api": null,
          "old_text": "AV_WB8(st->codecpar->extradata + 8, 1)",
          "new_text": null,
          "old_line_content": "    AV_WB8(st->codecpar->extradata + 8, 1); /* OpusHead version */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, st->codecpar->extradata + 9, size - 9)",
          "new_text": null,
          "old_line_content": "    avio_read(pb, st->codecpar->extradata + 9, size - 9);",
          "new_line_content": "    /* OpusSpecificBox size plus magic for Ogg OpusHead header. */",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "mov_fix_index",
          "new_api": null,
          "old_text": "mov_fix_index(mov, st)",
          "new_text": null,
          "old_line_content": "        mov_fix_index(mov, st);",
          "new_line_content": "                current_offset += size;",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(OPUS_SEEK_PREROLL_MS,\n                                              (AVRational){1, 1000},\n                                              (AVRational){1, 48000})",
          "new_text": null,
          "old_line_content": "    st->codecpar->seek_preroll = av_rescale_q(OPUS_SEEK_PREROLL_MS,",
          "new_line_content": "       little-endian; aside from the preceeding magic and version they're",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": "mov_estimate_video_delay",
          "new_api": null,
          "old_text": "mov_estimate_video_delay(mov, st)",
          "new_text": null,
          "old_line_content": "    mov_estimate_video_delay(mov, st);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('A','C','L','R')",
          "new_text": null,
          "old_line_content": "{ MKTAG('A','C','L','R'), mov_read_aclr },",
          "new_line_content": "    st->codecpar->initial_padding = pre_skip;",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('A','A','L','P')",
          "new_text": null,
          "old_line_content": "{ MKTAG('A','A','L','P'), mov_read_avid },",
          "new_line_content": "                                              (AVRational){1, 1000},",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('A','R','E','S')",
          "new_text": null,
          "old_line_content": "{ MKTAG('A','R','E','S'), mov_read_ares },",
          "new_line_content": "                                              (AVRational){1, 48000});",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('a','v','s','s')",
          "new_text": null,
          "old_line_content": "{ MKTAG('a','v','s','s'), mov_read_avss },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6014,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','h','p','l')",
          "new_text": null,
          "old_line_content": "{ MKTAG('c','h','p','l'), mov_read_chpl },",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','o','6','4')",
          "new_text": null,
          "old_line_content": "{ MKTAG('c','o','6','4'), mov_read_stco },",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "av_url_split",
          "new_api": null,
          "old_text": "av_url_split(src_proto, sizeof(src_proto), src_auth, sizeof(src_auth), src_host, sizeof(src_host), &src_port, NULL, 0, src)",
          "new_text": null,
          "old_line_content": "    av_url_split(src_proto, sizeof(src_proto), src_auth, sizeof(src_auth), src_host, sizeof(src_host), &src_port, NULL, 0, src);",
          "new_line_content": "    char src_proto[64];",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "av_url_split",
          "new_api": null,
          "old_text": "av_url_split(ref_proto, sizeof(ref_proto), ref_auth, sizeof(ref_auth), ref_host, sizeof(ref_host), &ref_port, NULL, 0, ref)",
          "new_text": null,
          "old_line_content": "    av_url_split(ref_proto, sizeof(ref_proto), ref_auth, sizeof(ref_auth), ref_host, sizeof(ref_host), &ref_port, NULL, 0, ref);",
          "new_line_content": "    char ref_proto[64];",
          "content_same": false
        },
        {
          "line": 6016,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','o','l','r')",
          "new_text": null,
          "old_line_content": "{ MKTAG('c','o','l','r'), mov_read_colr },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(src)",
          "new_text": null,
          "old_line_content": "    if (strlen(src) == 0) {",
          "new_line_content": "    char ref_auth[256];",
          "content_same": false
        },
        {
          "line": 6017,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','t','t','s')",
          "new_text": null,
          "old_line_content": "{ MKTAG('c','t','t','s'), mov_read_ctts }, /* composition time to sample */",
          "new_line_content": "static const MOVParseTableEntry mov_default_parse_table[] = {",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(src_auth)",
          "new_text": null,
          "old_line_content": "    } else if (strlen(src_auth) + 1 >= sizeof(src_auth) ||",
          "new_line_content": "    char ref_host[256];",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_auth)",
          "new_text": null,
          "old_line_content": "        strlen(ref_auth) + 1 >= sizeof(ref_auth) ||",
          "new_line_content": "    int src_port=-1;",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(src_host)",
          "new_text": null,
          "old_line_content": "        strlen(src_host) + 1 >= sizeof(src_host) ||",
          "new_line_content": "    int ref_port=-1;",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_host)",
          "new_text": null,
          "old_line_content": "        strlen(ref_host) + 1 >= sizeof(ref_host)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(src_auth, ref_auth)",
          "new_text": null,
          "old_line_content": "               strcmp(src_auth, ref_auth) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(src, '/')",
          "new_text": null,
          "old_line_content": "        src_path = strrchr(src, '/');",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref->path)",
          "new_text": null,
          "old_line_content": "        for (i = 0, l = strlen(ref->path) - 1; l >= 0; l--)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(filename, src, src_path - src)",
          "new_text": null,
          "old_line_content": "            memcpy(filename, src, src_path - src);",
          "new_line_content": "            if (ref->path[l] == '/') {",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": "av_strlcat",
          "new_api": null,
          "old_text": "av_strlcat(filename, \"../\", sizeof(filename))",
          "new_text": null,
          "old_line_content": "                av_strlcat(filename, \"../\", sizeof(filename));",
          "new_line_content": "                    i++;",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "av_strlcat",
          "new_api": null,
          "old_text": "av_strlcat(filename, ref->path + l + 1, sizeof(filename))",
          "new_text": null,
          "old_line_content": "            av_strlcat(filename, ref->path + l + 1, sizeof(filename));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "test_same_origin",
          "new_api": null,
          "old_text": "test_same_origin(src, filename)",
          "new_text": null,
          "old_line_content": "                int same_origin = test_same_origin(src, filename);",
          "new_line_content": "        if (i == ref->nlvl_to - 1 && src_path - src  < sizeof(filename)) {",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR,\n                        \"Reference with mismatching origin, %s not tried for security reasons, \"\n                        \"set demuxer option use_absolute_path to allow it anyway\\n\",\n                        ref->path)",
          "new_text": null,
          "old_line_content": "                    av_log(c->fc, AV_LOG_ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(ref->path + l + 1, \"..\")",
          "new_text": null,
          "old_line_content": "                if(strstr(ref->path + l + 1, \"..\") ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(ref->path + l + 1, \":\")",
          "new_text": null,
          "old_line_content": "                   strstr(ref->path + l + 1, \":\") ||",
          "new_line_content": "                if (!same_origin) {",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOENT)",
          "new_text": null,
          "old_line_content": "                    return AVERROR(ENOENT);",
          "new_line_content": "                        \"set demuxer option use_absolute_path to allow it anyway\\n\",",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(filename)",
          "new_text": null,
          "old_line_content": "            if (strlen(filename) + 1 == sizeof(filename))",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOENT)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOENT);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": "io_open",
          "new_api": null,
          "old_text": "c->fc->io_open(c->fc, pb, ref->path, AVIO_FLAG_READ, NULL)",
          "new_text": null,
          "old_line_content": "        if (!c->fc->io_open(c->fc, pb, ref->path, AVIO_FLAG_READ, NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6105,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Atoms too deeply nested\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_ERROR, \"Atoms too deeply nested\\n\");",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 4062,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_WARNING, \"stream %d, timescale not set\\n\", sc->ffindex)",
          "new_text": null,
          "old_line_content": "        av_log(c->fc, AV_LOG_WARNING, \"stream %d, timescale not set\\n\", sc->ffindex);",
          "new_line_content": "               ref->path);",
          "content_same": false
        },
        {
          "line": 6112,
          "old_api": "avio_feof",
          "new_api": null,
          "old_text": "avio_feof(pb)",
          "new_text": null,
          "old_line_content": "    while (total_size <= atom.size - 8 && !avio_feof(pb)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6117,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(pb)",
          "new_text": null,
          "old_line_content": "            a.size = avio_rb32(pb);",
          "new_line_content": "    c->atom_depth ++;",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": "avio_rl32",
          "new_api": null,
          "old_text": "avio_rl32(pb)",
          "new_text": null,
          "old_line_content": "            a.type = avio_rl32(pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6119,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('f','r','e','e')",
          "new_text": null,
          "old_line_content": "            if (a.type == MKTAG('f','r','e','e') &&",
          "new_line_content": "    if (atom.size < 0)",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(c->fc, NULL)",
          "new_text": null,
          "old_line_content": "    st = avformat_new_stream(c->fc, NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "    if (!st) return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6125,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, buf, 8)",
          "new_text": null,
          "old_line_content": "                if (avio_read(pb, buf, 8) != 8)",
          "new_line_content": "        if (atom.size >= 8) {",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MOVStreamContext))",
          "new_text": null,
          "old_line_content": "    sc = av_mallocz(sizeof(MOVStreamContext));",
          "new_line_content": "static int mov_read_trak(MOVContext *c, AVIOContext *pb, MOVAtom atom)",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "    if (!sc) return AVERROR(ENOMEM);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('c','m','o','v')",
          "new_text": null,
          "old_line_content": "                    *type == MKTAG('c','m','o','v')) {",
          "new_line_content": "                a.size >= 8 &&",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(c->fc, AV_LOG_ERROR, \"Detected moov in a free atom.\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(c->fc, AV_LOG_ERROR, \"Detected moov in a free atom.\\n\");",
          "new_line_content": "                c->fc->strict_std_compliance < FF_COMPLIANCE_STRICT &&",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','o','o','v')",
          "new_text": null,
          "old_line_content": "                    a.type = MKTAG('m','o','o','v');",
          "new_line_content": "                c->moov_retry) {",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "mov_read_default",
          "new_api": null,
          "old_text": "mov_read_default(c, pb, atom)",
          "new_text": null,
          "old_line_content": "    if ((ret = mov_read_default(c, pb, atom)) < 0)",
          "new_line_content": "    st->id = c->fc->nb_streams;",
          "content_same": false
        },
        {
          "line": 6135,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','o','o','v')",
          "new_text": null,
          "old_line_content": "                atom.type != MKTAG('m','o','o','v'))",
          "new_line_content": "                    return AVERROR_INVALIDDATA;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 175,
      "total_additions": 647,
      "total_deletions": 644,
      "total_api_changes": 1466
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 1466,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          2864,
          2833,
          2866,
          2868
        ]
      }
    },
    "api_calls_before": 1702,
    "api_calls_after": 1706,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 4,
      "total_diff_lines": 42
    }
  }
}
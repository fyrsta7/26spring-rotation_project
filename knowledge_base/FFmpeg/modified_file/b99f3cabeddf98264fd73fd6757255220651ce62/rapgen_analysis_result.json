{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/b99f3cabeddf98264fd73fd6757255220651ce62",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/b99f3cabeddf98264fd73fd6757255220651ce62/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/b99f3cabeddf98264fd73fd6757255220651ce62/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/b99f3cabeddf98264fd73fd6757255220651ce62/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 613,
          "old_api": "get_cabac_bypass",
          "new_api": "get_cabac",
          "old_text": "get_cabac_bypass(c)",
          "new_text": "get_cabac(c, state)",
          "old_line_content": "            if(is_signed && get_cabac_bypass(c)){",
          "new_line_content": "        if(get_cabac(c, state)==0){",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 577,
          "old_api": null,
          "new_api": "renorm_cabac_decoder_once",
          "old_text": null,
          "new_text": "renorm_cabac_decoder_once(c)",
          "old_line_content": "        return 0;",
          "new_line_content": "        renorm_cabac_decoder_once(c);",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "refill2",
          "old_text": null,
          "new_text": "refill2(c)",
          "old_line_content": "#endif",
          "new_line_content": "        refill2(c);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "                return -i;",
          "new_line_content": "            if(is_signed && get_cabac_bypass(c)){",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "renorm_cabac_decoder_once",
          "old_text": null,
          "new_text": "renorm_cabac_decoder_once(c)",
          "old_line_content": "    }else{",
          "new_line_content": "        renorm_cabac_decoder_once(c);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "\"(%2)             \\n\\t\"\n\n        \"leal -1(%%ebx), %%ecx                  \\n\\t\"\n        \"xorl %%ebx, %%ecx                      \\n\\t\"\n        \"shrl $17, %%ecx                        \\n\\t\"\n        \"movzbl \" MANGLE(ff_h264_norm_shift)",
          "old_text": null,
          "new_text": "\"(%2)             \\n\\t\"\n\n        \"leal -1(%%ebx), %%ecx                  \\n\\t\"\n        \"xorl %%ebx, %%ecx                      \\n\\t\"\n        \"shrl $17, %%ecx                        \\n\\t\"\n        \"movzbl \" MANGLE(ff_h264_norm_shift)",
          "old_line_content": "        \"leal -1(%%ebx), %%ecx                  \\n\\t\"",
          "new_line_content": "        \"movl %%ecx, \"BYTE    \"(%2)             \\n\\t\"",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "get_cabac",
          "old_text": null,
          "new_text": "get_cabac(c, state)",
          "old_line_content": "            return i;",
          "new_line_content": "        if(get_cabac(c, state)==0)",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "refill",
          "old_text": null,
          "new_text": "refill(c)",
          "old_line_content": "",
          "new_line_content": "        refill(c);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "        i+= m;",
          "new_line_content": "    while(get_cabac_bypass(c)){",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "refill2",
          "old_text": null,
          "new_text": "refill2(c)",
          "old_line_content": "        }",
          "new_line_content": "            refill2(c);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "    }",
          "new_line_content": "        v+= v + get_cabac_bypass(c);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "get_cabac_bypass",
          "old_text": null,
          "new_text": "get_cabac_bypass(c)",
          "old_line_content": "        return -i;",
          "new_line_content": "    if(is_signed && get_cabac_bypass(c)){",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": null,
          "new_api": "\"r\"(c)",
          "old_text": null,
          "new_text": "\"r\"(c)",
          "old_line_content": "        : \"%ecx\", \"%ebx\", \"%edx\", \"%esi\"",
          "new_line_content": "        :\"r\"(state), \"r\"(c)",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "get_cabac",
          "old_text": null,
          "new_text": "get_cabac(c, state)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(get_cabac(c, state)==0)",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 576,
          "old_api": "renorm_cabac_decoder_once",
          "new_api": null,
          "old_text": "renorm_cabac_decoder_once(c)",
          "new_text": null,
          "old_line_content": "        renorm_cabac_decoder_once(c);",
          "new_line_content": "    if(c->low < c->range){",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "get_cabac",
          "new_api": null,
          "old_text": "get_cabac(c, state)",
          "new_text": null,
          "old_line_content": "        if(get_cabac(c, state)==0){",
          "new_line_content": "    for(i=1; i<max; i++){",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "refill2",
          "new_api": null,
          "old_text": "refill2(c)",
          "new_text": null,
          "old_line_content": "        refill2(c);",
          "new_line_content": "    if(!(c->low & CABAC_MASK))",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "renorm_cabac_decoder_once",
          "new_api": null,
          "old_text": "renorm_cabac_decoder_once(c)",
          "new_text": null,
          "old_line_content": "        renorm_cabac_decoder_once(c);",
          "new_line_content": "        *state= ff_h264_mps_state[s];",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "\"(%2)             \\n\\t\"\n\n        \"leal -1(%%ebx), %%ecx                  \\n\\t\"\n        \"xorl %%ebx, %%ecx                      \\n\\t\"\n        \"shrl $17, %%ecx                        \\n\\t\"\n        \"movzbl \" MANGLE(ff_h264_norm_shift)",
          "new_api": null,
          "old_text": "\"(%2)             \\n\\t\"\n\n        \"leal -1(%%ebx), %%ecx                  \\n\\t\"\n        \"xorl %%ebx, %%ecx                      \\n\\t\"\n        \"shrl $17, %%ecx                        \\n\\t\"\n        \"movzbl \" MANGLE(ff_h264_norm_shift)",
          "new_text": null,
          "old_line_content": "        \"movl %%ecx, \"BYTE    \"(%2)             \\n\\t\"",
          "new_line_content": "        \"subl $0xFFFF, %%esi                    \\n\\t\"",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "get_cabac",
          "new_api": null,
          "old_text": "get_cabac(c, state)",
          "new_text": null,
          "old_line_content": "        if(get_cabac(c, state)==0)",
          "new_line_content": "    for(i=0; i<max; i++){",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "refill",
          "new_api": null,
          "old_text": "refill(c)",
          "new_text": null,
          "old_line_content": "        refill(c);",
          "new_line_content": "    if(!(c->low & CABAC_MASK))",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "    while(get_cabac_bypass(c)){",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "refill2",
          "new_api": null,
          "old_text": "refill2(c)",
          "new_text": null,
          "old_line_content": "            refill2(c);",
          "new_line_content": "        if(!(c->low & 0xFFFF)){",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "        v+= v + get_cabac_bypass(c);",
          "new_line_content": "    while(m>>=1){",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "get_cabac_bypass",
          "new_api": null,
          "old_text": "get_cabac_bypass(c)",
          "new_text": null,
          "old_line_content": "    if(is_signed && get_cabac_bypass(c)){",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "\"r\"(c)",
          "new_api": null,
          "old_text": "\"r\"(c)",
          "new_text": null,
          "old_line_content": "        :\"r\"(state), \"r\"(c)",
          "new_line_content": "        :\"=&a\"(bit)",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "get_cabac",
          "new_api": null,
          "old_text": "get_cabac(c, state)",
          "new_text": null,
          "old_line_content": "    if(get_cabac(c, state)==0)",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 13,
      "total_deletions": 13,
      "total_api_changes": 27
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 27,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          481,
          482,
          483,
          484,
          503,
          504,
          506
        ]
      }
    },
    "api_calls_before": 52,
    "api_calls_after": 52,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 3,
      "total_diff_lines": 28
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/93e7ef9a2472d64d550ba1cf0e7a6f206fbc8dfd",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/93e7ef9a2472d64d550ba1cf0e7a6f206fbc8dfd/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/93e7ef9a2472d64d550ba1cf0e7a6f206fbc8dfd/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/93e7ef9a2472d64d550ba1cf0e7a6f206fbc8dfd/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 152,
          "old_api": "av_realloc",
          "new_api": "av_malloc",
          "old_text": "av_realloc(s->decoded[i],\n                                   sizeof(int32_t)*s->max_blocksize)",
          "new_text": "av_malloc(sizeof(int32_t)*s->max_blocksize)",
          "old_line_content": "        s->decoded[i] = av_realloc(s->decoded[i],",
          "new_line_content": "        s->decoded[i] = av_malloc(sizeof(int32_t)*s->max_blocksize);",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "skip_bits",
          "new_api": "get_bits",
          "old_text": "skip_bits(&gb, 16)",
          "new_text": "get_bits(&gb, 16)",
          "old_line_content": "    skip_bits(&gb, 16); /* skip min blocksize */",
          "new_line_content": "    s->max_blocksize = get_bits(&gb, 16);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "skip_bits",
          "new_api": "get_bits_long",
          "old_text": "skip_bits(&gb, 24)",
          "new_text": "get_bits_long(&gb, 24)",
          "old_line_content": "    skip_bits(&gb, 24); /* skip min frame size */",
          "new_line_content": "    s->max_framesize = get_bits_long(&gb, 24);",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "get_bits_long",
          "new_api": "get_bits",
          "old_text": "get_bits_long(&gb, 20)",
          "new_text": "get_bits(&gb, 3)",
          "old_line_content": "    s->samplerate = get_bits_long(&gb, 20);",
          "new_line_content": "    s->channels = get_bits(&gb, 3) + 1;",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "get_bits_long",
          "new_api": "get_bits",
          "old_text": "get_bits_long(&gb, 32)",
          "new_text": "get_bits(&gb, 4)",
          "old_line_content": "    s->samples  = get_bits_long(&gb, 32) << 4;",
          "new_line_content": "    s->samples |= get_bits(&gb, 4);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "avpriv_flac_parse_streaminfo",
          "new_api": "allocate_buffers",
          "old_text": "avpriv_flac_parse_streaminfo(s->avctx, (FLACStreaminfo *)s, &buf[8])",
          "new_text": "allocate_buffers(s)",
          "old_line_content": "    avpriv_flac_parse_streaminfo(s->avctx, (FLACStreaminfo *)s, &buf[8]);",
          "new_line_content": "    allocate_buffers(s);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "get_bits1",
          "new_api": "av_log",
          "old_text": "get_bits1(&s->gb)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid subframe padding\\n\")",
          "old_line_content": "    if (get_bits1(&s->gb)) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid subframe padding\\n\");",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "get_bits1",
          "new_api": "get_bits_left",
          "old_text": "get_bits1(&s->gb)",
          "new_text": "get_bits_left(&s->gb)",
          "old_line_content": "    if (get_bits1(&s->gb)) {",
          "new_line_content": "        int left = get_bits_left(&s->gb);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "show_bits_long",
          "new_api": "av_log",
          "old_text": "show_bits_long(&s->gb, bps)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR,\n                   \"Invalid number of wasted bits > available bits (%d) - left=%d\\n\",\n                   bps, left)",
          "old_line_content": "                           !show_bits_long(&s->gb, bps)) {",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR,",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "ff_flac_decode_frame_header",
          "new_api": "av_log",
          "old_text": "ff_flac_decode_frame_header(s->avctx, gb, &fi, 0)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid frame header\\n\")",
          "old_line_content": "    if (ff_flac_decode_frame_header(s->avctx, gb, &fi, 0)) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid frame header\\n\");",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "MKBETAG",
          "new_api": "parse_streaminfo",
          "old_text": "MKBETAG('f','L','a','C')",
          "new_text": "parse_streaminfo(s, buf, buf_size)",
          "old_line_content": "    if (AV_RB32(buf) == MKBETAG('f','L','a','C')) {",
          "new_line_content": "        if (!s->got_streaminfo && parse_streaminfo(s, buf, buf_size)) {",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "parse_streaminfo",
          "new_api": "av_log",
          "old_text": "parse_streaminfo(s, buf, buf_size)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid header\\n\")",
          "old_line_content": "        if (!s->got_streaminfo && parse_streaminfo(s, buf, buf_size)) {",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"invalid header\\n\");",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "init_get_bits",
          "new_api": "decode_frame",
          "old_text": "init_get_bits(&s->gb, buf, buf_size*8)",
          "new_text": "decode_frame(s)",
          "old_line_content": "    init_get_bits(&s->gb, buf, buf_size*8);",
          "new_line_content": "    if (decode_frame(s) < 0) {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "decode_frame",
          "new_api": "av_log",
          "old_text": "decode_frame(s)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"decode_frame() failed\\n\")",
          "old_line_content": "    if (decode_frame(s) < 0) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"decode_frame() failed\\n\");",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "get_buffer",
          "new_api": "av_log",
          "old_text": "avctx->get_buffer(avctx, &s->frame)",
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "old_line_content": "    if ((ret = avctx->get_buffer(avctx, &s->frame)) < 0) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 261,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 2)",
          "old_line_content": "",
          "new_line_content": "    method_type = get_bits(&s->gb, 2);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "DECORRELATE",
          "old_text": null,
          "new_text": "DECORRELATE(a,a-b)",
          "old_line_content": "    case FLAC_CHMODE_LEFT_SIDE:",
          "new_line_content": "        DECORRELATE(a,a-b)",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"illegal residual coding method %d\\n\",\n               method_type)",
          "old_line_content": "    if (method_type > 1) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"illegal residual coding method %d\\n\",",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "DECORRELATE",
          "old_text": null,
          "new_text": "DECORRELATE(a+b,b)",
          "old_line_content": "    case FLAC_CHMODE_RIGHT_SIDE:",
          "new_line_content": "        DECORRELATE(a+b,b)",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "DECORRELATE",
          "old_text": null,
          "new_text": "DECORRELATE( (a-=b>>1) + b, a)",
          "old_line_content": "    case FLAC_CHMODE_MID_SIDE:",
          "new_line_content": "        DECORRELATE( (a-=b>>1) + b, a)",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "",
          "new_line_content": "    rice_order = get_bits(&s->gb, 4);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"overread: %d\\n\", bytes_read - buf_size)",
          "old_line_content": "    if (bytes_read > buf_size) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"overread: %d\\n\", bytes_read - buf_size);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"blocksize %d > %d\\n\", fi.blocksize,\n               s->max_blocksize)",
          "old_line_content": "    if (fi.blocksize > s->max_blocksize) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"blocksize %d > %d\\n\", fi.blocksize,",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid predictor order: %i > %i\\n\",\n               pred_order, samples)",
          "old_line_content": "    if (pred_order > samples) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid predictor order: %i > %i\\n\",",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_DEBUG, \"underread: %d orig size: %d\\n\",\n               buf_size - bytes_read, buf_size)",
          "old_line_content": "    if (bytes_read < buf_size) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"underread: %d orig size: %d\\n\",",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"sample rate not found in STREAMINFO\"\n                                        \" or frame header\\n\")",
          "old_line_content": "    if (!s->samplerate && !fi.samplerate) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"sample rate not found in STREAMINFO\"",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, method_type == 0 ? 4 : 5)",
          "old_line_content": "    for (partition = 0; partition < (1 << rice_order); partition++) {",
          "new_line_content": "        tmp = get_bits(&s->gb, method_type == 0 ? 4 : 5);",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 5)",
          "old_line_content": "        if (tmp == (method_type == 0 ? 15 : 31)) {",
          "new_line_content": "            tmp = get_bits(&s->gb, 5);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "get_sbits_long",
          "old_text": null,
          "new_text": "get_sbits_long(&s->gb, tmp)",
          "old_line_content": "            for (; i < samples; i++, sample++)",
          "new_line_content": "                s->decoded[channel][sample] = get_sbits_long(&s->gb, tmp);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_WARNING, \"sample rate changed from %d to %d\\n\",\n               s->samplerate, fi.samplerate)",
          "old_line_content": "    } else if (s->samplerate && fi.samplerate != s->samplerate) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_WARNING, \"sample rate changed from %d to %d\\n\",",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "get_sr_golomb_flac",
          "old_text": null,
          "new_text": "get_sr_golomb_flac(&s->gb, tmp, INT_MAX, 0)",
          "old_line_content": "            for (; i < samples; i++, sample++) {",
          "new_line_content": "                s->decoded[channel][sample] = get_sr_golomb_flac(&s->gb, tmp, INT_MAX, 0);",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&gb, buffer, FLAC_STREAMINFO_SIZE*8)",
          "old_line_content": "    GetBitContext gb;",
          "new_line_content": "    init_get_bits(&gb, buffer, FLAC_STREAMINFO_SIZE*8);",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&gb, 16)",
          "old_line_content": "",
          "new_line_content": "    skip_bits(&gb, 16); /* skip min blocksize */",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->decoded[i])",
          "old_line_content": "    for (i = 0; i < s->channels; i++) {",
          "new_line_content": "        av_freep(&s->decoded[i]);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "allocate_buffers",
          "old_text": null,
          "new_text": "allocate_buffers(s)",
          "old_line_content": "    if (!s->got_streaminfo) {",
          "new_line_content": "        allocate_buffers(s);",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_WARNING, \"invalid max blocksize: %d\\n\",\n               s->max_blocksize)",
          "old_line_content": "    if (s->max_blocksize < FLAC_MIN_BLOCKSIZE) {",
          "new_line_content": "        av_log(avctx, AV_LOG_WARNING, \"invalid max blocksize: %d\\n\",",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "dump_headers",
          "old_text": null,
          "new_text": "dump_headers(s->avctx, (FLACStreaminfo *)s)",
          "old_line_content": "        s->got_streaminfo = 1;",
          "new_line_content": "        dump_headers(s->avctx, (FLACStreaminfo *)s);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&gb, 24)",
          "old_line_content": "",
          "new_line_content": "    skip_bits(&gb, 24); /* skip min frame size */",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "decode_subframe",
          "old_text": null,
          "new_text": "decode_subframe(s, i)",
          "old_line_content": "    for (i = 0; i < s->channels; i++) {",
          "new_line_content": "        if (decode_subframe(s, i) < 0)",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&gb, 20)",
          "old_line_content": "",
          "new_line_content": "    s->samplerate = get_bits_long(&gb, 20);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "",
          "new_line_content": "    if (get_bits1(&s->gb)) {",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "align_get_bits",
          "old_text": null,
          "new_text": "align_get_bits(gb)",
          "old_line_content": "",
          "new_line_content": "    align_get_bits(gb);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"FLAC (Free Lossless Audio Codec)\")",
          "old_line_content": "    .capabilities   = CODEC_CAP_DR1,",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"FLAC (Free Lossless Audio Codec)\"),",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "get_sbits_long",
          "old_text": null,
          "new_text": "get_sbits_long(&s->gb, bps)",
          "old_line_content": "    for (i = 0; i < pred_order; i++) {",
          "new_line_content": "        decoded[i] = get_sbits_long(&s->gb, bps);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(gb, 16)",
          "old_line_content": "    /* frame footer */",
          "new_line_content": "    skip_bits(gb, 16); /* data crc */",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&gb, 32)",
          "old_line_content": "",
          "new_line_content": "    s->samples  = get_bits_long(&gb, 32) << 4;",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "decode_residuals",
          "old_text": null,
          "new_text": "decode_residuals(s, channel, pred_order)",
          "old_line_content": "",
          "new_line_content": "    if (decode_residuals(s, channel, pred_order) < 0)",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 6)",
          "old_line_content": "    }",
          "new_line_content": "    type = get_bits(&s->gb, 6);",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "skip_bits_long",
          "old_text": null,
          "new_text": "skip_bits_long(&gb, 64)",
          "old_line_content": "",
          "new_line_content": "    skip_bits_long(&gb, 64); /* md5 sum */",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "",
          "new_line_content": "    if (get_bits1(&s->gb)) {",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "show_bits_long",
          "old_text": null,
          "new_text": "show_bits_long(&s->gb, left)",
          "old_line_content": "        if ( left < 0 ||",
          "new_line_content": "            (left < bps && !show_bits_long(&s->gb, left)) ||",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": null,
          "new_api": "dump_headers",
          "old_text": null,
          "new_text": "dump_headers(avctx, s)",
          "old_line_content": "",
          "new_line_content": "    dump_headers(avctx, s);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "        }",
          "new_line_content": "        while (!get_bits1(&s->gb))",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "bytestream_get_byte",
          "old_text": null,
          "new_text": "bytestream_get_byte(&block_header)",
          "old_line_content": "{",
          "new_line_content": "    int tmp = bytestream_get_byte(&block_header);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "av_log_missing_feature",
          "old_text": null,
          "new_text": "av_log_missing_feature(s->avctx, \"decorrelated bit depth > 32\", 0)",
          "old_line_content": "    if (bps > 32) {",
          "new_line_content": "        av_log_missing_feature(s->avctx, \"decorrelated bit depth > 32\", 0);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "bytestream_get_be24",
          "old_text": null,
          "new_text": "bytestream_get_be24(&block_header)",
          "old_line_content": "    if (size)",
          "new_line_content": "        *size = bytestream_get_be24(&block_header);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "ff_flac_get_max_frame_size",
          "old_text": null,
          "new_text": "ff_flac_get_max_frame_size(s->max_blocksize ? s->max_blocksize : FLAC_MAX_BLOCKSIZE,\n                                       FLAC_MAX_CHANNELS, 32)",
          "old_line_content": "        s->max_framesize =",
          "new_line_content": "            ff_flac_get_max_frame_size(s->max_blocksize ? s->max_blocksize : FLAC_MAX_BLOCKSIZE,",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "get_sbits_long",
          "old_text": null,
          "new_text": "get_sbits_long(&s->gb, bps)",
          "old_line_content": "    if (type == 0) {",
          "new_line_content": "        tmp = get_sbits_long(&s->gb, bps);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "get_sbits_long",
          "old_text": null,
          "new_text": "get_sbits_long(&s->gb, bps)",
          "old_line_content": "        for (i = 0; i < s->blocksize; i++)",
          "new_line_content": "            s->decoded[channel][i] = get_sbits_long(&s->gb, bps);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "decode_subframe_fixed",
          "old_text": null,
          "new_text": "decode_subframe_fixed(s, channel, type & ~0x8, bps)",
          "old_line_content": "    } else if ((type >= 8) && (type <= 12)) {",
          "new_line_content": "        if (decode_subframe_fixed(s, channel, type & ~0x8, bps) < 0)",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "MKBETAG",
          "old_text": null,
          "new_text": "MKBETAG('f','L','a','C')",
          "old_line_content": "    /* check for inline header */",
          "new_line_content": "    if (AV_RB32(buf) == MKBETAG('f','L','a','C')) {",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"illegal pred order %d\\n\", pred_order)",
          "old_line_content": "    default:",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"illegal pred order %d\\n\", pred_order);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "decode_subframe_lpc",
          "old_text": null,
          "new_text": "decode_subframe_lpc(s, channel, (type & ~0x20)+1, bps)",
          "old_line_content": "    } else if (type >= 32) {",
          "new_line_content": "        if (decode_subframe_lpc(s, channel, (type & ~0x20)+1, bps) < 0)",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coding type\\n\")",
          "old_line_content": "    } else {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid coding type\\n\");",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "get_metadata_size",
          "old_text": null,
          "new_text": "get_metadata_size(buf, buf_size)",
          "old_line_content": "        }",
          "new_line_content": "        return get_metadata_size(buf, buf_size);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "avpriv_flac_parse_block_header",
          "old_text": null,
          "new_text": "avpriv_flac_parse_block_header(&buf[4], NULL, &metadata_type, &metadata_size)",
          "old_line_content": "    }",
          "new_line_content": "    avpriv_flac_parse_block_header(&buf[4], NULL, &metadata_type, &metadata_size);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, buf, buf_size*8)",
          "old_line_content": "    /* decode frame */",
          "new_line_content": "    init_get_bits(&s->gb, buf, buf_size*8);",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "avpriv_flac_parse_streaminfo",
          "old_text": null,
          "new_text": "avpriv_flac_parse_streaminfo(s->avctx, (FLACStreaminfo *)s, &buf[8])",
          "old_line_content": "    }",
          "new_line_content": "    avpriv_flac_parse_streaminfo(s->avctx, (FLACStreaminfo *)s, &buf[8]);",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "    }",
          "new_line_content": "    bytes_read = (get_bits_count(&s->gb)+7)/8;",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "get_buffer",
          "old_text": null,
          "new_text": "avctx->get_buffer(avctx, &s->frame)",
          "old_line_content": "    s->frame.nb_samples = s->blocksize;",
          "new_line_content": "    if ((ret = avctx->get_buffer(avctx, &s->frame)) < 0) {",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "get_sbits_long",
          "old_text": null,
          "new_text": "get_sbits_long(&s->gb, bps)",
          "old_line_content": "    for (i = 0; i < pred_order; i++) {",
          "new_line_content": "        decoded[i] = get_sbits_long(&s->gb, bps);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "",
          "new_line_content": "    coeff_prec = get_bits(&s->gb, 4) + 1;",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "ff_flac_decode_frame_header",
          "old_text": null,
          "new_text": "ff_flac_decode_frame_header(s->avctx, gb, &fi, 0)",
          "old_line_content": "",
          "new_line_content": "    if (ff_flac_decode_frame_header(s->avctx, gb, &fi, 0)) {",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coeff precision\\n\")",
          "old_line_content": "    if (coeff_prec == 16) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid coeff precision\\n\");",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "get_sbits",
          "old_text": null,
          "new_text": "get_sbits(&s->gb, 5)",
          "old_line_content": "    }",
          "new_line_content": "    qlevel = get_sbits(&s->gb, 5);",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"qlevel %d not supported, maybe buggy stream\\n\",\n               qlevel)",
          "old_line_content": "    if (qlevel < 0) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"qlevel %d not supported, maybe buggy stream\\n\",",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"switching channel layout mid-stream \"\n                                       \"is not supported\\n\")",
          "old_line_content": "    if (s->channels && fi.channels != s->channels) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"switching channel layout mid-stream \"",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "avpriv_flac_parse_block_header",
          "old_text": null,
          "new_text": "avpriv_flac_parse_block_header(buf, &metadata_last, NULL, &metadata_size)",
          "old_line_content": "            return 0;",
          "new_line_content": "        avpriv_flac_parse_block_header(buf, &metadata_last, NULL, &metadata_size);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "get_sbits",
          "old_text": null,
          "new_text": "get_sbits(&s->gb, coeff_prec)",
          "old_line_content": "    for (i = 0; i < pred_order; i++) {",
          "new_line_content": "        coeffs[i] = get_sbits(&s->gb, coeff_prec);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"bps not found in STREAMINFO or frame header\\n\")",
          "old_line_content": "    if (!s->bps && !fi.bps) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"bps not found in STREAMINFO or frame header\\n\");",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "decode_residuals",
          "old_text": null,
          "new_text": "decode_residuals(s, channel, pred_order)",
          "old_line_content": "",
          "new_line_content": "    if (decode_residuals(s, channel, pred_order) < 0)",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"switching bps mid-stream is not \"\n                                       \"supported\\n\")",
          "old_line_content": "    } else if (s->bps && fi.bps != s->bps) {",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"switching bps mid-stream is not \"",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 262,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 2)",
          "new_text": null,
          "old_line_content": "    method_type = get_bits(&s->gb, 2);",
          "new_line_content": "    if (method_type > 1) {",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "DECORRELATE",
          "new_api": null,
          "old_text": "DECORRELATE(a,a-b)",
          "new_text": null,
          "old_line_content": "        DECORRELATE(a,a-b)",
          "new_line_content": "    case FLAC_CHMODE_RIGHT_SIDE:",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"illegal residual coding method %d\\n\",\n               method_type)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"illegal residual coding method %d\\n\",",
          "new_line_content": "               method_type);",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "DECORRELATE",
          "new_api": null,
          "old_text": "DECORRELATE(a+b,b)",
          "new_text": null,
          "old_line_content": "        DECORRELATE(a+b,b)",
          "new_line_content": "    case FLAC_CHMODE_MID_SIDE:",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "DECORRELATE",
          "new_api": null,
          "old_text": "DECORRELATE( (a-=b>>1) + b, a)",
          "new_text": null,
          "old_line_content": "        DECORRELATE( (a-=b>>1) + b, a)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "    rice_order = get_bits(&s->gb, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"overread: %d\\n\", bytes_read - buf_size)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"overread: %d\\n\", bytes_read - buf_size);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"blocksize %d > %d\\n\", fi.blocksize,\n               s->max_blocksize)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"blocksize %d > %d\\n\", fi.blocksize,",
          "new_line_content": "               s->max_blocksize);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid predictor order: %i > %i\\n\",\n               pred_order, samples)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid predictor order: %i > %i\\n\",",
          "new_line_content": "               pred_order, samples);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_DEBUG, \"underread: %d orig size: %d\\n\",\n               buf_size - bytes_read, buf_size)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"underread: %d orig size: %d\\n\",",
          "new_line_content": "               buf_size - bytes_read, buf_size);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"sample rate not found in STREAMINFO\"\n                                        \" or frame header\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"sample rate not found in STREAMINFO\"",
          "new_line_content": "                                        \" or frame header\\n\");",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, method_type == 0 ? 4 : 5)",
          "new_text": null,
          "old_line_content": "        tmp = get_bits(&s->gb, method_type == 0 ? 4 : 5);",
          "new_line_content": "        if (tmp == (method_type == 0 ? 15 : 31)) {",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 5)",
          "new_text": null,
          "old_line_content": "            tmp = get_bits(&s->gb, 5);",
          "new_line_content": "            for (; i < samples; i++, sample++)",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "get_sbits_long",
          "new_api": null,
          "old_text": "get_sbits_long(&s->gb, tmp)",
          "new_text": null,
          "old_line_content": "                s->decoded[channel][sample] = get_sbits_long(&s->gb, tmp);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_WARNING, \"sample rate changed from %d to %d\\n\",\n               s->samplerate, fi.samplerate)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_WARNING, \"sample rate changed from %d to %d\\n\",",
          "new_line_content": "               s->samplerate, fi.samplerate);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "get_sr_golomb_flac",
          "new_api": null,
          "old_text": "get_sr_golomb_flac(&s->gb, tmp, INT_MAX, 0)",
          "new_text": null,
          "old_line_content": "                s->decoded[channel][sample] = get_sr_golomb_flac(&s->gb, tmp, INT_MAX, 0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&gb, buffer, FLAC_STREAMINFO_SIZE*8)",
          "new_text": null,
          "old_line_content": "    init_get_bits(&gb, buffer, FLAC_STREAMINFO_SIZE*8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&gb, 16)",
          "new_text": null,
          "old_line_content": "    s->max_blocksize = get_bits(&gb, 16);",
          "new_line_content": "    if (s->max_blocksize < FLAC_MIN_BLOCKSIZE) {",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "allocate_buffers",
          "new_api": null,
          "old_text": "allocate_buffers(s)",
          "new_text": null,
          "old_line_content": "        allocate_buffers(s);",
          "new_line_content": "        s->got_streaminfo = 1;",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->decoded[i])",
          "new_text": null,
          "old_line_content": "        av_freep(&s->decoded[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "dump_headers",
          "new_api": null,
          "old_text": "dump_headers(s->avctx, (FLACStreaminfo *)s)",
          "new_text": null,
          "old_line_content": "        dump_headers(s->avctx, (FLACStreaminfo *)s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_WARNING, \"invalid max blocksize: %d\\n\",\n               s->max_blocksize)",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_WARNING, \"invalid max blocksize: %d\\n\",",
          "new_line_content": "               s->max_blocksize);",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "get_bits_long",
          "new_api": null,
          "old_text": "get_bits_long(&gb, 24)",
          "new_text": null,
          "old_line_content": "    s->max_framesize = get_bits_long(&gb, 24);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "decode_subframe",
          "new_api": null,
          "old_text": "decode_subframe(s, i)",
          "new_text": null,
          "old_line_content": "        if (decode_subframe(s, i) < 0)",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid subframe padding\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid subframe padding\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&gb, 5)",
          "new_text": null,
          "old_line_content": "    s->bps = get_bits(&gb, 5) + 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "align_get_bits",
          "new_api": null,
          "old_text": "align_get_bits(gb)",
          "new_text": null,
          "old_line_content": "    align_get_bits(gb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"FLAC (Free Lossless Audio Codec)\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"FLAC (Free Lossless Audio Codec)\"),",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "get_sbits_long",
          "new_api": null,
          "old_text": "get_sbits_long(&s->gb, bps)",
          "new_text": null,
          "old_line_content": "        decoded[i] = get_sbits_long(&s->gb, bps);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(gb, 16)",
          "new_text": null,
          "old_line_content": "    skip_bits(gb, 16); /* data crc */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "decode_residuals",
          "new_api": null,
          "old_text": "decode_residuals(s, channel, pred_order)",
          "new_text": null,
          "old_line_content": "    if (decode_residuals(s, channel, pred_order) < 0)",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&gb, 4)",
          "new_text": null,
          "old_line_content": "    s->samples |= get_bits(&gb, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 6)",
          "new_text": null,
          "old_line_content": "    type = get_bits(&s->gb, 6);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": "get_bits_left",
          "new_api": null,
          "old_text": "get_bits_left(&s->gb)",
          "new_text": null,
          "old_line_content": "        int left = get_bits_left(&s->gb);",
          "new_line_content": "        wasted = 1;",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, 64)",
          "new_text": null,
          "old_line_content": "    skip_bits_long(&gb, 64); /* md5 sum */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR,\n                   \"Invalid number of wasted bits > available bits (%d) - left=%d\\n\",\n                   bps, left)",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR,",
          "new_line_content": "                   \"Invalid number of wasted bits > available bits (%d) - left=%d\\n\",",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": "dump_headers",
          "new_api": null,
          "old_text": "dump_headers(avctx, s)",
          "new_text": null,
          "old_line_content": "    dump_headers(avctx, s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&s->gb)",
          "new_text": null,
          "old_line_content": "        while (!get_bits1(&s->gb))",
          "new_line_content": "            wasted++;",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "bytestream_get_byte",
          "new_api": null,
          "old_text": "bytestream_get_byte(&block_header)",
          "new_text": null,
          "old_line_content": "    int tmp = bytestream_get_byte(&block_header);",
          "new_line_content": "    if (last)",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "av_log_missing_feature",
          "new_api": null,
          "old_text": "av_log_missing_feature(s->avctx, \"decorrelated bit depth > 32\", 0)",
          "new_text": null,
          "old_line_content": "        av_log_missing_feature(s->avctx, \"decorrelated bit depth > 32\", 0);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "bytestream_get_be24",
          "new_api": null,
          "old_text": "bytestream_get_be24(&block_header)",
          "new_text": null,
          "old_line_content": "        *size = bytestream_get_be24(&block_header);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "ff_flac_get_max_frame_size",
          "new_api": null,
          "old_text": "ff_flac_get_max_frame_size(s->max_blocksize ? s->max_blocksize : FLAC_MAX_BLOCKSIZE,\n                                       FLAC_MAX_CHANNELS, 32)",
          "new_text": null,
          "old_line_content": "            ff_flac_get_max_frame_size(s->max_blocksize ? s->max_blocksize : FLAC_MAX_BLOCKSIZE,",
          "new_line_content": "                                       FLAC_MAX_CHANNELS, 32);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "get_sbits_long",
          "new_api": null,
          "old_text": "get_sbits_long(&s->gb, bps)",
          "new_text": null,
          "old_line_content": "        tmp = get_sbits_long(&s->gb, bps);",
          "new_line_content": "        for (i = 0; i < s->blocksize; i++)",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "get_sbits_long",
          "new_api": null,
          "old_text": "get_sbits_long(&s->gb, bps)",
          "new_text": null,
          "old_line_content": "            s->decoded[channel][i] = get_sbits_long(&s->gb, bps);",
          "new_line_content": "    } else if ((type >= 8) && (type <= 12)) {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "decode_subframe_fixed",
          "new_api": null,
          "old_text": "decode_subframe_fixed(s, channel, type & ~0x8, bps)",
          "new_text": null,
          "old_line_content": "        if (decode_subframe_fixed(s, channel, type & ~0x8, bps) < 0)",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "decode_subframe_lpc",
          "new_api": null,
          "old_text": "decode_subframe_lpc(s, channel, (type & ~0x20)+1, bps)",
          "new_text": null,
          "old_line_content": "        if (decode_subframe_lpc(s, channel, (type & ~0x20)+1, bps) < 0)",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"illegal pred order %d\\n\", pred_order)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"illegal pred order %d\\n\", pred_order);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid header\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"invalid header\\n\");",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coding type\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid coding type\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "get_metadata_size",
          "new_api": null,
          "old_text": "get_metadata_size(buf, buf_size)",
          "new_text": null,
          "old_line_content": "        return get_metadata_size(buf, buf_size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "avpriv_flac_parse_block_header",
          "new_api": null,
          "old_text": "avpriv_flac_parse_block_header(&buf[4], NULL, &metadata_type, &metadata_size)",
          "new_text": null,
          "old_line_content": "    avpriv_flac_parse_block_header(&buf[4], NULL, &metadata_type, &metadata_size);",
          "new_line_content": "    if (metadata_type != FLAC_METADATA_TYPE_STREAMINFO ||",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"decode_frame() failed\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"decode_frame() failed\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "allocate_buffers",
          "new_api": null,
          "old_text": "allocate_buffers(s)",
          "new_text": null,
          "old_line_content": "    allocate_buffers(s);",
          "new_line_content": "    s->got_streaminfo = 1;",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(&s->gb)",
          "new_text": null,
          "old_line_content": "    bytes_read = (get_bits_count(&s->gb)+7)/8;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "get_sbits_long",
          "new_api": null,
          "old_text": "get_sbits_long(&s->gb, bps)",
          "new_text": null,
          "old_line_content": "        decoded[i] = get_sbits_long(&s->gb, bps);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "    coeff_prec = get_bits(&s->gb, 4) + 1;",
          "new_line_content": "    if (coeff_prec == 16) {",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coeff precision\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid coeff precision\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid frame header\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"invalid frame header\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "get_sbits",
          "new_api": null,
          "old_text": "get_sbits(&s->gb, 5)",
          "new_text": null,
          "old_line_content": "    qlevel = get_sbits(&s->gb, 5);",
          "new_line_content": "    if (qlevel < 0) {",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"qlevel %d not supported, maybe buggy stream\\n\",\n               qlevel)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"qlevel %d not supported, maybe buggy stream\\n\",",
          "new_line_content": "               qlevel);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"switching channel layout mid-stream \"\n                                       \"is not supported\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"switching channel layout mid-stream \"",
          "new_line_content": "                                       \"is not supported\\n\");",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "avpriv_flac_parse_block_header",
          "new_api": null,
          "old_text": "avpriv_flac_parse_block_header(buf, &metadata_last, NULL, &metadata_size)",
          "new_text": null,
          "old_line_content": "        avpriv_flac_parse_block_header(buf, &metadata_last, NULL, &metadata_size);",
          "new_line_content": "        buf += 4;",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "get_sbits",
          "new_api": null,
          "old_text": "get_sbits(&s->gb, coeff_prec)",
          "new_text": null,
          "old_line_content": "        coeffs[i] = get_sbits(&s->gb, coeff_prec);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"bps not found in STREAMINFO or frame header\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"bps not found in STREAMINFO or frame header\\n\");",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "decode_residuals",
          "new_api": null,
          "old_text": "decode_residuals(s, channel, pred_order)",
          "new_text": null,
          "old_line_content": "    if (decode_residuals(s, channel, pred_order) < 0)",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"switching bps mid-stream is not \"\n                                       \"supported\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"switching bps mid-stream is not \"",
          "new_line_content": "                                       \"supported\\n\");",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 67,
      "total_deletions": 67,
      "total_api_changes": 149
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 149,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          153
        ]
      }
    },
    "api_calls_before": 102,
    "api_calls_after": 102,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
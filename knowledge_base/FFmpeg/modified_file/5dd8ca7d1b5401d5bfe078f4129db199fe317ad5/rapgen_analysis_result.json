{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/5dd8ca7d1b5401d5bfe078f4129db199fe317ad5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/5dd8ca7d1b5401d5bfe078f4129db199fe317ad5/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/5dd8ca7d1b5401d5bfe078f4129db199fe317ad5/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/5dd8ca7d1b5401d5bfe078f4129db199fe317ad5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 347,
          "old_api": "av_crc_get_table",
          "new_api": "AV_RB16",
          "old_text": "av_crc_get_table(AV_CRC_32_IEEE)",
          "new_text": "AV_RB16(tss->section_buf + 1)",
          "old_line_content": "            crc_valid = !av_crc(av_crc_get_table(AV_CRC_32_IEEE), -1, tss->section_buf, tss->section_h_size);",
          "new_line_content": "        len = (AV_RB16(tss->section_buf + 1) & 0xfff) + 3;",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "av_malloc",
          "new_api": "av_mallocz",
          "old_text": "av_malloc(MAX_SECTION_SIZE)",
          "new_text": "av_mallocz(sizeof(MpegTSFilter))",
          "old_line_content": "    sec->section_buf = av_malloc(MAX_SECTION_SIZE);",
          "new_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "av_free",
          "new_api": "av_freep",
          "old_text": "av_free(filter)",
          "new_text": "av_freep(&filter->u.section_filter.section_buf)",
          "old_line_content": "    av_free(filter);",
          "new_line_content": "        av_freep(&filter->u.section_filter.section_buf);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "AVERROR",
          "new_api": "AV_RL32",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "AV_RL32(\"HDMV\")",
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "    if ((prog_reg_desc == AV_RL32(\"HDMV\") ||",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "memcpy",
          "new_api": "AV_RL32",
          "old_text": "memcpy(sub_pes, pes, sizeof(*sub_pes))",
          "new_text": "AV_RL32(\"HDPR\")",
          "old_line_content": "            memcpy(sub_pes, pes, sizeof(*sub_pes));",
          "new_line_content": "         prog_reg_desc == AV_RL32(\"HDPR\")) &&",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "avformat_new_stream",
          "new_api": "mpegts_find_stream_type",
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, HDMV_types)",
          "old_line_content": "            sub_st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "        mpegts_find_stream_type(st, pes->stream_type, HDMV_types);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "av_init_packet",
          "new_api": "mpegts_find_stream_type",
          "old_text": "av_init_packet(pkt)",
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, MISC_types)",
          "old_line_content": "    av_init_packet(pkt);",
          "new_line_content": "        mpegts_find_stream_type(st, pes->stream_type, MISC_types);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "memset",
          "new_api": "av_init_packet",
          "old_text": "memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": "av_init_packet(pkt)",
          "old_line_content": "    memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "    av_init_packet(pkt);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "init_get_bits",
          "new_api": "get_bits64",
          "old_text": "init_get_bits(&gb, buf, buf_size*8)",
          "new_text": "get_bits64(gb, bits)",
          "old_line_content": "    init_get_bits(&gb, buf, buf_size*8);",
          "new_line_content": "    return get_bits64(gb, bits);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "get_bits1",
          "new_api": "init_get_bits",
          "old_text": "get_bits1(&gb)",
          "new_text": "init_get_bits(&gb, buf, buf_size*8)",
          "old_line_content": "        idle_flag = get_bits1(&gb);",
          "new_line_content": "    init_get_bits(&gb, buf, buf_size*8);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "skip_bits",
          "new_api": "get_bits1",
          "old_text": "skip_bits(&gb, sl->degr_prior_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "                skip_bits(&gb, sl->degr_prior_len);",
          "new_line_content": "        idle_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "skip_bits_long",
          "new_api": "get_bits1",
          "old_text": "skip_bits_long(&gb, sl->ocr_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            skip_bits_long(&gb, sl->ocr_len);",
          "new_line_content": "        padding_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "get_ts64",
          "new_api": "get_bits1",
          "old_text": "get_ts64(&gb, sl->timestamp_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            dts = get_ts64(&gb, sl->timestamp_len);",
          "new_line_content": "                get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "get_ts64",
          "new_api": "skip_bits_long",
          "old_text": "get_ts64(&gb, sl->timestamp_len)",
          "new_text": "skip_bits_long(&gb, sl->au_seq_num_len)",
          "old_line_content": "            cts = get_ts64(&gb, sl->timestamp_len);",
          "new_line_content": "                skip_bits_long(&gb, sl->au_seq_num_len);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "skip_bits_long",
          "new_api": "get_bits1",
          "old_text": "skip_bits_long(&gb, sl->au_len)",
          "new_text": "get_bits1(&gb)",
          "old_line_content": "            skip_bits_long(&gb, sl->au_len);",
          "new_line_content": "                dts_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "avpriv_set_pts_info",
          "new_api": "skip_bits_long",
          "old_text": "avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res)",
          "new_text": "skip_bits_long(&gb, sl->au_len)",
          "old_line_content": "        avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res);",
          "new_line_content": "            skip_bits_long(&gb, sl->au_len);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "get_bits_count",
          "new_api": "skip_bits_long",
          "old_text": "get_bits_count(&gb)",
          "new_text": "skip_bits_long(&gb, sl->inst_bitrate_len)",
          "old_line_content": "    return (get_bits_count(&gb) + 7) >> 3;",
          "new_line_content": "            skip_bits_long(&gb, sl->inst_bitrate_len);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "av_dlog",
          "new_api": "memcpy",
          "old_text": "av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code)",
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "                    av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code);",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "AVERROR",
          "new_api": "av_dlog",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code)",
          "old_line_content": "                            return AVERROR(ENOMEM);",
          "new_line_content": "                    av_dlog(pes->stream, \"pid=%x pes_code=%#x\\n\", pes->pid, code);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "av_dlog",
          "new_api": "av_buffer_alloc",
          "old_text": "av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",\n                                    pes->pid, pes->stream_type)",
          "new_text": "av_buffer_alloc(pes->total_size +\n                                                  FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "                            av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",",
          "new_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size +",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "memcpy",
          "new_api": "new_pes_packet",
          "old_text": "memcpy(pes->buffer->data + pes->data_index, p, buf_size)",
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "                memcpy(pes->buffer->data + pes->data_index, p, buf_size);",
          "new_line_content": "                    new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "mpegts_open_pes_filter",
          "new_api": "av_mallocz",
          "old_text": "mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes)",
          "new_text": "av_mallocz(sizeof(PESContext))",
          "old_line_content": "    tss = mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes);",
          "new_line_content": "    pes = av_mallocz(sizeof(PESContext));",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "parse_mp4_descr",
          "new_api": "avio_tell",
          "old_text": "parse_mp4_descr(d, off, len, 0)",
          "new_text": "avio_tell(pb)",
          "old_line_content": "        if (parse_mp4_descr(d, off, len, 0) < 0)",
          "new_line_content": "    int64_t new_off = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "avio_r8",
          "new_api": "parse_mp4_descr",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "parse_mp4_descr(d, off, len, 0)",
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "        if (parse_mp4_descr(d, off, len, 0) < 0)",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "avio_r8",
          "new_api": "update_offsets",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "        update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "avio_rb16",
          "new_api": "avio_r8",
          "old_text": "avio_rb16(&d->pb)",
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    id_flags = avio_rb16(&d->pb);",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "ff_mp4_parse_es_descr",
          "new_api": "parse_mp4_descr_arr",
          "old_text": "ff_mp4_parse_es_descr(&d->pb, &es_id)",
          "new_text": "parse_mp4_descr_arr(d, off, len)",
          "old_line_content": "    ff_mp4_parse_es_descr(&d->pb, &es_id);",
          "new_line_content": "        return parse_mp4_descr_arr(d, off, len); //ES_Descriptor[]",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "avio_r8",
          "new_api": "avio_read",
          "old_text": "avio_r8(&d->pb)",
          "new_text": "avio_read(&d->pb, descr->dec_config_descr, len)",
          "old_line_content": "    predefined = avio_r8(&d->pb);",
          "new_line_content": "    avio_read(&d->pb, descr->dec_config_descr, len);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "avio_rb32",
          "new_api": "avio_r8",
          "old_text": "avio_rb32(&d->pb)",
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "                                       avio_rb32(&d->pb);",
          "new_line_content": "    predefined = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "avpriv_report_missing_feature",
          "new_api": "avio_rb32",
          "old_text": "avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\")",
          "new_text": "avio_rb32(&d->pb)",
          "old_line_content": "        avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\");",
          "new_line_content": "        descr->sl.timestamp_res      = avio_rb32(&d->pb);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "av_log",
          "new_api": "avpriv_report_missing_feature",
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len)",
          "new_text": "avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\")",
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len);",
          "new_line_content": "        avpriv_report_missing_feature(d->s, \"Predefined SLConfigDescriptor\");",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "parse_MP4IODescrTag",
          "new_api": "av_log",
          "old_text": "parse_MP4IODescrTag(d, off, len1)",
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\")",
          "old_line_content": "        parse_MP4IODescrTag(d, off, len1);",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\");",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "avio_tell",
          "new_api": "avio_seek",
          "old_text": "avio_tell(&d.pb)",
          "new_text": "avio_seek(&d->pb, off + len1, SEEK_SET)",
          "old_line_content": "    parse_mp4_descr(&d, avio_tell(&d.pb), size, MP4IODescrTag);",
          "new_line_content": "    avio_seek(&d->pb, off + len1, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "av_log",
          "new_api": "mp4_read_od",
          "old_text": "av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid)",
          "new_text": "mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "old_line_content": "                av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid);",
          "new_line_content": "    mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "ffio_init_context",
          "new_api": "av_log",
          "old_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                              mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid)",
          "old_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "new_line_content": "                av_log(s, AV_LOG_ERROR, \"pid %x is not PES\\n\", pid);",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "mpegts_find_stream_type",
          "new_api": "get8",
          "old_text": "mpegts_find_stream_type(st, desc_tag, DESC_types)",
          "new_text": "get8(pp, desc_list_end)",
          "old_line_content": "        mpegts_find_stream_type(st, desc_tag, DESC_types);",
          "new_line_content": "    desc_len = get8(pp, desc_list_end);",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "ffio_init_context",
          "new_api": "mpegts_find_stream_type",
          "old_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                          mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": "mpegts_find_stream_type(st, desc_tag, DESC_types)",
          "old_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "new_line_content": "        mpegts_find_stream_type(st, desc_tag, DESC_types);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "get16",
          "new_api": "ffio_init_context",
          "old_text": "get16(pp, desc_end)",
          "new_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                          mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "        get16(pp, desc_end);",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "get8",
          "new_api": "ffio_init_context",
          "old_text": "get8(pp, desc_end)",
          "new_text": "ffio_init_context(&pb, mp4_descr->dec_config_descr,\n                          mp4_descr->dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "        language[0] = get8(pp, desc_end);",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr->dec_config_descr,",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "get8",
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": "get8(pp, desc_end)",
          "new_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "old_line_content": "        language[2] = get8(pp, desc_end);",
          "new_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "memcmp",
          "new_api": "get8",
          "old_text": "memcmp(st->codec->extradata, *pp, 4)",
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            if (st->codec->extradata_size == 4 && memcmp(st->codec->extradata, *pp, 4))",
          "new_line_content": "        switch(get8(pp, desc_end)) {",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "get8",
          "new_api": "av_malloc",
          "old_text": "get8(pp, desc_end)",
          "new_text": "av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "            language[i + 0] = get8(pp, desc_end);",
          "new_line_content": "            st->codec->extradata = av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "av_dict_set",
          "new_api": "get8",
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "            language[i + 1] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "add_pid_to_pmt",
          "new_api": "av_dlog",
          "old_text": "add_pid_to_pmt(ts, h->id, pcr_pid)",
          "new_text": "av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",\n           h->id, h->sec_num, h->last_sec_num)",
          "old_line_content": "    add_pid_to_pmt(ts, h->id, pcr_pid);",
          "new_line_content": "    av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "get8",
          "new_api": "add_pid_to_pmt",
          "old_text": "get8(&p, p_end)",
          "new_text": "add_pid_to_pmt(ts, h->id, pcr_pid)",
          "old_line_content": "        tag = get8(&p, p_end);",
          "new_line_content": "    add_pid_to_pmt(ts, h->id, pcr_pid);",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "get8",
          "new_api": "set_pcr_pid",
          "old_text": "get8(&p, p_end)",
          "new_text": "set_pcr_pid(ts->stream, h->id, pcr_pid)",
          "old_line_content": "        len = get8(&p, p_end);",
          "new_line_content": "    set_pcr_pid(ts->stream, h->id, pcr_pid);",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "avformat_new_stream",
          "new_api": "get16",
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": "get16(&p, p_end)",
          "old_line_content": "                pes->st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "        pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "av_dlog",
          "new_api": "av_free",
          "old_text": "av_dlog(ts->stream, \"PAT:\\n\")",
          "new_text": "av_free(mp4_descr[i].dec_config_descr)",
          "old_line_content": "    av_dlog(ts->stream, \"PAT:\\n\");",
          "new_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "clear_programs",
          "new_api": "hex_dump_debug",
          "old_text": "clear_programs(ts)",
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "    clear_programs(ts);",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "av_dlog",
          "new_api": "get16",
          "old_text": "av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid)",
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid);",
          "new_line_content": "        sid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "add_pat_entry",
          "new_api": "av_new_program",
          "old_text": "add_pat_entry(ts, sid)",
          "new_text": "av_new_program(ts->stream, sid)",
          "old_line_content": "            add_pat_entry(ts, sid);",
          "new_line_content": "            program = av_new_program(ts->stream, sid);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "clear_avprogram",
          "new_api": "add_pid_to_pmt",
          "old_text": "clear_avprogram(ts, ts->stream->programs[j]->id)",
          "new_text": "add_pid_to_pmt(ts, sid, pmt_pid)",
          "old_line_content": "                clear_avprogram(ts, ts->stream->programs[j]->id);",
          "new_line_content": "            add_pid_to_pmt(ts, sid, pmt_pid);",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "get8",
          "new_api": "hex_dump_debug",
          "old_text": "get8(&p, p_end)",
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "    val = get8(&p, p_end);",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": "get16",
          "new_api": "parse_section_header",
          "old_text": "get16(&p, p_end)",
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "        sid = get16(&p, p_end);",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "get8",
          "new_api": "get16",
          "old_text": "get8(&p, desc_list_end)",
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            desc_len = get8(&p, desc_list_end);",
          "new_line_content": "        desc_list_len = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "getstr8",
          "new_api": "av_dlog",
          "old_text": "getstr8(&p, p_end)",
          "new_text": "av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",\n                   desc_tag, desc_len)",
          "old_line_content": "                name = getstr8(&p, p_end);",
          "new_line_content": "            av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "av_dict_set",
          "new_api": "get8",
          "old_text": "av_dict_set(&program->metadata, \"service_provider\", provider_name, 0)",
          "new_text": "get8(&p, p_end)",
          "old_line_content": "                        av_dict_set(&program->metadata, \"service_provider\", provider_name, 0);",
          "new_line_content": "                service_type = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "av_free",
          "new_api": "getstr8",
          "old_text": "av_free(name)",
          "new_text": "getstr8(&p, p_end)",
          "old_line_content": "                av_free(name);",
          "new_line_content": "                provider_name = getstr8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "write_section_data",
          "new_api": "avio_tell",
          "old_text": "write_section_data(s, tss,\n                                   p, len, 0)",
          "new_text": "avio_tell(ts->stream->pb)",
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "    pos = avio_tell(ts->stream->pb);",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "read_packet",
          "new_api": "memset",
          "old_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "new_text": "memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "        ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "new_line_content": "    memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "av_dlog",
          "new_api": "analyze",
          "old_text": "av_dlog(0, \"TS score: %d %d\\n\", sumscore, maxscore)",
          "new_text": "analyze(p->buf + TS_PACKET_SIZE     *i, TS_PACKET_SIZE     *left, TS_PACKET_SIZE     , NULL)",
          "old_line_content": "    av_dlog(0, \"TS score: %d %d\\n\", sumscore, maxscore);",
          "new_line_content": "        int score     = analyze(p->buf + TS_PACKET_SIZE     *i, TS_PACKET_SIZE     *left, TS_PACKET_SIZE     , NULL);",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": "avio_seek",
          "new_api": "AV_RB32",
          "old_text": "avio_seek(pb, pos, SEEK_SET)",
          "new_text": "AV_RB32(p)",
          "old_line_content": "    if (avio_seek(pb, pos, SEEK_SET) < 0)",
          "new_line_content": "    v = AV_RB32(p);",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": "ffio_ensure_seekback",
          "new_api": "av_log",
          "old_text": "ffio_ensure_seekback(pb, s->probesize)",
          "new_text": "av_log(s, pb->seekable ? AV_LOG_ERROR : AV_LOG_INFO, \"Unable to seek back to the start\\n\")",
          "old_line_content": "    ffio_ensure_seekback(pb, s->probesize);",
          "new_line_content": "        av_log(s, pb->seekable ? AV_LOG_ERROR : AV_LOG_INFO, \"Unable to seek back to the start\\n\");",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "av_dlog",
          "new_api": "seek_back",
          "old_text": "av_dlog(ts->stream, \"tuning done\\n\")",
          "new_text": "seek_back(s, pb, pos)",
          "old_line_content": "        av_dlog(ts->stream, \"tuning done\\n\");",
          "new_line_content": "        seek_back(s, pb, pos);",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "finished_reading_packet",
          "new_api": "AV_RB16",
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": "AV_RB16(data + 1)",
          "old_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "            pid = AV_RB16(data + 1) & 0x1fff;",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "parse_pcr",
          "new_api": "avio_tell",
          "old_text": "parse_pcr(&pcr_h, &pcr_l, pkt->data)",
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, pkt->data) == 0) {",
          "new_line_content": "    pkt->pos= avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": "avio_seek",
          "new_api": "avio_tell",
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "new_line_content": "            pos = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "mpegts_close_filter",
          "new_api": "AVERROR",
          "old_text": "mpegts_close_filter(ts, ts->pids[i])",
          "new_text": "AVERROR(EINTR)",
          "old_line_content": "        if (ts->pids[i]) mpegts_close_filter(ts, ts->pids[i]);",
          "new_line_content": "        ret = AVERROR(EINTR);",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": "parse_pcr",
          "new_api": "avio_seek",
          "old_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "            parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "new_line_content": "        if (avio_seek(s->pb, pos, SEEK_SET) < 0)",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "ff_reduce_index",
          "new_api": "avio_seek",
          "old_text": "ff_reduce_index(s, pkt.stream_index)",
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "            ff_reduce_index(s, pkt.stream_index);",
          "new_line_content": "    if (avio_seek(s->pb, pos, SEEK_SET) < 0)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1540,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "            len -= 2;",
          "new_line_content": "        len = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"program tag: 0x%02x len=%d\\n\", tag, len)",
          "old_line_content": "                          &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "new_line_content": "        av_dlog(ts->stream, \"program tag: 0x%02x len=%d\\n\", tag, len);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "av_buffer_alloc",
          "old_text": null,
          "new_text": "av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "            }",
          "new_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(p)",
          "old_line_content": "    char *str;",
          "new_line_content": "    c = AV_RB16(p);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            /* emit complete packets with known packet size",
          "new_line_content": "                        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    p += program_info_length;",
          "new_line_content": "            get8(&p, p_end); // scope",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    if (p >= p_end)",
          "new_line_content": "            get8(&p, p_end); // label",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->buffer->data + pes->data_index, p, buf_size)",
          "old_line_content": "                ts->stop_parse = 1;",
          "new_line_content": "                memcpy(pes->buffer->data + pes->data_index, p, buf_size);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "mp4_read_iods",
          "old_text": null,
          "new_text": "mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,\n                          &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "old_line_content": "",
          "new_line_content": "            mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "bytestream_get_le32",
          "old_text": null,
          "new_text": "bytestream_get_le32(&p)",
          "old_line_content": "        ts->stop_parse = 2;",
          "new_line_content": "            prog_reg_desc = bytestream_get_le32(&p);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "    *pp = p;",
          "new_line_content": "    len = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "    if (avio_seek(pb, pos, SEEK_SET) < 0)",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len + 1)",
          "old_line_content": "                                const uint8_t **pp, const uint8_t *p_end)",
          "new_line_content": "    str = av_malloc(len + 1);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "",
          "new_line_content": "                new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(str, p, len)",
          "old_line_content": "",
          "new_line_content": "    memcpy(str, p, len);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "        if (ts->pids[pid] && ts->pids[pid]->type == MPEGTS_PES) {",
          "new_line_content": "        stream_type = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "ffio_ensure_seekback",
          "old_text": null,
          "new_text": "ffio_ensure_seekback(pb, s->probesize)",
          "old_line_content": "    ts->auto_guess = 0;",
          "new_line_content": "    ffio_ensure_seekback(pb, s->probesize);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "        /* normal demux */",
          "new_line_content": "    pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, buf, sizeof(buf))",
          "old_line_content": "",
          "new_line_content": "    len = avio_read(pb, buf, sizeof(buf));",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "get_packet_size",
          "old_text": null,
          "new_text": "get_packet_size(buf, len)",
          "old_line_content": "        /* first do a scan to get all the services */",
          "new_line_content": "    ts->raw_packet_size = get_packet_size(buf, len);",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "        return -1;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING, \"Could not detect TS packet size, defaulting to non-FEC/DVHS\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(s, AV_LOG_WARNING, \"Could not detect TS packet size, defaulting to non-FEC/DVHS\\n\");",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, p_end)",
          "old_line_content": "    h->sec_num = val;",
          "new_line_content": "    val = get16(pp, p_end);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "                if (!st)",
          "new_line_content": "                pes->st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "    h->last_sec_num = val;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "typedef struct {",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "mpegts_close_filter",
          "old_text": null,
          "new_text": "mpegts_close_filter(ts, ts->pids[pid])",
          "old_line_content": "                st = ts->stream->streams[idx];",
          "new_line_content": "            if (ts->pids[pid]) mpegts_close_filter(ts, ts->pids[pid]); //wrongly added sdt filter probably",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "old_line_content": "        s->ctx_flags |= AVFMTCTX_NOHEADER;",
          "new_line_content": "        mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "mpegts_open_pes_filter",
          "old_text": null,
          "new_text": "mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes)",
          "old_line_content": "    AVIOContext pb;",
          "new_line_content": "    tss = mpegts_open_pes_filter(ts, pid, mpegts_push_data, pes);",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "old_line_content": "        AVStream *st;",
          "new_line_content": "        mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, p_end)",
          "old_line_content": "} StreamType;",
          "new_line_content": "    val = get8(pp, p_end);",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": null,
          "new_api": "handle_packets",
          "old_text": null,
          "new_text": "handle_packets(ts, s->probesize / ts->raw_packet_size)",
          "old_line_content": "        int64_t pcrs[2], pcr_h;",
          "new_line_content": "        handle_packets(ts, s->probesize / ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(pes)",
          "old_line_content": "    Mp4Descr *active_descr;",
          "new_line_content": "        av_free(pes);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "add_pes_stream",
          "old_text": null,
          "new_text": "add_pes_stream(ts, pid, pcr_pid)",
          "old_line_content": "            } else {",
          "new_line_content": "            pes = add_pes_stream(ts, pid, pcr_pid);",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "                if (!st)",
          "new_line_content": "                st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "ff_find_stream_index",
          "old_text": null,
          "new_text": "ff_find_stream_index(ts->stream, pid)",
          "old_line_content": "",
          "new_line_content": "            int idx = ff_find_stream_index(ts->stream, pid);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"tuning done\\n\")",
          "old_line_content": "        /* only read packets */",
          "new_line_content": "        av_dlog(ts->stream, \"tuning done\\n\");",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(ts->stream, NULL)",
          "old_line_content": "        if (pes && !pes->stream_type)",
          "new_line_content": "                st = avformat_new_stream(ts->stream, NULL);",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(s, NULL)",
          "old_line_content": "        for(;;) {",
          "new_line_content": "        st = avformat_new_stream(s, NULL);",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": null,
          "new_api": "mpegts_set_stream_info",
          "old_text": null,
          "new_text": "mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc)",
          "old_line_content": "        if (desc_list_end > p_end)",
          "new_line_content": "            mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc);",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 60, 1, 27000000)",
          "old_line_content": "                goto fail;",
          "new_line_content": "        avpriv_set_pts_info(st, 60, 1, 27000000);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "add_pid_to_pmt",
          "old_text": null,
          "new_text": "add_pid_to_pmt(ts, h->id, pid)",
          "old_line_content": "        for(;;) {",
          "new_line_content": "        add_pid_to_pmt(ts, h->id, pid);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "ffio_init_context",
          "old_text": null,
          "new_text": "ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,\n                          NULL, NULL, NULL, NULL)",
          "old_line_content": "    return 0;",
          "new_line_content": "    if ((ret = ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "ff_program_add_stream_index",
          "old_text": null,
          "new_text": "ff_program_add_stream_index(ts->stream, h->id, st->index)",
          "old_line_content": "                mp4_descr, mp4_descr_count, pid, ts) < 0)",
          "new_line_content": "        ff_program_add_stream_index(ts->stream, h->id, st->index);",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "",
          "new_line_content": "        desc_list_len = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "old_line_content": "                if (nb_pcrs >= 2)",
          "new_line_content": "            ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "ff_parse_mpeg2_descriptor",
          "old_text": null,
          "new_text": "ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,\n                mp4_descr, mp4_descr_count, pid, ts)",
          "old_line_content": "",
          "new_line_content": "            if (ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&pcr_h, &pcr_l, data)",
          "old_line_content": "            nb_packets++;",
          "new_line_content": "                parse_pcr(&pcr_h, &pcr_l, data) == 0) {",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "        }",
          "new_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "AV_RL32",
          "old_text": null,
          "new_text": "AV_RL32(\"HDMV\")",
          "old_line_content": "}",
          "new_line_content": "            if (pes && prog_reg_desc == AV_RL32(\"HDMV\") && stream_type == 0x83 && pes->sub_st) {",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "ff_program_add_stream_index",
          "old_text": null,
          "new_text": "ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index)",
          "old_line_content": "",
          "new_line_content": "                ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index);",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "        st->start_time = ts->cur_pcr;",
          "new_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('d','r','a','c')",
          "old_line_content": "/* descriptor present */",
          "new_line_content": "    { MKTAG('d','r','a','c'), AVMEDIA_TYPE_VIDEO, AV_CODEC_ID_DIRAC },",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('A','C','-','3')",
          "old_line_content": "static const StreamType DESC_types[] = {",
          "new_line_content": "    { MKTAG('A','C','-','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('B','S','S','D')",
          "old_line_content": "    { 0x6a, AVMEDIA_TYPE_AUDIO,             AV_CODEC_ID_AC3 }, /* AC-3 descriptor */",
          "new_line_content": "    { MKTAG('B','S','S','D'), AVMEDIA_TYPE_AUDIO, AV_CODEC_ID_S302M },",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','1')",
          "old_line_content": "    { 0x7a, AVMEDIA_TYPE_AUDIO,            AV_CODEC_ID_EAC3 }, /* E-AC-3 descriptor */",
          "new_line_content": "    { MKTAG('D','T','S','1'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",\n                st->start_time / 1000000.0, pcrs[0] / 27e6, ts->pcr_incr)",
          "old_line_content": "",
          "new_line_content": "        av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','2')",
          "old_line_content": "    { 0x7b, AVMEDIA_TYPE_AUDIO,             AV_CODEC_ID_DTS },",
          "new_line_content": "    { MKTAG('D','T','S','2'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('D','T','S','3')",
          "old_line_content": "    { 0x56, AVMEDIA_TYPE_SUBTITLE, AV_CODEC_ID_DVB_TELETEXT },",
          "new_line_content": "    { MKTAG('D','T','S','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('K','L','V','A')",
          "old_line_content": "    { 0x59, AVMEDIA_TYPE_SUBTITLE, AV_CODEC_ID_DVB_SUBTITLE }, /* subtitling descriptor */",
          "new_line_content": "    { MKTAG('K','L','V','A'), AVMEDIA_TYPE_DATA,    AV_CODEC_ID_SMPTE_KLV },",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "seek_back",
          "old_text": null,
          "new_text": "seek_back(s, pb, pos)",
          "old_line_content": "    MpegTSContext *ts = s->priv_data;",
          "new_line_content": "    seek_back(s, pb, pos);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('V','C','-','1')",
          "old_line_content": "    { 0 },",
          "new_line_content": "    { MKTAG('V','C','-','1'), AVMEDIA_TYPE_VIDEO,   AV_CODEC_ID_VC1 },",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "{",
          "new_line_content": "    avio_rb16(&d->pb); // ID",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    int id_flags;",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    if (len < 2)",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "        return 0;",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    if (!(id_flags & 0x0020)) { //URL_Flag",
          "new_line_content": "    avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"PAT:\\n\")",
          "old_line_content": "",
          "new_line_content": "    av_dlog(ts->stream, \"PAT:\\n\");",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "            break;",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "clear_programs",
          "old_text": null,
          "new_text": "clear_programs(ts)",
          "old_line_content": "            break;",
          "new_line_content": "    clear_programs(ts);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "    int es_id = 0;",
          "new_line_content": "    id_flags = avio_rb16(&d->pb);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "        return -1;",
          "new_line_content": "        update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open(st->codec)",
          "old_line_content": "        }",
          "new_line_content": "    if (avcodec_is_open(st->codec)) {",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\");",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "av_new_packet",
          "old_text": null,
          "new_text": "av_new_packet(pkt, TS_PACKET_SIZE)",
          "old_line_content": "    if (ts->mpeg2ts_compute_pcr) {",
          "new_line_content": "    if (av_new_packet(pkt, TS_PACKET_SIZE) < 0)",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        /* compute exact PCR for each packet */",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "            /* NIT info */",
          "new_line_content": "        pmt_pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, pkt->data, ts->raw_packet_size, &data)",
          "old_line_content": "            /* we read the next PCR (XXX: optimize it by using a bigger buffer */",
          "new_line_content": "    ret = read_packet(s, pkt->data, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "av_free_packet",
          "old_text": null,
          "new_text": "av_free_packet(pkt)",
          "old_line_content": "            for(i = 0; i < MAX_PACKET_READAHEAD; i++) {",
          "new_line_content": "        av_free_packet(pkt);",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid)",
          "old_line_content": "                    || fil->pid != pmt_pid",
          "new_line_content": "        av_dlog(ts->stream, \"sid=0x%x pid=0x%x\\n\", sid, pmt_pid);",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pkt->data, data, ts->raw_packet_size)",
          "old_line_content": "                    /* XXX: not precise enough */",
          "new_line_content": "        memcpy(pkt->data, data, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "                    ts->pcr_incr = ((next_pcr_h - pcr_h) * 300 + (next_pcr_l - pcr_l)) /",
          "new_line_content": "    finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "ff_mp4_parse_es_descr",
          "old_text": null,
          "new_text": "ff_mp4_parse_es_descr(&d->pb, &es_id)",
          "old_line_content": "}",
          "new_line_content": "    ff_mp4_parse_es_descr(&d->pb, &es_id);",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&pcr_h, &pcr_l, pkt->data)",
          "old_line_content": "                }",
          "new_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, pkt->data) == 0) {",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    Mp4Descr *descr = d->active_descr;",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "parse_mp4_descr",
          "old_text": null,
          "new_text": "parse_mp4_descr(d, off, len, MP4DecConfigDescrTag)",
          "old_line_content": "    if (!descr)",
          "new_line_content": "    parse_mp4_descr(d, off, len, MP4DecConfigDescrTag);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "        return -1;",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET)",
          "old_line_content": "            ts->cur_pcr = pcr_h * 300 + pcr_l;",
          "new_line_content": "                avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, pcr_buf, 12)",
          "old_line_content": "        }",
          "new_line_content": "                avio_read(s->pb, pcr_buf, 12);",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf)",
          "old_line_content": "        pkt->pts = ts->cur_pcr;",
          "new_line_content": "                if (parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf) == 0) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open(st->codec)",
          "old_line_content": "    pes->stream_type = stream_type;",
          "new_line_content": "    if (avcodec_is_open(st->codec)) {",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(pes->stream, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(pes->stream, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\");",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "parse_mp4_descr",
          "old_text": null,
          "new_text": "parse_mp4_descr(d, off, len, MP4SLDescrTag)",
          "old_line_content": "    if (!descr->dec_config_descr)",
          "new_line_content": "        parse_mp4_descr(d, off, len, MP4SLDescrTag);",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "mpegts_close_filter",
          "old_text": null,
          "new_text": "mpegts_close_filter(ts, ts->pids[pmt_pid])",
          "old_line_content": "        int i,j;",
          "new_line_content": "                    mpegts_close_filter(ts, ts->pids[pmt_pid]);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 33, 1, 90000)",
          "old_line_content": "",
          "new_line_content": "    avpriv_set_pts_info(st, 33, 1, 90000);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1)",
          "old_line_content": "                if (ts->prg[i].id == ts->stream->programs[j]->id)",
          "new_line_content": "                mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "            avio_seek(s->pb, pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len)",
          "old_line_content": "    int predefined;",
          "new_line_content": "    d->active_descr->dec_config_descr = av_malloc(len);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "add_pat_entry",
          "old_text": null,
          "new_text": "add_pat_entry(ts, sid)",
          "old_line_content": "                    break;",
          "new_line_content": "            add_pat_entry(ts, sid);",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        return -1;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "add_pid_to_pmt",
          "old_text": null,
          "new_text": "add_pid_to_pmt(ts, sid, 0)",
          "old_line_content": "            if (i==ts->nb_prg)",
          "new_line_content": "            add_pid_to_pmt(ts, sid, 0); //add pat pid to program",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(pes->stream, AV_LOG_DEBUG,\n           \"stream=%d stream_type=%x pid=%x prog_reg_desc=%.4s\\n\",\n           st->index, pes->stream_type, pes->pid, (char*)&prog_reg_desc)",
          "old_line_content": "        if (pes->stream_type == 0x83) {",
          "new_line_content": "    av_log(pes->stream, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "clear_avprogram",
          "old_text": null,
          "new_text": "clear_avprogram(ts, ts->stream->programs[j]->id)",
          "old_line_content": "    char *name, *provider_name;",
          "new_line_content": "                clear_avprogram(ts, ts->stream->programs[j]->id);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "mpegts_find_stream_type",
          "old_text": null,
          "new_text": "mpegts_find_stream_type(st, pes->stream_type, ISO_types)",
          "old_line_content": "            if (!sub_pes)",
          "new_line_content": "    mpegts_find_stream_type(st, pes->stream_type, ISO_types);",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": null,
          "new_api": "handle_packets",
          "old_text": null,
          "new_text": "handle_packets(ts, 0)",
          "old_line_content": "                    break;",
          "new_line_content": "    ret = handle_packets(ts, 0);",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": null,
          "new_api": "av_free_packet",
          "old_text": null,
          "new_text": "av_free_packet(ts->pkt)",
          "old_line_content": "            }",
          "new_line_content": "        av_free_packet(ts->pkt);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(sizeof(*sub_pes))",
          "old_line_content": "            sub_st->id = pes->pid;",
          "new_line_content": "            PESContext *sub_pes = av_malloc(sizeof(*sub_pes));",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            sub_st->priv_data = sub_pes;",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(sub_pes, pes, sizeof(*sub_pes))",
          "old_line_content": "            sub_st->codec->codec_type = AVMEDIA_TYPE_AUDIO;",
          "new_line_content": "            memcpy(sub_pes, pes, sizeof(*sub_pes));",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"SDT:\\n\")",
          "old_line_content": "        return;",
          "new_line_content": "    av_dlog(ts->stream, \"SDT:\\n\");",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(pes->stream, NULL)",
          "old_line_content": "            sub_st->need_parsing = AVSTREAM_PARSE_FULL;",
          "new_line_content": "            sub_st = avformat_new_stream(pes->stream, NULL);",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, pkt)",
          "old_line_content": "    return ret;",
          "new_line_content": "                    new_pes_packet(pes, pkt);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(sub_pes)",
          "old_line_content": "        }",
          "new_line_content": "                av_free(sub_pes);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    }",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "avio_rb32",
          "old_text": null,
          "new_text": "avio_rb32(&d->pb)",
          "old_line_content": "    }",
          "new_line_content": "                                       avio_rb32(&d->pb);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "    return 0;",
          "new_line_content": "        descr->sl.timestamp_len      = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "}",
          "new_line_content": "        descr->sl.ocr_len            = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(sub_st, 33, 1, 90000)",
          "old_line_content": "        st->codec->codec_id  = old_codec_id;",
          "new_line_content": "            avpriv_set_pts_info(sub_st, 33, 1, 90000);",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "",
          "new_line_content": "        descr->sl.au_len             = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(&d->pb)",
          "old_line_content": "static int parse_mp4_descr(MP4DescrParseContext *d, int64_t off, int len,",
          "new_line_content": "        descr->sl.inst_bitrate_len   = avio_r8(&d->pb);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "avio_rb16",
          "old_text": null,
          "new_text": "avio_rb16(&d->pb)",
          "old_line_content": "                           int target_tag) {",
          "new_line_content": "        lengths                      = avio_rb16(&d->pb);",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if (val < 0)",
          "new_line_content": "    onid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, p_end)",
          "old_line_content": "        if (desc_list_len < 0)",
          "new_line_content": "    val = get8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if (desc_list_end > p_end)",
          "new_line_content": "        sid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "ff_mp4_read_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_descr(d->s, &d->pb, &tag)",
          "old_line_content": "",
          "new_line_content": "    int len1 = ff_mp4_read_descr(d->s, &d->pb, &tag);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "clear_programs",
          "old_text": null,
          "new_text": "clear_programs(ts)",
          "old_line_content": "}",
          "new_line_content": "    clear_programs(ts);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "update_offsets",
          "old_text": null,
          "new_text": "update_offsets(&d->pb, &off, &len)",
          "old_line_content": "    if (target_tag && tag != target_tag) {",
          "new_line_content": "    update_offsets(&d->pb, &off, &len);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len)",
          "old_line_content": "        goto done;",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Tag %x length violation new length %d bytes remaining %d\\n\", tag, len1, len);",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "mpegts_close_filter",
          "old_text": null,
          "new_text": "mpegts_close_filter(ts, ts->pids[i])",
          "old_line_content": "                              int64_t *ppos, int64_t pos_limit)",
          "new_line_content": "        if (ts->pids[i]) mpegts_close_filter(ts, ts->pids[i]);",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, desc_list_end)",
          "old_line_content": "            switch(desc_tag) {",
          "new_line_content": "            desc_tag = get8(&p, desc_list_end);",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": null,
          "new_api": "mpegts_free",
          "old_text": null,
          "new_text": "mpegts_free(ts)",
          "old_line_content": "    pos = ((*ppos  + ts->raw_packet_size - 1 - ts->pos47) / ts->raw_packet_size) * ts->raw_packet_size + ts->pos47;",
          "new_line_content": "    mpegts_free(ts);",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(&p, desc_list_end)",
          "old_line_content": "                if (service_type < 0)",
          "new_line_content": "            desc_len = get8(&p, desc_list_end);",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag)",
          "old_line_content": "    case MP4ESDescrTag:",
          "new_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag);",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\")",
          "old_line_content": "    pkt->dts = pes->dts;",
          "new_line_content": "        av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\");",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "parse_MP4IODescrTag",
          "old_text": null,
          "new_text": "parse_MP4IODescrTag(d, off, len1)",
          "old_line_content": "    case MP4SLDescrTag:",
          "new_line_content": "        parse_MP4IODescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "    pkt->flags = pes->flags;",
          "new_line_content": "    memset(pkt->data+pkt->size, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "parse_MP4ODescrTag",
          "old_text": null,
          "new_text": "parse_MP4ODescrTag(d, off, len1)",
          "old_line_content": "    }",
          "new_line_content": "        parse_MP4ODescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "old_line_content": "            return timestamp;",
          "new_line_content": "        if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "parse_MP4ESDescrTag",
          "old_text": null,
          "new_text": "parse_MP4ESDescrTag(d, off, len1)",
          "old_line_content": "    d->level--;",
          "new_line_content": "        parse_MP4ESDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "getstr8",
          "old_text": null,
          "new_text": "getstr8(&p, p_end)",
          "old_line_content": "            default:",
          "new_line_content": "                name = getstr8(&p, p_end);",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": null,
          "new_api": "mpegts_resync",
          "old_text": null,
          "new_text": "mpegts_resync(s)",
          "old_line_content": "    }",
          "new_line_content": "            if (mpegts_resync(s) < 0)",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "parse_MP4DecConfigDescrTag",
          "old_text": null,
          "new_text": "parse_MP4DecConfigDescrTag(d, off, len1)",
          "old_line_content": "}",
          "new_line_content": "        parse_MP4DecConfigDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "    return AV_NOPTS_VALUE;",
          "new_line_content": "            pos = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "parse_MP4SLDescrTag",
          "old_text": null,
          "new_text": "parse_MP4SLDescrTag(d, off, len1)",
          "old_line_content": "                         Mp4Descr *descr, int *descr_count, int max_descr_count)",
          "new_line_content": "        parse_MP4SLDescrTag(d, off, len1);",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": null,
          "new_api": "av_new_program",
          "old_text": null,
          "new_text": "av_new_program(ts->stream, sid)",
          "old_line_content": "            }",
          "new_line_content": "                    AVProgram *program = av_new_program(ts->stream, sid);",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf + 1)",
          "old_line_content": "static int64_t mpegts_get_dts(AVFormatContext *s, int stream_index,",
          "new_line_content": "        if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&timestamp, &pcr_l, buf)",
          "old_line_content": "                              int64_t *ppos, int64_t pos_limit)",
          "new_line_content": "            parse_pcr(&timestamp, &pcr_l, buf) == 0) {",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&program->metadata, \"service_name\", name, 0)",
          "old_line_content": "        }",
          "new_line_content": "                        av_dict_set(&program->metadata, \"service_name\", name, 0);",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&program->metadata, \"service_provider\", provider_name, 0)",
          "old_line_content": "        p = desc_list_end;",
          "new_line_content": "                        av_dict_set(&program->metadata, \"service_provider\", provider_name, 0);",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(name)",
          "old_line_content": "",
          "new_line_content": "                av_free(name);",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(provider_name)",
          "old_line_content": "static int parse_pcr(int64_t *ppcr_high, int *ppcr_low,",
          "new_line_content": "                av_free(provider_name);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "get_bits_left",
          "old_text": null,
          "new_text": "get_bits_left(gb)",
          "old_line_content": "    int64_t dts = AV_NOPTS_VALUE, cts = AV_NOPTS_VALUE;",
          "new_line_content": "    if (get_bits_left(gb) < bits)",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "init_MP4DescrParseContext",
          "old_text": null,
          "new_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "old_line_content": "{",
          "new_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(&d.pb)",
          "old_line_content": "        return -1;",
          "new_line_content": "    parse_mp4_descr(&d, avio_tell(&d.pb), size, MP4IODescrTag);",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "ff_read_frame_flush",
          "old_text": null,
          "new_text": "ff_read_frame_flush(s)",
          "old_line_content": "        if(pkt.dts != AV_NOPTS_VALUE && pkt.pos >= 0){",
          "new_line_content": "    ff_read_frame_flush(s);",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": null,
          "new_api": "av_init_packet",
          "old_text": null,
          "new_text": "av_init_packet(&pkt)",
          "old_line_content": "            }",
          "new_line_content": "        av_init_packet(&pkt);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "av_read_frame",
          "old_text": null,
          "new_text": "av_read_frame(s, &pkt)",
          "old_line_content": "        }",
          "new_line_content": "        ret= av_read_frame(s, &pkt);",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "init_MP4DescrParseContext",
          "old_text": null,
          "new_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "old_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "new_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "    if (padding_flag)",
          "new_line_content": "        au_start_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": null,
          "new_api": "av_free_packet",
          "old_text": null,
          "new_text": "av_free_packet(&pkt)",
          "old_line_content": "",
          "new_line_content": "        av_free_packet(&pkt);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "",
          "new_line_content": "        au_end_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": null,
          "new_api": "ff_reduce_index",
          "old_text": null,
          "new_text": "ff_reduce_index(s, pkt.stream_index)",
          "old_line_content": "}",
          "new_line_content": "            ff_reduce_index(s, pkt.stream_index);",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": null,
          "new_api": "av_add_index_entry",
          "old_text": null,
          "new_text": "av_add_index_entry(s->streams[pkt.stream_index], pkt.pos, pkt.dts, 0, 0, AVINDEX_KEYFRAME /* FIXME keyframe? */)",
          "old_line_content": "",
          "new_line_content": "            av_add_index_entry(s->streams[pkt.stream_index], pkt.pos, pkt.dts, 0, 0, AVINDEX_KEYFRAME /* FIXME keyframe? */);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(&d.pb)",
          "old_line_content": "    AVIOContext pb;",
          "new_line_content": "    parse_mp4_descr_arr(&d, avio_tell(&d.pb), size);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "        if (sl->degr_prior_len)",
          "new_line_content": "        ocr_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(packet + 1)",
          "old_line_content": "    ts->current_pid = pid;",
          "new_line_content": "    pid = AV_RB16(packet + 1) & 0x1fff;",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "discard_pid",
          "old_text": null,
          "new_text": "discard_pid(ts, pid)",
          "old_line_content": "",
          "new_line_content": "    if(pid && discard_pid(ts, pid))",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "add_pes_stream",
          "old_text": null,
          "new_text": "add_pes_stream(ts, pid, -1)",
          "old_line_content": "    has_payload = afc & 1;",
          "new_line_content": "        add_pes_stream(ts, pid, -1);",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&gb, 3)",
          "old_line_content": "            if (sl->use_rand_acc_pt)",
          "new_line_content": "        padding_bits = get_bits(&gb, 3);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "skip_bits_long",
          "old_text": null,
          "new_text": "skip_bits_long(&gb, sl->packet_seq_num_len)",
          "old_line_content": "            if (sl->use_timestamps) {",
          "new_line_content": "            skip_bits_long(&gb, sl->packet_seq_num_len);",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&gb, sl->degr_prior_len)",
          "old_line_content": "            }",
          "new_line_content": "                skip_bits(&gb, sl->degr_prior_len);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "skip_bits_long",
          "old_text": null,
          "new_text": "skip_bits_long(&gb, sl->ocr_len)",
          "old_line_content": "        if (sl->inst_bitrate_len)",
          "new_line_content": "            skip_bits_long(&gb, sl->ocr_len);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(&h, &p, p_end)",
          "old_line_content": "            PESContext *pes;",
          "new_line_content": "    if (parse_section_header(&h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MpegTSContext))",
          "old_line_content": "}",
          "new_line_content": "    ts = av_mallocz(sizeof(MpegTSContext));",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "        if (inst_bitrate_flag)",
          "new_line_content": "                cts_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "old_line_content": "    int len1;",
          "new_line_content": "    mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "old_line_content": "",
          "new_line_content": "    mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&gb)",
          "old_line_content": "    if (dts != AV_NOPTS_VALUE)",
          "new_line_content": "            inst_bitrate_flag = get_bits1(&gb);",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ts->stream, AV_LOG_DEBUG,\n               \"Continuity check failed for pid %d expected %d got %d\\n\",\n               pid, expected_cc, cc)",
          "old_line_content": "    p = packet + 4;",
          "new_line_content": "        av_log(ts->stream, AV_LOG_DEBUG,",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "get_ts64",
          "old_text": null,
          "new_text": "get_ts64(&gb, sl->timestamp_len)",
          "old_line_content": "    if (cts != AV_NOPTS_VALUE)",
          "new_line_content": "            dts = get_ts64(&gb, sl->timestamp_len);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "get_ts64",
          "old_text": null,
          "new_text": "get_ts64(&gb, sl->timestamp_len)",
          "old_line_content": "",
          "new_line_content": "            cts = get_ts64(&gb, sl->timestamp_len);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "ffio_init_context",
          "old_text": null,
          "new_text": "ffio_init_context(&pb, mp4_descr[i].dec_config_descr,\n                              mp4_descr[i].dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "old_line_content": "            } else if (st->codec->codec_id < AV_CODEC_ID_FIRST_AUDIO) {",
          "new_line_content": "            ffio_init_context(&pb, mp4_descr[i].dec_config_descr,",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res)",
          "old_line_content": "    MpegTSContext *ts = pes->ts;",
          "new_line_content": "        avpriv_set_pts_info(pes->st, sl->timestamp_len, 1, sl->timestamp_res);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_dec_config_descr(s, st, &pb)",
          "old_line_content": "            } else if (st->codec->codec_id < AV_CODEC_ID_FIRST_SUBTITLE) {",
          "new_line_content": "            ff_mp4_read_dec_config_descr(s, st, &pb);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&gb)",
          "old_line_content": "    int len, code;",
          "new_line_content": "    return (get_bits_count(&gb) + 7) >> 3;",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": null,
          "new_api": "handle_packet",
          "old_text": null,
          "new_text": "handle_packet(ts, buf)",
          "old_line_content": "{",
          "new_line_content": "            handle_packet(ts, buf);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tss->section_buf, buf, buf_size)",
          "old_line_content": "        tss->section_index += len;",
          "new_line_content": "        memcpy(tss->section_buf, buf, buf_size);",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": null,
          "new_api": "mpegts_free",
          "old_text": null,
          "new_text": "mpegts_free(ts)",
          "old_line_content": "    .read_close     = mpegts_read_close,",
          "new_line_content": "    mpegts_free(ts);",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(ts)",
          "old_line_content": "    .read_timestamp = mpegts_get_dts,",
          "new_line_content": "    av_free(ts);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, len, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(mp4_descr[i].dec_config_descr)",
          "old_line_content": "    int i;",
          "new_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\")",
          "old_line_content": "AVInputFormat ff_mpegtsraw_demuxer = {",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\"),",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(tss->section_buf + tss->section_index, buf, len)",
          "old_line_content": "",
          "new_line_content": "        memcpy(tss->section_buf + tss->section_index, buf, len);",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "new_pes_packet",
          "old_text": null,
          "new_text": "new_pes_packet(pes, ts->pkt)",
          "old_line_content": "            len = PES_START_SIZE - pes->data_index;",
          "new_line_content": "            new_pes_packet(pes, ts->pkt);",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, p_end - p, 1)",
          "old_line_content": "        int64_t pcr = -1;",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": null,
          "new_api": "write_section_data",
          "old_text": null,
          "new_text": "write_section_data(s, tss,\n                                   p, p_end - p, 0)",
          "old_line_content": "        // Note: The position here points actually behind the current packet.",
          "new_line_content": "                write_section_data(s, tss,",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_list_end)",
          "old_line_content": "",
          "new_line_content": "    desc_tag = get8(pp, desc_list_end);",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\")",
          "old_line_content": "",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\"),",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": null,
          "new_api": "parse_pcr",
          "old_text": null,
          "new_text": "parse_pcr(&pcr_h, &pcr_l, packet)",
          "old_line_content": "/* XXX: try to find a better synchro over several packets (use",
          "new_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, packet) == 0)",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_32_IEEE)",
          "old_line_content": "}",
          "new_line_content": "            crc_valid = !av_crc(av_crc_get_table(AV_CRC_32_IEEE), -1, tss->section_buf, tss->section_h_size);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "pes_cb",
          "old_text": null,
          "new_text": "tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,\n                                            pos - ts->raw_packet_size, pcr)",
          "old_line_content": "{",
          "new_line_content": "        if ((ret = tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len)",
          "old_line_content": "        for (i = 0; i < mp4_descr_count; i++)",
          "new_line_content": "    av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len);",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "section_cb",
          "old_text": null,
          "new_text": "tss->section_cb(tss1, tss->section_buf, tss->section_h_size)",
          "old_line_content": "",
          "new_line_content": "            tss->section_cb(tss1, tss->section_buf, tss->section_h_size);",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, desc_end)",
          "old_line_content": "                st->codec->extradata_size > 0)",
          "new_line_content": "        desc_es_id = get16(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": null,
          "new_api": "avio_r8",
          "old_text": null,
          "new_text": "avio_r8(pb)",
          "old_line_content": "}",
          "new_line_content": "        c = avio_r8(pb);",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(ts->stream, NULL)",
          "old_line_content": "                        pes->total_size = MAX_PES_PAYLOAD;",
          "new_line_content": "                        pes->st = avformat_new_stream(ts->stream, NULL);",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": null,
          "new_api": "url_feof",
          "old_text": null,
          "new_text": "url_feof(pb)",
          "old_line_content": "",
          "new_line_content": "        if (url_feof(pb))",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "                    /* allocate pes buffer */",
          "new_line_content": "                            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid)",
          "old_line_content": "    filter->last_cc = -1;",
          "new_line_content": "    av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "mpegts_set_stream_info",
          "old_text": null,
          "new_text": "mpegts_set_stream_info(pes->st, pes, 0, 0)",
          "old_line_content": "                                                  FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                        mpegts_set_stream_info(pes->st, pes, 0, 0);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "ff_mp4_read_dec_config_descr",
          "old_text": null,
          "new_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "old_line_content": "            mp4_descr->dec_config_descr_len && mp4_descr->es_id == pid) {",
          "new_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -1, SEEK_CUR)",
          "old_line_content": "{",
          "new_line_content": "            avio_seek(pb, -1, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(pes->header + 4)",
          "old_line_content": "",
          "new_line_content": "                    pes->total_size = AV_RB16(pes->header + 4);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "mpegts_open_section_filter",
          "old_text": null,
          "new_text": "mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1)",
          "old_line_content": "            if (st->codec->codec_id == AV_CODEC_ID_AAC &&",
          "new_line_content": "                mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1);",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\")",
          "old_line_content": "    for(;;) {",
          "new_line_content": "    av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\");",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(pp, desc_end)",
          "old_line_content": "            }",
          "new_line_content": "        get16(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "                        }",
          "new_line_content": "                        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(MAX_SECTION_SIZE)",
          "old_line_content": "                                     void *opaque)",
          "new_line_content": "    sec->section_buf = av_malloc(MAX_SECTION_SIZE);",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "ffio_read_indirect",
          "old_text": null,
          "new_text": "ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data)",
          "old_line_content": "        } else {",
          "new_line_content": "        len = ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(filter)",
          "old_line_content": "    MpegTSPESFilter *pes;",
          "new_line_content": "        av_free(filter);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",\n                                    pes->pid, pes->stream_type)",
          "old_line_content": "                skip:",
          "new_line_content": "                            av_dlog(pes->stream, \"pid=%x stream_type=%x probing\\n\",",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        /* hearing impaired subtitles detection */",
          "new_line_content": "        language[0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR)",
          "old_line_content": "",
          "new_line_content": "            avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        case 0x20: /* DVB subtitles (for the hard of hearing) with no monitor aspect ratio criticality */",
          "new_line_content": "        language[2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": null,
          "new_api": "mpegts_resync",
          "old_text": null,
          "new_text": "mpegts_resync(s)",
          "old_line_content": "static void finished_reading_packet(AVFormatContext *s, int raw_packet_size)",
          "new_line_content": "            if (mpegts_resync(s) < 0)",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "        case 0x22: /* DVB subtitles (for the hard of hearing) for display on 16:9 aspect ratio monitor */",
          "new_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "{",
          "new_line_content": "                return AVERROR(EAGAIN);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        case 0x25: /* DVB subtitles (for the hard of hearing) with plano-stereoscopic disparity for display on a high definition monitor */",
          "new_line_content": "        language[0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            st->disposition |= AV_DISPOSITION_HEARING_IMPAIRED;",
          "new_line_content": "        language[1] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            break;",
          "new_line_content": "        language[2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MpegTSFilter))",
          "old_line_content": "    return filter;",
          "new_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "avio_skip",
          "old_text": null,
          "new_text": "avio_skip(pb, skip)",
          "old_line_content": "        int i;",
          "new_line_content": "        avio_skip(pb, skip);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(st->codec->extradata, *pp, 4)",
          "old_line_content": "        break;",
          "new_line_content": "            if (st->codec->extradata_size == 4 && memcmp(st->codec->extradata, *pp, 4))",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "            if (len < 0)",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(fc, \"DVB sub with multiple IDs\")",
          "old_line_content": "    case 0x0a: /* ISO 639 language descriptor */",
          "new_line_content": "                avpriv_request_sample(fc, \"DVB sub with multiple IDs\");",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "                   pes->last_pcr = -1;",
          "new_line_content": "    if (avio_tell(s->pb) != ts->last_pos) {",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"Skipping after seek\\n\")",
          "old_line_content": "                ts->pids[i]->last_cc = -1;",
          "new_line_content": "        av_dlog(ts->stream, \"Skipping after seek\\n\");",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(st->codec->extradata, *pp, 4)",
          "old_line_content": "            language[i + 3] = ',';",
          "new_line_content": "                memcpy(st->codec->extradata, *pp, 4);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "av_buffer_unref",
          "old_text": null,
          "new_text": "av_buffer_unref(&pes->buffer)",
          "old_line_content": "",
          "new_line_content": "        av_buffer_unref(&pes->buffer);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "            case 0x03: st->disposition |= AV_DISPOSITION_VISUAL_IMPAIRED; break;",
          "new_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "av_buffer_unref",
          "old_text": null,
          "new_text": "av_buffer_unref(&pes->buffer)",
          "old_line_content": "    packet_num = 0;",
          "new_line_content": "                   av_buffer_unref(&pes->buffer);",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&filter->u.pes_filter.opaque)",
          "old_line_content": "    int x=0;",
          "new_line_content": "            av_freep(&filter->u.pes_filter.opaque);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "            language[i - 1] = 0;",
          "new_line_content": "            language[i + 0] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pes->header + pes->data_index, p, len)",
          "old_line_content": "                pes->dts = AV_NOPTS_VALUE;",
          "new_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "        }",
          "new_line_content": "            language[i + 2] = get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(filter)",
          "old_line_content": "",
          "new_line_content": "    av_free(filter);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "    case 0x05: /* registration descriptor */",
          "new_line_content": "        switch (get8(pp, desc_end)) {",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "old_line_content": "        break;",
          "new_line_content": "            av_dict_set(&st->metadata, \"language\", language, 0);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(stat, 0, packet_size*sizeof(int))",
          "old_line_content": "        x++;",
          "new_line_content": "    memset(stat, 0, packet_size*sizeof(int));",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                    /* Skip PES private data, program packet sequence counter and P-STD buffer */",
          "new_line_content": "                    pes->dts = pes->pts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "bytestream_get_le32",
          "old_text": null,
          "new_text": "bytestream_get_le32(pp)",
          "old_line_content": "    *pp = desc_end;",
          "new_line_content": "        st->codec->codec_tag = bytestream_get_le32(pp);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag)",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                    r += skip;",
          "new_line_content": "                    pes->pts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": null,
          "new_api": "mpegts_find_stream_type",
          "old_text": null,
          "new_text": "mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types)",
          "old_line_content": "",
          "new_line_content": "            mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "ff_parse_pes_pts",
          "old_text": null,
          "new_text": "ff_parse_pes_pts(r)",
          "old_line_content": "                        (r + 2) <= (pes->header + pes->pes_header_size)) {",
          "new_line_content": "                    pes->dts = ff_parse_pes_pts(r);",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "        if (ret != 0)",
          "new_line_content": "            ret = AVERROR(EAGAIN);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "get8",
          "old_text": null,
          "new_text": "get8(pp, desc_end)",
          "old_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "new_line_content": "        st->stream_identifier = 1 + get8(pp, desc_end);",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "read_packet",
          "old_text": null,
          "new_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "old_line_content": "",
          "new_line_content": "        ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "handle_packet",
          "old_text": null,
          "new_text": "handle_packet(ts, data)",
          "old_line_content": "    const int size= p->buf_size;",
          "new_line_content": "        ret = handle_packet(ts, data);",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "finished_reading_packet",
          "old_text": null,
          "new_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "old_line_content": "    int maxscore=0;",
          "new_line_content": "        finished_reading_packet(s, ts->raw_packet_size);",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "#define CHECK_COUNT 10",
          "new_line_content": "    ts->last_pos = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_PACKET_SIZE, NULL)",
          "old_line_content": "",
          "new_line_content": "    score    = analyze(buf, size, TS_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL)",
          "old_line_content": "typedef struct SectionHeader {",
          "new_line_content": "    dvhs_score    = analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(buf, size, TS_FEC_PACKET_SIZE, NULL)",
          "old_line_content": "    uint8_t tid;",
          "new_line_content": "    fec_score= analyze(buf, size, TS_FEC_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "old_line_content": "    uint16_t id;",
          "new_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "read_sl_header",
          "old_text": null,
          "new_text": "read_sl_header(pes, &pes->sl, p, buf_size)",
          "old_line_content": "                                PESContext *pcrpes = f->u.pes_filter.opaque;",
          "new_line_content": "                    int sl_header_bytes = read_sl_header(pes, &pes->sl, p, buf_size);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(ts->stream, \"PMT: len %i\\n\", section_len)",
          "old_line_content": "    if (h->tid != PMT_TID)",
          "new_line_content": "    av_dlog(ts->stream, \"PMT: len %i\\n\", section_len);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "hex_dump_debug",
          "old_text": null,
          "new_text": "hex_dump_debug(ts->stream, section, section_len)",
          "old_line_content": "        return;",
          "new_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(check_count - i, CHECK_BLOCK)",
          "old_line_content": "",
          "new_line_content": "        int left = FFMIN(check_count - i, CHECK_BLOCK);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "av_find_program_from_stream",
          "old_text": null,
          "new_text": "av_find_program_from_stream(pes->stream, p, pes->st->index)",
          "old_line_content": "                                    pes->st->pts_wrap_reference = pcrpes->st->pts_wrap_reference;",
          "new_line_content": "                    while ((p = av_find_program_from_stream(pes->stream, p, pes->st->index))) {",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(p->buf + TS_DVHS_PACKET_SIZE*i, TS_DVHS_PACKET_SIZE*left, TS_DVHS_PACKET_SIZE, NULL)",
          "old_line_content": "",
          "new_line_content": "        int dvhs_score= analyze(p->buf + TS_DVHS_PACKET_SIZE*i, TS_DVHS_PACKET_SIZE*left, TS_DVHS_PACKET_SIZE, NULL);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "parse_section_header",
          "old_text": null,
          "new_text": "parse_section_header(h, &p, p_end)",
          "old_line_content": "    if (pcr_pid < 0)",
          "new_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "analyze",
          "old_text": null,
          "new_text": "analyze(p->buf + TS_FEC_PACKET_SIZE *i, TS_FEC_PACKET_SIZE *left, TS_FEC_PACKET_SIZE , NULL)",
          "old_line_content": "    if (sumscore > 6)           return AVPROBE_SCORE_MAX + sumscore - CHECK_COUNT;",
          "new_line_content": "        int fec_score = analyze(p->buf + TS_FEC_PACKET_SIZE *i, TS_FEC_PACKET_SIZE *left, TS_FEC_PACKET_SIZE , NULL);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "FFMAX3",
          "old_text": null,
          "new_text": "FFMAX3(score, dvhs_score, fec_score)",
          "old_line_content": "    else if (maxscore > 6)      return AVPROBE_SCORE_MAX/2 + sumscore - CHECK_COUNT;",
          "new_line_content": "        score = FFMAX3(score, dvhs_score, fec_score);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(maxscore, score)",
          "old_line_content": "}",
          "new_line_content": "        maxscore = FFMAX(maxscore, score);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": null,
          "new_api": "av_dlog",
          "old_text": null,
          "new_text": "av_dlog(0, \"TS score: %d %d\\n\", sumscore, maxscore)",
          "old_line_content": "{",
          "new_line_content": "    av_dlog(0, \"TS score: %d %d\\n\", sumscore, maxscore);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "clear_program",
          "old_text": null,
          "new_text": "clear_program(ts, h->id)",
          "old_line_content": "    if (program_info_length < 0)",
          "new_line_content": "    clear_program(ts, h->id);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        return;",
          "new_line_content": "    pcr_pid = get16(&p, p_end);",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": null,
          "new_api": "get16",
          "old_text": null,
          "new_text": "get16(&p, p_end)",
          "old_line_content": "        if(len > program_info_length - 2)",
          "new_line_content": "    program_info_length = get16(&p, p_end);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1538,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "            get8(&p, p_end); // scope",
          "new_line_content": "        uint8_t tag, len;",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "AV_RB32",
          "new_api": null,
          "old_text": "AV_RB32(p)",
          "new_text": null,
          "old_line_content": "    v = AV_RB32(p);",
          "new_line_content": "    p = packet + 4;",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "mp4_read_iods",
          "new_api": null,
          "old_text": "mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,\n                          &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "new_text": null,
          "old_line_content": "            mp4_read_iods(ts->stream, p, len, mp4_descr + mp4_descr_count,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "bytestream_get_le32",
          "new_api": null,
          "old_text": "bytestream_get_le32(&p)",
          "new_text": null,
          "old_line_content": "            prog_reg_desc = bytestream_get_le32(&p);",
          "new_line_content": "        if(len > program_info_length - 2)",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "    len = get8(&p, p_end);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, pb->seekable ? AV_LOG_ERROR : AV_LOG_INFO, \"Unable to seek back to the start\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, pb->seekable ? AV_LOG_ERROR : AV_LOG_INFO, \"Unable to seek back to the start\\n\");",
          "new_line_content": "    *ppcr_high = ((int64_t)v << 1) | (p[4] >> 7);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(len + 1)",
          "new_text": null,
          "old_line_content": "    str = av_malloc(len + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "                new_pes_packet(pes, ts->pkt);",
          "new_line_content": "                pes->data_index += buf_size;",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(str, p, len)",
          "new_text": null,
          "old_line_content": "    memcpy(str, p, len);",
          "new_line_content": "    char *str;",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "        stream_type = get8(&p, p_end);",
          "new_line_content": "    p += program_info_length;",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        pid = get16(&p, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "    pos = avio_tell(pb);",
          "new_line_content": "static int mpegts_read_header(AVFormatContext *s)",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(pb, buf, sizeof(buf))",
          "new_text": null,
          "old_line_content": "    len = avio_read(pb, buf, sizeof(buf));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": "get_packet_size",
          "new_api": null,
          "old_text": "get_packet_size(buf, len)",
          "new_text": null,
          "old_line_content": "    ts->raw_packet_size = get_packet_size(buf, len);",
          "new_line_content": "    MpegTSContext *ts = s->priv_data;",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    str[len] = '\\0';",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING, \"Could not detect TS packet size, defaulting to non-FEC/DVHS\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_WARNING, \"Could not detect TS packet size, defaulting to non-FEC/DVHS\\n\");",
          "new_line_content": "    uint8_t buf[8*1024]={0};",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(PESContext))",
          "new_text": null,
          "old_line_content": "    pes = av_mallocz(sizeof(PESContext));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get16(pp, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    int val;",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "seek_back",
          "new_api": null,
          "old_text": "seek_back(s, pb, pos)",
          "new_text": null,
          "old_line_content": "        seek_back(s, pb, pos);",
          "new_line_content": "    if (ts->raw_packet_size <= 0) {",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "        mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "new_line_content": "        ts->raw_packet_size = TS_PACKET_SIZE;",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "mpegts_close_filter",
          "new_api": null,
          "old_text": "mpegts_close_filter(ts, ts->pids[pid])",
          "new_text": null,
          "old_line_content": "            if (ts->pids[pid]) mpegts_close_filter(ts, ts->pids[pid]); //wrongly added sdt filter probably",
          "new_line_content": "        /* now create stream */",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "        mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "new_line_content": "    ts->stream = s;",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, p_end)",
          "new_text": null,
          "old_line_content": "    val = get8(pp, p_end);",
          "new_line_content": "    if (val < 0)",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "handle_packets",
          "new_api": null,
          "old_text": "handle_packets(ts, s->probesize / ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        handle_packets(ts, s->probesize / ts->raw_packet_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(pes)",
          "new_text": null,
          "old_line_content": "        av_free(pes);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "add_pes_stream",
          "new_api": null,
          "old_text": "add_pes_stream(ts, pid, pcr_pid)",
          "new_text": null,
          "old_line_content": "            pes = add_pes_stream(ts, pid, pcr_pid);",
          "new_line_content": "        if (ts->pids[pid] && ts->pids[pid]->type == MPEGTS_PES) {",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(pes->stream, NULL)",
          "new_text": null,
          "old_line_content": "                st = avformat_new_stream(pes->stream, NULL);",
          "new_line_content": "            if (!pes->st) {",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "ff_find_stream_index",
          "new_api": null,
          "old_text": "ff_find_stream_index(ts->stream, pid)",
          "new_text": null,
          "old_line_content": "            int idx = ff_find_stream_index(ts->stream, pid);",
          "new_line_content": "            st = pes->st;",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(ts->stream, NULL)",
          "new_text": null,
          "old_line_content": "                st = avformat_new_stream(ts->stream, NULL);",
          "new_line_content": "            if (pes) {",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(s, NULL)",
          "new_text": null,
          "old_line_content": "        st = avformat_new_stream(s, NULL);",
          "new_line_content": "        s->ctx_flags |= AVFMTCTX_NOHEADER;",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "mpegts_set_stream_info",
          "new_api": null,
          "old_text": "mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc)",
          "new_text": null,
          "old_line_content": "            mpegts_set_stream_info(st, pes, stream_type, prog_reg_desc);",
          "new_line_content": "                if (!st)",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 60, 1, 27000000)",
          "new_text": null,
          "old_line_content": "        avpriv_set_pts_info(st, 60, 1, 27000000);",
          "new_line_content": "        int pcr_pid, pid, nb_packets, nb_pcrs, ret, pcr_l;",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "add_pid_to_pmt",
          "new_api": null,
          "old_text": "add_pid_to_pmt(ts, h->id, pid)",
          "new_text": null,
          "old_line_content": "        add_pid_to_pmt(ts, h->id, pid);",
          "new_line_content": "                st->id = pid;",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "ffio_init_context",
          "new_api": null,
          "old_text": "ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,\n                          NULL, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if ((ret = ffio_init_context(&d->pb, (unsigned char*)buf, size, 0,",
          "new_line_content": "    int level;",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "ff_program_add_stream_index",
          "new_api": null,
          "old_text": "ff_program_add_stream_index(ts->stream, h->id, st->index)",
          "new_text": null,
          "old_line_content": "        ff_program_add_stream_index(ts->stream, h->id, st->index);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        desc_list_len = get16(&p, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "read_packet",
          "new_api": null,
          "old_text": "read_packet(s, packet, ts->raw_packet_size, &data)",
          "new_text": null,
          "old_line_content": "            ret = read_packet(s, packet, ts->raw_packet_size, &data);",
          "new_line_content": "        if (!st)",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(data + 1)",
          "new_text": null,
          "old_line_content": "            pid = AV_RB16(data + 1) & 0x1fff;",
          "new_line_content": "        st->codec->codec_type = AVMEDIA_TYPE_DATA;",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "ff_parse_mpeg2_descriptor",
          "new_api": null,
          "old_text": "ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,\n                mp4_descr, mp4_descr_count, pid, ts)",
          "new_text": null,
          "old_line_content": "            if (ff_parse_mpeg2_descriptor(ts->stream, st, stream_type, &p, desc_list_end,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&pcr_h, &pcr_l, data)",
          "new_text": null,
          "old_line_content": "                parse_pcr(&pcr_h, &pcr_l, data) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "finished_reading_packet",
          "new_api": null,
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "                finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "        /* we iterate until we find two PCRs to estimate the bitrate */",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "    int64_t new_off = avio_tell(pb);",
          "new_line_content": "    d->s = s;",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"HDMV\")",
          "new_text": null,
          "old_line_content": "            if (pes && prog_reg_desc == AV_RL32(\"HDMV\") && stream_type == 0x83 && pes->sub_st) {",
          "new_line_content": "        if (desc_list_len < 0)",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "ff_program_add_stream_index",
          "new_api": null,
          "old_text": "ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index)",
          "new_text": null,
          "old_line_content": "                ff_program_add_stream_index(ts->stream, h->id, pes->sub_st->index);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mp4_descr[i].dec_config_descr)",
          "new_text": null,
          "old_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "        update_offsets(&d->pb, &off, &len);",
          "new_line_content": "    *off = new_off;",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('d','r','a','c')",
          "new_text": null,
          "old_line_content": "    { MKTAG('d','r','a','c'), AVMEDIA_TYPE_VIDEO, AV_CODEC_ID_DIRAC },",
          "new_line_content": "    { 0 },",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('A','C','-','3')",
          "new_text": null,
          "old_line_content": "    { MKTAG('A','C','-','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('B','S','S','D')",
          "new_text": null,
          "old_line_content": "    { MKTAG('B','S','S','D'), AVMEDIA_TYPE_AUDIO, AV_CODEC_ID_S302M },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','1')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','1'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "/* ATSC ? */",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",\n                st->start_time / 1000000.0, pcrs[0] / 27e6, ts->pcr_incr)",
          "new_text": null,
          "old_line_content": "        av_dlog(ts->stream, \"start=%0.3f pcr=%0.3f incr=%d\\n\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','2')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','2'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "static const StreamType MISC_types[] = {",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('D','T','S','3')",
          "new_text": null,
          "old_line_content": "    { MKTAG('D','T','S','3'), AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "new_line_content": "    { 0x81, AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_AC3 },",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('K','L','V','A')",
          "new_text": null,
          "old_line_content": "    { MKTAG('K','L','V','A'), AVMEDIA_TYPE_DATA,    AV_CODEC_ID_SMPTE_KLV },",
          "new_line_content": "    { 0x8a, AVMEDIA_TYPE_AUDIO,   AV_CODEC_ID_DTS },",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "seek_back",
          "new_api": null,
          "old_text": "seek_back(s, pb, pos)",
          "new_text": null,
          "old_line_content": "    seek_back(s, pb, pos);",
          "new_line_content": "        /* NOTE1: the bitrate is computed without the FEC */",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('V','C','-','1')",
          "new_text": null,
          "old_line_content": "    { MKTAG('V','C','-','1'), AVMEDIA_TYPE_VIDEO,   AV_CODEC_ID_VC1 },",
          "new_line_content": "    { 0 },",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_rb16(&d->pb); // ID",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "    while (len > 0) {",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "    avio_r8(&d->pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "parse_mp4_descr_arr",
          "new_api": null,
          "old_text": "parse_mp4_descr_arr(d, off, len)",
          "new_text": null,
          "old_line_content": "    return parse_mp4_descr_arr(d, off, len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "hex_dump_debug",
          "new_api": null,
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": null,
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        sid = get16(&p, p_end);",
          "new_line_content": "    p_end = section + section_len - 4;",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open(st->codec)",
          "new_text": null,
          "old_line_content": "    if (avcodec_is_open(st->codec)) {",
          "new_line_content": "    { 0x6a, AVMEDIA_TYPE_AUDIO,             AV_CODEC_ID_AC3 }, /* AC-3 descriptor */",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\");",
          "new_line_content": "    { 0x7a, AVMEDIA_TYPE_AUDIO,            AV_CODEC_ID_EAC3 }, /* E-AC-3 descriptor */",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "av_new_packet",
          "new_api": null,
          "old_text": "av_new_packet(pkt, TS_PACKET_SIZE)",
          "new_text": null,
          "old_line_content": "    if (av_new_packet(pkt, TS_PACKET_SIZE) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "static int mpegts_raw_read_packet(AVFormatContext *s,",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    pkt->pos= avio_tell(s->pb);",
          "new_line_content": "                                  AVPacket *pkt)",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "read_packet",
          "new_api": null,
          "old_text": "read_packet(s, pkt->data, ts->raw_packet_size, &data)",
          "new_text": null,
          "old_line_content": "    ret = read_packet(s, pkt->data, ts->raw_packet_size, &data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        pmt_pid = get16(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "av_free_packet",
          "new_api": null,
          "old_text": "av_free_packet(pkt)",
          "new_text": null,
          "old_line_content": "        av_free_packet(pkt);",
          "new_line_content": "    int ret, i;",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pkt->data, data, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        memcpy(pkt->data, data, ts->raw_packet_size);",
          "new_line_content": "    uint8_t *data;",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": "finished_reading_packet",
          "new_api": null,
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "    finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "av_new_program",
          "new_api": null,
          "old_text": "av_new_program(ts->stream, sid)",
          "new_text": null,
          "old_line_content": "            program = av_new_program(ts->stream, sid);",
          "new_line_content": "        pmt_pid &= 0x1fff;",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "parse_mp4_descr",
          "new_api": null,
          "old_text": "parse_mp4_descr(d, off, len, MP4DecConfigDescrTag)",
          "new_text": null,
          "old_line_content": "    parse_mp4_descr(d, off, len, MP4DecConfigDescrTag);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "            pos = avio_tell(s->pb);",
          "new_line_content": "    if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "static int parse_MP4ESDescrTag(MP4DescrParseContext *d, int64_t off, int len)",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                avio_seek(s->pb, pos + i * ts->raw_packet_size, SEEK_SET);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(s->pb, pcr_buf, 12)",
          "new_text": null,
          "old_line_content": "                avio_read(s->pb, pcr_buf, 12);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf)",
          "new_text": null,
          "old_line_content": "                if (parse_pcr(&next_pcr_h, &next_pcr_l, pcr_buf) == 0) {",
          "new_line_content": "    if (data != pkt->data)",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open(st->codec)",
          "new_text": null,
          "old_line_content": "    if (avcodec_is_open(st->codec)) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(pes->stream, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(pes->stream, AV_LOG_DEBUG, \"cannot set stream info, codec is open\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "parse_mp4_descr",
          "new_api": null,
          "old_text": "parse_mp4_descr(d, off, len, MP4SLDescrTag)",
          "new_text": null,
          "old_line_content": "        parse_mp4_descr(d, off, len, MP4SLDescrTag);",
          "new_line_content": "    int es_id = 0;",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "mpegts_close_filter",
          "new_api": null,
          "old_text": "mpegts_close_filter(ts, ts->pids[pmt_pid])",
          "new_text": null,
          "old_line_content": "                    mpegts_close_filter(ts, ts->pids[pmt_pid]);",
          "new_line_content": "        if (sid == 0x0000) {",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 33, 1, 90000)",
          "new_text": null,
          "old_line_content": "    avpriv_set_pts_info(st, 33, 1, 90000);",
          "new_line_content": "static int mpegts_set_stream_info(AVStream *st, PESContext *pes,",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "                mpegts_open_section_filter(ts, pmt_pid, pmt_cb, ts, 1);",
          "new_line_content": "            MpegTSFilter *fil = ts->pids[pmt_pid];",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "add_pid_to_pmt",
          "new_api": null,
          "old_text": "add_pid_to_pmt(ts, sid, 0)",
          "new_text": null,
          "old_line_content": "            add_pid_to_pmt(ts, sid, 0); //add pat pid to program",
          "new_line_content": "            program->program_num = sid;",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(len)",
          "new_text": null,
          "old_line_content": "    d->active_descr->dec_config_descr = av_malloc(len);",
          "new_line_content": "    if (len > 0)",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "add_pid_to_pmt",
          "new_api": null,
          "old_text": "add_pid_to_pmt(ts, sid, pmt_pid)",
          "new_text": null,
          "old_line_content": "            add_pid_to_pmt(ts, sid, pmt_pid);",
          "new_line_content": "            program->pmt_pid = pmt_pid;",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    d->active_descr = NULL;",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(&d->pb, descr->dec_config_descr, len)",
          "new_text": null,
          "old_line_content": "    avio_read(&d->pb, descr->dec_config_descr, len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(pes->stream, AV_LOG_DEBUG,\n           \"stream=%d stream_type=%x pid=%x prog_reg_desc=%.4s\\n\",\n           st->index, pes->stream_type, pes->pid, (char*)&prog_reg_desc)",
          "new_text": null,
          "old_line_content": "    av_log(pes->stream, AV_LOG_DEBUG,",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, ISO_types)",
          "new_text": null,
          "old_line_content": "    mpegts_find_stream_type(st, pes->stream_type, ISO_types);",
          "new_line_content": "    st->codec->codec_id   = AV_CODEC_ID_NONE;",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"HDMV\")",
          "new_text": null,
          "old_line_content": "    if ((prog_reg_desc == AV_RL32(\"HDMV\") ||",
          "new_line_content": "    st->need_parsing = AVSTREAM_PARSE_FULL;",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "AV_RL32",
          "new_api": null,
          "old_text": "AV_RL32(\"HDPR\")",
          "new_text": null,
          "old_line_content": "         prog_reg_desc == AV_RL32(\"HDPR\")) &&",
          "new_line_content": "    pes->st = st;",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, HDMV_types)",
          "new_text": null,
          "old_line_content": "        mpegts_find_stream_type(st, pes->stream_type, HDMV_types);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        int flags = avio_r8(&d->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "handle_packets",
          "new_api": null,
          "old_text": "handle_packets(ts, 0)",
          "new_text": null,
          "old_line_content": "    ret = handle_packets(ts, 0);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": "av_free_packet",
          "new_api": null,
          "old_text": "av_free_packet(ts->pkt)",
          "new_text": null,
          "old_line_content": "        av_free_packet(ts->pkt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(sizeof(*sub_pes))",
          "new_text": null,
          "old_line_content": "            PESContext *sub_pes = av_malloc(sizeof(*sub_pes));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"SDT:\\n\")",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"SDT:\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "hex_dump_debug",
          "new_api": null,
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": null,
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "avio_rb32",
          "new_api": null,
          "old_text": "avio_rb32(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.timestamp_res      = avio_rb32(&d->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, pkt)",
          "new_text": null,
          "old_line_content": "                    new_pes_packet(pes, pkt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(sub_pes)",
          "new_text": null,
          "old_line_content": "                av_free(sub_pes);",
          "new_line_content": "            // HDMV TrueHD streams also contain an AC3 coded version of the",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "            // audio track - add a second stream for this",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.timestamp_len      = avio_r8(&d->pb);",
          "new_line_content": "    if (!predefined) {",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.ocr_len            = avio_r8(&d->pb);",
          "new_line_content": "        int lengths;",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(&d->pb)",
          "new_text": null,
          "old_line_content": "        descr->sl.inst_bitrate_len   = avio_r8(&d->pb);",
          "new_line_content": "        descr->sl.use_au_start       = !!(flags & 0x80);",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(sub_st, 33, 1, 90000)",
          "new_text": null,
          "old_line_content": "            avpriv_set_pts_info(sub_st, 33, 1, 90000);",
          "new_line_content": "            if (!sub_pes)",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "avio_rb16",
          "new_api": null,
          "old_text": "avio_rb16(&d->pb)",
          "new_text": null,
          "old_line_content": "        lengths                      = avio_rb16(&d->pb);",
          "new_line_content": "        descr->sl.use_au_end         = !!(flags & 0x40);",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    onid = get16(&p, p_end);",
          "new_line_content": "    char *name, *provider_name;",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINTR)",
          "new_text": null,
          "old_line_content": "        ret = AVERROR(EINTR);",
          "new_line_content": "                if (pes->state == MPEGTS_PAYLOAD && pes->data_index > 0) {",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "        val = get8(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, pes->stream_type, MISC_types)",
          "new_text": null,
          "old_line_content": "        mpegts_find_stream_type(st, pes->stream_type, MISC_types);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "ff_mp4_read_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_descr(d->s, &d->pb, &tag)",
          "new_text": null,
          "old_line_content": "    int len1 = ff_mp4_read_descr(d->s, &d->pb, &tag);",
          "new_line_content": "        descr->sl.au_seq_num_len     = (lengths >> 7) & 0x1f;",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "clear_programs",
          "new_api": null,
          "old_text": "clear_programs(ts)",
          "new_text": null,
          "old_line_content": "    clear_programs(ts);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "update_offsets",
          "new_api": null,
          "old_text": "update_offsets(&d->pb, &off, &len)",
          "new_text": null,
          "old_line_content": "    update_offsets(&d->pb, &off, &len);",
          "new_line_content": "        descr->sl.packet_seq_num_len = (lengths >> 2) & 0x1f;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "        desc_list_len = get16(&p, p_end);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Maximum MP4 descriptor level exceeded\\n\");",
          "new_line_content": "static int parse_mp4_descr(MP4DescrParseContext *d, int64_t off, int len,",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "mpegts_free",
          "new_api": null,
          "old_text": "mpegts_free(ts)",
          "new_text": null,
          "old_line_content": "    mpegts_free(ts);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag)",
          "new_text": null,
          "old_line_content": "        av_log(d->s, AV_LOG_ERROR, \"Found tag %x expected %x\\n\", tag, target_tag);",
          "new_line_content": "    if (len < 0 || len1 > len || len1 <= 0) {",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",\n                   desc_tag, desc_len)",
          "new_text": null,
          "old_line_content": "            av_dlog(ts->stream, \"tag: 0x%02x len=%d\\n\",",
          "new_line_content": "        if (desc_list_end > p_end)",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(pes->stream, AV_LOG_WARNING, \"PES packet size mismatch\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(&p, p_end)",
          "new_text": null,
          "old_line_content": "                service_type = get8(&p, p_end);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "parse_MP4ODescrTag",
          "new_api": null,
          "old_text": "parse_MP4ODescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4ODescrTag(d, off, len1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "        if (avio_seek(s->pb, pos, SEEK_SET) < 0)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "getstr8",
          "new_api": null,
          "old_text": "getstr8(&p, p_end)",
          "new_text": null,
          "old_line_content": "                provider_name = getstr8(&p, p_end);",
          "new_line_content": "            if (desc_end > desc_list_end)",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "avio_read",
          "new_api": null,
          "old_text": "avio_read(s->pb, buf, TS_PACKET_SIZE)",
          "new_text": null,
          "old_line_content": "        if (avio_read(s->pb, buf, TS_PACKET_SIZE) != TS_PACKET_SIZE)",
          "new_line_content": "static av_unused int64_t mpegts_get_pcr(AVFormatContext *s, int stream_index,",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "parse_MP4ESDescrTag",
          "new_api": null,
          "old_text": "parse_MP4ESDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4ESDescrTag(d, off, len1);",
          "new_line_content": "        goto done;",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "mpegts_resync",
          "new_api": null,
          "old_text": "mpegts_resync(s)",
          "new_text": null,
          "old_line_content": "            if (mpegts_resync(s) < 0)",
          "new_line_content": "    MpegTSContext *ts = s->priv_data;",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "parse_MP4DecConfigDescrTag",
          "new_api": null,
          "old_text": "parse_MP4DecConfigDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4DecConfigDescrTag(d, off, len1);",
          "new_line_content": "    switch (tag) {",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "            pos = avio_tell(s->pb);",
          "new_line_content": "    uint8_t buf[TS_PACKET_SIZE];",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "parse_MP4SLDescrTag",
          "new_api": null,
          "old_text": "parse_MP4SLDescrTag(d, off, len1)",
          "new_text": null,
          "old_line_content": "        parse_MP4SLDescrTag(d, off, len1);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "av_new_program",
          "new_api": null,
          "old_text": "av_new_program(ts->stream, sid)",
          "new_text": null,
          "old_line_content": "                    AVProgram *program = av_new_program(ts->stream, sid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf + 1)",
          "new_text": null,
          "old_line_content": "        if ((pcr_pid < 0 || (AV_RB16(buf + 1) & 0x1fff) == pcr_pid) &&",
          "new_line_content": "    while(pos < pos_limit) {",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&program->metadata, \"service_name\", name, 0)",
          "new_text": null,
          "old_line_content": "                        av_dict_set(&program->metadata, \"service_name\", name, 0);",
          "new_line_content": "            case 0x48:",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(provider_name)",
          "new_text": null,
          "old_line_content": "                av_free(provider_name);",
          "new_line_content": "                if (!provider_name)",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(&d->pb, off + len1, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(&d->pb, off + len1, SEEK_SET);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "get_bits_left",
          "new_api": null,
          "old_text": "get_bits_left(gb)",
          "new_text": null,
          "old_line_content": "    if (get_bits_left(gb) < bits)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "get_bits64",
          "new_api": null,
          "old_text": "get_bits64(gb, bits)",
          "new_text": null,
          "old_line_content": "    return get_bits64(gb, bits);",
          "new_line_content": "    pes->pts = AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "init_MP4DescrParseContext",
          "new_api": null,
          "old_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "new_text": null,
          "old_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "ff_read_frame_flush",
          "new_api": null,
          "old_text": "ff_read_frame_flush(s)",
          "new_text": null,
          "old_line_content": "    ff_read_frame_flush(s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    if (avio_seek(s->pb, pos, SEEK_SET) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "av_init_packet",
          "new_api": null,
          "old_text": "av_init_packet(&pkt)",
          "new_text": null,
          "old_line_content": "        av_init_packet(&pkt);",
          "new_line_content": "                              int64_t *ppos, int64_t pos_limit)",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "av_read_frame",
          "new_api": null,
          "old_text": "av_read_frame(s, &pkt)",
          "new_text": null,
          "old_line_content": "        ret= av_read_frame(s, &pkt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "init_MP4DescrParseContext",
          "new_api": null,
          "old_text": "init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count)",
          "new_text": null,
          "old_line_content": "    if (init_MP4DescrParseContext(&d, s, buf, size, descr, max_descr_count) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        au_start_flag = get_bits1(&gb);",
          "new_line_content": "static int read_sl_header(PESContext *pes, SLConfigDescr *sl, const uint8_t *buf, int buf_size)",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": "av_free_packet",
          "new_api": null,
          "old_text": "av_free_packet(&pkt)",
          "new_text": null,
          "old_line_content": "        av_free_packet(&pkt);",
          "new_line_content": "    pos = ((*ppos  + ts->raw_packet_size - 1 - ts->pos47) / ts->raw_packet_size) * ts->raw_packet_size + ts->pos47;",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        au_end_flag = get_bits1(&gb);",
          "new_line_content": "    GetBitContext gb;",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(&d.pb)",
          "new_text": null,
          "old_line_content": "    parse_mp4_descr_arr(&d, avio_tell(&d.pb), size);",
          "new_line_content": "    *descr_count = d.descr_count;",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": "av_add_index_entry",
          "new_api": null,
          "old_text": "av_add_index_entry(s->streams[pkt.stream_index], pkt.pos, pkt.dts, 0, 0, AVINDEX_KEYFRAME /* FIXME keyframe? */)",
          "new_text": null,
          "old_line_content": "            av_add_index_entry(s->streams[pkt.stream_index], pkt.pos, pkt.dts, 0, 0, AVINDEX_KEYFRAME /* FIXME keyframe? */);",
          "new_line_content": "        return AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(packet + 1)",
          "new_text": null,
          "old_line_content": "    pid = AV_RB16(packet + 1) & 0x1fff;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        ocr_flag = get_bits1(&gb);",
          "new_line_content": "    int64_t dts = AV_NOPTS_VALUE, cts = AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "discard_pid",
          "new_api": null,
          "old_text": "discard_pid(ts, pid)",
          "new_text": null,
          "old_line_content": "    if(pid && discard_pid(ts, pid))",
          "new_line_content": "/* handle one TS packet */",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "add_pes_stream",
          "new_api": null,
          "old_text": "add_pes_stream(ts, pid, -1)",
          "new_text": null,
          "old_line_content": "        add_pes_stream(ts, pid, -1);",
          "new_line_content": "    int len, pid, cc, expected_cc, cc_ok, afc, is_start, is_discontinuity,",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "        padding_flag = get_bits1(&gb);",
          "new_line_content": "    if (sl->use_au_start)",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&gb, 3)",
          "new_text": null,
          "old_line_content": "        padding_bits = get_bits(&gb, 3);",
          "new_line_content": "    if (sl->use_au_end)",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->packet_seq_num_len)",
          "new_text": null,
          "old_line_content": "            skip_bits_long(&gb, sl->packet_seq_num_len);",
          "new_line_content": "    if (sl->ocr_len > 0)",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "            if (get_bits1(&gb))",
          "new_line_content": "    if (sl->use_idle)",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(&h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(&h, &p, p_end) < 0)",
          "new_line_content": "    MpegTSContext *ts = filter->u.section_filter.opaque;",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSContext))",
          "new_text": null,
          "old_line_content": "    ts = av_mallocz(sizeof(MpegTSContext));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "                get_bits1(&gb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->au_seq_num_len)",
          "new_text": null,
          "old_line_content": "                skip_bits_long(&gb, sl->au_seq_num_len);",
          "new_line_content": "        if (sl->packet_seq_num_len)",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "mp4_read_od",
          "new_api": null,
          "old_text": "mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT)",
          "new_text": null,
          "old_line_content": "    mp4_read_od(s, p, (unsigned)(p_end - p), mp4_descr, &mp4_descr_count, MAX_MP4_DESCR_COUNT);",
          "new_line_content": "    int mp4_descr_count = 0;",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "                dts_flag = get_bits1(&gb);",
          "new_line_content": "        if (sl->degr_prior_len)",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "    mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);",
          "new_line_content": "MpegTSContext *ff_mpegts_parse_open(AVFormatContext *s)",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "    mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&gb)",
          "new_text": null,
          "old_line_content": "            inst_bitrate_flag = get_bits1(&gb);",
          "new_line_content": "        if (au_start_flag) {",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ts->stream, AV_LOG_DEBUG,\n               \"Continuity check failed for pid %d expected %d got %d\\n\",\n               pid, expected_cc, cc)",
          "new_text": null,
          "old_line_content": "        av_log(ts->stream, AV_LOG_DEBUG,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "skip_bits_long",
          "new_api": null,
          "old_text": "skip_bits_long(&gb, sl->inst_bitrate_len)",
          "new_text": null,
          "old_line_content": "            skip_bits_long(&gb, sl->inst_bitrate_len);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(s, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(s, st, &pb);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": "handle_packet",
          "new_api": null,
          "old_text": "handle_packet(ts, buf)",
          "new_text": null,
          "old_line_content": "            handle_packet(ts, buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(ts->stream->pb)",
          "new_text": null,
          "old_line_content": "    pos = avio_tell(ts->stream->pb);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tss->section_buf, buf, buf_size)",
          "new_text": null,
          "old_line_content": "        memcpy(tss->section_buf, buf, buf_size);",
          "new_line_content": " *  Assemble PES packets out of TS packets, and then call the \"section_cb\"",
          "content_same": false
        },
        {
          "line": 2371,
          "old_api": "mpegts_free",
          "new_api": null,
          "old_text": "mpegts_free(ts)",
          "new_text": null,
          "old_line_content": "    mpegts_free(ts);",
          "new_line_content": "            buf += TS_PACKET_SIZE;",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(ts)",
          "new_text": null,
          "old_line_content": "    av_free(ts);",
          "new_line_content": "            len -= TS_PACKET_SIZE;",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mp4_descr[i].dec_config_descr)",
          "new_text": null,
          "old_line_content": "        av_free(mp4_descr[i].dec_config_descr);",
          "new_line_content": "            if (st->codec->codec_id <= AV_CODEC_ID_NONE) {",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"MPEG-TS (MPEG-2 Transport Stream)\"),",
          "new_line_content": "    return len1 - len;",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(tss->section_buf + tss->section_index, buf, len)",
          "new_text": null,
          "old_line_content": "        memcpy(tss->section_buf + tss->section_index, buf, len);",
          "new_line_content": "    if (is_start) {",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "            new_pes_packet(pes, ts->pkt);",
          "new_line_content": "    const uint8_t *p;",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "write_section_data",
          "new_api": null,
          "old_text": "write_section_data(s, tss,\n                                   p, p_end - p, 1)",
          "new_text": null,
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(tss->section_buf + 1)",
          "new_text": null,
          "old_line_content": "        len = (AV_RB16(tss->section_buf + 1) & 0xfff) + 3;",
          "new_line_content": "        if (tss->end_of_section_reached)",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "write_section_data",
          "new_api": null,
          "old_text": "write_section_data(s, tss,\n                                   p, p_end - p, 0)",
          "new_text": null,
          "old_line_content": "                write_section_data(s, tss,",
          "new_line_content": "                /* check whether filter has been closed */",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_list_end)",
          "new_text": null,
          "old_line_content": "    desc_tag = get8(pp, desc_list_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"raw MPEG-TS (MPEG-2 Transport Stream)\"),",
          "new_line_content": "    .read_probe     = mpegts_probe,",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_list_end)",
          "new_text": null,
          "old_line_content": "    desc_len = get8(pp, desc_list_end);",
          "new_line_content": "                              Mp4Descr *mp4_descr, int mp4_descr_count, int pid,",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "        pes->state = MPEGTS_HEADER;",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "parse_pcr",
          "new_api": null,
          "old_text": "parse_pcr(&pcr_h, &pcr_l, packet)",
          "new_text": null,
          "old_line_content": "        if (parse_pcr(&pcr_h, &pcr_l, packet) == 0)",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "pes_cb",
          "new_api": null,
          "old_text": "tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,\n                                            pos - ts->raw_packet_size, pcr)",
          "new_text": null,
          "old_line_content": "        if ((ret = tss->u.pes_filter.pes_cb(tss, p, p_end - p, is_start,",
          "new_line_content": "                                   p, p_end - p, 0);",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len)",
          "new_text": null,
          "old_line_content": "    av_dlog(fc, \"tag: 0x%02x len=%d\\n\", desc_tag, desc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "section_cb",
          "new_api": null,
          "old_text": "tss->section_cb(tss1, tss->section_buf, tss->section_h_size)",
          "new_text": null,
          "old_line_content": "            tss->section_cb(tss1, tss->section_buf, tss->section_h_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        desc_es_id = get16(pp, desc_end);",
          "new_line_content": "    if (desc_end > desc_list_end)",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "avio_r8",
          "new_api": null,
          "old_text": "avio_r8(pb)",
          "new_text": null,
          "old_line_content": "        c = avio_r8(pb);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(ts->stream, NULL)",
          "new_text": null,
          "old_line_content": "                        pes->st = avformat_new_stream(ts->stream, NULL);",
          "new_line_content": "                    /* it must be an mpeg2 PES stream */",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "url_feof",
          "new_api": null,
          "old_text": "url_feof(pb)",
          "new_text": null,
          "old_line_content": "        if (url_feof(pb))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "new_line_content": "    switch(desc_tag) {",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"Filter: pid=0x%x\\n\", pid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "mpegts_set_stream_info",
          "new_api": null,
          "old_text": "mpegts_set_stream_info(pes->st, pes, 0, 0)",
          "new_text": null,
          "old_line_content": "                        mpegts_set_stream_info(pes->st, pes, 0, 0);",
          "new_line_content": "                    if ((pes->st && pes->st->discard == AVDISCARD_ALL &&",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, -1, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, -1, SEEK_CUR);",
          "new_line_content": "   get_packet_size() ?) */",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSFilter))",
          "new_text": null,
          "old_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "new_line_content": "                                         SectionCallback *section_cb, void *opaque,",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(pes->header + 4)",
          "new_text": null,
          "old_line_content": "                    pes->total_size = AV_RB16(pes->header + 4);",
          "new_line_content": "                        goto skip;",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "mpegts_open_section_filter",
          "new_api": null,
          "old_text": "mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1)",
          "new_text": null,
          "old_line_content": "                mpegts_open_section_filter(ts, pid, m4sl_cb, ts, 1);",
          "new_line_content": "        for (i = 0; i < mp4_descr_count; i++)",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\")",
          "new_text": null,
          "old_line_content": "    av_log(s, AV_LOG_ERROR, \"max resync size reached, could not find sync byte\\n\");",
          "new_line_content": "    int c, i;",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "av_buffer_alloc",
          "new_api": null,
          "old_text": "av_buffer_alloc(pes->total_size +\n                                                  FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size +",
          "new_line_content": "                        pes->st->id = pes->pid;",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "ffio_init_context",
          "new_api": null,
          "old_text": "ffio_init_context(&pb, mp4_descr->dec_config_descr,\n                          mp4_descr->dec_config_descr_len, 0, NULL, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "            ffio_init_context(&pb, mp4_descr->dec_config_descr,",
          "new_line_content": "                st->codec->extradata_size > 0)",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "ff_mp4_read_dec_config_descr",
          "new_api": null,
          "old_text": "ff_mp4_read_dec_config_descr(fc, st, &pb)",
          "new_text": null,
          "old_line_content": "            ff_mp4_read_dec_config_descr(fc, st, &pb);",
          "new_line_content": "            if (st->codec->codec_id == AV_CODEC_ID_MPEG4SYSTEMS)",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "ffio_read_indirect",
          "new_api": null,
          "old_text": "ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data)",
          "new_text": null,
          "old_line_content": "        len = ffio_read_indirect(pb, buf, TS_PACKET_SIZE, data);",
          "new_line_content": "    /* no sync found */",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(filter)",
          "new_text": null,
          "old_line_content": "        av_free(filter);",
          "new_line_content": "    ts->pids[pid] = filter;",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, -TS_PACKET_SIZE, SEEK_CUR);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": "mpegts_resync",
          "new_api": null,
          "old_text": "mpegts_resync(s)",
          "new_text": null,
          "old_line_content": "            if (mpegts_resync(s) < 0)",
          "new_line_content": "    AVIOContext *pb = s->pb;",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[1] = get8(pp, desc_end);",
          "new_line_content": "                          mp4_descr->dec_config_descr_len, 0, NULL, NULL, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "                return AVERROR(EAGAIN);",
          "new_line_content": "    int len;",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": null,
          "old_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "                st->codec->extradata_size > 0){",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[0] = get8(pp, desc_end);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[1] = get8(pp, desc_end);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        language[2] = get8(pp, desc_end);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MpegTSFilter))",
          "new_text": null,
          "old_line_content": "    filter = av_mallocz(sizeof(MpegTSFilter));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "avio_skip",
          "new_api": null,
          "old_text": "avio_skip(pb, skip)",
          "new_text": null,
          "old_line_content": "        avio_skip(pb, skip);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(fc, \"DVB sub with multiple IDs\")",
          "new_text": null,
          "old_line_content": "                avpriv_request_sample(fc, \"DVB sub with multiple IDs\");",
          "new_line_content": "        case 0x20: /* DVB subtitles (for the hard of hearing) with no monitor aspect ratio criticality */",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "            st->codec->extradata = av_malloc(4 + FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "        case 0x22: /* DVB subtitles (for the hard of hearing) for display on 16:9 aspect ratio monitor */",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    if (avio_tell(s->pb) != ts->last_pos) {",
          "new_line_content": "    if (skip > 0)",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"Skipping after seek\\n\")",
          "new_text": null,
          "old_line_content": "        av_dlog(ts->stream, \"Skipping after seek\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(st->codec->extradata, *pp, 4)",
          "new_text": null,
          "old_line_content": "                memcpy(st->codec->extradata, *pp, 4);",
          "new_line_content": "        case 0x25: /* DVB subtitles (for the hard of hearing) with plano-stereoscopic disparity for display on a high definition monitor */",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&filter->u.section_filter.section_buf)",
          "new_text": null,
          "old_line_content": "        av_freep(&filter->u.section_filter.section_buf);",
          "new_line_content": "    pes->pes_cb = pes_cb;",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&pes->buffer)",
          "new_text": null,
          "old_line_content": "        av_buffer_unref(&pes->buffer);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&st->metadata, \"language\", language, 0)",
          "new_text": null,
          "old_line_content": "        av_dict_set(&st->metadata, \"language\", language, 0);",
          "new_line_content": "        if (st->codec->extradata) {",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&pes->buffer)",
          "new_text": null,
          "old_line_content": "                   av_buffer_unref(&pes->buffer);",
          "new_line_content": "    uint8_t *data;",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&filter->u.pes_filter.opaque)",
          "new_text": null,
          "old_line_content": "            av_freep(&filter->u.pes_filter.opaque);",
          "new_line_content": "    int pid;",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "            language[i + 1] = get8(pp, desc_end);",
          "new_line_content": "            if (st->codec->extradata) {",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pes->header + pes->data_index, p, len)",
          "new_text": null,
          "old_line_content": "            memcpy(pes->header + pes->data_index, p, len);",
          "new_line_content": "            if (pes->data_index == PES_HEADER_SIZE) {",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "            language[i + 2] = get8(pp, desc_end);",
          "new_line_content": "                st->codec->extradata_size = 4;",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        switch (get8(pp, desc_end)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "    memset(packet + TS_PACKET_SIZE, 0, FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                   pes->data_index = 0;",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(stat, 0, packet_size*sizeof(int))",
          "new_text": null,
          "old_line_content": "    memset(stat, 0, packet_size*sizeof(int));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->dts = pes->pts = ff_parse_pes_pts(r);",
          "new_line_content": "            p += len;",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "bytestream_get_le32",
          "new_api": null,
          "old_text": "bytestream_get_le32(pp)",
          "new_text": null,
          "old_line_content": "        st->codec->codec_tag = bytestream_get_le32(pp);",
          "new_line_content": "            case 0x01: st->disposition |= AV_DISPOSITION_CLEAN_EFFECTS; break;",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag)",
          "new_text": null,
          "old_line_content": "        av_dlog(fc, \"reg_desc=%.4s\\n\", (char*)&st->codec->codec_tag);",
          "new_line_content": "            case 0x02: st->disposition |= AV_DISPOSITION_HEARING_IMPAIRED; break;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->pts = ff_parse_pes_pts(r);",
          "new_line_content": "                const uint8_t *r;",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "mpegts_find_stream_type",
          "new_api": null,
          "old_text": "mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types)",
          "new_text": null,
          "old_line_content": "            mpegts_find_stream_type(st, st->codec->codec_tag, REGD_types);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "ff_parse_pes_pts",
          "new_api": null,
          "old_text": "ff_parse_pes_pts(r)",
          "new_text": null,
          "old_line_content": "                    pes->dts = ff_parse_pes_pts(r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "            ret = AVERROR(EAGAIN);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "get8",
          "new_api": null,
          "old_text": "get8(pp, desc_end)",
          "new_text": null,
          "old_line_content": "        st->stream_identifier = 1 + get8(pp, desc_end);",
          "new_line_content": "            language[i - 1] = 0;",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "handle_packet",
          "new_api": null,
          "old_text": "handle_packet(ts, data)",
          "new_text": null,
          "old_line_content": "        ret = handle_packet(ts, data);",
          "new_line_content": "        if (nb_packets != 0 && packet_num >= nb_packets ||",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "finished_reading_packet",
          "new_api": null,
          "old_text": "finished_reading_packet(s, ts->raw_packet_size)",
          "new_text": null,
          "old_line_content": "        finished_reading_packet(s, ts->raw_packet_size);",
          "new_line_content": "            ts->stop_parse > 1) {",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    ts->last_pos = avio_tell(s->pb);",
          "new_line_content": "        if (ts->stop_parse > 0)",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    score    = analyze(buf, size, TS_PACKET_SIZE, NULL);",
          "new_line_content": "    return best_score;",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    dvhs_score    = analyze(buf, size, TS_DVHS_PACKET_SIZE, NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(buf, size, TS_FEC_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "    fec_score= analyze(buf, size, TS_FEC_PACKET_SIZE, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",\n            score, dvhs_score, fec_score)",
          "new_text": null,
          "old_line_content": "    av_dlog(NULL, \"score: %d, dvhs_score: %d, fec_score: %d \\n\",",
          "new_line_content": "/* autodetect fec presence. Must have at least 1024 bytes  */",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "read_sl_header",
          "new_api": null,
          "old_text": "read_sl_header(pes, &pes->sl, p, buf_size)",
          "new_text": null,
          "old_line_content": "                    int sl_header_bytes = read_sl_header(pes, &pes->sl, p, buf_size);",
          "new_line_content": "                        (r + 2) <= (pes->header + pes->pes_header_size)) {",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"PMT: len %i\\n\", section_len)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"PMT: len %i\\n\", section_len);",
          "new_line_content": "    PESContext *pes;",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "hex_dump_debug",
          "new_api": null,
          "old_text": "hex_dump_debug(ts->stream, section, section_len)",
          "new_text": null,
          "old_line_content": "    hex_dump_debug(ts->stream, section, section_len);",
          "new_line_content": "    AVStream *st;",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(check_count - i, CHECK_BLOCK)",
          "new_text": null,
          "old_line_content": "        int left = FFMIN(check_count - i, CHECK_BLOCK);",
          "new_line_content": "    int maxscore=0;",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "av_find_program_from_stream",
          "new_api": null,
          "old_text": "av_find_program_from_stream(pes->stream, p, pes->st->index)",
          "new_text": null,
          "old_line_content": "                    while ((p = av_find_program_from_stream(pes->stream, p, pes->st->index))) {",
          "new_line_content": "                /* we got the full header. We parse it and get the payload */",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf + TS_PACKET_SIZE     *i, TS_PACKET_SIZE     *left, TS_PACKET_SIZE     , NULL)",
          "new_text": null,
          "old_line_content": "        int score     = analyze(p->buf + TS_PACKET_SIZE     *i, TS_PACKET_SIZE     *left, TS_PACKET_SIZE     , NULL);",
          "new_line_content": "    int sumscore=0;",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": "parse_section_header",
          "new_api": null,
          "old_text": "parse_section_header(h, &p, p_end)",
          "new_text": null,
          "old_line_content": "    if (parse_section_header(h, &p, p_end) < 0)",
          "new_line_content": "    uint32_t prog_reg_desc = 0; /* registration descriptor */",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf + TS_DVHS_PACKET_SIZE*i, TS_DVHS_PACKET_SIZE*left, TS_DVHS_PACKET_SIZE, NULL)",
          "new_text": null,
          "old_line_content": "        int dvhs_score= analyze(p->buf + TS_DVHS_PACKET_SIZE*i, TS_DVHS_PACKET_SIZE*left, TS_DVHS_PACKET_SIZE, NULL);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "analyze",
          "new_api": null,
          "old_text": "analyze(p->buf + TS_FEC_PACKET_SIZE *i, TS_FEC_PACKET_SIZE *left, TS_FEC_PACKET_SIZE , NULL)",
          "new_text": null,
          "old_line_content": "        int fec_score = analyze(p->buf + TS_FEC_PACKET_SIZE *i, TS_FEC_PACKET_SIZE *left, TS_FEC_PACKET_SIZE , NULL);",
          "new_line_content": "    int check_count= size / TS_FEC_PACKET_SIZE;",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",\n           h->id, h->sec_num, h->last_sec_num)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"sid=0x%x sec_num=%d/%d\\n\",",
          "new_line_content": "    int mp4_descr_count = 0;",
          "content_same": false
        },
        {
          "line": 2014,
          "old_api": "FFMAX3",
          "new_api": null,
          "old_text": "FFMAX3(score, dvhs_score, fec_score)",
          "new_text": null,
          "old_line_content": "        score = FFMAX3(score, dvhs_score, fec_score);",
          "new_line_content": "#define CHECK_COUNT 10",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(maxscore, score)",
          "new_text": null,
          "old_line_content": "        maxscore = FFMAX(maxscore, score);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "clear_program",
          "new_api": null,
          "old_text": "clear_program(ts, h->id)",
          "new_text": null,
          "old_line_content": "    clear_program(ts, h->id);",
          "new_line_content": "    p_end = section + section_len - 4;",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    pcr_pid = get16(&p, p_end);",
          "new_line_content": "    p = section;",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "set_pcr_pid",
          "new_api": null,
          "old_text": "set_pcr_pid(ts->stream, h->id, pcr_pid)",
          "new_text": null,
          "old_line_content": "    set_pcr_pid(ts->stream, h->id, pcr_pid);",
          "new_line_content": "           h->id, h->sec_num, h->last_sec_num);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "av_dlog",
          "new_api": null,
          "old_text": "av_dlog(ts->stream, \"pcr_pid=0x%x\\n\", pcr_pid)",
          "new_text": null,
          "old_line_content": "    av_dlog(ts->stream, \"pcr_pid=0x%x\\n\", pcr_pid);",
          "new_line_content": "    if (h->tid != PMT_TID)",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "get16",
          "new_api": null,
          "old_text": "get16(&p, p_end)",
          "new_text": null,
          "old_line_content": "    program_info_length = get16(&p, p_end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "new_pes_packet",
          "new_api": null,
          "old_text": "new_pes_packet(pes, ts->pkt)",
          "new_text": null,
          "old_line_content": "                    new_pes_packet(pes, ts->pkt);",
          "new_line_content": "                                    break;",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "av_buffer_alloc",
          "new_api": null,
          "old_text": "av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "                    pes->buffer = av_buffer_alloc(pes->total_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "                            }",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(p)",
          "new_text": null,
          "old_line_content": "    c = AV_RB16(p);",
          "new_line_content": "    return c;",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                        return AVERROR(ENOMEM);",
          "new_line_content": "                    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 70,
      "total_additions": 279,
      "total_deletions": 279,
      "total_api_changes": 628
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 628,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          291,
          293,
          295,
          297,
          299,
          301,
          303,
          305,
          307,
          309,
          311
        ]
      }
    },
    "api_calls_before": 365,
    "api_calls_after": 365,
    "diff_info": {
      "added_lines": 12,
      "removed_lines": 1,
      "total_diff_lines": 41
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3babc711d84ae5ecf6d852c0003e75b16f4e5812",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3babc711d84ae5ecf6d852c0003e75b16f4e5812/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3babc711d84ae5ecf6d852c0003e75b16f4e5812/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3babc711d84ae5ecf6d852c0003e75b16f4e5812/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 332,
          "old_api": "fill_rectangle",
          "new_api": "pack16to32",
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, (uint8_t)ref[0], 1)",
          "new_text": "pack16to32(mv[1][0],mv[1][1])",
          "old_line_content": "                fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, (uint8_t)ref[0], 1);",
          "new_line_content": "                fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, pack16to32(mv[1][0],mv[1][1]), 4);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "IS_INTRA",
          "new_api": "IS_DIRECT",
          "old_text": "IS_INTRA(mb_type_col[y8])",
          "new_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "old_line_content": "                if(IS_INTRA(mb_type_col[y8])){",
          "new_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "fill_rectangle",
          "new_api": "pack16to32",
          "old_text": "fill_rectangle(&h-> mv_cache[1][scan8[0]], 4, 4, 8, mv1, 4)",
          "new_text": "pack16to32(mv_l0[0],mv_l0[1])",
          "old_line_content": "            fill_rectangle(&h-> mv_cache[1][scan8[0]], 4, 4, 8, mv1, 4);",
          "new_line_content": "                mv0= pack16to32(mv_l0[0],mv_l0[1]);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "fill_rectangle",
          "new_api": "IS_DIRECT",
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "new_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "old_line_content": "                    fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "new_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "pack16to32",
          "new_api": "fill_rectangle",
          "old_text": "pack16to32(mx,my)",
          "new_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1)",
          "old_line_content": "                    fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, pack16to32(mx,my), 4);",
          "new_line_content": "                fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "pack16to32",
          "new_api": "IS_SUB_8X8",
          "old_text": "pack16to32(mx-mv_col[0],my-mv_col[1])",
          "new_text": "IS_SUB_8X8(sub_mb_type)",
          "old_line_content": "                    fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, pack16to32(mx-mv_col[0],my-mv_col[1]), 4);",
          "new_line_content": "                if(IS_SUB_8X8(sub_mb_type)){",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 384,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(*mb_type)",
          "old_line_content": "                const int y8 = i8>>1;",
          "new_line_content": "            int y_shift  = 2*!IS_INTERLACED(*mb_type);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(h->sps.direct_8x8_inference_flag)",
          "old_line_content": "                int ref0, scale;",
          "new_line_content": "            assert(h->sps.direct_8x8_inference_flag);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "old_line_content": "                    continue;",
          "new_line_content": "                fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type_col[y8])",
          "old_line_content": "                }",
          "new_line_content": "                if(IS_INTRA(mb_type_col[y8])){",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "old_line_content": "",
          "new_line_content": "                    fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                ref0 = l1ref0[x8 + y8*b8_stride];",
          "new_line_content": "                    fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                if(ref0 >= 0)",
          "new_line_content": "                    fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1)",
          "old_line_content": "                    int mx = (scale * mv_col[0] + 128) >> 8;",
          "new_line_content": "                fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1);",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mx,my)",
          "old_line_content": "        }",
          "new_line_content": "                    fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, pack16to32(mx,my), 4);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mx-mv_col[0],my-my_col)",
          "old_line_content": "",
          "new_line_content": "                    fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, pack16to32(mx-mv_col[0],my-my_col), 4);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "IS_16X16",
          "old_text": null,
          "new_text": "IS_16X16(*mb_type)",
          "old_line_content": "                ref=mv0=mv1=0;",
          "new_line_content": "        if(IS_16X16(*mb_type)){",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[1][scan8[0]], 4, 4, 8, 0, 1)",
          "old_line_content": "                                                : map_col_to_list0[1][l1ref1[0] + ref_offset];",
          "new_line_content": "            fill_rectangle(&h->ref_cache[1][scan8[0]], 4, 4, 8, 0, 1);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type_col[0])",
          "old_line_content": "                const int scale = dist_scale_factor[ref0];",
          "new_line_content": "            if(IS_INTRA(mb_type_col[0])){",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1])",
          "old_line_content": "        }else{",
          "new_line_content": "                mv1= pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1]);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[0][scan8[0]], 4, 4, 8, ref, 1)",
          "old_line_content": "                const int x8 = i8&1;",
          "new_line_content": "            fill_rectangle(&h->ref_cache[0][scan8[0]], 4, 4, 8, ref, 1);",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[0][scan8[0]], 4, 4, 8, mv0, 4)",
          "old_line_content": "                const int y8 = i8>>1;",
          "new_line_content": "            fill_rectangle(&h-> mv_cache[0][scan8[0]], 4, 4, 8, mv0, 4);",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[1][scan8[0]], 4, 4, 8, mv1, 4)",
          "old_line_content": "                int ref0, scale;",
          "new_line_content": "            fill_rectangle(&h-> mv_cache[1][scan8[0]], 4, 4, 8, mv1, 4);",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "IS_DIRECT",
          "old_text": null,
          "new_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "old_line_content": "                    continue;",
          "new_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "old_line_content": "                    continue;",
          "new_line_content": "                fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type_col[0])",
          "old_line_content": "                }",
          "new_line_content": "                if(IS_INTRA(mb_type_col[0])){",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, (uint8_t)ref[1], 1)",
          "old_line_content": "",
          "new_line_content": "                fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, (uint8_t)ref[1], 1);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "old_line_content": "",
          "new_line_content": "                    fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                ref0 = l1ref0[x8 + y8*b8_stride];",
          "new_line_content": "                    fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type_col[0])",
          "old_line_content": "                                              || (l1ref0[x8 + y8*b8_stride] < 0 && l1ref1[x8 + y8*b8_stride] == 0",
          "new_line_content": "                if(!IS_INTRA(mb_type_col[0]) && !h->ref_list[1][0].long_ref && (   l1ref0[x8 + y8*b8_stride] == 0",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                if(ref0 >= 0)",
          "new_line_content": "                    fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "IS_SUB_8X8",
          "old_text": null,
          "new_text": "IS_SUB_8X8(sub_mb_type)",
          "old_line_content": "                        const int16_t *mv_col = l1mv[x8*3 + y8*3*b4_stride];",
          "new_line_content": "                    if(IS_SUB_8X8(sub_mb_type)){",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(mv_col[1])",
          "old_line_content": "                            if(ref[0] == 0)",
          "new_line_content": "                        if(FFABS(mv_col[0]) <= 1 && FFABS(mv_col[1]) <= 1){",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                            if(ref[1] == 0)",
          "new_line_content": "                                fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "fill_rectangle",
          "old_text": null,
          "new_text": "fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "old_line_content": "                        }",
          "new_line_content": "                                fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(mv_col[1])",
          "old_line_content": "                                *(uint32_t*)h->mv_cache[0][scan8[i8*4+i4]] = 0;",
          "new_line_content": "                        if(FFABS(mv_col[0]) <= 1 && FFABS(mv_col[1]) <= 1){",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mx,my)",
          "old_line_content": "                    int16_t *mv_l0 = h->mv_cache[0][scan8[i8*4+i4]];",
          "new_line_content": "                    fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, pack16to32(mx,my), 4);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mx-mv_col[0],my-mv_col[1])",
          "old_line_content": "                    mv_l0[0] = (scale * mv_col[0] + 128) >> 8;",
          "new_line_content": "                    fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, pack16to32(mx-mv_col[0],my-mv_col[1]), 4);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "pack16to32",
          "old_text": null,
          "new_text": "pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1])",
          "old_line_content": "}",
          "new_line_content": "                        pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1]);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(*mb_type)",
          "old_line_content": "        ref_offset = (h->ref_list[1][0].mbaff<<4) & (mb_type_col[0]>>3); //if(h->ref_list[1][0].mbaff && IS_INTERLACED(mb_type_col[0])) ref_offset=16 else 0",
          "new_line_content": "        if(FRAME_MBAFF && IS_INTERLACED(*mb_type)){",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mb_type_col[0])",
          "old_line_content": "                const int x8 = i8&1;",
          "new_line_content": "        if(IS_INTERLACED(*mb_type) != IS_INTERLACED(mb_type_col[0])){",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 388,
          "old_api": "IS_DIRECT",
          "new_api": null,
          "old_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "new_text": null,
          "old_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "new_line_content": "                const int x8 = i8&1;",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "new_text": null,
          "old_line_content": "                fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "                h->sub_mb_type[i8] = sub_mb_type;",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1)",
          "new_text": null,
          "old_line_content": "                fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1);",
          "new_line_content": "                else{",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mx,my)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, pack16to32(mx,my), 4);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mx-mv_col[0],my-my_col)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, pack16to32(mx-mv_col[0],my-my_col), 4);",
          "new_line_content": "                    const int16_t *mv_col = l1mv[x8*3 + y8*b4_stride];",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "IS_16X16",
          "new_api": null,
          "old_text": "IS_16X16(*mb_type)",
          "new_text": null,
          "old_line_content": "        if(IS_16X16(*mb_type)){",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[1][scan8[0]], 4, 4, 8, 0, 1)",
          "new_text": null,
          "old_line_content": "            fill_rectangle(&h->ref_cache[1][scan8[0]], 4, 4, 8, 0, 1);",
          "new_line_content": "        /* one-to-one mv scaling */",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type_col[0])",
          "new_text": null,
          "old_line_content": "            if(IS_INTRA(mb_type_col[0])){",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mv_l0[0],mv_l0[1])",
          "new_text": null,
          "old_line_content": "                mv0= pack16to32(mv_l0[0],mv_l0[1]);",
          "new_line_content": "                const int16_t *mv_col = l1ref0[0] >= 0 ? l1mv0[0] : l1mv1[0];",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1])",
          "new_text": null,
          "old_line_content": "                mv1= pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1]);",
          "new_line_content": "                int mv_l0[2];",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[0]], 4, 4, 8, ref, 1)",
          "new_text": null,
          "old_line_content": "            fill_rectangle(&h->ref_cache[0][scan8[0]], 4, 4, 8, ref, 1);",
          "new_line_content": "                mv_l0[1] = (scale * mv_col[1] + 128) >> 8;",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h-> mv_cache[0][scan8[0]], 4, 4, 8, mv0, 4)",
          "new_text": null,
          "old_line_content": "            fill_rectangle(&h-> mv_cache[0][scan8[0]], 4, 4, 8, mv0, 4);",
          "new_line_content": "                ref= ref0;",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "IS_DIRECT",
          "new_api": null,
          "old_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "new_text": null,
          "old_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "new_line_content": "                const int x8 = i8&1;",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "IS_DIRECT",
          "new_api": null,
          "old_text": "IS_DIRECT(h->sub_mb_type[i8])",
          "new_text": null,
          "old_line_content": "                if(is_b8x8 && !IS_DIRECT(h->sub_mb_type[i8]))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1)",
          "new_text": null,
          "old_line_content": "                fill_rectangle(&h->ref_cache[1][scan8[i8*4]], 2, 2, 8, 0, 1);",
          "new_line_content": "                const int16_t (*l1mv)[2]= l1mv0;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type_col[0])",
          "new_text": null,
          "old_line_content": "                if(IS_INTRA(mb_type_col[0])){",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mv[0][0],mv[0][1])",
          "new_text": null,
          "old_line_content": "                fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, pack16to32(mv[0][0],mv[0][1]), 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h-> mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                    fill_rectangle(&h-> mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "                h->sub_mb_type[i8] = sub_mb_type;",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type_col[0])",
          "new_text": null,
          "old_line_content": "                if(!IS_INTRA(mb_type_col[0]) && !h->ref_list[1][0].long_ref && (   l1ref0[x8 + y8*b8_stride] == 0",
          "new_line_content": "                /* col_zero_flag */",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "IS_SUB_8X8",
          "new_api": null,
          "old_text": "IS_SUB_8X8(sub_mb_type)",
          "new_text": null,
          "old_line_content": "                    if(IS_SUB_8X8(sub_mb_type)){",
          "new_line_content": "                    const int16_t (*l1mv)[2]= l1ref0[x8 + y8*b8_stride] == 0 ? l1mv0 : l1mv1;",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(mv_col[1])",
          "new_text": null,
          "old_line_content": "                        if(FFABS(mv_col[0]) <= 1 && FFABS(mv_col[1]) <= 1){",
          "new_line_content": "                        const int16_t *mv_col = l1mv[x8*3 + y8*3*b4_stride];",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                                fill_rectangle(&h->mv_cache[0][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "                            if(ref[0] == 0)",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1)",
          "new_text": null,
          "old_line_content": "                fill_rectangle(&h->ref_cache[0][scan8[i8*4]], 2, 2, 8, ref0, 1);",
          "new_line_content": "                    ref0 = map_col_to_list0[1][l1ref1[x8 + y8*b8_stride] + ref_offset];",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "fill_rectangle",
          "new_api": null,
          "old_text": "fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4)",
          "new_text": null,
          "old_line_content": "                                fill_rectangle(&h->mv_cache[1][scan8[i8*4]], 2, 2, 8, 0, 4);",
          "new_line_content": "                            if(ref[1] == 0)",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "IS_SUB_8X8",
          "new_api": null,
          "old_text": "IS_SUB_8X8(sub_mb_type)",
          "new_text": null,
          "old_line_content": "                if(IS_SUB_8X8(sub_mb_type)){",
          "new_line_content": "                    l1mv= l1mv1;",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(mv_col[1])",
          "new_text": null,
          "old_line_content": "                        if(FFABS(mv_col[0]) <= 1 && FFABS(mv_col[1]) <= 1){",
          "new_line_content": "                    for(i4=0; i4<4; i4++){",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "pack16to32",
          "new_api": null,
          "old_text": "pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1])",
          "new_text": null,
          "old_line_content": "                        pack16to32(mv_l0[0]-mv_col[0],mv_l0[1]-mv_col[1]);",
          "new_line_content": "                    const int16_t *mv_col = l1mv[x8*2 + (i4&1) + (y8*2 + (i4>>1))*b4_stride];",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(*mb_type)",
          "new_text": null,
          "old_line_content": "        if(FRAME_MBAFF && IS_INTERLACED(*mb_type)){",
          "new_line_content": "    }else{ /* direct temporal mv pred */",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mb_type_col[0])",
          "new_text": null,
          "old_line_content": "        if(IS_INTERLACED(*mb_type) != IS_INTERLACED(mb_type_col[0])){",
          "new_line_content": "            map_col_to_list0[1] = h->map_col_to_list0_field[s->mb_y&1][1];",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(*mb_type)",
          "new_text": null,
          "old_line_content": "            int y_shift  = 2*!IS_INTERLACED(*mb_type);",
          "new_line_content": "            dist_scale_factor   =h->dist_scale_factor_field[s->mb_y&1];",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(h->sps.direct_8x8_inference_flag)",
          "new_text": null,
          "old_line_content": "            assert(h->sps.direct_8x8_inference_flag);",
          "new_line_content": "        }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 6,
      "total_additions": 35,
      "total_deletions": 35,
      "total_api_changes": 76
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 76,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          322,
          364,
          368,
          369,
          348
        ]
      }
    },
    "api_calls_before": 105,
    "api_calls_after": 105,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 34
    }
  }
}
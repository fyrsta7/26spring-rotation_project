{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/963247b5f36a70f0ea083f5f43356d498fd85c47",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/963247b5f36a70f0ea083f5f43356d498fd85c47/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/963247b5f36a70f0ea083f5f43356d498fd85c47/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/963247b5f36a70f0ea083f5f43356d498fd85c47/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 703,
          "old_api": "RGBA",
          "new_api": "FFMAX",
          "old_text": "RGBA(v/2,v,v/2,v)",
          "new_text": "FFMAX(i - 1, 1)",
          "old_line_content": "        AV_WN32(rect->data[1] + 4*list_inv[i], RGBA(v/2,v,v/2,v));",
          "new_line_content": "    count = FFMAX(i - 1, 1);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "memcpy",
          "new_api": "AVERROR",
          "old_text": "memcpy(rect->data[1], clut_table, (1 << region->depth) * sizeof(uint32_t))",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            memcpy(rect->data[1], clut_table, (1 << region->depth) * sizeof(uint32_t));",
          "new_line_content": "                ret = AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "compute_default_clut",
          "new_api": "memcpy",
          "old_text": "compute_default_clut(rect, rect->w, rect->h)",
          "new_text": "memcpy(rect->data[0], region->pbuf, region->buf_size)",
          "old_line_content": "                compute_default_clut(rect, rect->w, rect->h);",
          "new_line_content": "            memcpy(rect->data[0], region->pbuf, region->buf_size);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "get_object",
          "new_api": "AV_RB16",
          "old_text": "get_object(ctx, object_id)",
          "new_text": "AV_RB16(buf)",
          "old_line_content": "    object = get_object(ctx, object_id);",
          "new_line_content": "    object_id = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "av_malloc",
          "new_api": "get_clut",
          "old_text": "av_malloc(sizeof(DVBSubCLUT))",
          "new_text": "get_clut(ctx, clut_id)",
          "old_line_content": "        clut = av_malloc(sizeof(DVBSubCLUT));",
          "new_line_content": "    clut = get_clut(ctx, clut_id);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "ff_dlog",
          "new_api": "YUV_TO_RGB1_CCIR",
          "old_text": "ff_dlog(avctx, \"clut %d := (%d,%d,%d,%d)\\n\", entry_id, r, g, b, alpha)",
          "new_text": "YUV_TO_RGB1_CCIR(cb, cr)",
          "old_line_content": "        ff_dlog(avctx, \"clut %d := (%d,%d,%d,%d)\\n\", entry_id, r, g, b, alpha);",
          "new_line_content": "        YUV_TO_RGB1_CCIR(cb, cr);",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "av_mallocz",
          "new_api": "get_region",
          "old_text": "av_mallocz(sizeof(DVBSubRegion))",
          "new_text": "get_region(ctx, region_id)",
          "old_line_content": "        region = av_mallocz(sizeof(DVBSubRegion));",
          "new_line_content": "    region = get_region(ctx, region_id);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "av_image_check_size2",
          "new_api": "AV_RB16",
          "old_text": "av_image_check_size2(region->width, region->height, avctx->max_pixels, AV_PIX_FMT_PAL8, 0, avctx)",
          "new_text": "AV_RB16(buf)",
          "old_line_content": "    ret = av_image_check_size2(region->width, region->height, avctx->max_pixels, AV_PIX_FMT_PAL8, 0, avctx);",
          "new_line_content": "    region->height = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "av_log",
          "new_api": "av_image_check_size2",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Pixel buffer memory constraint violated\\n\")",
          "new_text": "av_image_check_size2(region->width, region->height, avctx->max_pixels, AV_PIX_FMT_PAL8, 0, avctx)",
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Pixel buffer memory constraint violated\\n\");",
          "new_line_content": "    ret = av_image_check_size2(region->width, region->height, avctx->max_pixels, AV_PIX_FMT_PAL8, 0, avctx);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "memset",
          "new_api": "ff_dlog",
          "old_text": "memset(region->pbuf, region->bgcolor, region->buf_size)",
          "new_text": "ff_dlog(avctx, \"Region %d, (%dx%d)\\n\", region_id, region->width, region->height)",
          "old_line_content": "        memset(region->pbuf, region->bgcolor, region->buf_size);",
          "new_line_content": "    ff_dlog(avctx, \"Region %d, (%dx%d)\\n\", region_id, region->width, region->height);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "delete_region_display_list",
          "new_api": "ff_dlog",
          "old_text": "delete_region_display_list(ctx, region)",
          "new_text": "ff_dlog(avctx, \"Fill region (%d)\\n\", region->bgcolor)",
          "old_line_content": "    delete_region_display_list(ctx, region);",
          "new_line_content": "        ff_dlog(avctx, \"Fill region (%d)\\n\", region->bgcolor);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "AV_RB16",
          "new_api": "delete_region_display_list",
          "old_text": "AV_RB16(buf)",
          "new_text": "delete_region_display_list(ctx, region)",
          "old_line_content": "        object_id = AV_RB16(buf);",
          "new_line_content": "    delete_region_display_list(ctx, region);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "get_object",
          "new_api": "AV_RB16",
          "old_text": "get_object(ctx, object_id)",
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        object = get_object(ctx, object_id);",
          "new_line_content": "        object_id = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "av_mallocz",
          "new_api": "get_object",
          "old_text": "av_mallocz(sizeof(DVBSubObject))",
          "new_text": "get_object(ctx, object_id)",
          "old_line_content": "            object = av_mallocz(sizeof(DVBSubObject));",
          "new_line_content": "        object = get_object(ctx, object_id);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "save_subtitle_set",
          "new_api": "ff_dlog",
          "old_text": "save_subtitle_set(avctx, sub, got_output)",
          "new_text": "ff_dlog(avctx, \"Page time out %ds, state %d\\n\", ctx->time_out, page_state)",
          "old_line_content": "        save_subtitle_set(avctx, sub, got_output);",
          "new_line_content": "    ff_dlog(avctx, \"Page time out %ds, state %d\\n\", ctx->time_out, page_state);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "delete_regions",
          "new_api": "save_subtitle_set",
          "old_text": "delete_regions(ctx)",
          "new_text": "save_subtitle_set(avctx, sub, got_output)",
          "old_line_content": "        delete_regions(ctx);",
          "new_line_content": "        save_subtitle_set(avctx, sub, got_output);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "fprintf",
          "new_api": "perror",
          "old_text": "fprintf(f, \"P6\\n\"\n            \"%d %d\\n\"\n            \"%d\\n\",\n            w, h, 255)",
          "new_text": "perror(fname)",
          "old_line_content": "    fprintf(f, \"P6\\n\"",
          "new_line_content": "        perror(fname);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "fclose",
          "new_api": "putc",
          "old_text": "fclose(f)",
          "new_text": "putc((v >> 0) & 0xff, f)",
          "old_line_content": "    fclose(f);",
          "new_line_content": "            putc((v >> 0) & 0xff, f);",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "snprintf",
          "new_api": "fclose",
          "old_text": "snprintf(fname2, sizeof(fname2), \"%s-a.pgm\", filename)",
          "new_text": "fclose(f)",
          "old_line_content": "    snprintf(fname2, sizeof(fname2), \"%s-a.pgm\", filename);",
          "new_line_content": "    fclose(f);",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "fprintf",
          "new_api": "perror",
          "old_text": "fprintf(f, \"P5\\n\"\n            \"%d %d\\n\"\n            \"%d\\n\",\n            w, h, 255)",
          "new_text": "perror(fname2)",
          "old_line_content": "    fprintf(f, \"P5\\n\"",
          "new_line_content": "        perror(fname2);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "fclose",
          "new_api": "putc",
          "old_text": "fclose(f)",
          "new_text": "putc((v >> 24) & 0xff, f)",
          "old_line_content": "    fclose(f);",
          "new_line_content": "            putc((v >> 24) & 0xff, f);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "system",
          "new_api": "fclose",
          "old_text": "system(command)",
          "new_text": "fclose(f)",
          "old_line_content": "    if (system(command) != 0) {",
          "new_line_content": "    fclose(f);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1541,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(*display_def))",
          "old_line_content": "        ctx->display_definition = display_def;",
          "new_line_content": "        display_def             = av_mallocz(sizeof(*display_def));",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "bytestream_get_be16",
          "old_text": null,
          "new_text": "bytestream_get_be16(&buf)",
          "old_line_content": "        avctx->width  = display_def->width;",
          "new_line_content": "    display_def->width   = bytestream_get_be16(&buf) + 1;",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "bytestream_get_be16",
          "old_text": null,
          "new_text": "bytestream_get_be16(&buf)",
          "old_line_content": "        avctx->height = display_def->height;",
          "new_line_content": "    display_def->height  = bytestream_get_be16(&buf) + 1;",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"%02x \", buf[i])",
          "old_line_content": "    }",
          "new_line_content": "        ff_dlog(avctx, \"%02x \", buf[i]);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"\\n\")",
          "old_line_content": "    if (i % 16)",
          "new_line_content": "            ff_dlog(avctx, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"\\n\")",
          "old_line_content": "    version = ((*buf)>>4)&15;",
          "new_line_content": "        ff_dlog(avctx, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "bytestream_get_be16",
          "old_text": null,
          "new_text": "bytestream_get_be16(&buf)",
          "old_line_content": "    }",
          "new_line_content": "        display_def->width  = bytestream_get_be16(&buf) - display_def->x + 1;",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "bytestream_get_be16",
          "old_text": null,
          "new_text": "bytestream_get_be16(&buf)",
          "old_line_content": "",
          "new_line_content": "        display_def->y = bytestream_get_be16(&buf);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "bytestream_get_be16",
          "old_text": null,
          "new_text": "bytestream_get_be16(&buf)",
          "old_line_content": "    return 0;",
          "new_line_content": "        display_def->height = bytestream_get_be16(&buf) - display_def->y + 1;",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(sizeof(DVBSubCLUT))",
          "old_line_content": "",
          "new_line_content": "        clut = av_malloc(sizeof(DVBSubCLUT));",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(clut, &default_clut, sizeof(DVBSubCLUT))",
          "old_line_content": "        clut->version = -1;",
          "new_line_content": "        memcpy(clut, &default_clut, sizeof(DVBSubCLUT));",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "save_subtitle_set",
          "old_text": null,
          "new_text": "save_subtitle_set(avctx, sub, got_output)",
          "old_line_content": "#endif",
          "new_line_content": "        save_subtitle_set(avctx, sub, got_output);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "save_display_set",
          "old_text": null,
          "new_text": "save_display_set(ctx)",
          "old_line_content": "}",
          "new_line_content": "    save_display_set(ctx);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid clut depth 0x%x!\\n\", *buf)",
          "old_line_content": "        full_range = (*buf++) & 1;",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Invalid clut depth 0x%x!\\n\", *buf);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"%02x \", buf[i])",
          "old_line_content": "    }",
          "new_line_content": "        ff_dlog(avctx, \"%02x \", buf[i]);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"\\n\")",
          "old_line_content": "    if (i % 16)",
          "new_line_content": "            ff_dlog(avctx, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"incomplete or broken packet\")",
          "old_line_content": "",
          "new_line_content": "        ff_dlog(avctx, \"incomplete or broken packet\");",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "YUV_TO_RGB2_CCIR",
          "old_text": null,
          "new_text": "YUV_TO_RGB2_CCIR(r, g, b, y)",
          "old_line_content": "        if (!!(depth & 0x80) + !!(depth & 0x40) + !!(depth & 0x20) > 1) {",
          "new_line_content": "        YUV_TO_RGB2_CCIR(r, g, b, y);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"clut %d := (%d,%d,%d,%d)\\n\", entry_id, r, g, b, alpha)",
          "old_line_content": "            if (avctx->strict_std_compliance > FF_COMPLIANCE_NORMAL)",
          "new_line_content": "        ff_dlog(avctx, \"clut %d := (%d,%d,%d,%d)\\n\", entry_id, r, g, b, alpha);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"More than one bit level marked: %x\\n\", depth)",
          "old_line_content": "        }",
          "new_line_content": "            ff_dlog(avctx, \"More than one bit level marked: %x\\n\", depth);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(p)",
          "old_line_content": "        p += 2;",
          "new_line_content": "        page_id = AV_RB16(p);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "RGBA",
          "old_text": null,
          "new_text": "RGBA(r,g,b,255 - alpha)",
          "old_line_content": "        else if (depth & 0x20)",
          "new_line_content": "            clut->clut4[entry_id] = RGBA(r,g,b,255 - alpha);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(p)",
          "old_line_content": "        if (avctx->debug & FF_DEBUG_STARTCODE) {",
          "new_line_content": "        segment_length = AV_RB16(p);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "RGBA",
          "old_text": null,
          "new_text": "RGBA(r,g,b,255 - alpha)",
          "old_line_content": "    }",
          "new_line_content": "            clut->clut16[entry_id] = RGBA(r,g,b,255 - alpha);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "RGBA",
          "old_text": null,
          "new_text": "RGBA(r,g,b,255 - alpha)",
          "old_line_content": "",
          "new_line_content": "            clut->clut256[entry_id] = RGBA(r,g,b,255 - alpha);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_DEBUG, \"segment_type:%d page_id:%d segment_length:%d\\n\", segment_type, page_id, segment_length)",
          "old_line_content": "        if (p_end - p < segment_length) {",
          "new_line_content": "            av_log(avctx, AV_LOG_DEBUG, \"segment_type:%d page_id:%d segment_length:%d\\n\", segment_type, page_id, segment_length);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"incomplete or broken packet\")",
          "old_line_content": "        }",
          "new_line_content": "            ff_dlog(avctx, \"incomplete or broken packet\");",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "dvbsub_parse_page_segment",
          "old_text": null,
          "new_text": "dvbsub_parse_page_segment(avctx, p, segment_length, sub, data_size)",
          "old_line_content": "            case DVBSUB_REGION_SEGMENT:",
          "new_line_content": "                ret = dvbsub_parse_page_segment(avctx, p, segment_length, sub, data_size);",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "dvbsub_parse_region_segment",
          "old_text": null,
          "new_text": "dvbsub_parse_region_segment(avctx, p, segment_length)",
          "old_line_content": "            case DVBSUB_CLUT_SEGMENT:",
          "new_line_content": "                ret = dvbsub_parse_region_segment(avctx, p, segment_length);",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": null,
          "new_api": "dvbsub_parse_clut_segment",
          "old_text": null,
          "new_text": "dvbsub_parse_clut_segment(avctx, p, segment_length)",
          "old_line_content": "                break;",
          "new_line_content": "                ret = dvbsub_parse_clut_segment(avctx, p, segment_length);",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": null,
          "new_api": "dvbsub_parse_object_segment",
          "old_text": null,
          "new_text": "dvbsub_parse_object_segment(avctx, p, segment_length)",
          "old_line_content": "            case DVBSUB_DISPLAYDEFINITION_SEGMENT:",
          "new_line_content": "                ret = dvbsub_parse_object_segment(avctx, p, segment_length);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(DVBSubRegion))",
          "old_line_content": "",
          "new_line_content": "        region = av_mallocz(sizeof(DVBSubRegion));",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "dvbsub_parse_display_definition_segment",
          "old_text": null,
          "new_text": "dvbsub_parse_display_definition_segment(avctx, p,\n                                                              segment_length)",
          "old_line_content": "                break;",
          "new_line_content": "                ret = dvbsub_parse_display_definition_segment(avctx, p,",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        region->version = -1;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "dvbsub_display_end_segment",
          "old_text": null,
          "new_text": "dvbsub_display_end_segment(avctx, p, segment_length, sub, data_size)",
          "old_line_content": "                    avctx->width  = 720;",
          "new_line_content": "                ret = dvbsub_display_end_segment(avctx, p, segment_length, sub, data_size);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "    buf += 2;",
          "new_line_content": "    region->width = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"Subtitling segment type 0x%x, page id %d, length %d\\n\",\n                        segment_type, page_id, segment_length)",
          "old_line_content": "            }",
          "new_line_content": "                ff_dlog(avctx, \"Subtitling segment type 0x%x, page id %d, length %d\\n\",",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Pixel buffer memory constraint violated\\n\")",
          "old_line_content": "        region->width= region->height= 0;",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Pixel buffer memory constraint violated\\n\");",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_DEBUG, \"Missing display_end_segment, emulating\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(avctx, AV_LOG_DEBUG, \"Missing display_end_segment, emulating\\n\");",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(region->pbuf)",
          "old_line_content": "",
          "new_line_content": "        av_free(region->pbuf);",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "dvbsub_display_end_segment",
          "old_text": null,
          "new_text": "dvbsub_display_end_segment(avctx, p, 0, sub, data_size)",
          "old_line_content": "end:",
          "new_line_content": "        dvbsub_display_end_segment(avctx, p, 0, sub, data_size);",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(region->buf_size)",
          "old_line_content": "            region->width =",
          "new_line_content": "        region->pbuf = av_malloc(region->buf_size);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "avsubtitle_free",
          "old_text": null,
          "new_text": "avsubtitle_free(sub)",
          "old_line_content": "        if(ctx->compute_edt == 1 )",
          "new_line_content": "        avsubtitle_free(sub);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        fill = 1;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(int64_t, ctx->prev_start, sub->pts)",
          "old_line_content": "    return p - buf;",
          "new_line_content": "            FFSWAP(int64_t, ctx->prev_start, sub->pts);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"region depth %d is invalid\\n\", region->depth)",
          "old_line_content": "    region->clut = *buf++;",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"region depth %d is invalid\\n\", region->depth);",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "offsetof",
          "old_text": null,
          "new_text": "offsetof(DVBSubContext, compute_edt)",
          "old_line_content": "    {NULL}",
          "new_line_content": "    {\"compute_edt\", \"compute end of time using pts or timeout\", offsetof(DVBSubContext, compute_edt), AV_OPT_TYPE_BOOL, {.i64 = 0}, 0, 1, DS},",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "offsetof",
          "old_text": null,
          "new_text": "offsetof(DVBSubContext, compute_clut)",
          "old_line_content": "};",
          "new_line_content": "    {\"compute_clut\", \"compute clut when not available(-1) or always(1) or never(0)\", offsetof(DVBSubContext, compute_clut), AV_OPT_TYPE_BOOL, {.i64 = -1}, -1, 1, DS},",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "offsetof",
          "old_text": null,
          "new_text": "offsetof(DVBSubContext, substream)",
          "old_line_content": "static const AVClass dvbsubdec_class = {",
          "new_line_content": "    {\"dvb_substream\", \"\", offsetof(DVBSubContext, substream), AV_OPT_TYPE_INT, {.i64 = -1}, -1, 63, DS},",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"DVB subtitles\")",
          "old_line_content": "    .priv_data_size = sizeof(DVBSubContext),",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"DVB subtitles\"),",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(region->pbuf, region->bgcolor, region->buf_size)",
          "old_line_content": "",
          "new_line_content": "        memset(region->pbuf, region->bgcolor, region->buf_size);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "RGBA",
          "old_text": null,
          "new_text": "RGBA(v/2,v,v/2,v)",
          "old_line_content": "",
          "new_line_content": "        AV_WN32(rect->data[1] + 4*list_inv[i], RGBA(v/2,v,v/2,v));",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(DVBSubObject))",
          "old_line_content": "",
          "new_line_content": "            object = av_mallocz(sizeof(DVBSubObject));",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            object->next = ctx->object_list;",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(DVBSubObjectDisplay))",
          "old_line_content": "",
          "new_line_content": "        display = av_mallocz(sizeof(DVBSubObjectDisplay));",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        display->region_id = region_id;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "avpriv_request_sample",
          "old_text": null,
          "new_text": "avpriv_request_sample(ctx, \"Different Version of Segment asked Twice\")",
          "old_line_content": "    for (display = ctx->display_list; display; display = display->next) {",
          "new_line_content": "        avpriv_request_sample(ctx, \"Different Version of Segment asked Twice\");",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        buf += 2;",
          "new_line_content": "        display->x_pos = AV_RB16(buf) & 0xfff;",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        if ((object->type == 1 || object->type == 2) && buf+1 < buf_end) {",
          "new_line_content": "        display->y_pos = AV_RB16(buf) & 0xfff;",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "get_region",
          "old_text": null,
          "new_text": "get_region(ctx, display->region_id)",
          "old_line_content": "    }",
          "new_line_content": "        region = get_region(ctx, display->region_id);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q((sub->pts - ctx->prev_start ), AV_TIME_BASE_Q, (AVRational){ 1, 1000 })",
          "old_line_content": "    if (sub->num_rects > 0) {",
          "new_line_content": "        sub->end_display_time = av_rescale_q((sub->pts - ctx->prev_start ), AV_TIME_BASE_Q, (AVRational){ 1, 1000 }) - 1;",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "av_mallocz_array",
          "old_text": null,
          "new_text": "av_mallocz_array(sizeof(*sub->rects), sub->num_rects)",
          "old_line_content": "            goto fail;",
          "new_line_content": "        sub->rects = av_mallocz_array(sizeof(*sub->rects), sub->num_rects);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "            ret = AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(*sub->rects[i]))",
          "old_line_content": "",
          "new_line_content": "            sub->rects[i] = av_mallocz(sizeof(*sub->rects[i]));",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "get_region",
          "old_text": null,
          "new_text": "get_region(ctx, display->region_id)",
          "old_line_content": "                continue;",
          "new_line_content": "            region = get_region(ctx, display->region_id);",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "get_clut",
          "old_text": null,
          "new_text": "get_clut(ctx, region->clut)",
          "old_line_content": "                clut = &default_clut;",
          "new_line_content": "            clut = get_clut(ctx, region->clut);",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": null,
          "new_api": "delete_regions",
          "old_text": null,
          "new_text": "delete_regions(ctx)",
          "old_line_content": "    }",
          "new_line_content": "        delete_regions(ctx);",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "delete_objects",
          "old_text": null,
          "new_text": "delete_objects(ctx)",
          "old_line_content": "",
          "new_line_content": "        delete_objects(ctx);",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "delete_cluts",
          "old_text": null,
          "new_text": "delete_cluts(ctx)",
          "old_line_content": "    tmp_display_list = ctx->display_list;",
          "new_line_content": "        delete_cluts(ctx);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(AVPALETTE_SIZE)",
          "old_line_content": "                goto fail;",
          "new_line_content": "            rect->data[1] = av_mallocz(AVPALETTE_SIZE);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(rect->data[1], clut_table, (1 << region->depth) * sizeof(uint32_t))",
          "old_line_content": "            if (!rect->data[0]) {",
          "new_line_content": "            memcpy(rect->data[1], clut_table, (1 << region->depth) * sizeof(uint32_t));",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"duplicate region\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"duplicate region\\n\");",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(region->buf_size)",
          "old_line_content": "                goto fail;",
          "new_line_content": "            rect->data[0] = av_malloc(region->buf_size);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "                ret = AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "compute_default_clut",
          "old_text": null,
          "new_text": "compute_default_clut(rect, rect->w, rect->h)",
          "old_line_content": "FF_DISABLE_DEPRECATION_WARNINGS",
          "new_line_content": "                compute_default_clut(rect, rect->w, rect->h);",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(DVBSubRegionDisplay))",
          "old_line_content": "        }",
          "new_line_content": "            display = av_mallocz(sizeof(DVBSubRegionDisplay));",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        display->region_id = region_id;",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        buf += 2;",
          "new_line_content": "        display->x_pos = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        *tmp_ptr = display->next;",
          "new_line_content": "        display->y_pos = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"Region %d, (%d,%d)\\n\", region_id, display->x_pos, display->y_pos)",
          "old_line_content": "    while (tmp_display_list) {",
          "new_line_content": "        ff_dlog(avctx, \"Region %d, (%d,%d)\\n\", region_id, display->x_pos, display->y_pos);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&rect->data[1])",
          "old_line_content": "        }",
          "new_line_content": "                av_freep(&rect->data[1]);",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sub->rects[i])",
          "old_line_content": "    }",
          "new_line_content": "            av_freep(&sub->rects[i]);",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&display)",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_freep(&display);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&sub->rects)",
          "old_line_content": "    return ret;",
          "new_line_content": "        av_freep(&sub->rects);",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "get_region",
          "old_text": null,
          "new_text": "get_region(ctx, display->region_id)",
          "old_line_content": "    int x_pos, y_pos;",
          "new_line_content": "    DVBSubRegion *region = get_region(ctx, display->region_id);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(fname, sizeof(fname), \"%s.ppm\", filename)",
          "old_line_content": "    if (!f) {",
          "new_line_content": "    snprintf(fname, sizeof(fname), \"%s.ppm\", filename);",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(fname, \"w\")",
          "old_line_content": "        return;",
          "new_line_content": "    f = fopen(fname, \"w\");",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(f, \"P6\\n\"\n            \"%d %d\\n\"\n            \"%d\\n\",\n            w, h, 255)",
          "old_line_content": "            w, h, 255);",
          "new_line_content": "    fprintf(f, \"P6\\n\"",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"DVB pixel block size %d, %s field:\\n\", buf_size,\n            top_bottom ? \"bottom\" : \"top\")",
          "old_line_content": "    for (i = 0; i < buf_size; i++) {",
          "new_line_content": "    ff_dlog(avctx, \"DVB pixel block size %d, %s field:\\n\", buf_size,",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "putc",
          "old_text": null,
          "new_text": "putc((v >> 16) & 0xff, f)",
          "old_line_content": "        }",
          "new_line_content": "            putc((v >> 16) & 0xff, f);",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": null,
          "new_api": "putc",
          "old_text": null,
          "new_text": "putc((v >> 8) & 0xff, f)",
          "old_line_content": "    }",
          "new_line_content": "            putc((v >> 8) & 0xff, f);",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"0x%8p: \", buf+i)",
          "old_line_content": "        if (i % 16 == 15)",
          "new_line_content": "            ff_dlog(avctx, \"0x%8p: \", buf+i);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"%02x \", buf[i])",
          "old_line_content": "    }",
          "new_line_content": "        ff_dlog(avctx, \"%02x \", buf[i]);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"\\n\")",
          "old_line_content": "    if (i % 16)",
          "new_line_content": "            ff_dlog(avctx, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(fname2, sizeof(fname2), \"%s-a.pgm\", filename)",
          "old_line_content": "    if (!f) {",
          "new_line_content": "    snprintf(fname2, sizeof(fname2), \"%s-a.pgm\", filename);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "ff_dlog",
          "old_text": null,
          "new_text": "ff_dlog(avctx, \"\\n\")",
          "old_line_content": "    if (!region)",
          "new_line_content": "        ff_dlog(avctx, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(fname2, \"w\")",
          "old_line_content": "        return;",
          "new_line_content": "    f = fopen(fname2, \"w\");",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(f, \"P5\\n\"\n            \"%d %d\\n\"\n            \"%d\\n\",\n            w, h, 255)",
          "old_line_content": "            w, h, 255);",
          "new_line_content": "    fprintf(f, \"P5\\n\"",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid object location! %d-%d %d-%d %02x\\n\", x_pos, region->width, y_pos, region->height, *buf)",
          "old_line_content": "",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Invalid object location! %d-%d %d-%d %02x\\n\", x_pos, region->width, y_pos, region->height, *buf);",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(command, sizeof(command), \"pnmtopng -alpha %s %s > %s.png 2> /dev/null\", fname2, fname, filename)",
          "old_line_content": "        return;",
          "new_line_content": "    snprintf(command, sizeof(command), \"pnmtopng -alpha %s %s > %s.png 2> /dev/null\", fname2, fname, filename);",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "system",
          "old_text": null,
          "new_text": "system(command)",
          "old_line_content": "    }",
          "new_line_content": "    if (system(command) != 0) {",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Error running pnmtopng\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Error running pnmtopng\\n\");",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(command, sizeof(command), \"rm %s %s\", fname, fname2)",
          "old_line_content": "        return;",
          "new_line_content": "    snprintf(command, sizeof(command), \"rm %s %s\", fname, fname2);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "system",
          "old_text": null,
          "new_text": "system(command)",
          "old_line_content": "    }",
          "new_line_content": "    if (system(command) != 0) {",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Error removing %s and %s\\n\", fname, fname2)",
          "old_line_content": "}",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Error removing %s and %s\\n\", fname, fname2);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "dvbsub_read_2bit_string",
          "old_text": null,
          "new_text": "dvbsub_read_2bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, map_table, x_pos)",
          "old_line_content": "            break;",
          "new_line_content": "            x_pos = dvbsub_read_2bit_string(avctx, pbuf + (y_pos * region->width),",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"4-bit pixel string in %d-bit region!\\n\", region->depth)",
          "old_line_content": "",
          "new_line_content": "                av_log(avctx, AV_LOG_ERROR, \"4-bit pixel string in %d-bit region!\\n\", region->depth);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "dvbsub_read_4bit_string",
          "old_text": null,
          "new_text": "dvbsub_read_4bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, map_table, x_pos)",
          "old_line_content": "            break;",
          "new_line_content": "            x_pos = dvbsub_read_4bit_string(avctx, pbuf + (y_pos * region->width),",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "get_region",
          "old_text": null,
          "new_text": "get_region(ctx, display->region_id)",
          "old_line_content": "            return -1;",
          "new_line_content": "        region = get_region(ctx, display->region_id);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"8-bit pixel string in %d-bit region!\\n\", region->depth)",
          "old_line_content": "",
          "new_line_content": "                av_log(avctx, AV_LOG_ERROR, \"8-bit pixel string in %d-bit region!\\n\", region->depth);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "dvbsub_read_8bit_string",
          "old_text": null,
          "new_text": "dvbsub_read_8bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, NULL, x_pos)",
          "old_line_content": "            break;",
          "new_line_content": "            x_pos = dvbsub_read_8bit_string(avctx, pbuf + (y_pos * region->width),",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_INFO, \"Unknown/unsupported pixel block 0x%x\\n\", *(buf-1))",
          "old_line_content": "",
          "new_line_content": "            av_log(avctx, AV_LOG_INFO, \"Unknown/unsupported pixel block 0x%x\\n\", *(buf-1));",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(width * height * 4)",
          "old_line_content": "",
          "new_line_content": "        pbuf = av_malloc(width * height * 4);",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "get_region",
          "old_text": null,
          "new_text": "get_region(ctx, display->region_id)",
          "old_line_content": "                return -1;",
          "new_line_content": "            region = get_region(ctx, display->region_id);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "get_clut",
          "old_text": null,
          "new_text": "get_clut(ctx, region->clut)",
          "old_line_content": "                clut = &default_clut;",
          "new_line_content": "            clut = get_clut(ctx, region->clut);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "get_object",
          "old_text": null,
          "new_text": "get_object(ctx, object_id)",
          "old_line_content": "        return AVERROR_INVALIDDATA;",
          "new_line_content": "    object = get_object(ctx, object_id);",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        buf += 2;",
          "new_line_content": "        top_field_len = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "AV_RB16",
          "old_text": null,
          "new_text": "AV_RB16(buf)",
          "old_line_content": "        if (buf + top_field_len + bottom_field_len > buf_end) {",
          "new_line_content": "        bottom_field_len = AV_RB16(buf);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Field data size %d+%d too large\\n\", top_field_len, bottom_field_len)",
          "old_line_content": "",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Field data size %d+%d too large\\n\", top_field_len, bottom_field_len);",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(filename, sizeof(filename), \"dvbs.%d\", fileno_index)",
          "old_line_content": "",
          "new_line_content": "        snprintf(filename, sizeof(filename), \"dvbs.%d\", fileno_index);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "png_save",
          "old_text": null,
          "new_text": "png_save(ctx, filename, pbuf, width, height)",
          "old_line_content": "    }",
          "new_line_content": "        png_save(ctx, filename, pbuf, width, height);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "dvbsub_parse_pixel_data_block",
          "old_text": null,
          "new_text": "dvbsub_parse_pixel_data_block(avctx, display, block, top_field_len, 0,\n                                            non_modifying_color)",
          "old_line_content": "            if (bottom_field_len > 0)",
          "new_line_content": "            dvbsub_parse_pixel_data_block(avctx, display, block, top_field_len, 0,",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&pbuf)",
          "old_line_content": "    fileno_index++;",
          "new_line_content": "        av_freep(&pbuf);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "dvbsub_parse_pixel_data_block",
          "old_text": null,
          "new_text": "dvbsub_parse_pixel_data_block(avctx, display, block, bfl, 1,\n                                            non_modifying_color)",
          "old_line_content": "",
          "new_line_content": "            dvbsub_parse_pixel_data_block(avctx, display, block, bfl, 1,",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Unknown object coding %d\\n\", coding_method)",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Unknown object coding %d\\n\", coding_method);",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "bytestream_get_byte",
          "old_text": null,
          "new_text": "bytestream_get_byte(&buf)",
          "old_line_content": "        return 0; // already have this display definition version",
          "new_line_content": "    info_byte   = bytestream_get_byte(&buf);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1538,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(*display_def))",
          "new_text": null,
          "old_line_content": "        display_def             = av_mallocz(sizeof(*display_def));",
          "new_line_content": "        return 0; // already have this display definition version",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    if (!display_def) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"DVB clut packet:\\n\")",
          "new_text": null,
          "old_line_content": "    ff_dlog(avctx, \"DVB clut packet:\\n\");",
          "new_line_content": "    int y, cr, cb, alpha;",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "bytestream_get_be16",
          "new_api": null,
          "old_text": "bytestream_get_be16(&buf)",
          "new_text": null,
          "old_line_content": "    display_def->width   = bytestream_get_be16(&buf) + 1;",
          "new_line_content": "    display_def->version = dds_version;",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "bytestream_get_be16",
          "new_api": null,
          "old_text": "bytestream_get_be16(&buf)",
          "new_text": null,
          "old_line_content": "    display_def->height  = bytestream_get_be16(&buf) + 1;",
          "new_line_content": "    display_def->x       = 0;",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"\\n\");",
          "new_line_content": "    for (i=0; i < buf_size; i++) {",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "bytestream_get_be16",
          "new_api": null,
          "old_text": "bytestream_get_be16(&buf)",
          "new_text": null,
          "old_line_content": "        display_def->x = bytestream_get_be16(&buf);",
          "new_line_content": "        if (buf_size < 13)",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "bytestream_get_be16",
          "new_api": null,
          "old_text": "bytestream_get_be16(&buf)",
          "new_text": null,
          "old_line_content": "        display_def->width  = bytestream_get_be16(&buf) - display_def->x + 1;",
          "new_line_content": "            return AVERROR_INVALIDDATA;",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "bytestream_get_be16",
          "new_api": null,
          "old_text": "bytestream_get_be16(&buf)",
          "new_text": null,
          "old_line_content": "        display_def->y = bytestream_get_be16(&buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "get_clut",
          "new_api": null,
          "old_text": "get_clut(ctx, clut_id)",
          "new_text": null,
          "old_line_content": "    clut = get_clut(ctx, clut_id);",
          "new_line_content": "    version = ((*buf)>>4)&15;",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    if (!clut) {",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(clut, &default_clut, sizeof(DVBSubCLUT))",
          "new_text": null,
          "old_line_content": "        memcpy(clut, &default_clut, sizeof(DVBSubCLUT));",
          "new_line_content": "        if (!clut)",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": "save_subtitle_set",
          "new_api": null,
          "old_text": "save_subtitle_set(avctx, sub, got_output)",
          "new_text": null,
          "old_line_content": "        save_subtitle_set(avctx, sub, got_output);",
          "new_line_content": "    DVBSubContext *ctx = avctx->priv_data;",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "save_display_set",
          "new_api": null,
          "old_text": "save_display_set(ctx)",
          "new_text": null,
          "old_line_content": "    save_display_set(ctx);",
          "new_line_content": "    if(ctx->compute_edt == 0)",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid clut depth 0x%x!\\n\", *buf)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Invalid clut depth 0x%x!\\n\", *buf);",
          "new_line_content": "        depth = (*buf) & 0xe0;",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"DVB sub packet:\\n\")",
          "new_text": null,
          "old_line_content": "    ff_dlog(avctx, \"DVB sub packet:\\n\");",
          "new_line_content": "    int got_segment = 0;",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"\\n\");",
          "new_line_content": "    for (i=0; i < buf_size; i++) {",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "YUV_TO_RGB1_CCIR",
          "new_api": null,
          "old_text": "YUV_TO_RGB1_CCIR(cb, cr)",
          "new_text": null,
          "old_line_content": "        YUV_TO_RGB1_CCIR(cb, cr);",
          "new_line_content": "        if (y == 0)",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "YUV_TO_RGB2_CCIR",
          "new_api": null,
          "old_text": "YUV_TO_RGB2_CCIR(r, g, b, y)",
          "new_text": null,
          "old_line_content": "        YUV_TO_RGB2_CCIR(r, g, b, y);",
          "new_line_content": "            alpha = 0xff;",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"More than one bit level marked: %x\\n\", depth)",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"More than one bit level marked: %x\\n\", depth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(p)",
          "new_text": null,
          "old_line_content": "        page_id = AV_RB16(p);",
          "new_line_content": "    while (p_end - p >= 6 && *p == 0x0f) {",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "RGBA",
          "new_api": null,
          "old_text": "RGBA(r,g,b,255 - alpha)",
          "new_text": null,
          "old_line_content": "            clut->clut4[entry_id] = RGBA(r,g,b,255 - alpha);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(p)",
          "new_text": null,
          "old_line_content": "        segment_length = AV_RB16(p);",
          "new_line_content": "        segment_type = *p++;",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "RGBA",
          "new_api": null,
          "old_text": "RGBA(r,g,b,255 - alpha)",
          "new_text": null,
          "old_line_content": "            clut->clut16[entry_id] = RGBA(r,g,b,255 - alpha);",
          "new_line_content": "        if (depth & 0x80 && entry_id < 4)",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "RGBA",
          "new_api": null,
          "old_text": "RGBA(r,g,b,255 - alpha)",
          "new_text": null,
          "old_line_content": "            clut->clut256[entry_id] = RGBA(r,g,b,255 - alpha);",
          "new_line_content": "        else if (depth & 0x40 && entry_id < 16)",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_DEBUG, \"segment_type:%d page_id:%d segment_length:%d\\n\", segment_type, page_id, segment_length)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_DEBUG, \"segment_type:%d page_id:%d segment_length:%d\\n\", segment_type, page_id, segment_length);",
          "new_line_content": "        p += 2;",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"incomplete or broken packet\")",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"incomplete or broken packet\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "dvbsub_parse_page_segment",
          "new_api": null,
          "old_text": "dvbsub_parse_page_segment(avctx, p, segment_length, sub, data_size)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_parse_page_segment(avctx, p, segment_length, sub, data_size);",
          "new_line_content": "            int ret = 0;",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "dvbsub_parse_region_segment",
          "new_api": null,
          "old_text": "dvbsub_parse_region_segment(avctx, p, segment_length)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_parse_region_segment(avctx, p, segment_length);",
          "new_line_content": "                got_segment |= 1;",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "dvbsub_parse_clut_segment",
          "new_api": null,
          "old_text": "dvbsub_parse_clut_segment(avctx, p, segment_length)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_parse_clut_segment(avctx, p, segment_length);",
          "new_line_content": "                got_segment |= 2;",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, region_id)",
          "new_text": null,
          "old_line_content": "    region = get_region(ctx, region_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "dvbsub_parse_object_segment",
          "new_api": null,
          "old_text": "dvbsub_parse_object_segment(avctx, p, segment_length)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_parse_object_segment(avctx, p, segment_length);",
          "new_line_content": "                got_segment |= 4;",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "dvbsub_parse_display_definition_segment",
          "new_api": null,
          "old_text": "dvbsub_parse_display_definition_segment(avctx, p,\n                                                              segment_length)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_parse_display_definition_segment(avctx, p,",
          "new_line_content": "                got_segment |= 8;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    if (!region) {",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "dvbsub_display_end_segment",
          "new_api": null,
          "old_text": "dvbsub_display_end_segment(avctx, p, segment_length, sub, data_size)",
          "new_text": null,
          "old_line_content": "                ret = dvbsub_display_end_segment(avctx, p, segment_length, sub, data_size);",
          "new_line_content": "                got_dds = 1;",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "    region->width = AV_RB16(buf);",
          "new_line_content": "    version = ((*buf)>>4) & 15;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "    region->height = AV_RB16(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"Subtitling segment type 0x%x, page id %d, length %d\\n\",\n                        segment_type, page_id, segment_length)",
          "new_text": null,
          "old_line_content": "                ff_dlog(avctx, \"Subtitling segment type 0x%x, page id %d, length %d\\n\",",
          "new_line_content": "                got_segment |= 16;",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_DEBUG, \"Missing display_end_segment, emulating\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_DEBUG, \"Missing display_end_segment, emulating\\n\");",
          "new_line_content": "    // Some streams do not send a display segment but if we have all the other",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(region->pbuf)",
          "new_text": null,
          "old_line_content": "        av_free(region->pbuf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "dvbsub_display_end_segment",
          "new_api": null,
          "old_text": "dvbsub_display_end_segment(avctx, p, 0, sub, data_size)",
          "new_text": null,
          "old_line_content": "        dvbsub_display_end_segment(avctx, p, 0, sub, data_size);",
          "new_line_content": "    // segments then we need no further data.",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(region->buf_size)",
          "new_text": null,
          "old_line_content": "        region->pbuf = av_malloc(region->buf_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "avsubtitle_free",
          "new_api": null,
          "old_text": "avsubtitle_free(sub)",
          "new_text": null,
          "old_line_content": "        avsubtitle_free(sub);",
          "new_line_content": "end:",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "            region->buf_size =",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(int64_t, ctx->prev_start, sub->pts)",
          "new_text": null,
          "old_line_content": "            FFSWAP(int64_t, ctx->prev_start, sub->pts);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"region depth %d is invalid\\n\", region->depth)",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"region depth %d is invalid\\n\", region->depth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "offsetof",
          "new_api": null,
          "old_text": "offsetof(DVBSubContext, compute_edt)",
          "new_text": null,
          "old_line_content": "    {\"compute_edt\", \"compute end of time using pts or timeout\", offsetof(DVBSubContext, compute_edt), AV_OPT_TYPE_BOOL, {.i64 = 0}, 0, 1, DS},",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "offsetof",
          "new_api": null,
          "old_text": "offsetof(DVBSubContext, compute_clut)",
          "new_text": null,
          "old_line_content": "    {\"compute_clut\", \"compute clut when not available(-1) or always(1) or never(0)\", offsetof(DVBSubContext, compute_clut), AV_OPT_TYPE_BOOL, {.i64 = -1}, -1, 1, DS},",
          "new_line_content": "#define DS AV_OPT_FLAG_DECODING_PARAM | AV_OPT_FLAG_SUBTITLE_PARAM",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "offsetof",
          "new_api": null,
          "old_text": "offsetof(DVBSubContext, substream)",
          "new_text": null,
          "old_line_content": "    {\"dvb_substream\", \"\", offsetof(DVBSubContext, substream), AV_OPT_TYPE_INT, {.i64 = -1}, -1, 63, DS},",
          "new_line_content": "static const AVOption options[] = {",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"DVB subtitles\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"DVB subtitles\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"Region %d, (%dx%d)\\n\", region_id, region->width, region->height)",
          "new_text": null,
          "old_line_content": "    ff_dlog(avctx, \"Region %d, (%dx%d)\\n\", region_id, region->width, region->height);",
          "new_line_content": "            region->bgcolor = (((*buf++) >> 2) & 3);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"Fill region (%d)\\n\", region->bgcolor)",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"Fill region (%d)\\n\", region->bgcolor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(i - 1, 1)",
          "new_text": null,
          "old_line_content": "    count = FFMAX(i - 1, 1);",
          "new_line_content": "        list_inv[     i ] = bestv;",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "        if (!object) {",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(DVBSubObjectDisplay))",
          "new_text": null,
          "old_line_content": "        display = av_mallocz(sizeof(DVBSubObjectDisplay));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "avpriv_request_sample",
          "new_api": null,
          "old_text": "avpriv_request_sample(ctx, \"Different Version of Segment asked Twice\")",
          "new_text": null,
          "old_line_content": "        avpriv_request_sample(ctx, \"Different Version of Segment asked Twice\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        display->x_pos = AV_RB16(buf) & 0xfff;",
          "new_line_content": "        display->object_id = object_id;",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        display->y_pos = AV_RB16(buf) & 0xfff;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, display->region_id)",
          "new_text": null,
          "old_line_content": "        region = get_region(ctx, display->region_id);",
          "new_line_content": "        return AVERROR_PATCHWELCOME;",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q((sub->pts - ctx->prev_start ), AV_TIME_BASE_Q, (AVRational){ 1, 1000 })",
          "new_text": null,
          "old_line_content": "        sub->end_display_time = av_rescale_q((sub->pts - ctx->prev_start ), AV_TIME_BASE_Q, (AVRational){ 1, 1000 }) - 1;",
          "new_line_content": "        sub->end_display_time = ctx->time_out * 1000;",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "av_mallocz_array",
          "new_api": null,
          "old_text": "av_mallocz_array(sizeof(*sub->rects), sub->num_rects)",
          "new_text": null,
          "old_line_content": "        sub->rects = av_mallocz_array(sizeof(*sub->rects), sub->num_rects);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            ret = AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(*sub->rects[i]))",
          "new_text": null,
          "old_line_content": "            sub->rects[i] = av_mallocz(sizeof(*sub->rects[i]));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, display->region_id)",
          "new_text": null,
          "old_line_content": "            region = get_region(ctx, display->region_id);",
          "new_line_content": "        i = 0;",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "get_clut",
          "new_api": null,
          "old_text": "get_clut(ctx, region->clut)",
          "new_text": null,
          "old_line_content": "            clut = get_clut(ctx, region->clut);",
          "new_line_content": "            rect->type      = SUBTITLE_BITMAP;",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"Page time out %ds, state %d\\n\", ctx->time_out, page_state)",
          "new_text": null,
          "old_line_content": "    ff_dlog(avctx, \"Page time out %ds, state %d\\n\", ctx->time_out, page_state);",
          "new_line_content": "    ctx->time_out = timeout;",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "delete_objects",
          "new_api": null,
          "old_text": "delete_objects(ctx)",
          "new_text": null,
          "old_line_content": "        delete_objects(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "delete_cluts",
          "new_api": null,
          "old_text": "delete_cluts(ctx)",
          "new_text": null,
          "old_line_content": "        delete_cluts(ctx);",
          "new_line_content": "    if (page_state == 1 || page_state == 2) {",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(AVPALETTE_SIZE)",
          "new_text": null,
          "old_line_content": "            rect->data[1] = av_mallocz(AVPALETTE_SIZE);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                ret = AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"duplicate region\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"duplicate region\\n\");",
          "new_line_content": "            display = display->next;",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(region->buf_size)",
          "new_text": null,
          "old_line_content": "            rect->data[0] = av_malloc(region->buf_size);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                ret = AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(rect->data[0], region->pbuf, region->buf_size)",
          "new_text": null,
          "old_line_content": "            memcpy(rect->data[0], region->pbuf, region->buf_size);",
          "new_line_content": "                goto fail;",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(DVBSubRegionDisplay))",
          "new_text": null,
          "old_line_content": "            display = av_mallocz(sizeof(DVBSubRegionDisplay));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "        if (!display) {",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        display->x_pos = AV_RB16(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        display->y_pos = AV_RB16(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"Region %d, (%d,%d)\\n\", region_id, display->x_pos, display->y_pos)",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"Region %d, (%d,%d)\\n\", region_id, display->x_pos, display->y_pos);",
          "new_line_content": "        display->next = ctx->display_list;",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&rect->data[0])",
          "new_text": null,
          "old_line_content": "                av_freep(&rect->data[0]);",
          "new_line_content": "        for(i=0; i<sub->num_rects; i++) {",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&rect->data[1])",
          "new_text": null,
          "old_line_content": "                av_freep(&rect->data[1]);",
          "new_line_content": "            rect = sub->rects[i];",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&display)",
          "new_text": null,
          "old_line_content": "        av_freep(&display);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&sub->rects)",
          "new_text": null,
          "old_line_content": "        av_freep(&sub->rects);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, display->region_id)",
          "new_text": null,
          "old_line_content": "    DVBSubRegion *region = get_region(ctx, display->region_id);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(fname, sizeof(fname), \"%s.ppm\", filename)",
          "new_text": null,
          "old_line_content": "    snprintf(fname, sizeof(fname), \"%s.ppm\", filename);",
          "new_line_content": "    char fname[40], fname2[40];",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(fname, \"w\")",
          "new_text": null,
          "old_line_content": "    f = fopen(fname, \"w\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(fname)",
          "new_text": null,
          "old_line_content": "        perror(fname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"DVB pixel block size %d, %s field:\\n\", buf_size,\n            top_bottom ? \"bottom\" : \"top\")",
          "new_text": null,
          "old_line_content": "    ff_dlog(avctx, \"DVB pixel block size %d, %s field:\\n\", buf_size,",
          "new_line_content": "    uint8_t *map_table;",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "putc",
          "new_api": null,
          "old_text": "putc((v >> 16) & 0xff, f)",
          "new_text": null,
          "old_line_content": "            putc((v >> 16) & 0xff, f);",
          "new_line_content": "    for(y = 0; y < h; y++) {",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "putc",
          "new_api": null,
          "old_text": "putc((v >> 8) & 0xff, f)",
          "new_text": null,
          "old_line_content": "            putc((v >> 8) & 0xff, f);",
          "new_line_content": "        for(x = 0; x < w; x++) {",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"0x%8p: \", buf+i)",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"0x%8p: \", buf+i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "putc",
          "new_api": null,
          "old_text": "putc((v >> 0) & 0xff, f)",
          "new_text": null,
          "old_line_content": "            putc((v >> 0) & 0xff, f);",
          "new_line_content": "            v = bitmap[y * w + x];",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"%02x \", buf[i])",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"%02x \", buf[i]);",
          "new_line_content": "        if (i % 16 == 0)",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "            ff_dlog(avctx, \"\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "ff_dlog",
          "new_api": null,
          "old_text": "ff_dlog(avctx, \"\\n\")",
          "new_text": null,
          "old_line_content": "        ff_dlog(avctx, \"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(fname2, \"w\")",
          "new_text": null,
          "old_line_content": "    f = fopen(fname2, \"w\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(fname2)",
          "new_text": null,
          "old_line_content": "        perror(fname2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "putc",
          "new_api": null,
          "old_text": "putc((v >> 24) & 0xff, f)",
          "new_text": null,
          "old_line_content": "            putc((v >> 24) & 0xff, f);",
          "new_line_content": "    for(y = 0; y < h; y++) {",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid object location! %d-%d %d-%d %02x\\n\", x_pos, region->width, y_pos, region->height, *buf)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Invalid object location! %d-%d %d-%d %02x\\n\", x_pos, region->width, y_pos, region->height, *buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(command, sizeof(command), \"pnmtopng -alpha %s %s > %s.png 2> /dev/null\", fname2, fname, filename)",
          "new_text": null,
          "old_line_content": "    snprintf(command, sizeof(command), \"pnmtopng -alpha %s %s > %s.png 2> /dev/null\", fname2, fname, filename);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Error running pnmtopng\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Error running pnmtopng\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(command, sizeof(command), \"rm %s %s\", fname, fname2)",
          "new_text": null,
          "old_line_content": "    snprintf(command, sizeof(command), \"rm %s %s\", fname, fname2);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "system",
          "new_api": null,
          "old_text": "system(command)",
          "new_text": null,
          "old_line_content": "    if (system(command) != 0) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Error removing %s and %s\\n\", fname, fname2)",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Error removing %s and %s\\n\", fname, fname2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "dvbsub_read_2bit_string",
          "new_api": null,
          "old_text": "dvbsub_read_2bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, map_table, x_pos)",
          "new_text": null,
          "old_line_content": "            x_pos = dvbsub_read_2bit_string(avctx, pbuf + (y_pos * region->width),",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"4-bit pixel string in %d-bit region!\\n\", region->depth)",
          "new_text": null,
          "old_line_content": "                av_log(avctx, AV_LOG_ERROR, \"4-bit pixel string in %d-bit region!\\n\", region->depth);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "dvbsub_read_4bit_string",
          "new_api": null,
          "old_text": "dvbsub_read_4bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, map_table, x_pos)",
          "new_text": null,
          "old_line_content": "            x_pos = dvbsub_read_4bit_string(avctx, pbuf + (y_pos * region->width),",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, display->region_id)",
          "new_text": null,
          "old_line_content": "        region = get_region(ctx, display->region_id);",
          "new_line_content": "    height = 0;",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"8-bit pixel string in %d-bit region!\\n\", region->depth)",
          "new_text": null,
          "old_line_content": "                av_log(avctx, AV_LOG_ERROR, \"8-bit pixel string in %d-bit region!\\n\", region->depth);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "dvbsub_read_8bit_string",
          "new_api": null,
          "old_text": "dvbsub_read_8bit_string(avctx, pbuf + (y_pos * region->width),\n                                            region->width, &buf, buf_end - buf,\n                                            non_mod, NULL, x_pos)",
          "new_text": null,
          "old_line_content": "            x_pos = dvbsub_read_8bit_string(avctx, pbuf + (y_pos * region->width),",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_INFO, \"Unknown/unsupported pixel block 0x%x\\n\", *(buf-1))",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_INFO, \"Unknown/unsupported pixel block 0x%x\\n\", *(buf-1));",
          "new_line_content": "            y_pos += 2;",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(width * height * 4)",
          "new_text": null,
          "old_line_content": "        pbuf = av_malloc(width * height * 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "get_region",
          "new_api": null,
          "old_text": "get_region(ctx, display->region_id)",
          "new_text": null,
          "old_line_content": "            region = get_region(ctx, display->region_id);",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "get_clut",
          "new_api": null,
          "old_text": "get_clut(ctx, region->clut)",
          "new_text": null,
          "old_line_content": "            clut = get_clut(ctx, region->clut);",
          "new_line_content": "            x_off = display->x_pos - x_pos;",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "    object_id = AV_RB16(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        top_field_len = AV_RB16(buf);",
          "new_line_content": "    non_modifying_color = ((*buf++) >> 1) & 1;",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(buf)",
          "new_text": null,
          "old_line_content": "        bottom_field_len = AV_RB16(buf);",
          "new_line_content": "    if (coding_method == 0) {",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Field data size %d+%d too large\\n\", top_field_len, bottom_field_len)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"Field data size %d+%d too large\\n\", top_field_len, bottom_field_len);",
          "new_line_content": "        buf += 2;",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename, sizeof(filename), \"dvbs.%d\", fileno_index)",
          "new_text": null,
          "old_line_content": "        snprintf(filename, sizeof(filename), \"dvbs.%d\", fileno_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "png_save",
          "new_api": null,
          "old_text": "png_save(ctx, filename, pbuf, width, height)",
          "new_text": null,
          "old_line_content": "        png_save(ctx, filename, pbuf, width, height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "dvbsub_parse_pixel_data_block",
          "new_api": null,
          "old_text": "dvbsub_parse_pixel_data_block(avctx, display, block, top_field_len, 0,\n                                            non_modifying_color)",
          "new_text": null,
          "old_line_content": "            dvbsub_parse_pixel_data_block(avctx, display, block, top_field_len, 0,",
          "new_line_content": "            const uint8_t *block = buf;",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&pbuf)",
          "new_text": null,
          "old_line_content": "        av_freep(&pbuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "dvbsub_parse_pixel_data_block",
          "new_api": null,
          "old_text": "dvbsub_parse_pixel_data_block(avctx, display, block, bfl, 1,\n                                            non_modifying_color)",
          "new_text": null,
          "old_line_content": "            dvbsub_parse_pixel_data_block(avctx, display, block, bfl, 1,",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Unknown object coding %d\\n\", coding_method)",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Unknown object coding %d\\n\", coding_method);",
          "new_line_content": "/*  } else if (coding_method == 1) {*/",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "bytestream_get_byte",
          "new_api": null,
          "old_text": "bytestream_get_byte(&buf)",
          "new_text": null,
          "old_line_content": "    info_byte   = bytestream_get_byte(&buf);",
          "new_line_content": "    if (buf_size < 5)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 22,
      "total_additions": 128,
      "total_deletions": 128,
      "total_api_changes": 278
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 278,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          683,
          686,
          687,
          688,
          689,
          690,
          693
        ]
      }
    },
    "api_calls_before": 227,
    "api_calls_after": 227,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 3,
      "total_diff_lines": 26
    }
  }
}
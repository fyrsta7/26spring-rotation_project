{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/77821e11b37be42d9c10a17fb79e8e26c181b7f0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/77821e11b37be42d9c10a17fb79e8e26c181b7f0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/77821e11b37be42d9c10a17fb79e8e26c181b7f0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/77821e11b37be42d9c10a17fb79e8e26c181b7f0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 384,
          "old_api": "h264_loop_filter_strength",
          "new_api": "IS_INTRA",
          "old_text": "s->dsp.h264_loop_filter_strength( bS, h->non_zero_count_cache, h->ref_cache, h->mv_cache,\n                                              h->list_count==2, edges, step, mask_edge0, mask_edge1, FIELD_PICTURE)",
          "new_text": "IS_INTRA(h->left_type[0])",
          "old_line_content": "            s->dsp.h264_loop_filter_strength( bS, h->non_zero_count_cache, h->ref_cache, h->mv_cache,",
          "new_line_content": "        if( IS_INTRA(h->left_type[0]) )",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "FILTER",
          "new_api": "IS_8x8DCT",
          "old_text": "FILTER(v,0,0)",
          "new_text": "IS_8x8DCT(mb_type)",
          "old_line_content": "            FILTER(v,0,0);",
          "new_line_content": "        } else if( IS_8x8DCT(mb_type) ) {",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "IS_8x8DCT",
          "new_api": "FILTER",
          "old_text": "IS_8x8DCT(mb_type)",
          "new_text": "FILTER(h,1,2)",
          "old_line_content": "        } else if( IS_8x8DCT(mb_type) ) {",
          "new_line_content": "            FILTER(h,1,2);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "tprintf",
          "new_api": "filter_mb_edgech",
          "old_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, tmp_linesize, tmp_uvlinesize)",
          "new_text": "filter_mb_edgech( &img_cb[j*uvlinesize], tmp_uvlinesize, bS,\n                                ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h)",
          "old_line_content": "                tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, tmp_linesize, tmp_uvlinesize);",
          "new_line_content": "                filter_mb_edgech( &img_cb[j*uvlinesize], tmp_uvlinesize, bS,",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "tprintf",
          "new_api": "get_chroma_qp",
          "old_text": "tprintf(s->avctx, \"\\n\")",
          "new_text": "get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] )",
          "old_line_content": "                { int i; for (i = 0; i < 4; i++) tprintf(s->avctx, \" bS[%d]:%d\", i, bS[i]); tprintf(s->avctx, \"\\n\"); }",
          "new_line_content": "                                ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h);",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "filter_mb_edgeh",
          "new_api": "filter_mb_edgech",
          "old_text": "filter_mb_edgeh( &img_y[j*linesize], tmp_linesize, bS, qp, h )",
          "new_text": "filter_mb_edgech( &img_cr[j*uvlinesize], tmp_uvlinesize, bS,\n                                ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h)",
          "old_line_content": "                filter_mb_edgeh( &img_y[j*linesize], tmp_linesize, bS, qp, h );",
          "new_line_content": "                filter_mb_edgech( &img_cr[j*uvlinesize], tmp_uvlinesize, bS,",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "filter_mb_edgech",
          "new_api": "get_chroma_qp",
          "old_text": "filter_mb_edgech( &img_cb[j*uvlinesize], tmp_uvlinesize, bS,\n                                ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h)",
          "new_text": "get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] )",
          "old_line_content": "                filter_mb_edgech( &img_cb[j*uvlinesize], tmp_uvlinesize, bS,",
          "new_line_content": "                                ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "tprintf",
          "new_api": "filter_mb_edgev",
          "old_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize)",
          "new_text": "filter_mb_edgev( &img_y[0], linesize, bS, qp, h )",
          "old_line_content": "                tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize);",
          "new_line_content": "                    filter_mb_edgev( &img_y[0], linesize, bS, qp, h );",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "filter_mb_edgev",
          "new_api": "filter_mb_edgecv",
          "old_text": "filter_mb_edgev( &img_y[0], linesize, bS, qp, h )",
          "new_text": "filter_mb_edgecv( &img_cb[0], uvlinesize, bS, qp, h)",
          "old_line_content": "                    filter_mb_edgev( &img_y[0], linesize, bS, qp, h );",
          "new_line_content": "                        filter_mb_edgecv( &img_cb[0], uvlinesize, bS, qp, h);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "filter_mb_edgecv",
          "new_api": "filter_mb_edgeh",
          "old_text": "filter_mb_edgecv( &img_cr[0], uvlinesize, bS, qp, h)",
          "new_text": "filter_mb_edgeh( &img_y[0], linesize, bS, qp, h )",
          "old_line_content": "                        filter_mb_edgecv( &img_cr[0], uvlinesize, bS, qp, h);",
          "new_line_content": "                    filter_mb_edgeh( &img_y[0], linesize, bS, qp, h );",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "filter_mb_edgeh",
          "new_api": "filter_mb_edgech",
          "old_text": "filter_mb_edgeh( &img_y[0], linesize, bS, qp, h )",
          "new_text": "filter_mb_edgech( &img_cb[0], uvlinesize, bS, qp, h)",
          "old_line_content": "                    filter_mb_edgeh( &img_y[0], linesize, bS, qp, h );",
          "new_line_content": "                        filter_mb_edgech( &img_cb[0], uvlinesize, bS, qp, h);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "IS_8x8DCT",
          "new_api": "IS_INTRA",
          "old_text": "IS_8x8DCT(mb_type & (edge<<24))",
          "new_text": "IS_INTRA(mb_type)",
          "old_line_content": "        if( IS_8x8DCT(mb_type & (edge<<24)) ) // (edge&1) && IS_8x8DCT(mb_type)",
          "new_line_content": "        if( IS_INTRA(mb_type)) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "tprintf",
          "new_api": "filter_mb_edgev",
          "old_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize)",
          "new_text": "filter_mb_edgev( &img_y[4*edge], linesize, bS, qp, h )",
          "old_line_content": "        tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize);",
          "new_line_content": "            filter_mb_edgev( &img_y[4*edge], linesize, bS, qp, h );",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "filter_mb_edgev",
          "new_api": "filter_mb_edgecv",
          "old_text": "filter_mb_edgev( &img_y[4*edge], linesize, bS, qp, h )",
          "new_text": "filter_mb_edgecv( &img_cr[2*edge], uvlinesize, bS, h->chroma_qp[1], h)",
          "old_line_content": "            filter_mb_edgev( &img_y[4*edge], linesize, bS, qp, h );",
          "new_line_content": "                filter_mb_edgecv( &img_cr[2*edge], uvlinesize, bS, h->chroma_qp[1], h);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "filter_mb_edgecv",
          "new_api": "filter_mb_edgeh",
          "old_text": "filter_mb_edgecv( &img_cr[2*edge], uvlinesize, bS, h->chroma_qp[1], h)",
          "new_text": "filter_mb_edgeh( &img_y[4*edge*linesize], linesize, bS, qp, h )",
          "old_line_content": "                filter_mb_edgecv( &img_cr[2*edge], uvlinesize, bS, h->chroma_qp[1], h);",
          "new_line_content": "            filter_mb_edgeh( &img_y[4*edge*linesize], linesize, bS, qp, h );",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "filter_mb_edgeh",
          "new_api": "filter_mb_edgech",
          "old_text": "filter_mb_edgeh( &img_y[4*edge*linesize], linesize, bS, qp, h )",
          "new_text": "filter_mb_edgech( &img_cr[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[1], h)",
          "old_line_content": "            filter_mb_edgeh( &img_y[4*edge*linesize], linesize, bS, qp, h );",
          "new_line_content": "                filter_mb_edgech( &img_cr[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[1], h);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "get_chroma_qp",
          "new_api": "tprintf",
          "old_text": "get_chroma_qp( h, 1, mbn1_qp )",
          "new_text": "tprintf(s->avctx, \"filter mb:%d/%d MBAFF, QPy:%d/%d, QPb:%d/%d QPr:%d/%d ls:%d uvls:%d\", mb_x, mb_y, qp[0], qp[1], bqp[0], bqp[1], rqp[0], rqp[1], linesize, uvlinesize)",
          "old_line_content": "                   get_chroma_qp( h, 1, mbn1_qp ) + 1 ) >> 1;",
          "new_line_content": "        tprintf(s->avctx, \"filter mb:%d/%d MBAFF, QPy:%d/%d, QPb:%d/%d QPr:%d/%d ls:%d uvls:%d\", mb_x, mb_y, qp[0], qp[1], bqp[0], bqp[1], rqp[0], rqp[1], linesize, uvlinesize);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "tprintf",
          "new_api": "filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] )",
          "old_text": "tprintf(s->avctx, \"filter mb:%d/%d MBAFF, QPy:%d/%d, QPb:%d/%d QPr:%d/%d ls:%d uvls:%d\", mb_x, mb_y, qp[0], qp[1], bqp[0], bqp[1], rqp[0], rqp[1], linesize, uvlinesize)",
          "new_text": "filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] )",
          "old_line_content": "        tprintf(s->avctx, \"filter mb:%d/%d MBAFF, QPy:%d/%d, QPb:%d/%d QPr:%d/%d ls:%d uvls:%d\", mb_x, mb_y, qp[0], qp[1], bqp[0], bqp[1], rqp[0], rqp[1], linesize, uvlinesize);",
          "new_line_content": "            filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] );",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "tprintf",
          "new_api": "filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] )",
          "old_text": "tprintf(s->avctx, \"\\n\")",
          "new_text": "filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] )",
          "old_line_content": "        { int i; for (i = 0; i < 8; i++) tprintf(s->avctx, \" bS[%d]:%d\", i, bS[i]); tprintf(s->avctx, \"\\n\"); }",
          "new_line_content": "            filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] );",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] )",
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": "filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] )",
          "new_text": "filter_mb_mbaff_edgecv( h, img_cb + 4*uvlinesize, uvlinesize, bS+4, 1, bqp[1] )",
          "old_line_content": "            filter_mb_mbaff_edgev ( h, img_y                ,   linesize, bS  , 1, qp [0] );",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cb + 4*uvlinesize, uvlinesize, bS+4, 1, bqp[1] );",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] )",
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": "filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] )",
          "new_text": "filter_mb_mbaff_edgecv( h, img_cr,                uvlinesize, bS  , 1, rqp[0] )",
          "old_line_content": "            filter_mb_mbaff_edgev ( h, img_y  + 8*  linesize,   linesize, bS+4, 1, qp [1] );",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cr,                uvlinesize, bS  , 1, rqp[0] );",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": "filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] )",
          "old_text": "filter_mb_mbaff_edgecv( h, img_cr,                uvlinesize, bS  , 1, rqp[0] )",
          "new_text": "filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] )",
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cr,                uvlinesize, bS  , 1, rqp[0] );",
          "new_line_content": "            filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] );",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": "filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] )",
          "old_text": "filter_mb_mbaff_edgecv( h, img_cr + 4*uvlinesize, uvlinesize, bS+4, 1, rqp[1] )",
          "new_text": "filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] )",
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cr + 4*uvlinesize, uvlinesize, bS+4, 1, rqp[1] );",
          "new_line_content": "            filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] );",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] )",
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": "filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] )",
          "new_text": "filter_mb_mbaff_edgecv( h, img_cb + uvlinesize, 2*uvlinesize, bS+1, 2, bqp[1] )",
          "old_line_content": "            filter_mb_mbaff_edgev ( h, img_y              , 2*  linesize, bS  , 2, qp [0] );",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cb + uvlinesize, 2*uvlinesize, bS+1, 2, bqp[1] );",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] )",
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": "filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] )",
          "new_text": "filter_mb_mbaff_edgecv( h, img_cr,              2*uvlinesize, bS  , 2, rqp[0] )",
          "old_line_content": "            filter_mb_mbaff_edgev ( h, img_y  +   linesize, 2*  linesize, bS+1, 2, qp [1] );",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cr,              2*uvlinesize, bS  , 2, rqp[0] );",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mb_type ^ mbm_type)",
          "old_line_content": "                int i, l;",
          "new_line_content": "                if( FRAME_MBAFF && IS_INTERLACED(mb_type ^ mbm_type)) { //FIXME not posible left",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(h->top_type)",
          "old_line_content": "        }",
          "new_line_content": "        if( IS_INTRA(h->top_type) )",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "check_mv",
          "old_text": null,
          "new_text": "check_mv(h, 8 + 4, bn_idx, mvy_limit)",
          "old_line_content": "                    int b_idx= 8 + 4;",
          "new_line_content": "                    bS[0] = bS[1] = bS[2] = bS[3] = check_mv(h, 8 + 4, bn_idx, mvy_limit);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mb_type)",
          "old_line_content": "    MpegEncContext * const s = &h->s;",
          "new_line_content": "    const int mvy_limit = IS_INTERLACED(mb_type) ? 2 : 4;",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "FILTER",
          "old_text": null,
          "new_text": "FILTER(v,0,0)",
          "old_line_content": "            }\\",
          "new_line_content": "            FILTER(v,0,0);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mb_type^h->left_type[0])",
          "old_line_content": "",
          "new_line_content": "            && IS_INTERLACED(mb_type^h->left_type[0])",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "FILTER",
          "old_text": null,
          "new_text": "FILTER(h,1,0)",
          "old_line_content": "        if(left_type)",
          "new_line_content": "            FILTER(h,1,0);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "FILTER",
          "old_text": null,
          "new_text": "FILTER(v,0,2)",
          "old_line_content": "        if( edges == 1 ) {",
          "new_line_content": "            FILTER(v,0,2);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "FILTER",
          "old_text": null,
          "new_text": "FILTER(v,0,3)",
          "old_line_content": "        } else {",
          "new_line_content": "            FILTER(v,0,3);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "check_mv",
          "old_text": null,
          "new_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "old_line_content": "                    }",
          "new_line_content": "                        bS[i] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type)",
          "old_line_content": "        int i;",
          "new_line_content": "        if( IS_INTRA(mb_type) )",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "tprintf",
          "old_text": null,
          "new_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize)",
          "old_line_content": "            if(bS[0]+bS[1]+bS[2]+bS[3]){",
          "new_line_content": "                tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[0][bn_idx][1] )",
          "old_line_content": "",
          "new_line_content": "        FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[0][bn_idx][1] ) >= mvy_limit;",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 0, s->current_picture.qscale_table[mbm_xy] )",
          "old_line_content": "                if( dir == 0 ) {",
          "new_line_content": "                        int qp= ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbm_xy] ) + 1 ) >> 1;",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[1][bn_idx][1] )",
          "old_line_content": "        if(!v)",
          "new_line_content": "                FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[1][bn_idx][1] ) >= mvy_limit;",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA( mbn_type )",
          "old_line_content": "                int mbn_xy = h->left_mb_xy[j];",
          "new_line_content": "                if( IS_INTRA( mbn_type ) )",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 0, s->current_picture.qscale_table[mbm_xy] )",
          "old_line_content": "                } else {",
          "new_line_content": "                        int qp= ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbm_xy] ) + 1 ) >> 1;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "IS_8x8DCT",
          "old_text": null,
          "new_text": "IS_8x8DCT(mbn_type)",
          "old_line_content": "                    bS[i] = 4;",
          "new_line_content": "                         ((!h->pps.cabac && IS_8x8DCT(mbn_type)) ?",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[1][bn_idx][1] )",
          "old_line_content": "                return 1;",
          "new_line_content": "                FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[1][bn_idx][1] ) >= mvy_limit |",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[0][bn_idx][1] )",
          "old_line_content": "                h->mv_cache[0][b_idx][0] - h->mv_cache[1][bn_idx][0] + 3 >= 7U |",
          "new_line_content": "                FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[0][bn_idx][1] ) >= mvy_limit;",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 0, mb_qp )",
          "old_line_content": "        mbn0_qp = s->current_picture.qscale_table[h->left_mb_xy[0]];",
          "new_line_content": "        bqp[0] = ( get_chroma_qp( h, 0, mb_qp ) +",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 0, mbn0_qp )",
          "old_line_content": "        mbn1_qp = s->current_picture.qscale_table[h->left_mb_xy[1]];",
          "new_line_content": "                   get_chroma_qp( h, 0, mbn0_qp ) + 1 ) >> 1;",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "IS_8x8DCT",
          "old_text": null,
          "new_text": "IS_8x8DCT(mb_type & (edge<<24))",
          "old_line_content": "        DECLARE_ALIGNED_8(int16_t, bS)[4];",
          "new_line_content": "        if( IS_8x8DCT(mb_type & (edge<<24)) ) // (edge&1) && IS_8x8DCT(mb_type)",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 1, mb_qp )",
          "old_line_content": "        qp[0] = ( mb_qp + mbn0_qp + 1 ) >> 1;",
          "new_line_content": "        rqp[0] = ( get_chroma_qp( h, 1, mb_qp ) +",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "get_chroma_qp",
          "old_text": null,
          "new_text": "get_chroma_qp( h, 1, mb_qp )",
          "old_line_content": "        qp[1] = ( mb_qp + mbn1_qp + 1 ) >> 1;",
          "new_line_content": "        rqp[1] = ( get_chroma_qp( h, 1, mb_qp ) +",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "tprintf",
          "old_text": null,
          "new_text": "tprintf(s->avctx, \"\\n\")",
          "old_line_content": "",
          "new_line_content": "        { int i; for (i = 0; i < 8; i++) tprintf(s->avctx, \" bS[%d]:%d\", i, bS[i]); tprintf(s->avctx, \"\\n\"); }",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mbm_type&~mb_type)",
          "old_line_content": "    if(mbm_type && !first_vertical_edge_done){",
          "new_line_content": "            && IS_INTERLACED(mbm_type&~mb_type)",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": null,
          "new_text": "filter_mb_mbaff_edgecv( h, img_cb,                uvlinesize, bS  , 1, bqp[0] )",
          "old_line_content": "        if(MB_FIELD){",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cb,                uvlinesize, bS  , 1, bqp[0] );",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "check_mv",
          "old_text": null,
          "new_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "old_line_content": "                int b_idx= 8 + 4 + edge * (dir ? 8:1);",
          "new_line_content": "                bS[0] = bS[1] = bS[2] = bS[3] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "filter_mb_mbaff_edgecv",
          "old_text": null,
          "new_text": "filter_mb_mbaff_edgecv( h, img_cb,              2*uvlinesize, bS  , 2, bqp[0] )",
          "old_line_content": "        }else{",
          "new_line_content": "            filter_mb_mbaff_edgecv( h, img_cb,              2*uvlinesize, bS  , 2, bqp[0] );",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type|s->current_picture.mb_type[mbn_xy])",
          "old_line_content": "            for(j=0; j<2; j++, mbn_xy += s->mb_stride){",
          "new_line_content": "                if( IS_INTRA(mb_type|s->current_picture.mb_type[mbn_xy]) ) {",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "filter_mb_dir",
          "old_text": null,
          "new_text": "filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, dir ? 0 : first_vertical_edge_done, dir)",
          "old_line_content": "",
          "new_line_content": "        filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, dir ? 0 : first_vertical_edge_done, dir);",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "filter_mb_dir",
          "old_text": null,
          "new_text": "filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, first_vertical_edge_done, 0)",
          "old_line_content": "    for( dir = 0; dir < 2; dir++ )",
          "new_line_content": "    filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, first_vertical_edge_done, 0);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "check_mv",
          "old_text": null,
          "new_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "old_line_content": "                }",
          "new_line_content": "                    bS[i] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "IS_INTERLACED",
          "old_text": null,
          "new_text": "IS_INTERLACED(mb_type|mbm_type)",
          "old_line_content": "",
          "new_line_content": "                if (   (!IS_INTERLACED(mb_type|mbm_type))",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "tprintf",
          "old_text": null,
          "new_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, tmp_linesize, tmp_uvlinesize)",
          "old_line_content": "                // Do not use s->qscale as luma quantizer because it has not the same",
          "new_line_content": "                tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, tmp_linesize, tmp_uvlinesize);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "tprintf",
          "old_text": null,
          "new_text": "tprintf(s->avctx, \"\\n\")",
          "old_line_content": "                // value in IPCM macroblocks.",
          "new_line_content": "                { int i; for (i = 0; i < 4; i++) tprintf(s->avctx, \" bS[%d]:%d\", i, bS[i]); tprintf(s->avctx, \"\\n\"); }",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "filter_mb_edgeh",
          "old_text": null,
          "new_text": "filter_mb_edgeh( &img_y[j*linesize], tmp_linesize, bS, qp, h )",
          "old_line_content": "                qp = ( s->current_picture.qscale_table[mb_xy] + s->current_picture.qscale_table[mbn_xy] + 1 ) >> 1;",
          "new_line_content": "                filter_mb_edgeh( &img_y[j*linesize], tmp_linesize, bS, qp, h );",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "tprintf",
          "old_text": null,
          "new_text": "tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize)",
          "old_line_content": "        // value in IPCM macroblocks.",
          "new_line_content": "        tprintf(s->avctx, \"filter mb:%d/%d dir:%d edge:%d, QPy:%d ls:%d uvls:%d\", mb_x, mb_y, dir, edge, qp, linesize, uvlinesize);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "IS_INTRA",
          "old_text": null,
          "new_text": "IS_INTRA(mb_type|mbm_type)",
          "old_line_content": "            DECLARE_ALIGNED_8(int16_t, bS)[4];",
          "new_line_content": "            if( IS_INTRA(mb_type|mbm_type)) {",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "filter_mb_edgecv",
          "old_text": null,
          "new_text": "filter_mb_edgecv( &img_cb[2*edge], uvlinesize, bS, h->chroma_qp[0], h)",
          "old_line_content": "        if( dir == 0 ) {",
          "new_line_content": "                filter_mb_edgecv( &img_cb[2*edge], uvlinesize, bS, h->chroma_qp[0], h);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "h264_loop_filter_strength",
          "old_text": null,
          "new_text": "s->dsp.h264_loop_filter_strength( bS, h->non_zero_count_cache, h->ref_cache, h->mv_cache,\n                                              h->list_count==2, edges, step, mask_edge0, mask_edge1, FIELD_PICTURE)",
          "old_line_content": "                             ? 3 : 0;",
          "new_line_content": "            s->dsp.h264_loop_filter_strength( bS, h->non_zero_count_cache, h->ref_cache, h->mv_cache,",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "filter_mb_edgech",
          "old_text": null,
          "new_text": "filter_mb_edgech( &img_cb[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[0], h)",
          "old_line_content": "        } else {",
          "new_line_content": "                filter_mb_edgech( &img_cb[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[0], h);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 641,
          "old_api": "filter_mb_edgech",
          "new_api": null,
          "old_text": "filter_mb_edgech( &img_cb[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[0], h)",
          "new_text": null,
          "old_line_content": "                filter_mb_edgech( &img_cb[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[0], h);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "filter_mb_edgech",
          "new_api": null,
          "old_text": "filter_mb_edgech( &img_cr[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[1], h)",
          "new_text": null,
          "old_line_content": "                filter_mb_edgech( &img_cr[2*edge*uvlinesize], uvlinesize, bS, h->chroma_qp[1], h);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mb_type ^ mbm_type)",
          "new_text": null,
          "old_line_content": "                if( FRAME_MBAFF && IS_INTERLACED(mb_type ^ mbm_type)) { //FIXME not posible left",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(h->left_type[0])",
          "new_text": null,
          "old_line_content": "        if( IS_INTRA(h->left_type[0]) )",
          "new_line_content": "            bSv[1][0] = FIELD_PICTURE ? 0x0003000300030003ULL : 0x0004000400040004ULL;",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(h->top_type)",
          "new_text": null,
          "old_line_content": "        if( IS_INTRA(h->top_type) )",
          "new_line_content": "#define FILTER(hv,dir,edge)\\",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "check_mv",
          "new_api": null,
          "old_text": "check_mv(h, 8 + 4, bn_idx, mvy_limit)",
          "new_text": null,
          "old_line_content": "                    bS[0] = bS[1] = bS[2] = bS[3] = check_mv(h, 8 + 4, bn_idx, mvy_limit);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mb_type)",
          "new_text": null,
          "old_line_content": "    const int mvy_limit = IS_INTERLACED(mb_type) ? 2 : 4;",
          "new_line_content": "    int list;",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mb_type^h->left_type[0])",
          "new_text": null,
          "old_line_content": "            && IS_INTERLACED(mb_type^h->left_type[0])",
          "new_line_content": "        /* First vertical edge is different in MBAFF frames",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "FILTER",
          "new_api": null,
          "old_text": "FILTER(v,0,2)",
          "new_text": null,
          "old_line_content": "            FILTER(v,0,2);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "check_mv",
          "new_api": null,
          "old_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "new_text": null,
          "old_line_content": "                        bS[i] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "FILTER",
          "new_api": null,
          "old_text": "FILTER(h,1,1)",
          "new_text": null,
          "old_line_content": "            FILTER(h,1,1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "FILTER",
          "new_api": null,
          "old_text": "FILTER(h,1,2)",
          "new_text": null,
          "old_line_content": "            FILTER(h,1,2);",
          "new_line_content": "#undef FILTER",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "FILTER",
          "new_api": null,
          "old_text": "FILTER(h,1,3)",
          "new_text": null,
          "old_line_content": "            FILTER(h,1,3);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type)",
          "new_text": null,
          "old_line_content": "        if( IS_INTRA(mb_type) )",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[0][bn_idx][1] )",
          "new_text": null,
          "old_line_content": "        FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[0][bn_idx][1] ) >= mvy_limit;",
          "new_line_content": "        if(!v)",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 1, s->current_picture.qscale_table[mbm_xy] )",
          "new_text": null,
          "old_line_content": "                            qp= ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbm_xy] ) + 1 ) >> 1;",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[1][bn_idx][1] )",
          "new_text": null,
          "old_line_content": "                FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[1][bn_idx][1] ) >= mvy_limit;",
          "new_line_content": "            if(h->ref_cache[0][b_idx] != h->ref_cache[1][bn_idx] |",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA( mbn_type )",
          "new_text": null,
          "old_line_content": "                if( IS_INTRA( mbn_type ) )",
          "new_line_content": "                    bS[i] = 1 + !!(h->non_zero_count_cache[12+8*(i>>1)] |",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "IS_8x8DCT",
          "new_api": null,
          "old_text": "IS_8x8DCT(mbn_type)",
          "new_text": null,
          "old_line_content": "                         ((!h->pps.cabac && IS_8x8DCT(mbn_type)) ?",
          "new_line_content": "                            h->non_zero_count[mbn_xy][ off[i] ]));",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 1, s->current_picture.qscale_table[mbm_xy] )",
          "new_text": null,
          "old_line_content": "                            qp= ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbm_xy] ) + 1 ) >> 1;",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "filter_mb_edgech",
          "new_api": null,
          "old_text": "filter_mb_edgech( &img_cr[0], uvlinesize, bS, qp, h)",
          "new_text": null,
          "old_line_content": "                        filter_mb_edgech( &img_cr[0], uvlinesize, bS, qp, h);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[1][bn_idx][1] )",
          "new_text": null,
          "old_line_content": "                FFABS( h->mv_cache[0][b_idx][1] - h->mv_cache[1][bn_idx][1] ) >= mvy_limit |",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[0][bn_idx][1] )",
          "new_text": null,
          "old_line_content": "                FFABS( h->mv_cache[1][b_idx][1] - h->mv_cache[0][bn_idx][1] ) >= mvy_limit;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 0, mbn0_qp )",
          "new_text": null,
          "old_line_content": "                   get_chroma_qp( h, 0, mbn0_qp ) + 1 ) >> 1;",
          "new_line_content": "        qp[1] = ( mb_qp + mbn1_qp + 1 ) >> 1;",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type)",
          "new_text": null,
          "old_line_content": "        if( IS_INTRA(mb_type)) {",
          "new_line_content": "            int i, l;",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 0, mbn1_qp )",
          "new_text": null,
          "old_line_content": "                   get_chroma_qp( h, 0, mbn1_qp ) + 1 ) >> 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 1, mb_qp )",
          "new_text": null,
          "old_line_content": "        rqp[1] = ( get_chroma_qp( h, 1, mb_qp ) +",
          "new_line_content": "        /* Filter edge */",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mbm_type&~mb_type)",
          "new_text": null,
          "old_line_content": "            && IS_INTERLACED(mbm_type&~mb_type)",
          "new_line_content": "            // be done twice (one each of the field) even if we are in a",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": null,
          "old_text": "filter_mb_mbaff_edgecv( h, img_cb + 4*uvlinesize, uvlinesize, bS+4, 1, bqp[1] )",
          "new_text": null,
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cb + 4*uvlinesize, uvlinesize, bS+4, 1, bqp[1] );",
          "new_line_content": "        }else{",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "check_mv",
          "new_api": null,
          "old_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "new_text": null,
          "old_line_content": "                bS[0] = bS[1] = bS[2] = bS[3] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": null,
          "old_text": "filter_mb_mbaff_edgecv( h, img_cb + uvlinesize, 2*uvlinesize, bS+1, 2, bqp[1] )",
          "new_text": null,
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cb + uvlinesize, 2*uvlinesize, bS+1, 2, bqp[1] );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": null,
          "old_text": "filter_mb_mbaff_edgecv( h, img_cr,              2*uvlinesize, bS  , 2, rqp[0] )",
          "new_text": null,
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cr,              2*uvlinesize, bS  , 2, rqp[0] );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "filter_mb_mbaff_edgecv",
          "new_api": null,
          "old_text": "filter_mb_mbaff_edgecv( h, img_cr + uvlinesize, 2*uvlinesize, bS+1, 2, rqp[1] )",
          "new_text": null,
          "old_line_content": "            filter_mb_mbaff_edgecv( h, img_cr + uvlinesize, 2*uvlinesize, bS+1, 2, rqp[1] );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type|s->current_picture.mb_type[mbn_xy])",
          "new_text": null,
          "old_line_content": "                if( IS_INTRA(mb_type|s->current_picture.mb_type[mbn_xy]) ) {",
          "new_line_content": "                    const uint8_t *mbn_nnz = h->non_zero_count[mbn_xy] + 4+3*8; //FIXME  8x8dct?",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "filter_mb_dir",
          "new_api": null,
          "old_text": "filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, first_vertical_edge_done, 0)",
          "new_text": null,
          "old_line_content": "    filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, first_vertical_edge_done, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "filter_mb_dir",
          "new_api": null,
          "old_text": "filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, 0, 1)",
          "new_text": null,
          "old_line_content": "    filter_mb_dir(h, mb_x, mb_y, img_y, img_cb, img_cr, linesize, uvlinesize, mb_xy, mb_type, mvy_limit, 0, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "check_mv",
          "new_api": null,
          "old_text": "check_mv(h, b_idx, bn_idx, mvy_limit)",
          "new_text": null,
          "old_line_content": "                    bS[i] = check_mv(h, b_idx, bn_idx, mvy_limit);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] )",
          "new_text": null,
          "old_line_content": "                                ( h->chroma_qp[0] + get_chroma_qp( h, 0, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "filter_mb_edgech",
          "new_api": null,
          "old_text": "filter_mb_edgech( &img_cr[j*uvlinesize], tmp_uvlinesize, bS,\n                                ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h)",
          "new_text": null,
          "old_line_content": "                filter_mb_edgech( &img_cr[j*uvlinesize], tmp_uvlinesize, bS,",
          "new_line_content": "        }else{",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "get_chroma_qp",
          "new_api": null,
          "old_text": "get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] )",
          "new_text": null,
          "old_line_content": "                                ( h->chroma_qp[1] + get_chroma_qp( h, 1, s->current_picture.qscale_table[mbn_xy] ) + 1 ) >> 1, h);",
          "new_line_content": "            DECLARE_ALIGNED_8(int16_t, bS)[4];",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "IS_INTERLACED",
          "new_api": null,
          "old_text": "IS_INTERLACED(mb_type|mbm_type)",
          "new_text": null,
          "old_line_content": "                if (   (!IS_INTERLACED(mb_type|mbm_type))",
          "new_line_content": "                    *(uint64_t*)bS= 0x0004000400040004ULL;",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "IS_INTRA",
          "new_api": null,
          "old_text": "IS_INTRA(mb_type|mbm_type)",
          "new_text": null,
          "old_line_content": "            if( IS_INTRA(mb_type|mbm_type)) {",
          "new_line_content": "                    || ((FRAME_MBAFF || (s->picture_structure != PICT_FRAME)) && (dir == 0))",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "filter_mb_edgecv",
          "new_api": null,
          "old_text": "filter_mb_edgecv( &img_cb[2*edge], uvlinesize, bS, h->chroma_qp[0], h)",
          "new_text": null,
          "old_line_content": "                filter_mb_edgecv( &img_cb[2*edge], uvlinesize, bS, h->chroma_qp[0], h);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "IS_8x8DCT",
          "new_api": null,
          "old_text": "IS_8x8DCT(mb_type)",
          "new_text": null,
          "old_line_content": "            int step = IS_8x8DCT(mb_type) ? 2 : 1;",
          "new_line_content": "                                              h->list_count==2, edges, step, mask_edge0, mask_edge1, FIELD_PICTURE);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 25,
      "total_additions": 43,
      "total_deletions": 44,
      "total_api_changes": 112
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 112,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          377,
          378,
          379,
          380,
          383
        ]
      }
    },
    "api_calls_before": 153,
    "api_calls_after": 152,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 7,
      "total_diff_lines": 23
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/7d2b787daa8237480cee619e3d22bd6cf9740db4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/7d2b787daa8237480cee619e3d22bd6cf9740db4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/7d2b787daa8237480cee619e3d22bd6cf9740db4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/7d2b787daa8237480cee619e3d22bd6cf9740db4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1346,
          "old_api": "mjpeg_decode_dc",
          "new_api": "align_get_bits",
          "old_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "new_text": "align_get_bits(&s->gb)",
          "old_line_content": "                buffer[mb_x][i]= mask & (pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform));",
          "new_line_content": "                align_get_bits(&s->gb);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "memset",
          "new_api": "dprintf",
          "old_text": "memset(s->block, 0, sizeof(s->block))",
          "new_text": "dprintf(\"error y=%d x=%d\\n\", mb_y, mb_x)",
          "old_line_content": "                    memset(s->block, 0, sizeof(s->block));",
          "new_line_content": "                        dprintf(\"error y=%d x=%d\\n\", mb_y, mb_x);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "get_bits",
          "new_api": "dprintf",
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": "dprintf(\"decode_sos: invalid len (%d)\\n\", len)",
          "old_line_content": "    len = get_bits(&s->gb, 16);",
          "new_line_content": "        dprintf(\"decode_sos: invalid len (%d)\\n\", len);",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "get_bits",
          "new_api": "dprintf",
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": "dprintf(\"restart interval: %d\\n\", s->restart_interval)",
          "old_line_content": "    if (get_bits(&s->gb, 16) != 4)",
          "new_line_content": "    dprintf(\"restart interval: %d\\n\", s->restart_interval);",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "get_bits_count",
          "new_api": "be2me_32",
          "old_text": "get_bits_count(&s->gb)",
          "new_text": "be2me_32(id)",
          "old_line_content": "    if(8*len + get_bits_count(&s->gb) > s->gb.size_in_bits)",
          "new_line_content": "    id = be2me_32(id);",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "be2me_32",
          "new_api": "av_log",
          "old_text": "be2me_32(id)",
          "new_text": "av_log(s->avctx, AV_LOG_DEBUG, \"APPx %8X\\n\", id)",
          "old_line_content": "    id = be2me_32(id);",
          "new_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"APPx %8X\\n\", id);",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "get_bits",
          "new_api": "skip_bits",
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "        s->interlace_polarity = get_bits(&s->gb, 8);",
          "new_line_content": "        skip_bits(&s->gb, 32);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "ff_get_fourcc",
          "new_api": "get_bits",
          "old_text": "ff_get_fourcc(\"JFIF\")",
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "    if (id == ff_get_fourcc(\"JFIF\"))",
          "new_line_content": "        v1= get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "get_bits",
          "new_api": "av_log",
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: JFIF header found (version: %x.%x) SAR=%d/%d\\n\",\n                v1, v2,\n                s->avctx->sample_aspect_ratio.num,\n                s->avctx->sample_aspect_ratio.den\n            )",
          "old_line_content": "        s->avctx->sample_aspect_ratio.num= get_bits(&s->gb, 16);",
          "new_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"mjpeg: JFIF header found (version: %x.%x) SAR=%d/%d\\n\",",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "get_bits",
          "new_api": "skip_bits",
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "    if (id == ff_get_fourcc(\"Adob\") && (get_bits(&s->gb, 8) == 'e'))",
          "new_line_content": "        skip_bits(&s->gb, 16); /* version */",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "av_log",
          "new_api": "skip_bits",
          "old_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Adobe header found\\n\")",
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Adobe header found\\n\");",
          "new_line_content": "        skip_bits(&s->gb, 8);  /* transform */",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "ff_get_fourcc",
          "new_api": "skip_bits",
          "old_text": "ff_get_fourcc(\"LJIF\")",
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "    if (id == ff_get_fourcc(\"LJIF\")){",
          "new_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "av_log",
          "new_api": "skip_bits",
          "old_text": "av_log(s->avctx, AV_LOG_INFO, \"Pegasus lossless jpeg header found\\n\")",
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"Pegasus lossless jpeg header found\\n\");",
          "new_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "skip_bits",
          "new_api": "get_bits",
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        skip_bits(&s->gb, 16); /* version ? */",
          "new_line_content": "        switch( get_bits(&s->gb, 8)){",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "ff_get_fourcc",
          "new_api": "skip_bits",
          "old_text": "ff_get_fourcc(\"mjpg\")",
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "        if (id == ff_get_fourcc(\"mjpg\")) /* Apple MJPEG-A */",
          "new_line_content": "            skip_bits(&s->gb, 32); /* pad field size */",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "skip_bits",
          "new_api": "av_log",
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Apple MJPEG-A header found\\n\")",
          "old_line_content": "            skip_bits(&s->gb, 32); /* scan off */",
          "new_line_content": "                av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Apple MJPEG-A header found\\n\");",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "av_malloc",
          "new_api": "get_bits",
          "old_text": "av_malloc(len - 1)",
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        uint8_t *cbuf = av_malloc(len - 1);",
          "new_line_content": "                cbuf[i] = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "strcmp",
          "new_api": "av_free",
          "old_text": "strcmp(cbuf, \"CS=ITU601\")",
          "new_text": "av_free(cbuf)",
          "old_line_content": "            else if(!strcmp(cbuf, \"CS=ITU601\")){",
          "new_line_content": "            av_free(cbuf);",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "dprintf",
          "new_api": "av_free",
          "old_text": "dprintf(\"marker=%x avail_size_in_buf=%d\\n\", start_code, buf_end - buf_ptr)",
          "new_text": "av_free(s->buffer)",
          "old_line_content": "                dprintf(\"marker=%x avail_size_in_buf=%d\\n\", start_code, buf_end - buf_ptr);",
          "new_line_content": "                    av_free(s->buffer);",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "put_bits",
          "new_api": "flush_put_bits",
          "old_text": "put_bits(&pb, 7, x)",
          "new_text": "flush_put_bits(&pb)",
          "old_line_content": "                            put_bits(&pb, 7, x);",
          "new_line_content": "                    flush_put_bits(&pb);",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "init_get_bits",
          "new_api": "av_log",
          "old_text": "init_get_bits(&s->gb, buf_ptr, (buf_end - buf_ptr)*8)",
          "new_text": "av_log(s->avctx, AV_LOG_DEBUG, \"startcode: %X\\n\", start_code)",
          "old_line_content": "                    init_get_bits(&s->gb, buf_ptr, (buf_end - buf_ptr)*8);",
          "new_line_content": "                    av_log(s->avctx, AV_LOG_DEBUG, \"startcode: %X\\n\", start_code);",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "mjpeg_decode_dqt",
          "new_api": "av_log",
          "old_text": "mjpeg_decode_dqt(s)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"huffman table decode error\\n\")",
          "old_line_content": "                    mjpeg_decode_dqt(s);",
          "new_line_content": "                        av_log(s->avctx, AV_LOG_ERROR, \"huffman table decode error\\n\");",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "mjpeg_decode_sof",
          "new_api": "decode_lse",
          "old_text": "mjpeg_decode_sof(s)",
          "new_text": "decode_lse(s)",
          "old_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "new_line_content": "                    if (decode_lse(s) < 0)",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "init_get_bits",
          "new_api": "ff_get_fourcc",
          "old_text": "init_get_bits(&hgb, buf_ptr, /*buf_size*/(buf_end - buf_ptr)*8)",
          "new_text": "ff_get_fourcc(\"mjpg\")",
          "old_line_content": "    init_get_bits(&hgb, buf_ptr, /*buf_size*/(buf_end - buf_ptr)*8);",
          "new_line_content": "    if (get_bits_long(&hgb, 32) != be2me_32(ff_get_fourcc(\"mjpg\")))",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "skip_bits",
          "new_api": "dprintf",
          "old_text": "skip_bits(&hgb, 32)",
          "new_text": "dprintf(\"not mjpeg-b (bad fourcc)\\n\")",
          "old_line_content": "    skip_bits(&hgb, 32); /* reserved zeros */",
          "new_line_content": "        dprintf(\"not mjpeg-b (bad fourcc)\\n\");",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "dprintf",
          "new_api": "get_bits_long",
          "old_text": "dprintf(\"not mjpeg-b (bad fourcc)\\n\")",
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "        dprintf(\"not mjpeg-b (bad fourcc)\\n\");",
          "new_line_content": "    field_size = get_bits_long(&hgb, 32); /* field size */",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": "get_bits_long",
          "new_api": "dprintf",
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": "dprintf(\"second field offs: 0x%x\\n\", second_field_offs)",
          "old_line_content": "    field_size = get_bits_long(&hgb, 32); /* field size */",
          "new_line_content": "    dprintf(\"second field offs: 0x%x\\n\", second_field_offs);",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": "dprintf",
          "new_api": "get_bits_long",
          "old_text": "dprintf(\"second field offs: 0x%x\\n\", second_field_offs)",
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "    dprintf(\"second field offs: 0x%x\\n\", second_field_offs);",
          "new_line_content": "    dqt_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "get_bits_long",
          "new_api": "init_get_bits",
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": "init_get_bits(&s->gb, buf+dqt_offs, (buf_end - (buf+dqt_offs))*8)",
          "old_line_content": "    dqt_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "        init_get_bits(&s->gb, buf+dqt_offs, (buf_end - (buf+dqt_offs))*8);",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "mjpeg_decode_dqt",
          "new_api": "dprintf",
          "old_text": "mjpeg_decode_dqt(s)",
          "new_text": "dprintf(\"dht offs: 0x%x\\n\", dht_offs)",
          "old_line_content": "        mjpeg_decode_dqt(s);",
          "new_line_content": "    dprintf(\"dht offs: 0x%x\\n\", dht_offs);",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "get_bits_long",
          "new_api": "init_get_bits",
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": "init_get_bits(&s->gb, buf+dht_offs, (buf_end - (buf+dht_offs))*8)",
          "old_line_content": "    dht_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "        init_get_bits(&s->gb, buf+dht_offs, (buf_end - (buf+dht_offs))*8);",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "mjpeg_decode_dht",
          "new_api": "dprintf",
          "old_text": "mjpeg_decode_dht(s)",
          "new_text": "dprintf(\"sof offs: 0x%x\\n\", sof_offs)",
          "old_line_content": "        mjpeg_decode_dht(s);",
          "new_line_content": "    dprintf(\"sof offs: 0x%x\\n\", sof_offs);",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "get_bits_long",
          "new_api": "init_get_bits",
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": "init_get_bits(&s->gb, buf+sof_offs, (buf_end - (buf+sof_offs))*8)",
          "old_line_content": "    sof_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "        init_get_bits(&s->gb, buf+sof_offs, (buf_end - (buf+sof_offs))*8);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "mjpeg_decode_sof",
          "new_api": "get_bits_long",
          "old_text": "mjpeg_decode_sof(s)",
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "        if (mjpeg_decode_sof(s) < 0)",
          "new_line_content": "    sos_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "dprintf",
          "new_api": "init_get_bits",
          "old_text": "dprintf(\"sod offs: 0x%x\\n\", sod_offs)",
          "new_text": "init_get_bits(&s->gb, buf+sos_offs, field_size*8)",
          "old_line_content": "    dprintf(\"sod offs: 0x%x\\n\", sod_offs);",
          "new_line_content": "        init_get_bits(&s->gb, buf+sos_offs, field_size*8);",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": "av_free",
          "new_api": "free_vlc",
          "old_text": "av_free(s->qscale_table)",
          "new_text": "free_vlc(&s->vlcs[i][j])",
          "old_line_content": "    av_free(s->qscale_table);",
          "new_line_content": "            free_vlc(&s->vlcs[i][j]);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2048,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(s->qscale[0], s->qscale[1])",
          "old_line_content": "                        *picture = s->picture;",
          "new_line_content": "                            picture->quality= FFMAX(FFMAX(s->qscale[0], s->qscale[1]), s->qscale[2]);",
          "content_same": false
        },
        {
          "line": 2051,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(picture->qscale_table, picture->quality, (s->width+15)/16)",
          "old_line_content": "                        if(!s->lossless){",
          "new_line_content": "                            memset(picture->qscale_table, picture->quality, (s->width+15)/16);",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality)",
          "old_line_content": "                            picture->qstride= 0;",
          "new_line_content": "                                av_log(s->avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"decode_sos: index(%d) out of components\\n\", index)",
          "old_line_content": "            if (id == s->component_id[index])",
          "new_line_content": "            dprintf(\"decode_sos: index(%d) out of components\\n\", index);",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": null,
          "new_api": "mjpeg_decode_sos",
          "old_text": null,
          "new_text": "mjpeg_decode_sos(s)",
          "old_line_content": "                        goto the_end;",
          "new_line_content": "                    mjpeg_decode_sos(s);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "        s->nb_blocks[i] = s->h_count[index] * s->v_count[index];",
          "new_line_content": "        s->dc_index[i] = get_bits(&s->gb, 4);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "        s->h_scount[i] = s->h_count[index];",
          "new_line_content": "        s->ac_index[i] = get_bits(&s->gb, 4);",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "mjpeg_decode_dri",
          "old_text": null,
          "new_text": "mjpeg_decode_dri(s)",
          "old_line_content": "                    if ((s->buggy_avid && !s->interlaced) || s->restart_interval)",
          "new_line_content": "                    mjpeg_decode_dri(s);",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: unsupported coding type (%x)\\n\", start_code)",
          "old_line_content": "                case SOF13:",
          "new_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: unsupported coding type (%x)\\n\", start_code);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        }",
          "new_line_content": "    predictor= get_bits(&s->gb, 8); /* JPEG Ss / lossless JPEG predictor /JPEG-LS NEAR */",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "                }",
          "new_line_content": "                buf_ptr += (get_bits_count(&s->gb)+7)/8;",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"marker parser used %d bytes (%d bits)\\n\",\n                    (get_bits_count(&s->gb)+7)/8, get_bits_count(&s->gb))",
          "old_line_content": "",
          "new_line_content": "                dprintf(\"marker parser used %d bytes (%d bits)\\n\",",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "not_the_end:",
          "new_line_content": "                    (get_bits_count(&s->gb)+7)/8, get_bits_count(&s->gb));",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "#endif",
          "new_line_content": "    ilv= get_bits(&s->gb, 8);    /* JPEG Se / JPEG-LS ILV */",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 4)",
          "old_line_content": "    }",
          "new_line_content": "    skip_bits(&s->gb, 4); /* Ah */",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "",
          "new_line_content": "    point_transform= get_bits(&s->gb, 4); /* Al */",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"mjpeg decode frame unused %d bytes\\n\", buf_end - buf_ptr)",
          "old_line_content": "            }",
          "new_line_content": "    dprintf(\"mjpeg decode frame unused %d bytes\\n\", buf_end - buf_ptr);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_DEBUG, \"%s %s p:%d >>:%d ilv:%d bits:%d %s\\n\", s->lossless ? \"lossless\" : \"sequencial DCT\", s->rgb ? \"RGB\" : \"\",\n               predictor, point_transform, ilv, s->bits,\n               s->pegasus_rct ? \"PRCT\" : (s->rct ? \"RCT\" : \"\"))",
          "old_line_content": "        s->v_scount[0] = 1;",
          "new_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"%s %s p:%d >>:%d ilv:%d bits:%d %s\\n\", s->lossless ? \"lossless\" : \"sequencial DCT\", s->rgb ? \"RGB\" : \"\",",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "",
          "new_line_content": "        skip_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&hgb, buf_ptr, /*buf_size*/(buf_end - buf_ptr)*8)",
          "old_line_content": "    s->restart_interval = 0;",
          "new_line_content": "    init_get_bits(&hgb, buf_ptr, /*buf_size*/(buf_end - buf_ptr)*8);",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&hgb, 32)",
          "old_line_content": "    s->mjpb_skiptosod = 0;",
          "new_line_content": "    skip_bits(&hgb, 32); /* reserved zeros */",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "ls_decode_picture",
          "old_text": null,
          "new_text": "ls_decode_picture(s, predictor, point_transform, ilv)",
          "old_line_content": "        if(s->ls){",
          "new_line_content": "            ls_decode_picture(s, predictor, point_transform, ilv);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "ljpeg_decode_rgb_scan",
          "old_text": null,
          "new_text": "ljpeg_decode_rgb_scan(s, predictor, point_transform)",
          "old_line_content": "",
          "new_line_content": "                if(ljpeg_decode_rgb_scan(s, predictor, point_transform) < 0)",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "ljpeg_decode_yuv_scan",
          "old_text": null,
          "new_text": "ljpeg_decode_yuv_scan(s, predictor, point_transform)",
          "old_line_content": "            if(s->rgb){",
          "new_line_content": "                if(ljpeg_decode_yuv_scan(s, predictor, point_transform) < 0)",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"field size: 0x%x\\n\", field_size)",
          "old_line_content": "        return 0;",
          "new_line_content": "    dprintf(\"field size: 0x%x\\n\", field_size);",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&hgb, 32)",
          "old_line_content": "    }",
          "new_line_content": "    skip_bits(&hgb, 32); /* padded field size */",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "",
          "new_line_content": "    second_field_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "mjpeg_decode_scan",
          "old_text": null,
          "new_text": "mjpeg_decode_scan(s)",
          "old_line_content": "                    return -1;",
          "new_line_content": "        if(mjpeg_decode_scan(s) < 0)",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "emms_c",
          "old_text": null,
          "new_text": "emms_c()",
          "old_line_content": "    }else{",
          "new_line_content": "    emms_c();",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"dqt offs: 0x%x\\n\", dqt_offs)",
          "old_line_content": "    if (second_field_offs)",
          "new_line_content": "    dprintf(\"dqt offs: 0x%x\\n\", dqt_offs);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"decode_sos: ac/dc index out of range\\n\")",
          "old_line_content": "    }",
          "new_line_content": "    dprintf(\"decode_sos: ac/dc index out of range\\n\");",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": null,
          "new_api": "mjpeg_decode_dqt",
          "old_text": null,
          "new_text": "mjpeg_decode_dqt(s)",
          "old_line_content": "    if (dqt_offs)",
          "new_line_content": "        mjpeg_decode_dqt(s);",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "        s->start_code = DQT;",
          "new_line_content": "    dht_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "}",
          "new_line_content": "    if (get_bits(&s->gb, 16) != 4)",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "static int mjpeg_decode_dri(MJpegDecodeContext *s)",
          "new_line_content": "    s->restart_interval = get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "mjpeg_decode_dht",
          "old_text": null,
          "new_text": "mjpeg_decode_dht(s)",
          "old_line_content": "    if (dht_offs)",
          "new_line_content": "        mjpeg_decode_dht(s);",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "        s->start_code = DHT;",
          "new_line_content": "    sof_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "static int mjpeg_decode_app(MJpegDecodeContext *s)",
          "new_line_content": "    len = get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "mjpeg_decode_sof",
          "old_text": null,
          "new_text": "mjpeg_decode_sof(s)",
          "old_line_content": "    if (sof_offs)",
          "new_line_content": "        if (mjpeg_decode_sof(s) < 0)",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "",
          "new_line_content": "    if(8*len + get_bits_count(&s->gb) > s->gb.size_in_bits)",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "        return -1;",
          "new_line_content": "    id = (get_bits(&s->gb, 16) << 16) | get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"sos offs: 0x%x\\n\", sos_offs)",
          "old_line_content": "            return -1;",
          "new_line_content": "    dprintf(\"sos offs: 0x%x\\n\", sos_offs);",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": null,
          "new_api": "get_bits_long",
          "old_text": null,
          "new_text": "get_bits_long(&hgb, 32)",
          "old_line_content": "    }",
          "new_line_content": "    sod_offs = get_bits_long(&hgb, 32);",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"sod offs: 0x%x\\n\", sod_offs)",
          "old_line_content": "",
          "new_line_content": "    dprintf(\"sod offs: 0x%x\\n\", sod_offs);",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "show_bits",
          "old_text": null,
          "new_text": "show_bits(&s->gb, 16)",
          "old_line_content": "    if (sos_offs)",
          "new_line_content": "        s->mjpb_skiptosod = (sod_offs - sos_offs - show_bits(&s->gb, 16));",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": null,
          "new_api": "mjpeg_decode_sos",
          "old_text": null,
          "new_text": "mjpeg_decode_sos(s)",
          "old_line_content": "//        init_get_bits(&s->gb, buf+sos_offs, (buf_end - (buf+sos_offs))*8);",
          "new_line_content": "        mjpeg_decode_sos(s);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "ff_get_fourcc",
          "old_text": null,
          "new_text": "ff_get_fourcc(\"AVI1\")",
          "old_line_content": "",
          "new_line_content": "    if (id == ff_get_fourcc(\"AVI1\"))",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        */",
          "new_line_content": "        s->interlace_polarity = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "//        if (s->first_picture)",
          "new_line_content": "        skip_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "//            printf(\"mjpeg: workarounding buggy AVID\\n\");",
          "new_line_content": "        skip_bits(&s->gb, 32);",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(s->qscale[0], s->qscale[1])",
          "old_line_content": "    *picture= s->picture;",
          "new_line_content": "        picture->quality= FFMAX(FFMAX(s->qscale[0], s->qscale[1]), s->qscale[2]);",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(picture->qscale_table, picture->quality, (s->width+15)/16)",
          "old_line_content": "    if(!s->lossless){",
          "new_line_content": "        memset(picture->qscale_table, picture->quality, (s->width+15)/16);",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality)",
          "old_line_content": "        picture->qstride= 0;",
          "new_line_content": "            av_log(avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality);",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "ff_get_fourcc",
          "old_text": null,
          "new_text": "ff_get_fourcc(\"JFIF\")",
          "old_line_content": "    }",
          "new_line_content": "    if (id == ff_get_fourcc(\"JFIF\"))",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "",
          "new_line_content": "        skip_bits(&s->gb, 8); /* the trailing zero-byte */",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "    {",
          "new_line_content": "        v2= get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "        int t_w, t_h, v1, v2;",
          "new_line_content": "        skip_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "                s->avctx->sample_aspect_ratio.num,",
          "new_line_content": "        t_w = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "                s->avctx->sample_aspect_ratio.den",
          "new_line_content": "        t_h = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(buf_size + 1024)",
          "old_line_content": "    buf_ptr = buf;",
          "new_line_content": "    recoded = av_mallocz(buf_size + 1024);",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        len -= 10;",
          "new_line_content": "    if (id == ff_get_fourcc(\"Adob\") && (get_bits(&s->gb, 8) == 'e'))",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(recoded+j, &sp5x_data_dqt[0], sizeof(sp5x_data_dqt))",
          "old_line_content": "    /* SOI */",
          "new_line_content": "    memcpy(recoded+j, &sp5x_data_dqt[0], sizeof(sp5x_data_dqt));",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(recoded+j+5, &sp5x_quant_table[qscale * 2], 64)",
          "old_line_content": "    recoded[j++] = 0xFF;",
          "new_line_content": "    memcpy(recoded+j+5, &sp5x_quant_table[qscale * 2], 64);",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(recoded+j+70, &sp5x_quant_table[(qscale * 2) + 1], 64)",
          "old_line_content": "    recoded[j++] = 0xD8;",
          "new_line_content": "    memcpy(recoded+j+70, &sp5x_quant_table[(qscale * 2) + 1], 64);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Adobe header found\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Adobe header found\\n\");",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "    {",
          "new_line_content": "        skip_bits(&s->gb, 16); /* flags0 */",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "        if (s->avctx->debug & FF_DEBUG_PICT_INFO)",
          "new_line_content": "        skip_bits(&s->gb, 16); /* flags1 */",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(recoded+j, &sp5x_data_sof[0], sizeof(sp5x_data_sof))",
          "old_line_content": "",
          "new_line_content": "    memcpy(recoded+j, &sp5x_data_sof[0], sizeof(sp5x_data_sof));",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "ff_get_fourcc",
          "old_text": null,
          "new_text": "ff_get_fourcc(\"LJIF\")",
          "old_line_content": "        len -= 7;",
          "new_line_content": "    if (id == ff_get_fourcc(\"LJIF\")){",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_INFO, \"Pegasus lossless jpeg header found\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"Pegasus lossless jpeg header found\\n\");",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "",
          "new_line_content": "        skip_bits(&s->gb, 16); /* version ? */",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "        if (s->avctx->debug & FF_DEBUG_PICT_INFO)",
          "new_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(recoded+j, &sp5x_data_sos[0], sizeof(sp5x_data_sos))",
          "old_line_content": "    recoded[j+7] = (avctx->coded_width >> 8) & 0xFF;",
          "new_line_content": "    memcpy(recoded+j, &sp5x_data_sos[0], sizeof(sp5x_data_sos));",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"unknown colorspace\\n\")",
          "old_line_content": "            s->rgb= 1;",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"unknown colorspace\\n\");",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": null,
          "new_api": "mjpeg_decode_frame",
          "old_text": null,
          "new_text": "mjpeg_decode_frame(avctx, data, data_size, recoded, j)",
          "old_line_content": "    /* EOI */",
          "new_line_content": "    i = mjpeg_decode_frame(avctx, data, data_size, recoded, j);",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(recoded)",
          "old_line_content": "    recoded[j++] = 0xD9;",
          "new_line_content": "    av_free(recoded);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "",
          "new_line_content": "        id = (get_bits(&s->gb, 16) << 16) | get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "be2me_32",
          "old_text": null,
          "new_text": "be2me_32(id)",
          "old_line_content": "    /* Apple MJPEG-A */",
          "new_line_content": "        id = be2me_32(id);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "ff_get_fourcc",
          "old_text": null,
          "new_text": "ff_get_fourcc(\"mjpg\")",
          "old_line_content": "    {",
          "new_line_content": "        if (id == ff_get_fourcc(\"mjpg\")) /* Apple MJPEG-A */",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "        len -= 4;",
          "new_line_content": "            skip_bits(&s->gb, 32); /* field size */",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "        {",
          "new_line_content": "            skip_bits(&s->gb, 32); /* next off */",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 32)",
          "old_line_content": "#if 0",
          "new_line_content": "            skip_bits(&s->gb, 32); /* quant off */",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz((s->width+15)/16)",
          "old_line_content": "    s->quant_index[2] = 1;",
          "new_line_content": "    s->qscale_table = av_mallocz((s->width+15)/16);",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: error, decode_app parser read over the end\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: error, decode_app parser read over the end\\n\");",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": null,
          "new_api": "get_buffer",
          "old_text": null,
          "new_text": "avctx->get_buffer(avctx, &s->picture)",
          "old_line_content": "    avctx->pix_fmt = s->cs_itu601 ? PIX_FMT_YUV420P : PIX_FMT_YUVJ420;",
          "new_line_content": "    if (avctx->get_buffer(avctx, &s->picture) < 0)",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 8)",
          "old_line_content": "    /* slow but needed for extreme adobe jpegs */",
          "new_line_content": "        skip_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "UPDATE_CACHE",
          "old_text": null,
          "new_text": "UPDATE_CACHE(re, &s->gb)",
          "old_line_content": "        } else {",
          "new_line_content": "            UPDATE_CACHE(re, &s->gb)",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "GET_CACHE",
          "old_text": null,
          "new_text": "GET_CACHE(re,&s->gb)",
          "old_line_content": "            code &= 0xf;",
          "new_line_content": "            if ((int32_t)GET_CACHE(re,&s->gb)<0) { //MSB=1",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "GET_CACHE",
          "old_text": null,
          "new_text": "GET_CACHE(re,&s->gb)",
          "old_line_content": "",
          "new_line_content": "                level =   NEG_USR32( GET_CACHE(re,&s->gb),code);",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "}",
          "new_line_content": "    int len = get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "GET_CACHE",
          "old_text": null,
          "new_text": "GET_CACHE(re,&s->gb)",
          "old_line_content": "",
          "new_line_content": "                level = - NEG_USR32(~GET_CACHE(re,&s->gb),code);",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "",
          "new_line_content": "    if (len >= 2 && 8*len - 16 + get_bits_count(&s->gb) <= s->gb.size_in_bits) {",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(len - 1)",
          "old_line_content": "static int mjpeg_decode_com(MJpegDecodeContext *s)",
          "new_line_content": "        uint8_t *cbuf = av_malloc(len - 1);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, &s->gb, code)",
          "old_line_content": "            } else {",
          "new_line_content": "            LAST_SKIP_BITS(re, &s->gb, code)",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"error count: %d\\n\", i)",
          "old_line_content": "",
          "new_line_content": "                dprintf(\"error count: %d\\n\", i);",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(\n        s->quant_matrixes[0][s->scantable.permutated[1]],\n        s->quant_matrixes[0][s->scantable.permutated[8]])",
          "old_line_content": "    {",
          "new_line_content": "    s->qscale[0] = FFMAX(",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg comment: '%s'\\n\", cbuf)",
          "old_line_content": "            else",
          "new_line_content": "                av_log(s->avctx, AV_LOG_INFO, \"mjpeg comment: '%s'\\n\", cbuf);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(cbuf, \"AVID\")",
          "old_line_content": "            if(s->avctx->debug & FF_DEBUG_PICT_INFO)",
          "new_line_content": "            if (!strcmp(cbuf, \"AVID\"))",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(\n        s->quant_matrixes[1][s->scantable.permutated[1]],\n        s->quant_matrixes[1][s->scantable.permutated[8]])",
          "old_line_content": "    {",
          "new_line_content": "    s->qscale[1] = FFMAX(",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "CLOSE_READER",
          "old_text": null,
          "new_text": "CLOSE_READER(re, &s->gb)",
          "old_line_content": "            if (i >= 64)",
          "new_line_content": "    CLOSE_READER(re, &s->gb)",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(cbuf, \"CS=ITU601\")",
          "old_line_content": "                s->buggy_avid = 1;",
          "new_line_content": "            else if(!strcmp(cbuf, \"CS=ITU601\")){",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, buf+14, (buf_size-14)*8)",
          "old_line_content": "",
          "new_line_content": "    init_get_bits(&s->gb, buf+14, (buf_size-14)*8);",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": null,
          "new_api": "mjpeg_decode_scan",
          "old_text": null,
          "new_text": "mjpeg_decode_scan(s)",
          "old_line_content": "    s->mb_height = (s->height * s->v_max * 8 -1) / (s->v_max * 8);",
          "new_line_content": "    return mjpeg_decode_scan(s);",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "PREDICT",
          "old_text": null,
          "new_text": "PREDICT(pred, topleft[i], top[i], left[i], modified_predictor)",
          "old_line_content": "",
          "new_line_content": "                PREDICT(pred, topleft[i], top[i], left[i], modified_predictor);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "mjpeg_decode_dc",
          "old_text": null,
          "new_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "old_line_content": "",
          "new_line_content": "                buffer[mb_x][i]= mask & (pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform));",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "            }",
          "new_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(s->buffer)",
          "old_line_content": "{",
          "new_line_content": "    av_free(s->buffer);",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(s->qscale_table)",
          "old_line_content": "    MJpegDecodeContext *s = avctx->priv_data;",
          "new_line_content": "    av_free(s->qscale_table);",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"find_marker skipped %d bytes\\n\", skipped)",
          "old_line_content": "    }",
          "new_line_content": "    dprintf(\"find_marker skipped %d bytes\\n\", skipped);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "find_marker",
          "old_text": null,
          "new_text": "find_marker(&buf_ptr, buf_end)",
          "old_line_content": "    buf_ptr = buf;",
          "new_line_content": "        start_code = find_marker(&buf_ptr, buf_end);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"marker=%x avail_size_in_buf=%d\\n\", start_code, buf_end - buf_ptr)",
          "old_line_content": "            /* EOF */",
          "new_line_content": "                dprintf(\"marker=%x avail_size_in_buf=%d\\n\", start_code, buf_end - buf_ptr);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(s->buffer_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "old_line_content": "                if ((buf_end - buf_ptr) > s->buffer_size)",
          "new_line_content": "                    s->buffer = av_malloc(s->buffer_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"buffer too small, expanding to %d bytes\\n\",\n                        s->buffer_size)",
          "old_line_content": "                {",
          "new_line_content": "                    dprintf(\"buffer too small, expanding to %d bytes\\n\",",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "PREDICT",
          "old_text": null,
          "new_text": "PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor)",
          "old_line_content": "                        }else{",
          "new_line_content": "                                PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "mjpeg_decode_dc",
          "old_text": null,
          "new_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "old_line_content": "                        }",
          "new_line_content": "                        *ptr= pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, s->buffer, (dst - s->buffer)*8)",
          "old_line_content": "                            else if (x)",
          "new_line_content": "                    init_get_bits(&s->gb, s->buffer, (dst - s->buffer)*8);",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"escaping removed %d bytes\\n\",\n                        (buf_end - buf_ptr) - (dst - s->buffer))",
          "old_line_content": "                        }",
          "new_line_content": "                    dprintf(\"escaping removed %d bytes\\n\",",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "PREDICT",
          "old_text": null,
          "new_text": "PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor)",
          "old_line_content": "                    for(j=0; j<n; j++) {",
          "new_line_content": "                        PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "mjpeg_decode_dc",
          "old_text": null,
          "new_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "old_line_content": "                        int pred;",
          "new_line_content": "                        *ptr= pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "align_get_bits",
          "old_text": null,
          "new_text": "align_get_bits(&s->gb)",
          "old_line_content": "                    }",
          "new_line_content": "                align_get_bits(&s->gb);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "                }",
          "new_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&pb, dst, t)",
          "old_line_content": "                        }",
          "new_line_content": "                    init_put_bits(&pb, dst, t);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&pb, 8, x)",
          "old_line_content": "",
          "new_line_content": "                        put_bits(&pb, 8, x);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&pb, 7, x)",
          "old_line_content": "                        uint8_t x = src[b++];",
          "new_line_content": "                            put_bits(&pb, 7, x);",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, dst, bit_count)",
          "old_line_content": "                        }",
          "new_line_content": "                    init_get_bits(&s->gb, dst, bit_count);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, buf_ptr, (buf_end - buf_ptr)*8)",
          "old_line_content": "",
          "new_line_content": "                    init_get_bits(&s->gb, buf_ptr, (buf_end - buf_ptr)*8);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(s->block, 0, sizeof(s->block))",
          "old_line_content": "                v = s->v_scount[i];",
          "new_line_content": "                    memset(s->block, 0, sizeof(s->block));",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "decode_block",
          "old_text": null,
          "new_text": "decode_block(s, s->block, i,\n                                     s->dc_index[i], s->ac_index[i],\n                                     s->quant_matrixes[ s->quant_index[c] ])",
          "old_line_content": "                x = 0;",
          "new_line_content": "                    if (decode_block(s, s->block, i,",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"restart marker: %d\\n\", start_code&0x0f)",
          "old_line_content": "                }",
          "new_line_content": "                    dprintf(\"restart marker: %d\\n\", start_code&0x0f);",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "mjpeg_decode_app",
          "old_text": null,
          "new_text": "mjpeg_decode_app(s)",
          "old_line_content": "                if (start_code >= 0xd0 && start_code <= 0xd7) {",
          "new_line_content": "                    mjpeg_decode_app(s);",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": null,
          "new_api": "mjpeg_decode_com",
          "old_text": null,
          "new_text": "mjpeg_decode_com(s)",
          "old_line_content": "                } else if (start_code >= APP0 && start_code <= APP15) {",
          "new_line_content": "                    mjpeg_decode_com(s);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "idct_put",
          "old_text": null,
          "new_text": "s->idct_put(ptr, s->linesize[c], s->block)",
          "old_line_content": "                        (h * mb_x + x) * 8) >> s->avctx->lowres);",
          "new_line_content": "                    s->idct_put(ptr, s->linesize[c], s->block);",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": null,
          "new_api": "mjpeg_decode_dqt",
          "old_text": null,
          "new_text": "mjpeg_decode_dqt(s)",
          "old_line_content": "                    s->restart_count = 0;",
          "new_line_content": "                    mjpeg_decode_dqt(s);",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": null,
          "new_api": "mjpeg_decode_dht",
          "old_text": null,
          "new_text": "mjpeg_decode_dht(s)",
          "old_line_content": "                case DQT:",
          "new_line_content": "                    if(mjpeg_decode_dht(s) < 0){",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "align_get_bits",
          "old_text": null,
          "new_text": "align_get_bits(&s->gb)",
          "old_line_content": "            }",
          "new_line_content": "                align_get_bits(&s->gb);",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "            /* (< 1350) buggy workaround for Spectralfan.mov, should be fixed */",
          "new_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": null,
          "new_api": "mjpeg_decode_sof",
          "old_text": null,
          "new_text": "mjpeg_decode_sof(s)",
          "old_line_content": "                    }",
          "new_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": null,
          "new_api": "mjpeg_decode_sof",
          "old_text": null,
          "new_text": "mjpeg_decode_sof(s)",
          "old_line_content": "                        return -1;",
          "new_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "mjpeg_decode_sof",
          "old_text": null,
          "new_text": "mjpeg_decode_sof(s)",
          "old_line_content": "                    break;",
          "new_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "    const int block_size= s->lossless ? 1 : 8;",
          "new_line_content": "    len = get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "    int ilv;",
          "new_line_content": "    nb_components = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"decode_sos: components(%d) mismatch\\n\", nb_components)",
          "old_line_content": "    }",
          "new_line_content": "        dprintf(\"decode_sos: components(%d) mismatch\\n\", nb_components);",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "    }",
          "new_line_content": "        id = get_bits(&s->gb, 8) - 1;",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"component: %d\\n\", id)",
          "old_line_content": "    vmax = 0;",
          "new_line_content": "        dprintf(\"component: %d\\n\", id);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1538,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        id = get_bits(&s->gb, 8) - 1;",
          "new_line_content": "            if (id == s->component_id[index])",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"component: %d\\n\", id)",
          "new_text": null,
          "old_line_content": "        dprintf(\"component: %d\\n\", id);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(s->qscale[0], s->qscale[1])",
          "new_text": null,
          "old_line_content": "                            picture->quality= FFMAX(FFMAX(s->qscale[0], s->qscale[1]), s->qscale[2]);",
          "new_line_content": "                            if(avctx->debug & FF_DEBUG_QP)",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(picture->qscale_table, picture->quality, (s->width+15)/16)",
          "new_text": null,
          "old_line_content": "                            memset(picture->qscale_table, picture->quality, (s->width+15)/16);",
          "new_line_content": "                        }",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality)",
          "new_text": null,
          "old_line_content": "                                av_log(s->avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality);",
          "new_line_content": "                        goto the_end;",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"decode_sos: index(%d) out of components\\n\", index)",
          "new_text": null,
          "old_line_content": "            dprintf(\"decode_sos: index(%d) out of components\\n\", index);",
          "new_line_content": "        s->comp_index[i] = index;",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": "mjpeg_decode_sos",
          "new_api": null,
          "old_text": "mjpeg_decode_sos(s)",
          "new_text": null,
          "old_line_content": "                    mjpeg_decode_sos(s);",
          "new_line_content": "                        goto eoi_parser;",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "        s->dc_index[i] = get_bits(&s->gb, 4);",
          "new_line_content": "            s->dc_index[i] >= 4 || s->ac_index[i] >= 4)",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "        s->ac_index[i] = get_bits(&s->gb, 4);",
          "new_line_content": "            goto out_of_range;",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": "mjpeg_decode_dri",
          "new_api": null,
          "old_text": "mjpeg_decode_dri(s)",
          "new_text": null,
          "old_line_content": "                    mjpeg_decode_dri(s);",
          "new_line_content": "                case SOF5:",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: unsupported coding type (%x)\\n\", start_code)",
          "new_text": null,
          "old_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: unsupported coding type (%x)\\n\", start_code);",
          "new_line_content": "//                    break;",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "    predictor= get_bits(&s->gb, 8); /* JPEG Ss / lossless JPEG predictor /JPEG-LS NEAR */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(&s->gb)",
          "new_text": null,
          "old_line_content": "                buf_ptr += (get_bits_count(&s->gb)+7)/8;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"marker parser used %d bytes (%d bits)\\n\",\n                    (get_bits_count(&s->gb)+7)/8, get_bits_count(&s->gb))",
          "new_text": null,
          "old_line_content": "                dprintf(\"marker parser used %d bytes (%d bits)\\n\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(&s->gb)",
          "new_text": null,
          "old_line_content": "                    (get_bits_count(&s->gb)+7)/8, get_bits_count(&s->gb));",
          "new_line_content": "the_end:",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "    ilv= get_bits(&s->gb, 8);    /* JPEG Se / JPEG-LS ILV */",
          "new_line_content": "    for(i=0;i<nb_components;i++)",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "    skip_bits(&s->gb, 4); /* Ah */",
          "new_line_content": "        s->last_dc[i] = 1024;",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "    point_transform= get_bits(&s->gb, 4); /* Al */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"mjpeg decode frame unused %d bytes\\n\", buf_end - buf_ptr)",
          "new_text": null,
          "old_line_content": "    dprintf(\"mjpeg decode frame unused %d bytes\\n\", buf_end - buf_ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_DEBUG, \"%s %s p:%d >>:%d ilv:%d bits:%d %s\\n\", s->lossless ? \"lossless\" : \"sequencial DCT\", s->rgb ? \"RGB\" : \"\",\n               predictor, point_transform, ilv, s->bits,\n               s->pegasus_rct ? \"PRCT\" : (s->rct ? \"RCT\" : \"\"))",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"%s %s p:%d >>:%d ilv:%d bits:%d %s\\n\", s->lossless ? \"lossless\" : \"sequencial DCT\", s->rgb ? \"RGB\" : \"\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8);",
          "new_line_content": "//            for(){",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "ff_get_fourcc",
          "new_api": null,
          "old_text": "ff_get_fourcc(\"mjpg\")",
          "new_text": null,
          "old_line_content": "    if (get_bits_long(&hgb, 32) != be2me_32(ff_get_fourcc(\"mjpg\")))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "ls_decode_picture",
          "new_api": null,
          "old_text": "ls_decode_picture(s, predictor, point_transform, ilv)",
          "new_text": null,
          "old_line_content": "            ls_decode_picture(s, predictor, point_transform, ilv);",
          "new_line_content": "                    return -1;",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "ljpeg_decode_rgb_scan",
          "new_api": null,
          "old_text": "ljpeg_decode_rgb_scan(s, predictor, point_transform)",
          "new_text": null,
          "old_line_content": "                if(ljpeg_decode_rgb_scan(s, predictor, point_transform) < 0)",
          "new_line_content": "                    return -1;",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "ljpeg_decode_yuv_scan",
          "new_api": null,
          "old_text": "ljpeg_decode_yuv_scan(s, predictor, point_transform)",
          "new_text": null,
          "old_line_content": "                if(ljpeg_decode_yuv_scan(s, predictor, point_transform) < 0)",
          "new_line_content": "    }else{",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"field size: 0x%x\\n\", field_size)",
          "new_text": null,
          "old_line_content": "    dprintf(\"field size: 0x%x\\n\", field_size);",
          "new_line_content": "    if (second_field_offs)",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&hgb, 32)",
          "new_text": null,
          "old_line_content": "    skip_bits(&hgb, 32); /* padded field size */",
          "new_line_content": "        s->interlaced = 1;",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "get_bits_long",
          "new_api": null,
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": null,
          "old_line_content": "    second_field_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "mjpeg_decode_scan",
          "new_api": null,
          "old_text": "mjpeg_decode_scan(s)",
          "new_text": null,
          "old_line_content": "        if(mjpeg_decode_scan(s) < 0)",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "emms_c",
          "new_api": null,
          "old_text": "emms_c()",
          "new_text": null,
          "old_line_content": "    emms_c();",
          "new_line_content": "    return -1;",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"dqt offs: 0x%x\\n\", dqt_offs)",
          "new_text": null,
          "old_line_content": "    dprintf(\"dqt offs: 0x%x\\n\", dqt_offs);",
          "new_line_content": "        s->start_code = DQT;",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"decode_sos: ac/dc index out of range\\n\")",
          "new_text": null,
          "old_line_content": "    dprintf(\"decode_sos: ac/dc index out of range\\n\");",
          "new_line_content": "static int mjpeg_decode_dri(MJpegDecodeContext *s)",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, buf+dqt_offs, (buf_end - (buf+dqt_offs))*8)",
          "new_text": null,
          "old_line_content": "        init_get_bits(&s->gb, buf+dqt_offs, (buf_end - (buf+dqt_offs))*8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"dht offs: 0x%x\\n\", dht_offs)",
          "new_text": null,
          "old_line_content": "    dprintf(\"dht offs: 0x%x\\n\", dht_offs);",
          "new_line_content": "        s->start_code = DHT;",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "    s->restart_interval = get_bits(&s->gb, 16);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, buf+dht_offs, (buf_end - (buf+dht_offs))*8)",
          "new_text": null,
          "old_line_content": "        init_get_bits(&s->gb, buf+dht_offs, (buf_end - (buf+dht_offs))*8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"restart interval: %d\\n\", s->restart_interval)",
          "new_text": null,
          "old_line_content": "    dprintf(\"restart interval: %d\\n\", s->restart_interval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"sof offs: 0x%x\\n\", sof_offs)",
          "new_text": null,
          "old_line_content": "    dprintf(\"sof offs: 0x%x\\n\", sof_offs);",
          "new_line_content": "        s->start_code = SOF0;",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, buf+sof_offs, (buf_end - (buf+sof_offs))*8)",
          "new_text": null,
          "old_line_content": "        init_get_bits(&s->gb, buf+sof_offs, (buf_end - (buf+sof_offs))*8);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "    len = get_bits(&s->gb, 16);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "get_bits_long",
          "new_api": null,
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": null,
          "old_line_content": "    sos_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "    if (sos_offs)",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"sos offs: 0x%x\\n\", sos_offs)",
          "new_text": null,
          "old_line_content": "    dprintf(\"sos offs: 0x%x\\n\", sos_offs);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": "get_bits_long",
          "new_api": null,
          "old_text": "get_bits_long(&hgb, 32)",
          "new_text": null,
          "old_line_content": "    sod_offs = get_bits_long(&hgb, 32);",
          "new_line_content": "//        init_get_bits(&s->gb, buf+sos_offs, (buf_end - (buf+sos_offs))*8);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "    id = (get_bits(&s->gb, 16) << 16) | get_bits(&s->gb, 16);",
          "new_line_content": "    if(s->avctx->debug & FF_DEBUG_STARTCODE){",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_DEBUG, \"APPx %8X\\n\", id)",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_DEBUG, \"APPx %8X\\n\", id);",
          "new_line_content": "    /* also this fourcc is used by non-avid files too, it holds some",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, buf+sos_offs, field_size*8)",
          "new_text": null,
          "old_line_content": "        init_get_bits(&s->gb, buf+sos_offs, field_size*8);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "show_bits",
          "new_api": null,
          "old_text": "show_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        s->mjpb_skiptosod = (sod_offs - sos_offs - show_bits(&s->gb, 16));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "mjpeg_decode_sos",
          "new_api": null,
          "old_text": "mjpeg_decode_sos(s)",
          "new_text": null,
          "old_line_content": "        mjpeg_decode_sos(s);",
          "new_line_content": "        s->bottom_field ^= 1;",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "ff_get_fourcc",
          "new_api": null,
          "old_text": "ff_get_fourcc(\"AVI1\")",
          "new_text": null,
          "old_line_content": "    if (id == ff_get_fourcc(\"AVI1\"))",
          "new_line_content": "            1bytes      polarity",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 32);",
          "new_line_content": "//        if (s->interlace_polarity)",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 32);",
          "new_line_content": "//            printf(\"mjpeg: interlace polarity: %d\\n\", s->interlace_polarity);",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(s->qscale[0], s->qscale[1])",
          "new_text": null,
          "old_line_content": "        picture->quality= FFMAX(FFMAX(s->qscale[0], s->qscale[1]), s->qscale[2]);",
          "new_line_content": "        if(avctx->debug & FF_DEBUG_QP)",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(picture->qscale_table, picture->quality, (s->width+15)/16)",
          "new_text": null,
          "old_line_content": "        memset(picture->qscale_table, picture->quality, (s->width+15)/16);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_DEBUG, \"QP: %d\\n\", picture->quality);",
          "new_line_content": "    return buf_ptr - buf;",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8); /* the trailing zero-byte */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        s->avctx->sample_aspect_ratio.den= get_bits(&s->gb, 16);",
          "new_line_content": "                v1, v2,",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: JFIF header found (version: %x.%x) SAR=%d/%d\\n\",\n                v1, v2,\n                s->avctx->sample_aspect_ratio.num,\n                s->avctx->sample_aspect_ratio.den\n            )",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_INFO, \"mjpeg: JFIF header found (version: %x.%x) SAR=%d/%d\\n\",",
          "new_line_content": "            );",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        t_w = get_bits(&s->gb, 8);",
          "new_line_content": "            /* skip thumbnail */",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        t_h = get_bits(&s->gb, 8);",
          "new_line_content": "            if (len-10-(t_w*t_h*3) > 0)",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(buf_size + 1024)",
          "new_text": null,
          "old_line_content": "    recoded = av_mallocz(buf_size + 1024);",
          "new_line_content": "    /* SOI */",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(recoded+j, &sp5x_data_dqt[0], sizeof(sp5x_data_dqt))",
          "new_text": null,
          "old_line_content": "    memcpy(recoded+j, &sp5x_data_dqt[0], sizeof(sp5x_data_dqt));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* version */",
          "new_line_content": "        len -= 7;",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(recoded+j+70, &sp5x_quant_table[(qscale * 2) + 1], 64)",
          "new_text": null,
          "old_line_content": "    memcpy(recoded+j+70, &sp5x_quant_table[(qscale * 2) + 1], 64);",
          "new_line_content": "    j += sizeof(sp5x_data_dht);",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* flags0 */",
          "new_line_content": "        goto out;",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* flags1 */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(recoded+j, &sp5x_data_dht[0], sizeof(sp5x_data_dht))",
          "new_text": null,
          "old_line_content": "    memcpy(recoded+j, &sp5x_data_dht[0], sizeof(sp5x_data_dht));",
          "new_line_content": "    recoded[j+5] = (avctx->coded_height >> 8) & 0xFF;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8);  /* transform */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(recoded+j, &sp5x_data_sof[0], sizeof(sp5x_data_sof))",
          "new_text": null,
          "old_line_content": "    memcpy(recoded+j, &sp5x_data_sof[0], sizeof(sp5x_data_sof));",
          "new_line_content": "    recoded[j+8] = avctx->coded_width & 0xFF;",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "new_line_content": "        case 1:",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "new_line_content": "            s->rgb= 1;",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(recoded+j, &sp5x_data_sos[0], sizeof(sp5x_data_sos))",
          "new_text": null,
          "old_line_content": "    memcpy(recoded+j, &sp5x_data_sos[0], sizeof(sp5x_data_sos));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 16); /* unknwon always 0? */",
          "new_line_content": "            s->pegasus_rct=0;",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        switch( get_bits(&s->gb, 8)){",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"unknown colorspace\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"unknown colorspace\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "mjpeg_decode_frame",
          "new_api": null,
          "old_text": "mjpeg_decode_frame(avctx, data, data_size, recoded, j)",
          "new_text": null,
          "old_line_content": "    i = mjpeg_decode_frame(avctx, data, data_size, recoded, j);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(recoded)",
          "new_text": null,
          "old_line_content": "    av_free(recoded);",
          "new_line_content": "    s->bits = 8;",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        id = (get_bits(&s->gb, 16) << 16) | get_bits(&s->gb, 16);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "be2me_32",
          "new_api": null,
          "old_text": "be2me_32(id)",
          "new_text": null,
          "old_line_content": "        id = be2me_32(id);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": null,
          "old_line_content": "            skip_bits(&s->gb, 32); /* huff off */",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": null,
          "old_line_content": "            skip_bits(&s->gb, 32); /* image off */",
          "new_line_content": "            if (s->avctx->debug & FF_DEBUG_PICT_INFO)",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 32)",
          "new_text": null,
          "old_line_content": "            skip_bits(&s->gb, 32); /* data off */",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Apple MJPEG-A header found\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s->avctx, AV_LOG_INFO, \"mjpeg: Apple MJPEG-A header found\\n\");",
          "new_line_content": "out:",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"error ac\\n\")",
          "new_text": null,
          "old_line_content": "            dprintf(\"error ac\\n\");",
          "new_line_content": "        if (code == 0)",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz((s->width+15)/16)",
          "new_text": null,
          "old_line_content": "    s->qscale_table = av_mallocz((s->width+15)/16);",
          "new_line_content": "    s->picture.reference = 0;",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: error, decode_app parser read over the end\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s->avctx, AV_LOG_ERROR, \"mjpeg: error, decode_app parser read over the end\\n\");",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "get_buffer",
          "new_api": null,
          "old_text": "avctx->get_buffer(avctx, &s->picture)",
          "new_text": null,
          "old_line_content": "    if (avctx->get_buffer(avctx, &s->picture) < 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        skip_bits(&s->gb, 8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "new_line_content": "    s->picture.pict_type = I_TYPE;",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "UPDATE_CACHE",
          "new_api": null,
          "old_text": "UPDATE_CACHE(re, &s->gb)",
          "new_text": null,
          "old_line_content": "            UPDATE_CACHE(re, &s->gb)",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "GET_CACHE",
          "new_api": null,
          "old_text": "GET_CACHE(re,&s->gb)",
          "new_text": null,
          "old_line_content": "            if ((int32_t)GET_CACHE(re,&s->gb)<0) { //MSB=1",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "GET_CACHE",
          "new_api": null,
          "old_text": "GET_CACHE(re,&s->gb)",
          "new_text": null,
          "old_line_content": "                level =   NEG_USR32( GET_CACHE(re,&s->gb),code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "    int len = get_bits(&s->gb, 16);",
          "new_line_content": "            int i;",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "GET_CACHE",
          "new_api": null,
          "old_text": "GET_CACHE(re,&s->gb)",
          "new_text": null,
          "old_line_content": "                level = - NEG_USR32(~GET_CACHE(re,&s->gb),code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(&s->gb)",
          "new_text": null,
          "old_line_content": "    if (len >= 2 && 8*len - 16 + get_bits_count(&s->gb) <= s->gb.size_in_bits) {",
          "new_line_content": "            for (i = 0; i < len - 2; i++)",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "SKIP_BITS",
          "new_api": null,
          "old_text": "SKIP_BITS(re, &s->gb, code)",
          "new_text": null,
          "old_line_content": "            SKIP_BITS(re, &s->gb, code)",
          "new_line_content": "                return -1;",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "                cbuf[i] = get_bits(&s->gb, 8);",
          "new_line_content": "                cbuf[i] = 0;",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"error count: %d\\n\", i)",
          "new_text": null,
          "old_line_content": "                dprintf(\"error count: %d\\n\", i);",
          "new_line_content": "            block[j] = level * quant_matrix[j];",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(\n        s->quant_matrixes[0][s->scantable.permutated[1]],\n        s->quant_matrixes[0][s->scantable.permutated[8]])",
          "new_text": null,
          "old_line_content": "    s->qscale[0] = FFMAX(",
          "new_line_content": "    for (i = 0; i < 64; i++)",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_INFO, \"mjpeg comment: '%s'\\n\", cbuf)",
          "new_text": null,
          "old_line_content": "                av_log(s->avctx, AV_LOG_INFO, \"mjpeg comment: '%s'\\n\", cbuf);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(cbuf, \"AVID\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(cbuf, \"AVID\"))",
          "new_line_content": "                //            printf(\"mjpeg: workarounding buggy AVID\\n\");",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(\n        s->quant_matrixes[1][s->scantable.permutated[1]],\n        s->quant_matrixes[1][s->scantable.permutated[8]])",
          "new_text": null,
          "old_line_content": "    s->qscale[1] = FFMAX(",
          "new_line_content": "    /* DHT */",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "CLOSE_READER",
          "new_api": null,
          "old_text": "CLOSE_READER(re, &s->gb)",
          "new_text": null,
          "old_line_content": "    CLOSE_READER(re, &s->gb)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(cbuf)",
          "new_text": null,
          "old_line_content": "            av_free(cbuf);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, buf+14, (buf_size-14)*8)",
          "new_text": null,
          "old_line_content": "    init_get_bits(&s->gb, buf+14, (buf_size-14)*8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": "mjpeg_decode_scan",
          "new_api": null,
          "old_text": "mjpeg_decode_scan(s)",
          "new_text": null,
          "old_line_content": "    return mjpeg_decode_scan(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "PREDICT",
          "new_api": null,
          "old_text": "PREDICT(pred, topleft[i], top[i], left[i], modified_predictor)",
          "new_text": null,
          "old_line_content": "                PREDICT(pred, topleft[i], top[i], left[i], modified_predictor);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "align_get_bits",
          "new_api": null,
          "old_text": "align_get_bits(&s->gb)",
          "new_text": null,
          "old_line_content": "                align_get_bits(&s->gb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "new_line_content": "        if(s->rct){",
          "content_same": false
        },
        {
          "line": 2376,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(s->buffer)",
          "new_text": null,
          "old_line_content": "    av_free(s->buffer);",
          "new_line_content": "        for(j=0;j<4;j++)",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "free_vlc",
          "new_api": null,
          "old_text": "free_vlc(&s->vlcs[i][j])",
          "new_text": null,
          "old_line_content": "            free_vlc(&s->vlcs[i][j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"find_marker skipped %d bytes\\n\", skipped)",
          "new_text": null,
          "old_line_content": "    dprintf(\"find_marker skipped %d bytes\\n\", skipped);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "find_marker",
          "new_api": null,
          "old_text": "find_marker(&buf_ptr, buf_end)",
          "new_text": null,
          "old_line_content": "        start_code = find_marker(&buf_ptr, buf_end);",
          "new_line_content": "                goto the_end;",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(s->buffer)",
          "new_text": null,
          "old_line_content": "                    av_free(s->buffer);",
          "new_line_content": "                        s->buffer_size);",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(s->buffer_size + FF_INPUT_BUFFER_PADDING_SIZE)",
          "new_text": null,
          "old_line_content": "                    s->buffer = av_malloc(s->buffer_size + FF_INPUT_BUFFER_PADDING_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"buffer too small, expanding to %d bytes\\n\",\n                        s->buffer_size)",
          "new_text": null,
          "old_line_content": "                    dprintf(\"buffer too small, expanding to %d bytes\\n\",",
          "new_line_content": "                /* unescape buffer of SOS, use special treatment for JPEG-LS */",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "PREDICT",
          "new_api": null,
          "old_text": "PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor)",
          "new_text": null,
          "old_line_content": "                                PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor);",
          "new_line_content": "                        if (s->interlaced && s->bottom_field)",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "mjpeg_decode_dc",
          "new_api": null,
          "old_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "new_text": null,
          "old_line_content": "                        *ptr= pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform);",
          "new_line_content": "                            y++;",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, s->buffer, (dst - s->buffer)*8)",
          "new_text": null,
          "old_line_content": "                    init_get_bits(&s->gb, s->buffer, (dst - s->buffer)*8);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"escaping removed %d bytes\\n\",\n                        (buf_end - buf_ptr) - (dst - s->buffer))",
          "new_text": null,
          "old_line_content": "                    dprintf(\"escaping removed %d bytes\\n\",",
          "new_line_content": "                    uint8_t *src = buf_ptr;",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "PREDICT",
          "new_api": null,
          "old_text": "PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor)",
          "new_text": null,
          "old_line_content": "                        PREDICT(pred, ptr[-linesize-1], ptr[-linesize], ptr[-1], predictor);",
          "new_line_content": "                            y++;",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "mjpeg_decode_dc",
          "new_api": null,
          "old_text": "mjpeg_decode_dc(s, s->dc_index[i])",
          "new_text": null,
          "old_line_content": "                        *ptr= pred + (mjpeg_decode_dc(s, s->dc_index[i]) << point_transform);",
          "new_line_content": "                        }",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "align_get_bits",
          "new_api": null,
          "old_text": "align_get_bits(&s->gb)",
          "new_text": null,
          "old_line_content": "                align_get_bits(&s->gb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&pb, dst, t)",
          "new_text": null,
          "old_line_content": "                    init_put_bits(&pb, dst, t);",
          "new_line_content": "                        uint8_t x = src[b++];",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&pb, 8, x)",
          "new_text": null,
          "old_line_content": "                        put_bits(&pb, 8, x);",
          "new_line_content": "                            bit_count--;",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&pb)",
          "new_text": null,
          "old_line_content": "                    flush_put_bits(&pb);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, dst, bit_count)",
          "new_text": null,
          "old_line_content": "                    init_get_bits(&s->gb, dst, bit_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_DEBUG, \"startcode: %X\\n\", start_code)",
          "new_text": null,
          "old_line_content": "                    av_log(s->avctx, AV_LOG_DEBUG, \"startcode: %X\\n\", start_code);",
          "new_line_content": "                if (start_code >= 0xd0 && start_code <= 0xd7) {",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"restart marker: %d\\n\", start_code&0x0f)",
          "new_text": null,
          "old_line_content": "                    dprintf(\"restart marker: %d\\n\", start_code&0x0f);",
          "new_line_content": "                    /* Comment */",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "decode_block",
          "new_api": null,
          "old_text": "decode_block(s, s->block, i,\n                                     s->dc_index[i], s->ac_index[i],\n                                     s->quant_matrixes[ s->quant_index[c] ])",
          "new_text": null,
          "old_line_content": "                    if (decode_block(s, s->block, i,",
          "new_line_content": "                        return -1;",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": "mjpeg_decode_app",
          "new_api": null,
          "old_text": "mjpeg_decode_app(s)",
          "new_text": null,
          "old_line_content": "                    mjpeg_decode_app(s);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"error y=%d x=%d\\n\", mb_y, mb_x)",
          "new_text": null,
          "old_line_content": "                        dprintf(\"error y=%d x=%d\\n\", mb_y, mb_x);",
          "new_line_content": "                    ptr = s->picture.data[c] +",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": "mjpeg_decode_com",
          "new_api": null,
          "old_text": "mjpeg_decode_com(s)",
          "new_text": null,
          "old_line_content": "                    mjpeg_decode_com(s);",
          "new_line_content": "                case SOI:",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "idct_put",
          "new_api": null,
          "old_text": "s->idct_put(ptr, s->linesize[c], s->block)",
          "new_text": null,
          "old_line_content": "                    s->idct_put(ptr, s->linesize[c], s->block);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "mjpeg_decode_dht",
          "new_api": null,
          "old_text": "mjpeg_decode_dht(s)",
          "new_text": null,
          "old_line_content": "                    if(mjpeg_decode_dht(s) < 0){",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"huffman table decode error\\n\")",
          "new_text": null,
          "old_line_content": "                        av_log(s->avctx, AV_LOG_ERROR, \"huffman table decode error\\n\");",
          "new_line_content": "                case SOF0:",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "align_get_bits",
          "new_api": null,
          "old_text": "align_get_bits(&s->gb)",
          "new_text": null,
          "old_line_content": "                align_get_bits(&s->gb);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "                skip_bits(&s->gb, 16); /* skip RSTn */",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "mjpeg_decode_sof",
          "new_api": null,
          "old_text": "mjpeg_decode_sof(s)",
          "new_text": null,
          "old_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "new_line_content": "                    s->lossless=1;",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": "mjpeg_decode_sof",
          "new_api": null,
          "old_text": "mjpeg_decode_sof(s)",
          "new_text": null,
          "old_line_content": "                    if (mjpeg_decode_sof(s) < 0)",
          "new_line_content": "                    s->lossless=1;",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "decode_lse",
          "new_api": null,
          "old_text": "decode_lse(s)",
          "new_text": null,
          "old_line_content": "                    if (decode_lse(s) < 0)",
          "new_line_content": "                    if ((s->buggy_avid && !s->interlaced) || s->restart_interval)",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "    nb_components = get_bits(&s->gb, 8);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"decode_sos: invalid len (%d)\\n\", len)",
          "new_text": null,
          "old_line_content": "        dprintf(\"decode_sos: invalid len (%d)\\n\", len);",
          "new_line_content": "    if ((nb_components != s->nb_components) && !s->ls)",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"decode_sos: components(%d) mismatch\\n\", nb_components)",
          "new_text": null,
          "old_line_content": "        dprintf(\"decode_sos: components(%d) mismatch\\n\", nb_components);",
          "new_line_content": "    hmax = 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 36,
      "total_additions": 145,
      "total_deletions": 146,
      "total_api_changes": 327
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 327,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          1281,
          1271,
          1273,
          1274,
          1277
        ]
      }
    },
    "api_calls_before": 400,
    "api_calls_after": 399,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 6,
      "total_diff_lines": 33
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/0fbda03e5cfce9d37a263abd08947e5a64ed8ee9",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/0fbda03e5cfce9d37a263abd08947e5a64ed8ee9/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/0fbda03e5cfce9d37a263abd08947e5a64ed8ee9/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/0fbda03e5cfce9d37a263abd08947e5a64ed8ee9/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 2967,
          "old_api": "ff_mov_add_hinted_packet",
          "new_api": "av_free",
          "old_text": "ff_mov_add_hinted_packet(s, pkt, trk->hint_track, trk->entry,\n                                 reformatted_data, size)",
          "new_text": "av_free(reformatted_data)",
          "old_line_content": "        ff_mov_add_hinted_packet(s, pkt, trk->hint_track, trk->entry,",
          "new_line_content": "    av_free(reformatted_data);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": "MKTAG",
          "new_api": "avcodec_alloc_context3",
          "old_text": "MKTAG('t','e','x','t')",
          "new_text": "avcodec_alloc_context3(NULL)",
          "old_line_content": "    track->tag = MKTAG('t','e','x','t');",
          "new_line_content": "    track->enc = avcodec_alloc_context3(NULL);",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": "avcodec_alloc_context3",
          "new_api": "AVERROR",
          "old_text": "avcodec_alloc_context3(NULL)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    track->enc = avcodec_alloc_context3(NULL);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "AVERROR",
          "new_api": "av_malloc",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_malloc(sizeof(chapter_properties))",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    track->enc->extradata = av_malloc(sizeof(chapter_properties));",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "av_malloc",
          "new_api": "AVERROR",
          "old_text": "av_malloc(sizeof(chapter_properties))",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    track->enc->extradata = av_malloc(sizeof(chapter_properties));",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "AVERROR",
          "new_api": "memcpy",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "memcpy(track->enc->extradata, chapter_properties, sizeof(chapter_properties))",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    memcpy(track->enc->extradata, chapter_properties, sizeof(chapter_properties));",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "strlen",
          "new_api": "av_malloc",
          "old_text": "strlen(t->value)",
          "new_text": "av_malloc(pkt.size)",
          "old_line_content": "            len      = strlen(t->value);",
          "new_line_content": "            pkt.data = av_malloc(pkt.size);",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": "av_malloc",
          "new_api": "AVERROR",
          "old_text": "av_malloc(pkt.size)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            pkt.data = av_malloc(pkt.size);",
          "new_line_content": "                return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3043,
          "old_api": "AVERROR",
          "new_api": "memcpy",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "memcpy(pkt.data + 2, t->value, len)",
          "old_line_content": "                return AVERROR(ENOMEM);",
          "new_line_content": "            memcpy(pkt.data + 2, t->value, len);",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": "AV_WB16",
          "new_api": "ff_mov_write_packet",
          "old_text": "AV_WB16(pkt.data, len)",
          "new_text": "ff_mov_write_packet(s, &pkt)",
          "old_line_content": "            AV_WB16(pkt.data, len);",
          "new_line_content": "            ff_mov_write_packet(s, &pkt);",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "memcpy",
          "new_api": "av_freep",
          "old_text": "memcpy(pkt.data + 2, t->value, len)",
          "new_text": "av_freep(&pkt.data)",
          "old_line_content": "            memcpy(pkt.data + 2, t->value, len);",
          "new_line_content": "            av_freep(&pkt.data);",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "MKTAG",
          "new_api": "av_freep",
          "old_text": "MKTAG('r','t','p',' ')",
          "new_text": "av_freep(&mov->tracks[i].cluster)",
          "old_line_content": "        if (mov->tracks[i].tag == MKTAG('r','t','p',' '))",
          "new_line_content": "        av_freep(&mov->tracks[i].cluster);",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "ff_mov_close_hinting",
          "new_api": "av_freep",
          "old_text": "ff_mov_close_hinting(&mov->tracks[i])",
          "new_text": "av_freep(&mov->tracks[i].frag_info)",
          "old_line_content": "            ff_mov_close_hinting(&mov->tracks[i]);",
          "new_line_content": "        av_freep(&mov->tracks[i].frag_info);",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": "strcmp",
          "new_api": "av_log",
          "old_text": "strcmp(s->oformat->name, \"ismv\")",
          "new_text": "av_log(s, AV_LOG_ERROR, \"muxer does not support non seekable output\\n\")",
          "old_line_content": "          !(s->oformat && !strcmp(s->oformat->name, \"ismv\")))",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"muxer does not support non seekable output\\n\");",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "strcmp",
          "new_api": "mov_write_ftyp_tag",
          "old_text": "strcmp(\"ismv\",s->oformat->name)",
          "new_text": "mov_write_ftyp_tag(pb,s)",
          "old_line_content": "        else if (!strcmp(\"ismv\",s->oformat->name)) mov->mode = MODE_ISM;",
          "new_line_content": "        mov_write_ftyp_tag(pb,s);",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "av_mallocz",
          "new_api": "AVERROR",
          "old_text": "av_mallocz((mov->nb_streams + 1) * sizeof(*mov->tracks))",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    mov->tracks = av_mallocz((mov->nb_streams + 1) * sizeof(*mov->tracks));",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": "mov_find_codec_tag",
          "new_api": "av_log",
          "old_text": "mov_find_codec_tag(s, track)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"track %d: could not find tag, \"\n                   \"codec not currently supported in container\\n\", i)",
          "old_line_content": "        track->tag  = mov_find_codec_tag(s, track);",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"track %d: could not find tag, \"",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": "MKTAG",
          "new_api": "av_log",
          "old_text": "MKTAG('m','x','5','n')",
          "new_text": "av_log(s, AV_LOG_ERROR, \"D-10/IMX must use 720x608 or 720x512 video resolution\\n\")",
          "old_line_content": "                track->tag == MKTAG('m','x','5','p') || track->tag == MKTAG('m','x','5','n')) {",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"D-10/IMX must use 720x608 or 720x512 video resolution\\n\");",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": "avio_open_dyn_buf",
          "new_api": "mov_write_moov_tag",
          "old_text": "avio_open_dyn_buf(&moov_buf)",
          "new_text": "mov_write_moov_tag(moov_buf, mov, s)",
          "old_line_content": "    if ((ret = avio_open_dyn_buf(&moov_buf)) < 0)",
          "new_line_content": "    mov_write_moov_tag(moov_buf, mov, s);",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "mov_write_moov_tag",
          "new_api": "av_free",
          "old_text": "mov_write_moov_tag(moov_buf, mov, s)",
          "new_text": "av_free(buf)",
          "old_line_content": "    mov_write_moov_tag(moov_buf, mov, s);",
          "new_line_content": "    av_free(buf);",
          "content_same": false
        },
        {
          "line": 3397,
          "old_api": "av_malloc",
          "new_api": "AVERROR",
          "old_text": "av_malloc(moov_size * 2)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    buf = av_malloc(moov_size * 2);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3407,
          "old_api": "avio_open",
          "new_api": "av_log",
          "old_text": "avio_open(&read_pb, s->filename, AVIO_FLAG_READ)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Unable to re-open %s output file for \"\n               \"the second pass (faststart)\\n\", s->filename)",
          "old_line_content": "    ret = avio_open(&read_pb, s->filename, AVIO_FLAG_READ);",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"Unable to re-open %s output file for \"",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "avio_wb32",
          "new_api": "avio_wb64",
          "old_text": "avio_wb32(pb, 1)",
          "new_text": "avio_wb64(pb, mov->mdat_size + 16)",
          "old_line_content": "            avio_wb32(pb, 1);",
          "new_line_content": "            avio_wb64(pb, mov->mdat_size + 16);",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "avio_wb64",
          "new_api": "avio_seek",
          "old_text": "avio_wb64(pb, mov->mdat_size + 16)",
          "new_text": "avio_seek(pb, moov_pos, SEEK_SET)",
          "old_line_content": "            avio_wb64(pb, mov->mdat_size + 16);",
          "new_line_content": "        avio_seek(pb, moov_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "shift_data",
          "new_api": "avio_seek",
          "old_text": "shift_data(s)",
          "new_text": "avio_seek(s->pb, mov->reserved_moov_pos, SEEK_SET)",
          "old_line_content": "            res = shift_data(s);",
          "new_line_content": "                avio_seek(s->pb, mov->reserved_moov_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": "avio_tell",
          "new_api": "mov_write_dvc1_structs",
          "old_text": "avio_tell(pb)",
          "new_text": "mov_write_dvc1_structs(&mov->tracks[i], buf)",
          "old_line_content": "            int64_t off = avio_tell(pb);",
          "new_line_content": "            if (mov_write_dvc1_structs(&mov->tracks[i], buf) >= 0) {",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": "mov_write_dvc1_structs",
          "new_api": "avio_write",
          "old_text": "mov_write_dvc1_structs(&mov->tracks[i], buf)",
          "new_text": "avio_write(pb, buf, 7)",
          "old_line_content": "            if (mov_write_dvc1_structs(&mov->tracks[i], buf) >= 0) {",
          "new_line_content": "                avio_write(pb, buf, 7);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3590,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(tg2)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(tg2)",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"3GP2 (3GPP2 file format)\")",
          "old_line_content": "AVOutputFormat ff_tg2_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"3GP2 (3GPP2 file format)\"),",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(ipod)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(ipod)",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"iPod H.264 MP4 (MPEG-4 Part 14)\")",
          "old_line_content": "AVOutputFormat ff_ipod_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"iPod H.264 MP4 (MPEG-4 Part 14)\"),",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(mov->tracks[mov->chapter_track].enc->extradata)",
          "old_line_content": "    if (mov->chapter_track) {",
          "new_line_content": "            av_free(mov->tracks[mov->chapter_track].enc->extradata);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->tracks[mov->chapter_track].enc)",
          "old_line_content": "        if (mov->tracks[mov->chapter_track].enc)",
          "new_line_content": "        av_freep(&mov->tracks[mov->chapter_track].enc);",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(ismv)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(ismv)",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('r','t','p',' ')",
          "old_line_content": "",
          "new_line_content": "        if (mov->tracks[i].tag == MKTAG('r','t','p',' '))",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "ff_mov_close_hinting",
          "old_text": null,
          "new_text": "ff_mov_close_hinting(&mov->tracks[i])",
          "old_line_content": "    for (i = 0; i < mov->nb_streams; i++) {",
          "new_line_content": "            ff_mov_close_hinting(&mov->tracks[i]);",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"ISMV/ISMA (Smooth Streaming)\")",
          "old_line_content": "AVOutputFormat ff_ismv_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"ISMV/ISMA (Smooth Streaming)\"),",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(mov->tracks[i].vos_data)",
          "old_line_content": "",
          "new_line_content": "            av_free(mov->tracks[i].vos_data);",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&mov->tracks)",
          "old_line_content": "    }",
          "new_line_content": "    av_freep(&mov->tracks);",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(s->oformat->name, \"ismv\")",
          "old_line_content": "    if (!s->pb->seekable &&",
          "new_line_content": "          !(s->oformat && !strcmp(s->oformat->name, \"ismv\")))",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"3gp\", s->oformat->name)",
          "old_line_content": "",
          "new_line_content": "        if (!strcmp(\"3gp\", s->oformat->name)) mov->mode = MODE_3GP;",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"3g2\", s->oformat->name)",
          "old_line_content": "    if (s->oformat != NULL) {",
          "new_line_content": "        else if (!strcmp(\"3g2\", s->oformat->name)) mov->mode = MODE_3GP|MODE_3G2;",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"PSP mode need one video and one audio stream\\n\")",
          "old_line_content": "        if (mov->mode == MODE_PSP) {",
          "new_line_content": "                av_log(s, AV_LOG_ERROR, \"PSP mode need one video and one audio stream\\n\");",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "mov_write_uuidprof_tag",
          "old_text": null,
          "new_text": "mov_write_uuidprof_tag(pb, s)",
          "old_line_content": "                return -1;",
          "new_line_content": "            mov_write_uuidprof_tag(pb, s);",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz((mov->nb_streams + 1) * sizeof(*mov->tracks))",
          "old_line_content": "    // Reserve an extra stream for chapters for the case where chapters",
          "new_line_content": "    mov->tracks = av_mallocz((mov->nb_streams + 1) * sizeof(*mov->tracks));",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(st->metadata, \"language\", NULL,0)",
          "old_line_content": "        AVStream *st= s->streams[i];",
          "new_line_content": "        AVDictionaryEntry *lang = av_dict_get(st->metadata, \"language\", NULL,0);",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": null,
          "new_api": "ff_mov_iso639_to_lang",
          "old_text": null,
          "new_text": "ff_mov_iso639_to_lang(lang?lang->value:\"und\", mov->mode!=MODE_MOV)",
          "old_line_content": "",
          "new_line_content": "        track->language = ff_mov_iso639_to_lang(lang?lang->value:\"und\", mov->mode!=MODE_MOV);",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": null,
          "new_api": "mov_find_codec_tag",
          "old_text": null,
          "new_text": "mov_find_codec_tag(s, track)",
          "old_line_content": "            track->language = 0;",
          "new_line_content": "        track->tag  = mov_find_codec_tag(s, track);",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','x','3','n')",
          "old_line_content": "        track->start_dts  = AV_NOPTS_VALUE;",
          "new_line_content": "            if (track->tag == MKTAG('m','x','3','p') || track->tag == MKTAG('m','x','3','n') ||",
          "content_same": false
        },
        {
          "line": 3223,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m','x','4','n')",
          "old_line_content": "        if (st->codec->codec_type == AVMEDIA_TYPE_VIDEO) {",
          "new_line_content": "                track->tag == MKTAG('m','x','4','p') || track->tag == MKTAG('m','x','4','n') ||",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING,\n                       \"WARNING codec timebase is very high. If duration is too long,\\n\"\n                       \"file may not be playable by quicktime. Specify a shorter timebase\\n\"\n                       \"or choose different container.\\n\")",
          "old_line_content": "            track->timescale = st->codec->time_base.den;",
          "new_line_content": "                av_log(s, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": null,
          "new_api": "av_get_bits_per_sample",
          "old_text": null,
          "new_text": "av_get_bits_per_sample(st->codec->codec_id)",
          "old_line_content": "            track->timescale = st->codec->sample_rate;",
          "new_line_content": "            if (av_get_bits_per_sample(st->codec->codec_id) ||",
          "content_same": false
        },
        {
          "line": 3243,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"track %d: codec block align is not set\\n\", i)",
          "old_line_content": "                st->codec->codec_id == AV_CODEC_ID_ILBC) {",
          "new_line_content": "                    av_log(s, AV_LOG_ERROR, \"track %d: codec block align is not set\\n\", i);",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": null,
          "new_api": "av_get_bits_per_sample",
          "old_text": null,
          "new_text": "av_get_bits_per_sample(st->codec->codec_id)",
          "old_line_content": "            }",
          "new_line_content": "            if (av_get_bits_per_sample(st->codec->codec_id) < 8) {",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"track %d: muxing mp3 at %dhz is not supported\\n\",\n                       i, track->enc->sample_rate)",
          "old_line_content": "            if (track->mode != MODE_MOV &&",
          "new_line_content": "                av_log(s, AV_LOG_ERROR, \"track %d: muxing mp3 at %dhz is not supported\\n\",",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": null,
          "new_api": "avpriv_set_pts_info",
          "old_text": null,
          "new_text": "avpriv_set_pts_info(st, 64, 1, track->timescale)",
          "old_line_content": "            track->timescale = 10000000;",
          "new_line_content": "        avpriv_set_pts_info(st, 64, 1, track->timescale);",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(track->vos_len)",
          "old_line_content": "        if (st->codec->extradata_size) {",
          "new_line_content": "            track->vos_data = av_malloc(track->vos_len);",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(track->vos_data, st->codec->extradata, track->vos_len)",
          "old_line_content": "            track->vos_len  = st->codec->extradata_size;",
          "new_line_content": "            memcpy(track->vos_data, st->codec->extradata, track->vos_len);",
          "content_same": false
        },
        {
          "line": 3280,
          "old_api": null,
          "new_api": "enable_tracks",
          "old_text": null,
          "new_text": "enable_tracks(s)",
          "old_line_content": "    }",
          "new_line_content": "    enable_tracks(s);",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "    if (!(mov->flags & FF_MOV_FLAG_FRAGMENT)) {",
          "new_line_content": "            mov->reserved_moov_pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": null,
          "new_api": "mov_write_mdat_tag",
          "old_text": null,
          "new_text": "mov_write_mdat_tag(pb, mov)",
          "old_line_content": "        if (mov->flags & FF_MOV_FLAG_FASTSTART)",
          "new_line_content": "        mov_write_mdat_tag(pb, mov);",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(s->metadata, \"creation_time\", NULL, 0)",
          "old_line_content": "    }",
          "new_line_content": "    if (t = av_dict_get(s->metadata, \"creation_time\", NULL, 0))",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": null,
          "new_api": "ff_iso8601_to_unix_time",
          "old_text": null,
          "new_text": "ff_iso8601_to_unix_time(t->value)",
          "old_line_content": "",
          "new_line_content": "        mov->time = ff_iso8601_to_unix_time(t->value);",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": null,
          "new_api": "mov_create_chapter_track",
          "old_text": null,
          "new_text": "mov_create_chapter_track(s, mov->chapter_track)",
          "old_line_content": "",
          "new_line_content": "        if (mov_create_chapter_track(s, mov->chapter_track) < 0)",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "ff_mov_init_hinting",
          "old_text": null,
          "new_text": "ff_mov_init_hinting(s, hint_track, i)",
          "old_line_content": "            if (st->codec->codec_type == AVMEDIA_TYPE_VIDEO ||",
          "new_line_content": "                ff_mov_init_hinting(s, hint_track, i);",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": null,
          "new_api": "avio_flush",
          "old_text": null,
          "new_text": "avio_flush(pb)",
          "old_line_content": "    }",
          "new_line_content": "    avio_flush(pb);",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "mov_write_isml_manifest",
          "old_text": null,
          "new_text": "mov_write_isml_manifest(pb, mov)",
          "old_line_content": "",
          "new_line_content": "        mov_write_isml_manifest(pb, mov);",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": null,
          "new_api": "mov_write_moov_tag",
          "old_text": null,
          "new_text": "mov_write_moov_tag(pb, mov, s)",
          "old_line_content": "",
          "new_line_content": "        mov_write_moov_tag(pb, mov, s);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "mov_free",
          "old_text": null,
          "new_text": "mov_free(s)",
          "old_line_content": "    return 0;",
          "new_line_content": "    mov_free(s);",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": null,
          "new_api": "avio_open_dyn_buf",
          "old_text": null,
          "new_text": "avio_open_dyn_buf(&moov_buf)",
          "old_line_content": "    MOVMuxContext *mov = s->priv_data;",
          "new_line_content": "    if ((ret = avio_open_dyn_buf(&moov_buf)) < 0)",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": null,
          "new_api": "avio_close_dyn_buf",
          "old_text": null,
          "new_text": "avio_close_dyn_buf(moov_buf, &buf)",
          "old_line_content": "        return ret;",
          "new_line_content": "    ret = avio_close_dyn_buf(moov_buf, &buf);",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": null,
          "new_api": "get_moov_size",
          "old_text": null,
          "new_text": "get_moov_size(s)",
          "old_line_content": "    MOVMuxContext *mov = s->priv_data;",
          "new_line_content": "    moov_size = get_moov_size(s);",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": null,
          "new_api": "get_moov_size",
          "old_text": null,
          "new_text": "get_moov_size(s)",
          "old_line_content": "        mov->tracks[i].data_offset += moov_size;",
          "new_line_content": "    moov_size2 = get_moov_size(s);",
          "content_same": false
        },
        {
          "line": 3385,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "    int ret = 0, moov_size;",
          "new_line_content": "    int64_t pos, pos_end = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": null,
          "new_api": "compute_moov_size",
          "old_text": null,
          "new_text": "compute_moov_size(s)",
          "old_line_content": "    AVIOContext *read_pb;",
          "new_line_content": "    moov_size = compute_moov_size(s);",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(moov_size * 2)",
          "old_line_content": "        return moov_size;",
          "new_line_content": "    buf = av_malloc(moov_size * 2);",
          "content_same": false
        },
        {
          "line": 3404,
          "old_api": null,
          "new_api": "avio_flush",
          "old_text": null,
          "new_text": "avio_flush(s->pb)",
          "old_line_content": "     * writing, so we re-open the same output, but for reading. It also avoids",
          "new_line_content": "    avio_flush(s->pb);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "avio_open",
          "old_text": null,
          "new_text": "avio_open(&read_pb, s->filename, AVIO_FLAG_READ)",
          "old_line_content": "     * a read/seek/write/seek back and forth. */",
          "new_line_content": "    ret = avio_open(&read_pb, s->filename, AVIO_FLAG_READ);",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(s->pb)",
          "old_line_content": "    /* mark the end of the shift to up to the last data we wrote, and get ready",
          "new_line_content": "    pos_end = avio_tell(s->pb);",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(s->pb, mov->reserved_moov_pos + moov_size, SEEK_SET)",
          "old_line_content": "     * for writing */",
          "new_line_content": "    avio_seek(s->pb, mov->reserved_moov_pos + moov_size, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(read_pb, mov->reserved_moov_pos, SEEK_SET)",
          "old_line_content": "",
          "new_line_content": "    avio_seek(read_pb, mov->reserved_moov_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(read_pb)",
          "old_line_content": "    /* start reading at where the new moov will be placed */",
          "new_line_content": "    pos = avio_tell(read_pb);",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": null,
          "new_api": "avio_write",
          "old_text": null,
          "new_text": "avio_write(s->pb, read_buf[read_buf_id], n)",
          "old_line_content": "        if (n <= 0)",
          "new_line_content": "        avio_write(s->pb, read_buf[read_buf_id], n);",
          "content_same": false
        },
        {
          "line": 3437,
          "old_api": null,
          "new_api": "avio_close",
          "old_text": null,
          "new_text": "avio_close(read_pb)",
          "old_line_content": "        pos += n;",
          "new_line_content": "    avio_close(read_pb);",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(buf)",
          "old_line_content": "",
          "new_line_content": "    av_free(buf);",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "mov_create_chapter_track",
          "old_text": null,
          "new_text": "mov_create_chapter_track(s, mov->chapter_track)",
          "old_line_content": "        if (mov->mode & (MODE_MP4|MODE_MOV|MODE_IPOD) && s->nb_chapters) {",
          "new_line_content": "            if ((res = mov_create_chapter_track(s, mov->chapter_track)) < 0)",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "",
          "new_line_content": "        moov_pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, mov->mdat_pos, SEEK_SET)",
          "old_line_content": "        /* Write size of mdat tag */",
          "new_line_content": "            avio_seek(pb, mov->mdat_pos, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "avio_wb32",
          "old_text": null,
          "new_text": "avio_wb32(pb, mov->mdat_size + 8)",
          "old_line_content": "        if (mov->mdat_size + 8 <= UINT32_MAX) {",
          "new_line_content": "            avio_wb32(pb, mov->mdat_size + 8);",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, mov->mdat_pos - 8, SEEK_SET)",
          "old_line_content": "        } else {",
          "new_line_content": "            avio_seek(pb, mov->mdat_pos - 8, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": null,
          "new_api": "avio_wb32",
          "old_text": null,
          "new_text": "avio_wb32(pb, 1)",
          "old_line_content": "            /* special value: real atom size will be 64 bit value after",
          "new_line_content": "            avio_wb32(pb, 1);",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": null,
          "new_api": "ffio_wfourcc",
          "old_text": null,
          "new_text": "ffio_wfourcc(pb, \"mdat\")",
          "old_line_content": "             * tag field */",
          "new_line_content": "            ffio_wfourcc(pb, \"mdat\");",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": null,
          "new_api": "ff_mov_add_hinted_packet",
          "old_text": null,
          "new_text": "ff_mov_add_hinted_packet(s, pkt, trk->hint_track, trk->entry,\n                                 reformatted_data, size)",
          "old_line_content": "",
          "new_line_content": "        ff_mov_add_hinted_packet(s, pkt, trk->hint_track, trk->entry,",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_INFO, \"Starting second pass: moving the moov atom to the beginning of the file\\n\")",
          "old_line_content": "",
          "new_line_content": "            av_log(s, AV_LOG_INFO, \"Starting second pass: moving the moov atom to the beginning of the file\\n\");",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": null,
          "new_api": "shift_data",
          "old_text": null,
          "new_text": "shift_data(s)",
          "old_line_content": "        if (mov->flags & FF_MOV_FLAG_FASTSTART) {",
          "new_line_content": "            res = shift_data(s);",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": null,
          "new_api": "mov_flush_fragment",
          "old_text": null,
          "new_text": "mov_flush_fragment(s)",
          "old_line_content": "{",
          "new_line_content": "        mov_flush_fragment(s);",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": null,
          "new_api": "mov_write_moov_tag",
          "old_text": null,
          "new_text": "mov_write_moov_tag(pb, mov, s)",
          "old_line_content": "            if (res == 0) {",
          "new_line_content": "                mov_write_moov_tag(pb, mov, s);",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": null,
          "new_api": "mov_write_moov_tag",
          "old_text": null,
          "new_text": "mov_write_moov_tag(pb, mov, s)",
          "old_line_content": "            }",
          "new_line_content": "            mov_write_moov_tag(pb, mov, s);",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": null,
          "new_api": "mov_flush_fragment",
          "old_text": null,
          "new_text": "mov_flush_fragment(s)",
          "old_line_content": "        }",
          "new_line_content": "        mov_flush_fragment(s);",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": null,
          "new_api": "mov_write_mfra_tag",
          "old_text": null,
          "new_text": "mov_write_mfra_tag(pb, mov)",
          "old_line_content": "    } else {",
          "new_line_content": "        mov_write_mfra_tag(pb, mov);",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->dts - trk->cluster[0].dts,\n                                         s->streams[pkt->stream_index]->time_base,\n                                         AV_TIME_BASE_Q)",
          "old_line_content": "",
          "new_line_content": "            frag_duration = av_rescale_q(pkt->dts - trk->cluster[0].dts,",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": null,
          "new_api": "avio_tell",
          "old_text": null,
          "new_text": "avio_tell(pb)",
          "old_line_content": "        if (mov->flags & FF_MOV_FLAG_FRAGMENT &&",
          "new_line_content": "            int64_t off = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, mov->tracks[i].vc1_info.struct_offset, SEEK_SET)",
          "old_line_content": "            uint8_t buf[7];",
          "new_line_content": "                avio_seek(pb, mov->tracks[i].vc1_info.struct_offset, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": null,
          "new_api": "mov_flush_fragment",
          "old_text": null,
          "new_text": "mov_flush_fragment(s)",
          "old_line_content": "              trk->entry && pkt->flags & AV_PKT_FLAG_KEY)) {",
          "new_line_content": "                mov_flush_fragment(s);",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": null,
          "new_api": "mov_free",
          "old_text": null,
          "new_text": "mov_free(s)",
          "old_line_content": "",
          "new_line_content": "    mov_free(s);",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": null,
          "new_api": "ff_mov_write_packet",
          "old_text": null,
          "new_text": "ff_mov_write_packet(s, pkt)",
          "old_line_content": "        }",
          "new_line_content": "        return ff_mov_write_packet(s, pkt);",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(mov)",
          "old_line_content": "",
          "new_line_content": "MOV_CLASS(mov)",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\")",
          "old_line_content": "AVOutputFormat ff_mov_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\"),",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('t','e','x','t')",
          "old_line_content": "",
          "new_line_content": "    track->tag = MKTAG('t','e','x','t');",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(tgp)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(tgp)",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"3GP (3GPP file format)\")",
          "old_line_content": "AVOutputFormat ff_tgp_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"3GP (3GPP file format)\"),",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(c->end, c->time_base, (AVRational){1,MOV_TIMESCALE})",
          "old_line_content": "        AVDictionaryEntry *t;",
          "new_line_content": "        int64_t end = av_rescale_q(c->end, c->time_base, (AVRational){1,MOV_TIMESCALE});",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(c->start, c->time_base, (AVRational){1,MOV_TIMESCALE})",
          "old_line_content": "",
          "new_line_content": "        pkt.pts = pkt.dts = av_rescale_q(c->start, c->time_base, (AVRational){1,MOV_TIMESCALE});",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(c->metadata, \"title\", NULL, 0)",
          "old_line_content": "        pkt.duration = end - pkt.dts;",
          "new_line_content": "        if ((t = av_dict_get(c->metadata, \"title\", NULL, 0))) {",
          "content_same": false
        },
        {
          "line": 3037,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(t->value)",
          "old_line_content": "",
          "new_line_content": "            len      = strlen(t->value);",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(mp4)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(mp4)",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": null,
          "new_api": "AV_WB16",
          "old_text": null,
          "new_text": "AV_WB16(pkt.data, len)",
          "old_line_content": "            if (!pkt.data)",
          "new_line_content": "            AV_WB16(pkt.data, len);",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"MP4 (MPEG-4 Part 14)\")",
          "old_line_content": "AVOutputFormat ff_mp4_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"MP4 (MPEG-4 Part 14)\"),",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": null,
          "new_api": "MOV_CLASS",
          "old_text": null,
          "new_text": "MOV_CLASS(psp)",
          "old_line_content": "#endif",
          "new_line_content": "MOV_CLASS(psp)",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"PSP MP4 (MPEG-4 Part 14)\")",
          "old_line_content": "AVOutputFormat ff_psp_muxer = {",
          "new_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"PSP MP4 (MPEG-4 Part 14)\"),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3592,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(tg2)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(tg2)",
          "new_line_content": "    .name              = \"3g2\",",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"3GP2 (3GPP2 file format)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"3GP2 (3GPP2 file format)\"),",
          "new_line_content": "    .priv_data_size    = sizeof(MOVMuxContext),",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(ipod)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(ipod)",
          "new_line_content": "    .name              = \"ipod\",",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"iPod H.264 MP4 (MPEG-4 Part 14)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"iPod H.264 MP4 (MPEG-4 Part 14)\"),",
          "new_line_content": "    .extensions        = \"m4v,m4a\",",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mov->tracks[mov->chapter_track].enc->extradata)",
          "new_text": null,
          "old_line_content": "            av_free(mov->tracks[mov->chapter_track].enc->extradata);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->tracks[mov->chapter_track].enc)",
          "new_text": null,
          "old_line_content": "        av_freep(&mov->tracks[mov->chapter_track].enc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(ismv)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(ismv)",
          "new_line_content": "    .name              = \"ismv\",",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->tracks[i].cluster)",
          "new_text": null,
          "old_line_content": "        av_freep(&mov->tracks[i].cluster);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->tracks[i].frag_info)",
          "new_text": null,
          "old_line_content": "        av_freep(&mov->tracks[i].frag_info);",
          "new_line_content": "        if (mov->tracks[i].vos_len)",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"ISMV/ISMA (Smooth Streaming)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"ISMV/ISMA (Smooth Streaming)\"),",
          "new_line_content": "    .extensions        = \"ismv,isma\",",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mov->tracks[i].vos_data)",
          "new_text": null,
          "old_line_content": "            av_free(mov->tracks[i].vos_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&mov->tracks)",
          "new_text": null,
          "old_line_content": "    av_freep(&mov->tracks);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3156,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"muxer does not support non seekable output\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"muxer does not support non seekable output\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3168,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"ipod\",s->oformat->name)",
          "new_text": null,
          "old_line_content": "        else if (!strcmp(\"ipod\",s->oformat->name)) mov->mode = MODE_IPOD;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": "mov_write_ftyp_tag",
          "new_api": null,
          "old_text": "mov_write_ftyp_tag(pb,s)",
          "new_text": null,
          "old_line_content": "        mov_write_ftyp_tag(pb,s);",
          "new_line_content": "            if (s->nb_streams != 2) {",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"PSP mode need one video and one audio stream\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s, AV_LOG_ERROR, \"PSP mode need one video and one audio stream\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": "mov_write_uuidprof_tag",
          "new_api": null,
          "old_text": "mov_write_uuidprof_tag(pb, s)",
          "new_text": null,
          "old_line_content": "            mov_write_uuidprof_tag(pb, s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(st->metadata, \"language\", NULL,0)",
          "new_text": null,
          "old_line_content": "        AVDictionaryEntry *lang = av_dict_get(st->metadata, \"language\", NULL,0);",
          "new_line_content": "        track->enc = st->codec;",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "ff_mov_iso639_to_lang",
          "new_api": null,
          "old_text": "ff_mov_iso639_to_lang(lang?lang->value:\"und\", mov->mode!=MODE_MOV)",
          "new_text": null,
          "old_line_content": "        track->language = ff_mov_iso639_to_lang(lang?lang->value:\"und\", mov->mode!=MODE_MOV);",
          "new_line_content": "            track->language = 0;",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"track %d: could not find tag, \"\n                   \"codec not currently supported in container\\n\", i)",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"track %d: could not find tag, \"",
          "new_line_content": "            goto error;",
          "content_same": false
        },
        {
          "line": 3225,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m','x','4','n')",
          "new_text": null,
          "old_line_content": "                track->tag == MKTAG('m','x','4','p') || track->tag == MKTAG('m','x','4','n') ||",
          "new_line_content": "                if (st->codec->width != 720 || (st->codec->height != 608 && st->codec->height != 512)) {",
          "content_same": false
        },
        {
          "line": 3228,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"D-10/IMX must use 720x608 or 720x512 video resolution\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"D-10/IMX must use 720x608 or 720x512 video resolution\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING,\n                       \"WARNING codec timebase is very high. If duration is too long,\\n\"\n                       \"file may not be playable by quicktime. Specify a shorter timebase\\n\"\n                       \"or choose different container.\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s, AV_LOG_WARNING,",
          "new_line_content": "                       \"file may not be playable by quicktime. Specify a shorter timebase\\n\"",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": "av_get_bits_per_sample",
          "new_api": null,
          "old_text": "av_get_bits_per_sample(st->codec->codec_id)",
          "new_text": null,
          "old_line_content": "            if (av_get_bits_per_sample(st->codec->codec_id) ||",
          "new_line_content": "                if (!st->codec->block_align) {",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"track %d: codec block align is not set\\n\", i)",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"track %d: codec block align is not set\\n\", i);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "av_get_bits_per_sample",
          "new_api": null,
          "old_text": "av_get_bits_per_sample(st->codec->codec_id)",
          "new_text": null,
          "old_line_content": "            if (av_get_bits_per_sample(st->codec->codec_id) < 8) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3256,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"track %d: muxing mp3 at %dhz is not supported\\n\",\n                       i, track->enc->sample_rate)",
          "new_text": null,
          "old_line_content": "                av_log(s, AV_LOG_ERROR, \"track %d: muxing mp3 at %dhz is not supported\\n\",",
          "new_line_content": "                goto error;",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": "avpriv_set_pts_info",
          "new_api": null,
          "old_text": "avpriv_set_pts_info(st, 64, 1, track->timescale)",
          "new_text": null,
          "old_line_content": "        avpriv_set_pts_info(st, 64, 1, track->timescale);",
          "new_line_content": "        /* copy extradata if it exists */",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(track->vos_len)",
          "new_text": null,
          "old_line_content": "            track->vos_data = av_malloc(track->vos_len);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(track->vos_data, st->codec->extradata, track->vos_len)",
          "new_text": null,
          "old_line_content": "            memcpy(track->vos_data, st->codec->extradata, track->vos_len);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": "enable_tracks",
          "new_api": null,
          "old_text": "enable_tracks(s)",
          "new_text": null,
          "old_line_content": "    enable_tracks(s);",
          "new_line_content": "    if (mov->mode == MODE_ISM) {",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "            mov->reserved_moov_pos = avio_tell(pb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "mov_write_mdat_tag",
          "new_api": null,
          "old_text": "mov_write_mdat_tag(pb, mov)",
          "new_text": null,
          "old_line_content": "        mov_write_mdat_tag(pb, mov);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(s->metadata, \"creation_time\", NULL, 0)",
          "new_text": null,
          "old_line_content": "    if (t = av_dict_get(s->metadata, \"creation_time\", NULL, 0))",
          "new_line_content": "    if (mov->time)",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": "ff_iso8601_to_unix_time",
          "new_api": null,
          "old_text": "ff_iso8601_to_unix_time(t->value)",
          "new_text": null,
          "old_line_content": "        mov->time = ff_iso8601_to_unix_time(t->value);",
          "new_line_content": "        mov->time += 0x7C25B080; // 1970 based -> 1904 based",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "mov_create_chapter_track",
          "new_api": null,
          "old_text": "mov_create_chapter_track(s, mov->chapter_track)",
          "new_text": null,
          "old_line_content": "        if (mov_create_chapter_track(s, mov->chapter_track) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "ff_mov_init_hinting",
          "new_api": null,
          "old_text": "ff_mov_init_hinting(s, hint_track, i)",
          "new_text": null,
          "old_line_content": "                ff_mov_init_hinting(s, hint_track, i);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": "avio_flush",
          "new_api": null,
          "old_text": "avio_flush(pb)",
          "new_text": null,
          "old_line_content": "    avio_flush(pb);",
          "new_line_content": "    if (mov->flags & FF_MOV_FLAG_ISML)",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "mov_write_isml_manifest",
          "new_api": null,
          "old_text": "mov_write_isml_manifest(pb, mov)",
          "new_text": null,
          "old_line_content": "        mov_write_isml_manifest(pb, mov);",
          "new_line_content": "    if (mov->flags & FF_MOV_FLAG_EMPTY_MOOV) {",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "mov_write_moov_tag",
          "new_api": null,
          "old_text": "mov_write_moov_tag(pb, mov, s)",
          "new_text": null,
          "old_line_content": "        mov_write_moov_tag(pb, mov, s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "mov_free",
          "new_api": null,
          "old_text": "mov_free(s)",
          "new_text": null,
          "old_line_content": "    mov_free(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": "avio_close_dyn_buf",
          "new_api": null,
          "old_text": "avio_close_dyn_buf(moov_buf, &buf)",
          "new_text": null,
          "old_line_content": "    ret = avio_close_dyn_buf(moov_buf, &buf);",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buf)",
          "new_text": null,
          "old_line_content": "    av_free(buf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "get_moov_size",
          "new_api": null,
          "old_text": "get_moov_size(s)",
          "new_text": null,
          "old_line_content": "    moov_size = get_moov_size(s);",
          "new_line_content": "        return moov_size;",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "get_moov_size",
          "new_api": null,
          "old_text": "get_moov_size(s)",
          "new_text": null,
          "old_line_content": "    moov_size2 = get_moov_size(s);",
          "new_line_content": "        return moov_size2;",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    int64_t pos, pos_end = avio_tell(s->pb);",
          "new_line_content": "    int read_buf_id = 0;",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": "compute_moov_size",
          "new_api": null,
          "old_text": "compute_moov_size(s)",
          "new_text": null,
          "old_line_content": "    moov_size = compute_moov_size(s);",
          "new_line_content": "        return moov_size;",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    read_buf[1] = buf + moov_size;",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "avio_flush",
          "new_api": null,
          "old_text": "avio_flush(s->pb)",
          "new_text": null,
          "old_line_content": "    avio_flush(s->pb);",
          "new_line_content": "    if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Unable to re-open %s output file for \"\n               \"the second pass (faststart)\\n\", s->filename)",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"Unable to re-open %s output file for \"",
          "new_line_content": "        goto end;",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(s->pb)",
          "new_text": null,
          "old_line_content": "    pos_end = avio_tell(s->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, mov->reserved_moov_pos + moov_size, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(s->pb, mov->reserved_moov_pos + moov_size, SEEK_SET);",
          "new_line_content": "    /* start reading at where the new moov will be placed */",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(read_pb, mov->reserved_moov_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    avio_seek(read_pb, mov->reserved_moov_pos, SEEK_SET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(read_pb)",
          "new_text": null,
          "old_line_content": "    pos = avio_tell(read_pb);",
          "new_line_content": "#define READ_BLOCK do {                                                             \\",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "avio_write",
          "new_api": null,
          "old_text": "avio_write(s->pb, read_buf[read_buf_id], n)",
          "new_text": null,
          "old_line_content": "        avio_write(s->pb, read_buf[read_buf_id], n);",
          "new_line_content": "    } while (pos < pos_end);",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": "avio_close",
          "new_api": null,
          "old_text": "avio_close(read_pb)",
          "new_text": null,
          "old_line_content": "    avio_close(read_pb);",
          "new_line_content": "end:",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(buf)",
          "new_text": null,
          "old_line_content": "    av_free(buf);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": "mov_create_chapter_track",
          "new_api": null,
          "old_text": "mov_create_chapter_track(s, mov->chapter_track)",
          "new_text": null,
          "old_line_content": "            if ((res = mov_create_chapter_track(s, mov->chapter_track)) < 0)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "avio_tell",
          "new_api": null,
          "old_text": "avio_tell(pb)",
          "new_text": null,
          "old_line_content": "        moov_pos = avio_tell(pb);",
          "new_line_content": "        /* Write size of mdat tag */",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, mov->mdat_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, mov->mdat_pos, SEEK_SET);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": "avio_wb32",
          "new_api": null,
          "old_text": "avio_wb32(pb, mov->mdat_size + 8)",
          "new_text": null,
          "old_line_content": "            avio_wb32(pb, mov->mdat_size + 8);",
          "new_line_content": "            /* overwrite 'wide' placeholder atom */",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, mov->mdat_pos - 8, SEEK_SET)",
          "new_text": null,
          "old_line_content": "            avio_seek(pb, mov->mdat_pos - 8, SEEK_SET);",
          "new_line_content": "             * tag field */",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": "avio_flush",
          "new_api": null,
          "old_text": "avio_flush(pb)",
          "new_text": null,
          "old_line_content": "    avio_flush(pb);",
          "new_line_content": "    if (trk->hint_track >= 0 && trk->hint_track < mov->nb_streams)",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "ffio_wfourcc",
          "new_api": null,
          "old_text": "ffio_wfourcc(pb, \"mdat\")",
          "new_text": null,
          "old_line_content": "            ffio_wfourcc(pb, \"mdat\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(reformatted_data)",
          "new_text": null,
          "old_line_content": "    av_free(reformatted_data);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, moov_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "        avio_seek(pb, moov_pos, SEEK_SET);",
          "new_line_content": "        if (mov->flags & FF_MOV_FLAG_FASTSTART) {",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_INFO, \"Starting second pass: moving the moov atom to the beginning of the file\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_INFO, \"Starting second pass: moving the moov atom to the beginning of the file\\n\");",
          "new_line_content": "            if (res == 0) {",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(s->pb, mov->reserved_moov_pos, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                avio_seek(s->pb, mov->reserved_moov_pos, SEEK_SET);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "mov_flush_fragment",
          "new_api": null,
          "old_text": "mov_flush_fragment(s)",
          "new_text": null,
          "old_line_content": "        mov_flush_fragment(s);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "mov_write_moov_tag",
          "new_api": null,
          "old_text": "mov_write_moov_tag(pb, mov, s)",
          "new_text": null,
          "old_line_content": "                mov_write_moov_tag(pb, mov, s);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "mov_write_moov_tag",
          "new_api": null,
          "old_text": "mov_write_moov_tag(pb, mov, s)",
          "new_text": null,
          "old_line_content": "            mov_write_moov_tag(pb, mov, s);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": "mov_flush_fragment",
          "new_api": null,
          "old_text": "mov_flush_fragment(s)",
          "new_text": null,
          "old_line_content": "        mov_flush_fragment(s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "mov_write_mfra_tag",
          "new_api": null,
          "old_text": "mov_write_mfra_tag(pb, mov)",
          "new_text": null,
          "old_line_content": "        mov_write_mfra_tag(pb, mov);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->dts - trk->cluster[0].dts,\n                                         s->streams[pkt->stream_index]->time_base,\n                                         AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "            frag_duration = av_rescale_q(pkt->dts - trk->cluster[0].dts,",
          "new_line_content": "                                         AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "avio_write",
          "new_api": null,
          "old_text": "avio_write(pb, buf, 7)",
          "new_text": null,
          "old_line_content": "                avio_write(pb, buf, 7);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "avio_seek",
          "new_api": null,
          "old_text": "avio_seek(pb, off, SEEK_SET)",
          "new_text": null,
          "old_line_content": "                avio_seek(pb, off, SEEK_SET);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "mov_flush_fragment",
          "new_api": null,
          "old_text": "mov_flush_fragment(s)",
          "new_text": null,
          "old_line_content": "                mov_flush_fragment(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "mov_free",
          "new_api": null,
          "old_text": "mov_free(s)",
          "new_text": null,
          "old_line_content": "    mov_free(s);",
          "new_line_content": "    return res;",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "ff_mov_write_packet",
          "new_api": null,
          "old_text": "ff_mov_write_packet(s, pkt)",
          "new_text": null,
          "old_line_content": "        return ff_mov_write_packet(s, pkt);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(mov)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(mov)",
          "new_line_content": "    .name              = \"mov\",",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"QuickTime / MOV\"),",
          "new_line_content": "    .priv_data_size    = sizeof(MOVMuxContext),",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(tgp)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(tgp)",
          "new_line_content": "    .name              = \"3gp\",",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(track->enc->extradata, chapter_properties, sizeof(chapter_properties))",
          "new_text": null,
          "old_line_content": "    memcpy(track->enc->extradata, chapter_properties, sizeof(chapter_properties));",
          "new_line_content": "    for (i = 0; i < s->nb_chapters; i++) {",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"3GP (3GPP file format)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"3GP (3GPP file format)\"),",
          "new_line_content": "    .priv_data_size    = sizeof(MOVMuxContext),",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(c->end, c->time_base, (AVRational){1,MOV_TIMESCALE})",
          "new_text": null,
          "old_line_content": "        int64_t end = av_rescale_q(c->end, c->time_base, (AVRational){1,MOV_TIMESCALE});",
          "new_line_content": "        pkt.duration = end - pkt.dts;",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(c->start, c->time_base, (AVRational){1,MOV_TIMESCALE})",
          "new_text": null,
          "old_line_content": "        pkt.pts = pkt.dts = av_rescale_q(c->start, c->time_base, (AVRational){1,MOV_TIMESCALE});",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(c->metadata, \"title\", NULL, 0)",
          "new_text": null,
          "old_line_content": "        if ((t = av_dict_get(c->metadata, \"title\", NULL, 0))) {",
          "new_line_content": "            pkt.size = len + 2;",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(mp4)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(mp4)",
          "new_line_content": "    .name              = \"mp4\",",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "ff_mov_write_packet",
          "new_api": null,
          "old_text": "ff_mov_write_packet(s, &pkt)",
          "new_text": null,
          "old_line_content": "            ff_mov_write_packet(s, &pkt);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&pkt.data)",
          "new_text": null,
          "old_line_content": "            av_freep(&pkt.data);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"MP4 (MPEG-4 Part 14)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"MP4 (MPEG-4 Part 14)\"),",
          "new_line_content": "    .extensions        = \"mp4\",",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "MOV_CLASS",
          "new_api": null,
          "old_text": "MOV_CLASS(psp)",
          "new_text": null,
          "old_line_content": "MOV_CLASS(psp)",
          "new_line_content": "    .name              = \"psp\",",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"PSP MP4 (MPEG-4 Part 14)\")",
          "new_text": null,
          "old_line_content": "    .long_name         = NULL_IF_CONFIG_SMALL(\"PSP MP4 (MPEG-4 Part 14)\"),",
          "new_line_content": "    .priv_data_size    = sizeof(MOVMuxContext),",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 27,
      "total_additions": 93,
      "total_deletions": 94,
      "total_api_changes": 214
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 214,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 1348,
    "api_calls_after": 1347,
    "diff_info": {
      "added_lines": 0,
      "removed_lines": 2,
      "total_diff_lines": 14
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/85025162dac9efcb07ed7528cbd248337bad912c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/85025162dac9efcb07ed7528cbd248337bad912c/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/85025162dac9efcb07ed7528cbd248337bad912c/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/85025162dac9efcb07ed7528cbd248337bad912c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2534,
          "old_api": "cosf",
          "new_api": "sinf",
          "old_text": "cosf(phi)",
          "new_text": "sinf(phi)",
          "old_line_content": "    vec[0] = cosf(theta) * cosf(phi);",
          "new_line_content": "    const float sin_phi   = sinf(phi);",
          "content_same": false
        },
        {
          "line": 2535,
          "old_api": "sinf",
          "new_api": "cosf",
          "old_text": "sinf(phi)",
          "new_text": "cosf(phi)",
          "old_line_content": "    vec[1] = cosf(theta) * sinf(phi);",
          "new_line_content": "    const float cos_phi   = cosf(phi);",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": "hypotf",
          "new_api": "atan2f",
          "old_text": "hypotf(uf, vf)",
          "new_text": "atan2f(h, vec[2])",
          "old_line_content": "    const int visible = hypotf(uf, vf) <= 0.5f;",
          "new_line_content": "    const float phi = atan2f(h, vec[2]) / M_PI;",
          "content_same": false
        },
        {
          "line": 2630,
          "old_api": "cosf",
          "new_api": "sqrtf",
          "old_text": "cosf(lat)",
          "new_text": "sqrtf(dscr)",
          "old_line_content": "    vec[0] = sinf(lon) * cosf(lat);",
          "new_line_content": "    const float clon = (-k * d + sqrtf(dscr)) / (k + 1.f);",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": "cosf",
          "new_api": "atan2f",
          "old_text": "cosf(lat)",
          "new_text": "atan2f(uf, S * clon)",
          "old_line_content": "    vec[2] = cosf(lon) * cosf(lat);",
          "new_line_content": "    const float lon = atan2f(uf, S * clon);",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "cosf",
          "new_api": "atanf",
          "old_text": "cosf(theta)",
          "new_text": "atanf(vf)",
          "old_line_content": "    const float cos_theta = cosf(theta);",
          "new_line_content": "    const float theta = atanf(vf);",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": "floorf",
          "new_api": "asinf",
          "old_text": "floorf(uf)",
          "new_text": "asinf(vec[1])",
          "old_line_content": "    const int ui = floorf(uf);",
          "new_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": "sinf",
          "new_api": "sqrtf",
          "old_text": "sinf(phi)",
          "new_text": "sqrtf(1.f - sinz2)",
          "old_line_content": "        const float sin_phi   = sinf(phi);",
          "new_line_content": "        const float cosz = sqrtf(1.f - sinz2);",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": "sinf",
          "new_api": "asinf",
          "old_text": "sinf(theta)",
          "new_text": "asinf(cosz)",
          "old_line_content": "        const float sin_theta = sinf(theta);",
          "new_line_content": "        const float theta = asinf(cosz);",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": "cosf",
          "new_api": "atan2f",
          "old_text": "cosf(theta)",
          "new_text": "atan2f(uf, vf)",
          "old_line_content": "        const float cos_theta = cosf(theta);",
          "new_line_content": "        const float phi   = atan2f(uf, vf);",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": "cosf",
          "new_api": "hypotf",
          "old_text": "cosf(theta)",
          "new_text": "hypotf(uf, vf)",
          "old_line_content": "    const float cos_theta = cosf(theta);",
          "new_line_content": "    const float h     = hypotf(uf, vf);",
          "content_same": false
        },
        {
          "line": 3247,
          "old_api": "sinf",
          "new_api": "floorf",
          "old_text": "sinf(phi)",
          "new_text": "floorf(y * 2.f)",
          "old_line_content": "        const float sin_phi   = sinf(phi);",
          "new_line_content": "        const float back = floorf(y * 2.f);",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "cosf",
          "new_api": "sinf",
          "old_text": "cosf(roll_rad)",
          "new_text": "sinf(yaw_rad)",
          "old_line_content": "    const float cos_roll  = cosf(roll_rad);",
          "new_line_content": "    const float sin_yaw   = sinf(yaw_rad);",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "av_calloc",
          "new_api": "AVERROR",
          "old_text": "av_calloc(s->pr_width[p] * s->pr_height[p], sizeof_mask)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            s->mask = av_calloc(s->pr_width[p] * s->pr_height[p], sizeof_mask);",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "hypotf",
          "new_api": "atan2f",
          "old_text": "hypotf(w, h)",
          "new_text": "atan2f(h * 0.5f, l)",
          "old_line_content": "            const float d = 0.5f * hypotf(w, h);",
          "new_line_content": "            *v_fov = 2.f * atan2f(h * 0.5f, l) * 360.f / M_PI;",
          "content_same": false
        },
        {
          "line": 3626,
          "old_api": "isnan",
          "new_api": "out_transform",
          "old_text": "isnan(vec[2])",
          "new_text": "s->out_transform(s, j, i, height, width, vec)",
          "old_line_content": "                av_assert1(!isnan(vec[0]) && !isnan(vec[1]) && !isnan(vec[2]));",
          "new_line_content": "                    out_mask = s->out_transform(s, j, i, height, width, vec);",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": "mirror",
          "new_api": "out_transform",
          "old_text": "mirror(s->output_mirror_modifier, vec)",
          "new_text": "s->out_transform(s, i, j, width, height, vec)",
          "old_line_content": "                mirror(s->output_mirror_modifier, vec);",
          "new_line_content": "                    out_mask = s->out_transform(s, i, j, width, height, vec);",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "in_transform",
          "new_api": "rotate",
          "old_text": "s->in_transform(s, vec, in_height, in_width, rmap.v, rmap.u, &du, &dv)",
          "new_text": "rotate(s->rot_mat, vec)",
          "old_line_content": "                    in_mask = s->in_transform(s, vec, in_height, in_width, rmap.v, rmap.u, &du, &dv);",
          "new_line_content": "                rotate(s->rot_mat, vec);",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "in_transform",
          "new_api": "normalize_vector",
          "old_text": "s->in_transform(s, vec, in_width, in_height, rmap.u, rmap.v, &du, &dv)",
          "new_text": "normalize_vector(vec)",
          "old_line_content": "                    in_mask = s->in_transform(s, vec, in_width, in_height, rmap.u, rmap.v, &du, &dv);",
          "new_line_content": "                normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": "isnan",
          "new_api": "mirror",
          "old_text": "isnan(dv)",
          "new_text": "mirror(s->output_mirror_modifier, vec)",
          "old_line_content": "                av_assert1(!isnan(du) && !isnan(dv));",
          "new_line_content": "                mirror(s->output_mirror_modifier, vec);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": "av_log",
          "new_api": "tanf",
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Both width and height values should be specified.\\n\")",
          "new_text": "tanf(s->h_fov * M_PI / 360.f)",
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Both width and height values should be specified.\\n\");",
          "new_line_content": "        w = h / tanf(s->v_fov * M_PI / 360.f) * tanf(s->h_fov * M_PI / 360.f);",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "set_dimensions",
          "new_api": "prepare_out",
          "old_text": "set_dimensions(s->pr_width, s->pr_height, w, h, desc)",
          "new_text": "prepare_out(ctx)",
          "old_line_content": "    set_dimensions(s->pr_width, s->pr_height, w, h, desc);",
          "new_line_content": "        err = prepare_out(ctx);",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": "av_pix_fmt_count_planes",
          "new_api": "FFALIGN",
          "old_text": "av_pix_fmt_count_planes(inlink->format)",
          "new_text": "FFALIGN(s->pr_width[i], 8)",
          "old_line_content": "    s->nb_planes = av_pix_fmt_count_planes(inlink->format);",
          "new_line_content": "        s->uv_linesize[i] = FFALIGN(s->pr_width[i], 8);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": "ff_filter_get_nb_threads",
          "new_api": "allocate_plane",
          "old_text": "ff_filter_get_nb_threads(ctx)",
          "new_text": "allocate_plane(s, sizeof_uv, sizeof_ker, sizeof_mask * have_alpha * s->alpha, i)",
          "old_line_content": "    ctx->internal->execute(ctx, v360_slice, NULL, NULL, FFMIN(outlink->h, ff_filter_get_nb_threads(ctx)));",
          "new_line_content": "        allocate_plane(s, sizeof_uv, sizeof_ker, sizeof_mask * have_alpha * s->alpha, i);",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "av_frame_copy_props",
          "new_api": "ff_get_video_buffer",
          "old_text": "av_frame_copy_props(out, in)",
          "new_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "old_line_content": "    av_frame_copy_props(out, in);",
          "new_line_content": "    out = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "ff_filter_get_nb_threads",
          "new_api": "av_frame_copy_props",
          "old_text": "ff_filter_get_nb_threads(ctx)",
          "new_text": "av_frame_copy_props(out, in)",
          "old_line_content": "    ctx->internal->execute(ctx, s->remap_slice, &td, NULL, FFMIN(outlink->h, ff_filter_get_nb_threads(ctx)));",
          "new_line_content": "    av_frame_copy_props(out, in);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4098,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "",
          "new_line_content": "        av_assert0(0);",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "set_dimensions",
          "old_text": null,
          "new_text": "set_dimensions(s->out_offset_w, s->out_offset_h, out_offset_w, out_offset_h, desc)",
          "old_line_content": "",
          "new_line_content": "    set_dimensions(s->out_offset_w, s->out_offset_h, out_offset_w, out_offset_h, desc);",
          "content_same": false
        },
        {
          "line": 4102,
          "old_api": null,
          "new_api": "set_dimensions",
          "old_text": null,
          "new_text": "set_dimensions(s->planewidth, s->planeheight, w, h, desc)",
          "old_line_content": "    outlink->h = h;",
          "new_line_content": "    set_dimensions(s->planewidth, s->planeheight, w, h, desc);",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": null,
          "new_api": "FF_CEIL_RSHIFT",
          "old_text": null,
          "new_text": "FF_CEIL_RSHIFT(w, desc->log2_chroma_w)",
          "old_line_content": "",
          "new_line_content": "    outw[1] = outw[2] = FF_CEIL_RSHIFT(w, desc->log2_chroma_w);",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": null,
          "new_api": "FF_CEIL_RSHIFT",
          "old_text": null,
          "new_text": "FF_CEIL_RSHIFT(h, desc->log2_chroma_h)",
          "old_line_content": "static av_always_inline int v360_slice(AVFilterContext *ctx, void *arg, int jobnr, int nb_jobs)",
          "new_line_content": "    outh[1] = outh[2] = FF_CEIL_RSHIFT(h, desc->log2_chroma_h);",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "av_pix_fmt_count_planes",
          "old_text": null,
          "new_text": "av_pix_fmt_count_planes(inlink->format)",
          "old_line_content": "        s->map[0] = s->map[1] = s->map[2] = s->map[3] = 0;",
          "new_line_content": "    s->nb_planes = av_pix_fmt_count_planes(inlink->format);",
          "content_same": false
        },
        {
          "line": 2581,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(vec[0], vec[1])",
          "old_line_content": "    float vf = vec[1] / lh * phi * s->input_mirror_modifier[1] / s->iflat_range[1];",
          "new_line_content": "    const float h   = hypotf(vec[0], vec[1]);",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(uf, vf)",
          "old_line_content": "",
          "new_line_content": "    const int visible = hypotf(uf, vf) <= 0.5f;",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": null,
          "new_api": "calculate_rotation_matrix",
          "old_text": null,
          "new_text": "calculate_rotation_matrix(s->yaw, s->pitch, s->roll, s->rot_mat, s->rotation_order)",
          "old_line_content": "    return 0;",
          "new_line_content": "    calculate_rotation_matrix(s->yaw, s->pitch, s->roll, s->rot_mat, s->rotation_order);",
          "content_same": false
        },
        {
          "line": 4126,
          "old_api": null,
          "new_api": "set_mirror_modifier",
          "old_text": null,
          "new_text": "set_mirror_modifier(s->h_flip, s->v_flip, s->d_flip, s->output_mirror_modifier)",
          "old_line_content": "}",
          "new_line_content": "    set_mirror_modifier(s->h_flip, s->v_flip, s->d_flip, s->output_mirror_modifier);",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "ff_filter_get_nb_threads",
          "old_text": null,
          "new_text": "ff_filter_get_nb_threads(ctx)",
          "old_line_content": "static int filter_frame(AVFilterLink *inlink, AVFrame *in)",
          "new_line_content": "    ctx->internal->execute(ctx, v360_slice, NULL, NULL, FFMIN(outlink->h, ff_filter_get_nb_threads(ctx)));",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 2602,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ui + j - 1, 0, width  - 1)",
          "old_line_content": "    return visible;",
          "new_line_content": "            us[i][j] = visible ? av_clip(ui + j - 1, 0, width  - 1) : 0;",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(vi + i - 1, 0, height - 1)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = visible ? av_clip(vi + i - 1, 0, height - 1) : 0;",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(vec[2])",
          "old_line_content": "                if (s->in_transpose)",
          "new_line_content": "                av_assert1(!isnan(vec[0]) && !isnan(vec[1]) && !isnan(vec[2]));",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ui + j - 1, 0, ew - 1)",
          "old_line_content": "    return 1;",
          "new_line_content": "            us[i][j] = u_shift + av_clip(ui + j - 1, 0, ew - 1);",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&in)",
          "old_line_content": "    td.in = in;",
          "new_line_content": "        av_frame_free(&in);",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    td.out = out;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(vi + i - 1, 0, eh - 1)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = v_shift + av_clip(vi + i - 1, 0, eh - 1);",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(vec[2])",
          "old_line_content": "                else",
          "new_line_content": "                av_assert1(!isnan(vec[0]) && !isnan(vec[1]) && !isnan(vec[2]));",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "in_transform",
          "old_text": null,
          "new_text": "s->in_transform(s, vec, in_height, in_width, rmap.v, rmap.u, &du, &dv)",
          "old_line_content": "",
          "new_line_content": "                    in_mask = s->in_transform(s, vec, in_height, in_width, rmap.v, rmap.u, &du, &dv);",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": null,
          "new_api": "in_transform",
          "old_text": null,
          "new_text": "s->in_transform(s, vec, in_width, in_height, rmap.u, rmap.v, &du, &dv)",
          "old_line_content": "                    if (s->mask_size == 1) {",
          "new_line_content": "                    in_mask = s->in_transform(s, vec, in_width, in_height, rmap.u, rmap.v, &du, &dv);",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(dv)",
          "old_line_content": "                        mask8[0] = 255 * (out_mask & in_mask);",
          "new_line_content": "                av_assert1(!isnan(du) && !isnan(dv));",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": null,
          "new_api": "ff_filter_get_nb_threads",
          "old_text": null,
          "new_text": "ff_filter_get_nb_threads(ctx)",
          "old_line_content": "",
          "new_line_content": "    ctx->internal->execute(ctx, s->remap_slice, &td, NULL, FFMIN(outlink->h, ff_filter_get_nb_threads(ctx)));",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "calculate_kernel",
          "old_text": null,
          "new_text": "s->calculate_kernel(du, dv, &rmap, u, v, ker)",
          "old_line_content": "                    } else {",
          "new_line_content": "                s->calculate_kernel(du, dv, &rmap, u, v, ker);",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&in)",
          "old_line_content": "                           char *res, int res_len, int flags)",
          "new_line_content": "    av_frame_free(&in);",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": null,
          "new_api": "ff_filter_frame",
          "old_text": null,
          "new_text": "ff_filter_frame(outlink, out)",
          "old_line_content": "{",
          "new_line_content": "    return ff_filter_frame(outlink, out);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "ff_filter_process_command",
          "old_text": null,
          "new_text": "ff_filter_process_command(ctx, cmd, args, res, res_len, flags)",
          "old_line_content": "}",
          "new_line_content": "    ret = ff_filter_process_command(ctx, cmd, args, res, res_len, flags);",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": null,
          "new_api": "config_output",
          "old_text": null,
          "new_text": "config_output(ctx->outputs[0])",
          "old_line_content": "    V360Context *s = ctx->priv;",
          "new_line_content": "    return config_output(ctx->outputs[0]);",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(vec[0], vec[2])",
          "old_line_content": "    int ew, eh;",
          "new_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0];",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": null,
          "new_api": "asinf",
          "old_text": null,
          "new_text": "asinf(vec[1])",
          "old_line_content": "    int u_shift, v_shift;",
          "new_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "content_same": false
        },
        {
          "line": 2633,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(vf, S)",
          "old_line_content": "",
          "new_line_content": "    const float lat = atan2f(vf, S);",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(lat)",
          "old_line_content": "",
          "new_line_content": "    vec[0] = sinf(lon) * cosf(lat);",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(lat)",
          "old_line_content": "    return 1;",
          "new_line_content": "    vec[1] = sinf(lat);",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(lat)",
          "old_line_content": "}",
          "new_line_content": "    vec[2] = cosf(lon) * cosf(lat);",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->u[p])",
          "old_line_content": "}",
          "new_line_content": "        av_freep(&s->u[p]);",
          "content_same": false
        },
        {
          "line": 4175,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->v[p])",
          "old_line_content": "",
          "new_line_content": "        av_freep(&s->v[p]);",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->ker[p])",
          "old_line_content": "static const AVFilterPad inputs[] = {",
          "new_line_content": "        av_freep(&s->ker[p]);",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->mask)",
          "old_line_content": "        .name         = \"default\",",
          "new_line_content": "    av_freep(&s->mask);",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": null,
          "new_api": "av_pix_fmt_desc_get",
          "old_text": null,
          "new_text": "av_pix_fmt_desc_get(inlink->format)",
          "old_line_content": "    int err;",
          "new_line_content": "    const AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(inlink->format);",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": null,
          "new_api": "int (*prepare_out)(AVFilterContext *ctx)",
          "old_text": null,
          "new_text": "int (*prepare_out)(AVFilterContext *ctx)",
          "old_line_content": "    s->input_mirror_modifier[1] = s->iv_flip ? -1.f : 1.f;",
          "new_line_content": "    int (*prepare_out)(AVFilterContext *ctx);",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": null,
          "new_api": "fmodf",
          "old_text": null,
          "new_text": "fmodf(phi, M_PI_2)",
          "old_line_content": "",
          "new_line_content": "        uf = fmodf(phi, M_PI_2) / M_PI_2;",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "fmodf",
          "old_text": null,
          "new_text": "fmodf(uf + 1.f, 1.f)",
          "old_line_content": "        const float scalew = s->fin_pad > 0 ? 1.f - s->fin_pad / (width  / 3.f) : 1.f - s->in_pad;",
          "new_line_content": "            uf = uf >= 0.f ? fmodf(uf - 1.f, 1.f) : fmodf(uf + 1.f, 1.f);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "tanf",
          "old_text": null,
          "new_text": "tanf(0.5f * s->v_fov * M_PI / 180.f)",
          "old_line_content": "/**",
          "new_line_content": "    s->flat_range[1] = tanf(0.5f * s->v_fov * M_PI / 180.f);",
          "content_same": false
        },
        {
          "line": 4201,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"Convert 360 projection of video.\")",
          "old_line_content": "    .outputs       = outputs,",
          "new_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Convert 360 projection of video.\"),",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(phi)",
          "old_line_content": "    vec[0] = cos_theta * sin_phi;",
          "new_line_content": "    const float sin_phi   = sinf(phi);",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(phi)",
          "old_line_content": "    vec[1] = sin_theta;",
          "new_line_content": "    const float cos_phi   = cosf(phi);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(theta)",
          "old_line_content": "    vec[2] = cos_theta * cos_phi;",
          "new_line_content": "    const float sin_theta = sinf(theta);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "",
          "new_line_content": "    const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "    for (int order = 0; order < NB_RORDERS; order++) {",
          "new_line_content": "        av_assert0(0);",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": null,
          "new_api": "ff_v360_init",
          "old_text": null,
          "new_text": "ff_v360_init(s, depth)",
          "old_line_content": "",
          "new_line_content": "    ff_v360_init(s, depth);",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ui + j - 1, 0, ew - 1)",
          "old_line_content": "    return 1;",
          "new_line_content": "            us[i][j] = u_shift + av_clip(ui + j - 1, 0, ew - 1);",
          "content_same": false
        },
        {
          "line": 3218,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(vi + i - 1, 0, eh - 1)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = v_shift + av_clip(vi + i - 1, 0, eh - 1);",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": null,
          "new_api": "tanf",
          "old_text": null,
          "new_text": "tanf(0.5f * s->iv_fov * M_PI / 180.f)",
          "old_line_content": "/**",
          "new_line_content": "    s->iflat_range[1] = tanf(0.5f * s->iv_fov * M_PI / 180.f);",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_WARNING,\n                   \"Incomplete rorder option. Direction for all 3 rotation orders should be specified. Switching to default rorder.\\n\")",
          "old_line_content": "            break;",
          "new_line_content": "            av_log(ctx, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": null,
          "new_api": "get_rorder",
          "old_text": null,
          "new_text": "get_rorder(c)",
          "old_line_content": "            s->rotation_order[1] = PITCH;",
          "new_line_content": "        rorder = get_rorder(c);",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_WARNING,\n                   \"Incorrect rotation order symbol '%c' in rorder option. Switching to default rorder.\\n\", c)",
          "old_line_content": "            break;",
          "new_line_content": "            av_log(ctx, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(vec[0], vec[2])",
          "old_line_content": "",
          "new_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0] / s->iflat_range[0];",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": null,
          "new_api": "tanf",
          "old_text": null,
          "new_text": "tanf(theta)",
          "old_line_content": "    const int visible = vi >= 0 && vi < height && ui >= 0 && ui < width &&",
          "new_line_content": "    const float vf = (tanf(theta) / s->iflat_range[1] + 1.f) * height / 2.f;",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "                        theta >= -M_PI * s->iv_fov / 180.f;",
          "new_line_content": "    const int ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "",
          "new_line_content": "    const int vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(phi)",
          "old_line_content": "        l_x = cos_theta * sin_phi;",
          "new_line_content": "        const float sin_phi   = sinf(phi);",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(phi)",
          "old_line_content": "        l_y = sin_theta;",
          "new_line_content": "        const float cos_phi   = cosf(phi);",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(theta)",
          "old_line_content": "        l_z = cos_theta * cos_phi;",
          "new_line_content": "        const float sin_theta = sinf(theta);",
          "content_same": false
        },
        {
          "line": 3255,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "    } else {",
          "new_line_content": "        const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ui + j - 1, 0, width  - 1)",
          "old_line_content": "    return visible;",
          "new_line_content": "            us[i][j] = visible ? av_clip(ui + j - 1, 0, width  - 1) : 0;",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(vi + i - 1, 0, height - 1)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = visible ? av_clip(vi + i - 1, 0, height - 1) : 0;",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(0)",
          "old_line_content": "",
          "new_line_content": "        av_assert0(0);",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": null,
          "new_api": "set_dimensions",
          "old_text": null,
          "new_text": "set_dimensions(s->inplanewidth, s->inplaneheight, w, h, desc)",
          "old_line_content": "",
          "new_line_content": "    set_dimensions(s->inplanewidth, s->inplaneheight, w, h, desc);",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": null,
          "new_api": "set_dimensions",
          "old_text": null,
          "new_text": "set_dimensions(s->in_offset_w, s->in_offset_h, in_offset_w, in_offset_h, desc)",
          "old_line_content": "    if (s->id_fov > 0.f)",
          "new_line_content": "    set_dimensions(s->in_offset_w, s->in_offset_h, in_offset_w, in_offset_h, desc);",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(y * 4.f)",
          "old_line_content": "        switch (face) {",
          "new_line_content": "        const int face = floorf(y * 4.f);",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": null,
          "new_api": "fov_from_dfov",
          "old_text": null,
          "new_text": "fov_from_dfov(s->in, s->id_fov, w, h, &s->ih_fov, &s->iv_fov)",
          "old_line_content": "    switch (s->in) {",
          "new_line_content": "        fov_from_dfov(s->in, s->id_fov, w, h, &s->ih_fov, &s->iv_fov);",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(int, s->in_width, s->in_height)",
          "old_line_content": "        err = 0;",
          "new_line_content": "        FFSWAP(int, s->in_width, s->in_height);",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(uf, vf)",
          "old_line_content": "",
          "new_line_content": "    const float rh = hypotf(uf, vf);",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": null,
          "new_api": "prepare_cube_in",
          "old_text": null,
          "new_text": "prepare_cube_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_cube1x6;",
          "new_line_content": "        err = prepare_cube_in(ctx);",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": null,
          "new_api": "sqrtf",
          "old_text": null,
          "new_text": "sqrtf(sinzz)",
          "old_line_content": "",
          "new_line_content": "    const float sinz = (h - sqrtf(sinzz)) / (h / rh + rh / h);",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": null,
          "new_api": "prepare_cube_in",
          "old_text": null,
          "new_text": "prepare_cube_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_cube6x1;",
          "new_line_content": "        err = prepare_cube_in(ctx);",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(phi)",
          "old_line_content": "        vec[0] = cos_theta * sin_phi;",
          "new_line_content": "        const float sin_phi   = sinf(phi);",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(phi)",
          "old_line_content": "        vec[1] = sin_theta;",
          "new_line_content": "        const float cos_phi   = cosf(phi);",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(theta)",
          "old_line_content": "        vec[2] = cos_theta * cos_phi;",
          "new_line_content": "        const float sin_theta = sinf(theta);",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "    } else {",
          "new_line_content": "        const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": null,
          "new_api": "prepare_cube_in",
          "old_text": null,
          "new_text": "prepare_cube_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_eac;",
          "new_line_content": "        err = prepare_cube_in(ctx);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "prepare_eac_in",
          "old_text": null,
          "new_text": "prepare_eac_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_flat;",
          "new_line_content": "        err = prepare_eac_in(ctx);",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "prepare_flat_in",
          "old_text": null,
          "new_text": "prepare_flat_in(ctx)",
          "old_line_content": "    case PANNINI:",
          "new_line_content": "        err = prepare_flat_in(ctx);",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": " * Calculate 3D coordinates on sphere for corresponding frame position in tetrahedron format.",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Supplied format is not accepted as input.\\n\")",
          "old_line_content": "        wf = w;",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Supplied format is not accepted as input.\\n\");",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        hf = h;",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": null,
          "new_api": "prepare_stereographic_in",
          "old_text": null,
          "new_text": "prepare_stereographic_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_mercator;",
          "new_line_content": "        err = prepare_stereographic_in(ctx);",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": null,
          "new_api": "fabsf",
          "old_text": null,
          "new_text": "fabsf(1.f - uf * 2.f + vf)",
          "old_line_content": "}",
          "new_line_content": "    vec[2] = 2.f * fabsf(1.f - fabsf(1.f - uf * 2.f + vf)) - 1.f;",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": null,
          "new_api": "FFMAX3",
          "old_text": null,
          "new_text": "FFMAX3(d1, d2, d3)",
          "old_line_content": "    x =  vec[0] / d;",
          "new_line_content": "    const float d = FFMAX(d0, FFMAX3(d1, d2, d3));",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": null,
          "new_api": "prepare_fisheye_in",
          "old_text": null,
          "new_text": "prepare_fisheye_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_cylindrical;",
          "new_line_content": "        err = prepare_fisheye_in(ctx);",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "prepare_cylindrical_in",
          "old_text": null,
          "new_text": "prepare_cylindrical_in(ctx)",
          "old_line_content": "        s->in_transform = xyz_to_tetrahedron;",
          "new_line_content": "        err = prepare_cylindrical_in(ctx);",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "reflectx",
          "old_text": null,
          "new_text": "reflectx(ui + j - 1, vi + i - 1, width, height)",
          "old_line_content": "    return 1;",
          "new_line_content": "            us[i][j] = reflectx(ui + j - 1, vi + i - 1, width, height);",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": null,
          "new_api": "reflecty",
          "old_text": null,
          "new_text": "reflecty(vi + i - 1, height)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = reflecty(vi + i - 1, height);",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": null,
          "new_api": "xyz_to_cube",
          "old_text": null,
          "new_text": "xyz_to_cube(s, vec, &uf, &vf, &face)",
          "old_line_content": "    switch (face) {",
          "new_line_content": "    xyz_to_cube(s, vec, &uf, &vf, &face);",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Specified input format is not handled.\\n\")",
          "old_line_content": "        return err;",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Specified input format is not handled.\\n\");",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = prepare_cube_out;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 4.f * 3.f)",
          "old_line_content": "        prepare_out = prepare_cube_out;",
          "new_line_content": "        w = lrintf(wf / 4.f * 3.f);",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 4.f)",
          "old_line_content": "        prepare_out = prepare_cube_out;",
          "new_line_content": "        w = lrintf(wf / 4.f);",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 2.f * 3.f)",
          "old_line_content": "        prepare_out = prepare_eac_out;",
          "new_line_content": "        w = lrintf(wf / 2.f * 3.f);",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(theta)",
          "old_line_content": "    vec[2] = sin_theta;",
          "new_line_content": "    const float sin_theta = sinf(theta);",
          "content_same": false
        },
        {
          "line": 2914,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "",
          "new_line_content": "    const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = prepare_flat_out;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "reflectx",
          "old_text": null,
          "new_text": "reflectx(ui + j - 1, vi + i - 1, width, height)",
          "old_line_content": "    return 1;",
          "new_line_content": "            us[i][j] = reflectx(ui + j - 1, vi + i - 1, width, height);",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": null,
          "new_api": "reflecty",
          "old_text": null,
          "new_text": "reflecty(vi + i - 1, height)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = reflecty(vi + i - 1, height);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 4.f * 5.f)",
          "old_line_content": "        prepare_out = prepare_stereographic_out;",
          "new_line_content": "        w = lrintf(wf / 4.f * 5.f);",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(vec[0], vec[1])",
          "old_line_content": "    float vf = (theta * (vec[1] / lh) * s->input_mirror_modifier[1] * scale + 0.5f) * eh;",
          "new_line_content": "    const float h     = hypotf(vec[0], vec[1]);",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": null,
          "new_api": "fabsf",
          "old_text": null,
          "new_text": "fabsf(vec[2])",
          "old_line_content": "    int ui, vi;",
          "new_line_content": "    const float theta = acosf(fabsf(vec[2])) / M_PI;",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "ceilf",
          "old_text": null,
          "new_text": "ceilf(ew)",
          "old_line_content": "",
          "new_line_content": "        u_shift = ceilf(ew);",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(yaw_rad)",
          "old_line_content": "",
          "new_line_content": "    const float cos_yaw   = cosf(yaw_rad);",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(pitch_rad)",
          "old_line_content": "    float m[3][3][3];",
          "new_line_content": "    const float sin_pitch = sinf(pitch_rad);",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(pitch_rad)",
          "old_line_content": "    float temp[3][3];",
          "new_line_content": "    const float cos_pitch = cosf(pitch_rad);",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(roll_rad)",
          "old_line_content": "",
          "new_line_content": "    const float sin_roll  = sinf(roll_rad);",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(roll_rad)",
          "old_line_content": "    m[0][0][0] =  cos_yaw;  m[0][0][1] = 0;          m[0][0][2] =  sin_yaw;",
          "new_line_content": "    const float cos_roll  = cosf(roll_rad);",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(uf)",
          "old_line_content": "",
          "new_line_content": "    ui = floorf(uf);",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": null,
          "new_api": "floorf",
          "old_text": null,
          "new_text": "floorf(vf)",
          "old_line_content": "    for (int i = 0; i < 4; i++) {",
          "new_line_content": "    vi = floorf(vf);",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = prepare_fisheye_out;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(u_shift + ui + j - 1, 0, width  - 1)",
          "old_line_content": "    return 1;",
          "new_line_content": "            us[i][j] = av_clip(u_shift + ui + j - 1, 0, width  - 1);",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(          vi + i - 1, 0, height - 1)",
          "old_line_content": "}",
          "new_line_content": "            vs[i][j] = av_clip(          vi + i - 1, 0, height - 1);",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf * 0.5f)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf * 0.5f);",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": null,
          "new_api": "multiply_matrix",
          "old_text": null,
          "new_text": "multiply_matrix(temp, m[rotation_order[0]], m[rotation_order[1]])",
          "old_line_content": " * Rotate vector with given rotation matrix.",
          "new_line_content": "    multiply_matrix(temp, m[rotation_order[0]], m[rotation_order[1]]);",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "multiply_matrix",
          "old_text": null,
          "new_text": "multiply_matrix(rot_mat, temp, m[rotation_order[2]])",
          "old_line_content": " *",
          "new_line_content": "    multiply_matrix(rot_mat, temp, m[rotation_order[2]]);",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = prepare_cylindrical_out;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 2.f)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf / 2.f);",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 4.f * 3.f)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf / 4.f * 3.f);",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(phi)",
          "old_line_content": "        l_x = cos_theta * sin_phi;",
          "new_line_content": "        const float sin_phi   = sinf(phi);",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(phi)",
          "old_line_content": "        l_y = sin_theta;",
          "new_line_content": "        const float cos_phi   = cosf(phi);",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": null,
          "new_api": "sinf",
          "old_text": null,
          "new_text": "sinf(theta)",
          "old_line_content": "        l_z = cos_theta * cos_phi;",
          "new_line_content": "        const float sin_theta = sinf(theta);",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "    } else {",
          "new_line_content": "        const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf)",
          "old_line_content": "        prepare_out = NULL;",
          "new_line_content": "        w = lrintf(wf);",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(wf / 2.f)",
          "old_line_content": "        return AVERROR_BUG;",
          "new_line_content": "        w = lrintf(wf / 2.f);",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(hf)",
          "old_line_content": "    }",
          "new_line_content": "        h = lrintf(hf);",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv)",
          "old_line_content": "    if (sizeof_ker) {",
          "new_line_content": "        s->u[p] = av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv);",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Specified output format is not handled.\\n\")",
          "old_line_content": "    if (s->width > 0 && s->height <= 0 && s->h_fov > 0.f && s->v_fov > 0.f &&",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Specified output format is not handled.\\n\");",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_ker)",
          "old_line_content": "    if (sizeof_mask && !p) {",
          "new_line_content": "            s->ker[p] = av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_ker);",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": null,
          "new_api": "tanf",
          "old_text": null,
          "new_text": "tanf(s->v_fov * M_PI / 360.f)",
          "old_line_content": "    } else if (s->width > 0 && s->height > 0) {",
          "new_line_content": "        h = w / tanf(s->h_fov * M_PI / 360.f) * tanf(s->v_fov * M_PI / 360.f);",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(s->pr_width[p] * s->pr_height[p], sizeof_mask)",
          "old_line_content": "    return 0;",
          "new_line_content": "            s->mask = av_calloc(s->pr_width[p] * s->pr_height[p], sizeof_mask);",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Both width and height values should be specified.\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Both width and height values should be specified.\\n\");",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        if (s->in_transpose)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(int, w, h)",
          "old_line_content": "",
          "new_line_content": "            FFSWAP(int, w, h);",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": null,
          "new_api": "FFSWAP",
          "old_text": null,
          "new_text": "FFSWAP(int, w, h)",
          "old_line_content": "",
          "new_line_content": "            FFSWAP(int, w, h);",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(w, h)",
          "old_line_content": "        }",
          "new_line_content": "            const float d = 0.5f * hypotf(w, h);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": null,
          "new_api": "tanf",
          "old_text": null,
          "new_text": "tanf(d_fov * M_PI / 720.f)",
          "old_line_content": "        break;",
          "new_line_content": "            const float l = d / (tanf(d_fov * M_PI / 720.f));",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(w * 0.5f, l)",
          "old_line_content": "        {",
          "new_line_content": "            *h_fov = 2.f * atan2f(w * 0.5f, l) * 360.f / M_PI;",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": null,
          "new_api": "cosf",
          "old_text": null,
          "new_text": "cosf(theta)",
          "old_line_content": "",
          "new_line_content": "    const float cos_theta = cosf(theta);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "fov_from_dfov",
          "old_text": null,
          "new_text": "fov_from_dfov(s->out, s->d_fov, w, h, &s->h_fov, &s->v_fov)",
          "old_line_content": "            return err;",
          "new_line_content": "        fov_from_dfov(s->out, s->d_fov, w, h, &s->h_fov, &s->v_fov);",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(w, h)",
          "old_line_content": "        break;",
          "new_line_content": "            const float d = 0.5f * hypotf(w, h);",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": null,
          "new_api": "normalize_vector",
          "old_text": null,
          "new_text": "normalize_vector(vec)",
          "old_line_content": "/**",
          "new_line_content": "    normalize_vector(vec);",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": null,
          "new_api": "set_dimensions",
          "old_text": null,
          "new_text": "set_dimensions(s->pr_width, s->pr_height, w, h, desc)",
          "old_line_content": "        break;",
          "new_line_content": "    set_dimensions(s->pr_width, s->pr_height, w, h, desc);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(d_fov, 359.f)",
          "old_line_content": "",
          "new_line_content": "            const float da = tanf(0.5f * FFMIN(d_fov, 359.f) * M_PI / 180.f);",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": null,
          "new_api": "hypotf",
          "old_text": null,
          "new_text": "hypotf(w, h)",
          "old_line_content": "            if (*h_fov < 0.f)",
          "new_line_content": "            const float d = hypotf(w, h);",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(da * w, d)",
          "old_line_content": "            if (*v_fov < 0.f)",
          "new_line_content": "            *h_fov = atan2f(da * w, d) * 360.f / M_PI;",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(da * h, d)",
          "old_line_content": "                *v_fov += 360.f;",
          "new_line_content": "            *v_fov = atan2f(da * h, d) * 360.f / M_PI;",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "atan2f",
          "old_text": null,
          "new_text": "atan2f(vec[0], vec[2])",
          "old_line_content": "    int u_shift, v_shift;",
          "new_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0];",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": null,
          "new_api": "asinf",
          "old_text": null,
          "new_text": "asinf(vec[1])",
          "old_line_content": "    float uf, vf;",
          "new_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4096,
          "old_api": "set_dimensions",
          "new_api": null,
          "old_text": "set_dimensions(s->out_offset_w, s->out_offset_h, out_offset_w, out_offset_h, desc)",
          "new_text": null,
          "old_line_content": "    set_dimensions(s->out_offset_w, s->out_offset_h, out_offset_w, out_offset_h, desc);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": "set_dimensions",
          "new_api": null,
          "old_text": "set_dimensions(s->planewidth, s->planeheight, w, h, desc)",
          "new_text": null,
          "old_line_content": "    set_dimensions(s->planewidth, s->planeheight, w, h, desc);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": "FF_CEIL_RSHIFT",
          "new_api": null,
          "old_text": "FF_CEIL_RSHIFT(w, desc->log2_chroma_w)",
          "new_text": null,
          "old_line_content": "    outw[1] = outw[2] = FF_CEIL_RSHIFT(w, desc->log2_chroma_w);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "FFALIGN",
          "new_api": null,
          "old_text": "FFALIGN(s->pr_width[i], 8)",
          "new_text": null,
          "old_line_content": "        s->uv_linesize[i] = FFALIGN(s->pr_width[i], 8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "FF_CEIL_RSHIFT",
          "new_api": null,
          "old_text": "FF_CEIL_RSHIFT(h, desc->log2_chroma_h)",
          "new_text": null,
          "old_line_content": "    outh[1] = outh[2] = FF_CEIL_RSHIFT(h, desc->log2_chroma_h);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(vec[0], vec[1])",
          "new_text": null,
          "old_line_content": "    const float h   = hypotf(vec[0], vec[1]);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(h, vec[2])",
          "new_text": null,
          "old_line_content": "    const float phi = atan2f(h, vec[2]) / M_PI;",
          "new_line_content": "                          const float *vec, int width, int height,",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "allocate_plane",
          "new_api": null,
          "old_text": "allocate_plane(s, sizeof_uv, sizeof_ker, sizeof_mask * have_alpha * s->alpha, i)",
          "new_text": null,
          "old_line_content": "        allocate_plane(s, sizeof_uv, sizeof_ker, sizeof_mask * have_alpha * s->alpha, i);",
          "new_line_content": "        s->map[0] = s->map[3] = 0;",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": "calculate_rotation_matrix",
          "new_api": null,
          "old_text": "calculate_rotation_matrix(s->yaw, s->pitch, s->roll, s->rot_mat, s->rotation_order)",
          "new_text": null,
          "old_line_content": "    calculate_rotation_matrix(s->yaw, s->pitch, s->roll, s->rot_mat, s->rotation_order);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "set_mirror_modifier",
          "new_api": null,
          "old_text": "set_mirror_modifier(s->h_flip, s->v_flip, s->d_flip, s->output_mirror_modifier)",
          "new_text": null,
          "old_line_content": "    set_mirror_modifier(s->h_flip, s->v_flip, s->d_flip, s->output_mirror_modifier);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "    int ui, vi;",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "        uf = 0.5f * ew * (uf * scale + 1.f);",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ui + j - 1, 0, width  - 1)",
          "new_text": null,
          "old_line_content": "            us[i][j] = visible ? av_clip(ui + j - 1, 0, width  - 1) : 0;",
          "new_line_content": "    *du = visible ? uf - ui : 0.f;",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(vi + i - 1, 0, height - 1)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = visible ? av_clip(vi + i - 1, 0, height - 1) : 0;",
          "new_line_content": "    *dv = visible ? vf - vi : 0.f;",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "out_transform",
          "new_api": null,
          "old_text": "s->out_transform(s, j, i, height, width, vec)",
          "new_text": null,
          "old_line_content": "                    out_mask = s->out_transform(s, j, i, height, width, vec);",
          "new_line_content": "                uint8_t *mask8 = p ? NULL : s->mask + (j * s->pr_width[0] + i);",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": "ff_get_video_buffer",
          "new_api": null,
          "old_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "new_text": null,
          "old_line_content": "    out = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "new_line_content": "    AVFilterLink *outlink = ctx->outputs[0];",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ui + j - 1, 0, ew - 1)",
          "new_text": null,
          "old_line_content": "            us[i][j] = u_shift + av_clip(ui + j - 1, 0, ew - 1);",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&in)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&in);",
          "new_line_content": "    AVFrame *out;",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    ThreadData td;",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(vi + i - 1, 0, eh - 1)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = v_shift + av_clip(vi + i - 1, 0, eh - 1);",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": "out_transform",
          "new_api": null,
          "old_text": "s->out_transform(s, i, j, width, height, vec)",
          "new_text": null,
          "old_line_content": "                    out_mask = s->out_transform(s, i, j, width, height, vec);",
          "new_line_content": "                int in_mask, out_mask;",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(vec[2])",
          "new_text": null,
          "old_line_content": "                av_assert1(!isnan(vec[0]) && !isnan(vec[1]) && !isnan(vec[2]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": "rotate",
          "new_api": null,
          "old_text": "rotate(s->rot_mat, vec)",
          "new_text": null,
          "old_line_content": "                rotate(s->rot_mat, vec);",
          "new_line_content": "                if (s->out_transpose)",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "                normalize_vector(vec);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "calculate_kernel",
          "new_api": null,
          "old_text": "s->calculate_kernel(du, dv, &rmap, u, v, ker)",
          "new_text": null,
          "old_line_content": "                s->calculate_kernel(du, dv, &rmap, u, v, ker);",
          "new_line_content": "                if (s->in_transpose)",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&in)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&in);",
          "new_line_content": "    td.in = in;",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, out)",
          "new_text": null,
          "old_line_content": "    return ff_filter_frame(outlink, out);",
          "new_line_content": "    td.out = out;",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": "ff_filter_process_command",
          "new_api": null,
          "old_text": "ff_filter_process_command(ctx, cmd, args, res, res_len, flags)",
          "new_text": null,
          "old_line_content": "    ret = ff_filter_process_command(ctx, cmd, args, res, res_len, flags);",
          "new_line_content": "static int process_command(AVFilterContext *ctx, const char *cmd, const char *args,",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "config_output",
          "new_api": null,
          "old_text": "config_output(ctx->outputs[0])",
          "new_text": null,
          "old_line_content": "    return config_output(ctx->outputs[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": "sqrtf",
          "new_api": null,
          "old_text": "sqrtf(dscr)",
          "new_text": null,
          "old_line_content": "    const float clon = (-k * d + sqrtf(dscr)) / (k + 1.f);",
          "new_line_content": "    const float vf = ((2.f * j + 1.f) / height - 1.f);",
          "content_same": false
        },
        {
          "line": 2627,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(uf, S * clon)",
          "new_text": null,
          "old_line_content": "    const float lon = atan2f(uf, S * clon);",
          "new_line_content": "    const float d = s->h_fov;",
          "content_same": false
        },
        {
          "line": 2628,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(vf, S)",
          "new_text": null,
          "old_line_content": "    const float lat = atan2f(vf, S);",
          "new_line_content": "    const float k = uf * uf / ((d + 1.f) * (d + 1.f));",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(vec[0], vec[2])",
          "new_text": null,
          "old_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0];",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": "asinf",
          "new_api": null,
          "old_text": "asinf(vec[1])",
          "new_text": null,
          "old_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "new_line_content": "static int xyz_to_barrelsplit(const V360Context *s,",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(lat)",
          "new_text": null,
          "old_line_content": "    vec[1] = sinf(lat);",
          "new_line_content": "    const float S = (d + 1.f) / (d + clon);",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(inlink->format)",
          "new_text": null,
          "old_line_content": "    const AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(inlink->format);",
          "new_line_content": "static int config_output(AVFilterLink *outlink)",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->u[p])",
          "new_text": null,
          "old_line_content": "        av_freep(&s->u[p]);",
          "new_line_content": "static av_cold void uninit(AVFilterContext *ctx)",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->v[p])",
          "new_text": null,
          "old_line_content": "        av_freep(&s->v[p]);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->ker[p])",
          "new_text": null,
          "old_line_content": "        av_freep(&s->ker[p]);",
          "new_line_content": "    V360Context *s = ctx->priv;",
          "content_same": false
        },
        {
          "line": 2634,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->mask)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->mask);",
          "new_line_content": "    for (int p = 0; p < s->nb_allocated; p++) {",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "int (*prepare_out)(AVFilterContext *ctx)",
          "new_api": null,
          "old_text": "int (*prepare_out)(AVFilterContext *ctx)",
          "new_text": null,
          "old_line_content": "    int (*prepare_out)(AVFilterContext *ctx);",
          "new_line_content": "    int err;",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": "fmodf",
          "new_api": null,
          "old_text": "fmodf(phi, M_PI_2)",
          "new_text": null,
          "old_line_content": "        uf = fmodf(phi, M_PI_2) / M_PI_2;",
          "new_line_content": "        eh = height / 2;",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": "fmodf",
          "new_api": null,
          "old_text": "fmodf(uf + 1.f, 1.f)",
          "new_text": null,
          "old_line_content": "            uf = uf >= 0.f ? fmodf(uf - 1.f, 1.f) : fmodf(uf + 1.f, 1.f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(0.5f * s->v_fov * M_PI / 180.f)",
          "new_text": null,
          "old_line_content": "    s->flat_range[1] = tanf(0.5f * s->v_fov * M_PI / 180.f);",
          "new_line_content": "static int prepare_cylindrical_out(AVFilterContext *ctx)",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"Convert 360 projection of video.\")",
          "new_text": null,
          "old_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Convert 360 projection of video.\"),",
          "new_line_content": "    { NULL }",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "atanf",
          "new_api": null,
          "old_text": "atanf(vf)",
          "new_text": null,
          "old_line_content": "    const float theta = atanf(vf);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(phi)",
          "new_text": null,
          "old_line_content": "    const float sin_phi   = sinf(phi);",
          "new_line_content": "    const float vf = s->flat_range[1] * ((2.f * j + 1.f) / height - 1.f);",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(phi)",
          "new_text": null,
          "old_line_content": "    const float cos_phi   = cosf(phi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(theta)",
          "new_text": null,
          "old_line_content": "    const float sin_theta = sinf(theta);",
          "new_line_content": "    const float phi   = uf;",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "        uf = 0.5f * width / 3.f * (uf * scalew + 1.f);",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(0)",
          "new_text": null,
          "old_line_content": "        av_assert0(0);",
          "new_line_content": "        s->elements = 4 * 4;",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "ff_v360_init",
          "new_api": null,
          "old_text": "ff_v360_init(s, depth)",
          "new_text": null,
          "old_line_content": "    ff_v360_init(s, depth);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ui + j - 1, 0, ew - 1)",
          "new_text": null,
          "old_line_content": "            us[i][j] = u_shift + av_clip(ui + j - 1, 0, ew - 1);",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(vi + i - 1, 0, eh - 1)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = v_shift + av_clip(vi + i - 1, 0, eh - 1);",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(0.5f * s->iv_fov * M_PI / 180.f)",
          "new_text": null,
          "old_line_content": "    s->iflat_range[1] = tanf(0.5f * s->iv_fov * M_PI / 180.f);",
          "new_line_content": "static int prepare_cylindrical_in(AVFilterContext *ctx)",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_WARNING,\n                   \"Incomplete rorder option. Direction for all 3 rotation orders should be specified. Switching to default rorder.\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_WARNING,",
          "new_line_content": "    for (int order = 0; order < NB_RORDERS; order++) {",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": "get_rorder",
          "new_api": null,
          "old_text": "get_rorder(c)",
          "new_text": null,
          "old_line_content": "        rorder = get_rorder(c);",
          "new_line_content": "            s->rotation_order[1] = PITCH;",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_WARNING,\n                   \"Incorrect rotation order symbol '%c' in rorder option. Switching to default rorder.\\n\", c)",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_WARNING,",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(vec[0], vec[2])",
          "new_text": null,
          "old_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0] / s->iflat_range[0];",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "asinf",
          "new_api": null,
          "old_text": "asinf(vec[1])",
          "new_text": null,
          "old_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "new_line_content": "static int xyz_to_cylindrical(const V360Context *s,",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(theta)",
          "new_text": null,
          "old_line_content": "    const float vf = (tanf(theta) / s->iflat_range[1] + 1.f) * height / 2.f;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    const int vi = floorf(vf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(y * 2.f)",
          "new_text": null,
          "old_line_content": "        const float back = floorf(y * 2.f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(phi)",
          "new_text": null,
          "old_line_content": "        const float cos_phi   = cosf(phi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(theta)",
          "new_text": null,
          "old_line_content": "        const float sin_theta = sinf(theta);",
          "new_line_content": "        const float phi   = ((3.f / 2.f * x - 0.5f) / scalew - back) * M_PI;",
          "content_same": false
        },
        {
          "line": 3250,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(theta)",
          "new_text": null,
          "old_line_content": "        const float cos_theta = cosf(theta);",
          "new_line_content": "        const float theta = (y - 0.25f - 0.5f * back) / scaleh * M_PI;",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ui + j - 1, 0, width  - 1)",
          "new_text": null,
          "old_line_content": "            us[i][j] = visible ? av_clip(ui + j - 1, 0, width  - 1) : 0;",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(vi + i - 1, 0, height - 1)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = visible ? av_clip(vi + i - 1, 0, height - 1) : 0;",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(0)",
          "new_text": null,
          "old_line_content": "        av_assert0(0);",
          "new_line_content": "        h = inlink->h / 2;",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "set_dimensions",
          "new_api": null,
          "old_text": "set_dimensions(s->inplanewidth, s->inplaneheight, w, h, desc)",
          "new_text": null,
          "old_line_content": "    set_dimensions(s->inplanewidth, s->inplaneheight, w, h, desc);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "set_dimensions",
          "new_api": null,
          "old_text": "set_dimensions(s->in_offset_w, s->in_offset_h, in_offset_w, in_offset_h, desc)",
          "new_text": null,
          "old_line_content": "    set_dimensions(s->in_offset_w, s->in_offset_h, in_offset_w, in_offset_h, desc);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(y * 4.f)",
          "new_text": null,
          "old_line_content": "        const int face = floorf(y * 4.f);",
          "new_line_content": "        l_z = cos_theta * cos_phi;",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "fov_from_dfov",
          "new_api": null,
          "old_text": "fov_from_dfov(s->in, s->id_fov, w, h, &s->ih_fov, &s->iv_fov)",
          "new_text": null,
          "old_line_content": "        fov_from_dfov(s->in, s->id_fov, w, h, &s->ih_fov, &s->iv_fov);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(int, s->in_width, s->in_height)",
          "new_text": null,
          "old_line_content": "        FFSWAP(int, s->in_width, s->in_height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(uf, vf)",
          "new_text": null,
          "old_line_content": "    const float rh = hypotf(uf, vf);",
          "new_line_content": "                              int i, int j, int width, int height,",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "prepare_cube_in",
          "new_api": null,
          "old_text": "prepare_cube_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_cube_in(ctx);",
          "new_line_content": "        wf = w;",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": "sqrtf",
          "new_api": null,
          "old_text": "sqrtf(sinzz)",
          "new_text": null,
          "old_line_content": "    const float sinz = (h - sqrtf(sinzz)) / (h / rh + rh / h);",
          "new_line_content": "    const float uf = ((2.f * i + 1.f) / width  - 1.f);",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "sqrtf",
          "new_api": null,
          "old_text": "sqrtf(1.f - sinz2)",
          "new_text": null,
          "old_line_content": "        const float cosz = sqrtf(1.f - sinz2);",
          "new_line_content": "    const float h = 1.f + s->v_fov;",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": "prepare_cube_in",
          "new_api": null,
          "old_text": "prepare_cube_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_cube_in(ctx);",
          "new_line_content": "        wf = w / 3.f * 4.f;",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "asinf",
          "new_api": null,
          "old_text": "asinf(cosz)",
          "new_text": null,
          "old_line_content": "        const float theta = asinf(cosz);",
          "new_line_content": "    const float sinz2 = sinz * sinz;",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(uf, vf)",
          "new_text": null,
          "old_line_content": "        const float phi   = atan2f(uf, vf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(phi)",
          "new_text": null,
          "old_line_content": "        const float cos_phi   = cosf(phi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "prepare_cube_in",
          "new_api": null,
          "old_text": "prepare_cube_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_cube_in(ctx);",
          "new_line_content": "        wf = w * 4.f;",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": "prepare_eac_in",
          "new_api": null,
          "old_text": "prepare_eac_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_eac_in(ctx);",
          "new_line_content": "        wf = w / 3.f * 2.f;",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "prepare_flat_in",
          "new_api": null,
          "old_text": "prepare_flat_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_flat_in(ctx);",
          "new_line_content": "        wf = w;",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "        vec[1] = 1.f;",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Supplied format is not accepted as input.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Supplied format is not accepted as input.\\n\");",
          "new_line_content": "        wf = w;",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "        hf = h;",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "prepare_stereographic_in",
          "new_api": null,
          "old_text": "prepare_stereographic_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_stereographic_in(ctx);",
          "new_line_content": "        wf = w / 5.f * 4.f;",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": "fabsf",
          "new_api": null,
          "old_text": "fabsf(1.f - uf * 2.f + vf)",
          "new_text": null,
          "old_line_content": "    vec[2] = 2.f * fabsf(1.f - fabsf(1.f - uf * 2.f + vf)) - 1.f;",
          "new_line_content": "    const float uf = (float)i / width;",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "FFMAX3",
          "new_api": null,
          "old_text": "FFMAX3(d1, d2, d3)",
          "new_text": null,
          "old_line_content": "    const float d = FFMAX(d0, FFMAX3(d1, d2, d3));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": "prepare_fisheye_in",
          "new_api": null,
          "old_text": "prepare_fisheye_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_fisheye_in(ctx);",
          "new_line_content": "        wf = w;",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "prepare_cylindrical_in",
          "new_api": null,
          "old_text": "prepare_cylindrical_in(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_cylindrical_in(ctx);",
          "new_line_content": "        wf = w * 2;",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "        vec[0] =  2.f * (0.5f - x + 0.5f * y) / (y - 0.5f) - 1.f;",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": "reflectx",
          "new_api": null,
          "old_text": "reflectx(ui + j - 1, vi + i - 1, width, height)",
          "new_text": null,
          "old_line_content": "            us[i][j] = reflectx(ui + j - 1, vi + i - 1, width, height);",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": "reflecty",
          "new_api": null,
          "old_text": "reflecty(vi + i - 1, height)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = reflecty(vi + i - 1, height);",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": "xyz_to_cube",
          "new_api": null,
          "old_text": "xyz_to_cube(s, vec, &uf, &vf, &face)",
          "new_text": null,
          "old_line_content": "    xyz_to_cube(s, vec, &uf, &vf, &face);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Specified input format is not handled.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Specified input format is not handled.\\n\");",
          "new_line_content": "        err = 0;",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(wf)",
          "new_text": null,
          "old_line_content": "        w = lrintf(wf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "    switch (s->out) {",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf * 3.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf * 3.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(uf, vf)",
          "new_text": null,
          "old_line_content": "    const float h     = hypotf(uf, vf);",
          "new_line_content": "    const float m = i >= ew ? 1.f : -1.f;",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(theta)",
          "new_text": null,
          "old_line_content": "    const float sin_theta = sinf(theta);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf / 2.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf / 2.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf / 8.f * 9.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf / 8.f * 9.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "reflectx",
          "new_api": null,
          "old_text": "reflectx(ui + j - 1, vi + i - 1, width, height)",
          "new_text": null,
          "old_line_content": "            us[i][j] = reflectx(ui + j - 1, vi + i - 1, width, height);",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": "reflecty",
          "new_api": null,
          "old_text": "reflecty(vi + i - 1, height)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = reflecty(vi + i - 1, height);",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf * 2.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf * 2.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(vec[0], vec[1])",
          "new_text": null,
          "old_line_content": "    const float h     = hypotf(vec[0], vec[1]);",
          "new_line_content": "    const float scale = 1.f - s->in_pad;",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": "fabsf",
          "new_api": null,
          "old_text": "fabsf(vec[2])",
          "new_text": null,
          "old_line_content": "    const float theta = acosf(fabsf(vec[2])) / M_PI;",
          "new_line_content": "    const float ew = width / 2.f;",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf * 2.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf * 2.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf * 2.f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf * 2.f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(yaw_rad)",
          "new_text": null,
          "old_line_content": "    const float sin_yaw   = sinf(yaw_rad);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "ceilf",
          "new_api": null,
          "old_text": "ceilf(ew)",
          "new_text": null,
          "old_line_content": "        u_shift = ceilf(ew);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(yaw_rad)",
          "new_text": null,
          "old_line_content": "    const float cos_yaw   = cosf(yaw_rad);",
          "new_line_content": "    const float yaw_rad   = yaw   * M_PI / 180.f;",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(pitch_rad)",
          "new_text": null,
          "old_line_content": "    const float sin_pitch = sinf(pitch_rad);",
          "new_line_content": "    const float pitch_rad = pitch * M_PI / 180.f;",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(pitch_rad)",
          "new_text": null,
          "old_line_content": "    const float cos_pitch = cosf(pitch_rad);",
          "new_line_content": "    const float roll_rad  = roll  * M_PI / 180.f;",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(roll_rad)",
          "new_text": null,
          "old_line_content": "    const float sin_roll  = sinf(roll_rad);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(uf)",
          "new_text": null,
          "old_line_content": "    ui = floorf(uf);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "floorf",
          "new_api": null,
          "old_text": "floorf(vf)",
          "new_text": null,
          "old_line_content": "    vi = floorf(vf);",
          "new_line_content": "        u_shift = 0;",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(u_shift + ui + j - 1, 0, width  - 1)",
          "new_text": null,
          "old_line_content": "            us[i][j] = av_clip(u_shift + ui + j - 1, 0, width  - 1);",
          "new_line_content": "    *du = uf - ui;",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(          vi + i - 1, 0, height - 1)",
          "new_text": null,
          "old_line_content": "            vs[i][j] = av_clip(          vi + i - 1, 0, height - 1);",
          "new_line_content": "    *dv = vf - vi;",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "multiply_matrix",
          "new_api": null,
          "old_text": "multiply_matrix(temp, m[rotation_order[0]], m[rotation_order[1]])",
          "new_text": null,
          "old_line_content": "    multiply_matrix(temp, m[rotation_order[0]], m[rotation_order[1]]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": "multiply_matrix",
          "new_api": null,
          "old_text": "multiply_matrix(rot_mat, temp, m[rotation_order[2]])",
          "new_text": null,
          "old_line_content": "    multiply_matrix(rot_mat, temp, m[rotation_order[2]]);",
          "new_line_content": "    m[2][0][0] = cos_roll;  m[2][0][1] = -sin_roll;  m[2][0][2] =  0;",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf * 0.5f)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf * 0.5f);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(phi)",
          "new_text": null,
          "old_line_content": "        const float sin_phi   = sinf(phi);",
          "new_line_content": "        const int eh = height;",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(phi)",
          "new_text": null,
          "old_line_content": "        const float cos_phi   = cosf(phi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "sinf",
          "new_api": null,
          "old_text": "sinf(theta)",
          "new_text": null,
          "old_line_content": "        const float sin_theta = sinf(theta);",
          "new_line_content": "        const float phi   = ((2.f * i) / ew - 1.f) * M_PI        / scale;",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "cosf",
          "new_api": null,
          "old_text": "cosf(theta)",
          "new_text": null,
          "old_line_content": "        const float cos_theta = cosf(theta);",
          "new_line_content": "        const float theta = ((2.f * j) / eh - 1.f) * theta_range / scale;",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(hf)",
          "new_text": null,
          "old_line_content": "        h = lrintf(hf);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "av_calloc",
          "new_api": null,
          "old_text": "av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv)",
          "new_text": null,
          "old_line_content": "        s->u[p] = av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Specified output format is not handled.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Specified output format is not handled.\\n\");",
          "new_line_content": "        prepare_out = NULL;",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": "av_calloc",
          "new_api": null,
          "old_text": "av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv)",
          "new_text": null,
          "old_line_content": "        s->v[p] = av_calloc(s->uv_linesize[p] * s->pr_height[p], sizeof_uv);",
          "new_line_content": "static int allocate_plane(V360Context *s, int sizeof_uv, int sizeof_ker, int sizeof_mask, int p)",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    if (!s->u[p])",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(s->v_fov * M_PI / 360.f)",
          "new_text": null,
          "old_line_content": "        h = w / tanf(s->h_fov * M_PI / 360.f) * tanf(s->v_fov * M_PI / 360.f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(s->h_fov * M_PI / 360.f)",
          "new_text": null,
          "old_line_content": "        w = h / tanf(s->v_fov * M_PI / 360.f) * tanf(s->h_fov * M_PI / 360.f);",
          "new_line_content": "        w = s->width;",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    } else if (s->width > 0 && s->height > 0) {",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(int, w, h)",
          "new_text": null,
          "old_line_content": "            FFSWAP(int, w, h);",
          "new_line_content": "    } else if (s->width > 0 || s->height > 0) {",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": "FFSWAP",
          "new_api": null,
          "old_text": "FFSWAP(int, w, h)",
          "new_text": null,
          "old_line_content": "            FFSWAP(int, w, h);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(w, h)",
          "new_text": null,
          "old_line_content": "            const float d = 0.5f * hypotf(w, h);",
          "new_line_content": "static void fov_from_dfov(int format, float d_fov, float w, float h, float *h_fov, float *v_fov)",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "tanf",
          "new_api": null,
          "old_text": "tanf(d_fov * M_PI / 720.f)",
          "new_text": null,
          "old_line_content": "            const float l = d / (tanf(d_fov * M_PI / 720.f));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(w * 0.5f, l)",
          "new_text": null,
          "old_line_content": "            *h_fov = 2.f * atan2f(w * 0.5f, l) * 360.f / M_PI;",
          "new_line_content": "    case STEREOGRAPHIC:",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(h * 0.5f, l)",
          "new_text": null,
          "old_line_content": "            *v_fov = 2.f * atan2f(h * 0.5f, l) * 360.f / M_PI;",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": "fov_from_dfov",
          "new_api": null,
          "old_text": "fov_from_dfov(s->out, s->d_fov, w, h, &s->h_fov, &s->v_fov)",
          "new_text": null,
          "old_line_content": "        fov_from_dfov(s->out, s->d_fov, w, h, &s->h_fov, &s->v_fov);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "prepare_out",
          "new_api": null,
          "old_text": "prepare_out(ctx)",
          "new_text": null,
          "old_line_content": "        err = prepare_out(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "normalize_vector",
          "new_api": null,
          "old_text": "normalize_vector(vec)",
          "new_text": null,
          "old_line_content": "    normalize_vector(vec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(d_fov, 359.f)",
          "new_text": null,
          "old_line_content": "            const float da = tanf(0.5f * FFMIN(d_fov, 359.f) * M_PI / 180.f);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "hypotf",
          "new_api": null,
          "old_text": "hypotf(w, h)",
          "new_text": null,
          "old_line_content": "            const float d = hypotf(w, h);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(da * w, d)",
          "new_text": null,
          "old_line_content": "            *h_fov = atan2f(da * w, d) * 360.f / M_PI;",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(da * h, d)",
          "new_text": null,
          "old_line_content": "            *v_fov = atan2f(da * h, d) * 360.f / M_PI;",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "atan2f",
          "new_api": null,
          "old_text": "atan2f(vec[0], vec[2])",
          "new_text": null,
          "old_line_content": "    const float phi   = atan2f(vec[0], vec[2]) * s->input_mirror_modifier[0];",
          "new_line_content": "                         const float *vec, int width, int height,",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": "asinf",
          "new_api": null,
          "old_text": "asinf(vec[1])",
          "new_text": null,
          "old_line_content": "    const float theta = asinf(vec[1]) * s->input_mirror_modifier[1];",
          "new_line_content": "                         int16_t us[4][4], int16_t vs[4][4], float *du, float *dv)",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(0)",
          "new_text": null,
          "old_line_content": "        av_assert0(0);",
          "new_line_content": "        out_offset_w = 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 26,
      "total_additions": 180,
      "total_deletions": 179,
      "total_api_changes": 385
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 385,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          2536,
          2539,
          2540,
          2541
        ]
      }
    },
    "api_calls_before": 540,
    "api_calls_after": 539,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 3,
      "total_diff_lines": 23
    }
  }
}
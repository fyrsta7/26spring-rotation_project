{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/90f03441654f85a1402a65c3dcaa3f634a24c27e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/90f03441654f85a1402a65c3dcaa3f634a24c27e/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/90f03441654f85a1402a65c3dcaa3f634a24c27e/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/90f03441654f85a1402a65c3dcaa3f634a24c27e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 785,
          "old_api": "av_evaluate_lls",
          "new_api": "fabs",
          "old_text": "av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1)",
          "new_text": "fabs(eval - var[0])",
          "old_line_content": "                    eval= av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1);",
          "new_line_content": "                    eval= (512>>pass) + fabs(eval - var[0]);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "assert",
          "new_api": "memcpy",
          "old_text": "assert(n > 0)",
          "new_text": "memcpy(res, smp, n * sizeof(int32_t))",
          "old_line_content": "    assert(n > 0);",
          "new_line_content": "    memcpy(res, smp, n * sizeof(int32_t));",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "encode_residual_fixed",
          "new_api": "calc_rice_params_fixed",
          "old_text": "encode_residual_fixed(res, smp, n, i)",
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "old_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "new_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "encode_residual_fixed",
          "new_api": "calc_rice_params_fixed",
          "old_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "old_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "new_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "encode_residual_lpc",
          "new_api": "calc_rice_params_lpc",
          "old_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "old_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "encode_residual_lpc",
          "new_api": "calc_rice_params_lpc",
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "old_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "encode_residual_lpc",
          "new_api": "calc_rice_params_lpc",
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "old_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "encode_residual_lpc",
          "new_api": "calc_rice_params_lpc",
          "old_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "old_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "new_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "find_optimal_param",
          "new_api": "rice_encode_count",
          "old_text": "find_optimal_param(2*sum[i], n)",
          "new_text": "rice_encode_count(2*sum[i], n, k)",
          "old_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "new_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "put_bits",
          "new_api": "write_utf8",
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": "write_utf8(&s->pb, s->frame_count)",
          "old_line_content": "    put_bits(&s->pb, 1, 0);",
          "new_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "flush_put_bits",
          "new_api": "put_bits_count",
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    crc = av_crc(av_crc07, 0, s->pb.buf, put_bits_count(&s->pb)>>3);",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "put_bits_count",
          "new_api": "put_bits",
          "old_text": "put_bits_count(&s->pb)",
          "new_text": "put_bits(&s->pb, 8, crc)",
          "old_line_content": "    crc = av_crc(av_crc07, 0, s->pb.buf, put_bits_count(&s->pb)>>3);",
          "new_line_content": "    put_bits(&s->pb, 8, crc);",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "put_bits",
          "new_api": "put_sbits",
          "old_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "new_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "old_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "new_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "flush_put_bits",
          "new_api": "put_bits_count",
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    crc = bswap_16(av_crc(av_crc8005, 0, s->pb.buf, put_bits_count(&s->pb)>>3));",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "put_bits_count",
          "new_api": "put_bits",
          "old_text": "put_bits_count(&s->pb)",
          "new_text": "put_bits(&s->pb, 16, crc)",
          "old_line_content": "    crc = bswap_16(av_crc(av_crc8005, 0, s->pb.buf, put_bits_count(&s->pb)>>3));",
          "new_line_content": "    put_bits(&s->pb, 16, crc);",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "put_bits",
          "new_api": "flush_put_bits",
          "old_text": "put_bits(&s->pb, 16, crc)",
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    put_bits(&s->pb, 16, crc);",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "init_put_bits",
          "new_api": "output_frame_header",
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": "output_frame_header(s)",
          "old_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "    output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "output_frame_header",
          "new_api": "output_subframes",
          "old_text": "output_frame_header(s)",
          "new_text": "output_subframes(s)",
          "old_line_content": "    output_frame_header(s);",
          "new_line_content": "    output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "output_subframes",
          "new_api": "output_frame_footer",
          "old_text": "output_subframes(s)",
          "new_text": "output_frame_footer(s)",
          "old_line_content": "    output_subframes(s);",
          "new_line_content": "    output_frame_footer(s);",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "output_frame_footer",
          "new_api": "put_bits_count",
          "old_text": "output_frame_footer(s)",
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "    output_frame_footer(s);",
          "new_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "init_put_bits",
          "new_api": "output_frame_header",
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": "output_frame_header(s)",
          "old_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "        output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "output_frame_header",
          "new_api": "output_subframes",
          "old_text": "output_frame_header(s)",
          "new_text": "output_subframes(s)",
          "old_line_content": "        output_frame_header(s);",
          "new_line_content": "        output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "output_subframes",
          "new_api": "output_frame_footer",
          "old_text": "output_subframes(s)",
          "new_text": "output_frame_footer(s)",
          "old_line_content": "        output_subframes(s);",
          "new_line_content": "        output_frame_footer(s);",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "output_frame_footer",
          "new_api": "put_bits_count",
          "old_text": "output_frame_footer(s)",
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "        output_frame_footer(s);",
          "new_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1031,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, i)",
          "old_line_content": "        for(i=min_order; i<=max_order; i++) {",
          "new_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pmin >= 0 && pmin <= MAX_PARTITION_ORDER)",
          "old_line_content": "",
          "new_line_content": "    assert(pmin >= 0 && pmin <= MAX_PARTITION_ORDER);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "old_line_content": "        if(sub->order != max_order) {",
          "new_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc(n * sizeof(uint32_t))",
          "old_line_content": "",
          "new_line_content": "    udata = av_malloc(n * sizeof(uint32_t));",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "lpc_calc_coefs",
          "old_text": null,
          "new_text": "lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "old_line_content": "    /* LPC */",
          "new_line_content": "    opt_order = lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "calc_sums",
          "old_text": null,
          "new_text": "calc_sums(pmin, pmax, udata, n, pred_order, sums)",
          "old_line_content": "",
          "new_line_content": "    calc_sums(pmin, pmax, udata, n, pred_order, sums);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "calc_optimal_rice_params",
          "old_text": null,
          "new_text": "calc_optimal_rice_params(&tmp_rc, i, sums[i], n, pred_order)",
          "old_line_content": "    for(i=pmin; i<=pmax; i++) {",
          "new_line_content": "        bits[i] = calc_optimal_rice_params(&tmp_rc, i, sums[i], n, pred_order);",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&udata)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&udata);",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "old_line_content": "            if(order < 0) order = 0;",
          "new_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(n^(n-1))",
          "old_line_content": "{",
          "new_line_content": "    int porder = FFMIN(max_porder, av_log2(n^(n-1)));",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(n/order)",
          "old_line_content": "    if(order > 0)",
          "new_line_content": "        porder = FFMIN(porder, av_log2(n/order));",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "        for(i=min_order-1; i<max_order; i++) {",
          "new_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "get_max_p_order",
          "old_text": null,
          "new_text": "get_max_p_order(pmin, n, pred_order)",
          "old_line_content": "    uint32_t bits;",
          "new_line_content": "    pmin = get_max_p_order(pmin, n, pred_order);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "calc_rice_params",
          "old_text": null,
          "new_text": "calc_rice_params(rc, pmin, pmax, data, n, pred_order)",
          "old_line_content": "    bits = pred_order*bps + 6;",
          "new_line_content": "    bits += calc_rice_params(rc, pmin, pmax, data, n, pred_order);",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "get_max_p_order",
          "old_text": null,
          "new_text": "get_max_p_order(pmin, n, pred_order)",
          "old_line_content": "    uint32_t bits;",
          "new_line_content": "    pmin = get_max_p_order(pmin, n, pred_order);",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bits, -1, sizeof(bits))",
          "old_line_content": "        opt_order= min_order - 1 + (max_order-min_order)/3;",
          "new_line_content": "        memset(bits, -1, sizeof(bits));",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "calc_rice_params",
          "old_text": null,
          "new_text": "calc_rice_params(rc, pmin, pmax, data, n, pred_order)",
          "old_line_content": "    bits = pred_order*bps + 4 + 5 + pred_order*precision + 6;",
          "new_line_content": "    bits += calc_rice_params(rc, pmin, pmax, data, n, pred_order);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "                    continue;",
          "new_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "old_line_content": "    }",
          "new_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "apply_welch_window",
          "old_text": null,
          "new_text": "apply_welch_window(data, len, data1)",
          "old_line_content": "",
          "new_line_content": "    apply_welch_window(data, len, data1);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "    sub->type = sub->type_code = FLAC_SUBFRAME_VERBATIM;",
          "new_line_content": "    encode_residual_verbatim(res, smp, n);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS((lt + rt) >> 1)",
          "old_line_content": "        rt = right_ch[i] - 2*right_ch[i-1] + right_ch[i-2];",
          "new_line_content": "        sum[2] += FFABS((lt + rt) >> 1);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "find_optimal_param",
          "old_text": null,
          "new_text": "find_optimal_param(2*sum[i], n)",
          "old_line_content": "    for(i=0; i<4; i++) {",
          "new_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(r)",
          "old_line_content": "      r /= err;",
          "new_line_content": "      ref[i] = fabs(r);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(lpc_in[i])",
          "old_line_content": "    for(i=0; i<order; i++) {",
          "new_line_content": "        cmax= FFMAX(cmax, fabs(lpc_in[i]));",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "estimate_stereo_mode",
          "old_text": null,
          "new_text": "estimate_stereo_mode(left, right, n)",
          "old_line_content": "",
          "new_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(lpc_out, 0, sizeof(int32_t) * order)",
          "old_line_content": "        *shift = 0;",
          "new_line_content": "        memset(lpc_out, 0, sizeof(int32_t) * order);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(error)",
          "old_line_content": "        error += lpc_in[i] * (1 << sh);",
          "new_line_content": "        lpc_out[i] = av_clip(lrintf(error), -qmax, qmax);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(bits >= 0 && bits <= 31)",
          "old_line_content": "{",
          "new_line_content": "    assert(bits >= 0 && bits <= 31);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "old_line_content": "",
          "new_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 8, tmp)",
          "old_line_content": "    uint8_t tmp;",
          "new_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, 0xFFF8)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 16, 0xFFF8);",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->ch_code)",
          "old_line_content": "    if(frame->ch_mode == FLAC_CHMODE_NOT_STEREO) {",
          "new_line_content": "        put_bits(&s->pb, 4, s->ch_code);",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, frame->ch_mode)",
          "old_line_content": "    } else {",
          "new_line_content": "        put_bits(&s->pb, 4, frame->ch_mode);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 3, 4)",
          "old_line_content": "    }",
          "new_line_content": "    put_bits(&s->pb, 3, 4); /* bits-per-sample code */",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, frame->bs_code[1])",
          "old_line_content": "    if(frame->bs_code[0] == 6) {",
          "new_line_content": "        put_bits(&s->pb, 8, frame->bs_code[1]);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER)",
          "old_line_content": "",
          "new_line_content": "    assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, frame->bs_code[1])",
          "old_line_content": "    } else if(frame->bs_code[0] == 7) {",
          "new_line_content": "        put_bits(&s->pb, 16, frame->bs_code[1]);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "flac_compute_autocorr",
          "old_text": null,
          "new_text": "s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc)",
          "old_line_content": "    if(use_lpc == 1){",
          "new_line_content": "        s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc);",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "compute_lpc_coefs",
          "old_text": null,
          "new_text": "compute_lpc_coefs(autoc, max_order, lpc, ref)",
          "old_line_content": "",
          "new_line_content": "        compute_lpc_coefs(autoc, max_order, lpc, ref);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, s->sr_code[1])",
          "old_line_content": "    if(s->sr_code[0] == 12) {",
          "new_line_content": "        put_bits(&s->pb, 8, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, s->sr_code[1])",
          "old_line_content": "    } else if(s->sr_code[0] > 12) {",
          "new_line_content": "        put_bits(&s->pb, 16, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    }",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "av_init_lls",
          "old_text": null,
          "new_text": "av_init_lls(&m[pass&1], max_order)",
          "old_line_content": "        for(pass=0; pass<use_lpc-1; pass++){",
          "new_line_content": "            av_init_lls(&m[pass&1], max_order);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "av_evaluate_lls",
          "old_text": null,
          "new_text": "av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1)",
          "old_line_content": "                    double eval, inv, rinv;",
          "new_line_content": "                    eval= av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1);",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "    res = sub->residual[0];",
          "new_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(inv)",
          "old_line_content": "                    inv = 1/eval;",
          "new_line_content": "                    rinv = sqrt(inv);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "av_update_lls",
          "old_text": null,
          "new_text": "av_update_lls(&m[pass&1], var, 1.0)",
          "old_line_content": "",
          "new_line_content": "                av_update_lls(&m[pass&1], var, 1.0);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "av_solve_lls",
          "old_text": null,
          "new_text": "av_solve_lls(&m[pass&1], 0.001, 0)",
          "old_line_content": "            }",
          "new_line_content": "            av_solve_lls(&m[pass&1], 0.001, 0);",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "        res = sub->residual[i];",
          "new_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(m[(pass-1)&1].variance[i] / weight)",
          "old_line_content": "                lpc[i][j]= m[(pass-1)&1].coeff[i][j];",
          "new_line_content": "            ref[i]= sqrt(m[(pass-1)&1].variance[i] / weight) * (blocksize - max_order) / 4000;",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "estimate_best_order",
          "old_text": null,
          "new_text": "estimate_best_order(ref, max_order)",
          "old_line_content": "    if(omethod == ORDER_METHOD_EST) {",
          "new_line_content": "        opt_order = estimate_best_order(ref, max_order);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "quantize_lpc_coefs",
          "old_text": null,
          "new_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "old_line_content": "        i = opt_order-1;",
          "new_line_content": "        quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "quantize_lpc_coefs",
          "old_text": null,
          "new_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "old_line_content": "        for(i=0; i<max_order; i++) {",
          "new_line_content": "            quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 2, 0)",
          "old_line_content": "    /* rice-encoded block */",
          "new_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, porder)",
          "old_line_content": "    parts = (1 << porder);",
          "new_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(n > 0)",
          "old_line_content": "{",
          "new_line_content": "    assert(n > 0);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, k)",
          "old_line_content": "        k = sub->rc.params[p];",
          "new_line_content": "        put_bits(&ctx->pb, 4, k);",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "set_sr_golomb_flac",
          "old_text": null,
          "new_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "old_line_content": "        for(i=0; i<res_cnt && j<n; i++, j++) {",
          "new_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "    for(i=0; i<sub->order; i++) {",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "    /* residual */",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "    for(i=0; i<sub->order; i++) {",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "old_line_content": "    cbits = ctx->options.lpc_coeff_precision;",
          "new_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "old_line_content": "    for(i=0; i<sub->order; i++) {",
          "new_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "    /* residual */",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "        /* subframe header */",
          "new_line_content": "        put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "output_subframe_constant",
          "old_text": null,
          "new_text": "output_subframe_constant(s, ch)",
          "old_line_content": "        if(sub->type == FLAC_SUBFRAME_CONSTANT) {",
          "new_line_content": "            output_subframe_constant(s, ch);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "output_subframe_verbatim",
          "old_text": null,
          "new_text": "output_subframe_verbatim(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_VERBATIM) {",
          "new_line_content": "            output_subframe_verbatim(s, ch);",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": null,
          "new_api": "output_subframe_fixed",
          "old_text": null,
          "new_text": "output_subframe_fixed(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_FIXED) {",
          "new_line_content": "            output_subframe_fixed(s, ch);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "output_subframe_lpc",
          "old_text": null,
          "new_text": "output_subframe_lpc(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_LPC) {",
          "new_line_content": "            output_subframe_lpc(s, ch);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    int crc;",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "init_frame",
          "old_text": null,
          "new_text": "init_frame(s)",
          "old_line_content": "    s->blocksize = avctx->frame_size;",
          "new_line_content": "    init_frame(s);",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "copy_samples",
          "old_text": null,
          "new_text": "copy_samples(s, samples)",
          "old_line_content": "",
          "new_line_content": "    copy_samples(s, samples);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "channel_decorrelation",
          "old_text": null,
          "new_text": "channel_decorrelation(s)",
          "old_line_content": "",
          "new_line_content": "    channel_decorrelation(s);",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "encode_residual",
          "old_text": null,
          "new_text": "encode_residual(s, ch)",
          "old_line_content": "    for(ch=0; ch<s->channels; ch++) {",
          "new_line_content": "        encode_residual(s, ch);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "    }",
          "new_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "encode_residual_v",
          "old_text": null,
          "new_text": "encode_residual_v(s, ch)",
          "old_line_content": "        for(ch=0; ch<s->channels; ch++) {",
          "new_line_content": "            encode_residual_v(s, ch);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "        }",
          "new_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "old_line_content": "            /* still too large. must be an error. */",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "encode_residual_lpc_unrolled",
          "old_text": null,
          "new_text": "encode_residual_lpc_unrolled(res, smp, n, 1, coefs, shift, 0)",
          "old_line_content": "    switch(order) {",
          "new_line_content": "        case  1: encode_residual_lpc_unrolled(res, smp, n, 1, coefs, shift, 0); break;",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->extradata)",
          "old_line_content": "{",
          "new_line_content": "    av_freep(&avctx->extradata);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->coded_frame)",
          "old_line_content": "    avctx->extradata_size = 0;",
          "new_line_content": "    av_freep(&avctx->coded_frame);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "find_optimal_param",
          "old_text": null,
          "new_text": "find_optimal_param(sums[i], cnt)",
          "old_line_content": "        if(i == 1) cnt = (n >> porder);",
          "new_line_content": "        k = find_optimal_param(sums[i], cnt);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "rice_encode_count",
          "old_text": null,
          "new_text": "rice_encode_count(sums[i], cnt, k)",
          "old_line_content": "        rc->params[i] = k;",
          "new_line_content": "        all_bits += rice_encode_count(sums[i], cnt, k);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "        sub->type = sub->type_code = FLAC_SUBFRAME_VERBATIM;",
          "new_line_content": "        encode_residual_verbatim(res, smp, n);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1033,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "new_line_content": "                                             n, i, sub->obits);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "new_text": null,
          "old_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "new_line_content": "                                          sub->order, sub->obits);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pmin <= pmax)",
          "new_text": null,
          "old_line_content": "    assert(pmin <= pmax);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(n * sizeof(uint32_t))",
          "new_text": null,
          "old_line_content": "    udata = av_malloc(n * sizeof(uint32_t));",
          "new_line_content": "    for(i=0; i<n; i++) {",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "lpc_calc_coefs",
          "new_api": null,
          "old_text": "lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "new_text": null,
          "old_line_content": "    opt_order = lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "calc_sums",
          "new_api": null,
          "old_text": "calc_sums(pmin, pmax, udata, n, pred_order, sums)",
          "new_text": null,
          "old_line_content": "    calc_sums(pmin, pmax, udata, n, pred_order, sums);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "calc_optimal_rice_params",
          "new_api": null,
          "old_text": "calc_optimal_rice_params(&tmp_rc, i, sums[i], n, pred_order)",
          "new_text": null,
          "old_line_content": "        bits[i] = calc_optimal_rice_params(&tmp_rc, i, sums[i], n, pred_order);",
          "new_line_content": "        if(bits[i] <= bits[opt_porder]) {",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&udata)",
          "new_text": null,
          "old_line_content": "    av_freep(&udata);",
          "new_line_content": "    return bits[opt_porder];",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "                                           res, n, order+1, sub->obits, precision);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(n^(n-1))",
          "new_text": null,
          "old_line_content": "    int porder = FFMIN(max_porder, av_log2(n^(n-1)));",
          "new_line_content": "    if(order > 0)",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(n/order)",
          "new_text": null,
          "old_line_content": "        porder = FFMIN(porder, av_log2(n/order));",
          "new_line_content": "    return porder;",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "                                           res, n, i+1, sub->obits, precision);",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "get_max_p_order",
          "new_api": null,
          "old_text": "get_max_p_order(pmax, n, pred_order)",
          "new_text": null,
          "old_line_content": "    pmax = get_max_p_order(pmax, n, pred_order);",
          "new_line_content": "    bits = pred_order*bps + 6;",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "calc_rice_params",
          "new_api": null,
          "old_text": "calc_rice_params(rc, pmin, pmax, data, n, pred_order)",
          "new_text": null,
          "old_line_content": "    bits += calc_rice_params(rc, pmin, pmax, data, n, pred_order);",
          "new_line_content": "    return bits;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bits, -1, sizeof(bits))",
          "new_text": null,
          "old_line_content": "        memset(bits, -1, sizeof(bits));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "get_max_p_order",
          "new_api": null,
          "old_text": "get_max_p_order(pmax, n, pred_order)",
          "new_text": null,
          "old_line_content": "    pmax = get_max_p_order(pmax, n, pred_order);",
          "new_line_content": "    bits = pred_order*bps + 4 + 5 + pred_order*precision + 6;",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "calc_rice_params",
          "new_api": null,
          "old_text": "calc_rice_params(rc, pmin, pmax, data, n, pred_order)",
          "new_text": null,
          "old_line_content": "    bits += calc_rice_params(rc, pmin, pmax, data, n, pred_order);",
          "new_line_content": "    return bits;",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "                                            res, n, i+1, sub->obits, precision);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "new_text": null,
          "old_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "new_line_content": "                                sub->obits, precision);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "apply_welch_window",
          "new_api": null,
          "old_text": "apply_welch_window(data, len, data1)",
          "new_text": null,
          "old_line_content": "    apply_welch_window(data, len, data1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "    encode_residual_verbatim(res, smp, n);",
          "new_line_content": "    return sub->obits * n;",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(rt)",
          "new_text": null,
          "old_line_content": "        sum[1] += FFABS(rt);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "rice_encode_count",
          "new_api": null,
          "old_text": "rice_encode_count(2*sum[i], n, k)",
          "new_text": null,
          "old_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(r)",
          "new_text": null,
          "old_line_content": "      ref[i] = fabs(r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(lpc_in[i])",
          "new_text": null,
          "old_line_content": "        cmax= FFMAX(cmax, fabs(lpc_in[i]));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "estimate_stereo_mode",
          "new_api": null,
          "old_text": "estimate_stereo_mode(left, right, n)",
          "new_text": null,
          "old_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(lpc_out, 0, sizeof(int32_t) * order)",
          "new_text": null,
          "old_line_content": "        memset(lpc_out, 0, sizeof(int32_t) * order);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(error)",
          "new_text": null,
          "old_line_content": "        lpc_out[i] = av_clip(lrintf(error), -qmax, qmax);",
          "new_line_content": "        error -= lpc_out[i];",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(bits >= 0 && bits <= 31)",
          "new_text": null,
          "old_line_content": "    assert(bits >= 0 && bits <= 31);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "new_text": null,
          "old_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 8, tmp)",
          "new_text": null,
          "old_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, s->sr_code[0])",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 4, s->sr_code[0]);",
          "new_line_content": "    if(frame->ch_mode == FLAC_CHMODE_NOT_STEREO) {",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, s->ch_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, s->ch_code);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, frame->ch_mode)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, frame->ch_mode);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "write_utf8",
          "new_api": null,
          "old_text": "write_utf8(&s->pb, s->frame_count)",
          "new_text": null,
          "old_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "new_line_content": "    if(frame->bs_code[0] == 6) {",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 8, frame->bs_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 8, frame->bs_code[1]);",
          "new_line_content": "    } else if(frame->bs_code[0] == 7) {",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER)",
          "new_text": null,
          "old_line_content": "    assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, frame->bs_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 16, frame->bs_code[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "flac_compute_autocorr",
          "new_api": null,
          "old_text": "s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc)",
          "new_text": null,
          "old_line_content": "        s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "compute_lpc_coefs",
          "new_api": null,
          "old_text": "compute_lpc_coefs(autoc, max_order, lpc, ref)",
          "new_text": null,
          "old_line_content": "        compute_lpc_coefs(autoc, max_order, lpc, ref);",
          "new_line_content": "    }else{",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 8, s->sr_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 8, s->sr_code[1]);",
          "new_line_content": "    } else if(s->sr_code[0] > 12) {",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, s->sr_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 16, s->sr_code[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "av_init_lls",
          "new_api": null,
          "old_text": "av_init_lls(&m[pass&1], max_order)",
          "new_text": null,
          "old_line_content": "            av_init_lls(&m[pass&1], max_order);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 8, crc)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 8, crc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(eval - var[0])",
          "new_text": null,
          "old_line_content": "                    eval= (512>>pass) + fabs(eval - var[0]);",
          "new_line_content": "                    inv = 1/eval;",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(inv)",
          "new_text": null,
          "old_line_content": "                    rinv = sqrt(inv);",
          "new_line_content": "                    for(j=0; j<=max_order; j++)",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "av_update_lls",
          "new_api": null,
          "old_text": "av_update_lls(&m[pass&1], var, 1.0)",
          "new_text": null,
          "old_line_content": "                av_update_lls(&m[pass&1], var, 1.0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "av_solve_lls",
          "new_api": null,
          "old_text": "av_solve_lls(&m[pass&1], 0.001, 0)",
          "new_text": null,
          "old_line_content": "            av_solve_lls(&m[pass&1], 0.001, 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(m[(pass-1)&1].variance[i] / weight)",
          "new_text": null,
          "old_line_content": "            ref[i]= sqrt(m[(pass-1)&1].variance[i] / weight) * (blocksize - max_order) / 4000;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "estimate_best_order",
          "new_api": null,
          "old_text": "estimate_best_order(ref, max_order)",
          "new_text": null,
          "old_line_content": "        opt_order = estimate_best_order(ref, max_order);",
          "new_line_content": "        i = opt_order-1;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "quantize_lpc_coefs",
          "new_api": null,
          "old_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "new_text": null,
          "old_line_content": "        quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "quantize_lpc_coefs",
          "new_api": null,
          "old_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "new_text": null,
          "old_line_content": "            quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 2, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, porder)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "new_line_content": "    res_cnt = psize - sub->order;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(res, smp, n * sizeof(int32_t))",
          "new_text": null,
          "old_line_content": "    memcpy(res, smp, n * sizeof(int32_t));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, k)",
          "new_text": null,
          "old_line_content": "        put_bits(&ctx->pb, 4, k);",
          "new_line_content": "        if(p == 1) res_cnt = psize;",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "set_sr_golomb_flac",
          "new_api": null,
          "old_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "new_text": null,
          "old_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "new_text": null,
          "old_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "new_line_content": "    for(i=0; i<sub->order; i++) {",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no wasted bits */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "output_subframe_constant",
          "new_api": null,
          "old_text": "output_subframe_constant(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_constant(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_VERBATIM) {",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "output_subframe_verbatim",
          "new_api": null,
          "old_text": "output_subframe_verbatim(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_verbatim(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_FIXED) {",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "output_subframe_fixed",
          "new_api": null,
          "old_text": "output_subframe_fixed(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_fixed(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_LPC) {",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "output_subframe_lpc",
          "new_api": null,
          "old_text": "output_subframe_lpc(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_lpc(s, ch);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "init_frame",
          "new_api": null,
          "old_text": "init_frame(s)",
          "new_text": null,
          "old_line_content": "    init_frame(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "copy_samples",
          "new_api": null,
          "old_text": "copy_samples(s, samples)",
          "new_text": null,
          "old_line_content": "    copy_samples(s, samples);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "channel_decorrelation",
          "new_api": null,
          "old_text": "channel_decorrelation(s)",
          "new_text": null,
          "old_line_content": "    channel_decorrelation(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "encode_residual",
          "new_api": null,
          "old_text": "encode_residual(s, ch)",
          "new_text": null,
          "old_line_content": "        encode_residual(s, ch);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "encode_residual_v",
          "new_api": null,
          "old_text": "encode_residual_v(s, ch)",
          "new_text": null,
          "old_line_content": "            encode_residual_v(s, ch);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->extradata)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->extradata);",
          "new_line_content": "    avctx->extradata_size = 0;",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->coded_frame)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->coded_frame);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "encode_residual_lpc_unrolled",
          "new_api": null,
          "old_text": "encode_residual_lpc_unrolled(res, smp, n, order, coefs, shift, 1)",
          "new_text": null,
          "old_line_content": "        default: encode_residual_lpc_unrolled(res, smp, n, order, coefs, shift, 1); break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "find_optimal_param",
          "new_api": null,
          "old_text": "find_optimal_param(sums[i], cnt)",
          "new_text": null,
          "old_line_content": "        k = find_optimal_param(sums[i], cnt);",
          "new_line_content": "        rc->params[i] = k;",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "rice_encode_count",
          "new_api": null,
          "old_text": "rice_encode_count(sums[i], cnt, k)",
          "new_text": null,
          "old_line_content": "        all_bits += rice_encode_count(sums[i], cnt, k);",
          "new_line_content": "        cnt = n >> porder;",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "        encode_residual_verbatim(res, smp, n);",
          "new_line_content": "        return sub->obits * n;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 24,
      "total_additions": 85,
      "total_deletions": 85,
      "total_api_changes": 194
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 194,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          477,
          486
        ]
      }
    },
    "api_calls_before": 182,
    "api_calls_after": 182,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 3,
      "total_diff_lines": 24
    }
  }
}
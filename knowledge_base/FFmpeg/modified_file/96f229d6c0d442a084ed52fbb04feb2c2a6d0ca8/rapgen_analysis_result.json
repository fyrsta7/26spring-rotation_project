{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/96f229d6c0d442a084ed52fbb04feb2c2a6d0ca8",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/96f229d6c0d442a084ed52fbb04feb2c2a6d0ca8/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/96f229d6c0d442a084ed52fbb04feb2c2a6d0ca8/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/96f229d6c0d442a084ed52fbb04feb2c2a6d0ca8/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 652,
          "old_api": "ff_imdct_half",
          "new_api": "vector_fmul_window",
          "old_text": "ff_imdct_half(&s->imdct_256, s->delay[ch-1], x)",
          "new_text": "s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128)",
          "old_line_content": "            ff_imdct_half(&s->imdct_256, s->delay[ch-1], x);",
          "new_line_content": "            s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "vector_fmul_window",
          "new_api": "ff_imdct_half",
          "old_text": "s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128)",
          "new_text": "ff_imdct_half(&s->imdct_256, s->delay[ch-1], x)",
          "old_line_content": "            s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128);",
          "new_line_content": "            ff_imdct_half(&s->imdct_256, s->delay[ch-1], x);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "memset",
          "new_api": "memcpy",
          "old_text": "memset(s->delay[3], 0, channel_data_size)",
          "new_text": "memcpy(s->delay[1], s->delay[0], channel_data_size)",
          "old_line_content": "            memset(s->delay[3], 0, channel_data_size);",
          "new_line_content": "            memcpy(s->delay[1], s->delay[0], channel_data_size);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "memcpy",
          "new_api": "get_bits1",
          "old_text": "memcpy(band_struct,\n               &default_band_struct[start_subband+1],\n               n_subbands-1)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "        memcpy(band_struct,",
          "new_line_content": "            band_struct[subbnd] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "av_log",
          "new_api": "get_bits",
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coupling range (%d > %d)\\n\",\n                       cpl_start_subband, cpl_end_subband)",
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"invalid coupling range (%d > %d)\\n\",",
          "new_line_content": "            cpl_end_subband   = get_bits(gbc, 4) + 3;",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "av_log",
          "new_api": "decode_exponents",
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"exponent out-of-range\\n\")",
          "new_text": "decode_exponents(gbc, s->exp_strategy[blk][ch],\n                                 s->num_exp_groups[ch], s->dexps[ch][0],\n                                 &s->dexps[ch][s->start_freq[ch]+!!ch])",
          "old_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"exponent out-of-range\\n\");",
          "new_line_content": "            if (decode_exponents(gbc, s->exp_strategy[blk][ch],",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "get_bits",
          "new_api": "get_bits1",
          "old_text": "get_bits(gbc, 2)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            s->bit_alloc_params.slow_gain  = ff_ac3_slow_gain_tab[get_bits(gbc, 2)];",
          "new_line_content": "        if (get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "FFMAX",
          "new_api": "get_bits",
          "old_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "new_text": "get_bits(gbc, 2)",
          "old_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "new_line_content": "            s->bit_alloc_params.db_per_bit = ff_ac3_db_per_bit_tab[get_bits(gbc, 2)];",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "get_bits",
          "new_api": "get_bits1",
          "old_text": "get_bits(gbc, 6)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            csnr = (get_bits(gbc, 6) - 15) << 4;",
          "new_line_content": "        if(s->snr_offset_strategy && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "FFMAX",
          "new_api": "get_bits",
          "old_text": "FFMAX(bit_alloc_stages[ch], 1)",
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                    bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 1);",
          "new_line_content": "                    snr = (csnr + get_bits(gbc, 4)) << 2;",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "FFMAX",
          "new_api": "get_bits",
          "old_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "                        bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "new_line_content": "                    s->fast_gain[ch] = ff_ac3_fast_gain_tab[get_bits(gbc, 3)];",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "get_bits",
          "new_api": "get_bits1",
          "old_text": "get_bits(gbc, 3)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            s->fast_gain[ch] = ff_ac3_fast_gain_tab[get_bits(gbc, 3)];",
          "new_line_content": "    if (s->fast_gain_syntax && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "FFMAX",
          "new_api": "get_bits",
          "old_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "new_line_content": "            s->fast_gain[ch] = ff_ac3_fast_gain_tab[get_bits(gbc, 3)];",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "get_bits",
          "new_api": "get_bits1",
          "old_text": "get_bits(gbc, 2)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            s->dba_mode[ch] = get_bits(gbc, 2);",
          "new_line_content": "    if (s->dba_syntax && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "FFMAX",
          "new_api": "av_log",
          "old_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"delta bit allocation strategy reserved\\n\")",
          "old_line_content": "            bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "new_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"delta bit allocation strategy reserved\\n\");",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "FFMAX",
          "new_api": "get_bits",
          "old_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "new_line_content": "                    s->dba_values[ch][seg] = get_bits(gbc, 3);",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "skip_bits",
          "new_api": "get_bits1",
          "old_text": "skip_bits(gbc, 8)",
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            skip_bits(gbc, 8);",
          "new_line_content": "    if (s->skip_syntax && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "do_imdct",
          "new_api": "ac3_upmix_delay",
          "old_text": "do_imdct(s, s->channels)",
          "new_text": "ac3_upmix_delay(s)",
          "old_line_content": "        do_imdct(s, s->channels);",
          "new_line_content": "            ac3_upmix_delay(s);",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "ac3_downmix",
          "new_api": "do_imdct",
          "old_text": "s->dsp.ac3_downmix(s->output, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256)",
          "new_text": "do_imdct(s, s->channels)",
          "old_line_content": "            s->dsp.ac3_downmix(s->output, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256);",
          "new_line_content": "        do_imdct(s, s->channels);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "do_imdct",
          "new_api": "ac3_downmix",
          "old_text": "do_imdct(s, s->out_channels)",
          "new_text": "s->dsp.ac3_downmix(s->delay, s->downmix_coeffs, s->out_channels, s->fbw_channels, 128)",
          "old_line_content": "        do_imdct(s, s->out_channels);",
          "new_line_content": "            s->dsp.ac3_downmix(s->delay, s->downmix_coeffs, s->out_channels, s->fbw_channels, 128);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "init_get_bits",
          "new_api": "FFMIN",
          "old_text": "init_get_bits(&s->gbc, buf, buf_size * 8)",
          "new_text": "FFMIN(buf_size, AC3_FRAME_BUFFER_SIZE)",
          "old_line_content": "        init_get_bits(&s->gbc, buf, buf_size * 8);",
          "new_line_content": "        memcpy(s->input_buffer, buf, FFMIN(buf_size, AC3_FRAME_BUFFER_SIZE));",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "av_freep",
          "new_api": "ff_mdct_end",
          "old_text": "av_freep(&s->input_buffer)",
          "new_text": "ff_mdct_end(&s->imdct_512)",
          "old_line_content": "    av_freep(&s->input_buffer);",
          "new_line_content": "    ff_mdct_end(&s->imdct_512);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 515,
          "old_api": null,
          "new_api": "get_sbits",
          "old_text": null,
          "new_text": "get_sbits(gbc, qlevel)",
          "old_line_content": "        }",
          "new_line_content": "                coeffs[i] = get_sbits(gbc, qlevel) << (24 - qlevel);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 6)",
          "old_line_content": "                if (ch == i || s->snr_offset_strategy == 2)",
          "new_line_content": "            csnr = (get_bits(gbc, 6) - 15) << 4;",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 1)",
          "old_line_content": "",
          "new_line_content": "                    bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 1);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "old_line_content": "        } else if (!s->eac3 && !blk) {",
          "new_line_content": "                        bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new snr offsets must be present in block 0\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new snr offsets must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "old_line_content": "        for (ch = !cpl_in_use; ch <= s->channels; ch++)",
          "new_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "",
          "new_line_content": "    if (s->frame_type == EAC3_FRAME_TYPE_INDEPENDENT && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "ac3_decode_transform_coeffs_ch",
          "old_text": null,
          "new_text": "ac3_decode_transform_coeffs_ch(s, ch, m)",
          "old_line_content": "           block of the frame. */",
          "new_line_content": "        ac3_decode_transform_coeffs_ch(s, ch, m);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(gbc, 10)",
          "old_line_content": "    /* coupling leak information */",
          "new_line_content": "        skip_bits(gbc, 10); // skip converter snr offset",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            /* run last 2 bit allocation stages for coupling channel if",
          "new_line_content": "        if (s->first_cpl_leak || get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "ff_eac3_decode_transform_coeffs_aht_ch",
          "old_text": null,
          "new_text": "ff_eac3_decode_transform_coeffs_aht_ch(s, ch)",
          "old_line_content": "        }",
          "new_line_content": "            ff_eac3_decode_transform_coeffs_aht_ch(s, ch);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "               coupling leak changes */",
          "new_line_content": "            int fl = get_bits(gbc, 3);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "            if(blk && (fl != s->bit_alloc_params.cpl_fast_leak ||",
          "new_line_content": "            int sl = get_bits(gbc, 3);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[CPL_CH], 2)",
          "old_line_content": "            s->bit_alloc_params.cpl_slow_leak = sl;",
          "new_line_content": "                bit_alloc_stages[CPL_CH] = FFMAX(bit_alloc_stages[CPL_CH], 2);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling leak info must be present in block 0\\n\")",
          "old_line_content": "        s->first_cpl_leak = 0;",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new coupling leak info must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "decode_transform_coeffs_ch",
          "old_text": null,
          "new_text": "decode_transform_coeffs_ch(s, blk, ch, &m)",
          "old_line_content": "        if (s->channel_in_cpl[ch])  {",
          "new_line_content": "        decode_transform_coeffs_ch(s, blk, ch, &m);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 2)",
          "old_line_content": "                return -1;",
          "new_line_content": "            s->dba_mode[ch] = get_bits(gbc, 2);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "decode_transform_coeffs_ch",
          "old_text": null,
          "new_text": "decode_transform_coeffs_ch(s, blk, CPL_CH, &m)",
          "old_line_content": "            }",
          "new_line_content": "                decode_transform_coeffs_ch(s, blk, CPL_CH, &m);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "calc_transform_coeffs_cpl",
          "old_text": null,
          "new_text": "calc_transform_coeffs_cpl(s)",
          "old_line_content": "            end = s->end_freq[CPL_CH];",
          "new_line_content": "                calc_transform_coeffs_cpl(s);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "old_line_content": "        for (ch = !cpl_in_use; ch <= fbw_channels; ch++) {",
          "new_line_content": "            bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 5)",
          "old_line_content": "                }",
          "new_line_content": "                    s->dba_offsets[ch][seg] = get_bits(gbc, 5);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                /* run last 2 bit allocation stages if new dba values */",
          "new_line_content": "                    s->dba_lengths[ch][seg] = get_bits(gbc, 4);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "old_line_content": "    } else if(blk == 0) {",
          "new_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "remove_dithering",
          "old_text": null,
          "new_text": "remove_dithering(s)",
          "old_line_content": "/**",
          "new_line_content": "    remove_dithering(s);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_psd",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_psd(s->dexps[ch],\n                                      s->start_freq[ch], s->end_freq[ch],\n                                      s->psd[ch], s->band_psd[ch])",
          "old_line_content": "        }",
          "new_line_content": "            ff_ac3_bit_alloc_calc_psd(s->dexps[ch],",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(s->end_freq[1], s->end_freq[2])",
          "old_line_content": "        if(s->rematrixing_flags[bnd]) {",
          "new_line_content": "    end = FFMIN(s->end_freq[1], s->end_freq[2]);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(end, ff_ac3_rematrix_band_tab[bnd+1])",
          "old_line_content": "                tmp1 = s->fixed_coeffs[2][i];",
          "new_line_content": "            bndend = FFMIN(end, ff_ac3_rematrix_band_tab[bnd+1]);",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_mask",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_mask(&s->bit_alloc_params, s->band_psd[ch],\n                                       s->start_freq[ch], s->end_freq[ch],\n                                       s->fast_gain[ch], (ch == s->lfe_ch),\n                                       s->dba_mode[ch], s->dba_nsegs[ch],\n                                       s->dba_offsets[ch], s->dba_lengths[ch],\n                                       s->dba_values[ch], s->mask[ch])",
          "old_line_content": "                                       s->dba_mode[ch], s->dba_nsegs[ch],",
          "new_line_content": "            ff_ac3_bit_alloc_calc_mask(&s->bit_alloc_params, s->band_psd[ch],",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_bap",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_bap(s->mask[ch], s->psd[ch],\n                                      s->start_freq[ch], s->end_freq[ch],\n                                      s->snr_offset[ch],\n                                      s->bit_alloc_params.floor,\n                                      bap_tab, s->bap[ch])",
          "old_line_content": "                                      s->bit_alloc_params.floor,",
          "new_line_content": "            ff_ac3_bit_alloc_calc_bap(s->mask[ch], s->psd[ch],",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 9)",
          "old_line_content": "    }",
          "new_line_content": "        int skipl = get_bits(gbc, 9);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(gbc, 8)",
          "old_line_content": "    /* unpack the transform coefficients",
          "new_line_content": "            skip_bits(gbc, 8);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "ff_imdct_half",
          "old_text": null,
          "new_text": "ff_imdct_half(&s->imdct_256, s->tmp_output, x)",
          "old_line_content": "                x[i] = s->transform_coeffs[ch][2*i+1];",
          "new_line_content": "            ff_imdct_half(&s->imdct_256, s->tmp_output, x);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "decode_transform_coeffs",
          "old_text": null,
          "new_text": "decode_transform_coeffs(s, blk)",
          "old_line_content": "",
          "new_line_content": "    decode_transform_coeffs(s, blk);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "ff_imdct_half",
          "old_text": null,
          "new_text": "ff_imdct_half(&s->imdct_512, s->tmp_output, s->transform_coeffs[ch])",
          "old_line_content": "        }",
          "new_line_content": "            ff_imdct_half(&s->imdct_512, s->tmp_output, s->transform_coeffs[ch]);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "vector_fmul_window",
          "old_text": null,
          "new_text": "s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128)",
          "old_line_content": "    }",
          "new_line_content": "            s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128);",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->delay[ch-1], s->tmp_output+128, 128*sizeof(float))",
          "old_line_content": "}",
          "new_line_content": "            memcpy(s->delay[ch-1], s->tmp_output+128, 128*sizeof(float));",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "do_rematrixing",
          "old_text": null,
          "new_text": "do_rematrixing(s)",
          "old_line_content": "    for(ch=1; ch<=s->channels; ch++) {",
          "new_line_content": "        do_rematrixing(s);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "int32_to_float_fmul_scalar",
          "old_text": null,
          "new_text": "s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256)",
          "old_line_content": "    /* downmix and MDCT. order depends on whether block switching is used for",
          "new_line_content": "        s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "ac3_downmix",
          "old_text": null,
          "new_text": "s->dsp.ac3_downmix(s->output, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256)",
          "old_line_content": "        if(downmix_output) {",
          "new_line_content": "            s->dsp.ac3_downmix(s->output, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "ac3_downmix",
          "old_text": null,
          "new_text": "s->dsp.ac3_downmix(s->transform_coeffs+1, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256)",
          "old_line_content": "        if(downmix_output && !s->downmixed) {",
          "new_line_content": "            s->dsp.ac3_downmix(s->transform_coeffs+1, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "do_imdct",
          "old_text": null,
          "new_text": "do_imdct(s, s->out_channels)",
          "old_line_content": "    return 0;",
          "new_line_content": "        do_imdct(s, s->out_channels);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(s->delay[3], 0, channel_data_size)",
          "old_line_content": "            break;",
          "new_line_content": "            memset(s->delay[3], 0, channel_data_size);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(s->delay[4], 0, channel_data_size)",
          "old_line_content": "        case AC3_CHMODE_3F:",
          "new_line_content": "            memset(s->delay[4], 0, channel_data_size);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->delay[2], s->delay[1], channel_data_size)",
          "old_line_content": "    }",
          "new_line_content": "            memcpy(s->delay[2], s->delay[1], channel_data_size);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(s->delay[1], 0, channel_data_size)",
          "old_line_content": "}",
          "new_line_content": "            memset(s->delay[1], 0, channel_data_size);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gbc, s->input_buffer, buf_size * 8)",
          "old_line_content": "    }",
          "new_line_content": "        init_get_bits(&s->gbc, s->input_buffer, buf_size * 8);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gbc, buf, buf_size * 8)",
          "old_line_content": "    /* parse the syncinfo */",
          "new_line_content": "        init_get_bits(&s->gbc, buf, buf_size * 8);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "parse_frame_header",
          "old_text": null,
          "new_text": "parse_frame_header(s)",
          "old_line_content": "    if(s->frame_size > buf_size) {",
          "new_line_content": "    err = parse_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"incomplete frame\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"incomplete frame\\n\");",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "old_line_content": "        }",
          "new_line_content": "        if(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0, &buf[2], s->frame_size-2)) {",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"frame CRC mismatch\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"frame CRC mismatch\\n\");",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "        }",
          "new_line_content": "    if (!eac3 || get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(band_struct,\n               &default_band_struct[start_subband+1],\n               n_subbands-1)",
          "old_line_content": "    }",
          "new_line_content": "        memcpy(band_struct,",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid frame size\\n\")",
          "old_line_content": "                /* skip frame if CRC is ok. otherwise use error concealment. */",
          "new_line_content": "                av_log(avctx, AV_LOG_ERROR, \"invalid frame size\\n\");",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid frame type\\n\")",
          "old_line_content": "            default:",
          "new_line_content": "                    av_log(avctx, AV_LOG_ERROR, \"invalid frame type\\n\");",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid header\\n\")",
          "old_line_content": "    }",
          "new_line_content": "                av_log(avctx, AV_LOG_ERROR, \"invalid header\\n\");",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(band_sizes, bnd_sz, n_bands)",
          "old_line_content": "/**",
          "new_line_content": "        memcpy(band_sizes, bnd_sz, n_bands);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bit_alloc_stages, 0, AC3_MAX_CHANNELS)",
          "old_line_content": "    different_transforms = 0;",
          "new_line_content": "    memset(bit_alloc_stages, 0, AC3_MAX_CHANNELS);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "set_downmix_coeffs",
          "old_text": null,
          "new_text": "set_downmix_coeffs(s)",
          "old_line_content": "        s->out_channels = avctx->channels;",
          "new_line_content": "            set_downmix_coeffs(s);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "        }",
          "new_line_content": "            s->block_switch[ch] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "decode_audio_block",
          "old_text": null,
          "new_text": "decode_audio_block(s, blk)",
          "old_line_content": "        }",
          "new_line_content": "        if (!err && decode_audio_block(s, blk)) {",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"error decoding the audio block\\n\")",
          "old_line_content": "        for (ch = 0; ch < s->out_channels; ch++)",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error decoding the audio block\\n\");",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "",
          "new_line_content": "            s->dither_flag[ch] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "float_to_int16_interleave",
          "old_text": null,
          "new_text": "s->dsp.float_to_int16_interleave(out_samples, output, 256, s->out_channels)",
          "old_line_content": "    *data_size = s->num_blocks * 256 * avctx->channels * sizeof (int16_t);",
          "new_line_content": "        s->dsp.float_to_int16_interleave(out_samples, output, 256, s->out_channels);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "        } else if(blk == 0) {",
          "new_line_content": "        if(get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 8)",
          "old_line_content": "            s->dynamic_range[i] = 1.0f;",
          "new_line_content": "            s->dynamic_range[i] = ((dynamic_range_tab[get_bits(gbc, 8)]-1.0) *",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            return -1;",
          "new_line_content": "    if (s->eac3 && (!blk || get_bits1(gbc))) {",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "        }",
          "new_line_content": "        if (get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "av_log_missing_feature",
          "old_text": null,
          "new_text": "av_log_missing_feature(s->avctx, \"Spectral extension\", 1)",
          "old_line_content": "        /* TODO: parse spectral extension strategy info */",
          "new_line_content": "            av_log_missing_feature(s->avctx, \"Spectral extension\", 1);",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "ff_mdct_end",
          "old_text": null,
          "new_text": "ff_mdct_end(&s->imdct_256)",
          "old_line_content": "",
          "new_line_content": "    ff_mdct_end(&s->imdct_256);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->input_buffer)",
          "old_line_content": "}",
          "new_line_content": "    av_freep(&s->input_buffer);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS)",
          "old_line_content": "        if (s->cpl_in_use[blk]) {",
          "new_line_content": "        memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            int cpl_start_subband, cpl_end_subband;",
          "new_line_content": "            s->cpl_in_use[blk] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "old_line_content": "AVCodec eac3_decoder = {",
          "new_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"coupling not allowed in mono or dual-mono\\n\")",
          "old_line_content": "",
          "new_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"coupling not allowed in mono or dual-mono\\n\");",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "                return -1;",
          "new_line_content": "            if (s->eac3 && get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52B (AC-3, E-AC-3)\")",
          "old_line_content": "",
          "new_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52B (AC-3, E-AC-3)\"),",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "av_log_missing_feature",
          "old_text": null,
          "new_text": "av_log_missing_feature(s->avctx, \"Enhanced coupling\", 1)",
          "old_line_content": "",
          "new_line_content": "                av_log_missing_feature(s->avctx, \"Enhanced coupling\", 1);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            /* phase flags in use */",
          "new_line_content": "                    s->channel_in_cpl[ch] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            /* TODO: modify coupling end freq if spectral extension is used */",
          "new_line_content": "                s->phase_flags_in_use = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "            if (s->num_cpl_subbands < 0) {",
          "new_line_content": "            cpl_start_subband = get_bits(gbc, 4);",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"invalid coupling range (%d > %d)\\n\",\n                       cpl_start_subband, cpl_end_subband)",
          "old_line_content": "            }",
          "new_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"invalid coupling range (%d > %d)\\n\",",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "decode_band_structure",
          "old_text": null,
          "new_text": "decode_band_structure(gbc, blk, s->eac3, 0,\n                                 cpl_start_subband, cpl_end_subband,\n                                 ff_eac3_default_cpl_band_struct,\n                                 s->cpl_band_struct, &s->num_cpl_subbands,\n                                 &s->num_cpl_bands, NULL)",
          "old_line_content": "                                 s->cpl_band_struct, &s->num_cpl_subbands,",
          "new_line_content": "           decode_band_structure(gbc, blk, s->eac3, 0,",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling strategy must be present in block 0\\n\")",
          "old_line_content": "            s->cpl_in_use[blk] = s->cpl_in_use[blk-1];",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new coupling strategy must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "                    cpl_coords_exist = 1;",
          "new_line_content": "                if ((s->eac3 && s->first_cpl_coords[ch]) || get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                            s->cpl_coords[ch][bnd] = cpl_coord_mant << 22;",
          "new_line_content": "                        cpl_coord_exp = get_bits(gbc, 4);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                        else",
          "new_line_content": "                        cpl_coord_mant = get_bits(gbc, 4);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling coordinates must be present in block 0\\n\")",
          "old_line_content": "            } else {",
          "new_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"new coupling coordinates must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "    }",
          "new_line_content": "                s->phase_flags[bnd] = s->phase_flags_in_use? get_bits1(gbc) : 0;",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "                s->num_rematrixing_bands -= 1 + (s->start_freq[CPL_CH] == 37);",
          "new_line_content": "        if ((s->eac3 && !blk) || get_bits1(gbc)) {",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(gbc)",
          "old_line_content": "            return -1;",
          "new_line_content": "                s->rematrixing_flags[bnd] = get_bits1(gbc);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new rematrixing strategy must be present in block 0\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new rematrixing strategy must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 2 - (ch == s->lfe_ch))",
          "old_line_content": "    }",
          "new_line_content": "            s->exp_strategy[blk][ch] = get_bits(gbc, 2 - (ch == s->lfe_ch));",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 6)",
          "old_line_content": "                    return -1;",
          "new_line_content": "                int bandwidth_code = get_bits(gbc, 6);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"bandwidth code = %d > 60\\n\", bandwidth_code)",
          "old_line_content": "                s->end_freq[ch] = bandwidth_code * 3 + 73;",
          "new_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"bandwidth code = %d > 60\\n\", bandwidth_code);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(&s->dith_state)",
          "old_line_content": "            case 1:",
          "new_line_content": "                coeffs[i] = (av_lfg_get(&s->dith_state) & 0x7FFFFF) - 0x400000;",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 5)",
          "old_line_content": "                    m->b1_mant[2] = b1_mantissas[gcode][2];",
          "new_line_content": "                    gcode = get_bits(gbc, 5);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS)",
          "old_line_content": "    if (cpl_in_use && s->exp_strategy[blk][CPL_CH] != EXP_REUSE) {",
          "new_line_content": "                memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 7)",
          "old_line_content": "                    m->b2_mant[2] = b2_mantissas[gcode][2];",
          "new_line_content": "                    gcode = get_bits(gbc, 7);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "                                 &s->dexps[ch][s->start_freq[ch]+!!ch])) {",
          "new_line_content": "            s->dexps[ch][0] = get_bits(gbc, 4) << !ch;",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"exponent out-of-range\\n\")",
          "old_line_content": "            if(ch != CPL_CH && ch != s->lfe_ch)",
          "new_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"exponent out-of-range\\n\");",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(gbc, 2)",
          "old_line_content": "",
          "new_line_content": "                skip_bits(gbc, 2); /* skip gainrng */",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "            case 4:",
          "new_line_content": "                coeffs[i] = b3_mantissas[get_bits(gbc, 3)];",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 7)",
          "old_line_content": "                    m->b4ptr = 0;",
          "new_line_content": "                    gcode = get_bits(gbc, 7);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 2)",
          "old_line_content": "            for(ch=!cpl_in_use; ch<=s->channels; ch++)",
          "new_line_content": "            s->bit_alloc_params.slow_gain  = ff_ac3_slow_gain_tab[get_bits(gbc, 2)];",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 3)",
          "old_line_content": "        } else if (!blk) {",
          "new_line_content": "            s->bit_alloc_params.floor  = ff_ac3_floor_tab[get_bits(gbc, 3)];",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(bit_alloc_stages[ch], 2)",
          "old_line_content": "            return -1;",
          "new_line_content": "                bit_alloc_stages[ch] = FFMAX(bit_alloc_stages[ch], 2);",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s->avctx, AV_LOG_ERROR, \"new bit allocation info must be present in block 0\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new bit allocation info must be present in block 0\\n\");",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(gbc, 4)",
          "old_line_content": "            default: {",
          "new_line_content": "                coeffs[i] = b5_mantissas[get_bits(gbc, 4)];",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "get_sbits",
          "new_api": null,
          "old_text": "get_sbits(gbc, qlevel)",
          "new_text": null,
          "old_line_content": "                coeffs[i] = get_sbits(gbc, qlevel) << (24 - qlevel);",
          "new_line_content": "            default: {",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if(s->snr_offset_strategy && get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "                    snr = (csnr + get_bits(gbc, 4)) << 2;",
          "new_line_content": "            for (i = ch = !cpl_in_use; ch <= s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "                    s->fast_gain[ch] = ff_ac3_fast_gain_tab[get_bits(gbc, 3)];",
          "new_line_content": "                /* fast gain (normal AC-3 only) */",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new snr offsets must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new snr offsets must be present in block 0\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->fast_gain_syntax && get_bits1(gbc)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->frame_type == EAC3_FRAME_TYPE_INDEPENDENT && get_bits1(gbc)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "ac3_decode_transform_coeffs_ch",
          "new_api": null,
          "old_text": "ac3_decode_transform_coeffs_ch(s, ch, m)",
          "new_text": null,
          "old_line_content": "        ac3_decode_transform_coeffs_ch(s, ch, m);",
          "new_line_content": "                                    mant_groups *m)",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(gbc, 10)",
          "new_text": null,
          "old_line_content": "        skip_bits(gbc, 10); // skip converter snr offset",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if (s->first_cpl_leak || get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "ff_eac3_decode_transform_coeffs_aht_ch",
          "new_api": null,
          "old_text": "ff_eac3_decode_transform_coeffs_aht_ch(s, ch)",
          "new_text": null,
          "old_line_content": "            ff_eac3_decode_transform_coeffs_aht_ch(s, ch);",
          "new_line_content": "           block of the frame. */",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "            int fl = get_bits(gbc, 3);",
          "new_line_content": "    /* coupling leak information */",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "            int sl = get_bits(gbc, 3);",
          "new_line_content": "    if (cpl_in_use) {",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(bit_alloc_stages[CPL_CH], 2)",
          "new_text": null,
          "old_line_content": "                bit_alloc_stages[CPL_CH] = FFMAX(bit_alloc_stages[CPL_CH], 2);",
          "new_line_content": "               coupling leak changes */",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling leak info must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new coupling leak info must be present in block 0\\n\");",
          "new_line_content": "            s->bit_alloc_params.cpl_fast_leak = fl;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->dba_syntax && get_bits1(gbc)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "decode_transform_coeffs_ch",
          "new_api": null,
          "old_text": "decode_transform_coeffs_ch(s, blk, ch, &m)",
          "new_text": null,
          "old_line_content": "        decode_transform_coeffs_ch(s, blk, ch, &m);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"delta bit allocation strategy reserved\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"delta bit allocation strategy reserved\\n\");",
          "new_line_content": "        for (ch = !cpl_in_use; ch <= fbw_channels; ch++) {",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "decode_transform_coeffs_ch",
          "new_api": null,
          "old_text": "decode_transform_coeffs_ch(s, blk, CPL_CH, &m)",
          "new_text": null,
          "old_line_content": "                decode_transform_coeffs_ch(s, blk, CPL_CH, &m);",
          "new_line_content": "           coefficients for the first coupled channel*/",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "calc_transform_coeffs_cpl",
          "new_api": null,
          "old_text": "calc_transform_coeffs_cpl(s)",
          "new_text": null,
          "old_line_content": "                calc_transform_coeffs_cpl(s);",
          "new_line_content": "        if (s->channel_in_cpl[ch])  {",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "                s->dba_nsegs[ch] = get_bits(gbc, 3);",
          "new_line_content": "        /* channel delta offset, len and bit allocation */",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 5)",
          "new_text": null,
          "old_line_content": "                    s->dba_offsets[ch][seg] = get_bits(gbc, 5);",
          "new_line_content": "            if (s->dba_mode[ch] == DBA_NEW) {",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "                    s->dba_values[ch][seg] = get_bits(gbc, 3);",
          "new_line_content": "                for (seg = 0; seg <= s->dba_nsegs[ch]; seg++) {",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "remove_dithering",
          "new_api": null,
          "old_text": "remove_dithering(s)",
          "new_text": null,
          "old_line_content": "    remove_dithering(s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "ff_ac3_bit_alloc_calc_psd",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_psd(s->dexps[ch],\n                                      s->start_freq[ch], s->end_freq[ch],\n                                      s->psd[ch], s->band_psd[ch])",
          "new_text": null,
          "old_line_content": "            ff_ac3_bit_alloc_calc_psd(s->dexps[ch],",
          "new_line_content": "    for(ch=!cpl_in_use; ch<=s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(s->end_freq[1], s->end_freq[2])",
          "new_text": null,
          "old_line_content": "    end = FFMIN(s->end_freq[1], s->end_freq[2]);",
          "new_line_content": "    int end, bndend;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(end, ff_ac3_rematrix_band_tab[bnd+1])",
          "new_text": null,
          "old_line_content": "            bndend = FFMIN(end, ff_ac3_rematrix_band_tab[bnd+1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "ff_ac3_bit_alloc_calc_mask",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_mask(&s->bit_alloc_params, s->band_psd[ch],\n                                       s->start_freq[ch], s->end_freq[ch],\n                                       s->fast_gain[ch], (ch == s->lfe_ch),\n                                       s->dba_mode[ch], s->dba_nsegs[ch],\n                                       s->dba_offsets[ch], s->dba_lengths[ch],\n                                       s->dba_values[ch], s->mask[ch])",
          "new_text": null,
          "old_line_content": "            ff_ac3_bit_alloc_calc_mask(&s->bit_alloc_params, s->band_psd[ch],",
          "new_line_content": "        if(bit_alloc_stages[ch] > 1) {",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "ff_ac3_bit_alloc_calc_bap",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_bap(s->mask[ch], s->psd[ch],\n                                      s->start_freq[ch], s->end_freq[ch],\n                                      s->snr_offset[ch],\n                                      s->bit_alloc_params.floor,\n                                      bap_tab, s->bap[ch])",
          "new_text": null,
          "old_line_content": "            ff_ac3_bit_alloc_calc_bap(s->mask[ch], s->psd[ch],",
          "new_line_content": "            /* Compute bit allocation */",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->skip_syntax && get_bits1(gbc)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 9)",
          "new_text": null,
          "old_line_content": "        int skipl = get_bits(gbc, 9);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "ff_imdct_half",
          "new_api": null,
          "old_text": "ff_imdct_half(&s->imdct_256, s->tmp_output, x)",
          "new_text": null,
          "old_line_content": "            ff_imdct_half(&s->imdct_256, s->tmp_output, x);",
          "new_line_content": "            float *x = s->tmp_output+128;",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "vector_fmul_window",
          "new_api": null,
          "old_text": "s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128)",
          "new_text": null,
          "old_line_content": "            s->dsp.vector_fmul_window(s->output[ch-1], s->delay[ch-1], s->tmp_output, s->window, add_bias, 128);",
          "new_line_content": "            for(i=0; i<128; i++)",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "decode_transform_coeffs",
          "new_api": null,
          "old_text": "decode_transform_coeffs(s, blk)",
          "new_text": null,
          "old_line_content": "    decode_transform_coeffs(s, blk);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "ff_imdct_half",
          "new_api": null,
          "old_text": "ff_imdct_half(&s->imdct_512, s->tmp_output, s->transform_coeffs[ch])",
          "new_text": null,
          "old_line_content": "            ff_imdct_half(&s->imdct_512, s->tmp_output, s->transform_coeffs[ch]);",
          "new_line_content": "                x[i] = s->transform_coeffs[ch][2*i+1];",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->delay[ch-1], s->tmp_output+128, 128*sizeof(float))",
          "new_text": null,
          "old_line_content": "            memcpy(s->delay[ch-1], s->tmp_output+128, 128*sizeof(float));",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "do_rematrixing",
          "new_api": null,
          "old_text": "do_rematrixing(s)",
          "new_text": null,
          "old_line_content": "        do_rematrixing(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "int32_to_float_fmul_scalar",
          "new_api": null,
          "old_text": "s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256)",
          "new_text": null,
          "old_line_content": "        s->dsp.int32_to_float_fmul_scalar(s->transform_coeffs[ch], s->fixed_coeffs[ch], gain, 256);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "ac3_upmix_delay",
          "new_api": null,
          "old_text": "ac3_upmix_delay(s)",
          "new_text": null,
          "old_line_content": "            ac3_upmix_delay(s);",
          "new_line_content": "           samples in order to reconstruct all channels before downmixing. */",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "ac3_downmix",
          "new_api": null,
          "old_text": "s->dsp.ac3_downmix(s->transform_coeffs+1, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256)",
          "new_text": null,
          "old_line_content": "            s->dsp.ac3_downmix(s->transform_coeffs+1, s->downmix_coeffs, s->out_channels, s->fbw_channels, 256);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "ac3_downmix",
          "new_api": null,
          "old_text": "s->dsp.ac3_downmix(s->delay, s->downmix_coeffs, s->out_channels, s->fbw_channels, 128)",
          "new_text": null,
          "old_line_content": "            s->dsp.ac3_downmix(s->delay, s->downmix_coeffs, s->out_channels, s->fbw_channels, 128);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->delay[1], s->delay[0], channel_data_size)",
          "new_text": null,
          "old_line_content": "            memcpy(s->delay[1], s->delay[0], channel_data_size);",
          "new_line_content": "        case AC3_CHMODE_DUALMONO:",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(s->delay[2], 0, channel_data_size)",
          "new_text": null,
          "old_line_content": "            memset(s->delay[2], 0, channel_data_size);",
          "new_line_content": "        case AC3_CHMODE_2F2R:",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(s->delay[3], 0, channel_data_size)",
          "new_text": null,
          "old_line_content": "            memset(s->delay[3], 0, channel_data_size);",
          "new_line_content": "        case AC3_CHMODE_3F2R:",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->delay[2], s->delay[1], channel_data_size)",
          "new_text": null,
          "old_line_content": "            memcpy(s->delay[2], s->delay[1], channel_data_size);",
          "new_line_content": "        case AC3_CHMODE_3F1R:",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(buf_size, AC3_FRAME_BUFFER_SIZE)",
          "new_text": null,
          "old_line_content": "        memcpy(s->input_buffer, buf, FFMIN(buf_size, AC3_FRAME_BUFFER_SIZE));",
          "new_line_content": "    if (s->input_buffer) {",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gbc, s->input_buffer, buf_size * 8)",
          "new_text": null,
          "old_line_content": "        init_get_bits(&s->gbc, s->input_buffer, buf_size * 8);",
          "new_line_content": "        /* copy input buffer to decoder context to avoid reading past the end",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "parse_frame_header",
          "new_api": null,
          "old_text": "parse_frame_header(s)",
          "new_text": null,
          "old_line_content": "    err = parse_frame_header(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"incomplete frame\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"incomplete frame\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "new_text": null,
          "old_line_content": "        if(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0, &buf[2], s->frame_size-2)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"frame CRC mismatch\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"frame CRC mismatch\\n\");",
          "new_line_content": "    /* check for crc mismatch */",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (!eac3 || get_bits1(gbc)) {",
          "new_line_content": "    n_subbands = end_subband - start_subband;",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "            band_struct[subbnd] = get_bits1(gbc);",
          "new_line_content": "    /* decode band structure from bitstream or use default */",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"frame sync error\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(avctx, AV_LOG_ERROR, \"frame sync error\\n\");",
          "new_line_content": "    if(err && err != AC3_PARSE_ERROR_CRC) {",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"unsupported frame type : skipping frame\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(avctx, AV_LOG_ERROR, \"unsupported frame type : skipping frame\\n\");",
          "new_line_content": "                /* skip frame if CRC is ok. otherwise use error concealment. */",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid header\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(avctx, AV_LOG_ERROR, \"invalid header\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(band_sizes, bnd_sz, n_bands)",
          "new_text": null,
          "old_line_content": "        memcpy(band_sizes, bnd_sz, n_bands);",
          "new_line_content": "    if (num_bands)",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bit_alloc_stages, 0, AC3_MAX_CHANNELS)",
          "new_text": null,
          "old_line_content": "    memset(bit_alloc_stages, 0, AC3_MAX_CHANNELS);",
          "new_line_content": "    GetBitContext *gbc = &s->gbc;",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "set_downmix_coeffs",
          "new_api": null,
          "old_text": "set_downmix_coeffs(s)",
          "new_text": null,
          "old_line_content": "            set_downmix_coeffs(s);",
          "new_line_content": "        /* set downmixing coefficients if needed */",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "            s->block_switch[ch] = get_bits1(gbc);",
          "new_line_content": "    different_transforms = 0;",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "decode_audio_block",
          "new_api": null,
          "old_text": "decode_audio_block(s, blk)",
          "new_text": null,
          "old_line_content": "        if (!err && decode_audio_block(s, blk)) {",
          "new_line_content": "    /* decode the audio blocks */",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"error decoding the audio block\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error decoding the audio block\\n\");",
          "new_line_content": "    for (blk = 0; blk < s->num_blocks; blk++) {",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "            s->dither_flag[ch] = get_bits1(gbc);",
          "new_line_content": "    /* dithering flags */",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "float_to_int16_interleave",
          "new_api": null,
          "old_text": "s->dsp.float_to_int16_interleave(out_samples, output, 256, s->out_channels)",
          "new_text": null,
          "old_line_content": "        s->dsp.float_to_int16_interleave(out_samples, output, 256, s->out_channels);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if(get_bits1(gbc)) {",
          "new_line_content": "    /* dynamic range */",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 8)",
          "new_text": null,
          "old_line_content": "            s->dynamic_range[i] = ((dynamic_range_tab[get_bits(gbc, 8)]-1.0) *",
          "new_line_content": "    i = !(s->channel_mode);",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "ff_mdct_end",
          "new_api": null,
          "old_text": "ff_mdct_end(&s->imdct_512)",
          "new_text": null,
          "old_line_content": "    ff_mdct_end(&s->imdct_512);",
          "new_line_content": "static av_cold int ac3_decode_end(AVCodecContext *avctx)",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->eac3 && (!blk || get_bits1(gbc))) {",
          "new_line_content": "    } while(i--);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if (get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "av_log_missing_feature",
          "new_api": null,
          "old_text": "av_log_missing_feature(s->avctx, \"Spectral extension\", 1)",
          "new_text": null,
          "old_line_content": "            av_log_missing_feature(s->avctx, \"Spectral extension\", 1);",
          "new_line_content": "    /* spectral extension strategy */",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "ff_mdct_end",
          "new_api": null,
          "old_text": "ff_mdct_end(&s->imdct_256)",
          "new_text": null,
          "old_line_content": "    ff_mdct_end(&s->imdct_256);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "    if (s->eac3 ? s->cpl_strategy_exists[blk] : get_bits1(gbc)) {",
          "new_line_content": "    /* TODO: spectral extension coordinates */",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS)",
          "new_text": null,
          "old_line_content": "        memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "new_text": null,
          "old_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "new_line_content": "    .init = ac3_decode_init,",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"coupling not allowed in mono or dual-mono\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s->avctx, AV_LOG_ERROR, \"coupling not allowed in mono or dual-mono\\n\");",
          "new_line_content": "            int cpl_start_subband, cpl_end_subband;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "            if (s->eac3 && get_bits1(gbc)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52B (AC-3, E-AC-3)\")",
          "new_text": null,
          "old_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52B (AC-3, E-AC-3)\"),",
          "new_line_content": "    .init = ac3_decode_init,",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "av_log_missing_feature",
          "new_api": null,
          "old_text": "av_log_missing_feature(s->avctx, \"Enhanced coupling\", 1)",
          "new_text": null,
          "old_line_content": "                av_log_missing_feature(s->avctx, \"Enhanced coupling\", 1);",
          "new_line_content": "            /* check for enhanced coupling */",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "                    s->channel_in_cpl[ch] = get_bits1(gbc);",
          "new_line_content": "                s->channel_in_cpl[2] = 1;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "                s->phase_flags_in_use = get_bits1(gbc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "            cpl_start_subband = get_bits(gbc, 4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "            cpl_end_subband   = get_bits(gbc, 4) + 3;",
          "new_line_content": "            /* coupling frequency range */",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "decode_band_structure",
          "new_api": null,
          "old_text": "decode_band_structure(gbc, blk, s->eac3, 0,\n                                 cpl_start_subband, cpl_end_subband,\n                                 ff_eac3_default_cpl_band_struct,\n                                 s->cpl_band_struct, &s->num_cpl_subbands,\n                                 &s->num_cpl_bands, NULL)",
          "new_text": null,
          "old_line_content": "           decode_band_structure(gbc, blk, s->eac3, 0,",
          "new_line_content": "            s->start_freq[CPL_CH] = cpl_start_subband * 12 + 37;",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling strategy must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new coupling strategy must be present in block 0\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "                if ((s->eac3 && s->first_cpl_coords[ch]) || get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 2)",
          "new_text": null,
          "old_line_content": "                    master_cpl_coord = 3 * get_bits(gbc, 2);",
          "new_line_content": "                    int master_cpl_coord, cpl_coord_exp, cpl_coord_mant;",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "                        cpl_coord_exp = get_bits(gbc, 4);",
          "new_line_content": "                    cpl_coords_exist = 1;",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new coupling coordinates must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"new coupling coordinates must be present in block 0\\n\");",
          "new_line_content": "                        s->cpl_coords[ch][bnd] >>= (cpl_coord_exp + master_cpl_coord);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "                s->phase_flags[bnd] = s->phase_flags_in_use? get_bits1(gbc) : 0;",
          "new_line_content": "        /* phase flags */",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if ((s->eac3 && !blk) || get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "                s->rematrixing_flags[bnd] = get_bits1(gbc);",
          "new_line_content": "            if(cpl_in_use && s->start_freq[CPL_CH] <= 61)",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new rematrixing strategy must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new rematrixing strategy must be present in block 0\\n\");",
          "new_line_content": "            for(bnd=0; bnd<s->num_rematrixing_bands; bnd++)",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 2 - (ch == s->lfe_ch))",
          "new_text": null,
          "old_line_content": "            s->exp_strategy[blk][ch] = get_bits(gbc, 2 - (ch == s->lfe_ch));",
          "new_line_content": "    /* exponent strategies for each channel */",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 6)",
          "new_text": null,
          "old_line_content": "                int bandwidth_code = get_bits(gbc, 6);",
          "new_line_content": "            if (s->channel_in_cpl[ch])",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"bandwidth code = %d > 60\\n\", bandwidth_code)",
          "new_text": null,
          "old_line_content": "                    av_log(s->avctx, AV_LOG_ERROR, \"bandwidth code = %d > 60\\n\", bandwidth_code);",
          "new_line_content": "            else {",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(&s->dith_state)",
          "new_text": null,
          "old_line_content": "                coeffs[i] = (av_lfg_get(&s->dith_state) & 0x7FFFFF) - 0x400000;",
          "new_line_content": "        tbap = bap[i];",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 5)",
          "new_text": null,
          "old_line_content": "                    gcode = get_bits(gbc, 5);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS)",
          "new_text": null,
          "old_line_content": "                memset(bit_alloc_stages, 3, AC3_MAX_CHANNELS);",
          "new_line_content": "            group_size = 3 << (s->exp_strategy[blk][ch] - 1);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 7)",
          "new_text": null,
          "old_line_content": "                    gcode = get_bits(gbc, 7);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "            s->dexps[ch][0] = get_bits(gbc, 4) << !ch;",
          "new_line_content": "    /* decode exponents for each channel */",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "decode_exponents",
          "new_api": null,
          "old_text": "decode_exponents(gbc, s->exp_strategy[blk][ch],\n                                 s->num_exp_groups[ch], s->dexps[ch][0],\n                                 &s->dexps[ch][s->start_freq[ch]+!!ch])",
          "new_text": null,
          "old_line_content": "            if (decode_exponents(gbc, s->exp_strategy[blk][ch],",
          "new_line_content": "    for (ch = !cpl_in_use; ch <= s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(gbc, 2)",
          "new_text": null,
          "old_line_content": "                skip_bits(gbc, 2); /* skip gainrng */",
          "new_line_content": "                return -1;",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 3)",
          "new_text": null,
          "old_line_content": "                coeffs[i] = b3_mantissas[get_bits(gbc, 3)];",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(gbc)",
          "new_text": null,
          "old_line_content": "        if (get_bits1(gbc)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 7)",
          "new_text": null,
          "old_line_content": "                    gcode = get_bits(gbc, 7);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 2)",
          "new_text": null,
          "old_line_content": "            s->bit_alloc_params.slow_decay = ff_ac3_slow_decay_tab[get_bits(gbc, 2)] >> s->bit_alloc_params.sr_shift;",
          "new_line_content": "    /* bit allocation information */",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 2)",
          "new_text": null,
          "old_line_content": "            s->bit_alloc_params.fast_decay = ff_ac3_fast_decay_tab[get_bits(gbc, 2)] >> s->bit_alloc_params.sr_shift;",
          "new_line_content": "    if (s->bit_allocation_syntax) {",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s->avctx, AV_LOG_ERROR, \"new bit allocation info must be present in block 0\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s->avctx, AV_LOG_ERROR, \"new bit allocation info must be present in block 0\\n\");",
          "new_line_content": "            for(ch=!cpl_in_use; ch<=s->channels; ch++)",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(gbc, 4)",
          "new_text": null,
          "old_line_content": "                coeffs[i] = b5_mantissas[get_bits(gbc, 4)];",
          "new_line_content": "                break;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 22,
      "total_additions": 109,
      "total_deletions": 109,
      "total_api_changes": 240
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 240,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          393,
          397,
          398,
          399,
          400,
          401
        ]
      }
    },
    "api_calls_before": 183,
    "api_calls_after": 183,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 3,
      "total_diff_lines": 24
    }
  }
}
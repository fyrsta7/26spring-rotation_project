{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/4aca716a531b0bc1f05c96209cf30577d6e48baa",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/4aca716a531b0bc1f05c96209cf30577d6e48baa/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/4aca716a531b0bc1f05c96209cf30577d6e48baa/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/4aca716a531b0bc1f05c96209cf30577d6e48baa/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 291,
          "old_api": "FFMIN",
          "new_api": "normalize_bits",
          "old_text": "FFMIN(max, 0x7FFF)",
          "new_text": "normalize_bits(max, 15)",
          "old_line_content": "    max   = FFMIN(max, 0x7FFF);",
          "new_line_content": "    bits  = normalize_bits(max, 15);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "memcpy",
          "new_api": "ff_acelp_weighted_vector_sum",
          "old_text": "memcpy(lpc + 3 * LPC_ORDER, cur_lsp, LPC_ORDER * sizeof(*lpc))",
          "new_text": "ff_acelp_weighted_vector_sum(lpc + 2 * LPC_ORDER, cur_lsp, prev_lsp,\n                                 12288, 4096, 1 << 13, 14, LPC_ORDER)",
          "old_line_content": "    memcpy(lpc + 3 * LPC_ORDER, cur_lsp, LPC_ORDER * sizeof(*lpc));",
          "new_line_content": "    ff_acelp_weighted_vector_sum(lpc + 2 * LPC_ORDER, cur_lsp, prev_lsp,",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "normalize_bits",
          "new_api": "FFMAX",
          "old_text": "normalize_bits(temp1, 31)",
          "new_text": "FFMAX(energy[i], temp1)",
          "old_line_content": "    scale = normalize_bits(temp1, 31);",
          "new_line_content": "        temp1 = FFMAX(energy[i], temp1);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "memcpy",
          "new_api": "av_memcpy_backptr",
          "old_text": "memcpy(out, vector_ptr, FRAME_LEN * sizeof(*vector_ptr))",
          "new_text": "av_memcpy_backptr((uint8_t*)vector_ptr, lag * sizeof(*vector_ptr),\n                          FRAME_LEN * sizeof(*vector_ptr))",
          "old_line_content": "        memcpy(out, vector_ptr, FRAME_LEN * sizeof(*vector_ptr));",
          "new_line_content": "        av_memcpy_backptr((uint8_t*)vector_ptr, lag * sizeof(*vector_ptr),",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "gen_acb_excitation",
          "new_api": "gen_fcb_excitation",
          "old_text": "gen_acb_excitation(acb_vector, &p->excitation[SUBFRAME_LEN * i],\n                                   p->pitch_lag[i >> 1], p->subframe[i],\n                                   p->cur_rate)",
          "new_text": "gen_fcb_excitation(vector_ptr, p->subframe[i], p->cur_rate,\n                                   p->pitch_lag[i >> 1], i)",
          "old_line_content": "                gen_acb_excitation(acb_vector, &p->excitation[SUBFRAME_LEN * i],",
          "new_line_content": "                gen_fcb_excitation(vector_ptr, p->subframe[i], p->cur_rate,",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "comp_interp_index",
          "new_api": "memcpy",
          "old_text": "comp_interp_index(p, p->pitch_lag[1],\n                                                &p->sid_gain, &p->cur_gain)",
          "new_text": "memcpy(p->audio + LPC_ORDER, vector_ptr, FRAME_LEN * sizeof(*p->audio))",
          "old_line_content": "            p->interp_index = comp_interp_index(p, p->pitch_lag[1],",
          "new_line_content": "            memcpy(p->audio + LPC_ORDER, vector_ptr, FRAME_LEN * sizeof(*p->audio));",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "ff_celp_lp_synthesis_filter",
          "new_api": "memcpy",
          "old_text": "ff_celp_lp_synthesis_filter(p->audio + i, &lpc[j * LPC_ORDER],\n                                    p->audio + i, SUBFRAME_LEN, LPC_ORDER,\n                                    0, 1, 1 << 12)",
          "new_text": "memcpy(p->audio, p->synth_mem, LPC_ORDER * sizeof(*p->audio))",
          "old_line_content": "        ff_celp_lp_synthesis_filter(p->audio + i, &lpc[j * LPC_ORDER],",
          "new_line_content": "    memcpy(p->audio, p->synth_mem, LPC_ORDER * sizeof(*p->audio));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "unpack_bitstream",
          "old_text": null,
          "new_text": "unpack_bitstream(p, buf, buf_size)",
          "old_line_content": "        if (p->past_frame_type == ACTIVE_FRAME)",
          "new_line_content": "    if (unpack_bitstream(p, buf, buf_size) < 0) {",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "get_buffer",
          "old_text": null,
          "new_text": "avctx->get_buffer(avctx, &p->frame)",
          "old_line_content": "         return ret;",
          "new_line_content": "    if ((ret = avctx->get_buffer(avctx, &p->frame)) < 0) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "old_line_content": "    }",
          "new_line_content": "         av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "gen_dirac_train",
          "old_text": null,
          "new_text": "gen_dirac_train(vector, pitch_lag)",
          "old_line_content": "        int cb_gain  = fixed_cb_gain[subfrm.amp_index];",
          "new_line_content": "            gen_dirac_train(vector, pitch_lag);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "inverse_quant",
          "old_text": null,
          "new_text": "inverse_quant(cur_lsp, p->prev_lsp, p->lsp_index, bad_frame)",
          "old_line_content": "",
          "new_line_content": "        inverse_quant(cur_lsp, p->prev_lsp, p->lsp_index, bad_frame);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "lsp_interpolate",
          "old_text": null,
          "new_text": "lsp_interpolate(lpc, cur_lsp, p->prev_lsp)",
          "old_line_content": "        /* Save the lsp_vector for the next frame */",
          "new_line_content": "        lsp_interpolate(lpc, cur_lsp, p->prev_lsp);",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->prev_lsp, cur_lsp, LPC_ORDER * sizeof(*p->prev_lsp))",
          "old_line_content": "        /* Generate the excitation for the frame */",
          "new_line_content": "        memcpy(p->prev_lsp, cur_lsp, LPC_ORDER * sizeof(*p->prev_lsp));",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->excitation, p->prev_excitation,\n               PITCH_MAX * sizeof(*p->excitation))",
          "old_line_content": "        vector_ptr = p->excitation + PITCH_MAX;",
          "new_line_content": "        memcpy(p->excitation, p->prev_excitation,",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "gen_acb_excitation",
          "old_text": null,
          "new_text": "gen_acb_excitation(acb_vector, &p->excitation[SUBFRAME_LEN * i],\n                                   p->pitch_lag[i >> 1], p->subframe[i],\n                                   p->cur_rate)",
          "old_line_content": "                                   p->cur_rate);",
          "new_line_content": "                gen_acb_excitation(acb_vector, &p->excitation[SUBFRAME_LEN * i],",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "av_clip_int16",
          "old_text": null,
          "new_text": "av_clip_int16(vector_ptr[j] << 1)",
          "old_line_content": "                                                  acb_vector[j]);",
          "new_line_content": "                    vector_ptr[j] = av_clip_int16(vector_ptr[j] << 1);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "av_clip_int16",
          "old_text": null,
          "new_text": "av_clip_int16(vector_ptr[j] +\n                                                  acb_vector[j])",
          "old_line_content": "                }",
          "new_line_content": "                    vector_ptr[j] = av_clip_int16(vector_ptr[j] +",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "comp_interp_index",
          "old_text": null,
          "new_text": "comp_interp_index(p, p->pitch_lag[1],\n                                                &p->sid_gain, &p->cur_gain)",
          "old_line_content": "",
          "new_line_content": "            p->interp_index = comp_interp_index(p, p->pitch_lag[1],",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "comp_ppf_coeff",
          "old_text": null,
          "new_text": "comp_ppf_coeff(p, i, p->pitch_lag[j >> 1],\n                                   ppf + j, p->cur_rate)",
          "old_line_content": "            }",
          "new_line_content": "                    comp_ppf_coeff(p, i, p->pitch_lag[j >> 1],",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)(a[i] * b[i]) << 1)",
          "old_line_content": "    }",
          "new_line_content": "        int64_t prod = av_clipl_int32((int64_t)(a[i] * b[i]) << 1);",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32(sum + prod)",
          "old_line_content": "    return sum;",
          "new_line_content": "        sum = av_clipl_int32(sum + prod);",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(vector_ptr, p->audio + LPC_ORDER, FRAME_LEN * sizeof(*vector_ptr))",
          "old_line_content": "            /* Peform pitch postfiltering */",
          "new_line_content": "            memcpy(vector_ptr, p->audio + LPC_ORDER, FRAME_LEN * sizeof(*vector_ptr));",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "ff_acelp_weighted_vector_sum",
          "old_text": null,
          "new_text": "ff_acelp_weighted_vector_sum(p->audio + LPC_ORDER + i,\n                                                 vector_ptr + i,\n                                                 vector_ptr + i + ppf[j].index,\n                                                 ppf[j].sc_gain,\n                                                 ppf[j].opt_gain,\n                                                 1 << 14, 15, SUBFRAME_LEN)",
          "old_line_content": "                                                 vector_ptr + i + ppf[j].index,",
          "new_line_content": "                    ff_acelp_weighted_vector_sum(p->audio + LPC_ORDER + i,",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "get_residual",
          "old_text": null,
          "new_text": "get_residual(residual, prev_excitation, lag)",
          "old_line_content": "    /* Select quantization table */",
          "new_line_content": "    get_residual(residual, prev_excitation, lag);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(p->frame.data[0], 0,\n                       (FRAME_LEN + LPC_ORDER) * sizeof(int16_t))",
          "old_line_content": "            } else {",
          "new_line_content": "                memset(p->frame.data[0], 0,",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "residual_interp",
          "old_text": null,
          "new_text": "residual_interp(p->excitation, p->audio + LPC_ORDER, p->interp_index,\n                                p->interp_gain, &p->random_seed)",
          "old_line_content": "            }",
          "new_line_content": "                residual_interp(p->excitation, p->audio + LPC_ORDER, p->interp_index,",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->prev_excitation, p->excitation + FRAME_LEN,\n               PITCH_MAX * sizeof(*p->excitation))",
          "old_line_content": "    } else {",
          "new_line_content": "        memcpy(p->prev_excitation, p->excitation + FRAME_LEN,",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(residual + i, cb_ptr, PITCH_ORDER)",
          "old_line_content": "    }",
          "new_line_content": "        sum = dot_product(residual + i, cb_ptr, PITCH_ORDER);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((sum << 1) + (1 << 15))",
          "old_line_content": "}",
          "new_line_content": "        vector[i] = av_clipl_int32((sum << 1) + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(out, 0, FRAME_LEN * 2)",
          "old_line_content": "               \"G.723.1: Comfort noise generation not supported yet\\n\");",
          "new_line_content": "        memset(out, 0, FRAME_LEN * 2);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_WARNING,\n               \"G.723.1: Comfort noise generation not supported yet\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(avctx, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "ff_celp_lp_synthesis_filter",
          "old_text": null,
          "new_text": "ff_celp_lp_synthesis_filter(p->audio + i, &lpc[j * LPC_ORDER],\n                                    p->audio + i, SUBFRAME_LEN, LPC_ORDER,\n                                    0, 1, 1 << 12)",
          "old_line_content": "                                    0, 1, 1 << 12);",
          "new_line_content": "        ff_celp_lp_synthesis_filter(p->audio + i, &lpc[j * LPC_ORDER],",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->synth_mem, p->audio + FRAME_LEN, LPC_ORDER * sizeof(*p->audio))",
          "old_line_content": "    if (p->postfilter) {",
          "new_line_content": "    memcpy(p->synth_mem, p->audio + FRAME_LEN, LPC_ORDER * sizeof(*p->audio));",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "formant_postfilter",
          "old_text": null,
          "new_text": "formant_postfilter(p, lpc, p->audio)",
          "old_line_content": "    } else { // if output is not postfiltered it should be scaled by 2",
          "new_line_content": "        formant_postfilter(p, lpc, p->audio);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->frame.data[0], p->audio + LPC_ORDER, FRAME_LEN * 2)",
          "old_line_content": "        for (i = 0; i < FRAME_LEN; i++)",
          "new_line_content": "        memcpy(p->frame.data[0], p->audio + LPC_ORDER, FRAME_LEN * 2);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "av_clip_int16",
          "old_text": null,
          "new_text": "av_clip_int16(p->audio[LPC_ORDER + i] << 1)",
          "old_line_content": "",
          "new_line_content": "            out[i] = av_clip_int16(p->audio[LPC_ORDER + i] << 1);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(FRAME_LEN + PITCH_MAX - offset - length, pitch_lag + 3)",
          "old_line_content": "        limit = pitch_lag + 3;",
          "new_line_content": "        limit = FFMIN(FRAME_LEN + PITCH_MAX - offset - length, pitch_lag + 3);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf, buf + dir * i, length)",
          "old_line_content": "        if (ccr > *ccr_max) {",
          "new_line_content": "        ccr = dot_product(buf, buf + dir * i, length);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(postfilter)",
          "old_line_content": "    { NULL }",
          "new_line_content": "    { \"postfilter\", \"postfilter on/off\", OFFSET(postfilter), AV_OPT_TYPE_INT,",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"G.723.1\")",
          "old_line_content": "    .priv_class     = &g723_1dec_class,",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"G.723.1\"),",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32(temp1 + temp2 + (1 << 15))",
          "old_line_content": "        if (tgt_eng >= pf_residual << 1) {",
          "new_line_content": "        pf_residual = av_clipl_int32(temp1 + temp2 + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "square_root",
          "old_text": null,
          "new_text": "square_root(temp1 << 16)",
          "old_line_content": "        ppf->opt_gain = 0;",
          "new_line_content": "        ppf->sc_gain = square_root(temp1 << 16);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "av_clip_int16",
          "old_text": null,
          "new_text": "av_clip_int16(ppf->opt_gain * ppf->sc_gain >> 15)",
          "old_line_content": "",
          "new_line_content": "    ppf->opt_gain = av_clip_int16(ppf->opt_gain * ppf->sc_gain >> 15);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "autocorr_max",
          "old_text": null,
          "new_text": "autocorr_max(p, offset, &energy[3], pitch_lag,\n                                 SUBFRAME_LEN, -1)",
          "old_line_content": "",
          "new_line_content": "    int back_lag  = autocorr_max(p, offset, &energy[3], pitch_lag,",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf, buf, SUBFRAME_LEN)",
          "old_line_content": "    /* Compute forward residual energy */",
          "new_line_content": "    energy[0] = dot_product(buf, buf, SUBFRAME_LEN);",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf + fwd_lag, buf + fwd_lag, SUBFRAME_LEN)",
          "old_line_content": "    /* Compute backward residual energy */",
          "new_line_content": "        energy[2] = dot_product(buf + fwd_lag, buf + fwd_lag, SUBFRAME_LEN);",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf - back_lag, buf - back_lag, SUBFRAME_LEN)",
          "old_line_content": "    /* Normalize and shorten */",
          "new_line_content": "        energy[4] = dot_product(buf - back_lag, buf - back_lag, SUBFRAME_LEN);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "normalize_bits",
          "old_text": null,
          "new_text": "normalize_bits(temp1, 31)",
          "old_line_content": "        energy[i] = (energy[i] << scale) >> 16;",
          "new_line_content": "    scale = normalize_bits(temp1, 31);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "comp_ppf_gains",
          "old_text": null,
          "new_text": "comp_ppf_gains(fwd_lag,  ppf, cur_rate, energy[0], energy[1],\n                       energy[2])",
          "old_line_content": "    } else if (!fwd_lag) {       /* Case 2 */",
          "new_line_content": "        comp_ppf_gains(fwd_lag,  ppf, cur_rate, energy[0], energy[1],",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "comp_ppf_gains",
          "old_text": null,
          "new_text": "comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],\n                       energy[4])",
          "old_line_content": "    } else {                     /* Case 3 */",
          "new_line_content": "        comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "comp_ppf_gains",
          "old_text": null,
          "new_text": "comp_ppf_gains(fwd_lag, ppf, cur_rate, energy[0], energy[1],\n                           energy[2])",
          "old_line_content": "        } else {",
          "new_line_content": "            comp_ppf_gains(fwd_lag, ppf, cur_rate, energy[0], energy[1],",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "comp_ppf_gains",
          "old_text": null,
          "new_text": "comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],\n                           energy[4])",
          "old_line_content": "        }",
          "new_line_content": "            comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "scale_vector",
          "old_text": null,
          "new_text": "scale_vector(p->excitation, FRAME_LEN + PITCH_MAX)",
          "old_line_content": "    /* Compute maximum backward cross-correlation */",
          "new_line_content": "    *scale = scale_vector(p->excitation, FRAME_LEN + PITCH_MAX);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(vector[i])",
          "old_line_content": "    for (i = 0; i < length; i++)",
          "new_line_content": "        max |= FFABS(vector[i]);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(max, 0x7FFF)",
          "old_line_content": "",
          "new_line_content": "    max   = FFMIN(max, 0x7FFF);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "autocorr_max",
          "old_text": null,
          "new_text": "autocorr_max(p, offset, &ccr, pitch_lag, SUBFRAME_LEN * 2, -1)",
          "old_line_content": "",
          "new_line_content": "    index = autocorr_max(p, offset, &ccr, pitch_lag, SUBFRAME_LEN * 2, -1);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)ccr + (1 << 15))",
          "old_line_content": "    /* Compute target energy */",
          "new_line_content": "    ccr   = av_clipl_int32((int64_t)ccr + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf, buf, SUBFRAME_LEN * 2)",
          "old_line_content": "",
          "new_line_content": "    tgt_eng  = dot_product(buf, buf, SUBFRAME_LEN * 2);",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)tgt_eng + (1 << 15))",
          "old_line_content": "    if (ccr <= 0)",
          "new_line_content": "    *exc_eng = av_clipl_int32((int64_t)tgt_eng + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(buf - index, buf - index, SUBFRAME_LEN * 2)",
          "old_line_content": "",
          "new_line_content": "    best_eng = dot_product(buf - index, buf - index, SUBFRAME_LEN * 2);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)best_eng + (1 << 15))",
          "old_line_content": "    temp = best_eng * *exc_eng >> 3;",
          "new_line_content": "    best_eng = av_clipl_int32((int64_t)best_eng + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(out, vector_ptr, FRAME_LEN * sizeof(*vector_ptr))",
          "old_line_content": "        for (i = 0; i < FRAME_LEN; i++) {",
          "new_line_content": "        memcpy(out, vector_ptr, FRAME_LEN * sizeof(*vector_ptr));",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(buf, 0, (FRAME_LEN + PITCH_MAX) * sizeof(*buf))",
          "old_line_content": "}",
          "new_line_content": "        memset(buf, 0, (FRAME_LEN + PITCH_MAX) * sizeof(*buf));",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(cur_lsp[0],  0x180)",
          "old_line_content": "",
          "new_line_content": "        cur_lsp[0]             = FFMAX(cur_lsp[0],  0x180);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(cur_lsp[LPC_ORDER - 1], 0x7e00)",
          "old_line_content": "        /* Stability check */",
          "new_line_content": "        cur_lsp[LPC_ORDER - 1] = FFMIN(cur_lsp[LPC_ORDER - 1], 0x7e00);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((src[m] << 16) + (filter << 3) + (1 << 15))",
          "old_line_content": "}",
          "new_line_content": "        dest[m] = av_clipl_int32((src[m] << 16) + (filter << 3) + (1 << 15));",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(cur_lsp, prev_lsp, LPC_ORDER * sizeof(*cur_lsp))",
          "old_line_content": "",
          "new_line_content": "        memcpy(cur_lsp, prev_lsp, LPC_ORDER * sizeof(*cur_lsp));",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)denom + (temp << 1))",
          "old_line_content": "",
          "new_line_content": "        denom = av_clipl_int32((int64_t)denom + (temp << 1));",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "normalize_bits",
          "old_text": null,
          "new_text": "normalize_bits(num,   31)",
          "old_line_content": "        num     = num << bits1 >> 1;",
          "new_line_content": "        bits1   = normalize_bits(num,   31);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "normalize_bits",
          "old_text": null,
          "new_text": "normalize_bits(denom, 31)",
          "old_line_content": "        denom <<= bits2;",
          "new_line_content": "        bits2   = normalize_bits(denom, 31);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(0, bits2)",
          "old_line_content": "        gain = (num >> 1) / (denom >> 16);",
          "new_line_content": "        bits2 = FFMAX(0, bits2);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "square_root",
          "old_text": null,
          "new_text": "square_root(gain << 16 >> bits2)",
          "old_line_content": "        gain = 1 << 12;",
          "new_line_content": "        gain = square_root(gain << 16 >> bits2);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32(((temp1 + temp2) << 1) + (1 << 15))",
          "old_line_content": "",
          "new_line_content": "        lpc[j] = -(av_clipl_int32(((temp1 + temp2) << 1) + (1 << 15)) >> 16);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "av_clip_int16",
          "old_text": null,
          "new_text": "av_clip_int16((buf[i] * (p->pf_gain + (p->pf_gain >> 4)) +\n                                   (1 << 10)) >> 11)",
          "old_line_content": "    }",
          "new_line_content": "        buf[i]     = av_clip_int16((buf[i] * (p->pf_gain + (p->pf_gain >> 4)) +",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "MULL2",
          "old_text": null,
          "new_text": "MULL2(f1[i], lpc[2 * i])",
          "old_line_content": "",
          "new_line_content": "        f1[i + 1] = f1[i - 1] + MULL2(f1[i], lpc[2 * i]);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "MULL2",
          "old_text": null,
          "new_text": "MULL2(f2[i], lpc[2 * i + 1])",
          "old_line_content": "        for (j = i; j >= 2; j--) {",
          "new_line_content": "        f2[i + 1] = f2[i - 1] + MULL2(f2[i], lpc[2 * i + 1]);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(filter_signal, p->iir_mem, LPC_ORDER * sizeof(*filter_signal))",
          "old_line_content": "    for (i = LPC_ORDER, j = 0; j < SUBFRAMES; i += SUBFRAME_LEN, j++) {",
          "new_line_content": "    memcpy(filter_signal, p->iir_mem, LPC_ORDER * sizeof(*filter_signal));",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, p->fir_mem, LPC_ORDER * sizeof(*buf))",
          "old_line_content": "",
          "new_line_content": "    memcpy(buf, p->fir_mem, LPC_ORDER * sizeof(*buf));",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "MULL2",
          "old_text": null,
          "new_text": "MULL2(f2[j - 1], lpc[2 * i + 1])",
          "old_line_content": "        }",
          "new_line_content": "            f2[j] = MULL2(f2[j - 1], lpc[2 * i + 1]) +",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "iir_filter",
          "old_text": null,
          "new_text": "iir_filter(filter_coef[0], filter_coef[1], buf + i,\n                   filter_signal + i)",
          "old_line_content": "        lpc += LPC_ORDER;",
          "new_line_content": "        iir_filter(filter_coef[0], filter_coef[1], buf + i,",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->fir_mem, buf + FRAME_LEN, LPC_ORDER * sizeof(*p->fir_mem))",
          "old_line_content": "           LPC_ORDER * sizeof(*p->iir_mem));",
          "new_line_content": "    memcpy(p->fir_mem, buf + FRAME_LEN, LPC_ORDER * sizeof(*p->fir_mem));",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->iir_mem, filter_signal + FRAME_LEN,\n           LPC_ORDER * sizeof(*p->iir_mem))",
          "old_line_content": "",
          "new_line_content": "    memcpy(p->iir_mem, filter_signal + FRAME_LEN,",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32(((ff1 + ff2) << 3) + (1 << 15))",
          "old_line_content": "                                                (1 << 15)) >> 16;",
          "new_line_content": "        lpc[i] = av_clipl_int32(((ff1 + ff2) << 3) + (1 << 15)) >> 16;",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32(((ff1 - ff2) << 3) +\n                                                (1 << 15))",
          "old_line_content": "    }",
          "new_line_content": "        lpc[LPC_ORDER - i - 1] = av_clipl_int32(((ff1 - ff2) << 3) +",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(temp_vector, buf_ptr, SUBFRAME_LEN * sizeof(*temp_vector))",
          "old_line_content": "",
          "new_line_content": "        memcpy(temp_vector, buf_ptr, SUBFRAME_LEN * sizeof(*temp_vector));",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "scale_vector",
          "old_text": null,
          "new_text": "scale_vector(temp_vector, SUBFRAME_LEN)",
          "old_line_content": "        /* Compute auto correlation coefficients */",
          "new_line_content": "        scale = scale_vector(temp_vector, SUBFRAME_LEN);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "dot_product",
          "old_text": null,
          "new_text": "dot_product(temp_vector, temp_vector, SUBFRAME_LEN)",
          "old_line_content": "        /* Compute reflection coefficient */",
          "new_line_content": "        auto_corr[1] = dot_product(temp_vector, temp_vector, SUBFRAME_LEN);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)signal_ptr[j] +\n                                        ((signal_ptr[j - 1] >> 16) *\n                                         temp << 1))",
          "old_line_content": "                                         temp << 1)) >> 16;",
          "new_line_content": "            buf_ptr[j] = av_clipl_int32((int64_t)signal_ptr[j] +",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(lpc + 3 * LPC_ORDER, cur_lsp, LPC_ORDER * sizeof(*lpc))",
          "old_line_content": "    for (i = 0; i < SUBFRAMES; i++) {",
          "new_line_content": "    memcpy(lpc + 3 * LPC_ORDER, cur_lsp, LPC_ORDER * sizeof(*lpc));",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "lsp2lpc",
          "old_text": null,
          "new_text": "lsp2lpc(lpc_ptr)",
          "old_line_content": "    }",
          "new_line_content": "        lsp2lpc(lpc_ptr);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "av_clipl_int32",
          "old_text": null,
          "new_text": "av_clipl_int32((int64_t)auto_corr[1] << -temp)",
          "old_line_content": "            energy = auto_corr[1] >> temp;",
          "new_line_content": "            energy = av_clipl_int32((int64_t)auto_corr[1] << -temp);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "gain_scale",
          "old_text": null,
          "new_text": "gain_scale(p, buf_ptr, energy)",
          "old_line_content": "        buf_ptr    += SUBFRAME_LEN;",
          "new_line_content": "        gain_scale(p, buf_ptr, energy);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(vector, buf, SUBFRAME_LEN * sizeof(*vector))",
          "old_line_content": "        for (j = 0; j < SUBFRAME_LEN - i; j++)",
          "new_line_content": "    memcpy(vector, buf, SUBFRAME_LEN * sizeof(*vector));",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_WARNING,\n                   \"Expected %d bytes, got %d - skipping packet\\n\",\n                   frame_size[dec_mode], buf_size)",
          "old_line_content": "                   frame_size[dec_mode], buf_size);",
          "new_line_content": "            av_log(avctx, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(vector, 0, SUBFRAME_LEN * sizeof(*vector))",
          "old_line_content": "    if (cur_rate == RATE_6300) {",
          "new_line_content": "    memset(vector, 0, SUBFRAME_LEN * sizeof(*vector));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1031,
          "old_api": "get_buffer",
          "new_api": null,
          "old_text": "avctx->get_buffer(avctx, &p->frame)",
          "new_text": null,
          "old_line_content": "    if ((ret = avctx->get_buffer(avctx, &p->frame)) < 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\")",
          "new_text": null,
          "old_line_content": "         av_log(avctx, AV_LOG_ERROR, \"get_buffer() failed\\n\");",
          "new_line_content": "    p->frame.nb_samples = FRAME_LEN;",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "gen_dirac_train",
          "new_api": null,
          "old_text": "gen_dirac_train(vector, pitch_lag)",
          "new_text": null,
          "old_line_content": "            gen_dirac_train(vector, pitch_lag);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "inverse_quant",
          "new_api": null,
          "old_text": "inverse_quant(cur_lsp, p->prev_lsp, p->lsp_index, bad_frame)",
          "new_text": null,
          "old_line_content": "        inverse_quant(cur_lsp, p->prev_lsp, p->lsp_index, bad_frame);",
          "new_line_content": "            p->erased_frames++;",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "lsp_interpolate",
          "new_api": null,
          "old_text": "lsp_interpolate(lpc, cur_lsp, p->prev_lsp)",
          "new_text": null,
          "old_line_content": "        lsp_interpolate(lpc, cur_lsp, p->prev_lsp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->prev_lsp, cur_lsp, LPC_ORDER * sizeof(*p->prev_lsp))",
          "new_text": null,
          "old_line_content": "        memcpy(p->prev_lsp, cur_lsp, LPC_ORDER * sizeof(*p->prev_lsp));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->excitation, p->prev_excitation,\n               PITCH_MAX * sizeof(*p->excitation))",
          "new_text": null,
          "old_line_content": "        memcpy(p->excitation, p->prev_excitation,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "gen_fcb_excitation",
          "new_api": null,
          "old_text": "gen_fcb_excitation(vector_ptr, p->subframe[i], p->cur_rate,\n                                   p->pitch_lag[i >> 1], i)",
          "new_text": null,
          "old_line_content": "                gen_fcb_excitation(vector_ptr, p->subframe[i], p->cur_rate,",
          "new_line_content": "                                            p->subframe[3].amp_index) >> 1];",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "av_clip_int16",
          "new_api": null,
          "old_text": "av_clip_int16(vector_ptr[j] << 1)",
          "new_text": null,
          "old_line_content": "                    vector_ptr[j] = av_clip_int16(vector_ptr[j] << 1);",
          "new_line_content": "                /* Get the total excitation */",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "av_clip_int16",
          "new_api": null,
          "old_text": "av_clip_int16(vector_ptr[j] +\n                                                  acb_vector[j])",
          "new_text": null,
          "old_line_content": "                    vector_ptr[j] = av_clip_int16(vector_ptr[j] +",
          "new_line_content": "                for (j = 0; j < SUBFRAME_LEN; j++) {",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->audio + LPC_ORDER, vector_ptr, FRAME_LEN * sizeof(*p->audio))",
          "new_text": null,
          "old_line_content": "            memcpy(p->audio + LPC_ORDER, vector_ptr, FRAME_LEN * sizeof(*p->audio));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "comp_ppf_coeff",
          "new_api": null,
          "old_text": "comp_ppf_coeff(p, i, p->pitch_lag[j >> 1],\n                                   ppf + j, p->cur_rate)",
          "new_text": null,
          "old_line_content": "                    comp_ppf_coeff(p, i, p->pitch_lag[j >> 1],",
          "new_line_content": "                i = PITCH_MAX;",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)(a[i] * b[i]) << 1)",
          "new_text": null,
          "old_line_content": "        int64_t prod = av_clipl_int32((int64_t)(a[i] * b[i]) << 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(sum + prod)",
          "new_text": null,
          "old_line_content": "        sum = av_clipl_int32(sum + prod);",
          "new_line_content": "    for (i = 0; i < length; i++) {",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->excitation, p->prev_excitation,\n                   PITCH_MAX * sizeof(*p->excitation))",
          "new_text": null,
          "old_line_content": "            memcpy(p->excitation, p->prev_excitation,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "ff_acelp_weighted_vector_sum",
          "new_api": null,
          "old_text": "ff_acelp_weighted_vector_sum(p->audio + LPC_ORDER + i,\n                                                 vector_ptr + i,\n                                                 vector_ptr + i + ppf[j].index,\n                                                 ppf[j].sc_gain,\n                                                 ppf[j].opt_gain,\n                                                 1 << 14, 15, SUBFRAME_LEN)",
          "new_text": null,
          "old_line_content": "                    ff_acelp_weighted_vector_sum(p->audio + LPC_ORDER + i,",
          "new_line_content": "            if (p->postfilter)",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(p->excitation, 0,\n                       (FRAME_LEN + PITCH_MAX) * sizeof(*p->excitation))",
          "new_text": null,
          "old_line_content": "                memset(p->excitation, 0,",
          "new_line_content": "            if (p->erased_frames == 3) {",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "get_residual",
          "new_api": null,
          "old_text": "get_residual(residual, prev_excitation, lag)",
          "new_text": null,
          "old_line_content": "    get_residual(residual, prev_excitation, lag);",
          "new_line_content": "    int64_t sum;",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "residual_interp",
          "new_api": null,
          "old_text": "residual_interp(p->excitation, p->audio + LPC_ORDER, p->interp_index,\n                                p->interp_gain, &p->random_seed)",
          "new_text": null,
          "old_line_content": "                residual_interp(p->excitation, p->audio + LPC_ORDER, p->interp_index,",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->prev_excitation, p->excitation + FRAME_LEN,\n               PITCH_MAX * sizeof(*p->excitation))",
          "new_text": null,
          "old_line_content": "        memcpy(p->prev_excitation, p->excitation + FRAME_LEN,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(residual + i, cb_ptr, PITCH_ORDER)",
          "new_text": null,
          "old_line_content": "        sum = dot_product(residual + i, cb_ptr, PITCH_ORDER);",
          "new_line_content": "    cb_ptr += subfrm.ad_cb_gain * 20;",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((sum << 1) + (1 << 15))",
          "new_text": null,
          "old_line_content": "        vector[i] = av_clipl_int32((sum << 1) + (1 << 15)) >> 16;",
          "new_line_content": "    for (i = 0; i < SUBFRAME_LEN; i++) {",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(out, 0, FRAME_LEN * 2)",
          "new_text": null,
          "old_line_content": "        memset(out, 0, FRAME_LEN * 2);",
          "new_line_content": "               PITCH_MAX * sizeof(*p->excitation));",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_WARNING,\n               \"G.723.1: Comfort noise generation not supported yet\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_WARNING,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->audio, p->synth_mem, LPC_ORDER * sizeof(*p->audio))",
          "new_text": null,
          "old_line_content": "    memcpy(p->audio, p->synth_mem, LPC_ORDER * sizeof(*p->audio));",
          "new_line_content": "    p->past_frame_type = p->cur_frame_type;",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->synth_mem, p->audio + FRAME_LEN, LPC_ORDER * sizeof(*p->audio))",
          "new_text": null,
          "old_line_content": "    memcpy(p->synth_mem, p->audio + FRAME_LEN, LPC_ORDER * sizeof(*p->audio));",
          "new_line_content": "                                    p->audio + i, SUBFRAME_LEN, LPC_ORDER,",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "formant_postfilter",
          "new_api": null,
          "old_text": "formant_postfilter(p, lpc, p->audio)",
          "new_text": null,
          "old_line_content": "        formant_postfilter(p, lpc, p->audio);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->frame.data[0], p->audio + LPC_ORDER, FRAME_LEN * 2)",
          "new_text": null,
          "old_line_content": "        memcpy(p->frame.data[0], p->audio + LPC_ORDER, FRAME_LEN * 2);",
          "new_line_content": "    if (p->postfilter) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(PITCH_MAX - 3, pitch_lag)",
          "new_text": null,
          "old_line_content": "    pitch_lag = FFMIN(PITCH_MAX - 3, pitch_lag);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "av_clip_int16",
          "new_api": null,
          "old_text": "av_clip_int16(p->audio[LPC_ORDER + i] << 1)",
          "new_text": null,
          "old_line_content": "            out[i] = av_clip_int16(p->audio[LPC_ORDER + i] << 1);",
          "new_line_content": "    } else { // if output is not postfiltered it should be scaled by 2",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf, buf + dir * i, length)",
          "new_text": null,
          "old_line_content": "        ccr = dot_product(buf, buf + dir * i, length);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(postfilter)",
          "new_text": null,
          "old_line_content": "    { \"postfilter\", \"postfilter on/off\", OFFSET(postfilter), AV_OPT_TYPE_INT,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"G.723.1\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"G.723.1\"),",
          "new_line_content": "    .init           = g723_1_decode_init,",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(temp1 + temp2 + (1 << 15))",
          "new_text": null,
          "old_line_content": "        pf_residual = av_clipl_int32(temp1 + temp2 + (1 << 15)) >> 16;",
          "new_line_content": "        temp1       = (tgt_eng << 15) + (ccr * ppf->opt_gain << 1);",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "square_root",
          "new_api": null,
          "old_text": "square_root(temp1 << 16)",
          "new_text": null,
          "old_line_content": "        ppf->sc_gain = square_root(temp1 << 16);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "av_clip_int16",
          "new_api": null,
          "old_text": "av_clip_int16(ppf->opt_gain * ppf->sc_gain >> 15)",
          "new_text": null,
          "old_line_content": "    ppf->opt_gain = av_clip_int16(ppf->opt_gain * ppf->sc_gain >> 15);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "autocorr_max",
          "new_api": null,
          "old_text": "autocorr_max(p, offset, &energy[1], pitch_lag,\n                                 SUBFRAME_LEN, 1)",
          "new_text": null,
          "old_line_content": "    int fwd_lag   = autocorr_max(p, offset, &energy[1], pitch_lag,",
          "new_line_content": "    int energy[5] = {0, 0, 0, 0, 0};",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf, buf, SUBFRAME_LEN)",
          "new_text": null,
          "old_line_content": "    energy[0] = dot_product(buf, buf, SUBFRAME_LEN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf + fwd_lag, buf + fwd_lag, SUBFRAME_LEN)",
          "new_text": null,
          "old_line_content": "        energy[2] = dot_product(buf + fwd_lag, buf + fwd_lag, SUBFRAME_LEN);",
          "new_line_content": "    /* Compute forward residual energy */",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf - back_lag, buf - back_lag, SUBFRAME_LEN)",
          "new_text": null,
          "old_line_content": "        energy[4] = dot_product(buf - back_lag, buf - back_lag, SUBFRAME_LEN);",
          "new_line_content": "    /* Compute backward residual energy */",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(energy[i], temp1)",
          "new_text": null,
          "old_line_content": "        temp1 = FFMAX(energy[i], temp1);",
          "new_line_content": "    temp1 = 0;",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "comp_ppf_gains",
          "new_api": null,
          "old_text": "comp_ppf_gains(fwd_lag,  ppf, cur_rate, energy[0], energy[1],\n                       energy[2])",
          "new_text": null,
          "old_line_content": "        comp_ppf_gains(fwd_lag,  ppf, cur_rate, energy[0], energy[1],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "comp_ppf_gains",
          "new_api": null,
          "old_text": "comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],\n                       energy[4])",
          "new_text": null,
          "old_line_content": "        comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],",
          "new_line_content": "                       energy[2]);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "comp_ppf_gains",
          "new_api": null,
          "old_text": "comp_ppf_gains(fwd_lag, ppf, cur_rate, energy[0], energy[1],\n                           energy[2])",
          "new_text": null,
          "old_line_content": "            comp_ppf_gains(fwd_lag, ppf, cur_rate, energy[0], energy[1],",
          "new_line_content": "        temp2 = energy[2] * ((energy[3] * energy[3] + (1 << 14)) >> 15);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "comp_ppf_gains",
          "new_api": null,
          "old_text": "comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],\n                           energy[4])",
          "new_text": null,
          "old_line_content": "            comp_ppf_gains(-back_lag, ppf, cur_rate, energy[0], energy[3],",
          "new_line_content": "                           energy[2]);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "scale_vector",
          "new_api": null,
          "old_text": "scale_vector(p->excitation, FRAME_LEN + PITCH_MAX)",
          "new_text": null,
          "old_line_content": "    *scale = scale_vector(p->excitation, FRAME_LEN + PITCH_MAX);",
          "new_line_content": "    int index, ccr, tgt_eng, best_eng, temp;",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(vector[i])",
          "new_text": null,
          "old_line_content": "        max = FFMAX(max, FFABS(vector[i]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "autocorr_max",
          "new_api": null,
          "old_text": "autocorr_max(p, offset, &ccr, pitch_lag, SUBFRAME_LEN * 2, -1)",
          "new_text": null,
          "old_line_content": "    index = autocorr_max(p, offset, &ccr, pitch_lag, SUBFRAME_LEN * 2, -1);",
          "new_line_content": "    /* Compute maximum backward cross-correlation */",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)ccr + (1 << 15))",
          "new_text": null,
          "old_line_content": "    ccr   = av_clipl_int32((int64_t)ccr + (1 << 15)) >> 16;",
          "new_line_content": "    ccr   = 0;",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "normalize_bits",
          "new_api": null,
          "old_text": "normalize_bits(max, 15)",
          "new_text": null,
          "old_line_content": "    bits  = normalize_bits(max, 15);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf, buf, SUBFRAME_LEN * 2)",
          "new_text": null,
          "old_line_content": "    tgt_eng  = dot_product(buf, buf, SUBFRAME_LEN * 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)tgt_eng + (1 << 15))",
          "new_text": null,
          "old_line_content": "    *exc_eng = av_clipl_int32((int64_t)tgt_eng + (1 << 15)) >> 16;",
          "new_line_content": "    /* Compute target energy */",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(vector[i] * scale << 1)",
          "new_text": null,
          "old_line_content": "        vector[i] = av_clipl_int32(vector[i] * scale << 1) >> 4;",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(buf - index, buf - index, SUBFRAME_LEN * 2)",
          "new_text": null,
          "old_line_content": "    best_eng = dot_product(buf - index, buf - index, SUBFRAME_LEN * 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)best_eng + (1 << 15))",
          "new_text": null,
          "old_line_content": "    best_eng = av_clipl_int32((int64_t)best_eng + (1 << 15)) >> 16;",
          "new_line_content": "    /* Compute best energy */",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "av_memcpy_backptr",
          "new_api": null,
          "old_text": "av_memcpy_backptr((uint8_t*)vector_ptr, lag * sizeof(*vector_ptr),\n                          FRAME_LEN * sizeof(*vector_ptr))",
          "new_text": null,
          "old_line_content": "        av_memcpy_backptr((uint8_t*)vector_ptr, lag * sizeof(*vector_ptr),",
          "new_line_content": "        for (i = 0; i < lag; i++)",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(buf, 0, (FRAME_LEN + PITCH_MAX) * sizeof(*buf))",
          "new_text": null,
          "old_line_content": "        memset(buf, 0, (FRAME_LEN + PITCH_MAX) * sizeof(*buf));",
          "new_line_content": "            out[i] = gain * *rseed >> 15;",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(cur_lsp[0],  0x180)",
          "new_text": null,
          "old_line_content": "        cur_lsp[0]             = FFMAX(cur_lsp[0],  0x180);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(cur_lsp[LPC_ORDER - 1], 0x7e00)",
          "new_text": null,
          "old_line_content": "        cur_lsp[LPC_ORDER - 1] = FFMIN(cur_lsp[LPC_ORDER - 1], 0x7e00);",
          "new_line_content": "    for (i = 0; i < LPC_ORDER; i++) {",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((src[m] << 16) + (filter << 3) + (1 << 15))",
          "new_text": null,
          "old_line_content": "        dest[m] = av_clipl_int32((src[m] << 16) + (filter << 3) + (1 << 15));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(cur_lsp, prev_lsp, LPC_ORDER * sizeof(*cur_lsp))",
          "new_text": null,
          "old_line_content": "        memcpy(cur_lsp, prev_lsp, LPC_ORDER * sizeof(*cur_lsp));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)denom + (temp << 1))",
          "new_text": null,
          "old_line_content": "        denom = av_clipl_int32((int64_t)denom + (temp << 1));",
          "new_line_content": "        int temp = buf[i] >> 2;",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "normalize_bits",
          "new_api": null,
          "old_text": "normalize_bits(num,   31)",
          "new_text": null,
          "old_line_content": "        bits1   = normalize_bits(num,   31);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "normalize_bits",
          "new_api": null,
          "old_text": "normalize_bits(denom, 31)",
          "new_text": null,
          "old_line_content": "        bits2   = normalize_bits(denom, 31);",
          "new_line_content": "    if (num && denom) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(0, bits2)",
          "new_text": null,
          "old_line_content": "        bits2 = FFMAX(0, bits2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "square_root",
          "new_api": null,
          "old_text": "square_root(gain << 16 >> bits2)",
          "new_text": null,
          "old_line_content": "        gain = square_root(gain << 16 >> bits2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(((temp1 + temp2) << 1) + (1 << 15))",
          "new_text": null,
          "old_line_content": "        lpc[j] = -(av_clipl_int32(((temp1 + temp2) << 1) + (1 << 15)) >> 16);",
          "new_line_content": "                          ((offset << 8) + 0x80) << 1;",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "av_clip_int16",
          "new_api": null,
          "old_text": "av_clip_int16((buf[i] * (p->pf_gain + (p->pf_gain >> 4)) +\n                                   (1 << 10)) >> 11)",
          "new_text": null,
          "old_line_content": "        buf[i]     = av_clip_int16((buf[i] * (p->pf_gain + (p->pf_gain >> 4)) +",
          "new_line_content": "    for (i = 0; i < SUBFRAME_LEN; i++) {",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "MULL2",
          "new_api": null,
          "old_text": "MULL2(f1[i], lpc[2 * i])",
          "new_text": null,
          "old_line_content": "        f1[i + 1] = f1[i - 1] + MULL2(f1[i], lpc[2 * i]);",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "MULL2",
          "new_api": null,
          "old_text": "MULL2(f2[i], lpc[2 * i + 1])",
          "new_text": null,
          "old_line_content": "        f2[i + 1] = f2[i - 1] + MULL2(f2[i], lpc[2 * i + 1]);",
          "new_line_content": "    for (i = 2; i < LPC_ORDER / 2; i++) {",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, p->fir_mem, LPC_ORDER * sizeof(*buf))",
          "new_text": null,
          "old_line_content": "    memcpy(buf, p->fir_mem, LPC_ORDER * sizeof(*buf));",
          "new_line_content": "    int i, j, k;",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(filter_signal, p->iir_mem, LPC_ORDER * sizeof(*filter_signal))",
          "new_text": null,
          "old_line_content": "    memcpy(filter_signal, p->iir_mem, LPC_ORDER * sizeof(*filter_signal));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "MULL2",
          "new_api": null,
          "old_text": "MULL2(f1[j - 1], lpc[2 * i])",
          "new_text": null,
          "old_line_content": "            f1[j] = MULL2(f1[j - 1], lpc[2 * i]) +",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "iir_filter",
          "new_api": null,
          "old_text": "iir_filter(filter_coef[0], filter_coef[1], buf + i,\n                   filter_signal + i)",
          "new_text": null,
          "old_line_content": "        iir_filter(filter_coef[0], filter_coef[1], buf + i,",
          "new_line_content": "                                 (1 << 14)) >> 15;",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->fir_mem, buf + FRAME_LEN, LPC_ORDER * sizeof(*p->fir_mem))",
          "new_text": null,
          "old_line_content": "    memcpy(p->fir_mem, buf + FRAME_LEN, LPC_ORDER * sizeof(*p->fir_mem));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->iir_mem, filter_signal + FRAME_LEN,\n           LPC_ORDER * sizeof(*p->iir_mem))",
          "new_text": null,
          "old_line_content": "    memcpy(p->iir_mem, filter_signal + FRAME_LEN,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(((ff1 + ff2) << 3) + (1 << 15))",
          "new_text": null,
          "old_line_content": "        lpc[i] = av_clipl_int32(((ff1 + ff2) << 3) + (1 << 15)) >> 16;",
          "new_line_content": "        int64_t ff2 = f2[i + 1] - f2[i];",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32(((ff1 - ff2) << 3) +\n                                                (1 << 15))",
          "new_text": null,
          "old_line_content": "        lpc[LPC_ORDER - i - 1] = av_clipl_int32(((ff1 - ff2) << 3) +",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(temp_vector, buf_ptr, SUBFRAME_LEN * sizeof(*temp_vector))",
          "new_text": null,
          "old_line_content": "        memcpy(temp_vector, buf_ptr, SUBFRAME_LEN * sizeof(*temp_vector));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "scale_vector",
          "new_api": null,
          "old_text": "scale_vector(temp_vector, SUBFRAME_LEN)",
          "new_text": null,
          "old_line_content": "        scale = scale_vector(temp_vector, SUBFRAME_LEN);",
          "new_line_content": "        /* Normalize */",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "dot_product",
          "new_api": null,
          "old_text": "dot_product(temp_vector, temp_vector + 1,\n                                   SUBFRAME_LEN - 1)",
          "new_text": null,
          "old_line_content": "        auto_corr[0] = dot_product(temp_vector, temp_vector + 1,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "ff_acelp_weighted_vector_sum",
          "new_api": null,
          "old_text": "ff_acelp_weighted_vector_sum(lpc, cur_lsp, prev_lsp,\n                                 4096, 12288, 1 << 13, 14, LPC_ORDER)",
          "new_text": null,
          "old_line_content": "    ff_acelp_weighted_vector_sum(lpc, cur_lsp, prev_lsp,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)signal_ptr[j] +\n                                        ((signal_ptr[j - 1] >> 16) *\n                                         temp << 1))",
          "new_text": null,
          "old_line_content": "            buf_ptr[j] = av_clipl_int32((int64_t)signal_ptr[j] +",
          "new_line_content": "        /* Compensation filter */",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "lsp2lpc",
          "new_api": null,
          "old_text": "lsp2lpc(lpc_ptr)",
          "new_text": null,
          "old_line_content": "        lsp2lpc(lpc_ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "av_clipl_int32",
          "new_api": null,
          "old_text": "av_clipl_int32((int64_t)auto_corr[1] << -temp)",
          "new_text": null,
          "old_line_content": "            energy = av_clipl_int32((int64_t)auto_corr[1] << -temp);",
          "new_line_content": "        temp = 2 * scale + 4;",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "gain_scale",
          "new_api": null,
          "old_text": "gain_scale(p, buf_ptr, energy)",
          "new_text": null,
          "old_line_content": "        gain_scale(p, buf_ptr, energy);",
          "new_line_content": "            energy = auto_corr[1] >> temp;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(vector, buf, SUBFRAME_LEN * sizeof(*vector))",
          "new_text": null,
          "old_line_content": "    memcpy(vector, buf, SUBFRAME_LEN * sizeof(*vector));",
          "new_line_content": "    int i, j;",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_WARNING,\n                   \"Expected %d bytes, got %d - skipping packet\\n\",\n                   frame_size[dec_mode], buf_size)",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_WARNING,",
          "new_line_content": "    if (buf_size < frame_size[dec_mode]) {",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(vector, 0, SUBFRAME_LEN * sizeof(*vector))",
          "new_text": null,
          "old_line_content": "    memset(vector, 0, SUBFRAME_LEN * sizeof(*vector));",
          "new_line_content": "    int temp, i, j;",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "unpack_bitstream",
          "new_api": null,
          "old_text": "unpack_bitstream(p, buf, buf_size)",
          "new_text": null,
          "old_line_content": "    if (unpack_bitstream(p, buf, buf_size) < 0) {",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 89,
      "total_deletions": 90,
      "total_api_changes": 186
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 186,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          293,
          294,
          295,
          297,
          298,
          284
        ]
      }
    },
    "api_calls_before": 145,
    "api_calls_after": 143,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 5,
      "total_diff_lines": 32
    }
  }
}
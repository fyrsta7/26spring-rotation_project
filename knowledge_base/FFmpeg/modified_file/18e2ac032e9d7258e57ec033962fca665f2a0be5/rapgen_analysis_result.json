{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/18e2ac032e9d7258e57ec033962fca665f2a0be5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/18e2ac032e9d7258e57ec033962fca665f2a0be5/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/18e2ac032e9d7258e57ec033962fca665f2a0be5/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/18e2ac032e9d7258e57ec033962fca665f2a0be5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 152,
          "old_api": "avio_flush",
          "new_api": "ffio_geturlcontext",
          "old_text": "avio_flush(*pb)",
          "new_text": "ffio_geturlcontext(*pb)",
          "old_line_content": "        avio_flush(*pb);",
          "new_line_content": "        URLContext *http_url_context = ffio_geturlcontext(*pb);",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "av_codec_get_tag",
          "new_api": "strcmp",
          "old_text": "av_codec_get_tag(tags, par->codec_id)",
          "new_text": "strcmp(str, \"mp4v\")",
          "old_line_content": "        oti = av_codec_get_tag(tags, par->codec_id);",
          "new_line_content": "    if (!strcmp(str, \"mp4a\") || !strcmp(str, \"mp4v\")) {",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "MKTAG",
          "new_api": "AV_RB16",
          "old_text": "MKTAG('m', 'p', '4', 'v')",
          "new_text": "AV_RB16(par->extradata)",
          "old_line_content": "        } else if (tag == MKTAG('m', 'p', '4', 'v')) {",
          "new_line_content": "                    aot = ((AV_RB16(par->extradata) >> 5) & 0x3f) + 32;",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "ffio_free_dyn_buf",
          "new_api": "avio_open_dyn_buf",
          "old_text": "ffio_free_dyn_buf(&pb)",
          "new_text": "avio_open_dyn_buf(&pb)",
          "old_line_content": "                ffio_free_dyn_buf(&pb);",
          "new_line_content": "            if (avio_open_dyn_buf(&pb) < 0)",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "avio_close_dyn_buf",
          "new_api": "ffio_free_dyn_buf",
          "old_text": "avio_close_dyn_buf(pb, &extradata)",
          "new_text": "ffio_free_dyn_buf(&pb)",
          "old_line_content": "            extradata_size = avio_close_dyn_buf(pb, &extradata);",
          "new_line_content": "                ffio_free_dyn_buf(&pb);",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "avio_close_dyn_buf",
          "new_api": "avio_flush",
          "old_text": "avio_close_dyn_buf(os->ctx->pb, &buffer)",
          "new_text": "avio_flush(os->ctx->pb)",
          "old_line_content": "    *range_length = avio_close_dyn_buf(os->ctx->pb, &buffer);",
          "new_line_content": "    avio_flush(os->ctx->pb);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "av_free",
          "new_api": "avio_close_dyn_buf",
          "old_text": "av_free(buffer)",
          "new_text": "avio_close_dyn_buf(os->ctx->pb, &buffer)",
          "old_line_content": "    av_free(buffer);",
          "new_line_content": "    *range_length = avio_close_dyn_buf(os->ctx->pb, &buffer);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "avio_open_dyn_buf",
          "new_api": "av_free",
          "old_text": "avio_open_dyn_buf(&os->ctx->pb)",
          "new_text": "av_free(buffer)",
          "old_line_content": "    return avio_open_dyn_buf(&os->ctx->pb);",
          "new_line_content": "    av_free(buffer);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "ff_format_io_close",
          "new_api": "av_write_trailer",
          "old_text": "ff_format_io_close(s, &os->out)",
          "new_text": "av_write_trailer(os->ctx)",
          "old_line_content": "        ff_format_io_close(s, &os->out);",
          "new_line_content": "            av_write_trailer(os->ctx);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "avformat_free_context",
          "new_api": "ffio_free_dyn_buf",
          "old_text": "avformat_free_context(os->ctx)",
          "new_text": "ffio_free_dyn_buf(&os->ctx->pb)",
          "old_line_content": "            avformat_free_context(os->ctx);",
          "new_line_content": "            ffio_free_dyn_buf(&os->ctx->pb);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "av_free",
          "new_api": "avformat_free_context",
          "old_text": "av_free(os->segments)",
          "new_text": "avformat_free_context(os->ctx)",
          "old_line_content": "        av_free(os->segments);",
          "new_line_content": "            avformat_free_context(os->ctx);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "av_freep",
          "new_api": "av_free",
          "old_text": "av_freep(&c->streams)",
          "new_text": "av_free(os->segments[j])",
          "old_line_content": "    av_freep(&c->streams);",
          "new_line_content": "            av_free(os->segments[j]);",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "ff_format_io_close",
          "new_api": "av_freep",
          "old_text": "ff_format_io_close(s, &c->m3u8_out)",
          "new_text": "av_freep(&c->streams)",
          "old_line_content": "    ff_format_io_close(s, &c->m3u8_out);",
          "new_line_content": "    av_freep(&c->streams);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "get_hls_playlist_name",
          "new_api": "avio_find_protocol_name",
          "old_text": "get_hls_playlist_name(filename_hls, sizeof(filename_hls),\n                              c->dirname, representation_id)",
          "new_text": "avio_find_protocol_name(c->dirname)",
          "old_line_content": "        get_hls_playlist_name(filename_hls, sizeof(filename_hls),",
          "new_line_content": "        const char *proto = avio_find_protocol_name(c->dirname);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "snprintf",
          "new_api": "get_hls_playlist_name",
          "old_text": "snprintf(temp_filename_hls, sizeof(temp_filename_hls), use_rename ? \"%s.tmp\" : \"%s\", filename_hls)",
          "new_text": "get_hls_playlist_name(filename_hls, sizeof(filename_hls),\n                              c->dirname, representation_id)",
          "old_line_content": "        snprintf(temp_filename_hls, sizeof(temp_filename_hls), use_rename ? \"%s.tmp\" : \"%s\", filename_hls);",
          "new_line_content": "        get_hls_playlist_name(filename_hls, sizeof(filename_hls),",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "dashenc_io_open",
          "new_api": "snprintf",
          "old_text": "dashenc_io_open(s, &c->m3u8_out, temp_filename_hls, &http_opts)",
          "new_text": "snprintf(temp_filename_hls, sizeof(temp_filename_hls), use_rename ? \"%s.tmp\" : \"%s\", filename_hls)",
          "old_line_content": "        dashenc_io_open(s, &c->m3u8_out, temp_filename_hls, &http_opts);",
          "new_line_content": "        snprintf(temp_filename_hls, sizeof(temp_filename_hls), use_rename ? \"%s.tmp\" : \"%s\", filename_hls);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "ff_hls_write_playlist_header",
          "new_api": "lrint",
          "old_text": "ff_hls_write_playlist_header(c->m3u8_out, 6, -1, target_duration,\n                                     start_number, PLAYLIST_TYPE_NONE)",
          "new_text": "lrint(duration)",
          "old_line_content": "        ff_hls_write_playlist_header(c->m3u8_out, 6, -1, target_duration,",
          "new_line_content": "                target_duration = lrint(duration);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "ff_hls_write_init_file",
          "new_api": "ff_hls_write_playlist_header",
          "old_text": "ff_hls_write_init_file(c->m3u8_out, os->initfile, c->single_file,\n                               os->init_range_length, os->init_start_pos)",
          "new_text": "ff_hls_write_playlist_header(c->m3u8_out, 6, -1, target_duration,\n                                     start_number, PLAYLIST_TYPE_NONE)",
          "old_line_content": "        ff_hls_write_init_file(c->m3u8_out, os->initfile, c->single_file,",
          "new_line_content": "        ff_hls_write_playlist_header(c->m3u8_out, 6, -1, target_duration,",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "avpriv_io_move",
          "new_api": "dashenc_io_close",
          "old_text": "avpriv_io_move(temp_filename_hls, filename_hls)",
          "new_text": "dashenc_io_close(s, &c->m3u8_out, temp_filename_hls)",
          "old_line_content": "            if (avpriv_io_move(temp_filename_hls, filename_hls) < 0) {",
          "new_line_content": "        dashenc_io_close(s, &c->m3u8_out, temp_filename_hls);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "avio_printf",
          "new_api": "av_dict_get",
          "old_text": "avio_printf(out, \">\\n\")",
          "new_text": "av_dict_get(as->metadata, \"language\", NULL, 0)",
          "old_line_content": "    avio_printf(out, \">\\n\");",
          "new_line_content": "    lang = av_dict_get(as->metadata, \"language\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "av_dict_get",
          "new_api": "avio_printf",
          "old_text": "av_dict_get(as->metadata, \"role\", NULL, 0)",
          "new_text": "avio_printf(out, \" lang=\\\"%s\\\"\", lang->value)",
          "old_line_content": "    role = av_dict_get(as->metadata, \"role\", NULL, 0);",
          "new_line_content": "        avio_printf(out, \" lang=\\\"%s\\\"\", lang->value);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "output_segment_list",
          "new_api": "avio_printf",
          "old_text": "output_segment_list(os, out, s, i, final)",
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t<AudioChannelConfiguration schemeIdUri=\\\"urn:mpeg:dash:23003:3:audio_channel_configuration:2011\\\" value=\\\"%d\\\" />\\n\",\n                s->streams[i]->codecpar->channels)",
          "old_line_content": "        output_segment_list(os, out, s, i, final);",
          "new_line_content": "            avio_printf(out, \"\\t\\t\\t\\t<AudioChannelConfiguration schemeIdUri=\\\"urn:mpeg:dash:23003:3:audio_channel_configuration:2011\\\" value=\\\"%d\\\" />\\n\",",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "avio_printf",
          "new_api": "output_segment_list",
          "old_text": "avio_printf(out, \"\\t\\t</AdaptationSet>\\n\")",
          "new_text": "output_segment_list(os, out, s, i, final)",
          "old_line_content": "    avio_printf(out, \"\\t\\t</AdaptationSet>\\n\");",
          "new_line_content": "        output_segment_list(os, out, s, i, final);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "strcspn",
          "new_api": "add_adaptation_set",
          "old_text": "strcspn(p, \",\")",
          "new_text": "add_adaptation_set(s, &as, AVMEDIA_TYPE_UNKNOWN)",
          "old_line_content": "            n = strcspn(p, \",\");",
          "new_line_content": "            if ((ret = add_adaptation_set(s, &as, AVMEDIA_TYPE_UNKNOWN)) < 0)",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "AVERROR",
          "new_api": "strtol",
          "old_text": "AVERROR(EINVAL)",
          "new_text": "strtol(idx_str, &end_str, 10)",
          "old_line_content": "                    return AVERROR(EINVAL);",
          "new_line_content": "                i = strtol(idx_str, &end_str, 10);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "av_dict_get",
          "new_api": "avio_find_protocol_name",
          "old_text": "av_dict_get(s->metadata, \"title\", NULL, 0)",
          "new_text": "avio_find_protocol_name(s->filename)",
          "old_line_content": "    AVDictionaryEntry *title = av_dict_get(s->metadata, \"title\", NULL, 0);",
          "new_line_content": "    const char *proto = avio_find_protocol_name(s->filename);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "set_http_options",
          "new_api": "av_log",
          "old_text": "set_http_options(&opts, c)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Cannot use rename on non file protocol, this may lead to races and temporary partial files\\n\")",
          "old_line_content": "    set_http_options(&opts, c);",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"Cannot use rename on non file protocol, this may lead to races and temporary partial files\\n\");",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "av_log",
          "new_api": "set_http_options",
          "old_text": "av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename)",
          "new_text": "set_http_options(&opts, c)",
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename);",
          "new_line_content": "    set_http_options(&opts, c);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "format_date_now",
          "new_api": "avio_printf",
          "old_text": "format_date_now(c->availability_start_time, sizeof(c->availability_start_time))",
          "new_text": "avio_printf(out, \"\\tminimumUpdatePeriod=\\\"PT%\"PRId64\"S\\\"\\n\", update_period)",
          "old_line_content": "            format_date_now(c->availability_start_time, sizeof(c->availability_start_time));",
          "new_line_content": "        avio_printf(out, \"\\tminimumUpdatePeriod=\\\"PT%\"PRId64\"S\\\"\\n\", update_period);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "avio_printf",
          "new_api": "format_date_now",
          "old_text": "avio_printf(out, \"\\tavailabilityStartTime=\\\"%s\\\"\\n\", c->availability_start_time)",
          "new_text": "format_date_now(c->availability_start_time, sizeof(c->availability_start_time))",
          "old_line_content": "            avio_printf(out, \"\\tavailabilityStartTime=\\\"%s\\\"\\n\", c->availability_start_time);",
          "new_line_content": "            format_date_now(c->availability_start_time, sizeof(c->availability_start_time));",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "write_time",
          "new_api": "avio_printf",
          "old_text": "write_time(out, c->last_duration * c->window_size)",
          "new_text": "avio_printf(out, \"\\tpublishTime=\\\"%s\\\"\\n\", now_str)",
          "old_line_content": "            write_time(out, c->last_duration * c->window_size);",
          "new_line_content": "            avio_printf(out, \"\\tpublishTime=\\\"%s\\\"\\n\", now_str);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "xmlescape",
          "new_api": "avio_printf",
          "old_text": "xmlescape(title->value)",
          "new_text": "avio_printf(out, \"\\\">\\n\")",
          "old_line_content": "        char *escaped = xmlescape(title->value);",
          "new_line_content": "    avio_printf(out, \"\\\">\\n\");",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "write_time",
          "new_api": "FFMAX",
          "old_text": "write_time(out, start_time)",
          "new_text": "FFMAX(os->nb_segments - c->window_size, 0)",
          "old_line_content": "        write_time(out, start_time);",
          "new_line_content": "        int start_index = FFMAX(os->nb_segments - c->window_size, 0);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "avio_printf",
          "new_api": "av_rescale_q",
          "old_text": "avio_printf(out, \"\\\">\\n\")",
          "new_text": "av_rescale_q(os->segments[start_index]->time, s->streams[0]->time_base, AV_TIME_BASE_Q)",
          "old_line_content": "        avio_printf(out, \"\\\">\\n\");",
          "new_line_content": "        int64_t start_time = av_rescale_q(os->segments[start_index]->time, s->streams[0]->time_base, AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "avio_printf",
          "new_api": "write_time",
          "old_text": "avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"PT0.0S\\\">\\n\")",
          "new_text": "write_time(out, start_time)",
          "old_line_content": "        avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"PT0.0S\\\">\\n\");",
          "new_line_content": "        write_time(out, start_time);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "avio_printf",
          "new_api": "write_adaptation_set",
          "old_text": "avio_printf(out, \"\\t</Period>\\n\")",
          "new_text": "write_adaptation_set(s, out, i, final)",
          "old_line_content": "    avio_printf(out, \"\\t</Period>\\n\");",
          "new_line_content": "        if ((ret = write_adaptation_set(s, out, i, final)) < 0)",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "avio_flush",
          "new_api": "avio_printf",
          "old_text": "avio_flush(out)",
          "new_text": "avio_printf(out, \"\\t<UTCTiming schemeIdUri=\\\"urn:mpeg:dash:utc:http-xsdate:2014\\\" value=\\\"%s\\\"/>\\n\", c->utc_timing_url)",
          "old_line_content": "    avio_flush(out);",
          "new_line_content": "        avio_printf(out, \"\\t<UTCTiming schemeIdUri=\\\"urn:mpeg:dash:utc:http-xsdate:2014\\\" value=\\\"%s\\\"/>\\n\", c->utc_timing_url);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "avpriv_io_move",
          "new_api": "dashenc_io_close",
          "old_text": "avpriv_io_move(temp_filename, s->filename)",
          "new_text": "dashenc_io_close(s, &c->mpd_out, temp_filename)",
          "old_line_content": "        if ((ret = avpriv_io_move(temp_filename, s->filename)) < 0)",
          "new_line_content": "    dashenc_io_close(s, &c->mpd_out, temp_filename);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "avio_open2",
          "new_api": "snprintf",
          "old_text": "avio_open2(&out, temp_filename, AVIO_FLAG_WRITE, NULL, &opts)",
          "new_text": "snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", filename_hls)",
          "old_line_content": "        ret = avio_open2(&out, temp_filename, AVIO_FLAG_WRITE, NULL, &opts);",
          "new_line_content": "        snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", filename_hls);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "av_log",
          "new_api": "set_http_options",
          "old_text": "av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename)",
          "new_text": "set_http_options(&opts, c)",
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename);",
          "new_line_content": "        set_http_options(&opts, c);",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "av_dict_free",
          "new_api": "av_log",
          "old_text": "av_dict_free(&opts)",
          "new_text": "av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename)",
          "old_line_content": "        av_dict_free(&opts);",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "FFMAX",
          "new_api": "get_hls_playlist_name",
          "old_text": "FFMAX(st->codecpar->bit_rate, max_audio_bitrate)",
          "new_text": "get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i)",
          "old_line_content": "            max_audio_bitrate = FFMAX(st->codecpar->bit_rate, max_audio_bitrate);",
          "new_line_content": "            get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "avio_close",
          "new_api": "get_hls_playlist_name",
          "old_text": "avio_close(out)",
          "new_text": "get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i)",
          "old_line_content": "        avio_close(out);",
          "new_line_content": "            get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "strrchr",
          "new_api": "av_strlcpy",
          "old_text": "strrchr(basename, '.')",
          "new_text": "av_strlcpy(basename, s->filename, sizeof(basename))",
          "old_line_content": "    ptr = strrchr(basename, '.');",
          "new_line_content": "        av_strlcpy(basename, s->filename, sizeof(basename));",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "avformat_alloc_context",
          "new_api": "dict_copy_entry",
          "old_text": "avformat_alloc_context()",
          "new_text": "dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"language\")",
          "old_line_content": "        ctx = avformat_alloc_context();",
          "new_line_content": "        dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"language\");",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "set_http_options",
          "new_api": "ff_dash_fill_tmpl_params",
          "old_text": "set_http_options(&opts, c)",
          "new_text": "ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->init_seg_name, i, 0, os->bit_rate, 0)",
          "old_line_content": "        set_http_options(&opts, c);",
          "new_line_content": "            ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->init_seg_name, i, 0, os->bit_rate, 0);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "av_dict_free",
          "new_api": "io_open",
          "old_text": "av_dict_free(&opts)",
          "new_text": "s->io_open(s, &os->out, filename, AVIO_FLAG_WRITE, &opts)",
          "old_line_content": "        av_dict_free(&opts);",
          "new_line_content": "        ret = s->io_open(s, &os->out, filename, AVIO_FLAG_WRITE, &opts);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "strcmp",
          "new_api": "av_dict_free",
          "old_text": "strcmp(os->format_name, \"mp4\")",
          "new_text": "av_dict_free(&opts)",
          "old_line_content": "        if (!strcmp(os->format_name, \"mp4\")) {",
          "new_line_content": "        av_dict_free(&opts);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "av_dict_set_int",
          "new_api": "strcmp",
          "old_text": "av_dict_set_int(&opts, \"cluster_time_limit\", c->min_seg_duration / 1000, 0)",
          "new_text": "strcmp(os->format_name, \"mp4\")",
          "old_line_content": "            av_dict_set_int(&opts, \"cluster_time_limit\", c->min_seg_duration / 1000, 0);",
          "new_line_content": "        if (!strcmp(os->format_name, \"mp4\")) {",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "av_dict_set_int",
          "new_api": "av_dict_set",
          "old_text": "av_dict_set_int(&opts, \"cluster_size_limit\", 5 * 1024 * 1024, 0)",
          "new_text": "av_dict_set(&opts, \"movflags\", \"frag_custom+dash+delay_moov\", 0)",
          "old_line_content": "            av_dict_set_int(&opts, \"cluster_size_limit\", 5 * 1024 * 1024, 0); // set a large cluster size limit",
          "new_line_content": "            av_dict_set(&opts, \"movflags\", \"frag_custom+dash+delay_moov\", 0);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "avformat_init_output",
          "new_api": "av_dict_set_int",
          "old_text": "avformat_init_output(ctx, &opts)",
          "new_text": "av_dict_set_int(&opts, \"dash_track_number\", i + 1, 0)",
          "old_line_content": "        if ((ret = avformat_init_output(ctx, &opts)) < 0)",
          "new_line_content": "            av_dict_set_int(&opts, \"dash_track_number\", i + 1, 0);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "avio_flush",
          "new_api": "avformat_init_output",
          "old_text": "avio_flush(ctx->pb)",
          "new_text": "avformat_init_output(ctx, &opts)",
          "old_line_content": "        avio_flush(ctx->pb);",
          "new_line_content": "        if ((ret = avformat_init_output(ctx, &opts)) < 0)",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "av_log",
          "new_api": "avio_flush",
          "old_text": "av_log(s, AV_LOG_VERBOSE, \"Representation %d init segment will be written to: %s\\n\", i, filename)",
          "new_text": "avio_flush(ctx->pb)",
          "old_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Representation %d init segment will be written to: %s\\n\", i, filename);",
          "new_line_content": "        avio_flush(ctx->pb);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "av_strlcpy",
          "new_api": "av_mallocz",
          "old_text": "av_strlcpy(seg->file, file, sizeof(seg->file))",
          "new_text": "av_mallocz(sizeof(*seg))",
          "old_line_content": "    av_strlcpy(seg->file, file, sizeof(seg->file));",
          "new_line_content": "    seg = av_mallocz(sizeof(*seg));",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "avio_seek",
          "new_api": "io_open",
          "old_text": "avio_seek(pb, pos, SEEK_SET)",
          "new_text": "s->io_open(s, &pb, full_path, AVIO_FLAG_READ, NULL)",
          "old_line_content": "    if (avio_seek(pb, pos, SEEK_SET) != pos) {",
          "new_line_content": "    ret = s->io_open(s, &pb, full_path, AVIO_FLAG_READ, NULL);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "avio_read",
          "new_api": "ff_format_io_close",
          "old_text": "avio_read(pb, buf, 8)",
          "new_text": "ff_format_io_close(s, &pb)",
          "old_line_content": "    ret = avio_read(pb, buf, 8);",
          "new_line_content": "        ff_format_io_close(s, &pb);",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "MKTAG",
          "new_api": "ff_format_io_close",
          "old_text": "MKTAG('s', 'i', 'd', 'x')",
          "new_text": "ff_format_io_close(s, &pb)",
          "old_line_content": "    if (AV_RL32(&buf[4]) != MKTAG('s', 'i', 'd', 'x'))",
          "new_line_content": "    ff_format_io_close(s, &pb);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "AVERROR",
          "new_api": "av_malloc",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_malloc(par->extradata_size)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    extradata = av_malloc(par->extradata_size);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "set_http_options",
          "new_api": "ff_dash_fill_tmpl_params",
          "old_text": "set_http_options(&opts, c)",
          "new_text": "ff_dash_fill_tmpl_params(filename, sizeof(filename), c->media_seg_name, i, os->segment_index, os->bit_rate, os->start_pts)",
          "old_line_content": "            set_http_options(&opts, c);",
          "new_line_content": "            ff_dash_fill_tmpl_params(filename, sizeof(filename), c->media_seg_name, i, os->segment_index, os->bit_rate, os->start_pts);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "dashenc_io_open",
          "new_api": "snprintf",
          "old_text": "dashenc_io_open(s, &os->out, temp_path, &opts)",
          "new_text": "snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, filename)",
          "old_line_content": "            ret = dashenc_io_open(s, &os->out, temp_path, &opts);",
          "new_line_content": "            snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, filename);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "av_dict_free",
          "new_api": "dashenc_io_open",
          "old_text": "av_dict_free(&opts)",
          "new_text": "dashenc_io_open(s, &os->out, temp_path, &opts)",
          "old_line_content": "            av_dict_free(&opts);",
          "new_line_content": "            ret = dashenc_io_open(s, &os->out, temp_path, &opts);",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "snprintf",
          "new_api": "strcmp",
          "old_text": "snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, os->initfile)",
          "new_text": "strcmp(os->format_name, \"mp4\")",
          "old_line_content": "            snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, os->initfile);",
          "new_line_content": "            if (!strcmp(os->format_name, \"mp4\"))",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "flush_dynbuf",
          "new_api": "snprintf",
          "old_text": "flush_dynbuf(os, &range_length)",
          "new_text": "snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, os->initfile)",
          "old_line_content": "        ret = flush_dynbuf(os, &range_length);",
          "new_line_content": "            snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, os->initfile);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "avpriv_io_move",
          "new_api": "dashenc_io_close",
          "old_text": "avpriv_io_move(temp_path, full_path)",
          "new_text": "dashenc_io_close(s, &os->out, temp_path)",
          "old_line_content": "                ret = avpriv_io_move(temp_path, full_path);",
          "new_line_content": "            dashenc_io_close(s, &os->out, temp_path);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "memmove",
          "new_api": "av_free",
          "old_text": "memmove(os->segments, os->segments + remove, os->nb_segments * sizeof(*os->segments))",
          "new_text": "av_free(os->segments[j])",
          "old_line_content": "                memmove(os->segments, os->segments + remove, os->nb_segments * sizeof(*os->segments));",
          "new_line_content": "                    av_free(os->segments[j]);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "unlink",
          "new_api": "snprintf",
          "old_text": "unlink(s->filename)",
          "new_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile)",
          "old_line_content": "        unlink(s->filename);",
          "new_line_content": "            snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1026,
          "old_api": null,
          "new_api": "write_manifest",
          "old_text": null,
          "new_text": "write_manifest(s, 0)",
          "old_line_content": "    return ret;",
          "new_line_content": "    ret = write_manifest(s, 0);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_VERBOSE, \"Manifest written to: %s\\n\", s->filename)",
          "old_line_content": "",
          "new_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Manifest written to: %s\\n\", s->filename);",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": null,
          "new_api": "av_cmp_q",
          "old_text": null,
          "new_text": "av_cmp_q(as->min_frame_rate, as->max_frame_rate)",
          "old_line_content": "    if (lang)",
          "new_line_content": "    if (as->media_type == AVMEDIA_TYPE_VIDEO && as->max_frame_rate.num && !as->ambiguous_frame_rate && av_cmp_q(as->min_frame_rate, as->max_frame_rate) < 0)",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \">\\n\")",
          "old_line_content": "    if (role)",
          "new_line_content": "    avio_printf(out, \">\\n\");",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(as->metadata, \"role\", NULL, 0)",
          "old_line_content": "",
          "new_line_content": "    role = av_dict_get(as->metadata, \"role\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t<Role schemeIdUri=\\\"urn:mpeg:dash:role:2011\\\" value=\\\"%s\\\"/>\\n\", role->value)",
          "old_line_content": "        OutputStream *os = &c->streams[i];",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t<Role schemeIdUri=\\\"urn:mpeg:dash:role:2011\\\" value=\\\"%s\\\"/>\\n\", role->value);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "av_reallocp",
          "old_text": null,
          "new_text": "av_reallocp(&os->segments, sizeof(*os->segments) *\n                               os->segments_size)",
          "old_line_content": "            os->nb_segments = 0;",
          "new_line_content": "        if ((err = av_reallocp(&os->segments, sizeof(*os->segments) *",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    seg->duration = duration;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "av_strlcpy",
          "old_text": null,
          "new_text": "av_strlcpy(seg->file, file, sizeof(seg->file))",
          "old_line_content": "    if (seg->time < 0) { // If pts<0, it is expected to be cut away with an edit list",
          "new_line_content": "    av_strlcpy(seg->file, file, sizeof(seg->file));",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \">\\n\")",
          "old_line_content": "                i, os->format_name, os->codec_str, os->bandwidth_str, s->streams[i]->codecpar->sample_rate);",
          "new_line_content": "            avio_printf(out, \">\\n\");",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t<Representation id=\\\"%d\\\" mimeType=\\\"audio/%s\\\" codecs=\\\"%s\\\"%s audioSamplingRate=\\\"%d\\\">\\n\",\n                i, os->format_name, os->codec_str, os->bandwidth_str, s->streams[i]->codecpar->sample_rate)",
          "old_line_content": "                s->streams[i]->codecpar->channels);",
          "new_line_content": "            avio_printf(out, \"\\t\\t\\t<Representation id=\\\"%d\\\" mimeType=\\\"audio/%s\\\" codecs=\\\"%s\\\"%s audioSamplingRate=\\\"%d\\\">\\n\",",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t</Representation>\\n\")",
          "old_line_content": "",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t</Representation>\\n\");",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t</AdaptationSet>\\n\")",
          "old_line_content": "}",
          "new_line_content": "    avio_printf(out, \"\\t\\t</AdaptationSet>\\n\");",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "av_realloc",
          "old_text": null,
          "new_text": "av_realloc(c->as, sizeof(*c->as) * (c->nb_as + 1))",
          "old_line_content": "    c->as = mem;",
          "new_line_content": "    void *mem = av_realloc(c->as, sizeof(*c->as) * (c->nb_as + 1));",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "avio_wb32",
          "old_text": null,
          "new_text": "avio_wb32(pb, 0)",
          "old_line_content": "}",
          "new_line_content": "    avio_wb32(pb, 0); /* minor */",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "ffio_wfourcc",
          "old_text": null,
          "new_text": "ffio_wfourcc(pb, \"msdh\")",
          "old_line_content": "",
          "new_line_content": "    ffio_wfourcc(pb, \"msdh\");",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "ffio_wfourcc",
          "old_text": null,
          "new_text": "ffio_wfourcc(pb, \"msix\")",
          "old_line_content": "static void find_index_range(AVFormatContext *s, const char *full_path,",
          "new_line_content": "    ffio_wfourcc(pb, \"msix\");",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(*as, 0, sizeof(**as))",
          "old_line_content": "    return 0;",
          "new_line_content": "    memset(*as, 0, sizeof(**as));",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "avio_seek",
          "old_text": null,
          "new_text": "avio_seek(pb, pos, SEEK_SET)",
          "old_line_content": "    }",
          "new_line_content": "    if (avio_seek(pb, pos, SEEK_SET) != pos) {",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "avio_read",
          "old_text": null,
          "new_text": "avio_read(pb, buf, 8)",
          "old_line_content": "        return;",
          "new_line_content": "    ret = avio_read(pb, buf, 8);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Stream %d is already assigned to an AdaptationSet\\n\", i)",
          "old_line_content": "    os->as_idx = as_idx;",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"Stream %d is already assigned to an AdaptationSet\\n\", i);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('s', 'i', 'd', 'x')",
          "old_line_content": "}",
          "new_line_content": "    if (AV_RL32(&buf[4]) != MKTAG('s', 'i', 'd', 'x'))",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "AV_RB32",
          "old_text": null,
          "new_text": "AV_RB32(&buf[0])",
          "old_line_content": "static int update_stream_extradata(AVFormatContext *s, OutputStream *os,",
          "new_line_content": "    *index_length = AV_RB32(&buf[0]);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(extradata, par->extradata, par->extradata_size)",
          "old_line_content": "    os->ctx->streams[0]->codecpar->extradata_size = par->extradata_size;",
          "new_line_content": "    memcpy(extradata, par->extradata, par->extradata_size);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "add_adaptation_set",
          "old_text": null,
          "new_text": "add_adaptation_set(s, &as, s->streams[i]->codecpar->codec_type)",
          "old_line_content": "",
          "new_line_content": "            if ((ret = add_adaptation_set(s, &as, s->streams[i]->codecpar->codec_type)) < 0)",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(as->id, sizeof(as->id), \"%d\", i)",
          "old_line_content": "        }",
          "new_line_content": "            snprintf(as->id, sizeof(as->id), \"%d\", i);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "set_codec_str",
          "old_text": null,
          "new_text": "set_codec_str(s, par, os->codec_str, sizeof(os->codec_str))",
          "old_line_content": "}",
          "new_line_content": "    set_codec_str(s, par, os->codec_str, sizeof(os->codec_str));",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "avio_find_protocol_name",
          "old_text": null,
          "new_text": "avio_find_protocol_name(s->filename)",
          "old_line_content": "    int cur_flush_segment_index = 0;",
          "new_line_content": "    const char *proto = avio_find_protocol_name(s->filename);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "av_strstart",
          "old_text": null,
          "new_text": "av_strstart(p, \"id=\", &p)",
          "old_line_content": "                return ret;",
          "new_line_content": "        } else if (state == new_set && av_strstart(p, \"id=\", &p)) {",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(proto, \"file\")",
          "old_line_content": "    if (stream >= 0)",
          "new_line_content": "    int use_rename = proto && !strcmp(proto, \"file\");",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "strcspn",
          "old_text": null,
          "new_text": "strcspn(p, \",\")",
          "old_line_content": "            p += n;",
          "new_line_content": "            n = strcspn(p, \",\");",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(as->id, sizeof(as->id), \"%.*s\", n, p)",
          "old_line_content": "            if (*p)",
          "new_line_content": "            snprintf(as->id, sizeof(as->id), \"%.*s\", n, p);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "av_strstart",
          "old_text": null,
          "new_text": "av_strstart(p, \"streams=\", &p)",
          "old_line_content": "            AdaptationSet *as = &c->as[c->nb_as - 1];",
          "new_line_content": "        } else if (state == parse_id && av_strstart(p, \"streams=\", &p)) {",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "strcspn",
          "old_text": null,
          "new_text": "strcspn(p, \" ,\")",
          "old_line_content": "",
          "new_line_content": "            n = strcspn(p, \" ,\");",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(idx_str, sizeof(idx_str), \"%.*s\", n, p)",
          "old_line_content": "            // if value is \"a\" or \"v\", map all streams of that type",
          "new_line_content": "            snprintf(idx_str, sizeof(idx_str), \"%.*s\", n, p);",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_DEBUG, \"Map all streams of type %s\\n\", idx_str)",
          "old_line_content": "                    if (s->streams[i]->codecpar->codec_type != type)",
          "new_line_content": "                av_log(s, AV_LOG_DEBUG, \"Map all streams of type %s\\n\", idx_str);",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "flush_init_segment",
          "old_text": null,
          "new_text": "flush_init_segment(s, os)",
          "old_line_content": "        if (!c->single_file) {",
          "new_line_content": "            flush_init_segment(s, os);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "adaptation_set_add_stream",
          "old_text": null,
          "new_text": "adaptation_set_add_stream(s, c->nb_as, i)",
          "old_line_content": "            } else { // select single stream",
          "new_line_content": "                    if ((ret = adaptation_set_add_stream(s, c->nb_as, i)) < 0)",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(temp_path, sizeof(temp_path), use_rename ? \"%s.tmp\" : \"%s\", full_path)",
          "old_line_content": "            if (ret < 0)",
          "new_line_content": "            snprintf(temp_path, sizeof(temp_path), use_rename ? \"%s.tmp\" : \"%s\", full_path);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "set_http_options",
          "old_text": null,
          "new_text": "set_http_options(&opts, c)",
          "old_line_content": "                break;",
          "new_line_content": "            set_http_options(&opts, c);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "                    return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&opts)",
          "old_line_content": "        } else {",
          "new_line_content": "            av_dict_free(&opts);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_DEBUG, \"Map stream %d\\n\", i)",
          "old_line_content": "                    as->media_type = s->streams[i]->codecpar->codec_type;",
          "new_line_content": "                av_log(s, AV_LOG_DEBUG, \"Map stream %d\\n\", i);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "write_styp",
          "old_text": null,
          "new_text": "write_styp(os->ctx->pb)",
          "old_line_content": "        }",
          "new_line_content": "                write_styp(os->ctx->pb);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "flush_dynbuf",
          "old_text": null,
          "new_text": "flush_dynbuf(os, &range_length)",
          "old_line_content": "        os->packets_written = 0;",
          "new_line_content": "        ret = flush_dynbuf(os, &range_length);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "adaptation_set_add_stream",
          "old_text": null,
          "new_text": "adaptation_set_add_stream(s, c->nb_as, i)",
          "old_line_content": "",
          "new_line_content": "                if ((ret = adaptation_set_add_stream(s, c->nb_as, i)) < 0)",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(http_url_context)",
          "old_line_content": "#endif",
          "new_line_content": "        av_assert0(http_url_context);",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": null,
          "new_api": "avio_flush",
          "old_text": null,
          "new_text": "avio_flush(*pb)",
          "old_line_content": "    }",
          "new_line_content": "        avio_flush(*pb);",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": null,
          "new_api": "ffurl_shutdown",
          "old_text": null,
          "new_text": "ffurl_shutdown(http_url_context, AVIO_FLAG_WRITE)",
          "old_line_content": "}",
          "new_line_content": "        ffurl_shutdown(http_url_context, AVIO_FLAG_WRITE);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "find_index_range",
          "old_text": null,
          "new_text": "find_index_range(s, full_path, os->pos, &index_length)",
          "old_line_content": "",
          "new_line_content": "            find_index_range(s, full_path, os->pos, &index_length);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "            return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "avpriv_io_move",
          "old_text": null,
          "new_text": "avpriv_io_move(temp_path, full_path)",
          "old_line_content": "            }",
          "new_line_content": "                ret = avpriv_io_move(temp_path, full_path);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "av_strlcpy",
          "old_text": null,
          "new_text": "av_strlcpy(str, codecs[i].str, size)",
          "old_line_content": "",
          "new_line_content": "            av_strlcpy(str, codecs[i].str, size);",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Stream %d is not mapped to an AdaptationSet\\n\", i)",
          "old_line_content": "    }",
          "new_line_content": "            av_log(s, AV_LOG_ERROR, \"Stream %d is not mapped to an AdaptationSet\\n\", i);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    return 0;",
          "new_line_content": "            return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(os->max_pts - os->start_pts,\n                                                                                       st->time_base,\n                                                                                       AV_TIME_BASE_Q)",
          "old_line_content": "            if (bitrate >= 0) {",
          "new_line_content": "            int64_t bitrate = (int64_t) range_length * 8 * AV_TIME_BASE / av_rescale_q(os->max_pts - os->start_pts,",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),\n                     \" bandwidth=\\\"%d\\\"\", os->bit_rate)",
          "old_line_content": "        }",
          "new_line_content": "                snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "add_segment",
          "old_text": null,
          "new_text": "add_segment(os, filename, os->start_pts, os->max_pts - os->start_pts, os->pos, range_length, index_length)",
          "old_line_content": "        os->pos += range_length;",
          "new_line_content": "        add_segment(os, filename, os->start_pts, os->max_pts - os->start_pts, os->pos, range_length, index_length);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_VERBOSE, \"Representation %d media segment %d written to: %s\\n\", i, os->segment_index, full_path)",
          "old_line_content": "    }",
          "new_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Representation %d media segment %d written to: %s\\n\", i, os->segment_index, full_path);",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "av_codec_get_tag",
          "old_text": null,
          "new_text": "av_codec_get_tag(tags, par->codec_id)",
          "old_line_content": "    if (size < 5)",
          "new_line_content": "    tag = av_codec_get_tag(tags, par->codec_id);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(proto, \"file\")",
          "old_line_content": "    AVDictionary *opts = NULL;",
          "new_line_content": "    int use_rename = proto && !strcmp(proto, \"file\");",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(s->metadata, \"title\", NULL, 0)",
          "old_line_content": "    if (!use_rename && !warned_non_file++)",
          "new_line_content": "    AVDictionaryEntry *title = av_dict_get(s->metadata, \"title\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "AV_WL32",
          "old_text": null,
          "new_text": "AV_WL32(str, tag)",
          "old_line_content": "        uint32_t oti;",
          "new_line_content": "    AV_WL32(str, tag);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", s->filename)",
          "old_line_content": "    if (ret < 0) {",
          "new_line_content": "    snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", s->filename);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "av_codec_get_tag",
          "old_text": null,
          "new_text": "av_codec_get_tag(tags, par->codec_id)",
          "old_line_content": "        else",
          "new_line_content": "        oti = av_codec_get_tag(tags, par->codec_id);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "dashenc_io_open",
          "old_text": null,
          "new_text": "dashenc_io_open(s, &c->mpd_out, temp_filename, &opts)",
          "old_line_content": "        return ret;",
          "new_line_content": "    ret = dashenc_io_open(s, &c->mpd_out, temp_filename, &opts);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "av_strlcatf",
          "old_text": null,
          "new_text": "av_strlcatf(str, size, \".%02\"PRIx32, oti)",
          "old_line_content": "",
          "new_line_content": "            av_strlcatf(str, size, \".%02\"PRIx32, oti);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename)",
          "old_line_content": "    out = c->mpd_out;",
          "new_line_content": "        av_log(s, AV_LOG_ERROR, \"Unable to open %s for writing\\n\", temp_filename);",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->segments[j]->file)",
          "old_line_content": "                }",
          "new_line_content": "                    snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->segments[j]->file);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(filename)",
          "old_line_content": "                os->nb_segments -= remove;",
          "new_line_content": "                    unlink(filename);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m', 'p', '4', 'a')",
          "old_line_content": "                if (aot == 31)",
          "new_line_content": "        if (tag == MKTAG('m', 'p', '4', 'a')) {",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&opts)",
          "old_line_content": "                \"\\txmlns=\\\"urn:mpeg:dash:schema:mpd:2011\\\"\\n\"",
          "new_line_content": "    av_dict_free(&opts);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\")",
          "old_line_content": "                \"\\txmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\"",
          "new_line_content": "    avio_printf(out, \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\");",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"<MPD xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n                \"\\txmlns=\\\"urn:mpeg:dash:schema:mpd:2011\\\"\\n\"\n                \"\\txmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\"\n                \"\\txsi:schemaLocation=\\\"urn:mpeg:DASH:schema:MPD:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd\\\"\\n\"\n                \"\\tprofiles=\\\"urn:mpeg:dash:profile:isoff-live:2011\\\"\\n\"\n                \"\\ttype=\\\"%s\\\"\\n\", final ? \"static\" : \"dynamic\")",
          "old_line_content": "                \"\\txsi:schemaLocation=\\\"urn:mpeg:DASH:schema:MPD:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd\\\"\\n\"",
          "new_line_content": "    avio_printf(out, \"<MPD xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(os->segments, os->segments + remove, os->nb_segments * sizeof(*os->segments))",
          "old_line_content": "    }",
          "new_line_content": "                memmove(os->segments, os->segments + remove, os->nb_segments * sizeof(*os->segments));",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "av_strlcatf",
          "old_text": null,
          "new_text": "av_strlcatf(str, size, \".%d\", aot)",
          "old_line_content": "            // Unimplemented, should output ProfileLevelIndication as a decimal number",
          "new_line_content": "                av_strlcatf(str, size, \".%d\", aot);",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "MKTAG",
          "old_text": null,
          "new_text": "MKTAG('m', 'p', '4', 'v')",
          "old_line_content": "        }",
          "new_line_content": "        } else if (tag == MKTAG('m', 'p', '4', 'v')) {",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": null,
          "new_api": "write_manifest",
          "old_text": null,
          "new_text": "write_manifest(s, final)",
          "old_line_content": "",
          "new_line_content": "        ret = write_manifest(s, final);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING, \"Incomplete RFC 6381 codec string for mp4v\\n\")",
          "old_line_content": "        uint8_t *tmpbuf = NULL;",
          "new_line_content": "            av_log(s, AV_LOG_WARNING, \"Incomplete RFC 6381 codec string for mp4v\\n\");",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\tmediaPresentationDuration=\\\"\")",
          "old_line_content": "    } else {",
          "new_line_content": "        avio_printf(out, \"\\tmediaPresentationDuration=\\\"\");",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(str, \"avc1\")",
          "old_line_content": "        int extradata_size = par->extradata_size;",
          "new_line_content": "    } else if (!strcmp(str, \"avc1\")) {",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "write_time",
          "old_text": null,
          "new_text": "write_time(out, c->total_duration)",
          "old_line_content": "        int64_t update_period = c->last_duration / AV_TIME_BASE;",
          "new_line_content": "        write_time(out, c->total_duration);",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\\"\\n\")",
          "old_line_content": "        char now_str[100];",
          "new_line_content": "        avio_printf(out, \"\\\"\\n\");",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "update_stream_extradata",
          "old_text": null,
          "new_text": "update_stream_extradata(s, os, st->codecpar)",
          "old_line_content": "",
          "new_line_content": "    ret = update_stream_extradata(s, os, st->codecpar);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\tsuggestedPresentationDelay=\\\"PT%\"PRId64\"S\\\"\\n\", c->last_duration / AV_TIME_BASE)",
          "old_line_content": "        }",
          "new_line_content": "        avio_printf(out, \"\\tsuggestedPresentationDelay=\\\"PT%\"PRId64\"S\\\"\\n\", c->last_duration / AV_TIME_BASE);",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "ff_isom_write_avcc",
          "old_text": null,
          "new_text": "ff_isom_write_avcc(pb, extradata, extradata_size)",
          "old_line_content": "            }",
          "new_line_content": "            if (ff_isom_write_avcc(pb, extradata, extradata_size) < 0) {",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "avio_close_dyn_buf",
          "old_text": null,
          "new_text": "avio_close_dyn_buf(pb, &extradata)",
          "old_line_content": "",
          "new_line_content": "            extradata_size = avio_close_dyn_buf(pb, &extradata);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "format_date_now",
          "old_text": null,
          "new_text": "format_date_now(now_str, sizeof(now_str))",
          "old_line_content": "        if (c->window_size && c->use_template) {",
          "new_line_content": "        format_date_now(now_str, sizeof(now_str));",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\ttimeShiftBufferDepth=\\\"\")",
          "old_line_content": "        }",
          "new_line_content": "            avio_printf(out, \"\\ttimeShiftBufferDepth=\\\"\");",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "av_strlcatf",
          "old_text": null,
          "new_text": "av_strlcatf(str, size, \".%02x%02x%02x\",\n                        extradata[1], extradata[2], extradata[3])",
          "old_line_content": "    }",
          "new_line_content": "            av_strlcatf(str, size, \".%02x%02x%02x\",",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "write_time",
          "old_text": null,
          "new_text": "write_time(out, c->last_duration * c->window_size)",
          "old_line_content": "    }",
          "new_line_content": "            write_time(out, c->last_duration * c->window_size);",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(tmpbuf)",
          "old_line_content": "",
          "new_line_content": "        av_free(tmpbuf);",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "write_time",
          "old_text": null,
          "new_text": "write_time(out, c->last_duration * 2)",
          "old_line_content": "    if (title) {",
          "new_line_content": "    write_time(out, c->last_duration * 2);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "xmlescape",
          "old_text": null,
          "new_text": "xmlescape(title->value)",
          "old_line_content": "    }",
          "new_line_content": "        char *escaped = xmlescape(title->value);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    // flush",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(escaped)",
          "old_line_content": "",
          "new_line_content": "        av_free(escaped);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t</ProgramInformation>\\n\")",
          "old_line_content": "        OutputStream *os = &c->streams[0];",
          "new_line_content": "    avio_printf(out, \"\\t</ProgramInformation>\\n\");",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "av_write_frame",
          "old_text": null,
          "new_text": "av_write_frame(os->ctx, NULL)",
          "old_line_content": "    // write out to file",
          "new_line_content": "    av_write_frame(os->ctx, NULL);",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "av_compare_ts",
          "old_text": null,
          "new_text": "av_compare_ts(pkt->pts - os->start_pts, st->time_base,\n                      c->min_seg_duration, AV_TIME_BASE_Q)",
          "old_line_content": "",
          "new_line_content": "        av_compare_ts(pkt->pts - os->start_pts, st->time_base,",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"\")",
          "old_line_content": "    } else {",
          "new_line_content": "        avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"\");",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "avio_write",
          "old_text": null,
          "new_text": "avio_write(os->out, buffer, *range_length)",
          "old_line_content": "    // re-open buffer",
          "new_line_content": "    avio_write(os->out, buffer, *range_length);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\\">\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        avio_printf(out, \"\\\">\\n\");",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"PT0.0S\\\">\\n\")",
          "old_line_content": "    for (i = 0; i < c->nb_as; i++) {",
          "new_line_content": "        avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"PT0.0S\\\">\\n\");",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(pkt->pts - os->first_pts,\n                                         st->time_base,\n                                         AV_TIME_BASE_Q)",
          "old_line_content": "",
          "new_line_content": "        c->total_duration = av_rescale_q(pkt->pts - os->first_pts,",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "avio_open_dyn_buf",
          "old_text": null,
          "new_text": "avio_open_dyn_buf(&os->ctx->pb)",
          "old_line_content": "static void set_http_options(AVDictionary **options, DASHContext *c)",
          "new_line_content": "    return avio_open_dyn_buf(&os->ctx->pb);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING,\n                       \"Segment durations differ too much, enable use_timeline \"\n                       \"and use_template, or keep a stricter keyframe interval\\n\")",
          "old_line_content": "            }",
          "new_line_content": "                av_log(s, AV_LOG_WARNING,",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(options, \"user_agent\", c->user_agent, 0)",
          "old_line_content": "}",
          "new_line_content": "        av_dict_set(options, \"user_agent\", c->user_agent, 0);",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "av_dict_set_int",
          "old_text": null,
          "new_text": "av_dict_set_int(options, \"multiple_requests\", 1, 0)",
          "old_line_content": "static void get_hls_playlist_name(char *playlist_name, int string_size,",
          "new_line_content": "        av_dict_set_int(options, \"multiple_requests\", 1, 0);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"</MPD>\\n\")",
          "old_line_content": "",
          "new_line_content": "    avio_printf(out, \"</MPD>\\n\");",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "avio_flush",
          "old_text": null,
          "new_text": "avio_flush(out)",
          "old_line_content": "    if (use_rename) {",
          "new_line_content": "    avio_flush(out);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": null,
          "new_api": "dash_flush",
          "old_text": null,
          "new_text": "dash_flush(s, 0, pkt->stream_index)",
          "old_line_content": "",
          "new_line_content": "        if ((ret = dash_flush(s, 0, pkt->stream_index)) < 0)",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(playlist_name, string_size, \"%smedia_%d.m3u8\", base_url, id)",
          "old_line_content": "}",
          "new_line_content": "        snprintf(playlist_name, string_size, \"%smedia_%d.m3u8\", base_url, id);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "avpriv_io_move",
          "old_text": null,
          "new_text": "avpriv_io_move(temp_filename, s->filename)",
          "old_line_content": "",
          "new_line_content": "        if ((ret = avpriv_io_move(temp_filename, s->filename)) < 0)",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(playlist_name, string_size, \"media_%d.m3u8\", id)",
          "old_line_content": "static int flush_init_segment(AVFormatContext *s, OutputStream *os)",
          "new_line_content": "        snprintf(playlist_name, string_size, \"media_%d.m3u8\", id);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "flush_dynbuf",
          "old_text": null,
          "new_text": "flush_dynbuf(os, &range_length)",
          "old_line_content": "",
          "new_line_content": "    ret = flush_dynbuf(os, &range_length);",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(filename_hls, sizeof(filename_hls), \"%s/master.m3u8\", c->dirname)",
          "old_line_content": "",
          "new_line_content": "            snprintf(filename_hls, sizeof(filename_hls), \"%s/master.m3u8\", c->dirname);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(os->max_pts, pkt->pts + pkt->duration)",
          "old_line_content": "}",
          "new_line_content": "        os->max_pts = FFMAX(os->max_pts, pkt->pts + pkt->duration);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(filename_hls, sizeof(filename_hls), \"master.m3u8\")",
          "old_line_content": "",
          "new_line_content": "            snprintf(filename_hls, sizeof(filename_hls), \"master.m3u8\");",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "ff_write_chained",
          "old_text": null,
          "new_text": "ff_write_chained(os->ctx, 0, pkt, s, 0)",
          "old_line_content": "static int dash_write_trailer(AVFormatContext *s)",
          "new_line_content": "    return ff_write_chained(os->ctx, 0, pkt, s, 0);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "ff_format_io_close",
          "old_text": null,
          "new_text": "ff_format_io_close(s, &os->out)",
          "old_line_content": "",
          "new_line_content": "        ff_format_io_close(s, &os->out);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "avio_open2",
          "old_text": null,
          "new_text": "avio_open2(&out, temp_filename, AVIO_FLAG_WRITE, NULL, &opts)",
          "old_line_content": "            return ret;",
          "new_line_content": "        ret = avio_open2(&out, temp_filename, AVIO_FLAG_WRITE, NULL, &opts);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&opts)",
          "old_line_content": "",
          "new_line_content": "        av_dict_free(&opts);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "ff_hls_write_playlist_version",
          "old_text": null,
          "new_text": "ff_hls_write_playlist_version(out, 6)",
          "old_line_content": "            char playlist_file[64];",
          "new_line_content": "        ff_hls_write_playlist_version(out, 6);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&c->as[i].metadata)",
          "old_line_content": "    }",
          "new_line_content": "            av_dict_free(&c->as[i].metadata);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&c->as)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&c->as);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(os->max_pts - os->first_pts,\n                                         s->streams[0]->time_base,\n                                         AV_TIME_BASE_Q)",
          "old_line_content": "    }",
          "new_line_content": "        c->total_duration = av_rescale_q(os->max_pts - os->first_pts,",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "dash_flush",
          "old_text": null,
          "new_text": "dash_flush(s, 1, -1)",
          "old_line_content": "        char filename[1024];",
          "new_line_content": "    dash_flush(s, 1, -1);",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": null,
          "new_api": "ff_hls_write_audio_rendition",
          "old_text": null,
          "new_text": "ff_hls_write_audio_rendition(out, (char *)audio_group,\n                                         playlist_file, i, is_default)",
          "old_line_content": "            is_default = 0;",
          "new_line_content": "            ff_hls_write_audio_rendition(out, (char *)audio_group,",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(st->codecpar->bit_rate, max_audio_bitrate)",
          "old_line_content": "",
          "new_line_content": "            max_audio_bitrate = FFMAX(st->codecpar->bit_rate, max_audio_bitrate);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "ff_format_io_close",
          "old_text": null,
          "new_text": "ff_format_io_close(s, &os->out)",
          "old_line_content": "        for (j = 0; j < os->nb_segments; j++)",
          "new_line_content": "        ff_format_io_close(s, &os->out);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(filename)",
          "old_line_content": "    }",
          "new_line_content": "            unlink(filename);",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(s->filename)",
          "old_line_content": "    return 0;",
          "new_line_content": "        unlink(s->filename);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(os->segments)",
          "old_line_content": "",
          "new_line_content": "        av_free(os->segments);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "ff_format_io_close",
          "old_text": null,
          "new_text": "ff_format_io_close(s, &c->mpd_out)",
          "old_line_content": "",
          "new_line_content": "    ff_format_io_close(s, &c->mpd_out);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "ff_format_io_close",
          "old_text": null,
          "new_text": "ff_format_io_close(s, &c->m3u8_out)",
          "old_line_content": "static void output_segment_list(OutputStream *os, AVIOContext *out, AVFormatContext *s,",
          "new_line_content": "    ff_format_io_close(s, &c->m3u8_out);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "ff_hls_write_stream_info",
          "old_text": null,
          "new_text": "ff_hls_write_stream_info(st, out, stream_bitrate, playlist_file, agroup, NULL, NULL)",
          "old_line_content": "        if (use_rename)",
          "new_line_content": "            ff_hls_write_stream_info(st, out, stream_bitrate, playlist_file, agroup, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "avio_close",
          "old_text": null,
          "new_text": "avio_close(out)",
          "old_line_content": "                return ret;",
          "new_line_content": "        avio_close(out);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "avpriv_io_move",
          "old_text": null,
          "new_text": "avpriv_io_move(temp_filename, filename_hls)",
          "old_line_content": "    }",
          "new_line_content": "            if ((ret = avpriv_io_move(temp_filename, filename_hls)) < 0)",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "check_bitstream",
          "old_text": null,
          "new_text": "oc->oformat->check_bitstream(oc, &pkt)",
          "old_line_content": "            AVStream *ost = oc->streams[0];",
          "new_line_content": "        ret = oc->oformat->check_bitstream(oc, &pkt);",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(os->nb_segments   - c->window_size, 0)",
          "old_line_content": "",
          "new_line_content": "        start_index  = FFMAX(os->nb_segments   - c->window_size, 0);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(os->segment_index - c->window_size, 1)",
          "old_line_content": "    if (c->use_template) {",
          "new_line_content": "        start_number = FFMAX(os->segment_index - c->window_size, 1);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "av_dict_get",
          "old_text": null,
          "new_text": "av_dict_get(src, key, NULL, 0)",
          "old_line_content": "    return 0;",
          "new_line_content": "    AVDictionaryEntry *entry = av_dict_get(src, key, NULL, 0);",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "av_dict_set",
          "old_text": null,
          "new_text": "av_dict_set(dst, key, entry->value, AV_DICT_DONT_OVERWRITE)",
          "old_line_content": "",
          "new_line_content": "        av_dict_set(dst, key, entry->value, AV_DICT_DONT_OVERWRITE);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"duration=\\\"%\"PRId64\"\\\" \", c->last_duration)",
          "old_line_content": "            int64_t cur_time = 0;",
          "new_line_content": "            avio_printf(out, \"duration=\\\"%\"PRId64\"\\\" \", c->last_duration);",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t\\t<SegmentTimeline>\\n\")",
          "old_line_content": "                int repeat = 0;",
          "new_line_content": "            avio_printf(out, \"\\t\\t\\t\\t\\t<SegmentTimeline>\\n\");",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"t=\\\"%\"PRId64\"\\\" \", seg->time)",
          "old_line_content": "                while (i + repeat + 1 < os->nb_segments &&",
          "new_line_content": "                    avio_printf(out, \"t=\\\"%\"PRId64\"\\\" \", seg->time);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"d=\\\"%d\\\" \", seg->duration)",
          "old_line_content": "                       os->segments[i + repeat + 1]->time == os->segments[i + repeat]->time + os->segments[i + repeat]->duration)",
          "new_line_content": "                avio_printf(out, \"d=\\\"%d\\\" \", seg->duration);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(c->dirname, '/')",
          "old_line_content": "        ptr[1] = '\\0';",
          "new_line_content": "    ptr = strrchr(c->dirname, '/');",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "av_strlcpy",
          "old_text": null,
          "new_text": "av_strlcpy(basename, &ptr[1], sizeof(basename))",
          "old_line_content": "        c->dirname[0] = '\\0';",
          "new_line_content": "        av_strlcpy(basename, &ptr[1], sizeof(basename));",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"r=\\\"%d\\\" \", repeat)",
          "old_line_content": "                cur_time += (1 + repeat) * seg->duration;",
          "new_line_content": "                    avio_printf(out, \"r=\\\"%d\\\" \", repeat);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"/>\\n\")",
          "old_line_content": "            }",
          "new_line_content": "                avio_printf(out, \"/>\\n\");",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(user_agent)",
          "old_line_content": "    { NULL },",
          "new_line_content": "    { \"http_user_agent\", \"override User-Agent field in HTTP header\", OFFSET(user_agent), AV_OPT_TYPE_STRING, {.str = NULL}, 0, 0, E},",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(http_persistent)",
          "old_line_content": "};",
          "new_line_content": "    { \"http_persistent\", \"Use persistent HTTP connections\", OFFSET(http_persistent), AV_OPT_TYPE_BOOL, {.i64 = 0 }, 0, 1, E },",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(hls_playlist)",
          "old_line_content": "",
          "new_line_content": "    { \"hls_playlist\", \"Generate HLS playlist files(master.m3u8, media_%d.m3u8)\", OFFSET(hls_playlist), AV_OPT_TYPE_BOOL, { .i64 = 0 }, 0, 1, E },",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t\\t</SegmentTimeline>\\n\")",
          "old_line_content": "    } else if (c->single_file) {",
          "new_line_content": "            avio_printf(out, \"\\t\\t\\t\\t\\t</SegmentTimeline>\\n\");",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(basename, '.')",
          "old_line_content": "",
          "new_line_content": "    ptr = strrchr(basename, '.');",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t<BaseURL>%s</BaseURL>\\n\", os->initfile)",
          "old_line_content": "        for (i = start_index; i < os->nb_segments; i++) {",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<BaseURL>%s</BaseURL>\\n\", os->initfile);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number)",
          "old_line_content": "            Segment *seg = os->segments[i];",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(*c->streams) * s->nb_streams)",
          "old_line_content": "",
          "new_line_content": "    c->streams = av_mallocz(sizeof(*c->streams) * s->nb_streams);",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        return ret;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "parse_adaptation_sets",
          "old_text": null,
          "new_text": "parse_adaptation_sets(s)",
          "old_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "new_line_content": "    if ((ret = parse_adaptation_sets(s)) < 0)",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"DASH Muxer\")",
          "old_line_content": "    .audio_codec    = AV_CODEC_ID_AAC,",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"DASH Muxer\"),",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"/>\\n\")",
          "old_line_content": "    } else {",
          "new_line_content": "            avio_printf(out, \"/>\\n\");",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number)",
          "old_line_content": "            Segment *seg = os->segments[i];",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t\\t<SegmentURL media=\\\"%s\\\" />\\n\", seg->file)",
          "old_line_content": "    }",
          "new_line_content": "            avio_printf(out, \"\\t\\t\\t\\t\\t<SegmentURL media=\\\"%s\\\" />\\n\", seg->file);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"\\t\\t\\t\\t</SegmentList>\\n\")",
          "old_line_content": "    {",
          "new_line_content": "        avio_printf(out, \"\\t\\t\\t\\t</SegmentList>\\n\");",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),\n                     \" bandwidth=\\\"%d\\\"\", os->bit_rate)",
          "old_line_content": "            int level = s->strict_std_compliance >= FF_COMPLIANCE_STRICT ?",
          "new_line_content": "            snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, level, \"No bit rate set for stream %d\\n\", i)",
          "old_line_content": "        }",
          "new_line_content": "            av_log(s, level, \"No bit rate set for stream %d\\n\", i);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        // copy AdaptationSet language and role from stream metadata",
          "new_line_content": "                return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(proto, \"file\")",
          "old_line_content": "                              c->dirname, representation_id);",
          "new_line_content": "        int use_rename = proto && !strcmp(proto, \"file\");",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "dict_copy_entry",
          "old_text": null,
          "new_text": "dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"role\")",
          "old_line_content": "        if (!ctx)",
          "new_line_content": "        dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"role\");",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "avformat_alloc_context",
          "old_text": null,
          "new_text": "avformat_alloc_context()",
          "old_line_content": "",
          "new_line_content": "        ctx = avformat_alloc_context();",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        // note: os->format_name is also used as part of the mimetype of the",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "set_http_options",
          "old_text": null,
          "new_text": "set_http_options(&http_opts, c)",
          "old_line_content": "        for (i = start_index; i < os->nb_segments; i++) {",
          "new_line_content": "        set_http_options(&http_opts, c);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "dashenc_io_open",
          "old_text": null,
          "new_text": "dashenc_io_open(s, &c->m3u8_out, temp_filename_hls, &http_opts)",
          "old_line_content": "            Segment *seg = os->segments[i];",
          "new_line_content": "        dashenc_io_open(s, &c->m3u8_out, temp_filename_hls, &http_opts);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&http_opts)",
          "old_line_content": "            double duration = (double) seg->duration / timescale;",
          "new_line_content": "        av_dict_free(&http_opts);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(os->format_name, sizeof(os->format_name), \"webm\")",
          "old_line_content": "        }",
          "new_line_content": "            snprintf(os->format_name, sizeof(os->format_name), \"webm\");",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(os->format_name, sizeof(os->format_name), \"mp4\")",
          "old_line_content": "        if (!ctx->oformat)",
          "new_line_content": "            snprintf(os->format_name, sizeof(os->format_name), \"mp4\");",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "av_guess_format",
          "old_text": null,
          "new_text": "av_guess_format(os->format_name, NULL, NULL)",
          "old_line_content": "        os->ctx = ctx;",
          "new_line_content": "        ctx->oformat = av_guess_format(os->format_name, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "ff_hls_write_init_file",
          "old_text": null,
          "new_text": "ff_hls_write_init_file(c->m3u8_out, os->initfile, c->single_file,\n                               os->init_range_length, os->init_start_pos)",
          "old_line_content": "        for (i = start_index; i < os->nb_segments; i++) {",
          "new_line_content": "        ff_hls_write_init_file(c->m3u8_out, os->initfile, c->single_file,",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "ff_hls_write_file_entry",
          "old_text": null,
          "new_text": "ff_hls_write_file_entry(c->m3u8_out, 0, c->single_file,\n                                    (double) seg->duration / timescale, 0,\n                                    seg->range_length, seg->start_pos, NULL,\n                                    c->single_file ? os->initfile : seg->file,\n                                    NULL)",
          "old_line_content": "                                    c->single_file ? os->initfile : seg->file,",
          "new_line_content": "            ret = ff_hls_write_file_entry(c->m3u8_out, 0, c->single_file,",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "avformat_new_stream",
          "old_text": null,
          "new_text": "avformat_new_stream(ctx, NULL)",
          "old_line_content": "        st->sample_aspect_ratio = s->streams[i]->sample_aspect_ratio;",
          "new_line_content": "        if (!(st = avformat_new_stream(ctx, NULL)))",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        st->time_base = s->streams[i]->time_base;",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "avcodec_parameters_copy",
          "old_text": null,
          "new_text": "avcodec_parameters_copy(st->codecpar, s->streams[i]->codecpar)",
          "old_line_content": "        st->avg_frame_rate = s->streams[i]->avg_frame_rate;",
          "new_line_content": "        avcodec_parameters_copy(st->codecpar, s->streams[i]->codecpar);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(os->ctx, AV_LOG_WARNING, \"ff_hls_write_file_entry get error\\n\")",
          "old_line_content": "",
          "new_line_content": "                av_log(os->ctx, AV_LOG_WARNING, \"ff_hls_write_file_entry get error\\n\");",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "ff_hls_write_end_list",
          "old_text": null,
          "new_text": "ff_hls_write_end_list(c->m3u8_out)",
          "old_line_content": "",
          "new_line_content": "            ff_hls_write_end_list(c->m3u8_out);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "avio_open_dyn_buf",
          "old_text": null,
          "new_text": "avio_open_dyn_buf(&ctx->pb)",
          "old_line_content": "        if (c->single_file) {",
          "new_line_content": "        if ((ret = avio_open_dyn_buf(&ctx->pb)) < 0)",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "avpriv_io_move",
          "old_text": null,
          "new_text": "avpriv_io_move(temp_filename_hls, filename_hls)",
          "old_line_content": "    }",
          "new_line_content": "            if (avpriv_io_move(temp_filename_hls, filename_hls) < 0) {",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(os->ctx, AV_LOG_WARNING, \"renaming file %s to %s failed\\n\\n\", temp_filename_hls, filename_hls)",
          "old_line_content": "",
          "new_line_content": "                av_log(os->ctx, AV_LOG_WARNING, \"renaming file %s to %s failed\\n\\n\", temp_filename_hls, filename_hls);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "ff_dash_fill_tmpl_params",
          "old_text": null,
          "new_text": "ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->single_file_name, i, 0, os->bit_rate, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "                ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->single_file_name, i, 0, os->bit_rate, 0);",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(os->initfile, sizeof(os->initfile), \"%s-stream%d.m4s\", basename, i)",
          "old_line_content": "        }",
          "new_line_content": "                snprintf(os->initfile, sizeof(os->initfile), \"%s-stream%d.m4s\", basename, i);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile)",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "        snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "set_http_options",
          "old_text": null,
          "new_text": "set_http_options(&opts, c)",
          "old_line_content": "            return ret;",
          "new_line_content": "        set_http_options(&opts, c);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str)",
          "old_line_content": "    if (!out)",
          "new_line_content": "    int outlen = strlen(str)*3/2 + 6;",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "av_realloc",
          "old_text": null,
          "new_text": "av_realloc(NULL, outlen + 1)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    char *out = av_realloc(NULL, outlen + 1);",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "av_realloc",
          "old_text": null,
          "new_text": "av_realloc(out, outlen + 1)",
          "old_line_content": "                return NULL;",
          "new_line_content": "            tmp = av_realloc(out, outlen + 1);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(out)",
          "old_line_content": "            out = tmp;",
          "new_line_content": "                av_free(out);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "av_dict_set_int",
          "old_text": null,
          "new_text": "av_dict_set_int(&opts, \"dash\", 1, 0)",
          "old_line_content": "        }",
          "new_line_content": "            av_dict_set_int(&opts, \"dash\", 1, 0);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "av_dict_set_int",
          "old_text": null,
          "new_text": "av_dict_set_int(&opts, \"live\", 1, 0)",
          "old_line_content": "            return ret;",
          "new_line_content": "            av_dict_set_int(&opts, \"live\", 1, 0);",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "av_dict_free",
          "old_text": null,
          "new_text": "av_dict_free(&opts)",
          "old_line_content": "",
          "new_line_content": "        av_dict_free(&opts);",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_VERBOSE, \"Representation %d init segment will be written to: %s\\n\", i, filename)",
          "old_line_content": "        // except for mp4, since delay_moov is set and the init segment",
          "new_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Representation %d init segment will be written to: %s\\n\", i, filename);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(os->format_name, \"mp4\")",
          "old_line_content": "",
          "new_line_content": "        if (strcmp(os->format_name, \"mp4\")) {",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "flush_init_segment",
          "old_text": null,
          "new_text": "flush_init_segment(s, os)",
          "old_line_content": "        s->streams[i]->time_base = st->time_base;",
          "new_line_content": "            flush_init_segment(s, os);",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&out[pos], \"&quot;\", 6)",
          "old_line_content": "            out[pos++] = *str;",
          "new_line_content": "            memcpy(&out[pos], \"&quot;\", 6);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "av_cmp_q",
          "old_text": null,
          "new_text": "av_cmp_q(avg_frame_rate, as->min_frame_rate)",
          "old_line_content": "                    as->max_frame_rate = avg_frame_rate;",
          "new_line_content": "                if (av_cmp_q(avg_frame_rate, as->min_frame_rate) < 0)",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "av_cmp_q",
          "old_text": null,
          "new_text": "av_cmp_q(as->max_frame_rate, avg_frame_rate)",
          "old_line_content": "                as->ambiguous_frame_rate = 1;",
          "new_line_content": "                if (av_cmp_q(as->max_frame_rate, avg_frame_rate) < 0)",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"PT\")",
          "old_line_content": "    if (hours || minutes)",
          "new_line_content": "    avio_printf(out, \"PT\");",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "set_codec_str",
          "old_text": null,
          "new_text": "set_codec_str(s, st->codecpar, os->codec_str, sizeof(os->codec_str))",
          "old_line_content": "        os->last_dts = AV_NOPTS_VALUE;",
          "new_line_content": "        set_codec_str(s, st->codecpar, os->codec_str, sizeof(os->codec_str));",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"%dM\", minutes)",
          "old_line_content": "",
          "new_line_content": "        avio_printf(out, \"%dM\", minutes);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "avio_printf",
          "old_text": null,
          "new_text": "avio_printf(out, \"%d.%dS\", seconds, fractions / (AV_TIME_BASE / 10))",
          "old_line_content": "static void format_date_now(char *buf, int size)",
          "new_line_content": "    avio_printf(out, \"%d.%dS\", seconds, fractions / (AV_TIME_BASE / 10));",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(s, AV_LOG_WARNING, \"no video stream and no min seg duration set\\n\")",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_log(s, AV_LOG_WARNING, \"no video stream and no min seg duration set\\n\");",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    if (ptm) {",
          "new_line_content": "    time_t t = time(NULL);",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "}",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "gmtime_r",
          "old_text": null,
          "new_text": "gmtime_r(&t, &tmbuf)",
          "old_line_content": "            buf[0] = '\\0';",
          "new_line_content": "    ptm = gmtime_r(&t, &tmbuf);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "strftime",
          "old_text": null,
          "new_text": "strftime(buf, size, \"%Y-%m-%dT%H:%M:%SZ\", ptm)",
          "old_line_content": "}",
          "new_line_content": "        if (!strftime(buf, size, \"%Y-%m-%dT%H:%M:%SZ\", ptm))",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "avformat_write_header",
          "old_text": null,
          "new_text": "avformat_write_header(os->ctx, NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if ((ret = avformat_write_header(os->ctx, NULL)) < 0) {",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "dash_free",
          "old_text": null,
          "new_text": "dash_free(s)",
          "old_line_content": "    }",
          "new_line_content": "            dash_free(s);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t<AdaptationSet id=\\\"%s\\\" contentType=\\\"%s\\\" segmentAlignment=\\\"true\\\" bitstreamSwitching=\\\"true\\\"\",\n                as->id, as->media_type == AVMEDIA_TYPE_VIDEO ? \"video\" : \"audio\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"\\t\\t<AdaptationSet id=\\\"%s\\\" contentType=\\\"%s\\\" segmentAlignment=\\\"true\\\" bitstreamSwitching=\\\"true\\\"\",",
          "new_line_content": "    AVDictionaryEntry *lang, *role;",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_VERBOSE, \"Manifest written to: %s\\n\", s->filename)",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Manifest written to: %s\\n\", s->filename);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "av_cmp_q",
          "new_api": null,
          "old_text": "av_cmp_q(as->min_frame_rate, as->max_frame_rate)",
          "new_text": null,
          "old_line_content": "    if (as->media_type == AVMEDIA_TYPE_VIDEO && as->max_frame_rate.num && !as->ambiguous_frame_rate && av_cmp_q(as->min_frame_rate, as->max_frame_rate) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(as->metadata, \"language\", NULL, 0)",
          "new_text": null,
          "old_line_content": "    lang = av_dict_get(as->metadata, \"language\", NULL, 0);",
          "new_line_content": "                as->id, as->media_type == AVMEDIA_TYPE_VIDEO ? \"video\" : \"audio\");",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t<Role schemeIdUri=\\\"urn:mpeg:dash:role:2011\\\" value=\\\"%s\\\"/>\\n\", role->value)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t<Role schemeIdUri=\\\"urn:mpeg:dash:role:2011\\\" value=\\\"%s\\\"/>\\n\", role->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "av_reallocp",
          "new_api": null,
          "old_text": "av_reallocp(&os->segments, sizeof(*os->segments) *\n                               os->segments_size)",
          "new_text": null,
          "old_line_content": "        if ((err = av_reallocp(&os->segments, sizeof(*os->segments) *",
          "new_line_content": "    Segment *seg;",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t<Representation id=\\\"%d\\\" mimeType=\\\"video/%s\\\" codecs=\\\"%s\\\"%s width=\\\"%d\\\" height=\\\"%d\\\"\",\n                i, os->format_name, os->codec_str, os->bandwidth_str, s->streams[i]->codecpar->width, s->streams[i]->codecpar->height)",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"\\t\\t\\t<Representation id=\\\"%d\\\" mimeType=\\\"video/%s\\\" codecs=\\\"%s\\\"%s width=\\\"%d\\\" height=\\\"%d\\\"\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(*seg))",
          "new_text": null,
          "old_line_content": "    seg = av_mallocz(sizeof(*seg));",
          "new_line_content": "            return err;",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \">\\n\")",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \">\\n\");",
          "new_line_content": "                i, os->format_name, os->codec_str, os->bandwidth_str, s->streams[i]->codecpar->width, s->streams[i]->codecpar->height);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t<AudioChannelConfiguration schemeIdUri=\\\"urn:mpeg:dash:23003:3:audio_channel_configuration:2011\\\" value=\\\"%d\\\" />\\n\",\n                s->streams[i]->codecpar->channels)",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"\\t\\t\\t\\t<AudioChannelConfiguration schemeIdUri=\\\"urn:mpeg:dash:23003:3:audio_channel_configuration:2011\\\" value=\\\"%d\\\" />\\n\",",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t</Representation>\\n\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t</Representation>\\n\");",
          "new_line_content": "                s->streams[i]->codecpar->channels);",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "avio_wb32",
          "new_api": null,
          "old_text": "avio_wb32(pb, 24)",
          "new_text": null,
          "old_line_content": "    avio_wb32(pb, 24);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "ffio_wfourcc",
          "new_api": null,
          "old_text": "ffio_wfourcc(pb, \"styp\")",
          "new_text": null,
          "old_line_content": "    ffio_wfourcc(pb, \"styp\");",
          "new_line_content": "static void write_styp(AVIOContext *pb)",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "ffio_wfourcc",
          "new_api": null,
          "old_text": "ffio_wfourcc(pb, \"msdh\")",
          "new_text": null,
          "old_line_content": "    ffio_wfourcc(pb, \"msdh\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "av_realloc",
          "new_api": null,
          "old_text": "av_realloc(c->as, sizeof(*c->as) * (c->nb_as + 1))",
          "new_text": null,
          "old_line_content": "    void *mem = av_realloc(c->as, sizeof(*c->as) * (c->nb_as + 1));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(*as, 0, sizeof(**as))",
          "new_text": null,
          "old_line_content": "    memset(*as, 0, sizeof(**as));",
          "new_line_content": "    ++c->nb_as;",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "io_open",
          "new_api": null,
          "old_text": "s->io_open(s, &pb, full_path, AVIO_FLAG_READ, NULL)",
          "new_text": null,
          "old_line_content": "    ret = s->io_open(s, &pb, full_path, AVIO_FLAG_READ, NULL);",
          "new_line_content": "    AVIOContext *pb;",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "ff_format_io_close",
          "new_api": null,
          "old_text": "ff_format_io_close(s, &pb)",
          "new_text": null,
          "old_line_content": "        ff_format_io_close(s, &pb);",
          "new_line_content": "    if (ret < 0)",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Codec type of stream %d doesn't match AdaptationSet's media type\\n\", i)",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"Codec type of stream %d doesn't match AdaptationSet's media type\\n\", i);",
          "new_line_content": "    OutputStream *os = &c->streams[i];",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "ff_format_io_close",
          "new_api": null,
          "old_text": "ff_format_io_close(s, &pb)",
          "new_text": null,
          "old_line_content": "    ff_format_io_close(s, &pb);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "AV_RB32",
          "new_api": null,
          "old_text": "AV_RB32(&buf[0])",
          "new_text": null,
          "old_line_content": "    *index_length = AV_RB32(&buf[0]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc(par->extradata_size)",
          "new_text": null,
          "old_line_content": "    extradata = av_malloc(par->extradata_size);",
          "new_line_content": "    if (os->ctx->streams[0]->codecpar->extradata_size || !par->extradata_size)",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(extradata, par->extradata, par->extradata_size)",
          "new_text": null,
          "old_line_content": "    memcpy(extradata, par->extradata, par->extradata_size);",
          "new_line_content": "    if (!extradata)",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "add_adaptation_set",
          "new_api": null,
          "old_text": "add_adaptation_set(s, &as, s->streams[i]->codecpar->codec_type)",
          "new_text": null,
          "old_line_content": "            if ((ret = add_adaptation_set(s, &as, s->streams[i]->codecpar->codec_type)) < 0)",
          "new_line_content": "    // default: one AdaptationSet for each stream",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(as->id, sizeof(as->id), \"%d\", i)",
          "new_text": null,
          "old_line_content": "            snprintf(as->id, sizeof(as->id), \"%d\", i);",
          "new_line_content": "        for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "set_codec_str",
          "new_api": null,
          "old_text": "set_codec_str(s, par, os->codec_str, sizeof(os->codec_str))",
          "new_text": null,
          "old_line_content": "    set_codec_str(s, par, os->codec_str, sizeof(os->codec_str));",
          "new_line_content": "    os->ctx->streams[0]->codecpar->extradata = extradata;",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "avio_find_protocol_name",
          "new_api": null,
          "old_text": "avio_find_protocol_name(s->filename)",
          "new_text": null,
          "old_line_content": "    const char *proto = avio_find_protocol_name(s->filename);",
          "new_line_content": "    DASHContext *c = s->priv_data;",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "av_strstart",
          "new_api": null,
          "old_text": "av_strstart(p, \"id=\", &p)",
          "new_text": null,
          "old_line_content": "        } else if (state == new_set && av_strstart(p, \"id=\", &p)) {",
          "new_line_content": "        if (*p == ' ') {",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(proto, \"file\")",
          "new_text": null,
          "old_line_content": "    int use_rename = proto && !strcmp(proto, \"file\");",
          "new_line_content": "    int i, ret = 0;",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "add_adaptation_set",
          "new_api": null,
          "old_text": "add_adaptation_set(s, &as, AVMEDIA_TYPE_UNKNOWN)",
          "new_text": null,
          "old_line_content": "            if ((ret = add_adaptation_set(s, &as, AVMEDIA_TYPE_UNKNOWN)) < 0)",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(as->id, sizeof(as->id), \"%.*s\", n, p)",
          "new_text": null,
          "old_line_content": "            snprintf(as->id, sizeof(as->id), \"%.*s\", n, p);",
          "new_line_content": "                return ret;",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "av_strstart",
          "new_api": null,
          "old_text": "av_strstart(p, \"streams=\", &p)",
          "new_text": null,
          "old_line_content": "        } else if (state == parse_id && av_strstart(p, \"streams=\", &p)) {",
          "new_line_content": "            if (*p)",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "strcspn",
          "new_api": null,
          "old_text": "strcspn(p, \" ,\")",
          "new_text": null,
          "old_line_content": "            n = strcspn(p, \" ,\");",
          "new_line_content": "            AdaptationSet *as = &c->as[c->nb_as - 1];",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(idx_str, sizeof(idx_str), \"%.*s\", n, p)",
          "new_text": null,
          "old_line_content": "            snprintf(idx_str, sizeof(idx_str), \"%.*s\", n, p);",
          "new_line_content": "            char idx_str[8], *end_str;",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_DEBUG, \"Map all streams of type %s\\n\", idx_str)",
          "new_text": null,
          "old_line_content": "                av_log(s, AV_LOG_DEBUG, \"Map all streams of type %s\\n\", idx_str);",
          "new_line_content": "            // if value is \"a\" or \"v\", map all streams of that type",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "flush_init_segment",
          "new_api": null,
          "old_text": "flush_init_segment(s, os)",
          "new_text": null,
          "old_line_content": "            flush_init_segment(s, os);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "adaptation_set_add_stream",
          "new_api": null,
          "old_text": "adaptation_set_add_stream(s, c->nb_as, i)",
          "new_text": null,
          "old_line_content": "                    if ((ret = adaptation_set_add_stream(s, c->nb_as, i)) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "ff_dash_fill_tmpl_params",
          "new_api": null,
          "old_text": "ff_dash_fill_tmpl_params(filename, sizeof(filename), c->media_seg_name, i, os->segment_index, os->bit_rate, os->start_pts)",
          "new_text": null,
          "old_line_content": "            ff_dash_fill_tmpl_params(filename, sizeof(filename), c->media_seg_name, i, os->segment_index, os->bit_rate, os->start_pts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, filename)",
          "new_text": null,
          "old_line_content": "            snprintf(full_path, sizeof(full_path), \"%s%s\", c->dirname, filename);",
          "new_line_content": "        if (!c->single_file) {",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(temp_path, sizeof(temp_path), use_rename ? \"%s.tmp\" : \"%s\", full_path)",
          "new_text": null,
          "old_line_content": "            snprintf(temp_path, sizeof(temp_path), use_rename ? \"%s.tmp\" : \"%s\", full_path);",
          "new_line_content": "            AVDictionary *opts = NULL;",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(idx_str, &end_str, 10)",
          "new_text": null,
          "old_line_content": "                i = strtol(idx_str, &end_str, 10);",
          "new_line_content": "                        return ret;",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Selected stream \\\"%s\\\" not found!\\n\", idx_str)",
          "new_text": null,
          "old_line_content": "                    av_log(s, AV_LOG_ERROR, \"Selected stream \\\"%s\\\" not found!\\n\", idx_str);",
          "new_line_content": "            } else { // select single stream",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(os->format_name, \"mp4\")",
          "new_text": null,
          "old_line_content": "            if (!strcmp(os->format_name, \"mp4\"))",
          "new_line_content": "            if (ret < 0)",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "write_styp",
          "new_api": null,
          "old_text": "write_styp(os->ctx->pb)",
          "new_text": null,
          "old_line_content": "                write_styp(os->ctx->pb);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "adaptation_set_add_stream",
          "new_api": null,
          "old_text": "adaptation_set_add_stream(s, c->nb_as, i)",
          "new_text": null,
          "old_line_content": "                if ((ret = adaptation_set_add_stream(s, c->nb_as, i)) < 0)",
          "new_line_content": "                    as->media_type = s->streams[i]->codecpar->codec_type;",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "find_index_range",
          "new_api": null,
          "old_text": "find_index_range(s, full_path, os->pos, &index_length)",
          "new_text": null,
          "old_line_content": "            find_index_range(s, full_path, os->pos, &index_length);",
          "new_line_content": "        os->packets_written = 0;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "dashenc_io_close",
          "new_api": null,
          "old_text": "dashenc_io_close(s, &os->out, temp_path)",
          "new_text": null,
          "old_line_content": "            dashenc_io_close(s, &os->out, temp_path);",
          "new_line_content": "        if (c->single_file) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "            return AVERROR(EINVAL);",
          "new_line_content": "            if (*p)",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "av_strlcpy",
          "new_api": null,
          "old_text": "av_strlcpy(str, codecs[i].str, size)",
          "new_text": null,
          "old_line_content": "            av_strlcpy(str, codecs[i].str, size);",
          "new_line_content": "    // common Webm codecs are not part of RFC 6381",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Stream %d is not mapped to an AdaptationSet\\n\", i)",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_ERROR, \"Stream %d is not mapped to an AdaptationSet\\n\", i);",
          "new_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "            return AVERROR(EINVAL);",
          "new_line_content": "        OutputStream *os = &c->streams[i];",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(os->max_pts - os->start_pts,\n                                                                                       st->time_base,\n                                                                                       AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "            int64_t bitrate = (int64_t) range_length * 8 * AV_TIME_BASE / av_rescale_q(os->max_pts - os->start_pts,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),\n                     \" bandwidth=\\\"%d\\\"\", os->bit_rate)",
          "new_text": null,
          "old_line_content": "                snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),",
          "new_line_content": "                                                                                       AV_TIME_BASE_Q);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "add_segment",
          "new_api": null,
          "old_text": "add_segment(os, filename, os->start_pts, os->max_pts - os->start_pts, os->pos, range_length, index_length)",
          "new_text": null,
          "old_line_content": "        add_segment(os, filename, os->start_pts, os->max_pts - os->start_pts, os->pos, range_length, index_length);",
          "new_line_content": "                     \" bandwidth=\\\"%d\\\"\", os->bit_rate);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_VERBOSE, \"Representation %d media segment %d written to: %s\\n\", i, os->segment_index, full_path)",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_VERBOSE, \"Representation %d media segment %d written to: %s\\n\", i, os->segment_index, full_path);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "av_codec_get_tag",
          "new_api": null,
          "old_text": "av_codec_get_tag(tags, par->codec_id)",
          "new_text": null,
          "old_line_content": "    tag = av_codec_get_tag(tags, par->codec_id);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "avio_find_protocol_name",
          "new_api": null,
          "old_text": "avio_find_protocol_name(s->filename)",
          "new_text": null,
          "old_line_content": "    const char *proto = avio_find_protocol_name(s->filename);",
          "new_line_content": "    AVIOContext *out;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(proto, \"file\")",
          "new_text": null,
          "old_line_content": "    int use_rename = proto && !strcmp(proto, \"file\");",
          "new_line_content": "    char temp_filename[1024];",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "AV_WL32",
          "new_api": null,
          "old_text": "AV_WL32(str, tag)",
          "new_text": null,
          "old_line_content": "    AV_WL32(str, tag);",
          "new_line_content": "    if (size < 5)",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(str, \"mp4v\")",
          "new_text": null,
          "old_line_content": "    if (!strcmp(str, \"mp4a\") || !strcmp(str, \"mp4v\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_ERROR, \"Cannot use rename on non file protocol, this may lead to races and temporary partial files\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_ERROR, \"Cannot use rename on non file protocol, this may lead to races and temporary partial files\\n\");",
          "new_line_content": "    AVDictionary *opts = NULL;",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", s->filename)",
          "new_text": null,
          "old_line_content": "    snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", s->filename);",
          "new_line_content": "    if (!use_rename && !warned_non_file++)",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "dashenc_io_open",
          "new_api": null,
          "old_text": "dashenc_io_open(s, &c->mpd_out, temp_filename, &opts)",
          "new_text": null,
          "old_line_content": "    ret = dashenc_io_open(s, &c->mpd_out, temp_filename, &opts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "av_strlcatf",
          "new_api": null,
          "old_text": "av_strlcatf(str, size, \".%02\"PRIx32, oti)",
          "new_text": null,
          "old_line_content": "            av_strlcatf(str, size, \".%02\"PRIx32, oti);",
          "new_line_content": "        tags[0] = ff_mp4_obj_type;",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->segments[j]->file)",
          "new_text": null,
          "old_line_content": "                    snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->segments[j]->file);",
          "new_line_content": "            if (remove > 0) {",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(filename)",
          "new_text": null,
          "old_line_content": "                    unlink(filename);",
          "new_line_content": "                for (j = 0; j < remove; j++) {",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(os->segments[j])",
          "new_text": null,
          "old_line_content": "                    av_free(os->segments[j]);",
          "new_line_content": "                    char filename[1024];",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "MKTAG",
          "new_api": null,
          "old_text": "MKTAG('m', 'p', '4', 'a')",
          "new_text": null,
          "old_line_content": "        if (tag == MKTAG('m', 'p', '4', 'a')) {",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "av_dict_free",
          "new_api": null,
          "old_text": "av_dict_free(&opts)",
          "new_text": null,
          "old_line_content": "    av_dict_free(&opts);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"<MPD xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"\n                \"\\txmlns=\\\"urn:mpeg:dash:schema:mpd:2011\\\"\\n\"\n                \"\\txmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\"\n                \"\\txsi:schemaLocation=\\\"urn:mpeg:DASH:schema:MPD:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd\\\"\\n\"\n                \"\\tprofiles=\\\"urn:mpeg:dash:profile:isoff-live:2011\\\"\\n\"\n                \"\\ttype=\\\"%s\\\"\\n\", final ? \"static\" : \"dynamic\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"<MPD xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\n\"",
          "new_line_content": "    out = c->mpd_out;",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "AV_RB16",
          "new_api": null,
          "old_text": "AV_RB16(par->extradata)",
          "new_text": null,
          "old_line_content": "                    aot = ((AV_RB16(par->extradata) >> 5) & 0x3f) + 32;",
          "new_line_content": "            if (par->extradata_size >= 2) {",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "av_strlcatf",
          "new_api": null,
          "old_text": "av_strlcatf(str, size, \".%d\", aot)",
          "new_text": null,
          "old_line_content": "                av_strlcatf(str, size, \".%d\", aot);",
          "new_line_content": "                int aot = par->extradata[0] >> 3;",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "write_manifest",
          "new_api": null,
          "old_text": "write_manifest(s, final)",
          "new_text": null,
          "old_line_content": "        ret = write_manifest(s, final);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING, \"Incomplete RFC 6381 codec string for mp4v\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(s, AV_LOG_WARNING, \"Incomplete RFC 6381 codec string for mp4v\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\tmediaPresentationDuration=\\\"\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\tmediaPresentationDuration=\\\"\");",
          "new_line_content": "                \"\\tprofiles=\\\"urn:mpeg:dash:profile:isoff-live:2011\\\"\\n\"",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(str, \"avc1\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcmp(str, \"avc1\")) {",
          "new_line_content": "            // Unimplemented, should output ProfileLevelIndication as a decimal number",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "write_time",
          "new_api": null,
          "old_text": "write_time(out, c->total_duration)",
          "new_text": null,
          "old_line_content": "        write_time(out, c->total_duration);",
          "new_line_content": "                \"\\ttype=\\\"%s\\\"\\n\", final ? \"static\" : \"dynamic\");",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\\"\\n\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\\"\\n\");",
          "new_line_content": "    if (final) {",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\tminimumUpdatePeriod=\\\"PT%\"PRId64\"S\\\"\\n\", update_period)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\tminimumUpdatePeriod=\\\"PT%\"PRId64\"S\\\"\\n\", update_period);",
          "new_line_content": "        char now_str[100];",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "avio_open_dyn_buf",
          "new_api": null,
          "old_text": "avio_open_dyn_buf(&pb)",
          "new_text": null,
          "old_line_content": "            if (avio_open_dyn_buf(&pb) < 0)",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\tsuggestedPresentationDelay=\\\"PT%\"PRId64\"S\\\"\\n\", c->last_duration / AV_TIME_BASE)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\tsuggestedPresentationDelay=\\\"PT%\"PRId64\"S\\\"\\n\", c->last_duration / AV_TIME_BASE);",
          "new_line_content": "        if (c->use_template && !c->use_timeline)",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "ff_isom_write_avcc",
          "new_api": null,
          "old_text": "ff_isom_write_avcc(pb, extradata, extradata_size)",
          "new_text": null,
          "old_line_content": "            if (ff_isom_write_avcc(pb, extradata, extradata_size) < 0) {",
          "new_line_content": "            AVIOContext *pb;",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "update_stream_extradata",
          "new_api": null,
          "old_text": "update_stream_extradata(s, os, st->codecpar)",
          "new_text": null,
          "old_line_content": "    ret = update_stream_extradata(s, os, st->codecpar);",
          "new_line_content": "    OutputStream *os = &c->streams[pkt->stream_index];",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "format_date_now",
          "new_api": null,
          "old_text": "format_date_now(now_str, sizeof(now_str))",
          "new_text": null,
          "old_line_content": "        format_date_now(now_str, sizeof(now_str));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\ttimeShiftBufferDepth=\\\"\")",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"\\ttimeShiftBufferDepth=\\\"\");",
          "new_line_content": "        if (now_str[0])",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": "av_strlcatf",
          "new_api": null,
          "old_text": "av_strlcatf(str, size, \".%02x%02x%02x\",\n                        extradata[1], extradata[2], extradata[3])",
          "new_text": null,
          "old_line_content": "            av_strlcatf(str, size, \".%02x%02x%02x\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\\"\\n\")",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"\\\"\\n\");",
          "new_line_content": "        if (c->window_size && c->use_template) {",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(tmpbuf)",
          "new_text": null,
          "old_line_content": "        av_free(tmpbuf);",
          "new_line_content": "        if (extradata_size >= 4)",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "write_time",
          "new_api": null,
          "old_text": "write_time(out, c->last_duration * 2)",
          "new_text": null,
          "old_line_content": "    write_time(out, c->last_duration * 2);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\\">\\n\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"\\\">\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    uint8_t *buffer;",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(escaped)",
          "new_text": null,
          "old_line_content": "        av_free(escaped);",
          "new_line_content": "    if (title) {",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "av_write_frame",
          "new_api": null,
          "old_text": "av_write_frame(os->ctx, NULL)",
          "new_text": null,
          "old_line_content": "    av_write_frame(os->ctx, NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "avio_flush",
          "new_api": null,
          "old_text": "avio_flush(os->ctx->pb)",
          "new_text": null,
          "old_line_content": "    avio_flush(os->ctx->pb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(os->nb_segments - c->window_size, 0)",
          "new_text": null,
          "old_line_content": "        int start_index = FFMAX(os->nb_segments - c->window_size, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(os->segments[start_index]->time, s->streams[0]->time_base, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        int64_t start_time = av_rescale_q(os->segments[start_index]->time, s->streams[0]->time_base, AV_TIME_BASE_Q);",
          "new_line_content": "    if (c->window_size && s->nb_streams > 0 && c->streams[0].nb_segments > 0 && !c->use_template) {",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t<Period id=\\\"0\\\" start=\\\"\");",
          "new_line_content": "        OutputStream *os = &c->streams[0];",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "av_compare_ts",
          "new_api": null,
          "old_text": "av_compare_ts(pkt->pts - os->start_pts, st->time_base,\n                      c->min_seg_duration, AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        av_compare_ts(pkt->pts - os->start_pts, st->time_base,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "avio_write",
          "new_api": null,
          "old_text": "avio_write(os->out, buffer, *range_length)",
          "new_text": null,
          "old_line_content": "    avio_write(os->out, buffer, *range_length);",
          "new_line_content": "    // write out to file",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(pkt->pts - os->start_pts,\n                                        st->time_base,\n                                        AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "        c->last_duration = av_rescale_q(pkt->pts - os->start_pts,",
          "new_line_content": "                      c->min_seg_duration, AV_TIME_BASE_Q) >= 0) {",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "write_adaptation_set",
          "new_api": null,
          "old_text": "write_adaptation_set(s, out, i, final)",
          "new_text": null,
          "old_line_content": "        if ((ret = write_adaptation_set(s, out, i, final)) < 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING,\n                       \"Segment durations differ too much, enable use_timeline \"\n                       \"and use_template, or keep a stricter keyframe interval\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(s, AV_LOG_WARNING,",
          "new_line_content": "        if ((!c->use_timeline || !c->use_template) && prev_duration) {",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(options, \"user_agent\", c->user_agent, 0)",
          "new_text": null,
          "old_line_content": "        av_dict_set(options, \"user_agent\", c->user_agent, 0);",
          "new_line_content": "static void set_http_options(AVDictionary **options, DASHContext *c)",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": "av_dict_set_int",
          "new_api": null,
          "old_text": "av_dict_set_int(options, \"multiple_requests\", 1, 0)",
          "new_text": null,
          "old_line_content": "        av_dict_set_int(options, \"multiple_requests\", 1, 0);",
          "new_line_content": "    if (c->user_agent)",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"</MPD>\\n\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"</MPD>\\n\");",
          "new_line_content": "    if (c->utc_timing_url)",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "dash_flush",
          "new_api": null,
          "old_text": "dash_flush(s, 0, pkt->stream_index)",
          "new_text": null,
          "old_line_content": "        if ((ret = dash_flush(s, 0, pkt->stream_index)) < 0)",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "dashenc_io_close",
          "new_api": null,
          "old_text": "dashenc_io_close(s, &c->mpd_out, temp_filename)",
          "new_text": null,
          "old_line_content": "    dashenc_io_close(s, &c->mpd_out, temp_filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(playlist_name, string_size, \"%smedia_%d.m3u8\", base_url, id)",
          "new_text": null,
          "old_line_content": "        snprintf(playlist_name, string_size, \"%smedia_%d.m3u8\", base_url, id);",
          "new_line_content": "static void get_hls_playlist_name(char *playlist_name, int string_size,",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(playlist_name, string_size, \"media_%d.m3u8\", id)",
          "new_text": null,
          "old_line_content": "        snprintf(playlist_name, string_size, \"media_%d.m3u8\", id);",
          "new_line_content": "    if (base_url)",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "flush_dynbuf",
          "new_api": null,
          "old_text": "flush_dynbuf(os, &range_length)",
          "new_text": null,
          "old_line_content": "    ret = flush_dynbuf(os, &range_length);",
          "new_line_content": "    DASHContext *c = s->priv_data;",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename_hls, sizeof(filename_hls), \"%s/master.m3u8\", c->dirname)",
          "new_text": null,
          "old_line_content": "            snprintf(filename_hls, sizeof(filename_hls), \"%s/master.m3u8\", c->dirname);",
          "new_line_content": "        int max_audio_bitrate = 0;",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(os->max_pts, pkt->pts + pkt->duration)",
          "new_text": null,
          "old_line_content": "        os->max_pts = FFMAX(os->max_pts, pkt->pts + pkt->duration);",
          "new_line_content": "    if (os->max_pts == AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename_hls, sizeof(filename_hls), \"master.m3u8\")",
          "new_text": null,
          "old_line_content": "            snprintf(filename_hls, sizeof(filename_hls), \"master.m3u8\");",
          "new_line_content": "        if (*c->dirname)",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "ff_write_chained",
          "new_api": null,
          "old_text": "ff_write_chained(os->ctx, 0, pkt, s, 0)",
          "new_text": null,
          "old_line_content": "    return ff_write_chained(os->ctx, 0, pkt, s, 0);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "ff_format_io_close",
          "new_api": null,
          "old_text": "ff_format_io_close(s, &os->out)",
          "new_text": null,
          "old_line_content": "        ff_format_io_close(s, &os->out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", filename_hls)",
          "new_text": null,
          "old_line_content": "        snprintf(temp_filename, sizeof(temp_filename), use_rename ? \"%s.tmp\" : \"%s\", filename_hls);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "set_http_options",
          "new_api": null,
          "old_text": "set_http_options(&opts, c)",
          "new_text": null,
          "old_line_content": "        set_http_options(&opts, c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "ff_hls_write_playlist_version",
          "new_api": null,
          "old_text": "ff_hls_write_playlist_version(out, 6)",
          "new_text": null,
          "old_line_content": "        ff_hls_write_playlist_version(out, 6);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "av_dict_free",
          "new_api": null,
          "old_text": "av_dict_free(&c->as[i].metadata)",
          "new_text": null,
          "old_line_content": "            av_dict_free(&c->as[i].metadata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&c->as)",
          "new_text": null,
          "old_line_content": "        av_freep(&c->as);",
          "new_line_content": "    if (c->as) {",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(os->max_pts - os->start_pts,\n                                            s->streams[0]->time_base,\n                                            AV_TIME_BASE_Q)",
          "new_text": null,
          "old_line_content": "            c->last_duration = av_rescale_q(os->max_pts - os->start_pts,",
          "new_line_content": "        // If no segments have been written so far, try to do a crude",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "get_hls_playlist_name",
          "new_api": null,
          "old_text": "get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i)",
          "new_text": null,
          "old_line_content": "            get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i);",
          "new_line_content": "            AVStream *st = s->streams[i];",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "ff_hls_write_audio_rendition",
          "new_api": null,
          "old_text": "ff_hls_write_audio_rendition(out, (char *)audio_group,\n                                         playlist_file, i, is_default)",
          "new_text": null,
          "old_line_content": "            ff_hls_write_audio_rendition(out, (char *)audio_group,",
          "new_line_content": "            if (st->codecpar->codec_type != AVMEDIA_TYPE_AUDIO)",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "dash_flush",
          "new_api": null,
          "old_text": "dash_flush(s, 1, -1)",
          "new_text": null,
          "old_line_content": "    dash_flush(s, 1, -1);",
          "new_line_content": "                                         s->streams[0]->time_base,",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "av_write_trailer",
          "new_api": null,
          "old_text": "av_write_trailer(os->ctx)",
          "new_text": null,
          "old_line_content": "            av_write_trailer(os->ctx);",
          "new_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "ffio_free_dyn_buf",
          "new_api": null,
          "old_text": "ffio_free_dyn_buf(&os->ctx->pb)",
          "new_text": null,
          "old_line_content": "            ffio_free_dyn_buf(&os->ctx->pb);",
          "new_line_content": "        if (os->ctx && os->ctx_inited)",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile)",
          "new_text": null,
          "old_line_content": "            snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile);",
          "new_line_content": "        int i;",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(filename)",
          "new_text": null,
          "old_line_content": "            unlink(filename);",
          "new_line_content": "        for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(os->segments[j])",
          "new_text": null,
          "old_line_content": "            av_free(os->segments[j]);",
          "new_line_content": "        if (os->ctx)",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "ff_format_io_close",
          "new_api": null,
          "old_text": "ff_format_io_close(s, &c->mpd_out)",
          "new_text": null,
          "old_line_content": "    ff_format_io_close(s, &c->mpd_out);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "get_hls_playlist_name",
          "new_api": null,
          "old_text": "get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i)",
          "new_text": null,
          "old_line_content": "            get_hls_playlist_name(playlist_file, sizeof(playlist_file), NULL, i);",
          "new_line_content": "                agroup = (char *)audio_group;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "ff_hls_write_stream_info",
          "new_api": null,
          "old_text": "ff_hls_write_stream_info(st, out, stream_bitrate, playlist_file, agroup, NULL, NULL)",
          "new_text": null,
          "old_line_content": "            ff_hls_write_stream_info(st, out, stream_bitrate, playlist_file, agroup, NULL, NULL);",
          "new_line_content": "                stream_bitrate += max_audio_bitrate;",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "avpriv_io_move",
          "new_api": null,
          "old_text": "avpriv_io_move(temp_filename, filename_hls)",
          "new_text": null,
          "old_line_content": "            if ((ret = avpriv_io_move(temp_filename, filename_hls)) < 0)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "check_bitstream",
          "new_api": null,
          "old_text": "oc->oformat->check_bitstream(oc, &pkt)",
          "new_text": null,
          "old_line_content": "        ret = oc->oformat->check_bitstream(oc, &pkt);",
          "new_line_content": "        int ret;",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(os->nb_segments   - c->window_size, 0)",
          "new_text": null,
          "old_line_content": "        start_index  = FFMAX(os->nb_segments   - c->window_size, 0);",
          "new_line_content": "    DASHContext *c = s->priv_data;",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(os->segment_index - c->window_size, 1)",
          "new_text": null,
          "old_line_content": "        start_number = FFMAX(os->segment_index - c->window_size, 1);",
          "new_line_content": "    int i, start_index = 0, start_number = 1;",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "av_dict_get",
          "new_api": null,
          "old_text": "av_dict_get(src, key, NULL, 0)",
          "new_text": null,
          "old_line_content": "    AVDictionaryEntry *entry = av_dict_get(src, key, NULL, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t<SegmentTemplate timescale=\\\"%d\\\" \", timescale)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<SegmentTemplate timescale=\\\"%d\\\" \", timescale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(dst, key, entry->value, AV_DICT_DONT_OVERWRITE)",
          "new_text": null,
          "old_line_content": "        av_dict_set(dst, key, entry->value, AV_DICT_DONT_OVERWRITE);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"duration=\\\"%\"PRId64\"\\\" \", c->last_duration)",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"duration=\\\"%\"PRId64\"\\\" \", c->last_duration);",
          "new_line_content": "        int timescale = c->use_timeline ? os->ctx->streams[0]->time_base.den : AV_TIME_BASE;",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t\\t\\t<S \")",
          "new_text": null,
          "old_line_content": "                avio_printf(out, \"\\t\\t\\t\\t\\t\\t<S \");",
          "new_line_content": "            for (i = start_index; i < os->nb_segments; ) {",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(adaptation_sets)",
          "new_text": null,
          "old_line_content": "    { \"adaptation_sets\", \"Adaptation sets. Syntax: id=0,streams=0,1,2 id=1,streams=3,4 and so on\", OFFSET(adaptation_sets), AV_OPT_TYPE_STRING, { 0 }, 0, 0, AV_OPT_FLAG_ENCODING_PARAM },",
          "new_line_content": "#define OFFSET(x) offsetof(DASHContext, x)",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(window_size)",
          "new_text": null,
          "old_line_content": "    { \"window_size\", \"number of segments kept in the manifest\", OFFSET(window_size), AV_OPT_TYPE_INT, { .i64 = 0 }, 0, INT_MAX, E },",
          "new_line_content": "#define E AV_OPT_FLAG_ENCODING_PARAM",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(extra_window_size)",
          "new_text": null,
          "old_line_content": "    { \"extra_window_size\", \"number of segments kept outside of the manifest before removing from disk\", OFFSET(extra_window_size), AV_OPT_TYPE_INT, { .i64 = 5 }, 0, INT_MAX, E },",
          "new_line_content": "static const AVOption options[] = {",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"d=\\\"%d\\\" \", seg->duration)",
          "new_text": null,
          "old_line_content": "                avio_printf(out, \"d=\\\"%d\\\" \", seg->duration);",
          "new_line_content": "                    cur_time = seg->time;",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "av_strlcpy",
          "new_api": null,
          "old_text": "av_strlcpy(c->dirname, s->filename, sizeof(c->dirname))",
          "new_text": null,
          "old_line_content": "    av_strlcpy(c->dirname, s->filename, sizeof(c->dirname));",
          "new_line_content": "    if (c->single_file)",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(c->dirname, '/')",
          "new_text": null,
          "old_line_content": "    ptr = strrchr(c->dirname, '/');",
          "new_line_content": "        c->use_template = 0;",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"r=\\\"%d\\\" \", repeat)",
          "new_text": null,
          "old_line_content": "                    avio_printf(out, \"r=\\\"%d\\\" \", repeat);",
          "new_line_content": "                       os->segments[i + repeat + 1]->time == os->segments[i + repeat]->time + os->segments[i + repeat]->duration)",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"/>\\n\")",
          "new_text": null,
          "old_line_content": "                avio_printf(out, \"/>\\n\");",
          "new_line_content": "                    repeat++;",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "av_strlcpy",
          "new_api": null,
          "old_text": "av_strlcpy(basename, s->filename, sizeof(basename))",
          "new_text": null,
          "old_line_content": "        av_strlcpy(basename, s->filename, sizeof(basename));",
          "new_line_content": "        ptr[1] = '\\0';",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t\\t</SegmentTimeline>\\n\")",
          "new_text": null,
          "old_line_content": "            avio_printf(out, \"\\t\\t\\t\\t\\t</SegmentTimeline>\\n\");",
          "new_line_content": "                i += 1 + repeat;",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t</SegmentTemplate>\\n\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t</SegmentTemplate>\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t<BaseURL>%s</BaseURL>\\n\", os->initfile)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<BaseURL>%s</BaseURL>\\n\", os->initfile);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(*c->streams) * s->nb_streams)",
          "new_text": null,
          "old_line_content": "    c->streams = av_mallocz(sizeof(*c->streams) * s->nb_streams);",
          "new_line_content": "    if (ptr)",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t\\t<Initialization range=\\\"%\"PRId64\"-%\"PRId64\"\\\" />\\n\", os->init_start_pos, os->init_start_pos + os->init_range_length - 1)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t\\t<Initialization range=\\\"%\"PRId64\"-%\"PRId64\"\\\" />\\n\", os->init_start_pos, os->init_start_pos + os->init_range_length - 1);",
          "new_line_content": "    } else if (c->single_file) {",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "parse_adaptation_sets",
          "new_api": null,
          "old_text": "parse_adaptation_sets(s)",
          "new_text": null,
          "old_line_content": "    if ((ret = parse_adaptation_sets(s)) < 0)",
          "new_line_content": "    if (!c->streams)",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"indexRange=\\\"%\"PRId64\"-%\"PRId64\"\\\" \", seg->start_pos, seg->start_pos + seg->index_length - 1)",
          "new_text": null,
          "old_line_content": "                avio_printf(out, \"indexRange=\\\"%\"PRId64\"-%\"PRId64\"\\\" \", seg->start_pos, seg->start_pos + seg->index_length - 1);",
          "new_line_content": "            Segment *seg = os->segments[i];",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"DASH Muxer\")",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"DASH Muxer\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t<SegmentList timescale=\\\"%d\\\" duration=\\\"%\"PRId64\"\\\" startNumber=\\\"%d\\\">\\n\", AV_TIME_BASE, c->last_duration, start_number);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"\\t\\t\\t\\t</SegmentList>\\n\")",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"\\t\\t\\t\\t</SegmentList>\\n\");",
          "new_line_content": "            Segment *seg = os->segments[i];",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),\n                     \" bandwidth=\\\"%d\\\"\", os->bit_rate)",
          "new_text": null,
          "old_line_content": "            snprintf(os->bandwidth_str, sizeof(os->bandwidth_str),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, level, \"No bit rate set for stream %d\\n\", i)",
          "new_text": null,
          "old_line_content": "            av_log(s, level, \"No bit rate set for stream %d\\n\", i);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "                return AVERROR(EINVAL);",
          "new_line_content": "                        AV_LOG_ERROR : AV_LOG_WARNING;",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "avio_find_protocol_name",
          "new_api": null,
          "old_text": "avio_find_protocol_name(c->dirname)",
          "new_text": null,
          "old_line_content": "        const char *proto = avio_find_protocol_name(c->dirname);",
          "new_line_content": "        AVDictionary *http_opts = NULL;",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(proto, \"file\")",
          "new_text": null,
          "old_line_content": "        int use_rename = proto && !strcmp(proto, \"file\");",
          "new_line_content": "        int target_duration = 0;",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "dict_copy_entry",
          "new_api": null,
          "old_text": "dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"language\")",
          "new_text": null,
          "old_line_content": "        dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"language\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "dict_copy_entry",
          "new_api": null,
          "old_text": "dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"role\")",
          "new_text": null,
          "old_line_content": "        dict_copy_entry(&as->metadata, s->streams[i]->metadata, \"role\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "set_http_options",
          "new_api": null,
          "old_text": "set_http_options(&http_opts, c)",
          "new_text": null,
          "old_line_content": "        set_http_options(&http_opts, c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "av_dict_free",
          "new_api": null,
          "old_text": "av_dict_free(&http_opts)",
          "new_text": null,
          "old_line_content": "        av_dict_free(&http_opts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "lrint",
          "new_api": null,
          "old_text": "lrint(duration)",
          "new_text": null,
          "old_line_content": "                target_duration = lrint(duration);",
          "new_line_content": "            Segment *seg = os->segments[i];",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(os->format_name, sizeof(os->format_name), \"webm\")",
          "new_text": null,
          "old_line_content": "            snprintf(os->format_name, sizeof(os->format_name), \"webm\");",
          "new_line_content": "            s->streams[i]->codecpar->codec_id == AV_CODEC_ID_VP9 ||",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(os->format_name, sizeof(os->format_name), \"mp4\")",
          "new_text": null,
          "old_line_content": "            snprintf(os->format_name, sizeof(os->format_name), \"mp4\");",
          "new_line_content": "            s->streams[i]->codecpar->codec_id == AV_CODEC_ID_VORBIS) {",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "av_guess_format",
          "new_api": null,
          "old_text": "av_guess_format(os->format_name, NULL, NULL)",
          "new_text": null,
          "old_line_content": "        ctx->oformat = av_guess_format(os->format_name, NULL, NULL);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "ff_hls_write_file_entry",
          "new_api": null,
          "old_text": "ff_hls_write_file_entry(c->m3u8_out, 0, c->single_file,\n                                    (double) seg->duration / timescale, 0,\n                                    seg->range_length, seg->start_pos, NULL,\n                                    c->single_file ? os->initfile : seg->file,\n                                    NULL)",
          "new_text": null,
          "old_line_content": "            ret = ff_hls_write_file_entry(c->m3u8_out, 0, c->single_file,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "avformat_new_stream",
          "new_api": null,
          "old_text": "avformat_new_stream(ctx, NULL)",
          "new_text": null,
          "old_line_content": "        if (!(st = avformat_new_stream(ctx, NULL)))",
          "new_line_content": "        ctx->io_close           = s->io_close;",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "        ctx->io_open            = s->io_open;",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "avcodec_parameters_copy",
          "new_api": null,
          "old_text": "avcodec_parameters_copy(st->codecpar, s->streams[i]->codecpar)",
          "new_text": null,
          "old_line_content": "        avcodec_parameters_copy(st->codecpar, s->streams[i]->codecpar);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(os->ctx, AV_LOG_WARNING, \"ff_hls_write_file_entry get error\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(os->ctx, AV_LOG_WARNING, \"ff_hls_write_file_entry get error\\n\");",
          "new_line_content": "                                    c->single_file ? os->initfile : seg->file,",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "ff_hls_write_end_list",
          "new_api": null,
          "old_text": "ff_hls_write_end_list(c->m3u8_out)",
          "new_text": null,
          "old_line_content": "            ff_hls_write_end_list(c->m3u8_out);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "avio_open_dyn_buf",
          "new_api": null,
          "old_text": "avio_open_dyn_buf(&ctx->pb)",
          "new_text": null,
          "old_line_content": "        if ((ret = avio_open_dyn_buf(&ctx->pb)) < 0)",
          "new_line_content": "        ctx->avoid_negative_ts = s->avoid_negative_ts;",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "dashenc_io_close",
          "new_api": null,
          "old_text": "dashenc_io_close(s, &c->m3u8_out, temp_filename_hls)",
          "new_text": null,
          "old_line_content": "        dashenc_io_close(s, &c->m3u8_out, temp_filename_hls);",
          "new_line_content": "        if (final)",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "ff_dash_fill_tmpl_params",
          "new_api": null,
          "old_text": "ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->single_file_name, i, 0, os->bit_rate, 0)",
          "new_text": null,
          "old_line_content": "                ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->single_file_name, i, 0, os->bit_rate, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(os->ctx, AV_LOG_WARNING, \"renaming file %s to %s failed\\n\\n\", temp_filename_hls, filename_hls)",
          "new_text": null,
          "old_line_content": "                av_log(os->ctx, AV_LOG_WARNING, \"renaming file %s to %s failed\\n\\n\", temp_filename_hls, filename_hls);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(os->initfile, sizeof(os->initfile), \"%s-stream%d.m4s\", basename, i)",
          "new_text": null,
          "old_line_content": "                snprintf(os->initfile, sizeof(os->initfile), \"%s-stream%d.m4s\", basename, i);",
          "new_line_content": "            if (c->single_file_name)",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "ff_dash_fill_tmpl_params",
          "new_api": null,
          "old_text": "ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->init_seg_name, i, 0, os->bit_rate, 0)",
          "new_text": null,
          "old_line_content": "            ff_dash_fill_tmpl_params(os->initfile, sizeof(os->initfile), c->init_seg_name, i, 0, os->bit_rate, 0);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile)",
          "new_text": null,
          "old_line_content": "        snprintf(filename, sizeof(filename), \"%s%s\", c->dirname, os->initfile);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str)",
          "new_text": null,
          "old_line_content": "    int outlen = strlen(str)*3/2 + 6;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "av_realloc",
          "new_api": null,
          "old_text": "av_realloc(NULL, outlen + 1)",
          "new_text": null,
          "old_line_content": "    char *out = av_realloc(NULL, outlen + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "io_open",
          "new_api": null,
          "old_text": "s->io_open(s, &os->out, filename, AVIO_FLAG_WRITE, &opts)",
          "new_text": null,
          "old_line_content": "        ret = s->io_open(s, &os->out, filename, AVIO_FLAG_WRITE, &opts);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "av_dict_set",
          "new_api": null,
          "old_text": "av_dict_set(&opts, \"movflags\", \"frag_custom+dash+delay_moov\", 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set(&opts, \"movflags\", \"frag_custom+dash+delay_moov\", 0);",
          "new_line_content": "        os->init_start_pos = 0;",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "av_realloc",
          "new_api": null,
          "old_text": "av_realloc(out, outlen + 1)",
          "new_text": null,
          "old_line_content": "            tmp = av_realloc(out, outlen + 1);",
          "new_line_content": "        if (pos + 6 > outlen) {",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(out)",
          "new_text": null,
          "old_line_content": "                av_free(out);",
          "new_line_content": "            outlen = 2 * outlen + 6;",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "av_dict_set_int",
          "new_api": null,
          "old_text": "av_dict_set_int(&opts, \"dash\", 1, 0)",
          "new_text": null,
          "old_line_content": "            av_dict_set_int(&opts, \"dash\", 1, 0);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&out[pos], \"&amp;\", 5)",
          "new_text": null,
          "old_line_content": "            memcpy(&out[pos], \"&amp;\", 5);",
          "new_line_content": "            out = tmp;",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "av_dict_free",
          "new_api": null,
          "old_text": "av_dict_free(&opts)",
          "new_text": null,
          "old_line_content": "        av_dict_free(&opts);",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(os->format_name, \"mp4\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(os->format_name, \"mp4\")) {",
          "new_line_content": "        // Flush init segment",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "flush_init_segment",
          "new_api": null,
          "old_text": "flush_init_segment(s, os)",
          "new_text": null,
          "old_line_content": "            flush_init_segment(s, os);",
          "new_line_content": "        // except for mp4, since delay_moov is set and the init segment",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "av_cmp_q",
          "new_api": null,
          "old_text": "av_cmp_q(avg_frame_rate, as->min_frame_rate)",
          "new_text": null,
          "old_line_content": "                if (av_cmp_q(avg_frame_rate, as->min_frame_rate) < 0)",
          "new_line_content": "        if (st->codecpar->codec_type == AVMEDIA_TYPE_VIDEO) {",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "av_cmp_q",
          "new_api": null,
          "old_text": "av_cmp_q(as->max_frame_rate, avg_frame_rate)",
          "new_text": null,
          "old_line_content": "                if (av_cmp_q(as->max_frame_rate, avg_frame_rate) < 0)",
          "new_line_content": "            if (avg_frame_rate.num > 0) {",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"PT\")",
          "new_text": null,
          "old_line_content": "    avio_printf(out, \"PT\");",
          "new_line_content": "    int hours = minutes / 60;",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "set_codec_str",
          "new_api": null,
          "old_text": "set_codec_str(s, st->codecpar, os->codec_str, sizeof(os->codec_str))",
          "new_text": null,
          "old_line_content": "        set_codec_str(s, st->codecpar, os->codec_str, sizeof(os->codec_str));",
          "new_line_content": "            c->has_video = 1;",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"%dH\", hours)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"%dH\", hours);",
          "new_line_content": "    minutes %= 60;",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "avio_printf",
          "new_api": null,
          "old_text": "avio_printf(out, \"%dM\", minutes)",
          "new_text": null,
          "old_line_content": "        avio_printf(out, \"%dM\", minutes);",
          "new_line_content": "    if (hours)",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(s, AV_LOG_WARNING, \"no video stream and no min seg duration set\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(s, AV_LOG_WARNING, \"no video stream and no min seg duration set\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t t = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "gmtime_r",
          "new_api": null,
          "old_text": "gmtime_r(&t, &tmbuf)",
          "new_text": null,
          "old_line_content": "    ptm = gmtime_r(&t, &tmbuf);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "strftime",
          "new_api": null,
          "old_text": "strftime(buf, size, \"%Y-%m-%dT%H:%M:%SZ\", ptm)",
          "new_text": null,
          "old_line_content": "        if (!strftime(buf, size, \"%Y-%m-%dT%H:%M:%SZ\", ptm))",
          "new_line_content": "    struct tm *ptm, tmbuf;",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "avformat_write_header",
          "new_api": null,
          "old_text": "avformat_write_header(os->ctx, NULL)",
          "new_text": null,
          "old_line_content": "        if ((ret = avformat_write_header(os->ctx, NULL)) < 0) {",
          "new_line_content": "    int i, ret;",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "dash_free",
          "new_api": null,
          "old_text": "dash_free(s)",
          "new_text": null,
          "old_line_content": "            dash_free(s);",
          "new_line_content": "    for (i = 0; i < s->nb_streams; i++) {",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "write_manifest",
          "new_api": null,
          "old_text": "write_manifest(s, 0)",
          "new_text": null,
          "old_line_content": "    ret = write_manifest(s, 0);",
          "new_line_content": "            return ret;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 66,
      "total_additions": 220,
      "total_deletions": 217,
      "total_api_changes": 503
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 503,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 339,
    "api_calls_after": 342,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
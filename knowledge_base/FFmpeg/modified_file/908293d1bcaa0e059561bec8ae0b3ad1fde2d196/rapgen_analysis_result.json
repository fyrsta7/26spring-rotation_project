{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/908293d1bcaa0e059561bec8ae0b3ad1fde2d196",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/908293d1bcaa0e059561bec8ae0b3ad1fde2d196/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/908293d1bcaa0e059561bec8ae0b3ad1fde2d196/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/908293d1bcaa0e059561bec8ae0b3ad1fde2d196/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 66,
          "old_api": "med_line",
          "new_api": "s_whitespace",
          "old_text": "med_line(ptr))\n",
          "new_text": "s_whitespace(*ptr))\n",
          "old_line_content": "        if (timed_line(ptr))",
          "new_line_content": "        while (jss_whitespace(*ptr))",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "priv_set_pts_info",
          "new_api": "format_new_stream",
          "old_text": "priv_set_pts_info(st, 64, 1, 100);\n",
          "new_text": "format_new_stream(s, NULL);\n",
          "old_line_content": "    avpriv_set_pts_info(st, 64, 1, 100);",
          "new_line_content": "    AVStream *st = avformat_new_stream(s, NULL);",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "io_tell",
          "new_api": "l_feof",
          "old_text": "io_tell(pb);\n",
          "new_text": "l_feof(pb)) ",
          "old_line_content": "        int64_t pos = avio_tell(pb);",
          "new_line_content": "    while (!url_feof(pb)) {",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "med_line",
          "new_api": "s_skip_whitespace",
          "old_text": "med_line(p)) ",
          "new_text": "s_skip_whitespace(p);\n",
          "old_line_content": "        if (merge_line || timed_line(p)) {",
          "new_line_content": "        p = jss_skip_whitespace(p);",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "_realloc",
          "new_api": "rlen",
          "old_text": "_realloc(sub->line, old_len + len + 1);\n",
          "new_text": "rlen(sub->line);\n",
          "old_line_content": "                tmp = av_realloc(sub->line, old_len + len + 1);",
          "new_line_content": "                const int old_len = strlen(sub->line);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "ERROR",
          "new_api": "_realloc",
          "old_text": "ERROR(ENOMEM);\n",
          "new_text": "_realloc(jacosub->subs,\n                                  sizeof(*jacosub->subs) * (jacosub->nsub+1));\n",
          "old_line_content": "                    return AVERROR(ENOMEM);",
          "new_line_content": "                subs = av_realloc(jacosub->subs,",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": "_bprintf",
          "new_api": "t_shift",
          "old_text": "_bprintf(&header, \"#S %s\", p);\n",
          "new_text": "t_shift(jacosub->timeres, p);\n",
          "old_line_content": "            av_bprintf(&header, \"#S %s\", p);",
          "new_line_content": "                jacosub->shift = get_shift(jacosub->timeres, p);",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "rtol",
          "new_api": "_bprintf",
          "old_text": "rtol(p, NULL, 10);\n",
          "new_text": "_bprintf(&header, \"#S %s\", p);\n",
          "old_line_content": "            jacosub->timeres = strtol(p, NULL, 10);",
          "new_line_content": "            av_bprintf(&header, \"#S %s\", p);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "rcpy",
          "new_api": "rlen",
          "old_text": "rcpy(pkt->data, sub->line);\n",
          "new_text": "rlen(sub->line));",
          "old_line_content": "    strcpy(pkt->data, sub->line);",
          "new_line_content": "    res = av_new_packet(pkt, strlen(sub->line));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 258,
          "old_api": null,
          "new_api": "rtol",
          "old_text": null,
          "new_text": "rtol(p, NULL, 10);\n",
          "old_line_content": "        }",
          "new_line_content": "            jacosub->timeres = strtol(p, NULL, 10);",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": null,
          "new_api": "_bprintf",
          "old_text": null,
          "new_text": "_bprintf(&header, \"#T %s\", p);\n",
          "old_line_content": "    }",
          "new_line_content": "            av_bprintf(&header, \"#T %s\", p);",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": null,
          "new_api": "canf",
          "old_text": null,
          "new_text": "canf(buf, \"@%u @%u %n\", ts_start, ts_end, &len) =",
          "old_line_content": "    return NULL;",
          "new_line_content": "    if (sscanf(buf, \"@%u @%u %n\", ts_start, ts_end, &len) == 2)",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "_bprint_finalize",
          "old_text": null,
          "new_text": "_bprint_finalize(&header, (char **)&st->codec->extradata);\n",
          "old_line_content": "    /* SHIFT and TIMERES affect the whole script so packet timing can only be",
          "new_line_content": "    av_bprint_finalize(&header, (char **)&st->codec->extradata);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "ad_ts",
          "old_text": null,
          "new_text": "ad_ts(jacosub, sub->line, &sub->start, &sub->end);\n",
          "old_line_content": "",
          "new_line_content": "        read_ts(jacosub, sub->line, &sub->start, &sub->end);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "ort",
          "old_text": null,
          "new_text": "ort(jacosub->subs, jacosub->nsub, sizeof(*jacosub->subs), cmp_timed_sub);\n",
          "old_line_content": "}",
          "new_line_content": "    qsort(jacosub->subs, jacosub->nsub, sizeof(*jacosub->subs), cmp_timed_sub);",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": null,
          "new_api": "canf",
          "old_text": null,
          "new_text": "canf(buf, \"%d\"SSEP\"%d\"SSEP\"%d\"SSEP\"%d\", &a, &b, &c, &d);\n#undef SSEP\n\n    if (*buf == '-' || a < 0) {\n        sign = -1;\n        a = FFABS(a);\n    }\n\n    switch (n) {",
          "old_line_content": "    if (*buf == '-' || a < 0) {",
          "new_line_content": "    int n = sscanf(buf, \"%d\"SSEP\"%d\"SSEP\"%d\"SSEP\"%d\", &a, &b, &c, &d);",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": null,
          "new_api": "ABS",
          "old_text": null,
          "new_text": "ABS(a);\n",
          "old_line_content": "    switch (n) {",
          "new_line_content": "        a = FFABS(a);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "rcpy",
          "old_text": null,
          "new_text": "rcpy(pkt->data, sub->line);\n",
          "old_line_content": "    pkt->pts = pkt->dts = sub->start;",
          "new_line_content": "    strcpy(pkt->data, sub->line);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "LL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "LL_IF_CONFIG_SMALL(\"JACOsub subtitle format\"),\n",
          "old_line_content": "    .read_header    = jacosub_read_header,",
          "new_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"JACOsub subtitle format\"),",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "ERROR",
          "old_text": null,
          "new_text": "ERROR(ENOMEM);\n",
          "old_line_content": "    st->codec->codec_id   = CODEC_ID_JACOSUB;",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "priv_set_pts_info",
          "old_text": null,
          "new_text": "priv_set_pts_info(st, 64, 1, 100);\n",
          "old_line_content": "",
          "new_line_content": "    avpriv_set_pts_info(st, 64, 1, 100);",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "_bprint_init",
          "old_text": null,
          "new_text": "_bprint_init(&header, 1024+FF_INPUT_BUFFER_PADDING_SIZE, 4096);\n",
          "old_line_content": "        int cmd_len;",
          "new_line_content": "    av_bprint_init(&header, 1024+FF_INPUT_BUFFER_PADDING_SIZE, 4096);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "io_tell",
          "old_text": null,
          "new_text": "io_tell(pb);\n",
          "old_line_content": "",
          "new_line_content": "        int64_t pos = avio_tell(pb);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "_get_line",
          "old_text": null,
          "new_text": "_get_line(pb, line, sizeof(line));\n",
          "old_line_content": "",
          "new_line_content": "        ff_get_line(pb, line, sizeof(line));",
          "content_same": false
        },
        {
          "line": 69,
          "old_api": null,
          "new_api": "med_line",
          "old_text": null,
          "new_text": "med_line(ptr))\n",
          "old_line_content": "            ptr++;",
          "new_line_content": "            if (timed_line(ptr))",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "med_line",
          "old_text": null,
          "new_text": "med_line(p)) ",
          "old_line_content": "",
          "new_line_content": "        if (merge_line || timed_line(p)) {",
          "content_same": false
        },
        {
          "line": 73,
          "old_api": null,
          "new_api": "rcspn",
          "old_text": null,
          "new_text": "rcspn(ptr, \"\\n\") +",
          "old_line_content": "}",
          "new_line_content": "        ptr += strcspn(ptr, \"\\n\") + 1;",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "rlen",
          "old_text": null,
          "new_text": "rlen(line);\n",
          "old_line_content": "                char *tmp;",
          "new_line_content": "            const int len = strlen(line);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "_realloc",
          "old_text": null,
          "new_text": "_realloc(sub->line, old_len + len + 1);\n",
          "old_line_content": "                sub->line = tmp;",
          "new_line_content": "                tmp = av_realloc(sub->line, old_len + len + 1);",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "ERROR",
          "old_text": null,
          "new_text": "ERROR(ENOMEM);\n",
          "old_line_content": "            } else {",
          "new_line_content": "                    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "rcpy",
          "old_text": null,
          "new_text": "rcpy(sub->line + old_len, line);\n",
          "old_line_content": "                                  sizeof(*jacosub->subs) * (jacosub->nsub+1));",
          "new_line_content": "                strcpy(sub->line + old_len, line);",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "ERROR",
          "old_text": null,
          "new_text": "ERROR(ENOMEM);\n",
          "old_line_content": "                sub->pos  = pos;",
          "new_line_content": "                    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "_strdup",
          "old_text": null,
          "new_text": "_strdup(line);\n",
          "old_line_content": "            }",
          "new_line_content": "                sub->line = av_strdup(line);",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": null,
          "new_api": "_toupper",
          "old_text": null,
          "new_text": "_toupper(k);\n",
          "old_line_content": "            return i;",
          "new_line_content": "    k = av_toupper(k);",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": null,
          "new_api": "_ARRAY_ELEMS",
          "old_text": null,
          "new_text": "_ARRAY_ELEMS(cmds); ",
          "old_line_content": "    return -1;",
          "new_line_content": "    for (i = 0; i < FF_ARRAY_ELEMS(cmds); i++)",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "ERROR",
          "old_text": null,
          "new_text": "ERROR(ENOMEM);\n",
          "old_line_content": "            if (!merge_line)",
          "new_line_content": "                    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "rcmp",
          "old_text": null,
          "new_text": "rcmp(&line[len - 2], \"\\\\\\n\");\n",
          "old_line_content": "            continue;",
          "new_line_content": "            merge_line = len > 1 && !strcmp(&line[len - 2], \"\\\\\\n\");",
          "content_same": false
        },
        {
          "line": 108,
          "old_api": null,
          "new_api": "_freep",
          "old_text": null,
          "new_text": "_freep(&jacosub->subs[i].line);\n",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_freep(&jacosub->subs[i].line);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "t_jss_cmd",
          "old_text": null,
          "new_text": "t_jss_cmd(p[0]);\n",
          "old_line_content": "",
          "new_line_content": "        i = get_jss_cmd(p[0]);",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": null,
          "new_api": "_freep",
          "old_text": null,
          "new_text": "_freep(&jacosub->subs);\n",
          "old_line_content": "",
          "new_line_content": "    av_freep(&jacosub->subs);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "rlen",
          "old_text": null,
          "new_text": "rlen(cmds[i]);\n",
          "old_line_content": "        else",
          "new_line_content": "        cmd_len = strlen(cmds[i]);",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "_strncasecmp",
          "old_text": null,
          "new_text": "_strncasecmp(p, cmds[i], cmd_len) =",
          "old_line_content": "            p++;",
          "new_line_content": "        if (av_strncasecmp(p, cmds[i], cmd_len) == 0)",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": null,
          "new_api": "s_skip_whitespace",
          "old_text": null,
          "new_text": "s_skip_whitespace(p);\n",
          "old_line_content": "        switch (cmds[i][0]) {",
          "new_line_content": "        p = jss_skip_whitespace(p);",
          "content_same": false
        },
        {
          "line": 122,
          "old_api": null,
          "new_api": "canf",
          "old_text": null,
          "new_text": "canf(buf, \"%u:%u:%u.%u %u:%u:%u.%u %n\",\n               &hs, &ms, &ss, &fs,\n               &he, &me, &se, &fe, &len) =",
          "old_line_content": "        *ts_start = (hs*3600 + ms*60 + ss) * jacosub->timeres + fs;",
          "new_line_content": "    if (sscanf(buf, \"%u:%u:%u.%u %u:%u:%u.%u %n\",",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 128,
          "old_api": "canf",
          "new_api": null,
          "old_text": "canf(buf, \"@%u @%u %n\", ts_start, ts_end, &len) =",
          "new_text": null,
          "old_line_content": "    if (sscanf(buf, \"@%u @%u %n\", ts_start, ts_end, &len) == 2)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "_bprintf",
          "new_api": null,
          "old_text": "_bprintf(&header, \"#T %s\", p);\n",
          "new_text": null,
          "old_line_content": "            av_bprintf(&header, \"#T %s\", p);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "_bprint_finalize",
          "new_api": null,
          "old_text": "_bprint_finalize(&header, (char **)&st->codec->extradata);\n",
          "new_text": null,
          "old_line_content": "    av_bprint_finalize(&header, (char **)&st->codec->extradata);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "ad_ts",
          "new_api": null,
          "old_text": "ad_ts(jacosub, sub->line, &sub->start, &sub->end);\n",
          "new_text": null,
          "old_line_content": "        read_ts(jacosub, sub->line, &sub->start, &sub->end);",
          "new_line_content": "     * done in a second pass */",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "ort",
          "new_api": null,
          "old_text": "ort(jacosub->subs, jacosub->nsub, sizeof(*jacosub->subs), cmp_timed_sub);\n",
          "new_text": null,
          "old_line_content": "    qsort(jacosub->subs, jacosub->nsub, sizeof(*jacosub->subs), cmp_timed_sub);",
          "new_line_content": "        SubEntry *sub = &jacosub->subs[i];",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": "canf",
          "new_api": null,
          "old_text": "canf(buf, \"%d\"SSEP\"%d\"SSEP\"%d\"SSEP\"%d\", &a, &b, &c, &d);\n#undef SSEP\n\n    if (*buf == '-' || a < 0) {\n        sign = -1;\n        a = FFABS(a);\n    }\n\n    switch (n) {",
          "new_text": null,
          "old_line_content": "    int n = sscanf(buf, \"%d\"SSEP\"%d\"SSEP\"%d\"SSEP\"%d\", &a, &b, &c, &d);",
          "new_line_content": "    int sign = 1;",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "ABS",
          "new_api": null,
          "old_text": "ABS(a);\n",
          "new_text": null,
          "old_line_content": "        a = FFABS(a);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "rlen",
          "new_api": null,
          "old_text": "rlen(sub->line));",
          "new_text": null,
          "old_line_content": "    res = av_new_packet(pkt, strlen(sub->line));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "LL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "LL_IF_CONFIG_SMALL(\"JACOsub subtitle format\"),\n",
          "new_text": null,
          "old_line_content": "    .long_name      = NULL_IF_CONFIG_SMALL(\"JACOsub subtitle format\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "format_new_stream",
          "new_api": null,
          "old_text": "format_new_stream(s, NULL);\n",
          "new_text": null,
          "old_line_content": "    AVStream *st = avformat_new_stream(s, NULL);",
          "new_line_content": "    int merge_line = 0;",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "ERROR",
          "new_api": null,
          "old_text": "ERROR(ENOMEM);\n",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "_bprint_init",
          "new_api": null,
          "old_text": "_bprint_init(&header, 1024+FF_INPUT_BUFFER_PADDING_SIZE, 4096);\n",
          "new_text": null,
          "old_line_content": "    av_bprint_init(&header, 1024+FF_INPUT_BUFFER_PADDING_SIZE, 4096);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "l_feof",
          "new_api": null,
          "old_text": "l_feof(pb)) ",
          "new_text": null,
          "old_line_content": "    while (!url_feof(pb)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "_get_line",
          "new_api": null,
          "old_text": "_get_line(pb, line, sizeof(line));\n",
          "new_text": null,
          "old_line_content": "        ff_get_line(pb, line, sizeof(line));",
          "new_line_content": "        const char *p = line;",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "s_skip_whitespace",
          "new_api": null,
          "old_text": "s_skip_whitespace(p);\n",
          "new_text": null,
          "old_line_content": "        p = jss_skip_whitespace(p);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 68,
          "old_api": "s_whitespace",
          "new_api": null,
          "old_text": "s_whitespace(*ptr))\n",
          "new_text": null,
          "old_line_content": "        while (jss_whitespace(*ptr))",
          "new_line_content": "        if (*ptr != '#' && *ptr != '\\n') {",
          "content_same": false
        },
        {
          "line": 70,
          "old_api": "rcspn",
          "new_api": null,
          "old_text": "rcspn(ptr, \"\\n\") +",
          "new_text": null,
          "old_line_content": "        ptr += strcspn(ptr, \"\\n\") + 1;",
          "new_line_content": "                return AVPROBE_SCORE_MAX / 2;",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "rlen",
          "new_api": null,
          "old_text": "rlen(line);\n",
          "new_text": null,
          "old_line_content": "            const int len = strlen(line);",
          "new_line_content": "        /* queue timed line */",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "rlen",
          "new_api": null,
          "old_text": "rlen(sub->line);\n",
          "new_text": null,
          "old_line_content": "                const int old_len = strlen(sub->line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "ERROR",
          "new_api": null,
          "old_text": "ERROR(ENOMEM);\n",
          "new_text": null,
          "old_line_content": "                    return AVERROR(ENOMEM);",
          "new_line_content": "                sub = &subs[jacosub->nsub];",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "rcpy",
          "new_api": null,
          "old_text": "rcpy(sub->line + old_len, line);\n",
          "new_text": null,
          "old_line_content": "                strcpy(sub->line + old_len, line);",
          "new_line_content": "                if (!tmp)",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "_realloc",
          "new_api": null,
          "old_text": "_realloc(jacosub->subs,\n                                  sizeof(*jacosub->subs) * (jacosub->nsub+1));\n",
          "new_text": null,
          "old_line_content": "                subs = av_realloc(jacosub->subs,",
          "new_line_content": "                sub->line = tmp;",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "_strdup",
          "new_api": null,
          "old_text": "_strdup(line);\n",
          "new_text": null,
          "old_line_content": "                sub->line = av_strdup(line);",
          "new_line_content": "                jacosub->subs = subs;",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "_toupper",
          "new_api": null,
          "old_text": "_toupper(k);\n",
          "new_text": null,
          "old_line_content": "    k = av_toupper(k);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "_ARRAY_ELEMS",
          "new_api": null,
          "old_text": "_ARRAY_ELEMS(cmds); ",
          "new_text": null,
          "old_line_content": "    for (i = 0; i < FF_ARRAY_ELEMS(cmds); i++)",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "ERROR",
          "new_api": null,
          "old_text": "ERROR(ENOMEM);\n",
          "new_text": null,
          "old_line_content": "                    return AVERROR(ENOMEM);",
          "new_line_content": "                sub->pos  = pos;",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "rcmp",
          "new_api": null,
          "old_text": "rcmp(&line[len - 2], \"\\\\\\n\");\n",
          "new_text": null,
          "old_line_content": "            merge_line = len > 1 && !strcmp(&line[len - 2], \"\\\\\\n\");",
          "new_line_content": "                if (!sub->line)",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "_freep",
          "new_api": null,
          "old_text": "_freep(&jacosub->subs[i].line);\n",
          "new_text": null,
          "old_line_content": "        av_freep(&jacosub->subs[i].line);",
          "new_line_content": "    JACOsubContext *jacosub = s->priv_data;",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "t_jss_cmd",
          "new_api": null,
          "old_text": "t_jss_cmd(p[0]);\n",
          "new_text": null,
          "old_line_content": "        i = get_jss_cmd(p[0]);",
          "new_line_content": "        if (*p != '#')",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "_freep",
          "new_api": null,
          "old_text": "_freep(&jacosub->subs);\n",
          "new_text": null,
          "old_line_content": "    av_freep(&jacosub->subs);",
          "new_line_content": "    for (i = 0; i < jacosub->nsub; i++)",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "rlen",
          "new_api": null,
          "old_text": "rlen(cmds[i]);\n",
          "new_text": null,
          "old_line_content": "        cmd_len = strlen(cmds[i]);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "_strncasecmp",
          "new_api": null,
          "old_text": "_strncasecmp(p, cmds[i], cmd_len) =",
          "new_text": null,
          "old_line_content": "        if (av_strncasecmp(p, cmds[i], cmd_len) == 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "s_skip_whitespace",
          "new_api": null,
          "old_text": "s_skip_whitespace(p);\n",
          "new_text": null,
          "old_line_content": "        p = jss_skip_whitespace(p);",
          "new_line_content": "            p += cmd_len;",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": "canf",
          "new_api": null,
          "old_text": "canf(buf, \"%u:%u:%u.%u %u:%u:%u.%u %n\",\n               &hs, &ms, &ss, &fs,\n               &he, &me, &se, &fe, &len) =",
          "new_text": null,
          "old_line_content": "    if (sscanf(buf, \"%u:%u:%u.%u %u:%u:%u.%u %n\",",
          "new_line_content": "    unsigned he, me, se, fe; // hours, minutes, seconds, frame end",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "t_shift",
          "new_api": null,
          "old_text": "t_shift(jacosub->timeres, p);\n",
          "new_text": null,
          "old_line_content": "                jacosub->shift = get_shift(jacosub->timeres, p);",
          "new_line_content": "        switch (cmds[i][0]) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 9,
      "total_additions": 35,
      "total_deletions": 35,
      "total_api_changes": 79
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 79,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          72,
          67,
          71
        ]
      }
    },
    "api_calls_before": 48,
    "api_calls_after": 48,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 2,
      "total_diff_lines": 21
    }
  }
}
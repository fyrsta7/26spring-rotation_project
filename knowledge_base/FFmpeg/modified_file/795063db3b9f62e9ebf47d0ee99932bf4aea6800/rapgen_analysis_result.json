{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/795063db3b9f62e9ebf47d0ee99932bf4aea6800",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/795063db3b9f62e9ebf47d0ee99932bf4aea6800/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/795063db3b9f62e9ebf47d0ee99932bf4aea6800/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/795063db3b9f62e9ebf47d0ee99932bf4aea6800/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1483,
          "old_api": "mul_poly",
          "new_api": "put_bits_ptr",
          "old_text": "mul_poly(crc_inv, crc1, CRC16_POLY)",
          "new_text": "put_bits_ptr(&s->pb)",
          "old_line_content": "    crc1    = mul_poly(crc_inv, crc1, CRC16_POLY);",
          "new_line_content": "        memset(put_bits_ptr(&s->pb), 0, pad_bytes);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "AV_WB16",
          "new_api": "pow_poly",
          "old_text": "AV_WB16(frame + frame_size - 2, crc2)",
          "new_text": "pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY)",
          "old_line_content": "    AV_WB16(frame + frame_size - 2, crc2);",
          "new_line_content": "    crc_inv = pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY);",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "compute_bit_allocation",
          "new_api": "adjust_frame_size",
          "old_text": "compute_bit_allocation(s)",
          "new_text": "adjust_frame_size(s)",
          "old_line_content": "    ret = compute_bit_allocation(s);",
          "new_line_content": "        adjust_frame_size(s);",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": "av_log",
          "new_api": "deinterleave_input_samples",
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\")",
          "new_text": "deinterleave_input_samples(s, samples)",
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\");",
          "new_line_content": "    deinterleave_input_samples(s, samples);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "quantize_mantissas",
          "new_api": "process_exponents",
          "old_text": "quantize_mantissas(s)",
          "new_text": "process_exponents(s)",
          "old_line_content": "    quantize_mantissas(s);",
          "new_line_content": "    process_exponents(s);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "output_frame",
          "new_api": "compute_bit_allocation",
          "old_text": "output_frame(s, frame)",
          "new_text": "compute_bit_allocation(s)",
          "old_line_content": "    output_frame(s, frame);",
          "new_line_content": "    ret = compute_bit_allocation(s);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": "mdct_end",
          "new_api": "av_freep",
          "old_text": "mdct_end(&s->mdct)",
          "new_text": "av_freep(&block->exp)",
          "old_line_content": "    mdct_end(&s->mdct);",
          "new_line_content": "        av_freep(&block->exp);",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->mdct_coef_buffer), alloc_fail)",
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],\n                          (AC3_FRAME_SIZE+AC3_BLOCK_SIZE) * sizeof(**s->planar_samples),\n                          alloc_fail)",
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mdct_coef_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),\n                          alloc_fail)",
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *\n                     64 * sizeof(*s->mask_buffer), alloc_fail)",
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mdct_coef, s->channels * sizeof(*block->mdct_coef),",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->mask_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),\n                          alloc_fail)",
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->qmant_buffer), alloc_fail)",
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->exp, s->channels * sizeof(*block->exp),",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->qmant_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),\n                          alloc_fail)",
          "new_text": "FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),\n                         alloc_fail)",
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),",
          "new_line_content": "        FF_ALLOC_OR_GOTO(avctx, block->bap, s->channels * sizeof(*block->bap),",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "avcodec_alloc_frame",
          "new_api": "mdct_init",
          "old_text": "avcodec_alloc_frame()",
          "new_text": "mdct_init(&s->mdct, 9)",
          "old_line_content": "    avctx->coded_frame= avcodec_alloc_frame();",
          "new_line_content": "    ret = mdct_init(&s->mdct, 9);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "sin",
          "new_api": "fft",
          "old_text": "sin(a)",
          "new_text": "fft(in, 7)",
          "old_line_content": "            sum_re += in1[n].re * cos(a) - in1[n].im * sin(a);",
          "new_line_content": "    fft(in, 7);",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "av_log",
          "new_api": "cos",
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i])",
          "new_text": "cos(a)",
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i]);",
          "new_line_content": "            s += input1[n] * cos(a);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": "av_log_set_level",
          "new_api": "av_log",
          "old_text": "av_log_set_level(AV_LOG_DEBUG)",
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax)",
          "old_line_content": "    av_log_set_level(AV_LOG_DEBUG);",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "apply_mdct",
          "old_text": null,
          "new_text": "apply_mdct(s)",
          "old_line_content": "    }",
          "new_line_content": "    apply_mdct(s);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\")",
          "old_line_content": "    return s->frame_size;",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Bit allocation failed. Try increasing the bitrate.\\n\");",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "quantize_mantissas",
          "old_text": null,
          "new_text": "quantize_mantissas(s)",
          "old_line_content": "/**",
          "new_line_content": "    quantize_mantissas(s);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(block->bap[ch], s->blocks[blk-1].bap[ch], AC3_MAX_COEFS)",
          "old_line_content": "        }",
          "new_line_content": "                memcpy(block->bap[ch], s->blocks[blk-1].bap[ch], AC3_MAX_COEFS);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "output_frame",
          "old_text": null,
          "new_text": "output_frame(s, frame)",
          "old_line_content": " */",
          "new_line_content": "    output_frame(s, frame);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "ff_ac3_bit_alloc_calc_bap",
          "old_text": null,
          "new_text": "ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,\n                                      s->nb_coefs[ch], snr_offset,\n                                      s->bit_alloc.floor, ff_ac3_bap_tab,\n                                      block->bap[ch])",
          "old_line_content": "    }",
          "new_line_content": "            ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "compute_mantissa_size",
          "old_text": null,
          "new_text": "compute_mantissa_size(mant_cnt, block->bap[ch], s->nb_coefs[ch])",
          "old_line_content": "/**",
          "new_line_content": "            mantissa_bits += compute_mantissa_size(mant_cnt, block->bap[ch], s->nb_coefs[ch]);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "compute_mantissa_size_final",
          "old_text": null,
          "new_text": "compute_mantissa_size_final(mant_cnt)",
          "old_line_content": " * Find the largest SNR offset that will allow data to fit in the frame.",
          "new_line_content": "        mantissa_bits += compute_mantissa_size_final(mant_cnt);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->bap1_buffer)",
          "old_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++) {",
          "new_line_content": "    av_freep(&s->bap1_buffer);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&s->mdct_coef_buffer)",
          "old_line_content": "        AC3Block *block = &s->blocks[blk];",
          "new_line_content": "    av_freep(&s->mdct_coef_buffer);",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->bap)",
          "old_line_content": "    }",
          "new_line_content": "        av_freep(&block->bap);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->mdct_coef)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&block->mdct_coef);",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->grouped_exp)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&block->grouped_exp);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->band_psd)",
          "old_line_content": "    return 0;",
          "new_line_content": "        av_freep(&block->band_psd);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    while (snr_offset + 16 <= 1023 &&",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->mask)",
          "old_line_content": "}",
          "new_line_content": "        av_freep(&block->mask);",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&block->qmant)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&block->qmant);",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 64)",
          "old_line_content": "    }",
          "new_line_content": "           bit_alloc(s, snr_offset + 64) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "mdct_end",
          "old_text": null,
          "new_text": "mdct_end(&s->mdct)",
          "old_line_content": " * Set channel information during initialization.",
          "new_line_content": "    mdct_end(&s->mdct);",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->coded_frame)",
          "old_line_content": "static av_cold int set_channel_info(AC3EncodeContext *s, int channels,",
          "new_line_content": "    av_freep(&avctx->coded_frame);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 16)",
          "old_line_content": "    }",
          "new_line_content": "           bit_alloc(s, snr_offset + 16) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 4)",
          "old_line_content": "    }",
          "new_line_content": "           bit_alloc(s, snr_offset + 4) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "bit_alloc",
          "old_text": null,
          "new_text": "bit_alloc(s, snr_offset + 1)",
          "old_line_content": "    for (ch = 0; ch < s->channels; ch++)",
          "new_line_content": "           bit_alloc(s, snr_offset + 1) <= bits_left) {",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    s->channels     = channels;",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "reset_block_bap",
          "old_text": null,
          "new_text": "reset_block_bap(s)",
          "old_line_content": "",
          "new_line_content": "    reset_block_bap(s);",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "avcodec_guess_channel_layout",
          "old_text": null,
          "new_text": "avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL)",
          "old_line_content": "    if (s->lfe_on)",
          "new_line_content": "        ch_layout = avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL);",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "av_get_channel_layout_nb_channels",
          "old_text": null,
          "new_text": "av_get_channel_layout_nb_channels(ch_layout)",
          "old_line_content": "        ch_layout -= AV_CH_LOW_FREQUENCY;",
          "new_line_content": "    if (av_get_channel_layout_nb_channels(ch_layout) != channels)",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "count_frame_bits",
          "old_text": null,
          "new_text": "count_frame_bits(s)",
          "old_line_content": "/**",
          "new_line_content": "    count_frame_bits(s);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "bit_alloc_masking",
          "old_text": null,
          "new_text": "bit_alloc_masking(s)",
          "old_line_content": " */",
          "new_line_content": "    bit_alloc_masking(s);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "cbr_bit_allocation",
          "old_text": null,
          "new_text": "cbr_bit_allocation(s)",
          "old_line_content": "{",
          "new_line_content": "    return cbr_bit_allocation(s);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    return 0;",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"\n                                      \"encoder will guess the layout, but it \"\n                                      \"might be incorrect.\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(v >= 0 && v < levels)",
          "old_line_content": "static inline int asym_quant(int c, int e, int qbits)",
          "new_line_content": "    assert(v >= 0 && v < levels);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "set_channel_info",
          "old_text": null,
          "new_text": "set_channel_info(s, avctx->channels, &avctx->channel_layout)",
          "old_line_content": "        if ((ff_ac3_sample_rate_tab[i / 3] >> (i % 3)) == avctx->sample_rate)",
          "new_line_content": "    ret = set_channel_info(s, avctx->channels, &avctx->channel_layout);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\");",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\")",
          "old_line_content": "    for (i = 0; i < 19; i++) {",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\");",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        if ((ff_ac3_bitrate_tab[i] >> s->bit_alloc.sr_shift)*1000 == avctx->bit_rate)",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(v >= -m)",
          "old_line_content": "static void quantize_mantissas_blk_ch(AC3EncodeContext *s,",
          "new_line_content": "    assert(v >= -m);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\");",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 3)",
          "old_line_content": "                *s->qmant1_ptr += 3 * v;",
          "new_line_content": "            v = sym_quant(c, e, 3);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(cutoff, 1, s->sample_rate >> 1)",
          "old_line_content": "    }",
          "new_line_content": "        cutoff         = av_clip(cutoff, 1, s->sample_rate >> 1);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip((fbw_coeffs - 73) / 3, 0, 60)",
          "old_line_content": "    /* set number of coefficients for each channel */",
          "new_line_content": "        bw_code        = av_clip((fbw_coeffs - 73) / 3, 0, 60);",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 5)",
          "old_line_content": "                *s->qmant2_ptr += 5 * v;",
          "new_line_content": "            v = sym_quant(c, e, 5);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),\n                     alloc_fail)",
          "old_line_content": "                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail);",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 7)",
          "old_line_content": "                s->mant4_cnt = 1;",
          "new_line_content": "            v = sym_quant(c, e, 7);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 11)",
          "old_line_content": "                *s->qmant4_ptr += v;",
          "new_line_content": "            v = sym_quant(c, e, 11);",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "FF_ALLOC_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->psd_buffer), alloc_fail)",
          "old_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++) {",
          "new_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->psd_buffer, AC3_MAX_BLOCKS * s->channels *",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "sym_quant",
          "old_text": null,
          "new_text": "sym_quant(c, e, 15)",
          "old_line_content": "        default:",
          "new_line_content": "            v = sym_quant(c, e, 15);",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, 14)",
          "old_line_content": "        }",
          "new_line_content": "            v = asym_quant(c, e, 14);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),\n                          alloc_fail)",
          "old_line_content": "",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->psd, s->channels * sizeof(*block->psd),",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, 16)",
          "old_line_content": "}",
          "new_line_content": "            v = asym_quant(c, e, 16);",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),\n                          alloc_fail)",
          "old_line_content": "            block->bap[ch]         = &s->bap_buffer        [AC3_MAX_COEFS * (blk * s->channels + ch)];",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->band_psd, s->channels * sizeof(*block->band_psd),",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "asym_quant",
          "old_text": null,
          "new_text": "asym_quant(c, e, b - 1)",
          "old_line_content": "/**",
          "new_line_content": "            v = asym_quant(c, e, b - 1);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),\n                          alloc_fail)",
          "old_line_content": "            block->exp[ch]         = &s->exp_buffer        [AC3_MAX_COEFS * (blk * s->channels + ch)];",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->mask, s->channels * sizeof(*block->mask),",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "FF_ALLOCZ_OR_GOTO",
          "old_text": null,
          "new_text": "FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),\n                          alloc_fail)",
          "old_line_content": "            block->psd[ch]         = &s->psd_buffer        [AC3_MAX_COEFS * (blk * s->channels + ch)];",
          "new_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->qmant, s->channels * sizeof(*block->qmant),",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "{",
          "new_line_content": "    return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "quantize_mantissas_blk_ch",
          "old_text": null,
          "new_text": "quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],\n                                      block->exp[ch], block->bap[ch],\n                                      block->qmant[ch], s->nb_coefs[ch])",
          "old_line_content": "/**",
          "new_line_content": "            quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "ac3_common_init",
          "old_text": null,
          "new_text": "ac3_common_init()",
          "old_line_content": "",
          "new_line_content": "    ac3_common_init();",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": null,
          "new_api": "validate_options",
          "old_text": null,
          "new_text": "validate_options(avctx, s)",
          "old_line_content": "    s->bits_written    = 0;",
          "new_line_content": "    ret = validate_options(avctx, s);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, 0)",
          "old_line_content": "    if (s->channel_mode & 0x04)",
          "new_line_content": "    put_bits(&s->pb, 16, 0);        /* crc1: will be filled later */",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 6,  s->frame_size_code + (s->frame_size - s->frame_size_min) / 2)",
          "old_line_content": "    if (s->channel_mode == AC3_CHMODE_STEREO)",
          "new_line_content": "    put_bits(&s->pb, 6,  s->frame_size_code + (s->frame_size - s->frame_size_min) / 2);",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": null,
          "new_api": "set_bandwidth",
          "old_text": null,
          "new_text": "set_bandwidth(s, avctx->cutoff)",
          "old_line_content": "    if (ret)",
          "new_line_content": "    set_bandwidth(s, avctx->cutoff);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "exponent_init",
          "old_text": null,
          "new_text": "exponent_init(s)",
          "old_line_content": "",
          "new_line_content": "    exponent_init(s);",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "}",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no compression control word */",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no lang code */",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no audio production info */",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "/**",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no copyright */",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": " * Write one audio block to the output bitstream.",
          "new_line_content": "    put_bits(&s->pb, 1, 1);         /* original bitstream */",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": " */",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no time code 1 */",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "static void output_audio_block(AC3EncodeContext *s,",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no time code 2 */",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "                               int block_num)",
          "new_line_content": "    put_bits(&s->pb, 1, 0);         /* no additional bit stream info */",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "allocate_buffers",
          "old_text": null,
          "new_text": "allocate_buffers(avctx)",
          "old_line_content": "    return 0;",
          "new_line_content": "    ret = allocate_buffers(avctx);",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": null,
          "new_api": "bit_alloc_init",
          "old_text": null,
          "new_text": "bit_alloc_init(s)",
          "old_line_content": "    if (ret)",
          "new_line_content": "    bit_alloc_init(s);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": null,
          "new_api": "avcodec_alloc_frame",
          "old_text": null,
          "new_text": "avcodec_alloc_frame()",
          "old_line_content": "}",
          "new_line_content": "    avctx->coded_frame= avcodec_alloc_frame();",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "dsputil_init",
          "old_text": null,
          "new_text": "dsputil_init(&s->dsp, avctx)",
          "old_line_content": "",
          "new_line_content": "    dsputil_init(&s->dsp, avctx);",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "ac3_encode_close",
          "old_text": null,
          "new_text": "ac3_encode_close(avctx)",
          "old_line_content": "",
          "new_line_content": "    ac3_encode_close(avctx);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "        put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "    }",
          "new_line_content": "    put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": "        if (!block_num) {",
          "new_line_content": "        put_bits(&s->pb, 1, 1); /* coupling strategy present */",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "            /* first block must define rematrixing (rematstr) */",
          "new_line_content": "        put_bits(&s->pb, 1, 0); /* no coupling strategy */",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "        put_bits(&s->pb, 1, 0); /* no new coupling strategy */",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(lfg)",
          "old_line_content": "        sum_re = 0;",
          "new_line_content": "        in[i].re = av_lfg_get(lfg) % 65535 - 32767;",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(lfg)",
          "old_line_content": "        sum_im = 0;",
          "new_line_content": "        in[i].im = av_lfg_get(lfg) % 65535 - 32767;",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 1)",
          "old_line_content": "        }",
          "new_line_content": "            put_bits(&s->pb, 1, 1);",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "new_line_content": "                put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "sin",
          "old_text": null,
          "new_text": "sin(a)",
          "old_line_content": "",
          "new_line_content": "            sum_re += in1[n].re * cos(a) - in1[n].im * sin(a);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "cos",
          "old_text": null,
          "new_text": "cos(a)",
          "old_line_content": "static void mdct_test(AVLFG *lfg)",
          "new_line_content": "            sum_im += in1[n].re * sin(a) + in1[n].im * cos(a);",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",\n               k, in[k].re, in[k].im, sum_re / FN, sum_im / FN)",
          "old_line_content": "    int16_t input[MDCT_SAMPLES];",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, block->exp_strategy[ch])",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(&s->pb, 2, block->exp_strategy[ch]);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel])",
          "old_line_content": "    /* exponents */",
          "new_line_content": "        put_bits(&s->pb, 1, block->exp_strategy[s->lfe_channel]);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 6, s->bandwidth_code[ch])",
          "old_line_content": "            continue;",
          "new_line_content": "            put_bits(&s->pb, 6, s->bandwidth_code[ch]);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": null,
          "new_api": "av_lfg_get",
          "old_text": null,
          "new_text": "av_lfg_get(lfg)",
          "old_line_content": "        s = 0;",
          "new_line_content": "        input[i]  = (av_lfg_get(lfg) % 65535 - 32767) * 9 / 10;",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, block->grouped_exp[ch][0])",
          "old_line_content": "        if (ch != s->lfe_channel)",
          "new_line_content": "        put_bits(&s->pb, 4, block->grouped_exp[ch][0]);",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "mdct512",
          "old_text": null,
          "new_text": "mdct512(output, input)",
          "old_line_content": "        }",
          "new_line_content": "    mdct512(output, input);",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 7, block->grouped_exp[ch][i])",
          "old_line_content": "    baie = (block_num == 0);",
          "new_line_content": "            put_bits(&s->pb, 7, block->grouped_exp[ch][i]);",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, baie)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 1, baie);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i])",
          "old_line_content": "",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %7d %7.0f\\n\", i, output[i], output1[i]);",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, s->fast_decay_code)",
          "old_line_content": "    if (baie) {",
          "new_line_content": "        put_bits(&s->pb, 2, s->fast_decay_code);",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 2, s->db_per_bit_code)",
          "old_line_content": "        for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "        put_bits(&s->pb, 2, s->db_per_bit_code);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, baie)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 1, baie);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->fine_snr_offset[ch])",
          "old_line_content": "    /* mantissas */",
          "new_line_content": "            put_bits(&s->pb, 4, s->fine_snr_offset[ch]);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 3, s->fast_gain_code[ch])",
          "old_line_content": "    for (ch = 0; ch < s->channels; ch++) {",
          "new_line_content": "            put_bits(&s->pb, 3, s->fast_gain_code[ch]);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "av_log_set_level",
          "old_text": null,
          "new_text": "av_log_set_level(AV_LOG_DEBUG)",
          "old_line_content": "#endif /* TEST */",
          "new_line_content": "    av_log_set_level(AV_LOG_DEBUG);",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": null,
          "new_api": "mdct_init",
          "old_text": null,
          "new_text": "mdct_init(9)",
          "old_line_content": "",
          "new_line_content": "    mdct_init(9);",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "fft_test",
          "old_text": null,
          "new_text": "fft_test(&lfg)",
          "old_line_content": "AVCodec ac3_encoder = {",
          "new_line_content": "    fft_test(&lfg);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "            b = block->bap[ch][i];",
          "new_line_content": "    put_bits(&s->pb, 1, 0); /* no delta bit allocation */",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "            switch (b) {",
          "new_line_content": "    put_bits(&s->pb, 1, 0); /* no data to skip */",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": null,
          "new_api": "mdct_test",
          "old_text": null,
          "new_text": "mdct_test(&lfg)",
          "old_line_content": "    \"ac3\",",
          "new_line_content": "    mdct_test(&lfg);",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,   5, q)",
          "old_line_content": "        }",
          "new_line_content": "            case 1: if (q != 128) put_bits(&s->pb,   5, q); break;",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,   7, q)",
          "old_line_content": "    }",
          "new_line_content": "            case 2: if (q != 128) put_bits(&s->pb,   7, q); break;",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,   3, q)",
          "old_line_content": "}",
          "new_line_content": "            case 3:               put_bits(&s->pb,   3, q); break;",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,   7, q)",
          "old_line_content": "",
          "new_line_content": "            case 4: if (q != 128) put_bits(&s->pb,   7, q); break;",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,  14, q)",
          "old_line_content": "",
          "new_line_content": "            case 14:              put_bits(&s->pb,  14, q); break;",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb,  16, q)",
          "old_line_content": "/** CRC-16 Polynomial */",
          "new_line_content": "            case 15:              put_bits(&s->pb,  16, q); break;",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, b-1, q)",
          "old_line_content": "#define CRC16_POLY ((1 << 0) | (1 << 2) | (1 << 15) | (1 << 16))",
          "new_line_content": "            default:              put_bits(&s->pb, b-1, q); break;",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "old_line_content": "        AV_CH_LAYOUT_4POINT0,",
          "new_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": null,
          "new_api": "mul_poly",
          "old_text": null,
          "new_text": "mul_poly(r, a, poly)",
          "old_line_content": "/**",
          "new_line_content": "            r = mul_poly(r, a, poly);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "mul_poly",
          "old_text": null,
          "new_text": "mul_poly(a, a, poly)",
          "old_line_content": " * Fill the end of the frame with 0's and compute the two CRCs.",
          "new_line_content": "        a = mul_poly(a, a, poly);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    /* this is not so easy because it is at the beginning of the data... */",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "put_bits_ptr",
          "old_text": null,
          "new_text": "put_bits_ptr(&s->pb)",
          "old_line_content": "                             frame + 4, frame_size_58 - 4));",
          "new_line_content": "    pad_bytes = s->frame_size - (put_bits_ptr(&s->pb) - frame) - 2;",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pad_bytes >= 0)",
          "old_line_content": "    /* XXX: could precompute crc_inv */",
          "new_line_content": "    assert(pad_bytes >= 0);",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": null,
          "new_api": "mul_poly",
          "old_text": null,
          "new_text": "mul_poly(crc_inv, crc1, CRC16_POLY)",
          "old_line_content": "}",
          "new_line_content": "    crc1    = mul_poly(crc_inv, crc1, CRC16_POLY);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": null,
          "new_api": "AV_WB16",
          "old_text": null,
          "new_text": "AV_WB16(frame + 2, crc1)",
          "old_line_content": "",
          "new_line_content": "    AV_WB16(frame + 2, crc1);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "old_line_content": " * Write the frame to the output bitstream.",
          "new_line_content": "    crc2 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "AV_WB16",
          "old_text": null,
          "new_text": "AV_WB16(frame + frame_size - 2, crc2)",
          "old_line_content": "                         unsigned char *frame)",
          "new_line_content": "    AV_WB16(frame + frame_size - 2, crc2);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "init_put_bits",
          "old_text": null,
          "new_text": "init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE)",
          "old_line_content": "}",
          "new_line_content": "    init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE);",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "output_frame_header",
          "old_text": null,
          "new_text": "output_frame_header(s)",
          "old_line_content": "",
          "new_line_content": "    output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "output_audio_block",
          "old_text": null,
          "new_text": "output_audio_block(s, blk)",
          "old_line_content": " */",
          "new_line_content": "        output_audio_block(s, blk);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": null,
          "new_api": "output_frame_end",
          "old_text": null,
          "new_text": "output_frame_end(s)",
          "old_line_content": "                            unsigned char *frame, int buf_size, void *data)",
          "new_line_content": "    output_frame_end(s);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1031,
          "old_api": "ff_ac3_bit_alloc_calc_bap",
          "new_api": null,
          "old_text": "ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,\n                                      s->nb_coefs[ch], snr_offset,\n                                      s->bit_alloc.floor, ff_ac3_bap_tab,\n                                      block->bap[ch])",
          "new_text": null,
          "old_line_content": "            ff_ac3_bit_alloc_calc_bap(block->mask[ch], block->psd[ch], 0,",
          "new_line_content": "            /* Currently the only bit allocation parameters which vary across",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "compute_mantissa_size",
          "new_api": null,
          "old_text": "compute_mantissa_size(mant_cnt, block->bap[ch], s->nb_coefs[ch])",
          "new_text": null,
          "old_line_content": "            mantissa_bits += compute_mantissa_size(mant_cnt, block->bap[ch], s->nb_coefs[ch]);",
          "new_line_content": "            if (block->exp_strategy[ch] == EXP_REUSE) {",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "compute_mantissa_size_final",
          "new_api": null,
          "old_text": "compute_mantissa_size_final(mant_cnt)",
          "new_text": null,
          "old_line_content": "        mantissa_bits += compute_mantissa_size_final(mant_cnt);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->planar_samples[ch])",
          "new_text": null,
          "old_line_content": "        av_freep(&s->planar_samples[ch]);",
          "new_line_content": " * Finalize encoding and free any memory allocated by the encoder.",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->planar_samples)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->planar_samples);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->bap_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->bap_buffer);",
          "new_line_content": "static av_cold int ac3_encode_close(AVCodecContext *avctx)",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->bap1_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->bap1_buffer);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->mdct_coef_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->mdct_coef_buffer);",
          "new_line_content": "    int blk, ch;",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->exp_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->exp_buffer);",
          "new_line_content": "    AC3EncodeContext *s = avctx->priv_data;",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->grouped_exp_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->grouped_exp_buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->psd_buffer)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->psd_buffer);",
          "new_line_content": "    for (ch = 0; ch < s->channels; ch++)",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset) > bits_left) {",
          "new_line_content": "    int bits_left;",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&block->mask)",
          "new_text": null,
          "old_line_content": "        av_freep(&block->mask);",
          "new_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++) {",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&block->qmant)",
          "new_text": null,
          "old_line_content": "        av_freep(&block->qmant);",
          "new_line_content": "        AC3Block *block = &s->blocks[blk];",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 16)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 16) <= bits_left) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 4)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 4) <= bits_left) {",
          "new_line_content": "        FFSWAP(uint8_t *, s->bap_buffer, s->bap1_buffer);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "bit_alloc",
          "new_api": null,
          "old_text": "bit_alloc(s, snr_offset + 1)",
          "new_text": null,
          "old_line_content": "           bit_alloc(s, snr_offset + 1) <= bits_left) {",
          "new_line_content": "        FFSWAP(uint8_t *, s->bap_buffer, s->bap1_buffer);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": " * Set channel information during initialization.",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "static av_cold int set_channel_info(AC3EncodeContext *s, int channels,",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "reset_block_bap",
          "new_api": null,
          "old_text": "reset_block_bap(s)",
          "new_text": null,
          "old_line_content": "    reset_block_bap(s);",
          "new_line_content": "        FFSWAP(uint8_t *, s->bap_buffer, s->bap1_buffer);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "avcodec_guess_channel_layout",
          "new_api": null,
          "old_text": "avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL)",
          "new_text": null,
          "old_line_content": "        ch_layout = avcodec_guess_channel_layout(channels, CODEC_ID_AC3, NULL);",
          "new_line_content": "    int ch_layout;",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "av_get_channel_layout_nb_channels",
          "new_api": null,
          "old_text": "av_get_channel_layout_nb_channels(ch_layout)",
          "new_text": null,
          "old_line_content": "    if (av_get_channel_layout_nb_channels(ch_layout) != channels)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    if (channels < 1 || channels > AC3_MAX_CHANNELS)",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "count_frame_bits",
          "new_api": null,
          "old_text": "count_frame_bits(s)",
          "new_text": null,
          "old_line_content": "    count_frame_bits(s);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "bit_alloc_masking",
          "new_api": null,
          "old_text": "bit_alloc_masking(s)",
          "new_text": null,
          "old_line_content": "    bit_alloc_masking(s);",
          "new_line_content": " * Finds the SNR offset value that maximizes quality and fits in the specified",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "cbr_bit_allocation",
          "new_api": null,
          "old_text": "cbr_bit_allocation(s)",
          "new_text": null,
          "old_line_content": "    return cbr_bit_allocation(s);",
          "new_line_content": " * used to quantize the mantissas.",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    case AV_CH_LAYOUT_SURROUND:       s->channel_mode = AC3_CHMODE_3F;     break;",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"\n                                      \"encoder will guess the layout, but it \"\n                                      \"might be incorrect.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_WARNING, \"No channel layout specified. The \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(v >= 0 && v < levels)",
          "new_text": null,
          "old_line_content": "    assert(v >= 0 && v < levels);",
          "new_line_content": "        v = (levels * (c << e)) >> 24;",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "set_channel_info",
          "new_api": null,
          "old_text": "set_channel_info(s, avctx->channels, &avctx->channel_layout)",
          "new_text": null,
          "old_line_content": "    ret = set_channel_info(s, avctx->channels, &avctx->channel_layout);",
          "new_line_content": "    int i, ret;",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid channel layout\\n\");",
          "new_line_content": "    /* validate channel layout */",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid sample rate\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(v >= -m)",
          "new_text": null,
          "old_line_content": "    assert(v >= -m);",
          "new_line_content": "        v = c << lshift;",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"invalid bit rate\\n\");",
          "new_line_content": "    s->bit_alloc.sr_code  = i / 3;",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 3)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 3);",
          "new_line_content": "        int c = mdct_coef[i];",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(cutoff, 1, s->sample_rate >> 1)",
          "new_text": null,
          "old_line_content": "        cutoff         = av_clip(cutoff, 1, s->sample_rate >> 1);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip((fbw_coeffs - 73) / 3, 0, 60)",
          "new_text": null,
          "old_line_content": "        bw_code        = av_clip((fbw_coeffs - 73) / 3, 0, 60);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 5)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 5);",
          "new_line_content": "            default:",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),\n                     alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->planar_samples, s->channels * sizeof(*s->planar_samples),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],\n                          (AC3_FRAME_SIZE+AC3_BLOCK_SIZE) * sizeof(**s->planar_samples),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, s->planar_samples[ch],",
          "new_line_content": "static av_cold int allocate_buffers(AVCodecContext *avctx)",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap_buffer),  alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap_buffer,  AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->bap1_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->bap1_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                     alloc_fail);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 7)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 7);",
          "new_line_content": "            default:",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "FF_ALLOC_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *\n                     AC3_MAX_COEFS * sizeof(*s->exp_buffer), alloc_fail)",
          "new_text": null,
          "old_line_content": "    FF_ALLOC_OR_GOTO(avctx, s->exp_buffer, AC3_MAX_BLOCKS * s->channels *",
          "new_line_content": "                          alloc_fail);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 11)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 11);",
          "new_line_content": "                v = 128;",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "sym_quant",
          "new_api": null,
          "old_text": "sym_quant(c, e, 15)",
          "new_text": null,
          "old_line_content": "            v = sym_quant(c, e, 15);",
          "new_line_content": "            default:",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, 14)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, 14);",
          "new_line_content": "                v = 128;",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": "FF_ALLOCZ_OR_GOTO",
          "new_api": null,
          "old_text": "FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),\n                          alloc_fail)",
          "new_text": null,
          "old_line_content": "        FF_ALLOCZ_OR_GOTO(avctx, block->grouped_exp, s->channels * sizeof(*block->grouped_exp),",
          "new_line_content": "    for (blk = 0; blk < AC3_MAX_BLOCKS; blk++) {",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, 16)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, 16);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "asym_quant",
          "new_api": null,
          "old_text": "asym_quant(c, e, b - 1)",
          "new_text": null,
          "old_line_content": "            v = asym_quant(c, e, b - 1);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "    return AVERROR(ENOMEM);",
          "new_line_content": "            block->band_psd[ch]    = &s->band_psd_buffer   [64            * (blk * s->channels + ch)];",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "quantize_mantissas_blk_ch",
          "new_api": null,
          "old_text": "quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],\n                                      block->exp[ch], block->bap[ch],\n                                      block->qmant[ch], s->nb_coefs[ch])",
          "new_text": null,
          "old_line_content": "            quantize_mantissas_blk_ch(s, block->mdct_coef[ch], block->exp_shift[ch],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "ac3_common_init",
          "new_api": null,
          "old_text": "ac3_common_init()",
          "new_text": null,
          "old_line_content": "    ac3_common_init();",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "validate_options",
          "new_api": null,
          "old_text": "validate_options(avctx, s)",
          "new_text": null,
          "old_line_content": "    ret = validate_options(avctx, s);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 16, 0);        /* crc1: will be filled later */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, 0x0b77)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 16, 0x0b77);   /* frame header */",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6,  s->frame_size_code + (s->frame_size - s->frame_size_min) / 2)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 6,  s->frame_size_code + (s->frame_size - s->frame_size_min) / 2);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 5,  s->bitstream_id)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 5,  s->bitstream_id);",
          "new_line_content": " * Write the AC-3 frame header to the output bitstream.",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3,  s->bitstream_mode)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 3,  s->bitstream_mode);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3,  s->channel_mode)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 3,  s->channel_mode);",
          "new_line_content": "static void output_frame_header(AC3EncodeContext *s)",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2,  s->bit_alloc.sr_code)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 2,  s->bit_alloc.sr_code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "set_bandwidth",
          "new_api": null,
          "old_text": "set_bandwidth(s, avctx->cutoff)",
          "new_text": null,
          "old_line_content": "    set_bandwidth(s, avctx->cutoff);",
          "new_line_content": "    s->bitstream_id   = 8 + s->bit_alloc.sr_shift;",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "exponent_init",
          "new_api": null,
          "old_text": "exponent_init(s)",
          "new_text": null,
          "old_line_content": "    exponent_init(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0);         /* no compression control word */",
          "new_line_content": "    if ((s->channel_mode & 0x01) && s->channel_mode != AC3_CHMODE_MONO)",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "bit_alloc_init",
          "new_api": null,
          "old_text": "bit_alloc_init(s)",
          "new_text": null,
          "old_line_content": "    bit_alloc_init(s);",
          "new_line_content": "    s->bits_written    = 0;",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0);         /* no audio production info */",
          "new_line_content": "    if (s->channel_mode & 0x04)",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 1);         /* original bitstream */",
          "new_line_content": "    if (s->channel_mode == AC3_CHMODE_STEREO)",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "mdct_init",
          "new_api": null,
          "old_text": "mdct_init(&s->mdct, 9)",
          "new_text": null,
          "old_line_content": "    ret = mdct_init(&s->mdct, 9);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "allocate_buffers",
          "new_api": null,
          "old_text": "allocate_buffers(avctx)",
          "new_text": null,
          "old_line_content": "    ret = allocate_buffers(avctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "dsputil_init",
          "new_api": null,
          "old_text": "dsputil_init(&s->dsp, avctx)",
          "new_text": null,
          "old_line_content": "    dsputil_init(&s->dsp, avctx);",
          "new_line_content": "        goto init_fail;",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "ac3_encode_close",
          "new_api": null,
          "old_text": "ac3_encode_close(avctx)",
          "new_text": null,
          "old_line_content": "    ac3_encode_close(avctx);",
          "new_line_content": "        goto init_fail;",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0);",
          "new_line_content": "static void output_audio_block(AC3EncodeContext *s,",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 1);",
          "new_line_content": "    AC3Block *block = &s->blocks[block_num];",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0);",
          "new_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 1); /* coupling strategy present */",
          "new_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no new coupling strategy */",
          "new_line_content": "    /* dynamic range codes */",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(lfg)",
          "new_text": null,
          "old_line_content": "        in[i].re = av_lfg_get(lfg) % 65535 - 32767;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(lfg)",
          "new_text": null,
          "old_line_content": "        in[i].im = av_lfg_get(lfg) % 65535 - 32767;",
          "new_line_content": "static void fft_test(AVLFG *lfg)",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 1)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 1, 1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "fft",
          "new_api": null,
          "old_text": "fft(in, 7)",
          "new_text": null,
          "old_line_content": "    fft(in, 7);",
          "new_line_content": "    int k, n, i;",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "                put_bits(&s->pb, 1, 0);",
          "new_line_content": "    /* stereo rematrixing */",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 1, 0);",
          "new_line_content": "            /* first block must define rematrixing (rematstr) */",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "cos",
          "new_api": null,
          "old_text": "cos(a)",
          "new_text": null,
          "old_line_content": "            sum_im += in1[n].re * sin(a) + in1[n].im * cos(a);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",\n               k, in[k].re, in[k].im, sum_re / FN, sum_im / FN)",
          "new_text": null,
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"%3d: %6d,%6d %6.0f,%6.0f\\n\",",
          "new_line_content": "    for (k = 0; k < FN; k++) {",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, block->exp_strategy[ch])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, block->exp_strategy[ch]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6, s->bandwidth_code[ch])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 6, s->bandwidth_code[ch]);",
          "new_line_content": "    for (ch = 0; ch < s->fbw_channels; ch++)",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": "av_lfg_get",
          "new_api": null,
          "old_text": "av_lfg_get(lfg)",
          "new_text": null,
          "old_line_content": "        input[i]  = (av_lfg_get(lfg) % 65535 - 32767) * 9 / 10;",
          "new_line_content": "    int16_t input[MDCT_SAMPLES];",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, block->grouped_exp[ch][0])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, block->grouped_exp[ch][0]);",
          "new_line_content": "    /* exponents */",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "mdct512",
          "new_api": null,
          "old_text": "mdct512(output, input)",
          "new_text": null,
          "old_line_content": "    mdct512(output, input);",
          "new_line_content": "    float s, a, err, e, emax;",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 7, block->grouped_exp[ch][i])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 7, block->grouped_exp[ch][i]);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "cos",
          "new_api": null,
          "old_text": "cos(a)",
          "new_text": null,
          "old_line_content": "            s += input1[n] * cos(a);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 2, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, baie)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, baie);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, s->slow_decay_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, s->slow_decay_code);",
          "new_line_content": "        if (ch != s->lfe_channel)",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, s->slow_gain_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, s->slow_gain_code);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 2, s->db_per_bit_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 2, s->db_per_bit_code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, s->floor_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 3, s->floor_code);",
          "new_line_content": "    /* bit allocation info */",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax)",
          "new_text": null,
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"err2=%f emax=%f\\n\", err / AC3_MAX_COEFS, emax);",
          "new_line_content": "    emax = 0;",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, s->fast_gain_code[ch])",
          "new_text": null,
          "old_line_content": "            put_bits(&s->pb, 3, s->fast_gain_code[ch]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "mdct_init",
          "new_api": null,
          "old_text": "mdct_init(9)",
          "new_text": null,
          "old_line_content": "    mdct_init(9);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "fft_test",
          "new_api": null,
          "old_text": "fft_test(&lfg)",
          "new_text": null,
          "old_line_content": "    fft_test(&lfg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 1, 0); /* no delta bit allocation */",
          "new_line_content": "    if (baie) {",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "mdct_test",
          "new_api": null,
          "old_text": "mdct_test(&lfg)",
          "new_text": null,
          "old_line_content": "    mdct_test(&lfg);",
          "new_line_content": "int main(void)",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,   5, q)",
          "new_text": null,
          "old_line_content": "            case 1: if (q != 128) put_bits(&s->pb,   5, q); break;",
          "new_line_content": "    /* mantissas */",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,   7, q)",
          "new_text": null,
          "old_line_content": "            case 2: if (q != 128) put_bits(&s->pb,   7, q); break;",
          "new_line_content": "    for (ch = 0; ch < s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,   3, q)",
          "new_text": null,
          "old_line_content": "            case 3:               put_bits(&s->pb,   3, q); break;",
          "new_line_content": "        int b, q;",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,   7, q)",
          "new_text": null,
          "old_line_content": "            case 4: if (q != 128) put_bits(&s->pb,   7, q); break;",
          "new_line_content": "        for (i = 0; i < s->nb_coefs[ch]; i++) {",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,  14, q)",
          "new_text": null,
          "old_line_content": "            case 14:              put_bits(&s->pb,  14, q); break;",
          "new_line_content": "            q = block->qmant[ch][i];",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb,  16, q)",
          "new_text": null,
          "old_line_content": "            case 15:              put_bits(&s->pb,  16, q); break;",
          "new_line_content": "            b = block->bap[ch][i];",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, b-1, q)",
          "new_text": null,
          "old_line_content": "            default:              put_bits(&s->pb, b-1, q); break;",
          "new_line_content": "            switch (b) {",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\")",
          "new_text": null,
          "old_line_content": "    .long_name = NULL_IF_CONFIG_SMALL(\"ATSC A/52A (AC-3)\"),",
          "new_line_content": "    AVMEDIA_TYPE_AUDIO,",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "mul_poly",
          "new_api": null,
          "old_text": "mul_poly(r, a, poly)",
          "new_text": null,
          "old_line_content": "            r = mul_poly(r, a, poly);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "mul_poly",
          "new_api": null,
          "old_text": "mul_poly(a, a, poly)",
          "new_text": null,
          "old_line_content": "        a = mul_poly(a, a, poly);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "put_bits_ptr",
          "new_api": null,
          "old_text": "put_bits_ptr(&s->pb)",
          "new_text": null,
          "old_line_content": "    pad_bytes = s->frame_size - (put_bits_ptr(&s->pb) - frame) - 2;",
          "new_line_content": "    uint8_t *frame;",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pad_bytes >= 0)",
          "new_text": null,
          "old_line_content": "    assert(pad_bytes >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "put_bits_ptr",
          "new_api": null,
          "old_text": "put_bits_ptr(&s->pb)",
          "new_text": null,
          "old_line_content": "        memset(put_bits_ptr(&s->pb), 0, pad_bytes);",
          "new_line_content": "    frame_size_58 = ((frame_size >> 2) + (frame_size >> 4)) << 1;",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "new_text": null,
          "old_line_content": "    crc1 = av_bswap16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "new_line_content": "    frame = s->pb.buf;",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "pow_poly",
          "new_api": null,
          "old_text": "pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY)",
          "new_text": null,
          "old_line_content": "    crc_inv = pow_poly((CRC16_POLY >> 1), (8 * frame_size_58) - 16, CRC16_POLY);",
          "new_line_content": "    if (pad_bytes > 0)",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "AV_WB16",
          "new_api": null,
          "old_text": "AV_WB16(frame + 2, crc1)",
          "new_text": null,
          "old_line_content": "    AV_WB16(frame + 2, crc1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE)",
          "new_text": null,
          "old_line_content": "    init_put_bits(&s->pb, frame, AC3_MAX_CODED_FRAME_SIZE);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "output_frame_header",
          "new_api": null,
          "old_text": "output_frame_header(s)",
          "new_text": null,
          "old_line_content": "    output_frame_header(s);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "output_audio_block",
          "new_api": null,
          "old_text": "output_audio_block(s, blk)",
          "new_text": null,
          "old_line_content": "        output_audio_block(s, blk);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "output_frame_end",
          "new_api": null,
          "old_text": "output_frame_end(s)",
          "new_text": null,
          "old_line_content": "    output_frame_end(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "adjust_frame_size",
          "new_api": null,
          "old_text": "adjust_frame_size(s)",
          "new_text": null,
          "old_line_content": "        adjust_frame_size(s);",
          "new_line_content": "static int ac3_encode_frame(AVCodecContext *avctx,",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "deinterleave_input_samples",
          "new_api": null,
          "old_text": "deinterleave_input_samples(s, samples)",
          "new_text": null,
          "old_line_content": "    deinterleave_input_samples(s, samples);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "apply_mdct",
          "new_api": null,
          "old_text": "apply_mdct(s)",
          "new_text": null,
          "old_line_content": "    apply_mdct(s);",
          "new_line_content": "    const int16_t *samples = data;",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": "process_exponents",
          "new_api": null,
          "old_text": "process_exponents(s)",
          "new_text": null,
          "old_line_content": "    process_exponents(s);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 132,
      "total_deletions": 131,
      "total_api_changes": 278
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 278,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          1032,
          1033,
          1034,
          1042
        ]
      }
    },
    "api_calls_before": 247,
    "api_calls_after": 248,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 0,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/fa4ed8c10af49ca22ead46ee6fa4e51c8327a7ff",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/fa4ed8c10af49ca22ead46ee6fa4e51c8327a7ff/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/fa4ed8c10af49ca22ead46ee6fa4e51c8327a7ff/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/fa4ed8c10af49ca22ead46ee6fa4e51c8327a7ff/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 767,
          "old_api": "flac_compute_autocorr",
          "new_api": "assert",
          "old_text": "s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc)",
          "new_text": "assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER)",
          "old_line_content": "        s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc);",
          "new_line_content": "    assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "sqrt",
          "new_api": "av_evaluate_lls",
          "old_text": "sqrt(inv)",
          "new_text": "av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1)",
          "old_line_content": "                    rinv = sqrt(inv);",
          "new_line_content": "                    eval= av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "av_crc_get_table",
          "new_api": "put_bits",
          "old_text": "av_crc_get_table(AV_CRC_8_ATM)",
          "new_text": "put_bits(&s->pb, 16, s->sr_code[1])",
          "old_line_content": "    crc = av_crc(av_crc_get_table(AV_CRC_8_ATM), 0,",
          "new_line_content": "        put_bits(&s->pb, 16, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "put_bits",
          "new_api": "flush_put_bits",
          "old_text": "put_bits(&s->pb, 8, crc)",
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    put_bits(&s->pb, 8, crc);",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "set_sr_golomb_flac",
          "new_api": "put_bits",
          "old_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "new_text": "put_bits(&ctx->pb, 4, k)",
          "old_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "new_line_content": "        put_bits(&ctx->pb, 4, k);",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "put_sbits",
          "new_api": "put_bits",
          "old_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "new_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "old_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "new_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "put_bits",
          "new_api": "flush_put_bits",
          "old_text": "put_bits(&s->pb, 16, crc)",
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "    put_bits(&s->pb, 16, crc);",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "flush_put_bits",
          "new_api": "av_crc_get_table",
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    crc = bswap_16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "encode_residual",
          "new_api": "channel_decorrelation",
          "old_text": "encode_residual(s, ch)",
          "new_text": "channel_decorrelation(s)",
          "old_line_content": "        encode_residual(s, ch);",
          "new_line_content": "    channel_decorrelation(s);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "output_frame_header",
          "new_api": "encode_residual",
          "old_text": "output_frame_header(s)",
          "new_text": "encode_residual(s, ch)",
          "old_line_content": "    output_frame_header(s);",
          "new_line_content": "        encode_residual(s, ch);",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "output_frame_footer",
          "new_api": "init_put_bits",
          "old_text": "output_frame_footer(s)",
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "    output_frame_footer(s);",
          "new_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "put_bits_count",
          "new_api": "output_frame_header",
          "old_text": "put_bits_count(&s->pb)",
          "new_text": "output_frame_header(s)",
          "old_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "    output_frame_header(s);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "output_frame_header",
          "new_api": "encode_residual_v",
          "old_text": "output_frame_header(s)",
          "new_text": "encode_residual_v(s, ch)",
          "old_line_content": "        output_frame_header(s);",
          "new_line_content": "            encode_residual_v(s, ch);",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "output_frame_footer",
          "new_api": "init_put_bits",
          "old_text": "output_frame_footer(s)",
          "new_text": "init_put_bits(&s->pb, frame, buf_size)",
          "old_line_content": "        output_frame_footer(s);",
          "new_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "put_bits_count",
          "new_api": "output_frame_header",
          "old_text": "put_bits_count(&s->pb)",
          "new_text": "output_frame_header(s)",
          "old_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "new_line_content": "        output_frame_header(s);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1034,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, i)",
          "old_line_content": "            if(bits[i] < bits[opt_order]) {",
          "new_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "calc_rice_params_fixed",
          "old_text": null,
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "old_line_content": "                opt_order = i;",
          "new_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "encode_residual_fixed",
          "old_text": null,
          "new_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "old_line_content": "        }",
          "new_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "calc_rice_params_fixed",
          "old_text": null,
          "new_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "old_line_content": "        return bits[sub->order];",
          "new_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "lpc_calc_coefs",
          "old_text": null,
          "new_text": "lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "old_line_content": "       omethod == ORDER_METHOD_4LEVEL ||",
          "new_line_content": "    opt_order = lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "old_line_content": "            if(bits[i] < bits[opt_index]) {",
          "new_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "old_line_content": "                opt_index = i;",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "            if(bits[i] < bits[opt_order]) {",
          "new_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "old_line_content": "                opt_order = i;",
          "new_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bits, -1, sizeof(bits))",
          "old_line_content": "            int last= opt_order;",
          "new_line_content": "        memset(bits, -1, sizeof(bits));",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "old_line_content": "                if(bits[i] < bits[opt_order])",
          "new_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "old_line_content": "                    opt_order= i;",
          "new_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "encode_residual_lpc",
          "old_text": null,
          "new_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "old_line_content": "}",
          "new_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "calc_rice_params_lpc",
          "old_text": null,
          "new_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "old_line_content": "",
          "new_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "apply_welch_window",
          "old_text": null,
          "new_text": "apply_welch_window(data, len, data1)",
          "old_line_content": "        data1[j-lag]= 0.0;",
          "new_line_content": "    apply_welch_window(data, len, data1);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "",
          "new_line_content": "    encode_residual_verbatim(res, smp, n);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(lt - rt)",
          "old_line_content": "    }",
          "new_line_content": "        sum[3] += FFABS(lt - rt);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(lt)",
          "old_line_content": "    /* estimate bit counts */",
          "new_line_content": "        sum[0] += FFABS(lt);",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(rt)",
          "old_line_content": "    for(i=0; i<4; i++) {",
          "new_line_content": "        sum[1] += FFABS(rt);",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "find_optimal_param",
          "old_text": null,
          "new_text": "find_optimal_param(2*sum[i], n)",
          "old_line_content": "",
          "new_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "rice_encode_count",
          "old_text": null,
          "new_text": "rice_encode_count(2*sum[i], n, k)",
          "old_line_content": "    /* calculate score for each mode */",
          "new_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(r)",
          "old_line_content": "",
          "new_line_content": "      ref[i] = fabs(r);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(lpc_in[i])",
          "old_line_content": "    /* if maximum value quantizes to zero, return all zeros */",
          "new_line_content": "        cmax= FFMAX(cmax, fabs(lpc_in[i]));",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "estimate_stereo_mode",
          "old_text": null,
          "new_text": "estimate_stereo_mode(left, right, n)",
          "old_line_content": "    if(frame->ch_mode == FLAC_CHMODE_LEFT_RIGHT) {",
          "new_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(lpc_out, 0, sizeof(int32_t) * order)",
          "old_line_content": "",
          "new_line_content": "        memset(lpc_out, 0, sizeof(int32_t) * order);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "lrintf",
          "old_text": null,
          "new_text": "lrintf(error)",
          "old_line_content": "    *shift = sh;",
          "new_line_content": "        lpc_out[i] = av_clip(lrintf(error), -qmax, qmax);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(bits >= 0 && bits <= 31)",
          "old_line_content": "}",
          "new_line_content": "    assert(bits >= 0 && bits <= 31);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "old_line_content": "static void write_utf8(PutBitContext *pb, uint32_t val)",
          "new_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 8, tmp)",
          "old_line_content": "static void output_frame_header(FlacEncodeContext *s)",
          "new_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, 0xFFF8)",
          "old_line_content": "    if(frame->ch_mode == FLAC_CHMODE_NOT_STEREO) {",
          "new_line_content": "    put_bits(&s->pb, 16, 0xFFF8);",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->sr_code[0])",
          "old_line_content": "    } else {",
          "new_line_content": "    put_bits(&s->pb, 4, s->sr_code[0]);",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 4, s->ch_code)",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(&s->pb, 4, s->ch_code);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 3, 4)",
          "old_line_content": "    if(frame->bs_code[0] == 6) {",
          "new_line_content": "    put_bits(&s->pb, 3, 4); /* bits-per-sample code */",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "write_utf8",
          "old_text": null,
          "new_text": "write_utf8(&s->pb, s->frame_count)",
          "old_line_content": "    } else if(frame->bs_code[0] == 7) {",
          "new_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, frame->bs_code[1])",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(&s->pb, 8, frame->bs_code[1]);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "flac_compute_autocorr",
          "old_text": null,
          "new_text": "s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc)",
          "old_line_content": "    }else{",
          "new_line_content": "        s->dsp.flac_compute_autocorr(samples, blocksize, max_order, autoc);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "compute_lpc_coefs",
          "old_text": null,
          "new_text": "compute_lpc_coefs(autoc, max_order, lpc, ref)",
          "old_line_content": "        double var[MAX_LPC_ORDER+1], weight;",
          "new_line_content": "        compute_lpc_coefs(autoc, max_order, lpc, ref);",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, s->sr_code[1])",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(&s->pb, 8, s->sr_code[1]);",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": null,
          "new_api": "av_crc_get_table",
          "old_text": null,
          "new_text": "av_crc_get_table(AV_CRC_8_ATM)",
          "old_line_content": "}",
          "new_line_content": "    crc = av_crc(av_crc_get_table(AV_CRC_8_ATM), 0,",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "av_init_lls",
          "old_text": null,
          "new_text": "av_init_lls(&m[pass&1], max_order)",
          "old_line_content": "            for(i=max_order; i<blocksize; i++){",
          "new_line_content": "            av_init_lls(&m[pass&1], max_order);",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "",
          "new_line_content": "                 s->pb.buf, put_bits_count(&s->pb)>>3);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 8, crc)",
          "old_line_content": "static void output_subframe_constant(FlacEncodeContext *s, int ch)",
          "new_line_content": "    put_bits(&s->pb, 8, crc);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "fabs",
          "old_text": null,
          "new_text": "fabs(eval - var[0])",
          "old_line_content": "                    for(j=0; j<=max_order; j++)",
          "new_line_content": "                    eval= (512>>pass) + fabs(eval - var[0]);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "static void output_subframe_verbatim(FlacEncodeContext *s, int ch)",
          "new_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(inv)",
          "old_line_content": "                    weight += inv;",
          "new_line_content": "                    rinv = sqrt(inv);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "av_update_lls",
          "old_text": null,
          "new_text": "av_update_lls(&m[pass&1], var, 1.0)",
          "old_line_content": "        }",
          "new_line_content": "                av_update_lls(&m[pass&1], var, 1.0);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "av_solve_lls",
          "old_text": null,
          "new_text": "av_solve_lls(&m[pass&1], 0.001, 0)",
          "old_line_content": "        for(i=0; i<max_order; i++){",
          "new_line_content": "            av_solve_lls(&m[pass&1], 0.001, 0);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&s->pb, sub->obits, res)",
          "old_line_content": "",
          "new_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(m[(pass-1)&1].variance[i] / weight)",
          "old_line_content": "            ref[i] = ref[i-1] - ref[i];",
          "new_line_content": "            ref[i]= sqrt(m[(pass-1)&1].variance[i] / weight) * (blocksize - max_order) / 4000;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "estimate_best_order",
          "old_text": null,
          "new_text": "estimate_best_order(ref, max_order)",
          "old_line_content": "    } else {",
          "new_line_content": "        opt_order = estimate_best_order(ref, max_order);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "quantize_lpc_coefs",
          "old_text": null,
          "new_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "old_line_content": "",
          "new_line_content": "            quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 2, 0)",
          "old_line_content": "    porder = sub->rc.porder;",
          "new_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(n > 0)",
          "old_line_content": "",
          "new_line_content": "    assert(n > 0);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(res, smp, n * sizeof(int32_t))",
          "old_line_content": "static void encode_residual_fixed(int32_t *res, const int32_t *smp, int n,",
          "new_line_content": "    memcpy(res, smp, n * sizeof(int32_t));",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&ctx->pb, 4, porder)",
          "old_line_content": "    /* residual */",
          "new_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "set_sr_golomb_flac",
          "old_text": null,
          "new_text": "set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0)",
          "old_line_content": "}",
          "new_line_content": "            set_sr_golomb_flac(&ctx->pb, res[j], k, INT32_MAX, 0);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "    /* residual */",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "static void output_subframe_lpc(FlacEncodeContext *ctx, int ch)",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "old_line_content": "    /* LPC coefficients */",
          "new_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "old_line_content": "    }",
          "new_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(&ctx->pb, cbits, sub->coefs[i])",
          "old_line_content": "    /* residual */",
          "new_line_content": "        put_sbits(&ctx->pb, cbits, sub->coefs[i]);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "output_residual",
          "old_text": null,
          "new_text": "output_residual(ctx, ch)",
          "old_line_content": "static void output_subframes(FlacEncodeContext *s)",
          "new_line_content": "    output_residual(ctx, ch);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "",
          "new_line_content": "        put_bits(&s->pb, 1, 0);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 6, sub->type_code)",
          "old_line_content": "        /* subframe */",
          "new_line_content": "        put_bits(&s->pb, 6, sub->type_code);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 1, 0)",
          "old_line_content": "        if(sub->type == FLAC_SUBFRAME_CONSTANT) {",
          "new_line_content": "        put_bits(&s->pb, 1, 0); /* no wasted bits */",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": null,
          "new_api": "output_subframe_constant",
          "old_text": null,
          "new_text": "output_subframe_constant(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_FIXED) {",
          "new_line_content": "            output_subframe_constant(s, ch);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "output_subframe_verbatim",
          "old_text": null,
          "new_text": "output_subframe_verbatim(s, ch)",
          "old_line_content": "        } else if(sub->type == FLAC_SUBFRAME_LPC) {",
          "new_line_content": "            output_subframe_verbatim(s, ch);",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "output_subframe_fixed",
          "old_text": null,
          "new_text": "output_subframe_fixed(s, ch)",
          "old_line_content": "        }",
          "new_line_content": "            output_subframe_fixed(s, ch);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "output_subframe_lpc",
          "old_text": null,
          "new_text": "output_subframe_lpc(s, ch)",
          "old_line_content": "}",
          "new_line_content": "            output_subframe_lpc(s, ch);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "}",
          "new_line_content": "                          s->pb.buf, put_bits_count(&s->pb)>>3));",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(&s->pb, 16, crc)",
          "old_line_content": "",
          "new_line_content": "    put_bits(&s->pb, 16, crc);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "flush_put_bits",
          "old_text": null,
          "new_text": "flush_put_bits(&s->pb)",
          "old_line_content": "static int flac_encode_frame(AVCodecContext *avctx, uint8_t *frame,",
          "new_line_content": "    flush_put_bits(&s->pb);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "init_frame",
          "old_text": null,
          "new_text": "init_frame(s)",
          "old_line_content": "",
          "new_line_content": "    init_frame(s);",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "copy_samples",
          "old_text": null,
          "new_text": "copy_samples(s, samples)",
          "old_line_content": "",
          "new_line_content": "    copy_samples(s, samples);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "output_subframes",
          "old_text": null,
          "new_text": "output_subframes(s)",
          "old_line_content": "",
          "new_line_content": "    output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "output_frame_footer",
          "old_text": null,
          "new_text": "output_frame_footer(s)",
          "old_line_content": "    if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "new_line_content": "    output_frame_footer(s);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "        /* frame too large. use verbatim mode */",
          "new_line_content": "    out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "output_subframes",
          "old_text": null,
          "new_text": "output_subframes(s)",
          "old_line_content": "",
          "new_line_content": "        output_subframes(s);",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "output_frame_footer",
          "old_text": null,
          "new_text": "output_frame_footer(s)",
          "old_line_content": "        if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "new_line_content": "        output_frame_footer(s);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": null,
          "new_api": "put_bits_count",
          "old_text": null,
          "new_text": "put_bits_count(&s->pb)",
          "old_line_content": "            /* still too large. must be an error. */",
          "new_line_content": "        out_bytes = put_bits_count(&s->pb) >> 3;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "old_line_content": "    }",
          "new_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->extradata)",
          "old_line_content": "    return 0;",
          "new_line_content": "    av_freep(&avctx->extradata);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&avctx->coded_frame)",
          "old_line_content": "",
          "new_line_content": "    av_freep(&avctx->coded_frame);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "encode_residual_lpc_unrolled",
          "old_text": null,
          "new_text": "encode_residual_lpc_unrolled(res, smp, n, 7, coefs, shift, 0)",
          "old_line_content": "    }",
          "new_line_content": "        case  7: encode_residual_lpc_unrolled(res, smp, n, 7, coefs, shift, 0); break;",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "encode_residual_lpc_unrolled",
          "old_text": null,
          "new_text": "encode_residual_lpc_unrolled(res, smp, n, 8, coefs, shift, 0)",
          "old_line_content": "#endif",
          "new_line_content": "        case  8: encode_residual_lpc_unrolled(res, smp, n, 8, coefs, shift, 0); break;",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "encode_residual_lpc_unrolled",
          "old_text": null,
          "new_text": "encode_residual_lpc_unrolled(res, smp, n, order, coefs, shift, 1)",
          "old_line_content": "}",
          "new_line_content": "        default: encode_residual_lpc_unrolled(res, smp, n, order, coefs, shift, 1); break;",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "encode_residual_verbatim",
          "old_text": null,
          "new_text": "encode_residual_verbatim(res, smp, n)",
          "old_line_content": "",
          "new_line_content": "        encode_residual_verbatim(res, smp, n);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1031,
          "old_api": "encode_residual_fixed",
          "new_api": null,
          "old_text": "encode_residual_fixed(res, smp, n, i)",
          "new_text": null,
          "old_line_content": "            encode_residual_fixed(res, smp, n, i);",
          "new_line_content": "        opt_order = 0;",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,\n                                             n, i, sub->obits)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res,",
          "new_line_content": "        bits[0] = UINT32_MAX;",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "encode_residual_fixed",
          "new_api": null,
          "old_text": "encode_residual_fixed(res, smp, n, sub->order)",
          "new_text": null,
          "old_line_content": "            encode_residual_fixed(res, smp, n, sub->order);",
          "new_line_content": "        sub->type = FLAC_SUBFRAME_FIXED;",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "calc_rice_params_fixed",
          "new_api": null,
          "old_text": "calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,\n                                          sub->order, sub->obits)",
          "new_text": null,
          "old_line_content": "            return calc_rice_params_fixed(&sub->rc, min_porder, max_porder, res, n,",
          "new_line_content": "        sub->type_code = sub->type | sub->order;",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "lpc_calc_coefs",
          "new_api": null,
          "old_text": "lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod)",
          "new_text": null,
          "old_line_content": "    opt_order = lpc_calc_coefs(ctx, smp, n, max_order, precision, coefs, shift, ctx->options.use_lpc, omethod);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order])",
          "new_text": null,
          "old_line_content": "            encode_residual_lpc(res, smp, n, order+1, coefs[order], shift[order]);",
          "new_line_content": "        for(i=levels-1; i>=0; i--) {",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, order+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "            order = min_order + (((max_order-min_order+1) * (i+1)) / levels)-1;",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": null,
          "old_line_content": "            encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "        opt_order = 0;",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                           res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "            bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "        bits[0] = UINT32_MAX;",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bits, -1, sizeof(bits))",
          "new_text": null,
          "old_line_content": "        memset(bits, -1, sizeof(bits));",
          "new_line_content": "        int step;",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i])",
          "new_text": null,
          "old_line_content": "                encode_residual_lpc(res, smp, n, i+1, coefs[i], shift[i]);",
          "new_line_content": "            for(i=last-step; i<=last+step; i+= step){",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder,\n                                            res, n, i+1, sub->obits, precision)",
          "new_text": null,
          "old_line_content": "                bits[i] = calc_rice_params_lpc(&sub->rc, min_porder, max_porder,",
          "new_line_content": "                if(i<min_order-1 || i>=max_order || bits[i] < UINT32_MAX)",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "encode_residual_lpc",
          "new_api": null,
          "old_text": "encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift)",
          "new_text": null,
          "old_line_content": "    encode_residual_lpc(res, smp, n, sub->order, sub->coefs, sub->shift);",
          "new_line_content": "    for(i=0; i<sub->order; i++) {",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "calc_rice_params_lpc",
          "new_api": null,
          "old_text": "calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,\n                                sub->obits, precision)",
          "new_text": null,
          "old_line_content": "    return calc_rice_params_lpc(&sub->rc, min_porder, max_porder, res, n, sub->order,",
          "new_line_content": "        sub->coefs[i] = coefs[sub->order-1][i];",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "apply_welch_window",
          "new_api": null,
          "old_text": "apply_welch_window(data, len, data1)",
          "new_text": null,
          "old_line_content": "    apply_welch_window(data, len, data1);",
          "new_line_content": "    double tmp[len + lag + 1];",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "    encode_residual_verbatim(res, smp, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS((lt + rt) >> 1)",
          "new_text": null,
          "old_line_content": "        sum[2] += FFABS((lt + rt) >> 1);",
          "new_line_content": "    for(i=2; i<n; i++) {",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(lt - rt)",
          "new_text": null,
          "old_line_content": "        sum[3] += FFABS(lt - rt);",
          "new_line_content": "        lt = left_ch[i] - 2*left_ch[i-1] + left_ch[i-2];",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(lt)",
          "new_text": null,
          "old_line_content": "        sum[0] += FFABS(lt);",
          "new_line_content": "        rt = right_ch[i] - 2*right_ch[i-1] + right_ch[i-2];",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "find_optimal_param",
          "new_api": null,
          "old_text": "find_optimal_param(2*sum[i], n)",
          "new_text": null,
          "old_line_content": "        k = find_optimal_param(2*sum[i], n);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "rice_encode_count",
          "new_api": null,
          "old_text": "rice_encode_count(2*sum[i], n, k)",
          "new_text": null,
          "old_line_content": "        sum[i] = rice_encode_count(2*sum[i], n, k);",
          "new_line_content": "    /* estimate bit counts */",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(r)",
          "new_text": null,
          "old_line_content": "      ref[i] = fabs(r);",
          "new_line_content": "          r -= lpc_tmp[j] * autoc[i-j];",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(lpc_in[i])",
          "new_text": null,
          "old_line_content": "        cmax= FFMAX(cmax, fabs(lpc_in[i]));",
          "new_line_content": "    /* find maximum coefficient value */",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "estimate_stereo_mode",
          "new_api": null,
          "old_text": "estimate_stereo_mode(left, right, n)",
          "new_text": null,
          "old_line_content": "    frame->ch_mode = estimate_stereo_mode(left, right, n);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(lpc_out, 0, sizeof(int32_t) * order)",
          "new_text": null,
          "old_line_content": "        memset(lpc_out, 0, sizeof(int32_t) * order);",
          "new_line_content": "    /* if maximum value quantizes to zero, return all zeros */",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "lrintf",
          "new_api": null,
          "old_text": "lrintf(error)",
          "new_text": null,
          "old_line_content": "        lpc_out[i] = av_clip(lrintf(error), -qmax, qmax);",
          "new_line_content": "    error=0;",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(bits >= 0 && bits <= 31)",
          "new_text": null,
          "old_line_content": "    assert(bits >= 0 && bits <= 31);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, bits, val & ((1<<bits)-1))",
          "new_text": null,
          "old_line_content": "    put_bits(pb, bits, val & ((1<<bits)-1));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 8, tmp)",
          "new_text": null,
          "old_line_content": "    PUT_UTF8(val, tmp, put_bits(pb, 8, tmp);)",
          "new_line_content": "static void write_utf8(PutBitContext *pb, uint32_t val)",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, 0xFFF8)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 16, 0xFFF8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, frame->bs_code[0])",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 4, frame->bs_code[0]);",
          "new_line_content": "    frame = &s->frame;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, s->sr_code[0])",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 4, s->sr_code[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 4, frame->ch_mode)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 4, frame->ch_mode);",
          "new_line_content": "    if(frame->ch_mode == FLAC_CHMODE_NOT_STEREO) {",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 3, 4)",
          "new_text": null,
          "old_line_content": "    put_bits(&s->pb, 3, 4); /* bits-per-sample code */",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "write_utf8",
          "new_api": null,
          "old_text": "write_utf8(&s->pb, s->frame_count)",
          "new_text": null,
          "old_line_content": "    write_utf8(&s->pb, s->frame_count);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER)",
          "new_text": null,
          "old_line_content": "    assert(max_order >= MIN_LPC_ORDER && max_order <= MAX_LPC_ORDER);",
          "new_line_content": "    int i, j, pass;",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, frame->bs_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 16, frame->bs_code[1]);",
          "new_line_content": "    if(frame->bs_code[0] == 6) {",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "compute_lpc_coefs",
          "new_api": null,
          "old_text": "compute_lpc_coefs(autoc, max_order, lpc, ref)",
          "new_text": null,
          "old_line_content": "        compute_lpc_coefs(autoc, max_order, lpc, ref);",
          "new_line_content": "    if(use_lpc == 1){",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 16, s->sr_code[1])",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 16, s->sr_code[1]);",
          "new_line_content": "    if(s->sr_code[0] == 12) {",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "    } else if(s->sr_code[0] > 12) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "av_init_lls",
          "new_api": null,
          "old_text": "av_init_lls(&m[pass&1], max_order)",
          "new_text": null,
          "old_line_content": "            av_init_lls(&m[pass&1], max_order);",
          "new_line_content": "        double var[MAX_LPC_ORDER+1], weight;",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "                 s->pb.buf, put_bits_count(&s->pb)>>3);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "av_evaluate_lls",
          "new_api": null,
          "old_text": "av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1)",
          "new_text": null,
          "old_line_content": "                    eval= av_evaluate_lls(&m[(pass-1)&1], var+1, max_order-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(eval - var[0])",
          "new_text": null,
          "old_line_content": "                    eval= (512>>pass) + fabs(eval - var[0]);",
          "new_line_content": "                if(pass){",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "    put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "av_update_lls",
          "new_api": null,
          "old_text": "av_update_lls(&m[pass&1], var, 1.0)",
          "new_text": null,
          "old_line_content": "                av_update_lls(&m[pass&1], var, 1.0);",
          "new_line_content": "                }else",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "av_solve_lls",
          "new_api": null,
          "old_text": "av_solve_lls(&m[pass&1], 0.001, 0)",
          "new_text": null,
          "old_line_content": "            av_solve_lls(&m[pass&1], 0.001, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&s->pb, sub->obits, res)",
          "new_text": null,
          "old_line_content": "        put_sbits(&s->pb, sub->obits, res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(m[(pass-1)&1].variance[i] / weight)",
          "new_text": null,
          "old_line_content": "            ref[i]= sqrt(m[(pass-1)&1].variance[i] / weight) * (blocksize - max_order) / 4000;",
          "new_line_content": "        for(i=0; i<max_order; i++){",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "estimate_best_order",
          "new_api": null,
          "old_text": "estimate_best_order(ref, max_order)",
          "new_text": null,
          "old_line_content": "        opt_order = estimate_best_order(ref, max_order);",
          "new_line_content": "    opt_order = max_order;",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "quantize_lpc_coefs",
          "new_api": null,
          "old_text": "quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i])",
          "new_text": null,
          "old_line_content": "        quantize_lpc_coefs(lpc[i], i+1, precision, coefs[i], &shift[i]);",
          "new_line_content": "    if(omethod == ORDER_METHOD_EST) {",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 2, 0)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 2, 0);",
          "new_line_content": "    n = frame->blocksize;",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(n > 0)",
          "new_text": null,
          "old_line_content": "    assert(n > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(res, smp, n * sizeof(int32_t))",
          "new_text": null,
          "old_line_content": "    memcpy(res, smp, n * sizeof(int32_t));",
          "new_line_content": "static void encode_residual_verbatim(int32_t *res, int32_t *smp, int n)",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, porder)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 4, porder);",
          "new_line_content": "    porder = sub->rc.porder;",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, k)",
          "new_text": null,
          "old_line_content": "        put_bits(&ctx->pb, 4, k);",
          "new_line_content": "    j = sub->order;",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, sub->obits, sub->residual[i])",
          "new_text": null,
          "old_line_content": "        put_sbits(&ctx->pb, sub->obits, sub->residual[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&ctx->pb, 4, cbits-1)",
          "new_text": null,
          "old_line_content": "    put_bits(&ctx->pb, 4, cbits-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(&ctx->pb, 5, sub->shift)",
          "new_text": null,
          "old_line_content": "    put_sbits(&ctx->pb, 5, sub->shift);",
          "new_line_content": "    /* LPC coefficients */",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "output_residual",
          "new_api": null,
          "old_text": "output_residual(ctx, ch)",
          "new_text": null,
          "old_line_content": "    output_residual(ctx, ch);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0);",
          "new_line_content": "        sub = &frame->subframes[ch];",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 6, sub->type_code)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 6, sub->type_code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(&s->pb, 1, 0)",
          "new_text": null,
          "old_line_content": "        put_bits(&s->pb, 1, 0); /* no wasted bits */",
          "new_line_content": "        /* subframe header */",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "output_subframe_constant",
          "new_api": null,
          "old_text": "output_subframe_constant(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_constant(s, ch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "output_subframe_verbatim",
          "new_api": null,
          "old_text": "output_subframe_verbatim(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_verbatim(s, ch);",
          "new_line_content": "        if(sub->type == FLAC_SUBFRAME_CONSTANT) {",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "output_subframe_fixed",
          "new_api": null,
          "old_text": "output_subframe_fixed(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_fixed(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_VERBATIM) {",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "output_subframe_lpc",
          "new_api": null,
          "old_text": "output_subframe_lpc(s, ch)",
          "new_text": null,
          "old_line_content": "            output_subframe_lpc(s, ch);",
          "new_line_content": "        } else if(sub->type == FLAC_SUBFRAME_FIXED) {",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "flush_put_bits",
          "new_api": null,
          "old_text": "flush_put_bits(&s->pb)",
          "new_text": null,
          "old_line_content": "    flush_put_bits(&s->pb);",
          "new_line_content": "static void output_frame_footer(FlacEncodeContext *s)",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "av_crc_get_table",
          "new_api": null,
          "old_text": "av_crc_get_table(AV_CRC_16_ANSI)",
          "new_text": null,
          "old_line_content": "    crc = bswap_16(av_crc(av_crc_get_table(AV_CRC_16_ANSI), 0,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "put_bits_count",
          "new_api": null,
          "old_text": "put_bits_count(&s->pb)",
          "new_text": null,
          "old_line_content": "                          s->pb.buf, put_bits_count(&s->pb)>>3));",
          "new_line_content": "    int crc;",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "init_frame",
          "new_api": null,
          "old_text": "init_frame(s)",
          "new_text": null,
          "old_line_content": "    init_frame(s);",
          "new_line_content": "    s = avctx->priv_data;",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "copy_samples",
          "new_api": null,
          "old_text": "copy_samples(s, samples)",
          "new_text": null,
          "old_line_content": "    copy_samples(s, samples);",
          "new_line_content": "    s->blocksize = avctx->frame_size;",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "channel_decorrelation",
          "new_api": null,
          "old_text": "channel_decorrelation(s)",
          "new_text": null,
          "old_line_content": "    channel_decorrelation(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": null,
          "old_line_content": "    init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "    for(ch=0; ch<s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "output_subframes",
          "new_api": null,
          "old_text": "output_subframes(s)",
          "new_text": null,
          "old_line_content": "    output_subframes(s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "encode_residual_v",
          "new_api": null,
          "old_text": "encode_residual_v(s, ch)",
          "new_text": null,
          "old_line_content": "            encode_residual_v(s, ch);",
          "new_line_content": "    if(out_bytes > s->max_framesize || out_bytes >= buf_size) {",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "init_put_bits",
          "new_api": null,
          "old_text": "init_put_bits(&s->pb, frame, buf_size)",
          "new_text": null,
          "old_line_content": "        init_put_bits(&s->pb, frame, buf_size);",
          "new_line_content": "        for(ch=0; ch<s->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "output_subframes",
          "new_api": null,
          "old_text": "output_subframes(s)",
          "new_text": null,
          "old_line_content": "        output_subframes(s);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\")",
          "new_text": null,
          "old_line_content": "            av_log(avctx, AV_LOG_ERROR, \"error encoding frame\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "encode_residual_lpc_unrolled",
          "new_api": null,
          "old_text": "encode_residual_lpc_unrolled(res, smp, n, 1, coefs, shift, 0)",
          "new_text": null,
          "old_line_content": "        case  1: encode_residual_lpc_unrolled(res, smp, n, 1, coefs, shift, 0); break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "encode_residual_lpc_unrolled",
          "new_api": null,
          "old_text": "encode_residual_lpc_unrolled(res, smp, n, 2, coefs, shift, 0)",
          "new_text": null,
          "old_line_content": "        case  2: encode_residual_lpc_unrolled(res, smp, n, 2, coefs, shift, 0); break;",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "encode_residual_lpc_unrolled",
          "new_api": null,
          "old_text": "encode_residual_lpc_unrolled(res, smp, n, 3, coefs, shift, 0)",
          "new_text": null,
          "old_line_content": "        case  3: encode_residual_lpc_unrolled(res, smp, n, 3, coefs, shift, 0); break;",
          "new_line_content": "    switch(order) {",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->extradata)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->extradata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&avctx->coded_frame)",
          "new_text": null,
          "old_line_content": "    av_freep(&avctx->coded_frame);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "encode_residual_verbatim",
          "new_api": null,
          "old_text": "encode_residual_verbatim(res, smp, n)",
          "new_text": null,
          "old_line_content": "        encode_residual_verbatim(res, smp, n);",
          "new_line_content": "    /* VERBATIM */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 87,
      "total_deletions": 87,
      "total_api_changes": 189
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 189,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          598,
          599,
          600,
          601,
          602,
          604,
          605
        ]
      }
    },
    "api_calls_before": 184,
    "api_calls_after": 184,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 3,
      "total_diff_lines": 23
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/57b1eb9f75b04571063ddec316e290c216c114ac",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/57b1eb9f75b04571063ddec316e290c216c114ac/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/57b1eb9f75b04571063ddec316e290c216c114ac/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/57b1eb9f75b04571063ddec316e290c216c114ac/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [],
      "additions": [
        {
          "line": 100,
          "old_api": null,
          "new_api": "ff_dcadsp_init_arm",
          "old_text": null,
          "new_text": "ff_dcadsp_init_arm(s)",
          "old_line_content": "    s->qmf_32_subbands = dca_qmf_32_subbands;",
          "new_line_content": "    if (ARCH_ARM) ff_dcadsp_init_arm(s);",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": null,
          "new_api": "ff_dcadsp_init_x86",
          "old_text": null,
          "new_text": "ff_dcadsp_init_x86(s)",
          "old_line_content": "    s->int8x8_fmul_int32 = int8x8_fmul_int32_c;",
          "new_line_content": "    if (ARCH_X86) ff_dcadsp_init_x86(s);",
          "content_same": false
        },
        {
          "line": 74,
          "old_api": null,
          "new_api": "AV_RN32A",
          "old_text": null,
          "new_text": "AV_RN32A(&samples_in[i][subindex])",
          "old_line_content": "        for (i = 0; i < sb_act; i++) {",
          "new_line_content": "            uint32_t v    = AV_RN32A(&samples_in[i][subindex]) ^ sign << 30;",
          "content_same": false
        },
        {
          "line": 75,
          "old_api": null,
          "new_api": "AV_WN32A",
          "old_text": null,
          "new_text": "AV_WN32A(&raXin[i], v)",
          "old_line_content": "            unsigned sign = (i - 1) & 2;",
          "new_line_content": "            AV_WN32A(&raXin[i], v);",
          "content_same": false
        },
        {
          "line": 78,
          "old_api": null,
          "new_api": "synth_filter_float",
          "old_text": null,
          "new_text": "synth->synth_filter_float(imdct, synth_buf_ptr, synth_buf_offset,\n                                  synth_buf2, window, samples_out, raXin, scale)",
          "old_line_content": "        }",
          "new_line_content": "        synth->synth_filter_float(imdct, synth_buf_ptr, synth_buf_offset,",
          "content_same": false
        },
        {
          "line": 86,
          "old_api": null,
          "new_api": "dca_lfe_fir",
          "old_text": null,
          "new_text": "dca_lfe_fir(out, in, coefs, 32)",
          "old_line_content": "static void dca_lfe_fir0_c(float *out, const float *in, const float *coefs)",
          "new_line_content": "    dca_lfe_fir(out, in, coefs, 32);",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "dca_lfe_fir",
          "old_text": null,
          "new_text": "dca_lfe_fir(out, in, coefs, 64)",
          "old_line_content": "static void dca_lfe_fir1_c(float *out, const float *in, const float *coefs)",
          "new_line_content": "    dca_lfe_fir(out, in, coefs, 64);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 102,
          "old_api": "ff_dcadsp_init_arm",
          "new_api": null,
          "old_text": "ff_dcadsp_init_arm(s)",
          "new_text": null,
          "old_line_content": "    if (ARCH_ARM) ff_dcadsp_init_arm(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": "ff_dcadsp_init_x86",
          "new_api": null,
          "old_text": "ff_dcadsp_init_x86(s)",
          "new_text": null,
          "old_line_content": "    if (ARCH_X86) ff_dcadsp_init_x86(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 76,
          "old_api": "AV_RN32A",
          "new_api": null,
          "old_text": "AV_RN32A(&samples_in[i][subindex])",
          "new_text": null,
          "old_line_content": "            uint32_t v    = AV_RN32A(&samples_in[i][subindex]) ^ sign << 30;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 77,
          "old_api": "AV_WN32A",
          "new_api": null,
          "old_text": "AV_WN32A(&raXin[i], v)",
          "new_text": null,
          "old_line_content": "            AV_WN32A(&raXin[i], v);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": "synth_filter_float",
          "new_api": null,
          "old_text": "synth->synth_filter_float(imdct, synth_buf_ptr, synth_buf_offset,\n                                  synth_buf2, window, samples_out, raXin, scale)",
          "new_text": null,
          "old_line_content": "        synth->synth_filter_float(imdct, synth_buf_ptr, synth_buf_offset,",
          "new_line_content": "        samples_out += 32;",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "dca_lfe_fir",
          "new_api": null,
          "old_text": "dca_lfe_fir(out, in, coefs, 32)",
          "new_text": null,
          "old_line_content": "    dca_lfe_fir(out, in, coefs, 32);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "dca_lfe_fir",
          "new_api": null,
          "old_text": "dca_lfe_fir(out, in, coefs, 64)",
          "new_text": null,
          "old_line_content": "    dca_lfe_fir(out, in, coefs, 64);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 0,
      "total_additions": 7,
      "total_deletions": 7,
      "total_api_changes": 14
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 14,
        "non_api_lines": 10,
        "non_api_line_numbers": [
          39,
          40,
          41,
          47,
          48,
          49,
          50,
          51,
          52,
          54
        ]
      }
    },
    "api_calls_before": 7,
    "api_calls_after": 7,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 8,
      "total_diff_lines": 34
    }
  }
}
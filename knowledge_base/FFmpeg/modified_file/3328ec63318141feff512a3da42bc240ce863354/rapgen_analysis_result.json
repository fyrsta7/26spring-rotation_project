{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3328ec63318141feff512a3da42bc240ce863354",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3328ec63318141feff512a3da42bc240ce863354/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3328ec63318141feff512a3da42bc240ce863354/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/3328ec63318141feff512a3da42bc240ce863354/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1717,
          "old_api": "get_bitsz",
          "new_api": "get_bits1",
          "old_text": "get_bitsz(&s->gb, linbits)",
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "                    y += get_bitsz(&s->gb, linbits);",
          "new_line_content": "                if (get_bits1(&s->gb))",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "MULH",
          "new_api": "imdct12",
          "old_text": "MULH(out2[i], win[i])",
          "new_text": "imdct12(out2, ptr + 0)",
          "old_line_content": "            *out_ptr = MULH(out2[i], win[i]) + buf[i + 6*2];",
          "new_line_content": "        imdct12(out2, ptr + 0);",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "MULH",
          "new_api": "imdct12",
          "old_text": "MULH(out2[i], win[i])",
          "new_text": "imdct12(out2, ptr + 1)",
          "old_line_content": "            buf[i + 6*0] = MULH(out2[i], win[i]) + buf[i + 6*0];",
          "new_line_content": "        imdct12(out2, ptr + 1);",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "fopen",
          "new_api": "snprintf",
          "old_text": "fopen(buf, \"w\")",
          "new_text": "snprintf(buf, sizeof(buf), \"/tmp/out%d.%s.pcm\",\n                fnum,\n#ifdef USE_HIGHPRECISION\n                \"hp\"\n#else\n                \"lp\"\n#endif\n                )",
          "old_line_content": "        f = fopen(buf, \"w\");",
          "new_line_content": "        snprintf(buf, sizeof(buf), \"/tmp/out%d.%s.pcm\",",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": "av_log",
          "new_api": "fopen",
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"pos=%d\\n\", pos)",
          "new_text": "fopen(buf, \"w\")",
          "old_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"pos=%d\\n\", pos);",
          "new_line_content": "        f = fopen(buf, \"w\");",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "dprintf",
          "new_api": "get_bits",
          "old_text": "dprintf(\"seekback: %d\\n\", main_data_begin)",
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "    dprintf(\"seekback: %d\\n\", main_data_begin);",
          "new_line_content": "            g->count1table_select = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "seek_to_maindata",
          "new_api": "dprintf",
          "old_text": "seek_to_maindata(s, main_data_begin)",
          "new_text": "dprintf(\"block_type=%d switch_point=%d\\n\",\n                    g->block_type, g->switch_point)",
          "old_line_content": "    seek_to_maindata(s, main_data_begin);",
          "new_line_content": "            dprintf(\"block_type=%d switch_point=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": "get_bits_count",
          "new_api": "dprintf",
          "old_text": "get_bits_count(&s->gb)",
          "new_text": "dprintf(\"seekback: %d\\n\", main_data_begin)",
          "old_line_content": "            bits_pos = get_bits_count(&s->gb);",
          "new_line_content": "    dprintf(\"seekback: %d\\n\", main_data_begin);",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": "huffman_decode",
          "new_api": "dprintf",
          "old_text": "huffman_decode(s, g, exponents,\n                               bits_pos + g->part2_3_length)",
          "new_text": "dprintf(\"\\n\")",
          "old_line_content": "            if (huffman_decode(s, g, exponents,",
          "new_line_content": "                    dprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": "get_bits_count",
          "new_api": "huffman_decode",
          "old_text": "get_bits_count(&s->gb)",
          "new_text": "huffman_decode(s, g, exponents,\n                               bits_pos + g->part2_3_length)",
          "old_line_content": "            bits_left = g->part2_3_length - (get_bits_count(&s->gb) - bits_pos);",
          "new_line_content": "            if (huffman_decode(s, g, exponents,",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "skip_bits",
          "new_api": "dprintf",
          "old_text": "skip_bits(&s->gb, bits_left)",
          "new_text": "dprintf(\"bits_left=%d\\n\", bits_left)",
          "old_line_content": "                skip_bits(&s->gb, bits_left);",
          "new_line_content": "                dprintf(\"bits_left=%d\\n\", bits_left);",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "compute_stereo",
          "new_api": "skip_bits",
          "old_text": "compute_stereo(s, &granules[0][gr], &granules[1][gr])",
          "new_text": "skip_bits(&s->gb, 16)",
          "old_line_content": "            compute_stereo(s, &granules[0][gr], &granules[1][gr]);",
          "new_line_content": "                skip_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": "compute_imdct",
          "new_api": "reorder_block",
          "old_text": "compute_imdct(s, g, &s->sb_samples[ch][18 * gr][0], s->mdct_buf[ch])",
          "new_text": "reorder_block(s, g)",
          "old_line_content": "            compute_imdct(s, g, &s->sb_samples[ch][18 * gr][0], s->mdct_buf[ch]);",
          "new_line_content": "            reorder_block(s, g);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": "mp_decode_layer2",
          "new_api": "get_bits",
          "old_text": "mp_decode_layer2(s)",
          "new_text": "get_bits(&s->gb, 16)",
          "old_line_content": "        nb_frames = mp_decode_layer2(s);",
          "new_line_content": "        get_bits(&s->gb, 16);",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "ff_mpa_synth_filter",
          "new_api": "dprintf",
          "old_text": "ff_mpa_synth_filter(s->synth_buf[ch], &(s->synth_buf_offset[ch]),\n                         window, &s->dither_state,\n                         samples_ptr, s->nb_channels,\n                         s->sb_samples[ch][i])",
          "new_text": "dprintf(\"\\n\")",
          "old_line_content": "            ff_mpa_synth_filter(s->synth_buf[ch], &(s->synth_buf_offset[ch]),",
          "new_line_content": "            dprintf(\"\\n\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2059,
          "old_api": null,
          "new_api": "imdct36",
          "old_text": null,
          "new_text": "imdct36(out_ptr, buf, ptr, win)",
          "old_line_content": "        out_ptr = sb_samples + j;",
          "new_line_content": "        imdct36(out_ptr, buf, ptr, win);",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1)",
          "old_line_content": "                /* check for header */",
          "new_line_content": "                memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1);",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i], win[i])",
          "old_line_content": "            out_ptr += SBLIMIT;",
          "new_line_content": "            *out_ptr = MULH(out2[i], win[i]) + buf[i + 6*1];",
          "content_same": false
        },
        {
          "line": 2076,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i + 6], win[i + 6])",
          "old_line_content": "        }",
          "new_line_content": "            buf[i + 6*2] = MULH(out2[i + 6], win[i + 6]);",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "old_line_content": "                        (s->inbuf[2] << 8) | s->inbuf[3];",
          "new_line_content": "                memcpy(s->inbuf_ptr, buf_ptr, len);",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i], win[i])",
          "old_line_content": "            buf[i + 6*2] = 0;",
          "new_line_content": "            *out_ptr = MULH(out2[i], win[i]) + buf[i + 6*2];",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i + 6], win[i + 6])",
          "old_line_content": "        }",
          "new_line_content": "            buf[i + 6*0] = MULH(out2[i + 6], win[i + 6]);",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "imdct12",
          "old_text": null,
          "new_text": "imdct12(out2, ptr + 2)",
          "old_line_content": "    }",
          "new_line_content": "        imdct12(out2, ptr + 2);",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i], win[i])",
          "old_line_content": "    for(j=sblimit;j<SBLIMIT;j++) {",
          "new_line_content": "            buf[i + 6*0] = MULH(out2[i], win[i]) + buf[i + 6*0];",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": null,
          "new_api": "MULH",
          "old_text": null,
          "new_text": "MULH(out2[i + 6], win[i + 6])",
          "old_line_content": "        /* overlap */",
          "new_line_content": "            buf[i + 6*1] = MULH(out2[i + 6], win[i + 6]);",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"free frame size=%d padding=%d\\n\",\n                                s->free_format_frame_size, padding)",
          "old_line_content": "                buf_ptr += len;",
          "new_line_content": "                        dprintf(\"free frame size=%d padding=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": null,
          "new_api": "decode_header",
          "old_text": null,
          "new_text": "decode_header(s, header1)",
          "old_line_content": "                buf_size -= len;",
          "new_line_content": "                        decode_header(s, header1);",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "old_line_content": "            if (avctx->parse_only) {",
          "new_line_content": "            memcpy(s->inbuf_ptr, buf_ptr, len);",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": null,
          "new_api": "mp_decode_frame",
          "old_text": null,
          "new_text": "mp_decode_frame(s, out_samples)",
          "old_line_content": "            break;",
          "new_line_content": "                out_size = mp_decode_frame(s, out_samples);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"pos=%d\\n\", pos)",
          "old_line_content": "    for(i=0;i<n;i++) {",
          "new_line_content": "        av_log(NULL, AV_LOG_DEBUG, \"pos=%d\\n\", pos);",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \" %0.4f\", (double)tab[i] / FRAC_ONE)",
          "old_line_content": "        v = tab[i] << (23 - FRAC_BITS);",
          "new_line_content": "            av_log(NULL, AV_LOG_DEBUG, \" %0.4f\", (double)tab[i] / FRAC_ONE);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"\\n\")",
          "old_line_content": "    }",
          "new_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"\\n\");",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_DEBUG, \"Error while decoding mpeg audio frame\\n\")",
          "old_line_content": "static int decode_frame_adu(AVCodecContext * avctx,",
          "new_line_content": "                av_log(avctx, AV_LOG_DEBUG, \"Error while decoding mpeg audio frame\\n\"); //FIXME return -1 / but also return the number of bytes consumed",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(&v, 1, sizeof(int32_t), f)",
          "old_line_content": "{",
          "new_line_content": "        fwrite(&v, 1, sizeof(int32_t), f);",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "        if (s->nb_channels == 2)",
          "new_line_content": "        main_data_begin = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 2)",
          "old_line_content": "        else",
          "new_line_content": "            private_bits = get_bits(&s->gb, 2);",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "        nb_granules = 2;",
          "new_line_content": "            private_bits = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->inbuf, buf, len)",
          "old_line_content": "        *data_size = 0;",
          "new_line_content": "    memcpy(s->inbuf, buf, len);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 3)",
          "old_line_content": "    }",
          "new_line_content": "            private_bits = get_bits(&s->gb, 3);",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 5)",
          "old_line_content": "    for(gr=0;gr<nb_granules;gr++) {",
          "new_line_content": "            private_bits = get_bits(&s->gb, 5);",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": null,
          "new_api": "ff_mpa_check_header",
          "old_text": null,
          "new_text": "ff_mpa_check_header(header)",
          "old_line_content": "    avctx->channels = s->nb_channels;",
          "new_line_content": "    if (ff_mpa_check_header(header) < 0) { // Bad header, discard frame",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": null,
          "new_api": "decode_header",
          "old_text": null,
          "new_text": "decode_header(s, header)",
          "old_line_content": "",
          "new_line_content": "    decode_header(s, header);",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"gr=%d ch=%d: side_info\\n\", gr, ch)",
          "old_line_content": "                MODE_EXT_MS_STEREO)",
          "new_line_content": "            dprintf(\"gr=%d ch=%d: side_info\\n\", gr, ch);",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 12)",
          "old_line_content": "            if (s->lsf)",
          "new_line_content": "            g->part2_3_length = get_bits(&s->gb, 12);",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 8)",
          "old_line_content": "            else",
          "new_line_content": "            g->global_gain = get_bits(&s->gb, 8);",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": null,
          "new_api": "mp_decode_frame",
          "old_text": null,
          "new_text": "mp_decode_frame(s, out_samples)",
          "old_line_content": "/* Next 3 arrays are indexed by channel config number (passed via codecdata) */",
          "new_line_content": "        out_size = mp_decode_frame(s, out_samples);",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "                for(i=0;i<3;i++)",
          "new_line_content": "            blocksplit_flag = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 2)",
          "old_line_content": "                /* compute huffman coded region sizes */",
          "new_line_content": "                g->block_type = get_bits(&s->gb, 2);",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "                else {",
          "new_line_content": "                g->switch_point = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 5)",
          "old_line_content": "                        g->region_size[0] = (36 / 2);",
          "new_line_content": "                    g->table_select[i] = get_bits(&s->gb, 5);",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 3)",
          "old_line_content": "                        g->region_size[0] = (54 / 2);",
          "new_line_content": "                    g->subblock_gain[i] = get_bits(&s->gb, 3);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 5)",
          "old_line_content": "                l = region_address1 + region_address2 + 2;",
          "new_line_content": "                    g->table_select[i] = get_bits(&s->gb, 5);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"region=%d n=%d x=%d y=%d exp=%d\\n\",\n                    i, g->region_size[i] - j, x, y, exponents[s_index])",
          "old_line_content": "            } else {",
          "new_line_content": "            dprintf(\"region=%d n=%d x=%d y=%d exp=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 4)",
          "old_line_content": "                if (l > 22)",
          "new_line_content": "                region_address1 = get_bits(&s->gb, 4);",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 3)",
          "old_line_content": "                    l = 22;",
          "new_line_content": "                region_address2 = get_bits(&s->gb, 3);",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"region1=%d region2=%d\\n\",\n                        region_address1, region_address2)",
          "old_line_content": "                g->region_size[1] =",
          "new_line_content": "                dprintf(\"region1=%d region2=%d\\n\",",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Codec extradata missing or too short.\\n\")",
          "old_line_content": "        return -1;",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Codec extradata missing or too short.\\n\");",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, linbits)",
          "old_line_content": "            if (y) {",
          "new_line_content": "                    x += get_bitsz(&s->gb, linbits);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "l3_unscale",
          "old_text": null,
          "new_text": "l3_unscale(x, exponents[s_index])",
          "old_line_content": "                if (y == 15)",
          "new_line_content": "                v = l3_unscale(x, exponents[s_index]);",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid channel config number.\\n\")",
          "old_line_content": "     * Other decoders will be inited here copying data from the first context",
          "new_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Invalid channel config number.\\n\");",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, linbits)",
          "old_line_content": "        }",
          "new_line_content": "                    y += get_bitsz(&s->gb, linbits);",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "l3_unscale",
          "old_text": null,
          "new_text": "l3_unscale(y, exponents[s_index])",
          "old_line_content": "    }",
          "new_line_content": "                v = l3_unscale(y, exponents[s_index]);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "",
          "new_line_content": "                if (get_bits1(&s->gb))",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(g->region_size[i], g->big_values)",
          "old_line_content": "                    /* if switched mode, we handle the 36 first samples as",
          "new_line_content": "                k = FFMIN(g->region_size[i], g->big_values);",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MPADecodeContext))",
          "old_line_content": "    /* Create a separate codec/context for each frame (first is already ok).",
          "new_line_content": "    s->mp3decctx[0] = av_mallocz(sizeof(MPADecodeContext));",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "decode_init",
          "old_text": null,
          "new_text": "decode_init(avctx)",
          "old_line_content": "    for (i = 1; i < s->frames; i++) {",
          "new_line_content": "    decode_init(avctx);",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "            break;",
          "new_line_content": "        pos = get_bits_count(&s->gb);",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": null,
          "new_api": "av_mallocz",
          "old_text": null,
          "new_text": "av_mallocz(sizeof(MPADecodeContext))",
          "old_line_content": "}",
          "new_line_content": "        s->mp3decctx[i] = av_mallocz(sizeof(MPADecodeContext));",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "get_vlc2",
          "old_text": null,
          "new_text": "get_vlc2(&s->gb, vlc->table, vlc->bits, 1)",
          "old_line_content": "            int pos= s_index+idxtab[code];",
          "new_line_content": "        code = get_vlc2(&s->gb, vlc->table, vlc->bits, 1);",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"t=%d code=%d\\n\", g->count1table_select, code)",
          "old_line_content": "            code ^= 8>>idxtab[code];",
          "new_line_content": "        dprintf(\"t=%d code=%d\\n\", g->count1table_select, code);",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "  if (!s->adu_mode) {",
          "new_line_content": "                g->preflag = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "get_bits",
          "old_text": null,
          "new_text": "get_bits(&s->gb, 1)",
          "old_line_content": "    /* now we get bits from the main_data_begin offset */",
          "new_line_content": "            g->scalefac_scale = get_bits(&s->gb, 1);",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(s->mp3decctx[i])",
          "old_line_content": "                        uint8_t * buf, int buf_size)",
          "new_line_content": "            av_free(s->mp3decctx[i]);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "l3_unscale",
          "old_text": null,
          "new_text": "l3_unscale(1, exponents[pos])",
          "old_line_content": "    return 0;",
          "new_line_content": "            v = l3_unscale(1, exponents[pos]);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "get_bits1",
          "old_text": null,
          "new_text": "get_bits1(&s->gb)",
          "old_line_content": "}",
          "new_line_content": "            if(get_bits1(&s->gb))",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&g->sb_hybrid[s_index], 0, sizeof(*g->sb_hybrid)*(576 - s_index))",
          "old_line_content": "{",
          "new_line_content": "    memset(&g->sb_hybrid[s_index], 0, sizeof(*g->sb_hybrid)*(576 - s_index));",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": null,
          "new_api": "seek_to_maindata",
          "old_text": null,
          "new_text": "seek_to_maindata(s, main_data_begin)",
          "old_line_content": "",
          "new_line_content": "    seek_to_maindata(s, main_data_begin);",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "                slen2 = slen_table[1][g->scalefac_compress];",
          "new_line_content": "            bits_pos = get_bits_count(&s->gb);",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"slen1=%d slen2=%d\\n\", slen1, slen2)",
          "old_line_content": "                    for(i=0;i<3;i++)",
          "new_line_content": "                dprintf(\"slen1=%d slen2=%d\\n\", slen1, slen2);",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, slen1)",
          "old_line_content": "                    for(k=0;k<4;k++) {",
          "new_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, slen1);",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, slen2)",
          "old_line_content": "                        if ((g->scfsi & (0x8 >> k)) == 0) {",
          "new_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, slen2);",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, slen)",
          "old_line_content": "                    }",
          "new_line_content": "                                g->scale_factors[j++] = get_bitsz(&s->gb, slen);",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": null,
          "new_api": "assert (m != NULL)",
          "old_text": null,
          "new_text": "assert (m != NULL)",
          "old_line_content": "",
          "new_line_content": "        assert (m != NULL);",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ptr1, tmp, len * 3 * sizeof(int32_t))",
          "old_line_content": "{",
          "new_line_content": "        memcpy(ptr1, tmp, len * 3 * sizeof(int32_t));",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(m->inbuf, start, fsize)",
          "old_line_content": "            return buf_size;",
          "new_line_content": "        memcpy(m->inbuf, start, fsize);",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": null,
          "new_api": "ff_mpa_check_header",
          "old_text": null,
          "new_text": "ff_mpa_check_header(header)",
          "old_line_content": "        n = MPA_FRAME_SIZE * m->nb_channels;",
          "new_line_content": "        if (ff_mpa_check_header(header) < 0) { // Bad header, discard block",
          "content_same": false
        },
        {
          "line": 2330,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"scfsi=%x gr=%d ch=%d scale_factors:\\n\",\n                           g->scfsi, gr, ch)",
          "old_line_content": "                int tindex, tindex2, slen[4], sl, sf;",
          "new_line_content": "                    dprintf(\"scfsi=%x gr=%d ch=%d scale_factors:\\n\",",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": null,
          "new_api": "decode_header",
          "old_text": null,
          "new_text": "decode_header(m, header)",
          "old_line_content": "            if(m->nb_channels == 1) {",
          "new_line_content": "        decode_header(m, header);",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": null,
          "new_api": "mp_decode_frame",
          "old_text": null,
          "new_text": "mp_decode_frame(m, decoded_buf)",
          "old_line_content": "                for(j = 0; j < n; j++) {",
          "new_line_content": "        mp_decode_frame(m, decoded_buf);",
          "content_same": false
        },
        {
          "line": 2333,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\" %d\", g->scale_factors[i])",
          "old_line_content": "                if (g->block_type == 2) {",
          "new_line_content": "                        dprintf(\" %d\", g->scale_factors[i]);",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"\\n\")",
          "old_line_content": "                    tindex = g->switch_point ? 2 : 1;",
          "new_line_content": "                    dprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf, 6, 6, 0)",
          "old_line_content": "                    }",
          "new_line_content": "                        lsf_sf_expand(slen, sf, 6, 6, 0);",
          "content_same": false
        },
        {
          "line": 2354,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf - 180, 4, 4, 0)",
          "old_line_content": "                    if (sf < 400) {",
          "new_line_content": "                        lsf_sf_expand(slen, sf - 180, 4, 4, 0);",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf - 244, 3, 0, 0)",
          "old_line_content": "                    } else if (sf < 500) {",
          "new_line_content": "                        lsf_sf_expand(slen, sf - 244, 3, 0, 0);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf, 5, 4, 4)",
          "old_line_content": "                        g->preflag = 1;",
          "new_line_content": "                        lsf_sf_expand(slen, sf, 5, 4, 4);",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf - 400, 5, 4, 0)",
          "old_line_content": "",
          "new_line_content": "                        lsf_sf_expand(slen, sf - 400, 5, 4, 0);",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": null,
          "new_api": "lsf_sf_expand",
          "old_text": null,
          "new_text": "lsf_sf_expand(slen, sf - 500, 3, 0, 0)",
          "old_line_content": "                    n = lsf_nsf_table[tindex2][tindex][k];",
          "new_line_content": "                        lsf_sf_expand(slen, sf - 500, 3, 0, 0);",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0, v1)",
          "old_line_content": "                        for(j=0;j<len;j++) {",
          "new_line_content": "                        tab0[j] = MULL(tmp0, v1);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0, v2)",
          "old_line_content": "                            tmp0 = tab0[j];",
          "new_line_content": "                        tab1[j] = MULL(tmp0, v2);",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": null,
          "new_api": "get_bitsz",
          "old_text": null,
          "new_text": "get_bitsz(&s->gb, sl)",
          "old_line_content": "                           gr, ch);",
          "new_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, sl);",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0 + tmp1, ISQRT2)",
          "old_line_content": "        non_zero_found = non_zero_found_short[0] |",
          "new_line_content": "                            tab0[j] = MULL(tmp0 + tmp1, ISQRT2);",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0 - tmp1, ISQRT2)",
          "old_line_content": "            non_zero_found_short[1] |",
          "new_line_content": "                            tab1[j] = MULL(tmp0 - tmp1, ISQRT2);",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"gr=%d ch=%d scale_factors:\\n\",\n                           gr, ch)",
          "old_line_content": "",
          "new_line_content": "                    dprintf(\"gr=%d ch=%d scale_factors:\\n\",",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\" %d\", g->scale_factors[i])",
          "old_line_content": "            /* read Huffman coded residue */",
          "new_line_content": "                        dprintf(\" %d\", g->scale_factors[i]);",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": null,
          "new_api": "exponents_from_scale_factors",
          "old_text": null,
          "new_text": "exponents_from_scale_factors(s, g, exponents)",
          "old_line_content": "#endif",
          "new_line_content": "            exponents_from_scale_factors(s, g, exponents);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "sample_dump",
          "old_text": null,
          "new_text": "sample_dump(0, g->sb_hybrid, 576)",
          "old_line_content": "            }",
          "new_line_content": "            sample_dump(0, g->sb_hybrid, 576);",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(&s->gb)",
          "old_line_content": "            }",
          "new_line_content": "            bits_left = g->part2_3_length - (get_bits_count(&s->gb) - bits_pos);",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": null,
          "new_api": "skip_bits",
          "old_text": null,
          "new_text": "skip_bits(&s->gb, bits_left)",
          "old_line_content": "",
          "new_line_content": "                skip_bits(&s->gb, bits_left);",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0, v1)",
          "old_line_content": "                    for(j=0;j<len;j++) {",
          "new_line_content": "                    tab0[j] = MULL(tmp0, v1);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0, v2)",
          "old_line_content": "                        tmp0 = tab0[j];",
          "new_line_content": "                    tab1[j] = MULL(tmp0, v2);",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": null,
          "new_api": "compute_stereo",
          "old_text": null,
          "new_text": "compute_stereo(s, &granules[0][gr], &granules[1][gr])",
          "old_line_content": "#endif",
          "new_line_content": "            compute_stereo(s, &granules[0][gr], &granules[1][gr]);",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0 + tmp1, ISQRT2)",
          "old_line_content": "        /* NOTE: the 1/sqrt(2) normalization factor is included in the",
          "new_line_content": "                        tab0[j] = MULL(tmp0 + tmp1, ISQRT2);",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": null,
          "new_api": "compute_antialias",
          "old_text": null,
          "new_text": "s->compute_antialias(s, g)",
          "old_line_content": "        }",
          "new_line_content": "            s->compute_antialias(s, g);",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "MULL",
          "old_text": null,
          "new_text": "MULL(tmp0 - tmp1, ISQRT2)",
          "old_line_content": "           global gain */",
          "new_line_content": "                        tab1[j] = MULL(tmp0 - tmp1, ISQRT2);",
          "content_same": false
        },
        {
          "line": 2432,
          "old_api": null,
          "new_api": "sample_dump",
          "old_text": null,
          "new_text": "sample_dump(1, g->sb_hybrid, 576)",
          "old_line_content": "    return nb_granules * 18;",
          "new_line_content": "            sample_dump(1, g->sb_hybrid, 576);",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": null,
          "new_api": "compute_imdct",
          "old_text": null,
          "new_text": "compute_imdct(s, g, &s->sb_samples[ch][18 * gr][0], s->mdct_buf[ch])",
          "old_line_content": "",
          "new_line_content": "            compute_imdct(s, g, &s->sb_samples[ch][18 * gr][0], s->mdct_buf[ch]);",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": null,
          "new_api": "sample_dump",
          "old_text": null,
          "new_text": "sample_dump(2, &s->sb_samples[ch][18 * gr][0], 576)",
          "old_line_content": "                           OUT_INT *samples)",
          "new_line_content": "            sample_dump(2, &s->sb_samples[ch][18 * gr][0], 576);",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": null,
          "new_api": "init_get_bits",
          "old_text": null,
          "new_text": "init_get_bits(&s->gb, s->inbuf + HEADER_SIZE,\n                  (s->inbuf_ptr - s->inbuf - HEADER_SIZE)*8)",
          "old_line_content": "    switch(s->layer) {",
          "new_line_content": "    init_get_bits(&s->gb, s->inbuf + HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"frame %d:\\n\", s->frame_count)",
          "old_line_content": "    case 3:",
          "new_line_content": "    dprintf(\"frame %d:\\n\", s->frame_count);",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "mp_decode_layer1",
          "old_text": null,
          "new_text": "mp_decode_layer1(s)",
          "old_line_content": "        break;",
          "new_line_content": "        nb_frames = mp_decode_layer1(s);",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": null,
          "new_api": "mp_decode_layer2",
          "old_text": null,
          "new_text": "mp_decode_layer2(s)",
          "old_line_content": "    for(i=0;i<nb_frames;i++) {",
          "new_line_content": "        nb_frames = mp_decode_layer2(s);",
          "content_same": false
        },
        {
          "line": 2466,
          "old_api": null,
          "new_api": "mp_decode_layer3",
          "old_text": null,
          "new_text": "mp_decode_layer3(s)",
          "old_line_content": "            for(j=0;j<SBLIMIT;j++)",
          "new_line_content": "        nb_frames = mp_decode_layer3(s);",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"%d-%d:\", i, ch)",
          "old_line_content": "    for(ch=0;ch<s->nb_channels;ch++) {",
          "new_line_content": "            dprintf(\"%d-%d:\", i, ch);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\" %0.6f\", (double)s->sb_samples[ch][i][j] / FRAC_ONE)",
          "old_line_content": "        for(i=0;i<nb_frames;i++) {",
          "new_line_content": "                dprintf(\" %0.6f\", (double)s->sb_samples[ch][i][j] / FRAC_ONE);",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(0)",
          "old_line_content": "",
          "new_line_content": "        INT_AA(0)",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(1)",
          "old_line_content": "        ptr += 18;",
          "new_line_content": "        INT_AA(1)",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(2)",
          "old_line_content": "    }",
          "new_line_content": "        INT_AA(2)",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(3)",
          "old_line_content": "}",
          "new_line_content": "        INT_AA(3)",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(4)",
          "old_line_content": "",
          "new_line_content": "        INT_AA(4)",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(5)",
          "old_line_content": "static void compute_antialias_float(MPADecodeContext *s,",
          "new_line_content": "        INT_AA(5)",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(6)",
          "old_line_content": "                              GranuleDef *g)",
          "new_line_content": "        INT_AA(6)",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": null,
          "new_api": "ff_mpa_synth_filter",
          "old_text": null,
          "new_text": "ff_mpa_synth_filter(s->synth_buf[ch], &(s->synth_buf_offset[ch]),\n                         window, &s->dither_state,\n                         samples_ptr, s->nb_channels,\n                         s->sb_samples[ch][i])",
          "old_line_content": "    s->frame_count++;",
          "new_line_content": "            ff_mpa_synth_filter(s->synth_buf[ch], &(s->synth_buf_offset[ch]),",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "INT_AA",
          "old_text": null,
          "new_text": "INT_AA(7)",
          "old_line_content": "{",
          "new_line_content": "        INT_AA(7)",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(0)",
          "old_line_content": "",
          "new_line_content": "        FLOAT_AA(0)",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(1)",
          "old_line_content": "        ptr += 18;",
          "new_line_content": "        FLOAT_AA(1)",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(2)",
          "old_line_content": "    }",
          "new_line_content": "        FLOAT_AA(2)",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(3)",
          "old_line_content": "}",
          "new_line_content": "        FLOAT_AA(3)",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(4)",
          "old_line_content": "",
          "new_line_content": "        FLOAT_AA(4)",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(5)",
          "old_line_content": "static void compute_imdct(MPADecodeContext *s,",
          "new_line_content": "        FLOAT_AA(5)",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(6)",
          "old_line_content": "                          GranuleDef *g,",
          "new_line_content": "        FLOAT_AA(6)",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": null,
          "new_api": "FLOAT_AA",
          "old_text": null,
          "new_text": "FLOAT_AA(7)",
          "old_line_content": "                          int32_t *sb_samples,",
          "new_line_content": "        FLOAT_AA(7)",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "old_line_content": "                    (s->inbuf[2] << 8) | s->inbuf[3];",
          "new_line_content": "                memcpy(s->inbuf_ptr, buf_ptr, len);",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": null,
          "new_api": "ff_mpa_check_header",
          "old_text": null,
          "new_text": "ff_mpa_check_header(header)",
          "old_line_content": "                } else {",
          "new_line_content": "                if (ff_mpa_check_header(header) < 0) {",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1)",
          "old_line_content": "                        /* free format: prepare to compute frame size */",
          "new_line_content": "                    memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "dprintf",
          "old_text": null,
          "new_text": "dprintf(\"skip %x\\n\", header)",
          "old_line_content": "                    }",
          "new_line_content": "                    dprintf(\"skip %x\\n\", header);",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "decode_header",
          "old_text": null,
          "new_text": "decode_header(s, header)",
          "old_line_content": "                    avctx->sub_id = s->layer;",
          "new_line_content": "                    if (decode_header(s, header) == 1) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2051,
          "old_api": "imdct36",
          "new_api": null,
          "old_text": "imdct36(out_ptr, buf, ptr, win)",
          "new_text": null,
          "old_line_content": "        imdct36(out_ptr, buf, ptr, win);",
          "new_line_content": "        out_ptr = sb_samples + j;",
          "content_same": false
        },
        {
          "line": 2572,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1)",
          "new_text": null,
          "old_line_content": "                memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1);",
          "new_line_content": "        } else if (s->frame_size == -1) {",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": "imdct12",
          "new_api": null,
          "old_text": "imdct12(out2, ptr + 0)",
          "new_text": null,
          "old_line_content": "        imdct12(out2, ptr + 0);",
          "new_line_content": "        /* select frequency inversion */",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "MULH",
          "new_api": null,
          "old_text": "MULH(out2[i], win[i])",
          "new_text": null,
          "old_line_content": "            *out_ptr = MULH(out2[i], win[i]) + buf[i + 6*1];",
          "new_line_content": "        out_ptr = sb_samples + j;",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "MULH",
          "new_api": null,
          "old_text": "MULH(out2[i + 6], win[i + 6])",
          "new_text": null,
          "old_line_content": "            buf[i + 6*2] = MULH(out2[i + 6], win[i + 6]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "new_text": null,
          "old_line_content": "                memcpy(s->inbuf_ptr, buf_ptr, len);",
          "new_line_content": "                s->frame_size = 0;",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "imdct12",
          "new_api": null,
          "old_text": "imdct12(out2, ptr + 1)",
          "new_text": null,
          "old_line_content": "        imdct12(out2, ptr + 1);",
          "new_line_content": "            out_ptr += SBLIMIT;",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": "MULH",
          "new_api": null,
          "old_text": "MULH(out2[i + 6], win[i + 6])",
          "new_text": null,
          "old_line_content": "            buf[i + 6*0] = MULH(out2[i + 6], win[i + 6]);",
          "new_line_content": "        for(i=0;i<6;i++) {",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "imdct12",
          "new_api": null,
          "old_text": "imdct12(out2, ptr + 2)",
          "new_text": null,
          "old_line_content": "        imdct12(out2, ptr + 2);",
          "new_line_content": "            out_ptr += SBLIMIT;",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": "MULH",
          "new_api": null,
          "old_text": "MULH(out2[i + 6], win[i + 6])",
          "new_text": null,
          "old_line_content": "            buf[i + 6*1] = MULH(out2[i + 6], win[i + 6]);",
          "new_line_content": "        for(i=0;i<6;i++) {",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"free frame size=%d padding=%d\\n\",\n                                s->free_format_frame_size, padding)",
          "new_text": null,
          "old_line_content": "                        dprintf(\"free frame size=%d padding=%d\\n\",",
          "new_line_content": "                        /* compute frame size */",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "decode_header",
          "new_api": null,
          "old_text": "decode_header(s, header1)",
          "new_text": null,
          "old_line_content": "                        decode_header(s, header1);",
          "new_line_content": "                        s->free_format_frame_size = s->inbuf_ptr - s->inbuf;",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf, sizeof(buf), \"/tmp/out%d.%s.pcm\",\n                fnum,\n#ifdef USE_HIGHPRECISION\n                \"hp\"\n#else\n                \"lp\"\n#endif\n                )",
          "new_text": null,
          "old_line_content": "        snprintf(buf, sizeof(buf), \"/tmp/out%d.%s.pcm\",",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "new_text": null,
          "old_line_content": "            memcpy(s->inbuf_ptr, buf_ptr, len);",
          "new_line_content": "                buf_size -= len;",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": "mp_decode_frame",
          "new_api": null,
          "old_text": "mp_decode_frame(s, out_samples)",
          "new_text": null,
          "old_line_content": "                out_size = mp_decode_frame(s, out_samples);",
          "new_line_content": "    next_data:",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \" %0.4f\", (double)tab[i] / FRAC_ONE)",
          "new_text": null,
          "old_line_content": "            av_log(NULL, AV_LOG_DEBUG, \" %0.4f\", (double)tab[i] / FRAC_ONE);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(NULL, AV_LOG_DEBUG, \"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2643,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_DEBUG, \"Error while decoding mpeg audio frame\\n\")",
          "new_text": null,
          "old_line_content": "                av_log(avctx, AV_LOG_DEBUG, \"Error while decoding mpeg audio frame\\n\"); //FIXME return -1 / but also return the number of bytes consumed",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(&v, 1, sizeof(int32_t), f)",
          "new_text": null,
          "old_line_content": "        fwrite(&v, 1, sizeof(int32_t), f);",
          "new_line_content": "            if ((i % 18) == 17)",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "        main_data_begin = get_bits(&s->gb, 8);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 2)",
          "new_text": null,
          "old_line_content": "            private_bits = get_bits(&s->gb, 2);",
          "new_line_content": "    int gr, ch, blocksplit_flag, i, j, k, n, bits_pos, bits_left;",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 1)",
          "new_text": null,
          "old_line_content": "            private_bits = get_bits(&s->gb, 1);",
          "new_line_content": "    int16_t exponents[576];",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 9)",
          "new_text": null,
          "old_line_content": "        main_data_begin = get_bits(&s->gb, 9);",
          "new_line_content": "    if (s->lsf) {",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->inbuf, buf, len)",
          "new_text": null,
          "old_line_content": "    memcpy(s->inbuf, buf, len);",
          "new_line_content": "        *data_size = 0;",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 3)",
          "new_text": null,
          "old_line_content": "            private_bits = get_bits(&s->gb, 3);",
          "new_line_content": "        if (s->nb_channels == 2)",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 5)",
          "new_text": null,
          "old_line_content": "            private_bits = get_bits(&s->gb, 5);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "ff_mpa_check_header",
          "new_api": null,
          "old_text": "ff_mpa_check_header(header)",
          "new_text": null,
          "old_line_content": "    if (ff_mpa_check_header(header) < 0) { // Bad header, discard frame",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": "decode_header",
          "new_api": null,
          "old_text": "decode_header(s, header)",
          "new_text": null,
          "old_line_content": "    decode_header(s, header);",
          "new_line_content": "    header = (s->inbuf[0] << 24) | (s->inbuf[1] << 16) |",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"gr=%d ch=%d: side_info\\n\", gr, ch)",
          "new_text": null,
          "old_line_content": "            dprintf(\"gr=%d ch=%d: side_info\\n\", gr, ch);",
          "new_line_content": "        for(ch=0;ch<s->nb_channels;ch++) {",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 9)",
          "new_text": null,
          "old_line_content": "            g->big_values = get_bits(&s->gb, 9);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 8)",
          "new_text": null,
          "old_line_content": "            g->global_gain = get_bits(&s->gb, 8);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "                g->scalefac_compress = get_bits(&s->gb, 4);",
          "new_line_content": "            /* if MS stereo only is selected, we precompute the",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 1)",
          "new_text": null,
          "old_line_content": "            blocksplit_flag = get_bits(&s->gb, 1);",
          "new_line_content": "               1/sqrt(2) renormalization factor */",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": "mp_decode_frame",
          "new_api": null,
          "old_text": "mp_decode_frame(s, out_samples)",
          "new_text": null,
          "old_line_content": "        out_size = mp_decode_frame(s, out_samples);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 2)",
          "new_text": null,
          "old_line_content": "                g->block_type = get_bits(&s->gb, 2);",
          "new_line_content": "                MODE_EXT_MS_STEREO)",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 3)",
          "new_text": null,
          "old_line_content": "                    g->subblock_gain[i] = get_bits(&s->gb, 3);",
          "new_line_content": "            if (blocksplit_flag) {",
          "content_same": false
        },
        {
          "line": 2214,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 5)",
          "new_text": null,
          "old_line_content": "                    g->table_select[i] = get_bits(&s->gb, 5);",
          "new_line_content": "                        g->region_size[0] = (108 / 2);",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"region=%d n=%d x=%d y=%d exp=%d\\n\",\n                    i, g->region_size[i] - j, x, y, exponents[s_index])",
          "new_text": null,
          "old_line_content": "            dprintf(\"region=%d n=%d x=%d y=%d exp=%d\\n\",",
          "new_line_content": "                g->sb_hybrid[s_index+1] = 0;",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 4)",
          "new_text": null,
          "old_line_content": "                region_address1 = get_bits(&s->gb, 4);",
          "new_line_content": "                g->region_size[1] = (576 / 2);",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 3)",
          "new_text": null,
          "old_line_content": "                region_address2 = get_bits(&s->gb, 3);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"region1=%d region2=%d\\n\",\n                        region_address1, region_address2)",
          "new_text": null,
          "old_line_content": "                dprintf(\"region1=%d region2=%d\\n\",",
          "new_line_content": "                int region_address1, region_address2, l;",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Codec extradata missing or too short.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Codec extradata missing or too short.\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "get_bitsz",
          "new_api": null,
          "old_text": "get_bitsz(&s->gb, linbits)",
          "new_text": null,
          "old_line_content": "                    x += get_bitsz(&s->gb, linbits);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": "l3_unscale",
          "new_api": null,
          "old_text": "l3_unscale(x, exponents[s_index])",
          "new_text": null,
          "old_line_content": "                v = l3_unscale(x, exponents[s_index]);",
          "new_line_content": "            x = y >> 4;",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&s->gb)",
          "new_text": null,
          "old_line_content": "                if (get_bits1(&s->gb))",
          "new_line_content": "            y = y & 0x0f;",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(avctx, AV_LOG_ERROR, \"Invalid channel config number.\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(avctx, AV_LOG_ERROR, \"Invalid channel config number.\\n\");",
          "new_line_content": "    if ((avctx->extradata_size < 2) || (avctx->extradata == NULL)) {",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "l3_unscale",
          "new_api": null,
          "old_text": "l3_unscale(y, exponents[s_index])",
          "new_text": null,
          "old_line_content": "                v = l3_unscale(y, exponents[s_index]);",
          "new_line_content": "                    v = -v;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&s->gb)",
          "new_text": null,
          "old_line_content": "                if (get_bits1(&s->gb))",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(g->region_size[i], g->big_values)",
          "new_text": null,
          "old_line_content": "                k = FFMIN(g->region_size[i], g->big_values);",
          "new_line_content": "                g->region_size[1] =",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MPADecodeContext))",
          "new_text": null,
          "old_line_content": "    s->mp3decctx[0] = av_mallocz(sizeof(MPADecodeContext));",
          "new_line_content": "    avctx->channels = mp3Channels[s->chan_cfg];",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "decode_init",
          "new_api": null,
          "old_text": "decode_init(avctx)",
          "new_text": null,
          "old_line_content": "    decode_init(avctx);",
          "new_line_content": "     * We replace avctx->priv_data with the context of the first decoder so that",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(&s->gb)",
          "new_text": null,
          "old_line_content": "        pos = get_bits_count(&s->gb);",
          "new_line_content": "            g->sb_hybrid[s_index++] = v;",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "av_mallocz",
          "new_api": null,
          "old_text": "av_mallocz(sizeof(MPADecodeContext))",
          "new_text": null,
          "old_line_content": "        s->mp3decctx[i] = av_mallocz(sizeof(MPADecodeContext));",
          "new_line_content": "    // Restore mp3on4 context pointer",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "get_vlc2",
          "new_api": null,
          "old_text": "get_vlc2(&s->gb, vlc->table, vlc->bits, 1)",
          "new_text": null,
          "old_line_content": "        code = get_vlc2(&s->gb, vlc->table, vlc->bits, 1);",
          "new_line_content": "                   part. We must go back into the data */",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"t=%d code=%d\\n\", g->count1table_select, code)",
          "new_text": null,
          "old_line_content": "        dprintf(\"t=%d code=%d\\n\", g->count1table_select, code);",
          "new_line_content": "                s_index -= 4;",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 1)",
          "new_text": null,
          "old_line_content": "                g->preflag = get_bits(&s->gb, 1);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 1)",
          "new_text": null,
          "old_line_content": "            g->scalefac_scale = get_bits(&s->gb, 1);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 1)",
          "new_text": null,
          "old_line_content": "            g->count1table_select = get_bits(&s->gb, 1);",
          "new_line_content": "                g->short_start = 13;",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"block_type=%d switch_point=%d\\n\",\n                    g->block_type, g->switch_point)",
          "new_text": null,
          "old_line_content": "            dprintf(\"block_type=%d switch_point=%d\\n\",",
          "new_line_content": "                g->long_end = 22;",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(s->mp3decctx[i])",
          "new_text": null,
          "old_line_content": "            av_free(s->mp3decctx[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "l3_unscale",
          "new_api": null,
          "old_text": "l3_unscale(1, exponents[pos])",
          "new_text": null,
          "old_line_content": "            v = l3_unscale(1, exponents[pos]);",
          "new_line_content": "        g->sb_hybrid[s_index+0]=",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "get_bits1",
          "new_api": null,
          "old_text": "get_bits1(&s->gb)",
          "new_text": null,
          "old_line_content": "            if(get_bits1(&s->gb))",
          "new_line_content": "        g->sb_hybrid[s_index+1]=",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&g->sb_hybrid[s_index], 0, sizeof(*g->sb_hybrid)*(576 - s_index))",
          "new_text": null,
          "old_line_content": "    memset(&g->sb_hybrid[s_index], 0, sizeof(*g->sb_hybrid)*(576 - s_index));",
          "new_line_content": "            code ^= 8>>idxtab[code];",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"slen1=%d slen2=%d\\n\", slen1, slen2)",
          "new_text": null,
          "old_line_content": "                dprintf(\"slen1=%d slen2=%d\\n\", slen1, slen2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "get_bitsz",
          "new_api": null,
          "old_text": "get_bitsz(&s->gb, slen1)",
          "new_text": null,
          "old_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, slen1);",
          "new_line_content": "                /* MPEG1 scale factors */",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "get_bitsz",
          "new_api": null,
          "old_text": "get_bitsz(&s->gb, slen2)",
          "new_text": null,
          "old_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, slen2);",
          "new_line_content": "                slen2 = slen_table[1][g->scalefac_compress];",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "get_bitsz",
          "new_api": null,
          "old_text": "get_bitsz(&s->gb, slen)",
          "new_text": null,
          "old_line_content": "                                g->scale_factors[j++] = get_bitsz(&s->gb, slen);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "assert (m != NULL)",
          "new_api": null,
          "old_text": "assert (m != NULL)",
          "new_text": null,
          "old_line_content": "        assert (m != NULL);",
          "new_line_content": "        fsize = (start[0] << 4) | (start[1] >> 4);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ptr1, tmp, len * 3 * sizeof(int32_t))",
          "new_text": null,
          "old_line_content": "        memcpy(ptr1, tmp, len * 3 * sizeof(int32_t));",
          "new_line_content": "        ptr1 = ptr;",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(m->inbuf, start, fsize)",
          "new_text": null,
          "old_line_content": "        memcpy(m->inbuf, start, fsize);",
          "new_line_content": "            fsize = len;",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": "ff_mpa_check_header",
          "new_api": null,
          "old_text": "ff_mpa_check_header(header)",
          "new_text": null,
          "old_line_content": "        if (ff_mpa_check_header(header) < 0) { // Bad header, discard block",
          "new_line_content": "        /* copy original to new */",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"scfsi=%x gr=%d ch=%d scale_factors:\\n\",\n                           g->scfsi, gr, ch)",
          "new_text": null,
          "old_line_content": "                    dprintf(\"scfsi=%x gr=%d ch=%d scale_factors:\\n\",",
          "new_line_content": "                                j++;",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": "decode_header",
          "new_api": null,
          "old_text": "decode_header(m, header)",
          "new_text": null,
          "old_line_content": "        decode_header(m, header);",
          "new_line_content": "        header = (m->inbuf[0] << 24) | (m->inbuf[1] << 16) |",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "mp_decode_frame",
          "new_api": null,
          "old_text": "mp_decode_frame(m, decoded_buf)",
          "new_text": null,
          "old_line_content": "        mp_decode_frame(m, decoded_buf);",
          "new_line_content": "                  (m->inbuf[2] << 8) | m->inbuf[3] | 0xfff00000;",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\" %d\", g->scale_factors[i])",
          "new_text": null,
          "old_line_content": "                        dprintf(\" %d\", g->scale_factors[i]);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"\\n\")",
          "new_text": null,
          "old_line_content": "                    dprintf(\"\\n\");",
          "new_line_content": "                    g->scale_factors[j++] = 0;",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf, 6, 6, 0)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf, 6, 6, 0);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf - 180, 4, 4, 0)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf - 180, 4, 4, 0);",
          "new_line_content": "                sf = g->scalefac_compress;",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf - 244, 3, 0, 0)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf - 244, 3, 0, 0);",
          "new_line_content": "                    sf >>= 1;",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf, 5, 4, 4)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf, 5, 4, 4);",
          "new_line_content": "                        tindex2 = 4;",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf - 400, 5, 4, 0)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf - 400, 5, 4, 0);",
          "new_line_content": "                        tindex2 = 5;",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "lsf_sf_expand",
          "new_api": null,
          "old_text": "lsf_sf_expand(slen, sf - 500, 3, 0, 0)",
          "new_text": null,
          "old_line_content": "                        lsf_sf_expand(slen, sf - 500, 3, 0, 0);",
          "new_line_content": "                    /* normal case */",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0, v1)",
          "new_text": null,
          "old_line_content": "                        tab0[j] = MULL(tmp0, v1);",
          "new_line_content": "                    sf = g1->scale_factors[k + l];",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0, v2)",
          "new_text": null,
          "old_line_content": "                        tab1[j] = MULL(tmp0, v2);",
          "new_line_content": "                    if (sf >= sf_max)",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "get_bitsz",
          "new_api": null,
          "old_text": "get_bitsz(&s->gb, sl)",
          "new_text": null,
          "old_line_content": "                        g->scale_factors[j++] = get_bitsz(&s->gb, sl);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0 + tmp1, ISQRT2)",
          "new_text": null,
          "old_line_content": "                            tab0[j] = MULL(tmp0 + tmp1, ISQRT2);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0 - tmp1, ISQRT2)",
          "new_text": null,
          "old_line_content": "                            tab1[j] = MULL(tmp0 - tmp1, ISQRT2);",
          "new_line_content": "                found1:",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"gr=%d ch=%d scale_factors:\\n\",\n                           gr, ch)",
          "new_text": null,
          "old_line_content": "                    dprintf(\"gr=%d ch=%d scale_factors:\\n\",",
          "new_line_content": "                    for(i=0;i<n;i++)",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\" %d\", g->scale_factors[i])",
          "new_text": null,
          "old_line_content": "                        dprintf(\" %d\", g->scale_factors[i]);",
          "new_line_content": "                /* XXX: should compute exact size */",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"\\n\")",
          "new_text": null,
          "old_line_content": "                    dprintf(\"\\n\");",
          "new_line_content": "                for(;j<40;j++)",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "exponents_from_scale_factors",
          "new_api": null,
          "old_text": "exponents_from_scale_factors(s, g, exponents)",
          "new_text": null,
          "old_line_content": "            exponents_from_scale_factors(s, g, exponents);",
          "new_line_content": "                           gr, ch);",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "sample_dump",
          "new_api": null,
          "old_text": "sample_dump(0, g->sb_hybrid, 576)",
          "new_text": null,
          "old_line_content": "            sample_dump(0, g->sb_hybrid, 576);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"bits_left=%d\\n\", bits_left)",
          "new_text": null,
          "old_line_content": "                dprintf(\"bits_left=%d\\n\", bits_left);",
          "new_line_content": "                return -1;",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": "skip_bits",
          "new_api": null,
          "old_text": "skip_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "                skip_bits(&s->gb, 16);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0, v1)",
          "new_text": null,
          "old_line_content": "                    tab0[j] = MULL(tmp0, v1);",
          "new_line_content": "                k = (i == 21) ? 20 : i;",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0, v2)",
          "new_text": null,
          "old_line_content": "                    tab1[j] = MULL(tmp0, v2);",
          "new_line_content": "                sf = g1->scale_factors[k];",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "reorder_block",
          "new_api": null,
          "old_text": "reorder_block(s, g)",
          "new_text": null,
          "old_line_content": "            reorder_block(s, g);",
          "new_line_content": "        } /* ch */",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "sample_dump",
          "new_api": null,
          "old_text": "sample_dump(0, g->sb_hybrid, 576)",
          "new_text": null,
          "old_line_content": "            sample_dump(0, g->sb_hybrid, 576);",
          "new_line_content": "        if (s->nb_channels == 2)",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0 + tmp1, ISQRT2)",
          "new_text": null,
          "old_line_content": "                        tab0[j] = MULL(tmp0 + tmp1, ISQRT2);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "compute_antialias",
          "new_api": null,
          "old_text": "s->compute_antialias(s, g)",
          "new_text": null,
          "old_line_content": "            s->compute_antialias(s, g);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "MULL",
          "new_api": null,
          "old_text": "MULL(tmp0 - tmp1, ISQRT2)",
          "new_text": null,
          "old_line_content": "                        tab1[j] = MULL(tmp0 - tmp1, ISQRT2);",
          "new_line_content": "            found2:",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": "sample_dump",
          "new_api": null,
          "old_text": "sample_dump(1, g->sb_hybrid, 576)",
          "new_text": null,
          "old_line_content": "            sample_dump(1, g->sb_hybrid, 576);",
          "new_line_content": "            g = &granules[ch][gr];",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "init_get_bits",
          "new_api": null,
          "old_text": "init_get_bits(&s->gb, s->inbuf + HEADER_SIZE,\n                  (s->inbuf_ptr - s->inbuf - HEADER_SIZE)*8)",
          "new_text": null,
          "old_line_content": "    init_get_bits(&s->gb, s->inbuf + HEADER_SIZE,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "get_bits",
          "new_api": null,
          "old_text": "get_bits(&s->gb, 16)",
          "new_text": null,
          "old_line_content": "        get_bits(&s->gb, 16);",
          "new_line_content": "    int i, nb_frames, ch;",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"frame %d:\\n\", s->frame_count)",
          "new_text": null,
          "old_line_content": "    dprintf(\"frame %d:\\n\", s->frame_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": "mp_decode_layer1",
          "new_api": null,
          "old_text": "mp_decode_layer1(s)",
          "new_text": null,
          "old_line_content": "        nb_frames = mp_decode_layer1(s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "mp_decode_layer3",
          "new_api": null,
          "old_text": "mp_decode_layer3(s)",
          "new_text": null,
          "old_line_content": "        nb_frames = mp_decode_layer3(s);",
          "new_line_content": "    case 1:",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"%d-%d:\", i, ch)",
          "new_text": null,
          "old_line_content": "            dprintf(\"%d-%d:\", i, ch);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\" %0.6f\", (double)s->sb_samples[ch][i][j] / FRAC_ONE)",
          "new_text": null,
          "old_line_content": "                dprintf(\" %0.6f\", (double)s->sb_samples[ch][i][j] / FRAC_ONE);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"\\n\")",
          "new_text": null,
          "old_line_content": "            dprintf(\"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(0)",
          "new_text": null,
          "old_line_content": "        INT_AA(0)",
          "new_line_content": "        csa = &csa_table[0][0];",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(1)",
          "new_text": null,
          "old_line_content": "        INT_AA(1)",
          "new_line_content": "#define INT_AA(j) \\",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(2)",
          "new_text": null,
          "old_line_content": "        INT_AA(2)",
          "new_line_content": "            tmp0 = ptr[-1-j];\\",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(3)",
          "new_text": null,
          "old_line_content": "        INT_AA(3)",
          "new_line_content": "            tmp1 = ptr[   j];\\",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(4)",
          "new_text": null,
          "old_line_content": "        INT_AA(4)",
          "new_line_content": "            tmp2= MULH(tmp0 + tmp1, csa[0+4*j]);\\",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(5)",
          "new_text": null,
          "old_line_content": "        INT_AA(5)",
          "new_line_content": "            ptr[-1-j] = 4*(tmp2 - MULH(tmp1, csa[2+4*j]));\\",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(6)",
          "new_text": null,
          "old_line_content": "        INT_AA(6)",
          "new_line_content": "            ptr[   j] = 4*(tmp2 + MULH(tmp0, csa[3+4*j]));",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "INT_AA",
          "new_api": null,
          "old_text": "INT_AA(7)",
          "new_text": null,
          "old_line_content": "        INT_AA(7)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(0)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(0)",
          "new_line_content": "        float tmp0, tmp1;",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(1)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(1)",
          "new_line_content": "        float *csa = &csa_table_float[0][0];",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(2)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(2)",
          "new_line_content": "#define FLOAT_AA(j)\\",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(3)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(3)",
          "new_line_content": "        tmp0= ptr[-1-j];\\",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(4)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(4)",
          "new_line_content": "        tmp1= ptr[   j];\\",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(5)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(5)",
          "new_line_content": "        ptr[-1-j] = lrintf(tmp0 * csa[0+4*j] - tmp1 * csa[1+4*j]);\\",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(6)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(6)",
          "new_line_content": "        ptr[   j] = lrintf(tmp0 * csa[1+4*j] + tmp1 * csa[0+4*j]);",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "FLOAT_AA",
          "new_api": null,
          "old_text": "FLOAT_AA(7)",
          "new_text": null,
          "old_line_content": "        FLOAT_AA(7)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s->inbuf_ptr, buf_ptr, len)",
          "new_text": null,
          "old_line_content": "                memcpy(s->inbuf_ptr, buf_ptr, len);",
          "new_line_content": "                goto got_header;",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "ff_mpa_check_header",
          "new_api": null,
          "old_text": "ff_mpa_check_header(header)",
          "new_text": null,
          "old_line_content": "                if (ff_mpa_check_header(header) < 0) {",
          "new_line_content": "                buf_size -= len;",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1)",
          "new_text": null,
          "old_line_content": "                    memmove(s->inbuf, s->inbuf + 1, s->inbuf_ptr - s->inbuf - 1);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "dprintf",
          "new_api": null,
          "old_text": "dprintf(\"skip %x\\n\", header)",
          "new_text": null,
          "old_line_content": "                    dprintf(\"skip %x\\n\", header);",
          "new_line_content": "            got_header:",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "decode_header",
          "new_api": null,
          "old_text": "decode_header(s, header)",
          "new_text": null,
          "old_line_content": "                    if (decode_header(s, header) == 1) {",
          "new_line_content": "                    /* no sync found : move by one byte (inefficient, but simple!) */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 131,
      "total_deletions": 131,
      "total_api_changes": 277
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 277,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          1700,
          1701,
          1702,
          1704,
          1705,
          1706
        ]
      }
    },
    "api_calls_before": 421,
    "api_calls_after": 421,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 0,
      "total_diff_lines": 20
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/6b4c9854daba2eac01716c3445eb68e6ab8758ba",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/6b4c9854daba2eac01716c3445eb68e6ab8758ba/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/6b4c9854daba2eac01716c3445eb68e6ab8758ba/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/6b4c9854daba2eac01716c3445eb68e6ab8758ba/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 487,
          "old_api": "SKIP_BITS",
          "new_api": "SHOW_UBITS",
          "old_text": "SKIP_BITS(re, gb, 1)",
          "new_text": "SHOW_UBITS(re, gb, 1)",
          "old_line_content": "        SKIP_BITS(re, gb, 1);",
          "new_line_content": "        for (; i < limit && SHOW_UBITS(re, gb, 1) == 0; i++) {",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "LAST_SKIP_BITS",
          "new_api": "SHOW_UBITS",
          "old_text": "LAST_SKIP_BITS(re, gb, k-16)",
          "new_text": "SHOW_UBITS(re, gb, 16)",
          "old_line_content": "                    LAST_SKIP_BITS(re, gb, k-16);",
          "new_line_content": "                    buf = SHOW_UBITS(re, gb, 16) << (k-16);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "SHOW_UBITS",
          "new_api": "UPDATE_CACHE",
          "old_text": "SHOW_UBITS(re, gb, k)",
          "new_text": "UPDATE_CACHE(re, gb)",
          "old_line_content": "                    buf = SHOW_UBITS(re, gb, k);",
          "new_line_content": "                    UPDATE_CACHE(re, gb);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "LAST_SKIP_BITS",
          "new_api": "SHOW_UBITS",
          "old_text": "LAST_SKIP_BITS(re, gb, k)",
          "new_text": "SHOW_UBITS(re, gb, k-16)",
          "old_line_content": "                    LAST_SKIP_BITS(re, gb, k);",
          "new_line_content": "                    buf |= SHOW_UBITS(re, gb, k-16);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "av_log",
          "new_api": "get_ue_golomb",
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d ue  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "new_text": "get_ue_golomb(s)",
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d ue  @%5d in %s %s:%d\\n\",",
          "new_line_content": "    int i    = get_ue_golomb(s);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "av_log",
          "new_api": "get_se_golomb",
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d se  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "new_text": "get_se_golomb(s)",
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d se  @%5d in %s %s:%d\\n\",",
          "new_line_content": "    int i    = get_se_golomb(s);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "av_log",
          "new_api": "get_te0_golomb",
          "old_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d te  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "new_text": "get_te0_golomb(s, r)",
          "old_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d te  @%5d in %s %s:%d\\n\",",
          "new_line_content": "    int i    = get_te0_golomb(s, r);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "put_bits",
          "new_api": "av_assert2",
          "old_text": "put_bits(pb, ff_ue_golomb_len[i], i + 1)",
          "new_text": "av_assert2(i >= 0)",
          "old_line_content": "        put_bits(pb, ff_ue_golomb_len[i], i + 1);",
          "new_line_content": "    av_assert2(i >= 0);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "put_bits",
          "new_api": "av_assert2",
          "old_text": "put_bits(pb, 1, i ^ 1)",
          "new_text": "av_assert2(range >= 1)",
          "old_line_content": "        put_bits(pb, 1, i ^ 1);",
          "new_line_content": "    av_assert2(range >= 1);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "av_mod_uintp2",
          "new_api": "av_assert2",
          "old_text": "av_mod_uintp2(i, k)",
          "new_text": "av_assert2(i >= 0)",
          "old_line_content": "        put_bits(pb, e + k + 1, (1 << k) + av_mod_uintp2(i, k));",
          "new_line_content": "    av_assert2(i >= 0);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, gb, esc_len)",
          "old_line_content": "            buf = -1;",
          "new_line_content": "            LAST_SKIP_BITS(re, gb, esc_len);",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(i + 1)",
          "old_line_content": "",
          "new_line_content": "        int e = av_log2(i + 1);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "put_bits64",
          "old_text": null,
          "new_text": "put_bits64(pb, 2 * e + 1, i + 1)",
          "old_line_content": "/**",
          "new_line_content": "        put_bits64(pb, 2 * e + 1, i + 1);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "CLOSE_READER",
          "old_text": null,
          "new_text": "CLOSE_READER(re, gb)",
          "old_line_content": "}",
          "new_line_content": "        CLOSE_READER(re, gb);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "SHOW_UBITS",
          "old_text": null,
          "new_text": "SHOW_UBITS(re, gb, esc_len)",
          "old_line_content": "        } else {",
          "new_line_content": "            buf = SHOW_UBITS(re, gb, esc_len);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(i <= range)",
          "old_line_content": "    else",
          "new_line_content": "    av_assert2(i <= range);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 1, i ^ 1)",
          "old_line_content": "",
          "new_line_content": "        put_bits(pb, 1, i ^ 1);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "set_ue_golomb",
          "old_text": null,
          "new_text": "set_ue_golomb(pb, i)",
          "old_line_content": " * write signed exp golomb code. 16 bits at most.",
          "new_line_content": "        set_ue_golomb(pb, i);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "get_ur_golomb",
          "old_text": null,
          "new_text": "get_ur_golomb(gb, k, limit, esc_len)",
          "old_line_content": "/**",
          "new_line_content": "    unsigned v = get_ur_golomb(gb, k, limit, esc_len);",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "get_ur_golomb_jpegls",
          "old_text": null,
          "new_text": "get_ur_golomb_jpegls(gb, k, limit, esc_len)",
          "old_line_content": "/**",
          "new_line_content": "    unsigned v = get_ur_golomb_jpegls(gb, k, limit, esc_len);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "set_ue_golomb",
          "old_text": null,
          "new_text": "set_ue_golomb(pb, i)",
          "old_line_content": " * write unsigned golomb rice code (ffv1).",
          "new_line_content": "    set_ue_golomb(pb, i);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "get_ur_golomb_jpegls",
          "old_text": null,
          "new_text": "get_ur_golomb_jpegls(gb, k, INT_MAX, 0)",
          "old_line_content": " * read signed golomb rice code (shorten).",
          "new_line_content": "    return get_ur_golomb_jpegls(gb, k, INT_MAX, 0);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "av_mod_uintp2",
          "old_text": null,
          "new_text": "av_mod_uintp2(i, k)",
          "old_line_content": "",
          "new_line_content": "        put_bits(pb, e + k + 1, (1 << k) + av_mod_uintp2(i, k));",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "get_ur_golomb_jpegls",
          "old_text": null,
          "new_text": "get_ur_golomb_jpegls(gb, k + 1, INT_MAX, 0)",
          "old_line_content": "#ifdef TRACE",
          "new_line_content": "    int uvar = get_ur_golomb_jpegls(gb, k + 1, INT_MAX, 0);",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, limit + esc_len, i - limit + 1)",
          "old_line_content": " * write unsigned golomb rice code (jpegls).",
          "new_line_content": "        put_bits(pb, limit + esc_len, i - limit + 1);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "show_bits",
          "old_text": null,
          "new_text": "show_bits(s, 24)",
          "old_line_content": "    int bits = show >> (24 - len);",
          "new_line_content": "    int show = show_bits(s, 24);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "",
          "new_line_content": "    int pos  = get_bits_count(s);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(i >= 0)",
          "old_line_content": "        while (e > 31) {",
          "new_line_content": "    av_assert2(i >= 0);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "           bits, len, i, pos, file, func, line);",
          "new_line_content": "    int len  = get_bits_count(s) - pos;",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d ue  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "old_line_content": "}",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d ue  @%5d in %s %s:%d\\n\",",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 31, 0)",
          "old_line_content": "        if (k)",
          "new_line_content": "            put_bits(pb, 31, 0);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, e, 1)",
          "old_line_content": "        while (limit > 31) {",
          "new_line_content": "        put_bits(pb, e, 1);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "put_sbits",
          "old_text": null,
          "new_text": "put_sbits(pb, k, i)",
          "old_line_content": "            limit -= 31;",
          "new_line_content": "            put_sbits(pb, k, i);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "show_bits",
          "old_text": null,
          "new_text": "show_bits(s, 24)",
          "old_line_content": "    int bits = show >> (24 - len);",
          "new_line_content": "    int show = show_bits(s, 24);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "",
          "new_line_content": "    int pos  = get_bits_count(s);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "           bits, len, i, pos, file, func, line);",
          "new_line_content": "    int len  = get_bits_count(s) - pos;",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, limit, 1)",
          "old_line_content": "",
          "new_line_content": "        put_bits(pb, limit, 1);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, esc_len, i - 1)",
          "old_line_content": "/**",
          "new_line_content": "        put_bits(pb, esc_len, i - 1);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d se  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "old_line_content": "}",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d se  @%5d in %s %s:%d\\n\",",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "show_bits",
          "old_text": null,
          "new_text": "show_bits(s, 24)",
          "old_line_content": "    int bits = show >> (24 - len);",
          "new_line_content": "    int show = show_bits(s, 24);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "",
          "new_line_content": "    int pos  = get_bits_count(s);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "get_bits_count",
          "old_text": null,
          "new_text": "get_bits_count(s)",
          "old_line_content": "           bits, len, i, pos, file, func, line);",
          "new_line_content": "    int len  = get_bits_count(s) - pos;",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "set_ur_golomb",
          "old_text": null,
          "new_text": "set_ur_golomb(pb, v, k, limit, esc_len)",
          "old_line_content": " * write signed golomb rice code (flac).",
          "new_line_content": "    set_ur_golomb(pb, v, k, limit, esc_len);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d te  @%5d in %s %s:%d\\n\",\n           bits, len, i, pos, file, func, line)",
          "old_line_content": "}",
          "new_line_content": "    av_log(NULL, AV_LOG_DEBUG, \"%5d %2d %3d te  @%5d in %s %s:%d\\n\",",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "set_ur_golomb_jpegls",
          "old_text": null,
          "new_text": "set_ur_golomb_jpegls(pb, v, k, limit, esc_len)",
          "old_line_content": "",
          "new_line_content": "    set_ur_golomb_jpegls(pb, v, k, limit, esc_len);",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "SKIP_BITS",
          "old_text": null,
          "new_text": "SKIP_BITS(re, gb, 1)",
          "old_line_content": "",
          "new_line_content": "            SKIP_BITS(re, gb, 1);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, gb, 1)",
          "old_line_content": "            if (k) {",
          "new_line_content": "        LAST_SKIP_BITS(re, gb, 1);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "UPDATE_CACHE",
          "old_text": null,
          "new_text": "UPDATE_CACHE(re, gb)",
          "old_line_content": "                if (k > MIN_CACHE_BITS - 1) {",
          "new_line_content": "        UPDATE_CACHE(re, gb);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(i <= 0xFFFE)",
          "old_line_content": "    else {",
          "new_line_content": "    av_assert2(i <= 0xFFFE);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, ff_ue_golomb_len[i], i + 1)",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(pb, ff_ue_golomb_len[i], i + 1);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, gb, 16)",
          "old_line_content": "                } else {",
          "new_line_content": "                    LAST_SKIP_BITS(re, gb, 16);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(i + 1)",
          "old_line_content": "",
          "new_line_content": "        int e = av_log2(i + 1);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, 2 * e + 1, i + 1)",
          "old_line_content": "/**",
          "new_line_content": "        put_bits(pb, 2 * e + 1, i + 1);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, gb, k-16)",
          "old_line_content": "                }",
          "new_line_content": "                    LAST_SKIP_BITS(re, gb, k-16);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "SHOW_UBITS",
          "old_text": null,
          "new_text": "SHOW_UBITS(re, gb, k)",
          "old_line_content": "                buf = 0;",
          "new_line_content": "                    buf = SHOW_UBITS(re, gb, k);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "LAST_SKIP_BITS",
          "old_text": null,
          "new_text": "LAST_SKIP_BITS(re, gb, k)",
          "old_line_content": "            }",
          "new_line_content": "                    LAST_SKIP_BITS(re, gb, k);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "av_assert2",
          "old_text": null,
          "new_text": "av_assert2(i <= (UINT32_MAX - 1))",
          "old_line_content": "    else {",
          "new_line_content": "    av_assert2(i <= (UINT32_MAX - 1));",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "put_bits",
          "old_text": null,
          "new_text": "put_bits(pb, ff_ue_golomb_len[i], i + 1)",
          "old_line_content": "    }",
          "new_line_content": "        put_bits(pb, ff_ue_golomb_len[i], i + 1);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 514,
          "old_api": "CLOSE_READER",
          "new_api": null,
          "old_text": "CLOSE_READER(re, gb)",
          "new_text": null,
          "old_line_content": "        CLOSE_READER(re, gb);",
          "new_line_content": "            buf ++;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(range >= 1)",
          "new_text": null,
          "old_line_content": "    av_assert2(range >= 1);",
          "new_line_content": " * write truncated unsigned exp golomb code.",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i <= range)",
          "new_text": null,
          "old_line_content": "    av_assert2(i <= range);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "set_ue_golomb",
          "new_api": null,
          "old_text": "set_ue_golomb(pb, i)",
          "new_text": null,
          "old_line_content": "        set_ue_golomb(pb, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "get_ur_golomb",
          "new_api": null,
          "old_text": "get_ur_golomb(gb, k, limit, esc_len)",
          "new_text": null,
          "old_line_content": "    unsigned v = get_ur_golomb(gb, k, limit, esc_len);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "get_ur_golomb_jpegls",
          "new_api": null,
          "old_text": "get_ur_golomb_jpegls(gb, k, limit, esc_len)",
          "new_text": null,
          "old_line_content": "    unsigned v = get_ur_golomb_jpegls(gb, k, limit, esc_len);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "set_ue_golomb",
          "new_api": null,
          "old_text": "set_ue_golomb(pb, i)",
          "new_text": null,
          "old_line_content": "    set_ue_golomb(pb, i);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "get_ur_golomb_jpegls",
          "new_api": null,
          "old_text": "get_ur_golomb_jpegls(gb, k, INT_MAX, 0)",
          "new_text": null,
          "old_line_content": "    return get_ur_golomb_jpegls(gb, k, INT_MAX, 0);",
          "new_line_content": " * read unsigned golomb rice code (shorten).",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i >= 0)",
          "new_text": null,
          "old_line_content": "    av_assert2(i >= 0);",
          "new_line_content": "                                 int esc_len)",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "get_ur_golomb_jpegls",
          "new_api": null,
          "old_text": "get_ur_golomb_jpegls(gb, k + 1, INT_MAX, 0)",
          "new_text": null,
          "old_line_content": "    int uvar = get_ur_golomb_jpegls(gb, k + 1, INT_MAX, 0);",
          "new_line_content": " * read signed golomb rice code (shorten).",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, limit + esc_len, i - limit + 1)",
          "new_text": null,
          "old_line_content": "        put_bits(pb, limit + esc_len, i - limit + 1);",
          "new_line_content": "    e = i >> k;",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "show_bits",
          "new_api": null,
          "old_text": "show_bits(s, 24)",
          "new_text": null,
          "old_line_content": "    int show = show_bits(s, 24);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int pos  = get_bits_count(s);",
          "new_line_content": "static inline int get_ue(GetBitContext *s, const char *file, const char *func,",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "get_ue_golomb",
          "new_api": null,
          "old_text": "get_ue_golomb(s)",
          "new_text": null,
          "old_line_content": "    int i    = get_ue_golomb(s);",
          "new_line_content": "                         int line)",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int len  = get_bits_count(s) - pos;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i >= 0)",
          "new_text": null,
          "old_line_content": "    av_assert2(i >= 0);",
          "new_line_content": "                                        int limit, int esc_len)",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 31, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(pb, 31, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, e, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(pb, e, 1);",
          "new_line_content": "        while (e > 31) {",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "put_sbits",
          "new_api": null,
          "old_text": "put_sbits(pb, k, i)",
          "new_text": null,
          "old_line_content": "            put_sbits(pb, k, i);",
          "new_line_content": "            e -= 31;",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "show_bits",
          "new_api": null,
          "old_text": "show_bits(s, 24)",
          "new_text": null,
          "old_line_content": "    int show = show_bits(s, 24);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int pos  = get_bits_count(s);",
          "new_line_content": "static inline int get_se(GetBitContext *s, const char *file, const char *func,",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "get_se_golomb",
          "new_api": null,
          "old_text": "get_se_golomb(s)",
          "new_text": null,
          "old_line_content": "    int i    = get_se_golomb(s);",
          "new_line_content": "                         int line)",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int len  = get_bits_count(s) - pos;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 31, 0)",
          "new_text": null,
          "old_line_content": "            put_bits(pb, 31, 0);",
          "new_line_content": "        if (k)",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, limit, 1)",
          "new_text": null,
          "old_line_content": "        put_bits(pb, limit, 1);",
          "new_line_content": "        while (limit > 31) {",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "show_bits",
          "new_api": null,
          "old_text": "show_bits(s, 24)",
          "new_text": null,
          "old_line_content": "    int show = show_bits(s, 24);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int pos  = get_bits_count(s);",
          "new_line_content": "static inline int get_te(GetBitContext *s, int r, char *file, const char *func,",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "get_te0_golomb",
          "new_api": null,
          "old_text": "get_te0_golomb(s, r)",
          "new_text": null,
          "old_line_content": "    int i    = get_te0_golomb(s, r);",
          "new_line_content": "                         int line)",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": "get_bits_count",
          "new_api": null,
          "old_text": "get_bits_count(s)",
          "new_text": null,
          "old_line_content": "    int len  = get_bits_count(s) - pos;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "set_ur_golomb",
          "new_api": null,
          "old_text": "set_ur_golomb(pb, v, k, limit, esc_len)",
          "new_text": null,
          "old_line_content": "    set_ur_golomb(pb, v, k, limit, esc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "set_ur_golomb_jpegls",
          "new_api": null,
          "old_text": "set_ur_golomb_jpegls(pb, v, k, limit, esc_len)",
          "new_text": null,
          "old_line_content": "    set_ur_golomb_jpegls(pb, v, k, limit, esc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i >= 0)",
          "new_text": null,
          "old_line_content": "    av_assert2(i >= 0);",
          "new_line_content": " * write unsigned exp golomb code. 2^16 - 2 at most",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i <= 0xFFFE)",
          "new_text": null,
          "old_line_content": "    av_assert2(i <= 0xFFFE);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "SHOW_UBITS",
          "new_api": null,
          "old_text": "SHOW_UBITS(re, gb, 16)",
          "new_text": null,
          "old_line_content": "                    buf = SHOW_UBITS(re, gb, 16) << (k-16);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "LAST_SKIP_BITS",
          "new_api": null,
          "old_text": "LAST_SKIP_BITS(re, gb, 16)",
          "new_text": null,
          "old_line_content": "                    LAST_SKIP_BITS(re, gb, 16);",
          "new_line_content": "        if (i < limit - 1) {",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(i + 1)",
          "new_text": null,
          "old_line_content": "        int e = av_log2(i + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, 2 * e + 1, i + 1)",
          "new_text": null,
          "old_line_content": "        put_bits(pb, 2 * e + 1, i + 1);",
          "new_line_content": "    if (i < 256)",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "UPDATE_CACHE",
          "new_api": null,
          "old_text": "UPDATE_CACHE(re, gb)",
          "new_text": null,
          "old_line_content": "                    UPDATE_CACHE(re, gb);",
          "new_line_content": "            if (k) {",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "SHOW_UBITS",
          "new_api": null,
          "old_text": "SHOW_UBITS(re, gb, k-16)",
          "new_text": null,
          "old_line_content": "                    buf |= SHOW_UBITS(re, gb, k-16);",
          "new_line_content": "                if (k > MIN_CACHE_BITS - 1) {",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "SHOW_UBITS",
          "new_api": null,
          "old_text": "SHOW_UBITS(re, gb, esc_len)",
          "new_text": null,
          "old_line_content": "            buf = SHOW_UBITS(re, gb, esc_len);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "av_assert2",
          "new_api": null,
          "old_text": "av_assert2(i <= (UINT32_MAX - 1))",
          "new_text": null,
          "old_line_content": "    av_assert2(i <= (UINT32_MAX - 1));",
          "new_line_content": " * write unsigned exp golomb code. 2^32-2 at most.",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "put_bits",
          "new_api": null,
          "old_text": "put_bits(pb, ff_ue_golomb_len[i], i + 1)",
          "new_text": null,
          "old_line_content": "        put_bits(pb, ff_ue_golomb_len[i], i + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "LAST_SKIP_BITS",
          "new_api": null,
          "old_text": "LAST_SKIP_BITS(re, gb, esc_len)",
          "new_text": null,
          "old_line_content": "            LAST_SKIP_BITS(re, gb, esc_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(i + 1)",
          "new_text": null,
          "old_line_content": "        int e = av_log2(i + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "put_bits64",
          "new_api": null,
          "old_text": "put_bits64(pb, 2 * e + 1, i + 1)",
          "new_text": null,
          "old_line_content": "        put_bits64(pb, 2 * e + 1, i + 1);",
          "new_line_content": "    if (i < 256)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 10,
      "total_additions": 48,
      "total_deletions": 45,
      "total_api_changes": 103
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 103,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          489,
          484,
          479
        ]
      }
    },
    "api_calls_before": 171,
    "api_calls_after": 174,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 3,
      "total_diff_lines": 28
    }
  }
}
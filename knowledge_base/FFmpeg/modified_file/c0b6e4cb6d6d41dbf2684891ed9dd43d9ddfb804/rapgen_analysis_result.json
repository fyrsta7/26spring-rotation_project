{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c0b6e4cb6d6d41dbf2684891ed9dd43d9ddfb804",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c0b6e4cb6d6d41dbf2684891ed9dd43d9ddfb804/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c0b6e4cb6d6d41dbf2684891ed9dd43d9ddfb804/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/c0b6e4cb6d6d41dbf2684891ed9dd43d9ddfb804/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 198,
          "old_api": "cuCtxPushCurrent",
          "new_api": "cuCtxPopCurrent",
          "old_text": "cu->cuCtxPushCurrent(s->cu_ctx)",
          "new_text": "cu->cuCtxPopCurrent(&dummy)",
          "old_line_content": "        CHECK_CU(cu->cuCtxPushCurrent(s->cu_ctx));",
          "new_line_content": "        CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "av_frame_free",
          "new_api": "av_buffer_unref",
          "old_text": "av_frame_free(&y->next)",
          "new_text": "av_buffer_unref(&s->device_ref)",
          "old_line_content": "    av_frame_free(&y->next);",
          "new_line_content": "    av_buffer_unref(&s->device_ref);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"A hardware frames reference is \"\n               \"required to associate the processing device.\\n\")",
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A hardware frames reference is \"",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "av_buffer_ref",
          "new_api": "av_log",
          "old_text": "av_buffer_ref(inlink->hw_frames_ctx)",
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"A input frames reference create \"\n               \"failed.\\n\")",
          "old_line_content": "    s->input_frames_ref = av_buffer_ref(inlink->hw_frames_ctx);",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A input frames reference create \"",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"A input frames reference create \"\n               \"failed.\\n\")",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A input frames reference create \"",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "av_buffer_ref",
          "new_api": "av_log",
          "old_text": "av_buffer_ref(s->input_frames->device_ref)",
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"A device reference create \"\n               \"failed.\\n\")",
          "old_line_content": "    s->device_ref = av_buffer_ref(s->input_frames->device_ref);",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A device reference create \"",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"A device reference create \"\n               \"failed.\\n\")",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A device reference create \"",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "av_hwframe_ctx_alloc",
          "new_api": "av_log",
          "old_text": "av_hwframe_ctx_alloc(s->device_ref)",
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Failed to create HW frame context \"\n               \"for output.\\n\")",
          "old_line_content": "    link->hw_frames_ctx = av_hwframe_ctx_alloc(s->device_ref);",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Failed to create HW frame context \"",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "av_log",
          "new_api": "AVERROR",
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Failed to create HW frame context \"\n               \"for output.\\n\")",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Failed to create HW frame context \"",
          "new_line_content": "        ret = AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "av_hwframe_ctx_init",
          "new_api": "av_log",
          "old_text": "av_hwframe_ctx_init(link->hw_frames_ctx)",
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Failed to initialise CUDA frame \"\n               \"context for output: %d\\n\", ret)",
          "old_line_content": "    ret = av_hwframe_ctx_init(link->hw_frames_ctx);",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Failed to initialise CUDA frame \"",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 260,
          "old_api": null,
          "new_api": "av_assert0",
          "old_text": null,
          "new_text": "av_assert0(s->input_frames)",
          "old_line_content": "    CUcontext dummy;",
          "new_line_content": "    av_assert0(s->input_frames);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "av_buffer_ref",
          "old_text": null,
          "new_text": "av_buffer_ref(s->input_frames->device_ref)",
          "old_line_content": "",
          "new_line_content": "    s->device_ref = av_buffer_ref(s->input_frames->device_ref);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "av_hwframe_ctx_alloc",
          "old_text": null,
          "new_text": "av_hwframe_ctx_alloc(s->device_ref)",
          "old_line_content": "    cu = s->hwctx->internal->cuda_dl;",
          "new_line_content": "    link->hw_frames_ctx = av_hwframe_ctx_alloc(s->device_ref);",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "ff_filter_init_hw_frames",
          "old_text": null,
          "new_text": "ff_filter_init_hw_frames(ctx, link, 10)",
          "old_line_content": "    output_frames->initial_pool_size = 4;",
          "new_line_content": "    ret = ff_filter_init_hw_frames(ctx, link, 10);",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": null,
          "new_api": "av_hwframe_ctx_init",
          "old_text": null,
          "new_text": "av_hwframe_ctx_init(link->hw_frames_ctx)",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = av_hwframe_ctx_init(link->hw_frames_ctx);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "av_mul_q",
          "old_text": null,
          "new_text": "av_mul_q(ctx->inputs[0]->frame_rate,\n                                    (AVRational){2, 1})",
          "old_line_content": "",
          "new_line_content": "        link->frame_rate = av_mul_q(ctx->inputs[0]->frame_rate,",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Video of less than 3 columns or lines is not supported\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Video of less than 3 columns or lines is not supported\\n\");",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    if (link->w < 3 || link->h < 3) {",
          "new_line_content": "        ret = AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "cuCtxPopCurrent",
          "old_text": null,
          "new_text": "cu->cuCtxPopCurrent(&dummy)",
          "old_line_content": "",
          "new_line_content": "    CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": null,
          "new_api": "av_pix_fmt_desc_get",
          "old_text": null,
          "new_text": "av_pix_fmt_desc_get(output_frames->sw_format)",
          "old_line_content": "    }",
          "new_line_content": "    y->csp = av_pix_fmt_desc_get(output_frames->sw_format);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "cuCtxPushCurrent",
          "old_text": null,
          "new_text": "cu->cuCtxPushCurrent(s->cu_ctx)",
          "old_line_content": "    y->filter = filter;",
          "new_line_content": "    ret = CHECK_CU(cu->cuCtxPushCurrent(s->cu_ctx));",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "cuModuleLoadData",
          "old_text": null,
          "new_text": "cu->cuModuleLoadData(&s->cu_module, vf_yadif_cuda_ptx)",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = CHECK_CU(cu->cuModuleLoadData(&s->cu_module, vf_yadif_cuda_ptx));",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "cuCtxPushCurrent",
          "old_text": null,
          "new_text": "cu->cuCtxPushCurrent(s->cu_ctx)",
          "old_line_content": "    if (s->hwctx && s->cu_module) {",
          "new_line_content": "        CHECK_CU(cu->cuCtxPushCurrent(s->cu_ctx));",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "cuModuleUnload",
          "old_text": null,
          "new_text": "cu->cuModuleUnload(s->cu_module)",
          "old_line_content": "        CudaFunctions *cu = s->hwctx->internal->cuda_dl;",
          "new_line_content": "        CHECK_CU(cu->cuModuleUnload(s->cu_module));",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "cuModuleGetFunction",
          "old_text": null,
          "new_text": "cu->cuModuleGetFunction(&s->cu_func_uchar, s->cu_module, \"yadif_uchar\")",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_uchar, s->cu_module, \"yadif_uchar\"));",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&y->prev)",
          "old_line_content": "    }",
          "new_line_content": "    av_frame_free(&y->prev);",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&y->cur)",
          "old_line_content": "",
          "new_line_content": "    av_frame_free(&y->cur);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "cuModuleGetFunction",
          "old_text": null,
          "new_text": "cu->cuModuleGetFunction(&s->cu_func_uchar2, s->cu_module, \"yadif_uchar2\")",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_uchar2, s->cu_module, \"yadif_uchar2\"));",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "cuModuleGetFunction",
          "old_text": null,
          "new_text": "cu->cuModuleGetFunction(&s->cu_func_ushort, s->cu_module, \"yadif_ushort\")",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_ushort, s->cu_module, \"yadif_ushort\"));",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "cuModuleGetFunction",
          "old_text": null,
          "new_text": "cu->cuModuleGetFunction(&s->cu_func_ushort2, s->cu_module, \"yadif_ushort2\")",
          "old_line_content": "        goto exit;",
          "new_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_ushort2, s->cu_module, \"yadif_ushort2\"));",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "cuCtxPopCurrent",
          "old_text": null,
          "new_text": "cu->cuCtxPopCurrent(&dummy)",
          "old_line_content": "",
          "new_line_content": "    CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "ff_make_format_list",
          "old_text": null,
          "new_text": "ff_make_format_list(pix_fmts)",
          "old_line_content": "    int ret;",
          "new_line_content": "    if ((ret = ff_formats_ref(ff_make_format_list(pix_fmts),",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "ff_make_format_list",
          "old_text": null,
          "new_text": "ff_make_format_list(pix_fmts)",
          "old_line_content": "                              &ctx->inputs[0]->out_formats)) < 0)",
          "new_line_content": "    if ((ret = ff_formats_ref(ff_make_format_list(pix_fmts),",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"A hardware frames reference is \"\n               \"required to associate the processing device.\\n\")",
          "old_line_content": "",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"A hardware frames reference is \"",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "av_buffer_ref",
          "old_text": null,
          "new_text": "av_buffer_ref(inlink->hw_frames_ctx)",
          "old_line_content": "    }",
          "new_line_content": "    s->input_frames_ref = av_buffer_ref(inlink->hw_frames_ctx);",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"Deinterlace CUDA frames\")",
          "old_line_content": "AVFilter ff_vf_yadif_cuda = {",
          "new_line_content": "    .description    = NULL_IF_CONFIG_SMALL(\"Deinterlace CUDA frames\"),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 262,
          "old_api": "av_assert0",
          "new_api": null,
          "old_text": "av_assert0(s->input_frames)",
          "new_text": null,
          "old_line_content": "    av_assert0(s->input_frames);",
          "new_line_content": "    if (!s->device_ref) {",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    s->hwctx = ((AVHWDeviceContext*)s->device_ref->data)->hwctx;",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        ret = AVERROR(ENOMEM);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "ff_filter_init_hw_frames",
          "new_api": null,
          "old_text": "ff_filter_init_hw_frames(ctx, link, 10)",
          "new_text": null,
          "old_line_content": "    ret = ff_filter_init_hw_frames(ctx, link, 10);",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Failed to initialise CUDA frame \"\n               \"context for output: %d\\n\", ret)",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Failed to initialise CUDA frame \"",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "av_mul_q",
          "new_api": null,
          "old_text": "av_mul_q(ctx->inputs[0]->frame_rate,\n                                    (AVRational){2, 1})",
          "new_text": null,
          "old_line_content": "        link->frame_rate = av_mul_q(ctx->inputs[0]->frame_rate,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "cuStreamSynchronize",
          "new_api": null,
          "old_text": "cu->cuStreamSynchronize(s->stream)",
          "new_text": null,
          "old_line_content": "    CHECK_CU(cu->cuStreamSynchronize(s->stream));",
          "new_line_content": "exit:",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Video of less than 3 columns or lines is not supported\\n\")",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Video of less than 3 columns or lines is not supported\\n\");",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        ret = AVERROR(EINVAL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "cuCtxPopCurrent",
          "new_api": null,
          "old_text": "cu->cuCtxPopCurrent(&dummy)",
          "new_text": null,
          "old_line_content": "    CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(output_frames->sw_format)",
          "new_text": null,
          "old_line_content": "    y->csp = av_pix_fmt_desc_get(output_frames->sw_format);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "cuCtxPushCurrent",
          "new_api": null,
          "old_text": "cu->cuCtxPushCurrent(s->cu_ctx)",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuCtxPushCurrent(s->cu_ctx));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "cuModuleLoadData",
          "new_api": null,
          "old_text": "cu->cuModuleLoadData(&s->cu_module, vf_yadif_cuda_ptx)",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuModuleLoadData(&s->cu_module, vf_yadif_cuda_ptx));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "cuModuleUnload",
          "new_api": null,
          "old_text": "cu->cuModuleUnload(s->cu_module)",
          "new_text": null,
          "old_line_content": "        CHECK_CU(cu->cuModuleUnload(s->cu_module));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "cuCtxPopCurrent",
          "new_api": null,
          "old_text": "cu->cuCtxPopCurrent(&dummy)",
          "new_text": null,
          "old_line_content": "        CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "cuModuleGetFunction",
          "new_api": null,
          "old_text": "cu->cuModuleGetFunction(&s->cu_func_uchar, s->cu_module, \"yadif_uchar\")",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_uchar, s->cu_module, \"yadif_uchar\"));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&y->cur)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&y->cur);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "cuModuleGetFunction",
          "new_api": null,
          "old_text": "cu->cuModuleGetFunction(&s->cu_func_uchar2, s->cu_module, \"yadif_uchar2\")",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_uchar2, s->cu_module, \"yadif_uchar2\"));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "cuModuleGetFunction",
          "new_api": null,
          "old_text": "cu->cuModuleGetFunction(&s->cu_func_ushort, s->cu_module, \"yadif_ushort\")",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_ushort, s->cu_module, \"yadif_ushort\"));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&s->input_frames_ref)",
          "new_text": null,
          "old_line_content": "    av_buffer_unref(&s->input_frames_ref);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "cuModuleGetFunction",
          "new_api": null,
          "old_text": "cu->cuModuleGetFunction(&s->cu_func_ushort2, s->cu_module, \"yadif_ushort2\")",
          "new_text": null,
          "old_line_content": "    ret = CHECK_CU(cu->cuModuleGetFunction(&s->cu_func_ushort2, s->cu_module, \"yadif_ushort2\"));",
          "new_line_content": "        goto exit;",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "cuCtxPopCurrent",
          "new_api": null,
          "old_text": "cu->cuCtxPopCurrent(&dummy)",
          "new_text": null,
          "old_line_content": "    CHECK_CU(cu->cuCtxPopCurrent(&dummy));",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "ff_make_format_list",
          "new_api": null,
          "old_text": "ff_make_format_list(pix_fmts)",
          "new_text": null,
          "old_line_content": "    if ((ret = ff_formats_ref(ff_make_format_list(pix_fmts),",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "ff_make_format_list",
          "new_api": null,
          "old_text": "ff_make_format_list(pix_fmts)",
          "new_text": null,
          "old_line_content": "    if ((ret = ff_formats_ref(ff_make_format_list(pix_fmts),",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    s->input_frames = (AVHWFramesContext*)s->input_frames_ref->data;",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"Deinterlace CUDA frames\")",
          "new_text": null,
          "old_line_content": "    .description    = NULL_IF_CONFIG_SMALL(\"Deinterlace CUDA frames\"),",
          "new_line_content": "    .priv_class     = &yadif_cuda_class,",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 10,
      "total_additions": 26,
      "total_deletions": 27,
      "total_api_changes": 63
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 63,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 79,
    "api_calls_after": 77,
    "diff_info": {
      "added_lines": 0,
      "removed_lines": 2,
      "total_diff_lines": 14
    }
  }
}
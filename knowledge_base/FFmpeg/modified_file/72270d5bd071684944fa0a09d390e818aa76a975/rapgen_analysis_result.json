{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/72270d5bd071684944fa0a09d390e818aa76a975",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/72270d5bd071684944fa0a09d390e818aa76a975/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/72270d5bd071684944fa0a09d390e818aa76a975/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/FFmpeg/modified_file/72270d5bd071684944fa0a09d390e818aa76a975/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 149,
          "old_api": "ff_get_audio_buffer",
          "new_api": "AVERROR",
          "old_text": "ff_get_audio_buffer(outlink, in->nb_samples)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    out = ff_get_audio_buffer(outlink, in->nb_samples);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "av_frame_free",
          "new_api": "ff_filter_frame",
          "old_text": "av_frame_free(&in)",
          "new_text": "ff_filter_frame(outlink, out)",
          "old_line_content": "    av_frame_free(&in);",
          "new_line_content": "    return ff_filter_frame(outlink, out);",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "memset",
          "new_api": "av_malloc_array",
          "old_text": "memset(out->data[0], 0, s->h * out->linesize[0])",
          "new_text": "av_malloc_array(s->w, sizeof(*mag))",
          "old_line_content": "    memset(out->data[0], 0, s->h * out->linesize[0]);",
          "new_line_content": "    mag = av_malloc_array(s->w, sizeof(*mag));",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "cos",
          "new_api": "sin",
          "old_text": "cos(-x * w)",
          "new_text": "sin(-x * w)",
          "old_line_content": "            real += cos(-x * w) * src[x];",
          "new_line_content": "            imag_num += sin(-x * w) * src[x] * x;",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "sin",
          "new_api": "hypot",
          "old_text": "sin(-x * w)",
          "new_text": "hypot(real, imag)",
          "old_line_content": "            imag_num += sin(-x * w) * src[x] * x;",
          "new_line_content": "        mag[i] = hypot(real, imag);",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "atan2",
          "new_api": "fminf",
          "old_text": "atan2(imag, real)",
          "new_text": "fminf(min, mag[i])",
          "old_line_content": "        phase[i] = atan2(imag, real);",
          "new_line_content": "        min = fminf(min, mag[i]);",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "fminf",
          "new_api": "fmaxf",
          "old_text": "fminf(min, mag[i])",
          "new_text": "fmaxf(max_delay, delay[i])",
          "old_line_content": "        min = fminf(min, mag[i]);",
          "new_line_content": "        max_delay = fmaxf(max_delay, delay[i]);",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "snprintf",
          "new_api": "drawtext",
          "old_text": "snprintf(text, sizeof(text), \"%.2f\", max)",
          "new_text": "drawtext(out, 2, 12, \"Min Magnitude:\", 0xDDDDDDDD)",
          "old_line_content": "        snprintf(text, sizeof(text), \"%.2f\", max);",
          "new_line_content": "        drawtext(out, 2, 12, \"Min Magnitude:\", 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "drawtext",
          "new_api": "snprintf",
          "old_text": "drawtext(out, 15 * 8 + 2, 2, text, 0xDDDDDDDD)",
          "new_text": "snprintf(text, sizeof(text), \"%.2f\", min)",
          "old_line_content": "        drawtext(out, 15 * 8 + 2, 2, text, 0xDDDDDDDD);",
          "new_line_content": "        snprintf(text, sizeof(text), \"%.2f\", min);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "snprintf",
          "new_api": "drawtext",
          "old_text": "snprintf(text, sizeof(text), \"%.2f\", min)",
          "new_text": "drawtext(out, 2, 22, \"Max Delay:\", 0xDDDDDDDD)",
          "old_line_content": "        snprintf(text, sizeof(text), \"%.2f\", min);",
          "new_line_content": "        drawtext(out, 2, 22, \"Max Delay:\", 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "drawtext",
          "new_api": "snprintf",
          "old_text": "drawtext(out, 15 * 8 + 2, 12, text, 0xDDDDDDDD)",
          "new_text": "snprintf(text, sizeof(text), \"%.2f\", max_delay)",
          "old_line_content": "        drawtext(out, 15 * 8 + 2, 12, text, 0xDDDDDDDD);",
          "new_line_content": "        snprintf(text, sizeof(text), \"%.2f\", max_delay);",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "snprintf",
          "new_api": "drawtext",
          "old_text": "snprintf(text, sizeof(text), \"%.2f\", max_delay)",
          "new_text": "drawtext(out, 2, 32, \"Min Delay:\", 0xDDDDDDDD)",
          "old_line_content": "        snprintf(text, sizeof(text), \"%.2f\", max_delay);",
          "new_line_content": "        drawtext(out, 2, 32, \"Min Delay:\", 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "drawtext",
          "new_api": "snprintf",
          "old_text": "drawtext(out, 11 * 8 + 2, 22, text, 0xDDDDDDDD)",
          "new_text": "snprintf(text, sizeof(text), \"%.2f\", min_delay)",
          "old_line_content": "        drawtext(out, 11 * 8 + 2, 22, text, 0xDDDDDDDD);",
          "new_line_content": "        snprintf(text, sizeof(text), \"%.2f\", min_delay);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "av_calloc",
          "new_api": "AVERROR",
          "old_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->rdft))",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    seg->rdft  = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->rdft));",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "av_calloc",
          "new_api": "AVERROR",
          "old_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->part_index))",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    seg->part_index    = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->part_index));",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "AVERROR",
          "new_api": "av_log2",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "av_log2(2 * part_size)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        seg->rdft[ch]  = av_rdft_init(av_log2(2 * part_size), DFT_R2C);",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "av_log2",
          "new_api": "AVERROR",
          "old_text": "av_log2(2 * part_size)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "        seg->rdft[ch]  = av_rdft_init(av_log2(2 * part_size), DFT_R2C);",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "AVERROR",
          "new_api": "ff_get_audio_buffer",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "ff_get_audio_buffer(ctx->inputs[0], seg->fft_length)",
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    seg->sum    = ff_get_audio_buffer(ctx->inputs[0], seg->fft_length);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "ff_get_audio_buffer",
          "new_api": "AVERROR",
          "old_text": "ff_get_audio_buffer(ctx->inputs[0], seg->input_size)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    seg->input  = ff_get_audio_buffer(ctx->inputs[0], seg->input_size);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "FFMIN",
          "new_api": "init_segment",
          "old_text": "FFMIN(step, (left + part_size - 1) / part_size)",
          "new_text": "init_segment(ctx, &s->seg[i], offset, nb_partitions, part_size)",
          "old_line_content": "        int nb_partitions = FFMIN(step, (left + part_size - 1) / part_size);",
          "new_line_content": "        ret = init_segment(ctx, &s->seg[i], offset, nb_partitions, part_size);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "FFMIN",
          "new_api": "ff_inlink_consume_samples",
          "old_text": "FFMIN(part_size, max_part_size)",
          "new_text": "ff_inlink_consume_samples(ctx->inputs[1], s->nb_taps, s->nb_taps, &s->in[1])",
          "old_line_content": "        part_size = FFMIN(part_size, max_part_size);",
          "new_line_content": "    ret = ff_inlink_consume_samples(ctx->inputs[1], s->nb_taps, s->nb_taps, &s->in[1]);",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "FFALIGN",
          "new_api": "av_log",
          "old_text": "FFALIGN(s->nb_taps, 4)",
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"nb_taps: %d\\n\", s->nb_taps)",
          "old_line_content": "        s->fdsp->vector_fmul_scalar(time, time, s->gain, FFALIGN(s->nb_taps, 4));",
          "new_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"nb_taps: %d\\n\", s->nb_taps);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "FFMAX",
          "new_api": "av_log",
          "old_text": "FFMAX(1, s->length * s->nb_taps)",
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"channel: %d\\n\", ch)",
          "old_line_content": "        for (i = FFMAX(1, s->length * s->nb_taps); i < s->nb_taps; i++)",
          "new_line_content": "        av_log(ctx, AV_LOG_DEBUG, \"channel: %d\\n\", ch);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "memset",
          "new_api": "av_rdft_calc",
          "old_text": "memset(block, 0, sizeof(*block) * seg->fft_length)",
          "new_text": "av_rdft_calc(seg->rdft[0], block)",
          "old_line_content": "                memset(block, 0, sizeof(*block) * seg->fft_length);",
          "new_line_content": "                av_rdft_calc(seg->rdft[0], block);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "ff_inlink_queued_samples",
          "new_api": "av_log",
          "old_text": "ff_inlink_queued_samples(link)",
          "new_text": "av_log(ctx, AV_LOG_ERROR, \"Too big number of coefficients: %d > %d.\\n\", nb_taps, max_nb_taps)",
          "old_line_content": "    nb_taps = ff_inlink_queued_samples(link);",
          "new_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Too big number of coefficients: %d > %d.\\n\", nb_taps, max_nb_taps);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "ff_outlink_frame_wanted",
          "new_api": "ff_inlink_request_frame",
          "old_text": "ff_outlink_frame_wanted(ctx->outputs[0])",
          "new_text": "ff_inlink_request_frame(ctx->inputs[1])",
          "old_line_content": "            if (ff_outlink_frame_wanted(ctx->outputs[0]))",
          "new_line_content": "                ff_inlink_request_frame(ctx->inputs[1]);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "AVERROR",
          "new_api": "ff_set_common_channel_layouts",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "ff_set_common_channel_layouts(ctx, layouts)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        ret = ff_set_common_channel_layouts(ctx, layouts);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "ff_set_common_formats",
          "new_api": "ff_all_samplerates",
          "old_text": "ff_set_common_formats(ctx, formats)",
          "new_text": "ff_all_samplerates()",
          "old_line_content": "    if ((ret = ff_set_common_formats(ctx, formats)) < 0)",
          "new_line_content": "    formats = ff_all_samplerates();",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "av_rdft_end",
          "new_api": "av_freep",
          "old_text": "av_rdft_end(seg->rdft[ch])",
          "new_text": "av_freep(&seg->rdft)",
          "old_line_content": "            av_rdft_end(seg->rdft[ch]);",
          "new_line_content": "    av_freep(&seg->rdft);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "av_rdft_end",
          "new_api": "av_freep",
          "old_text": "av_rdft_end(seg->irdft[ch])",
          "new_text": "av_freep(&seg->irdft)",
          "old_line_content": "            av_rdft_end(seg->irdft[ch]);",
          "new_line_content": "    av_freep(&seg->irdft);",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "av_freep",
          "new_api": "av_frame_free",
          "old_text": "av_freep(&seg->output_offset)",
          "new_text": "av_frame_free(&seg->block)",
          "old_line_content": "    av_freep(&seg->output_offset);",
          "new_line_content": "    av_frame_free(&seg->block);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "av_freep",
          "new_api": "av_frame_free",
          "old_text": "av_freep(&seg->part_index)",
          "new_text": "av_frame_free(&seg->sum)",
          "old_line_content": "    av_freep(&seg->part_index);",
          "new_line_content": "    av_frame_free(&seg->sum);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "uninit_segment",
          "new_api": "av_freep",
          "old_text": "uninit_segment(ctx, &s->seg[i])",
          "new_text": "av_freep(&s->fdsp)",
          "old_line_content": "        uninit_segment(ctx, &s->seg[i]);",
          "new_line_content": "    av_freep(&s->fdsp);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "av_frame_free",
          "new_api": "av_freep",
          "old_text": "av_frame_free(&s->in[1])",
          "new_text": "av_freep(&ctx->output_pads[i].name)",
          "old_line_content": "    av_frame_free(&s->in[1]);",
          "new_line_content": "        av_freep(&ctx->output_pads[i].name);",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "av_inv_q",
          "new_api": "ff_get_video_buffer",
          "old_text": "av_inv_q(outlink->frame_rate)",
          "new_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "old_line_content": "    outlink->time_base = av_inv_q(outlink->frame_rate);",
          "new_line_content": "    s->video = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "av_frame_free",
          "new_api": "AVERROR",
          "old_text": "av_frame_free(&s->video)",
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    av_frame_free(&s->video);",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "AVERROR",
          "new_api": "ff_insert_outpad",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "ff_insert_outpad(ctx, 0, &pad)",
          "old_line_content": "            return AVERROR(ENOMEM);",
          "new_line_content": "    ret = ff_insert_outpad(ctx, 0, &pad);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "AVERROR",
          "new_api": "ff_afir_init_x86",
          "old_text": "AVERROR(ENOMEM)",
          "new_text": "ff_afir_init_x86(s)",
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        ff_afir_init_x86(s);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 518,
          "old_api": null,
          "new_api": "FF_FILTER_FORWARD_STATUS_BACK_ALL",
          "old_text": null,
          "new_text": "FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[0], ctx)",
          "old_line_content": "    int ret, status;",
          "new_line_content": "    FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[0], ctx);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "FF_FILTER_FORWARD_STATUS_BACK_ALL",
          "old_text": null,
          "new_text": "FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[1], ctx)",
          "old_line_content": "",
          "new_line_content": "        FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[1], ctx);",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "check_ir",
          "old_text": null,
          "new_text": "check_ir(ctx->inputs[1], ir)",
          "old_line_content": "    if (!s->eof_coeffs) {",
          "new_line_content": "        ret = check_ir(ctx->inputs[1], ir);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "ff_outlink_get_status",
          "old_text": null,
          "new_text": "ff_outlink_get_status(ctx->inputs[1])",
          "old_line_content": "        if (ret < 0)",
          "new_line_content": "        if (ff_outlink_get_status(ctx->inputs[1]) == AVERROR_EOF)",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "ff_outlink_frame_wanted",
          "old_text": null,
          "new_text": "ff_outlink_frame_wanted(ctx->outputs[0])",
          "old_line_content": "            s->eof_coeffs = 1;",
          "new_line_content": "            if (ff_outlink_frame_wanted(ctx->outputs[0]))",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "ff_inlink_request_frame",
          "old_text": null,
          "new_text": "ff_inlink_request_frame(ctx->inputs[1])",
          "old_line_content": "",
          "new_line_content": "                ff_inlink_request_frame(ctx->inputs[1]);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "ff_outlink_frame_wanted",
          "old_text": null,
          "new_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "old_line_content": "        if (!s->eof_coeffs) {",
          "new_line_content": "            else if (s->response && ff_outlink_frame_wanted(ctx->outputs[1]))",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "convert_coeffs",
          "old_text": null,
          "new_text": "convert_coeffs(ctx)",
          "old_line_content": "    }",
          "new_line_content": "        ret = convert_coeffs(ctx);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "ff_inlink_consume_samples",
          "old_text": null,
          "new_text": "ff_inlink_consume_samples(ctx->inputs[0], s->min_part_size, s->min_part_size, &in)",
          "old_line_content": "            return ret;",
          "new_line_content": "    ret = ff_inlink_consume_samples(ctx->inputs[0], s->min_part_size, s->min_part_size, &in);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "fir_frame",
          "old_text": null,
          "new_text": "fir_frame(s, in, outlink)",
          "old_line_content": "",
          "new_line_content": "        ret = fir_frame(s, in, outlink);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(s->pts, ctx->inputs[0]->time_base, ctx->outputs[1]->time_base)",
          "old_line_content": "",
          "new_line_content": "        int64_t new_pts = av_rescale_q(s->pts, ctx->inputs[0]->time_base, ctx->outputs[1]->time_base);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "ff_outlink_frame_wanted",
          "old_text": null,
          "new_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "old_line_content": "        int64_t old_pts = s->video->pts;",
          "new_line_content": "        if (ff_outlink_frame_wanted(ctx->outputs[1]) && old_pts < new_pts) {",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "av_frame_clone",
          "old_text": null,
          "new_text": "av_frame_clone(s->video)",
          "old_line_content": "",
          "new_line_content": "            return ff_filter_frame(ctx->outputs[1], av_frame_clone(s->video));",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "ff_inlink_queued_samples",
          "old_text": null,
          "new_text": "ff_inlink_queued_samples(ctx->inputs[0])",
          "old_line_content": "        }",
          "new_line_content": "    if (ff_inlink_queued_samples(ctx->inputs[0]) >= s->min_part_size) {",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "ff_filter_set_ready",
          "old_text": null,
          "new_text": "ff_filter_set_ready(ctx, 10)",
          "old_line_content": "    }",
          "new_line_content": "        ff_filter_set_ready(ctx, 10);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "ff_inlink_acknowledge_status",
          "old_text": null,
          "new_text": "ff_inlink_acknowledge_status(ctx->inputs[0], &status, &pts)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (ff_inlink_acknowledge_status(ctx->inputs[0], &status, &pts)) {",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": null,
          "new_api": "ff_outlink_set_status",
          "old_text": null,
          "new_text": "ff_outlink_set_status(ctx->outputs[0], status, pts)",
          "old_line_content": "",
          "new_line_content": "            ff_outlink_set_status(ctx->outputs[0], status, pts);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "ff_outlink_set_status",
          "old_text": null,
          "new_text": "ff_outlink_set_status(ctx->outputs[1], status, pts)",
          "old_line_content": "        if (status == AVERROR_EOF) {",
          "new_line_content": "                ff_outlink_set_status(ctx->outputs[1], status, pts);",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "ff_outlink_frame_wanted",
          "old_text": null,
          "new_text": "ff_outlink_frame_wanted(ctx->outputs[0])",
          "old_line_content": "        }",
          "new_line_content": "    if (ff_outlink_frame_wanted(ctx->outputs[0]) &&",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "ff_outlink_get_status",
          "old_text": null,
          "new_text": "ff_outlink_get_status(ctx->inputs[0])",
          "old_line_content": "    }",
          "new_line_content": "        !ff_outlink_get_status(ctx->inputs[0])) {",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "ff_inlink_request_frame",
          "old_text": null,
          "new_text": "ff_inlink_request_frame(ctx->inputs[0])",
          "old_line_content": "",
          "new_line_content": "        ff_inlink_request_frame(ctx->inputs[0]);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "ff_outlink_frame_wanted",
          "old_text": null,
          "new_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "old_line_content": "    }",
          "new_line_content": "        ff_outlink_frame_wanted(ctx->outputs[1]) &&",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "ff_outlink_get_status",
          "old_text": null,
          "new_text": "ff_outlink_get_status(ctx->inputs[0])",
          "old_line_content": "",
          "new_line_content": "        !ff_outlink_get_status(ctx->inputs[0])) {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "ff_inlink_request_frame",
          "old_text": null,
          "new_text": "ff_inlink_request_frame(ctx->inputs[0])",
          "old_line_content": "    if (s->response &&",
          "new_line_content": "        ff_inlink_request_frame(ctx->inputs[0]);",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src))",
          "old_line_content": "        } else {",
          "new_line_content": "            memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src));",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(sum, 0, sizeof(*sum) * seg->fft_length)",
          "old_line_content": "",
          "new_line_content": "        memset(sum, 0, sizeof(*sum) * seg->fft_length);",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(block + seg->part_size, 0, sizeof(*block) * (seg->fft_length - seg->part_size))",
          "old_line_content": "        block = (float *)seg->block->extended_data[ch] + seg->part_index[ch] * seg->block_size;",
          "new_line_content": "        memset(block + seg->part_size, 0, sizeof(*block) * (seg->fft_length - seg->part_size));",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(block, src, sizeof(*src) * seg->part_size)",
          "old_line_content": "",
          "new_line_content": "        memcpy(block, src, sizeof(*src) * seg->part_size);",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": null,
          "new_api": "av_rdft_calc",
          "old_text": null,
          "new_text": "av_rdft_calc(seg->rdft[ch], block)",
          "old_line_content": "",
          "new_line_content": "        av_rdft_calc(seg->rdft[ch], block);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "ff_make_format_list",
          "old_text": null,
          "new_text": "ff_make_format_list(pix_fmts)",
          "old_line_content": "",
          "new_line_content": "        formats = ff_make_format_list(pix_fmts);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "ff_formats_ref",
          "old_text": null,
          "new_text": "ff_formats_ref(formats, &videolink->in_formats)",
          "old_line_content": "    if (s->response) {",
          "new_line_content": "        if ((ret = ff_formats_ref(formats, &videolink->in_formats)) < 0)",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "ff_all_channel_counts",
          "old_text": null,
          "new_text": "ff_all_channel_counts()",
          "old_line_content": "            return ret;",
          "new_line_content": "    layouts = ff_all_channel_counts();",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "fcmul_add",
          "old_text": null,
          "new_text": "s->fcmul_add(sum, block, (const float *)coeff, seg->part_size)",
          "old_line_content": "",
          "new_line_content": "            s->fcmul_add(sum, block, (const float *)coeff, seg->part_size);",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": null,
          "new_api": "av_rdft_calc",
          "old_text": null,
          "new_text": "av_rdft_calc(seg->irdft[ch], sum)",
          "old_line_content": "        sum[1] = sum[2 * seg->part_size];",
          "new_line_content": "        av_rdft_calc(seg->irdft[ch], sum);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "ff_add_channel_layout",
          "old_text": null,
          "new_text": "ff_add_channel_layout(&mono, AV_CH_LAYOUT_MONO)",
          "old_line_content": "    } else {",
          "new_line_content": "        ret = ff_add_channel_layout(&mono, AV_CH_LAYOUT_MONO);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "ff_channel_layouts_ref",
          "old_text": null,
          "new_text": "ff_channel_layouts_ref(layouts, &ctx->inputs[0]->out_channel_layouts)",
          "old_line_content": "        if (ret)",
          "new_line_content": "        if ((ret = ff_channel_layouts_ref(layouts, &ctx->inputs[0]->out_channel_layouts)) < 0)",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "ff_channel_layouts_ref",
          "old_text": null,
          "new_text": "ff_channel_layouts_ref(layouts, &ctx->outputs[0]->in_channel_layouts)",
          "old_line_content": "",
          "new_line_content": "        if ((ret = ff_channel_layouts_ref(layouts, &ctx->outputs[0]->in_channel_layouts)) < 0)",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst, buf, seg->part_size * sizeof(*dst))",
          "old_line_content": "",
          "new_line_content": "        memcpy(dst, buf, seg->part_size * sizeof(*dst));",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "ff_channel_layouts_ref",
          "old_text": null,
          "new_text": "ff_channel_layouts_ref(mono, &ctx->inputs[1]->out_channel_layouts)",
          "old_line_content": "            return ret;",
          "new_line_content": "        if ((ret = ff_channel_layouts_ref(mono, &ctx->inputs[1]->out_channel_layouts)) < 0)",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, sum + seg->part_size, seg->part_size * sizeof(*buf))",
          "old_line_content": "        }",
          "new_line_content": "        memcpy(buf, sum + seg->part_size, seg->part_size * sizeof(*buf));",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "ff_make_format_list",
          "old_text": null,
          "new_text": "ff_make_format_list(sample_fmts)",
          "old_line_content": "            return ret;",
          "new_line_content": "    formats = ff_make_format_list(sample_fmts);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "ff_set_common_formats",
          "old_text": null,
          "new_text": "ff_set_common_formats(ctx, formats)",
          "old_line_content": "    }",
          "new_line_content": "    if ((ret = ff_set_common_formats(ctx, formats)) < 0)",
          "content_same": false
        },
        {
          "line": 128,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src))",
          "old_line_content": "",
          "new_line_content": "        memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src));",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "ff_set_common_samplerates",
          "old_text": null,
          "new_text": "ff_set_common_samplerates(ctx, formats)",
          "old_line_content": "        return ret;",
          "new_line_content": "    return ff_set_common_samplerates(ctx, formats);",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": null,
          "new_api": "FFALIGN",
          "old_text": null,
          "new_text": "FFALIGN(out->nb_samples, 4)",
          "old_line_content": "        }",
          "new_line_content": "    s->fdsp->vector_fmul_scalar(ptr, ptr, s->wet_gain, FFALIGN(out->nb_samples, 4));",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": null,
          "new_api": "emms_c",
          "old_text": null,
          "new_text": "emms_c()",
          "old_line_content": "    }",
          "new_line_content": "    emms_c();",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": null,
          "new_api": "ff_get_audio_buffer",
          "old_text": null,
          "new_text": "ff_get_audio_buffer(outlink, in->nb_samples)",
          "old_line_content": "    AVFilterContext *ctx = outlink->src;",
          "new_line_content": "    out = ff_get_audio_buffer(outlink, in->nb_samples);",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&in)",
          "old_line_content": "",
          "new_line_content": "        av_frame_free(&in);",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": null,
          "new_api": "execute",
          "old_text": null,
          "new_text": "ctx->internal->execute(ctx, fir_channel, out, NULL, outlink->channels)",
          "old_line_content": "    if (s->pts == AV_NOPTS_VALUE)",
          "new_line_content": "    ctx->internal->execute(ctx, fir_channel, out, NULL, outlink->channels);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "av_rdft_end",
          "old_text": null,
          "new_text": "av_rdft_end(seg->rdft[ch])",
          "old_line_content": "",
          "new_line_content": "            av_rdft_end(seg->rdft[ch]);",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "av_rescale_q",
          "old_text": null,
          "new_text": "av_rescale_q(out->nb_samples, (AVRational){1, outlink->sample_rate}, outlink->time_base)",
          "old_line_content": "",
          "new_line_content": "        s->pts += av_rescale_q(out->nb_samples, (AVRational){1, outlink->sample_rate}, outlink->time_base);",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&in)",
          "old_line_content": "    if (s->pts != AV_NOPTS_VALUE)",
          "new_line_content": "    av_frame_free(&in);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "av_rdft_end",
          "old_text": null,
          "new_text": "av_rdft_end(seg->irdft[ch])",
          "old_line_content": "",
          "new_line_content": "            av_rdft_end(seg->irdft[ch]);",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&seg->output_offset)",
          "old_line_content": "    }",
          "new_line_content": "    av_freep(&seg->output_offset);",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&seg->buffer)",
          "old_line_content": "",
          "new_line_content": "    av_frame_free(&seg->buffer);",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "AV_WL32",
          "old_text": null,
          "new_text": "AV_WL32(p, color)",
          "old_line_content": "        for (char_y = 0; char_y < font_height; char_y++) {",
          "new_line_content": "                    AV_WL32(p, color);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "uninit_segment",
          "old_text": null,
          "new_text": "uninit_segment(ctx, &s->seg[i])",
          "old_line_content": "    AudioFIRContext *s = ctx->priv;",
          "new_line_content": "        uninit_segment(ctx, &s->seg[i]);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->in[1])",
          "old_line_content": "    }",
          "new_line_content": "    av_frame_free(&s->in[1]);",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(x1-x0)",
          "old_line_content": "",
          "new_line_content": "    int dx = FFABS(x1-x0);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(y1-y0)",
          "old_line_content": "static void draw_line(AVFrame *out, int x0, int y0, int x1, int y1, uint32_t color)",
          "new_line_content": "    int dy = FFABS(y1-y0), sy = y0 < y1 ? 1 : -1;",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->video)",
          "old_line_content": "",
          "new_line_content": "    av_frame_free(&s->video);",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "AV_WL32",
          "old_text": null,
          "new_text": "AV_WL32(out->data[0] + y0 * out->linesize[0] + x0 * 4, color)",
          "old_line_content": "    int err = (dx>dy ? dx : -dy) / 2, e2;",
          "new_line_content": "        AV_WL32(out->data[0] + y0 * out->linesize[0] + x0 * 4, color);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "av_inv_q",
          "old_text": null,
          "new_text": "av_inv_q(outlink->frame_rate)",
          "old_line_content": "    outlink->w = s->w;",
          "new_line_content": "    outlink->time_base = av_inv_q(outlink->frame_rate);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->video)",
          "old_line_content": "    outlink->frame_rate = s->frame_rate;",
          "new_line_content": "    av_frame_free(&s->video);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "av_strdup",
          "old_text": null,
          "new_text": "av_strdup(\"default\")",
          "old_line_content": "    int ret;",
          "new_line_content": "        .name          = av_strdup(\"default\"),",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(out->data[0], 0, s->h * out->linesize[0])",
          "old_line_content": "    char text[32];",
          "new_line_content": "    memset(out->data[0], 0, s->h * out->linesize[0]);",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": null,
          "new_api": "av_malloc_array",
          "old_text": null,
          "new_text": "av_malloc_array(s->w, sizeof(*phase))",
          "old_line_content": "",
          "new_line_content": "    phase = av_malloc_array(s->w, sizeof(*phase));",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "av_malloc_array",
          "old_text": null,
          "new_text": "av_malloc_array(s->w, sizeof(*delay))",
          "old_line_content": "",
          "new_line_content": "    delay = av_malloc_array(s->w, sizeof(*delay));",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "    };",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(s->ir_channel, 0, s->in[1]->channels - 1)",
          "old_line_content": "    if (!mag || !phase || !delay)",
          "new_line_content": "    channel = av_clip(s->ir_channel, 0, s->in[1]->channels - 1);",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "av_strdup",
          "old_text": null,
          "new_text": "av_strdup(\"filter_response\")",
          "old_line_content": "",
          "new_line_content": "            .name         = av_strdup(\"filter_response\"),",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "            .config_props = config_video,",
          "new_line_content": "            return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "cos",
          "old_text": null,
          "new_text": "cos(-x * w)",
          "old_line_content": "        double div, real_num = 0., imag_num = 0., real = 0., imag = 0.;",
          "new_line_content": "            real += cos(-x * w) * src[x];",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "sin",
          "old_text": null,
          "new_text": "sin(-x * w)",
          "old_line_content": "",
          "new_line_content": "            imag += sin(-x * w) * src[x];",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "cos",
          "old_text": null,
          "new_text": "cos(-x * w)",
          "old_line_content": "        for (x = 0; x < s->nb_taps; x++) {",
          "new_line_content": "            real_num += cos(-x * w) * src[x] * x;",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&pad.name)",
          "old_line_content": "",
          "new_line_content": "        av_freep(&pad.name);",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "atan2",
          "old_text": null,
          "new_text": "atan2(imag, real)",
          "old_line_content": "        }",
          "new_line_content": "        phase[i] = atan2(imag, real);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "ff_insert_outpad",
          "old_text": null,
          "new_text": "ff_insert_outpad(ctx, 1, &vpad)",
          "old_line_content": "    }",
          "new_line_content": "        ret = ff_insert_outpad(ctx, 1, &vpad);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "fmaxf",
          "old_text": null,
          "new_text": "fmaxf(max, mag[i])",
          "old_line_content": "        div = real * real + imag * imag;",
          "new_line_content": "        max = fmaxf(max, mag[i]);",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": null,
          "new_api": "fminf",
          "old_text": null,
          "new_text": "fminf(min_delay, delay[i])",
          "old_line_content": "        delay[i] = (real_num * real + imag_num * imag) / div;",
          "new_line_content": "        min_delay = fminf(min_delay, delay[i]);",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "av_freep",
          "old_text": null,
          "new_text": "av_freep(&vpad.name)",
          "old_line_content": "    if (s->response) {",
          "new_line_content": "            av_freep(&vpad.name);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "avpriv_float_dsp_alloc",
          "old_text": null,
          "new_text": "avpriv_float_dsp_alloc(0)",
          "old_line_content": "",
          "new_line_content": "    s->fdsp = avpriv_float_dsp_alloc(0);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(ENOMEM)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(ENOMEM);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ymag, 0, s->h - 1)",
          "old_line_content": "        int ydelay = (delay[i] - min_delay) / (max_delay - min_delay) * (s->h - 1);",
          "new_line_content": "        ymag = s->h - 1 - av_clip(ymag, 0, s->h - 1);",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(yphase, 0, s->h - 1)",
          "old_line_content": "        int yphase = (0.5 * (1. + phase[i] / M_PI)) * (s->h - 1);",
          "new_line_content": "        yphase = s->h - 1 - av_clip(yphase, 0, s->h - 1);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "av_clip",
          "old_text": null,
          "new_text": "av_clip(ydelay, 0, s->h - 1)",
          "old_line_content": "",
          "new_line_content": "        ydelay = s->h - 1 - av_clip(ydelay, 0, s->h - 1);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(i - 1, 0)",
          "old_line_content": "        if (prev_ydelay < 0)",
          "new_line_content": "        draw_line(out, i,   ymag, FFMAX(i - 1, 0),   prev_ymag, 0xFFFF00FF);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(i - 1, 0)",
          "old_line_content": "            prev_ydelay = ydelay;",
          "new_line_content": "        draw_line(out, i, yphase, FFMAX(i - 1, 0), prev_yphase, 0xFF00FF00);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(i - 1, 0)",
          "old_line_content": "",
          "new_line_content": "        draw_line(out, i, ydelay, FFMAX(i - 1, 0), prev_ydelay, 0xFF00FFFF);",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "drawtext",
          "old_text": null,
          "new_text": "drawtext(out, 2, 2, \"Max Magnitude:\", 0xDDDDDDDD)",
          "old_line_content": "    }",
          "new_line_content": "        drawtext(out, 2, 2, \"Max Magnitude:\", 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(text, sizeof(text), \"%.2f\", max)",
          "old_line_content": "",
          "new_line_content": "        snprintf(text, sizeof(text), \"%.2f\", max);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "drawtext",
          "old_text": null,
          "new_text": "drawtext(out, 15 * 8 + 2, 2, text, 0xDDDDDDDD)",
          "old_line_content": "    if (s->w > 400 && s->h > 100) {",
          "new_line_content": "        drawtext(out, 15 * 8 + 2, 2, text, 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(dry_gain)",
          "old_line_content": "#define OFFSET(x) offsetof(AudioFIRContext, x)",
          "new_line_content": "    { \"dry\",    \"set dry gain\",      OFFSET(dry_gain),   AV_OPT_TYPE_FLOAT, {.dbl=1},    0, 10, AF },",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(wet_gain)",
          "old_line_content": "",
          "new_line_content": "    { \"wet\",    \"set wet gain\",      OFFSET(wet_gain),   AV_OPT_TYPE_FLOAT, {.dbl=1},    0, 10, AF },",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(length)",
          "old_line_content": "static const AVOption afir_options[] = {",
          "new_line_content": "    { \"length\", \"set IR length\",     OFFSET(length),     AV_OPT_TYPE_FLOAT, {.dbl=1},    0,  1, AF },",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "drawtext",
          "old_text": null,
          "new_text": "drawtext(out, 15 * 8 + 2, 12, text, 0xDDDDDDDD)",
          "old_line_content": "",
          "new_line_content": "        drawtext(out, 15 * 8 + 2, 12, text, 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "drawtext",
          "old_text": null,
          "new_text": "drawtext(out, 11 * 8 + 2, 22, text, 0xDDDDDDDD)",
          "old_line_content": "",
          "new_line_content": "        drawtext(out, 11 * 8 + 2, 22, text, 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(ir_gain)",
          "old_line_content": "    {  \"peak\",  \"peak gain\",         0,                  AV_OPT_TYPE_CONST, {.i64=0},    0,  0, AF, \"gtype\" },",
          "new_line_content": "    { \"irgain\", \"set IR gain\",       OFFSET(ir_gain),    AV_OPT_TYPE_FLOAT, {.dbl=1},    0,  1, AF },",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(ir_format)",
          "old_line_content": "    {  \"dc\",    \"DC gain\",           0,                  AV_OPT_TYPE_CONST, {.i64=1},    0,  0, AF, \"gtype\" },",
          "new_line_content": "    { \"irfmt\",  \"set IR format\",     OFFSET(ir_format),  AV_OPT_TYPE_INT,   {.i64=1},    0,  1, AF, \"irfmt\" },",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "drawtext",
          "old_text": null,
          "new_text": "drawtext(out, 11 * 8 + 2, 32, text, 0xDDDDDDDD)",
          "old_line_content": "",
          "new_line_content": "        drawtext(out, 11 * 8 + 2, 32, text, 0xDDDDDDDD);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(response)",
          "old_line_content": "    {  \"mono\",  \"single channel\",    0,                  AV_OPT_TYPE_CONST, {.i64=0},    0,  0, AF, \"irfmt\" },",
          "new_line_content": "    { \"response\", \"show IR frequency response\", OFFSET(response), AV_OPT_TYPE_BOOL, {.i64=0}, 0, 1, VF },",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "OFFSET",
          "old_text": null,
          "new_text": "OFFSET(ir_channel)",
          "old_line_content": "    {  \"input\", \"same as input\",     0,                  AV_OPT_TYPE_CONST, {.i64=1},    0,  0, AF, \"irfmt\" },",
          "new_line_content": "    { \"channel\", \"set IR channel to display frequency response\", OFFSET(ir_channel), AV_OPT_TYPE_INT, {.i64=0}, 0, 1024, VF },",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(delay)",
          "old_line_content": "    }",
          "new_line_content": "    av_free(delay);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(phase)",
          "old_line_content": "",
          "new_line_content": "    av_free(phase);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "av_free",
          "old_text": null,
          "new_text": "av_free(mag)",
          "old_line_content": "end:",
          "new_line_content": "    av_free(mag);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "AVFILTER_DEFINE_CLASS",
          "old_text": null,
          "new_text": "AVFILTER_DEFINE_CLASS(afir)",
          "old_line_content": "    { NULL }",
          "new_line_content": "AVFILTER_DEFINE_CLASS(afir);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->rdft))",
          "old_line_content": "{",
          "new_line_content": "    seg->rdft  = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->rdft));",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->irdft))",
          "old_line_content": "    AudioFIRContext *s = ctx->priv;",
          "new_line_content": "    seg->irdft = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->irdft));",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "NULL_IF_CONFIG_SMALL",
          "old_text": null,
          "new_text": "NULL_IF_CONFIG_SMALL(\"Apply Finite Impulse Response filter with supplied coefficients in 2nd stream.\")",
          "old_line_content": "",
          "new_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Apply Finite Impulse Response filter with supplied coefficients in 2nd stream.\"),",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "FFALIGN",
          "old_text": null,
          "new_text": "FFALIGN(seg->fft_length, 32)",
          "old_line_content": "",
          "new_line_content": "    seg->block_size    = FFALIGN(seg->fft_length, 32);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "FFALIGN",
          "old_text": null,
          "new_text": "FFALIGN(seg->part_size + 1, 32)",
          "old_line_content": "    seg->fft_length    = part_size * 4 + 1;",
          "new_line_content": "    seg->coeff_size    = FFALIGN(seg->part_size + 1, 32);",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->part_index))",
          "old_line_content": "    seg->input_size    = offset + s->min_part_size;",
          "new_line_content": "    seg->part_index    = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->part_index));",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": null,
          "new_api": "av_calloc",
          "old_text": null,
          "new_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->output_offset))",
          "old_line_content": "    seg->input_offset  = offset;",
          "new_line_content": "    seg->output_offset = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->output_offset));",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(2 * part_size)",
          "old_line_content": "",
          "new_line_content": "        seg->irdft[ch] = av_rdft_init(av_log2(2 * part_size), IDFT_C2R);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "ff_get_audio_buffer",
          "old_text": null,
          "new_text": "ff_get_audio_buffer(ctx->inputs[0], seg->nb_partitions * seg->block_size)",
          "old_line_content": "    }",
          "new_line_content": "    seg->block  = ff_get_audio_buffer(ctx->inputs[0], seg->nb_partitions * seg->block_size);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "ff_get_audio_buffer",
          "old_text": null,
          "new_text": "ff_get_audio_buffer(ctx->inputs[0], seg->part_size)",
          "old_line_content": "",
          "new_line_content": "    seg->buffer = ff_get_audio_buffer(ctx->inputs[0], seg->part_size);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "ff_inlink_queued_samples",
          "old_text": null,
          "new_text": "ff_inlink_queued_samples(ctx->inputs[1])",
          "old_line_content": "    int ret, i, ch, n;",
          "new_line_content": "    s->nb_taps = ff_inlink_queued_samples(ctx->inputs[1]);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(s->minp)",
          "old_line_content": "    }",
          "new_line_content": "    part_size = 1 << av_log2(s->minp);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "av_log2",
          "old_text": null,
          "new_text": "av_log2(s->maxp)",
          "old_line_content": "",
          "new_line_content": "    max_part_size = 1 << av_log2(s->maxp);",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(step, (left + part_size - 1) / part_size)",
          "old_line_content": "",
          "new_line_content": "        int nb_partitions = FFMIN(step, (left + part_size - 1) / part_size);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(part_size, max_part_size)",
          "old_line_content": "        offset += nb_partitions * part_size;",
          "new_line_content": "        part_size = FFMIN(part_size, max_part_size);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "draw_response",
          "old_text": null,
          "new_text": "draw_response(ctx, s->video)",
          "old_line_content": "        return AVERROR_BUG;",
          "new_line_content": "        draw_response(ctx, s->video);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "FFABS",
          "old_text": null,
          "new_text": "FFABS(time[i])",
          "old_line_content": "            float *time = (float *)s->in[1]->extended_data[!s->one2many * ch];",
          "new_line_content": "                power += FFABS(time[i]);",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "sqrtf",
          "old_text": null,
          "new_text": "sqrtf(ch / power)",
          "old_line_content": "            for (i = 0; i < s->nb_taps; i++)",
          "new_line_content": "        s->gain = sqrtf(ch / power);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "FFMIN",
          "old_text": null,
          "new_text": "FFMIN(s->gain * s->ir_gain, 1.f)",
          "old_line_content": "        return AVERROR_BUG;",
          "new_line_content": "    s->gain = FFMIN(s->gain * s->ir_gain, 1.f);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"power %f, gain %f\\n\", power, s->gain)",
          "old_line_content": "    }",
          "new_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"power %f, gain %f\\n\", power, s->gain);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "FFALIGN",
          "old_text": null,
          "new_text": "FFALIGN(s->nb_taps, 4)",
          "old_line_content": "    for (ch = 0; ch < ctx->inputs[1]->channels; ch++) {",
          "new_line_content": "        s->fdsp->vector_fmul_scalar(time, time, s->gain, FFALIGN(s->nb_taps, 4));",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"nb_segments: %d\\n\", s->nb_segments)",
          "old_line_content": "    }",
          "new_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"nb_segments: %d\\n\", s->nb_segments);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "FFMAX",
          "old_text": null,
          "new_text": "FFMAX(1, s->length * s->nb_taps)",
          "old_line_content": "        float *time = (float *)s->in[1]->extended_data[!s->one2many * ch];",
          "new_line_content": "        for (i = FFMAX(1, s->length * s->nb_taps); i < s->nb_taps; i++)",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"segment: %d\\n\", segment)",
          "old_line_content": "            float *block = (float *)seg->block->extended_data[ch];",
          "new_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"segment: %d\\n\", segment);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(block, 0, sizeof(*block) * seg->fft_length)",
          "old_line_content": "                const int remaining = s->nb_taps - toffset;",
          "new_line_content": "                memset(block, 0, sizeof(*block) * seg->fft_length);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(block, time + toffset, size * sizeof(*block))",
          "old_line_content": "                const int size = remaining >= seg->part_size ? seg->part_size : remaining;",
          "new_line_content": "                memcpy(block, time + toffset, size * sizeof(*block));",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"nb_partitions: %d\\n\", seg->nb_partitions)",
          "old_line_content": "                toffset += size;",
          "new_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"nb_partitions: %d\\n\", seg->nb_partitions);",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"partition size: %d\\n\", seg->part_size)",
          "old_line_content": "            }",
          "new_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"partition size: %d\\n\", seg->part_size);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "av_log",
          "old_text": null,
          "new_text": "av_log(ctx, AV_LOG_DEBUG, \"block size: %d\\n\", seg->block_size)",
          "old_line_content": "",
          "new_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"block size: %d\\n\", seg->block_size);",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&s->in[1])",
          "old_line_content": "        }",
          "new_line_content": "    av_frame_free(&s->in[1]);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "ff_inlink_queued_samples",
          "old_text": null,
          "new_text": "ff_inlink_queued_samples(link)",
          "old_line_content": "    AudioFIRContext *s = ctx->priv;",
          "new_line_content": "    nb_taps = ff_inlink_queued_samples(link);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "    max_nb_taps = s->max_ir_len * ctx->outputs[0]->sample_rate;",
          "new_line_content": "        return AVERROR(EINVAL);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 521,
          "old_api": "FF_FILTER_FORWARD_STATUS_BACK_ALL",
          "new_api": null,
          "old_text": "FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[0], ctx)",
          "new_text": null,
          "old_line_content": "    FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[0], ctx);",
          "new_line_content": "    if (!s->eof_coeffs) {",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "FF_FILTER_FORWARD_STATUS_BACK_ALL",
          "new_api": null,
          "old_text": "FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[1], ctx)",
          "new_text": null,
          "old_line_content": "        FF_FILTER_FORWARD_STATUS_BACK_ALL(ctx->outputs[1], ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "check_ir",
          "new_api": null,
          "old_text": "check_ir(ctx->inputs[1], ir)",
          "new_text": null,
          "old_line_content": "        ret = check_ir(ctx->inputs[1], ir);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "ff_outlink_get_status",
          "new_api": null,
          "old_text": "ff_outlink_get_status(ctx->inputs[1])",
          "new_text": null,
          "old_line_content": "        if (ff_outlink_get_status(ctx->inputs[1]) == AVERROR_EOF)",
          "new_line_content": "        if (!s->eof_coeffs) {",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "ff_inlink_request_frame",
          "new_api": null,
          "old_text": "ff_inlink_request_frame(ctx->inputs[1])",
          "new_text": null,
          "old_line_content": "                ff_inlink_request_frame(ctx->inputs[1]);",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "ff_outlink_frame_wanted",
          "new_api": null,
          "old_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "new_text": null,
          "old_line_content": "            else if (s->response && ff_outlink_frame_wanted(ctx->outputs[1]))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "ff_inlink_request_frame",
          "new_api": null,
          "old_text": "ff_inlink_request_frame(ctx->inputs[1])",
          "new_text": null,
          "old_line_content": "                ff_inlink_request_frame(ctx->inputs[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "convert_coeffs",
          "new_api": null,
          "old_text": "convert_coeffs(ctx)",
          "new_text": null,
          "old_line_content": "        ret = convert_coeffs(ctx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "ff_inlink_consume_samples",
          "new_api": null,
          "old_text": "ff_inlink_consume_samples(ctx->inputs[0], s->min_part_size, s->min_part_size, &in)",
          "new_text": null,
          "old_line_content": "    ret = ff_inlink_consume_samples(ctx->inputs[0], s->min_part_size, s->min_part_size, &in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "fir_frame",
          "new_api": null,
          "old_text": "fir_frame(s, in, outlink)",
          "new_text": null,
          "old_line_content": "        ret = fir_frame(s, in, outlink);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(s->pts, ctx->inputs[0]->time_base, ctx->outputs[1]->time_base)",
          "new_text": null,
          "old_line_content": "        int64_t new_pts = av_rescale_q(s->pts, ctx->inputs[0]->time_base, ctx->outputs[1]->time_base);",
          "new_line_content": "            s->video->pts = new_pts;",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "ff_outlink_frame_wanted",
          "new_api": null,
          "old_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "new_text": null,
          "old_line_content": "        if (ff_outlink_frame_wanted(ctx->outputs[1]) && old_pts < new_pts) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "av_frame_clone",
          "new_api": null,
          "old_text": "av_frame_clone(s->video)",
          "new_text": null,
          "old_line_content": "            return ff_filter_frame(ctx->outputs[1], av_frame_clone(s->video));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "ff_inlink_queued_samples",
          "new_api": null,
          "old_text": "ff_inlink_queued_samples(ctx->inputs[0])",
          "new_text": null,
          "old_line_content": "    if (ff_inlink_queued_samples(ctx->inputs[0]) >= s->min_part_size) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "ff_filter_set_ready",
          "new_api": null,
          "old_text": "ff_filter_set_ready(ctx, 10)",
          "new_text": null,
          "old_line_content": "        ff_filter_set_ready(ctx, 10);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "ff_inlink_acknowledge_status",
          "new_api": null,
          "old_text": "ff_inlink_acknowledge_status(ctx->inputs[0], &status, &pts)",
          "new_text": null,
          "old_line_content": "    if (ff_inlink_acknowledge_status(ctx->inputs[0], &status, &pts)) {",
          "new_line_content": "            if (s->response)",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "ff_outlink_set_status",
          "new_api": null,
          "old_text": "ff_outlink_set_status(ctx->outputs[0], status, pts)",
          "new_text": null,
          "old_line_content": "            ff_outlink_set_status(ctx->outputs[0], status, pts);",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "ff_outlink_set_status",
          "new_api": null,
          "old_text": "ff_outlink_set_status(ctx->outputs[1], status, pts)",
          "new_text": null,
          "old_line_content": "                ff_outlink_set_status(ctx->outputs[1], status, pts);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "ff_outlink_frame_wanted",
          "new_api": null,
          "old_text": "ff_outlink_frame_wanted(ctx->outputs[0])",
          "new_text": null,
          "old_line_content": "    if (ff_outlink_frame_wanted(ctx->outputs[0]) &&",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "ff_outlink_get_status",
          "new_api": null,
          "old_text": "ff_outlink_get_status(ctx->inputs[0])",
          "new_text": null,
          "old_line_content": "        !ff_outlink_get_status(ctx->inputs[0])) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "ff_inlink_request_frame",
          "new_api": null,
          "old_text": "ff_inlink_request_frame(ctx->inputs[0])",
          "new_text": null,
          "old_line_content": "        ff_inlink_request_frame(ctx->inputs[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "ff_outlink_frame_wanted",
          "new_api": null,
          "old_text": "ff_outlink_frame_wanted(ctx->outputs[1])",
          "new_text": null,
          "old_line_content": "        ff_outlink_frame_wanted(ctx->outputs[1]) &&",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "ff_outlink_get_status",
          "new_api": null,
          "old_text": "ff_outlink_get_status(ctx->inputs[0])",
          "new_text": null,
          "old_line_content": "        !ff_outlink_get_status(ctx->inputs[0])) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "ff_inlink_request_frame",
          "new_api": null,
          "old_text": "ff_inlink_request_frame(ctx->inputs[0])",
          "new_text": null,
          "old_line_content": "        ff_inlink_request_frame(ctx->inputs[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(dst, 0, sizeof(*dst) * seg->part_size)",
          "new_text": null,
          "old_line_content": "            memset(dst, 0, sizeof(*dst) * seg->part_size);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src))",
          "new_text": null,
          "old_line_content": "            memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(sum, 0, sizeof(*sum) * seg->fft_length)",
          "new_text": null,
          "old_line_content": "        memset(sum, 0, sizeof(*sum) * seg->fft_length);",
          "new_line_content": "        block = (float *)seg->block->extended_data[ch] + seg->part_index[ch] * seg->block_size;",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(block + seg->part_size, 0, sizeof(*block) * (seg->fft_length - seg->part_size))",
          "new_text": null,
          "old_line_content": "        memset(block + seg->part_size, 0, sizeof(*block) * (seg->fft_length - seg->part_size));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 94,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(block, src, sizeof(*src) * seg->part_size)",
          "new_text": null,
          "old_line_content": "        memcpy(block, src, sizeof(*src) * seg->part_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": "av_rdft_calc",
          "new_api": null,
          "old_text": "av_rdft_calc(seg->rdft[ch], block)",
          "new_text": null,
          "old_line_content": "        av_rdft_calc(seg->rdft[ch], block);",
          "new_line_content": "        block[2 * seg->part_size] = block[1];",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "ff_make_format_list",
          "new_api": null,
          "old_text": "ff_make_format_list(pix_fmts)",
          "new_text": null,
          "old_line_content": "        formats = ff_make_format_list(pix_fmts);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "ff_formats_ref",
          "new_api": null,
          "old_text": "ff_formats_ref(formats, &videolink->in_formats)",
          "new_text": null,
          "old_line_content": "        if ((ret = ff_formats_ref(formats, &videolink->in_formats)) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "ff_all_channel_counts",
          "new_api": null,
          "old_text": "ff_all_channel_counts()",
          "new_text": null,
          "old_line_content": "    layouts = ff_all_channel_counts();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "fcmul_add",
          "new_api": null,
          "old_text": "s->fcmul_add(sum, block, (const float *)coeff, seg->part_size)",
          "new_text": null,
          "old_line_content": "            s->fcmul_add(sum, block, (const float *)coeff, seg->part_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "ff_set_common_channel_layouts",
          "new_api": null,
          "old_text": "ff_set_common_channel_layouts(ctx, layouts)",
          "new_text": null,
          "old_line_content": "        ret = ff_set_common_channel_layouts(ctx, layouts);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": "av_rdft_calc",
          "new_api": null,
          "old_text": "av_rdft_calc(seg->irdft[ch], sum)",
          "new_text": null,
          "old_line_content": "        av_rdft_calc(seg->irdft[ch], sum);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "ff_add_channel_layout",
          "new_api": null,
          "old_text": "ff_add_channel_layout(&mono, AV_CH_LAYOUT_MONO)",
          "new_text": null,
          "old_line_content": "        ret = ff_add_channel_layout(&mono, AV_CH_LAYOUT_MONO);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "ff_channel_layouts_ref",
          "new_api": null,
          "old_text": "ff_channel_layouts_ref(layouts, &ctx->inputs[0]->out_channel_layouts)",
          "new_text": null,
          "old_line_content": "        if ((ret = ff_channel_layouts_ref(layouts, &ctx->inputs[0]->out_channel_layouts)) < 0)",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "ff_channel_layouts_ref",
          "new_api": null,
          "old_text": "ff_channel_layouts_ref(layouts, &ctx->outputs[0]->in_channel_layouts)",
          "new_text": null,
          "old_line_content": "        if ((ret = ff_channel_layouts_ref(layouts, &ctx->outputs[0]->in_channel_layouts)) < 0)",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "ff_channel_layouts_ref",
          "new_api": null,
          "old_text": "ff_channel_layouts_ref(mono, &ctx->inputs[1]->out_channel_layouts)",
          "new_text": null,
          "old_line_content": "        if ((ret = ff_channel_layouts_ref(mono, &ctx->inputs[1]->out_channel_layouts)) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, sum + seg->part_size, seg->part_size * sizeof(*buf))",
          "new_text": null,
          "old_line_content": "        memcpy(buf, sum + seg->part_size, seg->part_size * sizeof(*buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "ff_make_format_list",
          "new_api": null,
          "old_text": "ff_make_format_list(sample_fmts)",
          "new_text": null,
          "old_line_content": "    formats = ff_make_format_list(sample_fmts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src))",
          "new_text": null,
          "old_line_content": "        memmove(src, src + s->min_part_size, (seg->input_size - s->min_part_size) * sizeof(*src));",
          "new_line_content": "            ptr[n] += dst[n];",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "ff_all_samplerates",
          "new_api": null,
          "old_text": "ff_all_samplerates()",
          "new_text": null,
          "old_line_content": "    formats = ff_all_samplerates();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "ff_set_common_samplerates",
          "new_api": null,
          "old_text": "ff_set_common_samplerates(ctx, formats)",
          "new_text": null,
          "old_line_content": "    return ff_set_common_samplerates(ctx, formats);",
          "new_line_content": "static int config_output(AVFilterLink *outlink)",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "FFALIGN",
          "new_api": null,
          "old_text": "FFALIGN(out->nb_samples, 4)",
          "new_text": null,
          "old_line_content": "    s->fdsp->vector_fmul_scalar(ptr, ptr, s->wet_gain, FFALIGN(out->nb_samples, 4));",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "emms_c",
          "new_api": null,
          "old_text": "emms_c()",
          "new_text": null,
          "old_line_content": "    emms_c();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&in)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    if (s->pts == AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "execute",
          "new_api": null,
          "old_text": "ctx->internal->execute(ctx, fir_channel, out, NULL, outlink->channels)",
          "new_text": null,
          "old_line_content": "    ctx->internal->execute(ctx, fir_channel, out, NULL, outlink->channels);",
          "new_line_content": "    if (s->pts != AV_NOPTS_VALUE)",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "av_rescale_q",
          "new_api": null,
          "old_text": "av_rescale_q(out->nb_samples, (AVRational){1, outlink->sample_rate}, outlink->time_base)",
          "new_text": null,
          "old_line_content": "        s->pts += av_rescale_q(out->nb_samples, (AVRational){1, outlink->sample_rate}, outlink->time_base);",
          "new_line_content": "    s->in[0] = NULL;",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&seg->rdft)",
          "new_text": null,
          "old_line_content": "    av_freep(&seg->rdft);",
          "new_line_content": "        for (int ch = 0; ch < s->nb_channels; ch++) {",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "ff_filter_frame",
          "new_api": null,
          "old_text": "ff_filter_frame(outlink, out)",
          "new_text": null,
          "old_line_content": "    return ff_filter_frame(outlink, out);",
          "new_line_content": "static void drawtext(AVFrame *pic, int x, int y, const char *txt, uint32_t color)",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&seg->coeff)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&seg->coeff);",
          "new_line_content": "    seg->input_size = 0;",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&seg->input)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&seg->input);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&seg->output)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&seg->output);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "AV_WL32",
          "new_api": null,
          "old_text": "AV_WL32(p, color)",
          "new_text": null,
          "old_line_content": "                    AV_WL32(p, color);",
          "new_line_content": "            p += pic->linesize[0] - 8 * 4;",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&s->fdsp)",
          "new_text": null,
          "old_line_content": "    av_freep(&s->fdsp);",
          "new_line_content": "    for (int i = 0; i < ctx->nb_outputs; i++)",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(x1-x0)",
          "new_text": null,
          "old_line_content": "    int dx = FFABS(x1-x0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(y1-y0)",
          "new_text": null,
          "old_line_content": "    int dy = FFABS(y1-y0), sy = y0 < y1 ? 1 : -1;",
          "new_line_content": "    for (;;) {",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&ctx->output_pads[i].name)",
          "new_text": null,
          "old_line_content": "        av_freep(&ctx->output_pads[i].name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->video)",
          "new_text": null,
          "old_line_content": "    av_frame_free(&s->video);",
          "new_line_content": "static int config_video(AVFilterLink *outlink)",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "AV_WL32",
          "new_api": null,
          "old_text": "AV_WL32(out->data[0] + y0 * out->linesize[0] + x0 * 4, color)",
          "new_text": null,
          "old_line_content": "        AV_WL32(out->data[0] + y0 * out->linesize[0] + x0 * 4, color);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "ff_get_video_buffer",
          "new_api": null,
          "old_text": "ff_get_video_buffer(outlink, outlink->w, outlink->h)",
          "new_text": null,
          "old_line_content": "    s->video = ff_get_video_buffer(outlink, outlink->w, outlink->h);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "av_strdup",
          "new_api": null,
          "old_text": "av_strdup(\"default\")",
          "new_text": null,
          "old_line_content": "        .name          = av_strdup(\"default\"),",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(s->w, sizeof(*phase))",
          "new_text": null,
          "old_line_content": "    phase = av_malloc_array(s->w, sizeof(*phase));",
          "new_line_content": "    if (!mag || !phase || !delay)",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(s->w, sizeof(*mag))",
          "new_text": null,
          "old_line_content": "    mag = av_malloc_array(s->w, sizeof(*mag));",
          "new_line_content": "        goto end;",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "av_malloc_array",
          "new_api": null,
          "old_text": "av_malloc_array(s->w, sizeof(*delay))",
          "new_text": null,
          "old_line_content": "    delay = av_malloc_array(s->w, sizeof(*delay));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "        vpad = (AVFilterPad){",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(s->ir_channel, 0, s->in[1]->channels - 1)",
          "new_text": null,
          "old_line_content": "    channel = av_clip(s->ir_channel, 0, s->in[1]->channels - 1);",
          "new_line_content": "        double w = i * M_PI / (s->w - 1);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "av_strdup",
          "new_api": null,
          "old_text": "av_strdup(\"filter_response\")",
          "new_text": null,
          "old_line_content": "            .name         = av_strdup(\"filter_response\"),",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "sin",
          "new_api": null,
          "old_text": "sin(-x * w)",
          "new_text": null,
          "old_line_content": "            imag += sin(-x * w) * src[x];",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "cos",
          "new_api": null,
          "old_text": "cos(-x * w)",
          "new_text": null,
          "old_line_content": "            real_num += cos(-x * w) * src[x] * x;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "ff_insert_outpad",
          "new_api": null,
          "old_text": "ff_insert_outpad(ctx, 0, &pad)",
          "new_text": null,
          "old_line_content": "    ret = ff_insert_outpad(ctx, 0, &pad);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&pad.name)",
          "new_text": null,
          "old_line_content": "        av_freep(&pad.name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "hypot",
          "new_api": null,
          "old_text": "hypot(real, imag)",
          "new_text": null,
          "old_line_content": "        mag[i] = hypot(real, imag);",
          "new_line_content": "        delay[i] = (real_num * real + imag_num * imag) / div;",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "ff_insert_outpad",
          "new_api": null,
          "old_text": "ff_insert_outpad(ctx, 1, &vpad)",
          "new_text": null,
          "old_line_content": "        ret = ff_insert_outpad(ctx, 1, &vpad);",
          "new_line_content": "            return ret;",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "fmaxf",
          "new_api": null,
          "old_text": "fmaxf(max, mag[i])",
          "new_text": null,
          "old_line_content": "        max = fmaxf(max, mag[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "fminf",
          "new_api": null,
          "old_text": "fminf(min_delay, delay[i])",
          "new_text": null,
          "old_line_content": "        min_delay = fminf(min_delay, delay[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "fmaxf",
          "new_api": null,
          "old_text": "fmaxf(max_delay, delay[i])",
          "new_text": null,
          "old_line_content": "        max_delay = fmaxf(max_delay, delay[i]);",
          "new_line_content": "    for (i = 0; i < s->w; i++) {",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "av_freep",
          "new_api": null,
          "old_text": "av_freep(&vpad.name)",
          "new_text": null,
          "old_line_content": "            av_freep(&vpad.name);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "avpriv_float_dsp_alloc",
          "new_api": null,
          "old_text": "avpriv_float_dsp_alloc(0)",
          "new_text": null,
          "old_line_content": "    s->fdsp = avpriv_float_dsp_alloc(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ymag, 0, s->h - 1)",
          "new_text": null,
          "old_line_content": "        ymag = s->h - 1 - av_clip(ymag, 0, s->h - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(yphase, 0, s->h - 1)",
          "new_text": null,
          "old_line_content": "        yphase = s->h - 1 - av_clip(yphase, 0, s->h - 1);",
          "new_line_content": "        if (prev_ymag < 0)",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "av_clip",
          "new_api": null,
          "old_text": "av_clip(ydelay, 0, s->h - 1)",
          "new_text": null,
          "old_line_content": "        ydelay = s->h - 1 - av_clip(ydelay, 0, s->h - 1);",
          "new_line_content": "            prev_ymag = ymag;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "ff_afir_init_x86",
          "new_api": null,
          "old_text": "ff_afir_init_x86(s)",
          "new_text": null,
          "old_line_content": "        ff_afir_init_x86(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(i - 1, 0)",
          "new_text": null,
          "old_line_content": "        draw_line(out, i,   ymag, FFMAX(i - 1, 0),   prev_ymag, 0xFFFF00FF);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(i - 1, 0)",
          "new_text": null,
          "old_line_content": "        draw_line(out, i, yphase, FFMAX(i - 1, 0), prev_yphase, 0xFF00FF00);",
          "new_line_content": "        prev_ymag   = ymag;",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "FFMAX",
          "new_api": null,
          "old_text": "FFMAX(i - 1, 0)",
          "new_text": null,
          "old_line_content": "        draw_line(out, i, ydelay, FFMAX(i - 1, 0), prev_ydelay, 0xFF00FFFF);",
          "new_line_content": "        prev_yphase = yphase;",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "drawtext",
          "new_api": null,
          "old_text": "drawtext(out, 2, 2, \"Max Magnitude:\", 0xDDDDDDDD)",
          "new_text": null,
          "old_line_content": "        drawtext(out, 2, 2, \"Max Magnitude:\", 0xDDDDDDDD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(wet_gain)",
          "new_text": null,
          "old_line_content": "    { \"wet\",    \"set wet gain\",      OFFSET(wet_gain),   AV_OPT_TYPE_FLOAT, {.dbl=1},    0, 10, AF },",
          "new_line_content": "    {  \"none\",  \"without auto gain\", 0,                  AV_OPT_TYPE_CONST, {.i64=-1},   0,  0, AF, \"gtype\" },",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "drawtext",
          "new_api": null,
          "old_text": "drawtext(out, 2, 12, \"Min Magnitude:\", 0xDDDDDDDD)",
          "new_text": null,
          "old_line_content": "        drawtext(out, 2, 12, \"Min Magnitude:\", 0xDDDDDDDD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(length)",
          "new_text": null,
          "old_line_content": "    { \"length\", \"set IR length\",     OFFSET(length),     AV_OPT_TYPE_FLOAT, {.dbl=1},    0,  1, AF },",
          "new_line_content": "    {  \"peak\",  \"peak gain\",         0,                  AV_OPT_TYPE_CONST, {.i64=0},    0,  0, AF, \"gtype\" },",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(gtype)",
          "new_text": null,
          "old_line_content": "    { \"gtype\",  \"set IR auto gain type\",OFFSET(gtype),   AV_OPT_TYPE_INT,   {.i64=0},   -1,  2, AF, \"gtype\" },",
          "new_line_content": "    {  \"dc\",    \"DC gain\",           0,                  AV_OPT_TYPE_CONST, {.i64=1},    0,  0, AF, \"gtype\" },",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "drawtext",
          "new_api": null,
          "old_text": "drawtext(out, 2, 22, \"Max Delay:\", 0xDDDDDDDD)",
          "new_text": null,
          "old_line_content": "        drawtext(out, 2, 22, \"Max Delay:\", 0xDDDDDDDD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(ir_gain)",
          "new_text": null,
          "old_line_content": "    { \"irgain\", \"set IR gain\",       OFFSET(ir_gain),    AV_OPT_TYPE_FLOAT, {.dbl=1},    0,  1, AF },",
          "new_line_content": "    {  \"input\", \"same as input\",     0,                  AV_OPT_TYPE_CONST, {.i64=1},    0,  0, AF, \"irfmt\" },",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "drawtext",
          "new_api": null,
          "old_text": "drawtext(out, 2, 32, \"Min Delay:\", 0xDDDDDDDD)",
          "new_text": null,
          "old_line_content": "        drawtext(out, 2, 32, \"Min Delay:\", 0xDDDDDDDD);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(text, sizeof(text), \"%.2f\", min_delay)",
          "new_text": null,
          "old_line_content": "        snprintf(text, sizeof(text), \"%.2f\", min_delay);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "drawtext",
          "new_api": null,
          "old_text": "drawtext(out, 11 * 8 + 2, 32, text, 0xDDDDDDDD)",
          "new_text": null,
          "old_line_content": "        drawtext(out, 11 * 8 + 2, 32, text, 0xDDDDDDDD);",
          "new_line_content": "end:",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(delay)",
          "new_text": null,
          "old_line_content": "    av_free(delay);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(phase)",
          "new_text": null,
          "old_line_content": "    av_free(phase);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "av_free",
          "new_api": null,
          "old_text": "av_free(mag)",
          "new_text": null,
          "old_line_content": "    av_free(mag);",
          "new_line_content": "static int init_segment(AVFilterContext *ctx, AudioFIRSegment *seg,",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(frame_rate)",
          "new_text": null,
          "old_line_content": "    { \"rate\",   \"set video rate\",    OFFSET(frame_rate), AV_OPT_TYPE_VIDEO_RATE, {.str = \"25\"}, 0, INT32_MAX, VF },",
          "new_line_content": "    { NULL }",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(minp)",
          "new_text": null,
          "old_line_content": "    { \"minp\",   \"set min partition size\", OFFSET(minp),  AV_OPT_TYPE_INT,   {.i64=8192},  16, 32768, AF },",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "OFFSET",
          "new_api": null,
          "old_text": "OFFSET(maxp)",
          "new_text": null,
          "old_line_content": "    { \"maxp\",   \"set max partition size\", OFFSET(maxp),  AV_OPT_TYPE_INT,   {.i64=8192},  16, 32768, AF },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "AVFILTER_DEFINE_CLASS",
          "new_api": null,
          "old_text": "AVFILTER_DEFINE_CLASS(afir)",
          "new_text": null,
          "old_line_content": "AVFILTER_DEFINE_CLASS(afir);",
          "new_line_content": "    .name          = \"afir\",",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "NULL_IF_CONFIG_SMALL",
          "new_api": null,
          "old_text": "NULL_IF_CONFIG_SMALL(\"Apply Finite Impulse Response filter with supplied coefficients in 2nd stream.\")",
          "new_text": null,
          "old_line_content": "    .description   = NULL_IF_CONFIG_SMALL(\"Apply Finite Impulse Response filter with supplied coefficients in 2nd stream.\"),",
          "new_line_content": "    .query_formats = query_formats,",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "av_calloc",
          "new_api": null,
          "old_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->irdft))",
          "new_text": null,
          "old_line_content": "    seg->irdft = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->irdft));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "    seg->part_size     = part_size;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "FFALIGN",
          "new_api": null,
          "old_text": "FFALIGN(seg->fft_length, 32)",
          "new_text": null,
          "old_line_content": "    seg->block_size    = FFALIGN(seg->fft_length, 32);",
          "new_line_content": "    seg->input_size    = offset + s->min_part_size;",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "FFALIGN",
          "new_api": null,
          "old_text": "FFALIGN(seg->part_size + 1, 32)",
          "new_text": null,
          "old_line_content": "    seg->coeff_size    = FFALIGN(seg->part_size + 1, 32);",
          "new_line_content": "    seg->input_offset  = offset;",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "av_calloc",
          "new_api": null,
          "old_text": "av_calloc(ctx->inputs[0]->channels, sizeof(*seg->output_offset))",
          "new_text": null,
          "old_line_content": "    seg->output_offset = av_calloc(ctx->inputs[0]->channels, sizeof(*seg->output_offset));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(2 * part_size)",
          "new_text": null,
          "old_line_content": "        seg->irdft[ch] = av_rdft_init(av_log2(2 * part_size), IDFT_C2R);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "ff_get_audio_buffer",
          "new_api": null,
          "old_text": "ff_get_audio_buffer(ctx->inputs[1], seg->nb_partitions * seg->coeff_size * 2)",
          "new_text": null,
          "old_line_content": "    seg->coeff  = ff_get_audio_buffer(ctx->inputs[1], seg->nb_partitions * seg->coeff_size * 2);",
          "new_line_content": "    if (!seg->buffer || !seg->sum || !seg->block || !seg->coeff || !seg->input || !seg->output)",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "ff_get_audio_buffer",
          "new_api": null,
          "old_text": "ff_get_audio_buffer(ctx->inputs[0], seg->part_size)",
          "new_text": null,
          "old_line_content": "    seg->output = ff_get_audio_buffer(ctx->inputs[0], seg->part_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(ENOMEM)",
          "new_text": null,
          "old_line_content": "        return AVERROR(ENOMEM);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "ff_inlink_queued_samples",
          "new_api": null,
          "old_text": "ff_inlink_queued_samples(ctx->inputs[1])",
          "new_text": null,
          "old_line_content": "    s->nb_taps = ff_inlink_queued_samples(ctx->inputs[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "        s->maxp = s->minp;",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(s->minp)",
          "new_text": null,
          "old_line_content": "    part_size = 1 << av_log2(s->minp);",
          "new_line_content": "    s->min_part_size = part_size;",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "av_log2",
          "new_api": null,
          "old_text": "av_log2(s->maxp)",
          "new_text": null,
          "old_line_content": "    max_part_size = 1 << av_log2(s->maxp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "init_segment",
          "new_api": null,
          "old_text": "init_segment(ctx, &s->seg[i], offset, nb_partitions, part_size)",
          "new_text": null,
          "old_line_content": "        ret = init_segment(ctx, &s->seg[i], offset, nb_partitions, part_size);",
          "new_line_content": "        offset += nb_partitions * part_size;",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "ff_inlink_consume_samples",
          "new_api": null,
          "old_text": "ff_inlink_consume_samples(ctx->inputs[1], s->nb_taps, s->nb_taps, &s->in[1])",
          "new_text": null,
          "old_line_content": "    ret = ff_inlink_consume_samples(ctx->inputs[1], s->nb_taps, s->nb_taps, &s->in[1]);",
          "new_line_content": "    if (ret == 0)",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "draw_response",
          "new_api": null,
          "old_text": "draw_response(ctx, s->video)",
          "new_text": null,
          "old_line_content": "        draw_response(ctx, s->video);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "FFABS",
          "new_api": null,
          "old_text": "FFABS(time[i])",
          "new_text": null,
          "old_line_content": "                power += FFABS(time[i]);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "sqrtf",
          "new_api": null,
          "old_text": "sqrtf(ch / power)",
          "new_text": null,
          "old_line_content": "        s->gain = sqrtf(ch / power);",
          "new_line_content": "        return AVERROR_BUG;",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "FFMIN",
          "new_api": null,
          "old_text": "FFMIN(s->gain * s->ir_gain, 1.f)",
          "new_text": null,
          "old_line_content": "    s->gain = FFMIN(s->gain * s->ir_gain, 1.f);",
          "new_line_content": "        float *time = (float *)s->in[1]->extended_data[!s->one2many * ch];",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"power %f, gain %f\\n\", power, s->gain)",
          "new_text": null,
          "old_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"power %f, gain %f\\n\", power, s->gain);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"nb_taps: %d\\n\", s->nb_taps)",
          "new_text": null,
          "old_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"nb_taps: %d\\n\", s->nb_taps);",
          "new_line_content": "    for (ch = 0; ch < ctx->inputs[1]->channels; ch++) {",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"nb_segments: %d\\n\", s->nb_segments)",
          "new_text": null,
          "old_line_content": "    av_log(ctx, AV_LOG_DEBUG, \"nb_segments: %d\\n\", s->nb_segments);",
          "new_line_content": "        float *time = (float *)s->in[1]->extended_data[!s->one2many * ch];",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"channel: %d\\n\", ch)",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_DEBUG, \"channel: %d\\n\", ch);",
          "new_line_content": "            AudioFIRSegment *seg = &s->seg[segment];",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"segment: %d\\n\", segment)",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"segment: %d\\n\", segment);",
          "new_line_content": "                const float scale = 1.f / seg->part_size;",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(block, time + toffset, size * sizeof(*block))",
          "new_text": null,
          "old_line_content": "                memcpy(block, time + toffset, size * sizeof(*block));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "av_rdft_calc",
          "new_api": null,
          "old_text": "av_rdft_calc(seg->rdft[0], block)",
          "new_text": null,
          "old_line_content": "                av_rdft_calc(seg->rdft[0], block);",
          "new_line_content": "                coeff[coffset].im = 0;",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"coeff_size: %d\\n\", seg->coeff_size)",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"coeff_size: %d\\n\", seg->coeff_size);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"input_size: %d\\n\", seg->input_size)",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"input_size: %d\\n\", seg->input_size);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_DEBUG, \"input_offset: %d\\n\", seg->input_offset)",
          "new_text": null,
          "old_line_content": "            av_log(ctx, AV_LOG_DEBUG, \"input_offset: %d\\n\", seg->input_offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&s->in[1])",
          "new_text": null,
          "old_line_content": "    av_frame_free(&s->in[1]);",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "av_log",
          "new_api": null,
          "old_text": "av_log(ctx, AV_LOG_ERROR, \"Too big number of coefficients: %d > %d.\\n\", nb_taps, max_nb_taps)",
          "new_text": null,
          "old_line_content": "        av_log(ctx, AV_LOG_ERROR, \"Too big number of coefficients: %d > %d.\\n\", nb_taps, max_nb_taps);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "        return AVERROR(EINVAL);",
          "new_line_content": "    return 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 38,
      "total_additions": 140,
      "total_deletions": 140,
      "total_api_changes": 318
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 318,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          122,
          123
        ]
      }
    },
    "api_calls_before": 206,
    "api_calls_after": 206,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 4,
      "total_diff_lines": 24
    }
  }
}
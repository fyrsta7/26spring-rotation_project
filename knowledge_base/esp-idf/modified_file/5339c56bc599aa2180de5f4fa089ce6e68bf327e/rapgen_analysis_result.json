{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/esp-idf/modified_file/5339c56bc599aa2180de5f4fa089ce6e68bf327e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/esp-idf/modified_file/5339c56bc599aa2180de5f4fa089ce6e68bf327e/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/esp-idf/modified_file/5339c56bc599aa2180de5f4fa089ce6e68bf327e/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/esp-idf/modified_file/5339c56bc599aa2180de5f4fa089ce6e68bf327e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 696,
          "old_api": ", bool write)\n{\n    const si",
          "new_api": ", bool is_write)\n{\n    const",
          "old_text": ", bool write)\n{\n    const si",
          "new_text": ", bool is_write)\n{\n    const",
          "old_line_content": null,
          "new_line_content": "    vSemaphoreDelete(args4.done);",
          "content_same": true
        },
        {
          "line": 703,
          "old_api": "t, NULL);\n    for (size_t n = 0; n < b",
          "new_api": "tart, NULL);\n    for (size_t n = 0; n < b",
          "old_text": "t, NULL);\n    for (size_t n = 0; n < b",
          "new_text": "tart, NULL);\n    for (size_t n = 0; n < b",
          "old_line_content": "    FILE* f = fopen(filename, (write) ? \"wb\" : \"rb\");",
          "new_line_content": "    FILE* f = fopen(filename, (is_write) ? \"wb\" : \"rb\");",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "AL",
          "new_api": "EQUAL",
          "old_text": "AL(1, fwrite(buf, buf_size, 1",
          "new_text": "EQUAL(buf_size, write(fileno(",
          "old_line_content": null,
          "new_line_content": "    gettimeofday(&tv_start, NULL);",
          "content_same": true
        },
        {
          "line": 710,
          "old_api": "ading at n=%d, eof=%d\", n,",
          "new_api": "rintf",
          "old_text": "ading at n=%d, eof=%d\", n, ",
          "new_text": "rintf(\"re",
          "old_line_content": "            TEST_ASSERT_EQUAL(1, fwrite(buf, buf_size, 1, f));",
          "new_line_content": "            TEST_ASSERT_EQUAL(buf_size, write(fileno(f), buf, buf_size));",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": ");\n            }\n        }",
          "new_api": "_FAIL",
          "old_text": ");\n            }\n        }",
          "new_text": "_FAIL();\n",
          "old_line_content": "            if (fread(buf, buf_size, 1, f) != 1) {",
          "new_line_content": "            if (read(fileno(f), buf, buf_size) != buf_size) {",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "1e3,\n                    file_size / (1024.0f * 1024.0f * t_s));\n}",
          "new_api": "s * 1e3,\n                    file_size / (1024.0f * 1024.0f * t_s));\n}",
          "old_text": " 1e3,\n                    file_size / (1024.0f * 1024.0f * t_s));\n}\n",
          "new_text": "s * 1e3,\n                    file_size / (1024.0f * 1024.0f * t_s));\n}\n",
          "old_line_content": null,
          "new_line_content": "    printf(\"%s %d bytes (block size %d) in %.3fms (%.3f MB/s)\\n\",",
          "content_same": true
        }
      ],
      "additions": [],
      "deletions": []
    },
    "api_summary": {
      "total_replacements": 6,
      "total_additions": 0,
      "total_deletions": 0,
      "total_api_changes": 6
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 6,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          699,
          709,
          726
        ]
      }
    },
    "api_calls_before": 441,
    "api_calls_after": 443,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 6,
      "total_diff_lines": 39
    }
  }
}
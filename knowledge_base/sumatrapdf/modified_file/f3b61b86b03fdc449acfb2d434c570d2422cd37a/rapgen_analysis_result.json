{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/f3b61b86b03fdc449acfb2d434c570d2422cd37a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/f3b61b86b03fdc449acfb2d434c570d2422cd37a/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/f3b61b86b03fdc449acfb2d434c570d2422cd37a/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/f3b61b86b03fdc449acfb2d434c570d2422cd37a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 67,
          "old_api": "a path, assume we're not running from \"Pr",
          "new_api": "(CSIDL_PROGRAM_F",
          "old_text": "a path, assume we're not running from \"Pr",
          "new_text": "(CSIDL_PROGRAM_F",
          "old_line_content": "    char* programFilesDir = GetSpecialFolderTemp(CSIDL_PROGRAM_FILES);",
          "new_line_content": "    char* exePath = GetExePathTemp();",
          "content_same": false
        },
        {
          "line": 78,
          "old_api": "return false;\n        }",
          "new_api": "if (path::IsSame(programF",
          "old_text": "           return false;\n        }\n   ",
          "new_text": "     if (path::IsSame(programF",
          "old_line_content": "        if (path::IsSame(programFilesDir, exePath)) {",
          "new_line_content": "    while ((baseName = (char*)path::GetBaseNameTemp(exePath)) > exePath) {",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "InAppDirTemp",
          "new_api": "th as the binary */\n        return pa",
          "old_text": "InAppDirTemp(fileName);\n ",
          "new_text": "th as the binary */\n        return pa",
          "old_line_content": "    if (IsRunningInPortableMode()) {",
          "new_line_content": "        return path::JoinTemp(gAppDataDir, fileName);",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": "oinTemp",
          "new_api": ";\n    if (!path) {\n        return nullptr",
          "old_text": "oinTemp(path, kAppName);\n    if (!path) {\n     ",
          "new_text": ";\n    if (!path) {\n        return nullptr",
          "old_line_content": "    char* path = GetSpecialFolderTemp(CSIDL_LOCAL_APPDATA, true);",
          "new_line_content": "        return path::GetPathOfFileInAppDirTemp(fileName);",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "to detect TeX edi",
          "new_api": "eturn path::JoinTemp(path, file",
          "old_text": "to detect TeX edi",
          "new_text": "eturn path::JoinTemp(path, file",
          "old_line_content": "    bool ok = dir::Create(path);",
          "new_line_content": "            path = str::JoinTemp(path, \" Preview\");",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "::Exists(exePath)) {\n            fou",
          "new_api": "FindI",
          "old_text": "::Exists(exePath)) {\n            fou",
          "new_text": "      if (found.FindI(",
          "old_line_content": "            exePath = path::JoinTemp(path, binaryFileName);",
          "new_line_content": "            char* dir = path::GetDirTemp(path);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "AppendChar",
          "new_api": "AppendFmt",
          "old_text": "     cmdline.AppendChar('%'",
          "new_text": "\n            cmdline.AppendFmt(\"%d\", line);\n        } else if (*perc",
          "old_line_content": "        cmdline.Append(s, perc - s);",
          "new_line_content": "    logf(\"BuildOpenFileCmd: path: '%s', pattern: '%s'\\n\", path, pattern);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": ";\n    DetectTextEditors(edito",
          "new_api": "return cmdline.StealDat",
          "old_text": ";\n    DetectTextEditors(edito",
          "new_text": "  return cmdline.StealDat",
          "old_line_content": "            cmdline.AppendFmt(\"%d\", line);",
          "new_line_content": "            char* fname = path::NormalizeTemp(path);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "(cmdLine, appDir)",
          "new_api": "Temp",
          "old_text": "(cmdLine, appDir)",
          "new_text": "Temp();\n    AutoCloseHandle",
          "old_line_content": "    cmdline.Append(s);",
          "new_line_content": "            cmdline.Append(perc - 1, 2);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "ce as nowadays expected)\nbool Ext",
          "new_api": "er\n// through a keyboard s",
          "old_text": "ce as nowadays expected)\nbool Ext",
          "new_text": "er\n// through a keyboard s",
          "old_line_content": "    char* cmdLine = BuildOpenFileCmd(cmd, path, 1, 1);",
          "new_line_content": "    DetectTextEditors(editors);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "yFocus = !IsFocuse",
          "new_api": "ndProc",
          "old_text": "yFocus = !IsFocuse",
          "new_text": "ndProc(HWND hwnd, UINT msg, WPARAM wp, LPARAM) ",
          "old_line_content": "    str::Free(cmdLine);",
          "new_line_content": "    logf(\"OpenFileWithTextEditor: '%s'\\n\", cmdLine);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "le",
          "new_api": "Logs",
          "old_text": "le(fileP",
          "new_text": "Logs() {\n    ByteSlice s = dbg",
          "old_line_content": "        r = Rect(work.TL(), r.Size());",
          "new_line_content": "    int captionDy = GetSystemMetrics(SM_CYCAPTION);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "AppMd5;\n\n// return hex version of md5 of app's executab",
          "new_api": "ght be relativel",
          "old_text": "AppMd5;\n\n// return hex version of md5 of app's executab",
          "new_text": "ght be relativel",
          "old_line_content": "    r.dx = std::min((int)((double)r.dy * DEF_PAGE_RATIO), work.dx);",
          "new_line_content": "    Rect work = ToRect(workArea);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "empty",
          "new_api": "turn str:",
          "old_text": "tExePathTemp();\n    if (appPath.empty())",
          "new_text": "turn str:",
          "old_line_content": "    TempStr filePath = AppGenDataFilenameTemp(\"callstacks.txt\");",
          "new_line_content": "    if (s.empty()) {",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "where\n// exe an",
          "new_api": "ly or using p",
          "old_text": " where\n// exe an",
          "new_text": "ly or using p",
          "old_line_content": "    auto appPath = GetExePathTemp();",
          "new_line_content": "        return str::Dup(gAppMd5.Get());",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "reeWstr extractedDir = PathF",
          "new_api": "ges frequently)",
          "old_text": "reeWstr extractedDir = PathF",
          "new_text": "ges frequently)",
          "old_line_content": "    ByteSlice d = file::ReadFile(appPath.data);",
          "new_line_content": "    if (appPath.empty()) {",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "str md5App = Md5",
          "new_api": "llectDir",
          "old_text": "str md5App = Md5",
          "new_text": "llectDir",
          "old_line_content": "    AutoFreeWstr md5Hex = strconv::Utf8ToWchar(md5HexA.AsView());",
          "new_line_content": "    CalcMD5Digest(d.data, d.size(), md5);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "ty",
          "new_api": ");\n    if (dirs",
          "old_text": "ty()) {\n        re",
          "new_text": ");\n    if (dirs",
          "old_line_content": "    return md5Hex.StealData();",
          "new_line_content": "    AutoFree md5HexA(_MemToHex(&md5));",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "tractedDir",
          "new_api": "empty",
          "old_text": "tractedDir",
          "new_text": ");\n    if (md5App.empty()) {\n        retur",
          "old_line_content": "        const WCHAR* s = dir.data();",
          "new_line_content": "    AutoFreeWstr md5Dir = path::Join(extractedDir.data, md5App.data);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": ");\n\n    if (file:",
          "new_api": ");\n    AutoFreeWstr dll",
          "old_text": ");\n\n    if (file:",
          "new_text": ");\n    AutoFreeWstr dll",
          "old_line_content": "        dir::RemoveAll(s);",
          "new_line_content": "        if (str::Eq(s, md5Dir.data)) {",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "WCHAR* resName = MAK",
          "new_api": "if (!ok) {\n        retur",
          "old_text": "WCHAR* resName = MAK",
          "new_text": "\n    if (!ok) {\n        retur",
          "old_line_content": "    if (extractedDir.empty()) {",
          "new_line_content": "    RemoveMd5AppDataDirectories();",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "kResource",
          "new_api": "(!res) {\n        return nullptr;\n    }",
          "old_text": "kResource(res);\n    };\n   ",
          "new_text": " (!res) {\n        return nullptr;\n    }\n  ",
          "old_line_content": "    if (file::Exists(dllPath.data)) {",
          "new_line_content": "    AutoFreeWstr md5Dir = path::Join(extractedDir.data, md5App.data);",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "e if (s > MB) {\n        s = s / MB;",
          "new_api": "= (double)size;",
          "old_text": "e if (s > MB) {\n        s = s / MB;\n    ",
          "new_text": "= (double)size;\n\n  ",
          "old_line_content": "    ok = file::WriteFile(dllPath, data, dataSize);",
          "new_line_content": "        UnlockResource(res);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "nit = \"MB\"",
          "new_api": "unit",
          "old_text": "nit = \"MB\"",
          "new_text": "     unit ",
          "old_line_content": "        unit = _TRA(\"MB\");",
          "new_line_content": "        unit = _TRA(\"GB\");",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "\";\n    }",
          "new_api": "= \"MB\";",
          "old_text": "\";\n    }\n\n",
          "new_text": " = \"MB\";\n ",
          "old_line_content": "        unit = _TRA(\"KB\");",
          "new_line_content": "        unit = _TRA(\"MB\");",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "loatWithThousandSepTemp",
          "new_api": "}",
          "old_text": "loatWithThousandSepTemp(s);\n    if (!u",
          "new_text": "    }\n\n   ",
          "old_line_content": "    char* sizestr = str::FormatFloatWithThousandSepTemp(s);",
          "new_line_content": "        unit = _TRA(\"KB\");",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": ", \"open\");\n    return true;\n}\n\n// the o",
          "new_api": "}\n    if (!file::Exist",
          "old_text": ", \"open\");\n    return true;\n}\n\n// the o",
          "new_text": "\n    }\n    if (!file::Exist",
          "old_line_content": "    char* n2 = str::FormatNumWithThousandSepTemp(size);",
          "new_line_content": "        return fmt::FormatTemp(\"%d\", size);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "*txt == '.' && str::IsDigit(*(txt + 1))",
          "new_api": "for (; *txt; txt++) {",
          "old_text": "*txt == '.' && str::IsDigit(*(txt + 1))",
          "new_text": "\n\n    for (; *txt; txt++) {\n    ",
          "old_line_content": "    char* n2 = str::FormatNumWithThousandSepTemp(size);",
          "new_line_content": "        return str::FormatTemp(\"%d\", (int)size);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "nt ExtractNextNumber(const char**",
          "new_api": "rn false;\n    }",
          "old_text": "nt ExtractNextNumber(const char**",
          "new_text": "rn false;\n    }\n\n ",
          "old_line_content": "    LaunchFile(path, nullptr, \"open\");",
          "new_line_content": "    if (!file::Exists(path)) {",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "int CompareVersion(cons",
          "new_api": "is greater than 1",
          "old_text": "\nint CompareVersion(cons",
          "new_text": " is greater than 1",
          "old_line_content": "        if (*txt == '.' && str::IsDigit(*(txt + 1))) {",
          "new_line_content": "        if (str::IsDigit(*txt)) {",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "ilePath);\n    whil",
          "new_api": "}\n    }\n\n    i",
          "old_text": "ilePath);\n    whil",
          "new_text": "    }\n    }\n\n    i",
          "old_line_content": "            if (file::Exists(path)) {",
          "new_line_content": "    for (DWORD driveMask = GetLogicalDrives(); driveMask; driveMask >>= 1) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 517,
          "old_api": null,
          "new_api": "Get",
          "old_text": null,
          "new_text": "    if (gAppMd5.Get()) {",
          "old_line_content": "    }",
          "new_line_content": "    ByteSlice s = dbghelp::GetCallstacks();",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "ePathTemp();\n    if (appPath.empty()) {\n",
          "old_line_content": "}",
          "new_line_content": "    TempStr filePath = AppGenDataFilenameTemp(\"callstacks.txt\");",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "return {};\n    }\n    ByteSl",
          "old_text": null,
          "new_text": " return {};\n    }\n    ByteSl",
          "old_line_content": "",
          "new_line_content": "    file::WriteFile(filePath, s);",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "file::R",
          "old_text": null,
          "new_text": " file::R",
          "old_line_content": "// TODO: this can be used for extracting other data",
          "new_line_content": "    s.Free();",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "ting the dire",
          "old_text": null,
          "new_text": "ting the dire",
          "old_line_content": "",
          "new_line_content": "    if (gAppMd5.Get()) {",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "ere\n// exe and i",
          "old_text": null,
          "new_text": "ere\n// exe and i",
          "old_line_content": "    }",
          "new_line_content": "    auto appPath = GetExePathTemp();",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "Wstr extractedDir = PathForF",
          "old_text": null,
          "new_text": "Wstr extractedDir = PathForF",
          "old_line_content": "    }",
          "new_line_content": "    ByteSlice d = file::ReadFile(appPath.data);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "aDir",
          "old_text": null,
          "new_text": "aDir(L\"ex",
          "old_line_content": "",
          "new_line_content": "    if (d.empty()) {",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "md5App = Md5OfA",
          "old_text": null,
          "new_text": " md5App = Md5OfA",
          "old_line_content": "}",
          "new_line_content": "    AutoFreeWstr md5Hex = strconv::Utf8ToWchar(md5HexA.AsView());",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "if",
          "old_text": null,
          "new_text": "\n    if ",
          "old_line_content": "",
          "new_line_content": "    d.Free();",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": ")) {\n        retur",
          "old_text": null,
          "new_text": ")) {\n        retur",
          "old_line_content": "// remove all directories except for ours",
          "new_line_content": "    return md5Hex.StealData();",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "o extracted unrar.dll or nullptr if c",
          "old_text": null,
          "new_text": "o extracted unrar.dll or nullptr if c",
          "old_line_content": "    }",
          "new_line_content": "    AutoFreeWstr extractedDir = PathForFileInAppDataDir(L\"extracted\");",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "ract\n// memory has t",
          "old_text": null,
          "new_text": "ract\n// memory has t",
          "old_line_content": "",
          "new_line_content": "    if (extractedDir.empty()) {",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "arDll",
          "old_text": null,
          "new_text": "arDll() {\n    RemoveMd5AppDataDirectories()",
          "old_line_content": "    }",
          "new_line_content": "    auto dirs = CollectDirsFromDirectory(extractedDir.data);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "FreeWstr ext",
          "old_text": null,
          "new_text": "FreeWstr ext",
          "old_line_content": "",
          "new_line_content": "    if (dirs.empty()) {",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "(extractedDi",
          "old_text": null,
          "new_text": " (extractedDi",
          "old_line_content": "    }",
          "new_line_content": "    AutoFreeWstr md5App = Md5OfAppExe();",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "{\n        retu",
          "old_text": null,
          "new_text": "{\n        retu",
          "old_line_content": "",
          "new_line_content": "    if (md5App.empty()) {",
          "content_same": false
        },
        {
          "line": 62,
          "old_api": null,
          "new_api": "eturn false;\n    }",
          "old_text": null,
          "new_text": "eturn false;\n    }",
          "old_line_content": "        sCacheIsPortable = 0;",
          "new_line_content": "    if (HasBeenInstalled()) {",
          "content_same": false
        },
        {
          "line": 68,
          "old_api": null,
          "new_api": "path, assume we're not running from \"Pro",
          "old_text": null,
          "new_text": " path, assume we're not running from \"Pro",
          "old_line_content": "    // if we can't get a path, assume we're not running from \"Program Files\"",
          "new_line_content": "    char* programFilesDir = GetSpecialFolderTemp(CSIDL_PROGRAM_FILES);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "ctedDir.da",
          "old_text": null,
          "new_text": "ctedDir.da",
          "old_line_content": "        }",
          "new_line_content": "        const WCHAR* s = dir.data();",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "if (file::Ex",
          "old_text": null,
          "new_text": "\n    if (file::Ex",
          "old_line_content": "",
          "new_line_content": "        dir::RemoveAll(s);",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": null,
          "new_api": "return false;\n        }\n    }",
          "old_text": null,
          "new_text": "         return false;\n        }\n    }",
          "old_line_content": "            return false;",
          "new_line_content": "        if (path::IsSame(programFilesDir, exePath)) {",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": ";\n    auto h = GetModuleHandle(nullpt",
          "old_text": null,
          "new_text": ";\n    auto h = GetModuleHandle(nullpt",
          "old_line_content": "    }",
          "new_line_content": "    AutoFreeWstr extractedDir = PathForFileInAppDataDir(L\"extracted\");",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "AR* resName = MAKEIN",
          "old_text": null,
          "new_text": "AR* resName = MAKEIN",
          "old_line_content": "",
          "new_line_content": "    if (extractedDir.empty()) {",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "DATA);\n    if",
          "old_text": null,
          "new_text": "DATA);\n    if",
          "old_line_content": "    }",
          "new_line_content": "    AutoFreeWstr md5App = Md5OfAppExe();",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "{\n        retu",
          "old_text": null,
          "new_text": "{\n        retu",
          "old_line_content": "",
          "new_line_content": "    if (md5App.empty()) {",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "ataDir;\n\nvoid SetAp",
          "old_text": null,
          "new_text": "ataDir;\n\nvoid SetAp",
          "old_line_content": "",
          "new_line_content": "    HRSRC resSrc = FindResourceW(GetModuleHandleW(nullptr), MAKEINTRESOURCEW(1), RT_RCDATA);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "ar*)LockResource(res);\n    defer {",
          "old_text": null,
          "new_text": "ar*)LockResource(res);\n    defer {\n   ",
          "old_line_content": "        const WCHAR* ret = dllPath.data;",
          "new_line_content": "    AutoFreeWstr dllPath = path::Join(md5Dir.data, unrarFileName);",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "source",
          "old_text": null,
          "new_text": "source(res);\n    };\n    DW",
          "old_line_content": "        return ret;",
          "new_line_content": "    if (file::Exists(dllPath.data)) {",
          "content_same": false
        },
        {
          "line": 98,
          "old_api": null,
          "new_api": "name used by the app in t",
          "old_text": null,
          "new_text": "name used by the app in t",
          "old_line_content": "",
          "new_line_content": "    path = path::NormalizeTemp(path);",
          "content_same": false
        },
        {
          "line": 99,
          "old_api": null,
          "new_api": "data path\n// Caller needs",
          "old_text": null,
          "new_text": "data path\n// Caller needs",
          "old_line_content": "// Generate the full path for a filename used by the app in the userdata path",
          "new_line_content": "    gAppDataDir.SetCopy(path);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "ptr;\n    }\n\n    const WCHAR",
          "old_text": null,
          "new_text": "ptr;\n    }\n\n    const WCHAR",
          "old_line_content": "    }",
          "new_line_content": "    bool ok = dir::CreateAll(md5Dir.data);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "r double KB = 1024;\ncons",
          "old_text": null,
          "new_text": "r double KB = 1024;\ncons",
          "old_line_content": "    if (!resSrc) {",
          "new_line_content": "    auto h = GetModuleHandle(nullptr);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "e)1024 * (double)10",
          "old_text": null,
          "new_text": "e)1024 * (double)10",
          "old_line_content": "        return nullptr;",
          "new_line_content": "    WCHAR* resName = MAKEINTRESOURCEW(1);",
          "content_same": false
        },
        {
          "line": 109,
          "old_api": null,
          "new_api": "PortableMode",
          "old_text": null,
          "new_text": "PortableMode()) {\n      ",
          "old_line_content": "",
          "new_line_content": "    if (gAppDataDir && dir::Exists(gAppDataDir)) {",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "B = (double)1024 * (double)1024 * (d",
          "old_text": null,
          "new_text": "B = (double)1024 * (double)1024 * (d",
          "old_line_content": "    }",
          "new_line_content": "    HRSRC resSrc = FindResourceW(h, resName, RT_RCDATA);",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": null,
          "new_api": "ppDirTemp",
          "old_text": null,
          "new_text": "ppDirTemp(fileName);\n    ",
          "old_line_content": "    }",
          "new_line_content": "    if (IsRunningInPortableMode()) {",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "to the largest size unit\n// e",
          "old_text": null,
          "new_text": "to the largest size unit\n// e",
          "old_line_content": "    }",
          "new_line_content": "    res = LoadResource(nullptr, resSrc);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "const char* unit",
          "old_text": null,
          "new_text": "const char* unit ",
          "old_line_content": "    };",
          "new_line_content": "    const char* data = (const char*)LockResource(res);",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "Temp",
          "old_text": null,
          "new_text": "Temp(path, kAppName);\n    if (!path) {\n        ",
          "old_line_content": "    }",
          "new_line_content": "    char* path = GetSpecialFolderTemp(CSIDL_LOCAL_APPDATA, true);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "GB;\n        unit = _TRA(\"GB\");",
          "old_text": null,
          "new_text": "GB;\n        unit = _TRA(\"GB\");\n",
          "old_line_content": "        return nullptr;",
          "new_line_content": "    DWORD dataSize = SizeofResource(nullptr, resSrc);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "f (s > MB) {\n        s = s / MB;",
          "old_text": null,
          "new_text": "f (s > MB) {\n        s = s / MB;\n       ",
          "old_line_content": "    }",
          "new_line_content": "    ok = file::WriteFile(dllPath, data, dataSize);",
          "content_same": false
        },
        {
          "line": 122,
          "old_api": null,
          "new_api": "lds\n    if (gIsStoreBuild) {",
          "old_text": null,
          "new_text": "lds\n    if (gIsStoreBuild) {\n ",
          "old_line_content": "    }",
          "new_line_content": "    path = path::JoinTemp(path, kAppName);",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": null,
          "new_api": "}\n    bool ok = dir::Create(",
          "old_text": null,
          "new_text": " }\n    bool ok = dir::Create(",
          "old_line_content": "        }",
          "new_line_content": "        path = str::JoinTemp(path, \" Store\");",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "(!unit) {",
          "old_text": null,
          "new_text": "(!unit) {",
          "old_line_content": "",
          "new_line_content": "constexpr double KB = 1024;",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "str;",
          "old_text": null,
          "new_text": "str;\n    ",
          "old_line_content": "// Format the file size in a short form that rounds to the largest size unit",
          "new_line_content": "constexpr double MB = (double)1024 * (double)1024;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "tr, unit)",
          "old_text": null,
          "new_text": "tr, unit)",
          "old_line_content": "// e.g. \"3.48 GB\", \"12.38 MB\", \"23 KB\"",
          "new_line_content": "constexpr double GB = (double)1024 * (double)1024 * (double)1024;",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": null,
          "new_api": "detect TeX editor",
          "old_text": null,
          "new_text": "detect TeX editor",
          "old_line_content": "    }",
          "new_line_content": "    bool ok = dir::Create(path);",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": null,
          "new_api": "entVersion\"\n\n// clang-format o",
          "old_text": null,
          "new_text": "entVersion\"\n\n// clang-format o",
          "old_line_content": "// List of rules used to detect TeX editors.",
          "new_line_content": "    return path::JoinTemp(path, fileName);",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "tWithThousandSepTemp",
          "old_text": null,
          "new_text": "tWithThousandSepTemp(s);\n    if (!unit",
          "old_line_content": "    }",
          "new_line_content": "    char* sizestr = str::FormatFloatWithThousandSepTemp(s);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "%s\", sizestr, unit);\n}\n\n// format file",
          "old_text": null,
          "new_text": " %s\", sizestr, unit);\n}\n\n// format file",
          "old_line_content": "// Format the file size in a short form that rounds to the largest size unit",
          "new_line_content": "    return fmt::FormatTemp(\"%s %s\", sizestr, unit);",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "str::FormatTemp(\"%d\", (int)size);",
          "old_text": null,
          "new_text": "str::FormatTemp(\"%d\", (int)size);\n    ",
          "old_line_content": "    }",
          "new_line_content": "    char* sizestr = str::FormatFloatWithThousandSepTemp(s);",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "2 = str::FormatNumWithThousandSepTemp(s",
          "old_text": null,
          "new_text": "2 = str::FormatNumWithThousandSepTemp(s",
          "old_line_content": "// format file size in a readable way e.g. 1348258 is shown",
          "new_line_content": "    return fmt::FormatTemp(\"%s %s\", sizestr, unit);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "false;\n    }\n    LaunchFil",
          "old_text": null,
          "new_text": " false;\n    }\n    LaunchFil",
          "old_line_content": "}",
          "new_line_content": "    char* n1 = FormatSizeSuccintTemp(size);",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "open\");\n    return true;\n}\n\n// the only",
          "old_text": null,
          "new_text": "open\");\n    return true;\n}\n\n// the only",
          "old_line_content": "",
          "new_line_content": "    char* n2 = str::FormatNumWithThousandSepTemp(size);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "sion has to m",
          "old_text": null,
          "new_text": "sion has to m",
          "old_line_content": "// format file size in a readable way e.g. 1348258 is shown",
          "new_line_content": "    return fmt::FormatTemp(\"%s (%s %s)\", n1, n2, _TRA(\"Bytes\"));",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": ")) {\n            continue;",
          "old_text": null,
          "new_text": ")) {\n            continue;\n       ",
          "old_line_content": "}",
          "new_line_content": "    char* n1 = FormatSizeSuccintNoTransTemp(size);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "t == '.' && str::IsDigit(*(txt + 1))) {",
          "old_text": null,
          "new_text": "t == '.' && str::IsDigit(*(txt + 1))) {",
          "old_line_content": "",
          "new_line_content": "    char* n2 = str::FormatNumWithThousandSepTemp(size);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "ontinue;\n        }\n        if (*txt == '\\r' &&",
          "old_text": null,
          "new_text": "ontinue;\n        }\n        if (*txt == '\\r' &&",
          "old_line_content": "// returns true if file exists",
          "new_line_content": "    return fmt::FormatTemp(\"%s (%s %s)\", n1, n2, \"Bytes\");",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "ExtractNextNumber",
          "old_text": null,
          "new_text": "ExtractNextNumber(const char** tx",
          "old_line_content": "",
          "new_line_content": "    LaunchFile(path, nullptr, \"open\");",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "than the second a",
          "old_text": null,
          "new_text": " than the second a",
          "old_line_content": "",
          "new_line_content": "    if (!str::IsDigit(*txt)) {",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "t CompareVersion(const c",
          "old_text": null,
          "new_text": "t CompareVersion(const c",
          "old_line_content": "        if (*txt == '\\r' && *(txt + 1) == '\\n') {",
          "new_line_content": "        if (*txt == '.' && str::IsDigit(*(txt + 1))) {",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "n a different removable drive\n/",
          "old_text": null,
          "new_text": "n a different removable drive\n/",
          "old_line_content": "}",
          "new_line_content": "    const char* next = str::Parse(*txt, \"%u%?.\", &val);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "changed\nbool",
          "old_text": null,
          "new_text": " changed\nbool ",
          "old_line_content": "",
          "new_line_content": "    *txt = next ? next : *txt + str::Len(*txt);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "char origDrive = pa",
          "old_text": null,
          "new_text": "\n    char origDrive = pa",
          "old_line_content": "            return v1 - v2;",
          "new_line_content": "        unsigned int v1 = ExtractNextNumber(&txt1);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "sk = GetLogicalDrives();",
          "old_text": null,
          "new_text": "sk = GetLogicalDrives();",
          "old_line_content": "        }",
          "new_line_content": "        unsigned int v2 = ExtractNextNumber(&txt2);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "/ non-file URL in",
          "old_text": null,
          "new_text": "/ non-file URL in ",
          "old_line_content": "    // only check absolute path on drives i.e. those that start with \"d:\\\"",
          "new_line_content": "    if (file::Exists(path)) {",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "IsUntrustedFil",
          "old_text": null,
          "new_text": "IsUntrustedFil",
          "old_line_content": "",
          "new_line_content": "    if (str::Len(path) < 4 || path[1] != ':') {",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "// check all parents of embedded fil",
          "old_text": null,
          "new_text": " // check all parents of embedded fil",
          "old_line_content": "                return true;",
          "new_line_content": "        if ((driveMask & 1) && szDrive[0] != origDrive && path::HasVariableDriveLetter(szDrive)) {",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "Path);\n    while (",
          "old_text": null,
          "new_text": "Path);\n    while (",
          "old_line_content": "        }",
          "new_line_content": "            if (file::Exists(path)) {",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "args.r = r;\n    args.isHover = isHo",
          "old_text": null,
          "new_text": "  args.r = r;\n    args.isHover = isHo",
          "old_line_content": "        }",
          "new_line_content": "    if (fileURL && str::Parse(fileURL, \"%S:\", &protocol)) {",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "    }",
          "new_line_content": "        if (str::Len(protocol) > 1 && !str::EqI(protocol, \"file\")) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    if (file::GetZoneIdentifier(filePath) >= URLZONE_INTERNET) {",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "            return true;",
          "new_line_content": "    while (str::Len(path) > 2 && str::FindChar(path + 2, ':')) {",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "        }",
          "new_line_content": "        *str::FindCharLast(path, ':') = '\\0';",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "    }",
          "new_line_content": "        if (file::GetZoneIdentifier(path) >= URLZONE_INTERNET) {",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "nullptr;",
          "old_text": null,
          "new_text": " nullptr;\n        ",
          "old_line_content": "        const char* regKey = rule.regKey;",
          "new_line_content": "    int n = (int)dimof(editorRules) - 1;",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "art\n            char* dir = path::GetDi",
          "old_text": null,
          "new_text": "art\n            char* dir = path::GetDi",
          "old_line_content": "        }",
          "new_line_content": "        char* path = LoggedReadRegStr2Temp(regKey, regValue);",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    DrawCloseButton(args);",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "continue;\n        }\n        //",
          "old_text": null,
          "new_text": "     continue;\n        }\n        //",
          "old_line_content": "        } else { // if (editor_rules[i].Type == BinaryPath)",
          "new_line_content": "            exePath = path::JoinTemp(dir, binaryFileName);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "xists",
          "old_text": null,
          "new_text": "xists(exePath)) {\n            found.",
          "old_line_content": "        }",
          "new_line_content": "            exePath = path::JoinTemp(path, binaryFileName);",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "erseSearchArgs);",
          "old_text": null,
          "new_text": "erseSearchArgs);\n   ",
          "old_line_content": "        // don't show inexistent paths (and don't try again for them)",
          "new_line_content": "        if (found.FindI(exePath) != -1) {",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "he\n// corresponding i",
          "old_text": null,
          "new_text": "he\n// corresponding i",
          "old_line_content": "        }",
          "new_line_content": "        if (!file::Exists(exePath)) {",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "mands.\nvoid DetectTex",
          "old_text": null,
          "new_text": "mands.\nvoid DetectTex",
          "old_line_content": "",
          "new_line_content": "            found.Append(exePath);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "t n = (int)dimof(",
          "old_text": null,
          "new_text": "t n = (int)dimof(",
          "old_line_content": "    }",
          "new_line_content": "        rule.fullPath = str::Dup(exePath);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "0; i < n; i++) {\n        TextEditor* e = &editorRul",
          "old_text": null,
          "new_text": " 0; i < n; i++) {\n        TextEditor* e = &editorRul",
          "old_line_content": "    didFindTextEditors = true;",
          "new_line_content": "        rule.openFileCmd = str::Format(\"\\\"%s\\\" %s\", exePath, inverseSearchArgs);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "if (!e->openFileC",
          "old_text": null,
          "new_text": "    if (!e->openFileC",
          "old_line_content": "}",
          "new_line_content": "        found.Append(exePath);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "nst char* pattern",
          "old_text": null,
          "new_text": "nst char* pattern",
          "old_line_content": "        TextEditor* e = &editorRules[i];",
          "new_line_content": "    FindTextEditors();",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "int line, int col)",
          "old_text": null,
          "new_text": "int line, int col)",
          "old_line_content": "        if (!e->openFileCmd) {",
          "new_line_content": "    int n = (int)dimof(editorRules);",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": ";\n    while (",
          "old_text": null,
          "new_text": ";\n    while (",
          "old_line_content": "",
          "new_line_content": "        res.Append(e);",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": null,
          "new_api": "} else if (*",
          "old_text": null,
          "new_text": "\n        } else if (*",
          "old_line_content": "        perc++;",
          "new_line_content": "    while ((perc = str::FindChar(s, '%')) != nullptr) {",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "AppendChar",
          "old_text": null,
          "new_text": "  cmdline.AppendChar('%');\n",
          "old_line_content": "",
          "new_line_content": "        cmdline.Append(s, perc - s);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "enFileWithTextEditor",
          "old_text": null,
          "new_text": "enFileWithTextEditor(",
          "old_line_content": "        } else if (*perc == 'c') {",
          "new_line_content": "            cmdline.Append(fname);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "DetectTextEditors(editors)",
          "old_text": null,
          "new_text": "   DetectTextEditors(editors)",
          "old_line_content": "        } else if (*perc == '%') {",
          "new_line_content": "            cmdline.AppendFmt(\"%d\", line);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "char* cmdLine = BuildOpen",
          "old_text": null,
          "new_text": "   char* cmdLine = BuildOpen",
          "old_line_content": "        } else {",
          "new_line_content": "            cmdline.AppendFmt(\"%d\", col);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "tEditor: '%s'\\n\", cmdLi",
          "old_text": null,
          "new_text": "tEditor: '%s'\\n\", cmdLi",
          "old_line_content": "        }",
          "new_line_content": "            cmdline.AppendChar('%');",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "dLine, appDir));",
          "old_text": null,
          "new_text": "dLine, appDir));\n",
          "old_line_content": "}",
          "new_line_content": "    cmdline.Append(s);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "dLine);\n}\n\n#define",
          "old_text": null,
          "new_text": "dLine);\n}\n\n#define ",
          "old_line_content": "void OpenFileWithTextEditor(const char* path) {",
          "new_line_content": "    return cmdline.StealData();",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "as nowadays expected)\nbool Extend",
          "old_text": null,
          "new_text": "as nowadays expected)\nbool Extend",
          "old_line_content": "    AutoCloseHandle process(LaunchProcess(cmdLine, appDir));",
          "new_line_content": "    char* cmdLine = BuildOpenFileCmd(cmd, path, 1, 1);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "yFocus = false;",
          "old_text": null,
          "new_text": "yFocus = false;",
          "old_line_content": "}",
          "new_line_content": "    char* appDir = GetExeDirTemp();",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "cus = !IsFocused(h",
          "old_text": null,
          "new_text": "cus = !IsFocused(h",
          "old_line_content": "#define UWM_DELAYED_SET_FOCUS (WM_APP + 1)",
          "new_line_content": "    str::Free(cmdLine);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "for easier debu",
          "old_text": null,
          "new_text": "for easier debu",
          "old_line_content": "        case WM_LBUTTONUP: {",
          "new_line_content": "            delayFocus = !IsFocused(hwnd);",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "ostMessageW",
          "old_text": null,
          "new_text": "ostMessageW(hwnd,",
          "old_line_content": "                }",
          "new_line_content": "                DWORD sel = Edit_GetSel(hwnd);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "}",
          "old_text": null,
          "new_text": "     }\n    ",
          "old_line_content": "                delayFocus = false;",
          "new_line_content": "                if (LOWORD(sel) == HIWORD(sel)) {",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "}\n\n        case UWM_DELAYED_SET_FOCUS: {",
          "old_text": null,
          "new_text": "    }\n\n        case UWM_DELAYED_SET_FOCUS: {\n  ",
          "old_line_content": "            }",
          "new_line_content": "                    PostMessageW(hwnd, UWM_DELAYED_SET_FOCUS, 0, 0);",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "return true;\n            }\n            retur",
          "old_text": null,
          "new_text": "   return true;\n            }\n            retur",
          "old_line_content": "        }",
          "new_line_content": "                PostMessageW(hwnd, UWM_DELAYED_SET_FOCUS, 0, 0);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "return true;",
          "old_text": null,
          "new_text": "   return true;\n   ",
          "old_line_content": "",
          "new_line_content": "            EditSelectAll(hwnd);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "612.0 / 792.0)",
          "old_text": null,
          "new_text": "612.0 / 792.0)",
          "old_line_content": "                return true;",
          "new_line_content": "            bool isCtrlBack = (VK_BACK == wp) && IsCtrlPressed() && !IsShiftPressed() && !IsAltPressed();",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "d EnsureAreaVisibility(Rect& r) {\n    // adjust",
          "old_text": null,
          "new_text": "d EnsureAreaVisibility(Rect& r) {\n    // adjust",
          "old_line_content": "            return false;",
          "new_line_content": "                PostMessageW(hwnd, UWM_DELAYED_CTRL_BACK, 0, 0);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "hat the window is neither t",
          "old_text": null,
          "new_text": "hat the window is neither t",
          "old_line_content": "",
          "new_line_content": "            EditImplementCtrlBack(hwnd);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "fCaption",
          "old_text": null,
          "new_text": "fCaption(r.x, r.y + caption",
          "old_line_content": "    if (r.dx < MIN_WIN_DX || r.dx > work.dx) {",
          "new_line_content": "    Rect work = GetWorkAreaRect(r, nullptr);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "() {\n    RECT workArea;\n    SystemParametersInfo(SPI_GETWO",
          "old_text": null,
          "new_text": "() {\n    RECT workArea;\n    SystemParametersInfo(SPI_GETWO",
          "old_line_content": "        r.dy = work.dy;",
          "new_line_content": "        r.dx = std::min((int)((double)work.dy * DEF_PAGE_RATIO), work.dx);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "ePath = AppGenDataFilenameTemp(\"calls",
          "old_text": null,
          "new_text": "ePath = AppGenDataFilenameTemp(\"calls",
          "old_line_content": "}",
          "new_line_content": "    if (halfCaption.Intersect(work).IsEmpty()) {",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "filePath",
          "old_text": null,
          "new_text": "filePath",
          "old_line_content": "",
          "new_line_content": "        r = Rect(work.TL(), r.Size());",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "data\n#if 0\n// cache because calculating md5 of the who",
          "old_text": null,
          "new_text": "data\n#if 0\n// cache because calculating md5 of the who",
          "old_line_content": "    Rect r = work;",
          "new_line_content": "    SystemParametersInfo(SPI_GETWORKAREA, 0, &workArea, 0);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "Md5;\n\n// return hex version of md5 of app's executable",
          "old_text": null,
          "new_text": "Md5;\n\n// return hex version of md5 of app's executable\n",
          "old_line_content": "    return r;",
          "new_line_content": "    r.dx = std::min((int)((double)r.dy * DEF_PAGE_RATIO), work.dx);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 514,
          "old_api": "Get",
          "new_api": null,
          "old_text": " {\n    if (gAppMd5.Get()",
          "new_text": null,
          "old_line_content": "    ByteSlice s = dbghelp::GetCallstacks();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "return s",
          "new_api": null,
          "old_text": " return s",
          "new_text": null,
          "old_line_content": "    if (s.empty()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "return {};\n    }\n    Byt",
          "new_api": null,
          "old_text": "    return {};\n    }\n    Byt",
          "new_text": null,
          "old_line_content": "    file::WriteFile(filePath, s);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "d = file",
          "new_api": null,
          "old_text": "d = file",
          "new_text": null,
          "old_line_content": "    s.Free();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "ulating the d",
          "new_api": null,
          "old_text": "ulating the d",
          "new_text": null,
          "old_line_content": "    if (gAppMd5.Get()) {",
          "new_line_content": "// nullptr if there was an error",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "cally or usin",
          "new_api": null,
          "old_text": "cally or usin",
          "new_text": null,
          "old_line_content": "        return str::Dup(gAppMd5.Get());",
          "new_line_content": "// caller needs to free the result",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "hanges frequent",
          "new_api": null,
          "old_text": "hanges frequent",
          "new_text": null,
          "old_line_content": "    if (appPath.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "DataDir",
          "new_api": null,
          "old_text": "DataDir(L",
          "new_text": null,
          "old_line_content": "    if (d.empty()) {",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "Collect",
          "new_api": null,
          "old_text": " Collect",
          "new_text": null,
          "old_line_content": "    CalcMD5Digest(d.data, d.size(), md5);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "ata);\n    if (d",
          "new_api": null,
          "old_text": "ata);\n    if (d",
          "new_text": null,
          "old_line_content": "    AutoFree md5HexA(_MemToHex(&md5));",
          "new_line_content": "    u8 md5[16]{};",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "();",
          "new_api": null,
          "old_text": "();\n    ",
          "new_text": null,
          "old_line_content": "    d.Free();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "k to extracted unrar.dll or nullptr i",
          "new_api": null,
          "old_text": "k to extracted unrar.dll or nullptr i",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr extractedDir = PathForFileInAppDataDir(L\"extracted\");",
          "new_line_content": "// locally or using pre-release builds (both cases where",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "extract\n// memory ha",
          "new_api": null,
          "old_text": "extract\n// memory ha",
          "new_text": null,
          "old_line_content": "    if (extractedDir.empty()) {",
          "new_line_content": "// exe and its md5 changes frequently)",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "UnrarDll",
          "new_api": null,
          "old_text": "UnrarDll() {\n    RemoveMd5AppDataDirectorie",
          "new_text": null,
          "old_line_content": "    auto dirs = CollectDirsFromDirectory(extractedDir.data);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "utoFreeWstr",
          "new_api": null,
          "old_text": "utoFreeWstr ",
          "new_text": null,
          "old_line_content": "    if (dirs.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "if (extracte",
          "new_api": null,
          "old_text": " if (extracte",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr md5App = Md5OfAppExe();",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": ")) {\n        r",
          "new_api": null,
          "old_text": ")) {\n        r",
          "new_text": null,
          "old_line_content": "    if (md5App.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 61,
          "old_api": "return false;",
          "new_api": null,
          "old_text": "return false;\n    ",
          "new_text": null,
          "old_line_content": "    if (HasBeenInstalled()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "empty",
          "new_api": null,
          "old_text": "xe();\n    if (md5App.empty()) {\n        re",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr md5Dir = path::Join(extractedDir.data, md5App.data);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 66,
          "old_api": "p",
          "new_api": null,
          "old_text": "p(CSIDL_PROGRAM_",
          "new_text": null,
          "old_line_content": "    char* exePath = GetExePathTemp();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "ata);\n    AutoFreeWstr",
          "new_api": null,
          "old_text": "ata);\n    AutoFreeWstr ",
          "new_text": null,
          "old_line_content": "        if (str::Eq(s, md5Dir.data)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 76,
          "old_api": "if (path::IsSame(progra",
          "new_api": null,
          "old_text": "       if (path::IsSame(progra",
          "new_text": null,
          "old_line_content": "    while ((baseName = (char*)path::GetBaseNameTemp(exePath)) > exePath) {",
          "new_line_content": "    // (or a junction to it)",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "a);\n    if (!ok) {\n        re",
          "new_api": null,
          "old_text": "a);\n    if (!ok) {\n        re",
          "new_text": null,
          "old_line_content": "    RemoveMd5AppDataDirectories();",
          "new_line_content": "// return a path on disk to extracted unrar.dll or nullptr if couldn't extract",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "= 0;\n    auto h = GetModuleHandle(nul",
          "new_api": null,
          "old_text": "= 0;\n    auto h = GetModuleHandle(nul",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr extractedDir = PathForFileInAppDataDir(L\"extracted\");",
          "new_line_content": "const WCHAR* ExractUnrarDll() {",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "_RCDATA);",
          "new_api": null,
          "old_text": "_RCDATA);\n   ",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr md5App = Md5OfAppExe();",
          "new_line_content": "        return nullptr;",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "c) {\n        r",
          "new_api": null,
          "old_text": "c) {\n        r",
          "new_text": null,
          "old_line_content": "    if (md5App.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "ppDataDir;\n\nvoid Se",
          "new_api": null,
          "old_text": "ppDataDir;\n\nvoid Se",
          "new_text": null,
          "old_line_content": "    HRSRC resSrc = FindResourceW(GetModuleHandleW(nullptr), MAKEINTRESOURCEW(1), RT_RCDATA);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "if (!res) {\n        return nullptr;\n    }",
          "new_api": null,
          "old_text": " if (!res) {\n        return nullptr;\n    }",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr md5Dir = path::Join(extractedDir.data, md5App.data);",
          "new_line_content": "        return nullptr;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "char*)LockResource(res);\n    defer {",
          "new_api": null,
          "old_text": " char*)LockResource(res);\n    defer {\n",
          "new_text": null,
          "old_line_content": "    AutoFreeWstr dllPath = path::Join(md5Dir.data, unrarFileName);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": "ilename used by the app i",
          "new_api": null,
          "old_text": "ilename used by the app i",
          "new_text": null,
          "old_line_content": "    path = path::NormalizeTemp(path);",
          "new_line_content": "static AutoFreeStr gAppDataDir;",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": "serdata path\n// Caller ne",
          "new_api": null,
          "old_text": "serdata path\n// Caller ne",
          "new_text": null,
          "old_line_content": "    gAppDataDir.SetCopy(path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "ullptr;\n    }\n\n    const WC",
          "new_api": null,
          "old_text": "ullptr;\n    }\n\n    const WC",
          "new_text": null,
          "old_line_content": "    bool ok = dir::CreateAll(md5Dir.data);",
          "new_line_content": "        return ret;",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "expr double KB = 1024;\nc",
          "new_api": null,
          "old_text": "expr double KB = 1024;\nc",
          "new_text": null,
          "old_line_content": "    auto h = GetModuleHandle(nullptr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "uble)1024 * (double",
          "new_api": null,
          "old_text": "uble)1024 * (double",
          "new_text": null,
          "old_line_content": "    WCHAR* resName = MAKEINTRESOURCEW(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": "gInPortableMode",
          "new_api": null,
          "old_text": "gInPortableMode()) {\n   ",
          "new_text": null,
          "old_line_content": "    if (gAppDataDir && dir::Exists(gAppDataDir)) {",
          "new_line_content": "        return nullptr;",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "path as the binary */\n        return",
          "new_api": null,
          "old_text": " path as the binary */\n        return",
          "new_text": null,
          "old_line_content": "        return path::JoinTemp(gAppDataDir, fileName);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "e GB = (double)1024 * (double)1024 *",
          "new_api": null,
          "old_text": "e GB = (double)1024 * (double)1024 *",
          "new_text": null,
          "old_line_content": "    HRSRC resSrc = FindResourceW(h, resName, RT_RCDATA);",
          "new_line_content": "    HGLOBAL res = 0;",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "ds to the largest size unit\n/",
          "new_api": null,
          "old_text": "ds to the largest size unit\n/",
          "new_text": null,
          "old_line_content": "    res = LoadResource(nullptr, resSrc);",
          "new_line_content": "    if (!resSrc) {",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": "ue);\n    if (!path) {\n        return null",
          "new_api": null,
          "old_text": "ue);\n    if (!path) {\n        return null",
          "new_text": null,
          "old_line_content": "        return path::GetPathOfFileInAppDirTemp(fileName);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "const char* un",
          "new_api": null,
          "old_text": "   const char* un",
          "new_text": null,
          "old_line_content": "    const char* data = (const char*)LockResource(res);",
          "new_line_content": "    if (!res) {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "s = (double)size;",
          "new_api": null,
          "old_text": " s = (double)size;\n",
          "new_text": null,
          "old_line_content": "        UnlockResource(res);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "/ GB;\n        unit = _TRA(\"GB\"",
          "new_api": null,
          "old_text": " / GB;\n        unit = _TRA(\"GB\"",
          "new_text": null,
          "old_line_content": "    DWORD dataSize = SizeofResource(nullptr, resSrc);",
          "new_line_content": "    defer {",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": "builds\n    if (gIsStoreBuild)",
          "new_api": null,
          "old_text": "builds\n    if (gIsStoreBuild) ",
          "new_text": null,
          "old_line_content": "    path = path::JoinTemp(path, kAppName);",
          "new_line_content": "    if (!path) {",
          "content_same": false
        },
        {
          "line": 128,
          "old_api": "}\n    bool ok = dir::Crea",
          "new_api": null,
          "old_text": "    }\n    bool ok = dir::Crea",
          "new_text": null,
          "old_line_content": "        path = str::JoinTemp(path, \" Store\");",
          "new_line_content": "    if (gIsStoreBuild) {",
          "content_same": false
        },
        {
          "line": 130,
          "old_api": "return path::JoinTemp(path, f",
          "new_api": null,
          "old_text": "  return path::JoinTemp(path, f",
          "new_text": null,
          "old_line_content": "            path = str::JoinTemp(path, \" Preview\");",
          "new_line_content": "        // %APPLOCALDATA%/SumatraPDF Store Preview",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "if (!unit",
          "new_api": null,
          "old_text": "if (!unit",
          "new_text": null,
          "old_line_content": "constexpr double KB = 1024;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "izestr;",
          "new_api": null,
          "old_text": "izestr;\n ",
          "new_text": null,
          "old_line_content": "constexpr double MB = (double)1024 * (double)1024;",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "zestr, un",
          "new_api": null,
          "old_text": "zestr, un",
          "new_text": null,
          "old_line_content": "constexpr double GB = (double)1024 * (double)1024 * (double)1024;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": "urrentVersion\"\n\n// clang-forma",
          "new_api": null,
          "old_text": "urrentVersion\"\n\n// clang-forma",
          "new_text": null,
          "old_line_content": "    return path::JoinTemp(path, fileName);",
          "new_line_content": "    if (!ok) {",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "un",
          "new_api": null,
          "old_text": "        un",
          "new_text": null,
          "old_line_content": "        unit = _TRA(\"GB\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "\"%s %s\", sizestr, unit);\n}\n\n// format f",
          "new_api": null,
          "old_text": "\"%s %s\", sizestr, unit);\n}\n\n// format f",
          "new_text": null,
          "old_line_content": "    return fmt::FormatTemp(\"%s %s\", sizestr, unit);",
          "new_line_content": "    if (!unit) {",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "rn str::FormatTemp(\"%d\", (int)size);",
          "new_api": null,
          "old_text": "rn str::FormatTemp(\"%d\", (int)size);\n ",
          "new_text": null,
          "old_line_content": "    char* sizestr = str::FormatFloatWithThousandSepTemp(s);",
          "new_line_content": "        unit = \"KB\";",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "* n2 = str::FormatNumWithThousandSepTem",
          "new_api": null,
          "old_text": "* n2 = str::FormatNumWithThousandSepTem",
          "new_text": null,
          "old_line_content": "    return fmt::FormatTemp(\"%s %s\", sizestr, unit);",
          "new_line_content": "    if (!unit) {",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "se;\n    }\n    if (!file::Ex",
          "new_api": null,
          "old_text": "se;\n    }\n    if (!file::Ex",
          "new_text": null,
          "old_line_content": "        return fmt::FormatTemp(\"%d\", size);",
          "new_line_content": "// as \"1.29 MB (1,348,258 Bytes)\"",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "urn false;\n    }\n    Launch",
          "new_api": null,
          "old_text": "urn false;\n    }\n    Launch",
          "new_text": null,
          "old_line_content": "    char* n1 = FormatSizeSuccintTemp(size);",
          "new_line_content": "    if (size <= 0) {",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "version has t",
          "new_api": null,
          "old_text": "version has t",
          "new_text": null,
          "old_line_content": "    return fmt::FormatTemp(\"%s (%s %s)\", n1, n2, _TRA(\"Bytes\"));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "}\n\n    for (; *txt; txt++) {",
          "new_api": null,
          "old_text": "  }\n\n    for (; *txt; txt++) {\n ",
          "new_text": null,
          "old_line_content": "        return str::FormatTemp(\"%d\", (int)size);",
          "new_line_content": "// as \"1.29 MB (1,348,258 Bytes)\"",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "txt)) {\n            continue;",
          "new_api": null,
          "old_text": "txt)) {\n            continue;\n    ",
          "new_text": null,
          "old_line_content": "    char* n1 = FormatSizeSuccintNoTransTemp(size);",
          "new_line_content": "    if (size <= 0) {",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "continue;\n        }\n        if (*txt == '\\r'",
          "new_api": null,
          "old_text": "  continue;\n        }\n        if (*txt == '\\r'",
          "new_text": null,
          "old_line_content": "    return fmt::FormatTemp(\"%s (%s %s)\", n1, n2, \"Bytes\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "eturn false;\n    }",
          "new_api": null,
          "old_text": "eturn false;\n    }",
          "new_text": null,
          "old_line_content": "    if (!file::Exists(path)) {",
          "new_line_content": "    if (!path) {",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "ter than the secon",
          "new_api": null,
          "old_text": "ter than the secon",
          "new_text": null,
          "old_line_content": "    if (!str::IsDigit(*txt)) {",
          "new_line_content": "// a valid version has to match the regex /^\\d+(\\.\\d+)*(\\r?\\n)?$/",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "300 is greater tha",
          "new_api": null,
          "old_text": "300 is greater tha",
          "new_text": null,
          "old_line_content": "        if (str::IsDigit(*txt)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "d on a different removable driv",
          "new_api": null,
          "old_text": "d on a different removable driv",
          "new_text": null,
          "old_line_content": "    const char* next = str::Parse(*txt, \"%u%?.\", &val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "een changed\nbo",
          "new_api": null,
          "old_text": "een changed\nbo",
          "new_text": null,
          "old_line_content": "    *txt = next ? next : *txt + str::Len(*txt);",
          "new_line_content": "static unsigned int ExtractNextNumber(const char** txt) {",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "\\\";\n    char origDrive =",
          "new_api": null,
          "old_text": "\\\";\n    char origDrive =",
          "new_text": null,
          "old_line_content": "        unsigned int v1 = ExtractNextNumber(&txt1);",
          "new_line_content": "//   1.2.0 is the same as 1.2",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "eMask = GetLogicalDrives",
          "new_api": null,
          "old_text": "eMask = GetLogicalDrives",
          "new_text": null,
          "old_line_content": "        unsigned int v2 = ExtractNextNumber(&txt2);",
          "new_line_content": "int CompareVersion(const char* txt1, const char* txt2) {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "a\n// non-file URL",
          "new_api": null,
          "old_text": "a\n// non-file URL ",
          "new_text": null,
          "old_line_content": "    if (file::Exists(path)) {",
          "new_line_content": "// returns true if the path has been changed",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "ol IsUntrusted",
          "new_api": null,
          "old_text": "ol IsUntrusted",
          "new_text": null,
          "old_line_content": "    if (str::Len(path) < 4 || path[1] != ':') {",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "}\n    }",
          "new_api": null,
          "old_text": "       }\n    }\n\n  ",
          "new_text": null,
          "old_line_content": "    for (DWORD driveMask = GetLogicalDrives(); driveMask; driveMask >>= 1) {",
          "new_line_content": "    // Iterate through all (other) removable drives and try to find the file there",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "// check all parents of embedded",
          "new_api": null,
          "old_text": "    // check all parents of embedded ",
          "new_text": null,
          "old_line_content": "        if ((driveMask & 1) && szDrive[0] != origDrive && path::HasVariableDriveLetter(szDrive)) {",
          "new_line_content": "    char szDrive[] = \"A:\\\\\";",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "args.r = r;\n    args.isHover = i",
          "new_api": null,
          "old_text": "\n    args.r = r;\n    args.isHover = i",
          "new_text": null,
          "old_line_content": "    if (fileURL && str::Parse(fileURL, \"%S:\", &protocol)) {",
          "new_line_content": "// an untrusted zone (e.g. by the browser that's downloaded them)",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "        if (str::Len(protocol) > 1 && !str::EqI(protocol, \"file\")) {",
          "new_line_content": "bool IsUntrustedFile(const char* filePath, const char* fileURL) {",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    if (file::GetZoneIdentifier(filePath) >= URLZONE_INTERNET) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    TempStr path = str::DupTemp(filePath);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    while (str::Len(path) > 2 && str::FindChar(path + 2, ':')) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "        *str::FindCharLast(path, ':') = '\\0';",
          "new_line_content": "    // check all parents of embedded files and ADSs as well",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "h = nullptr;",
          "new_api": null,
          "old_text": "h = nullptr;\n     ",
          "new_text": null,
          "old_line_content": "    int n = (int)dimof(editorRules) - 1;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "e part\n            char* dir = path::Ge",
          "new_api": null,
          "old_text": "e part\n            char* dir = path::Ge",
          "new_text": null,
          "old_line_content": "        char* path = LoggedReadRegStr2Temp(regKey, regValue);",
          "new_line_content": "        auto& rule = editorRules[i];",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    DrawCloseButton(args);",
          "new_line_content": "    args.hdc = hdc;",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "if (found.Fin",
          "new_api": null,
          "old_text": "\n        if (found.Fin",
          "new_text": null,
          "old_line_content": "            char* dir = path::GetDirTemp(path);",
          "new_line_content": "        const char* inverseSearchArgs = rule.inverseSearchArgs;",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "continue;\n        }",
          "new_api": null,
          "old_text": "        continue;\n        }\n       ",
          "new_text": null,
          "old_line_content": "            exePath = path::JoinTemp(dir, binaryFileName);",
          "new_line_content": "        if (rule.type == RegType::SiblingPath) {",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "inverseSearchArgs);",
          "new_api": null,
          "old_text": "inverseSearchArgs);\n",
          "new_text": null,
          "old_line_content": "        if (found.FindI(exePath) != -1) {",
          "new_line_content": "            exePath = path;",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "t the\n// correspondin",
          "new_api": null,
          "old_text": "t the\n// correspondin",
          "new_text": null,
          "old_line_content": "        if (!file::Exists(exePath)) {",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "commands.\nvoid Detect",
          "new_api": null,
          "old_text": "commands.\nvoid Detect",
          "new_text": null,
          "old_line_content": "            found.Append(exePath);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "int n = (int)dim",
          "new_api": null,
          "old_text": " int n = (int)dim",
          "new_text": null,
          "old_line_content": "        rule.fullPath = str::Dup(exePath);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "i = 0; i < n; i++) {\n        TextEditor* e = &editor",
          "new_api": null,
          "old_text": "i = 0; i < n; i++) {\n        TextEditor* e = &editor",
          "new_text": null,
          "old_line_content": "        rule.openFileCmd = str::Format(\"\\\"%s\\\" %s\", exePath, inverseSearchArgs);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "if (!e->openFi",
          "new_api": null,
          "old_text": "       if (!e->openFi",
          "new_text": null,
          "old_line_content": "        found.Append(exePath);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "(const char* patt",
          "new_api": null,
          "old_text": "(const char* patt",
          "new_text": null,
          "old_line_content": "    FindTextEditors();",
          "new_line_content": "// Detect TeX editors installed on the system and construct the",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "h, int line, int c",
          "new_api": null,
          "old_text": "h, int line, int c",
          "new_text": null,
          "old_line_content": "    int n = (int)dimof(editorRules);",
          "new_line_content": "// corresponding inverse search commands.",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "ern;\n    whil",
          "new_api": null,
          "old_text": "ern;\n    whil",
          "new_text": null,
          "old_line_content": "        res.Append(e);",
          "new_line_content": "        if (!e->openFileCmd) {",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "AppendFmt",
          "new_api": null,
          "old_text": ") {\n            cmdline.AppendFmt(\"%d\", line);\n        } else if (*p",
          "new_text": null,
          "old_line_content": "    logf(\"BuildOpenFileCmd: path: '%s', pattern: '%s'\\n\", path, pattern);",
          "new_line_content": "    const char* perc;",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "l);\n        } else if",
          "new_api": null,
          "old_text": "l);\n        } else if",
          "new_text": null,
          "old_line_content": "    while ((perc = str::FindChar(s, '%')) != nullptr) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "return cmdline.Steal",
          "new_api": null,
          "old_text": "\n    return cmdline.Steal",
          "new_text": null,
          "old_line_content": "            char* fname = path::NormalizeTemp(path);",
          "new_line_content": "        perc++;",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "OpenFileWithTextEdit",
          "new_api": null,
          "old_text": " OpenFileWithTextEdit",
          "new_text": null,
          "old_line_content": "            cmdline.Append(fname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "char* cmdLine = BuildO",
          "new_api": null,
          "old_text": "\n\n    char* cmdLine = BuildO",
          "new_text": null,
          "old_line_content": "            cmdline.AppendFmt(\"%d\", col);",
          "new_line_content": "        } else if (*perc == 'l') {",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "TextEditor: '%s'\\n\", cm",
          "new_api": null,
          "old_text": "TextEditor: '%s'\\n\", cm",
          "new_text": null,
          "old_line_content": "            cmdline.AppendChar('%');",
          "new_line_content": "        } else if (*perc == 'c') {",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "DirTemp",
          "new_api": null,
          "old_text": "DirTemp();\n    AutoCloseHan",
          "new_text": null,
          "old_line_content": "            cmdline.Append(perc - 1, 2);",
          "new_line_content": "        } else if (*perc == '%') {",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "(cmdLine);\n}\n\n#defi",
          "new_api": null,
          "old_text": "(cmdLine);\n}\n\n#defi",
          "new_text": null,
          "old_line_content": "    return cmdline.StealData();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "ither\n// through a keyboar",
          "new_api": null,
          "old_text": "ither\n// through a keyboar",
          "new_text": null,
          "old_line_content": "    DetectTextEditors(editors);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "itWndProc",
          "new_api": null,
          "old_text": "itWndProc(HWND hwnd, UINT msg, WPARAM wp, LPARA",
          "new_text": null,
          "old_line_content": "    logf(\"OpenFileWithTextEditor: '%s'\\n\", cmdLine);",
          "new_line_content": "    const char* cmd = editors[0]->openFileCmd;",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "elayFocus = fal",
          "new_api": null,
          "old_text": "elayFocus = fal",
          "new_text": null,
          "old_line_content": "    char* appDir = GetExeDirTemp();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "// for easier d",
          "new_api": null,
          "old_text": "// for easier d",
          "new_text": null,
          "old_line_content": "            delayFocus = !IsFocused(hwnd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "PostMessageW(hw",
          "new_api": null,
          "old_text": "  PostMessageW(hw",
          "new_text": null,
          "old_line_content": "                DWORD sel = Edit_GetSel(hwnd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "}",
          "new_api": null,
          "old_text": "        }\n ",
          "new_text": null,
          "old_line_content": "                if (LOWORD(sel) == HIWORD(sel)) {",
          "new_line_content": "        case WM_LBUTTONUP: {",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "}\n\n        case UWM_DELAYED_SET_FOCUS: {",
          "new_api": null,
          "old_text": "       }\n\n        case UWM_DELAYED_SET_FOCUS: {",
          "new_text": null,
          "old_line_content": "                    PostMessageW(hwnd, UWM_DELAYED_SET_FOCUS, 0, 0);",
          "new_line_content": "            if (delayFocus) {",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "return true;\n            }\n            re",
          "new_api": null,
          "old_text": "      return true;\n            }\n            re",
          "new_text": null,
          "old_line_content": "                PostMessageW(hwnd, UWM_DELAYED_SET_FOCUS, 0, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "return true;",
          "new_api": null,
          "old_text": "      return true;\n",
          "new_text": null,
          "old_line_content": "            EditSelectAll(hwnd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "O (612.0 / 792",
          "new_api": null,
          "old_text": "O (612.0 / 792",
          "new_text": null,
          "old_line_content": "            bool isCtrlBack = (VK_BACK == wp) && IsCtrlPressed() && !IsShiftPressed() && !IsAltPressed();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "void EnsureAreaVisibility(Rect& r) {\n    // adj",
          "new_api": null,
          "old_text": "void EnsureAreaVisibility(Rect& r) {\n    // adj",
          "new_text": null,
          "old_line_content": "                PostMessageW(hwnd, UWM_DELAYED_CTRL_BACK, 0, 0);",
          "new_line_content": "        case WM_KEYDOWN: {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "e that the window is neithe",
          "new_api": null,
          "old_text": "e that the window is neithe",
          "new_text": null,
          "old_line_content": "            EditImplementCtrlBack(hwnd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "halfCaption",
          "new_api": null,
          "old_text": "halfCaption(r.x, r.y + capt",
          "new_text": null,
          "old_line_content": "    Rect work = GetWorkAreaRect(r, nullptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "Pos",
          "new_api": null,
          "old_text": "Pos() {\n    RECT workArea;\n    SystemParametersInfo(SPI_GE",
          "new_text": null,
          "old_line_content": "        r.dx = std::min((int)((double)work.dy * DEF_PAGE_RATIO), work.dx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "ackLogs",
          "new_api": null,
          "old_text": "ackLogs() {\n    ByteSlice s = ",
          "new_text": null,
          "old_line_content": "    int captionDy = GetSystemMetrics(SM_CYCAPTION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "filePath = AppGenDataFilenameTemp(\"ca",
          "new_api": null,
          "old_text": "filePath = AppGenDataFilenameTemp(\"ca",
          "new_text": null,
          "old_line_content": "    if (halfCaption.Intersect(work).IsEmpty()) {",
          "new_line_content": "    // inside a visible working area",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "er data\n#if 0\n// cache because calculating md5 of the",
          "new_api": null,
          "old_text": "er data\n#if 0\n// cache because calculating md5 of the ",
          "new_text": null,
          "old_line_content": "    SystemParametersInfo(SPI_GETWORKAREA, 0, &workArea, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "might be relati",
          "new_api": null,
          "old_text": " might be relati",
          "new_text": null,
          "old_line_content": "    Rect work = ToRect(workArea);",
          "new_line_content": "Rect GetDefaultWindowPos() {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 31,
      "total_additions": 116,
      "total_deletions": 116,
      "total_api_changes": 263
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 263,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          58,
          86,
          71
        ]
      }
    },
    "api_calls_before": 169,
    "api_calls_after": 169,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 29
    }
  }
}
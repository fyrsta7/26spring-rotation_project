{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/124a89a53ebd0afce35a7d6f6692b74a56492c44",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/124a89a53ebd0afce35a7d6f6692b74a56492c44/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/124a89a53ebd0afce35a7d6f6692b74a56492c44/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/124a89a53ebd0afce35a7d6f6692b74a56492c44/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 235,
          "old_api": "nPath",
          "new_api": "nstall ? \"DllRegisterServer\" : \"D",
          "old_text": "nPath());\n   ",
          "new_text": "nstall ? \"DllRegisterServer\" : \"D",
          "old_line_content": "                ok = SUCCEEDED(DllRegUnreg());",
          "new_line_content": "            DllInstallProc DllInstall = (DllInstallProc)GetProcAddress(lib, \"DllInstall\");",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "ath)) {",
          "new_api": "(DllRegUnregProc)GetProcA",
          "old_text": "ath)) {\n        ",
          "new_text": "(DllRegUnregProc)GetProcA",
          "old_line_content": "        FreeLibrary(lib);",
          "new_line_content": "                ok = SUCCEEDED(DllInstall(install, args));",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "dllPath.S",
          "new_api": "rn ok;\n}\n\nvoid UninstallB",
          "old_text": "        dllPath.S",
          "new_text": "rn ok;\n}\n\nvoid UninstallB",
          "old_line_content": "    OleUninitialize();",
          "new_line_content": "            DllRegUnregProc DllRegUnreg = (DllRegUnregProc)GetProcAddress(lib, func);",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "DLL",
          "new_api": "Set",
          "old_text": "DLL(dllPath, true))\n ",
          "new_text": "lPath.Set(GetInst",
          "old_line_content": "        if (!file::Exists(dllPath))",
          "new_line_content": "    OleUninitialize();",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "PDF search filter\"));\n}\n\nvoid I",
          "new_api": "FilterPath",
          "old_text": " PDF search filter\"));\n}\n\nvoid I",
          "new_text": "FilterPath());\n    if (!Registe",
          "old_line_content": "    if (!RegisterServerDLL(dllPath, true))",
          "new_line_content": "        dllPath.Set(GetInstalledBrowserPluginPath());",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "AutoFreeW dllPath(GetPdfPreviewerPath(",
          "new_api": "h, true))\n        Not",
          "old_text": "   AutoFreeW dllPath(GetPdfPreviewerPath(",
          "new_text": "h, true))\n        Not",
          "old_line_content": "        NotifyFailed(_TR(\"Couldn't install PDF search filter\"));",
          "new_line_content": "        if (!file::Exists(dllPath))",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "processes\nint KillProcess(con",
          "new_api": "IsValid",
          "old_text": "processes\nint KillProcess(con",
          "new_text": "essId));\n    if (!hProcess.IsValid())",
          "old_line_content": "    BOOL killed = TerminateProcess(hProcess, 0);",
          "new_line_content": "    if (!IsProcWithName(processId, modulePath))",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "ocesses that are running part of the",
          "new_api": "pdateWindow",
          "old_text": "ocesses that are running part of the ",
          "new_text": "pdateWindow(GetDesktopWindow());\n   ",
          "old_line_content": "        UpdateWindow(FindWindow(nullptr, L\"Shell_TrayWnd\"));",
          "new_line_content": "    if (!Process32First(hProcSnapshot, &pe32))",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "{0};\n    proc.dwS",
          "new_api": "at are running part of the installati",
          "old_text": " {0};\n    proc.dwS",
          "new_text": "at are running part of the installati",
          "old_line_content": "    str::Free(exePath);",
          "new_line_content": "        UpdateWindow(FindWindow(nullptr, L\"Shell_TrayWnd\"));",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "if (i < gP",
          "new_api": "etBaseNameNoFree",
          "old_text": "     if (i < gP",
          "new_text": "etBaseNameNoFree(procPath)",
          "old_line_content": "    for (size_t i = 0; i < dimof(nameList); i += 2) {",
          "new_line_content": "        ok = Process32Next(snap, &proc);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "SG_FAILED);\n}\n\nbool Chec",
          "new_api": "name = ReadableProcName(gProcesse",
          "old_text": "SG_FAILED);\n}\n\nbool Chec",
          "new_text": "name = ReadableProcName(gProcesse",
          "old_line_content": "    for (size_t i = 1; i < gProcessesToClose.size(); i++) {",
          "new_line_content": "    const WCHAR* procName = path::GetBaseNameNoFree(procPath);",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "Reset",
          "new_api": "< gProcessesTo",
          "old_text": "ToClose.Reset();\n    Pr",
          "new_text": " < gProcessesTo",
          "old_line_content": "        const WCHAR* name = ReadableProcName(gProcessesToClose.at(i));",
          "new_line_content": "    for (size_t i = 0; i < dimof(nameList); i += 2) {",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "tion",
          "new_api": "Set",
          "old_text": "tion(gProcessesToClose);",
          "new_text": "     procNames.Set(str::Join(pr",
          "old_line_content": "        if (i < gProcessesToClose.size() - 1)",
          "new_line_content": "        if (str::EqI(procName, nameList[i]))",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "position to the right",
          "new_api": "essesToClose);\n\n    bool",
          "old_text": "position to the right\n   ",
          "new_text": "essesToClose);\n\n    bool",
          "old_line_content": "    gProcessesToClose.Reset();",
          "new_line_content": "        if (i < gProcessesToClose.size() - 1)",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "= {};\n    Button_GetIdealSize(hwnd, &s);",
          "new_api": "e",
          "old_text": " = {};\n    Button_GetIdealSize(hwnd, &s);\n   ",
          "new_text": "e() == 0;\n    if (possible) {\n   ",
          "old_line_content": "    ProcessesUsingInstallation(gProcessesToClose);",
          "new_line_content": "            procNames.Set(str::Join(procNames, L\", \", name));",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "+= dpiAdjust(8) * 2;",
          "new_api": "etCloseProcessMsg",
          "old_text": "+= dpiAdjust(8) * 2;\n   ",
          "new_text": "etCloseProcessMsg();\n        if (!si",
          "old_line_content": "    bool possible = gProcessesToClose.size() == 0;",
          "new_line_content": "            procNames.Set(str::Join(procNames, L\" and \", name));",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "s;\n}\n\nSIZE Set",
          "new_api": "CLAMATION);\n    }\n    InvalidateFr",
          "old_text": " s;\n}\n\nSIZE Set",
          "new_text": "CLAMATION);\n    }\n    InvalidateFr",
          "old_line_content": "        SetDefaultMsg();",
          "new_line_content": "    AutoFreeW s(str::Format(_TR(\"Please close %s to proceed!\"), procNames));",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "alButtonSize",
          "new_api": "Button_GetIdealSize(hwnd, &s);\n    // add pa",
          "old_text": "alButtonSize(hwnd",
          "new_text": " Button_GetIdealSize(hwnd, &s);\n    // add pa",
          "old_line_content": "    InvalidateFrame();",
          "new_line_content": "    ProcessesUsingInstallation(gProcessesToClose);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "ize.cy, flags);\n    return si",
          "new_api": "xt",
          "old_text": "ize.cy, flags);\n    return si",
          "new_text": "xt(hwnd, s);\n    SIZE size = Ge",
          "old_line_content": "    Button_GetIdealSize(hwnd, &s);",
          "new_line_content": "            MessageBeep(MB_ICONEXCLAMATION);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "tonCtrl",
          "new_api": "ze",
          "old_text": "tonCtrl(HWND",
          "new_text": "ze(hwnd);\n    UIN",
          "old_line_content": "    s.cx += dpiAdjust(8) * 2;",
          "new_line_content": "    InvalidateFrame();",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": ";\n    int x = RectDx(r)",
          "new_api": "ags);\n    return size;\n}\n\nBut",
          "old_text": ";\n    int x = RectDx(r) ",
          "new_text": "ags);\n    return size;\n}\n\nBut",
          "old_line_content": "    SIZE size = GetIdealButtonSize(hwnd);",
          "new_line_content": "    Button_GetIdealSize(hwnd, &s);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "= x + size.cx;\n    r.top = y;\n    r.bottom = y + size.cy;",
          "new_api": "ND hwndParen",
          "old_text": " = x + size.cx;\n    r.top = y;\n    r.bottom = y + size.cy;",
          "new_text": "ND hwndParen",
          "old_line_content": "    SetWindowPos(hwnd, nullptr, 0, 0, size.cx, size.cy, flags);",
          "new_line_content": "    s.cx += dpiAdjust(8) * 2;",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "nClicked =",
          "new_api": "SIZE size = b->GetId",
          "old_text": "nClicked = ",
          "new_text": " SIZE size = b->GetId",
          "old_line_content": "    b->Create();",
          "new_line_content": "    win::SetText(hwnd, s);",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "OnButtonExit",
          "new_api": "e.cx;\n    r.top = y;\n    r.bottom = y + size.cy;\n    b->Se",
          "old_text": "OnButtonExit() {\n    SendMess",
          "new_text": "e.cx;\n    r.top = y;\n    r.bottom = y + size.cy;\n    b->Se",
          "old_line_content": "    GetClientRect(hwndParent, &r);",
          "new_line_content": "    SetWindowPos(hwnd, nullptr, 0, 0, size.cx, size.cy, flags);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "f, 0, 0, 0},",
          "new_api": "// part",
          "old_text": "f, 0, 0, 0},",
          "new_text": " // part ",
          "old_line_content": "    gButtonExit = CreateDefaultButtonCtrl(hwndParent, _TR(\"Close\"));",
          "new_line_content": "    int y = RectDy(r) - size.cy - WINDOW_MARGIN;",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": ", gCol3Shadow, 2.f, -2.f, 0, 0}, {'A',",
          "new_api": "alculated dur",
          "old_text": ", gCol3Shadow, 2.f, -2.f, 0, 0}, {'A', ",
          "new_text": "alculated dur",
          "old_line_content": "    SendMessage(gHwndFrame, WM_CLOSE, 0, 0);",
          "new_line_content": "    b->SetPos(&r);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "0;\n    SetLettersSumatraUpTo(0);\n}\n\nstatic",
          "new_api": "t framesPerSec",
          "old_text": " 0;\n    SetLettersSumatraUpTo(0);\n}\n\nstatic ",
          "new_text": "t framesPerSec ",
          "old_line_content": "    SetLettersSumatraUpTo(SUMATRA_LETTERS_COUNT);",
          "new_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": ";\n        li->dy = bbo",
          "new_api": "st iteration of the loop\n    WCHAR s[2] = {0};",
          "old_text": ";\n        li->dy = bbo",
          "new_text": "st iteration of the loop\n    WCHAR s[2] = {0};\n  ",
          "old_line_content": "        RevealingLettersAnim();",
          "new_line_content": "    DWORD timeOut = gRevealingLettersAnim->GetTimeoutInMilliseconds();",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "Font* f, Font* fVer, REAL y) {\n    Letter",
          "new_api": "h b(Color(0xff, 0xff, 0xff)",
          "old_text": "Font* f, Font* fVer, REAL y) {\n    Letter",
          "new_text": "h b(Color(0xff, 0xff, 0xff)",
          "old_line_content": "    g.MeasureString(s, -1, &f, maxbox, &bbox);",
          "new_line_content": "    RevealingLettersAnimStart();",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "SetCompositingQuality",
          "new_api": "CURR_VERSION_STR;\n#if DRAW_TEXT_SHADOW\n    SolidBr",
          "old_text": " g.SetCompositingQuality(Compo",
          "new_text": "CURR_VERSION_STR;\n#if DRAW_TEXT_SHADOW\n    SolidBr",
          "old_line_content": "        g.DrawString(s, 1, f, o1, &b1);",
          "new_line_content": "        g.RotateTransform(li->rotation, MatrixOrderAppend);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "if (gShowOptions)",
          "new_api": "Gdiplus::Color bgCol;",
          "old_text": "  if (gShowOptions)\n   ",
          "new_text": " Gdiplus::Color bgCol;\n   ",
          "old_line_content": "    SolidBrush b2(Color(0xff, 0xff, 0xff));",
          "new_line_content": "    g.TranslateTransform(x, y);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": ".dy / 2);",
          "new_api": "SetFromCOLORREF",
          "old_text": ".dy / 2);\n    ",
          "new_text": "SetFromCOLORREF(WIN_BG_",
          "old_line_content": "    g.DrawString(ver_s, -1, fVer, PointF(x2, y2), &b2);",
          "new_line_content": "    g.RotateTransform(45.f);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "COLOR_MSG_FAILED);\n}\n\nstatic void DrawFram",
          "new_api": ", r2);\n\n    Fo",
          "old_text": "COLOR_MSG_FAILED);\n}\n\nstatic void DrawFram",
          "new_text": ", r2);\n\n    Fo",
          "old_line_content": "    g.SetSmoothingMode(SmoothingModeAntiAlias);",
          "new_line_content": "    SolidBrush b1(Color(0, 0, 0));",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "hwnd, HDC dc, PAINTSTRUC",
          "new_api": ";\n    DrawSumatraLette",
          "old_text": "hwnd, HDC dc, PAINTSTRUC",
          "new_text": ";\n    DrawSumatraLette",
          "old_line_content": "    g.SetPageUnit(UnitPixel);",
          "new_line_content": "    g.DrawString(ver_s, -1, fVer, PointF(x2 - 2, y2 - 1), &b1);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": ";\n    ClientRect rc(hwnd);",
          "new_api": "if (gMsg)",
          "old_text": ";\n    ClientRect rc(hwnd);\n   ",
          "new_text": "    if (gMsg)\n",
          "old_line_content": "    CalcLettersLayout(g, &f, r.dx);",
          "new_line_content": "    g.DrawString(ver_s, -1, fVer, PointF(x2, y2), &b2);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "intFrame",
          "new_api": "DrawMessage(g, gMsgError, msgY, (REAL)r.dx, COL",
          "old_text": "intFrame(HWND ",
          "new_text": "       DrawMessage(g, gMsgError, msgY, (REAL)r.dx, COL",
          "old_line_content": "    Gdiplus::Rect r2(r.ToGdipRect());",
          "new_line_content": "    g.SetCompositingQuality(CompositingQualityHighQuality);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "PAINTSTRUCT",
          "new_api": "FAILED);\n}\n\nstatic void DrawFrame(HWND hwn",
          "old_text": "    PAINTSTRUCT ",
          "new_text": "FAILED);\n}\n\nstatic void DrawFrame(HWND hwn",
          "old_line_content": "    r2.Inflate(1, 1);",
          "new_line_content": "    g.SetSmoothingMode(SmoothingModeAntiAlias);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "HDC dc = BeginPaint(hwnd, &p",
          "new_api": "dc, PAINTSTRUCT*) {",
          "old_text": " HDC dc = BeginPaint(hwnd, &p",
          "new_text": "dc, PAINTSTRUCT*) {\n    ",
          "old_line_content": "    g.FillRectangle(&bgBrush, r2);",
          "new_line_content": "    g.SetPageUnit(UnitPixel);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": ");\n}\n\nHBRUSH ghbrBackground = nullpt",
          "new_api": "ntRect rc(hwnd);\n    Bitmap bm",
          "old_text": ");\n}\n\nHBRUSH ghbrBackground = nullpt",
          "new_text": "ntRect rc(hwnd);\n    Bitmap bm",
          "old_line_content": "    DrawSumatraLetters(g, &f, &f2, 18.f);",
          "new_line_content": "    CalcLettersLayout(g, &f, r.dx);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "",
          "new_api": "WND hwnd) {",
          "old_text": "",
          "new_text": "WND hwnd) {\n  ",
          "old_line_content": "    REAL msgY = (REAL)(r.dy / 2);",
          "new_line_content": "    Gdiplus::Rect r2(r.ToGdipRect());",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "",
          "new_api": "BeginPaint",
          "old_text": "",
          "new_text": "BeginPaint(hwnd, &ps);\n    Dr",
          "old_line_content": "        msgY += DrawMessage(g, gMsg, msgY, (REAL)r.dx, gMsgColor) + 5;",
          "new_line_content": "    g.FillRectangle(&bgBrush, r2);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "efine REVEALING",
          "old_text": null,
          "new_text": "efine REVEALING",
          "old_line_content": "            gLetters[i].c = s[i];",
          "new_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": null,
          "new_api": "imeoutCalculator* gRe",
          "old_text": null,
          "new_text": "imeoutCalculator* gRe",
          "old_line_content": "        } else {",
          "new_line_content": "        gLetters[i].c = RandUppercaseLetter();",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "tLettersSumatraUpTo",
          "old_text": null,
          "new_text": "tLettersSumatraUpTo(0);\n}\n\nstatic void Revea",
          "old_line_content": "int gRevealingLettersAnimLettersToShow;",
          "new_line_content": "    SetLettersSumatraUpTo(SUMATRA_LETTERS_COUNT);",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "Step",
          "old_text": null,
          "new_text": "ettersAnim->Step();\n    ",
          "old_line_content": "static void RevealingLettersAnim() {",
          "new_line_content": "    SetLettersSumatraUpTo(0);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "rsLayout",
          "old_text": null,
          "new_text": "rsLayout(Graphics& ",
          "old_line_content": "    if (timeOut != 0)",
          "new_line_content": "    SetLettersSumatra();",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "* f, int dx) {",
          "old_text": null,
          "new_text": "* f, int dx) {\n  ",
          "old_line_content": "        return;",
          "new_line_content": "    InvalidateFrame();",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "return;\n\n    LetterInfo* li;",
          "old_text": null,
          "new_text": "      return;\n\n    LetterInfo* li;\n  ",
          "old_line_content": "}",
          "new_line_content": "    if (gRevealingLettersAnim->ElapsedTotal() > REVEALING_ANIM_DUR) {",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "L letterSpacing = -12.f;",
          "old_text": null,
          "new_text": "L letterSpacing = -12.f;\n ",
          "old_line_content": "",
          "new_line_content": "        RevealingLettersAnimStop();",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "for (int i = 0; i < dimof(gLetters); i++) {\n        li = &g",
          "old_text": null,
          "new_text": "for (int i = 0; i < dimof(gLetters); i++) {\n        li = &g",
          "old_line_content": "static void CalcLettersLayout(Graphics& g, Font* f, int dx) {",
          "new_line_content": "    SetLettersSumatraUpTo(++gRevealingLettersAnimLettersToShow);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "[i];\n        s[0] = li->c;",
          "old_text": null,
          "new_text": "[i];\n        s[0] = li->c;\n  ",
          "old_line_content": "    static BOOL didLayout = FALSE;",
          "new_line_content": "    gRevealingLettersAnim->Step();",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "MeasureString",
          "old_text": null,
          "new_text": ".MeasureString(s,",
          "old_line_content": "    if (didLayout)",
          "new_line_content": "    InvalidateFrame();",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "li->dy = bbox.Height;",
          "old_text": null,
          "new_text": "li->dy = bbox.Height;\n",
          "old_line_content": "    const REAL letterSpacing = -12.f;",
          "new_line_content": "        RevealingLettersAnim();",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "r) {\n    AutoFr",
          "old_text": null,
          "new_text": "r) {\n    AutoFr",
          "old_line_content": "    REAL x = ((REAL)dx - totalDx) / 2.f;",
          "new_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "RectF maxbox(0, y, dx, 0);\n    RectF bbox;",
          "old_text": null,
          "new_text": "   RectF maxbox(0, y, dx, 0);\n    RectF bbox;\n",
          "old_line_content": "        li->x = x;",
          "new_line_content": "        g.MeasureString(s, 1, f, origin, &sfmt, &bbox);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "ormatFlags",
          "old_text": null,
          "new_text": "ormatFlags(Stri",
          "old_line_content": "static REAL DrawMessage(Graphics& g, const WCHAR* msg, REAL y, REAL dx, Color color) {",
          "new_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "ont* fVer, REAL y) {\n    LetterInfo* li;",
          "old_text": null,
          "new_text": "ont* fVer, REAL y) {\n    LetterInfo* li;\n",
          "old_line_content": "        bbox.Y++;",
          "new_line_content": "    g.MeasureString(s, -1, &f, maxbox, &bbox);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "li = &gLetters[i];\n        s[0] =",
          "old_text": null,
          "new_text": "      li = &gLetters[i];\n        s[0] =",
          "old_line_content": "        bbox.Y--;",
          "new_line_content": "    sft.SetAlignment(StringAlignmentCenter);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "if (s[0] == ' ')",
          "old_text": null,
          "new_text": "     if (s[0] == ' ')\n",
          "old_line_content": "    }",
          "new_line_content": "    if (trans::IsCurrLangRtl())",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "RotateTransform",
          "old_text": null,
          "new_text": " return;\n\n        g.RotateTransform(li->rotation, MatrixO",
          "old_line_content": "#endif",
          "new_line_content": "        sft.SetFormatFlags(StringFormatFlagsDirectionRightToLeft);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "dow);\n        PointF o2",
          "old_text": null,
          "new_text": "dow);\n        PointF o2",
          "old_line_content": "}",
          "new_line_content": "        SolidBrush b(Color(0xff, 0xff, 0xff));",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": ", y + 4.f + li->dyOff);\n        g.DrawS",
          "old_text": null,
          "new_text": ", y + 4.f + li->dyOff);\n        g.DrawS",
          "old_line_content": "",
          "new_line_content": "        g.DrawString(s, -1, &f, bbox, &sft, &b);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": ">x, y + li->dyOff);\n        g.DrawStrin",
          "old_text": null,
          "new_text": ">x, y + li->dyOff);\n        g.DrawStrin",
          "old_line_content": "        s[0] = li->c;",
          "new_line_content": "    g.DrawString(s, -1, &f, bbox, &sft, &b);",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": ") - 1].x;\n    g",
          "old_text": null,
          "new_text": ") - 1].x;\n    g",
          "old_line_content": "        PointF o2(li->x - 3.f, y + 4.f + li->dyOff);",
          "new_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "ver_s, -1, fVer, PointF(x2, y2",
          "old_text": null,
          "new_text": "ver_s, -1, fVer, PointF(x2, y2",
          "old_line_content": "    // draw version number",
          "new_line_content": "        g.DrawString(s, 1, f, o2, &b2);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "ositingQuality",
          "old_text": null,
          "new_text": "ositingQuality(CompositingQual",
          "old_line_content": "    REAL y2 = -34;",
          "new_line_content": "        g.DrawString(s, 1, f, o1, &b1);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "SetSmoothingMode",
          "old_text": null,
          "new_text": "ity);\n    g.SetSmoothingMode(SmoothingModeAntiAlia",
          "old_line_content": "",
          "new_line_content": "        g.RotateTransform(li->rotation, MatrixOrderAppend);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "etPageUnit",
          "old_text": null,
          "new_text": "etPageUnit(UnitPix",
          "old_line_content": "    WCHAR* ver_s = L\"v\" CURR_VERSION_STR;",
          "new_line_content": "        g.ResetTransform();",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "tersLayout",
          "old_text": null,
          "new_text": "tersLayout(g, &",
          "old_line_content": "#endif",
          "new_line_content": "    REAL x = gLetters[dimof(gLetters) - 1].x;",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "wOptions)\n        retur",
          "old_text": null,
          "new_text": "wOptions)\n        retur",
          "old_line_content": "    Font f(L\"Impact\", 40, FontStyleRegular);",
          "new_line_content": "    SolidBrush b2(Color(0xff, 0xff, 0xff));",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "+= DrawMessage(g,",
          "old_text": null,
          "new_text": "+= DrawMessage(g, ",
          "old_line_content": "",
          "new_line_content": "    g.ResetTransform();",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "((Image*)&bmp);\n    DrawFrame2(g2,",
          "old_text": null,
          "new_text": "((Image*)&bmp);\n    DrawFrame2(g2, ",
          "old_line_content": "        return;",
          "new_line_content": "    bgCol.SetFromCOLORREF(WIN_BG_COLOR);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "TRUCT ps;\n    HD",
          "old_text": null,
          "new_text": "TRUCT ps;\n    HD",
          "old_line_content": "    if (gMsg)",
          "new_line_content": "    r2.Inflate(1, 1);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "SH ghbrBackground = nullptr;",
          "old_text": null,
          "new_text": "SH ghbrBackground = nullptr;\n",
          "old_line_content": "}",
          "new_line_content": "    DrawSumatraLetters(g, &f, &f2, 18.f);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "    ClientRect rc(hwnd);",
          "new_line_content": "    REAL msgY = (REAL)(r.dy / 2);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "    Graphics g2((Image*)&bmp);",
          "new_line_content": "        msgY += DrawMessage(g, gMsg, msgY, (REAL)r.dx, gMsgColor) + 5;",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "WCHAR* browserPluginName = path::GetBaseNameNoFree(browser",
          "old_text": null,
          "new_text": "WCHAR* browserPluginName = path::GetBaseNameNoFree(browser",
          "old_line_content": "    AutoFreeW browserPlugin(GetBrowserPluginPath());",
          "new_line_content": "    AutoFreeW libmupdf(path::Join(gInstUninstGlobals.installDir, L\"libmupdf.dll\"));",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": null,
          "new_api": "e32First",
          "old_text": null,
          "new_text": "e32First(snap, &mod);\n    while (",
          "old_line_content": "    MODULEENTRY32 mod = {0};",
          "new_line_content": "    const WCHAR* libmupdfName = path::GetBaseNameNoFree(libmupdf);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "xePath;\n        const WCHAR* exeName =",
          "old_text": null,
          "new_text": "xePath;\n        const WCHAR* exeName =",
          "old_line_content": "    mod.dwSize = sizeof(mod);",
          "new_line_content": "    const WCHAR* browserPluginName = path::GetBaseNameNoFree(browserPlugin);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "omparison by checking if",
          "old_text": null,
          "new_text": "omparison by checking if ",
          "old_line_content": "            return true;",
          "new_line_content": "    BOOL cont = Module32First(snap, &mod);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    DrawFrame2(g2, rc);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "HBRUSH ghbrBackground = nullptr;",
          "new_line_content": "    g.DrawImage(&bmp, 0, 0);",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "Path)) {\n            return true",
          "old_text": null,
          "new_text": "Path)) {\n            return true",
          "old_line_content": "    }",
          "new_line_content": "        const WCHAR* exeName = path::GetBaseNameNoFree(exePath);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "cont = Module32Next(snap, &m",
          "old_text": null,
          "new_text": "   cont = Module32Next(snap, &m",
          "old_line_content": "    return false;",
          "new_line_content": "        if (str::EqI(exeName, libmupdfName) && path::IsSame(libmupdf, exePath)) {",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    HDC dc = BeginPaint(hwnd, &ps);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    DrawFrame(hwnd, dc, &ps);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "207132\nstatic bool RegisterServerDLL",
          "old_text": null,
          "new_text": "207132\nstatic bool RegisterServerDLL",
          "old_line_content": "static bool RegisterServerDLL(const WCHAR* dllPath, bool install, const WCHAR* args = nullptr) {",
          "new_line_content": "        if (str::EqI(exeName, browserPluginName) && path::IsSame(browserPlugin, exePath)) {",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "",
          "new_line_content": "    EndPaint(hwnd, &ps);",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "nullptr) {\n    if (FAILE",
          "old_text": null,
          "new_text": "nullptr) {\n    if (FAILE",
          "old_line_content": "",
          "new_line_content": "        cont = Module32Next(snap, &mod);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "AutoFreeW dllDir",
          "old_text": null,
          "new_text": "      AutoFreeW dllDir",
          "old_line_content": "    bool ok = false;",
          "new_line_content": "    if (FAILED(OleInitialize(nullptr)))",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": ")(VOID);\n        if (args)",
          "old_text": null,
          "new_text": ")(VOID);\n        if (args) ",
          "old_line_content": "            if (DllInstall)",
          "new_line_content": "        DynSetDllDirectoryW(dllDir);",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "lProc)GetProcAddress",
          "old_text": null,
          "new_text": "lProc)GetProcAddress",
          "old_line_content": "        }",
          "new_line_content": "    HMODULE lib = LoadLibrary(dllPath);",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "if (!file",
          "old_text": null,
          "new_text": "    if (!file",
          "old_line_content": "    return ok;",
          "new_line_content": "                ok = SUCCEEDED(DllRegUnreg());",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "// uninsta",
          "old_text": null,
          "new_text": "      // uninsta",
          "old_line_content": "",
          "new_line_content": "        FreeLibrary(lib);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "rget installation path",
          "old_text": null,
          "new_text": "rget installation path\n ",
          "old_line_content": "        // uninstall the detected plugin, even if it isn't in the target installation path",
          "new_line_content": "        DynSetDllDirectoryW(L\"\");",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "dllPath, false))",
          "old_text": null,
          "new_text": "dllPath, false))\n    ",
          "old_line_content": "void InstallPdfFilter() {",
          "new_line_content": "    if (!file::Exists(dllPath)) {",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "ch filter\"));\n}\n\nvoid UninstallPd",
          "old_text": null,
          "new_text": "ch filter\"));\n}\n\nvoid UninstallPd",
          "old_line_content": "void UninstallPdfFilter() {",
          "new_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": null,
          "new_api": "W dllPath(GetPdfFilterPath());\n    if (!",
          "old_text": null,
          "new_text": "W dllPath(GetPdfFilterPath());\n    if (!",
          "old_line_content": "    AutoFreeW dllPath(GetPdfFilterPath());",
          "new_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall browser plugin\"));",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "h filter\"));\n}\n\nvoid InstallPdfP",
          "old_text": null,
          "new_text": "h filter\"));\n}\n\nvoid InstallPdfP",
          "old_line_content": "void InstallPdfPreviewer() {",
          "new_line_content": "    if (!RegisterServerDLL(dllPath, true))",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "eW dllPath(GetPdfPreviewerPath());\n    //",
          "old_text": null,
          "new_text": "eW dllPath(GetPdfPreviewerPath());\n    //",
          "old_line_content": "    AutoFreeW dllPath(GetPdfPreviewerPath());",
          "new_line_content": "        NotifyFailed(_TR(\"Couldn't install PDF search filter\"));",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "h, true))\n        NotifyFailed(_T",
          "old_text": null,
          "new_text": "h, true))\n        NotifyFailed(_T",
          "old_line_content": "",
          "new_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "previewer\"));\n}\n\nvoid UninstallPdfPreviewer",
          "old_text": null,
          "new_text": "previewer\"));\n}\n\nvoid UninstallPdfPreviewer",
          "old_line_content": "void UninstallPdfPreviewer() {",
          "new_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall PDF search filter\"));",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "NotifyFailed(_TR(\"Couldn",
          "old_text": null,
          "new_text": "        NotifyFailed(_TR(\"Couldn",
          "old_line_content": "",
          "new_line_content": "    if (!RegisterServerDLL(dllPath, true))",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "er\"));\n}\n\n#define TEN_SECONDS_IN_MS 1",
          "old_text": null,
          "new_text": "er\"));\n}\n\n#define TEN_SECONDS_IN_MS 1",
          "old_line_content": "#define TEN_SECONDS_IN_MS 10 * 1000",
          "new_line_content": "        NotifyFailed(_TR(\"Couldn't install PDF previewer\"));",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "d));\n    if (!hModSnapshot.IsVali",
          "old_text": null,
          "new_text": "d));\n    if (!hModSnapshot.IsVali",
          "old_line_content": "",
          "new_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": null,
          "new_api": "e;\n\n    MODULEENTRY32W me32 = {0};",
          "old_text": null,
          "new_text": "e;\n\n    MODULEENTRY32W me32 = {0};\n    ",
          "old_line_content": "    MODULEENTRY32W me32 = {0};",
          "new_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall PDF previewer\"));",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "me32);\n    }\n    retur",
          "old_text": null,
          "new_text": "me32);\n    }\n    retur",
          "old_line_content": "    }",
          "new_line_content": "    if (!hModSnapshot.IsValid())",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "aitUntilTerminated> is true, will w",
          "old_text": null,
          "new_text": "aitUntilTerminated> is true, will w",
          "old_line_content": "// If <waitUntilTerminated> is true, will wait until process is fully killed.",
          "new_line_content": "    BOOL ok = Module32FirstW(hModSnapshot, &me32);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": ".\n// Returns TRUE if killed a process\nst",
          "old_text": null,
          "new_text": ".\n// Returns TRUE if killed a process\nst",
          "old_line_content": "static bool KillProcIdWithName(DWORD processId, const WCHAR* modulePath, bool waitUntilTerminated) {",
          "new_line_content": "        if (path::IsSame(modulePath, me32.szExePath))",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "Id, const WCHAR* modulePath, bool",
          "old_text": null,
          "new_text": "Id, const WCHAR* modulePath, bool ",
          "old_line_content": "        return false;",
          "new_line_content": "        ok = Module32NextW(hModSnapshot, &me32);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "/ modulePath\n// re",
          "old_text": null,
          "new_text": "/ modulePath\n// re",
          "old_line_content": "    return true;",
          "new_line_content": "    if (!hProcess.IsValid())",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "int KillProcess(const WCHAR*",
          "old_text": null,
          "new_text": "int KillProcess(const WCHAR* ",
          "old_line_content": "// returns number of killed processes that have a module (exe or dll) with a given",
          "new_line_content": "    BOOL killed = TerminateProcess(hProcess, 0);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "p32Snapshot",
          "old_text": null,
          "new_text": "p32Snapshot(TH32CS_SNAPPROCESS, 0));\n    if (INV",
          "old_line_content": "    if (INVALID_HANDLE_VALUE == hProcSnapshot)",
          "new_line_content": "        WaitForSingleObject(hProcess, TEN_SECONDS_IN_MS);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "ntilTerminated))\n            killCount++;\n    }",
          "old_text": null,
          "new_text": "ntilTerminated))\n            killCount++;\n    }",
          "old_line_content": "    do {",
          "new_line_content": "    ScopedHandle hProcSnapshot(CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "t so that we can over-write the executable */\nvoid KillSumatra() {",
          "old_text": null,
          "new_text": "t so that we can over-write the executable */\nvoid KillSumatra() {\n    ",
          "old_line_content": "",
          "new_line_content": "        if (KillProcIdWithName(pe32.th32ProcessID, modulePath, waitUntilTerminated))",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "KillProcess(exePath, true);\n    s",
          "old_text": null,
          "new_text": "  KillProcess(exePath, true);\n    s",
          "old_line_content": "void KillSumatra() {",
          "new_line_content": "    } while (Process32Next(hProcSnapshot, &pe32));",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": ".dll or npPdfViewe",
          "old_text": null,
          "new_text": ".dll or npPdfViewe",
          "old_line_content": "}",
          "new_line_content": "        UpdateWindow(GetDesktopWindow());",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "== snap)\n        retu",
          "old_text": null,
          "new_text": "== snap)\n        retu",
          "old_line_content": "        return;",
          "new_line_content": "    WCHAR* exePath = GetInstalledExePath();",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "PROCESSENTRY32 proc = {0",
          "old_text": null,
          "new_text": "  PROCESSENTRY32 proc = {0",
          "old_line_content": "",
          "new_line_content": "    KillProcess(exePath, true);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "proc.dwSize = size",
          "old_text": null,
          "new_text": "proc.dwSize = size",
          "old_line_content": "    PROCESSENTRY32 proc = {0};",
          "new_line_content": "    str::Free(exePath);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "(proc);\n        ok = Process32Next(snap, &proc)",
          "old_text": null,
          "new_text": "(proc);\n        ok = Process32Next(snap, &proc)",
          "old_line_content": "        }",
          "new_line_content": "    ScopedHandle snap(CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "TR,    L\"plugin-container.e",
          "old_text": null,
          "new_text": "TR,    L\"plugin-container.e",
          "old_line_content": "static const WCHAR* ReadableProcName(const WCHAR* procPath) {",
          "new_line_content": "    BOOL ok = Process32First(snap, &proc);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": ".exe\",\n        L\"Google Chrome\", L\"prev",
          "old_text": null,
          "new_text": ".exe\",\n        L\"Google Chrome\", L\"prev",
          "old_line_content": "        EXENAME,          APP_NAME_STR,    L\"plugin-container.exe\", L\"Mozilla Firefox\", L\"chrome.exe\",",
          "new_line_content": "        if (IsUsingInstallation(proc.th32ProcessID)) {",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": ",     L\"dllhost.exe\",",
          "old_text": null,
          "new_text": ",     L\"dllhost.exe\",   ",
          "old_line_content": "        L\"Google Chrome\", L\"prevhost.exe\", L\"Windows Explorer\",     L\"dllhost.exe\",     L\"Windows Explorer\",",
          "new_line_content": "            names.Append(str::Dup(proc.szExeFile));",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "proceed!\"), procNames))",
          "old_text": null,
          "new_text": "proceed!\"), procNames))",
          "old_line_content": "}",
          "new_line_content": "    AutoFreeW procNames(str::Dup(ReadableProcName(gProcessesToClose.at(0))));",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": ";\n}\n\nbool CheckInstallUn",
          "old_text": null,
          "new_text": ";\n}\n\nbool CheckInstallUn",
          "old_line_content": "",
          "new_line_content": "    for (size_t i = 1; i < gProcessesToClose.size(); i++) {",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "set",
          "old_text": null,
          "new_text": "set();\n    ProcessesUsi",
          "old_line_content": "bool CheckInstallUninstallPossible(bool silent) {",
          "new_line_content": "        const WCHAR* name = ReadableProcName(gProcessesToClose.at(i));",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "ossible;\n}\n\nSIZE GetIdealBu",
          "old_text": null,
          "new_text": "ossible;\n}\n\nSIZE GetIdealBu",
          "old_line_content": "    } else {",
          "new_line_content": "    SetMsg(s, COLOR_MSG_FAILED);",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "o the right\n    SIZE s =",
          "old_text": null,
          "new_text": "o the right\n    SIZE s = ",
          "old_line_content": "    }",
          "new_line_content": "    gProcessesToClose.Reset();",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "st",
          "old_text": null,
          "new_text": "st(8) * 2;\n    s.cy += d",
          "old_line_content": "    return possible;",
          "new_line_content": "    bool possible = gProcessesToClose.size() == 0;",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "E SetButtonText",
          "old_text": null,
          "new_text": "E SetButtonText",
          "old_line_content": "",
          "new_line_content": "        SetDefaultMsg();",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "const WCHAR* s) {",
          "old_text": null,
          "new_text": "const WCHAR* s) {\n  ",
          "old_line_content": "    // adjust to real size and position to the right",
          "new_line_content": "        SetCloseProcessMsg();",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "{\n    auto*",
          "old_text": null,
          "new_text": "{\n    auto* ",
          "old_line_content": "    return size;",
          "new_line_content": "    s.cy += dpiAdjust(2) * 2;",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "x = RectDx(r) - size.cx",
          "old_text": null,
          "new_text": "x = RectDx(r) - size.cx ",
          "old_line_content": "",
          "new_line_content": "    SIZE size = GetIdealButtonSize(hwnd);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "tonExit->OnCl",
          "old_text": null,
          "new_text": "tonExit->OnCl",
          "old_line_content": "    r.top = y;",
          "new_line_content": "    b->SetText(s);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "OnButtonEx",
          "old_text": null,
          "new_text": " OnButtonEx",
          "old_line_content": "    r.bottom = y + size.cy;",
          "new_line_content": "    b->Create();",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "it",
          "old_text": null,
          "new_text": "it() {\n    SendMessage(gHwndF",
          "old_line_content": "}",
          "new_line_content": "    GetClientRect(hwndParent, &r);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "0);\n}\n\n// This di",
          "old_text": null,
          "new_text": "0);\n}\n\n// This di",
          "old_line_content": "",
          "new_line_content": "    SIZE size = b->GetIdealSize();",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "ed by htt",
          "old_text": null,
          "new_text": "ed by htt",
          "old_line_content": "void CreateButtonExit(HWND hwndParent) {",
          "new_line_content": "    int x = RectDx(r) - size.cx - WINDOW_MARGIN;",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "},   {'U', g",
          "old_text": null,
          "new_text": "},   {'U', g",
          "old_line_content": "    // part that doesn't change",
          "new_line_content": "    gButtonExit = CreateDefaultButtonCtrl(hwndParent, _TR(\"Close\"));",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "dow, 2.f, -2.f, 0, 0}, {'A', gCol4, gCo",
          "old_text": null,
          "new_text": "dow, 2.f, -2.f, 0, 0}, {'A', gCol4, gCo",
          "old_line_content": "",
          "new_line_content": "    SendMessage(gHwndFrame, WM_CLOSE, 0, 0);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 537,
          "old_api": "RevealingLettersAnim->St",
          "new_api": null,
          "old_text": "RevealingLettersAnim->St",
          "new_text": null,
          "old_line_content": "    SetLettersSumatraUpTo(0);",
          "new_line_content": "#define REVEALING_ANIM_DUR double(2)",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "CalcLettersLayout(",
          "new_api": null,
          "old_text": " CalcLettersLayout(",
          "new_text": null,
          "old_line_content": "    SetLettersSumatra();",
          "new_line_content": "static void RevealingLettersAnimStart() {",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "s& g, Font* f, in",
          "new_api": null,
          "old_text": "s& g, Font* f, in",
          "new_text": null,
          "old_line_content": "    InvalidateFrame();",
          "new_line_content": "    int framesPerSec = (int)(double(SUMATRA_LETTERS_COUNT) / REVEALING_ANIM_DUR);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "Layout)\n        return;\n\n    LetterIn",
          "new_api": null,
          "old_text": "Layout)\n        return;\n\n    LetterIn",
          "new_text": null,
          "old_line_content": "    if (gRevealingLettersAnim->ElapsedTotal() > REVEALING_ANIM_DUR) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "const REAL letterSpacing",
          "new_api": null,
          "old_text": " const REAL letterSpacing ",
          "new_text": null,
          "old_line_content": "        RevealingLettersAnimStop();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "counter last iteration of the loop\n    WCHAR s[2]",
          "new_api": null,
          "old_text": "counter last iteration of the loop\n    WCHAR s[2]",
          "new_text": null,
          "old_line_content": "    DWORD timeOut = gRevealingLettersAnim->GetTimeoutInMilliseconds();",
          "new_line_content": "    gRevealingLettersAnim = nullptr;",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "bbox;\n    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_api": null,
          "old_text": "bbox;\n    for (int i = 0; i < dimof(gLetters); i++) {\n     ",
          "new_text": null,
          "old_line_content": "    SetLettersSumatraUpTo(++gRevealingLettersAnimLettersToShow);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "&gLetters[i];\n        s[0] =",
          "new_api": null,
          "old_text": " &gLetters[i];\n        s[0] =",
          "new_text": null,
          "old_line_content": "    gRevealingLettersAnim->Step();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "g.Measur",
          "new_api": null,
          "old_text": "\n        g.Measur",
          "new_text": null,
          "old_line_content": "    InvalidateFrame();",
          "new_line_content": "static void RevealingLettersAnim() {",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "Color color) {",
          "new_api": null,
          "old_text": "Color color) {\n",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_line_content": "    if (didLayout)",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "egular);\n    RectF maxbox(0, y, dx, 0);\n    Re",
          "new_api": null,
          "old_text": "egular);\n    RectF maxbox(0, y, dx, 0);\n    Re",
          "new_text": null,
          "old_line_content": "        g.MeasureString(s, 1, f, origin, &sfmt, &bbox);",
          "new_line_content": "    LetterInfo* li;",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "sft.SetFormat",
          "new_api": null,
          "old_text": "  sft.SetFormat",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_line_content": "        li = &gLetters[i];",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "SolidBrush b(Color(0xff, 0",
          "new_api": null,
          "old_text": " SolidBrush b(Color(0xff, 0",
          "new_text": null,
          "old_line_content": "    RevealingLettersAnimStart();",
          "new_line_content": "        totalDx += letterSpacing;",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "i++) {\n        li = &gLetters[i];",
          "new_api": null,
          "old_text": " i++) {\n        li = &gLetters[i];\n    ",
          "new_text": null,
          "old_line_content": "    sft.SetAlignment(StringAlignmentCenter);",
          "new_line_content": "static REAL DrawMessage(Graphics& g, const WCHAR* msg, REAL y, REAL dx, Color color) {",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "li->c;\n        if (s[0",
          "new_api": null,
          "old_text": "li->c;\n        if (s[0",
          "new_text": null,
          "old_line_content": "    if (trans::IsCurrLangRtl())",
          "new_line_content": "    AutoFreeW s(str::Dup(msg));",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "RotateTransform",
          "new_api": null,
          "old_text": "           return;\n\n        g.RotateTransform(li->rotatio",
          "new_text": null,
          "old_line_content": "        sft.SetFormatFlags(StringFormatFlagsDirectionRightToLeft);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "li->colShadow);",
          "new_api": null,
          "old_text": "li->colShadow);\n       ",
          "new_text": null,
          "old_line_content": "        SolidBrush b(Color(0xff, 0xff, 0xff));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "i->x - 3.f, y + 4.f + li->dyOff);",
          "new_api": null,
          "old_text": "i->x - 3.f, y + 4.f + li->dyOff);\n     ",
          "new_text": null,
          "old_line_content": "        g.DrawString(s, -1, &f, bbox, &sft, &b);",
          "new_line_content": "    bbox.X += (dx - bbox.Width) / 2.f;",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "ntF o1(li->x, y + li->dyOff);\n        g",
          "new_api": null,
          "old_text": "ntF o1(li->x, y + li->dyOff);\n        g",
          "new_text": null,
          "old_line_content": "    g.DrawString(s, -1, &f, bbox, &sft, &b);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "f",
          "new_api": null,
          "old_text": "f(gLetters) - 1",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "_s = L\"v\" CURR_VERSION_STR;\n#if DRAW_TEXT_SHADOW",
          "new_api": null,
          "old_text": "_s = L\"v\" CURR_VERSION_STR;\n#if DRAW_TEXT_SHADOW\n ",
          "new_text": null,
          "old_line_content": "        g.RotateTransform(li->rotation, MatrixOrderAppend);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "rawString",
          "new_api": null,
          "old_text": "rawString(ver_s, -1, fVer, Poi",
          "new_text": null,
          "old_line_content": "        g.DrawString(s, 1, f, o2, &b2);",
          "new_line_content": "        li = &gLetters[i];",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "SetSmoothingMode",
          "new_api": null,
          "old_text": "tyHighQuality);\n    g.SetSmoothingMode(SmoothingMo",
          "new_text": null,
          "old_line_content": "        g.RotateTransform(li->rotation, MatrixOrderAppend);",
          "new_line_content": "#if DRAW_TEXT_SHADOW",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": ");\n    g.SetPageUn",
          "new_api": null,
          "old_text": ");\n    g.SetPageUn",
          "new_text": null,
          "old_line_content": "        g.ResetTransform();",
          "new_line_content": "        // draw shadow first",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "CalcLettersL",
          "new_api": null,
          "old_text": "   CalcLettersL",
          "new_text": null,
          "old_line_content": "    REAL x = gLetters[dimof(gLetters) - 1].x;",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": ".dx);\n\n    Gdiplus::Color",
          "new_api": null,
          "old_text": ".dx);\n\n    Gdiplus::Color ",
          "new_text": null,
          "old_line_content": "    g.TranslateTransform(x, y);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "bgCol.SetFromCOLORR",
          "new_api": null,
          "old_text": "    bgCol.SetFromCOLORR",
          "new_text": null,
          "old_line_content": "    g.RotateTransform(45.f);",
          "new_line_content": "        SolidBrush b1(li->col);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(&bgBrush, r2",
          "new_text": null,
          "old_line_content": "    SolidBrush b1(Color(0, 0, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "leRegular);\n    DrawSu",
          "new_api": null,
          "old_text": "leRegular);\n    DrawSu",
          "new_text": null,
          "old_line_content": "    g.DrawString(ver_s, -1, fVer, PointF(x2 - 2, y2 - 1), &b1);",
          "new_line_content": "    // draw version number",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "msgY += DrawM",
          "new_api": null,
          "old_text": "     msgY += DrawM",
          "new_text": null,
          "old_line_content": "    g.ResetTransform();",
          "new_line_content": "    REAL x2 = 15;",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "sgError)\n        DrawMessage(g, gMsgError, msgY, (REAL",
          "new_api": null,
          "old_text": "sgError)\n        DrawMessage(g, gMsgError, msgY, (REAL",
          "new_text": null,
          "old_line_content": "    g.SetCompositingQuality(CompositingQualityHighQuality);",
          "new_line_content": "#if DRAW_TEXT_SHADOW",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "raphics g2((Image*)&bmp);\n    DrawF",
          "new_api": null,
          "old_text": "raphics g2((Image*)&bmp);\n    DrawF",
          "new_text": null,
          "old_line_content": "    bgCol.SetFromCOLORREF(WIN_BG_COLOR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "        DrawMessage(g, gMsgError, msgY, (REAL)r.dx, COLOR_MSG_FAILED);",
          "new_line_content": "    Font f2(L\"Impact\", 16, FontStyleRegular);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    DrawFrame2(g2, rc);",
          "new_line_content": "    if (gMsgError)",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "Module32First",
          "new_api": null,
          "old_text": "Module32First(snap, &mod);\n    while (cont) {\n        if (",
          "new_text": null,
          "old_line_content": "    AutoFreeW libmupdf(path::Join(gInstUninstGlobals.installDir, L\"libmupdf.dll\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "Module32Next",
          "new_api": null,
          "old_text": "Module32Next(snap, &mod);",
          "new_text": null,
          "old_line_content": "    BOOL cont = Module32First(snap, &mod);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    HDC dc = BeginPaint(hwnd, &ps);",
          "new_line_content": "    Graphics g(dc);",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "x?scid=kb;en-us;207132\nstatic bool Registe",
          "new_api": null,
          "old_text": "x?scid=kb;en-us;207132\nstatic bool Registe",
          "new_text": null,
          "old_line_content": "        if (path::IsSame(libmupdf, mod.szExePath) || path::IsSame(browserPlugin, mod.szExePath)) {",
          "new_line_content": "    mod.dwSize = sizeof(mod);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    DrawFrame(hwnd, dc, &ps);",
          "new_line_content": "    ClientRect rc(hwnd);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "    EndPaint(hwnd, &ps);",
          "new_line_content": "    Bitmap bmp(rc.dx, rc.dy, &g);",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "R* args = nullptr) {",
          "new_api": null,
          "old_text": "R* args = nullptr) {\n   ",
          "new_text": null,
          "old_line_content": "        cont = Module32Next(snap, &mod);",
          "new_line_content": "        WCHAR* exePath = mod.szExePath;",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "oryW) {\n        AutoFr",
          "new_api": null,
          "old_text": "oryW) {\n        AutoFr",
          "new_text": null,
          "old_line_content": "    if (FAILED(OleInitialize(nullptr)))",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "gUnregProc)(VOID);",
          "new_api": null,
          "old_text": "gUnregProc)(VOID);\n        ",
          "new_text": null,
          "old_line_content": "        DynSetDllDirectoryW(dllDir);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "(DllInstallProc)GetP",
          "new_api": null,
          "old_text": "(DllInstallProc)GetP",
          "new_text": null,
          "old_line_content": "    HMODULE lib = LoadLibrary(dllPath);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "* func = install ? \"DllRegisterSe",
          "new_api": null,
          "old_text": "* func = install ? \"DllRegisterSe",
          "new_text": null,
          "old_line_content": "            DllInstallProc DllInstall = (DllInstallProc)GetProcAddress(lib, \"DllInstall\");",
          "new_line_content": "        AutoFreeW dllDir(path::GetDir(dllPath));",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "egUnreg = (DllRegUnregPro",
          "new_api": null,
          "old_text": "egUnreg = (DllRegUnregPro",
          "new_text": null,
          "old_line_content": "                ok = SUCCEEDED(DllInstall(install, args));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "return ok;\n}\n\nvoid",
          "new_api": null,
          "old_text": "\n\n    return ok;\n}\n\nvoid ",
          "new_text": null,
          "old_line_content": "            DllRegUnregProc DllRegUnreg = (DllRegUnregProc)GetProcAddress(lib, func);",
          "new_line_content": "        typedef HRESULT(WINAPI * DllRegUnregProc)(VOID);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "in the target installat",
          "new_api": null,
          "old_text": " in the target installat",
          "new_text": null,
          "old_line_content": "        DynSetDllDirectoryW(L\"\");",
          "new_line_content": "        if (!args) {",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "ServerDLL",
          "new_api": null,
          "old_text": "ServerDLL(dllPath, fa",
          "new_text": null,
          "old_line_content": "    if (!file::Exists(dllPath)) {",
          "new_line_content": "    if (DynSetDllDirectoryW)",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": "ath",
          "new_api": null,
          "old_text": "ath(GetPdfFilterPath());\n    if",
          "new_text": null,
          "old_line_content": "        dllPath.Set(GetInstalledBrowserPluginPath());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "l PDF search filter\"));\n}\n\nvoid U",
          "new_api": null,
          "old_text": "l PDF search filter\"));\n}\n\nvoid U",
          "new_text": null,
          "old_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "AutoFreeW dllPath(GetPdfFilterPath());",
          "new_api": null,
          "old_text": "  AutoFreeW dllPath(GetPdfFilterPath());",
          "new_text": null,
          "old_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall browser plugin\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "DLL",
          "new_api": null,
          "old_text": "DLL(dllPath, true))\n        Notif",
          "new_text": null,
          "old_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "stall PDF previewer\"));\n}\n\nvoid UninstallPd",
          "new_api": null,
          "old_text": "stall PDF previewer\"));\n}\n\nvoid UninstallPd",
          "new_text": null,
          "old_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall PDF search filter\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": ", false))\n        NotifyFailed(_",
          "new_api": null,
          "old_text": ", false))\n        NotifyFailed(_",
          "new_text": null,
          "old_line_content": "    if (!RegisterServerDLL(dllPath, true))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "DF previewer\"));\n}\n\n#define TEN_SECON",
          "new_api": null,
          "old_text": "DF previewer\"));\n}\n\n#define TEN_SECON",
          "new_text": null,
          "old_line_content": "        NotifyFailed(_TR(\"Couldn't install PDF previewer\"));",
          "new_line_content": "void UninstallPdfFilter() {",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": ", processId));\n    if (!hModSnaps",
          "new_api": null,
          "old_text": ", processId));\n    if (!hModSnaps",
          "new_text": null,
          "old_line_content": "    if (!RegisterServerDLL(dllPath, false))",
          "new_line_content": "void InstallPdfPreviewer() {",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "eturn false;\n\n    MODULEENTRY32W me32 =",
          "new_api": null,
          "old_text": "eturn false;\n\n    MODULEENTRY32W me32 =",
          "new_text": null,
          "old_line_content": "        NotifyFailed(_TR(\"Couldn't uninstall PDF previewer\"));",
          "new_line_content": "    AutoFreeW dllPath(GetPdfPreviewerPath());",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "napshot, &me32);\n    }",
          "new_api": null,
          "old_text": "napshot, &me32);\n    }",
          "new_text": null,
          "old_line_content": "    if (!hModSnapshot.IsValid())",
          "new_line_content": "    AutoFreeW dllPath(GetPdfPreviewerPath());",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": ".\n// If <waitUntilTerminated> is tr",
          "new_api": null,
          "old_text": ".\n// If <waitUntilTerminated> is tr",
          "new_text": null,
          "old_line_content": "    BOOL ok = Module32FirstW(hModSnapshot, &me32);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "lly killed.\n// Returns TRUE if killed a",
          "new_api": null,
          "old_text": "lly killed.\n// Returns TRUE if killed a ",
          "new_text": null,
          "old_line_content": "        if (path::IsSame(modulePath, me32.szExePath))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "RD processId, const WCHAR* moduleP",
          "new_api": null,
          "old_text": "RD processId, const WCHAR* moduleP",
          "new_text": null,
          "old_line_content": "        ok = Module32NextW(hModSnapshot, &me32);",
          "new_line_content": "    ScopedHandle hModSnapshot(CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, processId));",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "ndle, processId));\n    if (!hProcess.",
          "new_api": null,
          "old_text": "ndle, processId));\n    if (!hProcess.",
          "new_text": null,
          "old_line_content": "    if (!IsProcWithName(processId, modulePath))",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "a given\n// module",
          "new_api": null,
          "old_text": " a given\n// module",
          "new_text": null,
          "old_line_content": "    if (!hProcess.IsValid())",
          "new_line_content": "// If <waitUntilTerminated> is true, will wait until process is fully killed.",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "ateToolhelp32Snapshot",
          "new_api": null,
          "old_text": "ateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));\n ",
          "new_text": null,
          "old_line_content": "        WaitForSingleObject(hProcess, TEN_SECONDS_IN_MS);",
          "new_line_content": "    DWORD dwAccess = PROCESS_QUERY_INFORMATION | PROCESS_VM_READ | PROCESS_TERMINATE;",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "ath, waitUntilTerminated))\n            killCoun",
          "new_api": null,
          "old_text": "ath, waitUntilTerminated))\n            killCoun",
          "new_text": null,
          "old_line_content": "    ScopedHandle hProcSnapshot(CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));",
          "new_line_content": "    if (waitUntilTerminated)",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "UpdateWindow(GetDesktopWind",
          "new_api": null,
          "old_text": "\n        UpdateWindow(GetDesktopWind",
          "new_text": null,
          "old_line_content": "    if (!Process32First(hProcSnapshot, &pe32))",
          "new_line_content": "// returns number of killed processes that have a module (exe or dll) with a given",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "to kill it so that we can over-write the executable */\nvoid KillSumatr",
          "new_api": null,
          "old_text": " to kill it so that we can over-write the executable */\nvoid KillSumatr",
          "new_text": null,
          "old_line_content": "        if (KillProcIdWithName(pe32.th32ProcessID, modulePath, waitUntilTerminated))",
          "new_line_content": "    if (INVALID_HANDLE_VALUE == hProcSnapshot)",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "Path",
          "new_api": null,
          "old_text": "Path();\n    KillProcess(exePath, tr",
          "new_text": null,
          "old_line_content": "    } while (Process32Next(hProcSnapshot, &pe32));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "e libmupdf.dll or",
          "new_api": null,
          "old_text": "e libmupdf.dll or ",
          "new_text": null,
          "old_line_content": "        UpdateWindow(GetDesktopWindow());",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "DLE_VALUE == snap)",
          "new_api": null,
          "old_text": "DLE_VALUE == snap)\n  ",
          "new_text": null,
          "old_line_content": "    WCHAR* exePath = GetInstalledExePath();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "eturn;\n\n    PROCESSENTRY32",
          "new_api": null,
          "old_text": "eturn;\n\n    PROCESSENTRY32",
          "new_text": null,
          "old_line_content": "    KillProcess(exePath, true);",
          "new_line_content": "    if (killCount > 0) {",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "e = sizeof(proc);\n        ok = Process32Next(sn",
          "new_api": null,
          "old_text": "e = sizeof(proc);\n        ok = Process32Next(sn",
          "new_text": null,
          "old_line_content": "    ScopedHandle snap(CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));",
          "new_line_content": "/* if the app is running, we have to kill it so that we can over-write the executable */",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": "APP_NAME_STR,    L\"plugin-c",
          "new_api": null,
          "old_text": "APP_NAME_STR,    L\"plugin-c",
          "new_text": null,
          "old_line_content": "    BOOL ok = Process32First(snap, &proc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": ", L\"chrome.exe\",\n        L\"Google Chrom",
          "new_api": null,
          "old_text": ", L\"chrome.exe\",\n        L\"Google Chrom",
          "new_text": null,
          "old_line_content": "        if (IsUsingInstallation(proc.th32ProcessID)) {",
          "new_line_content": "// (i.e. have libmupdf.dll or npPdfViewer.dll loaded)",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "Explorer\",     L\"dllhos",
          "new_api": null,
          "old_text": " Explorer\",     L\"dllhos",
          "new_text": null,
          "old_line_content": "            names.Append(str::Dup(proc.szExeFile));",
          "new_line_content": "static void ProcessesUsingInstallation(WStrVec& names) {",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "= path::GetBaseNameNoFree",
          "new_api": null,
          "old_text": " = path::GetBaseNameNoFree",
          "new_text": null,
          "old_line_content": "        ok = Process32Next(snap, &proc);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "st WCHAR* name = ReadableProcName",
          "new_api": null,
          "old_text": "st WCHAR* name = ReadableProcName",
          "new_text": null,
          "old_line_content": "    const WCHAR* procName = path::GetBaseNameNoFree(procPath);",
          "new_line_content": "        proc.dwSize = sizeof(proc);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "Set",
          "new_api": null,
          "old_text": "1)\n            procNames.Set(st",
          "new_text": null,
          "old_line_content": "        if (str::EqI(procName, nameList[i]))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "ose %s to proceed!\"), p",
          "new_api": null,
          "old_text": "ose %s to proceed!\"), p",
          "new_text": null,
          "old_line_content": "    AutoFreeW procNames(str::Dup(ReadableProcName(gProcessesToClose.at(0))));",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "size",
          "new_api": null,
          "old_text": "oClose.size() == 0;\n    if (possi",
          "new_text": null,
          "old_line_content": "            procNames.Set(str::Join(procNames, L\", \", name));",
          "new_line_content": "            return nameList[i + 1];",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "SetCloseProcessMsg();",
          "new_api": null,
          "old_text": "\n        SetCloseProcessMsg();\n     ",
          "new_text": null,
          "old_line_content": "            procNames.Set(str::Join(procNames, L\" and \", name));",
          "new_line_content": "    return procName;",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "(MB_ICONEXCLAMATION);\n    }\n    In",
          "new_api": null,
          "old_text": "(MB_ICONEXCLAMATION);\n    }\n    In",
          "new_text": null,
          "old_line_content": "    AutoFreeW s(str::Format(_TR(\"Please close %s to proceed!\"), procNames));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "return possible;\n}\n\nSIZE",
          "new_api": null,
          "old_text": "  return possible;\n}\n\nSIZE ",
          "new_text": null,
          "old_line_content": "    SetMsg(s, COLOR_MSG_FAILED);",
          "new_line_content": "static void SetCloseProcessMsg() {",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "nCtrl* b, const WCHA",
          "new_api": null,
          "old_text": "nCtrl* b, const WCHA",
          "new_text": null,
          "old_line_content": "        SetCloseProcessMsg();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "win::SetText(hwnd, s);\n    SIZE",
          "new_api": null,
          "old_text": "win::SetText(hwnd, s);\n    SIZE",
          "new_text": null,
          "old_line_content": "            MessageBeep(MB_ICONEXCLAMATION);",
          "new_line_content": "bool CheckInstallUninstallPossible(bool silent) {",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "WCHAR* s) {",
          "new_api": null,
          "old_text": "WCHAR* s) {\n",
          "new_text": null,
          "old_line_content": "    s.cy += dpiAdjust(2) * 2;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": ", &r);\n    SIZE size",
          "new_api": null,
          "old_text": ", &r);\n    SIZE size ",
          "new_text": null,
          "old_line_content": "    win::SetText(hwnd, s);",
          "new_line_content": "    SIZE s = {};",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": ";\n    gButton",
          "new_api": null,
          "old_text": ";\n    gButton",
          "new_text": null,
          "old_line_content": "    b->SetText(s);",
          "new_line_content": "    auto hwnd = b->hwnd;",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "CLOSE, 0, 0);\n}",
          "new_api": null,
          "old_text": "CLOSE, 0, 0);\n}\n\n",
          "new_text": null,
          "old_line_content": "    SIZE size = b->GetIdealSize();",
          "new_line_content": "    return size;",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "is inspi",
          "new_api": null,
          "old_text": " is inspi",
          "new_text": null,
          "old_line_content": "    int x = RectDx(r) - size.cx - WINDOW_MARGIN;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "ruct {",
          "new_api": null,
          "old_text": "ruct {\n  ",
          "new_text": null,
          "old_line_content": "    int y = RectDy(r) - size.cy - WINDOW_MARGIN;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "// part calc",
          "new_api": null,
          "old_text": " // part calc",
          "new_text": null,
          "old_line_content": "    b->SetPos(&r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "seconds\n#define",
          "new_api": null,
          "old_text": "seconds\n#define",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_line_content": "    // note: clearly, not random but seems to work ok anyway",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "tic FrameTimeoutCalcu",
          "new_api": null,
          "old_text": "tic FrameTimeoutCalcu",
          "new_text": null,
          "old_line_content": "        gLetters[i].c = RandUppercaseLetter();",
          "new_line_content": "    static char l = 'A' - 1;",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": ") {\n    int fra",
          "new_api": null,
          "old_text": ") {\n    int fra",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < dimof(gLetters); i++) {",
          "new_line_content": "static void RandomizeLetters()",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 41,
      "total_additions": 100,
      "total_deletions": 96,
      "total_api_changes": 237
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 237,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          203,
          205,
          206,
          207,
          188,
          190
        ]
      }
    },
    "api_calls_before": 184,
    "api_calls_after": 189,
    "diff_info": {
      "added_lines": 12,
      "removed_lines": 2,
      "total_diff_lines": 35
    }
  }
}
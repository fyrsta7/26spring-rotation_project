{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/a8b7d93b0e3a79bc2a906486dc83f87c652f5260",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/a8b7d93b0e3a79bc2a906486dc83f87c652f5260/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/a8b7d93b0e3a79bc2a906486dc83f87c652f5260/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/sumatrapdf/modified_file/a8b7d93b0e3a79bc2a906486dc83f87c652f5260/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 407,
          "old_api": "assert",
          "new_api": "fz_newhash",
          "old_text": "assert(dst->n == ds->n + 1)",
          "new_text": "fz_newhash(509, src->n - 1)",
          "old_line_content": "\tassert(dst->n == ds->n + 1);",
          "new_line_content": "\tfz_hashtable *colors = fz_newhash(509, src->n - 1);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "fastgraytocmyk",
          "new_api": "fz_hashinsert",
          "old_text": "fastgraytocmyk(sp, dp)",
          "new_text": "fz_hashinsert(colors, s - src->n, d - dst->n)",
          "old_line_content": "\t\telse if (ds == fz_devicecmyk) fastgraytocmyk(sp, dp);",
          "new_line_content": "\t\t\tfz_hashinsert(colors, s - src->n, d - dst->n);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "fz_stdconvpixmap",
          "new_api": "fastgraytorgb",
          "old_text": "fz_stdconvpixmap(sp, dp)",
          "new_text": "fastgraytorgb(sp, dp)",
          "old_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "new_line_content": "\t\tif (ds == fz_devicergb) fastgraytorgb(sp, dp);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "fz_stdconvpixmap",
          "new_api": "fastrgbtogray",
          "old_text": "fz_stdconvpixmap(sp, dp)",
          "new_text": "fastrgbtogray(sp, dp)",
          "old_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "new_line_content": "\t\tif (ds == fz_devicegray) fastrgbtogray(sp, dp);",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "assert",
          "new_api": "fastcmyktogray",
          "old_text": "assert(srcs->toxyz && dsts->fromxyz)",
          "new_text": "fastcmyktogray(sp, dp)",
          "old_line_content": "\t\tassert(srcs->toxyz && dsts->fromxyz);",
          "new_line_content": "\t\tif (ds == fz_devicegray) fastcmyktogray(sp, dp);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "toxyz",
          "new_api": "fastcmyktobgr",
          "old_text": "srcs->toxyz(srcs, srcv, xyz)",
          "new_text": "fastcmyktobgr(sp, dp)",
          "old_line_content": "\t\tsrcs->toxyz(srcs, srcv, xyz);",
          "new_line_content": "\t\telse if (ds == fz_devicebgr) fastcmyktobgr(sp, dp);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "fromxyz",
          "new_api": "fastcmyktorgb",
          "old_text": "dsts->fromxyz(dsts, xyz, dstv)",
          "new_text": "fastcmyktorgb(sp, dp)",
          "old_line_content": "\t\tdsts->fromxyz(dsts, xyz, dstv);",
          "new_line_content": "\t\telse if (ds == fz_devicergb) fastcmyktorgb(sp, dp);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "MIN",
          "new_api": "fz_stdconvcolor",
          "old_text": "MIN(sv[2] + sv[3], 1)",
          "new_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "old_line_content": "\t\t\tdv[2] = 1 - MIN(sv[2] + sv[3], 1);",
          "new_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "fz_stdconvcolor",
          "new_api": "MIN",
          "old_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "new_text": "MIN(sv[1] + sv[3], 1)",
          "old_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "new_line_content": "\t\t\tdv[1] = 1 - MIN(sv[1] + sv[3], 1);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 530,
          "old_api": null,
          "new_api": "fz_stdconvcolor",
          "old_text": null,
          "new_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "old_line_content": "\t\t\tfloat y = 1 - sv[2];",
          "new_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(src->w == dst->w && src->h == dst->h)",
          "old_line_content": "\t{",
          "new_line_content": "\tassert(src->w == dst->w && src->h == dst->h);",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(src->n == ss->n + 1)",
          "old_line_content": "\t\tfor (x = 0; x < src->w; x++)",
          "new_line_content": "\tassert(src->n == ss->n + 1);",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(dst->n == ds->n + 1)",
          "old_line_content": "\t\t{",
          "new_line_content": "\tassert(dst->n == ds->n + 1);",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "fz_hashfind",
          "old_text": null,
          "new_text": "fz_hashfind(colors, s)",
          "old_line_content": "\t\t\t\t*d++ = dstv[k] * 255;",
          "new_line_content": "\t\t\tif ((c = fz_hashfind(colors, s)))",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(d, c, dst->n - 1)",
          "old_line_content": "\t\t\t*d++ = *s++;",
          "new_line_content": "\t\t\t\tmemcpy(d, c, dst->n - 1);",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(m, y)",
          "old_line_content": "\t\t\tdv[1] = sv[1];",
          "new_line_content": "\t\t\tfloat k = MIN(c, MIN(m, y));",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "fz_stdconvcolor",
          "old_text": null,
          "new_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "old_line_content": "\t\t\tfloat y = 1 - sv[0];",
          "new_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "fz_convertcolor",
          "old_text": null,
          "new_text": "fz_convertcolor(ss, srcv, ds, dstv)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfz_convertcolor(ss, srcv, ds, dstv);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "fz_freehash",
          "old_text": null,
          "new_text": "fz_freehash(colors)",
          "old_line_content": "\telse if (ss == fz_devicergb)",
          "new_line_content": "\tfz_freehash(colors);",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(m, y)",
          "old_line_content": "\t\telse if (ds == fz_devicergb)",
          "new_line_content": "\t\t\tfloat k = MIN(c, MIN(m, y));",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ss && ds)",
          "old_line_content": "\t{",
          "new_line_content": "\tassert(ss && ds);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "fastgraytorgb",
          "old_text": null,
          "new_text": "fastgraytorgb(sp, dp)",
          "old_line_content": "\t}",
          "new_line_content": "\t\telse if (ds == fz_devicebgr) fastgraytorgb(sp, dp); /* bgr == rgb here */",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "fastgraytocmyk",
          "old_text": null,
          "new_text": "fastgraytocmyk(sp, dp)",
          "old_line_content": "",
          "new_line_content": "\t\telse if (ds == fz_devicecmyk) fastgraytocmyk(sp, dp);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "fz_stdconvpixmap",
          "old_text": null,
          "new_text": "fz_stdconvpixmap(sp, dp)",
          "old_line_content": "\telse if (ss == fz_devicecmyk)",
          "new_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "fastrgbtobgr",
          "old_text": null,
          "new_text": "fastrgbtobgr(sp, dp)",
          "old_line_content": "\t}",
          "new_line_content": "\t\telse if (ds == fz_devicebgr) fastrgbtobgr(sp, dp);",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": null,
          "new_api": "fastrgbtocmyk",
          "old_text": null,
          "new_text": "fastrgbtocmyk(sp, dp)",
          "old_line_content": "",
          "new_line_content": "\t\telse if (ds == fz_devicecmyk) fastrgbtocmyk(sp, dp);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(c + m + y + sv[3], 1)",
          "old_line_content": "\t\t\tdv[2] = rgb[0];",
          "new_line_content": "\t\t\tdv[0] = 1 - MIN(c + m + y + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "cmyktoxyz",
          "old_text": null,
          "new_text": "cmyktoxyz(nil, sv, dv)",
          "old_line_content": "#endif",
          "new_line_content": "\t\t\tcmyktoxyz(nil, sv, dv);",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "fastbgrtogray",
          "old_text": null,
          "new_text": "fastbgrtogray(sp, dp)",
          "old_line_content": "static void",
          "new_line_content": "\t\tif (ds == fz_devicegray) fastbgrtogray(sp, dp);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(sv[0] + sv[3], 1)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tdv[0] = 1 - MIN(sv[0] + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "fastrgbtobgr",
          "old_text": null,
          "new_text": "fastrgbtobgr(sp, dp)",
          "old_line_content": "fz_stdconvcolor(fz_colorspace *srcs, float *srcv, fz_colorspace *dsts, float *dstv)",
          "new_line_content": "\t\telse if (ds == fz_devicergb) fastrgbtobgr(sp, dp); /* bgr = rgb here */",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(sv[2] + sv[3], 1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdv[2] = 1 - MIN(sv[2] + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "fastbgrtocmyk",
          "old_text": null,
          "new_text": "fastbgrtocmyk(sp, dp)",
          "old_line_content": "{",
          "new_line_content": "\t\telse if (ds == fz_devicecmyk) fastbgrtocmyk(sp, dp);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "fz_stdconvpixmap",
          "old_text": null,
          "new_text": "fz_stdconvpixmap(sp, dp)",
          "old_line_content": "\tfloat xyz[3];",
          "new_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "cmyktoxyz",
          "old_text": null,
          "new_text": "cmyktoxyz(nil, sv, rgb)",
          "old_line_content": "",
          "new_line_content": "\t\t\tcmyktoxyz(nil, sv, rgb);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "fz_stdconvpixmap",
          "old_text": null,
          "new_text": "fz_stdconvpixmap(sp, dp)",
          "old_line_content": "\t\tfor (i = 0; i < dsts->n; i++)",
          "new_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "fz_stdconvpixmap",
          "old_text": null,
          "new_text": "fz_stdconvpixmap(sp, dp)",
          "old_line_content": "\telse",
          "new_line_content": "\telse fz_stdconvpixmap(sp, dp);",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(sv[2] + sv[3], 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdv[0] = 1 - MIN(sv[2] + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(sv[1] + sv[3], 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdv[1] = 1 - MIN(sv[1] + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(sv[0] + sv[3], 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdv[2] = 1 - MIN(sv[0] + sv[3], 1);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "fz_stdconvcolor",
          "old_text": null,
          "new_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "fz_stdconvcolor",
          "old_text": null,
          "new_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "old_line_content": "",
          "new_line_content": "\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(srcs->toxyz && dsts->fromxyz)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tassert(srcs->toxyz && dsts->fromxyz);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "toxyz",
          "old_text": null,
          "new_text": "srcs->toxyz(srcs, srcv, xyz)",
          "old_line_content": "\t\t\tdv[0] = sv[0];",
          "new_line_content": "\t\tsrcs->toxyz(srcs, srcv, xyz);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "fromxyz",
          "old_text": null,
          "new_text": "dsts->fromxyz(dsts, xyz, dstv)",
          "old_line_content": "\t\t\tdv[1] = sv[0];",
          "new_line_content": "\t\tdsts->fromxyz(dsts, xyz, dstv);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "CLAMP",
          "old_text": null,
          "new_text": "CLAMP(dstv[i], 0, 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tdstv[i] = CLAMP(dstv[i], 0, 1);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 531,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(m, y)",
          "new_text": null,
          "old_line_content": "\t\t\tfloat k = MIN(c, MIN(m, y));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(src->w == dst->w && src->h == dst->h)",
          "new_text": null,
          "old_line_content": "\tassert(src->w == dst->w && src->h == dst->h);",
          "new_line_content": "\t/* cf. http://bugs.ghostscript.com/show_bug.cgi?id=691637 */",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(src->n == ss->n + 1)",
          "new_text": null,
          "old_line_content": "\tassert(src->n == ss->n + 1);",
          "new_line_content": "\t/* memoize fz_convertcolor, as it can be quite inefficient for PostScript functions */",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "fz_stdconvcolor",
          "new_api": null,
          "old_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "new_text": null,
          "old_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "fz_convertcolor",
          "new_api": null,
          "old_text": "fz_convertcolor(ss, srcv, ds, dstv)",
          "new_text": null,
          "old_line_content": "\t\t\tfz_convertcolor(ss, srcv, ds, dstv);",
          "new_line_content": "\t\tfor (x = 0; x < src->w; x++)",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(m, y)",
          "new_text": null,
          "old_line_content": "\t\t\tfloat k = MIN(c, MIN(m, y));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ss && ds)",
          "new_text": null,
          "old_line_content": "\tassert(ss && ds);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "fastgraytorgb",
          "new_api": null,
          "old_text": "fastgraytorgb(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\tif (ds == fz_devicergb) fastgraytorgb(sp, dp);",
          "new_line_content": "\t\t\t*d++ = *s++;",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "fz_stdconvcolor",
          "new_api": null,
          "old_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "new_text": null,
          "old_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": "fastgraytorgb",
          "new_api": null,
          "old_text": "fastgraytorgb(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicebgr) fastgraytorgb(sp, dp); /* bgr == rgb here */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "fz_stdconvpixmap",
          "new_api": null,
          "old_text": "fz_stdconvpixmap(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "fastrgbtogray",
          "new_api": null,
          "old_text": "fastrgbtogray(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\tif (ds == fz_devicegray) fastrgbtogray(sp, dp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "fastrgbtobgr",
          "new_api": null,
          "old_text": "fastrgbtobgr(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicebgr) fastrgbtobgr(sp, dp);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "fastrgbtocmyk",
          "new_api": null,
          "old_text": "fastrgbtocmyk(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicecmyk) fastrgbtocmyk(sp, dp);",
          "new_line_content": "fz_convertpixmap(fz_pixmap *sp, fz_pixmap *dp)",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(c + m + y + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[0] = 1 - MIN(c + m + y + sv[3], 1);",
          "new_line_content": "\t\t\tfloat m = 1 - sv[1];",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "fz_stdconvpixmap",
          "new_api": null,
          "old_text": "fz_stdconvpixmap(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse fz_stdconvpixmap(sp, dp);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "fastbgrtogray",
          "new_api": null,
          "old_text": "fastbgrtogray(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\tif (ds == fz_devicegray) fastbgrtogray(sp, dp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "fastrgbtobgr",
          "new_api": null,
          "old_text": "fastrgbtobgr(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicergb) fastrgbtobgr(sp, dp); /* bgr = rgb here */",
          "new_line_content": "\tif (ss == fz_devicegray)",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "fastbgrtocmyk",
          "new_api": null,
          "old_text": "fastbgrtocmyk(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicecmyk) fastbgrtocmyk(sp, dp);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "cmyktoxyz",
          "new_api": null,
          "old_text": "cmyktoxyz(nil, sv, dv)",
          "new_text": null,
          "old_line_content": "\t\t\tcmyktoxyz(nil, sv, dv);",
          "new_line_content": "\t\t\tdv[2] = y - k;",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(sv[0] + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[0] = 1 - MIN(sv[0] + sv[3], 1);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(sv[1] + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[1] = 1 - MIN(sv[1] + sv[3], 1);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "fastcmyktogray",
          "new_api": null,
          "old_text": "fastcmyktogray(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\tif (ds == fz_devicegray) fastcmyktogray(sp, dp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "fastcmyktobgr",
          "new_api": null,
          "old_text": "fastcmyktobgr(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicebgr) fastcmyktobgr(sp, dp);",
          "new_line_content": "\telse if (ss == fz_devicergb)",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "fastcmyktorgb",
          "new_api": null,
          "old_text": "fastcmyktorgb(sp, dp)",
          "new_text": null,
          "old_line_content": "\t\telse if (ds == fz_devicergb) fastcmyktorgb(sp, dp);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "cmyktoxyz",
          "new_api": null,
          "old_text": "cmyktoxyz(nil, sv, rgb)",
          "new_text": null,
          "old_line_content": "\t\t\tcmyktoxyz(nil, sv, rgb);",
          "new_line_content": "\t\t\tfloat c = sv[0] * 0.3f;",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(sv[2] + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[0] = 1 - MIN(sv[2] + sv[3], 1);",
          "new_line_content": "\t\telse if (ds == fz_devicergb)",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(sv[1] + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[1] = 1 - MIN(sv[1] + sv[3], 1);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(sv[0] + sv[3], 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdv[2] = 1 - MIN(sv[0] + sv[3], 1);",
          "new_line_content": "#ifdef SLOWCMYK",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "fz_stdconvcolor",
          "new_api": null,
          "old_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "new_text": null,
          "old_line_content": "\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "new_line_content": "\t\telse if (ds == fz_devicebgr)",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "CLAMP",
          "new_api": null,
          "old_text": "CLAMP(dstv[i], 0, 1)",
          "new_text": null,
          "old_line_content": "\t\t\tdstv[i] = CLAMP(dstv[i], 0, 1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "fz_stdconvcolor",
          "new_api": null,
          "old_text": "fz_stdconvcolor(ss, sv, ds, dv)",
          "new_text": null,
          "old_line_content": "\t\t\tfz_stdconvcolor(ss, sv, ds, dv);",
          "new_line_content": "void",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 9,
      "total_additions": 37,
      "total_deletions": 32,
      "total_api_changes": 78
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 19,
        "api_related_lines": 78,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          418,
          420,
          422,
          423,
          424,
          425,
          426,
          427,
          441,
          408,
          409
        ]
      }
    },
    "api_calls_before": 81,
    "api_calls_after": 86,
    "diff_info": {
      "added_lines": 19,
      "removed_lines": 0,
      "total_diff_lines": 47
    }
  }
}
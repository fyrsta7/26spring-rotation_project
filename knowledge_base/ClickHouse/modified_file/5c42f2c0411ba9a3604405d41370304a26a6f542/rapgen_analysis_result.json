{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/5c42f2c0411ba9a3604405d41370304a26a6f542",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/5c42f2c0411ba9a3604405d41370304a26a6f542/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/5c42f2c0411ba9a3604405d41370304a26a6f542/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/5c42f2c0411ba9a3604405d41370304a26a6f542/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1116,
          "old_api": "get",
          "new_api": "JoinCommon::addDefaultValues(*col, type_name[i].type, default_count)",
          "old_text": "col.get()",
          "new_text": "JoinCommon::addDefaultValues(*col, type_name[i].type, default_count)",
          "old_line_content": "                    if (auto * nullable_col = typeid_cast<ColumnNullable *>(col.get());",
          "new_line_content": "                    JoinCommon::addDefaultValues(*col, type_name[i].type, default_count);",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "insertFromNotNullable",
          "new_api": "getByPosition",
          "old_text": "nullable_col->insertFromNotNullable(*column_from_block.column, lazy_output.row_nums[j])",
          "new_text": "reinterpret_cast<const Block *>(lazy_output.blocks[j])->getByPosition(right_indexes[i])",
          "old_line_content": "                        nullable_col->insertFromNotNullable(*column_from_block.column, lazy_output.row_nums[j]);",
          "new_line_content": "                const auto & column_from_block = reinterpret_cast<const Block *>(lazy_output.blocks[j])->getByPosition(right_indexes[i]);",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "insertFrom",
          "new_api": "get",
          "old_text": "col->insertFrom(*column_from_block.column, lazy_output.row_nums[j])",
          "new_text": "col.get()",
          "old_line_content": "                col->insertFrom(*column_from_block.column, lazy_output.row_nums[j]);",
          "new_line_content": "                    if (auto * nullable_col = typeid_cast<ColumnNullable *>(col.get());",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "std::move(columns[i])",
          "new_api": "insertFrom",
          "old_text": "std::move(columns[i])",
          "new_text": "col->insertFrom(*column_from_block.column, lazy_output.row_nums[j])",
          "old_line_content": "        return ColumnWithTypeAndName(std::move(columns[i]), type_name[i].type, type_name[i].qualified_name);",
          "new_line_content": "                col->insertFrom(*column_from_block.column, lazy_output.row_nums[j]);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "name",
          "new_api": "getName",
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Columns {} and {} have different types {} and {}\",\n                    dest_column->getName(), column_from_block->getName(),\n                    demangle(typeid(*dest_column).name()), demangle(typeid(*column_from_block).name()))",
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR,\n                        \"Columns {} and {} can have different nullability only in joinGetOrNull\",\n                        dest_column->getName(), column_from_block->getName())",
          "old_line_content": "                throw Exception(ErrorCodes::LOGICAL_ERROR, \"Columns {} and {} have different types {} and {}\",",
          "new_line_content": "                    throw Exception(ErrorCodes::LOGICAL_ERROR,",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "name",
          "new_api": "getName",
          "old_text": "typeid(*column_from_block).name()",
          "new_text": "column_from_block->getName()",
          "old_line_content": "                    demangle(typeid(*dest_column).name()), demangle(typeid(*column_from_block).name()));",
          "new_line_content": "                        dest_column->getName(), column_from_block->getName());",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "constexpr",
          "new_api": "cloneEmpty",
          "old_text": "constexpr",
          "new_text": "src_column.column->cloneEmpty()",
          "old_line_content": "    static constexpr bool is_asof_join = STRICTNESS == JoinStrictness::Asof;",
          "new_line_content": "        columns.push_back(src_column.column->cloneEmpty());",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "constexpr",
          "new_api": "size",
          "old_text": "constexpr",
          "new_text": "src_column.column->size()",
          "old_line_content": "    static constexpr bool is_semi_join = STRICTNESS == JoinStrictness::Semi;",
          "new_line_content": "        columns.back()->reserve(src_column.column->size());",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "constexpr",
          "new_api": "emplace_back",
          "old_text": "constexpr",
          "new_text": "type_name.emplace_back(src_column.type, src_column.name, qualified_name)",
          "old_line_content": "    static constexpr bool is_anti_join = STRICTNESS == JoinStrictness::Anti;",
          "new_line_content": "        type_name.emplace_back(src_column.type, src_column.name, qualified_name);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "insert",
          "new_api": "std::distance(from, to)",
          "old_text": "set_holder_ptr->insert(from, to)",
          "new_text": "std::distance(from, to)",
          "old_line_content": "            set_holder_ptr->insert(from, to);",
          "new_line_content": "        const size_t new_items = std::distance(from, to);",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "std::cbegin(array_holder)",
          "new_api": "std::make_unique<SetHolder>()",
          "old_text": "std::cbegin(array_holder)",
          "new_text": "std::make_unique<SetHolder>()",
          "old_line_content": "            ? std::find(std::cbegin(array_holder), std::cbegin(array_holder) + items, needle) != std::cbegin(array_holder) + items",
          "new_line_content": "                set_holder_ptr = std::make_unique<SetHolder>();",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "end",
          "new_api": "std::cbegin(array_holder)",
          "old_text": "set_holder_ptr->end()",
          "new_text": "std::cbegin(array_holder)",
          "old_line_content": "            : set_holder_ptr->find(needle) != set_holder_ptr->end();",
          "new_line_content": "                set_holder_ptr->insert(std::cbegin(array_holder), std::cbegin(array_holder) + items);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "FindResultImpl<const RowRef, false>(*it, true, 0)",
          "new_api": "std::make_pair(it->block, it->row_num)",
          "old_text": "FindResultImpl<const RowRef, false>(*it, true, 0)",
          "new_text": "std::make_pair(it->block, it->row_num)",
          "old_line_content": "                        FindResultImpl<const RowRef, false>(*it, true, 0));",
          "new_line_content": "            if (!known_rows.isKnown(std::make_pair(it->block, it->row_num)))",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "ok",
          "new_api": "FindResultImpl<const RowRef, false>(*it, true, 0)",
          "old_text": "it.ok()",
          "new_text": "FindResultImpl<const RowRef, false>(*it, true, 0)",
          "old_line_content": "        for (auto it = mapped.begin(); it.ok(); ++it)",
          "new_line_content": "                        FindResultImpl<const RowRef, false>(*it, true, 0));",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": "resize_assume_reserved",
          "new_api": "std::make_unique<IColumn::Offsets>(rows)",
          "old_text": "added_columns.filter.resize_assume_reserved(i)",
          "new_text": "std::make_unique<IColumn::Offsets>(rows)",
          "old_line_content": "                added_columns.filter.resize_assume_reserved(i);",
          "new_line_content": "        added_columns.offsets_to_replicate = std::make_unique<IColumn::Offsets>(rows);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "findAsof",
          "new_api": "isRowFiltered",
          "old_text": "mapped->findAsof(left_asof_key, i)",
          "new_text": "join_keys.isRowFiltered(i)",
          "old_line_content": "                    auto row_ref = mapped->findAsof(left_asof_key, i);",
          "new_line_content": "            bool row_acceptable = !join_keys.isRowFiltered(i);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": "getMapped",
          "old_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": "find_result.getMapped()",
          "old_line_content": "                            used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                auto & mapped = find_result.getMapped();",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "new_api": "findAsof",
          "old_text": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "new_text": "mapped->findAsof(left_asof_key, i)",
          "old_line_content": "                        addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset);",
          "new_line_content": "                    auto row_ref = mapped->findAsof(left_asof_key, i);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0)",
          "old_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0)",
          "old_line_content": "                    used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                            used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "new_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "new_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "                    addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt);",
          "new_line_content": "                            used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "old_text": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "old_line_content": "                    bool used_once = used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                        addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "new_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "new_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "                        addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt);",
          "new_line_content": "                    used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "new_api": "setUsed<need_filter>(added_columns.filter, i)",
          "old_text": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "new_text": "setUsed<need_filter>(added_columns.filter, i)",
          "old_line_content": "                        added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num);",
          "new_line_content": "                        setUsed<need_filter>(added_columns.filter, i);",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "old_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "old_line_content": "                        used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                        added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_api": "applyLazyDefaults",
          "old_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_text": "added_columns.applyLazyDefaults()",
          "old_line_content": "        ? joinRightColumns<KIND, STRICTNESS, KeyGetter, Map, need_filter, true>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags)",
          "new_line_content": "    added_columns.applyLazyDefaults();",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "convertToFullColumnIfConst",
          "new_api": "isNullableOrLowCardinalityNullable",
          "old_text": "right_column.column->convertToFullColumnIfConst()",
          "new_text": "isNullableOrLowCardinalityNullable(right_key_type)",
          "old_line_content": "    right_column.column = right_column.column->convertToFullColumnIfConst();",
          "new_line_content": "    bool should_be_nullable = isNullableOrLowCardinalityNullable(right_key_type);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "columns",
          "new_api": "convertToFullColumnIfConst",
          "old_text": "block.columns()",
          "new_text": "right_column.column->convertToFullColumnIfConst()",
          "old_line_content": "    for (size_t i = 0; i < block.columns(); ++i)",
          "new_line_content": "    right_column.column = right_column.column->convertToFullColumnIfConst();",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "reserve",
          "new_api": "savedBlockSample",
          "old_text": "added_columns.reserve(join_features.need_replication)",
          "new_text": "savedBlockSample()",
          "old_line_content": "        added_columns.reserve(join_features.need_replication);",
          "new_line_content": "        savedBlockSample(),",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags)",
          "new_api": "std::move(join_on_keys)",
          "old_text": "switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags)",
          "new_text": "std::move(join_on_keys)",
          "old_line_content": "    size_t num_joined = switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags);",
          "new_line_content": "        std::move(join_on_keys),",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "safeGetByPosition",
          "new_api": "sliceBlock",
          "old_text": "block.safeGetByPosition(i).column->filter(added_columns.filter, -1)",
          "new_text": "sliceBlock(block, num_joined)",
          "old_line_content": "            block.safeGetByPosition(i).column = block.safeGetByPosition(i).column->filter(added_columns.filter, -1);",
          "new_line_content": "    Block remaining_block = sliceBlock(block, num_joined);",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "columns",
          "new_api": "size",
          "old_text": "required_right_keys.columns()",
          "new_text": "added_columns.size()",
          "old_line_content": "        for (size_t i = 0; i < required_right_keys.columns(); ++i)",
          "new_line_content": "    for (size_t i = 0; i < added_columns.size(); ++i)",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "copyLeftKeyColumnToRight",
          "new_api": "safeGetByPosition",
          "old_text": "copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column)",
          "new_text": "block.safeGetByPosition(i).column->filter(added_columns.filter, -1)",
          "old_line_content": "            auto right_col = copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column);",
          "new_line_content": "            block.safeGetByPosition(i).column = block.safeGetByPosition(i).column->filter(added_columns.filter, -1);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "columns",
          "new_api": "back",
          "old_text": "required_right_keys.columns()",
          "new_text": "table_join->getOnlyClause().key_names_right.back()",
          "old_line_content": "        for (size_t i = 0; i < required_right_keys.columns(); ++i)",
          "new_line_content": "            if (join_features.is_asof_join && right_key.name == table_join->getOnlyClause().key_names_right.back())",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "renamedRightColumnName",
          "new_api": "getByName",
          "old_text": "getTableJoin().renamedRightColumnName(right_key.name)",
          "new_text": "block.getByName(required_right_keys_sources[i])",
          "old_line_content": "            auto right_col_name = getTableJoin().renamedRightColumnName(right_key.name);",
          "new_line_content": "            const auto & left_column = block.getByName(required_right_keys_sources[i]);",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "back",
          "new_api": "copyLeftKeyColumnToRight",
          "old_text": "table_join->getOnlyClause().key_names_right.back()",
          "new_text": "copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column)",
          "old_line_content": "            if (join_features.is_asof_join && right_key.name == table_join->getOnlyClause().key_names_right.back())",
          "new_line_content": "            auto right_col = copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "static_cast<NotProcessedCrossJoin &>(*not_processed)",
          "new_api": "safeGetByPosition",
          "old_text": "static_cast<NotProcessedCrossJoin &>(*not_processed)",
          "new_text": "block.safeGetByPosition(pos).column->replicate(*offsets_to_replicate)",
          "old_line_content": "        auto & continuation = static_cast<NotProcessedCrossJoin &>(*not_processed);",
          "new_line_content": "            block.safeGetByPosition(pos).column = block.safeGetByPosition(pos).column->replicate(*offsets_to_replicate);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "get",
          "new_api": "columns",
          "old_text": "left_column.column.get()",
          "new_text": "block.columns()",
          "old_line_content": "            src_left_columns.push_back(left_column.column.get());",
          "new_line_content": "    size_t num_existing_columns = block.columns();",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "back",
          "new_api": "columns",
          "old_text": "src_left_columns.back()->cloneEmpty()",
          "new_text": "sample_block_with_columns_to_add.columns()",
          "old_line_content": "            dst_columns.emplace_back(src_left_columns.back()->cloneEmpty());",
          "new_line_content": "    size_t num_columns_to_add = sample_block_with_columns_to_add.columns();",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": "equals",
          "new_api": "size",
          "old_text": "left_type->equals(*right_type)",
          "new_text": "data_types.size()",
          "old_line_content": "        if (!left_type->equals(*right_type))",
          "new_line_content": "    size_t num_keys = data_types.size();",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "getName",
          "new_api": "columns",
          "old_text": "Exception(ErrorCodes::TYPE_MISMATCH, \"Type mismatch in joinGet key {}: \"\n                \"found type {}, while the needed type is {}\", i, left_type->getName(), right_type->getName())",
          "new_text": "right_table_keys.columns()",
          "old_line_content": "            throw Exception(ErrorCodes::TYPE_MISMATCH, \"Type mismatch in joinGet key {}: \"",
          "new_line_content": "    if (right_table_keys.columns() != num_keys)",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "getName",
          "new_api": "Exception",
          "old_text": "right_type->getName()",
          "new_text": "Exception(ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH,\n            \"Number of arguments for function joinGet{} doesn't match: passed, should be equal to {}\",\n            toString(or_null ? \"OrNull\" : \"\"), toString(num_keys))",
          "old_line_content": "                \"found type {}, while the needed type is {}\", i, left_type->getName(), right_type->getName());",
          "new_line_content": "        throw Exception(ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH,",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": "JoinCommon::canBecomeNullable(elem.type)",
          "new_api": "safeGetByPosition",
          "old_text": "JoinCommon::canBecomeNullable(elem.type)",
          "new_text": "right_table_keys.safeGetByPosition(i)",
          "old_line_content": "    if (or_null && JoinCommon::canBecomeNullable(elem.type))",
          "new_line_content": "        const auto & [c2, right_type_origin, right_name] = right_table_keys.safeGetByPosition(i);",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "makeNullable",
          "new_api": "recursiveRemoveLowCardinality",
          "old_text": "makeNullable(elem.type)",
          "new_text": "recursiveRemoveLowCardinality(left_type_origin)",
          "old_line_content": "        elem.type = makeNullable(elem.type);",
          "new_line_content": "        auto left_type = removeNullable(recursiveRemoveLowCardinality(left_type_origin));",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "Exception",
          "new_api": "JoinCommon::canBecomeNullable(elem.type)",
          "old_text": "Exception(ErrorCodes::INCOMPATIBLE_TYPE_OF_JOIN, \"joinGet only supports StorageJoin of type Left Any\")",
          "new_text": "JoinCommon::canBecomeNullable(elem.type)",
          "old_line_content": "        throw Exception(ErrorCodes::INCOMPATIBLE_TYPE_OF_JOIN, \"joinGet only supports StorageJoin of type Left Any\");",
          "new_line_content": "    if (or_null && JoinCommon::canBecomeNullable(elem.type))",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "getOnlyClause",
          "new_api": "makeNullable",
          "old_text": "table_join->getOnlyClause()",
          "new_text": "makeNullable(elem.type)",
          "old_line_content": "    const auto & key_names_right = table_join->getOnlyClause().key_names_right;",
          "new_line_content": "        elem.type = makeNullable(elem.type);",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": "joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(\n        keys, block_with_columns_to_add, maps_vector, /* is_join_get = */ true)",
          "new_api": "columns",
          "old_text": "joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(\n        keys, block_with_columns_to_add, maps_vector, /* is_join_get = */ true)",
          "new_text": "block.columns()",
          "old_line_content": "    joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(",
          "new_line_content": "    for (size_t i = 0; i < block.columns(); ++i)",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "columns",
          "new_api": "getByPosition",
          "old_text": "keys.columns()",
          "new_text": "block.getByPosition(i)",
          "old_line_content": "    return keys.getByPosition(keys.columns() - 1);",
          "new_line_content": "        auto key = block.getByPosition(i);",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": "JoinCommon::checkTypesOfKeys(\n            block, onexpr.key_names_left, cond_column_name.first,\n            right_sample_block, onexpr.key_names_right, cond_column_name.second)",
          "new_api": "JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right)",
          "old_text": "JoinCommon::checkTypesOfKeys(\n            block, onexpr.key_names_left, cond_column_name.first,\n            right_sample_block, onexpr.key_names_right, cond_column_name.second)",
          "new_text": "JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right)",
          "old_line_content": "        JoinCommon::checkTypesOfKeys(",
          "new_line_content": "        JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right);",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "joinBlockImplCross",
          "new_api": "Exception",
          "old_text": "joinBlockImplCross(block, not_processed)",
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\")",
          "old_line_content": "        joinBlockImplCross(block, not_processed);",
          "new_line_content": "        throw Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\");",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "push_back",
          "new_api": "joinBlockImplCross",
          "old_text": "maps_vector.push_back(&data->maps[i])",
          "new_text": "joinBlockImplCross(block, not_processed)",
          "old_line_content": "            maps_vector.push_back(&data->maps[i]);",
          "new_line_content": "        joinBlockImplCross(block, not_processed);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "std::move(remaining_block)",
          "new_api": "materializeBlockInplace",
          "old_text": "std::move(remaining_block)",
          "new_text": "materializeBlockInplace(block)",
          "old_line_content": "                not_processed = std::make_shared<ExtraBlock>(ExtraBlock{std::move(remaining_block)});",
          "new_line_content": "        materializeBlockInplace(block);",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "Exception",
          "new_api": "rows",
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Wrong JOIN combination: {} {}\", strictness, kind)",
          "new_text": "joinDispatch(kind, strictness, maps_vector, [&](auto kind_, auto strictness_, auto & maps_vector_)\n        {\n            Block remaining_block = joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_);\n            if (remaining_block.rows())\n                not_processed = std::make_shared<ExtraBlock>(ExtraBlock{std::move(remaining_block)});\n            else\n                not_processed.reset();\n        })",
          "old_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Wrong JOIN combination: {} {}\", strictness, kind);",
          "new_line_content": "        if (joinDispatch(kind, strictness, maps_vector, [&](auto kind_, auto strictness_, auto & maps_vector_)",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": "constexpr",
          "new_api": "LOG_TRACE",
          "old_text": "constexpr",
          "new_text": "LOG_TRACE(log, \"{}Join data has been already released\", instance_log_id)",
          "old_line_content": "        [[maybe_unused]] constexpr bool mapped_one = std::is_same_v<Mapped, RowRef>;",
          "new_line_content": "        LOG_TRACE(log, \"{}Join data has been already released\", instance_log_id);",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": "insertFrom",
          "new_api": "constexpr",
          "old_text": "columns_right[j]->insertFrom(*mapped_column, mapped.row_num)",
          "new_text": "constexpr",
          "old_line_content": "                columns_right[j]->insertFrom(*mapped_column, mapped.row_num);",
          "new_line_content": "        constexpr bool mapped_asof = std::is_same_v<Mapped, AsofRowRefs>;",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": "Exception",
          "new_api": "unlikely",
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Unknown JOIN strictness '{}' (must be on of: ANY, ALL, ASOF)\", parent.strictness)",
          "new_text": "unlikely(parent.data->type == HashJoin::Type::EMPTY)",
          "old_line_content": "                throw Exception(ErrorCodes::LOGICAL_ERROR, \"Unknown JOIN strictness '{}' (must be on of: ANY, ALL, ASOF)\", parent.strictness);",
          "new_line_content": "        if (unlikely(parent.data->type == HashJoin::Type::EMPTY))",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": "getByPosition",
          "new_api": "has_value",
          "old_text": "block_it->getByPosition(j)",
          "new_text": "position.has_value()",
          "old_line_content": "                const auto & col = block_it->getByPosition(j).column;",
          "new_line_content": "        if (!position.has_value())",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "insertRangeFrom",
          "new_api": "begin",
          "old_text": "columns_right[j]->insertRangeFrom(*col, current_block_start, rows_from_block)",
          "new_text": "blocks.begin()",
          "old_line_content": "                columns_right[j]->insertRangeFrom(*col, current_block_start, rows_from_block);",
          "new_line_content": "            position = std::make_any<BlocksList::const_iterator>(blocks.begin());",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "size",
          "new_api": "begin",
          "old_text": "columns_keys_and_right.size()",
          "new_text": "parent.data->blocks.begin()",
          "old_line_content": "                        for (size_t colnum = 0; colnum < columns_keys_and_right.size(); ++colnum)",
          "new_line_content": "                used_position = parent.data->blocks.begin();",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "getByPosition",
          "new_api": "end",
          "old_text": "mapped_block.getByPosition(colnum)",
          "new_text": "parent.data->blocks.end()",
          "old_line_content": "                            columns_keys_and_right[colnum]->insertFrom(*mapped_block.getByPosition(colnum).column, row);",
          "new_line_content": "            auto end = parent.data->blocks.end();",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right)",
          "new_api": "begin",
          "old_text": "AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right)",
          "new_text": "map.begin()",
          "old_line_content": "                AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right);",
          "new_line_content": "                position = std::make_any<Iterator>(map.begin());",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "rows",
          "new_api": "has_value",
          "old_text": "block->rows()",
          "new_text": "nulls_position.has_value()",
          "old_line_content": "            for (size_t row = 0; row < block->rows(); ++row)",
          "new_line_content": "        if (!nulls_position.has_value())",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": "JoinCommon::hasNonJoinedBlocks(*table_join)",
          "new_api": "getByPosition",
          "old_text": "JoinCommon::hasNonJoinedBlocks(*table_join)",
          "new_text": "block->getByPosition(col)",
          "old_line_content": "    if (!JoinCommon::hasNonJoinedBlocks(*table_join))",
          "new_line_content": "                        columns_keys_and_right[col]->insertFrom(*block->getByPosition(col).column, row);",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": "columns",
          "new_api": "JoinCommon::hasNonJoinedBlocks(*table_join)",
          "old_text": "result_sample_block.columns()",
          "new_text": "JoinCommon::hasNonJoinedBlocks(*table_join)",
          "old_line_content": "                            result_sample_block.columns(), expected_columns_count,",
          "new_line_content": "    if (!JoinCommon::hasNonJoinedBlocks(*table_join))",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "reset",
          "new_api": "getBufferSizeInCells",
          "old_text": "data.reset()",
          "new_text": "map_.getBufferSizeInCells(data->type)",
          "old_line_content": "        data.reset();",
          "new_line_content": "            used_flags.reinit<kind_, strictness_>(map_.getBufferSizeInCells(data->type) + 1);",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "empty",
          "new_api": "reset",
          "old_text": "right_blocks.empty()",
          "new_text": "data.reset()",
          "old_line_content": "    if (!right_blocks.empty())",
          "new_line_content": "        data.reset();",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "size",
          "new_api": "columns",
          "old_text": "positions.size()",
          "new_text": "right_sample_block.columns()",
          "old_line_content": "        for (size_t i = 0; i < positions.size(); ++i)",
          "new_line_content": "        positions.reserve(right_sample_block.columns());",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": "insert",
          "new_api": "getPositionByName",
          "old_text": "restored_block.insert(column)",
          "new_text": "tmp_block.getPositionByName(sample_column.name)",
          "old_line_content": "            restored_block.insert(column);",
          "new_line_content": "            positions.emplace_back(tmp_block.getPositionByName(sample_column.name));",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": "back",
          "new_api": "insert",
          "old_text": "table_join->getOnlyClause().key_names_right.back()",
          "new_text": "restored_block.insert(column)",
          "old_line_content": "    return savedBlockSample().getByName(table_join->getOnlyClause().key_names_right.back());",
          "new_line_content": "            restored_block.insert(column);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2053,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\")",
          "old_line_content": "        else",
          "new_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\");",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "setUsed<need_filter>(added_columns.filter, i)",
          "old_text": null,
          "new_text": "setUsed<need_filter>(added_columns.filter, i)",
          "old_line_content": "}",
          "new_line_content": "                setUsed<need_filter>(added_columns.filter, i);",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "old_text": null,
          "new_text": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "old_line_content": "",
          "new_line_content": "            addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset);",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": null,
          "new_api": "savedBlockSample",
          "old_text": null,
          "new_text": "parent.savedBlockSample().cloneEmpty()",
          "old_line_content": "            {",
          "new_line_content": "    Block getEmptyBlock() override { return parent.savedBlockSample().cloneEmpty(); }",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": null,
          "new_api": "fillColumnsFromData",
          "old_text": null,
          "new_text": "fillColumnsFromData(parent.data->blocks, columns_right)",
          "old_line_content": "",
          "new_line_content": "            rows_added = fillColumnsFromData(parent.data->blocks, columns_right);",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "fillColumnsFromMap",
          "old_text": null,
          "new_text": "fillColumnsFromMap(map, columns_right)",
          "old_line_content": "        return rows_added;",
          "new_line_content": "                rows_added = fillColumnsFromMap(map, columns_right);",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "parent.data->maps.front()",
          "old_line_content": "private:",
          "new_line_content": "            if (!joinDispatch(parent.kind, parent.strictness, parent.data->maps.front(), fill_callback))",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Unknown JOIN strictness '{}' (must be on of: ANY, ALL, ASOF)\", parent.strictness)",
          "old_line_content": "    const HashJoin & parent;",
          "new_line_content": "                throw Exception(ErrorCodes::LOGICAL_ERROR, \"Unknown JOIN strictness '{}' (must be on of: ANY, ALL, ASOF)\", parent.strictness);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "mapv.size()",
          "old_line_content": "    if (added_columns.need_filter)",
          "new_line_content": "    return mapv.size() > 1",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_text": null,
          "new_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_line_content": "    {",
          "new_line_content": "        ? joinRightColumns<KIND, STRICTNESS, KeyGetter, Map, need_filter, true>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags)",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "fillNullsFromBlocks",
          "old_text": null,
          "new_text": "fillNullsFromBlocks(columns_right, rows_added)",
          "old_line_content": "",
          "new_line_content": "            fillNullsFromBlocks(columns_right, rows_added);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_text": null,
          "new_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_line_content": "    HashJoin::Type type,",
          "new_line_content": "        return joinRightColumnsSwitchMultipleDisjuncts<KIND, STRICTNESS, KeyGetter, Map, true>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_text": null,
          "new_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "old_line_content": "    switch (type)",
          "new_line_content": "        return joinRightColumnsSwitchMultipleDisjuncts<KIND, STRICTNESS, KeyGetter, Map, true>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags);",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "std::any_cast<BlocksList::const_iterator &>(position)",
          "old_text": null,
          "new_text": "std::any_cast<BlocksList::const_iterator &>(position)",
          "old_line_content": "            rows_added += rows_from_block;",
          "new_line_content": "        auto & block_it = std::any_cast<BlocksList::const_iterator &>(position);",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "blocks.end()",
          "old_line_content": "",
          "new_line_content": "        auto end = blocks.end();",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "                std::vector<const MapTypeVal *> a_map_type_vector;",
          "new_line_content": "    constexpr bool is_asof_join = STRICTNESS == JoinStrictness::Asof;",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "columns_right.size()",
          "old_line_content": "                {",
          "new_line_content": "            for (size_t j = 0; j < columns_right.size(); ++j)",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "block_it->getByPosition(j)",
          "old_line_content": "                    ++block_it;",
          "new_line_content": "                const auto & col = block_it->getByPosition(j).column;",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "insertRangeFrom",
          "old_text": null,
          "new_text": "columns_right[j]->insertRangeFrom(*col, current_block_start, rows_from_block)",
          "old_line_content": "                    current_block_start = 0;",
          "new_line_content": "                columns_right[j]->insertRangeFrom(*col, current_block_start, rows_from_block);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "key_getter_vector.emplace_back()",
          "old_line_content": "            {                                                           \\",
          "new_line_content": "                key_getter_vector.emplace_back();",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "a_map_type_vector.emplace_back()",
          "old_line_content": "            std::vector<KeyGetter> key_getter_vector;                     \\",
          "new_line_content": "                a_map_type_vector.emplace_back();",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "block_it->rows()",
          "old_line_content": "",
          "new_line_content": "                if (block_it->rows() <= current_block_start)",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(\n                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags)",
          "old_text": null,
          "new_text": "joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(\n                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags)",
          "old_line_content": "            for (size_t d = 0; d < added_columns.join_on_keys.size(); ++d)                   \\",
          "new_line_content": "                return joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "std::move(key_getter_vector)",
          "old_text": null,
          "new_text": "std::move(key_getter_vector)",
          "old_line_content": "            {       \\",
          "new_line_content": "                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags);",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys. Type: {}\", type)",
          "old_line_content": "                a_map_type_vector[d] = mapv[d]->TYPE.get();              \\",
          "new_line_content": "            throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys. Type: {}\", type);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "lazy_output.blocks.size()",
          "old_line_content": "            {",
          "new_line_content": "            for (size_t j = 0; j < lazy_output.blocks.size(); ++j)",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "APPLY_FOR_JOIN_VARIANTS",
          "old_text": null,
          "new_text": "APPLY_FOR_JOIN_VARIANTS(M)",
          "old_line_content": "        size_t rows_added = 0;",
          "new_line_content": "            APPLY_FOR_JOIN_VARIANTS(M)",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "APPLY_FOR_JOIN_VARIANTS",
          "old_text": null,
          "new_text": "APPLY_FOR_JOIN_VARIANTS(M)",
          "old_line_content": "  * In that case for matched rows in t2.key we will use values from t1.key.",
          "new_line_content": "        APPLY_FOR_JOIN_VARIANTS(M)",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", parent.data->type)",
          "old_line_content": "        {",
          "new_line_content": "                throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", parent.data->type);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", type)",
          "old_line_content": "  */",
          "new_line_content": "            throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", type);",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "",
          "new_line_content": "        UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "isNullable",
          "old_text": null,
          "new_text": "column_from_block.column->isNullable()",
          "old_line_content": "            }",
          "new_line_content": "                        nullable_col && !column_from_block.column->isNullable())",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "insertFromNotNullable",
          "old_text": null,
          "new_text": "nullable_col->insertFromNotNullable(*column_from_block.column, lazy_output.row_nums[j])",
          "old_line_content": "    }",
          "new_line_content": "                        nullable_col->insertFromNotNullable(*column_from_block.column, lazy_output.row_nums[j]);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "used_position.has_value()",
          "old_line_content": "                    {",
          "new_line_content": "            if (!used_position.has_value())",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "JoinCommon::addDefaultValues(*col, type_name[i].type, default_count)",
          "old_text": null,
          "new_text": "JoinCommon::addDefaultValues(*col, type_name[i].type, default_count)",
          "old_line_content": "    template <bool has_defaults>",
          "new_line_content": "                JoinCommon::addDefaultValues(*col, type_name[i].type, default_count);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": null,
          "new_api": "JoinCommon::filterWithBlanks(right_column.column, *null_map_filter)",
          "old_text": null,
          "new_text": "JoinCommon::filterWithBlanks(right_column.column, *null_map_filter)",
          "old_line_content": "    }",
          "new_line_content": "        right_column.column = JoinCommon::filterWithBlanks(right_column.column, *null_map_filter);",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "mapped_block.rows()",
          "old_line_content": "            }",
          "new_line_content": "                for (size_t row = 0; row < mapped_block.rows(); ++row)",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": null,
          "new_api": "isUsed",
          "old_text": null,
          "new_text": "parent.isUsed(&mapped_block, row)",
          "old_line_content": "        else",
          "new_line_content": "                    if (!parent.isUsed(&mapped_block, row))",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "std::move(columns[i])",
          "old_text": null,
          "new_text": "std::move(columns[i])",
          "old_line_content": "            if (auto * nullable_col = nullable_column_ptrs[j])",
          "new_line_content": "        return ColumnWithTypeAndName(std::move(columns[i]), type_name[i].type, type_name[i].qualified_name);",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "columns_keys_and_right.size()",
          "old_line_content": "            using Mapped = typename Map::mapped_type;",
          "new_line_content": "                        for (size_t colnum = 0; colnum < columns_keys_and_right.size(); ++colnum)",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": null,
          "new_api": "correctNullabilityInplace",
          "old_text": null,
          "new_text": "correctNullabilityInplace(right_column, should_be_nullable, *null_map_filter)",
          "old_line_content": "}",
          "new_line_content": "        correctNullabilityInplace(right_column, should_be_nullable, *null_map_filter);",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "mapped_block.getByPosition(colnum)",
          "old_line_content": "",
          "new_line_content": "                            columns_keys_and_right[colnum]->insertFrom(*mapped_block.getByPosition(colnum).column, row);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "correctNullabilityInplace",
          "old_text": null,
          "new_text": "correctNullabilityInplace(right_column, should_be_nullable)",
          "old_line_content": "/// Cut first num_rows rows from block in place and returns block with remaining rows",
          "new_line_content": "        correctNullabilityInplace(right_column, should_be_nullable);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "equals",
          "old_text": null,
          "new_text": "right_column.type->equals(*right_key_type)",
          "old_line_content": "{",
          "new_line_content": "    if (!right_column.type->equals(*right_key_type))",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "castColumnAccurate",
          "old_text": null,
          "new_text": "castColumnAccurate(right_column, right_key_type)",
          "old_line_content": "    if (num_rows >= total_rows)",
          "new_line_content": "        right_column.column = castColumnAccurate(right_column, right_key_type);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "right_indexes.size()",
          "old_line_content": "            /** Using dest_column->structureEquals(*column_from_block) will not work for low cardinality columns,",
          "new_line_content": "        for (size_t j = 0; j < right_indexes.size(); ++j)",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "block.getByPosition(right_indexes[j]).column.get()",
          "old_line_content": "              * ColumnLowCardinality(size = 0, UInt8(size = 0), ColumnUnique(size = 1, String(size = 1)))",
          "new_line_content": "            const auto * column_from_block = block.getByPosition(right_indexes[j]).column.get();",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "columns[j].get()",
          "old_line_content": "              * and",
          "new_line_content": "            const auto * dest_column = columns[j].get();",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "position.has_value()",
          "old_line_content": "                    continue;",
          "new_line_content": "            if (!position.has_value())",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "nullable_col->getNestedColumnPtr().get()",
          "old_line_content": "        }",
          "new_line_content": "                dest_column = nullable_col->getNestedColumnPtr().get();",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "block.rows()",
          "old_line_content": "}",
          "new_line_content": "    size_t total_rows = block.rows();",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "std::any_cast<Iterator &>(position)",
          "old_text": null,
          "new_text": "std::any_cast<Iterator &>(position)",
          "old_line_content": "                if (rows_added >= max_block_size)",
          "new_line_content": "            Iterator & it = std::any_cast<Iterator &>(position);",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "map.end()",
          "old_line_content": "                {",
          "new_line_content": "            auto end = map.end();",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "cloneEmpty",
          "old_text": null,
          "new_text": "block.cloneEmpty()",
          "old_line_content": "template <JoinKind KIND, JoinStrictness STRICTNESS, typename Maps>",
          "new_line_content": "    Block remaining_block = block.cloneEmpty();",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "block.columns()",
          "old_line_content": "Block HashJoin::joinBlockImpl(",
          "new_line_content": "    for (size_t i = 0; i < block.columns(); ++i)",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "block.getByPosition(i)",
          "old_line_content": "    const Block & block_with_columns_to_add,",
          "new_line_content": "        auto & col = block.getByPosition(i);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "getMapped",
          "old_text": null,
          "new_text": "it->getMapped()",
          "old_line_content": "            }",
          "new_line_content": "                const Mapped & mapped = it->getMapped();",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*column_from_block)",
          "old_line_content": "",
          "new_line_content": "            if (typeid(*dest_column) != typeid(*column_from_block))",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "getPtr",
          "old_text": null,
          "new_text": "it.getPtr()",
          "old_line_content": "",
          "new_line_content": "                size_t offset = map.offsetInternal(it.getPtr());",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": null,
          "new_api": "isUsed",
          "old_text": null,
          "new_text": "parent.isUsed(offset)",
          "old_line_content": "        return rows_added;",
          "new_line_content": "                if (parent.isUsed(offset))",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "typeid(*column_from_block).name()",
          "old_line_content": "        if (has_columns_to_add)",
          "new_line_content": "                    demangle(typeid(*dest_column).name()), demangle(typeid(*column_from_block).name()));",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right)",
          "old_text": null,
          "new_text": "AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right)",
          "old_line_content": "",
          "new_line_content": "                AdderNonJoined<Mapped>::add(mapped, rows_added, columns_keys_and_right);",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Columns {} and {} have different types {} and {}\",\n                    dest_column->getName(), column_from_block->getName(),\n                    demangle(typeid(*dest_column).name()), demangle(typeid(*column_from_block).name()))",
          "old_line_content": "    void appendDefaultRow()",
          "new_line_content": "                throw Exception(ErrorCodes::LOGICAL_ERROR, \"Columns {} and {} have different types {} and {}\",",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "column_from_block->getName()",
          "old_line_content": "    {",
          "new_line_content": "                    dest_column->getName(), column_from_block->getName(),",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "reinterpret_cast<UInt64>(&block)",
          "old_text": null,
          "new_text": "reinterpret_cast<UInt64>(&block)",
          "old_line_content": "    }",
          "new_line_content": "            lazy_output.blocks.emplace_back(reinterpret_cast<UInt64>(&block));",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "static_cast<uint32_t>(row_num)",
          "old_text": null,
          "new_text": "static_cast<uint32_t>(row_num)",
          "old_line_content": "",
          "new_line_content": "            lazy_output.row_nums.emplace_back(static_cast<uint32_t>(row_num));",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "cut",
          "old_text": null,
          "new_text": "col.column->cut(0, num_rows)",
          "old_line_content": "    bool is_join_get) const",
          "new_line_content": "        col.column = col.column->cut(0, num_rows);",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "      * Because if they are constants, then in the \"not joined\" rows, they may have different values",
          "new_line_content": "    constexpr JoinFeatures<KIND, STRICTNESS> join_features;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "lazy_output.blocks.emplace_back(0)",
          "old_line_content": "        }",
          "new_line_content": "            lazy_output.blocks.emplace_back(0);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "lazy_output.row_nums.emplace_back(0)",
          "old_line_content": "    }",
          "new_line_content": "            lazy_output.row_nums.emplace_back(0);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "getClauses",
          "old_text": null,
          "new_text": "table_join->getClauses()",
          "old_line_content": "    if constexpr (join_features.right || join_features.full)",
          "new_line_content": "    const auto & onexprs = table_join->getClauses();",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "onexprs.size()",
          "old_line_content": "    {",
          "new_line_content": "    for (size_t i = 0; i < onexprs.size(); ++i)",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "parent.data->blocks_nullmaps.begin()",
          "old_line_content": "            {",
          "new_line_content": "            nulls_position = parent.data->blocks_nullmaps.begin();",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "condColumnNames",
          "old_text": null,
          "new_text": "onexprs[i].condColumnNames()",
          "old_line_content": "",
          "new_line_content": "        join_on_keys.emplace_back(block, key_names, onexprs[i].condColumnNames().first, key_sizes[i]);",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "parent.data->blocks_nullmaps.end()",
          "old_line_content": "                {",
          "new_line_content": "        auto end = parent.data->blocks_nullmaps.end();",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "block.columns()",
          "old_line_content": "      * For FULL/RIGHT JOIN, the saved blocks contain keys;",
          "new_line_content": "    size_t existing_columns = block.columns();",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "right_indexes.size()",
          "old_line_content": "    LazyOutput lazy_output;",
          "new_line_content": "            for (size_t j = 0, size = right_indexes.size(); j < size; ++j)",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count)",
          "old_text": null,
          "new_text": "JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count)",
          "old_line_content": "",
          "new_line_content": "                JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": null,
          "new_api": "getData",
          "old_text": null,
          "new_text": "assert_cast<const ColumnUInt8 &>(*it->second).getData()",
          "old_line_content": "    }",
          "new_line_content": "                nullmap = &assert_cast<const ColumnUInt8 &>(*it->second).getData();",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "block->rows()",
          "old_line_content": "",
          "new_line_content": "            for (size_t row = 0; row < block->rows(); ++row)",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "materializeBlockInplace",
          "old_text": null,
          "new_text": "materializeBlockInplace(block)",
          "old_line_content": "        *this,",
          "new_line_content": "        materializeBlockInplace(block);",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "columns_keys_and_right.size()",
          "old_line_content": "{",
          "new_line_content": "                    for (size_t col = 0; col < columns_keys_and_right.size(); ++col)",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "required_right_keys.columns()",
          "old_line_content": "",
          "new_line_content": "    bool has_required_right_keys = (required_right_keys.columns() != 0);",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "left_sample_block.columns()",
          "old_line_content": "        }",
          "new_line_content": "    size_t left_columns_count = left_sample_block.columns();",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2)",
          "old_text": null,
          "new_text": "std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2)",
          "old_line_content": "    MutableColumns columns;",
          "new_line_content": "        size_t reserve_size = std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2);",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": null,
          "new_api": "oneDisjunct",
          "old_text": null,
          "new_text": "table_join->oneDisjunct()",
          "old_line_content": "",
          "new_line_content": "    bool multiple_disjuncts = !table_join->oneDisjunct();",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "std::numeric_limits<size_t>::max()",
          "old_text": null,
          "new_text": "std::numeric_limits<size_t>::max()",
          "old_line_content": "",
          "new_line_content": "        added_columns.max_joined_block_rows = std::numeric_limits<size_t>::max();",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "added_columns.reserve(join_features.need_replication)",
          "old_line_content": "",
          "new_line_content": "        added_columns.reserve(join_features.need_replication);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "static_cast<size_t>(1.1 * reserve_size)",
          "old_text": null,
          "new_text": "static_cast<size_t>(1.1 * reserve_size)",
          "old_line_content": "    size_t lazy_defaults_count = 0;",
          "new_line_content": "            reserve_size = static_cast<size_t>(1.1 * reserve_size);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "sample_block_with_columns_to_add.columns()",
          "old_line_content": "",
          "new_line_content": "        size_t expected_columns_count = left_columns_count + required_right_keys.columns() + sample_block_with_columns_to_add.columns();",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "result_sample_block.columns()",
          "old_line_content": "void HashJoin::reuseJoinedData(const HashJoin & join)",
          "new_line_content": "        if (expected_columns_count != result_sample_block.columns())",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "column->reserve(reserve_size)",
          "old_line_content": "    const IColumn * left_asof_key = nullptr;",
          "new_line_content": "            column->reserve(reserve_size);",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Unexpected number of columns in result sample block: {} instead of {} ({} + {} + {})\",\n                            result_sample_block.columns(), expected_columns_count,\n                            left_columns_count, required_right_keys.columns(), sample_block_with_columns_to_add.columns())",
          "old_line_content": "    data = join.data;",
          "new_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Unexpected number of columns in result sample block: {} instead of {} ({} + {} + {})\",",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "result_sample_block.columns()",
          "old_line_content": "    from_storage_join = true;",
          "new_line_content": "                            result_sample_block.columns(), expected_columns_count,",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "sample_block_with_columns_to_add.columns()",
          "old_line_content": "",
          "new_line_content": "                            left_columns_count, required_right_keys.columns(), sample_block_with_columns_to_add.columns());",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": null,
          "new_api": "switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags)",
          "old_text": null,
          "new_text": "switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags)",
          "old_line_content": "    {",
          "new_line_content": "    size_t num_joined = switchJoinRightColumns<KIND, STRICTNESS>(maps_, added_columns, data->type, used_flags);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "added_columns.join_on_keys.clear()",
          "old_line_content": "        for (size_t i = 0; i < existing_columns; ++i)",
          "new_line_content": "    added_columns.join_on_keys.clear();",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "buildOutput",
          "old_text": null,
          "new_text": "added_columns.buildOutput()",
          "old_line_content": "        /// Add join key columns from right block if needed using value from left table because of equality",
          "new_line_content": "    added_columns.buildOutput();",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts)",
          "old_text": null,
          "new_text": "std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts)",
          "old_line_content": "",
          "new_line_content": "    auto non_joined = std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "std::move(non_joined)",
          "old_text": null,
          "new_text": "std::move(non_joined)",
          "old_line_content": "    for (auto & map : data->maps)",
          "new_line_content": "    return std::make_unique<NotJoinedBlocks>(std::move(non_joined), result_sample_block, left_columns_count, *table_join);",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": null,
          "new_api": "moveColumn",
          "old_text": null,
          "new_text": "added_columns.moveColumn(i)",
          "old_line_content": "        {",
          "new_line_content": "        block.insert(added_columns.moveColumn(i));",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "required_right_keys.getByPosition(i)",
          "old_line_content": "        }",
          "new_line_content": "            const auto & right_key = required_right_keys.getByPosition(i);",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": null,
          "new_api": "oneDisjunct",
          "old_text": null,
          "new_text": "table_join->oneDisjunct()",
          "old_line_content": "",
          "new_line_content": "    bool multiple_disjuncts = !table_join->oneDisjunct();",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "required_right_keys.columns()",
          "old_line_content": "    }",
          "new_line_content": "        for (size_t i = 0; i < required_right_keys.columns(); ++i)",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::NOT_IMPLEMENTED, \"StorageJoin with ORs is not supported\")",
          "old_line_content": "{",
          "new_line_content": "        throw Exception(ErrorCodes::NOT_IMPLEMENTED, \"StorageJoin with ORs is not supported\");",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "required_right_keys.getByPosition(i)",
          "old_line_content": "    {",
          "new_line_content": "            const auto & right_key = required_right_keys.getByPosition(i);",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "renamedRightColumnName",
          "old_text": null,
          "new_text": "getTableJoin().renamedRightColumnName(right_key.name)",
          "old_line_content": "    }",
          "new_line_content": "            auto right_col_name = getTableJoin().renamedRightColumnName(right_key.name);",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "getBufferSizeInCells",
          "old_text": null,
          "new_text": "joinDispatch(kind, strictness, map, [this](auto kind_, auto strictness_, auto & map_)\n        {\n            used_flags.reinit<kind_, strictness_>(map_.getBufferSizeInCells(data->type) + 1);\n        })",
          "old_line_content": "    if (!restructure)",
          "new_line_content": "        joinDispatch(kind, strictness, map, [this](auto kind_, auto strictness_, auto & map_)",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "renamedRightColumnName",
          "old_text": null,
          "new_text": "getTableJoin().renamedRightColumnName(right_key.name)",
          "old_line_content": "            /// asof column is already in block.",
          "new_line_content": "            const auto & right_col_name = getTableJoin().renamedRightColumnName(right_key.name);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "std::move(right_col)",
          "old_text": null,
          "new_text": "std::move(right_col)",
          "old_line_content": "                continue;",
          "new_line_content": "            block.insert(std::move(right_col));",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "",
          "new_line_content": "    static constexpr bool is_asof_join = STRICTNESS == JoinStrictness::Asof;",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "getTotalRowCount",
          "old_text": null,
          "new_text": "getTotalRowCount()",
          "old_line_content": "    BlocksList restored_blocks;",
          "new_line_content": "    LOG_TRACE(log, \"{}Join data is being released, {} bytes and {} rows in hash table\", instance_log_id, getTotalByteCount(), getTotalRowCount());",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "};",
          "new_line_content": "    static constexpr bool is_anti_join = STRICTNESS == JoinStrictness::Anti;",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": null,
          "new_api": "std::move(data->blocks)",
          "old_text": null,
          "new_text": "std::move(data->blocks)",
          "old_line_content": "    /// names to positions optimization",
          "new_line_content": "    BlocksList right_blocks = std::move(data->blocks);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "template <bool multiple_disjuncts>",
          "new_line_content": "    static constexpr bool left = KIND == JoinKind::Left;",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "class KnownRowsHolder;",
          "new_line_content": "    static constexpr bool right = KIND == JoinKind::Right;",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "",
          "new_line_content": "    static constexpr bool inner = KIND == JoinKind::Inner;",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "/// Keep already joined rows to prevent duplication if many disjuncts",
          "new_line_content": "    static constexpr bool full = KIND == JoinKind::Full;",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "required_right_keys.columns()",
          "old_line_content": "            if constexpr (join_features.need_replication)",
          "new_line_content": "        for (size_t i = 0; i < required_right_keys.columns(); ++i)",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "///   we want to have it once in resultset",
          "new_line_content": "    static constexpr bool need_replication = is_all_join || (is_any_join && right) || (is_semi_join && right);",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "data->maps.clear()",
          "old_line_content": "        for (const auto & sample_column : right_sample_block)",
          "new_line_content": "    data->maps.clear();",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "data->blocks_nullmaps.clear()",
          "old_line_content": "        {",
          "new_line_content": "    data->blocks_nullmaps.clear();",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "template<>",
          "new_line_content": "    static constexpr bool need_filter = !need_replication && (inner || right || (is_semi_join && left) || (is_anti_join && left));",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "class KnownRowsHolder<true>",
          "new_line_content": "    static constexpr bool add_missing = (left || full) && !is_semi_join;",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "public:",
          "new_line_content": "    static constexpr bool need_flags = MapGetter<KIND, STRICTNESS>::flagged;",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "table_join->getOnlyClause().key_names_right.back()",
          "old_line_content": "    if constexpr (join_features.need_replication)",
          "new_line_content": "            if (join_features.is_asof_join && right_key.name == table_join->getOnlyClause().key_names_right.back())",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "getByName",
          "old_text": null,
          "new_text": "block.getByName(required_right_keys_sources[i])",
          "old_line_content": "",
          "new_line_content": "            const auto & left_column = block.getByName(required_right_keys_sources[i]);",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": null,
          "new_api": "copyLeftKeyColumnToRight",
          "old_text": null,
          "new_text": "copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column, &added_columns.filter)",
          "old_line_content": "        /// If ALL ... JOIN - we replicate all the columns except the new ones.",
          "new_line_content": "            auto right_col = copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column, &added_columns.filter);",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "right_blocks.empty()",
          "old_line_content": "    {",
          "new_line_content": "    if (!right_blocks.empty())",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": null,
          "new_api": "std::move(right_col)",
          "old_text": null,
          "new_text": "std::move(right_col)",
          "old_line_content": "        for (size_t i = 0; i < existing_columns; ++i)",
          "new_line_content": "            block.insert(std::move(right_col));",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "getPositionByName",
          "old_text": null,
          "new_text": "block.getPositionByName(right_col_name)",
          "old_line_content": "        /// Replicate additional right keys",
          "new_line_content": "                right_keys_to_replicate.push_back(block.getPositionByName(right_col_name));",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "right_blocks.begin()",
          "old_line_content": "        {",
          "new_line_content": "        const Block & tmp_block = *right_blocks.begin();",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": null,
          "new_api": "isNullableOrLowCardinalityNullable",
          "old_text": null,
          "new_text": "isNullableOrLowCardinalityNullable(sample_column.type)",
          "old_line_content": "        }",
          "new_line_content": "            is_nullable.emplace_back(isNullableOrLowCardinalityNullable(sample_column.type));",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": null,
          "new_api": "safeGetByPosition",
          "old_text": null,
          "new_text": "block.safeGetByPosition(i).column->replicate(*offsets_to_replicate)",
          "old_line_content": "    size_t start_left_row = 0;",
          "new_line_content": "            block.safeGetByPosition(i).column = block.safeGetByPosition(i).column->replicate(*offsets_to_replicate);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "cut",
          "old_text": null,
          "new_text": "col.column->cut(num_rows, remaining_rows)",
          "old_line_content": "    const std::vector<const Maps *> & maps_,",
          "new_line_content": "        remaining_block.getByPosition(i).column = col.column->cut(num_rows, remaining_rows);",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "positions.size()",
          "old_line_content": "",
          "new_line_content": "        for (size_t i = 0; i < positions.size(); ++i)",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "saved_block.getByPosition(positions[i])",
          "old_line_content": "{",
          "new_line_content": "            auto & column = saved_block.getByPosition(positions[i]);",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": null,
          "new_api": "correctNullabilityInplace",
          "old_text": null,
          "new_text": "correctNullabilityInplace(column, is_nullable[i])",
          "old_line_content": "    /// It should be nullable when right side is nullable",
          "new_line_content": "            correctNullabilityInplace(column, is_nullable[i]);",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": null,
          "new_api": "std::move(restored_block)",
          "old_text": null,
          "new_text": "std::move(restored_block)",
          "old_line_content": "",
          "new_line_content": "        restored_blocks.emplace_back(std::move(restored_block));",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "data.reset()",
          "old_line_content": "",
          "new_line_content": "    data.reset();",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": null,
          "new_api": "static_cast<NotProcessedCrossJoin &>(*not_processed)",
          "old_text": null,
          "new_text": "static_cast<NotProcessedCrossJoin &>(*not_processed)",
          "old_line_content": "    {",
          "new_line_content": "        auto & continuation = static_cast<NotProcessedCrossJoin &>(*not_processed);",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "not_processed.reset()",
          "old_line_content": "",
          "new_line_content": "        not_processed.reset();",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "table_join->getOnlyClause().key_names_right.back()",
          "old_line_content": "",
          "new_line_content": "    return savedBlockSample().getByName(table_join->getOnlyClause().key_names_right.back());",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": null,
          "new_api": "std::copy(from, to, &array_holder[items])",
          "old_text": null,
          "new_text": "std::copy(from, to, &array_holder[items])",
          "old_line_content": "    }",
          "new_line_content": "            std::copy(from, to, &array_holder[items]);",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "src_left_columns.reserve(num_existing_columns)",
          "old_line_content": "        for (auto & dst : dst_columns)",
          "new_line_content": "        src_left_columns.reserve(num_existing_columns);",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "left_column.column.get()",
          "old_line_content": "    size_t rows_added = 0;",
          "new_line_content": "            src_left_columns.push_back(left_column.column.get());",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "src_left_columns.back()->cloneEmpty()",
          "old_line_content": "",
          "new_line_content": "            dst_columns.emplace_back(src_left_columns.back()->cloneEmpty());",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "set_holder_ptr->insert(from, to)",
          "old_line_content": "};",
          "new_line_content": "            set_holder_ptr->insert(from, to);",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": null,
          "new_api": "cloneEmpty",
          "old_text": null,
          "new_text": "right_column.column->cloneEmpty()",
          "old_line_content": "        for (const Block & block_right : data->blocks)",
          "new_line_content": "            dst_columns.emplace_back(right_column.column->cloneEmpty());",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "dst->reserve(max_joined_block_rows)",
          "old_line_content": "            if (block_number < start_right_block)",
          "new_line_content": "            dst->reserve(max_joined_block_rows);",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "std::cbegin(array_holder)",
          "old_text": null,
          "new_text": "std::cbegin(array_holder)",
          "old_line_content": "    }",
          "new_line_content": "            ? std::find(std::cbegin(array_holder), std::cbegin(array_holder) + items, needle) != std::cbegin(array_holder) + items",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "set_holder_ptr->end()",
          "old_line_content": "",
          "new_line_content": "            : set_holder_ptr->find(needle) != set_holder_ptr->end();",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "block_right.rows()",
          "old_line_content": "",
          "new_line_content": "            size_t rows_right = block_right.rows();",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "insertManyFrom",
          "old_text": null,
          "new_text": "dst_columns[col_num]->insertManyFrom(*src_left_columns[col_num], left_row, rows_right)",
          "old_line_content": "        {",
          "new_line_content": "                dst_columns[col_num]->insertManyFrom(*src_left_columns[col_num], left_row, rows_right);",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "block_right.getByPosition(col_num)",
          "old_line_content": "            break;",
          "new_line_content": "                const IColumn & column_right = *block_right.getByPosition(col_num).column;",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": null,
          "new_api": "insertRangeFrom",
          "old_text": null,
          "new_text": "dst_columns[num_existing_columns + col_num]->insertRangeFrom(column_right, 0, rows_right)",
          "old_line_content": "        }",
          "new_line_content": "                dst_columns[num_existing_columns + col_num]->insertRangeFrom(column_right, 0, rows_right);",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": null,
          "new_api": "cloneEmpty",
          "old_text": null,
          "new_text": "std::make_shared<NotProcessedCrossJoin>(\n                NotProcessedCrossJoin{{block.cloneEmpty()}, left_row, block_number + 1})",
          "old_line_content": "",
          "new_line_content": "            not_processed = std::make_shared<NotProcessedCrossJoin>(",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "applyLazyDefaults",
          "old_text": null,
          "new_text": "added.applyLazyDefaults()",
          "old_line_content": "                if (!new_known_rows_ptr)",
          "new_line_content": "        added.applyLazyDefaults();",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "cloneEmpty",
          "old_text": null,
          "new_text": "block.cloneEmpty()",
          "old_line_content": "DataTypePtr HashJoin::joinGetCheckAndGetReturnType(const DataTypes & data_types, const String & column_name, bool or_null) const",
          "new_line_content": "                NotProcessedCrossJoin{{block.cloneEmpty()}, left_row, block_number + 1});",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "not_processed->block.swap(block)",
          "old_line_content": "{",
          "new_line_content": "            not_processed->block.swap(block);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "it.ok()",
          "old_line_content": "                {",
          "new_line_content": "        for (auto it = mapped.begin(); it.ok(); ++it)",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "block.insert(src_column)",
          "old_line_content": "",
          "new_line_content": "        block.insert(src_column);",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "std::move(dst_columns)",
          "old_text": null,
          "new_text": "std::move(dst_columns)",
          "old_line_content": "    {",
          "new_line_content": "    block = block.cloneWithColumns(std::move(dst_columns));",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "old_text": null,
          "new_text": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "old_line_content": "            }",
          "new_line_content": "                added.appendFromBlock<false>(*it->block, it->row_num);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "std::make_unique<std::vector<KnownRowsHolder<true>::Type>>()",
          "old_text": null,
          "new_text": "std::make_unique<std::vector<KnownRowsHolder<true>::Type>>()",
          "old_line_content": "        {",
          "new_line_content": "                    new_known_rows_ptr = std::make_unique<std::vector<KnownRowsHolder<true>::Type>>();",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "std::make_pair(it->block, it->row_num)",
          "old_text": null,
          "new_text": "std::make_pair(it->block, it->row_num)",
          "old_line_content": "        }",
          "new_line_content": "                new_known_rows_ptr->push_back(std::make_pair(it->block, it->row_num));",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "toString(num_keys)",
          "old_line_content": "",
          "new_line_content": "            toString(or_null ? \"OrNull\" : \"\"), toString(num_keys));",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(\n                        FindResultImpl<const RowRef, false>(*it, true, 0))",
          "old_text": null,
          "new_text": "::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(\n                        FindResultImpl<const RowRef, false>(*it, true, 0))",
          "old_line_content": "    {",
          "new_line_content": "                    used_flags->JoinStuff::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "recursiveRemoveLowCardinality",
          "old_text": null,
          "new_text": "recursiveRemoveLowCardinality(right_type_origin)",
          "old_line_content": "    return elem.type;",
          "new_line_content": "        auto right_type = removeNullable(recursiveRemoveLowCardinality(right_type_origin));",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "equals",
          "old_text": null,
          "new_text": "left_type->equals(*right_type)",
          "old_line_content": "}",
          "new_line_content": "        if (!left_type->equals(*right_type))",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "std::cend(*new_known_rows_ptr)",
          "old_text": null,
          "new_text": "std::cend(*new_known_rows_ptr)",
          "old_line_content": "",
          "new_line_content": "            known_rows.add(std::cbegin(*new_known_rows_ptr), std::cend(*new_known_rows_ptr));",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::TYPE_MISMATCH, \"Type mismatch in joinGet key {}: \"\n                \"found type {}, while the needed type is {}\", i, left_type->getName(), right_type->getName())",
          "old_line_content": "",
          "new_line_content": "            throw Exception(ErrorCodes::TYPE_MISMATCH, \"Type mismatch in joinGet key {}: \"",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "right_type->getName()",
          "old_line_content": "/// TODO: return multiple columns as named tuple",
          "new_line_content": "                \"found type {}, while the needed type is {}\", i, left_type->getName(), right_type->getName());",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": null,
          "new_api": "has",
          "old_text": null,
          "new_text": "sample_block_with_columns_to_add.has(column_name)",
          "old_line_content": "{",
          "new_line_content": "    if (!sample_block_with_columns_to_add.has(column_name))",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "it.ok()",
          "old_line_content": "    {",
          "new_line_content": "        for (auto it = mapped.begin(); it.ok(); ++it)",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::NO_SUCH_COLUMN_IN_TABLE, \"StorageJoin doesn't contain column {}\", column_name)",
          "old_line_content": "    bool is_valid = (strictness == JoinStrictness::Any || strictness == JoinStrictness::RightAny)",
          "new_line_content": "        throw Exception(ErrorCodes::NO_SUCH_COLUMN_IN_TABLE, \"StorageJoin doesn't contain column {}\", column_name);",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "old_text": null,
          "new_text": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "old_line_content": "        if constexpr (need_offset)",
          "new_line_content": "            added.appendFromBlock<false>(*it->block, it->row_num);",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "getByName",
          "old_text": null,
          "new_text": "sample_block_with_columns_to_add.getByName(column_name)",
          "old_line_content": "    if (!is_valid)",
          "new_line_content": "    auto elem = sample_block_with_columns_to_add.getByName(column_name);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "appendDefaultRow",
          "old_text": null,
          "new_text": "added.appendDefaultRow()",
          "old_line_content": "",
          "new_line_content": "        added.appendDefaultRow();",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::INCOMPATIBLE_TYPE_OF_JOIN, \"joinGet only supports StorageJoin of type Left Any\")",
          "old_line_content": "    static_assert(!MapGetter<JoinKind::Left, JoinStrictness::Any>::flagged,",
          "new_line_content": "        throw Exception(ErrorCodes::INCOMPATIBLE_TYPE_OF_JOIN, \"joinGet only supports StorageJoin of type Left Any\");",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "getOnlyClause",
          "old_text": null,
          "new_text": "table_join->getOnlyClause()",
          "old_line_content": "                  \"joinGet are not protected from hash table changes between block processing\");",
          "new_line_content": "    const auto & key_names_right = table_join->getOnlyClause().key_names_right;",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": null,
          "new_api": "std::move(key)",
          "old_text": null,
          "new_text": "std::move(key)",
          "old_line_content": "",
          "new_line_content": "        keys.insert(std::move(key));",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": null,
          "new_api": "std::get<MapsOne>(data->maps[0])",
          "old_text": null,
          "new_text": "std::get<MapsOne>(data->maps[0])",
          "old_line_content": "}",
          "new_line_content": "    maps_vector.push_back(&std::get<MapsOne>(data->maps[0]));",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": null,
          "new_api": "joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(\n        keys, block_with_columns_to_add, maps_vector, /* is_join_get = */ true)",
          "old_text": null,
          "new_text": "joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(\n        keys, block_with_columns_to_add, maps_vector, /* is_join_get = */ true)",
          "old_line_content": "",
          "new_line_content": "    joinBlockImpl<JoinKind::Left, JoinStrictness::Any>(",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": null,
          "new_api": "columns",
          "old_text": null,
          "new_text": "keys.columns()",
          "old_line_content": "{",
          "new_line_content": "    return keys.getByPosition(keys.columns() - 1);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "    size_t max_joined_block_rows = added_columns.max_joined_block_rows;",
          "new_line_content": "    constexpr JoinFeatures<KIND, STRICTNESS> join_features;",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "IColumn::Filter(rows, 0)",
          "old_text": null,
          "new_text": "IColumn::Filter(rows, 0)",
          "old_line_content": "        if constexpr (join_features.need_replication)",
          "new_line_content": "        added_columns.filter = IColumn::Filter(rows, 0);",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": null,
          "new_api": "getClauses",
          "old_text": null,
          "new_text": "table_join->getClauses()",
          "old_line_content": "    {",
          "new_line_content": "    for (const auto & onexpr : table_join->getClauses())",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "getClauses",
          "old_text": null,
          "new_text": "table_join->getClauses()",
          "old_line_content": "    }",
          "new_line_content": "    for (const auto & onexpr : table_join->getClauses())",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "condColumnNames",
          "old_text": null,
          "new_text": "onexpr.condColumnNames()",
          "old_line_content": "    if (kind == JoinKind::Right || kind == JoinKind::Full)",
          "new_line_content": "        auto cond_column_name = onexpr.condColumnNames();",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(current_offset >= max_joined_block_rows)",
          "old_line_content": "        {",
          "new_line_content": "            if (unlikely(current_offset >= max_joined_block_rows))",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "JoinCommon::checkTypesOfKeys(\n            block, onexpr.key_names_left, cond_column_name.first,\n            right_sample_block, onexpr.key_names_right, cond_column_name.second)",
          "old_text": null,
          "new_text": "JoinCommon::checkTypesOfKeys(\n            block, onexpr.key_names_left, cond_column_name.first,\n            right_sample_block, onexpr.key_names_right, cond_column_name.second)",
          "old_line_content": "    {",
          "new_line_content": "        JoinCommon::checkTypesOfKeys(",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "resize_assume_reserved",
          "old_text": null,
          "new_text": "added_columns.offsets_to_replicate->resize_assume_reserved(i)",
          "old_line_content": "            if (join_keys.null_map && (*join_keys.null_map)[i])",
          "new_line_content": "                added_columns.offsets_to_replicate->resize_assume_reserved(i);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "resize_assume_reserved",
          "old_text": null,
          "new_text": "added_columns.filter.resize_assume_reserved(i)",
          "old_line_content": "                continue;",
          "new_line_content": "                added_columns.filter.resize_assume_reserved(i);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "added_columns.join_on_keys.size()",
          "old_line_content": "                right_row_found = true;",
          "new_line_content": "        for (size_t onexpr_idx = 0; onexpr_idx < added_columns.join_on_keys.size(); ++onexpr_idx)",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "table_join->getClauses().size()",
          "old_line_content": "            /// Joined",
          "new_line_content": "        for (size_t i = 0; i < table_join->getClauses().size(); ++i)",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "FindResult",
          "old_text": null,
          "new_text": "FindResult()",
          "old_line_content": "                    {",
          "new_line_content": "            auto find_result = row_acceptable ? key_getter_vector[onexpr_idx].findKey(*(mapv[onexpr_idx]), i, pool) : FindResult();",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "maps_vector.push_back(&data->maps[i])",
          "old_line_content": "        }",
          "new_line_content": "            maps_vector.push_back(&data->maps[i]);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "isFound",
          "old_text": null,
          "new_text": "find_result.isFound()",
          "old_line_content": "                        if constexpr (multiple_disjuncts)",
          "new_line_content": "            if (find_result.isFound())",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": null,
          "new_api": "joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_)",
          "old_text": null,
          "new_text": "joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_)",
          "old_line_content": "}",
          "new_line_content": "            Block remaining_block = joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_);",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": null,
          "new_api": "rows",
          "old_text": null,
          "new_text": "remaining_block.rows()",
          "old_line_content": "",
          "new_line_content": "            if (remaining_block.rows())",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": null,
          "new_api": "std::move(remaining_block)",
          "old_text": null,
          "new_text": "std::move(remaining_block)",
          "old_line_content": "HashJoin::~HashJoin()",
          "new_line_content": "                not_processed = std::make_shared<ExtraBlock>(ExtraBlock{std::move(remaining_block)});",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "leftAsofKey",
          "old_text": null,
          "new_text": "added_columns.leftAsofKey()",
          "old_line_content": "                    }",
          "new_line_content": "                    const IColumn & left_asof_key = added_columns.leftAsofKey();",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "not_processed.reset()",
          "old_line_content": "    if (!data)",
          "new_line_content": "                not_processed.reset();",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": null,
          "new_api": "setUsed<need_filter>(added_columns.filter, i)",
          "old_text": null,
          "new_text": "setUsed<need_filter>(added_columns.filter, i)",
          "old_line_content": "                {",
          "new_line_content": "                        setUsed<need_filter>(added_columns.filter, i);",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Wrong JOIN combination: {} {}\", strictness, kind)",
          "old_line_content": "}",
          "new_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Wrong JOIN combination: {} {}\", strictness, kind);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num)",
          "old_text": null,
          "new_text": "added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num)",
          "old_line_content": "                else if constexpr ((join_features.is_any_join || join_features.is_semi_join) && join_features.right)",
          "new_line_content": "                        added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "getTotalRowCount",
          "old_text": null,
          "new_text": "getTotalRowCount()",
          "old_line_content": "        {",
          "new_line_content": "    LOG_TRACE(log, \"{}Join data is being destroyed, {} bytes and {} rows in hash table\", instance_log_id, getTotalByteCount(), getTotalRowCount());",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "old_text": null,
          "new_text": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "old_line_content": "                }",
          "new_line_content": "                    addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": null,
          "new_text": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "                    /// Use first appeared left key only",
          "new_line_content": "                    bool used_once = used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "            }",
          "new_line_content": "        [[maybe_unused]] constexpr bool mapped_one = std::is_same_v<Mapped, RowRef>;",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "old_text": null,
          "new_text": "addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt)",
          "old_line_content": "                    }",
          "new_line_content": "                        addFoundRowAll<Map, join_features.add_missing>(mapped, added_columns, current_offset, known_rows, used_flags_opt);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": null,
          "new_api": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": null,
          "new_text": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "                {",
          "new_line_content": "                    bool used_once = used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "setUsed<need_filter>(added_columns.filter, i)",
          "old_text": null,
          "new_text": "setUsed<need_filter>(added_columns.filter, i)",
          "old_line_content": "                    if constexpr (join_features.right && join_features.need_flags)",
          "new_line_content": "                        setUsed<need_filter>(added_columns.filter, i);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "it.ok()",
          "old_line_content": "};",
          "new_line_content": "            for (auto it = mapped.begin(); it.ok(); ++it)",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "columns_right.size()",
          "old_line_content": "/// Stream from not joined earlier rows of the right table.",
          "new_line_content": "                for (size_t j = 0; j < columns_right.size(); ++j)",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "it->block->getByPosition(j)",
          "old_line_content": "///   - map offsetInternal saved in used_flags for single disjuncts",
          "new_line_content": "                    const auto & mapped_column = it->block->getByPosition(j).column;",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "insertFrom",
          "old_text": null,
          "new_text": "columns_right[j]->insertFrom(*mapped_column, it->row_num)",
          "old_line_content": "///   - flags in BlockWithFlags for multiple disjuncts",
          "new_line_content": "                    columns_right[j]->insertFrom(*mapped_column, it->row_num);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": null,
          "new_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "                }",
          "new_line_content": "                        used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "setUsed<need_filter>(added_columns.filter, i)",
          "old_text": null,
          "new_text": "setUsed<need_filter>(added_columns.filter, i)",
          "old_line_content": "        if (!right_row_found)",
          "new_line_content": "                    setUsed<need_filter>(added_columns.filter, i);",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_text": null,
          "new_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "old_line_content": "        {",
          "new_line_content": "                    used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": null,
          "new_api": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "old_text": null,
          "new_text": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "old_line_content": "            if constexpr (join_features.is_anti_join && join_features.left)",
          "new_line_content": "                    added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2049,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(parent.data->type == HashJoin::Type::EMPTY)",
          "new_text": null,
          "old_line_content": "        if (unlikely(parent.data->type == HashJoin::Type::EMPTY))",
          "new_line_content": "        , multiple_disjuncts(multiple_disjuncts_)",
          "content_same": false
        },
        {
          "line": 2051,
          "old_api": "fillColumnsFromData",
          "new_api": null,
          "old_text": "fillColumnsFromData(parent.data->blocks, columns_right)",
          "new_text": null,
          "old_line_content": "            rows_added = fillColumnsFromData(parent.data->blocks, columns_right);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "applyLazyDefaults",
          "new_api": null,
          "old_text": "added_columns.applyLazyDefaults()",
          "new_text": null,
          "old_line_content": "    added_columns.applyLazyDefaults();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "fillColumnsFromMap",
          "new_api": null,
          "old_text": "fillColumnsFromMap(map, columns_right)",
          "new_text": null,
          "old_line_content": "                rows_added = fillColumnsFromMap(map, columns_right);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": "front",
          "new_api": null,
          "old_text": "parent.data->maps.front()",
          "new_text": null,
          "old_line_content": "            if (!joinDispatch(parent.kind, parent.strictness, parent.data->maps.front(), fill_callback))",
          "new_line_content": "        size_t rows_added = 0;",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "size",
          "new_api": null,
          "old_text": "mapv.size()",
          "new_text": null,
          "old_line_content": "    return mapv.size() > 1",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_api": null,
          "old_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_text": null,
          "old_line_content": "        : joinRightColumns<KIND, STRICTNESS, KeyGetter, Map, need_filter, false>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags);",
          "new_line_content": "    return i;",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": "fillNullsFromBlocks",
          "new_api": null,
          "old_text": "fillNullsFromBlocks(columns_right, rows_added)",
          "new_text": null,
          "old_line_content": "            fillNullsFromBlocks(columns_right, rows_added);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_api": null,
          "old_text": "std::forward<std::vector<KeyGetter>>(key_getter_vector)",
          "new_text": null,
          "old_line_content": "        return joinRightColumnsSwitchMultipleDisjuncts<KIND, STRICTNESS, KeyGetter, Map, true>(std::forward<std::vector<KeyGetter>>(key_getter_vector), mapv, added_columns, used_flags);",
          "new_line_content": "size_t joinRightColumnsSwitchNullability(",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "position.has_value()",
          "new_text": null,
          "old_line_content": "        if (!position.has_value())",
          "new_line_content": "    const HashJoin & parent;",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "begin",
          "new_api": null,
          "old_text": "blocks.begin()",
          "new_text": null,
          "old_line_content": "            position = std::make_any<BlocksList::const_iterator>(blocks.begin());",
          "new_line_content": "    UInt64 max_block_size;",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "std::any_cast<BlocksList::const_iterator &>(position)",
          "new_api": null,
          "old_text": "std::any_cast<BlocksList::const_iterator &>(position)",
          "new_text": null,
          "old_line_content": "        auto & block_it = std::any_cast<BlocksList::const_iterator &>(position);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "end",
          "new_api": null,
          "old_text": "blocks.end()",
          "new_text": null,
          "old_line_content": "        auto end = blocks.end();",
          "new_line_content": "    size_t current_block_start;",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    constexpr bool is_asof_join = STRICTNESS == JoinStrictness::Asof;",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "rows",
          "new_api": null,
          "old_text": "block_it->rows()",
          "new_text": null,
          "old_line_content": "            size_t rows_from_block = std::min<size_t>(max_block_size - rows_added, block_it->rows() - current_block_start);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "size",
          "new_api": null,
          "old_text": "columns_right.size()",
          "new_text": null,
          "old_line_content": "            for (size_t j = 0; j < columns_right.size(); ++j)",
          "new_line_content": "    size_t fillColumnsFromData(const BlocksList & blocks, MutableColumns & columns_right)",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "key_getter_vector.emplace_back()",
          "new_text": null,
          "old_line_content": "                key_getter_vector.emplace_back();",
          "new_line_content": "    HashJoin::Type type,",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "a_map_type_vector.emplace_back()",
          "new_text": null,
          "old_line_content": "                a_map_type_vector.emplace_back();",
          "new_line_content": "    switch (type)",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(\n                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags)",
          "new_api": null,
          "old_text": "joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(\n                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags)",
          "new_text": null,
          "old_line_content": "                return joinRightColumnsSwitchNullability<KIND, STRICTNESS, KeyGetter>(",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "std::move(key_getter_vector)",
          "new_api": null,
          "old_text": "std::move(key_getter_vector)",
          "new_text": null,
          "old_line_content": "                        std::move(key_getter_vector), a_map_type_vector, added_columns, used_flags);",
          "new_line_content": "        case HashJoin::Type::EMPTY:",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys. Type: {}\", type)",
          "new_text": null,
          "old_line_content": "            throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys. Type: {}\", type);",
          "new_line_content": "            if constexpr (!is_asof_join)",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "APPLY_FOR_JOIN_VARIANTS",
          "new_api": null,
          "old_text": "APPLY_FOR_JOIN_VARIANTS(M)",
          "new_text": null,
          "old_line_content": "            APPLY_FOR_JOIN_VARIANTS(M)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "APPLY_FOR_JOIN_VARIANTS",
          "new_api": null,
          "old_text": "APPLY_FOR_JOIN_VARIANTS(M)",
          "new_text": null,
          "old_line_content": "        APPLY_FOR_JOIN_VARIANTS(M)",
          "new_line_content": "            using KeyGetter = typename KeyGetterForType<HashJoin::Type::TYPE, MapTypeVal>::Type; \\",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "size",
          "new_api": null,
          "old_text": "lazy_output.blocks.size()",
          "new_text": null,
          "old_line_content": "            for (size_t j = 0; j < lazy_output.blocks.size(); ++j)",
          "new_line_content": "            size_t default_count = 0;",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", parent.data->type)",
          "new_text": null,
          "old_line_content": "                throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", parent.data->type);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", type)",
          "new_text": null,
          "old_line_content": "            throw Exception(ErrorCodes::UNSUPPORTED_JOIN_KEYS, \"Unsupported JOIN keys (type: {})\", type);",
          "new_line_content": "            {       \\",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "        UNREACHABLE();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "insertDefaultInto",
          "new_api": null,
          "old_text": "type_name[i].type->insertDefaultInto(*col)",
          "new_text": null,
          "old_line_content": "                    type_name[i].type->insertDefaultInto(*col);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "reinterpret_cast<const Block *>(lazy_output.blocks[j])->getByPosition(right_indexes[i])",
          "new_text": null,
          "old_line_content": "                const auto & column_from_block = reinterpret_cast<const Block *>(lazy_output.blocks[j])->getByPosition(right_indexes[i]);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "isNullable",
          "new_api": null,
          "old_text": "column_from_block.column->isNullable()",
          "new_text": null,
          "old_line_content": "                        nullable_col && !column_from_block.column->isNullable())",
          "new_line_content": "                    default_count = 0;",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "used_position.has_value()",
          "new_text": null,
          "old_line_content": "            if (!used_position.has_value())",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": "begin",
          "new_api": null,
          "old_text": "parent.data->blocks.begin()",
          "new_text": null,
          "old_line_content": "                used_position = parent.data->blocks.begin();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "end",
          "new_api": null,
          "old_text": "parent.data->blocks.end()",
          "new_text": null,
          "old_line_content": "            auto end = parent.data->blocks.end();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "JoinCommon::filterWithBlanks(right_column.column, *null_map_filter)",
          "new_api": null,
          "old_text": "JoinCommon::filterWithBlanks(right_column.column, *null_map_filter)",
          "new_text": null,
          "old_line_content": "        right_column.column = JoinCommon::filterWithBlanks(right_column.column, *null_map_filter);",
          "new_line_content": "  * In that case for matched rows in t2.key we will use values from t1.key.",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "rows",
          "new_api": null,
          "old_text": "mapped_block.rows()",
          "new_text": null,
          "old_line_content": "                for (size_t row = 0; row < mapped_block.rows(); ++row)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "isNullableOrLowCardinalityNullable",
          "new_api": null,
          "old_text": "isNullableOrLowCardinalityNullable(right_key_type)",
          "new_text": null,
          "old_line_content": "    bool should_be_nullable = isNullableOrLowCardinalityNullable(right_key_type);",
          "new_line_content": "  * Also, the nullability of the column might be different.",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "isUsed",
          "new_api": null,
          "old_text": "parent.isUsed(&mapped_block, row)",
          "new_text": null,
          "old_line_content": "                    if (!parent.isUsed(&mapped_block, row))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "correctNullabilityInplace",
          "new_api": null,
          "old_text": "correctNullabilityInplace(right_column, should_be_nullable, *null_map_filter)",
          "new_text": null,
          "old_line_content": "        correctNullabilityInplace(right_column, should_be_nullable, *null_map_filter);",
          "new_line_content": "  */",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "correctNullabilityInplace",
          "new_api": null,
          "old_text": "correctNullabilityInplace(right_column, should_be_nullable)",
          "new_text": null,
          "old_line_content": "        correctNullabilityInplace(right_column, should_be_nullable);",
          "new_line_content": "    const DataTypePtr & right_key_type, const String & renamed_right_column, const ColumnWithTypeAndName & left_column, const IColumn::Filter * null_map_filter = nullptr)",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "equals",
          "new_api": null,
          "old_text": "right_column.type->equals(*right_key_type)",
          "new_text": null,
          "old_line_content": "    if (!right_column.type->equals(*right_key_type))",
          "new_line_content": "    ColumnWithTypeAndName right_column = left_column;",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "castColumnAccurate",
          "new_api": null,
          "old_text": "castColumnAccurate(right_column, right_key_type)",
          "new_text": null,
          "old_line_content": "        right_column.column = castColumnAccurate(right_column, right_key_type);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "size",
          "new_api": null,
          "old_text": "right_indexes.size()",
          "new_text": null,
          "old_line_content": "        for (size_t j = 0; j < right_indexes.size(); ++j)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "block.getByPosition(right_indexes[j]).column.get()",
          "new_text": null,
          "old_line_content": "            const auto * column_from_block = block.getByPosition(right_indexes[j]).column.get();",
          "new_line_content": "    ColumnWithTypeAndName moveColumn(size_t i)",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "get",
          "new_api": null,
          "old_text": "columns[j].get()",
          "new_text": null,
          "old_line_content": "            const auto * dest_column = columns[j].get();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR,\n                        \"Columns {} and {} can have different nullability only in joinGetOrNull\",\n                        dest_column->getName(), column_from_block->getName())",
          "new_text": null,
          "old_line_content": "                    throw Exception(ErrorCodes::LOGICAL_ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "getName",
          "new_api": null,
          "old_text": "column_from_block->getName()",
          "new_text": null,
          "old_line_content": "                        dest_column->getName(), column_from_block->getName());",
          "new_line_content": "    void appendFromBlock(const Block & block, size_t row_num)",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "get",
          "new_api": null,
          "old_text": "nullable_col->getNestedColumnPtr().get()",
          "new_text": null,
          "old_line_content": "                dest_column = nullable_col->getNestedColumnPtr().get();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "position.has_value()",
          "new_text": null,
          "old_line_content": "            if (!position.has_value())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "begin",
          "new_api": null,
          "old_text": "map.begin()",
          "new_text": null,
          "old_line_content": "                position = std::make_any<Iterator>(map.begin());",
          "new_line_content": "                        ++rows_added;",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": "std::any_cast<Iterator &>(position)",
          "new_api": null,
          "old_text": "std::any_cast<Iterator &>(position)",
          "new_text": null,
          "old_line_content": "            Iterator & it = std::any_cast<Iterator &>(position);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "end",
          "new_api": null,
          "old_text": "map.end()",
          "new_text": null,
          "old_line_content": "            auto end = map.end();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "rows",
          "new_api": null,
          "old_text": "block.rows()",
          "new_text": null,
          "old_line_content": "    size_t total_rows = block.rows();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "cloneEmpty",
          "new_api": null,
          "old_text": "block.cloneEmpty()",
          "new_text": null,
          "old_line_content": "    Block remaining_block = block.cloneEmpty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "block.getByPosition(i)",
          "new_text": null,
          "old_line_content": "        auto & col = block.getByPosition(i);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "getMapped",
          "new_api": null,
          "old_text": "it->getMapped()",
          "new_text": null,
          "old_line_content": "                const Mapped & mapped = it->getMapped();",
          "new_line_content": "            using Mapped = typename Map::mapped_type;",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*column_from_block)",
          "new_text": null,
          "old_line_content": "            if (typeid(*dest_column) != typeid(*column_from_block))",
          "new_line_content": "                if (!is_join_get)",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "getPtr",
          "new_api": null,
          "old_text": "it.getPtr()",
          "new_text": null,
          "old_line_content": "                size_t offset = map.offsetInternal(it.getPtr());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "isUsed",
          "new_api": null,
          "old_text": "parent.isUsed(offset)",
          "new_text": null,
          "old_line_content": "                if (parent.isUsed(offset))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "getName",
          "new_api": null,
          "old_text": "column_from_block->getName()",
          "new_text": null,
          "old_line_content": "                    dest_column->getName(), column_from_block->getName(),",
          "new_line_content": "                        \"Columns {} and {} can have different nullability only in joinGetOrNull\",",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "cut",
          "new_api": null,
          "old_text": "col.column->cut(num_rows, remaining_rows)",
          "new_text": null,
          "old_line_content": "        remaining_block.getByPosition(i).column = col.column->cut(num_rows, remaining_rows);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "cut",
          "new_api": null,
          "old_text": "col.column->cut(0, num_rows)",
          "new_text": null,
          "old_line_content": "        col.column = col.column->cut(0, num_rows);",
          "new_line_content": "/// Cut first num_rows rows from block in place and returns block with remaining rows",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "reinterpret_cast<UInt64>(&block)",
          "new_api": null,
          "old_text": "reinterpret_cast<UInt64>(&block)",
          "new_text": null,
          "old_line_content": "            lazy_output.blocks.emplace_back(reinterpret_cast<UInt64>(&block));",
          "new_line_content": "              * ColumnLowCardinality(size = 0, UInt8(size = 0), ColumnUnique(size = 1, String(size = 1)))",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "static_cast<uint32_t>(row_num)",
          "new_api": null,
          "old_text": "static_cast<uint32_t>(row_num)",
          "new_text": null,
          "old_line_content": "            lazy_output.row_nums.emplace_back(static_cast<uint32_t>(row_num));",
          "new_line_content": "              * and",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    constexpr JoinFeatures<KIND, STRICTNESS> join_features;",
          "new_line_content": "    return remaining_block;",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "lazy_output.blocks.emplace_back(0)",
          "new_text": null,
          "old_line_content": "            lazy_output.blocks.emplace_back(0);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "lazy_output.row_nums.emplace_back(0)",
          "new_text": null,
          "old_line_content": "            lazy_output.row_nums.emplace_back(0);",
          "new_line_content": "        if (has_columns_to_add)",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "getClauses",
          "new_api": null,
          "old_text": "table_join->getClauses()",
          "new_text": null,
          "old_line_content": "    const auto & onexprs = table_join->getClauses();",
          "new_line_content": "} /// nameless",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "nulls_position.has_value()",
          "new_text": null,
          "old_line_content": "        if (!nulls_position.has_value())",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "begin",
          "new_api": null,
          "old_text": "parent.data->blocks_nullmaps.begin()",
          "new_text": null,
          "old_line_content": "            nulls_position = parent.data->blocks_nullmaps.begin();",
          "new_line_content": "                    ++it;",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "size",
          "new_api": null,
          "old_text": "onexprs.size()",
          "new_text": null,
          "old_line_content": "    for (size_t i = 0; i < onexprs.size(); ++i)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": "end",
          "new_api": null,
          "old_text": "parent.data->blocks_nullmaps.end()",
          "new_text": null,
          "old_line_content": "        auto end = parent.data->blocks_nullmaps.end();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "condColumnNames",
          "new_api": null,
          "old_text": "onexprs[i].condColumnNames()",
          "new_text": null,
          "old_line_content": "        join_on_keys.emplace_back(block, key_names, onexprs[i].condColumnNames().first, key_sizes[i]);",
          "new_line_content": "    Block & block,",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "columns",
          "new_api": null,
          "old_text": "block.columns()",
          "new_text": null,
          "old_line_content": "    size_t existing_columns = block.columns();",
          "new_line_content": "    const std::vector<const Maps *> & maps_,",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "size",
          "new_api": null,
          "old_text": "right_indexes.size()",
          "new_text": null,
          "old_line_content": "            for (size_t j = 0, size = right_indexes.size(); j < size; ++j)",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count)",
          "new_api": null,
          "old_text": "JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count)",
          "new_text": null,
          "old_line_content": "                JoinCommon::addDefaultValues(*columns[j], type_name[j].type, lazy_defaults_count);",
          "new_line_content": "        if (has_columns_to_add)",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "getData",
          "new_api": null,
          "old_text": "assert_cast<const ColumnUInt8 &>(*it->second).getData()",
          "new_text": null,
          "old_line_content": "                nullmap = &assert_cast<const ColumnUInt8 &>(*it->second).getData();",
          "new_line_content": "    void fillNullsFromBlocks(MutableColumns & columns_keys_and_right, size_t & rows_added)",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "materializeBlockInplace",
          "new_api": null,
          "old_text": "materializeBlockInplace(block)",
          "new_text": null,
          "old_line_content": "        materializeBlockInplace(block);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": "size",
          "new_api": null,
          "old_text": "columns_keys_and_right.size()",
          "new_text": null,
          "old_line_content": "                    for (size_t col = 0; col < columns_keys_and_right.size(); ++col)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "block->getByPosition(col)",
          "new_text": null,
          "old_line_content": "                        columns_keys_and_right[col]->insertFrom(*block->getByPosition(col).column, row);",
          "new_line_content": "        for (auto & it = *nulls_position; it != end && rows_added < max_block_size; ++it)",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "savedBlockSample",
          "new_api": null,
          "old_text": "savedBlockSample()",
          "new_text": null,
          "old_line_content": "        savedBlockSample(),",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "std::move(join_on_keys)",
          "new_api": null,
          "old_text": "std::move(join_on_keys)",
          "new_text": null,
          "old_line_content": "        std::move(join_on_keys),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "columns",
          "new_api": null,
          "old_text": "required_right_keys.columns()",
          "new_text": null,
          "old_line_content": "    bool has_required_right_keys = (required_right_keys.columns() != 0);",
          "new_line_content": "      *  but they will not be used at this stage of joining (and will be in `AdderNonJoined`), and they need to be skipped.",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": "columns",
          "new_api": null,
          "old_text": "left_sample_block.columns()",
          "new_text": null,
          "old_line_content": "    size_t left_columns_count = left_sample_block.columns();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2)",
          "new_api": null,
          "old_text": "std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2)",
          "new_text": null,
          "old_line_content": "        size_t reserve_size = std::min<size_t>(max_joined_block_rows, DEFAULT_BLOCK_SIZE * 2);",
          "new_line_content": "    size_t max_joined_block_rows = 0;",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": "oneDisjunct",
          "new_api": null,
          "old_text": "table_join->oneDisjunct()",
          "new_text": null,
          "old_line_content": "    bool multiple_disjuncts = !table_join->oneDisjunct();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "std::numeric_limits<size_t>::max()",
          "new_api": null,
          "old_text": "std::numeric_limits<size_t>::max()",
          "new_text": null,
          "old_line_content": "        added_columns.max_joined_block_rows = std::numeric_limits<size_t>::max();",
          "new_line_content": "        block,",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "static_cast<size_t>(1.1 * reserve_size)",
          "new_api": null,
          "old_text": "static_cast<size_t>(1.1 * reserve_size)",
          "new_text": null,
          "old_line_content": "            reserve_size = static_cast<size_t>(1.1 * reserve_size);",
          "new_line_content": "    IColumn::Filter filter;",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "columns",
          "new_api": null,
          "old_text": "sample_block_with_columns_to_add.columns()",
          "new_text": null,
          "old_line_content": "        size_t expected_columns_count = left_columns_count + required_right_keys.columns() + sample_block_with_columns_to_add.columns();",
          "new_line_content": "IBlocksStreamPtr HashJoin::getNonJoinedBlocks(const Block & left_sample_block,",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "columns",
          "new_api": null,
          "old_text": "result_sample_block.columns()",
          "new_text": null,
          "old_line_content": "        if (expected_columns_count != result_sample_block.columns())",
          "new_line_content": "                                                              const Block & result_sample_block,",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "column->reserve(reserve_size)",
          "new_text": null,
          "old_line_content": "            column->reserve(reserve_size);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "columns",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Unexpected number of columns in result sample block: {} instead of {} ({} + {} + {})\",\n                            result_sample_block.columns(), expected_columns_count,\n                            left_columns_count, required_right_keys.columns(), sample_block_with_columns_to_add.columns())",
          "new_text": null,
          "old_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Unexpected number of columns in result sample block: {} instead of {} ({} + {} + {})\",",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "clear",
          "new_api": null,
          "old_text": "added_columns.join_on_keys.clear()",
          "new_text": null,
          "old_line_content": "    added_columns.join_on_keys.clear();",
          "new_line_content": "        is_join_get);",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "columns",
          "new_api": null,
          "old_text": "sample_block_with_columns_to_add.columns()",
          "new_text": null,
          "old_line_content": "                            left_columns_count, required_right_keys.columns(), sample_block_with_columns_to_add.columns());",
          "new_line_content": "        return {};",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "sliceBlock",
          "new_api": null,
          "old_text": "sliceBlock(block, num_joined)",
          "new_text": null,
          "old_line_content": "    Block remaining_block = sliceBlock(block, num_joined);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "buildOutput",
          "new_api": null,
          "old_text": "added_columns.buildOutput()",
          "new_text": null,
          "old_line_content": "    added_columns.buildOutput();",
          "new_line_content": "    added_columns.need_filter = join_features.need_filter || has_required_right_keys;",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "size",
          "new_api": null,
          "old_text": "added_columns.size()",
          "new_text": null,
          "old_line_content": "    for (size_t i = 0; i < added_columns.size(); ++i)",
          "new_line_content": "    added_columns.max_joined_block_rows = max_joined_block_rows;",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": "std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts)",
          "new_api": null,
          "old_text": "std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts)",
          "new_text": null,
          "old_line_content": "    auto non_joined = std::make_unique<NotJoinedHash>(*this, max_block_size, multiple_disjuncts);",
          "new_line_content": "    if (!multiple_disjuncts)",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": "std::move(non_joined)",
          "new_api": null,
          "old_text": "std::move(non_joined)",
          "new_text": null,
          "old_line_content": "    return std::make_unique<NotJoinedBlocks>(std::move(non_joined), result_sample_block, left_columns_count, *table_join);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "moveColumn",
          "new_api": null,
          "old_text": "added_columns.moveColumn(i)",
          "new_text": null,
          "old_line_content": "        block.insert(added_columns.moveColumn(i));",
          "new_line_content": "    if (!added_columns.max_joined_block_rows)",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "oneDisjunct",
          "new_api": null,
          "old_text": "table_join->oneDisjunct()",
          "new_text": null,
          "old_line_content": "    bool multiple_disjuncts = !table_join->oneDisjunct();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::NOT_IMPLEMENTED, \"StorageJoin with ORs is not supported\")",
          "new_text": null,
          "old_line_content": "        throw Exception(ErrorCodes::NOT_IMPLEMENTED, \"StorageJoin with ORs is not supported\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "cloneEmpty",
          "new_api": null,
          "old_text": "src_column.column->cloneEmpty()",
          "new_text": null,
          "old_line_content": "        columns.push_back(src_column.column->cloneEmpty());",
          "new_line_content": "    std::vector<ColumnNullable *> nullable_column_ptrs;",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "size",
          "new_api": null,
          "old_text": "src_column.column->size()",
          "new_text": null,
          "old_line_content": "        columns.back()->reserve(src_column.column->size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "emplace_back",
          "new_api": null,
          "old_text": "type_name.emplace_back(src_column.type, src_column.name, qualified_name)",
          "new_text": null,
          "old_line_content": "        type_name.emplace_back(src_column.type, src_column.name, qualified_name);",
          "new_line_content": "    std::vector<size_t> right_indexes;",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "getBufferSizeInCells",
          "new_api": null,
          "old_text": "joinDispatch(kind, strictness, map, [this](auto kind_, auto strictness_, auto & map_)\n        {\n            used_flags.reinit<kind_, strictness_>(map_.getBufferSizeInCells(data->type) + 1);\n        })",
          "new_text": null,
          "old_line_content": "        joinDispatch(kind, strictness, map, [this](auto kind_, auto strictness_, auto & map_)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "required_right_keys.getByPosition(i)",
          "new_text": null,
          "old_line_content": "            const auto & right_key = required_right_keys.getByPosition(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": "getBufferSizeInCells",
          "new_api": null,
          "old_text": "map_.getBufferSizeInCells(data->type)",
          "new_text": null,
          "old_line_content": "            used_flags.reinit<kind_, strictness_>(map_.getBufferSizeInCells(data->type) + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "back",
          "new_api": null,
          "old_text": "table_join->getOnlyClause().key_names_right.back()",
          "new_text": null,
          "old_line_content": "            if (join_features.is_asof_join && right_key.name == table_join->getOnlyClause().key_names_right.back())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "getByName",
          "new_api": null,
          "old_text": "block.getByName(required_right_keys_sources[i])",
          "new_text": null,
          "old_line_content": "            const auto & left_column = block.getByName(required_right_keys_sources[i]);",
          "new_line_content": "        /// If ANY INNER | RIGHT JOIN - filter all the columns except the new ones.",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool is_any_join = STRICTNESS == JoinStrictness::Any;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool is_any_or_semi_join = STRICTNESS == JoinStrictness::Any || STRICTNESS == JoinStrictness::RightAny || (STRICTNESS == JoinStrictness::Semi && KIND == JoinKind::Left);",
          "new_line_content": "    void addColumn(const ColumnWithTypeAndName & src_column, const std::string & qualified_name)",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool is_all_join = STRICTNESS == JoinStrictness::All;",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": "renamedRightColumnName",
          "new_api": null,
          "old_text": "getTableJoin().renamedRightColumnName(right_key.name)",
          "new_text": null,
          "old_line_content": "            const auto & right_col_name = getTableJoin().renamedRightColumnName(right_key.name);",
          "new_line_content": "        for (size_t i = 0; i < existing_columns; ++i)",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "getTotalRowCount",
          "new_api": null,
          "old_text": "getTotalRowCount()",
          "new_text": null,
          "old_line_content": "    LOG_TRACE(log, \"{}Join data is being released, {} bytes and {} rows in hash table\", instance_log_id, getTotalByteCount(), getTotalRowCount());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "std::move(right_col)",
          "new_api": null,
          "old_text": "std::move(right_col)",
          "new_text": null,
          "old_line_content": "            block.insert(std::move(right_col));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "std::move(data->blocks)",
          "new_api": null,
          "old_text": "std::move(data->blocks)",
          "new_text": null,
          "old_line_content": "    BlocksList right_blocks = std::move(data->blocks);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool left = KIND == JoinKind::Left;",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool right = KIND == JoinKind::Right;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool inner = KIND == JoinKind::Inner;",
          "new_line_content": "template <JoinKind KIND, JoinStrictness STRICTNESS>",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr bool full = KIND == JoinKind::Full;",
          "new_line_content": "struct JoinFeatures",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "required_right_keys.getByPosition(i)",
          "new_text": null,
          "old_line_content": "            const auto & right_key = required_right_keys.getByPosition(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "clear",
          "new_api": null,
          "old_text": "data->maps.clear()",
          "new_text": null,
          "old_line_content": "    data->maps.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "clear",
          "new_api": null,
          "old_text": "data->blocks_nullmaps.clear()",
          "new_text": null,
          "old_line_content": "    data->blocks_nullmaps.clear();",
          "new_line_content": "BlocksList HashJoin::releaseJoinedBlocks(bool restructure)",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "getByName",
          "new_api": null,
          "old_text": "block.getByName(required_right_keys_sources[i])",
          "new_text": null,
          "old_line_content": "            const auto & left_column = block.getByName(required_right_keys_sources[i]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "copyLeftKeyColumnToRight",
          "new_api": null,
          "old_text": "copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column, &added_columns.filter)",
          "new_text": null,
          "old_line_content": "            auto right_col = copyLeftKeyColumnToRight(right_key.type, right_col_name, left_column, &added_columns.filter);",
          "new_line_content": "    else if (has_required_right_keys)",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "std::move(right_col)",
          "new_api": null,
          "old_text": "std::move(right_col)",
          "new_text": null,
          "old_line_content": "            block.insert(std::move(right_col));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "getPositionByName",
          "new_api": null,
          "old_text": "block.getPositionByName(right_col_name)",
          "new_text": null,
          "old_line_content": "                right_keys_to_replicate.push_back(block.getPositionByName(right_col_name));",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": "columns",
          "new_api": null,
          "old_text": "right_sample_block.columns()",
          "new_text": null,
          "old_line_content": "        positions.reserve(right_sample_block.columns());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": "begin",
          "new_api": null,
          "old_text": "right_blocks.begin()",
          "new_text": null,
          "old_line_content": "        const Block & tmp_block = *right_blocks.begin();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": "getPositionByName",
          "new_api": null,
          "old_text": "tmp_block.getPositionByName(sample_column.name)",
          "new_text": null,
          "old_line_content": "            positions.emplace_back(tmp_block.getPositionByName(sample_column.name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": "isNullableOrLowCardinalityNullable",
          "new_api": null,
          "old_text": "isNullableOrLowCardinalityNullable(sample_column.type)",
          "new_text": null,
          "old_line_content": "            is_nullable.emplace_back(isNullableOrLowCardinalityNullable(sample_column.type));",
          "new_line_content": "    BlocksList restored_blocks;",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "safeGetByPosition",
          "new_api": null,
          "old_text": "block.safeGetByPosition(i).column->replicate(*offsets_to_replicate)",
          "new_text": null,
          "old_line_content": "            block.safeGetByPosition(i).column = block.safeGetByPosition(i).column->replicate(*offsets_to_replicate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "safeGetByPosition",
          "new_api": null,
          "old_text": "block.safeGetByPosition(pos).column->replicate(*offsets_to_replicate)",
          "new_text": null,
          "old_line_content": "            block.safeGetByPosition(pos).column = block.safeGetByPosition(pos).column->replicate(*offsets_to_replicate);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "saved_block.getByPosition(positions[i])",
          "new_text": null,
          "old_line_content": "            auto & column = saved_block.getByPosition(positions[i]);",
          "new_line_content": "        for (const auto & sample_column : right_sample_block)",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "correctNullabilityInplace",
          "new_api": null,
          "old_text": "correctNullabilityInplace(column, is_nullable[i])",
          "new_text": null,
          "old_line_content": "            correctNullabilityInplace(column, is_nullable[i]);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": "std::move(restored_block)",
          "new_api": null,
          "old_text": "std::move(restored_block)",
          "new_text": null,
          "old_line_content": "        restored_blocks.emplace_back(std::move(restored_block));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": "reset",
          "new_api": null,
          "old_text": "data.reset()",
          "new_text": null,
          "old_line_content": "    data.reset();",
          "new_line_content": "    for (Block & saved_block : right_blocks)",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "reset",
          "new_api": null,
          "old_text": "not_processed.reset()",
          "new_text": null,
          "old_line_content": "        not_processed.reset();",
          "new_line_content": "    return remaining_block;",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "columns",
          "new_api": null,
          "old_text": "block.columns()",
          "new_text": null,
          "old_line_content": "    size_t num_existing_columns = block.columns();",
          "new_line_content": "void HashJoin::joinBlockImplCross(Block & block, ExtraBlockPtr & not_processed) const",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "columns",
          "new_api": null,
          "old_text": "sample_block_with_columns_to_add.columns()",
          "new_text": null,
          "old_line_content": "    size_t num_columns_to_add = sample_block_with_columns_to_add.columns();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "std::distance(from, to)",
          "new_api": null,
          "old_text": "std::distance(from, to)",
          "new_text": null,
          "old_line_content": "        const size_t new_items = std::distance(from, to);",
          "new_line_content": "    size_t items;",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "std::copy(from, to, &array_holder[items])",
          "new_api": null,
          "old_text": "std::copy(from, to, &array_holder[items])",
          "new_text": null,
          "old_line_content": "            std::copy(from, to, &array_holder[items]);",
          "new_line_content": "    KnownRowsHolder()",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "src_left_columns.reserve(num_existing_columns)",
          "new_text": null,
          "old_line_content": "        src_left_columns.reserve(num_existing_columns);",
          "new_line_content": "        start_left_row = continuation.left_position;",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "reserve",
          "new_api": null,
          "old_text": "dst_columns.reserve(num_existing_columns + num_columns_to_add)",
          "new_text": null,
          "old_line_content": "        dst_columns.reserve(num_existing_columns + num_columns_to_add);",
          "new_line_content": "        start_right_block = continuation.right_block;",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "std::make_unique<SetHolder>()",
          "new_api": null,
          "old_text": "std::make_unique<SetHolder>()",
          "new_text": null,
          "old_line_content": "                set_holder_ptr = std::make_unique<SetHolder>();",
          "new_line_content": "    template<class InputIt>",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "std::cbegin(array_holder)",
          "new_api": null,
          "old_text": "std::cbegin(array_holder)",
          "new_text": null,
          "old_line_content": "                set_holder_ptr->insert(std::cbegin(array_holder), std::cbegin(array_holder) + items);",
          "new_line_content": "    void add(InputIt from, InputIt to)",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "cloneEmpty",
          "new_api": null,
          "old_text": "right_column.column->cloneEmpty()",
          "new_text": null,
          "old_line_content": "            dst_columns.emplace_back(right_column.column->cloneEmpty());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "rows",
          "new_api": null,
          "old_text": "block.rows()",
          "new_text": null,
          "old_line_content": "    size_t rows_left = block.rows();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "insertManyFrom",
          "new_api": null,
          "old_text": "dst_columns[col_num]->insertManyFrom(*src_left_columns[col_num], left_row, rows_right)",
          "new_text": null,
          "old_line_content": "                dst_columns[col_num]->insertManyFrom(*src_left_columns[col_num], left_row, rows_right);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "block_right.getByPosition(col_num)",
          "new_text": null,
          "old_line_content": "                const IColumn & column_right = *block_right.getByPosition(col_num).column;",
          "new_line_content": "            ++block_number;",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "insertRangeFrom",
          "new_api": null,
          "old_text": "dst_columns[num_existing_columns + col_num]->insertRangeFrom(column_right, 0, rows_right)",
          "new_text": null,
          "old_line_content": "                dst_columns[num_existing_columns + col_num]->insertRangeFrom(column_right, 0, rows_right);",
          "new_line_content": "            if (block_number < start_right_block)",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "cloneEmpty",
          "new_api": null,
          "old_text": "std::make_shared<NotProcessedCrossJoin>(\n                NotProcessedCrossJoin{{block.cloneEmpty()}, left_row, block_number + 1})",
          "new_text": null,
          "old_line_content": "            not_processed = std::make_shared<NotProcessedCrossJoin>(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "applyLazyDefaults",
          "new_api": null,
          "old_text": "added.applyLazyDefaults()",
          "new_text": null,
          "old_line_content": "        added.applyLazyDefaults();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "cloneEmpty",
          "new_api": null,
          "old_text": "block.cloneEmpty()",
          "new_text": null,
          "old_line_content": "                NotProcessedCrossJoin{{block.cloneEmpty()}, left_row, block_number + 1});",
          "new_line_content": "            for (size_t col_num = 0; col_num < num_columns_to_add; ++col_num)",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "swap",
          "new_api": null,
          "old_text": "not_processed->block.swap(block)",
          "new_text": null,
          "old_line_content": "            not_processed->block.swap(block);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "ok",
          "new_api": null,
          "old_text": "it.ok()",
          "new_text": null,
          "old_line_content": "        for (auto it = mapped.begin(); it.ok(); ++it)",
          "new_line_content": "    AddedColumns & added,",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "insert",
          "new_api": null,
          "old_text": "block.insert(src_column)",
          "new_text": null,
          "old_line_content": "        block.insert(src_column);",
          "new_line_content": "        start_right_block = 0;",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "std::make_pair(it->block, it->row_num)",
          "new_api": null,
          "old_text": "std::make_pair(it->block, it->row_num)",
          "new_text": null,
          "old_line_content": "            if (!known_rows.isKnown(std::make_pair(it->block, it->row_num)))",
          "new_line_content": "    KnownRowsHolder<multiple_disjuncts> & known_rows [[maybe_unused]],",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "std::move(dst_columns)",
          "new_api": null,
          "old_text": "std::move(dst_columns)",
          "new_text": null,
          "old_line_content": "    block = block.cloneWithColumns(std::move(dst_columns));",
          "new_line_content": "        if (rows_added > max_joined_block_rows)",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "new_api": null,
          "old_text": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "new_text": null,
          "old_line_content": "                added.appendFromBlock<false>(*it->block, it->row_num);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": "std::make_unique<std::vector<KnownRowsHolder<true>::Type>>()",
          "new_api": null,
          "old_text": "std::make_unique<std::vector<KnownRowsHolder<true>::Type>>()",
          "new_text": null,
          "old_line_content": "                    new_known_rows_ptr = std::make_unique<std::vector<KnownRowsHolder<true>::Type>>();",
          "new_line_content": "    if constexpr (multiple_disjuncts)",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "size",
          "new_api": null,
          "old_text": "data_types.size()",
          "new_text": null,
          "old_line_content": "    size_t num_keys = data_types.size();",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "std::make_pair(it->block, it->row_num)",
          "new_api": null,
          "old_text": "std::make_pair(it->block, it->row_num)",
          "new_text": null,
          "old_line_content": "                new_known_rows_ptr->push_back(std::make_pair(it->block, it->row_num));",
          "new_line_content": "        std::unique_ptr<std::vector<KnownRowsHolder<true>::Type>> new_known_rows_ptr;",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "columns",
          "new_api": null,
          "old_text": "right_table_keys.columns()",
          "new_text": null,
          "old_line_content": "    if (right_table_keys.columns() != num_keys)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH,\n            \"Number of arguments for function joinGet{} doesn't match: passed, should be equal to {}\",\n            toString(or_null ? \"OrNull\" : \"\"), toString(num_keys))",
          "new_text": null,
          "old_line_content": "        throw Exception(ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(\n                        FindResultImpl<const RowRef, false>(*it, true, 0))",
          "new_api": null,
          "old_text": "::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(\n                        FindResultImpl<const RowRef, false>(*it, true, 0))",
          "new_text": null,
          "old_line_content": "                    used_flags->JoinStuff::JoinUsedFlags::setUsedOnce<true, multiple_disjuncts>(",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "toString",
          "new_api": null,
          "old_text": "toString(num_keys)",
          "new_text": null,
          "old_line_content": "            toString(or_null ? \"OrNull\" : \"\"), toString(num_keys));",
          "new_line_content": "    for (const ColumnWithTypeAndName & src_column : sample_block_with_columns_to_add)",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "safeGetByPosition",
          "new_api": null,
          "old_text": "right_table_keys.safeGetByPosition(i)",
          "new_text": null,
          "old_line_content": "        const auto & [c2, right_type_origin, right_name] = right_table_keys.safeGetByPosition(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "recursiveRemoveLowCardinality",
          "new_api": null,
          "old_text": "recursiveRemoveLowCardinality(left_type_origin)",
          "new_text": null,
          "old_line_content": "        auto left_type = removeNullable(recursiveRemoveLowCardinality(left_type_origin));",
          "new_line_content": "DataTypePtr HashJoin::joinGetCheckAndGetReturnType(const DataTypes & data_types, const String & column_name, bool or_null) const",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "recursiveRemoveLowCardinality",
          "new_api": null,
          "old_text": "recursiveRemoveLowCardinality(right_type_origin)",
          "new_text": null,
          "old_line_content": "        auto right_type = removeNullable(recursiveRemoveLowCardinality(right_type_origin));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "std::cend(*new_known_rows_ptr)",
          "new_api": null,
          "old_text": "std::cend(*new_known_rows_ptr)",
          "new_text": null,
          "old_line_content": "            known_rows.add(std::cbegin(*new_known_rows_ptr), std::cend(*new_known_rows_ptr));",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "has",
          "new_api": null,
          "old_text": "sample_block_with_columns_to_add.has(column_name)",
          "new_text": null,
          "old_line_content": "    if (!sample_block_with_columns_to_add.has(column_name))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::NO_SUCH_COLUMN_IN_TABLE, \"StorageJoin doesn't contain column {}\", column_name)",
          "new_text": null,
          "old_line_content": "        throw Exception(ErrorCodes::NO_SUCH_COLUMN_IN_TABLE, \"StorageJoin doesn't contain column {}\", column_name);",
          "new_line_content": "    for (size_t i = 0; i < num_keys; ++i)",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "new_api": null,
          "old_text": "added.appendFromBlock<false>(*it->block, it->row_num)",
          "new_text": null,
          "old_line_content": "            added.appendFromBlock<false>(*it->block, it->row_num);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": "getByName",
          "new_api": null,
          "old_text": "sample_block_with_columns_to_add.getByName(column_name)",
          "new_text": null,
          "old_line_content": "    auto elem = sample_block_with_columns_to_add.getByName(column_name);",
          "new_line_content": "        const auto & left_type_origin = data_types[i];",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "appendDefaultRow",
          "new_api": null,
          "old_text": "added.appendDefaultRow()",
          "new_text": null,
          "old_line_content": "        added.appendDefaultRow();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "columns",
          "new_api": null,
          "old_text": "block.columns()",
          "new_text": null,
          "old_line_content": "    for (size_t i = 0; i < block.columns(); ++i)",
          "new_line_content": "/// TODO: return multiple columns as named tuple",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "block.getByPosition(i)",
          "new_text": null,
          "old_line_content": "        auto key = block.getByPosition(i);",
          "new_line_content": "ColumnWithTypeAndName HashJoin::joinGet(const Block & block, const Block & block_with_columns_to_add) const",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "std::move(key)",
          "new_api": null,
          "old_text": "std::move(key)",
          "new_text": null,
          "old_line_content": "        keys.insert(std::move(key));",
          "new_line_content": "    bool is_valid = (strictness == JoinStrictness::Any || strictness == JoinStrictness::RightAny)",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "std::get<MapsOne>(data->maps[0])",
          "new_api": null,
          "old_text": "std::get<MapsOne>(data->maps[0])",
          "new_text": null,
          "old_line_content": "    maps_vector.push_back(&std::get<MapsOne>(data->maps[0]));",
          "new_line_content": "    Block keys;",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    constexpr JoinFeatures<KIND, STRICTNESS> join_features;",
          "new_line_content": "        filter[pos] = 1;",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "IColumn::Filter(rows, 0)",
          "new_api": null,
          "old_text": "IColumn::Filter(rows, 0)",
          "new_text": null,
          "old_line_content": "        added_columns.filter = IColumn::Filter(rows, 0);",
          "new_line_content": "/// Makes filter (1 if row presented in right table) and returns offsets to replicate (for ALL JOINS).",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "getClauses",
          "new_api": null,
          "old_text": "table_join->getClauses()",
          "new_text": null,
          "old_line_content": "    for (const auto & onexpr : table_join->getClauses())",
          "new_line_content": "    static_assert(!MapGetter<JoinKind::Left, JoinStrictness::Any>::flagged,",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": "JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right)",
          "new_api": null,
          "old_text": "JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right)",
          "new_text": null,
          "old_line_content": "        JoinCommon::checkTypesOfKeys(block, onexpr.key_names_left, right_table_keys, onexpr.key_names_right);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "std::make_unique<IColumn::Offsets>(rows)",
          "new_api": null,
          "old_text": "std::make_unique<IColumn::Offsets>(rows)",
          "new_text": null,
          "old_line_content": "        added_columns.offsets_to_replicate = std::make_unique<IColumn::Offsets>(rows);",
          "new_line_content": "    AddedColumns & added_columns,",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\")",
          "new_text": null,
          "old_line_content": "        throw Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "getClauses",
          "new_api": null,
          "old_text": "table_join->getClauses()",
          "new_text": null,
          "old_line_content": "    for (const auto & onexpr : table_join->getClauses())",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "condColumnNames",
          "new_api": null,
          "old_text": "onexpr.condColumnNames()",
          "new_text": null,
          "old_line_content": "        auto cond_column_name = onexpr.condColumnNames();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(current_offset >= max_joined_block_rows)",
          "new_text": null,
          "old_line_content": "            if (unlikely(current_offset >= max_joined_block_rows))",
          "new_line_content": "    Arena pool;",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "resize_assume_reserved",
          "new_api": null,
          "old_text": "added_columns.offsets_to_replicate->resize_assume_reserved(i)",
          "new_text": null,
          "old_line_content": "                added_columns.offsets_to_replicate->resize_assume_reserved(i);",
          "new_line_content": "    if constexpr (join_features.need_replication)",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "size",
          "new_api": null,
          "old_text": "added_columns.join_on_keys.size()",
          "new_text": null,
          "old_line_content": "        for (size_t onexpr_idx = 0; onexpr_idx < added_columns.join_on_keys.size(); ++onexpr_idx)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "materializeBlockInplace",
          "new_api": null,
          "old_text": "materializeBlockInplace(block)",
          "new_text": null,
          "old_line_content": "        materializeBlockInplace(block);",
          "new_line_content": "            block, onexpr.key_names_left, cond_column_name.first,",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "isRowFiltered",
          "new_api": null,
          "old_text": "join_keys.isRowFiltered(i)",
          "new_text": null,
          "old_line_content": "            bool row_acceptable = !join_keys.isRowFiltered(i);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": "size",
          "new_api": null,
          "old_text": "table_join->getClauses().size()",
          "new_text": null,
          "old_line_content": "        for (size_t i = 0; i < table_join->getClauses().size(); ++i)",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "FindResult",
          "new_api": null,
          "old_text": "FindResult()",
          "new_text": null,
          "old_line_content": "            auto find_result = row_acceptable ? key_getter_vector[onexpr_idx].findKey(*(mapv[onexpr_idx]), i, pool) : FindResult();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "isFound",
          "new_api": null,
          "old_text": "find_result.isFound()",
          "new_text": null,
          "old_line_content": "            if (find_result.isFound())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "rows",
          "new_api": null,
          "old_text": "joinDispatch(kind, strictness, maps_vector, [&](auto kind_, auto strictness_, auto & maps_vector_)\n        {\n            Block remaining_block = joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_);\n            if (remaining_block.rows())\n                not_processed = std::make_shared<ExtraBlock>(ExtraBlock{std::move(remaining_block)});\n            else\n                not_processed.reset();\n        })",
          "new_text": null,
          "old_line_content": "        if (joinDispatch(kind, strictness, maps_vector, [&](auto kind_, auto strictness_, auto & maps_vector_)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_)",
          "new_api": null,
          "old_text": "joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_)",
          "new_text": null,
          "old_line_content": "            Block remaining_block = joinBlockImpl<kind_, strictness_>(block, sample_block_with_columns_to_add, maps_vector_);",
          "new_line_content": "    if (kind == JoinKind::Right || kind == JoinKind::Full)",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "getMapped",
          "new_api": null,
          "old_text": "find_result.getMapped()",
          "new_text": null,
          "old_line_content": "                auto & mapped = find_result.getMapped();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "rows",
          "new_api": null,
          "old_text": "remaining_block.rows()",
          "new_text": null,
          "old_line_content": "            if (remaining_block.rows())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "leftAsofKey",
          "new_api": null,
          "old_text": "added_columns.leftAsofKey()",
          "new_text": null,
          "old_line_content": "                    const IColumn & left_asof_key = added_columns.leftAsofKey();",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": "reset",
          "new_api": null,
          "old_text": "not_processed.reset()",
          "new_text": null,
          "old_line_content": "                not_processed.reset();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "setUsed<need_filter>(added_columns.filter, i)",
          "new_api": null,
          "old_text": "setUsed<need_filter>(added_columns.filter, i)",
          "new_text": null,
          "old_line_content": "                        setUsed<need_filter>(added_columns.filter, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0)",
          "new_api": null,
          "old_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0)",
          "new_text": null,
          "old_line_content": "                            used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(row_ref.block, row_ref.row_num, 0);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num)",
          "new_api": null,
          "old_text": "added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num)",
          "new_text": null,
          "old_line_content": "                        added_columns.appendFromBlock<join_features.add_missing>(*row_ref.block, row_ref.row_num);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "LOG_TRACE",
          "new_api": null,
          "old_text": "LOG_TRACE(log, \"{}Join data has been already released\", instance_log_id)",
          "new_text": null,
          "old_line_content": "        LOG_TRACE(log, \"{}Join data has been already released\", instance_log_id);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "getTotalRowCount",
          "new_api": null,
          "old_text": "getTotalRowCount()",
          "new_text": null,
          "old_line_content": "    LOG_TRACE(log, \"{}Join data is being destroyed, {} bytes and {} rows in hash table\", instance_log_id, getTotalByteCount(), getTotalRowCount());",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "setUsed<need_filter>(added_columns.filter, i)",
          "new_api": null,
          "old_text": "setUsed<need_filter>(added_columns.filter, i)",
          "new_text": null,
          "old_line_content": "                    setUsed<need_filter>(added_columns.filter, i);",
          "new_line_content": "                        if constexpr (multiple_disjuncts)",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "        constexpr bool mapped_asof = std::is_same_v<Mapped, AsofRowRefs>;",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "size",
          "new_api": null,
          "old_text": "columns_right.size()",
          "new_text": null,
          "old_line_content": "            for (size_t j = 0; j < columns_right.size(); ++j)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": null,
          "old_text": "used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": null,
          "old_line_content": "                    bool used_once = used_flags.template setUsedOnce<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "mapped.block->getByPosition(j)",
          "new_text": null,
          "old_line_content": "                const auto & mapped_column = mapped.block->getByPosition(j).column;",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "setUsed<need_filter>(added_columns.filter, i)",
          "new_api": null,
          "old_text": "setUsed<need_filter>(added_columns.filter, i)",
          "new_text": null,
          "old_line_content": "                        setUsed<need_filter>(added_columns.filter, i);",
          "new_line_content": "                        auto used_flags_opt = join_features.need_flags ? &used_flags : nullptr;",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "ok",
          "new_api": null,
          "old_text": "it.ok()",
          "new_text": null,
          "old_line_content": "            for (auto it = mapped.begin(); it.ok(); ++it)",
          "new_line_content": "        else if constexpr (mapped_one)",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "setUsed<need_filter>(added_columns.filter, i)",
          "new_api": null,
          "old_text": "setUsed<need_filter>(added_columns.filter, i)",
          "new_text": null,
          "old_line_content": "                    setUsed<need_filter>(added_columns.filter, i);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_api": null,
          "old_text": "used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result)",
          "new_text": null,
          "old_line_content": "                    used_flags.template setUsed<join_features.need_flags, multiple_disjuncts>(find_result);",
          "new_line_content": "                else if constexpr (join_features.is_any_join && join_features.full)",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "new_api": null,
          "old_text": "added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num)",
          "new_text": null,
          "old_line_content": "                    added_columns.appendFromBlock<join_features.add_missing>(*mapped.block, mapped.row_num);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\")",
          "new_text": null,
          "old_line_content": "            throw Exception(ErrorCodes::LOGICAL_ERROR, \"Cannot join after data has been released\");",
          "new_line_content": "///   - map offsetInternal saved in used_flags for single disjuncts",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": "setUsed<need_filter>(added_columns.filter, i)",
          "new_api": null,
          "old_text": "setUsed<need_filter>(added_columns.filter, i)",
          "new_text": null,
          "old_line_content": "                setUsed<need_filter>(added_columns.filter, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "new_api": null,
          "old_text": "addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset)",
          "new_text": null,
          "old_line_content": "            addNotFoundRow<join_features.add_missing, join_features.need_replication>(added_columns, current_offset);",
          "new_line_content": "                    if (join_features.is_any_or_semi_join)",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": "savedBlockSample",
          "new_api": null,
          "old_text": "parent.savedBlockSample().cloneEmpty()",
          "new_text": null,
          "old_line_content": "    Block getEmptyBlock() override { return parent.savedBlockSample().cloneEmpty(); }",
          "new_line_content": "{",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 68,
      "total_additions": 222,
      "total_deletions": 221,
      "total_api_changes": 511
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 511,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          1132,
          1133,
          1135,
          1136,
          1110,
          1111,
          1114,
          1115,
          1118
        ]
      }
    },
    "api_calls_before": 707,
    "api_calls_after": 708,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 1,
      "total_diff_lines": 39
    }
  }
}
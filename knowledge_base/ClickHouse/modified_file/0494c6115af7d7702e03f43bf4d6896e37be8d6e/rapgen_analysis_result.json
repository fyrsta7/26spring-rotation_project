{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/0494c6115af7d7702e03f43bf4d6896e37be8d6e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/0494c6115af7d7702e03f43bf4d6896e37be8d6e/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/0494c6115af7d7702e03f43bf4d6896e37be8d6e/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/0494c6115af7d7702e03f43bf4d6896e37be8d6e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 107,
          "old_api": "getScale",
          "new_api": "left_arg->template getValue<LeftType>()",
          "old_text": "checkAndGetColumn<ColumnDecimal<LeftType>>(*left_data_column).getScale()",
          "new_text": "left_arg->template getValue<LeftType>()",
          "old_line_content": "                const auto left_scale = checkAndGetColumn<ColumnDecimal<LeftType>>(*left_data_column).getScale();",
          "new_line_content": "                std::fill(std::begin(left_src_data), std::end(left_src_data), DecimalUtils::convertTo<Float64>(left_arg->template getValue<LeftType>(), left_scale));",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "getData",
          "new_api": "size",
          "old_text": "dst->getData()",
          "new_text": "left_src_data.size()",
          "old_line_content": "            auto & dst_data = dst->getData();",
          "new_line_content": "            const auto src_size = left_src_data.size();",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "size",
          "new_api": "resize",
          "old_text": "left_src_data.size()",
          "new_text": "dst_data.resize(src_size)",
          "old_line_content": "            const auto src_size = left_src_data.size();",
          "new_line_content": "            dst_data.resize(src_size);",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "ColumnVector<Float64>::create()",
          "new_api": "getData",
          "old_text": "ColumnVector<Float64>::create()",
          "new_text": "left->getData()",
          "old_line_content": "                auto left = ColumnVector<Float64>::create();",
          "new_line_content": "                auto & left_data = left->getData();",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "getData",
          "new_api": "resize",
          "old_text": "left->getData()",
          "new_text": "left_data.resize(src_size)",
          "old_line_content": "                auto & left_data = left->getData();",
          "new_line_content": "                left_data.resize(src_size);",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "resize",
          "new_api": "getScale",
          "old_text": "left_data.resize(src_size)",
          "new_text": "left_arg->getScale()",
          "old_line_content": "                left_data.resize(src_size);",
          "new_line_content": "                const auto left_scale = left_arg->getScale();",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_line_content": "                    left_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "new_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "getData",
          "new_api": "size",
          "old_text": "dst->getData()",
          "new_text": "left_src_data.size()",
          "old_line_content": "            auto & dst_data = dst->getData();",
          "new_line_content": "            const auto src_size = left_src_data.size();",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "size",
          "new_api": "resize",
          "old_text": "left_src_data.size()",
          "new_text": "dst_data.resize(src_size)",
          "old_line_content": "            const auto src_size = left_src_data.size();",
          "new_line_content": "            dst_data.resize(src_size);",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "getDataColumnPtr",
          "new_api": "right_arg_typed->template getValue<RightType>()",
          "old_text": "right_arg_typed->getDataColumnPtr()",
          "new_text": "right_arg_typed->template getValue<RightType>()",
          "old_line_content": "                const auto right_data_column = right_arg_typed->getDataColumnPtr();",
          "new_line_content": "                std::fill(std::begin(right_src_data), std::end(right_src_data), DecimalUtils::convertTo<Float64>(right_arg_typed->template getValue<RightType>(), right_scale));",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "getScale",
          "new_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_text": "left_arg->getScale()",
          "new_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_line_content": "                    const auto left_scale = left_arg->getScale();",
          "new_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_api": "data",
          "old_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_text": "dst_data.data()",
          "old_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "new_line_content": "                    executeInIterations(dst_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "getScale",
          "new_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_text": "left_arg->getScale()",
          "new_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_line_content": "                    const auto left_scale = left_arg->getScale();",
          "new_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_api": "data",
          "old_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_text": "dst_data.data()",
          "old_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "new_line_content": "                    executeInIterations(dst_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "get",
          "new_api": "checkAndGetColumn<ColVecOrDecimalLeft>(left_arg)",
          "old_text": "col_right.column.get()",
          "new_text": "checkAndGetColumn<ColVecOrDecimalLeft>(left_arg)",
          "old_line_content": "            const IColumn * right_arg = col_right.column.get();",
          "new_line_content": "            if (const auto left_arg_typed = checkAndGetColumn<ColVecOrDecimalLeft>(left_arg))",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "checkAndGetColumn<ColVecOrDecimalLeft>(left_arg)",
          "new_api": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "old_text": "checkAndGetColumn<ColVecOrDecimalLeft>(left_arg)",
          "new_text": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "old_line_content": "            if (const auto left_arg_typed = checkAndGetColumn<ColVecOrDecimalLeft>(left_arg))",
          "new_line_content": "                if ((res = executeTyped<LeftType, RightType>(left_arg_typed, right_arg)))",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "getName",
          "new_api": "checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg)",
          "old_text": "getName()",
          "new_text": "checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg)",
          "old_line_content": "                    right_arg->getName(), getName());",
          "new_line_content": "            if (const auto left_arg_typed = checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg))",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg)",
          "new_api": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "old_text": "checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg)",
          "new_text": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "old_line_content": "            if (const auto left_arg_typed = checkAndGetColumnConst<ColVecOrDecimalLeft>(left_arg))",
          "new_line_content": "                if ((res = executeTyped<LeftType, RightType>(left_arg_typed, right_arg)))",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "getTypeId",
          "new_api": "callOnBasicTypes<true, true, true, false>(left_index, right_index, call)",
          "old_text": "col_right.type->getTypeId()",
          "new_text": "callOnBasicTypes<true, true, true, false>(left_index, right_index, call)",
          "old_line_content": "        TypeIndex right_index = col_right.type->getTypeId();",
          "new_line_content": "        if (!callOnBasicTypes<true, true, true, false>(left_index, right_index, call))",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "callOnBasicTypes<true, true, true, false>(left_index, right_index, call)",
          "new_api": "getName",
          "old_text": "callOnBasicTypes<true, true, true, false>(left_index, right_index, call)",
          "new_text": "getName()",
          "old_line_content": "        if (!callOnBasicTypes<true, true, true, false>(left_index, right_index, call))",
          "new_line_content": "                col_left.column->getName(), getName());",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 129,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "right_arg_typed->getScale()",
          "old_line_content": "                {",
          "new_line_content": "                    const auto right_scale = right_arg_typed->getScale();",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": null,
          "new_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_text": null,
          "new_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_line_content": "                    for (size_t i = 0; i < src_size; ++i)",
          "new_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "",
          "new_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), dst_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "col_left.column.get()",
          "old_line_content": "            using ColVecOrDecimalLeft = ColumnVectorOrDecimal<LeftType>;",
          "new_line_content": "            const IColumn * left_arg = col_left.column.get();",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "                {",
          "new_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), right_src_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "col_right.column.get()",
          "old_line_content": "",
          "new_line_content": "            const IColumn * right_arg = col_right.column.get();",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",\n                    right_arg->getName(), getName())",
          "old_line_content": "                    return true;",
          "new_line_content": "                throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "getName()",
          "old_line_content": "",
          "new_line_content": "                    right_arg->getName(), getName());",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "old_text": null,
          "new_text": "checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "old_line_content": "    {",
          "new_line_content": "        if (const auto right_arg_typed = checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg))",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": null,
          "new_api": "ColumnVector<Float64>::create()",
          "old_text": null,
          "new_text": "ColumnVector<Float64>::create()",
          "old_line_content": "        {",
          "new_line_content": "            auto dst = ColumnVector<Float64>::create();",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",\n                    right_arg->getName(), getName())",
          "old_line_content": "                    return true;",
          "new_line_content": "                throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": null,
          "new_api": "getData",
          "old_text": null,
          "new_text": "left_arg->getData()",
          "old_line_content": "",
          "new_line_content": "            const auto & left_src_data = left_arg->getData();",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "getName()",
          "old_line_content": "",
          "new_line_content": "                    right_arg->getName(), getName());",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "getTypeId",
          "old_text": null,
          "new_text": "col_left.type->getTypeId()",
          "old_line_content": "        };",
          "new_line_content": "        TypeIndex left_index = col_left.type->getTypeId();",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "getTypeId",
          "old_text": null,
          "new_text": "col_right.type->getTypeId()",
          "old_line_content": "",
          "new_line_content": "        TypeIndex right_index = col_right.type->getTypeId();",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": null,
          "new_api": "ColumnVector<Float64>::create()",
          "old_text": null,
          "new_text": "ColumnVector<Float64>::create()",
          "old_line_content": "            {",
          "new_line_content": "                auto left = ColumnVector<Float64>::create();",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "getName",
          "old_text": null,
          "new_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of argument of function {}\",\n                col_left.column->getName(), getName())",
          "old_line_content": "",
          "new_line_content": "            throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of argument of function {}\",",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": null,
          "new_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_text": null,
          "new_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_line_content": "                {",
          "new_line_content": "                    left_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "",
          "new_line_content": "                executeInIterations(left_data.data(), src_size, dst_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "struct BinaryFunctionVectorized",
          "new_line_content": "    static constexpr auto name = Name::name;",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "{",
          "new_line_content": "    static constexpr auto rows_per_iteration = 1;",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "right_arg_typed->getScale()",
          "old_line_content": "            {",
          "new_line_content": "                const auto right_scale = right_arg_typed->getScale();",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_text": null,
          "new_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_line_content": "                for (size_t i = 0; i < src_size; ++i)",
          "new_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "static_cast<Float64>(*src_right)",
          "old_text": null,
          "new_text": "static_cast<Float64>(*src_right)",
          "old_line_content": "    static void execute(const T1 * __restrict src_left, const T2 * __restrict src_right, Float64 * __restrict dst)",
          "new_line_content": "        *dst = Function(static_cast<Float64>(*src_left), static_cast<Float64>(*src_right));",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "",
          "new_line_content": "                executeInIterations(left_src_data.data(), src_size, dst_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "left_arg->getScale()",
          "old_line_content": "            {",
          "new_line_content": "                const auto left_scale = left_arg->getScale();",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": null,
          "new_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_text": null,
          "new_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "old_line_content": "                for (size_t i = 0; i < src_size; ++i)",
          "new_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "",
          "new_line_content": "                executeInIterations(dst_data.data(), src_size, right_src_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "            {",
          "new_line_content": "                executeInIterations(left_src_data.data(), src_size, right_src_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "old_text": null,
          "new_text": "checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "old_line_content": "        }",
          "new_line_content": "        if (const auto right_arg_typed = checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg))",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "ColumnVector<Float64>::create()",
          "old_text": null,
          "new_text": "ColumnVector<Float64>::create()",
          "old_line_content": "        {",
          "new_line_content": "            auto dst = ColumnVector<Float64>::create();",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "getData",
          "old_text": null,
          "new_text": "left_arg->getData()",
          "old_line_content": "",
          "new_line_content": "            const auto & left_src_data = left_arg->getData();",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": null,
          "new_api": "getDataColumnPtr",
          "old_text": null,
          "new_text": "right_arg_typed->getDataColumnPtr()",
          "old_line_content": "                Float64 right_src_data[Impl::rows_per_iteration];",
          "new_line_content": "                const auto right_scale = checkAndGetColumn<ColumnDecimal<RightType>>(*right_arg_typed->getDataColumnPtr()).getScale();",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "left_arg->getScale()",
          "old_line_content": "                if constexpr (is_decimal<LeftType>)",
          "new_line_content": "                    const auto left_scale = left_arg->getScale();",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "                else",
          "new_line_content": "                    executeInIterations(left_src_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "right_arg_typed->template getValue<RightType>()",
          "old_text": null,
          "new_text": "right_arg_typed->template getValue<RightType>()",
          "old_line_content": "            {",
          "new_line_content": "                std::fill(std::begin(right_src_data), std::end(right_src_data), right_arg_typed->template getValue<RightType>());",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "left_arg->getScale()",
          "old_line_content": "                if constexpr (is_decimal<LeftType>)",
          "new_line_content": "                    const auto left_scale = left_arg->getScale();",
          "content_same": false
        },
        {
          "line": 111,
          "old_api": null,
          "new_api": "getScale",
          "old_text": null,
          "new_text": "right_arg_typed->getScale()",
          "old_line_content": "                {",
          "new_line_content": "                    const auto right_scale = right_arg_typed->getScale();",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": null,
          "new_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_text": null,
          "new_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "old_line_content": "                    for (size_t i = 0; i < src_size; ++i)",
          "new_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "                else",
          "new_line_content": "                    executeInIterations(left_src_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "",
          "new_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), dst_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "dst_data.data()",
          "old_line_content": "                {",
          "new_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), right_src_data.data(), src_size, dst_data.data());",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": null,
          "new_api": "left_arg->template getValue<LeftType>()",
          "old_text": null,
          "new_text": "left_arg->template getValue<LeftType>()",
          "old_line_content": "                LeftType left_src_data[Impl::rows_per_iteration];",
          "new_line_content": "                std::fill(std::begin(left_src_data), std::end(left_src_data), left_arg->template getValue<LeftType>());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 130,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "right_arg_typed->getScale()",
          "new_text": null,
          "old_line_content": "                    const auto right_scale = right_arg_typed->getScale();",
          "new_line_content": "                    for (size_t i = 0; i < src_size; ++i)",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_api": null,
          "old_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_text": null,
          "old_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), dst_data.data(), src_size, dst_data.data());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), right_src_data.data(), src_size, dst_data.data());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "get",
          "new_api": null,
          "old_text": "col_left.column.get()",
          "new_text": null,
          "old_line_content": "            const IColumn * left_arg = col_left.column.get();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "new_api": null,
          "old_text": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "new_text": null,
          "old_line_content": "                if ((res = executeTyped<LeftType, RightType>(left_arg_typed, right_arg)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",\n                    right_arg->getName(), getName())",
          "new_text": null,
          "old_line_content": "                throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "new_api": null,
          "old_text": "checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "new_text": null,
          "old_line_content": "        if (const auto right_arg_typed = checkAndGetColumn<ColumnVectorOrDecimal<RightType>>(right_arg))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "new_api": null,
          "old_text": "executeTyped<LeftType, RightType>(left_arg_typed, right_arg)",
          "new_text": null,
          "old_line_content": "                if ((res = executeTyped<LeftType, RightType>(left_arg_typed, right_arg)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": "ColumnVector<Float64>::create()",
          "new_api": null,
          "old_text": "ColumnVector<Float64>::create()",
          "new_text": null,
          "old_line_content": "            auto dst = ColumnVector<Float64>::create();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",\n                    right_arg->getName(), getName())",
          "new_text": null,
          "old_line_content": "                throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of second argument of function {}\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "getName",
          "new_api": null,
          "old_text": "getName()",
          "new_text": null,
          "old_line_content": "                    right_arg->getName(), getName());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "resize",
          "new_api": null,
          "old_text": "dst_data.resize(src_size)",
          "new_text": null,
          "old_line_content": "            dst_data.resize(src_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "getTypeId",
          "new_api": null,
          "old_text": "col_left.type->getTypeId()",
          "new_text": null,
          "old_line_content": "        TypeIndex left_index = col_left.type->getTypeId();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "getName",
          "new_api": null,
          "old_text": "Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of argument of function {}\",\n                col_left.column->getName(), getName())",
          "new_text": null,
          "old_line_content": "            throw Exception(ErrorCodes::ILLEGAL_COLUMN, \"Illegal column {} of argument of function {}\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "getName",
          "new_api": null,
          "old_text": "getName()",
          "new_text": null,
          "old_line_content": "                col_left.column->getName(), getName());",
          "new_line_content": "        return res;",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "right_arg_typed->getScale()",
          "new_text": null,
          "old_line_content": "                const auto right_scale = right_arg_typed->getScale();",
          "new_line_content": "                for (size_t i = 0; i < src_size; ++i)",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_api": null,
          "old_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_text": null,
          "old_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                executeInIterations(left_data.data(), src_size, dst_data.data(), src_size, dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr auto name = Name::name;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    static constexpr auto rows_per_iteration = 1;",
          "new_line_content": "    template <typename T1, typename T2>",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "right_arg_typed->getScale()",
          "new_text": null,
          "old_line_content": "                const auto right_scale = right_arg_typed->getScale();",
          "new_line_content": "                for (size_t i = 0; i < src_size; ++i)",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_api": null,
          "old_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_text": null,
          "old_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                executeInIterations(left_src_data.data(), src_size, dst_data.data(), src_size, dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "static_cast<Float64>(*src_right)",
          "new_api": null,
          "old_text": "static_cast<Float64>(*src_right)",
          "new_text": null,
          "old_line_content": "        *dst = Function(static_cast<Float64>(*src_left), static_cast<Float64>(*src_right));",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "left_arg->getScale()",
          "new_text": null,
          "old_line_content": "                const auto left_scale = left_arg->getScale();",
          "new_line_content": "                for (size_t i = 0; i < src_size; ++i)",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_api": null,
          "old_text": "DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale)",
          "new_text": null,
          "old_line_content": "                    dst_data[i] = DecimalUtils::convertTo<Float64>(left_src_data[i], left_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                executeInIterations(dst_data.data(), src_size, right_src_data.data(), src_size, dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                executeInIterations(left_src_data.data(), src_size, right_src_data.data(), src_size, dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "new_api": null,
          "old_text": "checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg)",
          "new_text": null,
          "old_line_content": "        if (const auto right_arg_typed = checkAndGetColumnConst<ColumnVectorOrDecimal<RightType>>(right_arg))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "ColumnVector<Float64>::create()",
          "new_api": null,
          "old_text": "ColumnVector<Float64>::create()",
          "new_text": null,
          "old_line_content": "            auto dst = ColumnVector<Float64>::create();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "resize",
          "new_api": null,
          "old_text": "dst_data.resize(src_size)",
          "new_text": null,
          "old_line_content": "            dst_data.resize(src_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "checkAndGetColumn<ColumnDecimal<RightType>>(*right_data_column).getScale()",
          "new_text": null,
          "old_line_content": "                const auto right_scale = checkAndGetColumn<ColumnDecimal<RightType>>(*right_data_column).getScale();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "right_arg_typed->template getValue<RightType>()",
          "new_api": null,
          "old_text": "right_arg_typed->template getValue<RightType>()",
          "new_text": null,
          "old_line_content": "                std::fill(std::begin(right_src_data), std::end(right_src_data), DecimalUtils::convertTo<Float64>(right_arg_typed->template getValue<RightType>(), right_scale));",
          "new_line_content": "                if constexpr (is_decimal<LeftType>)",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(dst_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "right_arg_typed->template getValue<RightType>()",
          "new_api": null,
          "old_text": "right_arg_typed->template getValue<RightType>()",
          "new_text": null,
          "old_line_content": "                std::fill(std::begin(right_src_data), std::end(right_src_data), right_arg_typed->template getValue<RightType>());",
          "new_line_content": "                if constexpr (is_decimal<LeftType>)",
          "content_same": false
        },
        {
          "line": 108,
          "old_api": "left_arg->template getValue<LeftType>()",
          "new_api": null,
          "old_text": "left_arg->template getValue<LeftType>()",
          "new_text": null,
          "old_line_content": "                std::fill(std::begin(left_src_data), std::end(left_src_data), DecimalUtils::convertTo<Float64>(left_arg->template getValue<LeftType>(), left_scale));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(dst_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": "getScale",
          "new_api": null,
          "old_text": "right_arg_typed->getScale()",
          "new_text": null,
          "old_line_content": "                    const auto right_scale = right_arg_typed->getScale();",
          "new_line_content": "                    for (size_t i = 0; i < src_size; ++i)",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_api": null,
          "old_text": "DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale)",
          "new_text": null,
          "old_line_content": "                        dst_data[i] = DecimalUtils::convertTo<Float64>(right_src_data[i], right_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data.data(), src_size, right_src_data, std::size(right_src_data), dst_data.data());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), dst_data.data(), src_size, dst_data.data());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": "data",
          "new_api": null,
          "old_text": "dst_data.data()",
          "new_text": null,
          "old_line_content": "                    executeInIterations(left_src_data, std::size(left_src_data), right_src_data.data(), src_size, dst_data.data());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 126,
          "old_api": "left_arg->template getValue<LeftType>()",
          "new_api": null,
          "old_text": "left_arg->template getValue<LeftType>()",
          "new_text": null,
          "old_line_content": "                std::fill(std::begin(left_src_data), std::end(left_src_data), left_arg->template getValue<LeftType>());",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 20,
      "total_additions": 43,
      "total_deletions": 45,
      "total_api_changes": 108
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 108,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          106
        ]
      }
    },
    "api_calls_before": 156,
    "api_calls_after": 156,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 4,
      "total_diff_lines": 25
    }
  }
}
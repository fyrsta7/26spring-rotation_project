{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/793d1accfc05a8d7abd127b0f269f5fa2d755156",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/793d1accfc05a8d7abd127b0f269f5fa2d755156/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/793d1accfc05a8d7abd127b0f269f5fa2d755156/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/793d1accfc05a8d7abd127b0f269f5fa2d755156/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 110,
          "old_api": "= _mm_round_ps(mm_value, ro",
          "new_api": "alue = _mm_div_ps(mm_value,",
          "old_text": "= _mm_round_ps(mm_value, ro",
          "new_text": "alue = _mm_div_ps(mm_value,",
          "old_line_content": null,
          "new_line_content": "\t\t\tFloat32 fscale = static_cast<Float32>(scale);",
          "content_same": true
        },
        {
          "line": 111,
          "old_api": "mm_value = _mm_div_p",
          "new_api": "mm_storeu_ps",
          "old_text": "\tmm_value = _mm_div_p",
          "new_text": "mm_storeu_ps(reinterp",
          "old_line_content": null,
          "new_line_content": "\t\t\tmm_scale = _mm_load1_ps(&fscale);",
          "content_same": true
        },
        {
          "line": 117,
          "old_api": "undingComputation<",
          "new_api": "e = __m128d;\n\n\t\tstatic inline",
          "old_text": "undingComputation<",
          "new_text": "e = __m128d;\n\n\t\tstatic inline ",
          "old_line_content": "\t\t\t__m128 mm_value = _mm_load_ps(input);",
          "new_line_content": "\t\t\tmm_value = _mm_mul_ps(mm_value, mm_scale);",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": "_mode>\n\t{\n\t\tusing Data = std::",
          "new_api": "le = static_cast<Float64>(scal",
          "old_text": "_mode>\n\t{\n\t\tusing Data = std::",
          "new_text": "le = static_cast<Float64>(scal",
          "old_line_content": "\t\t\tmm_value = _mm_mul_ps(mm_value, mm_scale);",
          "new_line_content": "\t\t\tmm_value = _mm_div_ps(mm_value, mm_scale);",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": ">;\n\t\tusing Scale = __m128d;\n\n\t\tstatic",
          "new_api": "mm_load1_pd",
          "old_text": ">;\n\t\tusing Scale = __m128d;\n\n\t\tstatic",
          "new_text": "mm_load1_pd(&fscale);\n\t\t}\n\n\t\tstat",
          "old_line_content": "\t\t\tmm_value = _mm_round_ps(mm_value, rounding_mode);",
          "new_line_content": "\t\t\t_mm_storeu_ps(reinterpret_cast<Float32 *>(&out), mm_value);",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "_mm_div_pd(mm_value,",
          "new_api": "rounding_mode, typename Enable = void",
          "old_text": " _mm_div_pd(mm_value,",
          "new_text": " rounding_mode, typename Enable = void",
          "old_line_content": "\t\t\tmm_scale = _mm_load1_pd(&fscale);",
          "new_line_content": "\t\t\t__m128d mm_value = _mm_loadu_pd(reinterpret_cast<const Float64 *>(&in));",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "in[i + j];\n\n\t\t\t\tData r",
          "new_api": "_t scale)\n\t\t{\n\t\t\tif (val == 0)",
          "old_text": " in[i + j];\n\n\t\t\t\tData r",
          "new_text": "_t scale)\n\t\t{\n\t\t\tif (val == 0)\n",
          "old_line_content": "\t\t\tconst size_t data_size = std::tuple_size<Data>();",
          "new_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "static inline bool apply(const ColumnPt",
          "new_api": "r)\n\t\t\t\treturn false;",
          "old_text": "\t\tstatic inline bool apply(const ColumnPt",
          "new_text": "r)\n\t\t\t\treturn false;\n\n\t",
          "old_line_content": "\t\t\tconst ColumnType * precision_col = typeid_cast<const ColumnType *>(&*column);",
          "new_line_content": "\t\t\tprecision = static_cast<UInt8>(val);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "ctor<T>;",
          "new_api": "eid_cast<ColumnConst<T> *>(&",
          "old_text": "ctor<T>;\n",
          "new_text": "eid_cast<ColumnConst<T> *>(&",
          "old_line_content": "\t\tstatic constexpr auto name = Name::name;",
          "new_line_content": "\t\t\treturn typeid_cast<const T *>(type) != nullptr;",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": ");\n\n\t\t\t\tColumnConst<T> * col_res",
          "new_api": "cisionForType<T, UInt",
          "old_text": ");\n\n\t\t\t\tColumnConst<T> * col_res ",
          "new_text": "cisionForType<T, UInt",
          "old_line_content": "\t\t\tif (ColumnVector<T> * col = typeid_cast<ColumnVector<T> *>(&*block.getByPosition(arguments[0]).column))",
          "new_line_content": "\t\t\t\tvec_res.resize(col->getData().size());",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "UInt8 precisio",
          "new_api": "::apply(column,",
          "old_text": "\n\t\t\tUInt8 precisio",
          "new_text": "::apply(column, ",
          "old_line_content": "\t\t\t\ttypename ColumnVector<T>::Container_t & vec_res = col_res->getData();",
          "new_line_content": "\t\t\t\tif (arguments.size() == 2)",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "cisionForType<T, UInt",
          "new_api": "t8>::apply(column, precision)",
          "old_text": "cisionForType<T, UInt",
          "new_text": "t8>::apply(column, precision)\n\t\t\t",
          "old_line_content": "\t\t\t\tvec_res.resize(col->getData().size());",
          "new_line_content": "\t\t\t\t\tprecision = getPrecision<T>(block.getByPosition(arguments[1]).column);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "precision)",
          "new_api": "pply",
          "old_text": "precision)\n\t\t\t",
          "new_text": "pply(column, p",
          "old_line_content": "\t\t\t\tOp::apply(col->getData(), PowersOf10::values[precision], vec_res);",
          "new_line_content": "\t\t\t\tT res = Op::apply(col->getData(), PowersOf10::values[precision]);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": ". Если функция неприменима для данных аргументов - к",
          "new_api": "eckType<DataTypeU",
          "old_text": ". Если функция неприменима для данных аргументов - к",
          "new_text": "eckType<DataTypeU",
          "old_line_content": "\t\t\tif (!(\tPrecisionForType<T, UInt8>::apply(column, precision)",
          "new_line_content": "\t\t\t\tthrow Exception(\"Illegal column \" + column->getName()",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "ключение.\n\t\tDataTypePtr getReturnType(const DataTypes",
          "new_api": "checkTyp",
          "old_text": "ключение.\n\t\tDataTypePtr getReturnType(const DataTypes",
          "new_text": " checkTyp",
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt16>::apply(column, precision)",
          "new_line_content": "\t\t\t\t\t\t+ \" of second ('precision') argument of function \" + getName(),",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "NT);\n\n\t\t\treturn",
          "new_api": "eForType<Int8>(block, arguments",
          "old_text": "NT);\n\n\t\t\treturn ",
          "new_text": "eForType<Int8>(block, arguments",
          "old_line_content": "\t\t\tif ((arguments.size() < 1) || (arguments.size() > 2))",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt32>(type)",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "cute",
          "new_api": "||\texecuteForType<Int16>(b",
          "old_text": "cute(Bloc",
          "new_text": "\n\t\t\t\t||\texecuteForType<Int16>(b",
          "old_line_content": "\t\t\t\tthrow Exception(\"Number of arguments for function \" + getName() + \" doesn't match: passed \"",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt64>(type)",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "ize_t result) ov",
          "new_api": "uments, result)\n\t\t\t\t||\texecut",
          "old_text": "ize_t result) ov",
          "new_text": "uments, result)\n\t\t\t\t||\texecut",
          "old_line_content": "\t\t\t\t\t+ toString(arguments.size()) + \", should be 1 or 2.\",",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeInt8>(type)",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "ype<UInt16>(bloc",
          "new_api": ", result)\n\t\t\t\t||\texecuteForTyp",
          "old_text": "ype<UInt16>(bloc",
          "new_text": ", result)\n\t\t\t\t||\texecuteForTyp",
          "old_line_content": "\t\t\tif (arguments.size() == 2)",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeInt64>(type)))",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "Int32>(block, arguments, resul",
          "new_api": "of argument of functio",
          "old_text": "Int32>(block, arguments, resul",
          "new_text": " of argument of functio",
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeInt16>(type)",
          "new_line_content": "\t\t\tif (!type->behavesAsNumber())",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "executeForType<Int64>(block,",
          "new_api": "tic const",
          "old_text": "\texecuteForType<Int64>(block, ",
          "new_text": "tic const",
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeInt32>(type)",
          "new_line_content": "\t\t\t\tthrow Exception(\"Illegal type \" + arguments[0]->getName() + \" of argument of function \" + getName(),",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "of argument of functio",
          "new_api": "\"; };\n\tstruct NameCeil\t\t\t\t{ static constexpr au",
          "old_text": " of argument of functio",
          "new_text": "\"; };\n\tstruct NameCeil\t\t\t\t{ static constexpr au",
          "old_line_content": "\t\t\tif (!type->behavesAsNumber())",
          "new_line_content": "\t\t\tif (!(\texecuteForType<UInt8>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "tic const",
          "new_api": "= \"ceil\"; };\n\tstruct NameFloor\t\t\t{ static conste",
          "old_text": "tic const",
          "new_text": "= \"ceil\"; };\n\tstruct NameFloor\t\t\t{ static conste",
          "old_line_content": "\t\t\t\tthrow Exception(\"Illegal type \" + arguments[0]->getName() + \" of argument of function \" + getName(),",
          "new_line_content": "\t\t\t\t||\texecuteForType<UInt16>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "= \"ceil\"; };\n\tstruct NameFloor\t\t\t{ static conste",
          "new_api": "loor;\n}",
          "old_text": "= \"ceil\"; };\n\tstruct NameFloor\t\t\t{ static conste",
          "new_text": "loor;\n}\n",
          "old_line_content": "\t\t\t\t||\texecuteForType<UInt16>(block, arguments, result)",
          "new_line_content": "\t\t\t\tthrow Exception(\"Illegal column \" + block.getByPosition(arguments[0]).column->getName()",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "name = \"floor\"; };\n\n\ttypedef FunctionUnaryArith",
          "new_api": "",
          "old_text": " name = \"floor\"; };\n\n\ttypedef FunctionUnaryArith",
          "new_text": "",
          "old_line_content": "\t\t\t\t||\texecuteForType<UInt32>(block, arguments, result)",
          "new_line_content": "\t\t\t\t\t\t+ \" of argument of function \" + getName(),",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "D_NINT>\tFunctionRound;\n\ttypedef FunctionRounding<",
          "new_api": "",
          "old_text": "D_NINT>\tFunctionRound;\n\ttypedef FunctionRounding<",
          "new_text": "",
          "old_line_content": "\t\t\t\t||\texecuteForType<Float32>(block, arguments, result)",
          "new_line_content": "\tstruct NameRoundToExp2\t\t{ static constexpr auto name = \"roundToExp2\"; };",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": ",\t_MM_FROUND_CEIL>\tFunctionCeil;\n\ttypedef Functio",
          "new_api": "",
          "old_text": ",\t_MM_FROUND_CEIL>\tFunctionCeil;\n\ttypedef Functio",
          "new_text": "",
          "old_line_content": "\t\t\t\t||\texecuteForType<Float64>(block, arguments, result)))",
          "new_line_content": "\tstruct NameRoundDuration\t{ static constexpr auto name = \"roundDuration\"; };",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "loor;\n}",
          "new_api": "",
          "old_text": "loor;\n}\n",
          "new_text": "",
          "old_line_content": "\t\t\t\tthrow Exception(\"Illegal column \" + block.getByPosition(arguments[0]).column->getName()",
          "new_line_content": "\tstruct NameRound\t\t\t{ static constexpr auto name = \"round\"; };",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 132,
          "old_api": null,
          "new_api": "value = _mm_div_pd(mm_value",
          "old_text": null,
          "new_text": "value = _mm_div_pd(mm_value",
          "old_line_content": "\t\tusing Data = std::array<Float64, 2>;",
          "new_line_content": "\t\t\tFloat64 fscale = static_cast<Float64>(scale);",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": null,
          "new_api": "_mm_storeu_pd",
          "old_text": null,
          "new_text": "_mm_storeu_pd(reinter",
          "old_line_content": "\t\tusing Scale = __m128d;",
          "new_line_content": "\t\t\tmm_scale = _mm_load1_pd(&fscale);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": ". Если функция неприменима для данных аргументов - к",
          "old_text": null,
          "new_text": ". Если функция неприменима для данных аргументов - к",
          "old_line_content": "\t\t\treturn false;",
          "new_line_content": "\t\t\tif (!(\tPrecisionForType<T, UInt8>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "ение контейнера содержащего таблицу степе",
          "old_text": null,
          "new_text": "ение контейнера содержащего таблицу степе",
          "old_line_content": "\t\t\treturn true;",
          "new_line_content": "\t\t\tconst ColumnType * precision_col = typeid_cast<const ColumnType *>(&*column);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "ключение.\n\t\tDataTypePtr getReturnType(const DataTypes",
          "old_text": null,
          "new_text": "ключение.\n\t\tDataTypePtr getReturnType(const DataTypes",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt16>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": null,
          "new_api": "nRoundingImpl\n\t{\n\t};\n\n\t/// В с",
          "old_text": null,
          "new_text": "nRoundingImpl\n\t{\n\t};\n\n\t/// В с",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tmm_value = _mm_mul_pd(mm_value, mm_scale);",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": null,
          "new_api": "ных значений не выполяется округления",
          "old_text": null,
          "new_text": "ных значений не выполяется округления",
          "old_line_content": "",
          "new_line_content": "\t\t\tmm_value = _mm_round_pd(mm_value, rounding_mode);",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": null,
          "new_api": "name T, int rounding_mode>\n\tst",
          "old_text": null,
          "new_text": "name T, int rounding_mode>\n\tst",
          "old_line_content": "\t\tstatic inline void compute(const Data & in, const Scale & mm_scale, Data & out)",
          "new_line_content": "\t\t\tmm_value = _mm_div_pd(mm_value, mm_scale);",
          "content_same": false
        },
        {
          "line": 142,
          "old_api": null,
          "new_api": "ngImpl<T, rounding_mode, typename",
          "old_text": null,
          "new_text": "ngImpl<T, rounding_mode, typename",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t_mm_storeu_pd(reinterpret_cast<Float64 *>(&out), mm_value);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ents) const override\n\t\t{\n\t\t\tif ((arguments.size() < 1",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt16>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "guments.size() > 2))\n\t\t\t\tthrow Exception(\"Number of a",
          "old_line_content": "\t\t/// В зависимости от входного параметра, определить какая нужна точность",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt32>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "for function \" + getName() + \" doesn't match: passed",
          "old_text": null,
          "new_text": " for function \" + getName() + \" doesn't match: passed",
          "old_line_content": "\t\t/// для результата.",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt64>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "+ toString(arguments.size()) + \", should be 1 or 2.",
          "old_line_content": "\t\ttemplate<typename T>",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, Int8>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH);\n\n\t\t\ti",
          "old_text": null,
          "new_text": "ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH);\n\n\t\t\ti",
          "old_line_content": "\t\tUInt8 getPrecision(const ColumnPtr & column)",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, Int16>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ents.size() == 2)\n\t\t\t{\n\t\t\t\tconst IDataType * type = ",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, Int32>::apply(column, precision)",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "nts[1];\n\t\t\t\tif (!( checkType<DataTypeUInt8>(type)",
          "old_text": null,
          "new_text": "nts[1];\n\t\t\t\tif (!( checkType<DataTypeUInt8>(type)\n\t\t",
          "old_line_content": "\t\t\tUInt8 precision = 0;",
          "new_line_content": "\t\t\t\t||\tPrecisionForType<T, Int64>::apply(column, precision)))",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "le;\n\n\tpub",
          "old_text": null,
          "new_text": "le;\n\n\tpub",
          "old_line_content": "\tstruct FunctionRoundingImpl",
          "new_line_content": "\t\t\tsize_t size = in.size();",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "NT);\n\n\t\t\treturn",
          "old_text": null,
          "new_text": "NT);\n\n\t\t\treturn ",
          "old_line_content": "\tpublic:",
          "new_line_content": "\t\t\tif ((arguments.size() < 1) || (arguments.size() > 2))",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "cute",
          "old_text": null,
          "new_text": "cute(Bloc",
          "old_line_content": "\t\t/// Получить имя функции.",
          "new_line_content": "\t\t\t\tthrow Exception(\"Number of arguments for function \" + getName() + \" doesn't match: passed \"",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "ize_t result) ov",
          "old_text": null,
          "new_text": "ize_t result) ov",
          "old_line_content": "\t\tString getName() const override",
          "new_line_content": "\t\t\t\t\t+ toString(arguments.size()) + \", should be 1 or 2.\",",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "ype<UInt16>(bloc",
          "old_text": null,
          "new_text": "ype<UInt16>(bloc",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (arguments.size() == 2)",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": ", result)\n\t\t\t\t||\texecuteForTyp",
          "old_text": null,
          "new_text": ", result)\n\t\t\t\t||\texecuteForTyp",
          "old_line_content": "\t\tDataTypePtr getReturnType(const DataTypes & arguments) const override",
          "new_line_content": "\t\t\t\tif (!( checkType<DataTypeUInt8>(type)",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "(block, arguments, result)",
          "old_text": null,
          "new_text": "(block, arguments, result)\n\t\t\t\t",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt16>(type)",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "Int32>(block, arguments, resul",
          "old_text": null,
          "new_text": "Int32>(block, arguments, resul",
          "old_line_content": "\t\t\t\t\tErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH);",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeInt16>(type)",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "executeForType<Int64>(block,",
          "old_text": null,
          "new_text": "\texecuteForType<Int64>(block, ",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t|| checkType<DataTypeInt32>(type)",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "ments, re",
          "old_text": null,
          "new_text": "ments, re",
          "old_line_content": "\t\t\t\tconst IDataType * type = &*arguments[1];",
          "new_line_content": "\t\t\t\t\tthrow Exception(\"Illegal type in second argument of function \" + getName(),",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "{\n\t\t\t\tData tmp{0};\n\t\t\t\tfor (size",
          "old_text": null,
          "new_text": "\t{\n\t\t\t\tData tmp{0};\n\t\t\t\tfor (size",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\tOp::prepareScale(scale, mm_scale);",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "&& ((i +",
          "old_text": null,
          "new_text": "&& ((i + ",
          "old_line_content": "\t\tusing Op = RoundingComputation<T, rounding_mode>;",
          "new_line_content": "\t\t\tconst size_t size = in.size();",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "in[i + j];\n\n\t\t\t\tData r",
          "old_text": null,
          "new_text": " in[i + j];\n\n\t\t\t\tData r",
          "old_line_content": "\t\tusing Data = typename Op::Data;",
          "new_line_content": "\t\t\tconst size_t data_size = std::tuple_size<Data>();",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "name = \"floor\"; };\n\n\ttypedef FunctionUnaryArith",
          "old_text": null,
          "new_text": " name = \"floor\"; };\n\n\ttypedef FunctionUnaryArith",
          "old_line_content": "\t\t\t\t\tErrorCodes::ILLEGAL_TYPE_OF_ARGUMENT);",
          "new_line_content": "\t\t\t\t||\texecuteForType<UInt32>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "undToExp2Impl,\tNameRoundToExp2> \tFunctionRoundTo",
          "old_text": null,
          "new_text": "undToExp2Impl,\tNameRoundToExp2> \tFunctionRoundTo",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t||\texecuteForType<UInt64>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "ypedef FunctionUnaryArithmetic<RoundDurationIm",
          "old_text": null,
          "new_text": "ypedef FunctionUnaryArithmetic<RoundDurationIm",
          "old_line_content": "\t\t\treturn arguments[0];",
          "new_line_content": "\t\t\t\t||\texecuteForType<Int8>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "RoundDuration>\tFunctionRoundDuration;\n\ttypedef",
          "old_text": null,
          "new_text": "RoundDuration>\tFunctionRoundDuration;\n\ttypedef ",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t||\texecuteForType<Int16>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "UnaryArithmetic<RoundAgeImpl,\t\tNameRoundAge>\t\tF",
          "old_text": null,
          "new_text": "UnaryArithmetic<RoundAgeImpl,\t\tNameRoundAge>\t\tF",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t||\texecuteForType<Int32>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "oundAge;\n\ttypedef FunctionRounding<NameRound,\t_",
          "old_text": null,
          "new_text": "oundAge;\n\ttypedef FunctionRounding<NameRound,\t_",
          "old_line_content": "\t\t/// Выполнить функцию над блоком.",
          "new_line_content": "\t\t\t\t||\texecuteForType<Int64>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "D_NINT>\tFunctionRound;\n\ttypedef FunctionRounding<",
          "old_text": null,
          "new_text": "D_NINT>\tFunctionRound;\n\ttypedef FunctionRounding<",
          "old_line_content": "\t\tvoid execute(Block & block, const ColumnNumbers & arguments, size_t result) override",
          "new_line_content": "\t\t\t\t||\texecuteForType<Float32>(block, arguments, result)",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "ctor<T>;",
          "old_text": null,
          "new_text": "ctor<T>;\n",
          "old_line_content": "",
          "new_line_content": "\t\tstatic constexpr auto name = Name::name;",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": ",\t_MM_FROUND_CEIL>\tFunctionCeil;\n\ttypedef Functio",
          "old_text": null,
          "new_text": ",\t_MM_FROUND_CEIL>\tFunctionCeil;\n\ttypedef Functio",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\t||\texecuteForType<Float64>(block, arguments, result)))",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "e T, typename U>\n\tstruct Precis",
          "old_text": null,
          "new_text": "e T, typename U>\n\tstruct Precis",
          "old_line_content": "\t\t\t\t\tout[i + j] = res[j];",
          "new_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\tstruct NameRoundAge \t\t{ static constexpr auto name = \"roundAge\"; };",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "",
          "old_text": null,
          "new_text": "",
          "old_line_content": "\t\t\t\t\t\tErrorCodes::ILLEGAL_COLUMN);",
          "new_line_content": "\tstruct NameFloor\t\t\t{ static constexpr auto name = \"floor\"; };",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "olumnConst<U>;\n\n\t\t\tconst ColumnTy",
          "old_text": null,
          "new_text": "olumnConst<U>;\n\n\t\t\tconst ColumnTy",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tOp::prepareScale(scale, mm_scale);",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": ");\n\n\t\t\t\tColumnConst<T> * col_res",
          "old_text": null,
          "new_text": ");\n\n\t\t\t\tColumnConst<T> * col_res ",
          "old_line_content": "\t\tbool checkType(const IDataType * type) const",
          "new_line_content": "\t\t\tif (ColumnVector<T> * col = typeid_cast<ColumnVector<T> *>(&*block.getByPosition(arguments[0]).column))",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "k.getByPosition(",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tif (arguments.size() == 2)",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": null,
          "new_api": "lumn);\n\t\t\tif (precision_col ==",
          "old_text": null,
          "new_text": "lumn);\n\t\t\tif (precision_col == ",
          "old_line_content": "\t\t\t\treturn val;",
          "new_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "ue;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}",
          "old_text": null,
          "new_text": "ue;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tprecision = getPrecision<T>(block.getByPosition(arguments[1]).column);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "ность\n\t\t/// для результата.",
          "old_text": null,
          "new_text": "ность\n\t\t/// для результата.",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\tblock.getByPosition(result).column = col_res;",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "UInt8 precisio",
          "old_text": null,
          "new_text": "\n\t\t\tUInt8 precisio",
          "old_line_content": "",
          "new_line_content": "\t\t\t\ttypename ColumnVector<T>::Container_t & vec_res = col_res->getData();",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "precision)",
          "old_text": null,
          "new_text": "precision)\n\t\t\t",
          "old_line_content": "\t\t\t\tUInt8 precision = 0;",
          "new_line_content": "\t\t\t\tOp::apply(col->getData(), PowersOf10::values[precision], vec_res);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "onForType<T, UInt32>::apply(colum",
          "old_text": null,
          "new_text": "onForType<T, UInt32>::apply(colum",
          "old_line_content": "\t\t\t\tColumnVector<T> * col_res = new ColumnVector<T>;",
          "new_line_content": "\t\t\telse if (ColumnConst<T> * col = typeid_cast<ColumnConst<T> *>(&*block.getByPosition(arguments[0]).column))",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": null,
          "new_api": "static inline bool apply(const ColumnPt",
          "old_text": null,
          "new_text": "\t\tstatic inline bool apply(const ColumnPt",
          "old_line_content": "",
          "new_line_content": "\t\t\tconst ColumnType * precision_col = typeid_cast<const ColumnType *>(&*column);",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": null,
          "new_api": "{\n\t\tusing Data = std::array<Float64,",
          "old_text": null,
          "new_text": "\n\t{\n\t\tusing Data = std::array<Float64,",
          "old_line_content": "\t\t\tFloat32 input[4] __attribute__((aligned(16))) = {in[0], in[1], in[2], in[3]};",
          "new_line_content": "\t\t\t__m128 mm_value = _mm_loadu_ps(reinterpret_cast<const Float32 *>(&in));",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(size_t scale, Scale & mm_scale)\n\t\t{",
          "old_line_content": "",
          "new_line_content": "\t\t\tmm_value = _mm_round_ps(mm_value, rounding_mode);",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "td::is_integral<L>::valu",
          "old_text": null,
          "new_text": "td::is_integral<L>::valu",
          "old_line_content": "\t\ttemplate<typename L = T>",
          "new_line_content": "\t\t\tU val = precision_col->getData();",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "nForType<T,",
          "old_text": null,
          "new_text": "nForType<T,",
          "old_line_content": "\t\t\t\treturn true;",
          "new_line_content": "\t\t\t\tColumnConst<T> * col_res = new ColumnConst<T>(col->size(), res);",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": null,
          "new_api": "ly",
          "old_text": null,
          "new_text": "ly(column, precision)))\n\t\t\t",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tblock.getByPosition(result).column = col_res;",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "lumnConst<U>;\n\n\t\t\tconst ColumnType * precision_c",
          "old_text": null,
          "new_text": "lumnConst<U>;\n\n\t\t\tconst ColumnType * precision_c",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\telse if (val >= static_cast<U>(std::numeric_limits<L>::digits10))",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "cast<const ColumnType *>(&*column);\n\t\t\tif (preci",
          "old_text": null,
          "new_text": "cast<const ColumnType *>(&*column);\n\t\t\tif (preci",
          "old_line_content": "\t\t\tusing ColumnType = ColumnConst<U>;",
          "new_line_content": "\t\t\t\tval = static_cast<U>(std::numeric_limits<L>::digits10);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "pply",
          "new_api": null,
          "old_text": "pply(column, p",
          "new_text": null,
          "old_line_content": "\t\t\t\tT res = Op::apply(col->getData(), PowersOf10::values[precision]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "td::is_integral<L>::valu",
          "new_api": null,
          "old_text": "td::is_integral<L>::valu",
          "new_text": null,
          "old_line_content": "\t\t\tU val = precision_col->getData();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "nForType<T,",
          "new_api": null,
          "old_text": "nForType<T,",
          "new_text": null,
          "old_line_content": "\t\t\t\tColumnConst<T> * col_res = new ColumnConst<T>(col->size(), res);",
          "new_line_content": "\t\t/// для результата.",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "ly",
          "new_api": null,
          "old_text": "ly(column, precision)))\n\t\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\tblock.getByPosition(result).column = col_res;",
          "new_line_content": "\t\ttemplate<typename T>",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "lumnConst<U>;\n\n\t\t\tconst ColumnType * precision_c",
          "new_api": null,
          "old_text": "lumnConst<U>;\n\n\t\t\tconst ColumnType * precision_c",
          "new_text": null,
          "old_line_content": "\t\t\telse if (val >= static_cast<U>(std::numeric_limits<L>::digits10))",
          "new_line_content": "\t\tstatic inline bool apply(const ColumnPtr & column, UInt8 & precision,",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "cast<const ColumnType *>(&*column);\n\t\t\tif (preci",
          "new_api": null,
          "old_text": "cast<const ColumnType *>(&*column);\n\t\t\tif (preci",
          "new_text": null,
          "old_line_content": "\t\t\t\tval = static_cast<U>(std::numeric_limits<L>::digits10);",
          "new_line_content": "\t\t\t\t\t\t\t\t typename std::enable_if<std::is_integral<L>::value>::type * = nullptr)",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "r)\n\t\t\t\treturn false;",
          "new_api": null,
          "old_text": "r)\n\t\t\t\treturn false;\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\tprecision = static_cast<UInt8>(val);",
          "new_line_content": "\t\t\tusing ColumnType = ColumnConst<U>;",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": "_pd",
          "new_api": null,
          "old_text": "_pd(mm_value, rounding_mode",
          "new_text": null,
          "old_line_content": "\t\t\tFloat64 fscale = static_cast<Float64>(scale);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": "template<typename",
          "new_api": null,
          "old_text": "\ttemplate<typename",
          "new_text": null,
          "old_line_content": "\t\t\t__m128d mm_value = _mm_load_pd(input);",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "mode, typename Enable = void>",
          "new_api": null,
          "old_text": "mode, typename Enable = void>\n",
          "new_text": null,
          "old_line_content": "\t\t\tmm_value = _mm_mul_pd(mm_value, mm_scale);",
          "new_line_content": "\t/// Реализация функций округления на высоком уровне.",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "RoundingImpl\n\t{\n\t};\n\n\t/// В случае це",
          "new_api": null,
          "old_text": "RoundingImpl\n\t{\n\t};\n\n\t/// В случае це",
          "new_text": null,
          "old_line_content": "\t\t\tmm_value = _mm_round_pd(mm_value, rounding_mode);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": "ений не выполяется округления.",
          "new_api": null,
          "old_text": "ений не выполяется округления.",
          "new_text": null,
          "old_line_content": "\t\t\tmm_value = _mm_div_pd(mm_value, mm_scale);",
          "new_line_content": "\ttemplate<typename T, int rounding_mode, typename Enable = void>",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "ение контейнера содержащего таблицу степе",
          "new_api": null,
          "old_text": "ение контейнера содержащего таблицу степе",
          "new_text": null,
          "old_line_content": "\t\t\tconst ColumnType * precision_col = typeid_cast<const ColumnType *>(&*column);",
          "new_line_content": "\t/// Следующий код генерирует во время сборки таблицу степеней числа 10.",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": "mode>\n\tstru",
          "new_api": null,
          "old_text": "mode>\n\tstru",
          "new_text": null,
          "old_line_content": "\t\t\tFloat64 res[2] __attribute__((aligned(16)));",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "tionRoundingImpl<T, roundin",
          "new_api": null,
          "old_text": "tionRoundingImpl<T, roundin",
          "new_text": null,
          "old_line_content": "\t\t\t_mm_store_pd(res, mm_value);",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "size",
          "new_api": null,
          "old_text": "ents) const override\n\t\t{\n\t\t\tif ((arguments.size() < 1",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt16>::apply(column, precision)",
          "new_line_content": "\t\t\t\t\t\tErrorCodes::ILLEGAL_COLUMN);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "size",
          "new_api": null,
          "old_text": "guments.size() > 2))\n\t\t\t\tthrow Exception(\"Number of a",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt32>::apply(column, precision)",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "for function \" + getName() + \" doesn't match: passed",
          "new_api": null,
          "old_text": " for function \" + getName() + \" doesn't match: passed",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, UInt64>::apply(column, precision)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "size",
          "new_api": null,
          "old_text": "+ toString(arguments.size()) + \", should be 1 or 2.",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, Int8>::apply(column, precision)",
          "new_line_content": "\t\t\treturn precision;",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH);\n\n\t\t\ti",
          "new_api": null,
          "old_text": "ErrorCodes::NUMBER_OF_ARGUMENTS_DOESNT_MATCH);\n\n\t\t\ti",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, Int16>::apply(column, precision)",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "size",
          "new_api": null,
          "old_text": "ents.size() == 2)\n\t\t\t{\n\t\t\t\tconst IDataType * type = ",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, Int32>::apply(column, precision)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "nts[1];\n\t\t\t\tif (!( checkType<DataTypeUInt8>(type)",
          "new_api": null,
          "old_text": "nts[1];\n\t\t\t\tif (!( checkType<DataTypeUInt8>(type)\n\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\tPrecisionForType<T, Int64>::apply(column, precision)))",
          "new_line_content": "\tpublic:",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "eckType<DataTypeU",
          "new_api": null,
          "old_text": "eckType<DataTypeU",
          "new_text": null,
          "old_line_content": "\t\t\t\tthrow Exception(\"Illegal column \" + column->getName()",
          "new_line_content": "\t\tString getName() const override",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "checkTyp",
          "new_api": null,
          "old_text": " checkTyp",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t+ \" of second ('precision') argument of function \" + getName(),",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "le;\n\n\tpub",
          "new_api": null,
          "old_text": "le;\n\n\tpub",
          "new_text": null,
          "old_line_content": "\t\t\tsize_t size = in.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": ", result)\n\t\t\t\t||\texecuteForTyp",
          "new_api": null,
          "old_text": ", result)\n\t\t\t\t||\texecuteForTyp",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!( checkType<DataTypeUInt8>(type)",
          "new_line_content": "\t\t\t\t\t\t\t\t\tErrorCodes::ILLEGAL_TYPE_OF_ARGUMENT);",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "(block, arguments, result)",
          "new_api": null,
          "old_text": "(block, arguments, result)\n\t\t\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt16>(type)",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "eForType<Int8>(block, arguments",
          "new_api": null,
          "old_text": "eForType<Int8>(block, arguments",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt32>(type)",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "||\texecuteForType<Int16>(b",
          "new_api": null,
          "old_text": "\n\t\t\t\t||\texecuteForType<Int16>(b",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeUInt64>(type)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "uments, result)\n\t\t\t\t||\texecut",
          "new_api": null,
          "old_text": "uments, result)\n\t\t\t\t||\texecut",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeInt8>(type)",
          "new_line_content": "\t\t\tconst IDataType * type = &*arguments[0];",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": ", result)\n\t\t\t\t||\texecuteForTyp",
          "new_api": null,
          "old_text": ", result)\n\t\t\t\t||\texecuteForTyp",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t|| checkType<DataTypeInt64>(type)))",
          "new_line_content": "\t\t\t\t\tErrorCodes::ILLEGAL_TYPE_OF_ARGUMENT);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "ments, re",
          "new_api": null,
          "old_text": "ments, re",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tthrow Exception(\"Illegal type in second argument of function \" + getName(),",
          "new_line_content": "\t\t\treturn arguments[0];",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "{\n\t\t\t\tData tmp{0};\n\t\t\t\tfor (size",
          "new_api": null,
          "old_text": "\t{\n\t\t\t\tData tmp{0};\n\t\t\t\tfor (size",
          "new_text": null,
          "old_line_content": "\t\t\tOp::prepareScale(scale, mm_scale);",
          "new_line_content": "\t\t\t\t\ttmp[j] = in[i + j];",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "&& ((i +",
          "new_api": null,
          "old_text": "&& ((i + ",
          "new_text": null,
          "old_line_content": "\t\t\tconst size_t size = in.size();",
          "new_line_content": "\t\t\t\tData res;",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "_t scale)\n\t\t{\n\t\t\tif (val == 0)",
          "new_api": null,
          "old_text": "_t scale)\n\t\t{\n\t\t\tif (val == 0)\n",
          "new_text": null,
          "old_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "new_line_content": "\t\t\t\t\ttmp[j] = in[i + j];",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "\"; };\n\tstruct NameCeil\t\t\t\t{ static constexpr au",
          "new_api": null,
          "old_text": "\"; };\n\tstruct NameCeil\t\t\t\t{ static constexpr au",
          "new_text": null,
          "old_line_content": "\t\t\tif (!(\texecuteForType<UInt8>(block, arguments, result)",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "undToExp2Impl,\tNameRoundToExp2> \tFunctionRoundTo",
          "new_api": null,
          "old_text": "undToExp2Impl,\tNameRoundToExp2> \tFunctionRoundTo",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\texecuteForType<UInt64>(block, arguments, result)",
          "new_line_content": "\t\t\t\t\t\tErrorCodes::ILLEGAL_COLUMN);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "ypedef FunctionUnaryArithmetic<RoundDurationIm",
          "new_api": null,
          "old_text": "ypedef FunctionUnaryArithmetic<RoundDurationIm",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\texecuteForType<Int8>(block, arguments, result)",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "RoundDuration>\tFunctionRoundDuration;\n\ttypedef",
          "new_api": null,
          "old_text": "RoundDuration>\tFunctionRoundDuration;\n\ttypedef ",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\texecuteForType<Int16>(block, arguments, result)",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "UnaryArithmetic<RoundAgeImpl,\t\tNameRoundAge>\t\tF",
          "new_api": null,
          "old_text": "UnaryArithmetic<RoundAgeImpl,\t\tNameRoundAge>\t\tF",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\texecuteForType<Int32>(block, arguments, result)",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "oundAge;\n\ttypedef FunctionRounding<NameRound,\t_",
          "new_api": null,
          "old_text": "oundAge;\n\ttypedef FunctionRounding<NameRound,\t_",
          "new_text": null,
          "old_line_content": "\t\t\t\t||\texecuteForType<Int64>(block, arguments, result)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "e T, typename U>\n\tstruct Precis",
          "new_api": null,
          "old_text": "e T, typename U>\n\tstruct Precis",
          "new_text": null,
          "old_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "new_line_content": "\t\t\t\treturn val;",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameRoundToExp2\t\t{ static constexpr auto name = \"roundToExp2\"; };",
          "new_line_content": "\ttypedef FunctionRounding<NameRound,\t_MM_FROUND_NINT>\tFunctionRound;",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "eid_cast<ColumnConst<T> *>(&",
          "new_api": null,
          "old_text": "eid_cast<ColumnConst<T> *>(&",
          "new_text": null,
          "old_line_content": "\t\t\treturn typeid_cast<const T *>(type) != nullptr;",
          "new_line_content": "\t\t\t\tUInt8 precision = 0;",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameRoundDuration\t{ static constexpr auto name = \"roundDuration\"; };",
          "new_line_content": "\ttypedef FunctionRounding<NameCeil,\t_MM_FROUND_CEIL>\tFunctionCeil;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameRoundAge \t\t{ static constexpr auto name = \"roundAge\"; };",
          "new_line_content": "\ttypedef FunctionRounding<NameFloor,\t_MM_FROUND_FLOOR>\tFunctionFloor;",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameRound\t\t\t{ static constexpr auto name = \"round\"; };",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameCeil\t\t\t\t{ static constexpr auto name = \"ceil\"; };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "",
          "new_api": null,
          "old_text": "",
          "new_text": null,
          "old_line_content": "\tstruct NameFloor\t\t\t{ static constexpr auto name = \"floor\"; };",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "olumnConst<U>;\n\n\t\t\tconst ColumnTy",
          "new_api": null,
          "old_text": "olumnConst<U>;\n\n\t\t\tconst ColumnTy",
          "new_text": null,
          "old_line_content": "\t\t\t\tOp::prepareScale(scale, mm_scale);",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "k.getByPosition(",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (arguments.size() == 2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": "lumn);\n\t\t\tif (precision_col ==",
          "new_api": null,
          "old_text": "lumn);\n\t\t\tif (precision_col == ",
          "new_text": null,
          "old_line_content": "\t\t\t\tOp::compute(tmp, mm_scale, res);",
          "new_line_content": "\t\tstatic inline bool apply(const ColumnPtr & column, UInt8 & precision,",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "ue;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}",
          "new_api": null,
          "old_text": "ue;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprecision = getPrecision<T>(block.getByPosition(arguments[1]).column);",
          "new_line_content": "\t\t\t\treturn true;",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "ность\n\t\t/// для результата.",
          "new_api": null,
          "old_text": "ность\n\t\t/// для результата.",
          "new_text": null,
          "old_line_content": "\t\t\t\tblock.getByPosition(result).column = col_res;",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": "pareScale",
          "new_api": null,
          "old_text": "pareScale(size_t scale, Scale ",
          "new_text": null,
          "old_line_content": "\t\t\tmm_value = _mm_div_ps(mm_value, mm_scale);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "onForType<T, UInt32>::apply(colum",
          "new_api": null,
          "old_text": "onForType<T, UInt32>::apply(colum",
          "new_text": null,
          "old_line_content": "\t\t\telse if (ColumnConst<T> * col = typeid_cast<ColumnConst<T> *>(&*block.getByPosition(arguments[0]).column))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": "static_cast",
          "new_api": null,
          "old_text": "static_cast",
          "new_text": null,
          "old_line_content": "\t\t\tFloat32 res[4] __attribute__((aligned(16)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": "4>(scale);\n\t\t\tmm_scale = _m",
          "new_api": null,
          "old_text": "4>(scale);\n\t\t\tmm_scale = _m",
          "new_text": null,
          "old_line_content": "\t\t\t_mm_store_ps(res, mm_value);",
          "new_line_content": "\ttemplate<int rounding_mode>",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "::apply(column,",
          "new_api": null,
          "old_text": "::apply(column, ",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (arguments.size() == 2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "t8>::apply(column, precision)",
          "new_api": null,
          "old_text": "t8>::apply(column, precision)\n\t\t\t",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprecision = getPrecision<T>(block.getByPosition(arguments[1]).column);",
          "new_line_content": "\t\t\treturn false;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 58,
      "total_deletions": 60,
      "total_api_changes": 146
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 17,
        "api_related_lines": 146,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          143,
          145,
          149,
          152,
          122,
          125
        ]
      }
    },
    "api_calls_before": 118,
    "api_calls_after": 120,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 14,
      "total_diff_lines": 43
    }
  }
}
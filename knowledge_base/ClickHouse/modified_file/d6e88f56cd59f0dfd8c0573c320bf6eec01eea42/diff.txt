diff --git a/modified_file.cpp b/modified_file.cpp
index 0000000..1111111 100644
--- a/modified_file.cpp
+++ b/modified_file.cpp
--- a/modified_file.cpp
+++ b/modified_file.cpp
@@ -674,17 +674,16 @@
 

 void ColumnsDescription::addSubcolumns(const String & name_in_storage, const DataTypePtr & type_in_storage)

 {

-    for (const auto & subcolumn_name : type_in_storage->getSubcolumnNames())

-    {

-        auto subcolumn = NameAndTypePair(name_in_storage, subcolumn_name,

-            type_in_storage, type_in_storage->getSubcolumnType(subcolumn_name));

+    IDataType::forEachSubcolumn([&](const auto &, const auto & subname, const auto & subdata)

+    {

+        auto subcolumn = NameAndTypePair(name_in_storage, subname, type_in_storage, subdata.type);

 

         if (has(subcolumn.name))

             throw Exception(ErrorCodes::ILLEGAL_COLUMN,

                 "Cannot add subcolumn {}: column with this name already exists", subcolumn.name);

 

         subcolumns.get<0>().insert(std::move(subcolumn));

-    }

+    }, {type_in_storage->getDefaultSerialization(), type_in_storage, nullptr, nullptr});

 }

 

 void ColumnsDescription::removeSubcolumns(const String & name_in_storage)

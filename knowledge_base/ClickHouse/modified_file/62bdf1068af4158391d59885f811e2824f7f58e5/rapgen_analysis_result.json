{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/62bdf1068af4158391d59885f811e2824f7f58e5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/62bdf1068af4158391d59885f811e2824f7f58e5/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/62bdf1068af4158391d59885f811e2824f7f58e5/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/62bdf1068af4158391d59885f811e2824f7f58e5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 154,
          "old_api": "getSizeInBytes",
          "new_api": "std::make_shared<RoaringBitmap>(*roaring_bitmap)",
          "old_text": "roaring_bitmap->getSizeInBytes()",
          "new_text": "std::make_shared<RoaringBitmap>(*roaring_bitmap)",
          "old_line_content": "            auto size = roaring_bitmap->getSizeInBytes();",
          "new_line_content": "            std::shared_ptr<RoaringBitmap> bitmap = std::make_shared<RoaringBitmap>(*roaring_bitmap);",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "writeVarUInt",
          "new_api": "runOptimize",
          "old_text": "writeVarUInt(size, out)",
          "new_text": "bitmap->runOptimize()",
          "old_line_content": "            writeVarUInt(size, out);",
          "new_line_content": "            bitmap->runOptimize();",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "get",
          "new_api": "writeVarUInt",
          "old_text": "buf.get()",
          "new_text": "writeVarUInt(size, out)",
          "old_line_content": "            roaring_bitmap->write(buf.get());",
          "new_line_content": "            writeVarUInt(size, out);",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "getValue",
          "new_api": "std::make_shared<RoaringBitmap>()",
          "old_text": "x.getValue()",
          "new_text": "std::make_shared<RoaringBitmap>()",
          "old_line_content": "            ret->add(static_cast<Value>(x.getValue()));",
          "new_line_content": "        std::shared_ptr<RoaringBitmap> ret = std::make_shared<RoaringBitmap>();",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "clear",
          "new_api": "insert",
          "old_text": "buffer.clear()",
          "new_text": "small.insert(value)",
          "old_line_content": "            buffer.clear();",
          "new_line_content": "                small.insert(value);",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "isLarge",
          "new_api": "clear",
          "old_text": "r1.isLarge()",
          "new_text": "buffer.clear()",
          "old_line_content": "        else if (isSmall() && r1.isLarge())",
          "new_line_content": "            buffer.clear();",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "clear",
          "new_api": "insert",
          "old_text": "buffer.clear()",
          "new_text": "small.insert(value)",
          "old_line_content": "            buffer.clear();",
          "new_line_content": "                small.insert(value);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "getNewRoaringBitmapFromSmall",
          "new_api": "toLarge",
          "old_text": "r1.getNewRoaringBitmapFromSmall()",
          "new_text": "toLarge()",
          "old_line_content": "        std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "new_line_content": "            toLarge();",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "clear",
          "new_api": "insert",
          "old_text": "buffer.clear()",
          "new_text": "small.insert(value)",
          "old_line_content": "            buffer.clear();",
          "new_line_content": "                small.insert(value);",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "isLarge",
          "new_api": "clear",
          "old_text": "r1.isLarge()",
          "new_text": "buffer.clear()",
          "old_line_content": "        else if (isSmall() && r1.isLarge())",
          "new_line_content": "            buffer.clear();",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "clear",
          "new_api": "insert",
          "old_text": "buffer.clear()",
          "new_text": "small.insert(value)",
          "old_line_content": "            buffer.clear();",
          "new_line_content": "                small.insert(value);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "rb_and_cardinality",
          "new_api": "size",
          "old_text": "rb_and_cardinality(r1)",
          "new_text": "size()",
          "old_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "new_line_content": "        UInt64 c1 = size();",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "rb_and_cardinality",
          "new_api": "size",
          "old_text": "rb_and_cardinality(r1)",
          "new_text": "size()",
          "old_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "new_line_content": "        UInt64 c1 = size();",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "getNewRoaringBitmapFromSmall",
          "new_api": "toLarge",
          "old_text": "r1.getNewRoaringBitmapFromSmall()",
          "new_text": "toLarge()",
          "old_line_content": "        std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "new_line_content": "            toLarge();",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "static_cast<Value>(x)",
          "new_api": "end",
          "old_text": "static_cast<Value>(x)",
          "new_text": "small.end()",
          "old_line_content": "            return roaring_bitmap->contains(static_cast<Value>(x));",
          "new_line_content": "            return small.find(static_cast<T>(x)) != small.end();",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "emplace_back",
          "new_api": "end",
          "old_text": "res.emplace_back(*it)",
          "new_text": "roaring_bitmap->end()",
          "old_line_content": "                res.emplace_back(*it);",
          "new_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "add",
          "new_api": "UInt32",
          "old_text": "r1.add(val)",
          "new_text": "UInt32(val)",
          "old_line_content": "                    r1.add(val);",
          "new_line_content": "                if (UInt32(val) >= range_start && UInt32(val) < range_end)",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "push_back",
          "new_api": "UInt32",
          "old_text": "answer.push_back(val)",
          "new_text": "UInt32(val)",
          "old_line_content": "                    answer.push_back(val);",
          "new_line_content": "                if (UInt32(val) >= range_start)",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "end",
          "new_api": "size",
          "old_text": "answer.end()",
          "new_text": "answer.size()",
          "old_line_content": "                ::nth_element(answer.begin(), answer.begin() + limit, answer.end());",
          "new_line_content": "            if (limit < answer.size())",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "empty",
          "new_api": "isSmall",
          "old_text": "small.empty()",
          "new_text": "isSmall()",
          "old_line_content": "            if (small.empty())",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "std::numeric_limits<UnsignedT>::max()",
          "new_api": "empty",
          "old_text": "std::numeric_limits<UnsignedT>::max()",
          "new_text": "small.empty()",
          "old_line_content": "            auto min_val = std::numeric_limits<UnsignedT>::max();",
          "new_line_content": "            if (small.empty())",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "empty",
          "new_api": "isSmall",
          "old_text": "small.empty()",
          "new_text": "isSmall()",
          "old_line_content": "            if (small.empty())",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "static_cast<Value>(to_vals[i])",
          "new_api": "static_cast<Value>(from_vals[i])",
          "old_text": "static_cast<Value>(to_vals[i])",
          "new_text": "static_cast<Value>(from_vals[i])",
          "old_line_content": "                roaring_bitmap->add(static_cast<Value>(to_vals[i]));",
          "new_line_content": "            bool changed = roaring_bitmap->removeChecked(static_cast<Value>(from_vals[i]));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 517,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "r1.add(*it)",
          "old_line_content": "                }",
          "new_line_content": "                    r1.add(*it);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "            std::vector<T> answer;",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "                {",
          "new_line_content": "                T val = x.getValue();",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "answer.push_back(val)",
          "old_line_content": "            }",
          "new_line_content": "                    answer.push_back(val);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "answer.end()",
          "old_line_content": "            }",
          "new_line_content": "                ::nth_element(answer.begin(), answer.begin() + limit, answer.end());",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "answer.resize(limit)",
          "old_line_content": "",
          "new_line_content": "                answer.resize(limit);",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "r1.add(elem)",
          "old_line_content": "        }",
          "new_line_content": "                r1.add(elem);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "answer.size()",
          "old_line_content": "        else",
          "new_line_content": "            return answer.size();",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "roaring_bitmap->end()",
          "old_line_content": "                if (*it < range_start)",
          "new_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "r1.add(*it)",
          "old_line_content": "                }",
          "new_line_content": "                    r1.add(*it);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "size()",
          "old_line_content": "",
          "new_line_content": "        if (limit == 0 || offset >= size())",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "            UInt64 count = 0;",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "small.begin()",
          "old_line_content": "                ++offset_count;",
          "new_line_content": "            auto it = small.begin();",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "small.end()",
          "old_line_content": "",
          "new_line_content": "            for (;it != small.end() && offset_count < offset; ++it)",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "small.end()",
          "old_line_content": "            return count;",
          "new_line_content": "            for (;it != small.end() && count < limit; ++it, ++count)",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "it->getValue()",
          "old_line_content": "        }",
          "new_line_content": "                r1.add(it->getValue());",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "roaring_bitmap->begin()",
          "old_line_content": "                ++offset_count;",
          "new_line_content": "            auto it = roaring_bitmap->begin();",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "roaring_bitmap->end()",
          "old_line_content": "",
          "new_line_content": "            for (;it != roaring_bitmap->end() && offset_count < offset; ++it)",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "roaring_bitmap->end()",
          "old_line_content": "            return count;",
          "new_line_content": "            for (;it != roaring_bitmap->end() && count < limit; ++it, ++count)",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "r1.add(*it)",
          "old_line_content": "        }",
          "new_line_content": "                r1.add(*it);",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "std::numeric_limits<UnsignedT>::max()",
          "old_text": null,
          "new_text": "std::numeric_limits<UnsignedT>::max()",
          "old_line_content": "            {",
          "new_line_content": "            auto min_val = std::numeric_limits<UnsignedT>::max();",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "                    min_val = val;",
          "new_line_content": "                UnsignedT val = x.getValue();",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "minimum",
          "old_text": null,
          "new_text": "roaring_bitmap->minimum()",
          "old_line_content": "",
          "new_line_content": "            return roaring_bitmap->minimum();",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "small.empty()",
          "old_line_content": "            UnsignedT max_val = 0;",
          "new_line_content": "            if (small.empty())",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "                    max_val = val;",
          "new_line_content": "                UnsignedT val = x.getValue();",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "maximum",
          "old_text": null,
          "new_text": "roaring_bitmap->maximum()",
          "old_line_content": "",
          "new_line_content": "            return roaring_bitmap->maximum();",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "toLarge",
          "old_text": null,
          "new_text": "toLarge()",
          "old_line_content": "        for (size_t i = 0; i < num; ++i)",
          "new_line_content": "            toLarge();",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "static_cast<Value>(to_vals[i])",
          "old_text": null,
          "new_text": "static_cast<Value>(to_vals[i])",
          "old_line_content": "    }",
          "new_line_content": "                roaring_bitmap->add(static_cast<Value>(to_vals[i]));",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": null,
          "new_api": "getSizeInBytes",
          "old_text": null,
          "new_text": "bitmap->getSizeInBytes()",
          "old_line_content": "            std::unique_ptr<char[]> buf(new char[size]);",
          "new_line_content": "            auto size = bitmap->getSizeInBytes();",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "buf.get()",
          "old_line_content": "        }",
          "new_line_content": "            bitmap->write(buf.get());",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "buf.get()",
          "old_line_content": "    }",
          "new_line_content": "            out.write(buf.get(), size);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "    }",
          "new_line_content": "            ret->add(static_cast<Value>(x.getValue()));",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "            // intersect",
          "new_line_content": "        if (isSmall() && r1.isSmall())",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "r1.small.end()",
          "old_line_content": "",
          "new_line_content": "                if (r1.small.find(x.getValue()) != r1.small.end())",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            // Clear out the original values",
          "new_line_content": "                    buffer.push_back(x.getValue());",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "small.clear()",
          "old_line_content": "            for (const auto & value : buffer)",
          "new_line_content": "            small.clear();",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "isLarge",
          "old_text": null,
          "new_text": "r1.isLarge()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        else if (isSmall() && r1.isLarge())",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "",
          "new_line_content": "                    buffer.push_back(x.getValue());",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "small.clear()",
          "old_line_content": "            for (const auto & value : buffer)",
          "new_line_content": "            small.clear();",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "buffer.clear()",
          "old_line_content": "        else",
          "new_line_content": "            buffer.clear();",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": null,
          "new_api": "getNewRoaringBitmapFromSmall",
          "old_text": null,
          "new_text": "r1.getNewRoaringBitmapFromSmall()",
          "old_line_content": "        }",
          "new_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "merge",
          "old_text": null,
          "new_text": "merge(r1)",
          "old_line_content": "",
          "new_line_content": "        merge(r1); /// NOLINT",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "getNewRoaringBitmapFromSmall",
          "old_text": null,
          "new_text": "r1.getNewRoaringBitmapFromSmall()",
          "old_line_content": "    }",
          "new_line_content": "        std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "            // subtract",
          "new_line_content": "        if (isSmall() && r1.isSmall())",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "r1.small.end()",
          "old_line_content": "",
          "new_line_content": "                if (r1.small.find(x.getValue()) == r1.small.end())",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            // Clear out the original values",
          "new_line_content": "                    buffer.push_back(x.getValue());",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "small.clear()",
          "old_line_content": "            for (const auto & value : buffer)",
          "new_line_content": "            small.clear();",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "isLarge",
          "old_text": null,
          "new_text": "r1.isLarge()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        else if (isSmall() && r1.isLarge())",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                if (!r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "",
          "new_line_content": "                    buffer.push_back(x.getValue());",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "small.clear()",
          "old_line_content": "            for (const auto & value : buffer)",
          "new_line_content": "            small.clear();",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "buffer.clear()",
          "old_line_content": "        else",
          "new_line_content": "            buffer.clear();",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "getNewRoaringBitmapFromSmall",
          "old_text": null,
          "new_text": "r1.getNewRoaringBitmapFromSmall()",
          "old_line_content": "        }",
          "new_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        if (isSmall() && r1.isSmall())",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "r1.small.end()",
          "old_line_content": "        }",
          "new_line_content": "                if (r1.small.find(x.getValue()) != r1.small.end())",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "isLarge",
          "old_text": null,
          "new_text": "r1.isLarge()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        else if (isSmall() && r1.isLarge())",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "getNewRoaringBitmapFromSmall",
          "old_text": null,
          "new_text": "r1.getNewRoaringBitmapFromSmall()",
          "old_line_content": "        }",
          "new_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "cardinality",
          "old_text": null,
          "new_text": "*roaring_bitmap & *new_rb).cardinality()",
          "old_line_content": "        return ret;",
          "new_line_content": "            ret = (*roaring_bitmap & *new_rb).cardinality();",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "r1.size()",
          "old_line_content": "        return c1 + c2 - inter;",
          "new_line_content": "        UInt64 c2 = r1.size();",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "rb_and_cardinality",
          "old_text": null,
          "new_text": "rb_and_cardinality(r1)",
          "old_line_content": "    }",
          "new_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "r1.size()",
          "old_line_content": "        return c1 + c2 - 2 * inter;",
          "new_line_content": "        UInt64 c2 = r1.size();",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "rb_and_cardinality",
          "old_text": null,
          "new_text": "rb_and_cardinality(r1)",
          "old_line_content": "    }",
          "new_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "size()",
          "old_line_content": "        return c1 - inter;",
          "new_line_content": "        UInt64 c1 = size();",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "rb_and_cardinality",
          "old_text": null,
          "new_text": "rb_and_cardinality(r1)",
          "old_line_content": "    }",
          "new_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "getNewRoaringBitmapFromSmall",
          "old_text": null,
          "new_text": "r1.getNewRoaringBitmapFromSmall()",
          "old_line_content": "    }",
          "new_line_content": "        std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "                for (const auto & x : r1.small)",
          "new_line_content": "            if (r1.isSmall())",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "small.end()",
          "old_line_content": "            }",
          "new_line_content": "                    if (small.find(x.getValue()) != small.end())",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "                }",
          "new_line_content": "                    if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "            for (const auto & x : r1.small)",
          "new_line_content": "        else if (r1.isSmall())",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                if (roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "cardinality",
          "old_text": null,
          "new_text": "*roaring_bitmap & *r1.roaring_bitmap).cardinality()",
          "old_line_content": "        }",
          "new_line_content": "            if ((*roaring_bitmap & *r1.roaring_bitmap).cardinality() > 0)",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "                for (const auto & x : r1.small)",
          "new_line_content": "            if (r1.isSmall())",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "small.end()",
          "old_line_content": "            }",
          "new_line_content": "                    if (small.find(x.getValue()) == small.end())",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "r1.size()",
          "old_line_content": "                // A bigger set can not be a subset of ours.",
          "new_line_content": "                UInt64 r1_size = r1.size();",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "small.size()",
          "old_line_content": "",
          "new_line_content": "                if (r1_size > small.size())",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "small.size()",
          "old_line_content": "                }",
          "new_line_content": "                    if (!r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())) && ++r1_size > small.size())",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "r1.isSmall()",
          "old_line_content": "            for (const auto & x : r1.small)",
          "new_line_content": "        else if (r1.isSmall())",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                if (!roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "isSubset",
          "old_text": null,
          "new_text": "r1.roaring_bitmap->isSubset(*roaring_bitmap)",
          "old_line_content": "        }",
          "new_line_content": "            if (!r1.roaring_bitmap->isSubset(*roaring_bitmap))",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "rb_max",
          "old_text": null,
          "new_text": "rb_max()",
          "old_line_content": "",
          "new_line_content": "        if (!std::is_same_v<T, UInt64> && x > rb_max())",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "        else",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "static_cast<Value>(x)",
          "old_text": null,
          "new_text": "static_cast<Value>(x)",
          "old_line_content": "",
          "new_line_content": "            return roaring_bitmap->contains(static_cast<Value>(x));",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "            }",
          "new_line_content": "                res.emplace_back(x.getValue());",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "res.emplace_back(*it)",
          "old_line_content": "            }",
          "new_line_content": "                res.emplace_back(*it);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "isSmall",
          "old_text": null,
          "new_text": "isSmall()",
          "old_line_content": "            for (const auto & x : small)",
          "new_line_content": "        if (isSmall())",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "getValue",
          "old_text": null,
          "new_text": "x.getValue()",
          "old_line_content": "                {",
          "new_line_content": "                T val = x.getValue();",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "add",
          "old_text": null,
          "new_text": "r1.add(val)",
          "old_line_content": "                }",
          "new_line_content": "                    r1.add(val);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "roaring_bitmap->end()",
          "old_line_content": "                if (*it < range_start)",
          "new_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 515,
          "old_api": "add",
          "new_api": null,
          "old_text": "r1.add(*it)",
          "new_text": null,
          "old_line_content": "                    r1.add(*it);",
          "new_line_content": "                if (*it < range_end)",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                T val = x.getValue();",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "UInt32",
          "new_api": null,
          "old_text": "UInt32(val)",
          "new_text": null,
          "old_line_content": "                if (UInt32(val) >= range_start)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "size",
          "new_api": null,
          "old_text": "answer.size()",
          "new_text": null,
          "old_line_content": "            if (limit < answer.size())",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "resize",
          "new_api": null,
          "old_text": "answer.resize(limit)",
          "new_text": null,
          "old_line_content": "                answer.resize(limit);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "add",
          "new_api": null,
          "old_text": "r1.add(elem)",
          "new_text": null,
          "old_line_content": "                r1.add(elem);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "size",
          "new_api": null,
          "old_text": "answer.size()",
          "new_text": null,
          "old_line_content": "            return answer.size();",
          "new_line_content": "            for (const auto & elem : answer)",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "end",
          "new_api": null,
          "old_text": "roaring_bitmap->end()",
          "new_text": null,
          "old_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "add",
          "new_api": null,
          "old_text": "r1.add(*it)",
          "new_text": null,
          "old_line_content": "                    r1.add(*it);",
          "new_line_content": "                if (count < limit)",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "        if (limit == 0 || offset >= size())",
          "new_line_content": "    UInt64 rb_offset_limit(UInt64 offset, UInt64 limit, RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "begin",
          "new_api": null,
          "old_text": "small.begin()",
          "new_text": null,
          "old_line_content": "            auto it = small.begin();",
          "new_line_content": "            UInt64 count = 0;",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "end",
          "new_api": null,
          "old_text": "small.end()",
          "new_text": null,
          "old_line_content": "            for (;it != small.end() && offset_count < offset; ++it)",
          "new_line_content": "            UInt64 offset_count = 0;",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "end",
          "new_api": null,
          "old_text": "small.end()",
          "new_text": null,
          "old_line_content": "            for (;it != small.end() && count < limit; ++it, ++count)",
          "new_line_content": "                ++offset_count;",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "it->getValue()",
          "new_text": null,
          "old_line_content": "                r1.add(it->getValue());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "begin",
          "new_api": null,
          "old_text": "roaring_bitmap->begin()",
          "new_text": null,
          "old_line_content": "            auto it = roaring_bitmap->begin();",
          "new_line_content": "            UInt64 count = 0;",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "end",
          "new_api": null,
          "old_text": "roaring_bitmap->end()",
          "new_text": null,
          "old_line_content": "            for (;it != roaring_bitmap->end() && offset_count < offset; ++it)",
          "new_line_content": "            UInt64 offset_count = 0;",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "end",
          "new_api": null,
          "old_text": "roaring_bitmap->end()",
          "new_text": null,
          "old_line_content": "            for (;it != roaring_bitmap->end() && count < limit; ++it, ++count)",
          "new_line_content": "                ++offset_count;",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "add",
          "new_api": null,
          "old_text": "r1.add(*it)",
          "new_text": null,
          "old_line_content": "                r1.add(*it);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    UInt64 rb_min() const /// NOLINT",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                UnsignedT val = x.getValue();",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "minimum",
          "new_api": null,
          "old_text": "roaring_bitmap->minimum()",
          "new_text": null,
          "old_line_content": "            return roaring_bitmap->minimum();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    UInt64 rb_max() const /// NOLINT",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                UnsignedT val = x.getValue();",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "maximum",
          "new_api": null,
          "old_text": "roaring_bitmap->maximum()",
          "new_text": null,
          "old_line_content": "            return roaring_bitmap->maximum();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    void rb_replace(const UInt64 * from_vals, const UInt64 * to_vals, size_t num) /// NOLINT",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "toLarge",
          "new_api": null,
          "old_text": "toLarge()",
          "new_text": null,
          "old_line_content": "            toLarge();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "static_cast<Value>(from_vals[i])",
          "new_api": null,
          "old_text": "static_cast<Value>(from_vals[i])",
          "new_text": null,
          "old_line_content": "            bool changed = roaring_bitmap->removeChecked(static_cast<Value>(from_vals[i]));",
          "new_line_content": "            if (from_vals[i] == to_vals[i])",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "get",
          "new_api": null,
          "old_text": "buf.get()",
          "new_text": null,
          "old_line_content": "            out.write(buf.get(), size);",
          "new_line_content": "            std::unique_ptr<char[]> buf(new char[size]);",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "std::make_shared<RoaringBitmap>()",
          "new_api": null,
          "old_text": "std::make_shared<RoaringBitmap>()",
          "new_text": null,
          "old_line_content": "        std::shared_ptr<RoaringBitmap> ret = std::make_shared<RoaringBitmap>();",
          "new_line_content": "    std::shared_ptr<RoaringBitmap> getNewRoaringBitmapFromSmall() const",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "r1.isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall() && r1.isSmall())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "end",
          "new_api": null,
          "old_text": "r1.small.end()",
          "new_text": null,
          "old_line_content": "                if (r1.small.find(x.getValue()) != r1.small.end())",
          "new_line_content": "            // intersect",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                    buffer.push_back(x.getValue());",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "clear",
          "new_api": null,
          "old_text": "small.clear()",
          "new_text": null,
          "old_line_content": "            small.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "insert",
          "new_api": null,
          "old_text": "small.insert(value)",
          "new_text": null,
          "old_line_content": "                small.insert(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                    buffer.push_back(x.getValue());",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "clear",
          "new_api": null,
          "old_text": "small.clear()",
          "new_text": null,
          "old_line_content": "            small.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "insert",
          "new_api": null,
          "old_text": "small.insert(value)",
          "new_text": null,
          "old_line_content": "                small.insert(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "getNewRoaringBitmapFromSmall",
          "new_api": null,
          "old_text": "r1.getNewRoaringBitmapFromSmall()",
          "new_text": null,
          "old_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": "merge",
          "new_api": null,
          "old_text": "merge(r1)",
          "new_text": null,
          "old_line_content": "        merge(r1); /// NOLINT",
          "new_line_content": "    void rb_or(const RoaringBitmapWithSmallSet & r1)",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    void rb_xor(const RoaringBitmapWithSmallSet & r1) /// NOLINT",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "toLarge",
          "new_api": null,
          "old_text": "toLarge()",
          "new_text": null,
          "old_line_content": "            toLarge();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "r1.isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall() && r1.isSmall())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "end",
          "new_api": null,
          "old_text": "r1.small.end()",
          "new_text": null,
          "old_line_content": "                if (r1.small.find(x.getValue()) == r1.small.end())",
          "new_line_content": "            // subtract",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                    buffer.push_back(x.getValue());",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "clear",
          "new_api": null,
          "old_text": "small.clear()",
          "new_text": null,
          "old_line_content": "            small.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "insert",
          "new_api": null,
          "old_text": "small.insert(value)",
          "new_text": null,
          "old_line_content": "                small.insert(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                if (!r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                    buffer.push_back(x.getValue());",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "clear",
          "new_api": null,
          "old_text": "small.clear()",
          "new_text": null,
          "old_line_content": "            small.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "insert",
          "new_api": null,
          "old_text": "small.insert(value)",
          "new_text": null,
          "old_line_content": "                small.insert(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "getNewRoaringBitmapFromSmall",
          "new_api": null,
          "old_text": "r1.getNewRoaringBitmapFromSmall()",
          "new_text": null,
          "old_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "r1.isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall() && r1.isSmall())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "end",
          "new_api": null,
          "old_text": "r1.small.end()",
          "new_text": null,
          "old_line_content": "                if (r1.small.find(x.getValue()) != r1.small.end())",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "isLarge",
          "new_api": null,
          "old_text": "r1.isLarge()",
          "new_text": null,
          "old_line_content": "        else if (isSmall() && r1.isLarge())",
          "new_line_content": "                    ++ret;",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "getNewRoaringBitmapFromSmall",
          "new_api": null,
          "old_text": "r1.getNewRoaringBitmapFromSmall()",
          "new_text": null,
          "old_line_content": "            std::shared_ptr<RoaringBitmap> new_rb = r1.isSmall() ? r1.getNewRoaringBitmapFromSmall() : r1.roaring_bitmap;",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "cardinality",
          "new_api": null,
          "old_text": "*roaring_bitmap & *new_rb).cardinality()",
          "new_text": null,
          "old_line_content": "            ret = (*roaring_bitmap & *new_rb).cardinality();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "        UInt64 c1 = size();",
          "new_line_content": "    UInt64 rb_or_cardinality(const RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "size",
          "new_api": null,
          "old_text": "r1.size()",
          "new_text": null,
          "old_line_content": "        UInt64 c2 = r1.size();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "        UInt64 c1 = size();",
          "new_line_content": "    UInt64 rb_xor_cardinality(const RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "size",
          "new_api": null,
          "old_text": "r1.size()",
          "new_text": null,
          "old_line_content": "        UInt64 c2 = r1.size();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "size",
          "new_api": null,
          "old_text": "size()",
          "new_text": null,
          "old_line_content": "        UInt64 c1 = size();",
          "new_line_content": "    UInt64 rb_andnot_cardinality(const RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "rb_and_cardinality",
          "new_api": null,
          "old_text": "rb_and_cardinality(r1)",
          "new_text": null,
          "old_line_content": "        UInt64 inter = rb_and_cardinality(r1);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    UInt8 rb_equals(const RoaringBitmapWithSmallSet & r1) /// NOLINT",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "toLarge",
          "new_api": null,
          "old_text": "toLarge()",
          "new_text": null,
          "old_line_content": "            toLarge();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    UInt8 rb_intersect(const RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "end",
          "new_api": null,
          "old_text": "small.end()",
          "new_text": null,
          "old_line_content": "                    if (small.find(x.getValue()) != small.end())",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                    if (r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "                for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "r1.isSmall()",
          "new_text": null,
          "old_line_content": "        else if (r1.isSmall())",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                if (roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "            for (const auto & x : r1.small)",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "cardinality",
          "new_api": null,
          "old_text": "*roaring_bitmap & *r1.roaring_bitmap).cardinality()",
          "new_text": null,
          "old_line_content": "            if ((*roaring_bitmap & *r1.roaring_bitmap).cardinality() > 0)",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    UInt8 rb_is_subset(const RoaringBitmapWithSmallSet & r1) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "end",
          "new_api": null,
          "old_text": "small.end()",
          "new_text": null,
          "old_line_content": "                    if (small.find(x.getValue()) == small.end())",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "size",
          "new_api": null,
          "old_text": "r1.size()",
          "new_text": null,
          "old_line_content": "                UInt64 r1_size = r1.size();",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "size",
          "new_api": null,
          "old_text": "small.size()",
          "new_text": null,
          "old_line_content": "                if (r1_size > small.size())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "size",
          "new_api": null,
          "old_text": "small.size()",
          "new_text": null,
          "old_line_content": "                    if (!r1.roaring_bitmap->contains(static_cast<Value>(x.getValue())) && ++r1_size > small.size())",
          "new_line_content": "                for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "r1.isSmall()",
          "new_text": null,
          "old_line_content": "        else if (r1.isSmall())",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                if (!roaring_bitmap->contains(static_cast<Value>(x.getValue())))",
          "new_line_content": "            for (const auto & x : r1.small)",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "isSubset",
          "new_api": null,
          "old_text": "r1.roaring_bitmap->isSubset(*roaring_bitmap)",
          "new_text": null,
          "old_line_content": "            if (!r1.roaring_bitmap->isSubset(*roaring_bitmap))",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "rb_max",
          "new_api": null,
          "old_text": "rb_max()",
          "new_text": null,
          "old_line_content": "        if (!std::is_same_v<T, UInt64> && x > rb_max())",
          "new_line_content": "    UInt8 rb_contains(UInt64 x) const /// NOLINT",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "end",
          "new_api": null,
          "old_text": "small.end()",
          "new_text": null,
          "old_line_content": "            return small.find(static_cast<T>(x)) != small.end();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                res.emplace_back(x.getValue());",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "end",
          "new_api": null,
          "old_text": "roaring_bitmap->end()",
          "new_text": null,
          "old_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "isSmall",
          "new_api": null,
          "old_text": "isSmall()",
          "new_text": null,
          "old_line_content": "        if (isSmall())",
          "new_line_content": "        if (range_start >= range_end)",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "x.getValue()",
          "new_text": null,
          "old_line_content": "                T val = x.getValue();",
          "new_line_content": "            for (const auto & x : small)",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "UInt32",
          "new_api": null,
          "old_text": "UInt32(val)",
          "new_text": null,
          "old_line_content": "                if (UInt32(val) >= range_start && UInt32(val) < range_end)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "end",
          "new_api": null,
          "old_text": "roaring_bitmap->end()",
          "new_text": null,
          "old_line_content": "            for (auto it = roaring_bitmap->begin(); it != roaring_bitmap->end(); ++it)",
          "new_line_content": "        else",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 23,
      "total_additions": 94,
      "total_deletions": 92,
      "total_api_changes": 209
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 209,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 213,
    "api_calls_after": 215,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 2,
      "total_diff_lines": 20
    }
  }
}
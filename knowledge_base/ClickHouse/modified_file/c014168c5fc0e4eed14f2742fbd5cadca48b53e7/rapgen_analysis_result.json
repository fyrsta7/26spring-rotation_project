{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/c014168c5fc0e4eed14f2742fbd5cadca48b53e7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/c014168c5fc0e4eed14f2742fbd5cadca48b53e7/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/c014168c5fc0e4eed14f2742fbd5cadca48b53e7/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/ClickHouse/modified_file/c014168c5fc0e4eed14f2742fbd5cadca48b53e7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 110,
          "old_api": "resize",
          "new_api": "readJSONStringInto",
          "old_text": "current_column_name.resize(nested_prefix_length)",
          "new_text": "readJSONStringInto(current_column_name, buf)",
          "old_line_content": "    current_column_name.resize(nested_prefix_length);",
          "new_line_content": "    readJSONStringInto(current_column_name, buf);",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": "skipWhitespaceIfAny",
          "new_api": "assertChar",
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": "assertChar(':', istr)",
          "old_line_content": "    skipWhitespaceIfAny(istr);",
          "new_line_content": "    assertChar(':', istr);",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": "assertChar",
          "new_api": "skipWhitespaceIfAny",
          "old_text": "assertChar(':', istr)",
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "    assertChar(':', istr);",
          "new_line_content": "    skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": "eof",
          "new_api": "Exception",
          "old_text": "istr.eof()",
          "new_text": "Exception(\"Unexpected end of stream while parsing JSONEachRow format\", ErrorCodes::CANNOT_READ_ALL_DATA)",
          "old_line_content": "    if (istr.eof())",
          "new_line_content": "        throw Exception(\"Unexpected end of stream while parsing JSONEachRow format\", ErrorCodes::CANNOT_READ_ALL_DATA);",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": "Exception",
          "new_api": "position",
          "old_text": "Exception(\"Unexpected end of stream while parsing JSONEachRow format\", ErrorCodes::CANNOT_READ_ALL_DATA)",
          "new_text": "istr.position()",
          "old_line_content": "        throw Exception(\"Unexpected end of stream while parsing JSONEachRow format\", ErrorCodes::CANNOT_READ_ALL_DATA);",
          "new_line_content": "    else if (*istr.position() == '}')",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "assertChar",
          "new_api": "skipWhitespaceIfAny",
          "old_text": "assertChar(',', istr)",
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "        assertChar(',', istr);",
          "new_line_content": "        skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "readColumnName",
          "new_api": "columnIndex",
          "old_text": "readColumnName(istr)",
          "new_text": "columnIndex(name_ref, key_index)",
          "old_line_content": "        StringRef name_ref = readColumnName(istr);",
          "new_line_content": "        const size_t column_index = columnIndex(name_ref, key_index);",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "assign",
          "new_api": "StringRef",
          "old_text": "current_column_name.assign(name_ref.data, name_ref.size)",
          "new_text": "StringRef(current_column_name)",
          "old_line_content": "            current_column_name.assign(name_ref.data, name_ref.size);",
          "new_line_content": "            name_ref = StringRef(current_column_name);",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "skipColonDelimeter",
          "new_api": "readField",
          "old_text": "skipColonDelimeter(istr)",
          "new_text": "readField(column_index, columns)",
          "old_line_content": "            skipColonDelimeter(istr);",
          "new_line_content": "            readField(column_index, columns);",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "push_back",
          "new_api": "size",
          "old_text": "current_column_name.push_back('.')",
          "new_text": "current_column_name.size()",
          "old_line_content": "    current_column_name.push_back('.');",
          "new_line_content": "    nested_prefix_length = current_column_name.size();",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "size",
          "new_api": "readJSONObject",
          "old_text": "current_column_name.size()",
          "new_text": "readJSONObject(columns)",
          "old_line_content": "    nested_prefix_length = current_column_name.size();",
          "new_line_content": "    readJSONObject(columns);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": "skipWhitespaceIfAny",
          "new_api": "eof",
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": "istr.eof()",
          "old_line_content": "    skipWhitespaceIfAny(istr);",
          "new_line_content": "    if (istr.eof())",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings)",
          "new_api": "std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings)",
          "old_text": "std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings)",
          "new_text": "std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings)",
          "old_line_content": "        return std::make_shared<BlockInputStreamFromRowInputStream>(",
          "new_line_content": "            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 133,
          "old_api": null,
          "new_api": "columnName",
          "old_text": null,
          "new_text": "columnName(index)",
          "old_line_content": "    if (read_columns[index])",
          "new_line_content": "        throw Exception(\"Duplicate field found while parsing JSONEachRow format: \" + columnName(index), ErrorCodes::INCORRECT_DATA);",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings)",
          "old_text": null,
          "new_text": "std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings)",
          "old_line_content": "    {",
          "new_line_content": "        return std::make_shared<BlockInputStreamFromRowInputStream>(",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "header.getByPosition(index).type->deserializeTextJSON(*columns[index], istr, format_settings)",
          "old_line_content": "    {",
          "new_line_content": "        header.getByPosition(index).type->deserializeTextJSON(*columns[index], istr, format_settings);",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": null,
          "new_api": "columnName",
          "old_text": null,
          "new_text": "columnName(index)",
          "old_line_content": "    {",
          "new_line_content": "        e.addMessage(\"(while read the value of key \" + columnName(index) + \")\");",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "skipWhitespaceIfAny",
          "old_text": null,
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "{",
          "new_line_content": "    skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": null,
          "new_api": "eof",
          "old_text": null,
          "new_text": "istr.eof()",
          "old_line_content": "",
          "new_line_content": "    if (istr.eof())",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": null,
          "new_api": "position",
          "old_text": null,
          "new_text": "istr.position()",
          "old_line_content": "    {",
          "new_line_content": "        ++istr.position();",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": null,
          "new_api": "assertChar",
          "old_text": null,
          "new_text": "assertChar(',', istr)",
          "old_line_content": "    {",
          "new_line_content": "        assertChar(',', istr);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "assertChar",
          "old_text": null,
          "new_text": "assertChar('{', istr)",
          "old_line_content": "{",
          "new_line_content": "    assertChar('{', istr);",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": null,
          "new_api": "advanceToNextKey",
          "old_text": null,
          "new_text": "advanceToNextKey(key_index)",
          "old_line_content": "",
          "new_line_content": "    for (size_t key_index = 0; advanceToNextKey(key_index); ++key_index)",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "readColumnName",
          "old_text": null,
          "new_text": "readColumnName(istr)",
          "old_line_content": "    {",
          "new_line_content": "        StringRef name_ref = readColumnName(istr);",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(ssize_t(column_index) < 0)",
          "old_line_content": "",
          "new_line_content": "        if (unlikely(ssize_t(column_index) < 0))",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": null,
          "new_api": "assign",
          "old_text": null,
          "new_text": "current_column_name.assign(name_ref.data, name_ref.size)",
          "old_line_content": "",
          "new_line_content": "            current_column_name.assign(name_ref.data, name_ref.size);",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "skipColonDelimeter",
          "old_text": null,
          "new_text": "skipColonDelimeter(istr)",
          "old_line_content": "",
          "new_line_content": "            skipColonDelimeter(istr);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "skipUnknownField",
          "old_text": null,
          "new_text": "skipUnknownField(name_ref)",
          "old_line_content": "            if (column_index == UNKNOWN_FIELD)",
          "new_line_content": "                skipUnknownField(name_ref);",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "name_ref.toString()",
          "old_line_content": "            else if (column_index == NESTED_FIELD)",
          "new_line_content": "                readNestedData(name_ref.toString(), columns);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "Exception",
          "old_text": null,
          "new_text": "Exception(\"Logical error: illegal value of column_index\", ErrorCodes::LOGICAL_ERROR)",
          "old_line_content": "            else",
          "new_line_content": "                throw Exception(\"Logical error: illegal value of column_index\", ErrorCodes::LOGICAL_ERROR);",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "skipColonDelimeter",
          "old_text": null,
          "new_text": "skipColonDelimeter(istr)",
          "old_line_content": "        {",
          "new_line_content": "            skipColonDelimeter(istr);",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "current_column_name.push_back('.')",
          "old_line_content": "    current_column_name = name;",
          "new_line_content": "    current_column_name.push_back('.');",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": null,
          "new_api": "skipWhitespaceIfAny",
          "old_text": null,
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "{",
          "new_line_content": "    skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "position",
          "old_text": null,
          "new_text": "istr.position()",
          "old_line_content": "    /// Semicolon is added for convenience as it could be used at end of INSERT query.",
          "new_line_content": "    if (!istr.eof() && (*istr.position() == ',' || *istr.position() == ';'))",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "skipWhitespaceIfAny",
          "old_text": null,
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "",
          "new_line_content": "    skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "columns.size()",
          "old_line_content": "",
          "new_line_content": "    size_t num_columns = columns.size();",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "assign",
          "old_text": null,
          "new_text": "read_columns.assign(num_columns, false)",
          "old_line_content": "    /// TODO Ability to provide your DEFAULTs.",
          "new_line_content": "    read_columns.assign(num_columns, false);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "readJSONObject",
          "old_text": null,
          "new_text": "readJSONObject(columns)",
          "old_line_content": "    nested_prefix_length = 0;",
          "new_line_content": "    readJSONObject(columns);",
          "content_same": false
        },
        {
          "line": 109,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "current_column_name.resize(nested_prefix_length)",
          "old_line_content": "",
          "new_line_content": "    current_column_name.resize(nested_prefix_length);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "getByPosition",
          "old_text": null,
          "new_text": "header.getByPosition(i).type->insertDefaultInto(*columns[i])",
          "old_line_content": "        if (!read_columns[i])",
          "new_line_content": "            header.getByPosition(i).type->insertDefaultInto(*columns[i]);",
          "content_same": false
        },
        {
          "line": 117,
          "old_api": null,
          "new_api": "skipWhitespaceIfAny",
          "old_text": null,
          "new_text": "skipWhitespaceIfAny(istr)",
          "old_line_content": "{",
          "new_line_content": "    skipWhitespaceIfAny(istr);",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "skipToUnescapedNextLineOrEOF",
          "old_text": null,
          "new_text": "skipToUnescapedNextLineOrEOF(istr)",
          "old_line_content": "{",
          "new_line_content": "    skipToUnescapedNextLineOrEOF(istr);",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": null,
          "new_api": "skipJSONField",
          "old_text": null,
          "new_text": "skipJSONField(istr, name_ref)",
          "old_line_content": "",
          "new_line_content": "    skipJSONField(istr, name_ref);",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "name_ref.toString()",
          "old_line_content": "    if (!format_settings.skip_unknown_fields)",
          "new_line_content": "        throw Exception(\"Unknown field found while parsing JSONEachRow format: \" + name_ref.toString(), ErrorCodes::INCORRECT_DATA);",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": null,
          "new_api": "registerInputFormat",
          "old_text": null,
          "new_text": "factory.registerInputFormat(\"JSONEachRow\", [](\n        ReadBuffer & buf,\n        const Block & sample,\n        const Context &,\n        size_t max_block_size,\n        const FormatSettings & settings)\n    {\n        return std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings);\n    })",
          "old_line_content": "{",
          "new_line_content": "    factory.registerInputFormat(\"JSONEachRow\", [](",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 128,
          "old_api": "skipJSONField",
          "new_api": null,
          "old_text": "skipJSONField(istr, name_ref)",
          "new_text": null,
          "old_line_content": "    skipJSONField(istr, name_ref);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "registerInputFormat",
          "new_api": null,
          "old_text": "factory.registerInputFormat(\"JSONEachRow\", [](\n        ReadBuffer & buf,\n        const Block & sample,\n        const Context &,\n        size_t max_block_size,\n        const FormatSettings & settings)\n    {\n        return std::make_shared<BlockInputStreamFromRowInputStream>(\n            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),\n            sample, max_block_size, settings);\n    })",
          "new_text": null,
          "old_line_content": "    factory.registerInputFormat(\"JSONEachRow\", [](",
          "new_line_content": "        ReadBuffer & buf,",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": "columnName",
          "new_api": null,
          "old_text": "columnName(index)",
          "new_text": null,
          "old_line_content": "        throw Exception(\"Duplicate field found while parsing JSONEachRow format: \" + columnName(index), ErrorCodes::INCORRECT_DATA);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings)",
          "new_api": null,
          "old_text": "std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings)",
          "new_text": null,
          "old_line_content": "            std::make_shared<JSONEachRowRowInputStream>(buf, sample, settings),",
          "new_line_content": "            sample, max_block_size, settings);",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "header.getByPosition(index).type->deserializeTextJSON(*columns[index], istr, format_settings)",
          "new_text": null,
          "old_line_content": "        header.getByPosition(index).type->deserializeTextJSON(*columns[index], istr, format_settings);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 142,
          "old_api": "columnName",
          "new_api": null,
          "old_text": "columnName(index)",
          "new_text": null,
          "old_line_content": "        e.addMessage(\"(while read the value of key \" + columnName(index) + \")\");",
          "new_line_content": "        throw;",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "skipWhitespaceIfAny",
          "new_api": null,
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": null,
          "old_line_content": "    skipWhitespaceIfAny(istr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "position",
          "new_api": null,
          "old_text": "istr.position()",
          "new_text": null,
          "old_line_content": "    else if (*istr.position() == '}')",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "position",
          "new_api": null,
          "old_text": "istr.position()",
          "new_text": null,
          "old_line_content": "        ++istr.position();",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "skipWhitespaceIfAny",
          "new_api": null,
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": null,
          "old_line_content": "        skipWhitespaceIfAny(istr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "assertChar",
          "new_api": null,
          "old_text": "assertChar('{', istr)",
          "new_text": null,
          "old_line_content": "    assertChar('{', istr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "advanceToNextKey",
          "new_api": null,
          "old_text": "advanceToNextKey(key_index)",
          "new_text": null,
          "old_line_content": "    for (size_t key_index = 0; advanceToNextKey(key_index); ++key_index)",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "columnIndex",
          "new_api": null,
          "old_text": "columnIndex(name_ref, key_index)",
          "new_text": null,
          "old_line_content": "        const size_t column_index = columnIndex(name_ref, key_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ssize_t(column_index) < 0)",
          "new_text": null,
          "old_line_content": "        if (unlikely(ssize_t(column_index) < 0))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "StringRef",
          "new_api": null,
          "old_text": "StringRef(current_column_name)",
          "new_text": null,
          "old_line_content": "            name_ref = StringRef(current_column_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "skipColonDelimeter",
          "new_api": null,
          "old_text": "skipColonDelimeter(istr)",
          "new_text": null,
          "old_line_content": "            skipColonDelimeter(istr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "skipUnknownField",
          "new_api": null,
          "old_text": "skipUnknownField(name_ref)",
          "new_text": null,
          "old_line_content": "                skipUnknownField(name_ref);",
          "new_line_content": "            else if (column_index == NESTED_FIELD)",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": "toString",
          "new_api": null,
          "old_text": "name_ref.toString()",
          "new_text": null,
          "old_line_content": "                readNestedData(name_ref.toString(), columns);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "Exception",
          "new_api": null,
          "old_text": "Exception(\"Logical error: illegal value of column_index\", ErrorCodes::LOGICAL_ERROR)",
          "new_text": null,
          "old_line_content": "                throw Exception(\"Logical error: illegal value of column_index\", ErrorCodes::LOGICAL_ERROR);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "readField",
          "new_api": null,
          "old_text": "readField(column_index, columns)",
          "new_text": null,
          "old_line_content": "            readField(column_index, columns);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "readJSONObject",
          "new_api": null,
          "old_text": "readJSONObject(columns)",
          "new_text": null,
          "old_line_content": "    readJSONObject(columns);",
          "new_line_content": "    nested_prefix_length = 0;",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "skipWhitespaceIfAny",
          "new_api": null,
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": null,
          "old_line_content": "    skipWhitespaceIfAny(istr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "position",
          "new_api": null,
          "old_text": "istr.position()",
          "new_text": null,
          "old_line_content": "        ++istr.position();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "eof",
          "new_api": null,
          "old_text": "istr.eof()",
          "new_text": null,
          "old_line_content": "    if (istr.eof())",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "size",
          "new_api": null,
          "old_text": "columns.size()",
          "new_text": null,
          "old_line_content": "    size_t num_columns = columns.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "assertChar",
          "new_api": null,
          "old_text": "assertChar('\"', buf)",
          "new_text": null,
          "old_line_content": "            assertChar('\"', buf);",
          "new_line_content": "            return res;",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "assign",
          "new_api": null,
          "old_text": "read_columns.assign(num_columns, false)",
          "new_text": null,
          "old_line_content": "    read_columns.assign(num_columns, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "readJSONObject",
          "new_api": null,
          "old_text": "readJSONObject(columns)",
          "new_text": null,
          "old_line_content": "    readJSONObject(columns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 111,
          "old_api": "readJSONStringInto",
          "new_api": null,
          "old_text": "readJSONStringInto(current_column_name, buf)",
          "new_text": null,
          "old_line_content": "    readJSONStringInto(current_column_name, buf);",
          "new_line_content": "    return current_column_name;",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "getByPosition",
          "new_api": null,
          "old_text": "header.getByPosition(i).type->insertDefaultInto(*columns[i])",
          "new_text": null,
          "old_line_content": "            header.getByPosition(i).type->insertDefaultInto(*columns[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": "skipWhitespaceIfAny",
          "new_api": null,
          "old_text": "skipWhitespaceIfAny(istr)",
          "new_text": null,
          "old_line_content": "    skipWhitespaceIfAny(istr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "skipToUnescapedNextLineOrEOF",
          "new_api": null,
          "old_text": "skipToUnescapedNextLineOrEOF(istr)",
          "new_text": null,
          "old_line_content": "    skipToUnescapedNextLineOrEOF(istr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 126,
          "old_api": "toString",
          "new_api": null,
          "old_text": "name_ref.toString()",
          "new_text": null,
          "old_line_content": "        throw Exception(\"Unknown field found while parsing JSONEachRow format: \" + name_ref.toString(), ErrorCodes::INCORRECT_DATA);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 13,
      "total_additions": 32,
      "total_deletions": 33,
      "total_api_changes": 78
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 78,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          104,
          97
        ]
      }
    },
    "api_calls_before": 85,
    "api_calls_after": 83,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 3,
      "total_diff_lines": 23
    }
  }
}
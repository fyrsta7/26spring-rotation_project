diff --git a/src/Common/LRUCache.h b/src/Common/LRUCache.h
index 700ef3b0ceb..a5c4990fecd 100644
--- a/src/Common/LRUCache.h
+++ b/src/Common/LRUCache.h
@@ -372,7 +372,7 @@ private:
         }
 
         cell.value = mapped;
-        cell.size = cell.value ? weight_function(*cell.value) : 0;
+        cell.size = value_weight;
         current_size += cell.size;
 
         return true;

{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/c419524c05d7544636d5bc0cc0cb333052b0a517",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/c419524c05d7544636d5bc0cc0cb333052b0a517/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/c419524c05d7544636d5bc0cc0cb333052b0a517/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/c419524c05d7544636d5bc0cc0cb333052b0a517/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 2674,
          "old_api": "sdslen",
          "new_api": "createObject",
          "old_text": "sdslen(argv[j])",
          "new_text": "createObject(OBJ_STRING, argv[j])",
          "old_line_content": "        c->argv_len_sum += sdslen(argv[j]);",
          "new_line_content": "        c->argv[c->argc] = createObject(OBJ_STRING, argv[j]);",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "zfree",
          "new_api": "sdslen",
          "old_text": "zfree(argv)",
          "new_text": "sdslen(argv[j])",
          "old_line_content": "    zfree(argv);",
          "new_line_content": "        c->argv_len_sum += sdslen(argv[j]);",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": "sdslen",
          "new_api": "snprintf",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "snprintf(buf, sizeof(buf), \"Query buffer during protocol error: '%.*s' (... more %zu bytes ...) '%.*s'\",\n                     PROTO_DUMP_LEN / 2, c->querybuf + c->qb_pos, sdslen(c->querybuf) - c->qb_pos - PROTO_DUMP_LEN,\n                     PROTO_DUMP_LEN / 2, c->querybuf + sdslen(c->querybuf) - PROTO_DUMP_LEN / 2)",
          "old_line_content": "                     PROTO_DUMP_LEN / 2, c->querybuf + sdslen(c->querybuf) - PROTO_DUMP_LEN / 2);",
          "new_line_content": "            snprintf(buf, sizeof(buf), \"Query buffer during protocol error: '%.*s' (... more %zu bytes ...) '%.*s'\",",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": "sdslen",
          "new_api": "strchr",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "strchr(c->querybuf + c->qb_pos, '\\r')",
          "old_line_content": "            if (sdslen(c->querybuf) - c->qb_pos > PROTO_INLINE_MAX_SIZE) {",
          "new_line_content": "        newline = strchr(c->querybuf + c->qb_pos, '\\r');",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "string2ll",
          "new_api": "serverAssertWithInfo",
          "old_text": "string2ll(c->querybuf + 1 + c->qb_pos, multibulklen_slen, &ll)",
          "new_text": "serverAssertWithInfo(c, NULL, c->querybuf[c->qb_pos] == '*')",
          "old_line_content": "        ok = string2ll(c->querybuf + 1 + c->qb_pos, multibulklen_slen, &ll);",
          "new_line_content": "        serverAssertWithInfo(c, NULL, c->querybuf[c->qb_pos] == '*');",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": "zmalloc",
          "new_api": "zfree",
          "old_text": "zmalloc(sizeof(robj *) * c->argv_len)",
          "new_text": "zfree(c->argv)",
          "old_line_content": "        c->argv = zmalloc(sizeof(robj *) * c->argv_len);",
          "new_line_content": "        if (c->argv) zfree(c->argv);",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": "sdslen",
          "new_api": "strchr",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "strchr(c->querybuf + c->qb_pos, '\\r')",
          "old_line_content": "                if (sdslen(c->querybuf) - c->qb_pos > PROTO_INLINE_MAX_SIZE) {",
          "new_line_content": "            newline = strchr(c->querybuf + c->qb_pos, '\\r');",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": "sdsrange",
          "new_api": "initSharedQueryBuf",
          "old_text": "sdsrange(c->querybuf, c->qb_pos, -1)",
          "new_text": "initSharedQueryBuf()",
          "old_line_content": "                    sdsrange(c->querybuf, c->qb_pos, -1);",
          "new_line_content": "                        initSharedQueryBuf();",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "sdsIncrLen",
          "new_api": "createObject",
          "old_text": "sdsIncrLen(c->querybuf, -2)",
          "new_text": "createObject(OBJ_STRING, c->querybuf)",
          "old_line_content": "                sdsIncrLen(c->querybuf, -2); /* remove CRLF */",
          "new_line_content": "                c->argv[c->argc++] = createObject(OBJ_STRING, c->querybuf);",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": "createStringObject",
          "new_api": "sdsclear",
          "old_text": "createStringObject(c->querybuf + c->qb_pos, c->bulklen)",
          "new_text": "sdsclear(c->querybuf)",
          "old_line_content": "                c->argv[c->argc++] = createStringObject(c->querybuf + c->qb_pos, c->bulklen);",
          "new_line_content": "                sdsclear(c->querybuf);",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "resetClient",
          "new_api": "reqresAppendResponse",
          "old_text": "resetClient(c)",
          "new_text": "reqresAppendResponse(c)",
          "old_line_content": "    resetClient(c);",
          "new_line_content": "    reqresAppendResponse(c);",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": "processMultibulkBuffer",
          "new_api": "processInlineBuffer",
          "old_text": "processMultibulkBuffer(c)",
          "new_text": "processInlineBuffer(c)",
          "old_line_content": "        processMultibulkBuffer(c);",
          "new_line_content": "        processInlineBuffer(c);",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "serverPanic",
          "new_api": "processMultibulkBuffer",
          "old_text": "serverPanic(\"Unknown request type\")",
          "new_text": "processMultibulkBuffer(c)",
          "old_line_content": "        serverPanic(\"Unknown request type\");",
          "new_line_content": "        processMultibulkBuffer(c);",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": "parseCommand",
          "new_api": "authRequired",
          "old_text": "parseCommand(c)",
          "new_text": "authRequired(c)",
          "old_line_content": "        parseCommand(c);",
          "new_line_content": "        c->read_flags |= authRequired(c) ? READ_FLAGS_AUTH_REQUIRED : 0;",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "handleParseResults",
          "new_api": "parseCommand",
          "old_text": "handleParseResults(c)",
          "new_text": "parseCommand(c)",
          "old_line_content": "        if (handleParseResults(c) != PARSE_OK) {",
          "new_line_content": "        parseCommand(c);",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "serverAssert",
          "new_api": "sdsavail",
          "old_text": "serverAssert(c->querybuf == thread_shared_qb)",
          "new_text": "sdsavail(c->querybuf)",
          "old_line_content": "    if (use_thread_shared_qb) serverAssert(c->querybuf == thread_shared_qb);",
          "new_line_content": "        readlen = sdsavail(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3185,
          "old_api": "connRead",
          "new_api": "serverAssert",
          "old_text": "connRead(c->conn, c->querybuf + qblen, readlen)",
          "new_text": "serverAssert(c->querybuf == thread_shared_qb)",
          "old_line_content": "    c->nread = connRead(c->conn, c->querybuf + qblen, readlen);",
          "new_line_content": "    if (use_thread_shared_qb) serverAssert(c->querybuf == thread_shared_qb);",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "postponeClientRead",
          "new_api": "connGetPrivateData",
          "old_text": "postponeClientRead(c)",
          "new_text": "connGetPrivateData(conn)",
          "old_line_content": "    if (postponeClientRead(c)) return;",
          "new_line_content": "    client *c = connGetPrivateData(conn);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": "handleReadResult",
          "new_api": "readToQueryBuf",
          "old_text": "handleReadResult(c)",
          "new_text": "readToQueryBuf(c)",
          "old_line_content": "    if (handleReadResult(c) == C_OK) {",
          "new_line_content": "    readToQueryBuf(c);",
          "content_same": false
        },
        {
          "line": 3218,
          "old_api": "beforeNextClient",
          "new_api": "processInputBuffer",
          "old_text": "beforeNextClient(c)",
          "new_text": "processInputBuffer(c)",
          "old_line_content": "    beforeNextClient(c);",
          "new_line_content": "        if (processInputBuffer(c) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "FMTARGS",
          "new_api": "sdscatfmt",
          "old_text": "FMTARGS(\n            \"id=%U\", (unsigned long long)client->id,\n            \" addr=%s\", getClientPeerId(client),\n            \" laddr=%s\", getClientSockname(client),\n            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),\n            \" name=%s\", hide_user_data ? \"*redacted*\" : (client->name ? (char *)client->name->ptr : \"\"),\n            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),\n            \" idle=%I\", (long long)(server.unixtime - client->last_interaction),\n            \" flags=%s\", flags,\n            \" db=%i\", client->db->id,\n            \" sub=%i\", (int)dictSize(client->pubsub_channels),\n            \" psub=%i\", (int)dictSize(client->pubsub_patterns),\n            \" ssub=%i\", (int)dictSize(client->pubsubshard_channels),\n            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,\n            \" watch=%i\", (int)listLength(client->watched_keys),\n            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,\n            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,\n            \" argv-mem=%U\", (unsigned long long)client->argv_len_sum,\n            \" multi-mem=%U\", (unsigned long long)client->mstate.argv_len_sums,\n            \" rbs=%U\", (unsigned long long)client->buf_usable_size,\n            \" rbp=%U\", (unsigned long long)client->buf_peak,\n            \" obl=%U\", (unsigned long long)client->bufpos,\n            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,\n            \" omem=%U\", (unsigned long long)obufmem, /* should not include client->buf since we want to see 0 for static clients. */\n            \" tot-mem=%U\", (unsigned long long)total_mem,\n            \" events=%s\", events,\n            \" cmd=%s\", client->lastcmd ? client->lastcmd->fullname : \"NULL\",\n            \" user=%s\", hide_user_data ? \"*redacted*\" : (client->user ? client->user->name : \"(superuser)\"),\n            \" redir=%I\", (client->flag.tracking) ? (long long)client->client_tracking_redirection : -1,\n            \" resp=%i\", client->resp,\n            \" lib-name=%s\", client->lib_name ? (char *)client->lib_name->ptr : \"\",\n            \" lib-ver=%s\", client->lib_ver ? (char *)client->lib_ver->ptr : \"\",\n            \" tot-net-in=%U\", client->net_input_bytes,\n            \" tot-net-out=%U\", client->net_output_bytes,\n            \" tot-cmds=%U\", client->commands_processed)",
          "new_text": "sdscatfmt(\n        s,\n        FMTARGS(\n            \"id=%U\", (unsigned long long)client->id,\n            \" addr=%s\", getClientPeerId(client),\n            \" laddr=%s\", getClientSockname(client),\n            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),\n            \" name=%s\", hide_user_data ? \"*redacted*\" : (client->name ? (char *)client->name->ptr : \"\"),\n            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),\n            \" idle=%I\", (long long)(server.unixtime - client->last_interaction),\n            \" flags=%s\", flags,\n            \" db=%i\", client->db->id,\n            \" sub=%i\", (int)dictSize(client->pubsub_channels),\n            \" psub=%i\", (int)dictSize(client->pubsub_patterns),\n            \" ssub=%i\", (int)dictSize(client->pubsubshard_channels),\n            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,\n            \" watch=%i\", (int)listLength(client->watched_keys),\n            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,\n            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,\n            \" argv-mem=%U\", (unsigned long long)client->argv_len_sum,\n            \" multi-mem=%U\", (unsigned long long)client->mstate.argv_len_sums,\n            \" rbs=%U\", (unsigned long long)client->buf_usable_size,\n            \" rbp=%U\", (unsigned long long)client->buf_peak,\n            \" obl=%U\", (unsigned long long)client->bufpos,\n            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,\n            \" omem=%U\", (unsigned long long)obufmem, /* should not include client->buf since we want to see 0 for static clients. */\n            \" tot-mem=%U\", (unsigned long long)total_mem,\n            \" events=%s\", events,\n            \" cmd=%s\", client->lastcmd ? client->lastcmd->fullname : \"NULL\",\n            \" user=%s\", hide_user_data ? \"*redacted*\" : (client->user ? client->user->name : \"(superuser)\"),\n            \" redir=%I\", (client->flag.tracking) ? (long long)client->client_tracking_redirection : -1,\n            \" resp=%i\", client->resp,\n            \" lib-name=%s\", client->lib_name ? (char *)client->lib_name->ptr : \"\",\n            \" lib-ver=%s\", client->lib_ver ? (char *)client->lib_ver->ptr : \"\",\n            \" tot-net-in=%U\", client->net_input_bytes,\n            \" tot-net-out=%U\", client->net_output_bytes,\n            \" tot-cmds=%U\", client->commands_processed))",
          "old_line_content": "        FMTARGS(",
          "new_line_content": "    sds ret = sdscatfmt(",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "getClientPeerId",
          "new_api": "FMTARGS",
          "old_text": "getClientPeerId(client)",
          "new_text": "FMTARGS(\n            \"id=%U\", (unsigned long long)client->id,\n            \" addr=%s\", getClientPeerId(client),\n            \" laddr=%s\", getClientSockname(client),\n            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),\n            \" name=%s\", hide_user_data ? \"*redacted*\" : (client->name ? (char *)client->name->ptr : \"\"),\n            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),\n            \" idle=%I\", (long long)(server.unixtime - client->last_interaction),\n            \" flags=%s\", flags,\n            \" db=%i\", client->db->id,\n            \" sub=%i\", (int)dictSize(client->pubsub_channels),\n            \" psub=%i\", (int)dictSize(client->pubsub_patterns),\n            \" ssub=%i\", (int)dictSize(client->pubsubshard_channels),\n            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,\n            \" watch=%i\", (int)listLength(client->watched_keys),\n            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,\n            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,\n            \" argv-mem=%U\", (unsigned long long)client->argv_len_sum,\n            \" multi-mem=%U\", (unsigned long long)client->mstate.argv_len_sums,\n            \" rbs=%U\", (unsigned long long)client->buf_usable_size,\n            \" rbp=%U\", (unsigned long long)client->buf_peak,\n            \" obl=%U\", (unsigned long long)client->bufpos,\n            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,\n            \" omem=%U\", (unsigned long long)obufmem, /* should not include client->buf since we want to see 0 for static clients. */\n            \" tot-mem=%U\", (unsigned long long)total_mem,\n            \" events=%s\", events,\n            \" cmd=%s\", client->lastcmd ? client->lastcmd->fullname : \"NULL\",\n            \" user=%s\", hide_user_data ? \"*redacted*\" : (client->user ? client->user->name : \"(superuser)\"),\n            \" redir=%I\", (client->flag.tracking) ? (long long)client->client_tracking_redirection : -1,\n            \" resp=%i\", client->resp,\n            \" lib-name=%s\", client->lib_name ? (char *)client->lib_name->ptr : \"\",\n            \" lib-ver=%s\", client->lib_ver ? (char *)client->lib_ver->ptr : \"\",\n            \" tot-net-in=%U\", client->net_input_bytes,\n            \" tot-net-out=%U\", client->net_output_bytes,\n            \" tot-cmds=%U\", client->commands_processed)",
          "old_line_content": "            \" addr=%s\", getClientPeerId(client),",
          "new_line_content": "        FMTARGS(",
          "content_same": false
        },
        {
          "line": 3336,
          "old_api": "connGetInfo",
          "new_api": "getClientPeerId",
          "old_text": "connGetInfo(client->conn, conninfo, sizeof(conninfo))",
          "new_text": "getClientPeerId(client)",
          "old_line_content": "            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),",
          "new_line_content": "            \" addr=%s\", getClientPeerId(client),",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": "commandTimeSnapshot",
          "new_api": "connGetInfo",
          "old_text": "commandTimeSnapshot()",
          "new_text": "connGetInfo(client->conn, conninfo, sizeof(conninfo))",
          "old_line_content": "            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),",
          "new_line_content": "            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "listLength",
          "new_api": "dictSize",
          "old_text": "listLength(client->watched_keys)",
          "new_text": "dictSize(client->pubsubshard_channels)",
          "old_line_content": "            \" watch=%i\", (int)listLength(client->watched_keys),",
          "new_line_content": "            \" ssub=%i\", (int)dictSize(client->pubsubshard_channels),",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": "sdsavail",
          "new_api": "listLength",
          "old_text": "sdsavail(client->querybuf)",
          "new_text": "listLength(client->watched_keys)",
          "old_line_content": "            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,",
          "new_line_content": "            \" watch=%i\", (int)listLength(client->watched_keys),",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": "listRewind",
          "new_api": "listLength",
          "old_text": "listRewind(server.clients, &li)",
          "new_text": "listLength(server.clients)",
          "old_line_content": "    listRewind(server.clients, &li);",
          "new_line_content": "    sds o = sdsnewlen(SDS_NOINIT, 200 * listLength(server.clients));",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": "listNext",
          "new_api": "sdsclear",
          "old_text": "listNext(&li)",
          "new_text": "sdsclear(o)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    sdsclear(o);",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.clients, &li)",
          "old_line_content": "        client = listNodeValue(ln);",
          "new_line_content": "    listRewind(server.clients, &li);",
          "content_same": false
        },
        {
          "line": 3379,
          "old_api": "getClientType",
          "new_api": "listNext",
          "old_text": "getClientType(client)",
          "new_text": "listNext(&li)",
          "old_line_content": "        if (type != -1 && getClientType(client) != type) continue;",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "catClientInfoString",
          "new_api": "listNodeValue",
          "old_text": "catClientInfoString(o, client, hide_user_data)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        o = catClientInfoString(o, client, hide_user_data);",
          "new_line_content": "        client = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": "sdscatlen",
          "new_api": "getClientType",
          "old_text": "sdscatlen(o, \"\\n\", 1)",
          "new_text": "getClientType(client)",
          "old_line_content": "        o = sdscatlen(o, \"\\n\", 1);",
          "new_line_content": "        if (type != -1 && getClientType(client) != type) continue;",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "incrRefCount",
          "new_api": "decrRefCount",
          "old_text": "incrRefCount(name)",
          "new_text": "decrRefCount(c->name)",
          "old_line_content": "    incrRefCount(name);",
          "new_line_content": "    if (c->name) decrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": "addReplyError",
          "new_api": "clientSetName",
          "old_text": "addReplyError(c, err)",
          "new_text": "clientSetName(c, name, &err)",
          "old_line_content": "        addReplyError(c, err);",
          "new_line_content": "    int result = clientSetName(c, name, &err);",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": "incrRefCount",
          "new_api": "sdslen",
          "old_text": "incrRefCount(valob)",
          "new_text": "sdslen(val)",
          "old_line_content": "        incrRefCount(valob);",
          "new_line_content": "    if (sdslen(val)) {",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "addReplyLongLong",
          "new_api": "strcasecmp",
          "old_text": "addReplyLongLong(c, c->id)",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"id\")",
          "old_line_content": "        addReplyLongLong(c, c->id);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"id\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "sdsempty",
          "new_api": "strcasecmp",
          "old_text": "sdsempty()",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"info\")",
          "old_line_content": "        sds o = catClientInfoString(sdsempty(), c, 0);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"info\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": "sdslen",
          "new_api": "sdsempty",
          "old_text": "sdslen(o)",
          "new_text": "sdsempty()",
          "old_line_content": "        addReplyVerbatim(c, o, sdslen(o), \"txt\");",
          "new_line_content": "        sds o = catClientInfoString(sdsempty(), c, 0);",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "sdsfree",
          "new_api": "sdscatlen",
          "old_text": "sdsfree(o)",
          "new_text": "sdscatlen(o, \"\\n\", 1)",
          "old_line_content": "        sdsfree(o);",
          "new_line_content": "        o = sdscatlen(o, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": "strcasecmp",
          "new_api": "sdslen",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"list\")",
          "new_text": "sdslen(o)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"list\")) {",
          "new_line_content": "        addReplyVerbatim(c, o, sdslen(o), \"txt\");",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "addReplyErrorFormat",
          "new_api": "getClientTypeByName",
          "old_text": "addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[3]->ptr)",
          "new_text": "getClientTypeByName(c->argv[3]->ptr)",
          "old_line_content": "                addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[3]->ptr);",
          "new_line_content": "            type = getClientTypeByName(c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "sdsempty",
          "new_api": "strcasecmp",
          "old_text": "sdsempty()",
          "new_text": "strcasecmp(c->argv[2]->ptr, \"id\")",
          "old_line_content": "            o = sdsempty();",
          "new_line_content": "        } else if (c->argc > 3 && !strcasecmp(c->argv[2]->ptr, \"id\")) {",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "catClientInfoString",
          "new_api": "lookupClientByID",
          "old_text": "catClientInfoString(o, cl, 0)",
          "new_text": "lookupClientByID(cid)",
          "old_line_content": "                    o = catClientInfoString(o, cl, 0);",
          "new_line_content": "                client *cl = lookupClientByID(cid);",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "sdsfree",
          "new_api": "getAllClientsInfoString",
          "old_text": "sdsfree(o)",
          "new_text": "getAllClientsInfoString(type, 0)",
          "old_line_content": "        sdsfree(o);",
          "new_line_content": "        if (!o) o = getAllClientsInfoString(type, 0);",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": "strcasecmp",
          "new_api": "sdslen",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"reply\")",
          "new_text": "sdslen(o)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"reply\") && c->argc == 3) {",
          "new_line_content": "        addReplyVerbatim(c, o, sdslen(o), \"txt\");",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "removeClientFromMemUsageBucket",
          "new_api": "strcasecmp",
          "old_text": "removeClientFromMemUsageBucket(c, 0)",
          "new_text": "strcasecmp(c->argv[2]->ptr, \"on\")",
          "old_line_content": "            removeClientFromMemUsageBucket(c, 0);",
          "new_line_content": "        if (!strcasecmp(c->argv[2]->ptr, \"on\")) {",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "strcasecmp",
          "new_api": "removeClientFromMemUsageBucket",
          "old_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "new_text": "removeClientFromMemUsageBucket(c, 0)",
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "new_line_content": "            removeClientFromMemUsageBucket(c, 0);",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "updateClientMemUsageAndBucket",
          "new_api": "strcasecmp",
          "old_text": "updateClientMemUsageAndBucket(c)",
          "new_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "old_line_content": "            updateClientMemUsageAndBucket(c);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "addReplyErrorObject",
          "new_api": "addReply",
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "addReplyErrorFormat",
          "new_api": "getClientTypeByName",
          "old_text": "addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[i + 1]->ptr)",
          "new_text": "getClientTypeByName(c->argv[i + 1]->ptr)",
          "old_line_content": "                        addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[i + 1]->ptr);",
          "new_line_content": "                    type = getClientTypeByName(c->argv[i + 1]->ptr);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "addReplyErrorFormat",
          "new_api": "sdslen",
          "old_text": "addReplyErrorFormat(c, \"No such user '%s'\", (char *)c->argv[i + 1]->ptr)",
          "new_text": "sdslen(c->argv[i + 1]->ptr)",
          "old_line_content": "                        addReplyErrorFormat(c, \"No such user '%s'\", (char *)c->argv[i + 1]->ptr);",
          "new_line_content": "                    user = ACLGetUserByName(c->argv[i + 1]->ptr, sdslen(c->argv[i + 1]->ptr));",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.clients, &li)",
          "old_line_content": "            client *client = listNodeValue(ln);",
          "new_line_content": "        listRewind(server.clients, &li);",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": "getClientPeerId",
          "new_api": "listNext",
          "old_text": "getClientPeerId(client)",
          "new_text": "listNext(&li)",
          "old_line_content": "            if (addr && strcmp(getClientPeerId(client), addr) != 0) continue;",
          "new_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "getClientSockname",
          "new_api": "listNodeValue",
          "old_text": "getClientSockname(client)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            if (laddr && strcmp(getClientSockname(client), laddr) != 0) continue;",
          "new_line_content": "            client *client = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "getClientType",
          "new_api": "getClientPeerId",
          "old_text": "getClientType(client)",
          "new_text": "getClientPeerId(client)",
          "old_line_content": "            if (type != -1 && getClientType(client) != type) continue;",
          "new_line_content": "            if (addr && strcmp(getClientPeerId(client), addr) != 0) continue;",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "addReply",
          "new_api": "addReplyError",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "addReplyError(c, \"No such client\")",
          "old_line_content": "                addReply(c, shared.ok);",
          "new_line_content": "                addReplyError(c, \"No such client\");",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": "addReplyLongLong",
          "new_api": "addReply",
          "old_text": "addReplyLongLong(c, killed)",
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            addReplyLongLong(c, killed);",
          "new_line_content": "                addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": "unblockClientOnError",
          "new_api": "moduleBlockedClientMayTimeout",
          "old_text": "unblockClientOnError(target, \"-UNBLOCKED client unblocked via CLIENT UNBLOCK\")",
          "new_text": "moduleBlockedClientMayTimeout(target)",
          "old_line_content": "                unblockClientOnError(target, \"-UNBLOCKED client unblocked via CLIENT UNBLOCK\");",
          "new_line_content": "        if (target && target->flag.blocked && moduleBlockedClientMayTimeout(target)) {",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": "unblockClientOnTimeout",
          "new_api": "unblockClientOnError",
          "old_text": "unblockClientOnTimeout(target)",
          "new_text": "unblockClientOnError(target, \"-UNBLOCKED client unblocked via CLIENT UNBLOCK\")",
          "old_line_content": "                unblockClientOnTimeout(target);",
          "new_line_content": "                unblockClientOnError(target, \"-UNBLOCKED client unblocked via CLIENT UNBLOCK\");",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "addReply",
          "new_api": "unblockClientOnTimeout",
          "old_text": "addReply(c, shared.cone)",
          "new_text": "unblockClientOnTimeout(target)",
          "old_line_content": "            addReply(c, shared.cone);",
          "new_line_content": "                unblockClientOnTimeout(target);",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "strcasecmp",
          "new_api": "addReply",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"setname\")",
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"setname\") && c->argc == 3) {",
          "new_line_content": "            addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"setname\")",
          "old_line_content": "        if (clientSetNameOrReply(c, c->argv[2]) == C_OK) addReply(c, shared.ok);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"setname\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "addReplyNull",
          "new_api": "addReplyBulk",
          "old_text": "addReplyNull(c)",
          "new_text": "addReplyBulk(c, c->name)",
          "old_line_content": "            addReplyNull(c);",
          "new_line_content": "            addReplyBulk(c, c->name);",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": "unpauseActions",
          "new_api": "strcasecmp",
          "old_text": "unpauseActions(PAUSE_BY_CLIENT_COMMAND)",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"unpause\")",
          "old_line_content": "        unpauseActions(PAUSE_BY_CLIENT_COMMAND);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"unpause\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "strcasecmp",
          "new_api": "unpauseActions",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"pause\")",
          "new_text": "unpauseActions(PAUSE_BY_CLIENT_COMMAND)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"pause\") && (c->argc == 3 || c->argc == 4)) {",
          "new_line_content": "        unpauseActions(PAUSE_BY_CLIENT_COMMAND);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "addReply",
          "new_api": "getTimeoutFromObjectOrReply",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "getTimeoutFromObjectOrReply(c, c->argv[2], &end, UNIT_MILLISECONDS)",
          "old_line_content": "        addReply(c, shared.ok);",
          "new_line_content": "        if (getTimeoutFromObjectOrReply(c, c->argv[2], &end, UNIT_MILLISECONDS) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "strcasecmp",
          "new_api": "pauseClientsByClient",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"tracking\")",
          "new_text": "pauseClientsByClient(end, isPauseClientAll)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"tracking\") && c->argc >= 3) {",
          "new_line_content": "        pauseClientsByClient(end, isPauseClientAll);",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": "zfree",
          "new_api": "addReplyError",
          "old_text": "zfree(prefix)",
          "new_text": "addReplyError(c, \"A client can only redirect to a single \"\n                                     \"other client\")",
          "old_line_content": "                    zfree(prefix);",
          "new_line_content": "                    addReplyError(c, \"A client can only redirect to a single \"",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": "zfree",
          "new_api": "addReplyError",
          "old_text": "zfree(prefix)",
          "new_text": "addReplyError(c, \"The client ID you want redirect to \"\n                                     \"does not exist\")",
          "old_line_content": "                    zfree(prefix);",
          "new_line_content": "                    addReplyError(c, \"The client ID you want redirect to \"",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "zrealloc",
          "new_api": "strcasecmp",
          "old_text": "zrealloc(prefix, sizeof(robj *) * (numprefix + 1))",
          "new_text": "strcasecmp(c->argv[j]->ptr, \"prefix\")",
          "old_line_content": "                prefix = zrealloc(prefix, sizeof(robj *) * (numprefix + 1));",
          "new_line_content": "            } else if (!strcasecmp(c->argv[j]->ptr, \"prefix\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "disableTracking",
          "new_api": "enableTracking",
          "old_text": "disableTracking(c)",
          "new_text": "enableTracking(c, redir, options, prefix, numprefix)",
          "old_line_content": "            disableTracking(c);",
          "new_line_content": "            enableTracking(c, redir, options, prefix, numprefix);",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "zfree",
          "new_api": "disableTracking",
          "old_text": "zfree(prefix)",
          "new_text": "disableTracking(c)",
          "old_line_content": "            zfree(prefix);",
          "new_line_content": "            disableTracking(c);",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": "strcasecmp",
          "new_api": "zfree",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"caching\")",
          "new_text": "zfree(prefix)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"caching\") && c->argc >= 3) {",
          "new_line_content": "        zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "addReplyError",
          "new_api": "strcasecmp",
          "old_text": "addReplyError(c, \"CLIENT CACHING can be called only when the \"\n                             \"client is in tracking mode with OPTIN or \"\n                             \"OPTOUT mode enabled\")",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"caching\")",
          "old_line_content": "            addReplyError(c, \"CLIENT CACHING can be called only when the \"",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"caching\") && c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": "strcasecmp",
          "new_api": "addReplyLongLong",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"trackinginfo\")",
          "new_text": "addReplyLongLong(c, -1)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"trackinginfo\") && c->argc == 2) {",
          "new_line_content": "            addReplyLongLong(c, -1);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyDeferredLen",
          "old_text": "addReplyBulkCString(c, c->flag.tracking ? \"on\" : \"off\")",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "        addReplyBulkCString(c, c->flag.tracking ? \"on\" : \"off\");",
          "new_line_content": "        void *arraylen_ptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, c->client_tracking_redirection)",
          "new_text": "addReplyBulkCString(c, \"redirect\")",
          "old_line_content": "            addReplyLongLong(c, c->client_tracking_redirection);",
          "new_line_content": "        addReplyBulkCString(c, \"redirect\");",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": "raxSize",
          "new_api": "addReplyBulkCString",
          "old_text": "raxSize(c->client_tracking_prefixes)",
          "new_text": "addReplyBulkCString(c, \"prefixes\")",
          "old_line_content": "            addReplyArrayLen(c, raxSize(c->client_tracking_prefixes));",
          "new_line_content": "        addReplyBulkCString(c, \"prefixes\");",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri, c->client_tracking_prefixes)",
          "new_text": "raxSize(c->client_tracking_prefixes)",
          "old_line_content": "            raxStart(&ri, c->client_tracking_prefixes);",
          "new_line_content": "            addReplyArrayLen(c, raxSize(c->client_tracking_prefixes));",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri)",
          "new_text": "raxStart(&ri, c->client_tracking_prefixes)",
          "old_line_content": "            while (raxNext(&ri)) {",
          "new_line_content": "            raxStart(&ri, c->client_tracking_prefixes);",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "raxSeek",
          "old_text": "addReplyBulkCBuffer(c, ri.key, ri.key_len)",
          "new_text": "raxSeek(&ri, \"^\", NULL, 0)",
          "old_line_content": "                addReplyBulkCBuffer(c, ri.key, ri.key_len);",
          "new_line_content": "            raxSeek(&ri, \"^\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": "raxStop",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyBulkCBuffer(c, ri.key, ri.key_len)",
          "old_line_content": "            raxStop(&ri);",
          "new_line_content": "                addReplyBulkCBuffer(c, ri.key, ri.key_len);",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "addReplyArrayLen",
          "new_api": "raxStop",
          "old_text": "addReplyArrayLen(c, 0)",
          "new_text": "raxStop(&ri)",
          "old_line_content": "            addReplyArrayLen(c, 0);",
          "new_line_content": "            raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "strcasecmp",
          "new_api": "addReplyArrayLen",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"no-touch\")",
          "new_text": "addReplyArrayLen(c, 0)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"no-touch\")) {",
          "new_line_content": "            addReplyArrayLen(c, 0);",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "strcasecmp(c->argv[2]->ptr, \"on\")",
          "old_line_content": "            addReply(c, shared.ok);",
          "new_line_content": "        if (!strcasecmp(c->argv[2]->ptr, \"on\")) {",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "old_line_content": "            addReply(c, shared.ok);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": "addReplyErrorObject",
          "new_api": "addReply",
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": "strcasecmp",
          "new_api": "addReplyErrorObject",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"capa\")",
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"capa\") && c->argc >= 3) {",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "addReply",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": "redactClientCommandArgument",
          "new_api": "strcasecmp",
          "old_text": "redactClientCommandArgument(c, j + 2)",
          "new_text": "strcasecmp(opt, \"AUTH\")",
          "old_line_content": "            redactClientCommandArgument(c, j + 2);",
          "new_line_content": "        if (!strcasecmp(opt, \"AUTH\") && moreargs >= 2) {",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "addAuthErrReply",
          "new_api": "ACLAuthenticateUser",
          "old_text": "addAuthErrReply(c, err)",
          "new_text": "ACLAuthenticateUser(c, username, password, &err)",
          "old_line_content": "            addAuthErrReply(c, err);",
          "new_line_content": "        int auth_result = ACLAuthenticateUser(c, username, password, &err);",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": "decrRefCount",
          "new_api": "addAuthErrReply",
          "old_text": "decrRefCount(err)",
          "new_text": "addAuthErrReply(c, err)",
          "old_line_content": "        if (err) decrRefCount(err);",
          "new_line_content": "            addAuthErrReply(c, err);",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"server\")",
          "new_text": "addReplyMapLen(c, 6 + !server.sentinel_mode)",
          "old_line_content": "    addReplyBulkCString(c, \"server\");",
          "new_line_content": "    addReplyMapLen(c, 6 + !server.sentinel_mode);",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"id\")",
          "new_text": "addReplyLongLong(c, c->resp)",
          "old_line_content": "    addReplyBulkCString(c, \"id\");",
          "new_line_content": "    addReplyLongLong(c, c->resp);",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"mode\")",
          "new_text": "addReplyLongLong(c, c->id)",
          "old_line_content": "    addReplyBulkCString(c, \"mode\");",
          "new_line_content": "    addReplyLongLong(c, c->id);",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "llabs",
          "new_api": "time",
          "old_text": "llabs(now - logged_time)",
          "new_text": "time(NULL)",
          "old_line_content": "    if (llabs(now - logged_time) > 60) {",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": "incrRefCount",
          "new_api": "va_arg",
          "old_text": "incrRefCount(a)",
          "new_text": "va_arg(ap, robj *)",
          "old_line_content": "        incrRefCount(a);",
          "new_line_content": "        a = va_arg(ap, robj *);",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": "replaceClientCommandVector",
          "new_api": "incrRefCount",
          "old_text": "replaceClientCommandVector(c, argc, argv)",
          "new_text": "incrRefCount(a)",
          "old_line_content": "    replaceClientCommandVector(c, argc, argv);",
          "new_line_content": "        incrRefCount(a);",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": "serverAssertWithInfo",
          "new_api": "getStringObjectLen",
          "old_text": "serverAssertWithInfo(c, NULL, c->cmd != NULL)",
          "new_text": "getStringObjectLen(c->argv[j])",
          "old_line_content": "    serverAssertWithInfo(c, NULL, c->cmd != NULL);",
          "new_line_content": "        if (c->argv[j]) c->argv_len_sum += getStringObjectLen(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4273,
          "old_api": "incrRefCount",
          "new_api": "getStringObjectLen",
          "old_text": "incrRefCount(newval)",
          "new_text": "getStringObjectLen(newval)",
          "old_line_content": "    incrRefCount(newval);",
          "new_line_content": "    if (newval) c->argv_len_sum += getStringObjectLen(newval);",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(client)",
          "new_text": "serverLog(LL_WARNING, \"Client %s closed for overcoming of output buffer limits.\", client)",
          "old_line_content": "        sdsfree(client);",
          "new_line_content": "            serverLog(LL_WARNING, \"Client %s closed for overcoming of output buffer limits.\", client);",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.replicas, &li)",
          "old_line_content": "        client *replica = listNodeValue(ln);",
          "new_line_content": "    listRewind(server.replicas, &li);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "connHasWriteHandler",
          "new_api": "listNext",
          "old_text": "connHasWriteHandler(replica->conn)",
          "new_text": "listNext(&li)",
          "old_line_content": "        int can_receive_writes = connHasWriteHandler(replica->conn) || (replica->flag.pending_write);",
          "new_line_content": "    while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": "writeToClient",
          "new_api": "isReplicaReadyForReplData",
          "old_text": "writeToClient(replica)",
          "new_text": "isReplicaReadyForReplData(replica)",
          "old_line_content": "            writeToClient(replica);",
          "new_line_content": "        if (isReplicaReadyForReplData(replica) && !(replica->flag.close_asap) && can_receive_writes &&",
          "content_same": false
        },
        {
          "line": 4532,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.postponed_clients, &li)",
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "    listRewind(server.postponed_clients, &li);",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "unblockClient",
          "new_api": "listNext",
          "old_text": "unblockClient(c, 1)",
          "new_text": "listNext(&li)",
          "old_line_content": "        unblockClient(c, 1);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "listUnlinkNode",
          "new_api": "atomic_thread_fence",
          "old_text": "listUnlinkNode(server.clients_pending_io_read, ln)",
          "new_text": "atomic_thread_fence(memory_order_acquire)",
          "old_line_content": "        listUnlinkNode(server.clients_pending_io_read, ln);",
          "new_line_content": "        atomic_thread_fence(memory_order_acquire);",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "addCommandToBatchAndProcessIfFull",
          "new_api": "listLength",
          "old_text": "addCommandToBatchAndProcessIfFull(c)",
          "new_text": "listLength(server.clients_pending_io_read)",
          "old_line_content": "        int ret = addCommandToBatchAndProcessIfFull(c);",
          "new_line_content": "        size_t list_length_before_command_execute = listLength(server.clients_pending_io_read);",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "listLength",
          "new_api": "beforeNextClient",
          "old_text": "listLength(server.clients_pending_io_read)",
          "new_text": "beforeNextClient(c)",
          "old_line_content": "        if (list_length_before_command_execute != listLength(server.clients_pending_io_read)) {",
          "new_line_content": "            if (processPendingCommandAndInputBuffer(c) == C_OK) beforeNextClient(c);",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": "listFirst",
          "new_api": "listLength",
          "old_text": "listFirst(server.clients_pending_io_read)",
          "new_text": "listLength(server.clients_pending_io_read)",
          "old_line_content": "            next = listFirst(server.clients_pending_io_read);",
          "new_line_content": "        if (list_length_before_command_execute != listLength(server.clients_pending_io_read)) {",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": "freeClient",
          "new_api": "sdsempty",
          "old_text": "freeClient(c)",
          "new_text": "sdsempty()",
          "old_line_content": "            freeClient(c);",
          "new_line_content": "            sds ci = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(ci)",
          "new_text": "serverLog(LL_NOTICE, \"Evicting client: %s\", ci)",
          "old_line_content": "            sdsfree(ci);",
          "new_line_content": "            serverLog(LL_NOTICE, \"Evicting client: %s\", ci);",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": "getKeysFreeResult",
          "new_api": "sdslen",
          "old_text": "getKeysFreeResult(&result)",
          "new_text": "sdslen(first_key->ptr)",
          "old_line_content": "        getKeysFreeResult(&result);",
          "new_line_content": "            c->slot = keyHashSlot(first_key->ptr, sdslen(first_key->ptr));",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": "_writeToClient",
          "new_api": "serverAssert",
          "old_text": "_writeToClient(c)",
          "new_text": "serverAssert(c->io_write_state == CLIENT_PENDING_IO)",
          "old_line_content": "    _writeToClient(c);",
          "new_line_content": "    serverAssert(c->io_write_state == CLIENT_PENDING_IO);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4099,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(err)",
          "old_line_content": "         * In case of blocking module auth, we reply to the client/setname later upon unblocking. */",
          "new_line_content": "        if (err) decrRefCount(err);",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"-NOAUTH HELLO must be called with the client already \"\n                         \"authenticated, otherwise the HELLO <proto> AUTH <user> <pass> \"\n                         \"option can be used to authenticate the client and \"\n                         \"select the RESP protocol version at the same time\")",
          "old_line_content": "                         \"option can be used to authenticate the client and \"",
          "new_line_content": "        addReplyError(c, \"-NOAUTH HELLO must be called with the client already \"",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": null,
          "new_api": "clientSetName",
          "old_text": null,
          "new_text": "clientSetName(c, clientname, NULL)",
          "old_line_content": "    /* Let's switch to the specified RESP mode. */",
          "new_line_content": "    if (clientname) clientSetName(c, clientname, NULL);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"server\")",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c, \"server\");",
          "content_same": false
        },
        {
          "line": 4126,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"version\")",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c, \"version\");",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"proto\")",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c, \"proto\");",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"id\")",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c, \"id\");",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"standalone\")",
          "old_line_content": "    if (!server.sentinel_mode) {",
          "new_line_content": "        addReplyBulkCString(c, \"standalone\");",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"role\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, \"role\");",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, server.primary_host ? \"replica\" : \"master\")",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c, server.primary_host ? \"replica\" : \"master\");",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"modules\")",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulkCString(c, \"modules\");",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": null,
          "new_api": "addReplyLoadedModules",
          "old_text": null,
          "new_text": "addReplyLoadedModules(c)",
          "old_line_content": "",
          "new_line_content": "    addReplyLoadedModules(c);",
          "content_same": false
        },
        {
          "line": 4165,
          "old_api": null,
          "new_api": "llabs",
          "old_text": null,
          "new_text": "llabs(now - logged_time)",
          "old_line_content": "        int port;",
          "new_line_content": "    if (llabs(now - logged_time) > 60) {",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": null,
          "new_api": "connAddrPeerName",
          "old_text": null,
          "new_text": "connAddrPeerName(c->conn, ip, sizeof(ip), &port)",
          "old_line_content": "                                  \"commands to Redis. This is likely due to an attacker attempting to use Cross \"",
          "new_line_content": "        if (connAddrPeerName(c->conn, ip, sizeof(ip), &port) == -1) {",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: \"\n                                  \"commands to Redis. This is likely due to an attacker attempting to use Cross \"\n                                  \"Protocol Scripting to compromise your Redis instance. Connection aborted.\")",
          "old_line_content": "                                  \"Protocol Scripting to compromise your Redis instance. Connection aborted.\");",
          "new_line_content": "            serverLog(LL_WARNING, \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: \"",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                      \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to \"\n                      \"Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to \"\n                      \"compromise your Redis instance. Connection from %s:%d aborted.\",\n                      ip, port)",
          "old_line_content": "                      \"Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to \"",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": null,
          "new_api": "freeClientAsync",
          "old_text": null,
          "new_text": "freeClientAsync(c)",
          "old_line_content": "",
          "new_line_content": "    freeClientAsync(c);",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj *) * (c->argc))",
          "old_line_content": "        c->original_argv[j] = c->argv[j];",
          "new_line_content": "    c->original_argv = zmalloc(sizeof(robj *) * (c->argc));",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(c->argv[j])",
          "old_line_content": "}",
          "new_line_content": "        incrRefCount(c->argv[j]);",
          "content_same": false
        },
        {
          "line": 4201,
          "old_api": null,
          "new_api": "retainOriginalCommandVector",
          "old_text": null,
          "new_text": "retainOriginalCommandVector(c)",
          "old_line_content": "        /* This argument has already been redacted */",
          "new_line_content": "    retainOriginalCommandVector(c);",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->original_argv[argc])",
          "old_line_content": "}",
          "new_line_content": "    decrRefCount(c->original_argv[argc]);",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj *) * argc)",
          "old_line_content": "    for (j = 0; j < argc; j++) {",
          "new_line_content": "    argv = zmalloc(sizeof(robj *) * argc);",
          "content_same": false
        },
        {
          "line": 4219,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, argc)",
          "old_line_content": "        robj *a;",
          "new_line_content": "    va_start(ap, argc);",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": null,
          "new_api": "replaceClientCommandVector",
          "old_text": null,
          "new_text": "replaceClientCommandVector(c, argc, argv)",
          "old_line_content": "}",
          "new_line_content": "    replaceClientCommandVector(c, argc, argv);",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 4234,
          "old_api": null,
          "new_api": "retainOriginalCommandVector",
          "old_text": null,
          "new_text": "retainOriginalCommandVector(c)",
          "old_line_content": "    c->argv = argv;",
          "new_line_content": "    retainOriginalCommandVector(c);",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "freeClientArgv",
          "old_text": null,
          "new_text": "freeClientArgv(c)",
          "old_line_content": "    c->argc = argc;",
          "new_line_content": "    freeClientArgv(c);",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "lookupCommandOrOriginal",
          "old_text": null,
          "new_text": "lookupCommandOrOriginal(c->argv, c->argc)",
          "old_line_content": "}",
          "new_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv, c->argc);",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c, NULL, c->cmd != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssertWithInfo(c, NULL, c->cmd != NULL);",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": null,
          "new_api": "retainOriginalCommandVector",
          "old_text": null,
          "new_text": "retainOriginalCommandVector(c)",
          "old_line_content": "    /* We need to handle both extending beyond argc (just update it and",
          "new_line_content": "    retainOriginalCommandVector(c);",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->argv, sizeof(robj *) * (i + 1))",
          "old_line_content": "        }",
          "new_line_content": "            c->argv = zrealloc(c->argv, sizeof(robj *) * (i + 1));",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": null,
          "new_api": "getStringObjectLen",
          "old_text": null,
          "new_text": "getStringObjectLen(oldval)",
          "old_line_content": "    c->argv[i] = newval;",
          "new_line_content": "    if (oldval) c->argv_len_sum -= getStringObjectLen(oldval);",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(newval)",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(newval);",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(oldval)",
          "old_line_content": "    /* If this is the command name make sure to fix c->cmd. */",
          "new_line_content": "    if (oldval) decrRefCount(oldval);",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": null,
          "new_api": "lookupCommandOrOriginal",
          "old_text": null,
          "new_text": "lookupCommandOrOriginal(c->argv, c->argc)",
          "old_line_content": "    }",
          "new_line_content": "        c->cmd = lookupCommandOrOriginal(c->argv, c->argc);",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c, NULL, c->cmd != NULL)",
          "old_line_content": "}",
          "new_line_content": "        serverAssertWithInfo(c, NULL, c->cmd != NULL);",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": null,
          "new_api": "getClientType",
          "old_text": null,
          "new_text": "getClientType(c)",
          "old_line_content": "        size_t repl_node_num = 0;",
          "new_line_content": "    if (getClientType(c) == CLIENT_TYPE_REPLICA) {",
          "content_same": false
        },
        {
          "line": 4297,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(server.repl_buffer_blocks)",
          "old_line_content": "            repl_buf_size = last->repl_offset + last->size - cur->repl_offset;",
          "new_line_content": "            replBufBlock *last = listNodeValue(listLast(server.repl_buffer_blocks));",
          "content_same": false
        },
        {
          "line": 4298,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(c->ref_repl_buf_node)",
          "old_line_content": "            repl_node_num = last->id - cur->id + 1;",
          "new_line_content": "            replBufBlock *cur = listNodeValue(c->ref_repl_buf_node);",
          "content_same": false
        },
        {
          "line": 4305,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "}",
          "new_line_content": "        return c->reply_bytes + (list_item_size * listLength(c->reply));",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(c)",
          "old_line_content": "    if (output_buffer_mem_usage != NULL) *output_buffer_mem_usage = mem;",
          "new_line_content": "    size_t mem = getClientOutputBufferMemoryUsage(c);",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "    mem += c->buf_usable_size;",
          "new_line_content": "    mem += c->querybuf ? sdsAllocSize(c->querybuf) : 0;",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "zmalloc_size",
          "old_text": null,
          "new_text": "zmalloc_size(c)",
          "old_line_content": "    /* For efficiency (less work keeping track of the argv memory), it doesn't include the used memory",
          "new_line_content": "    mem += zmalloc_size(c);",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "multiStateMemOverhead",
          "old_text": null,
          "new_text": "multiStateMemOverhead(c)",
          "old_line_content": "    /* Add memory overhead of pubsub channels and patterns. Note: this is just the overhead of the robj pointers",
          "new_line_content": "    mem += multiStateMemOverhead(c);",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": null,
          "new_api": "pubsubMemOverhead",
          "old_text": null,
          "new_text": "pubsubMemOverhead(c)",
          "old_line_content": "    /* Add memory overhead of the tracking prefixes, this is an underestimation so we don't need to traverse the entire",
          "new_line_content": "    mem += pubsubMemOverhead(c);",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(name, \"primary\")",
          "old_line_content": "    else",
          "new_line_content": "    else if (!strcasecmp(name, \"master\") || !strcasecmp(name, \"primary\"))",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(c)",
          "old_line_content": "    class = getClientType(c);",
          "new_line_content": "    unsigned long used_mem = getClientOutputBufferMemoryUsage(c);",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(c->reply_bytes < SIZE_MAX - (1024 * 64))",
          "old_line_content": "     * (they use the global repl buffers). */",
          "new_line_content": "    serverAssert(c->reply_bytes < SIZE_MAX - (1024 * 64));",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": null,
          "new_api": "getClientType",
          "old_text": null,
          "new_text": "getClientType(c)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if ((c->reply_bytes == 0 && getClientType(c) != CLIENT_TYPE_REPLICA) ||",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "checkClientOutputBufferLimits",
          "old_text": null,
          "new_text": "checkClientOutputBufferLimits(c)",
          "old_line_content": "        /* Remove RDB connection protection on COB overrun */",
          "new_line_content": "    if (checkClientOutputBufferLimits(c)) {",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": null,
          "new_api": "freeClientAsync",
          "old_text": null,
          "new_text": "freeClientAsync(c)",
          "old_line_content": "                      client);",
          "new_line_content": "            freeClientAsync(c);",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\",\n                      client)",
          "old_line_content": "        } else {",
          "new_line_content": "            serverLog(LL_WARNING, \"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\",",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "        }",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(client)",
          "old_line_content": "        return 1;",
          "new_line_content": "        sdsfree(client);",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "",
          "new_line_content": "        client *replica = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": null,
          "new_api": "connHasWriteHandler",
          "old_text": null,
          "new_text": "connHasWriteHandler(replica->conn)",
          "old_line_content": "        /* We don't want to send the pending data to the replica in a few",
          "new_line_content": "        int can_receive_writes = connHasWriteHandler(replica->conn) || (replica->flag.pending_write);",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": null,
          "new_api": "clientHasPendingReplies",
          "old_text": null,
          "new_text": "clientHasPendingReplies(replica)",
          "old_line_content": "        }",
          "new_line_content": "            !replica->repl_start_cmd_stream_on_ack && clientHasPendingReplies(replica)) {",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": null,
          "new_api": "writeToClient",
          "old_text": null,
          "new_text": "writeToClient(replica)",
          "old_line_content": "    }",
          "new_line_content": "            writeToClient(replica);",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "unblockPostponedClients",
          "old_text": null,
          "new_text": "unblockPostponedClients()",
          "old_line_content": "}",
          "new_line_content": "        unblockPostponedClients();",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    }",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4535,
          "old_api": null,
          "new_api": "unblockClient",
          "old_text": null,
          "new_text": "unblockClient(c, 1)",
          "old_line_content": "}",
          "new_line_content": "        unblockClient(c, 1);",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": null,
          "new_api": "pauseActions",
          "old_text": null,
          "new_text": "pauseActions(PAUSE_BY_CLIENT_COMMAND, endTime, actions)",
          "old_line_content": "",
          "new_line_content": "    pauseActions(PAUSE_BY_CLIENT_COMMAND, endTime, actions);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "updatePausedActions",
          "old_text": null,
          "new_text": "updatePausedActions()",
          "old_line_content": "    /* We allow write commands that were queued",
          "new_line_content": "    updatePausedActions();",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "updatePausedActions",
          "old_text": null,
          "new_text": "updatePausedActions()",
          "old_line_content": "",
          "new_line_content": "    updatePausedActions();",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": null,
          "new_api": "updatePausedActions",
          "old_text": null,
          "new_text": "updatePausedActions()",
          "old_line_content": "}",
          "new_line_content": "    updatePausedActions();",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": null,
          "new_api": "updateCachedTime",
          "old_text": null,
          "new_text": "updateCachedTime(0)",
          "old_line_content": "    /* For the few commands that are allowed during busy scripts, we rather",
          "new_line_content": "    updateCachedTime(0);",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": null,
          "new_api": "aeProcessEvents",
          "old_text": null,
          "new_text": "aeProcessEvents(server.el, AE_FILE_EVENTS | AE_DONT_WAIT | AE_CALL_BEFORE_SLEEP | AE_CALL_AFTER_SLEEP)",
          "old_line_content": "         * incremented by callbacks called by the event loop handlers. */",
          "new_line_content": "            aeProcessEvents(server.el, AE_FILE_EVENTS | AE_DONT_WAIT | AE_CALL_BEFORE_SLEEP | AE_CALL_AFTER_SLEEP);",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "whileBlockedCron",
          "old_text": null,
          "new_text": "whileBlockedCron()",
          "old_line_content": "    ProcessingEventsWhileBlocked--;",
          "new_line_content": "    whileBlockedCron();",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(ProcessingEventsWhileBlocked >= 0)",
          "old_line_content": "    server.cmd_time_snapshot = prev_cmd_time_snapshot;",
          "new_line_content": "    serverAssert(ProcessingEventsWhileBlocked >= 0);",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": null,
          "new_api": "trySendReadToIOThreads",
          "old_text": null,
          "new_text": "trySendReadToIOThreads(c)",
          "old_line_content": "",
          "new_line_content": "    return (trySendReadToIOThreads(c) == C_OK);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": null,
          "new_api": "processClientsCommandsBatch",
          "old_text": null,
          "new_text": "processClientsCommandsBatch()",
          "old_line_content": "",
          "new_line_content": "        processClientsCommandsBatch();",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients_pending_io_read)",
          "old_line_content": "    listNode *ln;",
          "new_line_content": "    if (listLength(server.clients_pending_io_read) == 0) return 0;",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.clients_pending_io_read)",
          "old_line_content": "        ln = next;",
          "new_line_content": "    listNode *next = listFirst(server.clients_pending_io_read);",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "listNextNode",
          "old_text": null,
          "new_text": "listNextNode(ln)",
          "old_line_content": "",
          "new_line_content": "        next = listNextNode(ln);",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        /* Client is still waiting for a pending I/O - skip it */",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": null,
          "new_api": "processClientIOWriteDone",
          "old_text": null,
          "new_text": "processClientIOWriteDone(c, allow_async_writes)",
          "old_line_content": "        /* memory barrier acquire to get the updated client state */",
          "new_line_content": "            processClientIOWriteDone(c, allow_async_writes);",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": null,
          "new_api": "listUnlinkNode",
          "old_text": null,
          "new_text": "listUnlinkNode(server.clients_pending_io_read, ln)",
          "old_line_content": "        c->io_read_state = CLIENT_IDLE;",
          "new_line_content": "        listUnlinkNode(server.clients_pending_io_read, ln);",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": null,
          "new_api": "connSetPostponeUpdateState",
          "old_text": null,
          "new_text": "connSetPostponeUpdateState(c->conn, 0)",
          "old_line_content": "",
          "new_line_content": "        connSetPostponeUpdateState(c->conn, 0);",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": null,
          "new_api": "connUpdateState",
          "old_text": null,
          "new_text": "connUpdateState(c->conn)",
          "old_line_content": "        /* On read error - stop here. */",
          "new_line_content": "        connUpdateState(c->conn);",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": null,
          "new_api": "handleReadResult",
          "old_text": null,
          "new_text": "handleReadResult(c)",
          "old_line_content": "        }",
          "new_line_content": "        if (handleReadResult(c) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "handleParseResults",
          "old_text": null,
          "new_text": "handleParseResults(c)",
          "old_line_content": "            if (res == PARSE_ERR) {",
          "new_line_content": "            parseResult res = handleParseResults(c);",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(argv[j], 1)",
          "old_line_content": "        c->argc++;",
          "new_line_content": "        argv[j] = sdsRemoveFreeSpace(argv[j], 1);",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": null,
          "new_api": "beforeNextClient",
          "old_text": null,
          "new_text": "beforeNextClient(c)",
          "old_line_content": "            }",
          "new_line_content": "                beforeNextClient(c);",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "    /* Per-slot network bytes-in calculation.",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "addCommandToBatchAndProcessIfFull",
          "old_text": null,
          "new_text": "addCommandToBatchAndProcessIfFull(c)",
          "old_line_content": "        if (ret == C_ERR) {",
          "new_line_content": "        int ret = addCommandToBatchAndProcessIfFull(c);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.clients_pending_io_read)",
          "old_line_content": "    }",
          "new_line_content": "            next = listFirst(server.clients_pending_io_read);",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": null,
          "new_api": "processClientsCommandsBatch",
          "old_text": null,
          "new_text": "processClientsCommandsBatch()",
          "old_line_content": "    return processed;",
          "new_line_content": "    processClientsCommandsBatch();",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        /* Sample some protocol to given an idea about what was inside. */",
          "new_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        } else if (c->querybuf) {",
          "new_line_content": "        if (c->querybuf && sdslen(c->querybuf) - c->qb_pos < PROTO_DUMP_LEN) {",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        }",
          "new_line_content": "                     PROTO_DUMP_LEN / 2, c->querybuf + c->qb_pos, sdslen(c->querybuf) - c->qb_pos - PROTO_DUMP_LEN,",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "                     PROTO_DUMP_LEN / 2, c->querybuf + sdslen(c->querybuf) - PROTO_DUMP_LEN / 2);",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": null,
          "new_api": "isprint",
          "old_text": null,
          "new_text": "isprint(*p)",
          "old_line_content": "        }",
          "new_line_content": "            if (!isprint(*p)) *p = '.';",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(loglevel, \"Protocol error (%s) from client: %s. %s\", errstr, client, buf)",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(loglevel, \"Protocol error (%s) from client: %s. %s\", errstr, client, buf);",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(client)",
          "old_line_content": "    c->flag.close_after_reply = 1;",
          "new_line_content": "        sdsfree(client);",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter)",
          "old_line_content": "    if (client_eviction_limit == 0) return;",
          "new_line_content": "    listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter);",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": null,
          "new_api": "getClientEvictionLimit",
          "old_text": null,
          "new_text": "getClientEvictionLimit()",
          "old_line_content": "    while (server.stat_clients_type_memory[CLIENT_TYPE_NORMAL] + server.stat_clients_type_memory[CLIENT_TYPE_PUBSUB] >=",
          "new_line_content": "    size_t client_eviction_limit = getClientEvictionLimit();",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&bucket_iter)",
          "old_line_content": "            client *c = ln->value;",
          "new_line_content": "        listNode *ln = listNext(&bucket_iter);",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "            server.stat_evictedclients++;",
          "new_line_content": "            freeClient(c);",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(ci)",
          "old_line_content": "        } else {",
          "new_line_content": "            sdsfree(ci);",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Over client maxmemory after evicting all evictable clients\")",
          "old_line_content": "            }",
          "new_line_content": "                serverLog(LL_WARNING, \"Over client maxmemory after evicting all evictable clients\");",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c, NULL, c->argc == 0)",
          "old_line_content": "        /* Multi bulk length cannot be read without a \\r\\n */",
          "new_line_content": "        serverAssertWithInfo(c, NULL, c->argc == 0);",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter)",
          "old_line_content": "    }",
          "new_line_content": "            listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter);",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            }",
          "new_line_content": "            if (sdslen(c->querybuf) - c->qb_pos > PROTO_INLINE_MAX_SIZE) {",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(c->io_read_state == CLIENT_PENDING_IO)",
          "old_line_content": "    /* Read */",
          "new_line_content": "    serverAssert(c->io_read_state == CLIENT_PENDING_IO);",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        /* We know for sure there is a whole line since newline != NULL,",
          "new_line_content": "        if (newline - (c->querybuf + c->qb_pos) > (ssize_t)(sdslen(c->querybuf) - c->qb_pos - 2)) return;",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": null,
          "new_api": "readToQueryBuf",
          "old_text": null,
          "new_text": "readToQueryBuf(c)",
          "old_line_content": "    /* Check for read errors. */",
          "new_line_content": "    readToQueryBuf(c);",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(c->querybuf + 1 + c->qb_pos, multibulklen_slen, &ll)",
          "old_line_content": "            c->read_flags |= READ_FLAGS_ERROR_INVALID_MULTIBULK_LEN;",
          "new_line_content": "        ok = string2ll(c->querybuf + 1 + c->qb_pos, multibulklen_slen, &ll);",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": null,
          "new_api": "parseCommand",
          "old_text": null,
          "new_text": "parseCommand(c)",
          "old_line_content": "    /* Parsing was not completed - let the main-thread handle it. */",
          "new_line_content": "    parseCommand(c);",
          "content_same": false
        },
        {
          "line": 2786,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(c->multibulklen, 1024)",
          "old_line_content": "        c->argv_len_sum = 0;",
          "new_line_content": "        c->argv_len = min(c->multibulklen, 1024);",
          "content_same": false
        },
        {
          "line": 2787,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj *) * c->argv_len)",
          "old_line_content": "",
          "new_line_content": "        c->argv = zmalloc(sizeof(robj *) * c->argv_len);",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv, c->argc)",
          "old_line_content": "        /* The command was found, but the arity is invalid.",
          "new_line_content": "    c->io_parsed_cmd = lookupCommand(c->argv, c->argc);",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": null,
          "new_api": "commandCheckArity",
          "old_text": null,
          "new_text": "commandCheckArity(c->io_parsed_cmd, c->argc, NULL)",
          "old_line_content": "         * In this case, we reset the parsed_cmd and will let the main thread handle it. */",
          "new_line_content": "    if (c->io_parsed_cmd && commandCheckArity(c->io_parsed_cmd, c->argc, NULL) == 0) {",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "initGetKeysResult",
          "old_text": null,
          "new_text": "initGetKeysResult(&result)",
          "old_line_content": "        if (numkeys) {",
          "new_line_content": "        initGetKeysResult(&result);",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": null,
          "new_api": "getKeysFromCommand",
          "old_text": null,
          "new_text": "getKeysFromCommand(c->io_parsed_cmd, c->argv, c->argc, &result)",
          "old_line_content": "            robj *first_key = c->argv[result.keys[0].pos];",
          "new_line_content": "        int numkeys = getKeysFromCommand(c->io_parsed_cmd, c->argv, c->argc, &result);",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": null,
          "new_api": "getKeysFreeResult",
          "old_text": null,
          "new_text": "getKeysFreeResult(&result)",
          "old_line_content": "",
          "new_line_content": "        getKeysFreeResult(&result);",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": null,
          "new_api": "trimClientQueryBuffer",
          "old_text": null,
          "new_text": "trimClientQueryBuffer(c)",
          "old_line_content": "    c->io_read_state = CLIENT_COMPLETED_IO;",
          "new_line_content": "    trimClientQueryBuffer(c);",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": null,
          "new_api": "atomic_thread_fence",
          "old_text": null,
          "new_text": "atomic_thread_fence(memory_order_release)",
          "old_line_content": "}",
          "new_line_content": "    atomic_thread_fence(memory_order_release);",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": null,
          "new_api": "_writeToClient",
          "old_text": null,
          "new_text": "_writeToClient(c)",
          "old_line_content": "    c->io_write_state = CLIENT_COMPLETED_IO;",
          "new_line_content": "    _writeToClient(c);",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": null,
          "new_api": "atomic_thread_fence",
          "old_text": null,
          "new_text": "atomic_thread_fence(memory_order_release)",
          "old_line_content": "}",
          "new_line_content": "    atomic_thread_fence(memory_order_release);",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c, NULL, c->multibulklen > 0)",
          "old_line_content": "        /* Read bulk length if unknown */",
          "new_line_content": "    serverAssertWithInfo(c, NULL, c->multibulklen > 0);",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                    return;",
          "new_line_content": "                if (sdslen(c->querybuf) - c->qb_pos > PROTO_INLINE_MAX_SIZE) {",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            if (c->querybuf[c->qb_pos] != '$') {",
          "new_line_content": "            if (newline - (c->querybuf + c->qb_pos) > (ssize_t)(sdslen(c->querybuf) - c->qb_pos - 2)) break;",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(c->querybuf + c->qb_pos + 1, bulklen_slen, &ll)",
          "old_line_content": "                c->read_flags |= READ_FLAGS_ERROR_MBULK_INVALID_BULK_LEN;",
          "new_line_content": "            ok = string2ll(c->querybuf + c->qb_pos + 1, bulklen_slen, &ll);",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                        /* Let the client take the ownership of the shared buffer. */",
          "new_line_content": "                if (sdslen(c->querybuf) - c->qb_pos <= (size_t)ll + 2) {",
          "content_same": false
        },
        {
          "line": 2875,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(c->querybuf, c->qb_pos, -1)",
          "old_line_content": "                    /* Hint the sds library about the amount of bytes this string is",
          "new_line_content": "                    sdsrange(c->querybuf, c->qb_pos, -1);",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                     * allocated because we know what we need, make sure it'll not be shrunk before used. */",
          "new_line_content": "                    c->querybuf = sdsMakeRoomForNonGreedy(c->querybuf, ll + 2 - sdslen(c->querybuf));",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            break;",
          "new_line_content": "        if (sdslen(c->querybuf) - c->qb_pos < (size_t)(c->bulklen + 2)) {",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(c->argv_len < INT_MAX / 2 ? c->argv_len * 2 : INT_MAX, c->argc + c->multibulklen)",
          "old_line_content": "            }",
          "new_line_content": "                c->argv_len = min(c->argv_len < INT_MAX / 2 ? c->argv_len * 2 : INT_MAX, c->argc + c->multibulklen);",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(c->argv, sizeof(robj *) * c->argv_len)",
          "old_line_content": "",
          "new_line_content": "                c->argv = zrealloc(c->argv, sizeof(robj *) * c->argv_len);",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "                c->argv_len_sum += c->bulklen;",
          "new_line_content": "                sdslen(c->querybuf) == (size_t)(c->bulklen + 2)) {",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "sdsIncrLen",
          "old_text": null,
          "new_text": "sdsIncrLen(c->querybuf, -2)",
          "old_line_content": "                 * likely... */",
          "new_line_content": "                sdsIncrLen(c->querybuf, -2); /* remove CRLF */",
          "content_same": false
        },
        {
          "line": 2912,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(SDS_NOINIT, c->bulklen + 2)",
          "old_line_content": "            } else {",
          "new_line_content": "                c->querybuf = sdsnewlen(SDS_NOINIT, c->bulklen + 2);",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(c->querybuf + c->qb_pos, c->bulklen)",
          "old_line_content": "                c->qb_pos += c->bulklen + 2;",
          "new_line_content": "                c->argv[c->argc++] = createStringObject(c->querybuf + c->qb_pos, c->bulklen);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "clusterSlotStatsAddNetworkBytesInForUserClient",
          "old_text": null,
          "new_text": "clusterSlotStatsAddNetworkBytesInForUserClient(c)",
          "old_line_content": "",
          "new_line_content": "    clusterSlotStatsAddNetworkBytesInForUserClient(c);",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": null,
          "new_api": "resetClient",
          "old_text": null,
          "new_text": "resetClient(c)",
          "old_line_content": "    long long prev_offset = c->reploff;",
          "new_line_content": "    resetClient(c);",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "        c->reploff = c->read_reploff - sdslen(c->querybuf) + c->qb_pos;",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": null,
          "new_api": "replicationFeedStreamFromPrimaryStream",
          "old_text": null,
          "new_text": "replicationFeedStreamFromPrimaryStream(c->querybuf + c->repl_applied, applied)",
          "old_line_content": "        }",
          "new_line_content": "            replicationFeedStreamFromPrimaryStream(c->querybuf + c->repl_applied, applied);",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": null,
          "new_api": "processCommand",
          "old_text": null,
          "new_text": "processCommand(c)",
          "old_line_content": "        /* Update the client's memory to include output buffer growth following the",
          "new_line_content": "    if (processCommand(c) == C_OK) {",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": null,
          "new_api": "commandProcessed",
          "old_text": null,
          "new_text": "commandProcessed(c)",
          "old_line_content": "         * processed command. */",
          "new_line_content": "        commandProcessed(c);",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": null,
          "new_api": "updateClientMemUsageAndBucket",
          "old_text": null,
          "new_text": "updateClientMemUsageAndBucket(c)",
          "old_line_content": "",
          "new_line_content": "        if (c->conn) updateClientMemUsageAndBucket(c);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "processCommandAndResetClient",
          "old_text": null,
          "new_text": "processCommandAndResetClient(c)",
          "old_line_content": "        }",
          "new_line_content": "        if (processCommandAndResetClient(c) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    }",
          "new_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "        return processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 3054,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown request type\")",
          "old_line_content": "}",
          "new_line_content": "        serverPanic(\"Unknown request type\");",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": null,
          "new_api": "isInsideYieldingLongCommand",
          "old_text": null,
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "    /* CLIENT_CLOSE_AFTER_REPLY closes the connection once the reply is",
          "new_line_content": "    if (isInsideYieldingLongCommand() && c->flag.primary) return 0;",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            break;",
          "new_line_content": "    while (c->querybuf && c->qb_pos < sdslen(c->querybuf)) {",
          "content_same": false
        },
        {
          "line": 3087,
          "old_api": null,
          "new_api": "canParseCommand",
          "old_text": null,
          "new_text": "canParseCommand(c)",
          "old_line_content": "        }",
          "new_line_content": "        if (!canParseCommand(c)) {",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": null,
          "new_api": "handleParseResults",
          "old_text": null,
          "new_text": "handleParseResults(c)",
          "old_line_content": "        }",
          "new_line_content": "        if (handleParseResults(c) != PARSE_OK) {",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "resetSharedQueryBuf",
          "old_text": null,
          "new_text": "resetSharedQueryBuf(c)",
          "old_line_content": "",
          "new_line_content": "            resetSharedQueryBuf(c);",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "processCommandAndResetClient",
          "old_text": null,
          "new_text": "processCommandAndResetClient(c)",
          "old_line_content": "             * loop and trimming the client buffer later. So we return",
          "new_line_content": "        if (processCommandAndResetClient(c) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "     * that is large enough, try to maximize the probability that the query",
          "new_line_content": "    qblen = c->querybuf ? sdslen(c->querybuf) : 0;",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    }",
          "new_line_content": "        c->querybuf = big_arg ? sdsempty() : thread_shared_qb;",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "",
          "new_line_content": "        qblen = sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": null,
          "new_api": "sdsalloc",
          "old_text": null,
          "new_text": "sdsalloc(c->querybuf)",
          "old_line_content": "         * into the query buffer, so we don't need to pre-allocate more than we",
          "new_line_content": "        (big_arg || sdsalloc(c->querybuf) < PROTO_IOBUF_LEN)) {",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "sdsMakeRoomForNonGreedy",
          "old_text": null,
          "new_text": "sdsMakeRoomForNonGreedy(c->querybuf, readlen)",
          "old_line_content": "         * allocated because we know what we need, make sure it'll not be shrunk before used. */",
          "new_line_content": "        c->querybuf = sdsMakeRoomForNonGreedy(c->querybuf, readlen);",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": null,
          "new_api": "sdsMakeRoomFor",
          "old_text": null,
          "new_text": "sdsMakeRoomFor(c->querybuf, readlen)",
          "old_line_content": "        /* Read as much as possible from the socket to save read(2) system calls. */",
          "new_line_content": "        c->querybuf = sdsMakeRoomFor(c->querybuf, readlen);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": null,
          "new_api": "connRead",
          "old_text": null,
          "new_text": "connRead(c->conn, c->querybuf + qblen, readlen)",
          "old_line_content": "        return;",
          "new_line_content": "    c->nread = connRead(c->conn, c->querybuf + qblen, readlen);",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": null,
          "new_api": "sdsIncrLen",
          "old_text": null,
          "new_text": "sdsIncrLen(c->querybuf, c->nread)",
          "old_line_content": "    if (c->querybuf_peak < qblen) c->querybuf_peak = qblen;",
          "new_line_content": "    sdsIncrLen(c->querybuf, c->nread);",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "    if (!is_primary) {",
          "new_line_content": "    qblen = sdslen(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            (qb_memory > 1024 * 1024 && (c->read_flags & READ_FLAGS_AUTH_REQUIRED))) {",
          "new_line_content": "        size_t qb_memory = sdslen(c->querybuf) + c->mstate.argv_len_sums;",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": null,
          "new_api": "postponeClientRead",
          "old_text": null,
          "new_text": "postponeClientRead(c)",
          "old_line_content": "    if (c->io_write_state != CLIENT_IDLE || c->io_read_state != CLIENT_IDLE) return;",
          "new_line_content": "    if (postponeClientRead(c)) return;",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": null,
          "new_api": "handleReadResult",
          "old_text": null,
          "new_text": "handleReadResult(c)",
          "old_line_content": "    }",
          "new_line_content": "    if (handleReadResult(c) == C_OK) {",
          "content_same": false
        },
        {
          "line": 3220,
          "old_api": null,
          "new_api": "beforeNextClient",
          "old_text": null,
          "new_text": "beforeNextClient(c)",
          "old_line_content": "",
          "new_line_content": "    beforeNextClient(c);",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(addr, addr_len, \"%s:0\", server.unixsocket)",
          "old_line_content": "        /* TCP client. */",
          "new_line_content": "        snprintf(addr, addr_len, \"%s:0\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": null,
          "new_api": "connFormatAddr",
          "old_text": null,
          "new_text": "connFormatAddr(client->conn, addr, addr_len, remote)",
          "old_line_content": "}",
          "new_line_content": "        connFormatAddr(client->conn, addr, addr_len, remote);",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": null,
          "new_api": "genClientAddrString",
          "old_text": null,
          "new_text": "genClientAddrString(c, peerid, sizeof(peerid), 1)",
          "old_line_content": "    }",
          "new_line_content": "        genClientAddrString(c, peerid, sizeof(peerid), 1);",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(peerid)",
          "old_line_content": "    return c->peerid;",
          "new_line_content": "        c->peerid = sdsnew(peerid);",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": null,
          "new_api": "genClientAddrString",
          "old_text": null,
          "new_text": "genClientAddrString(c, sockname, sizeof(sockname), 0)",
          "old_line_content": "    }",
          "new_line_content": "        genClientAddrString(c, sockname, sizeof(sockname), 0);",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(sockname)",
          "old_line_content": "    return c->sockname;",
          "new_line_content": "        c->sockname = sdsnew(sockname);",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": null,
          "new_api": "getClientPeerId",
          "old_text": null,
          "new_text": "getClientPeerId(c)",
          "old_line_content": "",
          "new_line_content": "    return getClientPeerId(c)[0] == '[';",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": null,
          "new_api": "waitForClientIO",
          "old_text": null,
          "new_text": "waitForClientIO(client)",
          "old_line_content": "",
          "new_line_content": "    if (!server.crashed) waitForClientIO(client);",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": null,
          "new_api": "connHasReadHandler",
          "old_text": null,
          "new_text": "connHasReadHandler(client->conn)",
          "old_line_content": "    }",
          "new_line_content": "        if (connHasReadHandler(client->conn)) *p++ = 'r';",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": null,
          "new_api": "connHasWriteHandler",
          "old_text": null,
          "new_text": "connHasWriteHandler(client->conn)",
          "old_line_content": "    *p = '\\0';",
          "new_line_content": "        if (connHasWriteHandler(client->conn)) *p++ = 'w';",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": null,
          "new_api": "getClientMemoryUsage",
          "old_text": null,
          "new_text": "getClientMemoryUsage(client, &obufmem)",
          "old_line_content": "    size_t used_blocks_of_repl_buf = 0;",
          "new_line_content": "    size_t obufmem, total_mem = getClientMemoryUsage(client, &obufmem);",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": null,
          "new_api": "listLast",
          "old_text": null,
          "new_text": "listLast(server.repl_buffer_blocks)",
          "old_line_content": "        used_blocks_of_repl_buf = last->id - cur->id + 1;",
          "new_line_content": "        replBufBlock *last = listNodeValue(listLast(server.repl_buffer_blocks));",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(client->ref_repl_buf_node)",
          "old_line_content": "    }",
          "new_line_content": "        replBufBlock *cur = listNodeValue(client->ref_repl_buf_node);",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": null,
          "new_api": "getClientSockname",
          "old_text": null,
          "new_text": "getClientSockname(client)",
          "old_line_content": "            \" name=%s\", hide_user_data ? \"*redacted*\" : (client->name ? (char *)client->name->ptr : \"\"),",
          "new_line_content": "            \" laddr=%s\", getClientSockname(client),",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": null,
          "new_api": "commandTimeSnapshot",
          "old_text": null,
          "new_text": "commandTimeSnapshot()",
          "old_line_content": "            \" flags=%s\", flags,",
          "new_line_content": "            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(client->pubsub_patterns)",
          "old_line_content": "            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,",
          "new_line_content": "            \" psub=%i\", (int)dictSize(client->pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(client->querybuf)",
          "old_line_content": "            \" argv-mem=%U\", (unsigned long long)client->argv_len_sum,",
          "new_line_content": "            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,",
          "content_same": false
        },
        {
          "line": 3350,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(client->querybuf)",
          "old_line_content": "            \" multi-mem=%U\", (unsigned long long)client->mstate.argv_len_sums,",
          "new_line_content": "            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,",
          "content_same": false
        },
        {
          "line": 3356,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(client->reply)",
          "old_line_content": "            \" tot-mem=%U\", (unsigned long long)total_mem,",
          "new_line_content": "            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": null,
          "new_api": "catClientInfoString",
          "old_text": null,
          "new_text": "catClientInfoString(o, client, hide_user_data)",
          "old_line_content": "    }",
          "new_line_content": "        o = catClientInfoString(o, client, hide_user_data);",
          "content_same": false
        },
        {
          "line": 3383,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(o, \"\\n\", 1)",
          "old_line_content": "    return o;",
          "new_line_content": "        o = sdscatlen(o, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name->ptr)",
          "old_line_content": "    if (len == 0) return C_OK;",
          "new_line_content": "    int len = (name != NULL) ? sdslen(name->ptr) : 0;",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": null,
          "new_api": "validateClientAttr",
          "old_text": null,
          "new_text": "validateClientAttr(name->ptr)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    if (validateClientAttr(name->ptr) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": null,
          "new_api": "validateClientName",
          "old_text": null,
          "new_text": "validateClientName(name, err)",
          "old_line_content": "    }",
          "new_line_content": "    if (validateClientName(name, err) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name->ptr)",
          "old_line_content": "     * the current name. */",
          "new_line_content": "    int len = (name != NULL) ? sdslen(name->ptr) : 0;",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(c->name)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        if (c->name) decrRefCount(c->name);",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(name)",
          "old_line_content": "}",
          "new_line_content": "    incrRefCount(name);",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, err)",
          "old_line_content": "    return result;",
          "new_line_content": "        addReplyError(c, err);",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(attr, \"lib-ver\")",
          "old_line_content": "    } else {",
          "new_line_content": "    } else if (!strcasecmp(attr, \"lib-ver\")) {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"Unrecognized option '%s'\", attr)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorFormat(c, \"Unrecognized option '%s'\", attr);",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": null,
          "new_api": "validateClientAttr",
          "old_text": null,
          "new_text": "validateClientAttr(val)",
          "old_line_content": "        return;",
          "new_line_content": "    if (validateClientAttr(val) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"%s cannot contain spaces, newlines or special characters.\", attr)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorFormat(c, \"%s cannot contain spaces, newlines or special characters.\", attr);",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(*destvar)",
          "old_line_content": "        *destvar = valob;",
          "new_line_content": "    if (*destvar) decrRefCount(*destvar);",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(valob)",
          "old_line_content": "        *destvar = NULL;",
          "new_line_content": "        incrRefCount(valob);",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"can only reset normal client connections\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c, \"can only reset normal client connections\");",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "clearClientConnectionState",
          "old_text": null,
          "new_text": "clearClientConnectionState(c)",
          "old_line_content": "}",
          "new_line_content": "    clearClientConnectionState(c);",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c, \"RESET\")",
          "old_line_content": "",
          "new_line_content": "    addReplyStatus(c, \"RESET\");",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "}",
          "new_line_content": "    addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"help\")",
          "old_line_content": "            \"CACHING (YES|NO)\",",
          "new_line_content": "    if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr, \"help\")) {",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "        /* CLIENT ID */",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, c->id)",
          "old_line_content": "        /* CLIENT INFO */",
          "new_line_content": "        addReplyLongLong(c, c->id);",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(o)",
          "old_line_content": "        /* CLIENT LIST */",
          "new_line_content": "        sdsfree(o);",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"list\")",
          "old_line_content": "        int type = -1;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"list\")) {",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr, \"type\")",
          "old_line_content": "            if (type == -1) {",
          "new_line_content": "        if (c->argc == 4 && !strcasecmp(c->argv[2]->ptr, \"type\")) {",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[3]->ptr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                long long cid;",
          "new_line_content": "            o = sdsempty();",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[j], &cid, \"Invalid client ID\")",
          "old_line_content": "                    return;",
          "new_line_content": "                if (getLongLongFromObjectOrReply(c, c->argv[j], &cid, \"Invalid client ID\")) {",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(o)",
          "old_line_content": "                }",
          "new_line_content": "                    sdsfree(o);",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": null,
          "new_api": "catClientInfoString",
          "old_text": null,
          "new_text": "catClientInfoString(o, cl, 0)",
          "old_line_content": "                }",
          "new_line_content": "                    o = catClientInfoString(o, cl, 0);",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(o, \"\\n\", 1)",
          "old_line_content": "            }",
          "new_line_content": "                    o = sdscatlen(o, \"\\n\", 1);",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(o)",
          "old_line_content": "        /* CLIENT REPLY ON|OFF|SKIP */",
          "new_line_content": "        sdsfree(o);",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr, \"on\")",
          "old_line_content": "            c->flag.reply_off = 0;",
          "new_line_content": "        if (!strcasecmp(c->argv[2]->ptr, \"on\")) {",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            c->flag.reply_off = 1;",
          "new_line_content": "            addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr, \"skip\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"skip\")) {",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            c->flag.no_evict = 0;",
          "new_line_content": "            addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": null,
          "new_api": "updateClientMemUsageAndBucket",
          "old_text": null,
          "new_text": "updateClientMemUsageAndBucket(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            updateClientMemUsageAndBucket(c);",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"kill\")",
          "old_line_content": "         * CLIENT KILL <option> [value] ... <option> [value] */",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"kill\")) {",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"id\")",
          "old_line_content": "",
          "new_line_content": "                if (!strcasecmp(c->argv[i]->ptr, \"id\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": null,
          "new_api": "getRangeLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getRangeLongFromObjectOrReply(c, c->argv[i + 1], 1, LONG_MAX, &tmp,\n                                                      \"client-id should be greater than 0\")",
          "old_line_content": "                        return;",
          "new_line_content": "                    if (getRangeLongFromObjectOrReply(c, c->argv[i + 1], 1, LONG_MAX, &tmp,",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"maxage\")",
          "old_line_content": "",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"maxage\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[i + 1], &tmp,\n                                                     \"maxage is not an integer or out of range\")",
          "old_line_content": "                        return;",
          "new_line_content": "                    if (getLongLongFromObjectOrReply(c, c->argv[i + 1], &tmp,",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"maxage should be greater than 0\")",
          "old_line_content": "                    }",
          "new_line_content": "                        addReplyError(c, \"maxage should be greater than 0\");",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"type\")",
          "old_line_content": "                    if (type == -1) {",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"type\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[i + 1]->ptr)",
          "old_line_content": "                    }",
          "new_line_content": "                        addReplyErrorFormat(c, \"Unknown client type '%s'\", (char *)c->argv[i + 1]->ptr);",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"user\")",
          "old_line_content": "                    if (user == NULL) {",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"user\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"No such user '%s'\", (char *)c->argv[i + 1]->ptr)",
          "old_line_content": "                    }",
          "new_line_content": "                        addReplyErrorFormat(c, \"No such user '%s'\", (char *)c->argv[i + 1]->ptr);",
          "content_same": false
        },
        {
          "line": 3702,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"skipme\")",
          "old_line_content": "                        skipme = 1;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"skipme\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i + 1]->ptr, \"no\")",
          "old_line_content": "                    } else {",
          "new_line_content": "                    } else if (!strcasecmp(c->argv[i + 1]->ptr, \"no\")) {",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "                    }",
          "new_line_content": "                        addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "                }",
          "new_line_content": "                    addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": null,
          "new_api": "getClientSockname",
          "old_text": null,
          "new_text": "getClientSockname(client)",
          "old_line_content": "            if (id != 0 && client->id != id) continue;",
          "new_line_content": "            if (laddr && strcmp(getClientSockname(client), laddr) != 0) continue;",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": null,
          "new_api": "getClientType",
          "old_text": null,
          "new_text": "getClientType(client)",
          "old_line_content": "            if (user && client->user != user) continue;",
          "new_line_content": "            if (type != -1 && getClientType(client) != type) continue;",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "commandTimeSnapshot",
          "old_text": null,
          "new_text": "commandTimeSnapshot()",
          "old_line_content": "            /* Kill it. */",
          "new_line_content": "            if (max_age != 0 && (long long)(commandTimeSnapshot() / 1000 - client->ctime) < max_age) continue;",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(client)",
          "old_line_content": "            killed++;",
          "new_line_content": "                freeClient(client);",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, killed)",
          "old_line_content": "",
          "new_line_content": "            addReplyLongLong(c, killed);",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"unblock\")",
          "old_line_content": "        long long id;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"unblock\") && (c->argc == 3 || c->argc == 4)) {",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[3]->ptr, \"error\")",
          "old_line_content": "            } else {",
          "new_line_content": "            } else if (!strcasecmp(c->argv[3]->ptr, \"error\")) {",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"CLIENT UNBLOCK reason should be TIMEOUT or ERROR\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyError(c, \"CLIENT UNBLOCK reason should be TIMEOUT or ERROR\");",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[2], &id, NULL)",
          "old_line_content": "        /* Note that we never try to unblock a client blocked on a module command, which",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c, c->argv[2], &id, NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "lookupClientByID",
          "old_text": null,
          "new_text": "lookupClientByID(id)",
          "old_line_content": "         * doesn't have a timeout callback (even in the case of UNBLOCK ERROR).",
          "new_line_content": "        struct client *target = lookupClientByID(id);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        /* CLIENT GETNAME */",
          "new_line_content": "        if (clientSetNameOrReply(c, c->argv[2]) == C_OK) addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"getname\")",
          "old_line_content": "        if (c->name)",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"getname\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        /* CLIENT UNPAUSE */",
          "new_line_content": "            addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        /* CLIENT PAUSE TIMEOUT [WRITE|ALL] */",
          "new_line_content": "        addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"pause\")",
          "old_line_content": "        mstime_t end;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"pause\") && (c->argc == 3 || c->argc == 4)) {",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[3]->ptr, \"all\")",
          "old_line_content": "                return;",
          "new_line_content": "            } else if (strcasecmp(c->argv[3]->ptr, \"all\")) {",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"CLIENT PAUSE mode must be WRITE or ALL\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyError(c, \"CLIENT PAUSE mode must be WRITE or ALL\");",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        /* CLIENT TRACKING (on|off) [REDIRECT <id>] [BCAST] [PREFIX first]",
          "new_line_content": "        addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"tracking\")",
          "old_line_content": "         *                          [PREFIX second] [OPTIN] [OPTOUT] [NOLOOP]... */",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"tracking\") && c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr, \"redirect\")",
          "old_line_content": "                if (redir != 0) {",
          "new_line_content": "            if (!strcasecmp(c->argv[j]->ptr, \"redirect\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[j], &redir, NULL)",
          "old_line_content": "                    return;",
          "new_line_content": "                if (getLongLongFromObjectOrReply(c, c->argv[j], &redir, NULL) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "lookupClientByID",
          "old_text": null,
          "new_text": "lookupClientByID(redir)",
          "old_line_content": "                                     \"does not exist\");",
          "new_line_content": "                if (lookupClientByID(redir) == NULL) {",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(prefix, sizeof(robj *) * (numprefix + 1))",
          "old_line_content": "            } else {",
          "new_line_content": "                prefix = zrealloc(prefix, sizeof(robj *) * (numprefix + 1));",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                return;",
          "new_line_content": "                zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr, \"on\")",
          "old_line_content": "             * among each other and with the current state of the client. */",
          "new_line_content": "        if (!strcasecmp(c->argv[2]->ptr, \"on\")) {",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"PREFIX option requires BCAST mode to be enabled\")",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyError(c, \"PREFIX option requires BCAST mode to be enabled\");",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"You can't switch BCAST mode on/off before disabling \"\n                                     \"tracking for this client, and then re-enabling it with \"\n                                     \"a different mode.\")",
          "old_line_content": "                                     \"a different mode.\");",
          "new_line_content": "                    addReplyError(c, \"You can't switch BCAST mode on/off before disabling \"",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"OPTIN and OPTOUT are not compatible with BCAST\")",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyError(c, \"OPTIN and OPTOUT are not compatible with BCAST\");",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"You can't specify both OPTIN mode and OPTOUT mode\")",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyError(c, \"You can't specify both OPTIN mode and OPTOUT mode\");",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"You can't switch OPTIN/OPTOUT mode before disabling \"\n                                 \"tracking for this client, and then re-enabling it with \"\n                                 \"a different mode.\")",
          "old_line_content": "                                 \"a different mode.\");",
          "new_line_content": "                addReplyError(c, \"You can't switch OPTIN/OPTOUT mode before disabling \"",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "            }",
          "new_line_content": "                zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": null,
          "new_api": "checkPrefixCollisionsOrReply",
          "old_text": null,
          "new_text": "checkPrefixCollisionsOrReply(c, prefix, numprefix)",
          "old_line_content": "                    return;",
          "new_line_content": "                if (!checkPrefixCollisionsOrReply(c, prefix, numprefix)) {",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "                }",
          "new_line_content": "                    zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(prefix)",
          "old_line_content": "            return;",
          "new_line_content": "            zfree(prefix);",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        if (!c->flag.tracking) {",
          "new_line_content": "        addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"CLIENT CACHING can be called only when the \"\n                             \"client is in tracking mode with OPTIN or \"\n                             \"OPTOUT mode enabled\")",
          "old_line_content": "                             \"OPTOUT mode enabled\");",
          "new_line_content": "            addReplyError(c, \"CLIENT CACHING can be called only when the \"",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"yes\")",
          "old_line_content": "                c->flag.tracking_caching = 1;",
          "new_line_content": "        if (!strcasecmp(opt, \"yes\")) {",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"CLIENT CACHING YES is only valid when tracking is enabled in OPTIN mode.\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyError(c, \"CLIENT CACHING YES is only valid when tracking is enabled in OPTIN mode.\");",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"no\")",
          "old_line_content": "                c->flag.tracking_caching = 1;",
          "new_line_content": "        } else if (!strcasecmp(opt, \"no\")) {",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"CLIENT CACHING NO is only valid when tracking is enabled in OPTOUT mode.\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyError(c, \"CLIENT CACHING NO is only valid when tracking is enabled in OPTOUT mode.\");",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "        /* CLIENT GETREDIR */",
          "new_line_content": "        addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"getredir\")",
          "old_line_content": "        if (c->flag.tracking) {",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"getredir\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"trackinginfo\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"trackinginfo\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, 3)",
          "old_line_content": "        /* Flags */",
          "new_line_content": "        addReplyMapLen(c, 3);",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"flags\")",
          "old_line_content": "        int numflags = 0;",
          "new_line_content": "        addReplyBulkCString(c, \"flags\");",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, c->flag.tracking ? \"on\" : \"off\")",
          "old_line_content": "        if (c->flag.tracking_bcast) {",
          "new_line_content": "        addReplyBulkCString(c, c->flag.tracking ? \"on\" : \"off\");",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"bcast\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, \"bcast\");",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"optin\")",
          "old_line_content": "            if (c->flag.tracking_caching) {",
          "new_line_content": "            addReplyBulkCString(c, \"optin\");",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"caching-yes\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulkCString(c, \"caching-yes\");",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"optout\")",
          "old_line_content": "            if (c->flag.tracking_caching) {",
          "new_line_content": "            addReplyBulkCString(c, \"optout\");",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"caching-no\")",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulkCString(c, \"caching-no\");",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"noloop\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, \"noloop\");",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"broken_redirect\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, \"broken_redirect\");",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "setDeferredSetLen",
          "old_text": null,
          "new_text": "setDeferredSetLen(c, arraylen_ptr, numflags)",
          "old_line_content": "        /* Redirect */",
          "new_line_content": "        setDeferredSetLen(c, arraylen_ptr, numflags);",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, -1)",
          "old_line_content": "",
          "new_line_content": "            addReplyLongLong(c, -1);",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "            }",
          "new_line_content": "            while (raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "            c->flag.no_touch = 0;",
          "new_line_content": "            addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"redirect\")",
          "old_line_content": "            }",
          "new_line_content": "            if (!strcasecmp(c->argv[i]->ptr, \"redirect\")) {",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "}",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[next_arg++], &ver,\n                                         \"Protocol version is not an integer or out of range\")",
          "old_line_content": "            return;",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c, c->argv[next_arg++], &ver,",
          "content_same": false
        },
        {
          "line": 4062,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"-NOPROTO unsupported protocol version\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyError(c, \"-NOPROTO unsupported protocol version\");",
          "content_same": false
        },
        {
          "line": 4074,
          "old_api": null,
          "new_api": "redactClientCommandArgument",
          "old_text": null,
          "new_text": "redactClientCommandArgument(c, j + 1)",
          "old_line_content": "            username = c->argv[j + 1];",
          "new_line_content": "            redactClientCommandArgument(c, j + 1);",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": null,
          "new_api": "redactClientCommandArgument",
          "old_text": null,
          "new_text": "redactClientCommandArgument(c, j + 2)",
          "old_line_content": "            password = c->argv[j + 2];",
          "new_line_content": "            redactClientCommandArgument(c, j + 2);",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"SETNAME\")",
          "old_line_content": "            const char *err = NULL;",
          "new_line_content": "        } else if (!strcasecmp(opt, \"SETNAME\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": null,
          "new_api": "validateClientName",
          "old_text": null,
          "new_text": "validateClientName(clientname, &err)",
          "old_line_content": "                return;",
          "new_line_content": "            if (validateClientName(clientname, &err) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, err)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyError(c, err);",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"Syntax error in HELLO option '%s'\", opt)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorFormat(c, \"Syntax error in HELLO option '%s'\", opt);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4107,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"-NOAUTH HELLO must be called with the client already \"\n                         \"authenticated, otherwise the HELLO <proto> AUTH <user> <pass> \"\n                         \"option can be used to authenticate the client and \"\n                         \"select the RESP protocol version at the same time\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"-NOAUTH HELLO must be called with the client already \"",
          "new_line_content": "    /* At this point we need to be authenticated to continue. */",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": "clientSetName",
          "new_api": null,
          "old_text": "clientSetName(c, clientname, NULL)",
          "new_text": null,
          "old_line_content": "    if (clientname) clientSetName(c, clientname, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 6 + !server.sentinel_mode)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c, 6 + !server.sentinel_mode);",
          "new_line_content": "    /* Let's switch to the specified RESP mode. */",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, server.extended_redis_compat ? \"redis\" : SERVER_NAME)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCString(c, server.extended_redis_compat ? \"redis\" : SERVER_NAME);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, server.extended_redis_compat ? REDIS_VERSION : VALKEY_VERSION)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCString(c, server.extended_redis_compat ? REDIS_VERSION : VALKEY_VERSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, c->resp)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c, c->resp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, c->id)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c, c->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"role\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"role\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, server.primary_host ? \"replica\" : \"master\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, server.primary_host ? \"replica\" : \"master\");",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"modules\")",
          "new_text": null,
          "old_line_content": "    addReplyBulkCString(c, \"modules\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "addReplyLoadedModules",
          "new_api": null,
          "old_text": "addReplyLoadedModules(c)",
          "new_text": null,
          "old_line_content": "    addReplyLoadedModules(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "void securityWarningCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": "connAddrPeerName",
          "new_api": null,
          "old_text": "connAddrPeerName(c->conn, ip, sizeof(ip), &port)",
          "new_text": null,
          "old_line_content": "        if (connAddrPeerName(c->conn, ip, sizeof(ip), &port) == -1) {",
          "new_line_content": "        char ip[NET_IP_STR_LEN];",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: \"\n                                  \"commands to Redis. This is likely due to an attacker attempting to use Cross \"\n                                  \"Protocol Scripting to compromise your Redis instance. Connection aborted.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: \"",
          "new_line_content": "        int port;",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                      \"Possible SECURITY ATTACK detected. It looks like somebody is sending POST or Host: commands to \"\n                      \"Redis. This is likely due to an attacker attempting to use Cross Protocol Scripting to \"\n                      \"compromise your Redis instance. Connection from %s:%d aborted.\",\n                      ip, port)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "                                  \"Protocol Scripting to compromise your Redis instance. Connection aborted.\");",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": "freeClientAsync",
          "new_api": null,
          "old_text": "freeClientAsync(c)",
          "new_text": null,
          "old_line_content": "    freeClientAsync(c);",
          "new_line_content": "        logged_time = now;",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj *) * (c->argc))",
          "new_text": null,
          "old_line_content": "    c->original_argv = zmalloc(sizeof(robj *) * (c->argc));",
          "new_line_content": "    if (c->original_argv) return;",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(c->argv[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(c->argv[j]);",
          "new_line_content": "    for (int j = 0; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": "retainOriginalCommandVector",
          "new_api": null,
          "old_text": "retainOriginalCommandVector(c)",
          "new_text": null,
          "old_line_content": "    retainOriginalCommandVector(c);",
          "new_line_content": " * original_argv array. */",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->original_argv[argc])",
          "new_text": null,
          "old_line_content": "    decrRefCount(c->original_argv[argc]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj *) * argc)",
          "new_text": null,
          "old_line_content": "    argv = zmalloc(sizeof(robj *) * argc);",
          "new_line_content": "    robj **argv; /* The new argument vector */",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, argc)",
          "new_text": null,
          "old_line_content": "    va_start(ap, argc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap, robj *)",
          "new_text": null,
          "old_line_content": "        a = va_arg(ap, robj *);",
          "new_line_content": "        robj *a;",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": "retainOriginalCommandVector",
          "new_api": null,
          "old_text": "retainOriginalCommandVector(c)",
          "new_text": null,
          "old_line_content": "    retainOriginalCommandVector(c);",
          "new_line_content": "void replaceClientCommandVector(client *c, int argc, robj **argv) {",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "freeClientArgv",
          "new_api": null,
          "old_text": "freeClientArgv(c)",
          "new_text": null,
          "old_line_content": "    freeClientArgv(c);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": "getStringObjectLen",
          "new_api": null,
          "old_text": "getStringObjectLen(c->argv[j])",
          "new_text": null,
          "old_line_content": "        if (c->argv[j]) c->argv_len_sum += getStringObjectLen(c->argv[j]);",
          "new_line_content": "    c->argv_len_sum = 0;",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "lookupCommandOrOriginal",
          "new_api": null,
          "old_text": "lookupCommandOrOriginal(c->argv, c->argc)",
          "new_text": null,
          "old_line_content": "    c->cmd = lookupCommandOrOriginal(c->argv, c->argc);",
          "new_line_content": "    for (j = 0; j < c->argc; j++)",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "retainOriginalCommandVector",
          "new_api": null,
          "old_text": "retainOriginalCommandVector(c)",
          "new_text": null,
          "old_line_content": "    retainOriginalCommandVector(c);",
          "new_line_content": "void rewriteClientCommandArgument(client *c, int i, robj *newval) {",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->argv, sizeof(robj *) * (i + 1))",
          "new_text": null,
          "old_line_content": "            c->argv = zrealloc(c->argv, sizeof(robj *) * (i + 1));",
          "new_line_content": "    if (i >= c->argc) {",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": "getStringObjectLen",
          "new_api": null,
          "old_text": "getStringObjectLen(oldval)",
          "new_text": null,
          "old_line_content": "    if (oldval) c->argv_len_sum -= getStringObjectLen(oldval);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": "getStringObjectLen",
          "new_api": null,
          "old_text": "getStringObjectLen(newval)",
          "new_text": null,
          "old_line_content": "    if (newval) c->argv_len_sum += getStringObjectLen(newval);",
          "new_line_content": "    oldval = c->argv[i];",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(oldval)",
          "new_text": null,
          "old_line_content": "    if (oldval) decrRefCount(oldval);",
          "new_line_content": "    c->argv[i] = newval;",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "lookupCommandOrOriginal",
          "new_api": null,
          "old_text": "lookupCommandOrOriginal(c->argv, c->argc)",
          "new_text": null,
          "old_line_content": "        c->cmd = lookupCommandOrOriginal(c->argv, c->argc);",
          "new_line_content": "    /* If this is the command name make sure to fix c->cmd. */",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c, NULL, c->cmd != NULL)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c, NULL, c->cmd != NULL);",
          "new_line_content": "    if (i == 0) {",
          "content_same": false
        },
        {
          "line": 4290,
          "old_api": "getClientType",
          "new_api": null,
          "old_text": "getClientType(c)",
          "new_text": null,
          "old_line_content": "    if (getClientType(c) == CLIENT_TYPE_REPLICA) {",
          "new_line_content": " * enforcing the client output length limits. */",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(server.repl_buffer_blocks)",
          "new_text": null,
          "old_line_content": "            replBufBlock *last = listNodeValue(listLast(server.repl_buffer_blocks));",
          "new_line_content": "        size_t repl_node_size = sizeof(listNode) + sizeof(replBufBlock);",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(c->ref_repl_buf_node)",
          "new_text": null,
          "old_line_content": "            replBufBlock *cur = listNodeValue(c->ref_repl_buf_node);",
          "new_line_content": "        if (c->ref_repl_buf_node) {",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "        return c->reply_bytes + (list_item_size * listLength(c->reply));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": null,
          "old_text": "getClientOutputBufferMemoryUsage(c)",
          "new_text": null,
          "old_line_content": "    size_t mem = getClientOutputBufferMemoryUsage(c);",
          "new_line_content": " * the client output buffer memory usage portion of the total. */",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": null,
          "old_line_content": "    mem += c->querybuf ? sdsAllocSize(c->querybuf) : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": "zmalloc_size",
          "new_api": null,
          "old_text": "zmalloc_size(c)",
          "new_text": null,
          "old_line_content": "    mem += zmalloc_size(c);",
          "new_line_content": "    if (output_buffer_mem_usage != NULL) *output_buffer_mem_usage = mem;",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": "multiStateMemOverhead",
          "new_api": null,
          "old_text": "multiStateMemOverhead(c)",
          "new_text": null,
          "old_line_content": "    mem += multiStateMemOverhead(c);",
          "new_line_content": "     * spot problematic clients. */",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "pubsubMemOverhead",
          "new_api": null,
          "old_text": "pubsubMemOverhead(c)",
          "new_text": null,
          "old_line_content": "    mem += pubsubMemOverhead(c);",
          "new_line_content": "    /* Add memory overhead of pubsub channels and patterns. Note: this is just the overhead of the robj pointers",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(name, \"normal\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(name, \"normal\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": null,
          "old_text": "getClientOutputBufferMemoryUsage(c)",
          "new_text": null,
          "old_line_content": "    unsigned long used_mem = getClientOutputBufferMemoryUsage(c);",
          "new_line_content": "int checkClientOutputBufferLimits(client *c) {",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->reply_bytes < SIZE_MAX - (1024 * 64))",
          "new_text": null,
          "old_line_content": "    serverAssert(c->reply_bytes < SIZE_MAX - (1024 * 64));",
          "new_line_content": "int closeClientOnOutputBufferLimitReached(client *c, int async) {",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "getClientType",
          "new_api": null,
          "old_text": "getClientType(c)",
          "new_text": null,
          "old_line_content": "    if ((c->reply_bytes == 0 && getClientType(c) != CLIENT_TYPE_REPLICA) ||",
          "new_line_content": "    /* Note that c->reply_bytes is irrelevant for replica clients",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": "checkClientOutputBufferLimits",
          "new_api": null,
          "old_text": "checkClientOutputBufferLimits(c)",
          "new_text": null,
          "old_line_content": "    if (checkClientOutputBufferLimits(c)) {",
          "new_line_content": "        (c->flag.close_asap && !(c->flag.protected_rdb_channel)))",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": "freeClientAsync",
          "new_api": null,
          "old_text": "freeClientAsync(c)",
          "new_text": null,
          "old_line_content": "            freeClientAsync(c);",
          "new_line_content": "        if (async || c->flag.protected_rdb_channel) {",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\",\n                      client)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Client %s scheduled to be closed ASAP for overcoming of output buffer limits.\",",
          "new_line_content": "            c->flag.protected_rdb_channel = 0;",
          "content_same": false
        },
        {
          "line": 4457,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "            freeClient(c);",
          "new_line_content": "                      client);",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Client %s closed for overcoming of output buffer limits.\", client)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Client %s closed for overcoming of output buffer limits.\", client);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.replicas, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.replicas, &li);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": "isReplicaReadyForReplData",
          "new_api": null,
          "old_text": "isReplicaReadyForReplData(replica)",
          "new_text": null,
          "old_line_content": "        if (isReplicaReadyForReplData(replica) && !(replica->flag.close_asap) && can_receive_writes &&",
          "new_line_content": "         * 3. Obviously if the replica is not ONLINE.",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "clientHasPendingReplies",
          "new_api": null,
          "old_text": "clientHasPendingReplies(replica)",
          "new_text": null,
          "old_line_content": "            !replica->repl_start_cmd_stream_on_ack && clientHasPendingReplies(replica)) {",
          "new_line_content": "         */",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": "unblockPostponedClients",
          "new_api": null,
          "old_text": "unblockPostponedClients()",
          "new_text": null,
          "old_line_content": "        unblockPostponedClients();",
          "new_line_content": "    uint32_t mask_cli = (PAUSE_ACTION_CLIENT_WRITE | PAUSE_ACTION_CLIENT_ALL);",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.postponed_clients, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.postponed_clients, &li);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "pauseActions",
          "new_api": null,
          "old_text": "pauseActions(PAUSE_BY_CLIENT_COMMAND, endTime, actions)",
          "new_text": null,
          "old_line_content": "    pauseActions(PAUSE_BY_CLIENT_COMMAND, endTime, actions);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4575,
          "old_api": "updatePausedActions",
          "new_api": null,
          "old_text": "updatePausedActions()",
          "new_text": null,
          "old_line_content": "    updatePausedActions();",
          "new_line_content": "    if (server.client_pause_per_purpose[purpose].end < end) server.client_pause_per_purpose[purpose].end = end;",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": "updatePausedActions",
          "new_api": null,
          "old_text": "updatePausedActions()",
          "new_text": null,
          "old_line_content": "    updatePausedActions();",
          "new_line_content": "    server.client_pause_per_purpose[purpose].end = 0;",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "updatePausedActions",
          "new_api": null,
          "old_text": "updatePausedActions()",
          "new_text": null,
          "old_line_content": "    updatePausedActions();",
          "new_line_content": "uint32_t isPausedActionsWithUpdate(uint32_t actions_bitmask) {",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "updateCachedTime",
          "new_api": null,
          "old_text": "updateCachedTime(0)",
          "new_text": null,
          "old_line_content": "    updateCachedTime(0);",
          "new_line_content": "    /* Update our cached time since it is used to create and update the last",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": "aeProcessEvents",
          "new_api": null,
          "old_text": "aeProcessEvents(server.el, AE_FILE_EVENTS | AE_DONT_WAIT | AE_CALL_BEFORE_SLEEP | AE_CALL_AFTER_SLEEP)",
          "new_text": null,
          "old_line_content": "            aeProcessEvents(server.el, AE_FILE_EVENTS | AE_DONT_WAIT | AE_CALL_BEFORE_SLEEP | AE_CALL_AFTER_SLEEP);",
          "new_line_content": "        long long startval = server.events_processed_while_blocked;",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": "whileBlockedCron",
          "new_api": null,
          "old_text": "whileBlockedCron()",
          "new_text": null,
          "old_line_content": "    whileBlockedCron();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(ProcessingEventsWhileBlocked >= 0)",
          "new_text": null,
          "old_line_content": "    serverAssert(ProcessingEventsWhileBlocked >= 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4663,
          "old_api": "trySendReadToIOThreads",
          "new_api": null,
          "old_text": "trySendReadToIOThreads(c)",
          "new_text": null,
          "old_line_content": "    return (trySendReadToIOThreads(c) == C_OK);",
          "new_line_content": "    if (ProcessingEventsWhileBlocked) return 0;",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": "processClientsCommandsBatch",
          "new_api": null,
          "old_text": "processClientsCommandsBatch()",
          "new_text": null,
          "old_line_content": "        processClientsCommandsBatch();",
          "new_line_content": "        /* When ProcessingEventsWhileBlocked we may call processIOThreadsReadDone recursively.",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients_pending_io_read)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.clients_pending_io_read) == 0) return 0;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.clients_pending_io_read)",
          "new_text": null,
          "old_line_content": "    listNode *next = listFirst(server.clients_pending_io_read);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": "listNextNode",
          "new_api": null,
          "old_text": "listNextNode(ln)",
          "new_text": null,
          "old_line_content": "        next = listNextNode(ln);",
          "new_line_content": "    while (next) {",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "        ln = next;",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "processClientIOWriteDone",
          "new_api": null,
          "old_text": "processClientIOWriteDone(c, allow_async_writes)",
          "new_text": null,
          "old_line_content": "            processClientIOWriteDone(c, allow_async_writes);",
          "new_line_content": "        if (c->io_write_state == CLIENT_COMPLETED_IO) {",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "atomic_thread_fence",
          "new_api": null,
          "old_text": "atomic_thread_fence(memory_order_acquire)",
          "new_text": null,
          "old_line_content": "        atomic_thread_fence(memory_order_acquire);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4707,
          "old_api": "connSetPostponeUpdateState",
          "new_api": null,
          "old_text": "connSetPostponeUpdateState(c->conn, 0)",
          "new_text": null,
          "old_line_content": "        connSetPostponeUpdateState(c->conn, 0);",
          "new_line_content": "        server.stat_io_reads_processed++;",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": "connUpdateState",
          "new_api": null,
          "old_text": "connUpdateState(c->conn)",
          "new_text": null,
          "old_line_content": "        connUpdateState(c->conn);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": "handleReadResult",
          "new_api": null,
          "old_text": "handleReadResult(c)",
          "new_text": null,
          "old_line_content": "        if (handleReadResult(c) == C_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "handleParseResults",
          "new_api": null,
          "old_text": "handleParseResults(c)",
          "new_text": null,
          "old_line_content": "            parseResult res = handleParseResults(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING, argv[j])",
          "new_text": null,
          "old_line_content": "        c->argv[c->argc] = createObject(OBJ_STRING, argv[j]);",
          "new_line_content": "        /* Strings returned from sdssplitargs() may have unused capacity that we can trim. */",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": "beforeNextClient",
          "new_api": null,
          "old_text": "beforeNextClient(c)",
          "new_text": null,
          "old_line_content": "                beforeNextClient(c);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients_pending_io_read)",
          "new_text": null,
          "old_line_content": "        size_t list_length_before_command_execute = listLength(server.clients_pending_io_read);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4735,
          "old_api": "beforeNextClient",
          "new_api": null,
          "old_text": "beforeNextClient(c)",
          "new_text": null,
          "old_line_content": "            if (processPendingCommandAndInputBuffer(c) == C_OK) beforeNextClient(c);",
          "new_line_content": "        /* If the command was not added to the commands batch, process it immediately */",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "processClientsCommandsBatch",
          "new_api": null,
          "old_text": "processClientsCommandsBatch()",
          "new_text": null,
          "old_line_content": "    processClientsCommandsBatch();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "new_line_content": "static void setProtocolError(const char *errstr, client *c) {",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (c->querybuf && sdslen(c->querybuf) - c->qb_pos < PROTO_DUMP_LEN) {",
          "new_line_content": "        char buf[256];",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf, sizeof(buf), \"Query buffer during protocol error: '%s'\", c->querybuf + c->qb_pos)",
          "new_text": null,
          "old_line_content": "            snprintf(buf, sizeof(buf), \"Query buffer during protocol error: '%s'\", c->querybuf + c->qb_pos);",
          "new_line_content": "        buf[0] = '\\0';",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                     PROTO_DUMP_LEN / 2, c->querybuf + c->qb_pos, sdslen(c->querybuf) - c->qb_pos - PROTO_DUMP_LEN,",
          "new_line_content": "        } else if (c->querybuf) {",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": "isprint",
          "new_api": null,
          "old_text": "isprint(*p)",
          "new_text": null,
          "old_line_content": "            if (!isprint(*p)) *p = '.';",
          "new_line_content": "        char *p = buf;",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(loglevel, \"Protocol error (%s) from client: %s. %s\", errstr, client, buf)",
          "new_text": null,
          "old_line_content": "        serverLog(loglevel, \"Protocol error (%s) from client: %s. %s\", errstr, client, buf);",
          "new_line_content": "        /* Log all the client and protocol info. */",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(client)",
          "new_text": null,
          "old_line_content": "        sdsfree(client);",
          "new_line_content": "        int loglevel = (c->flag.primary) ? LL_WARNING : LL_VERBOSE;",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter)",
          "new_text": null,
          "old_line_content": "    listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter);",
          "new_line_content": "    int curr_bucket = CLIENT_MEM_USAGE_BUCKETS - 1;",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "getClientEvictionLimit",
          "new_api": null,
          "old_text": "getClientEvictionLimit()",
          "new_text": null,
          "old_line_content": "    size_t client_eviction_limit = getClientEvictionLimit();",
          "new_line_content": "    listIter bucket_iter;",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&bucket_iter)",
          "new_text": null,
          "old_line_content": "        listNode *ln = listNext(&bucket_iter);",
          "new_line_content": "    while (server.stat_clients_type_memory[CLIENT_TYPE_NORMAL] + server.stat_clients_type_memory[CLIENT_TYPE_PUBSUB] >=",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sds ci = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "new_line_content": "        if (ln) {",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Evicting client: %s\", ci)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE, \"Evicting client: %s\", ci);",
          "new_line_content": "            client *c = ln->value;",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Over client maxmemory after evicting all evictable clients\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Over client maxmemory after evicting all evictable clients\");",
          "new_line_content": "            curr_bucket--;",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c, NULL, c->argc == 0)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c, NULL, c->argc == 0);",
          "new_line_content": "    if (c->multibulklen == 0) {",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter)",
          "new_text": null,
          "old_line_content": "            listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &bucket_iter);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->querybuf + c->qb_pos, '\\r')",
          "new_text": null,
          "old_line_content": "        newline = strchr(c->querybuf + c->qb_pos, '\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->io_read_state == CLIENT_PENDING_IO)",
          "new_text": null,
          "old_line_content": "    serverAssert(c->io_read_state == CLIENT_PENDING_IO);",
          "new_line_content": "void ioThreadReadQueryFromClient(void *data) {",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (newline - (c->querybuf + c->qb_pos) > (ssize_t)(sdslen(c->querybuf) - c->qb_pos - 2)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4806,
          "old_api": "readToQueryBuf",
          "new_api": null,
          "old_text": "readToQueryBuf(c)",
          "new_text": null,
          "old_line_content": "    readToQueryBuf(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c, NULL, c->querybuf[c->qb_pos] == '*')",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c, NULL, c->querybuf[c->qb_pos] == '*');",
          "new_line_content": "        /* We know for sure there is a whole line since newline != NULL,",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": "parseCommand",
          "new_api": null,
          "old_text": "parseCommand(c)",
          "new_text": null,
          "old_line_content": "    parseCommand(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(c->argv)",
          "new_text": null,
          "old_line_content": "        if (c->argv) zfree(c->argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(c->multibulklen, 1024)",
          "new_text": null,
          "old_line_content": "        c->argv_len = min(c->multibulklen, 1024);",
          "new_line_content": "        /* Setup argv array on client structure */",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv, c->argc)",
          "new_text": null,
          "old_line_content": "    c->io_parsed_cmd = lookupCommand(c->argv, c->argc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": "commandCheckArity",
          "new_api": null,
          "old_text": "commandCheckArity(c->io_parsed_cmd, c->argc, NULL)",
          "new_text": null,
          "old_line_content": "    if (c->io_parsed_cmd && commandCheckArity(c->io_parsed_cmd, c->argc, NULL) == 0) {",
          "new_line_content": "    /* Lookup command offload */",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": "initGetKeysResult",
          "new_api": null,
          "old_text": "initGetKeysResult(&result)",
          "new_text": null,
          "old_line_content": "        initGetKeysResult(&result);",
          "new_line_content": "    if (c->io_parsed_cmd && server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "getKeysFromCommand",
          "new_api": null,
          "old_text": "getKeysFromCommand(c->io_parsed_cmd, c->argv, c->argc, &result)",
          "new_text": null,
          "old_line_content": "        int numkeys = getKeysFromCommand(c->io_parsed_cmd, c->argv, c->argc, &result);",
          "new_line_content": "        getKeysResult result;",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(first_key->ptr)",
          "new_text": null,
          "old_line_content": "            c->slot = keyHashSlot(first_key->ptr, sdslen(first_key->ptr));",
          "new_line_content": "        if (numkeys) {",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "trimClientQueryBuffer",
          "new_api": null,
          "old_text": "trimClientQueryBuffer(c)",
          "new_text": null,
          "old_line_content": "    trimClientQueryBuffer(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "atomic_thread_fence",
          "new_api": null,
          "old_text": "atomic_thread_fence(memory_order_release)",
          "new_text": null,
          "old_line_content": "    atomic_thread_fence(memory_order_release);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->io_write_state == CLIENT_PENDING_IO)",
          "new_text": null,
          "old_line_content": "    serverAssert(c->io_write_state == CLIENT_PENDING_IO);",
          "new_line_content": "void ioThreadWriteToClient(void *data) {",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": "atomic_thread_fence",
          "new_api": null,
          "old_text": "atomic_thread_fence(memory_order_release)",
          "new_text": null,
          "old_line_content": "    atomic_thread_fence(memory_order_release);",
          "new_line_content": "    c->nwritten = 0;",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c, NULL, c->multibulklen > 0)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(c, NULL, c->multibulklen > 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(c->querybuf + c->qb_pos, '\\r')",
          "new_text": null,
          "old_line_content": "            newline = strchr(c->querybuf + c->qb_pos, '\\r');",
          "new_line_content": "        /* Read bulk length if unknown */",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "            if (newline - (c->querybuf + c->qb_pos) > (ssize_t)(sdslen(c->querybuf) - c->qb_pos - 2)) break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(c->querybuf + c->qb_pos + 1, bulklen_slen, &ll)",
          "new_text": null,
          "old_line_content": "            ok = string2ll(c->querybuf + c->qb_pos + 1, bulklen_slen, &ll);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                if (sdslen(c->querybuf) - c->qb_pos <= (size_t)ll + 2) {",
          "new_line_content": "                 * ll+2, trimming querybuf is just a waste of time, because",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": "initSharedQueryBuf",
          "new_api": null,
          "old_text": "initSharedQueryBuf()",
          "new_text": null,
          "old_line_content": "                        initSharedQueryBuf();",
          "new_line_content": "                    if (c->querybuf == thread_shared_qb) {",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                    c->querybuf = sdsMakeRoomForNonGreedy(c->querybuf, ll + 2 - sdslen(c->querybuf));",
          "new_line_content": "                    /* Hint the sds library about the amount of bytes this string is",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdslen(c->querybuf) - c->qb_pos < (size_t)(c->bulklen + 2)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(c->argv_len < INT_MAX / 2 ? c->argv_len * 2 : INT_MAX, c->argc + c->multibulklen)",
          "new_text": null,
          "old_line_content": "                c->argv_len = min(c->argv_len < INT_MAX / 2 ? c->argv_len * 2 : INT_MAX, c->argc + c->multibulklen);",
          "new_line_content": "            /* Check if we have space in argv, grow if needed */",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(c->argv, sizeof(robj *) * c->argv_len)",
          "new_text": null,
          "old_line_content": "                c->argv = zrealloc(c->argv, sizeof(robj *) * c->argv_len);",
          "new_line_content": "            if (c->argc >= c->argv_len) {",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "                sdslen(c->querybuf) == (size_t)(c->bulklen + 2)) {",
          "new_line_content": "             * just use the current sds string. */",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING, c->querybuf)",
          "new_text": null,
          "old_line_content": "                c->argv[c->argc++] = createObject(OBJ_STRING, c->querybuf);",
          "new_line_content": "            if (!is_primary && c->qb_pos == 0 && c->bulklen >= PROTO_MBULK_BIG_ARG &&",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(SDS_NOINIT, c->bulklen + 2)",
          "new_text": null,
          "old_line_content": "                c->querybuf = sdsnewlen(SDS_NOINIT, c->bulklen + 2);",
          "new_line_content": "                /* Assume that if we saw a fat argument we'll see another one",
          "content_same": false
        },
        {
          "line": 2911,
          "old_api": "sdsclear",
          "new_api": null,
          "old_text": "sdsclear(c->querybuf)",
          "new_text": null,
          "old_line_content": "                sdsclear(c->querybuf);",
          "new_line_content": "                 * likely... */",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "reqresAppendResponse",
          "new_api": null,
          "old_text": "reqresAppendResponse(c)",
          "new_text": null,
          "old_line_content": "    reqresAppendResponse(c);",
          "new_line_content": "    if (c->flag.blocked) return;",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": "clusterSlotStatsAddNetworkBytesInForUserClient",
          "new_api": null,
          "old_text": "clusterSlotStatsAddNetworkBytesInForUserClient(c)",
          "new_text": null,
          "old_line_content": "    clusterSlotStatsAddNetworkBytesInForUserClient(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        c->reploff = c->read_reploff - sdslen(c->querybuf) + c->qb_pos;",
          "new_line_content": "    if (c->flag.primary && !c->flag.multi) {",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "replicationFeedStreamFromPrimaryStream",
          "new_api": null,
          "old_text": "replicationFeedStreamFromPrimaryStream(c->querybuf + c->repl_applied, applied)",
          "new_text": null,
          "old_line_content": "            replicationFeedStreamFromPrimaryStream(c->querybuf + c->repl_applied, applied);",
          "new_line_content": "        long long applied = c->reploff - prev_offset;",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": "processCommand",
          "new_api": null,
          "old_text": "processCommand(c)",
          "new_text": null,
          "old_line_content": "    if (processCommand(c) == C_OK) {",
          "new_line_content": "    client *old_client = server.current_client;",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": "commandProcessed",
          "new_api": null,
          "old_text": "commandProcessed(c)",
          "new_text": null,
          "old_line_content": "        commandProcessed(c);",
          "new_line_content": "    server.current_client = c;",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "updateClientMemUsageAndBucket",
          "new_api": null,
          "old_text": "updateClientMemUsageAndBucket(c)",
          "new_text": null,
          "old_line_content": "        if (c->conn) updateClientMemUsageAndBucket(c);",
          "new_line_content": "        /* Update the client's memory to include output buffer growth following the",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": "processCommandAndResetClient",
          "new_api": null,
          "old_text": "processCommandAndResetClient(c)",
          "new_text": null,
          "old_line_content": "        if (processCommandAndResetClient(c) == C_ERR) {",
          "new_line_content": "    if (c->flag.pending_command) {",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "new_line_content": "     * it can always satisfy this condition, because its querybuf",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "        return processInputBuffer(c);",
          "new_line_content": "     * contains data not applied. */",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "processInlineBuffer",
          "new_api": null,
          "old_text": "processInlineBuffer(c)",
          "new_text": null,
          "old_line_content": "        processInlineBuffer(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": null,
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": null,
          "old_line_content": "    if (isInsideYieldingLongCommand() && c->flag.primary) return 0;",
          "new_line_content": "     * stream (instead of replying -BUSY like we do with other clients) and",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    while (c->querybuf && c->qb_pos < sdslen(c->querybuf)) {",
          "new_line_content": "int processInputBuffer(client *c) {",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "canParseCommand",
          "new_api": null,
          "old_text": "canParseCommand(c)",
          "new_text": null,
          "old_line_content": "        if (!canParseCommand(c)) {",
          "new_line_content": "    /* Parse the query buffer. */",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": "authRequired",
          "new_api": null,
          "old_text": "authRequired(c)",
          "new_text": null,
          "old_line_content": "        c->read_flags |= authRequired(c) ? READ_FLAGS_AUTH_REQUIRED : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "resetSharedQueryBuf",
          "new_api": null,
          "old_text": "resetSharedQueryBuf(c)",
          "new_text": null,
          "old_line_content": "            resetSharedQueryBuf(c);",
          "new_line_content": "             * This avoids unintentionally modifying the shared qb during processCommand as we may use",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "processCommandAndResetClient",
          "new_api": null,
          "old_text": "processCommandAndResetClient(c)",
          "new_text": null,
          "old_line_content": "        if (processCommandAndResetClient(c) == C_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    qblen = c->querybuf ? sdslen(c->querybuf) : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(thread_shared_qb)",
          "new_text": null,
          "old_line_content": "        serverAssert(sdslen(thread_shared_qb) == 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        c->querybuf = big_arg ? sdsempty() : thread_shared_qb;",
          "new_line_content": "    if (c->querybuf == NULL) {",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": "sdsalloc",
          "new_api": null,
          "old_text": "sdsalloc(c->querybuf)",
          "new_text": null,
          "old_line_content": "        (big_arg || sdsalloc(c->querybuf) < PROTO_IOBUF_LEN)) {",
          "new_line_content": "    int use_thread_shared_qb = (c->querybuf == thread_shared_qb) ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "sdsMakeRoomForNonGreedy",
          "new_api": null,
          "old_text": "sdsMakeRoomForNonGreedy(c->querybuf, readlen)",
          "new_text": null,
          "old_line_content": "        c->querybuf = sdsMakeRoomForNonGreedy(c->querybuf, readlen);",
          "new_line_content": "         * the query buffer, we also don't wanna use the greedy growth, in order",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "sdsMakeRoomFor",
          "new_api": null,
          "old_text": "sdsMakeRoomFor(c->querybuf, readlen)",
          "new_text": null,
          "old_line_content": "        c->querybuf = sdsMakeRoomFor(c->querybuf, readlen);",
          "new_line_content": "        if (c->querybuf_peak < qblen + readlen) c->querybuf_peak = qblen + readlen;",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(c->querybuf)",
          "new_text": null,
          "old_line_content": "        readlen = sdsavail(c->querybuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "sdsIncrLen",
          "new_api": null,
          "old_text": "sdsIncrLen(c->querybuf, c->nread)",
          "new_text": null,
          "old_line_content": "    sdsIncrLen(c->querybuf, c->nread);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "    qblen = sdslen(c->querybuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        size_t qb_memory = sdslen(c->querybuf) + c->mstate.argv_len_sums;",
          "new_line_content": "         *",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "connGetPrivateData",
          "new_api": null,
          "old_text": "connGetPrivateData(conn)",
          "new_text": null,
          "old_line_content": "    client *c = connGetPrivateData(conn);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": "readToQueryBuf",
          "new_api": null,
          "old_text": "readToQueryBuf(c)",
          "new_text": null,
          "old_line_content": "    readToQueryBuf(c);",
          "new_line_content": "    if (c->io_write_state != CLIENT_IDLE || c->io_read_state != CLIENT_IDLE) return;",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "        if (processInputBuffer(c) == C_ERR) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(addr, addr_len, \"%s:0\", server.unixsocket)",
          "new_text": null,
          "old_line_content": "        snprintf(addr, addr_len, \"%s:0\", server.unixsocket);",
          "new_line_content": "    if (client->flag.unix_socket) {",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "connFormatAddr",
          "new_api": null,
          "old_text": "connFormatAddr(client->conn, addr, addr_len, remote)",
          "new_text": null,
          "old_line_content": "        connFormatAddr(client->conn, addr, addr_len, remote);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3250,
          "old_api": "genClientAddrString",
          "new_api": null,
          "old_text": "genClientAddrString(c, peerid, sizeof(peerid), 1)",
          "new_text": null,
          "old_line_content": "        genClientAddrString(c, peerid, sizeof(peerid), 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(peerid)",
          "new_text": null,
          "old_line_content": "        c->peerid = sdsnew(peerid);",
          "new_line_content": "    if (c->peerid == NULL) {",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": "genClientAddrString",
          "new_api": null,
          "old_text": "genClientAddrString(c, sockname, sizeof(sockname), 0)",
          "new_text": null,
          "old_line_content": "        genClientAddrString(c, sockname, sizeof(sockname), 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3265,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(sockname)",
          "new_text": null,
          "old_line_content": "        c->sockname = sdsnew(sockname);",
          "new_line_content": "    if (c->sockname == NULL) {",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "getClientPeerId",
          "new_api": null,
          "old_text": "getClientPeerId(c)",
          "new_text": null,
          "old_line_content": "    return getClientPeerId(c)[0] == '[';",
          "new_line_content": "        c = server.current_client;",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "waitForClientIO",
          "new_api": null,
          "old_text": "waitForClientIO(client)",
          "new_text": null,
          "old_line_content": "    if (!server.crashed) waitForClientIO(client);",
          "new_line_content": " * readable format, into the sds string 's'. */",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": "connHasReadHandler",
          "new_api": null,
          "old_text": "connHasReadHandler(client->conn)",
          "new_text": null,
          "old_line_content": "        if (connHasReadHandler(client->conn)) *p++ = 'r';",
          "new_line_content": "    p = events;",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "connHasWriteHandler",
          "new_api": null,
          "old_text": "connHasWriteHandler(client->conn)",
          "new_text": null,
          "old_line_content": "        if (connHasWriteHandler(client->conn)) *p++ = 'w';",
          "new_line_content": "    if (client->conn) {",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "getClientMemoryUsage",
          "new_api": null,
          "old_text": "getClientMemoryUsage(client, &obufmem)",
          "new_text": null,
          "old_line_content": "    size_t obufmem, total_mem = getClientMemoryUsage(client, &obufmem);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": "listLast",
          "new_api": null,
          "old_text": "listLast(server.repl_buffer_blocks)",
          "new_text": null,
          "old_line_content": "        replBufBlock *last = listNodeValue(listLast(server.repl_buffer_blocks));",
          "new_line_content": "    size_t used_blocks_of_repl_buf = 0;",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(client->ref_repl_buf_node)",
          "new_text": null,
          "old_line_content": "        replBufBlock *cur = listNodeValue(client->ref_repl_buf_node);",
          "new_line_content": "    if (client->ref_repl_buf_node) {",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(\n        s,\n        FMTARGS(\n            \"id=%U\", (unsigned long long)client->id,\n            \" addr=%s\", getClientPeerId(client),\n            \" laddr=%s\", getClientSockname(client),\n            \" %s\", connGetInfo(client->conn, conninfo, sizeof(conninfo)),\n            \" name=%s\", hide_user_data ? \"*redacted*\" : (client->name ? (char *)client->name->ptr : \"\"),\n            \" age=%I\", (long long)(commandTimeSnapshot() / 1000 - client->ctime),\n            \" idle=%I\", (long long)(server.unixtime - client->last_interaction),\n            \" flags=%s\", flags,\n            \" db=%i\", client->db->id,\n            \" sub=%i\", (int)dictSize(client->pubsub_channels),\n            \" psub=%i\", (int)dictSize(client->pubsub_patterns),\n            \" ssub=%i\", (int)dictSize(client->pubsubshard_channels),\n            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,\n            \" watch=%i\", (int)listLength(client->watched_keys),\n            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,\n            \" qbuf-free=%U\", client->querybuf ? (unsigned long long)sdsavail(client->querybuf) : 0,\n            \" argv-mem=%U\", (unsigned long long)client->argv_len_sum,\n            \" multi-mem=%U\", (unsigned long long)client->mstate.argv_len_sums,\n            \" rbs=%U\", (unsigned long long)client->buf_usable_size,\n            \" rbp=%U\", (unsigned long long)client->buf_peak,\n            \" obl=%U\", (unsigned long long)client->bufpos,\n            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,\n            \" omem=%U\", (unsigned long long)obufmem, /* should not include client->buf since we want to see 0 for static clients. */\n            \" tot-mem=%U\", (unsigned long long)total_mem,\n            \" events=%s\", events,\n            \" cmd=%s\", client->lastcmd ? client->lastcmd->fullname : \"NULL\",\n            \" user=%s\", hide_user_data ? \"*redacted*\" : (client->user ? client->user->name : \"(superuser)\"),\n            \" redir=%I\", (client->flag.tracking) ? (long long)client->client_tracking_redirection : -1,\n            \" resp=%i\", client->resp,\n            \" lib-name=%s\", client->lib_name ? (char *)client->lib_name->ptr : \"\",\n            \" lib-ver=%s\", client->lib_ver ? (char *)client->lib_ver->ptr : \"\",\n            \" tot-net-in=%U\", client->net_input_bytes,\n            \" tot-net-out=%U\", client->net_output_bytes,\n            \" tot-cmds=%U\", client->commands_processed))",
          "new_text": null,
          "old_line_content": "    sds ret = sdscatfmt(",
          "new_line_content": "        used_blocks_of_repl_buf = last->id - cur->id + 1;",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": "getClientSockname",
          "new_api": null,
          "old_text": "getClientSockname(client)",
          "new_text": null,
          "old_line_content": "            \" laddr=%s\", getClientSockname(client),",
          "new_line_content": "            \"id=%U\", (unsigned long long)client->id,",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(client->pubsub_channels)",
          "new_text": null,
          "old_line_content": "            \" sub=%i\", (int)dictSize(client->pubsub_channels),",
          "new_line_content": "            \" flags=%s\", flags,",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(client->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "            \" psub=%i\", (int)dictSize(client->pubsub_patterns),",
          "new_line_content": "            \" db=%i\", client->db->id,",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(client->querybuf)",
          "new_text": null,
          "old_line_content": "            \" qbuf=%U\", client->querybuf ? (unsigned long long)sdslen(client->querybuf) : 0,",
          "new_line_content": "            \" multi=%i\", (client->flag.multi) ? client->mstate.count : -1,",
          "content_same": false
        },
        {
          "line": 3354,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(client->reply)",
          "new_text": null,
          "old_line_content": "            \" oll=%U\", (unsigned long long)listLength(client->reply) + used_blocks_of_repl_buf,",
          "new_line_content": "            \" rbp=%U\", (unsigned long long)client->buf_peak,",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    sds o = sdsnewlen(SDS_NOINIT, 200 * listLength(server.clients));",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "sdsclear",
          "new_api": null,
          "old_text": "sdsclear(o)",
          "new_text": null,
          "old_line_content": "    sdsclear(o);",
          "new_line_content": "    client *client;",
          "content_same": false
        },
        {
          "line": 3403,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name->ptr)",
          "new_text": null,
          "old_line_content": "    int len = (name != NULL) ? sdslen(name->ptr) : 0;",
          "new_line_content": "int validateClientName(robj *name, const char **err) {",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "validateClientAttr",
          "new_api": null,
          "old_text": "validateClientAttr(name->ptr)",
          "new_text": null,
          "old_line_content": "    if (validateClientAttr(name->ptr) == C_ERR) {",
          "new_line_content": "    /* We allow setting the client name to an empty string. */",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": "validateClientName",
          "new_api": null,
          "old_text": "validateClientName(name, err)",
          "new_text": null,
          "old_line_content": "    if (validateClientName(name, err) == C_ERR) {",
          "new_line_content": "/* Returns C_OK if the name has been set or C_ERR if the name is invalid. */",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name->ptr)",
          "new_text": null,
          "old_line_content": "    int len = (name != NULL) ? sdslen(name->ptr) : 0;",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->name)",
          "new_text": null,
          "old_line_content": "        if (c->name) decrRefCount(c->name);",
          "new_line_content": "     * the current name. */",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(c->name)",
          "new_text": null,
          "old_line_content": "    if (c->name) decrRefCount(c->name);",
          "new_line_content": "        return C_OK;",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "clientSetName",
          "new_api": null,
          "old_text": "clientSetName(c, name, &err)",
          "new_text": null,
          "old_line_content": "    int result = clientSetName(c, name, &err);",
          "new_line_content": "int clientSetNameOrReply(client *c, robj *name) {",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(attr, \"lib-name\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(attr, \"lib-name\")) {",
          "new_line_content": "    sds val = valob->ptr;",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"Unrecognized option '%s'\", attr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c, \"Unrecognized option '%s'\", attr);",
          "new_line_content": "        destvar = &c->lib_ver;",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": "validateClientAttr",
          "new_api": null,
          "old_text": "validateClientAttr(val)",
          "new_text": null,
          "old_line_content": "    if (validateClientAttr(val) == C_ERR) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"%s cannot contain spaces, newlines or special characters.\", attr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c, \"%s cannot contain spaces, newlines or special characters.\", attr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(*destvar)",
          "new_text": null,
          "old_line_content": "    if (*destvar) decrRefCount(*destvar);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(val)",
          "new_text": null,
          "old_line_content": "    if (sdslen(val)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, shared.ok);",
          "new_line_content": "    } else",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"can only reset normal client connections\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"can only reset normal client connections\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "clearClientConnectionState",
          "new_api": null,
          "old_text": "clearClientConnectionState(c)",
          "new_text": null,
          "old_line_content": "    clearClientConnectionState(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c, \"RESET\")",
          "new_text": null,
          "old_line_content": "    addReplyStatus(c, \"RESET\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c, shared.ok);",
          "new_line_content": "/* Disconnect the current client */",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"help\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr, \"help\")) {",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "            \"    Will not touch LRU/LFU stats when this mode is on.\",",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"id\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"id\") && c->argc == 2) {",
          "new_line_content": "            NULL};",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"info\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"info\") && c->argc == 2) {",
          "new_line_content": "        /* CLIENT ID */",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(o, \"\\n\", 1)",
          "new_text": null,
          "old_line_content": "        o = sdscatlen(o, \"\\n\", 1);",
          "new_line_content": "        /* CLIENT INFO */",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"type\")",
          "new_text": null,
          "old_line_content": "        if (c->argc == 4 && !strcasecmp(c->argv[2]->ptr, \"type\")) {",
          "new_line_content": "        int type = -1;",
          "content_same": false
        },
        {
          "line": 3586,
          "old_api": "getClientTypeByName",
          "new_api": null,
          "old_text": "getClientTypeByName(c->argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "            type = getClientTypeByName(c->argv[3]->ptr);",
          "new_line_content": "        sds o = NULL;",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"id\")",
          "new_text": null,
          "old_line_content": "        } else if (c->argc > 3 && !strcasecmp(c->argv[2]->ptr, \"id\")) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[j], &cid, \"Invalid client ID\")",
          "new_text": null,
          "old_line_content": "                if (getLongLongFromObjectOrReply(c, c->argv[j], &cid, \"Invalid client ID\")) {",
          "new_line_content": "            for (j = 3; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(o)",
          "new_text": null,
          "old_line_content": "                    sdsfree(o);",
          "new_line_content": "                long long cid;",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "lookupClientByID",
          "new_api": null,
          "old_text": "lookupClientByID(cid)",
          "new_text": null,
          "old_line_content": "                client *cl = lookupClientByID(cid);",
          "new_line_content": "                    return;",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(o, \"\\n\", 1)",
          "new_text": null,
          "old_line_content": "                    o = sdscatlen(o, \"\\n\", 1);",
          "new_line_content": "                if (cl) {",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": "getAllClientsInfoString",
          "new_api": null,
          "old_text": "getAllClientsInfoString(type, 0)",
          "new_text": null,
          "old_line_content": "        if (!o) o = getAllClientsInfoString(type, 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(o)",
          "new_text": null,
          "old_line_content": "        addReplyVerbatim(c, o, sdslen(o), \"txt\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.ok);",
          "new_line_content": "            c->flag.reply_skip = 0;",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "new_line_content": "            c->flag.reply_off = 0;",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            if (!c->flag.reply_off) c->flag.reply_skip_next = 1;",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"no-evict\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"no-evict\") && c->argc == 3) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.ok);",
          "new_line_content": "            c->flag.no_evict = 1;",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.ok);",
          "new_line_content": "            c->flag.no_evict = 0;",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"kill\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"kill\")) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"id\")",
          "new_text": null,
          "old_line_content": "                if (!strcasecmp(c->argv[i]->ptr, \"id\") && moreargs) {",
          "new_line_content": "                int moreargs = c->argc > i + 1;",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "getRangeLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getRangeLongFromObjectOrReply(c, c->argv[i + 1], 1, LONG_MAX, &tmp,\n                                                      \"client-id should be greater than 0\")",
          "new_text": null,
          "old_line_content": "                    if (getRangeLongFromObjectOrReply(c, c->argv[i + 1], 1, LONG_MAX, &tmp,",
          "new_line_content": "                    long tmp;",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"maxage\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"maxage\") && moreargs) {",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[i + 1], &tmp,\n                                                     \"maxage is not an integer or out of range\")",
          "new_text": null,
          "old_line_content": "                    if (getLongLongFromObjectOrReply(c, c->argv[i + 1], &tmp,",
          "new_line_content": "                    long long tmp;",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"maxage should be greater than 0\")",
          "new_text": null,
          "old_line_content": "                        addReplyError(c, \"maxage should be greater than 0\");",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"type\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"type\") && moreargs) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": "getClientTypeByName",
          "new_api": null,
          "old_text": "getClientTypeByName(c->argv[i + 1]->ptr)",
          "new_text": null,
          "old_line_content": "                    type = getClientTypeByName(c->argv[i + 1]->ptr);",
          "new_line_content": "                    max_age = tmp;",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"addr\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"addr\") && moreargs) {",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[i + 1]->ptr)",
          "new_text": null,
          "old_line_content": "                    user = ACLGetUserByName(c->argv[i + 1]->ptr, sdslen(c->argv[i + 1]->ptr));",
          "new_line_content": "                    laddr = c->argv[i + 1]->ptr;",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"skipme\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[i]->ptr, \"skipme\") && moreargs) {",
          "new_line_content": "                        return;",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i + 1]->ptr, \"yes\")",
          "new_text": null,
          "old_line_content": "                    if (!strcasecmp(c->argv[i + 1]->ptr, \"yes\")) {",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                        addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "                        skipme = 0;",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                    addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.clients, &li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.clients, &li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "        /* Iterate clients killing all the matching clients. */",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "commandTimeSnapshot",
          "new_api": null,
          "old_text": "commandTimeSnapshot()",
          "new_text": null,
          "old_line_content": "            if (max_age != 0 && (long long)(commandTimeSnapshot() / 1000 - client->ctime) < max_age) continue;",
          "new_line_content": "            if (user && client->user != user) continue;",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(client)",
          "new_text": null,
          "old_line_content": "                freeClient(client);",
          "new_line_content": "                close_this_client = 1;",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"No such client\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"No such client\");",
          "new_line_content": "        if (c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"unblock\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"unblock\") && (c->argc == 3 || c->argc == 4)) {",
          "new_line_content": "         * only after we queued the reply to its output buffers. */",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[3]->ptr, \"timeout\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(c->argv[3]->ptr, \"timeout\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"CLIENT UNBLOCK reason should be TIMEOUT or ERROR\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"CLIENT UNBLOCK reason should be TIMEOUT or ERROR\");",
          "new_line_content": "                unblock_error = 1;",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[2], &id, NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongLongFromObjectOrReply(c, c->argv[2], &id, NULL) != C_OK) return;",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "lookupClientByID",
          "new_api": null,
          "old_text": "lookupClientByID(id)",
          "new_text": null,
          "old_line_content": "        struct client *target = lookupClientByID(id);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": "moduleBlockedClientMayTimeout",
          "new_api": null,
          "old_text": "moduleBlockedClientMayTimeout(target)",
          "new_text": null,
          "old_line_content": "        if (target && target->flag.blocked && moduleBlockedClientMayTimeout(target)) {",
          "new_line_content": "         * The reason is that we assume that if a command doesn't expect to be timedout,",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"getname\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"getname\") && c->argc == 2) {",
          "new_line_content": "        /* CLIENT SETNAME */",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c, c->name)",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c, c->name);",
          "new_line_content": "        /* CLIENT GETNAME */",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"unpause\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"unpause\") && c->argc == 2) {",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.ok);",
          "new_line_content": "        /* CLIENT UNPAUSE */",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[3]->ptr, \"write\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(c->argv[3]->ptr, \"write\")) {",
          "new_line_content": "        int isPauseClientAll = 1;",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"CLIENT PAUSE mode must be WRITE or ALL\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"CLIENT PAUSE mode must be WRITE or ALL\");",
          "new_line_content": "                isPauseClientAll = 0;",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "getTimeoutFromObjectOrReply",
          "new_api": null,
          "old_text": "getTimeoutFromObjectOrReply(c, c->argv[2], &end, UNIT_MILLISECONDS)",
          "new_text": null,
          "old_line_content": "        if (getTimeoutFromObjectOrReply(c, c->argv[2], &end, UNIT_MILLISECONDS) != C_OK) return;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "pauseClientsByClient",
          "new_api": null,
          "old_text": "pauseClientsByClient(end, isPauseClientAll)",
          "new_text": null,
          "old_line_content": "        pauseClientsByClient(end, isPauseClientAll);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr, \"redirect\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(c->argv[j]->ptr, \"redirect\") && moreargs) {",
          "new_line_content": "            int moreargs = (c->argc - 1) - j;",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"A client can only redirect to a single \"\n                                     \"other client\")",
          "new_text": null,
          "old_line_content": "                    addReplyError(c, \"A client can only redirect to a single \"",
          "new_line_content": "                j++;",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[j], &redir, NULL)",
          "new_text": null,
          "old_line_content": "                if (getLongLongFromObjectOrReply(c, c->argv[j], &redir, NULL) != C_OK) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                    zfree(prefix);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "lookupClientByID",
          "new_api": null,
          "old_text": "lookupClientByID(redir)",
          "new_text": null,
          "old_line_content": "                if (lookupClientByID(redir) == NULL) {",
          "new_line_content": "                 * right now, even if it is possible that it gets disconnected",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"The client ID you want redirect to \"\n                                     \"does not exist\")",
          "new_text": null,
          "old_line_content": "                    addReplyError(c, \"The client ID you want redirect to \"",
          "new_line_content": "                 * later. Still a valid sanity check. */",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr, \"bcast\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(c->argv[j]->ptr, \"bcast\")) {",
          "new_line_content": "                    return;",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                zfree(prefix);",
          "new_line_content": "                prefix[numprefix++] = c->argv[j];",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"on\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[2]->ptr, \"on\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"PREFIX option requires BCAST mode to be enabled\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"PREFIX option requires BCAST mode to be enabled\");",
          "new_line_content": "             * among each other and with the current state of the client. */",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                zfree(prefix);",
          "new_line_content": "            if (!(options.tracking_bcast) && numprefix) {",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"You can't switch BCAST mode on/off before disabling \"\n                                     \"tracking for this client, and then re-enabling it with \"\n                                     \"a different mode.\")",
          "new_text": null,
          "old_line_content": "                    addReplyError(c, \"You can't switch BCAST mode on/off before disabling \"",
          "new_line_content": "                int newbcast = !!(options.tracking_bcast);",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                    zfree(prefix);",
          "new_line_content": "                                     \"tracking for this client, and then re-enabling it with \"",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"OPTIN and OPTOUT are not compatible with BCAST\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"OPTIN and OPTOUT are not compatible with BCAST\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                zfree(prefix);",
          "new_line_content": "            if (options.tracking_bcast && (options.tracking_optin || options.tracking_optout)) {",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"You can't specify both OPTIN mode and OPTOUT mode\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"You can't specify both OPTIN mode and OPTOUT mode\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                zfree(prefix);",
          "new_line_content": "            if (options.tracking_optin && options.tracking_optout) {",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"You can't switch OPTIN/OPTOUT mode before disabling \"\n                                 \"tracking for this client, and then re-enabling it with \"\n                                 \"a different mode.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"You can't switch OPTIN/OPTOUT mode before disabling \"",
          "new_line_content": "            if ((options.tracking_optin && c->flag.tracking_optout) ||",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                zfree(prefix);",
          "new_line_content": "                                 \"tracking for this client, and then re-enabling it with \"",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": "checkPrefixCollisionsOrReply",
          "new_api": null,
          "old_text": "checkPrefixCollisionsOrReply(c, prefix, numprefix)",
          "new_text": null,
          "old_line_content": "                if (!checkPrefixCollisionsOrReply(c, prefix, numprefix)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "                    zfree(prefix);",
          "new_line_content": "            if (options.tracking_bcast) {",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "enableTracking",
          "new_api": null,
          "old_text": "enableTracking(c, redir, options, prefix, numprefix)",
          "new_text": null,
          "old_line_content": "            enableTracking(c, redir, options, prefix, numprefix);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(prefix)",
          "new_text": null,
          "old_line_content": "        zfree(prefix);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.ok);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"yes\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt, \"yes\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"CLIENT CACHING YES is only valid when tracking is enabled in OPTIN mode.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"CLIENT CACHING YES is only valid when tracking is enabled in OPTIN mode.\");",
          "new_line_content": "                c->flag.tracking_caching = 1;",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"no\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt, \"no\")) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"CLIENT CACHING NO is only valid when tracking is enabled in OPTOUT mode.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c, \"CLIENT CACHING NO is only valid when tracking is enabled in OPTOUT mode.\");",
          "new_line_content": "                c->flag.tracking_caching = 1;",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"getredir\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"getredir\") && c->argc == 2) {",
          "new_line_content": "        /* Common reply for when we succeeded. */",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, c->client_tracking_redirection)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c, c->client_tracking_redirection);",
          "new_line_content": "        /* CLIENT GETREDIR */",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 3)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, 3);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"flags\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"flags\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "        void *arraylen_ptr = addReplyDeferredLen(c);",
          "new_line_content": "        /* Flags */",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"bcast\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"bcast\");",
          "new_line_content": "        numflags++;",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"optin\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"optin\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"caching-yes\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"caching-yes\");",
          "new_line_content": "            numflags++;",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"optout\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"optout\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"caching-no\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"caching-no\");",
          "new_line_content": "            numflags++;",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"noloop\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"noloop\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"broken_redirect\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"broken_redirect\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": "setDeferredSetLen",
          "new_api": null,
          "old_text": "setDeferredSetLen(c, arraylen_ptr, numflags)",
          "new_text": null,
          "old_line_content": "        setDeferredSetLen(c, arraylen_ptr, numflags);",
          "new_line_content": "            numflags++;",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"redirect\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"redirect\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"prefixes\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"prefixes\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri, \"^\", NULL, 0)",
          "new_text": null,
          "old_line_content": "            raxSeek(&ri, \"^\", NULL, 0);",
          "new_line_content": "            raxIterator ri;",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[2]->ptr, \"off\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[2]->ptr, \"off\")) {",
          "new_line_content": "            c->flag.no_touch = 1;",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.ok);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[next_arg++], &ver,\n                                         \"Protocol version is not an integer or out of range\")",
          "new_text": null,
          "old_line_content": "        if (getLongLongFromObjectOrReply(c, c->argv[next_arg++], &ver,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"-NOPROTO unsupported protocol version\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c, \"-NOPROTO unsupported protocol version\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"AUTH\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt, \"AUTH\") && moreargs >= 2) {",
          "new_line_content": "        int moreargs = (c->argc - 1) - j;",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "redactClientCommandArgument",
          "new_api": null,
          "old_text": "redactClientCommandArgument(c, j + 1)",
          "new_text": null,
          "old_line_content": "            redactClientCommandArgument(c, j + 1);",
          "new_line_content": "        const char *opt = c->argv[j]->ptr;",
          "content_same": false
        },
        {
          "line": 4077,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"SETNAME\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt, \"SETNAME\") && moreargs) {",
          "new_line_content": "            password = c->argv[j + 2];",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "validateClientName",
          "new_api": null,
          "old_text": "validateClientName(clientname, &err)",
          "new_text": null,
          "old_line_content": "            if (validateClientName(clientname, &err) == C_ERR) {",
          "new_line_content": "            clientname = c->argv[j + 1];",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, err)",
          "new_text": null,
          "old_line_content": "                addReplyError(c, err);",
          "new_line_content": "            const char *err = NULL;",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"Syntax error in HELLO option '%s'\", opt)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c, \"Syntax error in HELLO option '%s'\", opt);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": "ACLAuthenticateUser",
          "new_api": null,
          "old_text": "ACLAuthenticateUser(c, username, password, &err)",
          "new_text": null,
          "old_line_content": "        int auth_result = ACLAuthenticateUser(c, username, password, &err);",
          "new_line_content": "    if (username && password) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 114,
      "total_additions": 317,
      "total_deletions": 316,
      "total_api_changes": 747
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 747,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 1110,
    "api_calls_after": 1111,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}
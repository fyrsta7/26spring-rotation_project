{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/9c60fcdae241a7e1dedc2f51d19491d168d66b9b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/9c60fcdae241a7e1dedc2f51d19491d168d66b9b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/9c60fcdae241a7e1dedc2f51d19491d168d66b9b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/9c60fcdae241a7e1dedc2f51d19491d168d66b9b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3942,
          "old_api": "rejectCommandSds",
          "new_api": "commandCheckExistence",
          "old_text": "rejectCommandSds(c, err)",
          "new_text": "commandCheckExistence(c, &err)",
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "        if (!commandCheckExistence(c, &err)) {",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "rejectCommandSds",
          "new_api": "commandCheckArity",
          "old_text": "rejectCommandSds(c, err)",
          "new_text": "commandCheckArity(c->cmd, c->argc, &err)",
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "        if (!commandCheckArity(c->cmd, c->argc, &err)) {",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": "rejectCommandFormat",
          "new_api": "allowProtectedAction",
          "old_text": "rejectCommandFormat(c,\n                                    \"%s command not allowed. If the %s option is set to \\\"local\\\", \"\n                                    \"you can run it from a local connection, otherwise you need to set this option \"\n                                    \"in the configuration file, and then restart the server.\",\n                                    c->cmd->proc == debugCommand ? \"DEBUG\" : \"MODULE\",\n                                    c->cmd->proc == debugCommand ? \"enable-debug-command\" : \"enable-module-command\")",
          "new_text": "allowProtectedAction(server.enable_module_cmd, c)",
          "old_line_content": "                rejectCommandFormat(c,",
          "new_line_content": "                (c->cmd->proc == moduleCommand && !allowProtectedAction(server.enable_module_cmd, c))) {",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": "rejectCommandFormat",
          "new_api": "getAclErrorMessage",
          "old_text": "rejectCommandFormat(c, \"-NOPERM %s\", msg)",
          "new_text": "getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0)",
          "old_line_content": "        rejectCommandFormat(c, \"-NOPERM %s\", msg);",
          "new_line_content": "        sds msg = getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0);",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "sdsfree",
          "new_api": "rejectCommandFormat",
          "old_text": "sdsfree(msg)",
          "new_text": "rejectCommandFormat(c, \"-NOPERM %s\", msg)",
          "old_line_content": "        sdsfree(msg);",
          "new_line_content": "        rejectCommandFormat(c, \"-NOPERM %s\", msg);",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "clusterNodeIsMyself",
          "new_api": "getNodeByQuery",
          "old_text": "clusterNodeIsMyself(n)",
          "new_text": "getNodeByQuery(c, c->cmd, c->argv, c->argc, &c->slot, &error_code)",
          "old_line_content": "        if (n == NULL || !clusterNodeIsMyself(n)) {",
          "new_line_content": "        clusterNode *n = getNodeByQuery(c, c->cmd, c->argv, c->argc, &c->slot, &error_code);",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "performEvictions",
          "new_api": "isInsideYieldingLongCommand",
          "old_text": "performEvictions()",
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "        int out_of_memory = (performEvictions() == EVICT_FAIL);",
          "new_line_content": "    if (server.maxmemory && !isInsideYieldingLongCommand()) {",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": "rejectCommandSds",
          "new_api": "sdslen",
          "old_text": "rejectCommandSds(c, err)",
          "new_text": "sdslen(err)",
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "            sdssubstr(err, 0, sdslen(err) - 2);",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "rejectCommand",
          "new_api": "checkGoodReplicasStatus",
          "old_text": "rejectCommand(c, shared.noreplicaserr)",
          "new_text": "checkGoodReplicasStatus()",
          "old_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "new_line_content": "    if (is_write_command && !checkGoodReplicasStatus()) {",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": "scriptIsEval",
          "new_api": "rejectCommand",
          "old_text": "scriptIsEval()",
          "new_text": "rejectCommand(c, shared.slowmoduleerr)",
          "old_line_content": "        } else if (scriptIsEval()) {",
          "new_line_content": "            rejectCommand(c, shared.slowmoduleerr);",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "rejectCommand",
          "new_api": "scriptIsEval",
          "old_text": "rejectCommand(c, shared.slowevalerr)",
          "new_text": "scriptIsEval()",
          "old_line_content": "            rejectCommand(c, shared.slowevalerr);",
          "new_line_content": "        } else if (scriptIsEval()) {",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "blockPostponeClient",
          "new_api": "isPausedActions",
          "old_text": "blockPostponeClient(c)",
          "new_text": "isPausedActions(PAUSE_ACTION_CLIENT_WRITE)",
          "old_line_content": "        blockPostponeClient(c);",
          "new_line_content": "                             ((isPausedActions(PAUSE_ACTION_CLIENT_WRITE)) && is_may_replicate_command))) {",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": "addReply",
          "new_api": "queueMultiCommand",
          "old_text": "addReply(c, shared.queued)",
          "new_text": "queueMultiCommand(c, cmd_flags)",
          "old_line_content": "        addReply(c, shared.queued);",
          "new_line_content": "        queueMultiCommand(c, cmd_flags);",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": "handleClientsBlockedOnKeys",
          "new_api": "call",
          "old_text": "handleClientsBlockedOnKeys()",
          "new_text": "call(c, flags)",
          "old_line_content": "        if (listLength(server.ready_keys) && !isInsideYieldingLongCommand()) handleClientsBlockedOnKeys();",
          "new_line_content": "        call(c, flags);",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": "zmalloc",
          "new_api": "raxFind",
          "old_text": "zmalloc(sizeof(*error))",
          "new_text": "raxFind(server.errors, (unsigned char *)fullerr, namelen, &result)",
          "old_line_content": "        struct serverError *error = zmalloc(sizeof(*error));",
          "new_line_content": "    if (!raxFind(server.errors, (unsigned char *)fullerr, namelen, &result)) {",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "unlink",
          "new_api": "serverLog",
          "old_text": "unlink(server.unixsocket)",
          "new_text": "serverLog(LL_NOTICE, \"Removing the unix socket file.\")",
          "old_line_content": "        if (unlink(server.unixsocket) != 0)",
          "new_line_content": "        serverLog(LL_NOTICE, \"Removing the unix socket file.\");",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "strerror",
          "new_api": "unlink",
          "old_text": "strerror(errno)",
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "            serverLog(LL_WARNING, \"Error removing the unix socket file: %s\", strerror(errno));",
          "new_line_content": "        if (unlink(server.unixsocket) != 0)",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": "serverLog",
          "new_api": "sdsempty",
          "old_text": "serverLog(LL_NOTICE, \"User requested shutdown... (user request from '%s')\", client)",
          "new_text": "sdsempty()",
          "old_line_content": "        serverLog(LL_NOTICE, \"User requested shutdown... (user request from '%s')\", client);",
          "new_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(client)",
          "new_text": "serverLog(LL_NOTICE, \"User requested shutdown... (user request from '%s')\", client)",
          "old_line_content": "        sdsfree(client);",
          "new_line_content": "        serverLog(LL_NOTICE, \"User requested shutdown... (user request from '%s')\", client);",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "pauseActions",
          "new_api": "sendGetackToReplicas",
          "old_text": "pauseActions(PAUSE_DURING_SHUTDOWN, LLONG_MAX, PAUSE_ACTIONS_CLIENT_WRITE_SET)",
          "new_text": "sendGetackToReplicas()",
          "old_line_content": "        pauseActions(PAUSE_DURING_SHUTDOWN, LLONG_MAX, PAUSE_ACTIONS_CLIENT_WRITE_SET);",
          "new_line_content": "        if (!isPausedActions(PAUSE_ACTION_REPLICA)) sendGetackToReplicas();",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "serverLog",
          "new_api": "pauseActions",
          "old_text": "serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\")",
          "new_text": "pauseActions(PAUSE_DURING_SHUTDOWN, LLONG_MAX, PAUSE_ACTIONS_CLIENT_WRITE_SET)",
          "old_line_content": "        serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\");",
          "new_line_content": "        pauseActions(PAUSE_DURING_SHUTDOWN, LLONG_MAX, PAUSE_ACTIONS_CLIENT_WRITE_SET);",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.replicas, &li)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    listRewind(server.replicas, &li);",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "        client *replica = listNodeValue(ln);",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "unpauseActions",
          "new_api": "replyToClientsBlockedOnShutdown",
          "old_text": "unpauseActions(PAUSE_DURING_SHUTDOWN)",
          "new_text": "replyToClientsBlockedOnShutdown()",
          "old_line_content": "    unpauseActions(PAUSE_DURING_SHUTDOWN);",
          "new_line_content": "    replyToClientsBlockedOnShutdown();",
          "content_same": false
        },
        {
          "line": 4378,
          "old_api": "cancelShutdown",
          "new_api": "isShutdownInitiated",
          "old_text": "cancelShutdown()",
          "new_text": "isShutdownInitiated()",
          "old_line_content": "        cancelShutdown();",
          "new_line_content": "    if (isShutdownInitiated()) {",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&replicas_iter)",
          "new_text": "listRewind(server.replicas, &replicas_iter)",
          "old_line_content": "    while ((replicas_list_node = listNext(&replicas_iter)) != NULL) {",
          "new_line_content": "    listRewind(server.replicas, &replicas_iter);",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(replicas_list_node)",
          "new_text": "listNext(&replicas_iter)",
          "old_line_content": "        client *replica = listNodeValue(replicas_list_node);",
          "new_line_content": "    while ((replicas_list_node = listNext(&replicas_iter)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": "serverLog",
          "new_api": "time",
          "old_text": "serverLog(LL_NOTICE, \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",\n                      replicationGetReplicaName(replica), server.primary_repl_offset - replica->repl_ack_off, lag,\n                      replstateToString(replica->repl_state))",
          "new_text": "time(NULL)",
          "old_line_content": "            serverLog(LL_NOTICE, \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",",
          "new_line_content": "            long lag = replica->repl_state == REPLICA_STATE_ONLINE ? time(NULL) - replica->repl_ack_time : 0;",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "replicationGetReplicaName",
          "new_api": "serverLog",
          "old_text": "replicationGetReplicaName(replica)",
          "new_text": "serverLog(LL_NOTICE, \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",\n                      replicationGetReplicaName(replica), server.primary_repl_offset - replica->repl_ack_off, lag,\n                      replstateToString(replica->repl_state))",
          "old_line_content": "                      replicationGetReplicaName(replica), server.primary_repl_offset - replica->repl_ack_off, lag,",
          "new_line_content": "            serverLog(LL_NOTICE, \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",",
          "content_same": false
        },
        {
          "line": 4412,
          "old_api": "replstateToString",
          "new_api": "replicationGetReplicaName",
          "old_text": "replstateToString(replica->repl_state)",
          "new_text": "replicationGetReplicaName(replica)",
          "old_line_content": "                      replstateToString(replica->repl_state));",
          "new_line_content": "                      replicationGetReplicaName(replica), server.primary_repl_offset - replica->repl_ack_off, lag,",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "killRDBChild",
          "new_api": "serverLog",
          "old_text": "killRDBChild()",
          "new_text": "serverLog(LL_WARNING, \"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "        killRDBChild();",
          "new_line_content": "        serverLog(LL_WARNING, \"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": "TerminateModuleForkChild",
          "new_api": "serverLog",
          "old_text": "TerminateModuleForkChild(server.child_pid, 0)",
          "new_text": "serverLog(LL_WARNING, \"There is a module fork child. Killing it!\")",
          "old_line_content": "        TerminateModuleForkChild(server.child_pid, 0);",
          "new_line_content": "        serverLog(LL_WARNING, \"There is a module fork child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "killAppendOnlyChild",
          "new_api": "serverLog",
          "old_text": "killAppendOnlyChild()",
          "new_text": "serverLog(LL_WARNING, \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "        killAppendOnlyChild();",
          "new_line_content": "        serverLog(LL_WARNING, \"There is a child rewriting the AOF. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": "flushAppendOnlyFile",
          "new_api": "serverLog",
          "old_text": "flushAppendOnlyFile(1)",
          "new_text": "serverLog(LL_NOTICE, \"Calling fsync() on the AOF file.\")",
          "old_line_content": "        flushAppendOnlyFile(1);",
          "new_line_content": "        serverLog(LL_NOTICE, \"Calling fsync() on the AOF file.\");",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "valkey_fsync",
          "new_api": "flushAppendOnlyFile",
          "old_text": "valkey_fsync(server.aof_fd)",
          "new_text": "flushAppendOnlyFile(1)",
          "old_line_content": "        if (valkey_fsync(server.aof_fd) == -1) {",
          "new_line_content": "        flushAppendOnlyFile(1);",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": "strerror",
          "new_api": "valkey_fsync",
          "old_text": "strerror(errno)",
          "new_text": "valkey_fsync(server.aof_fd)",
          "old_line_content": "            serverLog(LL_WARNING, \"Fail to fsync the AOF file: %s.\", strerror(errno));",
          "new_line_content": "        if (valkey_fsync(server.aof_fd) == -1) {",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "unlink",
          "new_api": "serverLog",
          "old_text": "unlink(server.pidfile)",
          "new_text": "serverLog(LL_NOTICE, \"Removing the pid file.\")",
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "        serverLog(LL_NOTICE, \"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": "cancelShutdown",
          "new_api": "serverLog",
          "old_text": "cancelShutdown()",
          "new_text": "serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\")",
          "old_line_content": "    cancelShutdown();",
          "new_line_content": "    serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\");",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": "strerror",
          "new_api": "sdsempty",
          "old_text": "strerror(server.aof_last_write_errno)",
          "new_text": "sdsempty()",
          "old_line_content": "                        strerror(server.aof_last_write_errno));",
          "new_line_content": "        ret = sdscatfmt(sdsempty(), \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "addReply",
          "old_text": "addReplyBulkCBuffer(c, \"pong\", 4)",
          "new_text": "addReply(c, shared.mbulkhdr[2])",
          "old_line_content": "        addReplyBulkCBuffer(c, \"pong\", 4);",
          "new_line_content": "        addReply(c, shared.mbulkhdr[2]);",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": "addReplyBulkLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulkLongLong(c, server.unixtime)",
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "    addReplyBulkLongLong(c, server.unixtime);",
          "new_line_content": "    addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, args[j].key_spec_index)",
          "new_text": "addReplyBulkCString(c, \"key_spec_index\")",
          "old_line_content": "            addReplyLongLong(c, args[j].key_spec_index);",
          "new_line_content": "            addReplyBulkCString(c, \"key_spec_index\");",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "addReplyFlagsForArg",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyFlagsForArg(c, args[j].flags)",
          "new_text": "addReplyBulkCString(c, \"flags\")",
          "old_line_content": "            addReplyFlagsForArg(c, args[j].flags);",
          "new_line_content": "            addReplyBulkCString(c, \"flags\");",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": "addReplyCommandArgList",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandArgList(c, args[j].subargs, args[j].num_args)",
          "new_text": "addReplyBulkCString(c, \"arguments\")",
          "old_line_content": "            addReplyCommandArgList(c, args[j].subargs, args[j].num_args);",
          "new_line_content": "            addReplyBulkCString(c, \"arguments\");",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBool",
          "old_text": "addReplyLongLong(c, curr->value.integer)",
          "new_text": "addReplyBool(c, curr->value.boolean)",
          "old_line_content": "        case (JSON_TYPE_INTEGER): addReplyLongLong(c, curr->value.integer); break;",
          "new_line_content": "        case (JSON_TYPE_BOOLEAN): addReplyBool(c, curr->value.boolean); break;",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, curr->value.string)",
          "new_text": "addReplyLongLong(c, curr->value.integer)",
          "old_line_content": "        case (JSON_TYPE_STRING): addReplyBulkCString(c, curr->value.string); break;",
          "new_line_content": "        case (JSON_TYPE_INTEGER): addReplyLongLong(c, curr->value.integer); break;",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": "addReplyJson",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyJson(c, curr->value.object)",
          "new_text": "addReplyBulkCString(c, curr->value.string)",
          "old_line_content": "        case (JSON_TYPE_OBJECT): addReplyJson(c, curr->value.object); break;",
          "new_line_content": "        case (JSON_TYPE_STRING): addReplyBulkCString(c, curr->value.string); break;",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulkCString(c, cmd->history[j].since)",
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "        addReplyBulkCString(c, cmd->history[j].since);",
          "new_line_content": "        addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": "addReplyFlagsForKeyArgs",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyFlagsForKeyArgs(c, cmd->key_specs[i].flags)",
          "new_text": "addReplyBulkCString(c, \"flags\")",
          "old_line_content": "        addReplyFlagsForKeyArgs(c, cmd->key_specs[i].flags);",
          "new_line_content": "        addReplyBulkCString(c, \"flags\");",
          "content_same": false
        },
        {
          "line": 4821,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 0)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 0);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4833,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 1)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 1);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4834,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"index\")",
          "new_text": "addReplyMapLen(c, 1)",
          "old_line_content": "            addReplyBulkCString(c, \"index\");",
          "new_line_content": "            addReplyMapLen(c, 1);",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].bs.index.pos)",
          "new_text": "addReplyBulkCString(c, \"index\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].bs.index.pos);",
          "new_line_content": "            addReplyBulkCString(c, \"index\");",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"keyword\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"keyword\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom)",
          "new_text": "addReplyBulkCString(c, \"startfrom\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom);",
          "new_line_content": "            addReplyBulkCString(c, \"startfrom\");",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 0)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 0);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 3)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 3);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"lastkey\")",
          "new_text": "addReplyMapLen(c, 3)",
          "old_line_content": "            addReplyBulkCString(c, \"lastkey\");",
          "new_line_content": "            addReplyMapLen(c, 3);",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey)",
          "new_text": "addReplyBulkCString(c, \"lastkey\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey);",
          "new_line_content": "            addReplyBulkCString(c, \"lastkey\");",
          "content_same": false
        },
        {
          "line": 4871,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"keystep\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey)",
          "old_line_content": "            addReplyBulkCString(c, \"keystep\");",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey);",
          "content_same": false
        },
        {
          "line": 4872,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep)",
          "new_text": "addReplyBulkCString(c, \"keystep\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep);",
          "new_line_content": "            addReplyBulkCString(c, \"keystep\");",
          "content_same": false
        },
        {
          "line": 4873,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"limit\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep)",
          "old_line_content": "            addReplyBulkCString(c, \"limit\");",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep);",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.limit)",
          "new_text": "addReplyBulkCString(c, \"limit\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.limit);",
          "new_line_content": "            addReplyBulkCString(c, \"limit\");",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "            addReplyBulkCString(c, \"type\");",
          "new_line_content": "            addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyMapLen(c, 3)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            addReplyMapLen(c, 3);",
          "new_line_content": "            addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"keynumidx\")",
          "new_text": "addReplyMapLen(c, 3)",
          "old_line_content": "            addReplyBulkCString(c, \"keynumidx\");",
          "new_line_content": "            addReplyMapLen(c, 3);",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx)",
          "new_text": "addReplyBulkCString(c, \"keynumidx\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx);",
          "new_line_content": "            addReplyBulkCString(c, \"keynumidx\");",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"firstkey\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx)",
          "old_line_content": "            addReplyBulkCString(c, \"firstkey\");",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx);",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey)",
          "new_text": "addReplyBulkCString(c, \"firstkey\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey);",
          "new_line_content": "            addReplyBulkCString(c, \"firstkey\");",
          "content_same": false
        },
        {
          "line": 4887,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"keystep\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey)",
          "old_line_content": "            addReplyBulkCString(c, \"keystep\");",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey);",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep)",
          "new_text": "addReplyBulkCString(c, \"keystep\")",
          "old_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep);",
          "new_line_content": "            addReplyBulkCString(c, \"keystep\");",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": "dictNext",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetSafeIterator(cmd->subcommands_dict)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(cmd->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        struct serverCommand *sub = (struct serverCommand *)dictGetVal(de);",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "sdslen",
          "new_api": "dictGetVal",
          "old_text": "sdslen(sub->fullname)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        if (use_map) addReplyBulkCBuffer(c, sub->fullname, sdslen(sub->fullname));",
          "new_line_content": "        struct serverCommand *sub = (struct serverCommand *)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "reply_function",
          "new_api": "sdslen",
          "old_text": "reply_function(c, sub)",
          "new_text": "sdslen(sub->fullname)",
          "old_line_content": "        reply_function(c, sub);",
          "new_line_content": "        if (use_map) addReplyBulkCBuffer(c, sub->fullname, sdslen(sub->fullname));",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": "sdslen",
          "new_api": "addReplyArrayLen",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "addReplyArrayLen(c, 10)",
          "old_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "        addReplyArrayLen(c, 10);",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "addReplyLongLong",
          "new_api": "sdslen",
          "old_text": "addReplyLongLong(c, cmd->arity)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "        addReplyLongLong(c, cmd->arity);",
          "new_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 4935,
          "old_api": "addReplyFlagsForCommand",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyFlagsForCommand(c, cmd)",
          "new_text": "addReplyLongLong(c, cmd->arity)",
          "old_line_content": "        addReplyFlagsForCommand(c, cmd);",
          "new_line_content": "        addReplyLongLong(c, cmd->arity);",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyFlagsForCommand",
          "old_text": "addReplyLongLong(c, firstkey)",
          "new_text": "addReplyFlagsForCommand(c, cmd)",
          "old_line_content": "        addReplyLongLong(c, firstkey);",
          "new_line_content": "        addReplyFlagsForCommand(c, cmd);",
          "content_same": false
        },
        {
          "line": 4939,
          "old_api": "addReplyCommandCategories",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyCommandCategories(c, cmd)",
          "new_text": "addReplyLongLong(c, keystep)",
          "old_line_content": "        addReplyCommandCategories(c, cmd);",
          "new_line_content": "        addReplyLongLong(c, keystep);",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "addReplyCommandTips",
          "new_api": "addReplyCommandCategories",
          "old_text": "addReplyCommandTips(c, cmd)",
          "new_text": "addReplyCommandCategories(c, cmd)",
          "old_line_content": "        addReplyCommandTips(c, cmd);",
          "new_line_content": "        addReplyCommandCategories(c, cmd);",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": "addReplyCommandKeySpecs",
          "new_api": "addReplyCommandTips",
          "old_text": "addReplyCommandKeySpecs(c, cmd)",
          "new_text": "addReplyCommandTips(c, cmd)",
          "old_line_content": "        addReplyCommandKeySpecs(c, cmd);",
          "new_line_content": "        addReplyCommandTips(c, cmd);",
          "content_same": false
        },
        {
          "line": 4942,
          "old_api": "addReplyCommandSubCommands",
          "new_api": "addReplyCommandKeySpecs",
          "old_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0)",
          "new_text": "addReplyCommandKeySpecs(c, cmd)",
          "old_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0);",
          "new_line_content": "        addReplyCommandKeySpecs(c, cmd);",
          "content_same": false
        },
        {
          "line": 4976,
          "old_api": "commandGroupStr",
          "new_api": "addReplyBulkCString",
          "old_text": "commandGroupStr(cmd->group)",
          "new_text": "addReplyBulkCString(c, \"group\")",
          "old_line_content": "    addReplyBulkCString(c, commandGroupStr(cmd->group));",
          "new_line_content": "    addReplyBulkCString(c, \"group\");",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": "moduleNameFromCommand",
          "new_api": "addReplyBulkCString",
          "old_text": "moduleNameFromCommand(cmd)",
          "new_text": "addReplyBulkCString(c, \"module\")",
          "old_line_content": "        addReplyBulkCString(c, moduleNameFromCommand(cmd));",
          "new_line_content": "        addReplyBulkCString(c, \"module\");",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": "addReplyDocFlagsForCommand",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyDocFlagsForCommand(c, cmd)",
          "new_text": "addReplyBulkCString(c, \"doc_flags\")",
          "old_line_content": "        addReplyDocFlagsForCommand(c, cmd);",
          "new_line_content": "        addReplyBulkCString(c, \"doc_flags\");",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "addReplyCommandHistory",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandHistory(c, cmd)",
          "new_text": "addReplyBulkCString(c, \"history\")",
          "old_line_content": "        addReplyCommandHistory(c, cmd);",
          "new_line_content": "        addReplyBulkCString(c, \"history\");",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": "addReplyJson",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyJson(c, cmd->reply_schema)",
          "new_text": "addReplyBulkCString(c, \"reply_schema\")",
          "old_line_content": "        addReplyJson(c, cmd->reply_schema);",
          "new_line_content": "        addReplyBulkCString(c, \"reply_schema\");",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": "addReplyCommandArgList",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandArgList(c, cmd->args, cmd->num_args)",
          "new_text": "addReplyBulkCString(c, \"arguments\")",
          "old_line_content": "        addReplyCommandArgList(c, cmd->args, cmd->num_args);",
          "new_line_content": "        addReplyBulkCString(c, \"arguments\");",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "addReplyCommandSubCommands",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1)",
          "new_text": "addReplyBulkCString(c, \"subcommands\")",
          "old_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1);",
          "new_line_content": "        addReplyBulkCString(c, \"subcommands\");",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": "addReplyError",
          "new_api": "doesCommandHaveKeys",
          "old_text": "addReplyError(c, \"The command has no key arguments\")",
          "new_text": "doesCommandHaveKeys(cmd)",
          "old_line_content": "        addReplyError(c, \"The command has no key arguments\");",
          "new_line_content": "    } else if (!doesCommandHaveKeys(cmd)) {",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "addReplyBulk",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulk(c, c->argv[result.keys[j].pos + 2])",
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "                addReplyBulk(c, c->argv[result.keys[j].pos + 2]);",
          "new_line_content": "                addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": "addReplyFlagsForKeyArgs",
          "new_api": "addReplyBulk",
          "old_text": "addReplyFlagsForKeyArgs(c, result.keys[j].flags)",
          "new_text": "addReplyBulk(c, c->argv[result.keys[j].pos + 2])",
          "old_line_content": "                addReplyFlagsForKeyArgs(c, result.keys[j].flags);",
          "new_line_content": "                addReplyBulk(c, c->argv[result.keys[j].pos + 2]);",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "dictGetIterator",
          "new_api": "dictSize",
          "old_text": "dictGetIterator(server.commands)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "    di = dictGetIterator(server.commands);",
          "new_line_content": "    addReplyArrayLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5074,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        addReplyCommandInfo(c, dictGetVal(de));",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": "serverPanic",
          "new_api": "sdslen",
          "old_text": "serverPanic(\"Invalid filter type %d\", filter->type)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "    default: serverPanic(\"Invalid filter type %d\", filter->type);",
          "new_line_content": "        return !stringmatchlen(filter->arg, sdslen(filter->arg), cmd->fullname, sdslen(cmd->fullname), 1);",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        struct serverCommand *cmd = dictGetVal(de);",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": "shouldFilterFromCommandList",
          "new_api": "dictGetVal",
          "old_text": "shouldFilterFromCommandList(cmd, &filter)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        if (!shouldFilterFromCommandList(cmd, &filter)) {",
          "new_line_content": "        struct serverCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": "sdslen",
          "new_api": "shouldFilterFromCommandList",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "shouldFilterFromCommandList(cmd, &filter)",
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "        if (!shouldFilterFromCommandList(cmd, &filter)) {",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        struct serverCommand *cmd = dictGetVal(de);",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5153,
          "old_api": "sdslen",
          "new_api": "dictGetVal",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "        struct serverCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "dictGetIterator",
          "new_api": "dictSize",
          "old_text": "dictGetIterator(server.commands)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "        di = dictGetIterator(server.commands);",
          "new_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            addReplyCommandInfo(c, dictGetVal(de));",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": "dictGetIterator",
          "new_api": "dictSize",
          "old_text": "dictGetIterator(server.commands)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "        di = dictGetIterator(server.commands);",
          "new_line_content": "        addReplyMapLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            struct serverCommand *cmd = dictGetVal(de);",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": "sdslen",
          "new_api": "dictGetVal",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "            struct serverCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "addReplyCommandDocs",
          "new_api": "sdslen",
          "old_text": "addReplyCommandDocs(c, cmd)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "            addReplyCommandDocs(c, cmd);",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "addReplyCommandDocs",
          "new_api": "sdslen",
          "old_text": "addReplyCommandDocs(c, cmd)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "            addReplyCommandDocs(c, cmd);",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "trimDoubleString",
          "new_api": "snprintf",
          "old_text": "trimDoubleString(fbuf, len)",
          "new_text": "snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j])",
          "old_line_content": "        trimDoubleString(fbuf, len);",
          "new_line_content": "        size_t len = snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j]);",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": "sdscatprintf",
          "new_api": "trimDoubleString",
          "old_text": "sdscatprintf(info, \"p%s=%.3f\", fbuf,\n                            ((double)hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])) /\n                                1000.0f)",
          "new_text": "trimDoubleString(fbuf, len)",
          "old_line_content": "        info = sdscatprintf(info, \"p%s=%.3f\", fbuf,",
          "new_line_content": "        trimDoubleString(fbuf, len);",
          "content_same": false
        },
        {
          "line": 5323,
          "old_api": "hdr_value_at_percentile",
          "new_api": "sdscatprintf",
          "old_text": "hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])",
          "new_text": "sdscatprintf(info, \"p%s=%.3f\", fbuf,\n                            ((double)hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])) /\n                                1000.0f)",
          "old_line_content": "                            ((double)hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])) /",
          "new_line_content": "        info = sdscatprintf(info, \"p%s=%.3f\", fbuf,",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "zmalloc",
          "new_api": "mempbrk",
          "old_text": "zmalloc(len + 1)",
          "new_text": "mempbrk(s, len, unsafe_info_chars, sizeof(unsafe_info_chars) - 1)",
          "old_line_content": "    char *new = *tmp = zmalloc(len + 1);",
          "new_line_content": "    if (mempbrk(s, len, unsafe_info_chars, sizeof(unsafe_info_chars) - 1) == NULL) return s;",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": "dictNext",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetSafeIterator(commands)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    di = dictGetSafeIterator(commands);",
          "content_same": false
        },
        {
          "line": 5402,
          "old_api": "dictNext",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetSafeIterator(commands)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    di = dictGetSafeIterator(commands);",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": "sdslen",
          "new_api": "fillPercentileDistributionLatencies",
          "old_text": "sdslen(c->fullname)",
          "new_text": "fillPercentileDistributionLatencies(\n                info, getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->latency_histogram)",
          "old_line_content": "                info, getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->latency_histogram);",
          "new_line_content": "            info = fillPercentileDistributionLatencies(",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": "zfree",
          "new_api": "sdslen",
          "old_text": "zfree(tmpsafe)",
          "new_text": "sdslen(c->fullname)",
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "                info, getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->latency_histogram);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": "sdsfree",
          "new_api": "sdsnew",
          "old_text": "sdsfree(section)",
          "new_text": "sdsnew(*sections)",
          "old_line_content": "        if (dictAdd(section_dict, section, NULL) == DICT_ERR) sdsfree(section);",
          "new_line_content": "        sds section = sdsnew(*sections);",
          "content_same": false
        },
        {
          "line": 5462,
          "old_api": "dictExpand",
          "new_api": "dictCreate",
          "old_text": "dictExpand(cached_default_info_sections, 16)",
          "new_text": "dictCreate(&stringSetDictType)",
          "old_line_content": "        dictExpand(cached_default_info_sections, 16);",
          "new_line_content": "        cached_default_info_sections = dictCreate(&stringSetDictType);",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": "addInfoSectionsToDict",
          "new_api": "dictExpand",
          "old_text": "addInfoSectionsToDict(cached_default_info_sections, defaults)",
          "new_text": "dictExpand(cached_default_info_sections, 16)",
          "old_line_content": "        addInfoSectionsToDict(cached_default_info_sections, defaults);",
          "new_line_content": "        dictExpand(cached_default_info_sections, 16);",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "min",
          "new_api": "dictCreate",
          "old_text": "min(argc, 16)",
          "new_text": "dictCreate(&stringSetDictType)",
          "old_line_content": "    dictExpand(section_dict, min(argc, 16));",
          "new_line_content": "    dict *section_dict = dictCreate(&stringSetDictType);",
          "content_same": false
        },
        {
          "line": 5471,
          "old_api": "addInfoSectionsToDict",
          "new_api": "strcasecmp",
          "old_text": "addInfoSectionsToDict(section_dict, defaults)",
          "new_text": "strcasecmp(argv[i]->ptr, \"default\")",
          "old_line_content": "            addInfoSectionsToDict(section_dict, defaults);",
          "new_line_content": "        if (!strcasecmp(argv[i]->ptr, \"default\")) {",
          "content_same": false
        },
        {
          "line": 5472,
          "old_api": "strcasecmp",
          "new_api": "addInfoSectionsToDict",
          "old_text": "strcasecmp(argv[i]->ptr, \"all\")",
          "new_text": "addInfoSectionsToDict(section_dict, defaults)",
          "old_line_content": "        } else if (!strcasecmp(argv[i]->ptr, \"all\")) {",
          "new_line_content": "            addInfoSectionsToDict(section_dict, defaults);",
          "content_same": false
        },
        {
          "line": 5479,
          "old_api": "sdsfree",
          "new_api": "sdsnew",
          "old_text": "sdsfree(section)",
          "new_text": "sdsnew(argv[i]->ptr)",
          "old_line_content": "            if (dictAdd(section_dict, section, NULL) != DICT_OK) sdsfree(section);",
          "new_line_content": "            sds section = sdsnew(argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": "serverGitDirty",
          "new_api": "serverGitSHA1",
          "old_text": "serverGitDirty()",
          "new_text": "serverGitSHA1()",
          "old_line_content": "                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,",
          "new_line_content": "                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": "serverBuildIdString",
          "new_api": "serverGitDirty",
          "old_text": "serverBuildIdString()",
          "new_text": "serverGitDirty()",
          "old_line_content": "                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),",
          "new_line_content": "                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "aeGetApiName",
          "new_api": "monotonicInfoString",
          "old_text": "aeGetApiName()",
          "new_text": "monotonicInfoString()",
          "old_line_content": "                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),",
          "new_line_content": "                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),",
          "content_same": false
        },
        {
          "line": 5581,
          "old_api": "sdscatfmt",
          "new_api": "isShutdownInitiated",
          "old_text": "sdscatfmt(info, \"shutdown_in_milliseconds:%I\\r\\n\",\n                             (int64_t)(server.shutdown_mstime - commandTimeSnapshot()))",
          "new_text": "isShutdownInitiated()",
          "old_line_content": "            info = sdscatfmt(info, \"shutdown_in_milliseconds:%I\\r\\n\",",
          "new_line_content": "        if (isShutdownInitiated()) {",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": "commandTimeSnapshot",
          "new_api": "sdscatfmt",
          "old_text": "commandTimeSnapshot()",
          "new_text": "sdscatfmt(info, \"shutdown_in_milliseconds:%I\\r\\n\",\n                             (int64_t)(server.shutdown_mstime - commandTimeSnapshot()))",
          "old_line_content": "                             (int64_t)(server.shutdown_mstime - commandTimeSnapshot()));",
          "new_line_content": "            info = sdscatfmt(info, \"shutdown_in_milliseconds:%I\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": "totalNumberOfStatefulKeys",
          "new_api": "getExpansiveClientsInfo",
          "old_text": "totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys)",
          "new_text": "getExpansiveClientsInfo(&maxin, &maxout)",
          "old_line_content": "        totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys);",
          "new_line_content": "        getExpansiveClientsInfo(&maxin, &maxout);",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": "sdscat",
          "new_api": "totalNumberOfStatefulKeys",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys)",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "        totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys);",
          "content_same": false
        },
        {
          "line": 5596,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(\n            info,\n            \"# Clients\\r\\n\" FMTARGS(\n                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),\n                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n                \"maxclients:%u\\r\\n\", server.maxclients,\n                \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n                \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n                \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n                \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n                \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n                \"watching_clients:%d\\r\\n\", server.watching_clients,\n                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),\n                \"total_watched_keys:%lu\\r\\n\", watched_keys,\n                \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n                \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey))",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5599,
          "old_api": "listLength",
          "new_api": "FMTARGS",
          "old_text": "listLength(server.replicas)",
          "new_text": "FMTARGS(\n                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),\n                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n                \"maxclients:%u\\r\\n\", server.maxclients,\n                \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n                \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n                \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n                \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n                \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n                \"watching_clients:%d\\r\\n\", server.watching_clients,\n                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),\n                \"total_watched_keys:%lu\\r\\n\", watched_keys,\n                \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n                \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey)",
          "old_line_content": "                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),",
          "new_line_content": "            \"# Clients\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5600,
          "old_api": "getClusterConnectionsCount",
          "new_api": "listLength",
          "old_text": "getClusterConnectionsCount()",
          "new_text": "listLength(server.replicas)",
          "old_line_content": "                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),",
          "new_line_content": "                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),",
          "content_same": false
        },
        {
          "line": 5627,
          "old_api": "evalMemory",
          "new_api": "evictPolicyToString",
          "old_text": "evalMemory()",
          "new_text": "evictPolicyToString()",
          "old_line_content": "        long long memory_lua = evalMemory();",
          "new_line_content": "        const char *evict_policy = evictPolicyToString();",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "functionsMemory",
          "new_api": "evalMemory",
          "old_text": "functionsMemory()",
          "new_text": "evalMemory()",
          "old_line_content": "        long long memory_functions = functionsMemory();",
          "new_line_content": "        long long memory_lua = evalMemory();",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "getMemoryOverheadData",
          "new_api": "functionsMemory",
          "old_text": "getMemoryOverheadData()",
          "new_text": "functionsMemory()",
          "old_line_content": "        struct serverMemOverhead *mh = getMemoryOverheadData();",
          "new_line_content": "        long long memory_functions = functionsMemory();",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(\n            info,\n            \"# Memory\\r\\n\" FMTARGS(\n                \"used_memory:%zu\\r\\n\", zmalloc_used,\n                \"used_memory_human:%s\\r\\n\", hmem,\n                \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n                \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n                \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n                \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n                \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n                \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n                \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n                \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n                \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n                \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n                \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n                \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n                \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n                \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n                \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n                \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n                \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n                \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n                \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n                \"number_of_functions:%lu\\r\\n\", functionsNum(),\n                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n                \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n                \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n                \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n                \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n                \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n                \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n                \"maxmemory:%lld\\r\\n\", server.maxmemory,\n                \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n                \"maxmemory_policy:%s\\r\\n\", evict_policy,\n                \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n                \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n                \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n                \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n                \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n                \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n                /* The next field (mem_fragmentation_ratio) is the total RSS\n                 * overhead, including fragmentation, but not just it. This field\n                 * (and the next one) is named like that just for backward\n                 * compatibility. */\n                \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n                \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n                \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n                \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n                \"mem_clients_slaves:%zu\\r\\n\", mh->clients_replicas,\n                \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n                \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n                \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n                \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n                \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n                \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()))",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": "functionsNum",
          "new_api": "evalScriptsDict",
          "old_text": "functionsNum()",
          "new_text": "evalScriptsDict()",
          "old_line_content": "                \"number_of_functions:%lu\\r\\n\", functionsNum(),",
          "new_line_content": "                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),",
          "content_same": false
        },
        {
          "line": 5673,
          "old_api": "functionsLibNum",
          "new_api": "functionsNum",
          "old_text": "functionsLibNum()",
          "new_text": "functionsNum()",
          "old_line_content": "                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),",
          "new_line_content": "                \"number_of_functions:%lu\\r\\n\", functionsNum(),",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "lazyfreeGetFreedObjectsCount",
          "new_api": "lazyfreeGetPendingObjectsCount",
          "old_text": "lazyfreeGetFreedObjectsCount()",
          "new_text": "lazyfreeGetPendingObjectsCount()",
          "old_line_content": "                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()));",
          "new_line_content": "                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "freeMemoryOverheadData",
          "new_api": "lazyfreeGetFreedObjectsCount",
          "old_text": "freeMemoryOverheadData(mh)",
          "new_text": "lazyfreeGetFreedObjectsCount()",
          "old_line_content": "        freeMemoryOverheadData(mh);",
          "new_line_content": "                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()));",
          "content_same": false
        },
        {
          "line": 5712,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"persistence\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"persistence\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "bioPendingJobsOfType",
          "new_api": "sdslen",
          "old_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "new_line_content": "                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(\n            info,\n            \"# Stats\\r\\n\" FMTARGS(\n                \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n                \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n                \"total_net_input_bytes:%lld\\r\\n\", server.stat_net_input_bytes + server.stat_net_repl_input_bytes,\n                \"total_net_output_bytes:%lld\\r\\n\", server.stat_net_output_bytes + server.stat_net_repl_output_bytes,\n                \"total_net_repl_input_bytes:%lld\\r\\n\", server.stat_net_repl_input_bytes,\n                \"total_net_repl_output_bytes:%lld\\r\\n\", server.stat_net_repl_output_bytes,\n                \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT) / 1024,\n                \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT) / 1024,\n                \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION) / 1024,\n                \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION) / 1024,\n                \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n                \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n                \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n                \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n                \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n                \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc * 100,\n                \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n                \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used / 1000,\n                \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n                \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n                \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n                \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n                \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n                \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n                \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n                \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n                \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),\n                \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n                \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n                \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n                \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n                \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n                \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),\n                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),\n                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),\n                \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n                \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n                \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n                \"total_reads_processed:%lld\\r\\n\", server.stat_total_reads_processed,\n                \"total_writes_processed:%lld\\r\\n\", server.stat_total_writes_processed,\n                \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n                \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n                \"io_threaded_freed_objects:%lld\\r\\n\", server.stat_io_freed_objects,\n                \"io_threaded_poll_processed:%lld\\r\\n\", server.stat_poll_processed_by_io_threads,\n                \"io_threaded_total_prefetch_batches:%lld\\r\\n\", server.stat_total_prefetch_batches,\n                \"io_threaded_total_prefetch_entries:%lld\\r\\n\", server.stat_total_prefetch_entries,\n                \"client_query_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_qbuf_limit_disconnections,\n                \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n                \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n                \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n                \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n                \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n                \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n                \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n                \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION)))",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": "dictSize",
          "new_api": "kvstoreSize",
          "old_text": "dictSize(server.pubsub_patterns)",
          "new_text": "kvstoreSize(server.pubsub_channels)",
          "old_line_content": "                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),",
          "new_line_content": "                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 5842,
          "old_api": "kvstoreSize",
          "new_api": "dictSize",
          "old_text": "kvstoreSize(server.pubsubshard_channels)",
          "new_text": "dictSize(server.pubsub_patterns)",
          "old_line_content": "                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),",
          "new_line_content": "                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": "getReplicaKeyWithExpireCount",
          "new_api": "dictSize",
          "old_text": "getReplicaKeyWithExpireCount()",
          "new_text": "dictSize(server.migrate_cached_sockets)",
          "old_line_content": "                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),",
          "new_line_content": "                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": "trackingGetTotalItems",
          "new_api": "trackingGetTotalKeys",
          "old_text": "trackingGetTotalItems()",
          "new_text": "trackingGetTotalKeys()",
          "old_line_content": "                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),",
          "new_line_content": "                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": "trackingGetTotalPrefixes",
          "new_api": "trackingGetTotalItems",
          "old_text": "trackingGetTotalPrefixes()",
          "new_text": "trackingGetTotalItems()",
          "old_line_content": "                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),",
          "new_line_content": "                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),",
          "content_same": false
        },
        {
          "line": 5876,
          "old_api": "genValkeyInfoStringACLStats",
          "new_api": "getInstantaneousMetric",
          "old_text": "genValkeyInfoStringACLStats(info)",
          "new_text": "getInstantaneousMetric(STATS_METRIC_EL_DURATION)",
          "old_line_content": "        info = genValkeyInfoStringACLStats(info);",
          "new_line_content": "                \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION)));",
          "content_same": false
        },
        {
          "line": 5881,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"replication\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"replication\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5882,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n                            \"# Replication\\r\\n\"\n                            \"role:%s\\r\\n\",\n                            server.primary_host == NULL ? \"master\" : \"slave\")",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5928,
          "old_api": "intmax_t)(server.unixtime - server.repl_down_since)",
          "new_api": "sdscatprintf",
          "old_text": "intmax_t)(server.unixtime - server.repl_down_since)",
          "new_text": "sdscatprintf(info, \"master_link_down_since_seconds:%jd\\r\\n\",\n                                    server.repl_down_since ? (intmax_t)(server.unixtime - server.repl_down_since) : -1)",
          "old_line_content": "                                    server.repl_down_since ? (intmax_t)(server.unixtime - server.repl_down_since) : -1);",
          "new_line_content": "                info = sdscatprintf(info, \"master_link_down_since_seconds:%jd\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.replicas, &li)",
          "old_line_content": "            while ((ln = listNext(&li))) {",
          "new_line_content": "            listRewind(server.replicas, &li);",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "                client *replica = listNodeValue(ln);",
          "new_line_content": "            while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "raxSize",
          "new_api": "FMTARGS",
          "old_text": "raxSize(server.replicas_waiting_psync)",
          "new_text": "FMTARGS(\n                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),\n                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n                \"master_replid:%s\\r\\n\", server.replid,\n                \"master_replid2:%s\\r\\n\", server.replid2,\n                \"master_repl_offset:%lld\\r\\n\", server.primary_repl_offset,\n                \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n                \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n                \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n                \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n                \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0)",
          "old_line_content": "                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),",
          "new_line_content": "            FMTARGS(",
          "content_same": false
        },
        {
          "line": 5981,
          "old_api": "getFailoverStateString",
          "new_api": "raxSize",
          "old_text": "getFailoverStateString()",
          "new_text": "raxSize(server.replicas_waiting_psync)",
          "old_line_content": "                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),",
          "new_line_content": "                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),",
          "content_same": false
        },
        {
          "line": 5994,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"cpu\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"cpu\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": "sdscatprintf",
          "new_api": "getrusage",
          "old_text": "sdscatprintf(info,\n                            \"# CPU\\r\\n\"\n                            \"used_cpu_sys:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user:%ld.%06ld\\r\\n\"\n                            \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n                            (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n                            (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec, (long)c_ru.ru_stime.tv_sec,\n                            (long)c_ru.ru_stime.tv_usec, (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": "sdscatprintf",
          "new_api": "getrusage",
          "old_text": "sdscatprintf(info,\n                            \"used_cpu_sys_main_thread:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user_main_thread:%ld.%06ld\\r\\n\",\n                            (long)m_ru.ru_stime.tv_sec, (long)m_ru.ru_stime.tv_usec, (long)m_ru.ru_utime.tv_sec,\n                            (long)m_ru.ru_utime.tv_usec)",
          "new_text": "getrusage(RUSAGE_THREAD, &m_ru)",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        getrusage(RUSAGE_THREAD, &m_ru);",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"modules\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "        (dictFind(section_dict, \"modules\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Modules\\r\\n\")",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Modules\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": "genModulesInfoString",
          "new_api": "sdscatprintf",
          "old_text": "genModulesInfoString(info)",
          "new_text": "sdscatprintf(info, \"# Modules\\r\\n\")",
          "old_line_content": "        info = genModulesInfoString(info);",
          "new_line_content": "        info = sdscatprintf(info, \"# Modules\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6029,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"commandstats\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"commandstats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": "genValkeyInfoStringCommandStats",
          "new_api": "sdscatprintf",
          "old_text": "genValkeyInfoStringCommandStats(info, server.commands)",
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "        info = genValkeyInfoStringCommandStats(info, server.commands);",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"errorstats\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"errorstats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6040,
          "old_api": "raxSeek",
          "new_api": "raxStart",
          "old_text": "raxSeek(&ri, \"^\", NULL, 0)",
          "new_text": "raxStart(&ri, server.errors)",
          "old_line_content": "        raxSeek(&ri, \"^\", NULL, 0);",
          "new_line_content": "        raxStart(&ri, server.errors);",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": "getSafeInfoString",
          "new_api": "sdscatprintf",
          "old_text": "getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe)",
          "new_text": "sdscatprintf(info, \"errorstat_%.*s:count=%lld\\r\\n\", (int)ri.key_len,\n                                getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe), e->count)",
          "old_line_content": "                                getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe), e->count);",
          "new_line_content": "            info = sdscatprintf(info, \"errorstat_%.*s:count=%lld\\r\\n\", (int)ri.key_len,",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": "zfree",
          "new_api": "getSafeInfoString",
          "old_text": "zfree(tmpsafe)",
          "new_text": "getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe)",
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "                                getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe), e->count);",
          "content_same": false
        },
        {
          "line": 6054,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"latencystats\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"latencystats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6055,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Latencystats\\r\\n\")",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Latencystats\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"cluster\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"cluster\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6064,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n                            \"# Cluster\\r\\n\"\n                            \"cluster_enabled:%d\\r\\n\",\n                            server.cluster_enabled)",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"keyspace\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"keyspace\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6073,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6093,
          "old_api": "dictFind",
          "new_api": "dictSize",
          "old_text": "dictFind(section_dict, \"modules\")",
          "new_text": "dictSize(section_dict)",
          "old_line_content": "        info = modulesCollectInfo(info, everything || dictFind(section_dict, \"modules\") != NULL ? NULL : section_dict,",
          "new_line_content": "        (all_sections && dictSize(section_dict))) {",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": "dictFind(section_dict, \"debug\")",
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "    if (dictFind(section_dict, \"debug\") != NULL) {",
          "content_same": false
        },
        {
          "line": 6100,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(\n            info,\n            \"# Debug\\r\\n\" FMTARGS(\n                \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n                \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n                \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n                \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max))",
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6121,
          "old_api": "genValkeyInfoString",
          "new_api": "genInfoSectionDict",
          "old_text": "genValkeyInfoString(sections_dict, all_sections, everything)",
          "new_text": "genInfoSectionDict(c->argv + 1, c->argc - 1, NULL, &all_sections, &everything)",
          "old_line_content": "    sds info = genValkeyInfoString(sections_dict, all_sections, everything);",
          "new_line_content": "    dict *sections_dict = genInfoSectionDict(c->argv + 1, c->argc - 1, NULL, &all_sections, &everything);",
          "content_same": false
        },
        {
          "line": 6122,
          "old_api": "sdslen",
          "new_api": "genValkeyInfoString",
          "old_text": "sdslen(info)",
          "new_text": "genValkeyInfoString(sections_dict, all_sections, everything)",
          "old_line_content": "    addReplyVerbatim(c, info, sdslen(info), \"txt\");",
          "new_line_content": "    sds info = genValkeyInfoString(sections_dict, all_sections, everything);",
          "content_same": false
        },
        {
          "line": 6123,
          "old_api": "sdsfree",
          "new_api": "sdslen",
          "old_text": "sdsfree(info)",
          "new_text": "sdslen(info)",
          "old_line_content": "    sdsfree(info);",
          "new_line_content": "    addReplyVerbatim(c, info, sdslen(info), \"txt\");",
          "content_same": false
        },
        {
          "line": 6124,
          "old_api": "releaseInfoSectionDict",
          "new_api": "sdsfree",
          "old_text": "releaseInfoSectionDict(sections_dict)",
          "new_text": "sdsfree(info)",
          "old_line_content": "    releaseInfoSectionDict(sections_dict);",
          "new_line_content": "    sdsfree(info);",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "addReply",
          "new_api": "listAddNodeTail",
          "old_text": "addReply(c, shared.ok)",
          "new_text": "listAddNodeTail(server.monitors, c)",
          "old_line_content": "    addReply(c, shared.ok);",
          "new_line_content": "    listAddNodeTail(server.monitors, c);",
          "content_same": false
        },
        {
          "line": 6180,
          "old_api": "serverLog",
          "new_api": "checkOvercommit",
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": "checkOvercommit(&err_msg)",
          "old_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "    if (checkOvercommit(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 6181,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(err_msg)",
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 6204,
          "old_api": "fclose",
          "new_api": "getpid",
          "old_text": "fclose(fp)",
          "new_text": "getpid()",
          "old_line_content": "        fclose(fp);",
          "new_line_content": "        fprintf(fp, \"%d\\n\", (int)getpid());",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "setsid",
          "new_api": "exit",
          "old_text": "setsid()",
          "new_text": "exit(0)",
          "old_line_content": "    setsid();                 /* create a new session */",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 6220,
          "old_api": "dup2",
          "new_api": "open",
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 6223,
          "old_api": "close",
          "new_api": "dup2",
          "old_text": "close(fd)",
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": "serverGitDirty",
          "new_api": "sdsempty",
          "old_text": "serverGitDirty()",
          "new_text": "sdsempty()",
          "old_line_content": "                               serverGitSHA1(), atoi(serverGitDirty()) > 0, ZMALLOC_LIB, sizeof(long) == 4 ? 32 : 64,",
          "new_line_content": "    sds version = sdscatprintf(sdsempty(), \"v=%s sha=%s:%d malloc=%s bits=%d build=%llx\", VALKEY_VERSION,",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": "serverBuildId",
          "new_api": "serverGitDirty",
          "old_text": "serverBuildId()",
          "new_text": "serverGitDirty()",
          "old_line_content": "                               (unsigned long long)serverBuildId());",
          "new_line_content": "                               serverGitSHA1(), atoi(serverGitDirty()) > 0, ZMALLOC_LIB, sizeof(long) == 4 ? 32 : 64,",
          "content_same": false
        },
        {
          "line": 6252,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr, \"       ./valkey-server /etc/sentinel.conf --sentinel\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr, \"       ./valkey-server /etc/sentinel.conf --sentinel\\n\");",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "getpid",
          "new_api": "serverGitDirty",
          "old_text": "getpid()",
          "new_text": "serverGitDirty()",
          "old_line_content": "                 (sizeof(long) == 8) ? \"64\" : \"32\", mode, server.port ? server.port : server.tls_port, (long)getpid());",
          "new_line_content": "        snprintf(buf, 1024 * 16, ascii_logo, VALKEY_VERSION, serverGitSHA1(), strtol(serverGitDirty(), NULL, 10) > 0,",
          "content_same": false
        },
        {
          "line": 6278,
          "old_api": "serverLogRaw",
          "new_api": "getpid",
          "old_text": "serverLogRaw(LL_NOTICE | LL_RAW, buf)",
          "new_text": "getpid()",
          "old_line_content": "        serverLogRaw(LL_NOTICE | LL_RAW, buf);",
          "new_line_content": "                 (sizeof(long) == 8) ? \"64\" : \"32\", mode, server.port ? server.port : server.tls_port, (long)getpid());",
          "content_same": false
        },
        {
          "line": 6311,
          "old_api": "get_type",
          "new_api": "createSocketAcceptHandler",
          "old_text": "listener->ct->get_type(NULL)",
          "new_text": "createSocketAcceptHandler(listener, listener->ct->accept_handler)",
          "old_line_content": "        serverPanic(\"Unrecoverable error creating %s accept handler.\", listener->ct->get_type(NULL));",
          "new_line_content": "    if (createSocketAcceptHandler(listener, listener->ct->accept_handler) != C_OK) {",
          "content_same": false
        },
        {
          "line": 6334,
          "old_api": "getpid",
          "new_api": "serverLogRawFromHandler",
          "old_text": "getpid()",
          "new_text": "serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "old_line_content": "        rdbRemoveTempFile(getpid(), 1);",
          "new_line_content": "        serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "content_same": false
        },
        {
          "line": 6335,
          "old_api": "exit",
          "new_api": "getpid",
          "old_text": "exit(1)",
          "new_text": "getpid()",
          "old_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "new_line_content": "        rdbRemoveTempFile(getpid(), 1);",
          "content_same": false
        },
        {
          "line": 6365,
          "old_api": "exitFromChild",
          "new_api": "serverLogRawFromHandler",
          "old_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "new_text": "serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\")",
          "old_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "new_line_content": "    serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\");",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": "hasActiveChildProcess",
          "new_api": "isMutuallyExclusiveChildType",
          "old_text": "hasActiveChildProcess()",
          "new_text": "isMutuallyExclusiveChildType(purpose)",
          "old_line_content": "        if (hasActiveChildProcess()) {",
          "new_line_content": "    if (isMutuallyExclusiveChildType(purpose)) {",
          "content_same": false
        },
        {
          "line": 6407,
          "old_api": "fork",
          "new_api": "ustime",
          "old_text": "fork()",
          "new_text": "ustime()",
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": "setOOMScoreAdj",
          "new_api": "setupChildSignalHandlers",
          "old_text": "setOOMScoreAdj(CONFIG_OOM_BGCHILD)",
          "new_text": "setupChildSignalHandlers()",
          "old_line_content": "        setOOMScoreAdj(CONFIG_OOM_BGCHILD);",
          "new_line_content": "        setupChildSignalHandlers();",
          "content_same": false
        },
        {
          "line": 6418,
          "old_api": "updateDictResizePolicy",
          "new_api": "setOOMScoreAdj",
          "old_text": "updateDictResizePolicy()",
          "new_text": "setOOMScoreAdj(CONFIG_OOM_BGCHILD)",
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        setOOMScoreAdj(CONFIG_OOM_BGCHILD);",
          "content_same": false
        },
        {
          "line": 6419,
          "old_api": "dismissMemoryInChild",
          "new_api": "updateDictResizePolicy",
          "old_text": "dismissMemoryInChild()",
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        dismissMemoryInChild();",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 6420,
          "old_api": "closeChildUnusedResourceAfterFork",
          "new_api": "dismissMemoryInChild",
          "old_text": "closeChildUnusedResourceAfterFork()",
          "new_text": "dismissMemoryInChild()",
          "old_line_content": "        closeChildUnusedResourceAfterFork();",
          "new_line_content": "        dismissMemoryInChild();",
          "content_same": false
        },
        {
          "line": 6437,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": "zmalloc_used_memory",
          "old_text": "latencyAddSampleIfNeeded(\"fork\", server.stat_fork_time / 1000)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        latencyAddSampleIfNeeded(\"fork\", server.stat_fork_time / 1000);",
          "new_line_content": "            (double)zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024 * 1024 * 1024); /* GB per second. */",
          "content_same": false
        },
        {
          "line": 6458,
          "old_api": "moduleFireServerEvent",
          "new_api": "updateDictResizePolicy",
          "old_text": "moduleFireServerEvent(VALKEYMODULE_EVENT_FORK_CHILD, VALKEYMODULE_SUBEVENT_FORK_CHILD_BORN, NULL)",
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        moduleFireServerEvent(VALKEYMODULE_EVENT_FORK_CHILD, VALKEYMODULE_SUBEVENT_FORK_CHILD_BORN, NULL);",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": "dismissSds",
          "new_api": "dismissMemory",
          "old_text": "dismissSds(c->querybuf)",
          "new_text": "dismissMemory(c->buf, c->buf_usable_size)",
          "old_line_content": "    if (c->querybuf) dismissSds(c->querybuf);",
          "new_line_content": "    dismissMemory(c->buf, c->buf_usable_size);",
          "content_same": false
        },
        {
          "line": 6510,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(c->reply, &li)",
          "old_line_content": "        while ((ln = listNext(&li))) {",
          "new_line_content": "        listRewind(c->reply, &li);",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "            clientReplyBlock *bulk = listNodeValue(ln);",
          "new_line_content": "        while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6537,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.repl_buffer_blocks, &li)",
          "old_line_content": "    while ((ln = listNext(&li))) {",
          "new_line_content": "    listRewind(server.repl_buffer_blocks, &li);",
          "content_same": false
        },
        {
          "line": 6538,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "        replBufBlock *o = listNodeValue(ln);",
          "new_line_content": "    while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6539,
          "old_api": "dismissMemory",
          "new_api": "listNodeValue",
          "old_text": "dismissMemory(o, o->size)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        dismissMemory(o, o->size);",
          "new_line_content": "        replBufBlock *o = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6544,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.clients, &li)",
          "old_line_content": "    while ((ln = listNext(&li))) {",
          "new_line_content": "    listRewind(server.clients, &li);",
          "content_same": false
        },
        {
          "line": 6545,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "    while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6546,
          "old_api": "dismissClientMemory",
          "new_api": "listNodeValue",
          "old_text": "dismissClientMemory(c)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        dismissClientMemory(c);",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6571,
          "old_api": "exit",
          "new_api": "loadAppendOnlyFiles",
          "old_text": "exit(1)",
          "new_text": "loadAppendOnlyFiles(server.aof_manifest)",
          "old_line_content": "        if (ret == AOF_FAILED || ret == AOF_OPEN_ERR) exit(1);",
          "new_line_content": "        int ret = loadAppendOnlyFiles(server.aof_manifest);",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "memcpy",
          "new_api": "iAmPrimary",
          "old_text": "memcpy(server.replid, rsi.repl_id, sizeof(server.replid))",
          "new_text": "iAmPrimary()",
          "old_line_content": "                    memcpy(server.replid, rsi.repl_id, sizeof(server.replid));",
          "new_line_content": "                if (!iAmPrimary()) {",
          "content_same": false
        },
        {
          "line": 6603,
          "old_api": "selectDb",
          "new_api": "replicationCachePrimaryUsingMyself",
          "old_text": "selectDb(server.cached_primary, rsi.repl_stream_db)",
          "new_text": "replicationCachePrimaryUsingMyself()",
          "old_line_content": "                    selectDb(server.cached_primary, rsi.repl_stream_db);",
          "new_line_content": "                    replicationCachePrimaryUsingMyself();",
          "content_same": false
        },
        {
          "line": 6615,
          "old_api": "time",
          "new_api": "rebaseReplicationBuffer",
          "old_text": "time(NULL)",
          "new_text": "rebaseReplicationBuffer(rsi.repl_offset)",
          "old_line_content": "                    server.repl_no_replicas_since = time(NULL);",
          "new_line_content": "                    rebaseReplicationBuffer(rsi.repl_offset);",
          "content_same": false
        },
        {
          "line": 6620,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\")",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\");",
          "content_same": false
        },
        {
          "line": 6634,
          "old_api": "serverPanic",
          "new_api": "serverLog",
          "old_text": "serverPanic(\"Valkey aborting for OUT OF MEMORY. Allocating %zu bytes!\", allocation_size)",
          "new_text": "serverLog(LL_WARNING, \"Out Of Memory allocating %zu bytes!\", allocation_size)",
          "old_line_content": "    serverPanic(\"Valkey aborting for OUT OF MEMORY. Allocating %zu bytes!\", allocation_size);",
          "new_line_content": "    serverLog(LL_WARNING, \"Out Of Memory allocating %zu bytes!\", allocation_size);",
          "content_same": false
        },
        {
          "line": 6642,
          "old_api": "sdsnew",
          "new_api": "strcmp",
          "old_text": "sdsnew(arg)",
          "new_text": "strcmp(varname, \"title\")",
          "old_line_content": "        return sdsnew(arg);",
          "new_line_content": "    if (!strcmp(varname, \"title\")) {",
          "content_same": false
        },
        {
          "line": 6643,
          "old_api": "strcmp",
          "new_api": "sdsnew",
          "old_text": "strcmp(varname, \"listen-addr\")",
          "new_text": "sdsnew(arg)",
          "old_line_content": "    } else if (!strcmp(varname, \"listen-addr\")) {",
          "new_line_content": "        return sdsnew(arg);",
          "content_same": false
        },
        {
          "line": 6649,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"server-mode\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"server-mode\")) {",
          "new_line_content": "            return sdscatprintf(sdsempty(), \"unixsocket:%s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 6656,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"config-file\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"config-file\")) {",
          "new_line_content": "            return sdsempty();",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": "sdsnew",
          "new_api": "strcmp",
          "old_text": "sdsnew(server.configfile ? server.configfile : \"-\")",
          "new_text": "strcmp(varname, \"config-file\")",
          "old_line_content": "        return sdsnew(server.configfile ? server.configfile : \"-\");",
          "new_line_content": "    } else if (!strcmp(varname, \"config-file\")) {",
          "content_same": false
        },
        {
          "line": 6658,
          "old_api": "strcmp",
          "new_api": "sdsnew",
          "old_text": "strcmp(varname, \"port\")",
          "new_text": "sdsnew(server.configfile ? server.configfile : \"-\")",
          "old_line_content": "    } else if (!strcmp(varname, \"port\")) {",
          "new_line_content": "        return sdsnew(server.configfile ? server.configfile : \"-\");",
          "content_same": false
        },
        {
          "line": 6659,
          "old_api": "sdsempty",
          "new_api": "strcmp",
          "old_text": "sdsempty()",
          "new_text": "strcmp(varname, \"port\")",
          "old_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.port);",
          "new_line_content": "    } else if (!strcmp(varname, \"port\")) {",
          "content_same": false
        },
        {
          "line": 6660,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"tls-port\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"tls-port\")) {",
          "new_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.port);",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": "sdsempty",
          "new_api": "strcmp",
          "old_text": "sdsempty()",
          "new_text": "strcmp(varname, \"tls-port\")",
          "old_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.tls_port);",
          "new_line_content": "    } else if (!strcmp(varname, \"tls-port\")) {",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"unixsocket\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"unixsocket\")) {",
          "new_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.tls_port);",
          "content_same": false
        },
        {
          "line": 6663,
          "old_api": "sdsnew",
          "new_api": "strcmp",
          "old_text": "sdsnew(server.unixsocket)",
          "new_text": "strcmp(varname, \"unixsocket\")",
          "old_line_content": "        return sdsnew(server.unixsocket);",
          "new_line_content": "    } else if (!strcmp(varname, \"unixsocket\")) {",
          "content_same": false
        },
        {
          "line": 6681,
          "old_api": "sdsfree",
          "new_api": "sdslen",
          "old_text": "sdsfree(res)",
          "new_text": "sdslen(res)",
          "old_line_content": "    sdsfree(res);",
          "new_line_content": "    if (sdslen(res) == 0) ok = 0;",
          "content_same": false
        },
        {
          "line": 6692,
          "old_api": "sdsfree",
          "new_api": "setproctitle",
          "old_text": "sdsfree(proc_title)",
          "new_text": "setproctitle(\"%s\", proc_title)",
          "old_line_content": "    sdsfree(proc_title);",
          "new_line_content": "    setproctitle(\"%s\", proc_title);",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": "raise",
          "new_api": "serverLog",
          "old_text": "raise(SIGSTOP)",
          "new_text": "serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\")",
          "old_line_content": "    raise(SIGSTOP);",
          "new_line_content": "    serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\");",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": "unsetenv",
          "new_api": "raise",
          "old_text": "unsetenv(\"UPSTART_JOB\")",
          "new_text": "raise(SIGSTOP)",
          "old_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "new_line_content": "    raise(SIGSTOP);",
          "content_same": false
        },
        {
          "line": 6748,
          "old_api": "serverLog",
          "new_api": "serverCommunicateSystemd",
          "old_text": "serverLog(LL_NOTICE, \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and \"\n                         \"TimeoutStopSec in your service unit.\")",
          "new_text": "serverCommunicateSystemd(\"STATUS=Valkey is loading...\\n\")",
          "old_line_content": "    serverLog(LL_NOTICE, \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and \"",
          "new_line_content": "    if (serverCommunicateSystemd(\"STATUS=Valkey is loading...\\n\") <= 0) return 0;",
          "content_same": false
        },
        {
          "line": 6759,
          "old_api": "serverLog",
          "new_api": "getenv",
          "old_text": "serverLog(LL_VERBOSE, \"Upstart supervision detected.\")",
          "new_text": "getenv(\"UPSTART_JOB\")",
          "old_line_content": "            serverLog(LL_VERBOSE, \"Upstart supervision detected.\");",
          "new_line_content": "        if (getenv(\"UPSTART_JOB\")) {",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": "serverLog",
          "new_api": "getenv",
          "old_text": "serverLog(LL_VERBOSE, \"Systemd supervision detected.\")",
          "new_text": "getenv(\"NOTIFY_SOCKET\")",
          "old_line_content": "            serverLog(LL_VERBOSE, \"Systemd supervision detected.\");",
          "new_line_content": "        } else if (getenv(\"NOTIFY_SOCKET\")) {",
          "content_same": false
        },
        {
          "line": 6769,
          "old_api": "serverSupervisedSystemd",
          "new_api": "serverSupervisedUpstart",
          "old_text": "serverSupervisedSystemd()",
          "new_text": "serverSupervisedUpstart()",
          "old_line_content": "    case SUPERVISED_SYSTEMD: ret = serverSupervisedSystemd(); break;",
          "new_line_content": "    case SUPERVISED_UPSTART: ret = serverSupervisedUpstart(); break;",
          "content_same": false
        },
        {
          "line": 6819,
          "old_api": "strcasecmp",
          "new_api": "monotonicInit",
          "old_text": "strcasecmp(argv[1], \"test\")",
          "new_text": "monotonicInit()",
          "old_line_content": "    if (argc >= 3 && !strcasecmp(argv[1], \"test\")) {",
          "new_line_content": "    monotonicInit(); /* Required for dict tests, that are relying on monotime during dict rehashing. */",
          "content_same": false
        },
        {
          "line": 6866,
          "old_api": "zmalloc_set_oom_handler",
          "new_api": "tzset",
          "old_text": "zmalloc_set_oom_handler(serverOutOfMemoryHandler)",
          "new_text": "tzset()",
          "old_line_content": "    zmalloc_set_oom_handler(serverOutOfMemoryHandler);",
          "new_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "content_same": false
        },
        {
          "line": 6871,
          "old_api": "getpid",
          "new_api": "gettimeofday",
          "old_text": "getpid()",
          "new_text": "gettimeofday(&tv, NULL)",
          "old_line_content": "    srand(time(NULL) ^ getpid() ^ tv.tv_usec);",
          "new_line_content": "    gettimeofday(&tv, NULL);",
          "content_same": false
        },
        {
          "line": 6874,
          "old_api": "crc64_init",
          "new_api": "getpid",
          "old_text": "crc64_init()",
          "new_text": "getpid()",
          "old_line_content": "    crc64_init();",
          "new_line_content": "    init_genrand64(((long long)tv.tv_sec * 1000000 + tv.tv_usec) ^ getpid());",
          "content_same": false
        },
        {
          "line": 6884,
          "old_api": "dictSetHashFunctionSeed",
          "new_api": "getRandomBytes",
          "old_text": "dictSetHashFunctionSeed(hashseed)",
          "new_text": "getRandomBytes(hashseed, sizeof(hashseed))",
          "old_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "new_line_content": "    getRandomBytes(hashseed, sizeof(hashseed));",
          "content_same": false
        },
        {
          "line": 6889,
          "old_api": "initServerConfig",
          "new_api": "checkForSentinelMode",
          "old_text": "initServerConfig()",
          "new_text": "checkForSentinelMode(argc, argv, exec_name)",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    server.sentinel_mode = checkForSentinelMode(argc, argv, exec_name);",
          "content_same": false
        },
        {
          "line": 6890,
          "old_api": "ACLInit",
          "new_api": "initServerConfig",
          "old_text": "ACLInit()",
          "new_text": "initServerConfig()",
          "old_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 6893,
          "old_api": "connTypeInitialize",
          "new_api": "moduleInitModulesSystem",
          "old_text": "connTypeInitialize()",
          "new_text": "moduleInitModulesSystem()",
          "old_line_content": "    connTypeInitialize();",
          "new_line_content": "    moduleInitModulesSystem();",
          "content_same": false
        },
        {
          "line": 6898,
          "old_api": "zmalloc",
          "new_api": "getAbsolutePath",
          "old_text": "zmalloc(sizeof(char *) * (argc + 1))",
          "new_text": "getAbsolutePath(argv[0])",
          "old_line_content": "    server.exec_argv = zmalloc(sizeof(char *) * (argc + 1));",
          "new_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "content_same": false
        },
        {
          "line": 6907,
          "old_api": "initSentinel",
          "new_api": "initSentinelConfig",
          "old_text": "initSentinel()",
          "new_text": "initSentinelConfig()",
          "old_line_content": "        initSentinel();",
          "new_line_content": "        initSentinelConfig();",
          "content_same": false
        },
        {
          "line": 6914,
          "old_api": "redis_check_rdb_main",
          "new_api": "strstr",
          "old_text": "redis_check_rdb_main(argc, argv, NULL)",
          "new_text": "strstr(exec_name, \"valkey-check-rdb\")",
          "old_line_content": "        redis_check_rdb_main(argc, argv, NULL);",
          "new_line_content": "    if (strstr(exec_name, \"valkey-check-rdb\") != NULL)",
          "content_same": false
        },
        {
          "line": 6915,
          "old_api": "strstr",
          "new_api": "redis_check_rdb_main",
          "old_text": "strstr(exec_name, \"valkey-check-aof\")",
          "new_text": "redis_check_rdb_main(argc, argv, NULL)",
          "old_line_content": "    else if (strstr(exec_name, \"valkey-check-aof\") != NULL)",
          "new_line_content": "        redis_check_rdb_main(argc, argv, NULL);",
          "content_same": false
        },
        {
          "line": 6916,
          "old_api": "redis_check_aof_main",
          "new_api": "strstr",
          "old_text": "redis_check_aof_main(argc, argv)",
          "new_text": "strstr(exec_name, \"valkey-check-aof\")",
          "old_line_content": "        redis_check_aof_main(argc, argv);",
          "new_line_content": "    else if (strstr(exec_name, \"valkey-check-aof\") != NULL)",
          "content_same": false
        },
        {
          "line": 6922,
          "old_api": "redis_check_rdb_main",
          "new_api": "strstr",
          "old_text": "redis_check_rdb_main(argc, argv, NULL)",
          "new_text": "strstr(exec_name, \"redis-check-rdb\")",
          "old_line_content": "        redis_check_rdb_main(argc, argv, NULL);",
          "new_line_content": "    if (strstr(exec_name, \"redis-check-rdb\") != NULL)",
          "content_same": false
        },
        {
          "line": 6923,
          "old_api": "strstr",
          "new_api": "redis_check_rdb_main",
          "old_text": "strstr(exec_name, \"redis-check-aof\")",
          "new_text": "redis_check_rdb_main(argc, argv, NULL)",
          "old_line_content": "    else if (strstr(exec_name, \"redis-check-aof\") != NULL)",
          "new_line_content": "        redis_check_rdb_main(argc, argv, NULL);",
          "content_same": false
        },
        {
          "line": 6924,
          "old_api": "redis_check_aof_main",
          "new_api": "strstr",
          "old_text": "redis_check_aof_main(argc, argv)",
          "new_text": "strstr(exec_name, \"redis-check-aof\")",
          "old_line_content": "        redis_check_aof_main(argc, argv);",
          "new_line_content": "    else if (strstr(exec_name, \"redis-check-aof\") != NULL)",
          "content_same": false
        },
        {
          "line": 6932,
          "old_api": "getVersion",
          "new_api": "strcmp",
          "old_text": "getVersion()",
          "new_text": "strcmp(argv[1], \"--version\")",
          "old_line_content": "            sds version = getVersion();",
          "new_line_content": "        if (strcmp(argv[1], \"-v\") == 0 || strcmp(argv[1], \"--version\") == 0) {",
          "content_same": false
        },
        {
          "line": 6933,
          "old_api": "printf",
          "new_api": "getVersion",
          "old_text": "printf(\"Valkey server %s\\n\", version)",
          "new_text": "getVersion()",
          "old_line_content": "            printf(\"Valkey server %s\\n\", version);",
          "new_line_content": "            sds version = getVersion();",
          "content_same": false
        },
        {
          "line": 6934,
          "old_api": "sdsfree",
          "new_api": "printf",
          "old_text": "sdsfree(version)",
          "new_text": "printf(\"Valkey server %s\\n\", version)",
          "old_line_content": "            sdsfree(version);",
          "new_line_content": "            printf(\"Valkey server %s\\n\", version);",
          "content_same": false
        },
        {
          "line": 6935,
          "old_api": "exit",
          "new_api": "sdsfree",
          "old_text": "exit(0)",
          "new_text": "sdsfree(version)",
          "old_line_content": "            exit(0);",
          "new_line_content": "            sdsfree(version);",
          "content_same": false
        },
        {
          "line": 6938,
          "old_api": "strcmp",
          "new_api": "usage",
          "old_text": "strcmp(argv[1], \"--test-memory\")",
          "new_text": "usage()",
          "old_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0 || strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 6941,
          "old_api": "exit",
          "new_api": "atoi",
          "old_text": "exit(0)",
          "new_text": "atoi(argv[2])",
          "old_line_content": "                exit(0);",
          "new_line_content": "                memtest(atoi(argv[2]), 50);",
          "content_same": false
        },
        {
          "line": 6945,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr, \"Example: ./valkey-server --test-memory 4096\\n\\n\")",
          "old_line_content": "                exit(1);",
          "new_line_content": "                fprintf(stderr, \"Example: ./valkey-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 6949,
          "old_api": "syscheck",
          "new_api": "strcmp",
          "old_text": "syscheck()",
          "new_text": "strcmp(argv[1], \"--check-system\")",
          "old_line_content": "            exit(syscheck() ? 0 : 1);",
          "new_line_content": "        if (strcmp(argv[1], \"--check-system\") == 0) {",
          "content_same": false
        },
        {
          "line": 6958,
          "old_api": "zfree",
          "new_api": "getAbsolutePath",
          "old_text": "zfree(server.exec_argv[1])",
          "new_text": "getAbsolutePath(argv[1])",
          "old_line_content": "            zfree(server.exec_argv[1]);",
          "new_line_content": "            server.configfile = getAbsolutePath(argv[1]);",
          "content_same": false
        },
        {
          "line": 6959,
          "old_api": "zstrdup",
          "new_api": "zfree",
          "old_text": "zstrdup(server.configfile)",
          "new_text": "zfree(server.exec_argv[1])",
          "old_line_content": "            server.exec_argv[1] = zstrdup(server.configfile);",
          "new_line_content": "            zfree(server.exec_argv[1]);",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": "sdscat",
          "new_api": "strlen",
          "old_text": "sdscat(options, \" \")",
          "new_text": "strlen(argv[j])",
          "old_line_content": "                options = sdscat(options, \" \");",
          "new_line_content": "                options = sdscatrepr(options, argv[j], strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 7035,
          "old_api": "loadSentinelConfigFromQueue",
          "new_api": "loadServerConfig",
          "old_text": "loadSentinelConfigFromQueue()",
          "new_text": "loadServerConfig(server.configfile, config_from_stdin, options)",
          "old_line_content": "        if (server.sentinel_mode) loadSentinelConfigFromQueue();",
          "new_line_content": "        loadServerConfig(server.configfile, config_from_stdin, options);",
          "content_same": false
        },
        {
          "line": 7036,
          "old_api": "sdsfree",
          "new_api": "loadSentinelConfigFromQueue",
          "old_text": "sdsfree(options)",
          "new_text": "loadSentinelConfigFromQueue()",
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "        if (server.sentinel_mode) loadSentinelConfigFromQueue();",
          "content_same": false
        },
        {
          "line": 7045,
          "old_api": "serverLog",
          "new_api": "checkXenClocksource",
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": "checkXenClocksource(&err_msg)",
          "old_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "    if (checkXenClocksource(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 7046,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(err_msg)",
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 7053,
          "old_api": "sdsfree",
          "new_api": "serverLog",
          "old_text": "sdsfree(err_msg)",
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "            sdsfree(err_msg);",
          "new_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 7059,
          "old_api": "serverLog",
          "new_api": "checkIgnoreWarning",
          "old_text": "serverLog(LL_WARNING, \"Valkey will now exit to prevent data corruption. \"\n                                  \"Note that it is possible to suppress this warning by setting the following config: \"\n                                  \"ignore-warnings ARM64-COW-BUG\")",
          "new_text": "checkIgnoreWarning(\"ARM64-COW-BUG\")",
          "old_line_content": "            serverLog(LL_WARNING, \"Valkey will now exit to prevent data corruption. \"",
          "new_line_content": "        if (!checkIgnoreWarning(\"ARM64-COW-BUG\")) {",
          "content_same": false
        },
        {
          "line": 7075,
          "old_api": "getpid",
          "new_api": "serverLog",
          "old_text": "getpid()",
          "new_text": "serverLog(LL_NOTICE, \"Valkey version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\", VALKEY_VERSION,\n              (sizeof(long) == 8) ? 64 : 32, serverGitSHA1(), strtol(serverGitDirty(), NULL, 10) > 0, (int)getpid())",
          "old_line_content": "              (sizeof(long) == 8) ? 64 : 32, serverGitSHA1(), strtol(serverGitDirty(), NULL, 10) > 0, (int)getpid());",
          "new_line_content": "    serverLog(LL_NOTICE, \"Valkey version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\", VALKEY_VERSION,",
          "content_same": false
        },
        {
          "line": 7087,
          "old_api": "createPidFile",
          "new_api": "initServer",
          "old_text": "createPidFile()",
          "new_text": "initServer()",
          "old_line_content": "    if (background || server.pidfile) createPidFile();",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 7088,
          "old_api": "serverSetProcTitle",
          "new_api": "createPidFile",
          "old_text": "serverSetProcTitle(NULL)",
          "new_text": "createPidFile()",
          "old_line_content": "    if (server.set_proc_title) serverSetProcTitle(NULL);",
          "new_line_content": "    if (background || server.pidfile) createPidFile();",
          "content_same": false
        },
        {
          "line": 7089,
          "old_api": "serverAsciiArt",
          "new_api": "serverSetProcTitle",
          "old_text": "serverAsciiArt()",
          "new_text": "serverSetProcTitle(NULL)",
          "old_line_content": "    serverAsciiArt();",
          "new_line_content": "    if (server.set_proc_title) serverSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 7090,
          "old_api": "checkTcpBacklogSettings",
          "new_api": "serverAsciiArt",
          "old_text": "checkTcpBacklogSettings()",
          "new_text": "serverAsciiArt()",
          "old_line_content": "    checkTcpBacklogSettings();",
          "new_line_content": "    serverAsciiArt();",
          "content_same": false
        },
        {
          "line": 7096,
          "old_api": "moduleLoadFromQueue",
          "new_api": "moduleInitModulesSystemLast",
          "old_text": "moduleLoadFromQueue()",
          "new_text": "moduleInitModulesSystemLast()",
          "old_line_content": "        moduleLoadFromQueue();",
          "new_line_content": "        moduleInitModulesSystemLast();",
          "content_same": false
        },
        {
          "line": 7099,
          "old_api": "initListeners",
          "new_api": "ACLLoadUsersAtStartup",
          "old_text": "initListeners()",
          "new_text": "ACLLoadUsersAtStartup()",
          "old_line_content": "    initListeners();",
          "new_line_content": "    ACLLoadUsersAtStartup();",
          "content_same": false
        },
        {
          "line": 7108,
          "old_api": "aofLoadManifestFromDisk",
          "new_api": "serverLog",
          "old_text": "aofLoadManifestFromDisk()",
          "new_text": "serverLog(LL_NOTICE, \"Server initialized\")",
          "old_line_content": "        aofLoadManifestFromDisk();",
          "new_line_content": "        serverLog(LL_NOTICE, \"Server initialized\");",
          "content_same": false
        },
        {
          "line": 7109,
          "old_api": "loadDataFromDisk",
          "new_api": "aofLoadManifestFromDisk",
          "old_text": "loadDataFromDisk()",
          "new_text": "aofLoadManifestFromDisk()",
          "old_line_content": "        loadDataFromDisk();",
          "new_line_content": "        aofLoadManifestFromDisk();",
          "content_same": false
        },
        {
          "line": 7110,
          "old_api": "aofOpenIfNeededOnServerStart",
          "new_api": "loadDataFromDisk",
          "old_text": "aofOpenIfNeededOnServerStart()",
          "new_text": "loadDataFromDisk()",
          "old_line_content": "        aofOpenIfNeededOnServerStart();",
          "new_line_content": "        loadDataFromDisk();",
          "content_same": false
        },
        {
          "line": 7111,
          "old_api": "aofDelHistoryFiles",
          "new_api": "aofOpenIfNeededOnServerStart",
          "old_text": "aofDelHistoryFiles()",
          "new_text": "aofOpenIfNeededOnServerStart()",
          "old_line_content": "        aofDelHistoryFiles();",
          "new_line_content": "        aofOpenIfNeededOnServerStart();",
          "content_same": false
        },
        {
          "line": 7149,
          "old_api": "setOOMScoreAdj",
          "new_api": "serverSetCpuAffinity",
          "old_text": "setOOMScoreAdj(-1)",
          "new_text": "serverSetCpuAffinity(server.server_cpulist)",
          "old_line_content": "    setOOMScoreAdj(-1);",
          "new_line_content": "    serverSetCpuAffinity(server.server_cpulist);",
          "content_same": false
        },
        {
          "line": 7152,
          "old_api": "aeDeleteEventLoop",
          "new_api": "aeMain",
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": "aeMain(server.el)",
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6144,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.ok)",
          "old_line_content": "}",
          "new_line_content": "    addReply(c, shared.ok);",
          "content_same": false
        },
        {
          "line": 4099,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.oomerr)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommand(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 6151,
          "old_api": null,
          "new_api": "sdssplitargs",
          "old_text": null,
          "new_text": "sdssplitargs(server.ignore_warnings, &argc)",
          "old_line_content": "    if (argv == NULL) return 0;",
          "new_line_content": "    sds *argv = sdssplitargs(server.ignore_warnings, &argc);",
          "content_same": false
        },
        {
          "line": 6156,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag, warning)",
          "old_line_content": "    }",
          "new_line_content": "        if (!strcasecmp(flag, warning)) break;",
          "content_same": false
        },
        {
          "line": 6158,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv, argc)",
          "old_line_content": "    return j < argc;",
          "new_line_content": "    sdsfreesplitres(argv, argc);",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "trackingLimitUsedSlots",
          "old_text": null,
          "new_text": "trackingLimitUsedSlots()",
          "old_line_content": "",
          "new_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": null,
          "new_api": "writeCommandsDeniedByDiskError",
          "old_text": null,
          "new_text": "writeCommandsDeniedByDiskError()",
          "old_line_content": "    if (deny_write_type != DISK_ERROR_TYPE_NONE && (is_write_command || c->cmd->proc == pingCommand)) {",
          "new_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Replica was unable to write command to disk.\")",
          "old_line_content": "            } else {",
          "new_line_content": "                serverPanic(\"Replica was unable to write command to disk.\");",
          "content_same": false
        },
        {
          "line": 6172,
          "old_api": null,
          "new_api": "prctl",
          "old_text": null,
          "new_text": "prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0)",
          "old_line_content": "#endif",
          "new_line_content": "    ret = prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0);",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Replica is applying a command even though \"\n                                          \"it is unable to write to disk.\")",
          "old_line_content": "                                          \"it is unable to write to disk.\");",
          "new_line_content": "                    serverLog(LL_WARNING, \"Replica is applying a command even though \"",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": null,
          "new_api": "writeCommandsGetDiskErrorMessage",
          "old_text": null,
          "new_text": "writeCommandsGetDiskErrorMessage(deny_write_type)",
          "old_line_content": "            /* remove the newline since rejectCommandSds adds it. */",
          "new_line_content": "            sds err = writeCommandsGetDiskErrorMessage(deny_write_type);",
          "content_same": false
        },
        {
          "line": 6182,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "    }",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 6184,
          "old_api": null,
          "new_api": "checkTHPEnabled",
          "old_text": null,
          "new_text": "checkTHPEnabled(&err_msg)",
          "old_line_content": "        server.thp_enabled = 1;",
          "new_line_content": "    if (checkTHPEnabled(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 6186,
          "old_api": null,
          "new_api": "THPDisable",
          "old_text": null,
          "new_text": "THPDisable()",
          "old_line_content": "            server.thp_enabled = 0;",
          "new_line_content": "        if (THPDisable() == 0) {",
          "content_same": false
        },
        {
          "line": 6189,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "        }",
          "new_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 6191,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "    }",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.noreplicaserr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.roreplicaerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.roreplicaerr);",
          "content_same": false
        },
        {
          "line": 6199,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "old_line_content": "",
          "new_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "content_same": false
        },
        {
          "line": 6202,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.pidfile, \"w\")",
          "old_line_content": "    if (fp) {",
          "new_line_content": "    FILE *fp = fopen(server.pidfile, \"w\");",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    } else {",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 6207,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING, \"Failed to write PID file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n                            \"Can't execute '%s': only (P|S)SUBSCRIBE / \"\n                            \"(P|S)UNSUBSCRIBE / PING / QUIT / RESET are allowed in this context\",\n                            c->cmd->fullname)",
          "old_line_content": "                            \"Can't execute '%s': only (P|S)SUBSCRIBE / \"",
          "new_line_content": "        rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 6215,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "",
          "new_line_content": "    setsid();                 /* create a new session */",
          "content_same": false
        },
        {
          "line": 4171,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"-NOSUB '%s' command executed not in subscribed mode\", c->cmd->fullname)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommandFormat(c, \"-NOSUB '%s' command executed not in subscribed mode\", c->cmd->fullname);",
          "content_same": false
        },
        {
          "line": 6224,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.primarydownerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.primarydownerr);",
          "content_same": false
        },
        {
          "line": 6231,
          "old_api": null,
          "new_api": "serverBuildId",
          "old_text": null,
          "new_text": "serverBuildId()",
          "old_line_content": "    return version;",
          "new_line_content": "                               (unsigned long long)serverBuildId());",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.loadingerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.loadingerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "isInsideYieldingLongCommand",
          "old_text": null,
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "        if (server.busy_module_yield_flags && server.busy_module_yield_reply) {",
          "new_line_content": "    if (isInsideYieldingLongCommand() && !(c->cmd->flags & CMD_ALLOW_BUSY)) {",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply)",
          "old_line_content": "        } else if (server.busy_module_yield_flags) {",
          "new_line_content": "            rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply);",
          "content_same": false
        },
        {
          "line": 6253,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "}",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowevalerr)",
          "old_line_content": "        } else {",
          "new_line_content": "            rejectCommand(c, shared.slowevalerr);",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(1024 * 16)",
          "old_line_content": "    char *mode;",
          "new_line_content": "    char *buf = zmalloc(1024 * 16);",
          "content_same": false
        },
        {
          "line": 4211,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowscripterr)",
          "old_line_content": "        }",
          "new_line_content": "            rejectCommand(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"Replica can't interact with the keyspace\")",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommandFormat(c, \"Replica can't interact with the keyspace\");",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(stdout)",
          "old_line_content": "",
          "new_line_content": "        ((!server.syslog_enabled && server.logfile[0] == '\\0' && isatty(fileno(stdout))) || server.always_show_logo);",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Running mode=%s, port=%d.\", mode, server.port ? server.port : server.tls_port)",
          "old_line_content": "    } else {",
          "new_line_content": "        serverLog(LL_NOTICE, \"Running mode=%s, port=%d.\", mode, server.port ? server.port : server.tls_port);",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "blockPostponeClient",
          "old_text": null,
          "new_text": "blockPostponeClient(c)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        blockPostponeClient(c);",
          "content_same": false
        },
        {
          "line": 6279,
          "old_api": null,
          "new_api": "serverLogRaw",
          "old_text": null,
          "new_text": "serverLogRaw(LL_NOTICE | LL_RAW, buf)",
          "old_line_content": "    }",
          "new_line_content": "        serverLogRaw(LL_NOTICE | LL_RAW, buf);",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(buf)",
          "old_line_content": "}",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 4237,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.queued)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c, shared.queued);",
          "content_same": false
        },
        {
          "line": 6288,
          "old_api": null,
          "new_api": "connectionIndexByType",
          "old_text": null,
          "new_text": "connectionIndexByType(typename)",
          "old_line_content": "    if (conn_index < 0) return NULL;",
          "new_line_content": "    conn_index = connectionIndexByType(typename);",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": null,
          "new_api": "handleClientsBlockedOnKeys",
          "old_text": null,
          "new_text": "handleClientsBlockedOnKeys()",
          "old_line_content": "    }",
          "new_line_content": "        if (listLength(server.ready_keys) && !isInsideYieldingLongCommand()) handleClientsBlockedOnKeys();",
          "content_same": false
        },
        {
          "line": 6297,
          "old_api": null,
          "new_api": "closeListener",
          "old_text": null,
          "new_text": "closeListener(listener)",
          "old_line_content": "",
          "new_line_content": "    closeListener(listener);",
          "content_same": false
        },
        {
          "line": 4252,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*error))",
          "old_line_content": "        error->count = 1;",
          "new_line_content": "        struct serverError *error = zmalloc(sizeof(*error));",
          "content_same": false
        },
        {
          "line": 6301,
          "old_api": null,
          "new_api": "serverSetProcTitle",
          "old_text": null,
          "new_text": "serverSetProcTitle(NULL)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        if (server.set_proc_title) serverSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(server.errors, (unsigned char *)fullerr, namelen, error, NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        raxInsert(server.errors, (unsigned char *)fullerr, namelen, error, NULL);",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": null,
          "new_api": "connListen",
          "old_text": null,
          "new_text": "connListen(listener)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    if (connListen(listener) != C_OK) {",
          "content_same": false
        },
        {
          "line": 6312,
          "old_api": null,
          "new_api": "get_type",
          "old_text": null,
          "new_text": "listener->ct->get_type(NULL)",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unrecoverable error creating %s accept handler.\", listener->ct->get_type(NULL));",
          "content_same": false
        },
        {
          "line": 6315,
          "old_api": null,
          "new_api": "serverSetProcTitle",
          "old_text": null,
          "new_text": "serverSetProcTitle(NULL)",
          "old_line_content": "",
          "new_line_content": "    if (server.set_proc_title) serverSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(listener->fd[j])",
          "old_line_content": "    }",
          "new_line_content": "        for (j = 0; j < listener->count; j++) close(listener->fd[j]);",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.clistener.fd[j])",
          "old_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "new_line_content": "        for (j = 0; j < server.clistener.count; j++) close(server.clistener.fd[j]);",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    }",
          "new_line_content": "            serverLog(LL_WARNING, \"Error removing the unix socket file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 6336,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    } else if (server.loading) {",
          "new_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": null,
          "new_api": "serverLogRawFromHandler",
          "old_text": null,
          "new_text": "serverLogRawFromHandler(LL_WARNING, msg)",
          "old_line_content": "    server.shutdown_asap = 1;",
          "new_line_content": "    serverLogRawFromHandler(LL_WARNING, msg);",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = 0;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 6353,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGINT, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction(SIGINT, &act, NULL);",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": null,
          "new_api": "setupDebugSigHandlers",
          "old_text": null,
          "new_text": "setupDebugSigHandlers()",
          "old_line_content": "}",
          "new_line_content": "    setupDebugSigHandlers();",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": null,
          "new_api": "isShutdownInitiated",
          "old_text": null,
          "new_text": "isShutdownInitiated()",
          "old_line_content": "",
          "new_line_content": "    if (isShutdownInitiated()) return C_ERR;",
          "content_same": false
        },
        {
          "line": 6363,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(sig)",
          "old_line_content": "    int level = server.in_fork_child == CHILD_TYPE_MODULE ? LL_VERBOSE : LL_WARNING;",
          "new_line_content": "    UNUSED(sig);",
          "content_same": false
        },
        {
          "line": 6366,
          "old_api": null,
          "new_api": "exitFromChild",
          "old_text": null,
          "new_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "old_line_content": "}",
          "new_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = 0;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 4328,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(client)",
          "old_line_content": "    } else {",
          "new_line_content": "        sdsfree(client);",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGUSR1, &act, NULL)",
          "old_line_content": "}",
          "new_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"User requested shutdown...\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_NOTICE, \"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"STOPPING=1\\n\")",
          "old_line_content": "",
          "new_line_content": "    if (server.supervised_mode == SUPERVISED_SYSTEMD) serverCommunicateSystemd(\"STOPPING=1\\n\");",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "isReadyToShutdown",
          "old_text": null,
          "new_text": "isReadyToShutdown()",
          "old_line_content": "        server.shutdown_mstime = server.mstime + server.shutdown_timeout * 1000;",
          "new_line_content": "    if (!(flags & SHUTDOWN_NOW) && server.shutdown_timeout != 0 && !isReadyToShutdown()) {",
          "content_same": false
        },
        {
          "line": 6385,
          "old_api": null,
          "new_api": "closeListeningSockets",
          "old_text": null,
          "new_text": "closeListeningSockets(0)",
          "old_line_content": "    if (server.cluster_enabled && server.cluster_config_file_lock_fd != -1)",
          "new_line_content": "    closeListeningSockets(0);",
          "content_same": false
        },
        {
          "line": 6387,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.cluster_config_file_lock_fd)",
          "old_line_content": "",
          "new_line_content": "        close(server.cluster_config_file_lock_fd); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\")",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\");",
          "content_same": false
        },
        {
          "line": 6391,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(server.pidfile)",
          "old_line_content": "    server.pidfile = NULL;",
          "new_line_content": "    zfree(server.pidfile);",
          "content_same": false
        },
        {
          "line": 4344,
          "old_api": null,
          "new_api": "finishShutdown",
          "old_text": null,
          "new_text": "finishShutdown()",
          "old_line_content": "}",
          "new_line_content": "    return finishShutdown();",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "            errno = EEXIST;",
          "new_line_content": "        if (hasActiveChildProcess()) {",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.replicas)",
          "old_line_content": "",
          "new_line_content": "    if (listLength(server.replicas) == 0) return 1; /* No replicas. */",
          "content_same": false
        },
        {
          "line": 6403,
          "old_api": null,
          "new_api": "openChildInfoPipe",
          "old_text": null,
          "new_text": "openChildInfoPipe()",
          "old_line_content": "    }",
          "new_line_content": "        openChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 6408,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "        /* Child.",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "        if (replica->repl_ack_off != server.primary_repl_offset) return 0;",
          "new_line_content": "        client *replica = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": null,
          "new_api": "unpauseActions",
          "old_text": null,
          "new_text": "unpauseActions(PAUSE_DURING_SHUTDOWN)",
          "old_line_content": "}",
          "new_line_content": "    unpauseActions(PAUSE_DURING_SHUTDOWN);",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": null,
          "new_api": "closeChildUnusedResourceAfterFork",
          "old_text": null,
          "new_text": "closeChildUnusedResourceAfterFork()",
          "old_line_content": "        /* Close the reading part, so that if the parent crashes, the child will",
          "new_line_content": "        closeChildUnusedResourceAfterFork();",
          "content_same": false
        },
        {
          "line": 6424,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.child_info_pipe[0])",
          "old_line_content": "    } else {",
          "new_line_content": "        if (server.child_info_pipe[0] != -1) close(server.child_info_pipe[0]);",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": null,
          "new_api": "cancelShutdown",
          "old_text": null,
          "new_text": "cancelShutdown()",
          "old_line_content": "    } else if (server.shutdown_asap) {",
          "new_line_content": "        cancelShutdown();",
          "content_same": false
        },
        {
          "line": 6429,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "            errno = fork_errno;",
          "new_line_content": "            if (isMutuallyExclusiveChildType(purpose)) closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "        server.stat_fork_rate =",
          "new_line_content": "        server.stat_fork_time = ustime() - start;",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Shutdown manually aborted.\")",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    serverLog(LL_NOTICE, \"Shutdown manually aborted.\");",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"fork\", server.stat_fork_time / 1000)",
          "old_line_content": "",
          "new_line_content": "        latencyAddSampleIfNeeded(\"fork\", server.stat_fork_time / 1000);",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": null,
          "new_api": "isMutuallyExclusiveChildType",
          "old_text": null,
          "new_text": "isMutuallyExclusiveChildType(purpose)",
          "old_line_content": "            server.child_pid = childpid;",
          "new_line_content": "        if (isMutuallyExclusiveChildType(purpose)) {",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(replicas_list_node)",
          "old_line_content": "        num_replicas++;",
          "new_line_content": "        client *replica = listNodeValue(replicas_list_node);",
          "content_same": false
        },
        {
          "line": 6455,
          "old_api": null,
          "new_api": "dbTotalServerKeyCount",
          "old_text": null,
          "new_text": "dbTotalServerKeyCount()",
          "old_line_content": "        }",
          "new_line_content": "            server.stat_current_save_keys_total = dbTotalServerKeyCount();",
          "content_same": false
        },
        {
          "line": 6459,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(VALKEYMODULE_EVENT_FORK_CHILD, VALKEYMODULE_SUBEVENT_FORK_CHILD_BORN, NULL)",
          "old_line_content": "    }",
          "new_line_content": "        moduleFireServerEvent(VALKEYMODULE_EVENT_FORK_CHILD, VALKEYMODULE_SUBEVENT_FORK_CHILD_BORN, NULL);",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "replstateToString",
          "old_text": null,
          "new_text": "replstateToString(replica->repl_state)",
          "old_line_content": "        }",
          "new_line_content": "                      replstateToString(replica->repl_state));",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"%d of %d replicas are in sync when shutting down.\", num_replicas - num_lagging_replicas,\n                  num_replicas)",
          "old_line_content": "                  num_replicas);",
          "new_line_content": "        serverLog(LL_NOTICE, \"%d of %d replicas are in sync when shutting down.\", num_replicas - num_lagging_replicas,",
          "content_same": false
        },
        {
          "line": 6465,
          "old_api": null,
          "new_api": "sendChildInfoGeneric",
          "old_text": null,
          "new_text": "sendChildInfoGeneric(info_type, 0, -1, pname)",
          "old_line_content": "}",
          "new_line_content": "    sendChildInfoGeneric(info_type, 0, -1, pname);",
          "content_same": false
        },
        {
          "line": 6469,
          "old_api": null,
          "new_api": "sendChildInfoGeneric",
          "old_text": null,
          "new_text": "sendChildInfoGeneric(info_type, keys, -1, pname)",
          "old_line_content": "}",
          "new_line_content": "    sendChildInfoGeneric(info_type, keys, -1, pname);",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": null,
          "new_api": "ldbKillForkedSessions",
          "old_text": null,
          "new_text": "ldbKillForkedSessions()",
          "old_line_content": "",
          "new_line_content": "    ldbKillForkedSessions();",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "killRDBChild",
          "old_text": null,
          "new_text": "killRDBChild()",
          "old_line_content": "        /* Note that, in killRDBChild normally has backgroundSaveDoneHandler",
          "new_line_content": "        killRDBChild();",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.child_pid, 0)",
          "old_line_content": "    }",
          "new_line_content": "        rdbRemoveTempFile(server.child_pid, 0);",
          "content_same": false
        },
        {
          "line": 6489,
          "old_api": null,
          "new_api": "zmadvise_dontneed",
          "old_text": null,
          "new_text": "zmadvise_dontneed(ptr)",
          "old_line_content": "}",
          "new_line_content": "    zmadvise_dontneed(ptr);",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": null,
          "new_api": "TerminateModuleForkChild",
          "old_text": null,
          "new_text": "TerminateModuleForkChild(server.child_pid, 0)",
          "old_line_content": "    }",
          "new_line_content": "        TerminateModuleForkChild(server.child_pid, 0);",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": null,
          "new_api": "dismissSds",
          "old_text": null,
          "new_text": "dismissSds(c->querybuf)",
          "old_line_content": "    /* Dismiss argv array only if we estimate it contains a big buffer. */",
          "new_line_content": "    if (c->querybuf) dismissSds(c->querybuf);",
          "content_same": false
        },
        {
          "line": 4452,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\")",
          "old_line_content": "            } else {",
          "new_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\");",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": null,
          "new_api": "dismissObject",
          "old_text": null,
          "new_text": "dismissObject(c->argv[i], 0)",
          "old_line_content": "        }",
          "new_line_content": "            dismissObject(c->argv[i], 0);",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "old_line_content": "                if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "content_same": false
        },
        {
          "line": 6503,
          "old_api": null,
          "new_api": "dismissMemory",
          "old_text": null,
          "new_text": "dismissMemory(c->argv, c->argc * sizeof(robj *))",
          "old_line_content": "",
          "new_line_content": "    if (c->argc) dismissMemory(c->argv, c->argc * sizeof(robj *));",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\")",
          "old_line_content": "                goto error;",
          "new_line_content": "                    serverCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\");",
          "content_same": false
        },
        {
          "line": 6507,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "        listIter li;",
          "new_line_content": "    if (listLength(c->reply) && c->reply_bytes / listLength(c->reply) >= server.page_size) {",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": null,
          "new_api": "killAppendOnlyChild",
          "old_text": null,
          "new_text": "killAppendOnlyChild()",
          "old_line_content": "    }",
          "new_line_content": "        killAppendOnlyChild();",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            /* Default bulk size is 16k, actually it has extra data, maybe it",
          "new_line_content": "            clientReplyBlock *bulk = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6515,
          "old_api": null,
          "new_api": "dismissMemory",
          "old_text": null,
          "new_text": "dismissMemory(bulk, bulk->size)",
          "old_line_content": "        }",
          "new_line_content": "            if (bulk) dismissMemory(bulk, bulk->size);",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "            serverLog(LL_WARNING, \"Fail to fsync the AOF file: %s.\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "        serverLog(LL_NOTICE, \"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "            serverCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "rdbPopulateSaveInfo",
          "old_text": null,
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "        /* Keep the page cache since it's likely to restart soon */",
          "new_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(REPLICA_REQ_NONE, server.rdb_filename, rsiptr, RDBFLAGS_KEEP_CACHE)",
          "old_line_content": "            /* Ooops.. error saving! The best we can do is to continue",
          "new_line_content": "        if (rdbSave(REPLICA_REQ_NONE, server.rdb_filename, rsiptr, RDBFLAGS_KEEP_CACHE) != C_OK) {",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Error trying to save the DB. Exit anyway.\")",
          "old_line_content": "            } else {",
          "new_line_content": "                serverLog(LL_WARNING, \"Error trying to save the DB. Exit anyway.\");",
          "content_same": false
        },
        {
          "line": 4490,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Error trying to save the DB, can't exit.\")",
          "old_line_content": "                if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "                serverLog(LL_WARNING, \"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "old_line_content": "                goto error;",
          "new_line_content": "                    serverCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "content_same": false
        },
        {
          "line": 6540,
          "old_api": null,
          "new_api": "dismissMemory",
          "old_text": null,
          "new_text": "dismissMemory(o, o->size)",
          "old_line_content": "    }",
          "new_line_content": "        dismissMemory(o, o->size);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "aofManifestFree",
          "old_text": null,
          "new_text": "aofManifestFree(server.aof_manifest)",
          "old_line_content": "",
          "new_line_content": "    if (server.aof_manifest) aofManifestFree(server.aof_manifest);",
          "content_same": false
        },
        {
          "line": 6547,
          "old_api": null,
          "new_api": "dismissClientMemory",
          "old_text": null,
          "new_text": "dismissClientMemory(c)",
          "old_line_content": "    }",
          "new_line_content": "        dismissClientMemory(c);",
          "content_same": false
        },
        {
          "line": 4502,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(VALKEYMODULE_EVENT_SHUTDOWN, 0, NULL)",
          "old_line_content": "",
          "new_line_content": "    moduleFireServerEvent(VALKEYMODULE_EVENT_SHUTDOWN, 0, NULL);",
          "content_same": false
        },
        {
          "line": 4507,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    }",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 6557,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(exec_name, \"valkey-sentinel\")",
          "old_line_content": "",
          "new_line_content": "    if (strstr(exec_name, \"valkey-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 4512,
          "old_api": null,
          "new_api": "flushReplicasOutputBuffers",
          "old_text": null,
          "new_text": "flushReplicasOutputBuffers()",
          "old_line_content": "",
          "new_line_content": "    flushReplicasOutputBuffers();",
          "content_same": false
        },
        {
          "line": 6560,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(exec_name, \"redis-sentinel\")",
          "old_line_content": "",
          "new_line_content": "    if (strstr(exec_name, \"redis-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": null,
          "new_api": "closeListeningSockets",
          "old_text": null,
          "new_text": "closeListeningSockets(1)",
          "old_line_content": "",
          "new_line_content": "    closeListeningSockets(1);",
          "content_same": false
        },
        {
          "line": 6563,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j], \"--sentinel\")",
          "old_line_content": "    return 0;",
          "new_line_content": "        if (!strcmp(argv[j], \"--sentinel\")) return 1;",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": null,
          "new_api": "clusterHandleServerShutdown",
          "old_text": null,
          "new_text": "clusterHandleServerShutdown()",
          "old_line_content": "",
          "new_line_content": "    if (server.cluster_enabled) clusterHandleServerShutdown();",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"%s is now ready to exit, bye bye...\", server.sentinel_mode ? \"Sentinel\" : \"Valkey\")",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    serverLog(LL_WARNING, \"%s is now ready to exit, bye bye...\", server.sentinel_mode ? \"Sentinel\" : \"Valkey\");",
          "content_same": false
        },
        {
          "line": 6569,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    if (server.aof_state == AOF_ON) {",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 6572,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        if (ret != AOF_NOT_EXIST)",
          "new_line_content": "        if (ret == AOF_FAILED || ret == AOF_OPEN_ERR) exit(1);",
          "content_same": false
        },
        {
          "line": 4525,
          "old_api": null,
          "new_api": "cancelShutdown",
          "old_text": null,
          "new_text": "cancelShutdown()",
          "old_line_content": "    return C_ERR;",
          "new_line_content": "    cancelShutdown();",
          "content_same": false
        },
        {
          "line": 6574,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    } else {",
          "new_line_content": "            serverLog(LL_NOTICE, \"DB loaded from append only file: %.3f seconds\", (float)(ustime() - start) / 1000000);",
          "content_same": false
        },
        {
          "line": 6580,
          "old_api": null,
          "new_api": "iAmPrimary",
          "old_text": null,
          "new_text": "iAmPrimary()",
          "old_line_content": "            /* Primary may delete expired keys when loading, we should",
          "new_line_content": "        if (iAmPrimary()) {",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": null,
          "new_api": "createReplicationBacklog",
          "old_text": null,
          "new_text": "createReplicationBacklog()",
          "old_line_content": "            rdb_flags |= RDBFLAGS_FEED_REPL;",
          "new_line_content": "            createReplicationBacklog();",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.rdb_filename, &rsi, rdb_flags)",
          "old_line_content": "        if (rdb_load_ret == RDB_OK) {",
          "new_line_content": "        int rdb_load_ret = rdbLoad(server.rdb_filename, &rsi, rdb_flags);",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "",
          "new_line_content": "            serverLog(LL_NOTICE, \"DB loaded from disk: %.3f seconds\", (float)(ustime() - start) / 1000000);",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": null,
          "new_api": "atomic_load_explicit",
          "old_text": null,
          "new_text": "atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_acquire)",
          "old_line_content": "        if (aof_bio_fsync_status == C_ERR) {",
          "new_line_content": "        int aof_bio_fsync_status = atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_acquire);",
          "content_same": false
        },
        {
          "line": 6598,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(server.replid, rsi.repl_id, sizeof(server.replid))",
          "old_line_content": "                    server.primary_repl_offset = rsi.repl_offset;",
          "new_line_content": "                    memcpy(server.replid, rsi.repl_id, sizeof(server.replid));",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "atomic_load_explicit",
          "old_text": null,
          "new_text": "atomic_load_explicit(&server.aof_bio_fsync_errno, memory_order_relaxed)",
          "old_line_content": "            return DISK_ERROR_TYPE_AOF;",
          "new_line_content": "            server.aof_last_write_errno = atomic_load_explicit(&server.aof_bio_fsync_errno, memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(server.cached_primary, rsi.repl_stream_db)",
          "old_line_content": "                } else {",
          "new_line_content": "                    selectDb(server.cached_primary, rsi.repl_stream_db);",
          "content_same": false
        },
        {
          "line": 6609,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(server.replid2, rsi.repl_id, sizeof(server.replid))",
          "old_line_content": "                    server.second_replid_offset = rsi.repl_offset + 1;",
          "new_line_content": "                    memcpy(server.replid2, rsi.repl_id, sizeof(server.replid));",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(shared.bgsaveerr->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        ret = sdsdup(shared.bgsaveerr->ptr);",
          "content_same": false
        },
        {
          "line": 6613,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(server.repl_backlog)",
          "old_line_content": "                    server.repl_backlog->offset = server.primary_repl_offset - server.repl_backlog->histlen + 1;",
          "new_line_content": "                    serverAssert(server.repl_backlog);",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(server.aof_last_write_errno)",
          "old_line_content": "    }",
          "new_line_content": "                        strerror(server.aof_last_write_errno));",
          "content_same": false
        },
        {
          "line": 6616,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                }",
          "new_line_content": "                    server.repl_no_replicas_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 6621,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": null,
          "new_api": "addReplyErrorArity",
          "old_text": null,
          "new_text": "addReplyErrorArity(c)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorArity(c);",
          "content_same": false
        },
        {
          "line": 6629,
          "old_api": null,
          "new_api": "freeReplicationBacklog",
          "old_text": null,
          "new_text": "freeReplicationBacklog()",
          "old_line_content": "    }",
          "new_line_content": "        if (!rsi_is_valid && server.repl_backlog) freeReplicationBacklog();",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c, \"pong\", 4)",
          "old_line_content": "        if (c->argc == 1)",
          "new_line_content": "        addReplyBulkCBuffer(c, \"pong\", 4);",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c, \"\", 0)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyBulkCBuffer(c, \"\", 0);",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "            addReplyBulk(c, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Valkey aborting for OUT OF MEMORY. Allocating %zu bytes!\", allocation_size)",
          "old_line_content": "}",
          "new_line_content": "    serverPanic(\"Valkey aborting for OUT OF MEMORY. Allocating %zu bytes!\", allocation_size);",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.pong)",
          "old_line_content": "        else",
          "new_line_content": "            addReply(c, shared.pong);",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulk(c, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulk(c, c->argv[1]);",
          "content_same": false
        },
        {
          "line": 6644,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"listen-addr\")",
          "old_line_content": "        if (server.port || server.tls_port)",
          "new_line_content": "    } else if (!strcmp(varname, \"listen-addr\")) {",
          "content_same": false
        },
        {
          "line": 6646,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                                server.port ? server.port : server.tls_port);",
          "new_line_content": "            return sdscatprintf(sdsempty(), \"%s:%u\", server.bindaddr_count ? server.bindaddr[0] : \"*\",",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c, server.ustime - ((long long)server.unixtime) * 1000000)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulkLongLong(c, server.ustime - ((long long)server.unixtime) * 1000000);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"server-mode\")",
          "old_line_content": "        if (server.cluster_enabled)",
          "new_line_content": "    } else if (!strcmp(varname, \"server-mode\")) {",
          "content_same": false
        },
        {
          "line": 6652,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"[cluster]\")",
          "old_line_content": "        else if (server.sentinel_mode)",
          "new_line_content": "            return sdsnew(\"[cluster]\");",
          "content_same": false
        },
        {
          "line": 6654,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"[sentinel]\")",
          "old_line_content": "        else",
          "new_line_content": "            return sdsnew(\"[sentinel]\");",
          "content_same": false
        },
        {
          "line": 6664,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(server.unixsocket)",
          "old_line_content": "    } else",
          "new_line_content": "        return sdsnew(server.unixsocket);",
          "content_same": false
        },
        {
          "line": 4619,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, count)",
          "old_line_content": "    j = 0;",
          "new_line_content": "    addReplySetLen(c, count);",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c, replyFlags[j].name)",
          "old_line_content": "        j++;",
          "new_line_content": "        if (flags & replyFlags[j].flag) addReplyStatus(c, replyFlags[j].name);",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": null,
          "new_api": "sdstrim",
          "old_text": null,
          "new_text": "sdstrim(res, \" \")",
          "old_line_content": "}",
          "new_line_content": "    return sdstrim(res, \" \");",
          "content_same": false
        },
        {
          "line": 6679,
          "old_api": null,
          "new_api": "expandProcTitleTemplate",
          "old_text": null,
          "new_text": "expandProcTitleTemplate(template, \"\")",
          "old_line_content": "    if (!res) return 0;",
          "new_line_content": "    sds res = expandProcTitleTemplate(template, \"\");",
          "content_same": false
        },
        {
          "line": 6682,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(res)",
          "old_line_content": "    return ok;",
          "new_line_content": "    sdsfree(res);",
          "content_same": false
        },
        {
          "line": 6689,
          "old_api": null,
          "new_api": "expandProcTitleTemplate",
          "old_text": null,
          "new_text": "expandProcTitleTemplate(server.proc_title_template, title)",
          "old_line_content": "    if (!proc_title) return C_ERR; /* Not likely, proc_title_template is validated */",
          "new_line_content": "    sds proc_title = expandProcTitleTemplate(server.proc_title_template, title);",
          "content_same": false
        },
        {
          "line": 6693,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(proc_title)",
          "old_line_content": "#else",
          "new_line_content": "    sdsfree(proc_title);",
          "content_same": false
        },
        {
          "line": 6695,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(title)",
          "old_line_content": "#endif",
          "new_line_content": "    UNUSED(title);",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, cmd->flags, flagNames)",
          "old_line_content": "}",
          "new_line_content": "    addReplyCommandFlags(c, cmd->flags, flagNames);",
          "content_same": false
        },
        {
          "line": 6703,
          "old_api": null,
          "new_api": "setcpuaffinity",
          "old_text": null,
          "new_text": "setcpuaffinity(cpulist)",
          "old_line_content": "#else",
          "new_line_content": "    setcpuaffinity(cpulist);",
          "content_same": false
        },
        {
          "line": 6705,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cpulist)",
          "old_line_content": "#endif",
          "new_line_content": "    UNUSED(cpulist);",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, cmd->doc_flags, docFlagNames)",
          "old_line_content": "}",
          "new_line_content": "    addReplyCommandFlags(c, cmd->doc_flags, docFlagNames);",
          "content_same": false
        },
        {
          "line": 6713,
          "old_api": null,
          "new_api": "sd_notify",
          "old_text": null,
          "new_text": "sd_notify(0, sd_notify_msg)",
          "old_line_content": "",
          "new_line_content": "    int ret = sd_notify(0, sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 6716,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\")",
          "old_line_content": "    else if (ret < 0)",
          "new_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\");",
          "content_same": false
        },
        {
          "line": 6718,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret)",
          "old_line_content": "    return ret;",
          "new_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret);",
          "content_same": false
        },
        {
          "line": 6721,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(sd_notify_msg)",
          "old_line_content": "    return 0;",
          "new_line_content": "    UNUSED(sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, flags, docFlagNames)",
          "old_line_content": "}",
          "new_line_content": "    addReplyCommandFlags(c, flags, docFlagNames);",
          "content_same": false
        },
        {
          "line": 6728,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"UPSTART_JOB\")",
          "old_line_content": "",
          "new_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 6731,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"upstart supervision requested, but UPSTART_JOB not found!\")",
          "old_line_content": "        return 0;",
          "new_line_content": "        serverLog(LL_WARNING, \"upstart supervision requested, but UPSTART_JOB not found!\");",
          "content_same": false
        },
        {
          "line": 6737,
          "old_api": null,
          "new_api": "unsetenv",
          "old_text": null,
          "new_text": "unsetenv(\"UPSTART_JOB\")",
          "old_line_content": "    return 1;",
          "new_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, flags, argFlagNames)",
          "old_line_content": "}",
          "new_line_content": "    addReplyCommandFlags(c, flags, argFlagNames);",
          "content_same": false
        },
        {
          "line": 6744,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n              \"systemd supervision requested or auto-detected, but Valkey is compiled without libsystemd support!\")",
          "old_line_content": "              \"systemd supervision requested or auto-detected, but Valkey is compiled without libsystemd support!\");",
          "new_line_content": "    serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, num_args)",
          "old_line_content": "    for (int j = 0; j < num_args; j++) {",
          "new_line_content": "    addReplyArrayLen(c, num_args);",
          "content_same": false
        },
        {
          "line": 6749,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and \"\n                         \"TimeoutStopSec in your service unit.\")",
          "old_line_content": "                         \"TimeoutStopSec in your service unit.\");",
          "new_line_content": "    serverLog(LL_NOTICE, \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and \"",
          "content_same": false
        },
        {
          "line": 6760,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE, \"Upstart supervision detected.\")",
          "old_line_content": "            mode = SUPERVISED_UPSTART;",
          "new_line_content": "            serverLog(LL_VERBOSE, \"Upstart supervision detected.\");",
          "content_same": false
        },
        {
          "line": 6763,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE, \"Systemd supervision detected.\")",
          "old_line_content": "            mode = SUPERVISED_SYSTEMD;",
          "new_line_content": "            serverLog(LL_VERBOSE, \"Systemd supervision detected.\");",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "",
          "new_line_content": "        addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].name)",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c, args[j].name);",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, ARG_TYPE_STR[args[j].type])",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c, ARG_TYPE_STR[args[j].type]);",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": null,
          "new_api": "serverSupervisedSystemd",
          "old_text": null,
          "new_text": "serverSupervisedSystemd()",
          "old_line_content": "    default: break;",
          "new_line_content": "    case SUPERVISED_SYSTEMD: ret = serverSupervisedSystemd(); break;",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].display_text ? args[j].display_text : args[j].name)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].display_text ? args[j].display_text : args[j].name);",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, args[j].key_spec_index)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyLongLong(c, args[j].key_spec_index);",
          "content_same": false
        },
        {
          "line": 6781,
          "old_api": null,
          "new_api": "getMyClusterNode",
          "old_text": null,
          "new_text": "getMyClusterNode()",
          "old_line_content": "}",
          "new_line_content": "            (server.cluster_enabled && clusterNodeIsPrimary(getMyClusterNode())));",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].token)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].token);",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].summary)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].summary);",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].since)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].since);",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].deprecated_since)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].deprecated_since);",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "addReplyFlagsForArg",
          "old_text": null,
          "new_text": "addReplyFlagsForArg(c, args[j].flags)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyFlagsForArg(c, args[j].flags);",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": null,
          "new_api": "addReplyCommandArgList",
          "old_text": null,
          "new_text": "addReplyCommandArgList(c, args[j].subargs, args[j].num_args)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommandArgList(c, args[j].subargs, args[j].num_args);",
          "content_same": false
        },
        {
          "line": 6805,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(name, serverTests[j].name)",
          "old_line_content": "            return serverTests[j].proc;",
          "new_line_content": "        if (!strcasecmp(name, serverTests[j].name)) {",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, rs->length)",
          "old_line_content": "",
          "new_line_content": "    addReplyMapLen(c, rs->length);",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, curr->key)",
          "old_line_content": "        switch (curr->type) {",
          "new_line_content": "        addReplyBulkCString(c, curr->key);",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": null,
          "new_api": "addReplyJson",
          "old_text": null,
          "new_text": "addReplyJson(c, curr->value.object)",
          "old_line_content": "        case (JSON_TYPE_ARRAY):",
          "new_line_content": "        case (JSON_TYPE_OBJECT): addReplyJson(c, curr->value.object); break;",
          "content_same": false
        },
        {
          "line": 6820,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[1], \"test\")",
          "old_line_content": "        int flags = 0;",
          "new_line_content": "    if (argc >= 3 && !strcasecmp(argv[1], \"test\")) {",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, curr->value.array.length)",
          "old_line_content": "            for (int k = 0; k < curr->value.array.length; k++) {",
          "new_line_content": "            addReplyArrayLen(c, curr->value.array.length);",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": null,
          "new_api": "addReplyJson",
          "old_text": null,
          "new_text": "addReplyJson(c, object)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyJson(c, object);",
          "content_same": false
        },
        {
          "line": 6824,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"--accurate\")",
          "old_line_content": "                flags |= TEST_ACCURATE;",
          "new_line_content": "            if (!strcasecmp(arg, \"--accurate\"))",
          "content_same": false
        },
        {
          "line": 6826,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"--large-memory\")",
          "old_line_content": "                flags |= TEST_LARGE_MEMORY;",
          "new_line_content": "            else if (!strcasecmp(arg, \"--large-memory\"))",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid JSON type %d\", curr->type)",
          "old_line_content": "        }",
          "new_line_content": "        default: serverPanic(\"Invalid JSON type %d\", curr->type);",
          "content_same": false
        },
        {
          "line": 6828,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"--valgrind\")",
          "old_line_content": "                flags |= TEST_VALGRIND;",
          "new_line_content": "            else if (!strcasecmp(arg, \"--valgrind\"))",
          "content_same": false
        },
        {
          "line": 6832,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[2], \"all\")",
          "old_line_content": "            int numtests = sizeof(serverTests) / sizeof(struct serverTest);",
          "new_line_content": "        if (!strcasecmp(argv[2], \"all\")) {",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, cmd->num_history)",
          "old_line_content": "    for (int j = 0; j < cmd->num_history; j++) {",
          "new_line_content": "    addReplySetLen(c, cmd->num_history);",
          "content_same": false
        },
        {
          "line": 6835,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "serverTests[j].proc(argc, argv, flags)",
          "old_line_content": "            }",
          "new_line_content": "                serverTests[j].failed = (serverTests[j].proc(argc, argv, flags) != 0);",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->history[j].changes)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->history[j].changes);",
          "content_same": false
        },
        {
          "line": 6843,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"[failed] Test - %s\\n\", serverTests[j].name)",
          "old_line_content": "                } else {",
          "new_line_content": "                    printf(\"[failed] Test - %s\\n\", serverTests[j].name);",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, cmd->num_tips)",
          "old_line_content": "    for (int j = 0; j < cmd->num_tips; j++) {",
          "new_line_content": "    addReplySetLen(c, cmd->num_tips);",
          "content_same": false
        },
        {
          "line": 6845,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"[ok] Test - %s\\n\", serverTests[j].name)",
          "old_line_content": "                }",
          "new_line_content": "                    printf(\"[ok] Test - %s\\n\", serverTests[j].name);",
          "content_same": false
        },
        {
          "line": 4798,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->tips[j])",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->tips[j]);",
          "content_same": false
        },
        {
          "line": 6849,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%d tests, %d passed, %d failed\\n\", numtests, numtests - failed_num, failed_num)",
          "old_line_content": "",
          "new_line_content": "            printf(\"%d tests, %d passed, %d failed\\n\", numtests, numtests - failed_num, failed_num);",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, cmd->key_specs_num)",
          "old_line_content": "    for (int i = 0; i < cmd->key_specs_num; i++) {",
          "new_line_content": "    addReplySetLen(c, cmd->key_specs_num);",
          "content_same": false
        },
        {
          "line": 6853,
          "old_api": null,
          "new_api": "getTestProcByName",
          "old_text": null,
          "new_text": "getTestProcByName(argv[2])",
          "old_line_content": "            if (!proc) return -1; /* test not found */",
          "new_line_content": "            serverTestProc *proc = getTestProcByName(argv[2]);",
          "content_same": false
        },
        {
          "line": 6855,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "proc(argc, argv, flags)",
          "old_line_content": "        }",
          "new_line_content": "            return proc(argc, argv, flags);",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "",
          "new_line_content": "        addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->key_specs[i].notes)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, cmd->key_specs[i].notes);",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "addReplyFlagsForKeyArgs",
          "old_text": null,
          "new_text": "addReplyFlagsForKeyArgs(c, cmd->key_specs[i].flags)",
          "old_line_content": "",
          "new_line_content": "        addReplyFlagsForKeyArgs(c, cmd->key_specs[i].flags);",
          "content_same": false
        },
        {
          "line": 6864,
          "old_api": null,
          "new_api": "spt_init",
          "old_text": null,
          "new_text": "spt_init(argc, argv)",
          "old_line_content": "#endif",
          "new_line_content": "    spt_init(argc, argv);",
          "content_same": false
        },
        {
          "line": 4818,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"begin_search\")",
          "old_line_content": "        switch (cmd->key_specs[i].begin_search_type) {",
          "new_line_content": "        addReplyBulkCString(c, \"begin_search\");",
          "content_same": false
        },
        {
          "line": 6867,
          "old_api": null,
          "new_api": "zmalloc_set_oom_handler",
          "old_text": null,
          "new_text": "zmalloc_set_oom_handler(serverOutOfMemoryHandler)",
          "old_line_content": "",
          "new_line_content": "    zmalloc_set_oom_handler(serverOutOfMemoryHandler);",
          "content_same": false
        },
        {
          "line": 4823,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"unknown\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"unknown\");",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, 0)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyMapLen(c, 0);",
          "content_same": false
        },
        {
          "line": 6875,
          "old_api": null,
          "new_api": "crc64_init",
          "old_text": null,
          "new_text": "crc64_init()",
          "old_line_content": "",
          "new_line_content": "    crc64_init();",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"index\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"index\");",
          "content_same": false
        },
        {
          "line": 6881,
          "old_api": null,
          "new_api": "umask",
          "old_text": null,
          "new_text": "umask(0777)",
          "old_line_content": "",
          "new_line_content": "    umask(server.umask = umask(0777));",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].bs.index.pos)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].bs.index.pos);",
          "content_same": false
        },
        {
          "line": 6885,
          "old_api": null,
          "new_api": "dictSetHashFunctionSeed",
          "old_text": null,
          "new_text": "dictSetHashFunctionSeed(hashseed)",
          "old_line_content": "",
          "new_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "content_same": false
        },
        {
          "line": 6887,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(argv[0], '/')",
          "old_line_content": "    if (exec_name == NULL) exec_name = argv[0];",
          "new_line_content": "    char *exec_name = strrchr(argv[0], '/');",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"keyword\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"keyword\");",
          "content_same": false
        },
        {
          "line": 6891,
          "old_api": null,
          "new_api": "ACLInit",
          "old_text": null,
          "new_text": "ACLInit()",
          "old_line_content": "                  basic networking code and client creation depends on it. */",
          "new_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": null,
          "new_api": "connTypeInitialize",
          "old_text": null,
          "new_text": "connTypeInitialize()",
          "old_line_content": "",
          "new_line_content": "    connTypeInitialize();",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom);",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "old_line_content": "        }",
          "new_line_content": "        default: serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "content_same": false
        },
        {
          "line": 6899,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(char *) * (argc + 1))",
          "old_line_content": "    server.exec_argv[argc] = NULL;",
          "new_line_content": "    server.exec_argv = zmalloc(sizeof(char *) * (argc + 1));",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"find_keys\")",
          "old_line_content": "        switch (cmd->key_specs[i].find_keys_type) {",
          "new_line_content": "        addReplyBulkCString(c, \"find_keys\");",
          "content_same": false
        },
        {
          "line": 6901,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(argv[j])",
          "old_line_content": "",
          "new_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"unknown\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"unknown\");",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": null,
          "new_api": "initSentinel",
          "old_text": null,
          "new_text": "initSentinel()",
          "old_line_content": "    }",
          "new_line_content": "        initSentinel();",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, 0)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyMapLen(c, 0);",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"range\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"range\");",
          "content_same": false
        },
        {
          "line": 6917,
          "old_api": null,
          "new_api": "redis_check_aof_main",
          "old_text": null,
          "new_text": "redis_check_aof_main(argc, argv)",
          "old_line_content": "",
          "new_line_content": "        redis_check_aof_main(argc, argv);",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.limit)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.range.limit);",
          "content_same": false
        },
        {
          "line": 6925,
          "old_api": null,
          "new_api": "redis_check_aof_main",
          "old_text": null,
          "new_text": "redis_check_aof_main(argc, argv)",
          "old_line_content": "",
          "new_line_content": "        redis_check_aof_main(argc, argv);",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"keynum\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"keynum\");",
          "content_same": false
        },
        {
          "line": 6929,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 6936,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "        }",
          "new_line_content": "            exit(0);",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep);",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "old_line_content": "        }",
          "new_line_content": "        default: serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "content_same": false
        },
        {
          "line": 6939,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 6942,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "            } else {",
          "new_line_content": "                exit(0);",
          "content_same": false
        },
        {
          "line": 6946,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, 0)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplySetLen(c, 0);",
          "content_same": false
        },
        {
          "line": 6950,
          "old_api": null,
          "new_api": "syscheck",
          "old_text": null,
          "new_text": "syscheck()",
          "old_line_content": "        }",
          "new_line_content": "            exit(syscheck() ? 0 : 1);",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(cmd->subcommands_dict)",
          "old_line_content": "    else",
          "new_line_content": "        addReplyMapLen(c, dictSize(cmd->subcommands_dict));",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(cmd->subcommands_dict)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "        addReplyArrayLen(c, dictSize(cmd->subcommands_dict));",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(server.configfile)",
          "old_line_content": "            j = 2; // Skip this arg when parsing options",
          "new_line_content": "            server.exec_argv[1] = zstrdup(server.configfile);",
          "content_same": false
        },
        {
          "line": 4915,
          "old_api": null,
          "new_api": "reply_function",
          "old_text": null,
          "new_text": "reply_function(c, sub)",
          "old_line_content": "    }",
          "new_line_content": "        reply_function(c, sub);",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "}",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 6978,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\\n\")",
          "old_line_content": "                /* argv[j]+2 for removing the preceding `--` */",
          "new_line_content": "                if (sdslen(options)) options = sdscat(options, \"\\n\");",
          "content_same": false
        },
        {
          "line": 6981,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \" \")",
          "old_line_content": "",
          "new_line_content": "                options = sdscat(options, \" \");",
          "content_same": false
        },
        {
          "line": 6983,
          "old_api": null,
          "new_api": "sdssplitargs",
          "old_text": null,
          "new_text": "sdssplitargs(argv[j], &argc_tmp)",
          "old_line_content": "                if (argc_tmp == 1) {",
          "new_line_content": "                argv_tmp = sdssplitargs(argv[j], &argc_tmp);",
          "content_same": false
        },
        {
          "line": 6989,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--save\")",
          "old_line_content": "                        /* Special case: handle some things like `--save --config value`.",
          "new_line_content": "                        !strcasecmp(argv[j], \"--save\")) {",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": null,
          "new_api": "addReplyCommandSubCommands",
          "old_text": null,
          "new_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0);",
          "content_same": false
        },
        {
          "line": 6997,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\\\"\\\"\")",
          "old_line_content": "                        handled_last_config_arg = 1;",
          "new_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "content_same": false
        },
        {
          "line": 6999,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--save\")",
          "old_line_content": "                        /* Special case: when empty save is the last argument.",
          "new_line_content": "                    } else if ((j == argc - 1) && !strcasecmp(argv[j], \"--save\")) {",
          "content_same": false
        },
        {
          "line": 7003,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\\\"\\\"\")",
          "old_line_content": "                    } else if ((j != argc - 1) && argv[j + 1][0] == '-' && argv[j + 1][1] == '-' &&",
          "new_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "content_same": false
        },
        {
          "line": 7005,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--sentinel\")",
          "old_line_content": "                        /* Special case: handle some things like `--sentinel --config value`.",
          "new_line_content": "                               !strcasecmp(argv[j], \"--sentinel\")) {",
          "content_same": false
        },
        {
          "line": 7011,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\")",
          "old_line_content": "                        handled_last_config_arg = 1;",
          "new_line_content": "                        options = sdscat(options, \"\");",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "",
          "new_line_content": "    addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 7013,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--sentinel\")",
          "old_line_content": "                        /* Special case: when --sentinel is the last argument.",
          "new_line_content": "                    } else if ((j == argc - 1) && !strcasecmp(argv[j], \"--sentinel\")) {",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->summary)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->summary);",
          "content_same": false
        },
        {
          "line": 7018,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\")",
          "old_line_content": "                    }",
          "new_line_content": "                        options = sdscat(options, \"\");",
          "content_same": false
        },
        {
          "line": 4972,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->since)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->since);",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": null,
          "new_api": "commandGroupStr",
          "old_text": null,
          "new_text": "commandGroupStr(cmd->group)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c, commandGroupStr(cmd->group));",
          "content_same": false
        },
        {
          "line": 7025,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv_tmp, argc_tmp)",
          "old_line_content": "            } else {",
          "new_line_content": "                sdsfreesplitres(argv_tmp, argc_tmp);",
          "content_same": false
        },
        {
          "line": 4981,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->complexity)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->complexity);",
          "content_same": false
        },
        {
          "line": 7029,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \" \")",
          "old_line_content": "                handled_last_config_arg = 1;",
          "new_line_content": "                options = sdscat(options, \" \");",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": null,
          "new_api": "moduleNameFromCommand",
          "old_text": null,
          "new_text": "moduleNameFromCommand(cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, moduleNameFromCommand(cmd));",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": null,
          "new_api": "addReplyDocFlagsForCommand",
          "old_text": null,
          "new_text": "addReplyDocFlagsForCommand(c, cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyDocFlagsForCommand(c, cmd);",
          "content_same": false
        },
        {
          "line": 7037,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(options)",
          "old_line_content": "    }",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 7039,
          "old_api": null,
          "new_api": "sentinelCheckConfigFile",
          "old_text": null,
          "new_text": "sentinelCheckConfigFile()",
          "old_line_content": "",
          "new_line_content": "    if (server.sentinel_mode) sentinelCheckConfigFile();",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->deprecated_since)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->deprecated_since);",
          "content_same": false
        },
        {
          "line": 7043,
          "old_api": null,
          "new_api": "linuxMemoryWarnings",
          "old_text": null,
          "new_text": "linuxMemoryWarnings()",
          "old_line_content": "    sds err_msg = NULL;",
          "new_line_content": "    linuxMemoryWarnings();",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->replaced_by)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->replaced_by);",
          "content_same": false
        },
        {
          "line": 7047,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "    }",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "addReplyCommandHistory",
          "old_text": null,
          "new_text": "addReplyCommandHistory(c, cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandHistory(c, cmd);",
          "content_same": false
        },
        {
          "line": 7051,
          "old_api": null,
          "new_api": "checkLinuxMadvFreeForkBug",
          "old_text": null,
          "new_text": "checkLinuxMadvFreeForkBug(&err_msg)",
          "old_line_content": "        if (ret < 0) {",
          "new_line_content": "    if ((ret = checkLinuxMadvFreeForkBug(&err_msg)) <= 0) {",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": null,
          "new_api": "addReplyJson",
          "old_text": null,
          "new_text": "addReplyJson(c, cmd->reply_schema)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyJson(c, cmd->reply_schema);",
          "content_same": false
        },
        {
          "line": 7054,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "        } else",
          "new_line_content": "            sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 7056,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                      \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"\n                      \"Your system could be affected, please report this error.\")",
          "old_line_content": "                      \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": null,
          "new_api": "addReplyCommandArgList",
          "old_text": null,
          "new_text": "addReplyCommandArgList(c, cmd->args, cmd->num_args)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandArgList(c, cmd->args, cmd->num_args);",
          "content_same": false
        },
        {
          "line": 7060,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Valkey will now exit to prevent data corruption. \"\n                                  \"Note that it is possible to suppress this warning by setting the following config: \"\n                                  \"ignore-warnings ARM64-COW-BUG\")",
          "old_line_content": "                                  \"Note that it is possible to suppress this warning by setting the following config: \"",
          "new_line_content": "            serverLog(LL_WARNING, \"Valkey will now exit to prevent data corruption. \"",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": null,
          "new_api": "addReplyCommandSubCommands",
          "old_text": null,
          "new_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1);",
          "content_same": false
        },
        {
          "line": 7063,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv + 2, c->argc - 2)",
          "old_line_content": "    getKeysResult result;",
          "new_line_content": "    struct serverCommand *cmd = lookupCommand(c->argv + 2, c->argc - 2);",
          "content_same": false
        },
        {
          "line": 7070,
          "old_api": null,
          "new_api": "serverIsSupervised",
          "old_text": null,
          "new_text": "serverIsSupervised(server.supervised_mode)",
          "old_line_content": "    int background = server.daemonize && !server.supervised;",
          "new_line_content": "    server.supervised = serverIsSupervised(server.supervised_mode);",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": null,
          "new_api": "initGetKeysResult",
          "old_text": null,
          "new_text": "initGetKeysResult(&result)",
          "old_line_content": "    int j;",
          "new_line_content": "    initGetKeysResult(&result);",
          "content_same": false
        },
        {
          "line": 7072,
          "old_api": null,
          "new_api": "daemonize",
          "old_text": null,
          "new_text": "daemonize()",
          "old_line_content": "",
          "new_line_content": "    if (background) daemonize();",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Invalid command specified\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c, \"Invalid command specified\");",
          "content_same": false
        },
        {
          "line": 7076,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "              (sizeof(long) == 8) ? 64 : 32, serverGitSHA1(), strtol(serverGitDirty(), NULL, 10) > 0, (int)getpid());",
          "content_same": false
        },
        {
          "line": 5030,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"The command has no key arguments\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c, \"The command has no key arguments\");",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                  \"Warning: no config file specified, using the default config. In order to specify a config file use \"\n                  \"%s /path/to/valkey.conf\",\n                  argv[0])",
          "old_line_content": "                  \"Warning: no config file specified, using the default config. In order to specify a config file use \"",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Invalid number of arguments specified for command\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c, \"Invalid number of arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 7084,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Configuration loaded\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_NOTICE, \"Configuration loaded\");",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": null,
          "new_api": "getKeysFromCommandWithSpecs",
          "old_text": null,
          "new_text": "getKeysFromCommandWithSpecs(cmd, c->argv + 2, c->argc - 2, GET_KEYSPEC_DEFAULT, &result)",
          "old_line_content": "        if (cmd->flags & CMD_NO_MANDATORY_KEYS) {",
          "new_line_content": "    if (!getKeysFromCommandWithSpecs(cmd, c->argv + 2, c->argc - 2, GET_KEYSPEC_DEFAULT, &result)) {",
          "content_same": false
        },
        {
          "line": 5039,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyArrayLen(c, 0);",
          "content_same": false
        },
        {
          "line": 5041,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"Invalid arguments specified for command\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyError(c, \"Invalid arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 7091,
          "old_api": null,
          "new_api": "checkTcpBacklogSettings",
          "old_text": null,
          "new_text": "checkTcpBacklogSettings()",
          "old_line_content": "    if (server.cluster_enabled) {",
          "new_line_content": "    checkTcpBacklogSettings();",
          "content_same": false
        },
        {
          "line": 5044,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, result.numkeys)",
          "old_line_content": "        for (j = 0; j < result.numkeys; j++) {",
          "new_line_content": "        addReplyArrayLen(c, result.numkeys);",
          "content_same": false
        },
        {
          "line": 7093,
          "old_api": null,
          "new_api": "clusterInit",
          "old_text": null,
          "new_text": "clusterInit()",
          "old_line_content": "    }",
          "new_line_content": "        clusterInit();",
          "content_same": false
        },
        {
          "line": 5047,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, c->argv[result.keys[j].pos + 2])",
          "old_line_content": "            } else {",
          "new_line_content": "                addReplyBulk(c, c->argv[result.keys[j].pos + 2]);",
          "content_same": false
        },
        {
          "line": 7097,
          "old_api": null,
          "new_api": "moduleLoadFromQueue",
          "old_text": null,
          "new_text": "moduleLoadFromQueue()",
          "old_line_content": "    }",
          "new_line_content": "        moduleLoadFromQueue();",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "addReplyFlagsForKeyArgs",
          "old_text": null,
          "new_text": "addReplyFlagsForKeyArgs(c, result.keys[j].flags)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyFlagsForKeyArgs(c, result.keys[j].flags);",
          "content_same": false
        },
        {
          "line": 7100,
          "old_api": null,
          "new_api": "initListeners",
          "old_text": null,
          "new_text": "initListeners()",
          "old_line_content": "    if (server.cluster_enabled) {",
          "new_line_content": "    initListeners();",
          "content_same": false
        },
        {
          "line": 7102,
          "old_api": null,
          "new_api": "clusterInitLast",
          "old_text": null,
          "new_text": "clusterInitLast()",
          "old_line_content": "    }",
          "new_line_content": "        clusterInitLast();",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": null,
          "new_api": "getKeysFreeResult",
          "old_text": null,
          "new_text": "getKeysFreeResult(&result)",
          "old_line_content": "}",
          "new_line_content": "    getKeysFreeResult(&result);",
          "content_same": false
        },
        {
          "line": 7104,
          "old_api": null,
          "new_api": "InitServerLast",
          "old_text": null,
          "new_text": "InitServerLast()",
          "old_line_content": "",
          "new_line_content": "    InitServerLast();",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": null,
          "new_api": "getKeysSubcommandImpl",
          "old_text": null,
          "new_text": "getKeysSubcommandImpl(c, 1)",
          "old_line_content": "}",
          "new_line_content": "    getKeysSubcommandImpl(c, 1);",
          "content_same": false
        },
        {
          "line": 7112,
          "old_api": null,
          "new_api": "aofDelHistoryFiles",
          "old_text": null,
          "new_text": "aofDelHistoryFiles()",
          "old_line_content": "        if (server.cluster_enabled) {",
          "new_line_content": "        aofDelHistoryFiles();",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": null,
          "new_api": "getKeysSubcommandImpl",
          "old_text": null,
          "new_text": "getKeysSubcommandImpl(c, 0)",
          "old_line_content": "}",
          "new_line_content": "    getKeysSubcommandImpl(c, 0);",
          "content_same": false
        },
        {
          "line": 7114,
          "old_api": null,
          "new_api": "verifyClusterConfigWithData",
          "old_text": null,
          "new_text": "verifyClusterConfigWithData()",
          "old_line_content": "        }",
          "new_line_content": "            serverAssert(verifyClusterConfigWithData() == C_OK);",
          "content_same": false
        },
        {
          "line": 7121,
          "old_api": null,
          "new_api": "get_type",
          "old_text": null,
          "new_text": "listener->ct->get_type(NULL)",
          "old_line_content": "        }",
          "new_line_content": "            serverLog(LL_NOTICE, \"Ready to accept connections %s\", listener->ct->get_type(NULL));",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandInfo(c, dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "}",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 7126,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "old_line_content": "            } else {",
          "new_line_content": "                serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "content_same": false
        },
        {
          "line": 7128,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\n                    \"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\")",
          "old_line_content": "                    \"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\");",
          "new_line_content": "                serverCommunicateSystemd(",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.commands)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 7131,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"READY=1\\n\")",
          "old_line_content": "        }",
          "new_line_content": "            serverCommunicateSystemd(\"READY=1\\n\");",
          "content_same": false
        },
        {
          "line": 7134,
          "old_api": null,
          "new_api": "sentinelIsRunning",
          "old_text": null,
          "new_text": "sentinelIsRunning()",
          "old_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD) {",
          "new_line_content": "        sentinelIsRunning();",
          "content_same": false
        },
        {
          "line": 7137,
          "old_api": null,
          "new_api": "serverCommunicateSystemd",
          "old_text": null,
          "new_text": "serverCommunicateSystemd(\"READY=1\\n\")",
          "old_line_content": "        }",
          "new_line_content": "            serverCommunicateSystemd(\"READY=1\\n\");",
          "content_same": false
        },
        {
          "line": 7143,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                  \"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are \"\n                  \"you sure this is what you really want?\",\n                  server.maxmemory)",
          "old_line_content": "                  \"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are \"",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 7150,
          "old_api": null,
          "new_api": "setOOMScoreAdj",
          "old_text": null,
          "new_text": "setOOMScoreAdj(-1)",
          "old_line_content": "",
          "new_line_content": "    setOOMScoreAdj(-1);",
          "content_same": false
        },
        {
          "line": 7153,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "    return 0;",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "moduleGetHandleByName",
          "old_text": null,
          "new_text": "moduleGetHandleByName(filter->arg)",
          "old_line_content": "            filter->cache.valid = 1;",
          "new_line_content": "            filter->cache.u.module_handle = moduleGetHandleByName(filter->arg);",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": null,
          "new_api": "moduleIsModuleCommand",
          "old_text": null,
          "new_text": "moduleIsModuleCommand(filter->cache.u.module_handle, cmd)",
          "old_line_content": "    case (COMMAND_LIST_FILTER_ACLCAT): {",
          "new_line_content": "        return !moduleIsModuleCommand(filter->cache.u.module_handle, cmd);",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": null,
          "new_api": "ACLGetCommandCategoryFlagByName",
          "old_text": null,
          "new_text": "ACLGetCommandCategoryFlagByName(filter->arg)",
          "old_line_content": "            filter->cache.valid = 1;",
          "new_line_content": "            filter->cache.u.aclcat = ACLGetCommandCategoryFlagByName(filter->arg);",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid filter type %d\", filter->type)",
          "old_line_content": "    }",
          "new_line_content": "    default: serverPanic(\"Invalid filter type %d\", filter->type);",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(commands)",
          "old_line_content": "",
          "new_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "            (*numcmds)++;",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "commandListWithFilter",
          "old_text": null,
          "new_text": "commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds)",
          "old_line_content": "        }",
          "new_line_content": "            commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds);",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "}",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(commands)",
          "old_line_content": "",
          "new_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "content_same": false
        },
        {
          "line": 5154,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "        (*numcmds)++;",
          "new_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "commandListWithoutFilter",
          "old_text": null,
          "new_text": "commandListWithoutFilter(c, cmd->subcommands_dict, numcmds)",
          "old_line_content": "        }",
          "new_line_content": "            commandListWithoutFilter(c, cmd->subcommands_dict, numcmds);",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "}",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"filterby\")",
          "old_line_content": "            char *filtertype = c->argv[i + 1]->ptr;",
          "new_line_content": "        if (!strcasecmp(opt, \"filterby\") && moreargs == 2) {",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(filtertype, \"module\")",
          "old_line_content": "                filter.type = COMMAND_LIST_FILTER_MODULE;",
          "new_line_content": "            if (!strcasecmp(filtertype, \"module\")) {",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(filtertype, \"aclcat\")",
          "old_line_content": "                filter.type = COMMAND_LIST_FILTER_ACLCAT;",
          "new_line_content": "            } else if (!strcasecmp(filtertype, \"aclcat\")) {",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(filtertype, \"pattern\")",
          "old_line_content": "                filter.type = COMMAND_LIST_FILTER_PATTERN;",
          "new_line_content": "            } else if (!strcasecmp(filtertype, \"pattern\")) {",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "",
          "new_line_content": "    void *replylen = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": null,
          "new_api": "commandListWithFilter",
          "old_text": null,
          "new_text": "commandListWithFilter(c, server.commands, filter, &numcmds)",
          "old_line_content": "    } else {",
          "new_line_content": "        commandListWithFilter(c, server.commands, filter, &numcmds);",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": null,
          "new_api": "commandListWithoutFilter",
          "old_text": null,
          "new_text": "commandListWithoutFilter(c, server.commands, &numcmds)",
          "old_line_content": "    }",
          "new_line_content": "        commandListWithoutFilter(c, server.commands, &numcmds);",
          "content_same": false
        },
        {
          "line": 5202,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c, replylen, numcmds)",
          "old_line_content": "}",
          "new_line_content": "    setDeferredArrayLen(c, replylen, numcmds);",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommandInfo(c, dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    } else {",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, c->argc - 2)",
          "old_line_content": "        for (i = 2; i < c->argc; i++) {",
          "new_line_content": "        addReplyArrayLen(c, c->argc - 2);",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": null,
          "new_api": "lookupCommandBySds",
          "old_text": null,
          "new_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommandInfo(c, lookupCommandBySds(c->argv[i]->ptr));",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": null,
          "new_api": "addReplyCommandDocs",
          "old_text": null,
          "new_text": "addReplyCommandDocs(c, cmd)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommandDocs(c, cmd);",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    } else {",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "        for (i = 2; i < c->argc; i++) {",
          "new_line_content": "        void *replylen = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": null,
          "new_api": "lookupCommandBySds",
          "old_text": null,
          "new_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "old_line_content": "            if (!cmd) continue;",
          "new_line_content": "            struct serverCommand *cmd = lookupCommandBySds(c->argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": null,
          "new_api": "addReplyCommandDocs",
          "old_text": null,
          "new_text": "addReplyCommandDocs(c, cmd)",
          "old_line_content": "            numcmds++;",
          "new_line_content": "            addReplyCommandDocs(c, cmd);",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": null,
          "new_api": "setDeferredMapLen",
          "old_text": null,
          "new_text": "setDeferredMapLen(c, replylen, numcmds)",
          "old_line_content": "    }",
          "new_line_content": "        setDeferredMapLen(c, replylen, numcmds);",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": null,
          "new_api": "getKeysSubcommand",
          "old_text": null,
          "new_text": "getKeysSubcommand(c)",
          "old_line_content": "}",
          "new_line_content": "    getKeysSubcommand(c);",
          "content_same": false
        },
        {
          "line": 5284,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "}",
          "new_line_content": "    addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 5294,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%lluB\", n)",
          "old_line_content": "    } else if (n < (1024 * 1024)) {",
          "new_line_content": "        snprintf(s, size, \"%lluB\", n);",
          "content_same": false
        },
        {
          "line": 5297,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%.2fK\", d)",
          "old_line_content": "    } else if (n < (1024LL * 1024 * 1024)) {",
          "new_line_content": "        snprintf(s, size, \"%.2fK\", d);",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%.2fM\", d)",
          "old_line_content": "    } else if (n < (1024LL * 1024 * 1024 * 1024)) {",
          "new_line_content": "        snprintf(s, size, \"%.2fM\", d);",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%.2fG\", d)",
          "old_line_content": "    } else if (n < (1024LL * 1024 * 1024 * 1024 * 1024)) {",
          "new_line_content": "        snprintf(s, size, \"%.2fG\", d);",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%.2fT\", d)",
          "old_line_content": "    } else if (n < (1024LL * 1024 * 1024 * 1024 * 1024 * 1024)) {",
          "new_line_content": "        snprintf(s, size, \"%.2fT\", d);",
          "content_same": false
        },
        {
          "line": 5309,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%.2fP\", d)",
          "old_line_content": "    } else {",
          "new_line_content": "        snprintf(s, size, \"%.2fP\", d);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s, size, \"%lluB\", n)",
          "old_line_content": "    }",
          "new_line_content": "        snprintf(s, size, \"%lluB\", n);",
          "content_same": false
        },
        {
          "line": 5318,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(info, \"latency_percentiles_usec_%s:\", histogram_name)",
          "old_line_content": "    for (int j = 0; j < server.latency_tracking_info_percentiles_len; j++) {",
          "new_line_content": "    info = sdscatfmt(info, \"latency_percentiles_usec_%s:\", histogram_name);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "hdr_value_at_percentile",
          "old_text": null,
          "new_text": "hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])",
          "old_line_content": "                                1000.0f);",
          "new_line_content": "                            ((double)hdr_value_at_percentile(histogram, server.latency_tracking_info_percentiles[j])) /",
          "content_same": false
        },
        {
          "line": 5326,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(info, \",\", 1)",
          "old_line_content": "    }",
          "new_line_content": "        if (j != server.latency_tracking_info_percentiles_len - 1) info = sdscatlen(info, \",\", 1);",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"\\r\\n\")",
          "old_line_content": "    return info;",
          "new_line_content": "    info = sdscatprintf(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(len + 1)",
          "old_line_content": "    memcpy(new, s, len);",
          "new_line_content": "    char *new = *tmp = zmalloc(len + 1);",
          "content_same": false
        },
        {
          "line": 5357,
          "old_api": null,
          "new_api": "memmapchars",
          "old_text": null,
          "new_text": "memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs, sizeof(unsafe_info_chars) - 1)",
          "old_line_content": "}",
          "new_line_content": "    return memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs, sizeof(unsafe_info_chars) - 1);",
          "content_same": false
        },
        {
          "line": 5365,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        char *tmpsafe;",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        if (c->calls || c->failed_calls || c->rejected_calls) {",
          "new_line_content": "        c = (struct serverCommand *)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"\n                                \",rejected_calls=%lld,failed_calls=%lld\\r\\n\",\n                                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls,\n                                c->microseconds, (c->calls == 0) ? 0 : ((float)c->microseconds / c->calls),\n                                c->rejected_calls, c->failed_calls)",
          "old_line_content": "                                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->fullname)",
          "old_line_content": "                                c->microseconds, (c->calls == 0) ? 0 : ((float)c->microseconds / c->calls),",
          "new_line_content": "                                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls,",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "        }",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": null,
          "new_api": "genValkeyInfoStringCommandStats",
          "old_text": null,
          "new_text": "genValkeyInfoStringCommandStats(info, c->subcommands_dict)",
          "old_line_content": "        }",
          "new_line_content": "            info = genValkeyInfoStringCommandStats(info, c->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5388,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                        \"acl_access_denied_auth:%lld\\r\\n\"\n                        \"acl_access_denied_cmd:%lld\\r\\n\"\n                        \"acl_access_denied_key:%lld\\r\\n\"\n                        \"acl_access_denied_channel:%lld\\r\\n\",\n                        server.acl_info.user_auth_failures, server.acl_info.invalid_cmd_accesses,\n                        server.acl_info.invalid_key_accesses, server.acl_info.invalid_channel_accesses)",
          "old_line_content": "                        \"acl_access_denied_auth:%lld\\r\\n\"",
          "new_line_content": "    info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        char *tmpsafe;",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        if (c->latency_histogram) {",
          "new_line_content": "        c = (struct serverCommand *)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "        }",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": null,
          "new_api": "genValkeyInfoStringLatencyStats",
          "old_text": null,
          "new_text": "genValkeyInfoStringLatencyStats(info, c->subcommands_dict)",
          "old_line_content": "        }",
          "new_line_content": "            info = genValkeyInfoStringLatencyStats(info, c->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 5415,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(section)",
          "old_line_content": "        sections++;",
          "new_line_content": "        if (dictAdd(section_dict, section, NULL) == DICT_ERR) sdsfree(section);",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(sec)",
          "old_line_content": "}",
          "new_line_content": "    if (sec != cached_default_info_sections) dictRelease(sec);",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": null,
          "new_api": "addInfoSectionsToDict",
          "old_text": null,
          "new_text": "addInfoSectionsToDict(cached_default_info_sections, defaults)",
          "old_line_content": "        return cached_default_info_sections;",
          "new_line_content": "        addInfoSectionsToDict(cached_default_info_sections, defaults);",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(argc, 16)",
          "old_line_content": "    for (int i = 0; i < argc; i++) {",
          "new_line_content": "    dictExpand(section_dict, min(argc, 16));",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr, \"all\")",
          "old_line_content": "            if (out_all) *out_all = 1;",
          "new_line_content": "        } else if (!strcasecmp(argv[i]->ptr, \"all\")) {",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr, \"everything\")",
          "old_line_content": "            if (out_everything) *out_everything = 1;",
          "new_line_content": "        } else if (!strcasecmp(argv[i]->ptr, \"everything\")) {",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(section)",
          "old_line_content": "        }",
          "new_line_content": "            if (dictAdd(section_dict, section, NULL) != DICT_OK) sdsfree(section);",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].watched_keys)",
          "old_line_content": "    }",
          "new_line_content": "        wkeys += dictSize(server.db[j].watched_keys);",
          "content_same": false
        },
        {
          "line": 5508,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    time_t uptime = server.unixtime - server.stat_starttime;",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 5515,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"server\")",
          "old_line_content": "        static int call_uname = 1;",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"server\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5539,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5543,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            call_uname = 0;",
          "new_line_content": "            uname(&name);",
          "content_same": false
        },
        {
          "line": 5547,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(\n            info,\n            \"# Server\\r\\n\" FMTARGS(\n                \"redis_version:%s\\r\\n\", REDIS_VERSION,\n                \"server_name:%s\\r\\n\", SERVER_NAME,\n                \"valkey_version:%s\\r\\n\", VALKEY_VERSION,\n                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),\n                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,\n                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),\n                \"%s_mode:\", (server.extended_redis_compat ? \"redis\" : \"server\"),\n                \"%s\\r\\n\", mode,\n                \"os:%s\", name.sysname,\n                \" %s\", name.release,\n                \" %s\\r\\n\", name.machine,\n                \"arch_bits:%i\\r\\n\", server.arch_bits,\n                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n                \"process_id:%I\\r\\n\", (int64_t)getpid(),\n                \"process_supervised:%s\\r\\n\", supervised,\n                \"run_id:%s\\r\\n\", server.runid,\n                \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n                \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n                \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n                \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime / (3600 * 24)),\n                \"hz:%i\\r\\n\", server.hz,\n                \"configured_hz:%i\\r\\n\", server.config_hz,\n                \"lru_clock:%u\\r\\n\", server.lruclock,\n                \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n                \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n                \"io_threads_active:%i\\r\\n\", server.active_io_threads_num > 1,\n                \"availability_zone:%s\\r\\n\", server.availability_zone))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatfmt(",
          "content_same": false
        },
        {
          "line": 5549,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"redis_version:%s\\r\\n\", REDIS_VERSION,\n                \"server_name:%s\\r\\n\", SERVER_NAME,\n                \"valkey_version:%s\\r\\n\", VALKEY_VERSION,\n                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),\n                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,\n                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),\n                \"%s_mode:\", (server.extended_redis_compat ? \"redis\" : \"server\"),\n                \"%s\\r\\n\", mode,\n                \"os:%s\", name.sysname,\n                \" %s\", name.release,\n                \" %s\\r\\n\", name.machine,\n                \"arch_bits:%i\\r\\n\", server.arch_bits,\n                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n                \"process_id:%I\\r\\n\", (int64_t)getpid(),\n                \"process_supervised:%s\\r\\n\", supervised,\n                \"run_id:%s\\r\\n\", server.runid,\n                \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n                \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n                \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n                \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime / (3600 * 24)),\n                \"hz:%i\\r\\n\", server.hz,\n                \"configured_hz:%i\\r\\n\", server.config_hz,\n                \"lru_clock:%u\\r\\n\", server.lruclock,\n                \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n                \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n                \"io_threads_active:%i\\r\\n\", server.active_io_threads_num > 1,\n                \"availability_zone:%s\\r\\n\", server.availability_zone)",
          "old_line_content": "                \"redis_version:%s\\r\\n\", REDIS_VERSION,",
          "new_line_content": "            \"# Server\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": null,
          "new_api": "serverBuildIdString",
          "old_text": null,
          "new_text": "serverBuildIdString()",
          "old_line_content": "                \"%s_mode:\", (server.extended_redis_compat ? \"redis\" : \"server\"),",
          "new_line_content": "                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,",
          "new_line_content": "                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "                \"process_supervised:%s\\r\\n\", supervised,",
          "new_line_content": "                \"process_id:%I\\r\\n\", (int64_t)getpid(),",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": null,
          "new_api": "commandTimeSnapshot",
          "old_text": null,
          "new_text": "commandTimeSnapshot()",
          "old_line_content": "        }",
          "new_line_content": "                             (int64_t)(server.shutdown_mstime - commandTimeSnapshot()));",
          "content_same": false
        },
        {
          "line": 5587,
          "old_api": null,
          "new_api": "getListensInfoString",
          "old_text": null,
          "new_text": "getListensInfoString(info)",
          "old_line_content": "    }",
          "new_line_content": "        info = getListensInfoString(info);",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"clients\")",
          "old_line_content": "        size_t maxin, maxout;",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"clients\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5597,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            \"# Clients\\r\\n\" FMTARGS(\n                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),\n                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n                \"maxclients:%u\\r\\n\", server.maxclients,\n                \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n                \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n                \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n                \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n                \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n                \"watching_clients:%d\\r\\n\", server.watching_clients,\n                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),\n                \"total_watched_keys:%lu\\r\\n\", watched_keys,\n                \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n                \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5601,
          "old_api": null,
          "new_api": "getClusterConnectionsCount",
          "old_text": null,
          "new_text": "getClusterConnectionsCount()",
          "old_line_content": "                \"maxclients:%u\\r\\n\", server.maxclients,",
          "new_line_content": "                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),",
          "content_same": false
        },
        {
          "line": 5609,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(server.clients_timeout_table)",
          "old_line_content": "                \"total_watched_keys:%lu\\r\\n\", watched_keys,",
          "new_line_content": "                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),",
          "content_same": false
        },
        {
          "line": 5616,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"memory\")",
          "old_line_content": "        char hmem[64];",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"memory\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        size_t total_system_mem = server.system_memory_size;",
          "new_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "getMemoryOverheadData",
          "old_text": null,
          "new_text": "getMemoryOverheadData()",
          "old_line_content": "",
          "new_line_content": "        struct serverMemOverhead *mh = getMemoryOverheadData();",
          "content_same": false
        },
        {
          "line": 5645,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(maxmemory_hmem, sizeof(maxmemory_hmem), server.maxmemory)",
          "old_line_content": "",
          "new_line_content": "        bytesToHuman(maxmemory_hmem, sizeof(maxmemory_hmem), server.maxmemory);",
          "content_same": false
        },
        {
          "line": 5648,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            \"# Memory\\r\\n\" FMTARGS(\n                \"used_memory:%zu\\r\\n\", zmalloc_used,\n                \"used_memory_human:%s\\r\\n\", hmem,\n                \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n                \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n                \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n                \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n                \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n                \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n                \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n                \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n                \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n                \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n                \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n                \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n                \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n                \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n                \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n                \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n                \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n                \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n                \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n                \"number_of_functions:%lu\\r\\n\", functionsNum(),\n                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n                \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n                \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n                \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n                \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n                \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n                \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n                \"maxmemory:%lld\\r\\n\", server.maxmemory,\n                \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n                \"maxmemory_policy:%s\\r\\n\", evict_policy,\n                \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n                \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n                \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n                \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n                \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n                \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n                /* The next field (mem_fragmentation_ratio) is the total RSS\n                 * overhead, including fragmentation, but not just it. This field\n                 * (and the next one) is named like that just for backward\n                 * compatibility. */\n                \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n                \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n                \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n                \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n                \"mem_clients_slaves:%zu\\r\\n\", mh->clients_replicas,\n                \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n                \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n                \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n                \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n                \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n                \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"used_memory:%zu\\r\\n\", zmalloc_used,\n                \"used_memory_human:%s\\r\\n\", hmem,\n                \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n                \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n                \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n                \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n                \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n                \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n                \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n                \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n                \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n                \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n                \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n                \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n                \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n                \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n                \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n                \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n                \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n                \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n                \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n                \"number_of_functions:%lu\\r\\n\", functionsNum(),\n                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n                \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n                \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n                \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n                \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n                \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n                \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n                \"maxmemory:%lld\\r\\n\", server.maxmemory,\n                \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n                \"maxmemory_policy:%s\\r\\n\", evict_policy,\n                \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n                \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n                \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n                \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n                \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n                \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n                /* The next field (mem_fragmentation_ratio) is the total RSS\n                 * overhead, including fragmentation, but not just it. This field\n                 * (and the next one) is named like that just for backward\n                 * compatibility. */\n                \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n                \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n                \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n                \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n                \"mem_clients_slaves:%zu\\r\\n\", mh->clients_replicas,\n                \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n                \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n                \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n                \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n                \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n                \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount())",
          "old_line_content": "                \"used_memory:%zu\\r\\n\", zmalloc_used,",
          "new_line_content": "            \"# Memory\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": null,
          "new_api": "functionsLibNum",
          "old_text": null,
          "new_text": "functionsLibNum()",
          "old_line_content": "                \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,",
          "new_line_content": "                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": null,
          "new_api": "freeMemoryGetNotCountedMemory",
          "old_text": null,
          "new_text": "freeMemoryGetNotCountedMemory()",
          "old_line_content": "                \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,",
          "new_line_content": "                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": null,
          "new_api": "freeMemoryOverheadData",
          "old_text": null,
          "new_text": "freeMemoryOverheadData(mh)",
          "old_line_content": "    }",
          "new_line_content": "        freeMemoryOverheadData(mh);",
          "content_same": false
        },
        {
          "line": 5713,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "        double fork_perc = 0;",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5720,
          "old_api": null,
          "new_api": "atomic_load_explicit",
          "old_text": null,
          "new_text": "atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_relaxed)",
          "old_line_content": "",
          "new_line_content": "        int aof_bio_fsync_status = atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 5722,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            \"# Persistence\\r\\n\" FMTARGS(\n                \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n                \"async_loading:%d\\r\\n\", (int)server.async_loading,\n                \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n                \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n                \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n                \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n                \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n                \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n                \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n                \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n                \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n                \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),\n                \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n                \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n                \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n                \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n                \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n                \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n                \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),\n                \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ? \"ok\" : \"err\"),\n                \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n                \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n                \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK && aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n                \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n                \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n                \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5724,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n                \"async_loading:%d\\r\\n\", (int)server.async_loading,\n                \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n                \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n                \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n                \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n                \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n                \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n                \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n                \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n                \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n                \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),\n                \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n                \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n                \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n                \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n                \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n                \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n                \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),\n                \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ? \"ok\" : \"err\"),\n                \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n                \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n                \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK && aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n                \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n                \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n                \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes)",
          "old_line_content": "                \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),",
          "new_line_content": "            \"# Persistence\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5729,
          "old_api": null,
          "new_api": "elapsedMs",
          "old_text": null,
          "new_text": "elapsedMs(server.stat_current_cow_updated)",
          "old_line_content": "                \"current_fork_perc:%.2f\\r\\n\", fork_perc,",
          "new_line_content": "                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,",
          "new_line_content": "                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),",
          "content_same": false
        },
        {
          "line": 5747,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ? \"ok\" : \"err\"),",
          "new_line_content": "                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),",
          "content_same": false
        },
        {
          "line": 5757,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"aof_current_size:%lld\\r\\n\", (long long)server.aof_current_size,\n                    \"aof_base_size:%lld\\r\\n\", (long long)server.aof_rewrite_base_size,\n                    \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                    \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync))",
          "old_line_content": "                info,",
          "new_line_content": "            info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                    \"aof_current_size:%lld\\r\\n\", (long long)server.aof_current_size,\n                    \"aof_base_size:%lld\\r\\n\", (long long)server.aof_rewrite_base_size,\n                    \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                    \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync)",
          "old_line_content": "                    \"aof_current_size:%lld\\r\\n\", (long long)server.aof_current_size,",
          "new_line_content": "                FMTARGS(",
          "content_same": false
        },
        {
          "line": 5764,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "old_line_content": "                    \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync));",
          "new_line_content": "                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            if (elapsed == 0) {",
          "new_line_content": "            elapsed = time(NULL) - server.loading_start_time;",
          "content_same": false
        },
        {
          "line": 5792,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"loading_start_time:%jd\\r\\n\", (intmax_t)server.loading_start_time,\n                    \"loading_total_bytes:%llu\\r\\n\", (unsigned long long)server.loading_total_bytes,\n                    \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long)server.loading_rdb_used_mem,\n                    \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long)server.loading_loaded_bytes,\n                    \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                    \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta))",
          "old_line_content": "                info,",
          "new_line_content": "            info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5794,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                    \"loading_start_time:%jd\\r\\n\", (intmax_t)server.loading_start_time,\n                    \"loading_total_bytes:%llu\\r\\n\", (unsigned long long)server.loading_total_bytes,\n                    \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long)server.loading_rdb_used_mem,\n                    \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long)server.loading_loaded_bytes,\n                    \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                    \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta)",
          "old_line_content": "                    \"loading_start_time:%jd\\r\\n\", (intmax_t)server.loading_start_time,",
          "new_line_content": "                FMTARGS(",
          "content_same": false
        },
        {
          "line": 5805,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"stats\")",
          "old_line_content": "        long long current_eviction_exceeded_time =",
          "new_line_content": "    if (all_sections || (dictFind(section_dict, \"stats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": null,
          "new_api": "elapsedUs",
          "old_text": null,
          "new_text": "elapsedUs(server.stat_last_eviction_exceeded_time)",
          "old_line_content": "        long long current_active_defrag_time =",
          "new_line_content": "            server.stat_last_eviction_exceeded_time ? (long long)elapsedUs(server.stat_last_eviction_exceeded_time) : 0;",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": null,
          "new_api": "elapsedUs",
          "old_text": null,
          "new_text": "elapsedUs(server.stat_last_active_defrag_time)",
          "old_line_content": "",
          "new_line_content": "            server.stat_last_active_defrag_time ? (long long)elapsedUs(server.stat_last_active_defrag_time) : 0;",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            \"# Stats\\r\\n\" FMTARGS(\n                \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n                \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n                \"total_net_input_bytes:%lld\\r\\n\", server.stat_net_input_bytes + server.stat_net_repl_input_bytes,\n                \"total_net_output_bytes:%lld\\r\\n\", server.stat_net_output_bytes + server.stat_net_repl_output_bytes,\n                \"total_net_repl_input_bytes:%lld\\r\\n\", server.stat_net_repl_input_bytes,\n                \"total_net_repl_output_bytes:%lld\\r\\n\", server.stat_net_repl_output_bytes,\n                \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT) / 1024,\n                \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT) / 1024,\n                \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION) / 1024,\n                \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION) / 1024,\n                \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n                \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n                \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n                \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n                \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n                \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc * 100,\n                \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n                \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used / 1000,\n                \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n                \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n                \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n                \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n                \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n                \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n                \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n                \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n                \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),\n                \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n                \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n                \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n                \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n                \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n                \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),\n                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),\n                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),\n                \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n                \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n                \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n                \"total_reads_processed:%lld\\r\\n\", server.stat_total_reads_processed,\n                \"total_writes_processed:%lld\\r\\n\", server.stat_total_writes_processed,\n                \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n                \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n                \"io_threaded_freed_objects:%lld\\r\\n\", server.stat_io_freed_objects,\n                \"io_threaded_poll_processed:%lld\\r\\n\", server.stat_poll_processed_by_io_threads,\n                \"io_threaded_total_prefetch_batches:%lld\\r\\n\", server.stat_total_prefetch_batches,\n                \"io_threaded_total_prefetch_entries:%lld\\r\\n\", server.stat_total_prefetch_entries,\n                \"client_query_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_qbuf_limit_disconnections,\n                \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n                \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n                \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n                \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n                \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n                \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n                \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n                \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION)))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n                \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n                \"total_net_input_bytes:%lld\\r\\n\", server.stat_net_input_bytes + server.stat_net_repl_input_bytes,\n                \"total_net_output_bytes:%lld\\r\\n\", server.stat_net_output_bytes + server.stat_net_repl_output_bytes,\n                \"total_net_repl_input_bytes:%lld\\r\\n\", server.stat_net_repl_input_bytes,\n                \"total_net_repl_output_bytes:%lld\\r\\n\", server.stat_net_repl_output_bytes,\n                \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT) / 1024,\n                \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT) / 1024,\n                \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION) / 1024,\n                \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION) / 1024,\n                \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n                \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n                \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n                \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n                \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n                \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc * 100,\n                \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n                \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used / 1000,\n                \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n                \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n                \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n                \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n                \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n                \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n                \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n                \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n                \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),\n                \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n                \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n                \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n                \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n                \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n                \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),\n                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),\n                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),\n                \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n                \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n                \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n                \"total_reads_processed:%lld\\r\\n\", server.stat_total_reads_processed,\n                \"total_writes_processed:%lld\\r\\n\", server.stat_total_writes_processed,\n                \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n                \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n                \"io_threaded_freed_objects:%lld\\r\\n\", server.stat_io_freed_objects,\n                \"io_threaded_poll_processed:%lld\\r\\n\", server.stat_poll_processed_by_io_threads,\n                \"io_threaded_total_prefetch_batches:%lld\\r\\n\", server.stat_total_prefetch_batches,\n                \"io_threaded_total_prefetch_entries:%lld\\r\\n\", server.stat_total_prefetch_entries,\n                \"client_query_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_qbuf_limit_disconnections,\n                \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n                \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n                \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n                \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n                \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n                \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n                \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n                \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION))",
          "old_line_content": "                \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,",
          "new_line_content": "            \"# Stats\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5817,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_COMMAND)",
          "old_line_content": "                \"total_net_input_bytes:%lld\\r\\n\", server.stat_net_input_bytes + server.stat_net_repl_input_bytes,",
          "new_line_content": "                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),",
          "content_same": false
        },
        {
          "line": 5825,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)",
          "old_line_content": "                \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,",
          "new_line_content": "                \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION) / 1024,",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": null,
          "new_api": "kvstoreSize",
          "old_text": null,
          "new_text": "kvstoreSize(server.pubsubshard_channels)",
          "old_line_content": "                \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,",
          "new_line_content": "                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": null,
          "new_api": "getReplicaKeyWithExpireCount",
          "old_text": null,
          "new_text": "getReplicaKeyWithExpireCount()",
          "old_line_content": "                \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,",
          "new_line_content": "                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),",
          "content_same": false
        },
        {
          "line": 5856,
          "old_api": null,
          "new_api": "trackingGetTotalPrefixes",
          "old_text": null,
          "new_text": "trackingGetTotalPrefixes()",
          "old_line_content": "                \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,",
          "new_line_content": "                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": null,
          "new_api": "genValkeyInfoStringACLStats",
          "old_text": null,
          "new_text": "genValkeyInfoStringACLStats(info)",
          "old_line_content": "    }",
          "new_line_content": "        info = genValkeyInfoStringACLStats(info);",
          "content_same": false
        },
        {
          "line": 5883,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                            \"# Replication\\r\\n\"\n                            \"role:%s\\r\\n\",\n                            server.primary_host == NULL ? \"master\" : \"slave\")",
          "old_line_content": "                            \"# Replication\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5899,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"master_host:%s\\r\\n\", server.primary_host,\n                    \"master_port:%d\\r\\n\", server.primary_port,\n                    \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                    \"master_last_io_seconds_ago:%d\\r\\n\", server.primary ? ((int)(server.unixtime - server.primary->last_interaction)) : -1,\n                    \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                    \"slave_read_repl_offset:%lld\\r\\n\", replica_read_repl_offset,\n                    \"slave_repl_offset:%lld\\r\\n\", replica_repl_offset,\n                    \"replicas_repl_buffer_size:%zu\\r\\n\", server.pending_repl_data.len,\n                    \"replicas_repl_buffer_peak:%zu\\r\\n\", server.pending_repl_data.peak))",
          "old_line_content": "                info,",
          "new_line_content": "            info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5901,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                    \"master_host:%s\\r\\n\", server.primary_host,\n                    \"master_port:%d\\r\\n\", server.primary_port,\n                    \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                    \"master_last_io_seconds_ago:%d\\r\\n\", server.primary ? ((int)(server.unixtime - server.primary->last_interaction)) : -1,\n                    \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                    \"slave_read_repl_offset:%lld\\r\\n\", replica_read_repl_offset,\n                    \"slave_repl_offset:%lld\\r\\n\", replica_repl_offset,\n                    \"replicas_repl_buffer_size:%zu\\r\\n\", server.pending_repl_data.len,\n                    \"replicas_repl_buffer_peak:%zu\\r\\n\", server.pending_repl_data.peak)",
          "old_line_content": "                    \"master_host:%s\\r\\n\", server.primary_host,",
          "new_line_content": "                FMTARGS(",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n                    info,\n                    FMTARGS(\n                        \"master_sync_total_bytes:%lld\\r\\n\", (long long)server.repl_transfer_size,\n                        \"master_sync_read_bytes:%lld\\r\\n\", (long long)server.repl_transfer_read,\n                        \"master_sync_left_bytes:%lld\\r\\n\", (long long)(server.repl_transfer_size - server.repl_transfer_read),\n                        \"master_sync_perc:%.2f\\r\\n\", perc,\n                        \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime - server.repl_transfer_lastio)))",
          "old_line_content": "                    info,",
          "new_line_content": "                info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5919,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                        \"master_sync_total_bytes:%lld\\r\\n\", (long long)server.repl_transfer_size,\n                        \"master_sync_read_bytes:%lld\\r\\n\", (long long)server.repl_transfer_read,\n                        \"master_sync_left_bytes:%lld\\r\\n\", (long long)(server.repl_transfer_size - server.repl_transfer_read),\n                        \"master_sync_perc:%.2f\\r\\n\", perc,\n                        \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime - server.repl_transfer_lastio))",
          "old_line_content": "                        \"master_sync_total_bytes:%lld\\r\\n\", (long long)server.repl_transfer_size,",
          "new_line_content": "                    FMTARGS(",
          "content_same": false
        },
        {
          "line": 5929,
          "old_api": null,
          "new_api": "intmax_t)(server.unixtime - server.repl_down_since)",
          "old_text": null,
          "new_text": "intmax_t)(server.unixtime - server.repl_down_since)",
          "old_line_content": "            }",
          "new_line_content": "                                    server.repl_down_since ? (intmax_t)(server.unixtime - server.repl_down_since) : -1);",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"slave_priority:%d\\r\\n\", server.replica_priority,\n                    \"slave_read_only:%d\\r\\n\", server.repl_replica_ro,\n                    \"replica_announced:%d\\r\\n\", server.replica_announced))",
          "old_line_content": "                info,",
          "new_line_content": "            info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                    \"slave_priority:%d\\r\\n\", server.replica_priority,\n                    \"slave_read_only:%d\\r\\n\", server.repl_replica_ro,\n                    \"replica_announced:%d\\r\\n\", server.replica_announced)",
          "old_line_content": "                    \"slave_priority:%d\\r\\n\", server.replica_priority,",
          "new_line_content": "                FMTARGS(",
          "content_same": false
        },
        {
          "line": 5939,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.replicas)",
          "old_line_content": "",
          "new_line_content": "        info = sdscatprintf(info, \"connected_slaves:%lu\\r\\n\", listLength(server.replicas));",
          "content_same": false
        },
        {
          "line": 5944,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"min_slaves_good_slaves:%d\\r\\n\", server.repl_good_replicas_count)",
          "old_line_content": "        }",
          "new_line_content": "            info = sdscatprintf(info, \"min_slaves_good_slaves:%d\\r\\n\", server.repl_good_replicas_count);",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.replicas)",
          "old_line_content": "            int replica_id = 0;",
          "new_line_content": "        if (listLength(server.replicas)) {",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                char ip[NET_IP_STR_LEN], *replica_ip = replica->replica_addr;",
          "new_line_content": "                client *replica = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 5960,
          "old_api": null,
          "new_api": "connAddrPeerName",
          "old_text": null,
          "new_text": "connAddrPeerName(replica->conn, ip, sizeof(ip), &port)",
          "old_line_content": "                    replica_ip = ip;",
          "new_line_content": "                    if (connAddrPeerName(replica->conn, ip, sizeof(ip), &port) == -1) continue;",
          "content_same": false
        },
        {
          "line": 5963,
          "old_api": null,
          "new_api": "replstateToString",
          "old_text": null,
          "new_text": "replstateToString(replica->repl_state)",
          "old_line_content": "                if (state[0] == '\\0') continue;",
          "new_line_content": "                const char *state = replstateToString(replica->repl_state);",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "                if (replica->repl_state == REPLICA_STATE_ONLINE) lag = time(NULL) - replica->repl_ack_time;",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                                    \"offset=%lld,lag=%ld,type=%s\\r\\n\",\n                                    replica_id, replica_ip, replica->replica_listening_port, state,\n                                    replica->repl_ack_off, lag,\n                                    replica->flag.repl_rdb_channel                     ? \"rdb-channel\"\n                                    : replica->repl_state == REPLICA_STATE_BG_RDB_LOAD ? \"main-channel\"\n                                                                                       : \"replica\")",
          "old_line_content": "                                    \"slave%d:ip=%s,port=%d,state=%s,\"",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "blockPostponeClient",
          "old_text": null,
          "new_text": "blockPostponeClient(c)",
          "old_line_content": "    }",
          "new_line_content": "        blockPostponeClient(c);",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            FMTARGS(\n                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),\n                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n                \"master_replid:%s\\r\\n\", server.replid,\n                \"master_replid2:%s\\r\\n\", server.replid2,\n                \"master_repl_offset:%lld\\r\\n\", server.primary_repl_offset,\n                \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n                \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n                \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n                \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n                \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv, c->argc)",
          "old_line_content": "",
          "new_line_content": "        struct serverCommand *cmd = c->io_parsed_cmd ? c->io_parsed_cmd : lookupCommand(c->argv, c->argc);",
          "content_same": false
        },
        {
          "line": 5982,
          "old_api": null,
          "new_api": "getFailoverStateString",
          "old_text": null,
          "new_text": "getFailoverStateString()",
          "old_line_content": "                \"master_replid:%s\\r\\n\", server.replid,",
          "new_line_content": "                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[0]->ptr, \"post\")",
          "old_line_content": "     * In case we are reprocessing a command after it was blocked,",
          "new_line_content": "            if (!strcasecmp(c->argv[0]->ptr, \"host:\") || !strcasecmp(c->argv[0]->ptr, \"post\")) {",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": null,
          "new_api": "securityWarningCommand",
          "old_text": null,
          "new_text": "securityWarningCommand(c)",
          "old_line_content": "     * we do not have to repeat the same checks */",
          "new_line_content": "                securityWarningCommand(c);",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info, \"\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6000,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                            \"# CPU\\r\\n\"\n                            \"used_cpu_sys:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user:%ld.%06ld\\r\\n\"\n                            \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n                            (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n                            (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec, (long)c_ru.ru_stime.tv_sec,\n                            (long)c_ru.ru_stime.tv_usec, (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "old_line_content": "                            \"# CPU\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n                                    \"%s command not allowed. If the %s option is set to \\\"local\\\", \"\n                                    \"you can run it from a local connection, otherwise you need to set this option \"\n                                    \"in the configuration file, and then restart the server.\",\n                                    c->cmd->proc == debugCommand ? \"DEBUG\" : \"MODULE\",\n                                    c->cmd->proc == debugCommand ? \"enable-debug-command\" : \"enable-module-command\")",
          "old_line_content": "                                    \"%s command not allowed. If the %s option is set to \\\"local\\\", \"",
          "new_line_content": "                rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                            \"used_cpu_sys_main_thread:%ld.%06ld\\r\\n\"\n                            \"used_cpu_user_main_thread:%ld.%06ld\\r\\n\",\n                            (long)m_ru.ru_stime.tv_sec, (long)m_ru.ru_stime.tv_usec, (long)m_ru.ru_utime.tv_sec,\n                            (long)m_ru.ru_utime.tv_usec)",
          "old_line_content": "                            \"used_cpu_sys_main_thread:%ld.%06ld\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": null,
          "new_api": "getCommandFlags",
          "old_text": null,
          "new_text": "getCommandFlags(c)",
          "old_line_content": "",
          "new_line_content": "    uint64_t cmd_flags = getCommandFlags(c);",
          "content_same": false
        },
        {
          "line": 6025,
          "old_api": null,
          "new_api": "genModulesInfoString",
          "old_text": null,
          "new_text": "genModulesInfoString(info)",
          "old_line_content": "    }",
          "new_line_content": "        info = genModulesInfoString(info);",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "mustObeyClient",
          "old_text": null,
          "new_text": "mustObeyClient(c)",
          "old_line_content": "",
          "new_line_content": "    const int obey_client = mustObeyClient(c);",
          "content_same": false
        },
        {
          "line": 6032,
          "old_api": null,
          "new_api": "genValkeyInfoStringCommandStats",
          "old_text": null,
          "new_text": "genValkeyInfoStringCommandStats(info, server.commands)",
          "old_line_content": "    }",
          "new_line_content": "        info = genValkeyInfoStringCommandStats(info, server.commands);",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": null,
          "new_api": "authRequired",
          "old_text": null,
          "new_text": "authRequired(c)",
          "old_line_content": "        /* AUTH and HELLO and no auth commands are valid even in",
          "new_line_content": "    if (authRequired(c)) {",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.noautherr)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommand(c, shared.noautherr);",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info, \"# Errorstats\\r\\n\")",
          "old_line_content": "        raxIterator ri;",
          "new_line_content": "        info = sdscat(info, \"# Errorstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri, \"^\", NULL, 0)",
          "old_line_content": "        struct serverError *e;",
          "new_line_content": "        raxSeek(&ri, \"^\", NULL, 0);",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "            char *tmpsafe;",
          "new_line_content": "        while (raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"Command not allowed inside a transaction\")",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommandFormat(c, \"Command not allowed inside a transaction\");",
          "content_same": false
        },
        {
          "line": 6048,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "        }",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 6050,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    }",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "ACLCheckAllPerm",
          "old_text": null,
          "new_text": "ACLCheckAllPerm(c, &acl_errpos)",
          "old_line_content": "    if (acl_retval != ACL_OK) {",
          "new_line_content": "    int acl_retval = ACLCheckAllPerm(c, &acl_errpos);",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": null,
          "new_api": "addACLLogEntry",
          "old_text": null,
          "new_text": "addACLLogEntry(c, acl_retval, (c->flag.multi) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL, acl_errpos, NULL,\n                       NULL)",
          "old_line_content": "                       NULL);",
          "new_line_content": "        addACLLogEntry(c, acl_retval, (c->flag.multi) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL, acl_errpos, NULL,",
          "content_same": false
        },
        {
          "line": 6056,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Latencystats\\r\\n\")",
          "old_line_content": "        if (server.latency_tracking_enabled) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Latencystats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(msg)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        sdsfree(msg);",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": null,
          "new_api": "genValkeyInfoStringLatencyStats",
          "old_text": null,
          "new_text": "genValkeyInfoStringLatencyStats(info, server.commands)",
          "old_line_content": "        }",
          "new_line_content": "            info = genValkeyInfoStringLatencyStats(info, server.commands);",
          "content_same": false
        },
        {
          "line": 6065,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                            \"# Cluster\\r\\n\"\n                            \"cluster_enabled:%d\\r\\n\",\n                            server.cluster_enabled)",
          "old_line_content": "                            \"# Cluster\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": null,
          "new_api": "clusterNodeIsMyself",
          "old_text": null,
          "new_text": "clusterNodeIsMyself(n)",
          "old_line_content": "            if (c->cmd->proc == execCommand) {",
          "new_line_content": "        if (n == NULL || !clusterNodeIsMyself(n)) {",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": null,
          "new_api": "discardTransaction",
          "old_text": null,
          "new_text": "discardTransaction(c)",
          "old_line_content": "            } else {",
          "new_line_content": "                discardTransaction(c);",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            }",
          "new_line_content": "                flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 6074,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": null,
          "new_api": "clusterRedirectClient",
          "old_text": null,
          "new_text": "clusterRedirectClient(c, n, c->slot, error_code)",
          "old_line_content": "            c->duration = 0;",
          "new_line_content": "            clusterRedirectClient(c, n, c->slot, error_code);",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": null,
          "new_api": "kvstoreSize",
          "old_text": null,
          "new_text": "kvstoreSize(server.db[j].expires)",
          "old_line_content": "            if (keys || vkeys) {",
          "new_line_content": "            vkeys = kvstoreSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 6081,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\", j, keys, vkeys,\n                                    server.db[j].avg_ttl)",
          "old_line_content": "                                    server.db[j].avg_ttl);",
          "new_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\", j, keys, vkeys,",
          "content_same": false
        },
        {
          "line": 6094,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"modules\")",
          "old_line_content": "                                  0, /* not a crash report */",
          "new_line_content": "        info = modulesCollectInfo(info, everything || dictFind(section_dict, \"modules\") != NULL ? NULL : section_dict,",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(\n            info,\n            \"# Debug\\r\\n\" FMTARGS(\n                \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n                \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n                \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n                \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max))",
          "old_line_content": "            info,",
          "new_line_content": "        info = sdscatprintf(",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n                \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n                \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n                \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max)",
          "old_line_content": "                \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,",
          "new_line_content": "            \"# Debug\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": null,
          "new_api": "blockPostponeClient",
          "old_text": null,
          "new_text": "blockPostponeClient(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            blockPostponeClient(c);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "discardTransaction",
          "old_text": null,
          "new_text": "discardTransaction(c)",
          "old_line_content": "            } else {",
          "new_line_content": "                discardTransaction(c);",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            }",
          "new_line_content": "                flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorSds(c, sdscatprintf(sdsempty(), \"-REDIRECT %s:%d\", server.primary_host, server.primary_port));",
          "content_same": false
        },
        {
          "line": 6116,
          "old_api": null,
          "new_api": "sentinelInfoCommand",
          "old_text": null,
          "new_text": "sentinelInfoCommand(c)",
          "old_line_content": "        return;",
          "new_line_content": "        sentinelInfoCommand(c);",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": null,
          "new_api": "evictClients",
          "old_text": null,
          "new_text": "evictClients()",
          "old_line_content": "    if (server.current_client == NULL) {",
          "new_line_content": "    evictClients();",
          "content_same": false
        },
        {
          "line": 6125,
          "old_api": null,
          "new_api": "releaseInfoSectionDict",
          "old_text": null,
          "new_text": "releaseInfoSectionDict(sections_dict)",
          "old_line_content": "    return;",
          "new_line_content": "    releaseInfoSectionDict(sections_dict);",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": null,
          "new_api": "performEvictions",
          "old_text": null,
          "new_text": "performEvictions()",
          "old_line_content": "",
          "new_line_content": "        int out_of_memory = (performEvictions() == EVICT_FAIL);",
          "content_same": false
        },
        {
          "line": 6134,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\");",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": null,
          "new_api": "trackingHandlePendingKeyInvalidations",
          "old_text": null,
          "new_text": "trackingHandlePendingKeyInvalidations()",
          "old_line_content": "",
          "new_line_content": "        trackingHandlePendingKeyInvalidations();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4098,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.oomerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.oomerr);",
          "new_line_content": "        if (out_of_memory && is_denyoom_command) {",
          "content_same": false
        },
        {
          "line": 6150,
          "old_api": "sdssplitargs",
          "new_api": null,
          "old_text": "sdssplitargs(server.ignore_warnings, &argc)",
          "new_text": null,
          "old_line_content": "    sds *argv = sdssplitargs(server.ignore_warnings, &argc);",
          "new_line_content": "    int argc, j;",
          "content_same": false
        },
        {
          "line": 6155,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag, warning)",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(flag, warning)) break;",
          "new_line_content": "        char *flag = argv[j];",
          "content_same": false
        },
        {
          "line": 6157,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv, argc)",
          "new_text": null,
          "old_line_content": "    sdsfreesplitres(argv, argc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "trackingLimitUsedSlots",
          "new_api": null,
          "old_text": "trackingLimitUsedSlots()",
          "new_text": null,
          "old_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "new_line_content": "     * caching metadata. */",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "writeCommandsDeniedByDiskError",
          "new_api": null,
          "old_text": "writeCommandsDeniedByDiskError()",
          "new_text": null,
          "old_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "new_line_content": "     * disk write error config to either log or crash. */",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Replica was unable to write command to disk.\")",
          "new_text": null,
          "old_line_content": "                serverPanic(\"Replica was unable to write command to disk.\");",
          "new_line_content": "            if (!server.repl_ignore_disk_write_error && c->cmd->proc != pingCommand) {",
          "content_same": false
        },
        {
          "line": 6171,
          "old_api": "prctl",
          "new_api": null,
          "old_text": "prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0)",
          "new_text": null,
          "old_line_content": "    ret = prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0);",
          "new_line_content": "#ifdef PR_SET_THP_DISABLE",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Replica is applying a command even though \"\n                                          \"it is unable to write to disk.\")",
          "new_text": null,
          "old_line_content": "                    serverLog(LL_WARNING, \"Replica is applying a command even though \"",
          "new_line_content": "                    last_log_time_ms = server.mstime;",
          "content_same": false
        },
        {
          "line": 6179,
          "old_api": "checkOvercommit",
          "new_api": null,
          "old_text": "checkOvercommit(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkOvercommit(&err_msg) < 0) {",
          "new_line_content": "    sds err_msg = NULL;",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": "writeCommandsGetDiskErrorMessage",
          "new_api": null,
          "old_text": "writeCommandsGetDiskErrorMessage(deny_write_type)",
          "new_text": null,
          "old_line_content": "            sds err = writeCommandsGetDiskErrorMessage(deny_write_type);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(err)",
          "new_text": null,
          "old_line_content": "            sdssubstr(err, 0, sdslen(err) - 2);",
          "new_line_content": "            /* remove the newline since rejectCommandSds adds it. */",
          "content_same": false
        },
        {
          "line": 6183,
          "old_api": "checkTHPEnabled",
          "new_api": null,
          "old_text": "checkTHPEnabled(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkTHPEnabled(&err_msg) < 0) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6185,
          "old_api": "THPDisable",
          "new_api": null,
          "old_text": "THPDisable()",
          "new_text": null,
          "old_line_content": "        if (THPDisable() == 0) {",
          "new_line_content": "        server.thp_enabled = 1;",
          "content_same": false
        },
        {
          "line": 6188,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "checkGoodReplicasStatus",
          "new_api": null,
          "old_text": "checkGoodReplicasStatus()",
          "new_text": null,
          "old_line_content": "    if (is_write_command && !checkGoodReplicasStatus()) {",
          "new_line_content": "     * user configured the min-replicas-to-write option. */",
          "content_same": false
        },
        {
          "line": 6190,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(err_msg)",
          "new_text": null,
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.roreplicaerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.roreplicaerr);",
          "new_line_content": "    if (server.primary_host && server.repl_replica_ro && !obey_client && is_write_command) {",
          "content_same": false
        },
        {
          "line": 6198,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "new_text": null,
          "old_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "new_line_content": "     * default pidfile path */",
          "content_same": false
        },
        {
          "line": 6201,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile, \"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile, \"w\");",
          "new_line_content": "    /* Try to write the pid file in a best-effort way. */",
          "content_same": false
        },
        {
          "line": 6203,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        fprintf(fp, \"%d\\n\", (int)getpid());",
          "new_line_content": "    if (fp) {",
          "content_same": false
        },
        {
          "line": 6206,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Failed to write PID file: %s\", strerror(errno));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n                            \"Can't execute '%s': only (P|S)SUBSCRIBE / \"\n                            \"(P|S)UNSUBSCRIBE / PING / QUIT / RESET are allowed in this context\",\n                            c->cmd->fullname)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c,",
          "new_line_content": "        c->cmd->proc != punsubscribeCommand && c->cmd->proc != quitCommand && c->cmd->proc != resetCommand) {",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"-NOSUB '%s' command executed not in subscribed mode\", c->cmd->fullname)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c, \"-NOSUB '%s' command executed not in subscribed mode\", c->cmd->fullname);",
          "new_line_content": "                            c->cmd->proc == punsubscribeCommand)) {",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.primarydownerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.primarydownerr);",
          "new_line_content": "        is_denystale_command) {",
          "content_same": false
        },
        {
          "line": 6228,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds version = sdscatprintf(sdsempty(), \"v=%s sha=%s:%d malloc=%s bits=%d build=%llx\", VALKEY_VERSION,",
          "new_line_content": "sds getVersion(void) {",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.loadingerr);",
          "new_line_content": "    if (server.loading && !server.async_loading && is_denyloading_command) {",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Usage: ./valkey-server [/path/to/valkey.conf] [options] [-]\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr, \"Usage: ./valkey-server [/path/to/valkey.conf] [options] [-]\\n\");",
          "new_line_content": "void usage(void) {",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.loadingerr);",
          "new_line_content": "    if (server.async_loading && is_deny_async_loading_command) {",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": null,
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": null,
          "old_line_content": "    if (isInsideYieldingLongCommand() && !(c->cmd->flags & CMD_ALLOW_BUSY)) {",
          "new_line_content": "     * executed, see Github PR #7022. */",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply)",
          "new_text": null,
          "old_line_content": "            rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply);",
          "new_line_content": "        if (server.busy_module_yield_flags && server.busy_module_yield_reply) {",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowmoduleerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.slowmoduleerr);",
          "new_line_content": "        } else if (server.busy_module_yield_flags) {",
          "content_same": false
        },
        {
          "line": 6257,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(1024 * 16)",
          "new_text": null,
          "old_line_content": "    char *buf = zmalloc(1024 * 16);",
          "new_line_content": "#include \"asciilogo.h\"",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowscripterr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.slowscripterr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4219,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"Replica can't interact with the keyspace\")",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c, \"Replica can't interact with the keyspace\");",
          "new_line_content": "    if (c->flag.replica && (is_may_replicate_command || is_write_command || is_read_command)) {",
          "content_same": false
        },
        {
          "line": 6271,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(stdout)",
          "new_text": null,
          "old_line_content": "        ((!server.syslog_enabled && server.logfile[0] == '\\0' && isatty(fileno(stdout))) || server.always_show_logo);",
          "new_line_content": "    int show_logo =",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": "isPausedActions",
          "new_api": null,
          "old_text": "isPausedActions(PAUSE_ACTION_CLIENT_ALL)",
          "new_text": null,
          "old_line_content": "    if (!c->flag.replica && ((isPausedActions(PAUSE_ACTION_CLIENT_ALL)) ||",
          "new_line_content": "     * the pause has ended. Replicas are never paused. */",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Running mode=%s, port=%d.\", mode, server.port ? server.port : server.tls_port)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Running mode=%s, port=%d.\", mode, server.port ? server.port : server.tls_port);",
          "new_line_content": "    if (!show_logo) {",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": "serverGitDirty",
          "new_api": null,
          "old_text": "serverGitDirty()",
          "new_text": null,
          "old_line_content": "        snprintf(buf, 1024 * 16, ascii_logo, VALKEY_VERSION, serverGitSHA1(), strtol(serverGitDirty(), NULL, 10) > 0,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6280,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c, cmd_flags)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c, cmd_flags);",
          "new_line_content": "        c->cmd->proc != resetCommand) {",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": "connectionIndexByType",
          "new_api": null,
          "old_text": "connectionIndexByType(typename)",
          "new_text": null,
          "old_line_content": "    conn_index = connectionIndexByType(typename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c, flags)",
          "new_text": null,
          "old_line_content": "        call(c, flags);",
          "new_line_content": "        if (client_reprocessing_command) flags |= CMD_CALL_REPROCESSING;",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "closeListener",
          "new_api": null,
          "old_text": "closeListener(listener)",
          "new_text": null,
          "old_line_content": "    closeListener(listener);",
          "new_line_content": "    /* Close old servers */",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(server.errors, (unsigned char *)fullerr, namelen, &result)",
          "new_text": null,
          "old_line_content": "    if (!raxFind(server.errors, (unsigned char *)fullerr, namelen, &result)) {",
          "new_line_content": "    void *result;",
          "content_same": false
        },
        {
          "line": 6300,
          "old_api": "serverSetProcTitle",
          "new_api": null,
          "old_text": "serverSetProcTitle(NULL)",
          "new_text": null,
          "old_line_content": "        if (server.set_proc_title) serverSetProcTitle(NULL);",
          "new_line_content": "    if (listener->port == 0) {",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(server.errors, (unsigned char *)fullerr, namelen, error, NULL)",
          "new_text": null,
          "old_line_content": "        raxInsert(server.errors, (unsigned char *)fullerr, namelen, error, NULL);",
          "new_line_content": "        error->count = 1;",
          "content_same": false
        },
        {
          "line": 6305,
          "old_api": "connListen",
          "new_api": null,
          "old_text": "connListen(listener)",
          "new_text": null,
          "old_line_content": "    if (connListen(listener) != C_OK) {",
          "new_line_content": "    /* Re-create listener */",
          "content_same": false
        },
        {
          "line": 6310,
          "old_api": "createSocketAcceptHandler",
          "new_api": null,
          "old_text": "createSocketAcceptHandler(listener, listener->ct->accept_handler)",
          "new_text": null,
          "old_line_content": "    if (createSocketAcceptHandler(listener, listener->ct->accept_handler) != C_OK) {",
          "new_line_content": "    /* Create event handlers */",
          "content_same": false
        },
        {
          "line": 6314,
          "old_api": "serverSetProcTitle",
          "new_api": null,
          "old_text": "serverSetProcTitle(NULL)",
          "new_text": null,
          "old_line_content": "    if (server.set_proc_title) serverSetProcTitle(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4271,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(listener->fd[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < listener->count; j++) close(listener->fd[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.clistener.fd[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < server.clistener.count; j++) close(server.clistener.fd[j]);",
          "new_line_content": "    if (server.cluster_enabled)",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Removing the unix socket file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Removing the unix socket file.\");",
          "new_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "content_same": false
        },
        {
          "line": 6333,
          "old_api": "serverLogRawFromHandler",
          "new_api": null,
          "old_text": "serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "new_text": null,
          "old_line_content": "        serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "new_line_content": "    if (server.shutdown_asap && sig == SIGINT) {",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": "serverLogRawFromHandler",
          "new_api": null,
          "old_text": "serverLogRawFromHandler(LL_WARNING, msg)",
          "new_text": null,
          "old_line_content": "    serverLogRawFromHandler(LL_WARNING, msg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6351,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "    act.sa_handler = sigShutdownHandler;",
          "content_same": false
        },
        {
          "line": 6354,
          "old_api": "setupDebugSigHandlers",
          "new_api": null,
          "old_text": "setupDebugSigHandlers()",
          "new_text": null,
          "old_line_content": "    setupDebugSigHandlers();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": "isShutdownInitiated",
          "new_api": null,
          "old_text": "isShutdownInitiated()",
          "new_text": null,
          "old_line_content": "    if (isShutdownInitiated()) return C_ERR;",
          "new_line_content": "int prepareForShutdown(client *c, int flags) {",
          "content_same": false
        },
        {
          "line": 6362,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(sig)",
          "new_text": null,
          "old_line_content": "    UNUSED(sig);",
          "new_line_content": "static void sigKillChildHandler(int sig) {",
          "content_same": false
        },
        {
          "line": 6364,
          "old_api": "serverLogRawFromHandler",
          "new_api": null,
          "old_text": "serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\")",
          "new_text": null,
          "old_line_content": "    serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\");",
          "new_line_content": "    int level = server.in_fork_child == CHILD_TYPE_MODULE ? LL_VERBOSE : LL_WARNING;",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds client = catClientInfoString(sdsempty(), c, server.hide_user_data_from_log);",
          "new_line_content": "    if (c != NULL) {",
          "content_same": false
        },
        {
          "line": 6373,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "     * Otherwise, sa_handler is used. */",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGUSR1, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "new_line_content": "    act.sa_handler = sigKillChildHandler;",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"User requested shutdown...\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STOPPING=1\\n\")",
          "new_text": null,
          "old_line_content": "    if (server.supervised_mode == SUPERVISED_SYSTEMD) serverCommunicateSystemd(\"STOPPING=1\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "isReadyToShutdown",
          "new_api": null,
          "old_text": "isReadyToShutdown()",
          "new_text": null,
          "old_line_content": "    if (!(flags & SHUTDOWN_NOW) && server.shutdown_timeout != 0 && !isReadyToShutdown()) {",
          "new_line_content": "     * we shut down, to avoid data loss. */",
          "content_same": false
        },
        {
          "line": 6384,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(0)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(0);",
          "new_line_content": "void closeChildUnusedResourceAfterFork(void) {",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "sendGetackToReplicas",
          "new_api": null,
          "old_text": "sendGetackToReplicas()",
          "new_text": null,
          "old_line_content": "        if (!isPausedActions(PAUSE_ACTION_REPLICA)) sendGetackToReplicas();",
          "new_line_content": "        server.shutdown_mstime = server.mstime + server.shutdown_timeout * 1000;",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.cluster_config_file_lock_fd)",
          "new_text": null,
          "old_line_content": "        close(server.cluster_config_file_lock_fd); /* don't care if this fails */",
          "new_line_content": "    if (server.cluster_enabled && server.cluster_config_file_lock_fd != -1)",
          "content_same": false
        },
        {
          "line": 6390,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.pidfile)",
          "new_text": null,
          "old_line_content": "    zfree(server.pidfile);",
          "new_line_content": "     * be touched (or deleted) by the child (on exit / crash) */",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": "finishShutdown",
          "new_api": null,
          "old_text": "finishShutdown()",
          "new_text": null,
          "old_line_content": "    return finishShutdown();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "isMutuallyExclusiveChildType",
          "new_api": null,
          "old_text": "isMutuallyExclusiveChildType(purpose)",
          "new_text": null,
          "old_line_content": "    if (isMutuallyExclusiveChildType(purpose)) {",
          "new_line_content": "int serverFork(int purpose) {",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.replicas)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.replicas) == 0) return 1; /* No replicas. */",
          "new_line_content": "int isReadyToShutdown(void) {",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": "openChildInfoPipe",
          "new_api": null,
          "old_text": "openChildInfoPipe()",
          "new_text": null,
          "old_line_content": "        openChildInfoPipe();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.replicas, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.replicas, &li);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "    int childpid;",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": "setupChildSignalHandlers",
          "new_api": null,
          "old_text": "setupChildSignalHandlers()",
          "new_text": null,
          "old_line_content": "        setupChildSignalHandlers();",
          "new_line_content": "        server.in_fork_child = purpose;",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "replyToClientsBlockedOnShutdown",
          "new_api": null,
          "old_text": "replyToClientsBlockedOnShutdown()",
          "new_text": null,
          "old_line_content": "    replyToClientsBlockedOnShutdown();",
          "new_line_content": "    server.last_sig_received = 0;",
          "content_same": false
        },
        {
          "line": 6423,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.child_info_pipe[0])",
          "new_text": null,
          "old_line_content": "        if (server.child_info_pipe[0] != -1) close(server.child_info_pipe[0]);",
          "new_line_content": "         * get a write error and exit. */",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": "isShutdownInitiated",
          "new_api": null,
          "old_text": "isShutdownInitiated()",
          "new_text": null,
          "old_line_content": "    if (isShutdownInitiated()) {",
          "new_line_content": "int abortShutdown(void) {",
          "content_same": false
        },
        {
          "line": 6428,
          "old_api": "closeChildInfoPipe",
          "new_api": null,
          "old_text": "closeChildInfoPipe()",
          "new_text": null,
          "old_line_content": "            if (isMutuallyExclusiveChildType(purpose)) closeChildInfoPipe();",
          "new_line_content": "            int fork_errno = errno;",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_time = ustime() - start;",
          "new_line_content": "        server.stat_total_forks++;",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Shutdown manually aborted.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"Shutdown manually aborted.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6436,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            (double)zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024 * 1024 * 1024); /* GB per second. */",
          "new_line_content": "        server.stat_fork_rate =",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": "isMutuallyExclusiveChildType",
          "new_api": null,
          "old_text": "isMutuallyExclusiveChildType(purpose)",
          "new_text": null,
          "old_line_content": "        if (isMutuallyExclusiveChildType(purpose)) {",
          "new_line_content": "         *   forks are running (like RDB and AOF) */",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.replicas, &replicas_iter)",
          "new_text": null,
          "old_line_content": "    listRewind(server.replicas, &replicas_iter);",
          "new_line_content": "    int num_replicas = 0, num_lagging_replicas = 0;",
          "content_same": false
        },
        {
          "line": 6454,
          "old_api": "dbTotalServerKeyCount",
          "new_api": null,
          "old_text": "dbTotalServerKeyCount()",
          "new_text": null,
          "old_line_content": "            server.stat_current_save_keys_total = dbTotalServerKeyCount();",
          "new_line_content": "            server.stat_module_progress = 0;",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            long lag = replica->repl_state == REPLICA_STATE_ONLINE ? time(NULL) - replica->repl_ack_time : 0;",
          "new_line_content": "            num_lagging_replicas++;",
          "content_same": false
        },
        {
          "line": 6457,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"%d of %d replicas are in sync when shutting down.\", num_replicas - num_lagging_replicas,\n                  num_replicas)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"%d of %d replicas are in sync when shutting down.\", num_replicas - num_lagging_replicas,",
          "new_line_content": "    if (num_replicas > 0) {",
          "content_same": false
        },
        {
          "line": 6464,
          "old_api": "sendChildInfoGeneric",
          "new_api": null,
          "old_text": "sendChildInfoGeneric(info_type, 0, -1, pname)",
          "new_text": null,
          "old_line_content": "    sendChildInfoGeneric(info_type, 0, -1, pname);",
          "new_line_content": "void sendChildCowInfo(childInfoType info_type, char *pname) {",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": "sendChildInfoGeneric",
          "new_api": null,
          "old_text": "sendChildInfoGeneric(info_type, keys, -1, pname)",
          "new_text": null,
          "old_line_content": "    sendChildInfoGeneric(info_type, keys, -1, pname);",
          "new_line_content": "void sendChildInfo(childInfoType info_type, size_t keys, char *pname) {",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "ldbKillForkedSessions",
          "new_api": null,
          "old_text": "ldbKillForkedSessions()",
          "new_text": null,
          "old_line_content": "    ldbKillForkedSessions();",
          "new_line_content": "    /* Kill all the Lua debugger forked sessions. */",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "    if (server.child_type == CHILD_TYPE_RDB) {",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.child_pid, 0)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.child_pid, 0);",
          "new_line_content": "         * but OS will close this fd when process exits. */",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"There is a module fork child. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"There is a module fork child. Killing it!\");",
          "new_line_content": "    if (server.child_type == CHILD_TYPE_MODULE) {",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": "zmadvise_dontneed",
          "new_api": null,
          "old_text": "zmadvise_dontneed(ptr)",
          "new_text": null,
          "old_line_content": "    zmadvise_dontneed(ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6494,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(c->buf, c->buf_usable_size)",
          "new_text": null,
          "old_line_content": "    dismissMemory(c->buf, c->buf_usable_size);",
          "new_line_content": "    /* Dismiss client query buffer and static reply buffer. */",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\");",
          "new_line_content": "            if (force) {",
          "content_same": false
        },
        {
          "line": 6499,
          "old_api": "dismissObject",
          "new_api": null,
          "old_text": "dismissObject(c->argv[i], 0)",
          "new_text": null,
          "old_line_content": "            dismissObject(c->argv[i], 0);",
          "new_line_content": "        for (int i = 0; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(c->argv, c->argc * sizeof(robj *))",
          "new_text": null,
          "old_line_content": "    if (c->argc) dismissMemory(c->argv, c->argc * sizeof(robj *));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\")",
          "new_text": null,
          "old_line_content": "                    serverCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\");",
          "new_line_content": "                if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 6506,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->reply) && c->reply_bytes / listLength(c->reply) >= server.page_size) {",
          "new_line_content": "     * than a page. */",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"There is a child rewriting the AOF. Killing it!\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6509,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(c->reply, &li)",
          "new_text": null,
          "old_line_content": "        listRewind(c->reply, &li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Calling fsync() on the AOF file.\");",
          "new_line_content": "        /* Append only file: flush buffers and fsync() the AOF at exit */",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(bulk, bulk->size)",
          "new_text": null,
          "old_line_content": "            if (bulk) dismissMemory(bulk, bulk->size);",
          "new_line_content": "             * occupies 20k according to jemalloc bin size if using jemalloc. */",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Saving the final RDB snapshot before exiting.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Saving the final RDB snapshot before exiting.\");",
          "new_line_content": "    if ((server.saveparamslen > 0 && !nosave) || save) {",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "new_text": null,
          "old_line_content": "            serverCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "new_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": null,
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": null,
          "old_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "        rdbSaveInfo rsi, *rsiptr;",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(REPLICA_REQ_NONE, server.rdb_filename, rsiptr, RDBFLAGS_KEEP_CACHE)",
          "new_text": null,
          "old_line_content": "        if (rdbSave(REPLICA_REQ_NONE, server.rdb_filename, rsiptr, RDBFLAGS_KEEP_CACHE) != C_OK) {",
          "new_line_content": "        /* Keep the page cache since it's likely to restart soon */",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Error trying to save the DB. Exit anyway.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Error trying to save the DB. Exit anyway.\");",
          "new_line_content": "            if (force) {",
          "content_same": false
        },
        {
          "line": 6536,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.repl_buffer_blocks, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.repl_buffer_blocks, &li);",
          "new_line_content": "     * replication buffer but don't cost real memory. */",
          "content_same": false
        },
        {
          "line": 4489,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Error trying to save the DB, can't exit.\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "new_text": null,
          "old_line_content": "                    serverCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "new_line_content": "                if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 6543,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.clients, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.clients, &li);",
          "new_line_content": "    /* Dismiss all clients memory. */",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "aofManifestFree",
          "new_api": null,
          "old_text": "aofManifestFree(server.aof_manifest)",
          "new_text": null,
          "old_line_content": "    if (server.aof_manifest) aofManifestFree(server.aof_manifest);",
          "new_line_content": "    /* Free the AOF manifest. */",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(VALKEYMODULE_EVENT_SHUTDOWN, 0, NULL)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(VALKEYMODULE_EVENT_SHUTDOWN, 0, NULL);",
          "new_line_content": "    /* Fire the shutdown modules event. */",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Removing the pid file.\");",
          "new_line_content": "    if (server.daemonize || server.pidfile) {",
          "content_same": false
        },
        {
          "line": 6556,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name, \"valkey-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name, \"valkey-sentinel\") != NULL) return 1;",
          "new_line_content": "int checkForSentinelMode(int argc, char **argv, char *exec_name) {",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": "flushReplicasOutputBuffers",
          "new_api": null,
          "old_text": "flushReplicasOutputBuffers()",
          "new_text": null,
          "old_line_content": "    flushReplicasOutputBuffers();",
          "new_line_content": "     * send them pending writes. */",
          "content_same": false
        },
        {
          "line": 6559,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name, \"redis-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name, \"redis-sentinel\") != NULL) return 1;",
          "new_line_content": "    /* valkey may install symlinks like redis-sentinel -> valkey-sentinel. */",
          "content_same": false
        },
        {
          "line": 4514,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(1)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(1);",
          "new_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "content_same": false
        },
        {
          "line": 6562,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[j], \"--sentinel\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(argv[j], \"--sentinel\")) return 1;",
          "new_line_content": "    for (int j = 1; j < argc; j++)",
          "content_same": false
        },
        {
          "line": 4517,
          "old_api": "clusterHandleServerShutdown",
          "new_api": null,
          "old_text": "clusterHandleServerShutdown()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterHandleServerShutdown();",
          "new_line_content": "    /* Handle cluster-related matters when shutdown. */",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"%s is now ready to exit, bye bye...\", server.sentinel_mode ? \"Sentinel\" : \"Valkey\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING, \"%s is now ready to exit, bye bye...\", server.sentinel_mode ? \"Sentinel\" : \"Valkey\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6568,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "void loadDataFromDisk(void) {",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": "loadAppendOnlyFiles",
          "new_api": null,
          "old_text": "loadAppendOnlyFiles(server.aof_manifest)",
          "new_text": null,
          "old_line_content": "        int ret = loadAppendOnlyFiles(server.aof_manifest);",
          "new_line_content": "    if (server.aof_state == AOF_ON) {",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\");",
          "new_line_content": "error:",
          "content_same": false
        },
        {
          "line": 6573,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE, \"DB loaded from append only file: %.3f seconds\", (float)(ustime() - start) / 1000000);",
          "new_line_content": "        if (ret != AOF_NOT_EXIST)",
          "content_same": false
        },
        {
          "line": 6579,
          "old_api": "iAmPrimary",
          "new_api": null,
          "old_text": "iAmPrimary()",
          "new_text": null,
          "old_line_content": "        if (iAmPrimary()) {",
          "new_line_content": "        int rdb_flags = RDBFLAGS_NONE;",
          "content_same": false
        },
        {
          "line": 6582,
          "old_api": "createReplicationBacklog",
          "new_api": null,
          "old_text": "createReplicationBacklog()",
          "new_text": null,
          "old_line_content": "            createReplicationBacklog();",
          "new_line_content": "             * propagate expire to replication backlog. */",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.rdb_filename, &rsi, rdb_flags)",
          "new_text": null,
          "old_line_content": "        int rdb_load_ret = rdbLoad(server.rdb_filename, &rsi, rdb_flags);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6587,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE, \"DB loaded from disk: %.3f seconds\", (float)(ustime() - start) / 1000000);",
          "new_line_content": "        if (rdb_load_ret == RDB_OK) {",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": "iAmPrimary",
          "new_api": null,
          "old_text": "iAmPrimary()",
          "new_text": null,
          "old_line_content": "                if (!iAmPrimary()) {",
          "new_line_content": "                rsi_is_valid = 1;",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": "atomic_load_explicit",
          "new_api": null,
          "old_text": "atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_acquire)",
          "new_text": null,
          "old_line_content": "        int aof_bio_fsync_status = atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_acquire);",
          "new_line_content": "        /* AOF fsync error. */",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "atomic_load_explicit",
          "new_api": null,
          "old_text": "atomic_load_explicit(&server.aof_bio_fsync_errno, memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "            server.aof_last_write_errno = atomic_load_explicit(&server.aof_bio_fsync_errno, memory_order_relaxed);",
          "new_line_content": "        if (aof_bio_fsync_status == C_ERR) {",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": "replicationCachePrimaryUsingMyself",
          "new_api": null,
          "old_text": "replicationCachePrimaryUsingMyself()",
          "new_text": null,
          "old_line_content": "                    replicationCachePrimaryUsingMyself();",
          "new_line_content": "                     * with primaries. */",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(server.replid2, rsi.repl_id, sizeof(server.replid))",
          "new_text": null,
          "old_line_content": "                    memcpy(server.replid2, rsi.repl_id, sizeof(server.replid));",
          "new_line_content": "                     * to partial resynchronizations with primaries. */",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(shared.bgsaveerr->ptr)",
          "new_text": null,
          "old_line_content": "        ret = sdsdup(shared.bgsaveerr->ptr);",
          "new_line_content": "    if (error_code == DISK_ERROR_TYPE_RDB) {",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        ret = sdscatfmt(sdsempty(), \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(server.repl_backlog)",
          "new_text": null,
          "old_line_content": "                    serverAssert(server.repl_backlog);",
          "new_line_content": "                    server.primary_repl_offset += rsi.repl_offset;",
          "content_same": false
        },
        {
          "line": 6614,
          "old_api": "rebaseReplicationBuffer",
          "new_api": null,
          "old_text": "rebaseReplicationBuffer(rsi.repl_offset)",
          "new_text": null,
          "old_line_content": "                    rebaseReplicationBuffer(rsi.repl_offset);",
          "new_line_content": "                    server.repl_backlog->offset = server.primary_repl_offset - server.repl_backlog->histlen + 1;",
          "content_same": false
        },
        {
          "line": 6619,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\");",
          "new_line_content": "        } else if (rdb_load_ret != RDB_NOT_EXIST) {",
          "content_same": false
        },
        {
          "line": 4575,
          "old_api": "addReplyErrorArity",
          "new_api": null,
          "old_text": "addReplyErrorArity(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorArity(c);",
          "new_line_content": "    if (c->argc > 2) {",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.mbulkhdr[2])",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.mbulkhdr[2]);",
          "new_line_content": "    if (c->flag.pubsub && c->resp == 2) {",
          "content_same": false
        },
        {
          "line": 6628,
          "old_api": "freeReplicationBacklog",
          "new_api": null,
          "old_text": "freeReplicationBacklog()",
          "new_text": null,
          "old_line_content": "        if (!rsi_is_valid && server.repl_backlog) freeReplicationBacklog();",
          "new_line_content": "         * of replication backlog, we drop it. */",
          "content_same": false
        },
        {
          "line": 4583,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c, \"\", 0)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c, \"\", 0);",
          "new_line_content": "        if (c->argc == 1)",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c, c->argv[1])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c, c->argv[1]);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 6633,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Out Of Memory allocating %zu bytes!\", allocation_size)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING, \"Out Of Memory allocating %zu bytes!\", allocation_size);",
          "new_line_content": "void serverOutOfMemoryHandler(size_t allocation_size) {",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.pong)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.pong);",
          "new_line_content": "        if (c->argc == 1)",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c, c->argv[1])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c, c->argv[1]);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(varname, \"title\")",
          "new_text": null,
          "old_line_content": "    if (!strcmp(varname, \"title\")) {",
          "new_line_content": "static sds serverProcTitleGetVariable(const sds varname, void *arg) {",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c, c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c, c->argv[1]);",
          "new_line_content": "void echoCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            return sdscatprintf(sdsempty(), \"%s:%u\", server.bindaddr_count ? server.bindaddr[0] : \"*\",",
          "new_line_content": "        if (server.port || server.tls_port)",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, 2);",
          "new_line_content": "void timeCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 6648,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            return sdscatprintf(sdsempty(), \"unixsocket:%s\", server.unixsocket);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 6651,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"[cluster]\")",
          "new_text": null,
          "old_line_content": "            return sdsnew(\"[cluster]\");",
          "new_line_content": "        if (server.cluster_enabled)",
          "content_same": false
        },
        {
          "line": 6653,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"[sentinel]\")",
          "new_text": null,
          "old_line_content": "            return sdsnew(\"[sentinel]\");",
          "new_line_content": "        else if (server.sentinel_mode)",
          "content_same": false
        },
        {
          "line": 6655,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            return sdsempty();",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, count)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4621,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c, replyFlags[j].name)",
          "new_text": null,
          "old_line_content": "        if (flags & replyFlags[j].flag) addReplyStatus(c, replyFlags[j].name);",
          "new_line_content": "    while (replyFlags[j].name) {",
          "content_same": false
        },
        {
          "line": 6673,
          "old_api": "sdstrim",
          "new_api": null,
          "old_text": "sdstrim(res, \" \")",
          "new_text": null,
          "old_line_content": "    return sdstrim(res, \" \");",
          "new_line_content": "    if (!res) return NULL;",
          "content_same": false
        },
        {
          "line": 6678,
          "old_api": "expandProcTitleTemplate",
          "new_api": null,
          "old_text": "expandProcTitleTemplate(template, \"\")",
          "new_text": null,
          "old_line_content": "    sds res = expandProcTitleTemplate(template, \"\");",
          "new_line_content": "    int ok = 1;",
          "content_same": false
        },
        {
          "line": 6680,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(res)",
          "new_text": null,
          "old_line_content": "    if (sdslen(res) == 0) ok = 0;",
          "new_line_content": "    if (!res) return 0;",
          "content_same": false
        },
        {
          "line": 6688,
          "old_api": "expandProcTitleTemplate",
          "new_api": null,
          "old_text": "expandProcTitleTemplate(server.proc_title_template, title)",
          "new_text": null,
          "old_line_content": "    sds proc_title = expandProcTitleTemplate(server.proc_title_template, title);",
          "new_line_content": "    if (!title) title = server.exec_argv[0];",
          "content_same": false
        },
        {
          "line": 6691,
          "old_api": "setproctitle",
          "new_api": null,
          "old_text": "setproctitle(\"%s\", proc_title)",
          "new_text": null,
          "old_line_content": "    setproctitle(\"%s\", proc_title);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(title)",
          "new_text": null,
          "old_line_content": "    UNUSED(title);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, cmd->flags, flagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, cmd->flags, flagNames);",
          "new_line_content": "                                  {0, NULL}};",
          "content_same": false
        },
        {
          "line": 6702,
          "old_api": "setcpuaffinity",
          "new_api": null,
          "old_text": "setcpuaffinity(cpulist)",
          "new_text": null,
          "old_line_content": "    setcpuaffinity(cpulist);",
          "new_line_content": "#ifdef USE_SETCPUAFFINITY",
          "content_same": false
        },
        {
          "line": 6704,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cpulist)",
          "new_text": null,
          "old_line_content": "    UNUSED(cpulist);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, cmd->doc_flags, docFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, cmd->doc_flags, docFlagNames);",
          "new_line_content": "    replyFlagNames docFlagNames[] = {{CMD_DOC_DEPRECATED, \"deprecated\"}, {CMD_DOC_SYSCMD, \"syscmd\"}, {0, NULL}};",
          "content_same": false
        },
        {
          "line": 6712,
          "old_api": "sd_notify",
          "new_api": null,
          "old_text": "sd_notify(0, sd_notify_msg)",
          "new_text": null,
          "old_line_content": "    int ret = sd_notify(0, sd_notify_msg);",
          "new_line_content": "#ifdef HAVE_LIBSYSTEMD",
          "content_same": false
        },
        {
          "line": 6715,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\");",
          "new_line_content": "    if (ret == 0)",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret);",
          "new_line_content": "    else if (ret < 0)",
          "content_same": false
        },
        {
          "line": 6720,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(sd_notify_msg)",
          "new_text": null,
          "old_line_content": "    UNUSED(sd_notify_msg);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 4674,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, flags, docFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, flags, docFlagNames);",
          "new_line_content": "                                     {0, NULL}};",
          "content_same": false
        },
        {
          "line": 6727,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "new_line_content": "static int serverSupervisedUpstart(void) {",
          "content_same": false
        },
        {
          "line": 6730,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"upstart supervision requested, but UPSTART_JOB not found!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"upstart supervision requested, but UPSTART_JOB not found!\");",
          "new_line_content": "    if (!upstart_job) {",
          "content_same": false
        },
        {
          "line": 6734,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, flags, argFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, flags, argFlagNames);",
          "new_line_content": "                                     {0, NULL}};",
          "content_same": false
        },
        {
          "line": 6743,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n              \"systemd supervision requested or auto-detected, but Valkey is compiled without libsystemd support!\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,",
          "new_line_content": "#ifndef HAVE_LIBSYSTEMD",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, num_args)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, num_args);",
          "new_line_content": "void addReplyCommandArgList(client *c, struct serverCommandArg *args, int num_args) {",
          "content_same": false
        },
        {
          "line": 6747,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Valkey is loading...\\n\")",
          "new_text": null,
          "old_line_content": "    if (serverCommunicateSystemd(\"STATUS=Valkey is loading...\\n\") <= 0) return 0;",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 6758,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "        if (getenv(\"UPSTART_JOB\")) {",
          "new_line_content": "    if (mode == SUPERVISED_AUTODETECT) {",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"NOTIFY_SOCKET\")",
          "new_text": null,
          "old_line_content": "        } else if (getenv(\"NOTIFY_SOCKET\")) {",
          "new_line_content": "            mode = SUPERVISED_UPSTART;",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, maplen);",
          "new_line_content": "        if (has_display_text) maplen++;",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"name\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"name\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"type\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6768,
          "old_api": "serverSupervisedUpstart",
          "new_api": null,
          "old_text": "serverSupervisedUpstart()",
          "new_text": null,
          "old_line_content": "    case SUPERVISED_UPSTART: ret = serverSupervisedUpstart(); break;",
          "new_line_content": "    switch (mode) {",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"display_text\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"display_text\");",
          "new_line_content": "        if (has_display_text) {",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"key_spec_index\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"key_spec_index\");",
          "new_line_content": "        if (args[j].key_spec_index != -1) {",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"token\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"token\");",
          "new_line_content": "        if (args[j].token) {",
          "content_same": false
        },
        {
          "line": 6780,
          "old_api": "getMyClusterNode",
          "new_api": null,
          "old_text": "getMyClusterNode()",
          "new_text": null,
          "old_line_content": "            (server.cluster_enabled && clusterNodeIsPrimary(getMyClusterNode())));",
          "new_line_content": "    return ((!server.cluster_enabled && server.primary_host == NULL) ||",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"summary\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"summary\");",
          "new_line_content": "        if (args[j].summary) {",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"since\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"since\");",
          "new_line_content": "        if (args[j].since) {",
          "content_same": false
        },
        {
          "line": 4744,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"deprecated_since\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"deprecated_since\");",
          "new_line_content": "        if (args[j].deprecated_since) {",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"flags\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"flags\");",
          "new_line_content": "        if (args[j].flags) {",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"arguments\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"arguments\");",
          "new_line_content": "        if (args[j].type == ARG_TYPE_ONEOF || args[j].type == ARG_TYPE_BLOCK) {",
          "content_same": false
        },
        {
          "line": 6804,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(name, serverTests[j].name)",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(name, serverTests[j].name)) {",
          "new_line_content": "    for (int j = 0; j < numtests; j++) {",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, rs->length)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c, rs->length);",
          "new_line_content": "void addReplyJson(client *c, struct jsonObject *rs) {",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, curr->key)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, curr->key);",
          "new_line_content": "        struct jsonObjectElement *curr = &rs->elements[i];",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "addReplyBool",
          "new_api": null,
          "old_text": "addReplyBool(c, curr->value.boolean)",
          "new_text": null,
          "old_line_content": "        case (JSON_TYPE_BOOLEAN): addReplyBool(c, curr->value.boolean); break;",
          "new_line_content": "        switch (curr->type) {",
          "content_same": false
        },
        {
          "line": 6818,
          "old_api": "monotonicInit",
          "new_api": null,
          "old_text": "monotonicInit()",
          "new_text": null,
          "old_line_content": "    monotonicInit(); /* Required for dict tests, that are relying on monotime during dict rehashing. */",
          "new_line_content": "#ifdef SERVER_TEST",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, curr->value.array.length)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, curr->value.array.length);",
          "new_line_content": "        case (JSON_TYPE_ARRAY):",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": "addReplyJson",
          "new_api": null,
          "old_text": "addReplyJson(c, object)",
          "new_text": null,
          "old_line_content": "                addReplyJson(c, object);",
          "new_line_content": "                struct jsonObject *object = curr->value.array.objects[k];",
          "content_same": false
        },
        {
          "line": 6823,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"--accurate\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(arg, \"--accurate\"))",
          "new_line_content": "            char *arg = argv[j];",
          "content_same": false
        },
        {
          "line": 6825,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"--large-memory\")",
          "new_text": null,
          "old_line_content": "            else if (!strcasecmp(arg, \"--large-memory\"))",
          "new_line_content": "                flags |= TEST_ACCURATE;",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Invalid JSON type %d\", curr->type)",
          "new_text": null,
          "old_line_content": "        default: serverPanic(\"Invalid JSON type %d\", curr->type);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6827,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"--valgrind\")",
          "new_text": null,
          "old_line_content": "            else if (!strcasecmp(arg, \"--valgrind\"))",
          "new_line_content": "                flags |= TEST_LARGE_MEMORY;",
          "content_same": false
        },
        {
          "line": 6831,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[2], \"all\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(argv[2], \"all\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, cmd->num_history)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, cmd->num_history);",
          "new_line_content": "void addReplyCommandHistory(client *c, struct serverCommand *cmd) {",
          "content_same": false
        },
        {
          "line": 6834,
          "old_api": "proc",
          "new_api": null,
          "old_text": "serverTests[j].proc(argc, argv, flags)",
          "new_text": null,
          "old_line_content": "                serverTests[j].failed = (serverTests[j].proc(argc, argv, flags) != 0);",
          "new_line_content": "            for (j = 0; j < numtests; j++) {",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 2);",
          "new_line_content": "    for (int j = 0; j < cmd->num_history; j++) {",
          "content_same": false
        },
        {
          "line": 6842,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"[failed] Test - %s\\n\", serverTests[j].name)",
          "new_text": null,
          "old_line_content": "                    printf(\"[failed] Test - %s\\n\", serverTests[j].name);",
          "new_line_content": "                    failed_num++;",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, cmd->num_tips)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, cmd->num_tips);",
          "new_line_content": "void addReplyCommandTips(client *c, struct serverCommand *cmd) {",
          "content_same": false
        },
        {
          "line": 6844,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"[ok] Test - %s\\n\", serverTests[j].name)",
          "new_text": null,
          "old_line_content": "                    printf(\"[ok] Test - %s\\n\", serverTests[j].name);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, cmd->tips[j])",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, cmd->tips[j]);",
          "new_line_content": "    for (int j = 0; j < cmd->num_tips; j++) {",
          "content_same": false
        },
        {
          "line": 6848,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%d tests, %d passed, %d failed\\n\", numtests, numtests - failed_num, failed_num)",
          "new_text": null,
          "old_line_content": "            printf(\"%d tests, %d passed, %d failed\\n\", numtests, numtests - failed_num, failed_num);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, cmd->key_specs_num)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, cmd->key_specs_num);",
          "new_line_content": "void addReplyCommandKeySpecs(client *c, struct serverCommand *cmd) {",
          "content_same": false
        },
        {
          "line": 6852,
          "old_api": "getTestProcByName",
          "new_api": null,
          "old_text": "getTestProcByName(argv[2])",
          "new_text": null,
          "old_line_content": "            serverTestProc *proc = getTestProcByName(argv[2]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6854,
          "old_api": "proc",
          "new_api": null,
          "old_text": "proc(argc, argv, flags)",
          "new_text": null,
          "old_line_content": "            return proc(argc, argv, flags);",
          "new_line_content": "            if (!proc) return -1; /* test not found */",
          "content_same": false
        },
        {
          "line": 4807,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, maplen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"notes\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"notes\");",
          "new_line_content": "        if (cmd->key_specs[i].notes) {",
          "content_same": false
        },
        {
          "line": 4814,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"flags\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"flags\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6863,
          "old_api": "spt_init",
          "new_api": null,
          "old_text": "spt_init(argc, argv)",
          "new_text": null,
          "old_line_content": "    spt_init(argc, argv);",
          "new_line_content": "#ifdef INIT_SETPROCTITLE_REPLACEMENT",
          "content_same": false
        },
        {
          "line": 4817,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"begin_search\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"begin_search\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6865,
          "old_api": "tzset",
          "new_api": null,
          "old_text": "tzset()",
          "new_text": null,
          "old_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4820,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_BS_UNKNOWN:",
          "content_same": false
        },
        {
          "line": 6870,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv, NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv, NULL);",
          "new_line_content": "     * be the same. But value of tv_usec is fast enough to make the difference */",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_BS_INDEX:",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6880,
          "old_api": "umask",
          "new_api": null,
          "old_text": "umask(0777)",
          "new_text": null,
          "old_line_content": "    umask(server.umask = umask(0777));",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 6883,
          "old_api": "getRandomBytes",
          "new_api": null,
          "old_text": "getRandomBytes(hashseed, sizeof(hashseed))",
          "new_text": null,
          "old_line_content": "    getRandomBytes(hashseed, sizeof(hashseed));",
          "new_line_content": "    uint8_t hashseed[16];",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_BS_KEYWORD:",
          "content_same": false
        },
        {
          "line": 6886,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(argv[0], '/')",
          "new_text": null,
          "old_line_content": "    char *exec_name = strrchr(argv[0], '/');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6888,
          "old_api": "checkForSentinelMode",
          "new_api": null,
          "old_text": "checkForSentinelMode(argc, argv, exec_name)",
          "new_text": null,
          "old_line_content": "    server.sentinel_mode = checkForSentinelMode(argc, argv, exec_name);",
          "new_line_content": "    if (exec_name == NULL) exec_name = argv[0];",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6892,
          "old_api": "moduleInitModulesSystem",
          "new_api": null,
          "old_text": "moduleInitModulesSystem()",
          "new_text": null,
          "old_line_content": "    moduleInitModulesSystem();",
          "new_line_content": "                  basic networking code and client creation depends on it. */",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "new_text": null,
          "old_line_content": "        default: serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6897,
          "old_api": "getAbsolutePath",
          "new_api": null,
          "old_text": "getAbsolutePath(argv[0])",
          "new_text": null,
          "old_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "new_line_content": "     * to be able to restart the server later. */",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"find_keys\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"find_keys\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6900,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(argv[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "new_line_content": "    server.exec_argv[argc] = NULL;",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_FK_UNKNOWN:",
          "content_same": false
        },
        {
          "line": 6906,
          "old_api": "initSentinelConfig",
          "new_api": null,
          "old_text": "initSentinelConfig()",
          "new_text": null,
          "old_line_content": "        initSentinelConfig();",
          "new_line_content": "    if (server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_FK_RANGE:",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name, \"valkey-check-rdb\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name, \"valkey-check-rdb\") != NULL)",
          "new_line_content": "     * so that we can easily execute an RDB check on loading errors. */",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6921,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name, \"redis-check-rdb\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name, \"redis-check-rdb\") != NULL)",
          "new_line_content": "     * redis-check-aof -> valkey-check-aof, etc. */",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c, 2);",
          "new_line_content": "        case KSPEC_FK_KEYNUM:",
          "content_same": false
        },
        {
          "line": 6928,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "        j = 1; /* First option to parse in argv[] */",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"spec\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6931,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"--version\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 || strcmp(argv[1], \"--version\") == 0) {",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 6937,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0 || strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "new_text": null,
          "old_line_content": "        default: serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6940,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2])",
          "new_text": null,
          "old_line_content": "                memtest(atoi(argv[2]), 50);",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 6943,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr, \"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"--check-system\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"--check-system\") == 0) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, 0)",
          "new_text": null,
          "old_line_content": "        addReplySetLen(c, 0);",
          "new_line_content": "    if (!cmd->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(cmd->subcommands_dict)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, dictSize(cmd->subcommands_dict));",
          "new_line_content": "    if (use_map)",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(cmd->subcommands_dict)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, dictSize(cmd->subcommands_dict));",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 6957,
          "old_api": "getAbsolutePath",
          "new_api": null,
          "old_text": "getAbsolutePath(argv[1])",
          "new_text": null,
          "old_line_content": "            server.configfile = getAbsolutePath(argv[1]);",
          "new_line_content": "            /* Replace the config file in server.exec_argv with its absolute path. */",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(cmd->subcommands_dict)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(cmd->subcommands_dict);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "        addReplyNull(c);",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 6977,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options, \"\\n\");",
          "new_line_content": "                /* Option name */",
          "content_same": false
        },
        {
          "line": 6979,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, argv[j] + 2)",
          "new_text": null,
          "old_line_content": "                options = sdscat(options, argv[j] + 2);",
          "new_line_content": "                /* argv[j]+2 for removing the preceding `--` */",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 10)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 10);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": "sdssplitargs",
          "new_api": null,
          "old_text": "sdssplitargs(argv[j], &argc_tmp)",
          "new_text": null,
          "old_line_content": "                argv_tmp = sdssplitargs(argv[j], &argc_tmp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6988,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--save\")",
          "new_text": null,
          "old_line_content": "                        !strcasecmp(argv[j], \"--save\")) {",
          "new_line_content": "                    if ((j != argc - 1) && argv[j + 1][0] == '-' && argv[j + 1][1] == '-' &&",
          "content_same": false
        },
        {
          "line": 6996,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\\\"\\\"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "new_line_content": "                         * a command line from an array and when it's empty that's what they produce. */",
          "content_same": false
        },
        {
          "line": 6998,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--save\")",
          "new_text": null,
          "old_line_content": "                    } else if ((j == argc - 1) && !strcasecmp(argv[j], \"--save\")) {",
          "new_line_content": "                        handled_last_config_arg = 1;",
          "content_same": false
        },
        {
          "line": 7002,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\\\"\\\"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "new_line_content": "                         * so it will become `--save \"\"` and will follow the same reset thing. */",
          "content_same": false
        },
        {
          "line": 7004,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--sentinel\")",
          "new_text": null,
          "old_line_content": "                               !strcasecmp(argv[j], \"--sentinel\")) {",
          "new_line_content": "                    } else if ((j != argc - 1) && argv[j + 1][0] == '-' && argv[j + 1][1] == '-' &&",
          "content_same": false
        },
        {
          "line": 7010,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\");",
          "new_line_content": "                         * break it in #10660, 7.0.1). */",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c, maplen);",
          "new_line_content": "    if (cmd->subcommands_dict) maplen++;",
          "content_same": false
        },
        {
          "line": 7012,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--sentinel\")",
          "new_text": null,
          "old_line_content": "                    } else if ((j == argc - 1) && !strcasecmp(argv[j], \"--sentinel\")) {",
          "new_line_content": "                        handled_last_config_arg = 1;",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"summary\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"summary\");",
          "new_line_content": "    if (cmd->summary) {",
          "content_same": false
        },
        {
          "line": 7017,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\");",
          "new_line_content": "                         * break it in #10660, 7.0.1). */",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"since\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"since\");",
          "new_line_content": "    if (cmd->since) {",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"group\")",
          "new_text": null,
          "old_line_content": "    addReplyBulkCString(c, \"group\");",
          "new_line_content": "    /* Always have the group, for module commands the group is always \"module\". */",
          "content_same": false
        },
        {
          "line": 7024,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv_tmp, argc_tmp)",
          "new_text": null,
          "old_line_content": "                sdsfreesplitres(argv_tmp, argc_tmp);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"complexity\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"complexity\");",
          "new_line_content": "    if (cmd->complexity) {",
          "content_same": false
        },
        {
          "line": 7027,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[j])",
          "new_text": null,
          "old_line_content": "                options = sdscatrepr(options, argv[j], strlen(argv[j]));",
          "new_line_content": "                /* Option argument */",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"module\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"module\");",
          "new_line_content": "    if (cmd->flags & CMD_MODULE) {",
          "content_same": false
        },
        {
          "line": 7034,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(server.configfile, config_from_stdin, options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(server.configfile, config_from_stdin, options);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"doc_flags\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"doc_flags\");",
          "new_line_content": "    if (cmd->doc_flags) {",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": "sentinelCheckConfigFile",
          "new_api": null,
          "old_text": "sentinelCheckConfigFile()",
          "new_text": null,
          "old_line_content": "    if (server.sentinel_mode) sentinelCheckConfigFile();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"deprecated_since\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"deprecated_since\");",
          "new_line_content": "    if (cmd->deprecated_since) {",
          "content_same": false
        },
        {
          "line": 7042,
          "old_api": "linuxMemoryWarnings",
          "new_api": null,
          "old_text": "linuxMemoryWarnings()",
          "new_text": null,
          "old_line_content": "    linuxMemoryWarnings();",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"replaced_by\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"replaced_by\");",
          "new_line_content": "    if (cmd->replaced_by) {",
          "content_same": false
        },
        {
          "line": 7044,
          "old_api": "checkXenClocksource",
          "new_api": null,
          "old_text": "checkXenClocksource(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkXenClocksource(&err_msg) < 0) {",
          "new_line_content": "    sds err_msg = NULL;",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"history\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"history\");",
          "new_line_content": "    if (cmd->history) {",
          "content_same": false
        },
        {
          "line": 7050,
          "old_api": "checkLinuxMadvFreeForkBug",
          "new_api": null,
          "old_text": "checkLinuxMadvFreeForkBug(&err_msg)",
          "new_text": null,
          "old_line_content": "    if ((ret = checkLinuxMadvFreeForkBug(&err_msg)) <= 0) {",
          "new_line_content": "    int ret;",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"reply_schema\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"reply_schema\");",
          "new_line_content": "    if (cmd->reply_schema) {",
          "content_same": false
        },
        {
          "line": 7052,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "        if (ret < 0) {",
          "content_same": false
        },
        {
          "line": 7055,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                      \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"\n                      \"Your system could be affected, please report this error.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "        } else",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"arguments\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"arguments\");",
          "new_line_content": "    if (cmd->args) {",
          "content_same": false
        },
        {
          "line": 7058,
          "old_api": "checkIgnoreWarning",
          "new_api": null,
          "old_text": "checkIgnoreWarning(\"ARM64-COW-BUG\")",
          "new_text": null,
          "old_line_content": "        if (!checkIgnoreWarning(\"ARM64-COW-BUG\")) {",
          "new_line_content": "                      \"Your system could be affected, please report this error.\");",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"subcommands\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"subcommands\");",
          "new_line_content": "    if (cmd->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 7062,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "                                  \"ignore-warnings ARM64-COW-BUG\");",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv + 2, c->argc - 2)",
          "new_text": null,
          "old_line_content": "    struct serverCommand *cmd = lookupCommand(c->argv + 2, c->argc - 2);",
          "new_line_content": "void getKeysSubcommandImpl(client *c, int with_flags) {",
          "content_same": false
        },
        {
          "line": 7069,
          "old_api": "serverIsSupervised",
          "new_api": null,
          "old_text": "serverIsSupervised(server.supervised_mode)",
          "new_text": null,
          "old_line_content": "    server.supervised = serverIsSupervised(server.supervised_mode);",
          "new_line_content": "    /* Daemonize if needed */",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": "initGetKeysResult",
          "new_api": null,
          "old_text": "initGetKeysResult(&result)",
          "new_text": null,
          "old_line_content": "    initGetKeysResult(&result);",
          "new_line_content": "    getKeysResult result;",
          "content_same": false
        },
        {
          "line": 7071,
          "old_api": "daemonize",
          "new_api": null,
          "old_text": "daemonize()",
          "new_text": null,
          "old_line_content": "    if (background) daemonize();",
          "new_line_content": "    int background = server.daemonize && !server.supervised;",
          "content_same": false
        },
        {
          "line": 7073,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Invalid command specified\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"Invalid command specified\");",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": "doesCommandHaveKeys",
          "new_api": null,
          "old_text": "doesCommandHaveKeys(cmd)",
          "new_text": null,
          "old_line_content": "    } else if (!doesCommandHaveKeys(cmd)) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7078,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                  \"Warning: no config file specified, using the default config. In order to specify a config file use \"\n                  \"%s /path/to/valkey.conf\",\n                  argv[0])",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (argc == 1) {",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Invalid number of arguments specified for command\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"Invalid number of arguments specified for command\");",
          "new_line_content": "    } else if ((cmd->arity > 0 && cmd->arity != c->argc - 2) || ((c->argc - 2) < -cmd->arity)) {",
          "content_same": false
        },
        {
          "line": 7083,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Configuration loaded\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Configuration loaded\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": "getKeysFromCommandWithSpecs",
          "new_api": null,
          "old_text": "getKeysFromCommandWithSpecs(cmd, c->argv + 2, c->argc - 2, GET_KEYSPEC_DEFAULT, &result)",
          "new_text": null,
          "old_line_content": "    if (!getKeysFromCommandWithSpecs(cmd, c->argv + 2, c->argc - 2, GET_KEYSPEC_DEFAULT, &result)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 0)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, 0);",
          "new_line_content": "        if (cmd->flags & CMD_NO_MANDATORY_KEYS) {",
          "content_same": false
        },
        {
          "line": 7086,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"Invalid arguments specified for command\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c, \"Invalid arguments specified for command\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, result.numkeys)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, result.numkeys);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7092,
          "old_api": "clusterInit",
          "new_api": null,
          "old_text": "clusterInit()",
          "new_text": null,
          "old_line_content": "        clusterInit();",
          "new_line_content": "    if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c, c->argv[result.keys[j].pos + 2])",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c, c->argv[result.keys[j].pos + 2]);",
          "new_line_content": "            if (!with_flags) {",
          "content_same": false
        },
        {
          "line": 7095,
          "old_api": "moduleInitModulesSystemLast",
          "new_api": null,
          "old_text": "moduleInitModulesSystemLast()",
          "new_text": null,
          "old_line_content": "        moduleInitModulesSystemLast();",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c, 2);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 7098,
          "old_api": "ACLLoadUsersAtStartup",
          "new_api": null,
          "old_text": "ACLLoadUsersAtStartup()",
          "new_text": null,
          "old_line_content": "    ACLLoadUsersAtStartup();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7101,
          "old_api": "clusterInitLast",
          "new_api": null,
          "old_text": "clusterInitLast()",
          "new_text": null,
          "old_line_content": "        clusterInitLast();",
          "new_line_content": "    if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": "getKeysFreeResult",
          "new_api": null,
          "old_text": "getKeysFreeResult(&result)",
          "new_text": null,
          "old_line_content": "    getKeysFreeResult(&result);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7103,
          "old_api": "InitServerLast",
          "new_api": null,
          "old_text": "InitServerLast()",
          "new_text": null,
          "old_line_content": "    InitServerLast();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "getKeysSubcommandImpl",
          "new_api": null,
          "old_text": "getKeysSubcommandImpl(c, 1)",
          "new_text": null,
          "old_line_content": "    getKeysSubcommandImpl(c, 1);",
          "new_line_content": "void commandGetKeysAndFlagsCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 7107,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Server initialized\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Server initialized\");",
          "new_line_content": "        /* Things not needed when running in Sentinel mode. */",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "getKeysSubcommandImpl",
          "new_api": null,
          "old_text": "getKeysSubcommandImpl(c, 0)",
          "new_text": null,
          "old_line_content": "    getKeysSubcommandImpl(c, 0);",
          "new_line_content": "void getKeysSubcommand(client *c) {",
          "content_same": false
        },
        {
          "line": 7113,
          "old_api": "verifyClusterConfigWithData",
          "new_api": null,
          "old_text": "verifyClusterConfigWithData()",
          "new_text": null,
          "old_line_content": "            serverAssert(verifyClusterConfigWithData() == C_OK);",
          "new_line_content": "        if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, dictSize(server.commands));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7120,
          "old_api": "get_type",
          "new_api": null,
          "old_text": "listener->ct->get_type(NULL)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE, \"Ready to accept connections %s\", listener->ct->get_type(NULL));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7125,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "new_text": null,
          "old_line_content": "                serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "new_line_content": "            if (!server.primary_host) {",
          "content_same": false
        },
        {
          "line": 7127,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\n                    \"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\")",
          "new_text": null,
          "old_line_content": "                serverCommunicateSystemd(",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c, dictSize(server.commands));",
          "new_line_content": "void commandCountCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 7130,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"READY=1\\n\")",
          "new_text": null,
          "old_line_content": "            serverCommunicateSystemd(\"READY=1\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7133,
          "old_api": "sentinelIsRunning",
          "new_api": null,
          "old_text": "sentinelIsRunning()",
          "new_text": null,
          "old_line_content": "        sentinelIsRunning();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 7135,
          "old_api": "serverCommunicateSystemd",
          "new_api": null,
          "old_text": "serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "new_text": null,
          "old_line_content": "            serverCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "new_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD) {",
          "content_same": false
        },
        {
          "line": 7142,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                  \"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are \"\n                  \"you sure this is what you really want?\",\n                  server.maxmemory)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024 * 1024) {",
          "content_same": false
        },
        {
          "line": 7148,
          "old_api": "serverSetCpuAffinity",
          "new_api": null,
          "old_text": "serverSetCpuAffinity(server.server_cpulist)",
          "new_text": null,
          "old_line_content": "    serverSetCpuAffinity(server.server_cpulist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7151,
          "old_api": "aeMain",
          "new_api": null,
          "old_text": "aeMain(server.el)",
          "new_text": null,
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "moduleGetHandleByName",
          "new_api": null,
          "old_text": "moduleGetHandleByName(filter->arg)",
          "new_text": null,
          "old_line_content": "            filter->cache.u.module_handle = moduleGetHandleByName(filter->arg);",
          "new_line_content": "        if (!filter->cache.valid) {",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": "moduleIsModuleCommand",
          "new_api": null,
          "old_text": "moduleIsModuleCommand(filter->cache.u.module_handle, cmd)",
          "new_text": null,
          "old_line_content": "        return !moduleIsModuleCommand(filter->cache.u.module_handle, cmd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": "ACLGetCommandCategoryFlagByName",
          "new_api": null,
          "old_text": "ACLGetCommandCategoryFlagByName(filter->arg)",
          "new_text": null,
          "old_line_content": "            filter->cache.u.aclcat = ACLGetCommandCategoryFlagByName(filter->arg);",
          "new_line_content": "        if (!filter->cache.valid) {",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "        return !stringmatchlen(filter->arg, sdslen(filter->arg), cmd->fullname, sdslen(cmd->fullname), 1);",
          "new_line_content": "    case (COMMAND_LIST_FILTER_PATTERN):",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "commandListWithFilter",
          "new_api": null,
          "old_text": "commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds)",
          "new_text": null,
          "old_line_content": "            commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds);",
          "new_line_content": "        if (cmd->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": "commandListWithoutFilter",
          "new_api": null,
          "old_text": "commandListWithoutFilter(c, cmd->subcommands_dict, numcmds)",
          "new_text": null,
          "old_line_content": "            commandListWithoutFilter(c, cmd->subcommands_dict, numcmds);",
          "new_line_content": "        if (cmd->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 5160,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"filterby\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt, \"filterby\") && moreargs == 2) {",
          "new_line_content": "        char *opt = c->argv[i]->ptr;",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype, \"module\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(filtertype, \"module\")) {",
          "new_line_content": "            char *filtertype = c->argv[i + 1]->ptr;",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype, \"aclcat\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(filtertype, \"aclcat\")) {",
          "new_line_content": "                filter.type = COMMAND_LIST_FILTER_MODULE;",
          "content_same": false
        },
        {
          "line": 5177,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype, \"pattern\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(filtertype, \"pattern\")) {",
          "new_line_content": "                filter.type = COMMAND_LIST_FILTER_ACLCAT;",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "    void *replylen = addReplyDeferredLen(c);",
          "new_line_content": "    int numcmds = 0;",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": "commandListWithFilter",
          "new_api": null,
          "old_text": "commandListWithFilter(c, server.commands, filter, &numcmds)",
          "new_text": null,
          "old_line_content": "        commandListWithFilter(c, server.commands, filter, &numcmds);",
          "new_line_content": "    if (got_filter) {",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": "commandListWithoutFilter",
          "new_api": null,
          "old_text": "commandListWithoutFilter(c, server.commands, &numcmds)",
          "new_text": null,
          "old_line_content": "        commandListWithoutFilter(c, server.commands, &numcmds);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c, replylen, numcmds)",
          "new_text": null,
          "old_line_content": "    setDeferredArrayLen(c, replylen, numcmds);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5211,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, c->argc - 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, c->argc - 2);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5220,
          "old_api": "lookupCommandBySds",
          "new_api": null,
          "old_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyCommandInfo(c, lookupCommandBySds(c->argv[i]->ptr));",
          "new_line_content": "        for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, dictSize(server.commands));",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "        void *replylen = addReplyDeferredLen(c);",
          "new_line_content": "        int numcmds = 0;",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": "lookupCommandBySds",
          "new_api": null,
          "old_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            struct serverCommand *cmd = lookupCommandBySds(c->argv[i]->ptr);",
          "new_line_content": "        for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "            if (!cmd) continue;",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": "setDeferredMapLen",
          "new_api": null,
          "old_text": "setDeferredMapLen(c, replylen, numcmds)",
          "new_text": null,
          "old_line_content": "        setDeferredMapLen(c, replylen, numcmds);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": "getKeysSubcommand",
          "new_api": null,
          "old_text": "getKeysSubcommand(c)",
          "new_text": null,
          "old_line_content": "    getKeysSubcommand(c);",
          "new_line_content": "void commandGetKeysCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 5283,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "    addReplyHelp(c, help);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 5293,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%lluB\", n)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%lluB\", n);",
          "new_line_content": "        /* Bytes */",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%.2fK\", d)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%.2fK\", d);",
          "new_line_content": "        d = (double)n / (1024);",
          "content_same": false
        },
        {
          "line": 5299,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%.2fM\", d)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%.2fM\", d);",
          "new_line_content": "        d = (double)n / (1024 * 1024);",
          "content_same": false
        },
        {
          "line": 5302,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%.2fG\", d)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%.2fG\", d);",
          "new_line_content": "        d = (double)n / (1024LL * 1024 * 1024);",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%.2fT\", d)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%.2fT\", d);",
          "new_line_content": "        d = (double)n / (1024LL * 1024 * 1024 * 1024);",
          "content_same": false
        },
        {
          "line": 5308,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%.2fP\", d)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%.2fP\", d);",
          "new_line_content": "        d = (double)n / (1024LL * 1024 * 1024 * 1024 * 1024);",
          "content_same": false
        },
        {
          "line": 5311,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s, size, \"%lluB\", n)",
          "new_text": null,
          "old_line_content": "        snprintf(s, size, \"%lluB\", n);",
          "new_line_content": "        /* Let's hope we never need this */",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(info, \"latency_percentiles_usec_%s:\", histogram_name)",
          "new_text": null,
          "old_line_content": "    info = sdscatfmt(info, \"latency_percentiles_usec_%s:\", histogram_name);",
          "new_line_content": "sds fillPercentileDistributionLatencies(sds info, const char *histogram_name, struct hdr_histogram *histogram) {",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j])",
          "new_text": null,
          "old_line_content": "        size_t len = snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j]);",
          "new_line_content": "        char fbuf[128];",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(info, \",\", 1)",
          "new_text": null,
          "old_line_content": "        if (j != server.latency_tracking_info_percentiles_len - 1) info = sdscatlen(info, \",\", 1);",
          "new_line_content": "                                1000.0f);",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(info, \"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5352,
          "old_api": "mempbrk",
          "new_api": null,
          "old_text": "mempbrk(s, len, unsafe_info_chars, sizeof(unsafe_info_chars) - 1)",
          "new_text": null,
          "old_line_content": "    if (mempbrk(s, len, unsafe_info_chars, sizeof(unsafe_info_chars) - 1) == NULL) return s;",
          "new_line_content": "    *tmp = NULL;",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "memmapchars",
          "new_api": null,
          "old_text": "memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs, sizeof(unsafe_info_chars) - 1)",
          "new_text": null,
          "old_line_content": "    return memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs, sizeof(unsafe_info_chars) - 1);",
          "new_line_content": "    new[len] = '\\0';",
          "content_same": false
        },
        {
          "line": 5363,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(commands);",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        c = (struct serverCommand *)dictGetVal(de);",
          "new_line_content": "        char *tmpsafe;",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"\n                                \",rejected_calls=%lld,failed_calls=%lld\\r\\n\",\n                                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls,\n                                c->microseconds, (c->calls == 0) ? 0 : ((float)c->microseconds / c->calls),\n                                c->rejected_calls, c->failed_calls)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "        if (c->calls || c->failed_calls || c->rejected_calls) {",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->fullname)",
          "new_text": null,
          "old_line_content": "                                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls,",
          "new_line_content": "                                \",rejected_calls=%lld,failed_calls=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5374,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(tmpsafe)",
          "new_text": null,
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "                                c->rejected_calls, c->failed_calls);",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "genValkeyInfoStringCommandStats",
          "new_api": null,
          "old_text": "genValkeyInfoStringCommandStats(info, c->subcommands_dict)",
          "new_text": null,
          "old_line_content": "            info = genValkeyInfoStringCommandStats(info, c->subcommands_dict);",
          "new_line_content": "        if (c->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5387,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                        \"acl_access_denied_auth:%lld\\r\\n\"\n                        \"acl_access_denied_cmd:%lld\\r\\n\"\n                        \"acl_access_denied_key:%lld\\r\\n\"\n                        \"acl_access_denied_channel:%lld\\r\\n\",\n                        server.acl_info.user_auth_failures, server.acl_info.invalid_cmd_accesses,\n                        server.acl_info.invalid_key_accesses, server.acl_info.invalid_channel_accesses)",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(info,",
          "new_line_content": "sds genValkeyInfoStringACLStats(sds info) {",
          "content_same": false
        },
        {
          "line": 5401,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(commands);",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        c = (struct serverCommand *)dictGetVal(de);",
          "new_line_content": "        char *tmpsafe;",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": "fillPercentileDistributionLatencies",
          "new_api": null,
          "old_text": "fillPercentileDistributionLatencies(\n                info, getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->latency_histogram)",
          "new_text": null,
          "old_line_content": "            info = fillPercentileDistributionLatencies(",
          "new_line_content": "        if (c->latency_histogram) {",
          "content_same": false
        },
        {
          "line": 5411,
          "old_api": "genValkeyInfoStringLatencyStats",
          "new_api": null,
          "old_text": "genValkeyInfoStringLatencyStats(info, c->subcommands_dict)",
          "new_text": null,
          "old_line_content": "            info = genValkeyInfoStringLatencyStats(info, c->subcommands_dict);",
          "new_line_content": "        if (c->subcommands_dict) {",
          "content_same": false
        },
        {
          "line": 5414,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(*sections)",
          "new_text": null,
          "old_line_content": "        sds section = sdsnew(*sections);",
          "new_line_content": "    while (*sections) {",
          "content_same": false
        },
        {
          "line": 5432,
          "old_api": "dictRelease",
          "new_api": null,
          "old_text": "dictRelease(sec)",
          "new_text": null,
          "old_line_content": "    if (sec != cached_default_info_sections) dictRelease(sec);",
          "new_line_content": "void releaseInfoSectionDict(dict *sec) {",
          "content_same": false
        },
        {
          "line": 5461,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&stringSetDictType)",
          "new_text": null,
          "old_line_content": "        cached_default_info_sections = dictCreate(&stringSetDictType);",
          "new_line_content": "        if (cached_default_info_sections) return cached_default_info_sections;",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&stringSetDictType)",
          "new_text": null,
          "old_line_content": "    dict *section_dict = dictCreate(&stringSetDictType);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5470,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr, \"default\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(argv[i]->ptr, \"default\")) {",
          "new_line_content": "    for (int i = 0; i < argc; i++) {",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr, \"everything\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(argv[i]->ptr, \"everything\")) {",
          "new_line_content": "            if (out_all) *out_all = 1;",
          "content_same": false
        },
        {
          "line": 5478,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            sds section = sdsnew(argv[i]->ptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].blocking_keys)",
          "new_text": null,
          "old_line_content": "        bkeys += dictSize(server.db[j].blocking_keys);",
          "new_line_content": "    for (int j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 5507,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": "sds genValkeyInfoString(dict *section_dict, int all_sections, int everything) {",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"server\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"server\") != NULL)) {",
          "new_line_content": "    /* Server */",
          "content_same": false
        },
        {
          "line": 5538,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "            uname(&name);",
          "new_line_content": "            /* Uname can be slow and is always the same output. Cache it. */",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(\n            info,\n            \"# Server\\r\\n\" FMTARGS(\n                \"redis_version:%s\\r\\n\", REDIS_VERSION,\n                \"server_name:%s\\r\\n\", SERVER_NAME,\n                \"valkey_version:%s\\r\\n\", VALKEY_VERSION,\n                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),\n                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,\n                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),\n                \"%s_mode:\", (server.extended_redis_compat ? \"redis\" : \"server\"),\n                \"%s\\r\\n\", mode,\n                \"os:%s\", name.sysname,\n                \" %s\", name.release,\n                \" %s\\r\\n\", name.machine,\n                \"arch_bits:%i\\r\\n\", server.arch_bits,\n                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n                \"process_id:%I\\r\\n\", (int64_t)getpid(),\n                \"process_supervised:%s\\r\\n\", supervised,\n                \"run_id:%s\\r\\n\", server.runid,\n                \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n                \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n                \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n                \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime / (3600 * 24)),\n                \"hz:%i\\r\\n\", server.hz,\n                \"configured_hz:%i\\r\\n\", server.config_hz,\n                \"lru_clock:%u\\r\\n\", server.lruclock,\n                \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n                \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n                \"io_threads_active:%i\\r\\n\", server.active_io_threads_num > 1,\n                \"availability_zone:%s\\r\\n\", server.availability_zone))",
          "new_text": null,
          "old_line_content": "        info = sdscatfmt(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"redis_version:%s\\r\\n\", REDIS_VERSION,\n                \"server_name:%s\\r\\n\", SERVER_NAME,\n                \"valkey_version:%s\\r\\n\", VALKEY_VERSION,\n                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),\n                \"redis_git_dirty:%i\\r\\n\", strtol(serverGitDirty(), NULL, 10) > 0,\n                \"redis_build_id:%s\\r\\n\", serverBuildIdString(),\n                \"%s_mode:\", (server.extended_redis_compat ? \"redis\" : \"server\"),\n                \"%s\\r\\n\", mode,\n                \"os:%s\", name.sysname,\n                \" %s\", name.release,\n                \" %s\\r\\n\", name.machine,\n                \"arch_bits:%i\\r\\n\", server.arch_bits,\n                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n                \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n                \"process_id:%I\\r\\n\", (int64_t)getpid(),\n                \"process_supervised:%s\\r\\n\", supervised,\n                \"run_id:%s\\r\\n\", server.runid,\n                \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n                \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n                \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n                \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime / (3600 * 24)),\n                \"hz:%i\\r\\n\", server.hz,\n                \"configured_hz:%i\\r\\n\", server.config_hz,\n                \"lru_clock:%u\\r\\n\", server.lruclock,\n                \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n                \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n                \"io_threads_active:%i\\r\\n\", server.active_io_threads_num > 1,\n                \"availability_zone:%s\\r\\n\", server.availability_zone)",
          "new_text": null,
          "old_line_content": "            \"# Server\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 5552,
          "old_api": "serverGitSHA1",
          "new_api": null,
          "old_text": "serverGitSHA1()",
          "new_text": null,
          "old_line_content": "                \"redis_git_sha1:%s\\r\\n\", serverGitSHA1(),",
          "new_line_content": "                \"valkey_version:%s\\r\\n\", VALKEY_VERSION,",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": "monotonicInfoString",
          "new_api": null,
          "old_text": "monotonicInfoString()",
          "new_text": null,
          "old_line_content": "                \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),",
          "new_line_content": "                \"arch_bits:%i\\r\\n\", server.arch_bits,",
          "content_same": false
        },
        {
          "line": 5564,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "                \"process_id:%I\\r\\n\", (int64_t)getpid(),",
          "new_line_content": "                \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": "isShutdownInitiated",
          "new_api": null,
          "old_text": "isShutdownInitiated()",
          "new_text": null,
          "old_line_content": "        if (isShutdownInitiated()) {",
          "new_line_content": "        /* Conditional properties */",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "getListensInfoString",
          "new_api": null,
          "old_text": "getListensInfoString(info)",
          "new_text": null,
          "old_line_content": "        info = getListensInfoString(info);",
          "new_line_content": "        /* get all the listeners information */",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"clients\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"clients\") != NULL)) {",
          "new_line_content": "    /* Clients */",
          "content_same": false
        },
        {
          "line": 5593,
          "old_api": "getExpansiveClientsInfo",
          "new_api": null,
          "old_text": "getExpansiveClientsInfo(&maxin, &maxout)",
          "new_text": null,
          "old_line_content": "        getExpansiveClientsInfo(&maxin, &maxout);",
          "new_line_content": "        unsigned long blocking_keys, blocking_keys_on_nokey, watched_keys;",
          "content_same": false
        },
        {
          "line": 5598,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.replicas),\n                \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n                \"maxclients:%u\\r\\n\", server.maxclients,\n                \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n                \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n                \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n                \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n                \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n                \"watching_clients:%d\\r\\n\", server.watching_clients,\n                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),\n                \"total_watched_keys:%lu\\r\\n\", watched_keys,\n                \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n                \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey)",
          "new_text": null,
          "old_line_content": "            \"# Clients\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(server.clients_timeout_table)",
          "new_text": null,
          "old_line_content": "                \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long)raxSize(server.clients_timeout_table),",
          "new_line_content": "                \"watching_clients:%d\\r\\n\", server.watching_clients,",
          "content_same": false
        },
        {
          "line": 5615,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"memory\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"memory\") != NULL)) {",
          "new_line_content": "    /* Memory */",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "new_line_content": "        char maxmemory_hmem[64];",
          "content_same": false
        },
        {
          "line": 5626,
          "old_api": "evictPolicyToString",
          "new_api": null,
          "old_text": "evictPolicyToString()",
          "new_text": null,
          "old_line_content": "        const char *evict_policy = evictPolicyToString();",
          "new_line_content": "        size_t total_system_mem = server.system_memory_size;",
          "content_same": false
        },
        {
          "line": 5637,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(hmem, sizeof(hmem), zmalloc_used)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(hmem, sizeof(hmem), zmalloc_used);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"used_memory:%zu\\r\\n\", zmalloc_used,\n                \"used_memory_human:%s\\r\\n\", hmem,\n                \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n                \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n                \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n                \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n                \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n                \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n                \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n                \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n                \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n                \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n                \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n                \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n                \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n                \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n                \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n                \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n                \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n                \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n                \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n                \"number_of_functions:%lu\\r\\n\", functionsNum(),\n                \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n                \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n                \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n                \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n                \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n                \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n                \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n                \"maxmemory:%lld\\r\\n\", server.maxmemory,\n                \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n                \"maxmemory_policy:%s\\r\\n\", evict_policy,\n                \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n                \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n                \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n                \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n                \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n                \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n                /* The next field (mem_fragmentation_ratio) is the total RSS\n                 * overhead, including fragmentation, but not just it. This field\n                 * (and the next one) is named like that just for backward\n                 * compatibility. */\n                \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n                \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n                \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n                \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n                \"mem_clients_slaves:%zu\\r\\n\", mh->clients_replicas,\n                \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n                \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n                \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n                \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n                \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n                \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n                \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount())",
          "new_text": null,
          "old_line_content": "            \"# Memory\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": "evalScriptsDict",
          "new_api": null,
          "old_text": "evalScriptsDict()",
          "new_text": null,
          "old_line_content": "                \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),",
          "new_line_content": "                \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,",
          "content_same": false
        },
        {
          "line": 5695,
          "old_api": "freeMemoryGetNotCountedMemory",
          "new_api": null,
          "old_text": "freeMemoryGetNotCountedMemory()",
          "new_text": null,
          "old_line_content": "                \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),",
          "new_line_content": "                \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,",
          "content_same": false
        },
        {
          "line": 5705,
          "old_api": "lazyfreeGetPendingObjectsCount",
          "new_api": null,
          "old_text": "lazyfreeGetPendingObjectsCount()",
          "new_text": null,
          "old_line_content": "                \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),",
          "new_line_content": "                \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"persistence\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"persistence\") != NULL)) {",
          "new_line_content": "    /* Persistence */",
          "content_same": false
        },
        {
          "line": 5719,
          "old_api": "atomic_load_explicit",
          "new_api": null,
          "old_text": "atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "        int aof_bio_fsync_status = atomic_load_explicit(&server.aof_bio_fsync_status, memory_order_relaxed);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5721,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n            info,\n            \"# Persistence\\r\\n\" FMTARGS(\n                \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n                \"async_loading:%d\\r\\n\", (int)server.async_loading,\n                \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n                \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n                \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n                \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n                \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n                \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n                \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n                \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n                \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n                \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),\n                \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n                \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n                \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n                \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n                \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n                \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n                \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),\n                \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ? \"ok\" : \"err\"),\n                \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n                \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n                \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK && aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n                \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n                \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n                \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n                \"async_loading:%d\\r\\n\", (int)server.async_loading,\n                \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n                \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n                \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n                \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n                \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n                \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n                \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n                \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n                \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n                \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),\n                \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n                \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n                \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n                \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n                \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n                \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n                \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),\n                \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ? \"ok\" : \"err\"),\n                \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n                \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n                \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK && aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n                \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n                \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n                \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes)",
          "new_text": null,
          "old_line_content": "            \"# Persistence\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": "elapsedMs",
          "new_api": null,
          "old_text": "elapsedMs(server.stat_current_cow_updated)",
          "new_text": null,
          "old_line_content": "                \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ? (unsigned long)elapsedMs(server.stat_current_cow_updated) / 1000 : 0),",
          "new_line_content": "                \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,",
          "content_same": false
        },
        {
          "line": 5737,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ? -1 : time(NULL) - server.rdb_save_time_start),",
          "new_line_content": "                \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ? -1 : time(NULL) - server.aof_rewrite_time_start),",
          "new_line_content": "                \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"aof_current_size:%lld\\r\\n\", (long long)server.aof_current_size,\n                    \"aof_base_size:%lld\\r\\n\", (long long)server.aof_rewrite_base_size,\n                    \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                    \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(",
          "new_line_content": "        if (server.aof_enabled) {",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                    \"aof_current_size:%lld\\r\\n\", (long long)server.aof_current_size,\n                    \"aof_base_size:%lld\\r\\n\", (long long)server.aof_rewrite_base_size,\n                    \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                    \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                    \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync)",
          "new_text": null,
          "old_line_content": "                FMTARGS(",
          "new_line_content": "                info,",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                    \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),",
          "new_line_content": "                    \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,",
          "content_same": false
        },
        {
          "line": 5783,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            elapsed = time(NULL) - server.loading_start_time;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5791,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"loading_start_time:%jd\\r\\n\", (intmax_t)server.loading_start_time,\n                    \"loading_total_bytes:%llu\\r\\n\", (unsigned long long)server.loading_total_bytes,\n                    \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long)server.loading_rdb_used_mem,\n                    \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long)server.loading_loaded_bytes,\n                    \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                    \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5793,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                    \"loading_start_time:%jd\\r\\n\", (intmax_t)server.loading_start_time,\n                    \"loading_total_bytes:%llu\\r\\n\", (unsigned long long)server.loading_total_bytes,\n                    \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long)server.loading_rdb_used_mem,\n                    \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long)server.loading_loaded_bytes,\n                    \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                    \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta)",
          "new_text": null,
          "old_line_content": "                FMTARGS(",
          "new_line_content": "                info,",
          "content_same": false
        },
        {
          "line": 5804,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"stats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"stats\") != NULL)) {",
          "new_line_content": "    /* Stats */",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": "elapsedUs",
          "new_api": null,
          "old_text": "elapsedUs(server.stat_last_eviction_exceeded_time)",
          "new_text": null,
          "old_line_content": "            server.stat_last_eviction_exceeded_time ? (long long)elapsedUs(server.stat_last_eviction_exceeded_time) : 0;",
          "new_line_content": "        long long current_eviction_exceeded_time =",
          "content_same": false
        },
        {
          "line": 5808,
          "old_api": "elapsedUs",
          "new_api": null,
          "old_text": "elapsedUs(server.stat_last_active_defrag_time)",
          "new_text": null,
          "old_line_content": "            server.stat_last_active_defrag_time ? (long long)elapsedUs(server.stat_last_active_defrag_time) : 0;",
          "new_line_content": "        long long current_active_defrag_time =",
          "content_same": false
        },
        {
          "line": 5810,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info, \"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info, \"\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n                \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n                \"total_net_input_bytes:%lld\\r\\n\", server.stat_net_input_bytes + server.stat_net_repl_input_bytes,\n                \"total_net_output_bytes:%lld\\r\\n\", server.stat_net_output_bytes + server.stat_net_repl_output_bytes,\n                \"total_net_repl_input_bytes:%lld\\r\\n\", server.stat_net_repl_input_bytes,\n                \"total_net_repl_output_bytes:%lld\\r\\n\", server.stat_net_repl_output_bytes,\n                \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT) / 1024,\n                \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT) / 1024,\n                \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION) / 1024,\n                \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION) / 1024,\n                \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n                \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n                \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n                \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n                \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n                \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc * 100,\n                \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n                \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used / 1000,\n                \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n                \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n                \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n                \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n                \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n                \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n                \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n                \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n                \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n                \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n                \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n                \"slave_expires_tracked_keys:%zu\\r\\n\", getReplicaKeyWithExpireCount(),\n                \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n                \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n                \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n                \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n                \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n                \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),\n                \"tracking_total_items:%lld\\r\\n\", (unsigned long long)trackingGetTotalItems(),\n                \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long)trackingGetTotalPrefixes(),\n                \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n                \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n                \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n                \"total_reads_processed:%lld\\r\\n\", server.stat_total_reads_processed,\n                \"total_writes_processed:%lld\\r\\n\", server.stat_total_writes_processed,\n                \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n                \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n                \"io_threaded_freed_objects:%lld\\r\\n\", server.stat_io_freed_objects,\n                \"io_threaded_poll_processed:%lld\\r\\n\", server.stat_poll_processed_by_io_threads,\n                \"io_threaded_total_prefetch_batches:%lld\\r\\n\", server.stat_total_prefetch_batches,\n                \"io_threaded_total_prefetch_entries:%lld\\r\\n\", server.stat_total_prefetch_entries,\n                \"client_query_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_qbuf_limit_disconnections,\n                \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n                \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n                \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n                \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n                \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n                \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n                \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n                \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION))",
          "new_text": null,
          "old_line_content": "            \"# Stats\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 5816,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_COMMAND)",
          "new_text": null,
          "old_line_content": "                \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),",
          "new_line_content": "                \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_NET_INPUT)",
          "new_text": null,
          "old_line_content": "                \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT) / 1024,",
          "new_line_content": "                \"total_net_repl_output_bytes:%lld\\r\\n\", server.stat_net_repl_output_bytes,",
          "content_same": false
        },
        {
          "line": 5840,
          "old_api": "kvstoreSize",
          "new_api": null,
          "old_text": "kvstoreSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "                \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),",
          "new_line_content": "                \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.migrate_cached_sockets)",
          "new_text": null,
          "old_line_content": "                \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),",
          "new_line_content": "                \"total_forks:%lld\\r\\n\", server.stat_total_forks,",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": "trackingGetTotalKeys",
          "new_api": null,
          "old_text": "trackingGetTotalKeys()",
          "new_text": null,
          "old_line_content": "                \"tracking_total_keys:%lld\\r\\n\", (unsigned long long)trackingGetTotalKeys(),",
          "new_line_content": "                \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_EL_CYCLE)",
          "new_text": null,
          "old_line_content": "                \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),",
          "new_line_content": "                \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,",
          "content_same": false
        },
        {
          "line": 5880,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"replication\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"replication\") != NULL)) {",
          "new_line_content": "    /* Replication */",
          "content_same": false
        },
        {
          "line": 5898,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"master_host:%s\\r\\n\", server.primary_host,\n                    \"master_port:%d\\r\\n\", server.primary_port,\n                    \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                    \"master_last_io_seconds_ago:%d\\r\\n\", server.primary ? ((int)(server.unixtime - server.primary->last_interaction)) : -1,\n                    \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                    \"slave_read_repl_offset:%lld\\r\\n\", replica_read_repl_offset,\n                    \"slave_repl_offset:%lld\\r\\n\", replica_repl_offset,\n                    \"replicas_repl_buffer_size:%zu\\r\\n\", server.pending_repl_data.len,\n                    \"replicas_repl_buffer_peak:%zu\\r\\n\", server.pending_repl_data.peak))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5900,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                    \"master_host:%s\\r\\n\", server.primary_host,\n                    \"master_port:%d\\r\\n\", server.primary_port,\n                    \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                    \"master_last_io_seconds_ago:%d\\r\\n\", server.primary ? ((int)(server.unixtime - server.primary->last_interaction)) : -1,\n                    \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                    \"slave_read_repl_offset:%lld\\r\\n\", replica_read_repl_offset,\n                    \"slave_repl_offset:%lld\\r\\n\", replica_repl_offset,\n                    \"replicas_repl_buffer_size:%zu\\r\\n\", server.pending_repl_data.len,\n                    \"replicas_repl_buffer_peak:%zu\\r\\n\", server.pending_repl_data.peak)",
          "new_text": null,
          "old_line_content": "                FMTARGS(",
          "new_line_content": "                info,",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n                    info,\n                    FMTARGS(\n                        \"master_sync_total_bytes:%lld\\r\\n\", (long long)server.repl_transfer_size,\n                        \"master_sync_read_bytes:%lld\\r\\n\", (long long)server.repl_transfer_read,\n                        \"master_sync_left_bytes:%lld\\r\\n\", (long long)(server.repl_transfer_size - server.repl_transfer_read),\n                        \"master_sync_perc:%.2f\\r\\n\", perc,\n                        \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime - server.repl_transfer_lastio)))",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                        \"master_sync_total_bytes:%lld\\r\\n\", (long long)server.repl_transfer_size,\n                        \"master_sync_read_bytes:%lld\\r\\n\", (long long)server.repl_transfer_read,\n                        \"master_sync_left_bytes:%lld\\r\\n\", (long long)(server.repl_transfer_size - server.repl_transfer_read),\n                        \"master_sync_perc:%.2f\\r\\n\", perc,\n                        \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime - server.repl_transfer_lastio))",
          "new_text": null,
          "old_line_content": "                    FMTARGS(",
          "new_line_content": "                    info,",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"master_link_down_since_seconds:%jd\\r\\n\",\n                                    server.repl_down_since ? (intmax_t)(server.unixtime - server.repl_down_since) : -1)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info, \"master_link_down_since_seconds:%jd\\r\\n\",",
          "new_line_content": "            if (server.repl_state != REPL_STATE_CONNECTED) {",
          "content_same": false
        },
        {
          "line": 5930,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n                info,\n                FMTARGS(\n                    \"slave_priority:%d\\r\\n\", server.replica_priority,\n                    \"slave_read_only:%d\\r\\n\", server.repl_replica_ro,\n                    \"replica_announced:%d\\r\\n\", server.replica_announced))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                    \"slave_priority:%d\\r\\n\", server.replica_priority,\n                    \"slave_read_only:%d\\r\\n\", server.repl_replica_ro,\n                    \"replica_announced:%d\\r\\n\", server.replica_announced)",
          "new_text": null,
          "old_line_content": "                FMTARGS(",
          "new_line_content": "                info,",
          "content_same": false
        },
        {
          "line": 5938,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.replicas)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"connected_slaves:%lu\\r\\n\", listLength(server.replicas));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"min_slaves_good_slaves:%d\\r\\n\", server.repl_good_replicas_count)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, \"min_slaves_good_slaves:%d\\r\\n\", server.repl_good_replicas_count);",
          "new_line_content": "        if (server.repl_min_replicas_to_write && server.repl_min_replicas_max_lag) {",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.replicas)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.replicas)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5951,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.replicas, &li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.replicas, &li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": "connAddrPeerName",
          "new_api": null,
          "old_text": "connAddrPeerName(replica->conn, ip, sizeof(ip), &port)",
          "new_text": null,
          "old_line_content": "                    if (connAddrPeerName(replica->conn, ip, sizeof(ip), &port) == -1) continue;",
          "new_line_content": "                if (!replica_ip) {",
          "content_same": false
        },
        {
          "line": 5962,
          "old_api": "replstateToString",
          "new_api": null,
          "old_text": "replstateToString(replica->repl_state)",
          "new_text": null,
          "old_line_content": "                const char *state = replstateToString(replica->repl_state);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                if (replica->repl_state == REPLICA_STATE_ONLINE) lag = time(NULL) - replica->repl_ack_time;",
          "new_line_content": "                if (state[0] == '\\0') continue;",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                                    \"offset=%lld,lag=%ld,type=%s\\r\\n\",\n                                    replica_id, replica_ip, replica->replica_listening_port, state,\n                                    replica->repl_ack_off, lag,\n                                    replica->flag.repl_rdb_channel                     ? \"rdb-channel\"\n                                    : replica->repl_state == REPLICA_STATE_BG_RDB_LOAD ? \"main-channel\"\n                                                                                       : \"replica\")",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[0]->ptr, \"post\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr, \"host:\") || !strcasecmp(c->argv[0]->ptr, \"post\")) {",
          "new_line_content": "     * processing clients, postpone the command. */",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "securityWarningCommand",
          "new_api": null,
          "old_text": "securityWarningCommand(c)",
          "new_text": null,
          "old_line_content": "        securityWarningCommand(c);",
          "new_line_content": "    if (server.busy_module_yield_flags != BUSY_MODULE_YIELD_NONE &&",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "blockPostponeClient",
          "new_api": null,
          "old_text": "blockPostponeClient(c)",
          "new_text": null,
          "old_line_content": "        blockPostponeClient(c);",
          "new_line_content": "     * In case we are reprocessing a command after it was blocked,",
          "content_same": false
        },
        {
          "line": 5977,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(\n            info,\n            FMTARGS(\n                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),\n                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n                \"master_replid:%s\\r\\n\", server.replid,\n                \"master_replid2:%s\\r\\n\", server.replid2,\n                \"master_repl_offset:%lld\\r\\n\", server.primary_repl_offset,\n                \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n                \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n                \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n                \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n                \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"replicas_waiting_psync:%llu\\r\\n\", (unsigned long long)raxSize(server.replicas_waiting_psync),\n                \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n                \"master_replid:%s\\r\\n\", server.replid,\n                \"master_replid2:%s\\r\\n\", server.replid2,\n                \"master_repl_offset:%lld\\r\\n\", server.primary_repl_offset,\n                \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n                \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n                \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n                \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n                \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0)",
          "new_text": null,
          "old_line_content": "            FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv, c->argc)",
          "new_text": null,
          "old_line_content": "        struct serverCommand *cmd = c->io_parsed_cmd ? c->io_parsed_cmd : lookupCommand(c->argv, c->argc);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3941,
          "old_api": "commandCheckExistence",
          "new_api": null,
          "old_text": "commandCheckExistence(c, &err)",
          "new_text": null,
          "old_line_content": "        if (!commandCheckExistence(c, &err)) {",
          "new_line_content": "        sds err;",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": "commandCheckArity",
          "new_api": null,
          "old_text": "commandCheckArity(c->cmd, c->argc, &err)",
          "new_text": null,
          "old_line_content": "        if (!commandCheckArity(c->cmd, c->argc, &err)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"cpu\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"cpu\") != NULL)) {",
          "new_line_content": "    /* CPU */",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": null,
          "old_line_content": "        getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "        struct rusage self_ru, c_ru;",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "allowProtectedAction",
          "new_api": null,
          "old_text": "allowProtectedAction(server.enable_debug_cmd, c)",
          "new_text": null,
          "old_line_content": "            if ((c->cmd->proc == debugCommand && !allowProtectedAction(server.enable_debug_cmd, c)) ||",
          "new_line_content": "        if (c->cmd->flags & CMD_PROTECTED) {",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_THREAD, &m_ru)",
          "new_text": null,
          "old_line_content": "        getrusage(RUSAGE_THREAD, &m_ru);",
          "new_line_content": "        struct rusage m_ru;",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "getCommandFlags",
          "new_api": null,
          "old_text": "getCommandFlags(c)",
          "new_text": null,
          "old_line_content": "    uint64_t cmd_flags = getCommandFlags(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6020,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"module_list\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"module_list\") != NULL) ||",
          "new_line_content": "    /* Modules */",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"commandstats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"commandstats\") != NULL)) {",
          "new_line_content": "    /* Command statistics */",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "mustObeyClient",
          "new_api": null,
          "old_text": "mustObeyClient(c)",
          "new_text": null,
          "old_line_content": "    const int obey_client = mustObeyClient(c);",
          "new_line_content": "                                        (c->cmd->proc == execCommand && (c->mstate.cmd_flags & CMD_NO_ASYNC_LOADING));",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "authRequired",
          "new_api": null,
          "old_text": "authRequired(c)",
          "new_text": null,
          "old_line_content": "    if (authRequired(c)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6035,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"errorstats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"errorstats\") != NULL)) {",
          "new_line_content": "    /* Error statistics */",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.noautherr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.noautherr);",
          "new_line_content": "        if (!(c->cmd->flags & CMD_NO_AUTH)) {",
          "content_same": false
        },
        {
          "line": 6039,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri, server.errors)",
          "new_text": null,
          "old_line_content": "        raxStart(&ri, server.errors);",
          "new_line_content": "        raxIterator ri;",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "        while (raxNext(&ri)) {",
          "new_line_content": "        struct serverError *e;",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"Command not allowed inside a transaction\")",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c, \"Command not allowed inside a transaction\");",
          "new_line_content": "    if (c->flag.multi && c->cmd->flags & CMD_NO_MULTI) {",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"errorstat_%.*s:count=%lld\\r\\n\", (int)ri.key_len,\n                                getSafeInfoString((char *)ri.key, ri.key_len, &tmpsafe), e->count)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, \"errorstat_%.*s:count=%lld\\r\\n\", (int)ri.key_len,",
          "new_line_content": "            e = (struct serverError *)ri.data;",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri)",
          "new_text": null,
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "ACLCheckAllPerm",
          "new_api": null,
          "old_text": "ACLCheckAllPerm(c, &acl_errpos)",
          "new_text": null,
          "old_line_content": "    int acl_retval = ACLCheckAllPerm(c, &acl_errpos);",
          "new_line_content": "    int acl_errpos;",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": "addACLLogEntry",
          "new_api": null,
          "old_text": "addACLLogEntry(c, acl_retval, (c->flag.multi) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL, acl_errpos, NULL,\n                       NULL)",
          "new_text": null,
          "old_line_content": "        addACLLogEntry(c, acl_retval, (c->flag.multi) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL, acl_errpos, NULL,",
          "new_line_content": "    if (acl_retval != ACL_OK) {",
          "content_same": false
        },
        {
          "line": 6053,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"latencystats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"latencystats\") != NULL)) {",
          "new_line_content": "    /* Latency by percentile distribution per command */",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": "getAclErrorMessage",
          "new_api": null,
          "old_text": "getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0)",
          "new_text": null,
          "old_line_content": "        sds msg = getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0);",
          "new_line_content": "                       NULL);",
          "content_same": false
        },
        {
          "line": 6057,
          "old_api": "genValkeyInfoStringLatencyStats",
          "new_api": null,
          "old_text": "genValkeyInfoStringLatencyStats(info, server.commands)",
          "new_text": null,
          "old_line_content": "            info = genValkeyInfoStringLatencyStats(info, server.commands);",
          "new_line_content": "        if (server.latency_tracking_enabled) {",
          "content_same": false
        },
        {
          "line": 6062,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"cluster\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"cluster\") != NULL)) {",
          "new_line_content": "    /* Cluster */",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c, c->cmd, c->argv, c->argc, &c->slot, &error_code)",
          "new_text": null,
          "old_line_content": "        clusterNode *n = getNodeByQuery(c, c->cmd, c->argv, c->argc, &c->slot, &error_code);",
          "new_line_content": "        int error_code;",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "discardTransaction",
          "new_api": null,
          "old_text": "discardTransaction(c)",
          "new_text": null,
          "old_line_content": "                discardTransaction(c);",
          "new_line_content": "            if (c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 6071,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict, \"keyspace\") != NULL)) {",
          "new_line_content": "    /* Key space */",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "                flagTransaction(c);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "clusterRedirectClient",
          "new_api": null,
          "old_text": "clusterRedirectClient(c, n, c->slot, error_code)",
          "new_text": null,
          "old_line_content": "            clusterRedirectClient(c, n, c->slot, error_code);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6077,
          "old_api": "kvstoreSize",
          "new_api": null,
          "old_text": "kvstoreSize(server.db[j].keys)",
          "new_text": null,
          "old_line_content": "            keys = kvstoreSize(server.db[j].keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\", j, keys, vkeys,\n                                    server.db[j].avg_ttl)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\", j, keys, vkeys,",
          "new_line_content": "            if (keys || vkeys) {",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(section_dict)",
          "new_text": null,
          "old_line_content": "    if (everything || dictFind(section_dict, \"modules\") != NULL || sections < (int)dictSize(section_dict) ||",
          "new_line_content": "     * for \"all\" with any additional section names. */",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict, \"debug\")",
          "new_text": null,
          "old_line_content": "    if (dictFind(section_dict, \"debug\") != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n                \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n                \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n                \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max)",
          "new_text": null,
          "old_line_content": "            \"# Debug\\r\\n\" FMTARGS(",
          "new_line_content": "            info,",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": "blockPostponeClient",
          "new_api": null,
          "old_text": "blockPostponeClient(c)",
          "new_text": null,
          "old_line_content": "            blockPostponeClient(c);",
          "new_line_content": "             * and then resume the execution. */",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "discardTransaction",
          "new_api": null,
          "old_text": "discardTransaction(c)",
          "new_text": null,
          "old_line_content": "                discardTransaction(c);",
          "new_line_content": "            if (c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "                flagTransaction(c);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            addReplyErrorSds(c, sdscatprintf(sdsempty(), \"-REDIRECT %s:%d\", server.primary_host, server.primary_port));",
          "new_line_content": "            c->cmd->rejected_calls++;",
          "content_same": false
        },
        {
          "line": 6115,
          "old_api": "sentinelInfoCommand",
          "new_api": null,
          "old_text": "sentinelInfoCommand(c)",
          "new_text": null,
          "old_line_content": "        sentinelInfoCommand(c);",
          "new_line_content": "    if (server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "evictClients",
          "new_api": null,
          "old_text": "evictClients()",
          "new_text": null,
          "old_line_content": "    evictClients();",
          "new_line_content": "     * some client output buffer memory. */",
          "content_same": false
        },
        {
          "line": 6120,
          "old_api": "genInfoSectionDict",
          "new_api": null,
          "old_text": "genInfoSectionDict(c->argv + 1, c->argc - 1, NULL, &all_sections, &everything)",
          "new_text": null,
          "old_line_content": "    dict *sections_dict = genInfoSectionDict(c->argv + 1, c->argc - 1, NULL, &all_sections, &everything);",
          "new_line_content": "    int everything = 0;",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": null,
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": null,
          "old_line_content": "    if (server.maxmemory && !isInsideYieldingLongCommand()) {",
          "new_line_content": "     * propagation of DELs due to eviction. */",
          "content_same": false
        },
        {
          "line": 6133,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\");",
          "new_line_content": "         * expects a reply per command and so can't execute MONITOR. */",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "trackingHandlePendingKeyInvalidations",
          "new_api": null,
          "old_text": "trackingHandlePendingKeyInvalidations()",
          "new_text": null,
          "old_line_content": "        trackingHandlePendingKeyInvalidations();",
          "new_line_content": "         * message belongs to the old value of the key before it gets evicted.*/",
          "content_same": false
        },
        {
          "line": 6142,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors, c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors, c);",
          "new_line_content": "    c->flag.monitor = 1;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 296,
      "total_additions": 529,
      "total_deletions": 529,
      "total_api_changes": 1354
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 1354,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          3937,
          3939,
          3919,
          3922,
          3924,
          3933,
          3934
        ]
      }
    },
    "api_calls_before": 1824,
    "api_calls_after": 1824,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 6,
      "total_diff_lines": 32
    }
  }
}
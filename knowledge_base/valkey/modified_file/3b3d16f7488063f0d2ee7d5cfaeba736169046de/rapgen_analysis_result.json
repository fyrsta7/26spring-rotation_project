{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/3b3d16f7488063f0d2ee7d5cfaeba736169046de",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/3b3d16f7488063f0d2ee7d5cfaeba736169046de/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/3b3d16f7488063f0d2ee7d5cfaeba736169046de/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/valkey/modified_file/3b3d16f7488063f0d2ee7d5cfaeba736169046de/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2667,
          "old_api": "dictCreate",
          "new_api": "kvstoreCreate",
          "old_text": "dictCreate(&objectKeyPointerValueDictType)",
          "new_text": "kvstoreCreate(&dbDictType, slot_count_bits, flags)",
          "old_line_content": "        server.db[j].ready_keys = dictCreate(&objectKeyPointerValueDictType);",
          "new_line_content": "        server.db[j].keys = kvstoreCreate(&dbDictType, slot_count_bits, flags);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "dictCreate",
          "new_api": "kvstoreCreate",
          "old_text": "dictCreate(&keylistDictType)",
          "new_text": "kvstoreCreate(&dbExpiresDictType, slot_count_bits, flags)",
          "old_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType);",
          "new_line_content": "        server.db[j].expires = kvstoreCreate(&dbExpiresDictType, slot_count_bits, flags);",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "listCreate",
          "new_api": "dictCreate",
          "old_text": "listCreate()",
          "new_text": "dictCreate(&objectKeyPointerValueDictType)",
          "old_line_content": "        server.db[j].defrag_later = listCreate();",
          "new_line_content": "        server.db[j].blocking_keys_unblock_on_nokey = dictCreate(&objectKeyPointerValueDictType);",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "listSetFreeMethod",
          "new_api": "dictCreate",
          "old_text": "listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree)",
          "new_text": "dictCreate(&objectKeyPointerValueDictType)",
          "old_line_content": "        listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree);",
          "new_line_content": "        server.db[j].ready_keys = dictCreate(&objectKeyPointerValueDictType);",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "dictCreate",
          "new_api": "evictionPoolAlloc",
          "old_text": "dictCreate(&objToDictDictType)",
          "new_text": "evictionPoolAlloc()",
          "old_line_content": "    server.pubsub_patterns = dictCreate(&objToDictDictType);",
          "new_line_content": "    evictionPoolAlloc(); /* Initialize the LRU keys pool. */",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": "aeCreateFileEvent",
          "new_api": "exit",
          "old_text": "aeCreateFileEvent(server.el, server.module_pipe[0], AE_READABLE,\n        modulePipeReadable,NULL)",
          "new_text": "exit(1)",
          "old_line_content": "    if (aeCreateFileEvent(server.el, server.module_pipe[0], AE_READABLE,",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "scriptingInit",
          "new_api": "serverLog",
          "old_text": "scriptingInit(1)",
          "new_text": "serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "old_line_content": "    scriptingInit(1);",
          "new_line_content": "        serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": "slowlogInit",
          "new_api": "scriptingInit",
          "old_text": "slowlogInit()",
          "new_text": "scriptingInit(1)",
          "old_line_content": "    slowlogInit();",
          "new_line_content": "    scriptingInit(1);",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": "latencyMonitorInit",
          "new_api": "functionsInit",
          "old_text": "latencyMonitorInit()",
          "new_text": "functionsInit()",
          "old_line_content": "    latencyMonitorInit();",
          "new_line_content": "    if (functionsInit() == C_ERR) {",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": "applyWatchdogPeriod",
          "new_api": "latencyMonitorInit",
          "old_text": "applyWatchdogPeriod()",
          "new_text": "latencyMonitorInit()",
          "old_line_content": "    applyWatchdogPeriod();",
          "new_line_content": "    latencyMonitorInit();",
          "content_same": false
        },
        {
          "line": 2786,
          "old_api": "initServerClientMemUsageBuckets",
          "new_api": "ACLUpdateDefaultUserPassword",
          "old_text": "initServerClientMemUsageBuckets()",
          "new_text": "ACLUpdateDefaultUserPassword(server.requirepass)",
          "old_line_content": "        initServerClientMemUsageBuckets();",
          "new_line_content": "    ACLUpdateDefaultUserPassword(server.requirepass);",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "connectionByType",
          "new_api": "serverPanic",
          "old_text": "connectionByType(CONN_TYPE_SOCKET)",
          "new_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_SOCKET)",
          "old_line_content": "        listener->ct = connectionByType(CONN_TYPE_SOCKET);",
          "new_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_SOCKET);",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": "connTypeConfigure",
          "new_api": "connectionTypeTls",
          "old_text": "connTypeConfigure(ct_tls, &server.tls_ctx_config, 1)",
          "new_text": "connectionTypeTls()",
          "old_line_content": "        if (connTypeConfigure(ct_tls, &server.tls_ctx_config, 1) == C_ERR) {",
          "new_line_content": "        ConnectionType *ct_tls = connectionTypeTls();",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Failed finding TLS support.\")",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING, \"Failed finding TLS support.\");",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": "connectionIndexByType",
          "new_api": "exit",
          "old_text": "connectionIndexByType(CONN_TYPE_TLS)",
          "new_text": "exit(1)",
          "old_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_TLS);",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "connectionByType",
          "new_api": "serverPanic",
          "old_text": "connectionByType(CONN_TYPE_TLS)",
          "new_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_TLS)",
          "old_line_content": "        listener->ct = connectionByType(CONN_TYPE_TLS);",
          "new_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_TLS);",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "serverPanic",
          "new_api": "connectionByType",
          "old_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_UNIX)",
          "new_text": "connectionByType(CONN_TYPE_TLS)",
          "old_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_UNIX);",
          "new_line_content": "        listener->ct = connectionByType(CONN_TYPE_TLS);",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": "connAcceptHandler",
          "new_api": "connListen",
          "old_text": "connAcceptHandler(listener->ct)",
          "new_text": "connListen(listener)",
          "old_line_content": "        if (createSocketAcceptHandler(listener, connAcceptHandler(listener->ct)) != C_OK)",
          "new_line_content": "        if (connListen(listener) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": "dictCreate",
          "new_api": "sdsempty",
          "old_text": "dictCreate(&commandTableDictType)",
          "new_text": "sdsempty()",
          "old_line_content": "        parent->subcommands_dict = dictCreate(&commandTableDictType);",
          "new_line_content": "    return sdscatfmt(sdsempty(), \"%s|%s\", parent_name, sub_name);",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "sdsnew",
          "new_api": "dictCreate",
          "old_text": "sdsnew(declared_name)",
          "new_text": "dictCreate(&commandTableDictType)",
          "old_line_content": "    serverAssert(dictAdd(parent->subcommands_dict, sdsnew(declared_name), subcommand) == DICT_OK);",
          "new_line_content": "        parent->subcommands_dict = dictCreate(&commandTableDictType);",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "raxNew",
          "new_api": "dictReleaseIterator",
          "old_text": "raxNew()",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    server.errors = raxNew();",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": "lookupCommandLogic",
          "new_api": "lookupSubcommand",
          "old_text": "lookupCommandLogic(server.commands,argv,argc,0)",
          "new_text": "lookupSubcommand(base_cmd, argv[1]->ptr)",
          "old_line_content": "    return lookupCommandLogic(server.commands,argv,argc,0);",
          "new_line_content": "        return lookupSubcommand(base_cmd, argv[1]->ptr);",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": "sdslen",
          "new_api": "lookupCommandLogic",
          "old_text": "sdslen(s)",
          "new_text": "lookupCommandLogic(server.commands,argv,argc,0)",
          "old_line_content": "    sds *strings = sdssplitlen(s,sdslen(s),\"|\",1,&argc);",
          "new_line_content": "    return lookupCommandLogic(server.commands,argv,argc,0);",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": "sdsfreesplitres",
          "new_api": "sdslen",
          "old_text": "sdsfreesplitres(strings,argc)",
          "new_text": "sdslen(s)",
          "old_line_content": "        sdsfreesplitres(strings,argc);",
          "new_line_content": "    sds *strings = sdssplitlen(s,sdslen(s),\"|\",1,&argc);",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": "sdsfreesplitres",
          "new_api": "initStaticStringObject",
          "old_text": "sdsfreesplitres(strings,argc)",
          "new_text": "initStaticStringObject(objects[j],strings[j])",
          "old_line_content": "    sdsfreesplitres(strings,argc);",
          "new_line_content": "        initStaticStringObject(objects[j],strings[j]);",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": "lookupCommandBySdsLogic",
          "new_api": "sdsfreesplitres",
          "old_text": "lookupCommandBySdsLogic(server.commands,s)",
          "new_text": "sdsfreesplitres(strings,argc)",
          "old_line_content": "    return lookupCommandBySdsLogic(server.commands,s);",
          "new_line_content": "    sdsfreesplitres(strings,argc);",
          "content_same": false
        },
        {
          "line": 3219,
          "old_api": "sdsnew",
          "new_api": "lookupCommandBySdsLogic",
          "old_text": "sdsnew(s)",
          "new_text": "lookupCommandBySdsLogic(server.commands,s)",
          "old_line_content": "    sds name = sdsnew(s);",
          "new_line_content": "    return lookupCommandBySdsLogic(server.commands,s);",
          "content_same": false
        },
        {
          "line": 3227,
          "old_api": "lookupCommandByCStringLogic",
          "new_api": "sdsfree",
          "old_text": "lookupCommandByCStringLogic(server.commands,s)",
          "new_text": "sdsfree(name)",
          "old_line_content": "    return lookupCommandByCStringLogic(server.commands,s);",
          "new_line_content": "    sdsfree(name);",
          "content_same": false
        },
        {
          "line": 3286,
          "old_api": "isPausedActions",
          "new_api": "shouldPropagate",
          "old_text": "isPausedActions(PAUSE_ACTION_REPLICA)",
          "new_text": "shouldPropagate(target)",
          "old_line_content": "    serverAssert(!(isPausedActions(PAUSE_ACTION_REPLICA) &&",
          "new_line_content": "    if (!shouldPropagate(target))",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": "redisOpArrayAppend",
          "new_api": "zmalloc",
          "old_text": "redisOpArrayAppend(&server.also_propagate,dbid,argvcopy,argc,target)",
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "    redisOpArrayAppend(&server.also_propagate,dbid,argvcopy,argc,target);",
          "new_line_content": "    argvcopy = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "serverAssert",
          "new_api": "propagateNow",
          "old_text": "serverAssert(rop->target)",
          "new_text": "propagateNow(-1,&shared.multi,1,PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "        serverAssert(rop->target);",
          "new_line_content": "        propagateNow(-1,&shared.multi,1,PROPAGATE_AOF|PROPAGATE_REPL);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": "exitExecutionUnit",
          "new_api": "proc",
          "old_text": "exitExecutionUnit()",
          "new_text": "c->cmd->proc(c)",
          "old_line_content": "    exitExecutionUnit();",
          "new_line_content": "    c->cmd->proc(c);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "afterCommand",
          "new_api": "zmalloc_used_memory",
          "old_text": "afterCommand(c)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    afterCommand(c);",
          "new_line_content": "    size_t zmalloc_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "flagTransaction",
          "new_api": "addReplyErrorObject",
          "old_text": "flagTransaction(c)",
          "new_text": "addReplyErrorObject(c, reply)",
          "old_line_content": "    flagTransaction(c);",
          "new_line_content": "        addReplyErrorObject(c, reply);",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "sdsfree",
          "new_api": "flagTransaction",
          "old_text": "sdsfree(s)",
          "new_text": "flagTransaction(c)",
          "old_line_content": "        sdsfree(s);",
          "new_line_content": "    flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "sdsmapchars",
          "new_api": "va_start",
          "old_text": "sdsmapchars(s, \"\\r\\n\", \"  \",  2)",
          "new_text": "va_start(ap,fmt)",
          "old_line_content": "    sdsmapchars(s, \"\\r\\n\", \"  \",  2);",
          "new_line_content": "    va_start(ap,fmt);",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": "rejectCommandSds",
          "new_api": "sdsempty",
          "old_text": "rejectCommandSds(c, s)",
          "new_text": "sdsempty()",
          "old_line_content": "    rejectCommandSds(c, s);",
          "new_line_content": "    sds s = sdscatvprintf(sdsempty(),fmt,ap);",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "UNUSED",
          "new_api": "rejectCommandSds",
          "old_text": "UNUSED(c)",
          "new_text": "rejectCommandSds(c, s)",
          "old_line_content": "    UNUSED(c);",
          "new_line_content": "    rejectCommandSds(c, s);",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "listJoin",
          "new_api": "trackingHandlePendingKeyInvalidations",
          "old_text": "listJoin(c->reply, server.pending_push_messages)",
          "new_text": "trackingHandlePendingKeyInvalidations()",
          "old_line_content": "        listJoin(c->reply, server.pending_push_messages);",
          "new_line_content": "    trackingHandlePendingKeyInvalidations();",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": "sdsnew",
          "new_api": "isContainerCommandBySds",
          "old_text": "sdsnew(NULL)",
          "new_text": "isContainerCommandBySds(c->argv[0]->ptr)",
          "old_line_content": "        *err = sdsnew(NULL);",
          "new_line_content": "    if (isContainerCommandBySds(c->argv[0]->ptr)) {",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "sdsfree",
          "new_api": "sdsnew",
          "old_text": "sdsfree(cmd)",
          "new_text": "sdsnew((char *)c->argv[0]->ptr)",
          "old_line_content": "        sdsfree(cmd);",
          "new_line_content": "        sds cmd = sdsnew((char *)c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "sdsempty",
          "new_api": "sdsnew",
          "old_text": "sdsempty()",
          "new_text": "sdsnew(NULL)",
          "old_line_content": "        sds args = sdsempty();",
          "new_line_content": "        *err = sdsnew(NULL);",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": "sdslen",
          "new_api": "sdsfree",
          "old_text": "sdslen(args)",
          "new_text": "sdsfree(cmd)",
          "old_line_content": "            args = sdscatprintf(args, \"'%.*s' \", 128-(int)sdslen(args), (char*)c->argv[i]->ptr);",
          "new_line_content": "        sdsfree(cmd);",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "sdscatprintf",
          "new_api": "sdsempty",
          "old_text": "sdscatprintf(*err, \"unknown command '%.128s', with args beginning with: %s\",\n                            (char*)c->argv[0]->ptr, args)",
          "new_text": "sdsempty()",
          "old_line_content": "        *err = sdscatprintf(*err, \"unknown command '%.128s', with args beginning with: %s\",",
          "new_line_content": "        sds args = sdsempty();",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": "sdsfree",
          "new_api": "sdslen",
          "old_text": "sdsfree(args)",
          "new_text": "sdslen(args)",
          "old_line_content": "        sdsfree(args);",
          "new_line_content": "        for (i=1; i < c->argc && sdslen(args) < 128; i++)",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "serverAssert",
          "new_api": "scriptIsTimedout",
          "old_text": "serverAssert(!server.in_exec)",
          "new_text": "scriptIsTimedout()",
          "old_line_content": "        serverAssert(!server.in_exec);",
          "new_line_content": "    if (!scriptIsTimedout()) {",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "strcasecmp",
          "new_api": "moduleCallCommandFilters",
          "old_text": "strcasecmp(c->argv[0]->ptr,\"post\")",
          "new_text": "moduleCallCommandFilters(c)",
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"host:\") || !strcasecmp(c->argv[0]->ptr,\"post\")) {",
          "new_line_content": "        moduleCallCommandFilters(c);",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "securityWarningCommand",
          "new_api": "reqresAppendRequest",
          "old_text": "securityWarningCommand(c)",
          "new_text": "reqresAppendRequest(c)",
          "old_line_content": "        securityWarningCommand(c);",
          "new_line_content": "        reqresAppendRequest(c);",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": "rejectCommandSds",
          "new_api": "commandCheckExistence",
          "old_text": "rejectCommandSds(c, err)",
          "new_text": "commandCheckExistence(c, &err)",
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "        if (!commandCheckExistence(c, &err)) {",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "sdsfree",
          "new_api": "ACLCheckAllPerm",
          "old_text": "sdsfree(msg)",
          "new_text": "ACLCheckAllPerm(c,&acl_errpos)",
          "old_line_content": "        sdsfree(msg);",
          "new_line_content": "    int acl_retval = ACLCheckAllPerm(c,&acl_errpos);",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "getNodeByQuery",
          "new_api": "mustObeyClient",
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,\n                                        &c->slot,&error_code)",
          "new_text": "mustObeyClient(c)",
          "old_line_content": "        clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,",
          "new_line_content": "        !mustObeyClient(c) &&",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "writeCommandsDeniedByDiskError",
          "new_api": "trackingLimitUsedSlots",
          "old_text": "writeCommandsDeniedByDiskError()",
          "new_text": "trackingLimitUsedSlots()",
          "old_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "new_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": "writeCommandsGetDiskErrorMessage",
          "new_api": "serverLog",
          "old_text": "writeCommandsGetDiskErrorMessage(deny_write_type)",
          "new_text": "serverLog(LL_WARNING, \"Replica is applying a command even though \"\n                                          \"it is unable to write to disk.\")",
          "old_line_content": "            sds err = writeCommandsGetDiskErrorMessage(deny_write_type);",
          "new_line_content": "                    serverLog(LL_WARNING, \"Replica is applying a command even though \"",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "scriptIsEval",
          "new_api": "isInsideYieldingLongCommand",
          "old_text": "scriptIsEval()",
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "        } else if (scriptIsEval()) {",
          "new_line_content": "    if (isInsideYieldingLongCommand() && !(c->cmd->flags & CMD_ALLOW_BUSY)) {",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": "call",
          "new_api": "queueMultiCommand",
          "old_text": "call(c,flags)",
          "new_text": "queueMultiCommand(c, cmd_flags)",
          "old_line_content": "        call(c,flags);",
          "new_line_content": "        queueMultiCommand(c, cmd_flags);",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": "addReply",
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": "addReply(c,shared.queued)",
          "old_line_content": "        if (listLength(server.ready_keys) && !isInsideYieldingLongCommand())",
          "new_line_content": "        addReply(c,shared.queued);",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "listNext",
          "new_api": "listLength",
          "old_text": "listNext(&li)",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "new_line_content": "    if (listLength(server.slaves) == 0) return 1;  /* No replicas. */",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "isShutdownInitiated",
          "new_api": "unpauseActions",
          "old_text": "isShutdownInitiated()",
          "new_text": "unpauseActions(PAUSE_DURING_SHUTDOWN)",
          "old_line_content": "    if (isShutdownInitiated()) {",
          "new_line_content": "    unpauseActions(PAUSE_DURING_SHUTDOWN);",
          "content_same": false
        },
        {
          "line": 4359,
          "old_api": "time",
          "new_api": "listNodeValue",
          "old_text": "time(NULL)",
          "new_text": "listNodeValue(replicas_list_node)",
          "old_line_content": "                time(NULL) - replica->repl_ack_time : 0;",
          "new_line_content": "        client *replica = listNodeValue(replicas_list_node);",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "replstateToString",
          "new_api": "serverLog",
          "old_text": "replstateToString(replica->replstate)",
          "new_text": "serverLog(LL_NOTICE,\n                      \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",\n                      replicationGetSlaveName(replica),\n                      server.master_repl_offset - replica->repl_ack_off,\n                      lag,\n                      replstateToString(replica->replstate))",
          "old_line_content": "                      replstateToString(replica->replstate));",
          "new_line_content": "            serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": "serverLog",
          "new_api": "rdbRemoveTempFile",
          "old_text": "serverLog(LL_WARNING,\"There is a module fork child. Killing it!\")",
          "new_text": "rdbRemoveTempFile(server.child_pid, 0)",
          "old_line_content": "        serverLog(LL_WARNING,\"There is a module fork child. Killing it!\");",
          "new_line_content": "        rdbRemoveTempFile(server.child_pid, 0);",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "flushAppendOnlyFile",
          "new_api": "killAppendOnlyChild",
          "old_text": "flushAppendOnlyFile(1)",
          "new_text": "killAppendOnlyChild()",
          "old_line_content": "        flushAppendOnlyFile(1);",
          "new_line_content": "        killAppendOnlyChild();",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": "serverLog",
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": "serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "        serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": "rdbSave",
          "new_api": "redisCommunicateSystemd",
          "old_text": "rdbSave(SLAVE_REQ_NONE,server.rdb_filename,rsiptr,RDBFLAGS_KEEP_CACHE)",
          "new_text": "redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "old_line_content": "        if (rdbSave(SLAVE_REQ_NONE,server.rdb_filename,rsiptr,RDBFLAGS_KEEP_CACHE) != C_OK) {",
          "new_line_content": "            redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "content_same": false
        },
        {
          "line": 4463,
          "old_api": "unlink",
          "new_api": "moduleFireServerEvent",
          "old_text": "unlink(server.pidfile)",
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL)",
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL);",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "flushSlavesOutputBuffers",
          "new_api": "unlink",
          "old_text": "flushSlavesOutputBuffers()",
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    flushSlavesOutputBuffers();",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "flock",
          "new_api": "closeListeningSockets",
          "old_text": "flock(server.cluster_config_file_lock_fd, LOCK_UN|LOCK_NB)",
          "new_text": "closeListeningSockets(1)",
          "old_line_content": "        flock(server.cluster_config_file_lock_fd, LOCK_UN|LOCK_NB);",
          "new_line_content": "    closeListeningSockets(1);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "serverLog",
          "new_api": "flock",
          "old_text": "serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",\n        server.sentinel_mode ? \"Sentinel\" : \"Redis\")",
          "new_text": "flock(server.cluster_config_file_lock_fd, LOCK_UN|LOCK_NB)",
          "old_line_content": "    serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",",
          "new_line_content": "        flock(server.cluster_config_file_lock_fd, LOCK_UN|LOCK_NB);",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "addReply",
          "new_api": "addReplyErrorArity",
          "old_text": "addReply(c,shared.mbulkhdr[2])",
          "new_text": "addReplyErrorArity(c)",
          "old_line_content": "        addReply(c,shared.mbulkhdr[2]);",
          "new_line_content": "        addReplyErrorArity(c);",
          "content_same": false
        },
        {
          "line": 4553,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": "addReply(c,shared.mbulkhdr[2])",
          "old_line_content": "            addReplyBulk(c,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.mbulkhdr[2]);",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "addReply",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "addReply(c,shared.pong)",
          "new_text": "addReplyBulkCBuffer(c,\"\",0)",
          "old_line_content": "            addReply(c,shared.pong);",
          "new_line_content": "            addReplyBulkCBuffer(c,\"\",0);",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": "addReplyBulkLongLong",
          "new_api": "addReplyBulk",
          "old_text": "addReplyBulkLongLong(c, server.unixtime)",
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "    addReplyBulkLongLong(c, server.unixtime);",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "        addReplyBulkCString(c, \"type\");",
          "new_line_content": "        addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, args[j].key_spec_index)",
          "new_text": "addReplyBulkCString(c, \"display_text\")",
          "old_line_content": "            addReplyLongLong(c, args[j].key_spec_index);",
          "new_line_content": "            addReplyBulkCString(c, \"display_text\");",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "addReplyFlagsForArg",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyFlagsForArg(c, args[j].flags)",
          "new_text": "addReplyBulkCString(c, \"deprecated_since\")",
          "old_line_content": "            addReplyFlagsForArg(c, args[j].flags);",
          "new_line_content": "            addReplyBulkCString(c, \"deprecated_since\");",
          "content_same": false
        },
        {
          "line": 4733,
          "old_api": "addReplyCommandArgList",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandArgList(c, args[j].subargs, args[j].num_args)",
          "new_text": "addReplyBulkCString(c, \"flags\")",
          "old_line_content": "            addReplyCommandArgList(c, args[j].subargs, args[j].num_args);",
          "new_line_content": "            addReplyBulkCString(c, \"flags\");",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "addReplySetLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplySetLen(c, cmd->num_tips)",
          "new_text": "addReplyBulkCString(c, cmd->history[j].changes)",
          "old_line_content": "    addReplySetLen(c, cmd->num_tips);",
          "new_line_content": "        addReplyBulkCString(c, cmd->history[j].changes);",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": "addReplySetLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplySetLen(c, cmd->key_specs_num)",
          "new_text": "addReplyBulkCString(c, cmd->tips[j])",
          "old_line_content": "    addReplySetLen(c, cmd->key_specs_num);",
          "new_line_content": "        addReplyBulkCString(c, cmd->tips[j]);",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "addReplyMapLen",
          "new_api": "addReplySetLen",
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": "addReplySetLen(c, cmd->key_specs_num)",
          "old_line_content": "        addReplyMapLen(c, maplen);",
          "new_line_content": "    addReplySetLen(c, cmd->key_specs_num);",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": "addReplyFlagsForKeyArgs",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyFlagsForKeyArgs(c,cmd->key_specs[i].flags)",
          "new_text": "addReplyBulkCString(c, \"notes\")",
          "old_line_content": "        addReplyFlagsForKeyArgs(c,cmd->key_specs[i].flags);",
          "new_line_content": "            addReplyBulkCString(c, \"notes\");",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyFlagsForKeyArgs",
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": "addReplyFlagsForKeyArgs(c,cmd->key_specs[i].flags)",
          "old_line_content": "                addReplyMapLen(c, 2);",
          "new_line_content": "        addReplyFlagsForKeyArgs(c,cmd->key_specs[i].flags);",
          "content_same": false
        },
        {
          "line": 4819,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"index\")",
          "new_text": "addReplyMapLen(c, 0)",
          "old_line_content": "                addReplyBulkCString(c, \"index\");",
          "new_line_content": "                addReplyMapLen(c, 0);",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].bs.index.pos)",
          "new_text": "addReplyBulkCString(c, \"index\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].bs.index.pos);",
          "new_line_content": "                addReplyBulkCString(c, \"index\");",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"keyword\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].bs.index.pos)",
          "old_line_content": "                addReplyBulkCString(c, \"keyword\");",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].bs.index.pos);",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom);",
          "new_line_content": "                addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "serverPanic",
          "new_api": "addReplyBulkCString",
          "old_text": "serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "new_text": "addReplyBulkCString(c, cmd->key_specs[i].bs.keyword.keyword)",
          "old_line_content": "                serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "new_line_content": "                addReplyBulkCString(c, cmd->key_specs[i].bs.keyword.keyword);",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"range\")",
          "new_text": "addReplyMapLen(c, 0)",
          "old_line_content": "                addReplyBulkCString(c, \"range\");",
          "new_line_content": "                addReplyMapLen(c, 0);",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey)",
          "new_text": "addReplyBulkCString(c, \"range\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey);",
          "new_line_content": "                addReplyBulkCString(c, \"range\");",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep);",
          "new_line_content": "                addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"limit\")",
          "new_text": "addReplyMapLen(c, 3)",
          "old_line_content": "                addReplyBulkCString(c, \"limit\");",
          "new_line_content": "                addReplyMapLen(c, 3);",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.limit)",
          "new_text": "addReplyBulkCString(c, \"lastkey\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.limit);",
          "new_line_content": "                addReplyBulkCString(c, \"lastkey\");",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": "addReplyMapLen",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep)",
          "old_line_content": "                addReplyMapLen(c, 2);",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.keystep);",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyBulkCString(c, \"keynum\")",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.limit)",
          "old_line_content": "                addReplyBulkCString(c, \"keynum\");",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.limit);",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx)",
          "new_text": "addReplyBulkCString(c, \"keynum\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx);",
          "new_line_content": "                addReplyBulkCString(c, \"keynum\");",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey)",
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey);",
          "new_line_content": "                addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCString(c, \"keystep\")",
          "new_text": "addReplyMapLen(c, 3)",
          "old_line_content": "                addReplyBulkCString(c, \"keystep\");",
          "new_line_content": "                addReplyMapLen(c, 3);",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep)",
          "new_text": "addReplyBulkCString(c, \"keynumidx\")",
          "old_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep);",
          "new_line_content": "                addReplyBulkCString(c, \"keynumidx\");",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": "serverPanic",
          "new_api": "addReplyLongLong",
          "old_text": "serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey)",
          "old_line_content": "                serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.firstkey);",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "dictSize",
          "new_api": "addReplySetLen",
          "old_text": "dictSize(cmd->subcommands_dict)",
          "new_text": "addReplySetLen(c, 0)",
          "old_line_content": "        addReplyMapLen(c, dictSize(cmd->subcommands_dict));",
          "new_line_content": "        addReplySetLen(c, 0);",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "dictNext",
          "new_api": "dictSize",
          "old_text": "dictNext(di)",
          "new_text": "dictSize(cmd->subcommands_dict)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        addReplyMapLen(c, dictSize(cmd->subcommands_dict));",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": "reply_function",
          "new_api": "dictGetSafeIterator",
          "old_text": "reply_function(c, sub)",
          "new_text": "dictGetSafeIterator(cmd->subcommands_dict)",
          "old_line_content": "        reply_function(c, sub);",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(cmd->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "dictReleaseIterator",
          "new_api": "dictGetVal",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "        struct redisCommand *sub = (struct redisCommand *)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 4927,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyLongLong(c, lastkey)",
          "new_text": "addReplyArrayLen(c, 10)",
          "old_line_content": "        addReplyLongLong(c, lastkey);",
          "new_line_content": "        addReplyArrayLen(c, 10);",
          "content_same": false
        },
        {
          "line": 4928,
          "old_api": "addReplyLongLong",
          "new_api": "sdslen",
          "old_text": "addReplyLongLong(c, keystep)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "        addReplyLongLong(c, keystep);",
          "new_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "addReplyCommandCategories",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyCommandCategories(c, cmd)",
          "new_text": "addReplyLongLong(c, cmd->arity)",
          "old_line_content": "        addReplyCommandCategories(c, cmd);",
          "new_line_content": "        addReplyLongLong(c, cmd->arity);",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": "addReplyCommandTips",
          "new_api": "addReplyFlagsForCommand",
          "old_text": "addReplyCommandTips(c, cmd)",
          "new_text": "addReplyFlagsForCommand(c, cmd)",
          "old_line_content": "        addReplyCommandTips(c, cmd);",
          "new_line_content": "        addReplyFlagsForCommand(c, cmd);",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": "addReplyCommandKeySpecs",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyCommandKeySpecs(c, cmd)",
          "new_text": "addReplyLongLong(c, firstkey)",
          "old_line_content": "        addReplyCommandKeySpecs(c, cmd);",
          "new_line_content": "        addReplyLongLong(c, firstkey);",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": "addReplyCommandSubCommands",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0)",
          "new_text": "addReplyLongLong(c, lastkey)",
          "old_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0);",
          "new_line_content": "        addReplyLongLong(c, lastkey);",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "commandGroupStr",
          "new_api": "addReplyBulkCString",
          "old_text": "commandGroupStr(cmd->group)",
          "new_text": "addReplyBulkCString(c, cmd->since)",
          "old_line_content": "    addReplyBulkCString(c, commandGroupStr(cmd->group));",
          "new_line_content": "        addReplyBulkCString(c, cmd->since);",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": "moduleNameFromCommand",
          "new_api": "addReplyBulkCString",
          "old_text": "moduleNameFromCommand(cmd)",
          "new_text": "addReplyBulkCString(c, \"complexity\")",
          "old_line_content": "        addReplyBulkCString(c, moduleNameFromCommand(cmd));",
          "new_line_content": "        addReplyBulkCString(c, \"complexity\");",
          "content_same": false
        },
        {
          "line": 4978,
          "old_api": "addReplyDocFlagsForCommand",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyDocFlagsForCommand(c, cmd)",
          "new_text": "addReplyBulkCString(c, \"module\")",
          "old_line_content": "        addReplyDocFlagsForCommand(c, cmd);",
          "new_line_content": "        addReplyBulkCString(c, \"module\");",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": "addReplyCommandHistory",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandHistory(c, cmd)",
          "new_text": "addReplyBulkCString(c, \"replaced_by\")",
          "old_line_content": "        addReplyCommandHistory(c, cmd);",
          "new_line_content": "        addReplyBulkCString(c, \"replaced_by\");",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "addReplyJson",
          "new_api": "addReplyCommandHistory",
          "old_text": "addReplyJson(c, cmd->reply_schema)",
          "new_text": "addReplyCommandHistory(c, cmd)",
          "old_line_content": "        addReplyJson(c, cmd->reply_schema);",
          "new_line_content": "        addReplyCommandHistory(c, cmd);",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": "addReplyCommandArgList",
          "new_api": "addReplyJson",
          "old_text": "addReplyCommandArgList(c, cmd->args, cmd->num_args)",
          "new_text": "addReplyJson(c, cmd->reply_schema)",
          "old_line_content": "        addReplyCommandArgList(c, cmd->args, cmd->num_args);",
          "new_line_content": "        addReplyJson(c, cmd->reply_schema);",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "addReplyCommandSubCommands",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1)",
          "new_text": "addReplyBulkCString(c, \"arguments\")",
          "old_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1);",
          "new_line_content": "        addReplyBulkCString(c, \"arguments\");",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "addReplyError",
          "new_api": "lookupCommand",
          "old_text": "addReplyError(c,\"Invalid command specified\")",
          "new_text": "lookupCommand(c->argv+2,c->argc-2)",
          "old_line_content": "        addReplyError(c,\"Invalid command specified\");",
          "new_line_content": "    struct redisCommand *cmd = lookupCommand(c->argv+2,c->argc-2);",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "getKeysFreeResult",
          "new_api": "addReplyBulk",
          "old_text": "getKeysFreeResult(&result)",
          "new_text": "addReplyBulk(c,c->argv[result.keys[j].pos+2])",
          "old_line_content": "    getKeysFreeResult(&result);",
          "new_line_content": "                addReplyBulk(c,c->argv[result.keys[j].pos+2]);",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": "getKeysSubcommandImpl",
          "new_api": "getKeysFreeResult",
          "old_text": "getKeysSubcommandImpl(c, 1)",
          "new_text": "getKeysFreeResult(&result)",
          "old_line_content": "    getKeysSubcommandImpl(c, 1);",
          "new_line_content": "    getKeysFreeResult(&result);",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "dictReleaseIterator",
          "new_api": "dictSize",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    addReplyArrayLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "dictSize",
          "new_api": "dictReleaseIterator",
          "old_text": "dictSize(server.commands)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    addReplyLongLong(c, dictSize(server.commands));",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5128,
          "old_api": "sdslen",
          "new_api": "dictGetIterator",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "dictGetIterator(commands)",
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": "commandListWithFilter",
          "new_api": "sdslen",
          "old_text": "commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds)",
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "            commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds);",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": "commandListWithoutFilter",
          "new_api": "dictGetVal",
          "old_text": "commandListWithoutFilter(c, cmd->subcommands_dict, numcmds)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            commandListWithoutFilter(c, cmd->subcommands_dict, numcmds);",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": "addReplyErrorObject",
          "new_api": "strcasecmp",
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": "strcasecmp(filtertype,\"aclcat\")",
          "old_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            } else if (!strcasecmp(filtertype,\"aclcat\")) {",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "commandListWithoutFilter",
          "new_api": "addReplyDeferredLen",
          "old_text": "commandListWithoutFilter(c, server.commands, &numcmds)",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "        commandListWithoutFilter(c, server.commands, &numcmds);",
          "new_line_content": "    void *replylen = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": "setDeferredArrayLen",
          "new_api": "commandListWithFilter",
          "old_text": "setDeferredArrayLen(c,replylen,numcmds)",
          "new_text": "commandListWithFilter(c, server.commands, filter, &numcmds)",
          "old_line_content": "    setDeferredArrayLen(c,replylen,numcmds);",
          "new_line_content": "        commandListWithFilter(c, server.commands, filter, &numcmds);",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "dictReleaseIterator",
          "new_api": "dictSize",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "addReplyArrayLen",
          "new_api": "dictNext",
          "old_text": "addReplyArrayLen(c, c->argc-2)",
          "new_text": "dictNext(di)",
          "old_line_content": "        addReplyArrayLen(c, c->argc-2);",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "addReplyCommandDocs",
          "new_api": "dictSize",
          "old_text": "addReplyCommandDocs(c, cmd)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "            addReplyCommandDocs(c, cmd);",
          "new_line_content": "        addReplyMapLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": "dictReleaseIterator",
          "new_api": "dictNext",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictNext(di)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": "sdslen",
          "new_api": "addReplyDeferredLen",
          "old_text": "sdslen(cmd->fullname)",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "        void *replylen = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 5318,
          "old_api": "sdscatprintf",
          "new_api": "sdscatfmt",
          "old_text": "sdscatprintf(info,\"p%s=%.3f\", fbuf,\n            ((double)hdr_value_at_percentile(histogram,server.latency_tracking_info_percentiles[j]))/1000.0f)",
          "new_text": "sdscatfmt(info,\"latency_percentiles_usec_%s:\",histogram_name)",
          "old_line_content": "        info = sdscatprintf(info,\"p%s=%.3f\", fbuf,",
          "new_line_content": "    info = sdscatfmt(info,\"latency_percentiles_usec_%s:\",histogram_name);",
          "content_same": false
        },
        {
          "line": 5321,
          "old_api": "sdscatlen",
          "new_api": "snprintf",
          "old_text": "sdscatlen(info,\",\",1)",
          "new_text": "snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j])",
          "old_line_content": "            info = sdscatlen(info,\",\",1);",
          "new_line_content": "        size_t len = snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j]);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": "memmapchars",
          "new_api": "mempbrk",
          "old_text": "memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs,\n                       sizeof(unsafe_info_chars)-1)",
          "new_text": "mempbrk(s, len, unsafe_info_chars,sizeof(unsafe_info_chars)-1)",
          "old_line_content": "    return memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs,",
          "new_line_content": "    if (mempbrk(s, len, unsafe_info_chars,sizeof(unsafe_info_chars)-1)",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": "sdscatprintf",
          "new_api": "dictGetSafeIterator",
          "old_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"\n                \",rejected_calls=%lld,failed_calls=%lld\\r\\n\",\n                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls),\n                c->rejected_calls, c->failed_calls)",
          "new_text": "dictGetSafeIterator(commands)",
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "    di = dictGetSafeIterator(commands);",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "sdslen",
          "new_api": "dictGetVal",
          "old_text": "sdslen(c->fullname)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls, c->microseconds,",
          "new_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": "fillPercentileDistributionLatencies",
          "new_api": "dictGetSafeIterator",
          "old_text": "fillPercentileDistributionLatencies(info,\n                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe),\n                c->latency_histogram)",
          "new_text": "dictGetSafeIterator(commands)",
          "old_line_content": "            info = fillPercentileDistributionLatencies(info,",
          "new_line_content": "    di = dictGetSafeIterator(commands);",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": "sdslen",
          "new_api": "dictNext",
          "old_text": "sdslen(c->fullname)",
          "new_text": "dictNext(di)",
          "old_line_content": "                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe),",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5412,
          "old_api": "zfree",
          "new_api": "dictGetVal",
          "old_text": "zfree(tmpsafe)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5415,
          "old_api": "genRedisInfoStringLatencyStats",
          "new_api": "sdslen",
          "old_text": "genRedisInfoStringLatencyStats(info, c->subcommands_dict)",
          "new_text": "sdslen(c->fullname)",
          "old_line_content": "            info = genRedisInfoStringLatencyStats(info, c->subcommands_dict);",
          "new_line_content": "                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe),",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": "dictCreate",
          "new_api": "dictExpand",
          "old_text": "dictCreate(&stringSetDictType)",
          "new_text": "dictExpand(cached_default_info_sections, 16)",
          "old_line_content": "    dict *section_dict = dictCreate(&stringSetDictType);",
          "new_line_content": "        dictExpand(cached_default_info_sections, 16);",
          "content_same": false
        },
        {
          "line": 5465,
          "old_api": "min",
          "new_api": "addInfoSectionsToDict",
          "old_text": "min(argc,16)",
          "new_text": "addInfoSectionsToDict(cached_default_info_sections, defaults)",
          "old_line_content": "    dictExpand(section_dict, min(argc,16));",
          "new_line_content": "        addInfoSectionsToDict(cached_default_info_sections, defaults);",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": "strcasecmp",
          "new_api": "dictCreate",
          "old_text": "strcasecmp(argv[i]->ptr,\"all\")",
          "new_text": "dictCreate(&stringSetDictType)",
          "old_line_content": "        } else if (!strcasecmp(argv[i]->ptr,\"all\")) {",
          "new_line_content": "    dict *section_dict = dictCreate(&stringSetDictType);",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": "dictAdd",
          "new_api": "strcasecmp",
          "old_text": "dictAdd(section_dict, section, NULL)",
          "new_text": "strcasecmp(argv[i]->ptr,\"everything\")",
          "old_line_content": "            if (dictAdd(section_dict, section, NULL) != DICT_OK)",
          "new_line_content": "        } else if (!strcasecmp(argv[i]->ptr,\"everything\")) {",
          "content_same": false
        },
        {
          "line": 5584,
          "old_api": "sdscat",
          "new_api": "dictFind",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "dictFind(section_dict,\"clients\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"clients\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5587,
          "old_api": "getClusterConnectionsCount",
          "new_api": "getExpansiveClientsInfo",
          "old_text": "getClusterConnectionsCount()",
          "new_text": "getExpansiveClientsInfo(&maxin,&maxout)",
          "old_line_content": "            \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),",
          "new_line_content": "        getExpansiveClientsInfo(&maxin,&maxout);",
          "content_same": false
        },
        {
          "line": 5616,
          "old_api": "getMemoryOverheadData",
          "new_api": "zmalloc_used_memory",
          "old_text": "getMemoryOverheadData()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        struct redisMemOverhead *mh = getMemoryOverheadData();",
          "new_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 5634,
          "old_api": "sdscat",
          "new_api": "bytesToHuman",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "bytesToHuman(used_memory_vm_total_hmem,sizeof(used_memory_vm_total_hmem),memory_functions + memory_lua)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        bytesToHuman(used_memory_vm_total_hmem,sizeof(used_memory_vm_total_hmem),memory_functions + memory_lua);",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": "FMTARGS",
          "new_api": "bytesToHuman",
          "old_text": "FMTARGS(\n            \"used_memory:%zu\\r\\n\", zmalloc_used,\n            \"used_memory_human:%s\\r\\n\", hmem,\n            \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n            \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n            \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n            \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n            \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n            \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n            \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n            \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n            \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n            \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n            \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n            \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n            \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n            \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n            \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n            \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n            \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n            \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n            \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n            \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n            \"number_of_functions:%lu\\r\\n\", functionsNum(),\n            \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n            \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n            \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n            \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n            \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n            \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n            \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n            \"maxmemory:%lld\\r\\n\", server.maxmemory,\n            \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n            \"maxmemory_policy:%s\\r\\n\", evict_policy,\n            \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n            \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n            \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n            \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n            \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n            \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n            /* The next field (mem_fragmentation_ratio) is the total RSS\n             * overhead, including fragmentation, but not just it. This field\n             * (and the next one) is named like that just for backward\n             * compatibility. */\n            \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n            \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n            \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n            \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n            \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n            \"mem_clients_slaves:%zu\\r\\n\", mh->clients_slaves,\n            \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n            \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n            \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n            \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n            \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n            \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n            \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n            \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount())",
          "new_text": "bytesToHuman(used_memory_scripts_hmem,sizeof(used_memory_scripts_hmem),mh->lua_caches + mh->functions_caches)",
          "old_line_content": "        info = sdscatprintf(info, \"# Memory\\r\\n\" FMTARGS(",
          "new_line_content": "        bytesToHuman(used_memory_scripts_hmem,sizeof(used_memory_scripts_hmem),mh->lua_caches + mh->functions_caches);",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": "dictFind",
          "new_api": "lazyfreeGetFreedObjectsCount",
          "old_text": "dictFind(section_dict,\"persistence\")",
          "new_text": "lazyfreeGetFreedObjectsCount()",
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"persistence\") != NULL)) {",
          "new_line_content": "            \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()));",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": "sdscat",
          "new_api": "freeMemoryOverheadData",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "freeMemoryOverheadData(mh)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        freeMemoryOverheadData(mh);",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": "bioPendingJobsOfType",
          "new_api": "FMTARGS",
          "old_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "new_text": "FMTARGS(\n                \"aof_current_size:%lld\\r\\n\", (long long) server.aof_current_size,\n                \"aof_base_size:%lld\\r\\n\", (long long) server.aof_rewrite_base_size,\n                \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync)",
          "old_line_content": "                \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "new_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": "elapsedUs",
          "new_api": "dictFind",
          "old_text": "elapsedUs(server.stat_last_eviction_exceeded_time)",
          "new_text": "dictFind(section_dict,\"stats\")",
          "old_line_content": "            (long long) elapsedUs(server.stat_last_eviction_exceeded_time): 0;",
          "new_line_content": "    if (all_sections  || (dictFind(section_dict,\"stats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": "atomicGet",
          "new_api": "elapsedUs",
          "old_text": "atomicGet(server.stat_total_writes_processed, stat_total_writes_processed)",
          "new_text": "elapsedUs(server.stat_last_eviction_exceeded_time)",
          "old_line_content": "        atomicGet(server.stat_total_writes_processed, stat_total_writes_processed);",
          "new_line_content": "            (long long) elapsedUs(server.stat_last_eviction_exceeded_time): 0;",
          "content_same": false
        },
        {
          "line": 5802,
          "old_api": "atomicGet",
          "new_api": "elapsedUs",
          "old_text": "atomicGet(server.stat_net_output_bytes, stat_net_output_bytes)",
          "new_text": "elapsedUs(server.stat_last_active_defrag_time)",
          "old_line_content": "        atomicGet(server.stat_net_output_bytes, stat_net_output_bytes);",
          "new_line_content": "            (long long) elapsedUs(server.stat_last_active_defrag_time): 0;",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": "sdscat",
          "new_api": "atomicGet",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "atomicGet(server.stat_net_output_bytes, stat_net_output_bytes)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        atomicGet(server.stat_net_output_bytes, stat_net_output_bytes);",
          "content_same": false
        },
        {
          "line": 5808,
          "old_api": "FMTARGS",
          "new_api": "atomicGet",
          "old_text": "FMTARGS(\n            \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n            \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n            \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n            \"total_net_input_bytes:%lld\\r\\n\", stat_net_input_bytes + stat_net_repl_input_bytes,\n            \"total_net_output_bytes:%lld\\r\\n\", stat_net_output_bytes + stat_net_repl_output_bytes,\n            \"total_net_repl_input_bytes:%lld\\r\\n\", stat_net_repl_input_bytes,\n            \"total_net_repl_output_bytes:%lld\\r\\n\", stat_net_repl_output_bytes,\n            \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,\n            \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,\n            \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)/1024,\n            \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)/1024,\n            \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n            \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n            \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n            \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n            \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n            \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc*100,\n            \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n            \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used/1000,\n            \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n            \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n            \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n            \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n            \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n            \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n            \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n            \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n            \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n            \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n            \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n            \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n            \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n            \"slave_expires_tracked_keys:%zu\\r\\n\", getSlaveKeyWithExpireCount(),\n            \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n            \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n            \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n            \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n            \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n            \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n            \"tracking_total_keys:%lld\\r\\n\", (unsigned long long) trackingGetTotalKeys(),\n            \"tracking_total_items:%lld\\r\\n\", (unsigned long long) trackingGetTotalItems(),\n            \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long) trackingGetTotalPrefixes(),\n            \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n            \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n            \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n            \"total_reads_processed:%lld\\r\\n\", stat_total_reads_processed,\n            \"total_writes_processed:%lld\\r\\n\", stat_total_writes_processed,\n            \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n            \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n            \"client_query_buffer_limit_disconnections:%lld\\r\\n\", stat_client_qbuf_limit_disconnections,\n            \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n            \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n            \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n            \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n            \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n            \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n            \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n            \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION))",
          "new_text": "atomicGet(server.stat_net_repl_input_bytes, stat_net_repl_input_bytes)",
          "old_line_content": "        info = sdscatprintf(info, \"# Stats\\r\\n\" FMTARGS(",
          "new_line_content": "        atomicGet(server.stat_net_repl_input_bytes, stat_net_repl_input_bytes);",
          "content_same": false
        },
        {
          "line": 5840,
          "old_api": "dictSize",
          "new_api": "kvstoreSize",
          "old_text": "dictSize(server.migrate_cached_sockets)",
          "new_text": "kvstoreSize(server.pubsub_channels)",
          "old_line_content": "            \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),",
          "new_line_content": "            \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": "getSlaveKeyWithExpireCount",
          "new_api": "dictSize",
          "old_text": "getSlaveKeyWithExpireCount()",
          "new_text": "dictSize(server.pubsub_patterns)",
          "old_line_content": "            \"slave_expires_tracked_keys:%zu\\r\\n\", getSlaveKeyWithExpireCount(),",
          "new_line_content": "            \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": "dictFind",
          "new_api": "getInstantaneousMetric",
          "old_text": "dictFind(section_dict,\"replication\")",
          "new_text": "getInstantaneousMetric(STATS_METRIC_EL_DURATION)",
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"replication\") != NULL)) {",
          "new_line_content": "            \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION)));",
          "content_same": false
        },
        {
          "line": 5872,
          "old_api": "sdscat",
          "new_api": "genRedisInfoStringACLStats",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "genRedisInfoStringACLStats(info)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        info = genRedisInfoStringACLStats(info);",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": "FMTARGS",
          "new_api": "sdscatprintf",
          "old_text": "FMTARGS(\n                \"slave_priority:%d\\r\\n\", server.slave_priority,\n                \"slave_read_only:%d\\r\\n\", server.repl_slave_ro,\n                \"replica_announced:%d\\r\\n\", server.replica_announced)",
          "new_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    server.repl_down_since ?\n                    (intmax_t)(server.unixtime-server.repl_down_since) : -1)",
          "old_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5936,
          "old_api": "listLength",
          "new_api": "sdscatprintf",
          "old_text": "listLength(server.slaves)",
          "new_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "old_line_content": "        if (listLength(server.slaves)) {",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5941,
          "old_api": "listRewind",
          "new_api": "listLength",
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "        if (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 5958,
          "old_api": "sdscatprintf",
          "new_api": "replstateToString",
          "old_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,slaveip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "new_text": "replstateToString(slave->replstate)",
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "                const char *state = replstateToString(slave->replstate);",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "getrusage",
          "new_api": "dictFind",
          "old_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "new_text": "dictFind(section_dict,\"cpu\")",
          "old_line_content": "        getrusage(RUSAGE_CHILDREN, &c_ru);",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"cpu\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%ld.%06ld\\r\\n\"\n        \"used_cpu_user:%ld.%06ld\\r\\n\"\n        \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n        \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n        (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n        (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec,\n        (long)c_ru.ru_stime.tv_sec, (long)c_ru.ru_stime.tv_usec,\n        (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6014,
          "old_api": "dictFind",
          "new_api": "sdscatprintf",
          "old_text": "dictFind(section_dict,\"commandstats\")",
          "new_text": "sdscatprintf(info,\"# Modules\\r\\n\")",
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"commandstats\") != NULL)) {",
          "new_line_content": "        info = sdscatprintf(info,\"# Modules\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": "sdscat",
          "new_api": "genModulesInfoString",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "genModulesInfoString(info)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        info = genModulesInfoString(info);",
          "content_same": false
        },
        {
          "line": 6021,
          "old_api": "dictFind",
          "new_api": "sdscatprintf",
          "old_text": "dictFind(section_dict,\"errorstats\")",
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"errorstats\") != NULL)) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": "sdscat",
          "new_api": "genRedisInfoStringCommandStats",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "genRedisInfoStringCommandStats(info, server.commands)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        info = genRedisInfoStringCommandStats(info, server.commands);",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": "raxSeek",
          "new_api": "dictFind",
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": "dictFind(section_dict,\"errorstats\")",
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"errorstats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": "raxNext",
          "new_api": "sdscat",
          "old_text": "raxNext(&ri)",
          "new_text": "sdscat(info, \"# Errorstats\\r\\n\")",
          "old_line_content": "        while(raxNext(&ri)) {",
          "new_line_content": "        info = sdscat(info, \"# Errorstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": "sdscatprintf",
          "new_api": "raxSeek",
          "old_text": "sdscatprintf(info,\n                \"errorstat_%.*s:count=%lld\\r\\n\",\n                (int)ri.key_len, getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe), e->count)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 6033,
          "old_api": "getSafeInfoString",
          "new_api": "raxNext",
          "old_text": "getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "                (int)ri.key_len, getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe), e->count);",
          "new_line_content": "        while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "raxStop",
          "new_api": "sdscatprintf",
          "old_text": "raxStop(&ri)",
          "new_text": "sdscatprintf(info,\n                \"errorstat_%.*s:count=%lld\\r\\n\",\n                (int)ri.key_len, getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe), e->count)",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": "sdscat",
          "new_api": "raxStop",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "raxStop(&ri)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": "dictFind",
          "new_api": "genRedisInfoStringLatencyStats",
          "old_text": "dictFind(section_dict,\"cluster\")",
          "new_text": "genRedisInfoStringLatencyStats(info, server.commands)",
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"cluster\") != NULL)) {",
          "new_line_content": "            info = genRedisInfoStringLatencyStats(info, server.commands);",
          "content_same": false
        },
        {
          "line": 6064,
          "old_api": "kvstoreSize",
          "new_api": "sdscat",
          "old_text": "kvstoreSize(server.db[j].keys)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            keys = kvstoreSize(server.db[j].keys);",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6065,
          "old_api": "kvstoreSize",
          "new_api": "sdscatprintf",
          "old_text": "kvstoreSize(server.db[j].expires)",
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "            vkeys = kvstoreSize(server.db[j].expires);",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6084,
          "old_api": "dictFind",
          "new_api": "dictSize",
          "old_text": "dictFind(section_dict, \"modules\")",
          "new_text": "dictSize(section_dict)",
          "old_line_content": "                                  everything || dictFind(section_dict, \"modules\") != NULL ? NULL: section_dict,",
          "new_line_content": "    if (everything || dictFind(section_dict, \"modules\") != NULL || sections < (int)dictSize(section_dict) ||",
          "content_same": false
        },
        {
          "line": 6109,
          "old_api": "genInfoSectionDict",
          "new_api": "sentinelInfoCommand",
          "old_text": "genInfoSectionDict(c->argv+1, c->argc-1, NULL, &all_sections, &everything)",
          "new_text": "sentinelInfoCommand(c)",
          "old_line_content": "    dict *sections_dict = genInfoSectionDict(c->argv+1, c->argc-1, NULL, &all_sections, &everything);",
          "new_line_content": "        sentinelInfoCommand(c);",
          "content_same": false
        },
        {
          "line": 6176,
          "old_api": "THPDisable",
          "new_api": "serverLog",
          "old_text": "THPDisable()",
          "new_text": "serverLog(LL_WARNING,\"WARNING %s\", err_msg)",
          "old_line_content": "        if (THPDisable() == 0) {",
          "new_line_content": "        serverLog(LL_WARNING,\"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 6179,
          "old_api": "serverLog",
          "new_api": "checkTHPEnabled",
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": "checkTHPEnabled(&err_msg)",
          "old_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "    if (checkTHPEnabled(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 6181,
          "old_api": "sdsfree",
          "new_api": "THPDisable",
          "old_text": "sdsfree(err_msg)",
          "new_text": "THPDisable()",
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "        if (THPDisable() == 0) {",
          "content_same": false
        },
        {
          "line": 6194,
          "old_api": "getpid",
          "new_api": "zstrdup",
          "old_text": "getpid()",
          "new_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "old_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "new_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "content_same": false
        },
        {
          "line": 6197,
          "old_api": "strerror",
          "new_api": "fopen",
          "old_text": "strerror(errno)",
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "        serverLog(LL_WARNING, \"Failed to write PID file: %s\", strerror(errno));",
          "new_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 6210,
          "old_api": "open",
          "new_api": "setsid",
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": "setsid()",
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "sdsempty",
          "new_api": "close",
          "old_text": "sdsempty()",
          "new_text": "close(fd)",
          "old_line_content": "    sds version = sdscatprintf(sdsempty(),",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 6231,
          "old_api": "fprintf",
          "new_api": "redisBuildId",
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options] [-]\\n\")",
          "new_text": "redisBuildId()",
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options] [-]\\n\");",
          "new_line_content": "        (unsigned long long) redisBuildId());",
          "content_same": false
        },
        {
          "line": 6248,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"       ./redis-server --port 7777 --replicaof 127.0.0.1 8888\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server --port 7777 --replicaof 127.0.0.1 8888\\n\");",
          "content_same": false
        },
        {
          "line": 6253,
          "old_api": "zmalloc",
          "new_api": "exit",
          "old_text": "zmalloc(1024*16)",
          "new_text": "exit(1)",
          "old_line_content": "    char *buf = zmalloc(1024*16);",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": "snprintf",
          "new_api": "serverLog",
          "old_text": "snprintf(buf,1024*16,ascii_logo,\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (sizeof(long) == 8) ? \"64\" : \"32\",\n            mode, server.port ? server.port : server.tls_port,\n            (long) getpid()\n        )",
          "new_text": "serverLog(LL_NOTICE,\n            \"Running mode=%s, port=%d.\",\n            mode, server.port ? server.port : server.tls_port\n        )",
          "old_line_content": "        snprintf(buf,1024*16,ascii_logo,",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 6282,
          "old_api": "serverLogRaw",
          "new_api": "redisGitDirty",
          "old_text": "serverLogRaw(LL_NOTICE|LL_RAW,buf)",
          "new_text": "redisGitDirty()",
          "old_line_content": "        serverLogRaw(LL_NOTICE|LL_RAW,buf);",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 6310,
          "old_api": "connListen",
          "new_api": "redisSetProcTitle",
          "old_text": "connListen(listener)",
          "new_text": "redisSetProcTitle(NULL)",
          "old_line_content": "    if (connListen(listener) != C_OK) {",
          "new_line_content": "        if (server.set_proc_title) redisSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 6315,
          "old_api": "createSocketAcceptHandler",
          "new_api": "connListen",
          "old_text": "createSocketAcceptHandler(listener, listener->ct->accept_handler)",
          "new_text": "connListen(listener)",
          "old_line_content": "    if (createSocketAcceptHandler(listener, listener->ct->accept_handler) != C_OK) {",
          "new_line_content": "    if (connListen(listener) != C_OK) {",
          "content_same": false
        },
        {
          "line": 6350,
          "old_api": "serverLogRawFromHandler",
          "new_api": "exit",
          "old_text": "serverLogRawFromHandler(LL_WARNING, msg)",
          "new_text": "exit(1)",
          "old_line_content": "    serverLogRawFromHandler(LL_WARNING, msg);",
          "new_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "content_same": false
        },
        {
          "line": 6412,
          "old_api": "openChildInfoPipe",
          "new_api": "hasActiveChildProcess",
          "old_text": "openChildInfoPipe()",
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "        openChildInfoPipe();",
          "new_line_content": "        if (hasActiveChildProcess()) {",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": "fork",
          "new_api": "openChildInfoPipe",
          "old_text": "fork()",
          "new_text": "openChildInfoPipe()",
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "        openChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": "close",
          "new_api": "dismissMemoryInChild",
          "old_text": "close(server.child_info_pipe[0])",
          "new_text": "dismissMemoryInChild()",
          "old_line_content": "            close(server.child_info_pipe[0]);",
          "new_line_content": "        dismissMemoryInChild();",
          "content_same": false
        },
        {
          "line": 6439,
          "old_api": "closeChildInfoPipe",
          "new_api": "close",
          "old_text": "closeChildInfoPipe()",
          "new_text": "close(server.child_info_pipe[0])",
          "old_line_content": "            if (isMutuallyExclusiveChildType(purpose)) closeChildInfoPipe();",
          "new_line_content": "            close(server.child_info_pipe[0]);",
          "content_same": false
        },
        {
          "line": 6511,
          "old_api": "dismissObject",
          "new_api": "dismissMemory",
          "old_text": "dismissObject(c->argv[i], 0)",
          "new_text": "dismissMemory(c->buf, c->buf_usable_size)",
          "old_line_content": "            dismissObject(c->argv[i], 0);",
          "new_line_content": "    dismissMemory(c->buf, c->buf_usable_size);",
          "content_same": false
        },
        {
          "line": 6519,
          "old_api": "listLength",
          "new_api": "dismissMemory",
          "old_text": "listLength(c->reply)",
          "new_text": "dismissMemory(c->argv, c->argc*sizeof(robj*))",
          "old_line_content": "        c->reply_bytes/listLength(c->reply) >= server.page_size)",
          "new_line_content": "    if (c->argc) dismissMemory(c->argv, c->argc*sizeof(robj*));",
          "content_same": false
        },
        {
          "line": 6523,
          "old_api": "listRewind",
          "new_api": "listLength",
          "old_text": "listRewind(c->reply, &li)",
          "new_text": "listLength(c->reply)",
          "old_line_content": "        listRewind(c->reply, &li);",
          "new_line_content": "    if (listLength(c->reply) &&",
          "content_same": false
        },
        {
          "line": 6524,
          "old_api": "listNext",
          "new_api": "listLength",
          "old_text": "listNext(&li)",
          "new_text": "listLength(c->reply)",
          "old_line_content": "        while ((ln = listNext(&li))) {",
          "new_line_content": "        c->reply_bytes/listLength(c->reply) >= server.page_size)",
          "content_same": false
        },
        {
          "line": 6528,
          "old_api": "dismissMemory",
          "new_api": "listRewind",
          "old_text": "dismissMemory(bulk, bulk->size)",
          "new_text": "listRewind(c->reply, &li)",
          "old_line_content": "            if (bulk) dismissMemory(bulk, bulk->size);",
          "new_line_content": "        listRewind(c->reply, &li);",
          "content_same": false
        },
        {
          "line": 6557,
          "old_api": "listRewind",
          "new_api": "listNodeValue",
          "old_text": "listRewind(server.clients, &li)",
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    listRewind(server.clients, &li);",
          "new_line_content": "        replBufBlock *o = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6558,
          "old_api": "listNext",
          "new_api": "dismissMemory",
          "old_text": "listNext(&li)",
          "new_text": "dismissMemory(o, o->size)",
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "        dismissMemory(o, o->size);",
          "content_same": false
        },
        {
          "line": 6599,
          "old_api": "serverLog",
          "new_api": "createReplicationBacklog",
          "old_text": "serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "new_text": "createReplicationBacklog()",
          "old_line_content": "            serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "new_line_content": "            createReplicationBacklog();",
          "content_same": false
        },
        {
          "line": 6617,
          "old_api": "replicationCacheMasterUsingMyself",
          "new_api": "memcpy",
          "old_text": "replicationCacheMasterUsingMyself()",
          "new_text": "memcpy(server.replid,rsi.repl_id,sizeof(server.replid))",
          "old_line_content": "                    replicationCacheMasterUsingMyself();",
          "new_line_content": "                    memcpy(server.replid,rsi.repl_id,sizeof(server.replid));",
          "content_same": false
        },
        {
          "line": 6623,
          "old_api": "memcpy",
          "new_api": "selectDb",
          "old_text": "memcpy(server.replid2,rsi.repl_id,sizeof(server.replid))",
          "new_text": "selectDb(server.cached_master,rsi.repl_stream_db)",
          "old_line_content": "                    memcpy(server.replid2,rsi.repl_id,sizeof(server.replid));",
          "new_line_content": "                    selectDb(server.cached_master,rsi.repl_stream_db);",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": "serverLog",
          "new_api": "rebaseReplicationBuffer",
          "old_text": "serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\")",
          "new_text": "rebaseReplicationBuffer(rsi.repl_offset)",
          "old_line_content": "            serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\");",
          "new_line_content": "                    rebaseReplicationBuffer(rsi.repl_offset);",
          "content_same": false
        },
        {
          "line": 6636,
          "old_api": "exit",
          "new_api": "time",
          "old_text": "exit(1)",
          "new_text": "time(NULL)",
          "old_line_content": "            exit(1);",
          "new_line_content": "                    server.repl_no_slaves_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 6650,
          "old_api": "serverLog",
          "new_api": "freeReplicationBacklog",
          "old_text": "serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "new_text": "freeReplicationBacklog()",
          "old_line_content": "    serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "new_line_content": "            freeReplicationBacklog();",
          "content_same": false
        },
        {
          "line": 6670,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"server-mode\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"server-mode\")) {",
          "new_line_content": "            return sdscatprintf(sdsempty(), \"%s:%u\",",
          "content_same": false
        },
        {
          "line": 6674,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"config-file\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"config-file\")) {",
          "new_line_content": "            return sdscatprintf(sdsempty(), \"unixsocket:%s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 6675,
          "old_api": "sdsnew",
          "new_api": "strcmp",
          "old_text": "sdsnew(server.configfile ? server.configfile : \"-\")",
          "new_text": "strcmp(varname, \"server-mode\")",
          "old_line_content": "        return sdsnew(server.configfile ? server.configfile : \"-\");",
          "new_line_content": "    } else if (!strcmp(varname, \"server-mode\")) {",
          "content_same": false
        },
        {
          "line": 6676,
          "old_api": "strcmp",
          "new_api": "sdsnew",
          "old_text": "strcmp(varname, \"port\")",
          "new_text": "sdsnew(\"[cluster]\")",
          "old_line_content": "    } else if (!strcmp(varname, \"port\")) {",
          "new_line_content": "        if (server.cluster_enabled) return sdsnew(\"[cluster]\");",
          "content_same": false
        },
        {
          "line": 6677,
          "old_api": "sdsempty",
          "new_api": "sdsnew",
          "old_text": "sdsempty()",
          "new_text": "sdsnew(\"[sentinel]\")",
          "old_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.port);",
          "new_line_content": "        else if (server.sentinel_mode) return sdsnew(\"[sentinel]\");",
          "content_same": false
        },
        {
          "line": 6678,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(varname, \"tls-port\")",
          "new_text": "sdsempty()",
          "old_line_content": "    } else if (!strcmp(varname, \"tls-port\")) {",
          "new_line_content": "        else return sdsempty();",
          "content_same": false
        },
        {
          "line": 6679,
          "old_api": "sdsempty",
          "new_api": "strcmp",
          "old_text": "sdsempty()",
          "new_text": "strcmp(varname, \"config-file\")",
          "old_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.tls_port);",
          "new_line_content": "    } else if (!strcmp(varname, \"config-file\")) {",
          "content_same": false
        },
        {
          "line": 6680,
          "old_api": "strcmp",
          "new_api": "sdsnew",
          "old_text": "strcmp(varname, \"unixsocket\")",
          "new_text": "sdsnew(server.configfile ? server.configfile : \"-\")",
          "old_line_content": "    } else if (!strcmp(varname, \"unixsocket\")) {",
          "new_line_content": "        return sdsnew(server.configfile ? server.configfile : \"-\");",
          "content_same": false
        },
        {
          "line": 6681,
          "old_api": "sdsnew",
          "new_api": "strcmp",
          "old_text": "sdsnew(server.unixsocket)",
          "new_text": "strcmp(varname, \"port\")",
          "old_line_content": "        return sdsnew(server.unixsocket);",
          "new_line_content": "    } else if (!strcmp(varname, \"port\")) {",
          "content_same": false
        },
        {
          "line": 6697,
          "old_api": "expandProcTitleTemplate",
          "new_api": "sdstrim",
          "old_text": "expandProcTitleTemplate(template, \"\")",
          "new_text": "sdstrim(res, \" \")",
          "old_line_content": "    sds res = expandProcTitleTemplate(template, \"\");",
          "new_line_content": "    return sdstrim(res, \" \");",
          "content_same": false
        },
        {
          "line": 6737,
          "old_api": "serverLog",
          "new_api": "sd_notify",
          "old_text": "serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret)",
          "new_text": "sd_notify(0, sd_notify_msg)",
          "old_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret);",
          "new_line_content": "    int ret = sd_notify(0, sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 6740,
          "old_api": "UNUSED",
          "new_api": "serverLog",
          "old_text": "UNUSED(sd_notify_msg)",
          "new_text": "serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\")",
          "old_line_content": "    UNUSED(sd_notify_msg);",
          "new_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\");",
          "content_same": false
        },
        {
          "line": 6862,
          "old_api": "strcasecmp",
          "new_api": "monotonicInit",
          "old_text": "strcasecmp(arg, \"--accurate\")",
          "new_text": "monotonicInit()",
          "old_line_content": "            if (!strcasecmp(arg, \"--accurate\")) flags |= REDIS_TEST_ACCURATE;",
          "new_line_content": "    monotonicInit(); /* Required for dict tests, that are relying on monotime during dict rehashing. */",
          "content_same": false
        },
        {
          "line": 6889,
          "old_api": "getTestProcByName",
          "new_api": "printf",
          "old_text": "getTestProcByName(argv[2])",
          "new_text": "printf(\"%d tests, %d passed, %d failed\\n\", numtests,\n                   numtests-failed_num, failed_num)",
          "old_line_content": "            redisTestProc *proc = getTestProcByName(argv[2]);",
          "new_line_content": "            printf(\"%d tests, %d passed, %d failed\\n\", numtests,",
          "content_same": false
        },
        {
          "line": 6907,
          "old_api": "gettimeofday",
          "new_api": "tzset",
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": "tzset()",
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "content_same": false
        },
        {
          "line": 6908,
          "old_api": "getpid",
          "new_api": "zmalloc_set_oom_handler",
          "old_text": "getpid()",
          "new_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "old_line_content": "    srand(time(NULL)^getpid()^tv.tv_usec);",
          "new_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "content_same": false
        },
        {
          "line": 6925,
          "old_api": "checkForSentinelMode",
          "new_api": "getRandomBytes",
          "old_text": "checkForSentinelMode(argc,argv, exec_name)",
          "new_text": "getRandomBytes(hashseed,sizeof(hashseed))",
          "old_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv, exec_name);",
          "new_line_content": "    getRandomBytes(hashseed,sizeof(hashseed));",
          "content_same": false
        },
        {
          "line": 6926,
          "old_api": "initServerConfig",
          "new_api": "dictSetHashFunctionSeed",
          "old_text": "initServerConfig()",
          "new_text": "dictSetHashFunctionSeed(hashseed)",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "content_same": false
        },
        {
          "line": 6930,
          "old_api": "connTypeInitialize",
          "new_api": "checkForSentinelMode",
          "old_text": "connTypeInitialize()",
          "new_text": "checkForSentinelMode(argc,argv, exec_name)",
          "old_line_content": "    connTypeInitialize();",
          "new_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv, exec_name);",
          "content_same": false
        },
        {
          "line": 6934,
          "old_api": "getAbsolutePath",
          "new_api": "moduleInitModulesSystem",
          "old_text": "getAbsolutePath(argv[0])",
          "new_text": "moduleInitModulesSystem()",
          "old_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "new_line_content": "    moduleInitModulesSystem();",
          "content_same": false
        },
        {
          "line": 6935,
          "old_api": "zmalloc",
          "new_api": "connTypeInitialize",
          "old_text": "zmalloc(sizeof(char*)*(argc+1))",
          "new_text": "connTypeInitialize()",
          "old_line_content": "    server.exec_argv = zmalloc(sizeof(char*)*(argc+1));",
          "new_line_content": "    connTypeInitialize();",
          "content_same": false
        },
        {
          "line": 6957,
          "old_api": "sdsempty",
          "new_api": "strstr",
          "old_text": "sdsempty()",
          "new_text": "strstr(exec_name,\"redis-check-aof\")",
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "    else if (strstr(exec_name,\"redis-check-aof\") != NULL)",
          "content_same": false
        },
        {
          "line": 6965,
          "old_api": "sdsfree",
          "new_api": "strcmp",
          "old_text": "sdsfree(version)",
          "new_text": "strcmp(argv[1], \"-v\")",
          "old_line_content": "            sdsfree(version);",
          "new_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "content_same": false
        },
        {
          "line": 6966,
          "old_api": "exit",
          "new_api": "strcmp",
          "old_text": "exit(0)",
          "new_text": "strcmp(argv[1], \"--version\")",
          "old_line_content": "            exit(0);",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0)",
          "content_same": false
        },
        {
          "line": 6968,
          "old_api": "strcmp",
          "new_api": "getVersion",
          "old_text": "strcmp(argv[1], \"--help\")",
          "new_text": "getVersion()",
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "new_line_content": "            sds version = getVersion();",
          "content_same": false
        },
        {
          "line": 6969,
          "old_api": "usage",
          "new_api": "printf",
          "old_text": "usage()",
          "new_text": "printf(\"Redis server %s\\n\", version)",
          "old_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "            printf(\"Redis server %s\\n\", version);",
          "content_same": false
        },
        {
          "line": 6970,
          "old_api": "strcmp",
          "new_api": "sdsfree",
          "old_text": "strcmp(argv[1], \"--test-memory\")",
          "new_text": "sdsfree(version)",
          "old_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "new_line_content": "            sdsfree(version);",
          "content_same": false
        },
        {
          "line": 6973,
          "old_api": "exit",
          "new_api": "strcmp",
          "old_text": "exit(0)",
          "new_text": "strcmp(argv[1], \"--help\")",
          "old_line_content": "                exit(0);",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "content_same": false
        },
        {
          "line": 6975,
          "old_api": "fprintf",
          "new_api": "strcmp",
          "old_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 6977,
          "old_api": "exit",
          "new_api": "atoi",
          "old_text": "exit(1)",
          "new_text": "atoi(argv[2])",
          "old_line_content": "                exit(1);",
          "new_line_content": "                memtest(atoi(argv[2]),50);",
          "content_same": false
        },
        {
          "line": 6980,
          "old_api": "syscheck",
          "new_api": "fprintf",
          "old_text": "syscheck()",
          "new_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "old_line_content": "            exit(syscheck() ? 0 : 1);",
          "new_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "content_same": false
        },
        {
          "line": 7013,
          "old_api": "sdssplitargs",
          "new_api": "sdscat",
          "old_text": "sdssplitargs(argv[j], &argc_tmp)",
          "new_text": "sdscat(options,\"\\n\")",
          "old_line_content": "                argv_tmp = sdssplitargs(argv[j], &argc_tmp);",
          "new_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "content_same": false
        },
        {
          "line": 7053,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(options, \"\")",
          "new_text": "strcasecmp(argv[j], \"--sentinel\")",
          "old_line_content": "                        options = sdscat(options, \"\");",
          "new_line_content": "                    else if ((j == argc-1) && !strcasecmp(argv[j], \"--sentinel\")) {",
          "content_same": false
        },
        {
          "line": 7086,
          "old_api": "checkLinuxMadvFreeForkBug",
          "new_api": "serverLog",
          "old_text": "checkLinuxMadvFreeForkBug(&err_msg)",
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "    if ((ret = checkLinuxMadvFreeForkBug(&err_msg)) <= 0) {",
          "new_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 7091,
          "old_api": "serverLog",
          "new_api": "checkLinuxMadvFreeForkBug",
          "old_text": "serverLog(LL_WARNING, \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"\n                                  \"Your system could be affected, please report this error.\")",
          "new_text": "checkLinuxMadvFreeForkBug(&err_msg)",
          "old_line_content": "            serverLog(LL_WARNING, \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"",
          "new_line_content": "    if ((ret = checkLinuxMadvFreeForkBug(&err_msg)) <= 0) {",
          "content_same": false
        },
        {
          "line": 7093,
          "old_api": "checkIgnoreWarning",
          "new_api": "serverLog",
          "old_text": "checkIgnoreWarning(\"ARM64-COW-BUG\")",
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "        if (!checkIgnoreWarning(\"ARM64-COW-BUG\")) {",
          "new_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 7094,
          "old_api": "serverLog",
          "new_api": "sdsfree",
          "old_text": "serverLog(LL_WARNING,\"Redis will now exit to prevent data corruption. \"\n                                 \"Note that it is possible to suppress this warning by setting the following config: ignore-warnings ARM64-COW-BUG\")",
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "            serverLog(LL_WARNING,\"Redis will now exit to prevent data corruption. \"",
          "new_line_content": "            sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 7096,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"\n                                  \"Your system could be affected, please report this error.\")",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING, \"Failed to test the kernel for a bug that could lead to data corruption during background save. \"",
          "content_same": false
        },
        {
          "line": 7108,
          "old_api": "serverLog",
          "new_api": "redisIsSupervised",
          "old_text": "serverLog(LL_NOTICE,\n        \"Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\",\n            REDIS_VERSION,\n            (sizeof(long) == 8) ? 64 : 32,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (int)getpid())",
          "new_text": "redisIsSupervised(server.supervised_mode)",
          "old_line_content": "    serverLog(LL_NOTICE,",
          "new_line_content": "    server.supervised = redisIsSupervised(server.supervised_mode);",
          "content_same": false
        },
        {
          "line": 7112,
          "old_api": "redisGitSHA1",
          "new_api": "serverLog",
          "old_text": "redisGitSHA1()",
          "new_text": "serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\")",
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "    serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\");",
          "content_same": false
        },
        {
          "line": 7113,
          "old_api": "redisGitDirty",
          "new_api": "serverLog",
          "old_text": "redisGitDirty()",
          "new_text": "serverLog(LL_NOTICE,\n        \"Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\",\n            REDIS_VERSION,\n            (sizeof(long) == 8) ? 64 : 32,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (int)getpid())",
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "    serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 7117,
          "old_api": "serverLog",
          "new_api": "redisGitSHA1",
          "old_text": "serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/redis.conf\", argv[0])",
          "new_text": "redisGitSHA1()",
          "old_line_content": "        serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/redis.conf\", argv[0]);",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 7119,
          "old_api": "serverLog",
          "new_api": "getpid",
          "old_text": "serverLog(LL_NOTICE, \"Configuration loaded\")",
          "new_text": "getpid()",
          "old_line_content": "        serverLog(LL_NOTICE, \"Configuration loaded\");",
          "new_line_content": "            (int)getpid());",
          "content_same": false
        },
        {
          "line": 7122,
          "old_api": "initServer",
          "new_api": "serverLog",
          "old_text": "initServer()",
          "new_text": "serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/redis.conf\", argv[0])",
          "old_line_content": "    initServer();",
          "new_line_content": "        serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/redis.conf\", argv[0]);",
          "content_same": false
        },
        {
          "line": 7124,
          "old_api": "redisSetProcTitle",
          "new_api": "serverLog",
          "old_text": "redisSetProcTitle(NULL)",
          "new_text": "serverLog(LL_NOTICE, \"Configuration loaded\")",
          "old_line_content": "    if (server.set_proc_title) redisSetProcTitle(NULL);",
          "new_line_content": "        serverLog(LL_NOTICE, \"Configuration loaded\");",
          "content_same": false
        },
        {
          "line": 7128,
          "old_api": "clusterInit",
          "new_api": "createPidFile",
          "old_text": "clusterInit()",
          "new_text": "createPidFile()",
          "old_line_content": "        clusterInit();",
          "new_line_content": "    if (background || server.pidfile) createPidFile();",
          "content_same": false
        },
        {
          "line": 7131,
          "old_api": "moduleInitModulesSystemLast",
          "new_api": "checkTcpBacklogSettings",
          "old_text": "moduleInitModulesSystemLast()",
          "new_text": "checkTcpBacklogSettings()",
          "old_line_content": "        moduleInitModulesSystemLast();",
          "new_line_content": "    checkTcpBacklogSettings();",
          "content_same": false
        },
        {
          "line": 7137,
          "old_api": "clusterInitLast",
          "new_api": "moduleLoadFromQueue",
          "old_text": "clusterInitLast()",
          "new_text": "moduleLoadFromQueue()",
          "old_line_content": "        clusterInitLast();",
          "new_line_content": "        moduleLoadFromQueue();",
          "content_same": false
        },
        {
          "line": 7139,
          "old_api": "InitServerLast",
          "new_api": "ACLLoadUsersAtStartup",
          "old_text": "InitServerLast()",
          "new_text": "ACLLoadUsersAtStartup()",
          "old_line_content": "    InitServerLast();",
          "new_line_content": "    ACLLoadUsersAtStartup();",
          "content_same": false
        },
        {
          "line": 7144,
          "old_api": "aofLoadManifestFromDisk",
          "new_api": "InitServerLast",
          "old_text": "aofLoadManifestFromDisk()",
          "new_text": "InitServerLast()",
          "old_line_content": "        aofLoadManifestFromDisk();",
          "new_line_content": "    InitServerLast();",
          "content_same": false
        },
        {
          "line": 7149,
          "old_api": "verifyClusterConfigWithData",
          "new_api": "aofLoadManifestFromDisk",
          "old_text": "verifyClusterConfigWithData()",
          "new_text": "aofLoadManifestFromDisk()",
          "old_line_content": "            serverAssert(verifyClusterConfigWithData() == C_OK);",
          "new_line_content": "        aofLoadManifestFromDisk();",
          "content_same": false
        },
        {
          "line": 7162,
          "old_api": "redisCommunicateSystemd",
          "new_api": "get_type",
          "old_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "new_text": "listener->ct->get_type(NULL)",
          "old_line_content": "                redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "new_line_content": "            serverLog(LL_NOTICE,\"Ready to accept connections %s\", listener->ct->get_type(NULL));",
          "content_same": false
        },
        {
          "line": 7169,
          "old_api": "sentinelIsRunning",
          "new_api": "redisCommunicateSystemd",
          "old_text": "sentinelIsRunning()",
          "new_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\")",
          "old_line_content": "        sentinelIsRunning();",
          "new_line_content": "                redisCommunicateSystemd(\"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4096,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.roslaveerr)",
          "old_line_content": "     * connection is in RESP2 mode. With RESP3 there are no limits. */",
          "new_line_content": "        rejectCommand(c, shared.roslaveerr);",
          "content_same": false
        },
        {
          "line": 6149,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag, warning)",
          "old_line_content": "}",
          "new_line_content": "        if (!strcasecmp(flag, warning))",
          "content_same": false
        },
        {
          "line": 6152,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv,argc)",
          "old_line_content": "#include <sys/prctl.h>",
          "new_line_content": "    sdsfreesplitres(argv,argc);",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n            \"Can't execute '%s': only (P|S)SUBSCRIBE / \"\n            \"(P|S)UNSUBSCRIBE / PING / QUIT / RESET are allowed in this context\",\n            c->cmd->fullname)",
          "old_line_content": "    }",
          "new_line_content": "        rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 6167,
          "old_api": null,
          "new_api": "prctl",
          "old_text": null,
          "new_text": "prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0)",
          "old_line_content": "",
          "new_line_content": "    ret = prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0);",
          "content_same": false
        },
        {
          "line": 4126,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.masterdownerr)",
          "old_line_content": "     * CMD_LOADING flag. */",
          "new_line_content": "        rejectCommand(c, shared.masterdownerr);",
          "content_same": false
        },
        {
          "line": 6175,
          "old_api": null,
          "new_api": "checkOvercommit",
          "old_text": null,
          "new_text": "checkOvercommit(&err_msg)",
          "old_line_content": "        server.thp_enabled = 1;",
          "new_line_content": "    if (checkOvercommit(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 6177,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "            server.thp_enabled = 0;",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.loadingerr)",
          "old_line_content": "    if (server.async_loading && is_deny_async_loading_command) {",
          "new_line_content": "        rejectCommand(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 6184,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "old_line_content": "#endif /* __linux__ */",
          "new_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "content_same": false
        },
        {
          "line": 6186,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "void createPidFile(void) {",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c,shared.loadingerr)",
          "old_line_content": "     * Only allow a limited number of commands.",
          "new_line_content": "        rejectCommand(c,shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 6199,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "}",
          "new_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply)",
          "old_line_content": "        } else {",
          "new_line_content": "            rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply);",
          "content_same": false
        },
        {
          "line": 6200,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4154,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowmoduleerr)",
          "old_line_content": "        }",
          "new_line_content": "            rejectCommand(c, shared.slowmoduleerr);",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": null,
          "new_api": "scriptIsEval",
          "old_text": null,
          "new_text": "scriptIsEval()",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        } else if (scriptIsEval()) {",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowevalerr)",
          "old_line_content": "    }",
          "new_line_content": "            rejectCommand(c, shared.slowevalerr);",
          "content_same": false
        },
        {
          "line": 6202,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    int fd;",
          "new_line_content": "        serverLog(LL_WARNING, \"Failed to write PID file: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowscripterr)",
          "old_line_content": "    /* Prevent a replica from sending commands that access the keyspace.",
          "new_line_content": "            rejectCommand(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 6209,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "     * it will not log at all. */",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"Replica can't interact with the keyspace\")",
          "old_line_content": "     * the pause has ended. Replicas are never paused. */",
          "new_line_content": "        rejectCommandFormat(c, \"Replica can't interact with the keyspace\");",
          "content_same": false
        },
        {
          "line": 6215,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "    }",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 6216,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDIN_FILENO)",
          "old_line_content": "}",
          "new_line_content": "        dup2(fd, STDIN_FILENO);",
          "content_same": false
        },
        {
          "line": 6217,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 6218,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "sds getVersion(void) {",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": null,
          "new_api": "isPausedActions",
          "old_text": null,
          "new_text": "isPausedActions(PAUSE_ACTION_CLIENT_ALL)",
          "old_line_content": "    }",
          "new_line_content": "        ((isPausedActions(PAUSE_ACTION_CLIENT_ALL)) ||",
          "content_same": false
        },
        {
          "line": 4175,
          "old_api": null,
          "new_api": "isPausedActions",
          "old_text": null,
          "new_text": "isPausedActions(PAUSE_ACTION_CLIENT_WRITE)",
          "old_line_content": "",
          "new_line_content": "        ((isPausedActions(PAUSE_ACTION_CLIENT_WRITE)) && is_may_replicate_command)))",
          "content_same": false
        },
        {
          "line": 6224,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        ZMALLOC_LIB,",
          "new_line_content": "    sds version = sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": null,
          "new_api": "blockPostponeClient",
          "old_text": null,
          "new_text": "blockPostponeClient(c)",
          "old_line_content": "    if (c->flags & CLIENT_MULTI &&",
          "new_line_content": "        blockPostponeClient(c);",
          "content_same": false
        },
        {
          "line": 6227,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "    return version;",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 6228,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "}",
          "new_line_content": "        atoi(redisGitDirty()) > 0,",
          "content_same": false
        },
        {
          "line": 4195,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,flags)",
          "old_line_content": "}",
          "new_line_content": "        call(c,flags);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "isInsideYieldingLongCommand",
          "old_text": null,
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "",
          "new_line_content": "        if (listLength(server.ready_keys) && !isInsideYieldingLongCommand())",
          "content_same": false
        },
        {
          "line": 4197,
          "old_api": null,
          "new_api": "handleClientsBlockedOnKeys",
          "old_text": null,
          "new_text": "handleClientsBlockedOnKeys()",
          "old_line_content": "/* ====================== Error lookup and execution ===================== */",
          "new_line_content": "            handleClientsBlockedOnKeys();",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose -\\n\")",
          "old_line_content": "}",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose -\\n\");",
          "content_same": false
        },
        {
          "line": 6250,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\\n\")",
          "old_line_content": "",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\\n\");",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Sentinel mode:\\n\")",
          "old_line_content": "void redisAsciiArt(void) {",
          "new_line_content": "    fprintf(stderr,\"Sentinel mode:\\n\");",
          "content_same": false
        },
        {
          "line": 6252,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\")",
          "old_line_content": "#include \"asciilogo.h\"",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\");",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(server.errors,(unsigned char*)fullerr,namelen,&result)",
          "old_line_content": "        struct redisError *error = result;",
          "new_line_content": "    if (!raxFind(server.errors,(unsigned char*)fullerr,namelen,&result)) {",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*error))",
          "old_line_content": "        error->count++;",
          "new_line_content": "        struct redisError *error = zmalloc(sizeof(*error));",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(server.errors,(unsigned char*)fullerr,namelen,error,NULL)",
          "old_line_content": "}",
          "new_line_content": "        raxInsert(server.errors,(unsigned char*)fullerr,namelen,error,NULL);",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(1024*16)",
          "old_line_content": "    else mode = \"standalone\";",
          "new_line_content": "    char *buf = zmalloc(1024*16);",
          "content_same": false
        },
        {
          "line": 6270,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(stdout)",
          "old_line_content": "            \"Running mode=%s, port=%d.\",",
          "new_line_content": "                      isatty(fileno(stdout))) ||",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(listener->fd[j])",
          "old_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "new_line_content": "        for (j = 0; j < listener->count; j++) close(listener->fd[j]);",
          "content_same": false
        },
        {
          "line": 6279,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,1024*16,ascii_logo,\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (sizeof(long) == 8) ? \"64\" : \"32\",\n            mode, server.port ? server.port : server.tls_port,\n            (long) getpid()\n        )",
          "old_line_content": "            mode, server.port ? server.port : server.tls_port,",
          "new_line_content": "        snprintf(buf,1024*16,ascii_logo,",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.clistener.fd[j])",
          "old_line_content": "    }",
          "new_line_content": "        for (j = 0; j < server.clistener.count; j++) close(server.clistener.fd[j]);",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "        );",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 4234,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Removing the unix socket file.\")",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_NOTICE,\"Removing the unix socket file.\");",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "/* Prepare for shutting down the server. Flags:",
          "new_line_content": "        if (unlink(server.unixsocket) != 0)",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": " *",
          "new_line_content": "            serverLog(LL_WARNING,\"Error removing the unix socket file: %s\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 6285,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "}",
          "new_line_content": "            (long) getpid()",
          "content_same": false
        },
        {
          "line": 6287,
          "old_api": null,
          "new_api": "serverLogRaw",
          "old_text": null,
          "new_text": "serverLogRaw(LL_NOTICE|LL_RAW,buf)",
          "old_line_content": "/* Get the server listener by type name */",
          "new_line_content": "        serverLogRaw(LL_NOTICE|LL_RAW,buf);",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(buf)",
          "old_line_content": "    int conn_index;",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": null,
          "new_api": "connectionIndexByType",
          "old_text": null,
          "new_text": "connectionIndexByType(typename)",
          "old_line_content": "}",
          "new_line_content": "    conn_index = connectionIndexByType(typename);",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": null,
          "new_api": "closeListener",
          "old_text": null,
          "new_text": "closeListener(listener)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "    closeListener(listener);",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": null,
          "new_api": "isShutdownInitiated",
          "old_text": null,
          "new_text": "isShutdownInitiated()",
          "old_line_content": "     * with half-read data).",
          "new_line_content": "    if (isShutdownInitiated()) return C_ERR;",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": null,
          "new_api": "createSocketAcceptHandler",
          "old_text": null,
          "new_text": "createSocketAcceptHandler(listener, listener->ct->accept_handler)",
          "old_line_content": "",
          "new_line_content": "    if (createSocketAcceptHandler(listener, listener->ct->accept_handler) != C_OK) {",
          "content_same": false
        },
        {
          "line": 6321,
          "old_api": null,
          "new_api": "get_type",
          "old_text": null,
          "new_text": "listener->ct->get_type(NULL)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "        serverPanic(\"Unrecoverable error creating %s accept handler.\", listener->ct->get_type(NULL));",
          "content_same": false
        },
        {
          "line": 6324,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(NULL)",
          "old_line_content": "static void sigShutdownHandler(int sig) {",
          "new_line_content": "    if (server.set_proc_title) redisSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"User requested shutdown...\")",
          "old_line_content": "     * we shut down, to avoid data loss. */",
          "new_line_content": "    serverLog(LL_NOTICE,\"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STOPPING=1\\n\")",
          "old_line_content": "        server.shutdown_timeout != 0 &&",
          "new_line_content": "        redisCommunicateSystemd(\"STOPPING=1\\n\");",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": null,
          "new_api": "isReadyToShutdown",
          "old_text": null,
          "new_text": "isReadyToShutdown()",
          "old_line_content": "                      LLONG_MAX,",
          "new_line_content": "        !isReadyToShutdown())",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": null,
          "new_api": "sendGetackToReplicas",
          "old_text": null,
          "new_text": "sendGetackToReplicas()",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        if (!isPausedActions(PAUSE_ACTION_REPLICA)) sendGetackToReplicas();",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": null,
          "new_api": "pauseActions",
          "old_text": null,
          "new_text": "pauseActions(PAUSE_DURING_SHUTDOWN,\n                      LLONG_MAX,\n                     PAUSE_ACTIONS_CLIENT_WRITE_SET)",
          "old_line_content": "    }",
          "new_line_content": "        pauseActions(PAUSE_DURING_SHUTDOWN,",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\")",
          "old_line_content": "}",
          "new_line_content": "        serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\");",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": null,
          "new_api": "finishShutdown",
          "old_text": null,
          "new_text": "finishShutdown()",
          "old_line_content": "}",
          "new_line_content": "    return finishShutdown();",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": null,
          "new_api": "serverLogRawFromHandler",
          "old_text": null,
          "new_text": "serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "        rdbRemoveTempFile(getpid(), 1);",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": null,
          "new_api": "serverLogRawFromHandler",
          "old_text": null,
          "new_text": "serverLogRawFromHandler(LL_WARNING, msg)",
          "old_line_content": "void setupSignalHandlers(void) {",
          "new_line_content": "    serverLogRawFromHandler(LL_WARNING, msg);",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves, &li)",
          "old_line_content": "    return 1;",
          "new_line_content": "    listRewind(server.slaves, &li);",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "}",
          "new_line_content": "    while ((ln = listNext(&li)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "",
          "new_line_content": "        client *replica = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6363,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 6366,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGTERM, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "content_same": false
        },
        {
          "line": 6367,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGINT, &act, NULL)",
          "old_line_content": "/* This is the signal handler for children process. It is currently useful",
          "new_line_content": "    sigaction(SIGINT, &act, NULL);",
          "content_same": false
        },
        {
          "line": 6369,
          "old_api": null,
          "new_api": "setupDebugSigHandlers",
          "old_text": null,
          "new_text": "setupDebugSigHandlers()",
          "old_line_content": " * it in a clean way, without the parent detecting an error and stop",
          "new_line_content": "    setupDebugSigHandlers();",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": null,
          "new_api": "replyToClientsBlockedOnShutdown",
          "old_text": null,
          "new_text": "replyToClientsBlockedOnShutdown()",
          "old_line_content": "int abortShutdown(void) {",
          "new_line_content": "    replyToClientsBlockedOnShutdown();",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(sig)",
          "old_line_content": "",
          "new_line_content": "    UNUSED(sig);",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "isShutdownInitiated",
          "old_text": null,
          "new_text": "isShutdownInitiated()",
          "old_line_content": "        server.shutdown_asap = 0;",
          "new_line_content": "    if (isShutdownInitiated()) {",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": null,
          "new_api": "cancelShutdown",
          "old_text": null,
          "new_text": "cancelShutdown()",
          "old_line_content": "    } else {",
          "new_line_content": "        cancelShutdown();",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": null,
          "new_api": "serverLogRawFromHandler",
          "old_text": null,
          "new_text": "serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\")",
          "old_line_content": "    struct sigaction act;",
          "new_line_content": "    serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\");",
          "content_same": false
        },
        {
          "line": 6380,
          "old_api": null,
          "new_api": "exitFromChild",
          "old_text": null,
          "new_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "old_line_content": "",
          "new_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"Shutdown manually aborted.\")",
          "old_line_content": " * sequence was successful and it's OK to call exit(). If C_ERR is returned,",
          "new_line_content": "    serverLog(LL_NOTICE, \"Shutdown manually aborted.\");",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 6391,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGUSR1, &act, NULL)",
          "old_line_content": " * should close the resources not used by the child process, so that if the",
          "new_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "content_same": false
        },
        {
          "line": 6399,
          "old_api": null,
          "new_api": "closeListeningSockets",
          "old_text": null,
          "new_text": "closeListeningSockets(0)",
          "old_line_content": "     * be touched (or deleted) by the child (on exit / crash) */",
          "new_line_content": "    closeListeningSockets(0);",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.cluster_config_file_lock_fd)",
          "old_line_content": "    server.pidfile = NULL;",
          "new_line_content": "        close(server.cluster_config_file_lock_fd);  /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves, &replicas_iter)",
          "old_line_content": "            num_lagging_replicas++;",
          "new_line_content": "    listRewind(server.slaves, &replicas_iter);",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&replicas_iter)",
          "old_line_content": "            long lag = replica->replstate == SLAVE_STATE_ONLINE ?",
          "new_line_content": "    while ((replicas_list_node = listNext(&replicas_iter)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(server.pidfile)",
          "old_line_content": "int redisFork(int purpose) {",
          "new_line_content": "    zfree(server.pidfile);",
          "content_same": false
        },
        {
          "line": 6411,
          "old_api": null,
          "new_api": "isMutuallyExclusiveChildType",
          "old_text": null,
          "new_text": "isMutuallyExclusiveChildType(purpose)",
          "old_line_content": "",
          "new_line_content": "    if (isMutuallyExclusiveChildType(purpose)) {",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                      lag,",
          "new_line_content": "                time(NULL) - replica->repl_ack_time : 0;",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": null,
          "new_api": "replicationGetSlaveName",
          "old_text": null,
          "new_text": "replicationGetSlaveName(replica)",
          "old_line_content": "    }",
          "new_line_content": "                      replicationGetSlaveName(replica),",
          "content_same": false
        },
        {
          "line": 4370,
          "old_api": null,
          "new_api": "replstateToString",
          "old_text": null,
          "new_text": "replstateToString(replica->replstate)",
          "old_line_content": "                  \"%d of %d replicas are in sync when shutting down.\",",
          "new_line_content": "                      replstateToString(replica->replstate));",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "         * Setup signal handlers first because a signal could fire at any time.",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n                  \"%d of %d replicas are in sync when shutting down.\",\n                  num_replicas - num_lagging_replicas,\n                  num_replicas)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 6422,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "         * Adjust OOM score before everything else to assist the OOM killer if",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "ldbKillForkedSessions",
          "old_text": null,
          "new_text": "ldbKillForkedSessions()",
          "old_line_content": "    if (server.child_type == CHILD_TYPE_RDB) {",
          "new_line_content": "    ldbKillForkedSessions();",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": null,
          "new_api": "setupChildSignalHandlers",
          "old_text": null,
          "new_text": "setupChildSignalHandlers()",
          "old_line_content": "        /* Close the reading part, so that if the parent crashes, the child will",
          "new_line_content": "        setupChildSignalHandlers();",
          "content_same": false
        },
        {
          "line": 6432,
          "old_api": null,
          "new_api": "setOOMScoreAdj",
          "old_text": null,
          "new_text": "setOOMScoreAdj(CONFIG_OOM_BGCHILD)",
          "old_line_content": "         * get a write error and exit. */",
          "new_line_content": "        setOOMScoreAdj(CONFIG_OOM_BGCHILD);",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        if (server.child_info_pipe[0] != -1)",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "         * to unlink file actually) in background thread.",
          "new_line_content": "        serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4388,
          "old_api": null,
          "new_api": "killRDBChild",
          "old_text": null,
          "new_text": "killRDBChild()",
          "old_line_content": "         * The temp rdb file fd may won't be closed when redis exits quickly,",
          "new_line_content": "        killRDBChild();",
          "content_same": false
        },
        {
          "line": 6435,
          "old_api": null,
          "new_api": "closeChildUnusedResourceAfterFork",
          "old_text": null,
          "new_text": "closeChildUnusedResourceAfterFork()",
          "old_line_content": "    } else {",
          "new_line_content": "        closeChildUnusedResourceAfterFork();",
          "content_same": false
        },
        {
          "line": 6444,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "        server.stat_total_forks++;",
          "new_line_content": "            if (isMutuallyExclusiveChildType(purpose)) closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"There is a module fork child. Killing it!\")",
          "old_line_content": "     * but contains the full dataset anyway. */",
          "new_line_content": "        serverLog(LL_WARNING,\"There is a module fork child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 4401,
          "old_api": null,
          "new_api": "TerminateModuleForkChild",
          "old_text": null,
          "new_text": "TerminateModuleForkChild(server.child_pid,0)",
          "old_line_content": "    if (server.child_type == CHILD_TYPE_AOF) {",
          "new_line_content": "        TerminateModuleForkChild(server.child_pid,0);",
          "content_same": false
        },
        {
          "line": 6450,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "         * other child types should handle and store their pid's in dedicated variables.",
          "new_line_content": "        server.stat_fork_time = ustime()-start;",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "         *",
          "new_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "content_same": false
        },
        {
          "line": 6452,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "old_line_content": "         * Today, we allows CHILD_TYPE_LDB to run in parallel with the other fork types:",
          "new_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\")",
          "old_line_content": "                goto error;",
          "new_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\");",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "old_line_content": "        }",
          "new_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "content_same": false
        },
        {
          "line": 6461,
          "old_api": null,
          "new_api": "isMutuallyExclusiveChildType",
          "old_text": null,
          "new_text": "isMutuallyExclusiveChildType(purpose)",
          "old_line_content": "            server.stat_current_cow_updated = 0;",
          "new_line_content": "        if (isMutuallyExclusiveChildType(purpose)) {",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\")",
          "old_line_content": "                  \"There is a child rewriting the AOF. Killing it!\");",
          "new_line_content": "                    redisCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\");",
          "content_same": false
        },
        {
          "line": 4419,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                  \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "        /* Append only file: flush buffers and fsync() the AOF at exit */",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 6469,
          "old_api": null,
          "new_api": "dbTotalServerKeyCount",
          "old_text": null,
          "new_text": "dbTotalServerKeyCount()",
          "old_line_content": "                              REDISMODULE_SUBEVENT_FORK_CHILD_BORN,",
          "new_line_content": "            server.stat_current_save_keys_total = dbTotalServerKeyCount();",
          "content_same": false
        },
        {
          "line": 6472,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "    return childpid;",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\")",
          "old_line_content": "        }",
          "new_line_content": "        serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\");",
          "content_same": false
        },
        {
          "line": 4426,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(1)",
          "old_line_content": "    }",
          "new_line_content": "        flushAppendOnlyFile(1);",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "redis_fsync",
          "old_text": null,
          "new_text": "redis_fsync(server.aof_fd)",
          "old_line_content": "",
          "new_line_content": "        if (redis_fsync(server.aof_fd) == -1) {",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Fail to fsync the AOF file: %s.\",\n                                 strerror(errno))",
          "old_line_content": "    /* Create a new RDB file before exiting. */",
          "new_line_content": "            serverLog(LL_WARNING,\"Fail to fsync the AOF file: %s.\",",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    if ((server.saveparamslen > 0 && !nosave) || save) {",
          "new_line_content": "                                 strerror(errno));",
          "content_same": false
        },
        {
          "line": 6473,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_FORK_CHILD,\n                              REDISMODULE_SUBEVENT_FORK_CHILD_BORN,\n                              NULL)",
          "old_line_content": "}",
          "new_line_content": "        moduleFireServerEvent(REDISMODULE_EVENT_FORK_CHILD,",
          "content_same": false
        },
        {
          "line": 6481,
          "old_api": null,
          "new_api": "sendChildInfoGeneric",
          "old_text": null,
          "new_text": "sendChildInfoGeneric(info_type, 0, -1, pname)",
          "old_line_content": "}",
          "new_line_content": "    sendChildInfoGeneric(info_type, 0, -1, pname);",
          "content_same": false
        },
        {
          "line": 6485,
          "old_api": null,
          "new_api": "sendChildInfoGeneric",
          "old_text": null,
          "new_text": "sendChildInfoGeneric(info_type, keys, -1, pname)",
          "old_line_content": " * release any full page, so in an effort to avoid getting the size of the",
          "new_line_content": "    sendChildInfoGeneric(info_type, keys, -1, pname);",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": null,
          "new_api": "rdbPopulateSaveInfo",
          "old_text": null,
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "             * in the next cron() Redis will be notified that the background",
          "new_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(SLAVE_REQ_NONE,server.rdb_filename,rsiptr,RDBFLAGS_KEEP_CACHE)",
          "old_line_content": "             * synchronization... */",
          "new_line_content": "        if (rdbSave(SLAVE_REQ_NONE,server.rdb_filename,rsiptr,RDBFLAGS_KEEP_CACHE) != C_OK) {",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error trying to save the DB. Exit anyway.\")",
          "old_line_content": "                goto error;",
          "new_line_content": "                serverLog(LL_WARNING,\"Error trying to save the DB. Exit anyway.\");",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\")",
          "old_line_content": "        }",
          "new_line_content": "                serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "old_line_content": "",
          "new_line_content": "                    redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": null,
          "new_api": "zmadvise_dontneed",
          "old_text": null,
          "new_text": "zmadvise_dontneed(ptr)",
          "old_line_content": "    /* Dismiss client query buffer and static reply buffer. */",
          "new_line_content": "    zmadvise_dontneed(ptr);",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": null,
          "new_api": "aofManifestFree",
          "old_text": null,
          "new_text": "aofManifestFree(server.aof_manifest)",
          "old_line_content": "    /* Remove the pid file if possible and needed. */",
          "new_line_content": "    if (server.aof_manifest) aofManifestFree(server.aof_manifest);",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": null,
          "new_api": "dismissSds",
          "old_text": null,
          "new_text": "dismissSds(c->querybuf)",
          "old_line_content": "        }",
          "new_line_content": "    dismissSds(c->querybuf);",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Removing the pid file.\")",
          "old_line_content": "     * send them pending writes. */",
          "new_line_content": "        serverLog(LL_NOTICE,\"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 6516,
          "old_api": null,
          "new_api": "dismissObject",
          "old_text": null,
          "new_text": "dismissObject(c->argv[i], 0)",
          "old_line_content": "    /* Dismiss the reply array only if the average buffer size is bigger",
          "new_line_content": "            dismissObject(c->argv[i], 0);",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": null,
          "new_api": "flushSlavesOutputBuffers",
          "old_text": null,
          "new_text": "flushSlavesOutputBuffers()",
          "old_line_content": "#if !defined(__sun)",
          "new_line_content": "    flushSlavesOutputBuffers();",
          "content_same": false
        },
        {
          "line": 6529,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        }",
          "new_line_content": "        while ((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6530,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "    }",
          "new_line_content": "            clientReplyBlock *bulk = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6533,
          "old_api": null,
          "new_api": "dismissMemory",
          "old_text": null,
          "new_text": "dismissMemory(bulk, bulk->size)",
          "old_line_content": "/* In the child process, we don't need some buffers anymore, and these are",
          "new_line_content": "            if (bulk) dismissMemory(bulk, bulk->size);",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\")",
          "old_line_content": "/*================================== Commands =============================== */",
          "new_line_content": "    serverLog(LL_WARNING, \"Errors trying to shut down the server. Check the logs for more information.\");",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "cancelShutdown",
          "old_text": null,
          "new_text": "cancelShutdown()",
          "old_line_content": "",
          "new_line_content": "    cancelShutdown();",
          "content_same": false
        },
        {
          "line": 6555,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.repl_buffer_blocks, &li)",
          "old_line_content": "",
          "new_line_content": "    listRewind(server.repl_buffer_blocks, &li);",
          "content_same": false
        },
        {
          "line": 6556,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "    /* Dismiss all clients memory. */",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6562,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.clients, &li)",
          "old_line_content": "#endif",
          "new_line_content": "    listRewind(server.clients, &li);",
          "content_same": false
        },
        {
          "line": 6563,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "}",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 6564,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "",
          "new_line_content": "        client *c = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 6565,
          "old_api": null,
          "new_api": "dismissClientMemory",
          "old_text": null,
          "new_text": "dismissClientMemory(c)",
          "old_line_content": "void memtest(size_t megabytes, int passes);",
          "new_line_content": "        dismissClientMemory(c);",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status)",
          "old_line_content": "    }",
          "new_line_content": "        atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status);",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.aof_bio_fsync_errno,server.aof_last_write_errno)",
          "old_line_content": "    return DISK_ERROR_TYPE_NONE;",
          "new_line_content": "            atomicGet(server.aof_bio_fsync_errno,server.aof_last_write_errno);",
          "content_same": false
        },
        {
          "line": 6575,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(exec_name,\"redis-sentinel\")",
          "old_line_content": "}",
          "new_line_content": "    if (strstr(exec_name,\"redis-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 6578,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j],\"--sentinel\")",
          "old_line_content": "void loadDataFromDisk(void) {",
          "new_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(shared.bgsaveerr->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        ret = sdsdup(shared.bgsaveerr->ptr);",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "        ret = sdscatfmt(sdsempty(),",
          "content_same": false
        },
        {
          "line": 6584,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "        if (ret != AOF_NOT_EXIST)",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(server.aof_last_write_errno)",
          "old_line_content": "/* The PING command. It works in a different way if the client is in",
          "new_line_content": "                strerror(server.aof_last_write_errno));",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": null,
          "new_api": "loadAppendOnlyFiles",
          "old_text": null,
          "new_text": "loadAppendOnlyFiles(server.aof_manifest)",
          "old_line_content": "    } else {",
          "new_line_content": "        int ret = loadAppendOnlyFiles(server.aof_manifest);",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        int rsi_is_valid = 0;",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 6590,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "        int rdb_flags = RDBFLAGS_NONE;",
          "new_line_content": "            serverLog(LL_NOTICE, \"DB loaded from append only file: %.3f seconds\", (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 6596,
          "old_api": null,
          "new_api": "iAmMaster",
          "old_text": null,
          "new_text": "iAmMaster()",
          "old_line_content": "        }",
          "new_line_content": "        if (iAmMaster()) {",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,\"pong\",4)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyBulkCBuffer(c,\"pong\",4);",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": null,
          "new_api": "rdbLoad",
          "old_text": null,
          "new_text": "rdbLoad(server.rdb_filename, &rsi, rdb_flags)",
          "old_line_content": "            /* Restore the replication ID / offset from the RDB file. */",
          "new_line_content": "        int rdb_load_ret = rdbLoad(server.rdb_filename, &rsi, rdb_flags);",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "old_line_content": "                rsi.repl_offset != -1 &&",
          "new_line_content": "            serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "content_same": false
        },
        {
          "line": 6605,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "                /* Note that older implementations may save a repl_stream_db",
          "new_line_content": "                (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "",
          "new_line_content": "            addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 6616,
          "old_api": null,
          "new_api": "iAmMaster",
          "old_text": null,
          "new_text": "iAmMaster()",
          "old_line_content": "                     * with masters. */",
          "new_line_content": "                if (!iAmMaster()) {",
          "content_same": false
        },
        {
          "line": 4572,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "typedef struct replyFlagNames {",
          "new_line_content": "    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c, server.unixtime)",
          "old_line_content": "    uint64_t flag;",
          "new_line_content": "    addReplyBulkLongLong(c, server.unixtime);",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c, server.ustime-((long long)server.unixtime)*1000000)",
          "old_line_content": "    const char *name;",
          "new_line_content": "    addReplyBulkLongLong(c, server.ustime-((long long)server.unixtime)*1000000);",
          "content_same": false
        },
        {
          "line": 6622,
          "old_api": null,
          "new_api": "replicationCacheMasterUsingMyself",
          "old_text": null,
          "new_text": "replicationCacheMasterUsingMyself()",
          "old_line_content": "                     * to partial resynchronizations with masters. */",
          "new_line_content": "                    replicationCacheMasterUsingMyself();",
          "content_same": false
        },
        {
          "line": 6628,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(server.replid2,rsi.repl_id,sizeof(server.replid))",
          "old_line_content": "                    server.repl_backlog->offset = server.master_repl_offset -",
          "new_line_content": "                    memcpy(server.replid2,rsi.repl_id,sizeof(server.replid));",
          "content_same": false
        },
        {
          "line": 6632,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(server.repl_backlog)",
          "old_line_content": "                }",
          "new_line_content": "                    serverAssert(server.repl_backlog);",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, count)",
          "old_line_content": "        j++;",
          "new_line_content": "    addReplySetLen(c, count);",
          "content_same": false
        },
        {
          "line": 6640,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\")",
          "old_line_content": "         * it because we put DELs in it when loading expired keys in RDB, but",
          "new_line_content": "            serverLog(LL_WARNING, \"Fatal error loading the DB, check server logs. Exiting.\");",
          "content_same": false
        },
        {
          "line": 6641,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "         * if RDB doesn't have replication info or there is no rdb, it is not",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c, replyFlags[j].name)",
          "old_line_content": "void addReplyFlagsForCommand(client *c, struct redisCommand *cmd) {",
          "new_line_content": "            addReplyStatus(c, replyFlags[j].name);",
          "content_same": false
        },
        {
          "line": 6655,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "old_line_content": "",
          "new_line_content": "    serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "content_same": false
        },
        {
          "line": 6657,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Redis aborting for OUT OF MEMORY. Allocating %zu bytes!\",\n        allocation_size)",
          "old_line_content": " * supported variables.",
          "new_line_content": "    serverPanic(\"Redis aborting for OUT OF MEMORY. Allocating %zu bytes!\",",
          "content_same": false
        },
        {
          "line": 6666,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"title\")",
          "old_line_content": "                                server.bindaddr_count ? server.bindaddr[0] : \"*\",",
          "new_line_content": "    if (!strcmp(varname, \"title\")) {",
          "content_same": false
        },
        {
          "line": 6667,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(arg)",
          "old_line_content": "                                server.port ? server.port : server.tls_port);",
          "new_line_content": "        return sdsnew(arg);",
          "content_same": false
        },
        {
          "line": 6668,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"listen-addr\")",
          "old_line_content": "        else",
          "new_line_content": "    } else if (!strcmp(varname, \"listen-addr\")) {",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, cmd->flags, flagNames)",
          "old_line_content": "        {CMD_DOC_DEPRECATED,         \"deprecated\"},",
          "new_line_content": "    addReplyCommandFlags(c, cmd->flags, flagNames);",
          "content_same": false
        },
        {
          "line": 6682,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    } else",
          "new_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.port);",
          "content_same": false
        },
        {
          "line": 6683,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"tls-port\")",
          "old_line_content": "        return NULL;    /* Unknown variable name */",
          "new_line_content": "    } else if (!strcmp(varname, \"tls-port\")) {",
          "content_same": false
        },
        {
          "line": 6684,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "        return sdscatprintf(sdsempty(), \"%u\", server.tls_port);",
          "content_same": false
        },
        {
          "line": 6685,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(varname, \"unixsocket\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcmp(varname, \"unixsocket\")) {",
          "content_same": false
        },
        {
          "line": 6686,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(server.unixsocket)",
          "old_line_content": "/* Expand the specified proc-title-template string and return a newly",
          "new_line_content": "        return sdsnew(server.unixsocket);",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, cmd->doc_flags, docFlagNames)",
          "old_line_content": "        {CMD_KEY_RO,              \"RO\"},",
          "new_line_content": "    addReplyCommandFlags(c, cmd->doc_flags, docFlagNames);",
          "content_same": false
        },
        {
          "line": 6702,
          "old_api": null,
          "new_api": "expandProcTitleTemplate",
          "old_text": null,
          "new_text": "expandProcTitleTemplate(template, \"\")",
          "old_line_content": "    return ok;",
          "new_line_content": "    sds res = expandProcTitleTemplate(template, \"\");",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, flags, docFlagNames)",
          "old_line_content": "    \"string\",",
          "new_line_content": "    addReplyCommandFlags(c, flags, docFlagNames);",
          "content_same": false
        },
        {
          "line": 6705,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(res)",
          "old_line_content": "int redisSetProcTitle(char *title) {",
          "new_line_content": "    if (sdslen(res) == 0) ok = 0;",
          "content_same": false
        },
        {
          "line": 6706,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(res)",
          "old_line_content": "#ifdef USE_SETPROCTITLE",
          "new_line_content": "    sdsfree(res);",
          "content_same": false
        },
        {
          "line": 6713,
          "old_api": null,
          "new_api": "expandProcTitleTemplate",
          "old_text": null,
          "new_text": "expandProcTitleTemplate(server.proc_title_template, title)",
          "old_line_content": "#else",
          "new_line_content": "    sds proc_title = expandProcTitleTemplate(server.proc_title_template, title);",
          "content_same": false
        },
        {
          "line": 6716,
          "old_api": null,
          "new_api": "setproctitle",
          "old_text": null,
          "new_text": "setproctitle(\"%s\", proc_title)",
          "old_line_content": "",
          "new_line_content": "    setproctitle(\"%s\", proc_title);",
          "content_same": false
        },
        {
          "line": 6717,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(proc_title)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    sdsfree(proc_title);",
          "content_same": false
        },
        {
          "line": 6719,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(title)",
          "old_line_content": "",
          "new_line_content": "    UNUSED(title);",
          "content_same": false
        },
        {
          "line": 6727,
          "old_api": null,
          "new_api": "setcpuaffinity",
          "old_text": null,
          "new_text": "setcpuaffinity(cpulist)",
          "old_line_content": "",
          "new_line_content": "    setcpuaffinity(cpulist);",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": null,
          "new_api": "addReplyCommandFlags",
          "old_text": null,
          "new_text": "addReplyCommandFlags(c, flags, argFlagNames)",
          "old_line_content": "    for (int j = 0; j<num_args; j++) {",
          "new_line_content": "    addReplyCommandFlags(c, flags, argFlagNames);",
          "content_same": false
        },
        {
          "line": 6729,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cpulist)",
          "old_line_content": " * a positive number on success. */",
          "new_line_content": "    UNUSED(cpulist);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, num_args)",
          "old_line_content": "        if (args[j].key_spec_index != -1) maplen++;",
          "new_line_content": "    addReplyArrayLen(c, num_args);",
          "content_same": false
        },
        {
          "line": 6742,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret)",
          "old_line_content": "#endif",
          "new_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: sd_notify: %d\", ret);",
          "content_same": false
        },
        {
          "line": 6745,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(sd_notify_msg)",
          "old_line_content": "/* Attempt to set up upstart supervision. Returns 1 if successful. */",
          "new_line_content": "    UNUSED(sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 4702,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"name\")",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c, \"name\");",
          "content_same": false
        },
        {
          "line": 4703,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].name)",
          "old_line_content": "        if (has_display_text) {",
          "new_line_content": "        addReplyBulkCString(c, args[j].name);",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"UPSTART_JOB\")",
          "old_line_content": "        return 0;",
          "new_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 4706,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, ARG_TYPE_STR[args[j].type])",
          "old_line_content": "        }",
          "new_line_content": "        addReplyBulkCString(c, ARG_TYPE_STR[args[j].type]);",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].display_text ? args[j].display_text : args[j].name)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].display_text ? args[j].display_text : args[j].name);",
          "content_same": false
        },
        {
          "line": 6760,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\")",
          "old_line_content": "",
          "new_line_content": "    serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness.\");",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": null,
          "new_api": "raise",
          "old_text": null,
          "new_text": "raise(SIGSTOP)",
          "old_line_content": "/* Attempt to set up systemd supervision. Returns 1 if successful. */",
          "new_line_content": "    raise(SIGSTOP);",
          "content_same": false
        },
        {
          "line": 4714,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, args[j].key_spec_index)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyLongLong(c, args[j].key_spec_index);",
          "content_same": false
        },
        {
          "line": 6762,
          "old_api": null,
          "new_api": "unsetenv",
          "old_text": null,
          "new_text": "unsetenv(\"UPSTART_JOB\")",
          "old_line_content": "static int redisSupervisedSystemd(void) {",
          "new_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType)",
          "old_line_content": "        server.db[j].avg_ttl = 0;",
          "new_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType);",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].token)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].token);",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType)",
          "old_line_content": "    }",
          "new_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType);",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].summary)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].summary);",
          "content_same": false
        },
        {
          "line": 6769,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"systemd supervision requested or auto-detected, but Redis is compiled without libsystemd support!\")",
          "old_line_content": "        return 0;",
          "new_line_content": "    serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "     * seems odd) just to make the code cleaner by making it be the same type as server.pubsubshard_channels",
          "new_line_content": "        server.db[j].defrag_later = listCreate();",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree)",
          "old_line_content": "     * (which has to be kvstore), see pubsubtype.serverPubSubChannels */",
          "new_line_content": "        listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree);",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].since)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].since);",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "old_line_content": "#endif",
          "new_line_content": "    if (redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\") <= 0)",
          "content_same": false
        },
        {
          "line": 6775,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n        \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "old_line_content": "",
          "new_line_content": "    serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, args[j].deprecated_since)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c, args[j].deprecated_since);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "kvstoreCreate",
          "old_text": null,
          "new_text": "kvstoreCreate(&objToDictDictType, 0, KVSTORE_ALLOCATE_DICTS_ON_DEMAND)",
          "old_line_content": "    server.cronloops = 0;",
          "new_line_content": "    server.pubsub_channels = kvstoreCreate(&objToDictDictType, 0, KVSTORE_ALLOCATE_DICTS_ON_DEMAND);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&objToDictDictType)",
          "old_line_content": "    server.in_exec = 0;",
          "new_line_content": "    server.pubsub_patterns = dictCreate(&objToDictDictType);",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": null,
          "new_api": "kvstoreCreate",
          "old_text": null,
          "new_text": "kvstoreCreate(&objToDictDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND | KVSTORE_FREE_EMPTY_DICTS)",
          "old_line_content": "    server.busy_module_yield_flags = BUSY_MODULE_YIELD_NONE;",
          "new_line_content": "    server.pubsubshard_channels = kvstoreCreate(&objToDictDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND | KVSTORE_FREE_EMPTY_DICTS);",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "addReplyFlagsForArg",
          "old_text": null,
          "new_text": "addReplyFlagsForArg(c, args[j].flags)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyFlagsForArg(c, args[j].flags);",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"arguments\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c, \"arguments\");",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": null,
          "new_api": "addReplyCommandArgList",
          "old_text": null,
          "new_text": "addReplyCommandArgList(c, args[j].subargs, args[j].num_args)",
          "old_line_content": "#ifdef LOG_REQ_RES",
          "new_line_content": "            addReplyCommandArgList(c, args[j].subargs, args[j].num_args);",
          "content_same": false
        },
        {
          "line": 6785,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"UPSTART_JOB\")",
          "old_line_content": "            mode = SUPERVISED_SYSTEMD;",
          "new_line_content": "        if (getenv(\"UPSTART_JOB\")) {",
          "content_same": false
        },
        {
          "line": 6786,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE, \"Upstart supervision detected.\")",
          "old_line_content": "        }",
          "new_line_content": "            serverLog(LL_VERBOSE, \"Upstart supervision detected.\");",
          "content_same": false
        },
        {
          "line": 6788,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"NOTIFY_SOCKET\")",
          "old_line_content": "",
          "new_line_content": "        } else if (getenv(\"NOTIFY_SOCKET\")) {",
          "content_same": false
        },
        {
          "line": 6789,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE, \"Systemd supervision detected.\")",
          "old_line_content": "    switch (mode) {",
          "new_line_content": "            serverLog(LL_VERBOSE, \"Systemd supervision detected.\");",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, rs->length)",
          "old_line_content": "        switch (curr->type) {",
          "new_line_content": "    addReplyMapLen(c, rs->length);",
          "content_same": false
        },
        {
          "line": 6796,
          "old_api": null,
          "new_api": "redisSupervisedUpstart",
          "old_text": null,
          "new_text": "redisSupervisedUpstart()",
          "old_line_content": "        default:",
          "new_line_content": "            ret = redisSupervisedUpstart();",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, curr->key)",
          "old_line_content": "        case (JSON_TYPE_INTEGER):",
          "new_line_content": "        addReplyBulkCString(c, curr->key);",
          "content_same": false
        },
        {
          "line": 6799,
          "old_api": null,
          "new_api": "redisSupervisedSystemd",
          "old_text": null,
          "new_text": "redisSupervisedSystemd()",
          "old_line_content": "",
          "new_line_content": "            ret = redisSupervisedSystemd();",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    server.rdb_last_load_keys_expired = 0;",
          "new_line_content": "    server.aof_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.rdb_last_load_keys_loaded = 0;",
          "new_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": null,
          "new_api": "addReplyBool",
          "old_text": null,
          "new_text": "addReplyBool(c, curr->value.boolean)",
          "old_line_content": "        case (JSON_TYPE_STRING):",
          "new_line_content": "            addReplyBool(c, curr->value.boolean);",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, curr->value.integer)",
          "old_line_content": "        case (JSON_TYPE_OBJECT):",
          "new_line_content": "            addReplyLongLong(c, curr->value.integer);",
          "content_same": false
        },
        {
          "line": 4759,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, curr->value.string)",
          "old_line_content": "        case (JSON_TYPE_ARRAY):",
          "new_line_content": "            addReplyBulkCString(c, curr->value.string);",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": null,
          "new_api": "resetServerStats",
          "old_text": null,
          "new_text": "resetServerStats()",
          "old_line_content": "    server.stat_current_cow_bytes = 0;",
          "new_line_content": "    resetServerStats();",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": null,
          "new_api": "addReplyJson",
          "old_text": null,
          "new_text": "addReplyJson(c, curr->value.object)",
          "old_line_content": "                struct jsonObject *object = curr->value.array.objects[k];",
          "new_line_content": "            addReplyJson(c, curr->value.object);",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_current_save_keys_processed = 0;",
          "new_line_content": "    server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, curr->value.array.length)",
          "old_line_content": "            break;",
          "new_line_content": "            addReplyArrayLen(c, curr->value.array.length);",
          "content_same": false
        },
        {
          "line": 6813,
          "old_api": null,
          "new_api": "getMyClusterNode",
          "old_text": null,
          "new_text": "getMyClusterNode()",
          "old_line_content": "#include \"intset.h\"  /* Compact integer set structure */",
          "new_line_content": "            (server.cluster_enabled && clusterNodeIsMaster(getMyClusterNode())));",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": null,
          "new_api": "addReplyJson",
          "old_text": null,
          "new_text": "addReplyJson(c, object)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyJson(c, object);",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid JSON type %d\", curr->type)",
          "old_line_content": "#endif",
          "new_line_content": "            serverPanic(\"Invalid JSON type %d\", curr->type);",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, cmd->num_history)",
          "old_line_content": "    }",
          "new_line_content": "    addReplySetLen(c, cmd->num_history);",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "",
          "new_line_content": "        addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->history[j].since)",
          "old_line_content": "void addReplyCommandTips(client *c, struct redisCommand *cmd) {",
          "new_line_content": "        addReplyBulkCString(c, cmd->history[j].since);",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "addReplySetLen",
          "old_text": null,
          "new_text": "addReplySetLen(c, cmd->num_tips)",
          "old_line_content": "",
          "new_line_content": "    addReplySetLen(c, cmd->num_tips);",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": null,
          "new_api": "aeCreateTimeEvent",
          "old_text": null,
          "new_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "old_line_content": "    /* Register a readable event for the pipe used to awake the event loop",
          "new_line_content": "    if (aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Can't create event loop timers.\")",
          "old_line_content": "     * from module threads. */",
          "new_line_content": "        serverPanic(\"Can't create event loop timers.\");",
          "content_same": false
        },
        {
          "line": 6848,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(name,redisTests[j].name)",
          "old_line_content": "}",
          "new_line_content": "        if (!strcasecmp(name,redisTests[j].name)) {",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "        }",
          "new_line_content": "        addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.module_pipe[0], AE_READABLE,\n        modulePipeReadable,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (aeCreateFileEvent(server.el, server.module_pipe[0], AE_READABLE,",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,cmd->key_specs[i].notes)",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c,cmd->key_specs[i].notes);",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\n                \"Error registering the readable event for the module pipe.\")",
          "old_line_content": "     * before loading persistence since it is used by processEventsWhileBlocked. */",
          "new_line_content": "            serverPanic(",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"flags\")",
          "old_line_content": "            case KSPEC_BS_UNKNOWN:",
          "new_line_content": "        addReplyBulkCString(c, \"flags\");",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": null,
          "new_api": "aeSetBeforeSleepProc",
          "old_text": null,
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "     * at 3 GB using maxmemory with 'noeviction' policy'. This avoids",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "aeSetAfterSleepProc",
          "old_text": null,
          "new_text": "aeSetAfterSleepProc(server.el,afterSleep)",
          "old_line_content": "     * useless crashes of the Redis instance for out of memory. */",
          "new_line_content": "    aeSetAfterSleepProc(server.el,afterSleep);",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"type\")",
          "old_line_content": "                break;",
          "new_line_content": "                addReplyBulkCString(c, \"type\");",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"unknown\")",
          "old_line_content": "            case KSPEC_BS_INDEX:",
          "new_line_content": "                addReplyBulkCString(c, \"unknown\");",
          "content_same": false
        },
        {
          "line": 6868,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"--large-memory\")",
          "old_line_content": "            int numtests = sizeof(redisTests)/sizeof(struct redisTest);",
          "new_line_content": "            else if (!strcasecmp(arg, \"--large-memory\")) flags |= REDIS_TEST_LARGE_MEMORY;",
          "content_same": false
        },
        {
          "line": 6869,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"--valgrind\")",
          "old_line_content": "            for (j = 0; j < numtests; j++) {",
          "new_line_content": "            else if (!strcasecmp(arg, \"--valgrind\")) flags |= REDIS_TEST_VALGRIND;",
          "content_same": false
        },
        {
          "line": 6872,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[2], \"all\")",
          "old_line_content": "",
          "new_line_content": "        if (!strcasecmp(argv[2], \"all\")) {",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"spec\")",
          "old_line_content": "            case KSPEC_BS_KEYWORD:",
          "new_line_content": "                addReplyBulkCString(c, \"spec\");",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Functions initialization failed, check the server logs.\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Functions initialization failed, check the server logs.\");",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    /* Initialize ACL default password if it exists */",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 6875,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "redisTests[j].proc(argc,argv,flags)",
          "old_line_content": "            for (j = 0; j < numtests; j++) {",
          "new_line_content": "                redisTests[j].failed = (redisTests[j].proc(argc,argv,flags) != 0);",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": null,
          "new_api": "slowlogInit",
          "old_text": null,
          "new_text": "slowlogInit()",
          "old_line_content": "",
          "new_line_content": "    slowlogInit();",
          "content_same": false
        },
        {
          "line": 6883,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"[failed] Test - %s\\n\", redisTests[j].name)",
          "old_line_content": "",
          "new_line_content": "                    printf(\"[failed] Test - %s\\n\", redisTests[j].name);",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": null,
          "new_api": "applyWatchdogPeriod",
          "old_text": null,
          "new_text": "applyWatchdogPeriod()",
          "old_line_content": "",
          "new_line_content": "    applyWatchdogPeriod();",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, 2)",
          "old_line_content": "                break;",
          "new_line_content": "                addReplyMapLen(c, 2);",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"keyword\")",
          "old_line_content": "            default:",
          "new_line_content": "                addReplyBulkCString(c, \"keyword\");",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "initServerClientMemUsageBuckets",
          "old_text": null,
          "new_text": "initServerClientMemUsageBuckets()",
          "old_line_content": "    int conn_index;",
          "new_line_content": "        initServerClientMemUsageBuckets();",
          "content_same": false
        },
        {
          "line": 4840,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"startfrom\")",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulkCString(c, \"startfrom\");",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom)",
          "old_line_content": "",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].bs.keyword.startfrom);",
          "content_same": false
        },
        {
          "line": 6885,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"[ok] Test - %s\\n\", redisTests[j].name)",
          "old_line_content": "                   numtests-failed_num, failed_num);",
          "new_line_content": "                    printf(\"[ok] Test - %s\\n\", redisTests[j].name);",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "old_line_content": "            case KSPEC_FK_UNKNOWN:",
          "new_line_content": "                serverPanic(\"Invalid begin_search key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": null,
          "new_api": "getTestProcByName",
          "old_text": null,
          "new_text": "getTestProcByName(argv[2])",
          "old_line_content": "        return 0;",
          "new_line_content": "            redisTestProc *proc = getTestProcByName(argv[2]);",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": null,
          "new_api": "connectionIndexByType",
          "old_text": null,
          "new_text": "connectionIndexByType(CONN_TYPE_SOCKET)",
          "old_line_content": "        listener->bindaddr_count = server.bindaddr_count;",
          "new_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_SOCKET);",
          "content_same": false
        },
        {
          "line": 6896,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "proc(argc,argv,flags)",
          "old_line_content": "#endif",
          "new_line_content": "            return proc(argc,argv,flags);",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"type\")",
          "old_line_content": "                break;",
          "new_line_content": "                addReplyBulkCString(c, \"type\");",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"unknown\")",
          "old_line_content": "            case KSPEC_FK_RANGE:",
          "new_line_content": "                addReplyBulkCString(c, \"unknown\");",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": null,
          "new_api": "connectionByType",
          "old_text": null,
          "new_text": "connectionByType(CONN_TYPE_SOCKET)",
          "old_line_content": "        if (!ct_tls) {",
          "new_line_content": "        listener->ct = connectionByType(CONN_TYPE_SOCKET);",
          "content_same": false
        },
        {
          "line": 6905,
          "old_api": null,
          "new_api": "spt_init",
          "old_text": null,
          "new_text": "spt_init(argc, argv)",
          "old_line_content": "    /* To achieve entropy, in case of containers, their time() and getpid() can",
          "new_line_content": "    spt_init(argc, argv);",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": null,
          "new_api": "connTypeConfigure",
          "old_text": null,
          "new_text": "connTypeConfigure(ct_tls, &server.tls_ctx_config, 1)",
          "old_line_content": "",
          "new_line_content": "        if (connTypeConfigure(ct_tls, &server.tls_ctx_config, 1) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\")",
          "old_line_content": "    if (server.tls_port != 0) {",
          "new_line_content": "            serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\");",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey)",
          "old_line_content": "                break;",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.range.lastkey);",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"keystep\")",
          "old_line_content": "            case KSPEC_FK_KEYNUM:",
          "new_line_content": "                addReplyBulkCString(c, \"keystep\");",
          "content_same": false
        },
        {
          "line": 6912,
          "old_api": null,
          "new_api": "gettimeofday",
          "old_text": null,
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 6913,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    /* Store umask value. Because umask(2) only offers a set-and-get API we have",
          "new_line_content": "    srand(time(NULL)^getpid()^tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 6914,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "     * to reset it and restore it back. We do this early to avoid a potential",
          "new_line_content": "    srandom(time(NULL)^getpid()^tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": null,
          "new_api": "connectionIndexByType",
          "old_text": null,
          "new_text": "connectionIndexByType(CONN_TYPE_TLS)",
          "old_line_content": "        listener->bindaddr_count = server.bindaddr_count;",
          "new_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_TLS);",
          "content_same": false
        },
        {
          "line": 6915,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "     * race condition with threads that could be creating files or directories.",
          "new_line_content": "    init_genrand64(((long long) tv.tv_sec * 1000000 + tv.tv_usec) ^ getpid());",
          "content_same": false
        },
        {
          "line": 6916,
          "old_api": null,
          "new_api": "crc64_init",
          "old_text": null,
          "new_text": "crc64_init()",
          "old_line_content": "     */",
          "new_line_content": "    crc64_init();",
          "content_same": false
        },
        {
          "line": 6922,
          "old_api": null,
          "new_api": "umask",
          "old_text": null,
          "new_text": "umask(0777)",
          "old_line_content": "",
          "new_line_content": "    umask(server.umask = umask(0777));",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx)",
          "old_line_content": "                break;",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keynumidx);",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": null,
          "new_api": "connectionIndexByType",
          "old_text": null,
          "new_text": "connectionIndexByType(CONN_TYPE_UNIX)",
          "old_line_content": "        listener->bindaddr_count = 1;",
          "new_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_UNIX);",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"firstkey\")",
          "old_line_content": "            default:",
          "new_line_content": "                addReplyBulkCString(c, \"firstkey\");",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_UNIX)",
          "old_line_content": "        listener->priv = &server.unixsocketperm; /* Unix socket specified */",
          "new_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_UNIX);",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"keystep\")",
          "old_line_content": "        }",
          "new_line_content": "                addReplyBulkCString(c, \"keystep\");",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep)",
          "old_line_content": "    }",
          "new_line_content": "                addReplyLongLong(c, cmd->key_specs[i].fk.keynum.keystep);",
          "content_same": false
        },
        {
          "line": 6928,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(argv[0], '/')",
          "old_line_content": "                  basic networking code and client creation depends on it. */",
          "new_line_content": "    char *exec_name = strrchr(argv[0], '/');",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": null,
          "new_api": "connectionByType",
          "old_text": null,
          "new_text": "connectionByType(CONN_TYPE_UNIX)",
          "old_line_content": "    int listen_fds = 0;",
          "new_line_content": "        listener->ct = connectionByType(CONN_TYPE_UNIX);",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type)",
          "old_line_content": "/* Reply with an array of sub-command using the provided reply callback. */",
          "new_line_content": "                serverPanic(\"Invalid find_keys key spec type %d\", cmd->key_specs[i].begin_search_type);",
          "content_same": false
        },
        {
          "line": 6931,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 6932,
          "old_api": null,
          "new_api": "ACLInit",
          "old_text": null,
          "new_text": "ACLInit()",
          "old_line_content": "    /* Store the executable path and arguments in a safe place in order",
          "new_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "content_same": false
        },
        {
          "line": 6939,
          "old_api": null,
          "new_api": "getAbsolutePath",
          "old_text": null,
          "new_text": "getAbsolutePath(argv[0])",
          "old_line_content": "    /* We need to init sentinel right now as parsing the configuration file",
          "new_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "content_same": false
        },
        {
          "line": 6940,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(char*)*(argc+1))",
          "old_line_content": "     * in sentinel mode will have the effect of populating the sentinel",
          "new_line_content": "    server.exec_argv = zmalloc(sizeof(char*)*(argc+1));",
          "content_same": false
        },
        {
          "line": 6942,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(argv[j])",
          "old_line_content": "    if (server.sentinel_mode) {",
          "new_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "content_same": false
        },
        {
          "line": 2851,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": null,
          "new_api": "initSentinelConfig",
          "old_text": null,
          "new_text": "initSentinelConfig()",
          "old_line_content": "     * the program main. However the program is part of the Redis executable",
          "new_line_content": "        initSentinelConfig();",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(cmd->subcommands_dict)",
          "old_line_content": "        if (use_map)",
          "new_line_content": "        addReplyArrayLen(c, dictSize(cmd->subcommands_dict));",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": null,
          "new_api": "connAcceptHandler",
          "old_text": null,
          "new_text": "connAcceptHandler(listener->ct)",
          "old_line_content": "",
          "new_line_content": "        if (createSocketAcceptHandler(listener, connAcceptHandler(listener->ct)) != C_OK)",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": null,
          "new_api": "get_type",
          "old_text": null,
          "new_text": "listener->ct->get_type(NULL)",
          "old_line_content": "    if (listen_fds == 0) {",
          "new_line_content": "            serverPanic(\"Unrecoverable error creating %s listener accept handler.\", listener->ct->get_type(NULL));",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "    }",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 6949,
          "old_api": null,
          "new_api": "initSentinel",
          "old_text": null,
          "new_text": "initSentinel()",
          "old_line_content": "     * so that we can easily execute an RDB check on loading errors. */",
          "new_line_content": "        initSentinel();",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(sub->fullname)",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCBuffer(c, sub->fullname, sdslen(sub->fullname));",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": null,
          "new_api": "reply_function",
          "old_text": null,
          "new_text": "reply_function(c, sub)",
          "old_line_content": "/* Output the representation of a Redis command. Used by the COMMAND command and COMMAND INFO. */",
          "new_line_content": "        reply_function(c, sub);",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "old_line_content": "/* Some steps in server initialization need to be done last (after modules",
          "new_line_content": "        serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": " * are loaded).",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    if (!cmd) {",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(exec_name,\"redis-check-rdb\")",
          "old_line_content": "    if (argc >= 2) {",
          "new_line_content": "    if (strstr(exec_name,\"redis-check-rdb\") != NULL)",
          "content_same": false
        },
        {
          "line": 6956,
          "old_api": null,
          "new_api": "redis_check_rdb_main",
          "old_text": null,
          "new_text": "redis_check_rdb_main(argc,argv,NULL)",
          "old_line_content": "        j = 1; /* First option to parse in argv[] */",
          "new_line_content": "        redis_check_rdb_main(argc,argv,NULL);",
          "content_same": false
        },
        {
          "line": 6958,
          "old_api": null,
          "new_api": "redis_check_aof_main",
          "old_text": null,
          "new_text": "redis_check_aof_main(argc,argv)",
          "old_line_content": "",
          "new_line_content": "        redis_check_aof_main(argc,argv);",
          "content_same": false
        },
        {
          "line": 6962,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        {",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "            lastkey = cmd->legacy_range_key_spec.fk.range.lastkey;",
          "new_line_content": "        addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": null,
          "new_api": "bioInit",
          "old_text": null,
          "new_text": "bioInit()",
          "old_line_content": "",
          "new_line_content": "    bioInit();",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": null,
          "new_api": "initThreadedIO",
          "old_text": null,
          "new_text": "initThreadedIO()",
          "old_line_content": "/* The purpose of this function is to try to \"glue\" consecutive range",
          "new_line_content": "    initThreadedIO();",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": null,
          "new_api": "set_jemalloc_bg_thread",
          "old_text": null,
          "new_text": "set_jemalloc_bg_thread(server.jemalloc_bg_thread)",
          "old_line_content": " * key specs in order to build the legacy (first,last,step) spec",
          "new_line_content": "    set_jemalloc_bg_thread(server.jemalloc_bg_thread);",
          "content_same": false
        },
        {
          "line": 2875,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": " * used by the COMMAND command.",
          "new_line_content": "    server.initial_memory_usage = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 6971,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "            exit(0);",
          "content_same": false
        },
        {
          "line": 6974,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "            } else {",
          "new_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 6978,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "            }",
          "new_line_content": "                exit(0);",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, keystep)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyLongLong(c, keystep);",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": null,
          "new_api": "addReplyCommandCategories",
          "old_text": null,
          "new_text": "addReplyCommandCategories(c, cmd)",
          "old_line_content": "}",
          "new_line_content": "        addReplyCommandCategories(c, cmd);",
          "content_same": false
        },
        {
          "line": 4935,
          "old_api": null,
          "new_api": "addReplyCommandTips",
          "old_text": null,
          "new_text": "addReplyCommandTips(c, cmd)",
          "old_line_content": "",
          "new_line_content": "        addReplyCommandTips(c, cmd);",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": null,
          "new_api": "addReplyCommandKeySpecs",
          "old_text": null,
          "new_text": "addReplyCommandKeySpecs(c, cmd)",
          "old_line_content": "/* Output the representation of a Redis command. Used by the COMMAND DOCS. */",
          "new_line_content": "        addReplyCommandKeySpecs(c, cmd);",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": null,
          "new_api": "addReplyCommandSubCommands",
          "old_text": null,
          "new_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0)",
          "old_line_content": "void addReplyCommandDocs(client *c, struct redisCommand *cmd) {",
          "new_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandInfo, 0);",
          "content_same": false
        },
        {
          "line": 6981,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 6982,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        /* Parse command line options",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 6984,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"--check-system\")",
          "old_line_content": "         *",
          "new_line_content": "        } if (strcmp(argv[1], \"--check-system\") == 0) {",
          "content_same": false
        },
        {
          "line": 6985,
          "old_api": null,
          "new_api": "syscheck",
          "old_text": null,
          "new_text": "syscheck()",
          "old_line_content": "         * First argument is the config file name? */",
          "new_line_content": "            exit(syscheck() ? 0 : 1);",
          "content_same": false
        },
        {
          "line": 6993,
          "old_api": null,
          "new_api": "getAbsolutePath",
          "old_text": null,
          "new_text": "getAbsolutePath(argv[1])",
          "old_line_content": "        sds *argv_tmp;",
          "new_line_content": "            server.configfile = getAbsolutePath(argv[1]);",
          "content_same": false
        },
        {
          "line": 6994,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(server.exec_argv[1])",
          "old_line_content": "        int argc_tmp;",
          "new_line_content": "            zfree(server.exec_argv[1]);",
          "content_same": false
        },
        {
          "line": 6995,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(server.configfile)",
          "old_line_content": "        int handled_last_config_arg = 1;",
          "new_line_content": "            server.exec_argv[1] = zstrdup(server.configfile);",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&c->legacy_range_key_spec, 0, sizeof(c->legacy_range_key_spec))",
          "old_line_content": "    if (c->flags & CMD_MODULE_GETKEYS)",
          "new_line_content": "    memset(&c->legacy_range_key_spec, 0, sizeof(c->legacy_range_key_spec));",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c, maplen)",
          "old_line_content": "    }",
          "new_line_content": "    addReplyMapLen(c, maplen);",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->summary)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->summary);",
          "content_same": false
        },
        {
          "line": 7015,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,argv[j]+2)",
          "old_line_content": "                    /* Means that we only have one option name, like --port or \"--port \" */",
          "new_line_content": "                options = sdscat(options,argv[j]+2);",
          "content_same": false
        },
        {
          "line": 7016,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "                    handled_last_config_arg = 0;",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 7018,
          "old_api": null,
          "new_api": "sdssplitargs",
          "old_text": null,
          "new_text": "sdssplitargs(argv[j], &argc_tmp)",
          "old_line_content": "                    if ((j != argc-1) && argv[j+1][0] == '-' && argv[j+1][1] == '-' &&",
          "new_line_content": "                argv_tmp = sdssplitargs(argv[j], &argc_tmp);",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "commandGroupStr",
          "old_text": null,
          "new_text": "commandGroupStr(cmd->group)",
          "old_line_content": "    }",
          "new_line_content": "    addReplyBulkCString(c, commandGroupStr(cmd->group));",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->complexity)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->complexity);",
          "content_same": false
        },
        {
          "line": 7024,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--save\")",
          "old_line_content": "                         * to the options, so it will become `--save \"\" --config value`.",
          "new_line_content": "                        !strcasecmp(argv[j], \"--save\"))",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": null,
          "new_api": "moduleNameFromCommand",
          "old_text": null,
          "new_text": "moduleNameFromCommand(cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, moduleNameFromCommand(cmd));",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": null,
          "new_api": "addReplyDocFlagsForCommand",
          "old_text": null,
          "new_text": "addReplyDocFlagsForCommand(c, cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyDocFlagsForCommand(c, cmd);",
          "content_same": false
        },
        {
          "line": 7033,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\\\"\\\"\")",
          "old_line_content": "                         * In this case, we append an empty \"\" config value to the options,",
          "new_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->deprecated_since)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->deprecated_since);",
          "content_same": false
        },
        {
          "line": 7036,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--save\")",
          "old_line_content": "                    }",
          "new_line_content": "                    else if ((j == argc-1) && !strcasecmp(argv[j], \"--save\")) {",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, cmd->replaced_by)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulkCString(c, cmd->replaced_by);",
          "content_same": false
        },
        {
          "line": 7040,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\\\"\\\"\")",
          "old_line_content": "                        /* Special case: handle some things like `--sentinel --config value`.",
          "new_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "content_same": false
        },
        {
          "line": 7043,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[j], \"--sentinel\")",
          "old_line_content": "                         * We are doing it to be compatible with pre 7.0 behavior (which we",
          "new_line_content": "                        !strcasecmp(argv[j], \"--sentinel\"))",
          "content_same": false
        },
        {
          "line": 7050,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\")",
          "old_line_content": "                         * It is a pseudo config option with no value. In this case, do nothing.",
          "new_line_content": "                        options = sdscat(options, \"\");",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(firstkey, c->key_specs[i].bs.index.pos)",
          "old_line_content": "        /* For lastkey we use unsigned comparison to handle negative values correctly */",
          "new_line_content": "        firstkey = min(firstkey, c->key_specs[i].bs.index.pos);",
          "content_same": false
        },
        {
          "line": 5005,
          "old_api": null,
          "new_api": "addReplyCommandArgList",
          "old_text": null,
          "new_text": "addReplyCommandArgList(c, cmd->args, cmd->num_args)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandArgList(c, cmd->args, cmd->num_args);",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c, \"subcommands\")",
          "old_line_content": "/* Helper for COMMAND GETKEYS and GETKEYSANDFLAGS */",
          "new_line_content": "        addReplyBulkCString(c, \"subcommands\");",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": null,
          "new_api": "addReplyCommandSubCommands",
          "old_text": null,
          "new_text": "addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1)",
          "old_line_content": "void getKeysSubcommandImpl(client *c, int with_flags) {",
          "new_line_content": "        addReplyCommandSubCommands(c, cmd, addReplyCommandDocs, 1);",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max((unsigned)lastkey, (unsigned)lastkey_abs_index)",
          "old_line_content": "        /* Couldn't find range specs, the legacy range spec will remain empty, and we set the movablekeys flag. */",
          "new_line_content": "        lastkey = max((unsigned)lastkey, (unsigned)lastkey_abs_index);",
          "content_same": false
        },
        {
          "line": 7058,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options, \"\")",
          "old_line_content": "                    handled_last_config_arg = 1;",
          "new_line_content": "                        options = sdscat(options, \"\");",
          "content_same": false
        },
        {
          "line": 7065,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv_tmp, argc_tmp)",
          "old_line_content": "                handled_last_config_arg = 1;",
          "new_line_content": "                sdsfreesplitres(argv_tmp, argc_tmp);",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(firstkey != 0)",
          "old_line_content": "    c->legacy_range_key_spec.find_keys_type = KSPEC_FK_RANGE;",
          "new_line_content": "    serverAssert(firstkey != 0);",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(lastkey != 0)",
          "old_line_content": "    c->legacy_range_key_spec.fk.range.lastkey = lastkey < 0 ? lastkey : (lastkey-firstkey); /* in the \"range\" spec, lastkey is relative to firstkey */",
          "new_line_content": "    serverAssert(lastkey != 0);",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid command specified\")",
          "old_line_content": "    } else if ((cmd->arity > 0 && cmd->arity != c->argc-2) ||",
          "new_line_content": "        addReplyError(c,\"Invalid command specified\");",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": null,
          "new_api": "doesCommandHaveKeys",
          "old_text": null,
          "new_text": "doesCommandHaveKeys(cmd)",
          "old_line_content": "    {",
          "new_line_content": "    } else if (!doesCommandHaveKeys(cmd)) {",
          "content_same": false
        },
        {
          "line": 7068,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(argv[j])",
          "old_line_content": "        }",
          "new_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 7069,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 7075,
          "old_api": null,
          "new_api": "loadServerConfig",
          "old_text": null,
          "new_text": "loadServerConfig(server.configfile, config_from_stdin, options)",
          "old_line_content": "",
          "new_line_content": "        loadServerConfig(server.configfile, config_from_stdin, options);",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid number of arguments specified for command\")",
          "old_line_content": "        if (cmd->flags & CMD_NO_MANDATORY_KEYS) {",
          "new_line_content": "        addReplyError(c,\"Invalid number of arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 7076,
          "old_api": null,
          "new_api": "loadSentinelConfigFromQueue",
          "old_text": null,
          "new_text": "loadSentinelConfigFromQueue()",
          "old_line_content": "    /* Do system checks */",
          "new_line_content": "        if (server.sentinel_mode) loadSentinelConfigFromQueue();",
          "content_same": false
        },
        {
          "line": 7077,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(options)",
          "old_line_content": "#ifdef __linux__",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "sentinelCheckConfigFile",
          "old_text": null,
          "new_text": "sentinelCheckConfigFile()",
          "old_line_content": "    sds err_msg = NULL;",
          "new_line_content": "    if (server.sentinel_mode) sentinelCheckConfigFile();",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": null,
          "new_api": "getKeysFromCommandWithSpecs",
          "old_text": null,
          "new_text": "getKeysFromCommandWithSpecs(cmd,c->argv+2,c->argc-2,GET_KEYSPEC_DEFAULT,&result)",
          "old_line_content": "        }",
          "new_line_content": "    if (!getKeysFromCommandWithSpecs(cmd,c->argv+2,c->argc-2,GET_KEYSPEC_DEFAULT,&result)) {",
          "content_same": false
        },
        {
          "line": 7083,
          "old_api": null,
          "new_api": "linuxMemoryWarnings",
          "old_text": null,
          "new_text": "linuxMemoryWarnings()",
          "old_line_content": "    }",
          "new_line_content": "    linuxMemoryWarnings();",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid arguments specified for command\")",
          "old_line_content": "            if (!with_flags) {",
          "new_line_content": "            addReplyError(c,\"Invalid arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 7085,
          "old_api": null,
          "new_api": "checkXenClocksource",
          "old_text": null,
          "new_text": "checkXenClocksource(&err_msg)",
          "old_line_content": "    int ret;",
          "new_line_content": "    if (checkXenClocksource(&err_msg) < 0) {",
          "content_same": false
        },
        {
          "line": 7087,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(err_msg)",
          "old_line_content": "        if (ret < 0) {",
          "new_line_content": "        sdsfree(err_msg);",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "ACLGetCommandID",
          "old_text": null,
          "new_text": "ACLGetCommandID(subcommand->fullname)",
          "old_line_content": "/* Set implicit ACl categories (see comment above the definition of",
          "new_line_content": "    subcommand->id = ACLGetCommandID(subcommand->fullname); /* Assign the ID used for ACL. */",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(declared_name)",
          "old_line_content": "void setImplicitACLCategories(struct redisCommand *c) {",
          "new_line_content": "    serverAssert(dictAdd(parent->subcommands_dict, sdsnew(declared_name), subcommand) == DICT_OK);",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[result.keys[j].pos+2])",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulk(c,c->argv[result.keys[j].pos+2]);",
          "content_same": false
        },
        {
          "line": 5044,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "    }",
          "new_line_content": "                addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": null,
          "new_api": "addReplyFlagsForKeyArgs",
          "old_text": null,
          "new_text": "addReplyFlagsForKeyArgs(c,result.keys[j].flags)",
          "old_line_content": "}",
          "new_line_content": "                addReplyFlagsForKeyArgs(c,result.keys[j].flags);",
          "content_same": false
        },
        {
          "line": 7098,
          "old_api": null,
          "new_api": "checkIgnoreWarning",
          "old_text": null,
          "new_text": "checkIgnoreWarning(\"ARM64-COW-BUG\")",
          "old_line_content": "    }",
          "new_line_content": "        if (!checkIgnoreWarning(\"ARM64-COW-BUG\")) {",
          "content_same": false
        },
        {
          "line": 7099,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Redis will now exit to prevent data corruption. \"\n                                 \"Note that it is possible to suppress this warning by setting the following config: ignore-warnings ARM64-COW-BUG\")",
          "old_line_content": "#endif /* __arm64__ */",
          "new_line_content": "            serverLog(LL_WARNING,\"Redis will now exit to prevent data corruption. \"",
          "content_same": false
        },
        {
          "line": 7101,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": null,
          "new_api": "getKeysSubcommandImpl",
          "old_text": null,
          "new_text": "getKeysSubcommandImpl(c, 0)",
          "old_line_content": "    dictIterator *di;",
          "new_line_content": "    getKeysSubcommandImpl(c, 0);",
          "content_same": false
        },
        {
          "line": 7110,
          "old_api": null,
          "new_api": "daemonize",
          "old_text": null,
          "new_text": "daemonize()",
          "old_line_content": "            REDIS_VERSION,",
          "new_line_content": "    if (background) daemonize();",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "}",
          "new_line_content": "    di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "/* COMMAND COUNT */",
          "new_line_content": "        addReplyCommandInfo(c, dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 7118,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "    } else {",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.commands)",
          "old_line_content": "    COMMAND_LIST_FILTER_ACLCAT,",
          "new_line_content": "    addReplyLongLong(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 7127,
          "old_api": null,
          "new_api": "initServer",
          "old_text": null,
          "new_text": "initServer()",
          "old_line_content": "    if (server.cluster_enabled) {",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 7129,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(NULL)",
          "old_line_content": "    }",
          "new_line_content": "    if (server.set_proc_title) redisSetProcTitle(NULL);",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": null,
          "new_api": "setImplicitACLCategories",
          "old_text": null,
          "new_text": "setImplicitACLCategories(c)",
          "old_line_content": "",
          "new_line_content": "    setImplicitACLCategories(c);",
          "content_same": false
        },
        {
          "line": 7130,
          "old_api": null,
          "new_api": "redisAsciiArt",
          "old_text": null,
          "new_text": "redisAsciiArt()",
          "old_line_content": "    if (!server.sentinel_mode) {",
          "new_line_content": "    redisAsciiArt();",
          "content_same": false
        },
        {
          "line": 7133,
          "old_api": null,
          "new_api": "clusterInit",
          "old_text": null,
          "new_text": "clusterInit()",
          "old_line_content": "    }",
          "new_line_content": "        clusterInit();",
          "content_same": false
        },
        {
          "line": 7136,
          "old_api": null,
          "new_api": "moduleInitModulesSystemLast",
          "old_text": null,
          "new_text": "moduleInitModulesSystemLast()",
          "old_line_content": "    if (server.cluster_enabled) {",
          "new_line_content": "        moduleInitModulesSystemLast();",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": null,
          "new_api": "populateCommandLegacyRangeSpec",
          "old_text": null,
          "new_text": "populateCommandLegacyRangeSpec(c)",
          "old_line_content": "    /* Handle subcommands */",
          "new_line_content": "    populateCommandLegacyRangeSpec(c);",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": null,
          "new_api": "ACLGetCommandID",
          "old_text": null,
          "new_text": "ACLGetCommandID(c->fullname)",
          "old_line_content": "            struct redisCommand *sub = c->subcommands+j;",
          "new_line_content": "    c->id = ACLGetCommandID(c->fullname);",
          "content_same": false
        },
        {
          "line": 7140,
          "old_api": null,
          "new_api": "initListeners",
          "old_text": null,
          "new_text": "initListeners()",
          "old_line_content": "",
          "new_line_content": "    initListeners();",
          "content_same": false
        },
        {
          "line": 7142,
          "old_api": null,
          "new_api": "clusterInitLast",
          "old_text": null,
          "new_text": "clusterInitLast()",
          "old_line_content": "        /* Things not needed when running in Sentinel mode. */",
          "new_line_content": "        clusterInitLast();",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": null,
          "new_api": "catSubCommandFullname",
          "old_text": null,
          "new_text": "catSubCommandFullname(c->declared_name, sub->declared_name)",
          "old_line_content": "        }",
          "new_line_content": "            sub->fullname = catSubCommandFullname(c->declared_name, sub->declared_name);",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": null,
          "new_api": "populateCommandStructure",
          "old_text": null,
          "new_text": "populateCommandStructure(sub)",
          "old_line_content": "    }",
          "new_line_content": "            if (populateCommandStructure(sub) == C_ERR)",
          "content_same": false
        },
        {
          "line": 7148,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Server initialized\")",
          "old_line_content": "        if (server.cluster_enabled) {",
          "new_line_content": "        serverLog(LL_NOTICE,\"Server initialized\");",
          "content_same": false
        },
        {
          "line": 7150,
          "old_api": null,
          "new_api": "loadDataFromDisk",
          "old_text": null,
          "new_text": "loadDataFromDisk()",
          "old_line_content": "        }",
          "new_line_content": "        loadDataFromDisk();",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": null,
          "new_api": "commandAddSubcommand",
          "old_text": null,
          "new_text": "commandAddSubcommand(c, sub, sub->declared_name)",
          "old_line_content": "}",
          "new_line_content": "            commandAddSubcommand(c, sub, sub->declared_name);",
          "content_same": false
        },
        {
          "line": 5103,
          "old_api": null,
          "new_api": "moduleGetHandleByName",
          "old_text": null,
          "new_text": "moduleGetHandleByName(filter->arg)",
          "old_line_content": "            if (!filter->cache.valid) {",
          "new_line_content": "                filter->cache.u.module_handle = moduleGetHandleByName(filter->arg);",
          "content_same": false
        },
        {
          "line": 7151,
          "old_api": null,
          "new_api": "aofOpenIfNeededOnServerStart",
          "old_text": null,
          "new_text": "aofOpenIfNeededOnServerStart()",
          "old_line_content": "",
          "new_line_content": "        aofOpenIfNeededOnServerStart();",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": null,
          "new_api": "moduleIsModuleCommand",
          "old_text": null,
          "new_text": "moduleIsModuleCommand(filter->cache.u.module_handle, cmd)",
          "old_line_content": "            }",
          "new_line_content": "            return !moduleIsModuleCommand(filter->cache.u.module_handle, cmd);",
          "content_same": false
        },
        {
          "line": 7152,
          "old_api": null,
          "new_api": "aofDelHistoryFiles",
          "old_text": null,
          "new_text": "aofDelHistoryFiles()",
          "old_line_content": "        for (j = 0; j < CONN_TYPE_MAX; j++) {",
          "new_line_content": "        aofDelHistoryFiles();",
          "content_same": false
        },
        {
          "line": 7154,
          "old_api": null,
          "new_api": "verifyClusterConfigWithData",
          "old_text": null,
          "new_text": "verifyClusterConfigWithData()",
          "old_line_content": "            if (listener->ct == NULL)",
          "new_line_content": "            serverAssert(verifyClusterConfigWithData() == C_OK);",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": null,
          "new_api": "ACLGetCommandCategoryFlagByName",
          "old_text": null,
          "new_text": "ACLGetCommandCategoryFlagByName(filter->arg)",
          "old_line_content": "                return 1; /* Invalid ACL category */",
          "new_line_content": "                filter->cache.u.aclcat = ACLGetCommandCategoryFlagByName(filter->arg);",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "",
          "new_line_content": "            return !stringmatchlen(filter->arg, sdslen(filter->arg), cmd->fullname, sdslen(cmd->fullname), 1);",
          "content_same": false
        },
        {
          "line": 7167,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Invalid filter type %d\", filter->type)",
          "old_line_content": "void commandListWithFilter(client *c, dict *commands, commandListFilter filter, int *numcmds) {",
          "new_line_content": "            serverPanic(\"Invalid filter type %d\", filter->type);",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->declared_name)",
          "old_line_content": "        /* Populate an additional dictionary that will be unaffected",
          "new_line_content": "        c->fullname = sdsnew(c->declared_name);",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": null,
          "new_api": "populateCommandStructure",
          "old_text": null,
          "new_text": "populateCommandStructure(c)",
          "old_line_content": "         * by rename-command statements in redis.conf. */",
          "new_line_content": "        if (populateCommandStructure(c) == C_ERR)",
          "content_same": false
        },
        {
          "line": 7174,
          "old_api": null,
          "new_api": "sentinelIsRunning",
          "old_text": null,
          "new_text": "sentinelIsRunning()",
          "old_line_content": "    }",
          "new_line_content": "        sentinelIsRunning();",
          "content_same": false
        },
        {
          "line": 7176,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "old_line_content": "    /* Warning the user about suspicious maxmemory setting. */",
          "new_line_content": "            redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(c->fullname)",
          "old_line_content": "    }",
          "new_line_content": "        retval1 = dictAdd(server.commands, sdsdup(c->fullname), c);",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        }",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(c->fullname)",
          "old_line_content": "void resetCommandTableStats(dict* commands) {",
          "new_line_content": "        retval2 = dictAdd(server.orig_commands, sdsdup(c->fullname), c);",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "old_line_content": "    struct redisCommand *c;",
          "new_line_content": "        serverAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": null,
          "new_api": "shouldFilterFromCommandList",
          "old_text": null,
          "new_text": "shouldFilterFromCommandList(cmd,&filter)",
          "old_line_content": "        if (cmd->subcommands_dict) {",
          "new_line_content": "        if (!shouldFilterFromCommandList(cmd,&filter)) {",
          "content_same": false
        },
        {
          "line": 7177,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"READY=1\\n\")",
          "old_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024*1024) {",
          "new_line_content": "            redisCommunicateSystemd(\"READY=1\\n\");",
          "content_same": false
        },
        {
          "line": 7183,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "content_same": false
        },
        {
          "line": 5138,
          "old_api": null,
          "new_api": "commandListWithFilter",
          "old_text": null,
          "new_text": "commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds)",
          "old_line_content": "",
          "new_line_content": "            commandListWithFilter(c, cmd->subcommands_dict, filter, numcmds);",
          "content_same": false
        },
        {
          "line": 7186,
          "old_api": null,
          "new_api": "redisSetCpuAffinity",
          "old_text": null,
          "new_text": "redisSetCpuAffinity(server.server_cpulist)",
          "old_line_content": "    return 0;",
          "new_line_content": "    redisSetCpuAffinity(server.server_cpulist);",
          "content_same": false
        },
        {
          "line": 7187,
          "old_api": null,
          "new_api": "setOOMScoreAdj",
          "old_text": null,
          "new_text": "setOOMScoreAdj(-1)",
          "old_line_content": "}",
          "new_line_content": "    setOOMScoreAdj(-1);",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    dictEntry *de;",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(commands)",
          "old_line_content": "        c->rejected_calls = 0;",
          "new_line_content": "    di = dictGetSafeIterator(commands);",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        c->failed_calls = 0;",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        if(c->latency_histogram) {",
          "new_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 7189,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "/* The End */",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 7190,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(commands)",
          "old_line_content": "        (*numcmds)++;",
          "new_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        if (cmd->subcommands_dict) {",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": null,
          "new_api": "hdr_close",
          "old_text": null,
          "new_text": "hdr_close(c->latency_histogram)",
          "old_line_content": "    }",
          "new_line_content": "            hdr_close(c->latency_histogram);",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "        }",
          "new_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "resetCommandTableStats",
          "old_text": null,
          "new_text": "resetCommandTableStats(c->subcommands_dict)",
          "old_line_content": "void resetErrorTableStats(void) {",
          "new_line_content": "            resetCommandTableStats(c->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": null,
          "new_api": "commandListWithoutFilter",
          "old_text": null,
          "new_text": "commandListWithoutFilter(c, cmd->subcommands_dict, numcmds)",
          "old_line_content": "",
          "new_line_content": "            commandListWithoutFilter(c, cmd->subcommands_dict, numcmds);",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": null,
          "new_api": "raxFreeWithCallback",
          "old_text": null,
          "new_text": "raxFreeWithCallback(server.errors, zfree)",
          "old_line_content": "",
          "new_line_content": "    raxFreeWithCallback(server.errors, zfree);",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "int redisOpArrayAppend(redisOpArray *oa, int dbid, robj **argv, int argc, int target) {",
          "new_line_content": "    server.errors = raxNew();",
          "content_same": false
        },
        {
          "line": 5170,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"filterby\")",
          "old_line_content": "                filter.type = COMMAND_LIST_FILTER_ACLCAT;",
          "new_line_content": "        if (!strcasecmp(opt,\"filterby\") && moreargs == 2) {",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(filtertype,\"module\")",
          "old_line_content": "                filter.type = COMMAND_LIST_FILTER_PATTERN;",
          "new_line_content": "            if (!strcasecmp(filtertype,\"module\")) {",
          "content_same": false
        },
        {
          "line": 5176,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(filtertype,\"pattern\")",
          "old_line_content": "            }",
          "new_line_content": "            } else if (!strcasecmp(filtertype,\"pattern\")) {",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(oa->ops,sizeof(redisOp)*oa->capacity)",
          "old_line_content": "    op->target = target;",
          "new_line_content": "        oa->ops = zrealloc(oa->ops,sizeof(redisOp)*oa->capacity);",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            i += 2;",
          "new_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "    int numcmds = 0;",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(op->argv[j])",
          "old_line_content": "}",
          "new_line_content": "            decrRefCount(op->argv[j]);",
          "content_same": false
        },
        {
          "line": 3148,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(op->argv)",
          "old_line_content": "",
          "new_line_content": "        zfree(op->argv);",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": null,
          "new_api": "commandListWithoutFilter",
          "old_text": null,
          "new_text": "commandListWithoutFilter(c, server.commands, &numcmds)",
          "old_line_content": "",
          "new_line_content": "        commandListWithoutFilter(c, server.commands, &numcmds);",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(!oa->numops)",
          "old_line_content": "int isContainerCommandBySds(sds s) {",
          "new_line_content": "    serverAssert(!oa->numops);",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,replylen,numcmds)",
          "old_line_content": "    int i;",
          "new_line_content": "    setDeferredArrayLen(c,replylen,numcmds);",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, s)",
          "old_line_content": "struct redisCommand *lookupSubcommand(struct redisCommand *container, sds sub_name) {",
          "new_line_content": "    struct redisCommand *base_cmd = dictFetchValue(server.commands, s);",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(container->subcommands_dict, sub_name)",
          "old_line_content": " * If `strict` is not 0 we expect argc to be exact (i.e. argc==2",
          "new_line_content": "    return dictFetchValue(container->subcommands_dict, sub_name);",
          "content_same": false
        },
        {
          "line": 5211,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "    } else {",
          "new_line_content": "        di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        for (i = 2; i < c->argc; i++) {",
          "new_line_content": "            addReplyCommandInfo(c, dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, c->argc-2)",
          "old_line_content": "}",
          "new_line_content": "        addReplyArrayLen(c, c->argc-2);",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "lookupCommandBySds",
          "old_text": null,
          "new_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "old_line_content": "/* COMMAND DOCS [command-name [command-name ...]] */",
          "new_line_content": "            addReplyCommandInfo(c, lookupCommandBySds(c->argv[i]->ptr));",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(commands, argv[0]->ptr)",
          "old_line_content": "        /* Note: It is possible that base_cmd->proc==NULL (e.g. CONFIG) */",
          "new_line_content": "    struct redisCommand *base_cmd = dictFetchValue(commands, argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "        }",
          "new_line_content": "        di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    } else {",
          "new_line_content": "            struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "        /* Reply with an array of the requested commands (if we find them) */",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "addReplyCommandDocs",
          "old_text": null,
          "new_text": "addReplyCommandDocs(c, cmd)",
          "old_line_content": "        int numcmds = 0;",
          "new_line_content": "            addReplyCommandDocs(c, cmd);",
          "content_same": false
        },
        {
          "line": 5238,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        for (i = 2; i < c->argc; i++) {",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": null,
          "new_api": "lookupCommandBySds",
          "old_text": null,
          "new_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "old_line_content": "            numcmds++;",
          "new_line_content": "            struct redisCommand *cmd = lookupCommandBySds(c->argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(cmd->fullname)",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": null,
          "new_api": "addReplyCommandDocs",
          "old_text": null,
          "new_text": "addReplyCommandDocs(c, cmd)",
          "old_line_content": "}",
          "new_line_content": "            addReplyCommandDocs(c, cmd);",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(strings,argc)",
          "old_line_content": "    robj objects[argc];",
          "new_line_content": "        sdsfreesplitres(strings,argc);",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": null,
          "new_api": "setDeferredMapLen",
          "old_text": null,
          "new_text": "setDeferredMapLen(c,replylen,numcmds)",
          "old_line_content": "void commandGetKeysCommand(client *c) {",
          "new_line_content": "        setDeferredMapLen(c,replylen,numcmds);",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(argc > 0)",
          "old_line_content": "        argv[j] = &objects[j];",
          "new_line_content": "    serverAssert(argc > 0); /* Avoid warning `-Wmaybe-uninitialized` in lookupCommandLogic() */",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": null,
          "new_api": "getKeysSubcommand",
          "old_text": null,
          "new_text": "getKeysSubcommand(c)",
          "old_line_content": "    const char *help[] = {",
          "new_line_content": "    getKeysSubcommand(c);",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": null,
          "new_api": "lookupCommandLogic",
          "old_text": null,
          "new_text": "lookupCommandLogic(commands,argv,argc,1)",
          "old_line_content": "struct redisCommand *lookupCommandBySds(sds s) {",
          "new_line_content": "    struct redisCommand *cmd = lookupCommandLogic(commands,argv,argc,1);",
          "content_same": false
        },
        {
          "line": 3224,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(s)",
          "old_line_content": "}",
          "new_line_content": "    sds name = sdsnew(s);",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": null,
          "new_api": "lookupCommandBySdsLogic",
          "old_text": null,
          "new_text": "lookupCommandBySdsLogic(commands,name)",
          "old_line_content": "struct redisCommand *lookupCommandByCString(const char *s) {",
          "new_line_content": "    cmd = lookupCommandBySdsLogic(commands,name);",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": null,
          "new_api": "lookupCommandByCStringLogic",
          "old_text": null,
          "new_text": "lookupCommandByCStringLogic(server.commands,s)",
          "old_line_content": " * redis.conf rename-command statement.",
          "new_line_content": "    return lookupCommandByCStringLogic(server.commands,s);",
          "content_same": false
        },
        {
          "line": 5284,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "void bytesToHuman(char *s, size_t size, unsigned long long n) {",
          "new_line_content": "    addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 3243,
          "old_api": null,
          "new_api": "lookupCommandLogic",
          "old_text": null,
          "new_text": "lookupCommandLogic(server.commands, argv, argc, 0)",
          "old_line_content": "",
          "new_line_content": "    struct redisCommand *cmd = lookupCommandLogic(server.commands, argv, argc, 0);",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": null,
          "new_api": "lookupCommandLogic",
          "old_text": null,
          "new_text": "lookupCommandLogic(server.orig_commands, argv, argc, 0)",
          "old_line_content": "int mustObeyClient(client *c) {",
          "new_line_content": "    if (!cmd) cmd = lookupCommandLogic(server.orig_commands, argv, argc, 0);",
          "content_same": false
        },
        {
          "line": 5294,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%lluB\",n)",
          "old_line_content": "        d = (double)n/(1024*1024);",
          "new_line_content": "        snprintf(s,size,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 5297,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%.2fK\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024);",
          "new_line_content": "        snprintf(s,size,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%.2fM\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024*1024);",
          "new_line_content": "        snprintf(s,size,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%.2fG\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024*1024*1024);",
          "new_line_content": "        snprintf(s,size,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%.2fT\",d)",
          "old_line_content": "        /* Let's hope we never need this */",
          "new_line_content": "        snprintf(s,size,\"%.2fT\",d);",
          "content_same": false
        },
        {
          "line": 5309,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%.2fP\",d)",
          "old_line_content": "}",
          "new_line_content": "        snprintf(s,size,\"%.2fP\",d);",
          "content_same": false
        },
        {
          "line": 3263,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "}",
          "new_line_content": "        if (server.masterhost == NULL && (server.repl_backlog || listLength(server.slaves) != 0))",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(s,size,\"%lluB\",n)",
          "old_line_content": "sds fillPercentileDistributionLatencies(sds info, const char* histogram_name, struct hdr_histogram* histogram) {",
          "new_line_content": "        snprintf(s,size,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": null,
          "new_api": "trimDoubleString",
          "old_text": null,
          "new_text": "trimDoubleString(fbuf, len)",
          "old_line_content": "        }",
          "new_line_content": "        trimDoubleString(fbuf, len);",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "hdr_value_at_percentile",
          "old_text": null,
          "new_text": "hdr_value_at_percentile(histogram,server.latency_tracking_info_percentiles[j])",
          "old_line_content": "    return info;",
          "new_line_content": "            ((double)hdr_value_at_percentile(histogram,server.latency_tracking_info_percentiles[j]))/1000.0f);",
          "content_same": false
        },
        {
          "line": 5326,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(info,\",\",1)",
          "old_line_content": "",
          "new_line_content": "            info = sdscatlen(info,\",\",1);",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\"\\r\\n\")",
          "old_line_content": "    switch (replstate) {",
          "new_line_content": "    info = sdscatprintf(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": null,
          "new_api": "isPausedActions",
          "old_text": null,
          "new_text": "isPausedActions(PAUSE_ACTION_REPLICA)",
          "old_line_content": "    if (target & PROPAGATE_REPL)",
          "new_line_content": "    serverAssert(!(isPausedActions(PAUSE_ACTION_REPLICA) &&",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": null,
          "new_api": "feedAppendOnlyFile",
          "old_text": null,
          "new_text": "feedAppendOnlyFile(dbid,argv,argc)",
          "old_line_content": "/* Used inside commands to schedule the propagation of additional commands",
          "new_line_content": "        feedAppendOnlyFile(dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "old_line_content": " *",
          "new_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 5358,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(len + 1)",
          "old_line_content": "}",
          "new_line_content": "    char *new = *tmp = zmalloc(len + 1);",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": null,
          "new_api": "memmapchars",
          "old_text": null,
          "new_text": "memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs,\n                       sizeof(unsafe_info_chars)-1)",
          "old_line_content": "    struct redisCommand *c;",
          "new_line_content": "    return memmapchars(new, len, unsafe_info_chars, unsafe_info_chars_substs,",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": null,
          "new_api": "shouldPropagate",
          "old_text": null,
          "new_text": "shouldPropagate(target)",
          "old_line_content": "        argvcopy[j] = argv[j];",
          "new_line_content": "    if (!shouldPropagate(target))",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(argv[j])",
          "old_line_content": "/* It is possible to call the function forceCommandPropagation() inside a",
          "new_line_content": "        incrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 5370,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": null,
          "new_api": "redisOpArrayAppend",
          "old_text": null,
          "new_text": "redisOpArrayAppend(&server.also_propagate,dbid,argvcopy,argc,target)",
          "old_line_content": " * specific command execution into AOF / Replication. */",
          "new_line_content": "    redisOpArrayAppend(&server.also_propagate,dbid,argvcopy,argc,target);",
          "content_same": false
        },
        {
          "line": 5374,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"\n                \",rejected_calls=%lld,failed_calls=%lld\\r\\n\",\n                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls),\n                c->rejected_calls, c->failed_calls)",
          "old_line_content": "                c->rejected_calls, c->failed_calls);",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->fullname)",
          "old_line_content": "        if (c->subcommands_dict) {",
          "new_line_content": "                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe), c->calls, c->microseconds,",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(c->cmd->flags & (CMD_WRITE | CMD_MAY_REPLICATE))",
          "old_line_content": "/* Avoid that the executed command is propagated at all. This way we",
          "new_line_content": "    serverAssert(c->cmd->flags & (CMD_WRITE | CMD_MAY_REPLICATE));",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "    }",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 5383,
          "old_api": null,
          "new_api": "genRedisInfoStringCommandStats",
          "old_text": null,
          "new_text": "genRedisInfoStringCommandStats(info, c->subcommands_dict)",
          "old_line_content": "    return info;",
          "new_line_content": "            info = genRedisInfoStringCommandStats(info, c->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 5386,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "/* Writes the ACL metrics to the info */",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5393,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n         \"acl_access_denied_auth:%lld\\r\\n\"\n         \"acl_access_denied_cmd:%lld\\r\\n\"\n         \"acl_access_denied_key:%lld\\r\\n\"\n         \"acl_access_denied_channel:%lld\\r\\n\",\n         server.acl_info.user_auth_failures,\n         server.acl_info.invalid_cmd_accesses,\n         server.acl_info.invalid_key_accesses,\n         server.acl_info.invalid_channel_accesses)",
          "old_line_content": "         server.acl_info.user_auth_failures,",
          "new_line_content": "    info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": null,
          "new_api": "slowlogPushEntryIfNeeded",
          "old_text": null,
          "new_text": "slowlogPushEntryIfNeeded(c,argv,argc,duration)",
          "old_line_content": " * If needed it will allocate the histogram memory and trim the duration to the upper/lower tracking limits*/",
          "new_line_content": "    slowlogPushEntryIfNeeded(c,argv,argc,duration);",
          "content_same": false
        },
        {
          "line": 5414,
          "old_api": null,
          "new_api": "fillPercentileDistributionLatencies",
          "old_text": null,
          "new_text": "fillPercentileDistributionLatencies(info,\n                getSafeInfoString(c->fullname, sdslen(c->fullname), &tmpsafe),\n                c->latency_histogram)",
          "old_line_content": "        if (c->subcommands_dict) {",
          "new_line_content": "            info = fillPercentileDistributionLatencies(info,",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "    }",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": null,
          "new_api": "genRedisInfoStringLatencyStats",
          "old_text": null,
          "new_text": "genRedisInfoStringLatencyStats(info, c->subcommands_dict)",
          "old_line_content": "    return info;",
          "new_line_content": "            info = genRedisInfoStringLatencyStats(info, c->subcommands_dict);",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": null,
          "new_api": "hdr_init",
          "old_text": null,
          "new_text": "hdr_init(LATENCY_HISTOGRAM_MIN_VALUE,LATENCY_HISTOGRAM_MAX_VALUE,LATENCY_HISTOGRAM_PRECISION,latency_histogram)",
          "old_line_content": " * multiple separated commands. Note that alsoPropagate() is not affected",
          "new_line_content": "        hdr_init(LATENCY_HISTOGRAM_MIN_VALUE,LATENCY_HISTOGRAM_MAX_VALUE,LATENCY_HISTOGRAM_PRECISION,latency_histogram);",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": null,
          "new_api": "hdr_record_value",
          "old_text": null,
          "new_text": "hdr_record_value(*latency_histogram,duration_hist)",
          "old_line_content": " * by CLIENT_PREVENT_PROP flag. */",
          "new_line_content": "    hdr_record_value(*latency_histogram,duration_hist);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "/* Takes a null terminated sections list, and adds them to the dict. */",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5431,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(*sections)",
          "old_line_content": "}",
          "new_line_content": "        sds section = sdsnew(*sections);",
          "content_same": false
        },
        {
          "line": 5432,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(section_dict, section, NULL)",
          "old_line_content": "",
          "new_line_content": "        if (dictAdd(section_dict, section, NULL)==DICT_ERR)",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(section)",
          "old_line_content": "/* Cached copy of the default sections, as an optimization. */",
          "new_line_content": "            sdsfree(section);",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(sec)",
          "old_line_content": " * 'defaults' is an optional null terminated list of default sections.",
          "new_line_content": "        dictRelease(sec);",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(rop->target)",
          "old_line_content": "        /* We use dbid=-1 to indicate we do not want to replicate select */",
          "new_line_content": "        serverAssert(rop->target);",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&stringSetDictType)",
          "old_line_content": "",
          "new_line_content": "        cached_default_info_sections = dictCreate(&stringSetDictType);",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": null,
          "new_api": "propagateNow",
          "old_text": null,
          "new_text": "propagateNow(-1,&shared.exec,1,PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "",
          "new_line_content": "        propagateNow(-1,&shared.exec,1,PROPAGATE_AOF|PROPAGATE_REPL);",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": null,
          "new_api": "redisOpArrayFree",
          "old_text": null,
          "new_text": "redisOpArrayFree(&server.also_propagate)",
          "old_line_content": " * Execution units can be nested and are not necessarily starts with Redis command.",
          "new_line_content": "    redisOpArrayFree(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 5470,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(argc,16)",
          "old_line_content": "            if (out_all) *out_all = 1;",
          "new_line_content": "    dictExpand(section_dict, min(argc,16));",
          "content_same": false
        },
        {
          "line": 5472,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr,\"default\")",
          "old_line_content": "            if (out_everything) *out_everything = 1;",
          "new_line_content": "        if (!strcasecmp(argv[i]->ptr,\"default\")) {",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": null,
          "new_api": "addInfoSectionsToDict",
          "old_text": null,
          "new_text": "addInfoSectionsToDict(section_dict, defaults)",
          "old_line_content": "            if (out_all) *out_all = 1;",
          "new_line_content": "            addInfoSectionsToDict(section_dict, defaults);",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr,\"all\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(argv[i]->ptr,\"all\")) {",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(argv[i]->ptr)",
          "old_line_content": "    return section_dict;",
          "new_line_content": "            sds section = sdsnew(argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 5481,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(section_dict, section, NULL)",
          "old_line_content": "}",
          "new_line_content": "            if (dictAdd(section_dict, section, NULL) != DICT_OK)",
          "content_same": false
        },
        {
          "line": 5482,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(section)",
          "old_line_content": "",
          "new_line_content": "                sdsfree(section);",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "firePostExecutionUnitJobs",
          "old_text": null,
          "new_text": "firePostExecutionUnitJobs()",
          "old_line_content": "",
          "new_line_content": "    firePostExecutionUnitJobs();",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": null,
          "new_api": "propagatePendingCommands",
          "old_text": null,
          "new_text": "propagatePendingCommands()",
          "old_line_content": "",
          "new_line_content": "    propagatePendingCommands();",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].blocking_keys)",
          "old_line_content": "        *blocking_keys = bkeys;",
          "new_line_content": "        bkeys += dictSize(server.db[j].blocking_keys);",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": null,
          "new_api": "modulePostExecutionUnitOperations",
          "old_text": null,
          "new_text": "modulePostExecutionUnitOperations()",
          "old_line_content": " * * ERROR_COMMAND_REJECTED - update rejected_calls",
          "new_line_content": "    modulePostExecutionUnitOperations();",
          "content_same": false
        },
        {
          "line": 5496,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].blocking_keys_unblock_on_nokey)",
          "old_line_content": "    if (blocking_keys_on_nokey)",
          "new_line_content": "        bkeys_on_nokey += dictSize(server.db[j].blocking_keys_unblock_on_nokey);",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].watched_keys)",
          "old_line_content": "        *blocking_keys_on_nokey = bkeys_on_nokey;",
          "new_line_content": "        wkeys += dictSize(server.db[j].watched_keys);",
          "content_same": false
        },
        {
          "line": 5511,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 5518,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"server\")",
          "old_line_content": "",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"server\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5536,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            call_uname = 0;",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5540,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            \"redis_version:%s\\r\\n\", REDIS_VERSION,",
          "new_line_content": "            uname(&name);",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"redis_version:%s\\r\\n\", REDIS_VERSION,\n            \"redis_git_sha1:%s\\r\\n\", redisGitSHA1(),\n            \"redis_git_dirty:%i\\r\\n\", strtol(redisGitDirty(),NULL,10) > 0,\n            \"redis_build_id:%s\\r\\n\", redisBuildIdString(),\n            \"redis_mode:%s\\r\\n\", mode,\n            \"os:%s\", name.sysname,\n            \" %s\", name.release,\n            \" %s\\r\\n\", name.machine,\n            \"arch_bits:%i\\r\\n\", server.arch_bits,\n            \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n            \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n            \"atomicvar_api:%s\\r\\n\", REDIS_ATOMIC_API,\n            \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n            \"process_id:%I\\r\\n\", (int64_t) getpid(),\n            \"process_supervised:%s\\r\\n\", supervised,\n            \"run_id:%s\\r\\n\", server.runid,\n            \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n            \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n            \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n            \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime/(3600*24)),\n            \"hz:%i\\r\\n\", server.hz,\n            \"configured_hz:%i\\r\\n\", server.config_hz,\n            \"lru_clock:%u\\r\\n\", server.lruclock,\n            \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n            \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n            \"io_threads_active:%i\\r\\n\", server.io_threads_active)",
          "old_line_content": "            \"redis_mode:%s\\r\\n\", mode,",
          "new_line_content": "        info = sdscatfmt(info, \"# Server\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "            \" %s\", name.release,",
          "new_line_content": "            \"redis_git_sha1:%s\\r\\n\", redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 5547,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "            \" %s\\r\\n\", name.machine,",
          "new_line_content": "            \"redis_git_dirty:%i\\r\\n\", strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": null,
          "new_api": "redisBuildIdString",
          "old_text": null,
          "new_text": "redisBuildIdString()",
          "old_line_content": "            \"arch_bits:%i\\r\\n\", server.arch_bits,",
          "new_line_content": "            \"redis_build_id:%s\\r\\n\", redisBuildIdString(),",
          "content_same": false
        },
        {
          "line": 5554,
          "old_api": null,
          "new_api": "monotonicInfoString",
          "old_text": null,
          "new_text": "monotonicInfoString()",
          "old_line_content": "            \"process_supervised:%s\\r\\n\", supervised,",
          "new_line_content": "            \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "            \"run_id:%s\\r\\n\", server.runid,",
          "new_line_content": "            \"multiplexing_api:%s\\r\\n\", aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "            \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,",
          "new_line_content": "            \"process_id:%I\\r\\n\", (int64_t) getpid(),",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": null,
          "new_api": "isAOFLoadingContext",
          "old_text": null,
          "new_text": "isAOFLoadingContext()",
          "old_line_content": "     * called. For example this is required for avoiding double logging to monitors.*/",
          "new_line_content": "    int update_command_stats = !isAOFLoadingContext();",
          "content_same": false
        },
        {
          "line": 5573,
          "old_api": null,
          "new_api": "isShutdownInitiated",
          "old_text": null,
          "new_text": "isShutdownInitiated()",
          "old_line_content": "",
          "new_line_content": "        if (isShutdownInitiated()) {",
          "content_same": false
        },
        {
          "line": 5574,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(info,\n                \"shutdown_in_milliseconds:%I\\r\\n\",\n                (int64_t)(server.shutdown_mstime - commandTimeSnapshot()))",
          "old_line_content": "        /* get all the listeners information */",
          "new_line_content": "            info = sdscatfmt(info,",
          "content_same": false
        },
        {
          "line": 5576,
          "old_api": null,
          "new_api": "commandTimeSnapshot",
          "old_text": null,
          "new_text": "commandTimeSnapshot()",
          "old_line_content": "    }",
          "new_line_content": "                (int64_t)(server.shutdown_mstime - commandTimeSnapshot()));",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": null,
          "new_api": "getListensInfoString",
          "old_text": null,
          "new_text": "getListensInfoString(info)",
          "old_line_content": "        size_t maxin, maxout;",
          "new_line_content": "        info = getListensInfoString(info);",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "totalNumberOfStatefulKeys",
          "old_text": null,
          "new_text": "totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys)",
          "old_line_content": "            \"maxclients:%u\\r\\n\", server.maxclients,",
          "new_line_content": "        totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys);",
          "content_same": false
        },
        {
          "line": 5589,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.slaves),\n            \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n            \"maxclients:%u\\r\\n\", server.maxclients,\n            \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n            \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n            \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n            \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n            \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n            \"watching_clients:%d\\r\\n\", server.watching_clients,\n            \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long) raxSize(server.clients_timeout_table),\n            \"total_watched_keys:%lu\\r\\n\", watched_keys,\n            \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n            \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey)",
          "old_line_content": "            \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,",
          "new_line_content": "        info = sdscatprintf(info, \"# Clients\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            \"blocked_clients:%d\\r\\n\", server.blocked_clients,",
          "new_line_content": "            \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": null,
          "new_api": "getClusterConnectionsCount",
          "old_text": null,
          "new_text": "getClusterConnectionsCount()",
          "old_line_content": "            \"tracking_clients:%d\\r\\n\", server.tracking_clients,",
          "new_line_content": "            \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": null,
          "new_api": "incrCommandStatsOnError",
          "old_text": null,
          "new_text": "incrCommandStatsOnError(NULL, 0)",
          "old_line_content": "    /* setting the CLIENT_EXECUTING_COMMAND flag so we will avoid",
          "new_line_content": "    incrCommandStatsOnError(NULL, 0);",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "     * In case of blocking commands, the flag will be un-set only after successfully",
          "new_line_content": "    const long long call_timer = ustime();",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": null,
          "new_api": "enterExecutionUnit",
          "old_text": null,
          "new_text": "enterExecutionUnit(1, call_timer)",
          "old_line_content": "     * re-processing and unblock the client.*/",
          "new_line_content": "    enterExecutionUnit(1, call_timer);",
          "content_same": false
        },
        {
          "line": 5600,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(server.clients_timeout_table)",
          "old_line_content": "",
          "new_line_content": "            \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long) raxSize(server.clients_timeout_table),",
          "content_same": false
        },
        {
          "line": 5607,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"memory\")",
          "old_line_content": "        char used_memory_vm_total_hmem[64];",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"memory\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": null,
          "new_api": "monotonicGetType",
          "old_text": null,
          "new_text": "monotonicGetType()",
          "old_line_content": "    /* Clear the CLIENT_REPROCESSING_COMMAND flag after the proc is executed. */",
          "new_line_content": "    if (monotonicGetType() == MONOTONIC_CLOCK_HW)",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": null,
          "new_api": "getMonotonicUs",
          "old_text": null,
          "new_text": "getMonotonicUs()",
          "old_line_content": "    if (reprocessing_command) c->flags &= ~CLIENT_REPROCESSING_COMMAND;",
          "new_line_content": "        monotonic_start = getMonotonicUs();",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": null,
          "new_api": "exitExecutionUnit",
          "old_text": null,
          "new_text": "exitExecutionUnit()",
          "old_line_content": "",
          "new_line_content": "    exitExecutionUnit();",
          "content_same": false
        },
        {
          "line": 5618,
          "old_api": null,
          "new_api": "evictPolicyToString",
          "old_text": null,
          "new_text": "evictPolicyToString()",
          "old_line_content": "        /* Peak memory is updated from time to time by serverCron() so it",
          "new_line_content": "        const char *evict_policy = evictPolicyToString();",
          "content_same": false
        },
        {
          "line": 5619,
          "old_api": null,
          "new_api": "evalMemory",
          "old_text": null,
          "new_text": "evalMemory()",
          "old_line_content": "         * may happen that the instantaneous value is slightly bigger than",
          "new_line_content": "        long long memory_lua = evalMemory();",
          "content_same": false
        },
        {
          "line": 5620,
          "old_api": null,
          "new_api": "functionsMemory",
          "old_text": null,
          "new_text": "functionsMemory()",
          "old_line_content": "         * the peak value. This may confuse users, so we update the peak",
          "new_line_content": "        long long memory_functions = functionsMemory();",
          "content_same": false
        },
        {
          "line": 5621,
          "old_api": null,
          "new_api": "getMemoryOverheadData",
          "old_text": null,
          "new_text": "getMemoryOverheadData()",
          "old_line_content": "         * if found smaller than the current memory usage. */",
          "new_line_content": "        struct redisMemOverhead *mh = getMemoryOverheadData();",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "monotonicGetType",
          "old_text": null,
          "new_text": "monotonicGetType()",
          "old_line_content": "    c->duration += duration;",
          "new_line_content": "    if (monotonicGetType() == MONOTONIC_CLOCK_HW)",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": null,
          "new_api": "getMonotonicUs",
          "old_text": null,
          "new_text": "getMonotonicUs()",
          "old_line_content": "    dirty = server.dirty-dirty;",
          "new_line_content": "        duration = getMonotonicUs() - monotonic_start;",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "",
          "new_line_content": "        duration = ustime() - call_timer;",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(used_memory_lua_hmem,sizeof(used_memory_lua_hmem),memory_lua)",
          "old_line_content": "",
          "new_line_content": "        bytesToHuman(used_memory_lua_hmem,sizeof(used_memory_lua_hmem),memory_lua);",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(used_memory_rss_hmem,sizeof(used_memory_rss_hmem),server.cron_malloc_stats.process_rss)",
          "old_line_content": "            \"used_memory:%zu\\r\\n\", zmalloc_used,",
          "new_line_content": "        bytesToHuman(used_memory_rss_hmem,sizeof(used_memory_rss_hmem),server.cron_malloc_stats.process_rss);",
          "content_same": false
        },
        {
          "line": 5637,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(maxmemory_hmem,sizeof(maxmemory_hmem),server.maxmemory)",
          "old_line_content": "            \"used_memory_human:%s\\r\\n\", hmem,",
          "new_line_content": "        bytesToHuman(maxmemory_hmem,sizeof(maxmemory_hmem),server.maxmemory);",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": null,
          "new_api": "incrCommandStatsOnError",
          "old_text": null,
          "new_text": "incrCommandStatsOnError(real_cmd, ERROR_COMMAND_FAILED)",
          "old_line_content": "        real_cmd->failed_calls++;",
          "new_line_content": "    if (!incrCommandStatsOnError(real_cmd, ERROR_COMMAND_FAILED) && c->deferred_reply_errors) {",
          "content_same": false
        },
        {
          "line": 5639,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"used_memory:%zu\\r\\n\", zmalloc_used,\n            \"used_memory_human:%s\\r\\n\", hmem,\n            \"used_memory_rss:%zu\\r\\n\", server.cron_malloc_stats.process_rss,\n            \"used_memory_rss_human:%s\\r\\n\", used_memory_rss_hmem,\n            \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,\n            \"used_memory_peak_human:%s\\r\\n\", peak_hmem,\n            \"used_memory_peak_perc:%.2f%%\\r\\n\", mh->peak_perc,\n            \"used_memory_overhead:%zu\\r\\n\", mh->overhead_total,\n            \"used_memory_startup:%zu\\r\\n\", mh->startup_allocated,\n            \"used_memory_dataset:%zu\\r\\n\", mh->dataset,\n            \"used_memory_dataset_perc:%.2f%%\\r\\n\", mh->dataset_perc,\n            \"allocator_allocated:%zu\\r\\n\", server.cron_malloc_stats.allocator_allocated,\n            \"allocator_active:%zu\\r\\n\", server.cron_malloc_stats.allocator_active,\n            \"allocator_resident:%zu\\r\\n\", server.cron_malloc_stats.allocator_resident,\n            \"allocator_muzzy:%zu\\r\\n\", server.cron_malloc_stats.allocator_muzzy,\n            \"total_system_memory:%lu\\r\\n\", (unsigned long)total_system_mem,\n            \"total_system_memory_human:%s\\r\\n\", total_system_hmem,\n            \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */\n            \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,\n            \"used_memory_lua_human:%s\\r\\n\", used_memory_lua_hmem, /* deprecated */\n            \"used_memory_scripts_eval:%lld\\r\\n\", (long long)mh->lua_caches,\n            \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),\n            \"number_of_functions:%lu\\r\\n\", functionsNum(),\n            \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),\n            \"used_memory_vm_functions:%lld\\r\\n\", memory_functions,\n            \"used_memory_vm_total:%lld\\r\\n\", memory_functions + memory_lua,\n            \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,\n            \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,\n            \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,\n            \"used_memory_scripts_human:%s\\r\\n\", used_memory_scripts_hmem,\n            \"maxmemory:%lld\\r\\n\", server.maxmemory,\n            \"maxmemory_human:%s\\r\\n\", maxmemory_hmem,\n            \"maxmemory_policy:%s\\r\\n\", evict_policy,\n            \"allocator_frag_ratio:%.2f\\r\\n\", mh->allocator_frag,\n            \"allocator_frag_bytes:%zu\\r\\n\", mh->allocator_frag_bytes,\n            \"allocator_rss_ratio:%.2f\\r\\n\", mh->allocator_rss,\n            \"allocator_rss_bytes:%zd\\r\\n\", mh->allocator_rss_bytes,\n            \"rss_overhead_ratio:%.2f\\r\\n\", mh->rss_extra,\n            \"rss_overhead_bytes:%zd\\r\\n\", mh->rss_extra_bytes,\n            /* The next field (mem_fragmentation_ratio) is the total RSS\n             * overhead, including fragmentation, but not just it. This field\n             * (and the next one) is named like that just for backward\n             * compatibility. */\n            \"mem_fragmentation_ratio:%.2f\\r\\n\", mh->total_frag,\n            \"mem_fragmentation_bytes:%zd\\r\\n\", mh->total_frag_bytes,\n            \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),\n            \"mem_replication_backlog:%zu\\r\\n\", mh->repl_backlog,\n            \"mem_total_replication_buffers:%zu\\r\\n\", server.repl_buffer_mem,\n            \"mem_clients_slaves:%zu\\r\\n\", mh->clients_slaves,\n            \"mem_clients_normal:%zu\\r\\n\", mh->clients_normal,\n            \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,\n            \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,\n            \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,\n            \"mem_overhead_db_hashtable_rehashing:%zu\\r\\n\", mh->overhead_db_hashtable_rehashing,\n            \"active_defrag_running:%d\\r\\n\", server.active_defrag_running,\n            \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),\n            \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount())",
          "old_line_content": "            \"used_memory_peak:%zu\\r\\n\", server.stat_peak_memory,",
          "new_line_content": "        info = sdscatprintf(info, \"# Memory\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5662,
          "old_api": null,
          "new_api": "evalScriptsDict",
          "old_text": null,
          "new_text": "evalScriptsDict()",
          "old_line_content": "            \"used_memory_vm_total_human:%s\\r\\n\", used_memory_vm_total_hmem,",
          "new_line_content": "            \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(latency_event,duration/1000)",
          "old_line_content": "    /* Log the command into the Slow log if needed.",
          "new_line_content": "        latencyAddSampleIfNeeded(latency_event,duration/1000);",
          "content_same": false
        },
        {
          "line": 5663,
          "old_api": null,
          "new_api": "functionsNum",
          "old_text": null,
          "new_text": "functionsNum()",
          "old_line_content": "            \"used_memory_functions:%lld\\r\\n\", (long long)mh->functions_caches,",
          "new_line_content": "            \"number_of_functions:%lu\\r\\n\", functionsNum(),",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": null,
          "new_api": "durationAddSample",
          "old_text": null,
          "new_text": "durationAddSample(EL_DURATION_TYPE_CMD, duration)",
          "old_line_content": "    if (update_command_stats && !(c->flags & CLIENT_BLOCKED))",
          "new_line_content": "            durationAddSample(EL_DURATION_TYPE_CMD, duration);",
          "content_same": false
        },
        {
          "line": 5664,
          "old_api": null,
          "new_api": "functionsLibNum",
          "old_text": null,
          "new_text": "functionsLibNum()",
          "old_line_content": "            \"used_memory_scripts:%lld\\r\\n\", (long long)mh->lua_caches + (long long)mh->functions_caches,",
          "new_line_content": "            \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": null,
          "new_api": "slowlogPushCurrentCommand",
          "old_text": null,
          "new_text": "slowlogPushCurrentCommand(c, real_cmd, c->duration)",
          "old_line_content": "     * or we are currently in the process of loading AOF. */",
          "new_line_content": "        slowlogPushCurrentCommand(c, real_cmd, c->duration);",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": null,
          "new_api": "replicationFeedMonitors",
          "old_text": null,
          "new_text": "replicationFeedMonitors(c,server.monitors,c->db->id,argv,argc)",
          "old_line_content": "    if (!(c->flags & CLIENT_BLOCKED))",
          "new_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,argv,argc);",
          "content_same": false
        },
        {
          "line": 5686,
          "old_api": null,
          "new_api": "freeMemoryGetNotCountedMemory",
          "old_text": null,
          "new_text": "freeMemoryGetNotCountedMemory()",
          "old_line_content": "            \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,",
          "new_line_content": "            \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "freeClientOriginalArgv",
          "old_text": null,
          "new_text": "freeClientOriginalArgv(c)",
          "old_line_content": "        real_cmd->calls++;",
          "new_line_content": "        freeClientOriginalArgv(c);",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "updateCommandLatencyHistogram",
          "old_text": null,
          "new_text": "updateCommandLatencyHistogram(&(real_cmd->latency_histogram), c->duration*1000)",
          "old_line_content": "    if (!(c->flags & CLIENT_BLOCKED)) {",
          "new_line_content": "            updateCommandLatencyHistogram(&(real_cmd->latency_histogram), c->duration*1000);",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": null,
          "new_api": "lazyfreeGetPendingObjectsCount",
          "old_text": null,
          "new_text": "lazyfreeGetPendingObjectsCount()",
          "old_line_content": "    /* Persistence */",
          "new_line_content": "            \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),",
          "content_same": false
        },
        {
          "line": 5702,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"persistence\")",
          "old_line_content": "        } else if (server.stat_current_save_keys_total) {",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"persistence\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            fork_perc = ((double)server.stat_current_save_keys_processed / server.stat_current_save_keys_total) * 100;",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status)",
          "old_line_content": "            \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,",
          "new_line_content": "        atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status);",
          "content_same": false
        },
        {
          "line": 5713,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n            \"async_loading:%d\\r\\n\", (int)server.async_loading,\n            \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n            \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n            \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ?\n                                             (unsigned long) elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n            \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n            \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n            \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n            \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n            \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n            \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n            \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start),\n            \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n            \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n            \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n            \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n            \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n            \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n            \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start),\n            \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ?\n                                                 \"ok\" : \"err\"),\n            \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n            \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n            \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK &&\n                                             aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n            \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n            \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n            \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes)",
          "old_line_content": "            \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ?",
          "new_line_content": "        info = sdscatprintf(info, \"# Persistence\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 5719,
          "old_api": null,
          "new_api": "elapsedMs",
          "old_text": null,
          "new_text": "elapsedMs(server.stat_current_cow_updated)",
          "old_line_content": "            \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,",
          "new_line_content": "                                             (unsigned long) elapsedMs(server.stat_current_cow_updated) / 1000 : 0),",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": null,
          "new_api": "intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start)",
          "old_text": null,
          "new_text": "intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start)",
          "old_line_content": "            \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,",
          "new_line_content": "            \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ?",
          "content_same": false
        },
        {
          "line": 5729,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,",
          "new_line_content": "                                                              -1 : time(NULL)-server.rdb_save_time_start),",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": null,
          "new_api": "intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_text": null,
          "new_text": "intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_line_content": "            \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,",
          "new_line_content": "            \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ?",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(c->db->id,c->argv,c->argc,propagate_flags)",
          "old_line_content": "    c->flags &= ~(CLIENT_FORCE_AOF|CLIENT_FORCE_REPL|CLIENT_PREVENT_PROP);",
          "new_line_content": "            alsoPropagate(c->db->id,c->argv,c->argc,propagate_flags);",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK &&",
          "new_line_content": "                                                               -1 : time(NULL)-server.aof_rewrite_time_start),",
          "content_same": false
        },
        {
          "line": 5755,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "        if (server.loading) {",
          "new_line_content": "                \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "old_line_content": "            double perc = 0;",
          "new_line_content": "                \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": null,
          "new_api": "trackingRememberKeys",
          "old_text": null,
          "new_text": "trackingRememberKeys(server.current_client, c)",
          "old_line_content": "        server.stat_numcommands++;",
          "new_line_content": "            trackingRememberKeys(server.current_client, c);",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": null,
          "new_api": "afterCommand",
          "old_text": null,
          "new_text": "afterCommand(c)",
          "old_line_content": "        c->woff = server.master_repl_offset;",
          "new_line_content": "    afterCommand(c);",
          "content_same": false
        },
        {
          "line": 5776,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                eta = (elapsed*remaining_bytes)/(server.loading_loaded_bytes+1);",
          "new_line_content": "            elapsed = time(NULL)-server.loading_start_time;",
          "content_same": false
        },
        {
          "line": 5784,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"loading_start_time:%jd\\r\\n\", (intmax_t) server.loading_start_time,\n                \"loading_total_bytes:%llu\\r\\n\", (unsigned long long) server.loading_total_bytes,\n                \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long) server.loading_rdb_used_mem,\n                \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long) server.loading_loaded_bytes,\n                \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta)",
          "old_line_content": "                \"loading_loaded_perc:%.2f\\r\\n\", perc,",
          "new_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    } else {",
          "new_line_content": "    flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "execCommandAbort",
          "old_text": null,
          "new_text": "execCommandAbort(c, reply->ptr)",
          "old_line_content": "}",
          "new_line_content": "        execCommandAbort(c, reply->ptr);",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.stat_net_input_bytes, stat_net_input_bytes)",
          "old_line_content": "",
          "new_line_content": "        atomicGet(server.stat_net_input_bytes, stat_net_input_bytes);",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.stat_net_repl_output_bytes, stat_net_repl_output_bytes)",
          "old_line_content": "            \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,",
          "new_line_content": "        atomicGet(server.stat_net_repl_output_bytes, stat_net_repl_output_bytes);",
          "content_same": false
        },
        {
          "line": 5810,
          "old_api": null,
          "new_api": "atomicGet",
          "old_text": null,
          "new_text": "atomicGet(server.stat_client_qbuf_limit_disconnections, stat_client_qbuf_limit_disconnections)",
          "old_line_content": "            \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,",
          "new_line_content": "        atomicGet(server.stat_client_qbuf_limit_disconnections, stat_client_qbuf_limit_disconnections);",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"total_net_input_bytes:%lld\\r\\n\", stat_net_input_bytes + stat_net_repl_input_bytes,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"total_connections_received:%lld\\r\\n\", server.stat_numconnections,\n            \"total_commands_processed:%lld\\r\\n\", server.stat_numcommands,\n            \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),\n            \"total_net_input_bytes:%lld\\r\\n\", stat_net_input_bytes + stat_net_repl_input_bytes,\n            \"total_net_output_bytes:%lld\\r\\n\", stat_net_output_bytes + stat_net_repl_output_bytes,\n            \"total_net_repl_input_bytes:%lld\\r\\n\", stat_net_repl_input_bytes,\n            \"total_net_repl_output_bytes:%lld\\r\\n\", stat_net_repl_output_bytes,\n            \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,\n            \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,\n            \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)/1024,\n            \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)/1024,\n            \"rejected_connections:%lld\\r\\n\", server.stat_rejected_conn,\n            \"sync_full:%lld\\r\\n\", server.stat_sync_full,\n            \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,\n            \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,\n            \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,\n            \"expired_stale_perc:%.2f\\r\\n\", server.stat_expired_stale_perc*100,\n            \"expired_time_cap_reached_count:%lld\\r\\n\", server.stat_expired_time_cap_reached_count,\n            \"expire_cycle_cpu_milliseconds:%lld\\r\\n\", server.stat_expire_cycle_time_used/1000,\n            \"evicted_keys:%lld\\r\\n\", server.stat_evictedkeys,\n            \"evicted_clients:%lld\\r\\n\", server.stat_evictedclients,\n            \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,\n            \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,\n            \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,\n            \"keyspace_hits:%lld\\r\\n\", server.stat_keyspace_hits,\n            \"keyspace_misses:%lld\\r\\n\", server.stat_keyspace_misses,\n            \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),\n            \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),\n            \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),\n            \"latest_fork_usec:%lld\\r\\n\", server.stat_fork_time,\n            \"total_forks:%lld\\r\\n\", server.stat_total_forks,\n            \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),\n            \"slave_expires_tracked_keys:%zu\\r\\n\", getSlaveKeyWithExpireCount(),\n            \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,\n            \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,\n            \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,\n            \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,\n            \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,\n            \"current_active_defrag_time:%lld\\r\\n\", current_active_defrag_time / 1000,\n            \"tracking_total_keys:%lld\\r\\n\", (unsigned long long) trackingGetTotalKeys(),\n            \"tracking_total_items:%lld\\r\\n\", (unsigned long long) trackingGetTotalItems(),\n            \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long) trackingGetTotalPrefixes(),\n            \"unexpected_error_replies:%lld\\r\\n\", server.stat_unexpected_error_replies,\n            \"total_error_replies:%lld\\r\\n\", server.stat_total_error_replies,\n            \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,\n            \"total_reads_processed:%lld\\r\\n\", stat_total_reads_processed,\n            \"total_writes_processed:%lld\\r\\n\", stat_total_writes_processed,\n            \"io_threaded_reads_processed:%lld\\r\\n\", server.stat_io_reads_processed,\n            \"io_threaded_writes_processed:%lld\\r\\n\", server.stat_io_writes_processed,\n            \"client_query_buffer_limit_disconnections:%lld\\r\\n\", stat_client_qbuf_limit_disconnections,\n            \"client_output_buffer_limit_disconnections:%lld\\r\\n\", server.stat_client_outbuf_limit_disconnections,\n            \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,\n            \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,\n            \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,\n            \"eventloop_duration_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].sum,\n            \"eventloop_duration_cmd_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CMD].sum,\n            \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),\n            \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION))",
          "old_line_content": "            \"total_net_output_bytes:%lld\\r\\n\", stat_net_output_bytes + stat_net_repl_output_bytes,",
          "new_line_content": "        info = sdscatprintf(info, \"# Stats\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "execCommandAbort",
          "old_text": null,
          "new_text": "execCommandAbort(c, s)",
          "old_line_content": "    }",
          "new_line_content": "        execCommandAbort(c, s);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(s)",
          "old_line_content": "}",
          "new_line_content": "        sdsfree(s);",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": null,
          "new_api": "addReplyErrorSds",
          "old_text": null,
          "new_text": "addReplyErrorSds(c, s)",
          "old_line_content": "    va_list ap;",
          "new_line_content": "        addReplyErrorSds(c, s);",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_INPUT)",
          "old_line_content": "            \"sync_full:%lld\\r\\n\", server.stat_sync_full,",
          "new_line_content": "            \"instantaneous_input_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,",
          "content_same": false
        },
        {
          "line": 5822,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)",
          "old_line_content": "            \"sync_partial_ok:%lld\\r\\n\", server.stat_sync_partial_ok,",
          "new_line_content": "            \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,",
          "content_same": false
        },
        {
          "line": 5823,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)",
          "old_line_content": "            \"sync_partial_err:%lld\\r\\n\", server.stat_sync_partial_err,",
          "new_line_content": "            \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)/1024,",
          "content_same": false
        },
        {
          "line": 5824,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)",
          "old_line_content": "            \"expired_keys:%lld\\r\\n\", server.stat_expiredkeys,",
          "new_line_content": "            \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)/1024,",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "}",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": null,
          "new_api": "sdsmapchars",
          "old_text": null,
          "new_text": "sdsmapchars(s, \"\\r\\n\", \"  \",  2)",
          "old_line_content": "void afterCommand(client *c) {",
          "new_line_content": "    sdsmapchars(s, \"\\r\\n\", \"  \",  2);",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(c)",
          "old_line_content": "    /* Flush pending tracking invalidations. */",
          "new_line_content": "    UNUSED(c);",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "postExecutionUnitOperations",
          "old_text": null,
          "new_text": "postExecutionUnitOperations()",
          "old_line_content": "    /* Flush other pending push messages. only when we are not in nested call.",
          "new_line_content": "    postExecutionUnitOperations();",
          "content_same": false
        },
        {
          "line": 5842,
          "old_api": null,
          "new_api": "kvstoreSize",
          "old_text": null,
          "new_text": "kvstoreSize(server.pubsubshard_channels)",
          "old_line_content": "            \"active_defrag_hits:%lld\\r\\n\", server.stat_active_defrag_hits,",
          "new_line_content": "            \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.migrate_cached_sockets)",
          "old_line_content": "            \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,",
          "new_line_content": "            \"migrate_cached_sockets:%ld\\r\\n\", dictSize(server.migrate_cached_sockets),",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": null,
          "new_api": "listJoin",
          "old_text": null,
          "new_text": "listJoin(c->reply, server.pending_push_messages)",
          "old_line_content": "int commandCheckExistence(client *c, sds *err) {",
          "new_line_content": "        listJoin(c->reply, server.pending_push_messages);",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": null,
          "new_api": "getSlaveKeyWithExpireCount",
          "old_text": null,
          "new_text": "getSlaveKeyWithExpireCount()",
          "old_line_content": "            \"total_active_defrag_time:%lld\\r\\n\", (server.stat_total_active_defrag_time + current_active_defrag_time) / 1000,",
          "new_line_content": "            \"slave_expires_tracked_keys:%zu\\r\\n\", getSlaveKeyWithExpireCount(),",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": null,
          "new_api": "trackingGetTotalKeys",
          "old_text": null,
          "new_text": "trackingGetTotalKeys()",
          "old_line_content": "            \"dump_payload_sanitizations:%lld\\r\\n\", server.stat_dump_payload_sanitizations,",
          "new_line_content": "            \"tracking_total_keys:%lld\\r\\n\", (unsigned long long) trackingGetTotalKeys(),",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": null,
          "new_api": "trackingGetTotalItems",
          "old_text": null,
          "new_text": "trackingGetTotalItems()",
          "old_line_content": "            \"total_reads_processed:%lld\\r\\n\", stat_total_reads_processed,",
          "new_line_content": "            \"tracking_total_items:%lld\\r\\n\", (unsigned long long) trackingGetTotalItems(),",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": null,
          "new_api": "trackingGetTotalPrefixes",
          "old_text": null,
          "new_text": "trackingGetTotalPrefixes()",
          "old_line_content": "            \"total_writes_processed:%lld\\r\\n\", stat_total_writes_processed,",
          "new_line_content": "            \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long) trackingGetTotalPrefixes(),",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": null,
          "new_api": "sdstoupper",
          "old_text": null,
          "new_text": "sdstoupper(cmd)",
          "old_line_content": "    } else {",
          "new_line_content": "        sdstoupper(cmd);",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(*err, \"unknown subcommand '%.128s'. Try %s HELP.\",\n                            (char *)c->argv[1]->ptr, cmd)",
          "old_line_content": "        int i;",
          "new_line_content": "        *err = sdscatprintf(*err, \"unknown subcommand '%.128s'. Try %s HELP.\",",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(args)",
          "old_line_content": "    }",
          "new_line_content": "            args = sdscatprintf(args, \"'%.*s' \", 128-(int)sdslen(args), (char*)c->argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(NULL)",
          "old_line_content": "    /* Make sure there are no newlines in the string, otherwise invalid protocol",
          "new_line_content": "        *err = sdsnew(NULL);",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(*err, \"unknown command '%.128s', with args beginning with: %s\",\n                            (char*)c->argv[0]->ptr, args)",
          "old_line_content": "     * is emitted (The args come from the user, they may contain any character). */",
          "new_line_content": "        *err = sdscatprintf(*err, \"unknown command '%.128s', with args beginning with: %s\",",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_EL_CYCLE)",
          "old_line_content": "    /* Replication */",
          "new_line_content": "            \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(args)",
          "old_line_content": "    return 0;",
          "new_line_content": "        sdsfree(args);",
          "content_same": false
        },
        {
          "line": 5876,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"replication\")",
          "old_line_content": "            server.masterhost == NULL ? \"master\" : \"slave\");",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"replication\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": null,
          "new_api": "sdsmapchars",
          "old_text": null,
          "new_text": "sdsmapchars(*err, \"\\r\\n\", \"  \",  2)",
          "old_line_content": " * Return 1 if valid. */",
          "new_line_content": "    sdsmapchars(*err, \"\\r\\n\", \"  \",  2);",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        if (server.masterhost) {",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 5878,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "old_line_content": "            long long slave_repl_offset = 1;",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(NULL)",
          "old_line_content": "",
          "new_line_content": "            *err = sdsnew(NULL);",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(*err, \"wrong number of arguments for '%s' command\", c->cmd->fullname)",
          "old_line_content": "    return 1;",
          "new_line_content": "            *err = sdscatprintf(*err, \"wrong number of arguments for '%s' command\", c->cmd->fullname);",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"master_host:%s\\r\\n\", server.masterhost,\n                \"master_port:%d\\r\\n\", server.masterport,\n                \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                \"master_last_io_seconds_ago:%d\\r\\n\", server.master ? ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                \"slave_read_repl_offset:%lld\\r\\n\", slave_read_repl_offset,\n                \"slave_repl_offset:%lld\\r\\n\", slave_repl_offset)",
          "old_line_content": "                \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,",
          "new_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "fcallGetCommandFlags",
          "old_text": null,
          "new_text": "fcallGetCommandFlags(c, cmd_flags)",
          "old_line_content": "    }",
          "new_line_content": "        cmd_flags = fcallGetCommandFlags(c, cmd_flags);",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "evalGetCommandFlags",
          "old_text": null,
          "new_text": "evalGetCommandFlags(c, cmd_flags)",
          "old_line_content": "",
          "new_line_content": "        cmd_flags = evalGetCommandFlags(c, cmd_flags);",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                    \"master_sync_total_bytes:%lld\\r\\n\", (long long) server.repl_transfer_size,\n                    \"master_sync_read_bytes:%lld\\r\\n\", (long long) server.repl_transfer_read,\n                    \"master_sync_left_bytes:%lld\\r\\n\", (long long) (server.repl_transfer_size - server.repl_transfer_read),\n                    \"master_sync_perc:%.2f\\r\\n\", perc,\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime-server.repl_transfer_lastio))",
          "old_line_content": "                    \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime-server.repl_transfer_lastio)));",
          "new_line_content": "                info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": null,
          "new_api": "intmax_t)(server.unixtime-server.repl_down_since)",
          "old_text": null,
          "new_text": "intmax_t)(server.unixtime-server.repl_down_since)",
          "old_line_content": "                \"replica_announced:%d\\r\\n\", server.replica_announced));",
          "new_line_content": "                    (intmax_t)(server.unixtime-server.repl_down_since) : -1);",
          "content_same": false
        },
        {
          "line": 5922,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n                \"slave_priority:%d\\r\\n\", server.slave_priority,\n                \"slave_read_only:%d\\r\\n\", server.repl_slave_ro,\n                \"replica_announced:%d\\r\\n\", server.replica_announced)",
          "old_line_content": "",
          "new_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(!server.in_exec)",
          "old_line_content": "     * this is a reprocessing of this command, so we do not want to perform some of the actions again. */",
          "new_line_content": "        serverAssert(!server.in_exec);",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": null,
          "new_api": "scriptIsRunning",
          "old_text": null,
          "new_text": "scriptIsRunning()",
          "old_line_content": "    int client_reprocessing_command = c->cmd ? 1 : 0;",
          "new_line_content": "        serverAssert(!scriptIsRunning());",
          "content_same": false
        },
        {
          "line": 5928,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "old_line_content": "         * currently considered 'good'. */",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 5930,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            server.repl_min_slaves_max_lag) {",
          "new_line_content": "            listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[0]->ptr,\"post\")",
          "old_line_content": "    /* If we're inside a module blocked context yielding that wants to avoid",
          "new_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"host:\") || !strcasecmp(c->argv[0]->ptr,\"post\")) {",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "securityWarningCommand",
          "old_text": null,
          "new_text": "securityWarningCommand(c)",
          "old_line_content": "     * processing clients, postpone the command. */",
          "new_line_content": "        securityWarningCommand(c);",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "                long lag = 0;",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                if (!slaveip) {",
          "new_line_content": "                client *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": null,
          "new_api": "blockPostponeClient",
          "old_text": null,
          "new_text": "blockPostponeClient(c)",
          "old_line_content": "     * such as wrong arity, bad command name and so forth.",
          "new_line_content": "        blockPostponeClient(c);",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": null,
          "new_api": "connAddrPeerName",
          "old_text": null,
          "new_text": "connAddrPeerName(slave->conn,ip,sizeof(ip),&port)",
          "old_line_content": "                if (state[0] == '\\0') continue;",
          "new_line_content": "                    if (connAddrPeerName(slave->conn,ip,sizeof(ip),&port) == -1)",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "                    slaveid,slaveip,slave->slave_listening_port,state,",
          "new_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv,c->argc)",
          "old_line_content": "        }",
          "new_line_content": "        c->cmd = c->lastcmd = c->realcmd = lookupCommand(c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 5963,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,slaveip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "old_line_content": "                slaveid++;",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": null,
          "new_api": "commandCheckArity",
          "old_text": null,
          "new_text": "commandCheckArity(c, &err)",
          "old_line_content": "",
          "new_line_content": "        if (!commandCheckArity(c, &err)) {",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "        /* Check if the command is marked as protected and the relevant configuration allows it */",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 5971,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n            \"master_replid:%s\\r\\n\", server.replid,\n            \"master_replid2:%s\\r\\n\", server.replid2,\n            \"master_repl_offset:%lld\\r\\n\", server.master_repl_offset,\n            \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n            \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n            \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n            \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0)",
          "old_line_content": "            \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,",
          "new_line_content": "        info = sdscatprintf(info, FMTARGS(",
          "content_same": false
        },
        {
          "line": 5972,
          "old_api": null,
          "new_api": "getFailoverStateString",
          "old_text": null,
          "new_text": "getFailoverStateString()",
          "old_line_content": "            \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,",
          "new_line_content": "            \"master_failover_state:%s\\r\\n\", getFailoverStateString(),",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "allowProtectedAction",
          "old_text": null,
          "new_text": "allowProtectedAction(server.enable_debug_cmd, c)",
          "old_line_content": "                                      \"in the configuration file, and then restart the server.\",",
          "new_line_content": "            if ((c->cmd->proc == debugCommand && !allowProtectedAction(server.enable_debug_cmd, c)) ||",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "allowProtectedAction",
          "old_text": null,
          "new_text": "allowProtectedAction(server.enable_module_cmd, c)",
          "old_line_content": "                                      c->cmd->proc == debugCommand ? \"DEBUG\" : \"MODULE\",",
          "new_line_content": "                (c->cmd->proc == moduleCommand && !allowProtectedAction(server.enable_module_cmd, c)))",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\"%s command not allowed. If the %s option is set to \\\"local\\\", \"\n                                      \"you can run it from a local connection, otherwise you need to set this option \"\n                                      \"in the configuration file, and then restart the server.\",\n                                      c->cmd->proc == debugCommand ? \"DEBUG\" : \"MODULE\",\n                                      c->cmd->proc == debugCommand ? \"enable-debug-command\" : \"enable-module-command\")",
          "old_line_content": "                return C_OK;",
          "new_line_content": "                rejectCommandFormat(c,\"%s command not allowed. If the %s option is set to \\\"local\\\", \"",
          "content_same": false
        },
        {
          "line": 5988,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "old_line_content": "        \"used_cpu_user:%ld.%06ld\\r\\n\"",
          "new_line_content": "        getrusage(RUSAGE_SELF, &self_ru);",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "        \"used_cpu_sys_children:%ld.%06ld\\r\\n\"",
          "new_line_content": "        getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": null,
          "new_api": "getCommandFlags",
          "old_text": null,
          "new_text": "getCommandFlags(c)",
          "old_line_content": "                           (c->cmd->proc == execCommand && (c->mstate.cmd_flags & CMD_WRITE));",
          "new_line_content": "    uint64_t cmd_flags = getCommandFlags(c);",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%ld.%06ld\\r\\n\"\n        \"used_cpu_user:%ld.%06ld\\r\\n\"\n        \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n        \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n        (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n        (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec,\n        (long)c_ru.ru_stime.tv_sec, (long)c_ru.ru_stime.tv_usec,\n        (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "old_line_content": "        \"used_cpu_user_children:%ld.%06ld\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 6002,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_THREAD, &m_ru)",
          "old_line_content": "            (long)m_ru.ru_utime.tv_sec, (long)m_ru.ru_utime.tv_usec);",
          "new_line_content": "        getrusage(RUSAGE_THREAD, &m_ru);",
          "content_same": false
        },
        {
          "line": 6003,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"used_cpu_sys_main_thread:%ld.%06ld\\r\\n\"\n            \"used_cpu_user_main_thread:%ld.%06ld\\r\\n\",\n            (long)m_ru.ru_stime.tv_sec, (long)m_ru.ru_stime.tv_usec,\n            (long)m_ru.ru_utime.tv_sec, (long)m_ru.ru_utime.tv_usec)",
          "old_line_content": "#endif  /* RUSAGE_THREAD */",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": null,
          "new_api": "mustObeyClient",
          "old_text": null,
          "new_text": "mustObeyClient(c)",
          "old_line_content": "        if (!(c->cmd->flags & CMD_NO_AUTH)) {",
          "new_line_content": "    int obey_client = mustObeyClient(c);",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": null,
          "new_api": "authRequired",
          "old_text": null,
          "new_text": "authRequired(c)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "    if (authRequired(c)) {",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c,shared.noautherr)",
          "old_line_content": "    if (c->flags & CLIENT_MULTI && c->cmd->flags & CMD_NO_MULTI) {",
          "new_line_content": "            rejectCommand(c,shared.noautherr);",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"modules\")",
          "old_line_content": "",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"module_list\") != NULL) || (dictFind(section_dict,\"modules\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "    /* Command statistics */",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\"Command not allowed inside a transaction\")",
          "old_line_content": "     * ACLs. */",
          "new_line_content": "        rejectCommandFormat(c,\"Command not allowed inside a transaction\");",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"commandstats\")",
          "old_line_content": "",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"commandstats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6020,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "    /* Error statistics */",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": null,
          "new_api": "addACLLogEntry",
          "old_text": null,
          "new_text": "addACLLogEntry(c,acl_retval,(c->flags & CLIENT_MULTI) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL,acl_errpos,NULL,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        addACLLogEntry(c,acl_retval,(c->flags & CLIENT_MULTI) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL,acl_errpos,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "getAclErrorMessage",
          "old_text": null,
          "new_text": "getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0)",
          "old_line_content": "",
          "new_line_content": "        sds msg = getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0);",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c, \"-NOPERM %s\", msg)",
          "old_line_content": "    /* If cluster is enabled perform the cluster redirection here.",
          "new_line_content": "        rejectCommandFormat(c, \"-NOPERM %s\", msg);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(msg)",
          "old_line_content": "     * However we don't perform the redirection if:",
          "new_line_content": "        sdsfree(msg);",
          "content_same": false
        },
        {
          "line": 6027,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        struct redisError *e;",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,server.errors)",
          "old_line_content": "            e = (struct redisError *) ri.data;",
          "new_line_content": "        raxStart(&ri,server.errors);",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "getSafeInfoString",
          "old_text": null,
          "new_text": "getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe)",
          "old_line_content": "",
          "new_line_content": "                (int)ri.key_len, getSafeInfoString((char *) ri.key, ri.key_len, &tmpsafe), e->count);",
          "content_same": false
        },
        {
          "line": 6039,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(tmpsafe)",
          "old_line_content": "    /* Latency by percentile distribution per command */",
          "new_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,\n                                        &c->slot,&error_code)",
          "old_line_content": "            } else {",
          "new_line_content": "        clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"latencystats\")",
          "old_line_content": "        }",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"latencystats\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": null,
          "new_api": "clusterNodeIsMyself",
          "old_text": null,
          "new_text": "clusterNodeIsMyself(n)",
          "old_line_content": "            }",
          "new_line_content": "        if (n == NULL || !clusterNodeIsMyself(n)) {",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "discardTransaction",
          "old_text": null,
          "new_text": "discardTransaction(c)",
          "old_line_content": "            c->cmd->rejected_calls++;",
          "new_line_content": "                discardTransaction(c);",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Latencystats\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        info = sdscatprintf(info, \"# Latencystats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        }",
          "new_line_content": "                flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": null,
          "new_api": "clusterRedirectClient",
          "old_text": null,
          "new_text": "clusterRedirectClient(c,n,c->slot,error_code)",
          "old_line_content": "",
          "new_line_content": "            clusterRedirectClient(c,n,c->slot,error_code);",
          "content_same": false
        },
        {
          "line": 6054,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"cluster\")",
          "old_line_content": "        server.cluster_enabled);",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"cluster\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6055,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6056,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "old_line_content": "",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": null,
          "new_api": "evictClients",
          "old_text": null,
          "new_text": "evictClients()",
          "old_line_content": "",
          "new_line_content": "    evictClients();",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict,\"keyspace\")",
          "old_line_content": "",
          "new_line_content": "    if (all_sections || (dictFind(section_dict,\"keyspace\") != NULL)) {",
          "content_same": false
        },
        {
          "line": 6069,
          "old_api": null,
          "new_api": "kvstoreSize",
          "old_text": null,
          "new_text": "kvstoreSize(server.db[j].keys)",
          "old_line_content": "                    j, keys, vkeys, server.db[j].avg_ttl);",
          "new_line_content": "            keys = kvstoreSize(server.db[j].keys);",
          "content_same": false
        },
        {
          "line": 6070,
          "old_api": null,
          "new_api": "kvstoreSize",
          "old_text": null,
          "new_text": "kvstoreSize(server.db[j].expires)",
          "old_line_content": "            }",
          "new_line_content": "            vkeys = kvstoreSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "old_line_content": "    }",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "isInsideYieldingLongCommand",
          "old_text": null,
          "new_text": "isInsideYieldingLongCommand()",
          "old_line_content": "         * message after we perform operation on the key, where in fact this",
          "new_line_content": "    if (server.maxmemory && !isInsideYieldingLongCommand()) {",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "performEvictions",
          "old_text": null,
          "new_text": "performEvictions()",
          "old_line_content": "         * message belongs to the old value of the key before it gets evicted.*/",
          "new_line_content": "        int out_of_memory = (performEvictions() == EVICT_FAIL);",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": null,
          "new_api": "trackingHandlePendingKeyInvalidations",
          "old_text": null,
          "new_text": "trackingHandlePendingKeyInvalidations()",
          "old_line_content": "",
          "new_line_content": "        trackingHandlePendingKeyInvalidations();",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(section_dict)",
          "old_line_content": "                                  0, /* not a crash report */",
          "new_line_content": "        (all_sections && dictSize(section_dict)))",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.oomerr)",
          "old_line_content": "         * in the first write within script, memory used by lua stack and",
          "new_line_content": "            rejectCommand(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 6088,
          "old_api": null,
          "new_api": "modulesCollectInfo",
          "old_text": null,
          "new_text": "modulesCollectInfo(info,\n                                  everything || dictFind(section_dict, \"modules\") != NULL ? NULL: section_dict,\n                                  0, /* not a crash report */\n                                  sections)",
          "old_line_content": "",
          "new_line_content": "        info = modulesCollectInfo(info,",
          "content_same": false
        },
        {
          "line": 6094,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(section_dict, \"debug\")",
          "old_line_content": "            \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,",
          "new_line_content": "    if (dictFind(section_dict, \"debug\") != NULL) {",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max));",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 6096,
          "old_api": null,
          "new_api": "FMTARGS",
          "old_text": null,
          "new_text": "FMTARGS(\n            \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n            \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n            \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n            \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max)",
          "old_line_content": "    }",
          "new_line_content": "        info = sdscatprintf(info, \"# Debug\\r\\n\" FMTARGS(",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": null,
          "new_api": "writeCommandsDeniedByDiskError",
          "old_text": null,
          "new_text": "writeCommandsDeniedByDiskError()",
          "old_line_content": "            if (!server.repl_ignore_disk_write_error && c->cmd->proc != pingCommand) {",
          "new_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Replica was unable to write command to disk.\")",
          "old_line_content": "                    last_log_time_ms = server.mstime;",
          "new_line_content": "                serverPanic(\"Replica was unable to write command to disk.\");",
          "content_same": false
        },
        {
          "line": 6114,
          "old_api": null,
          "new_api": "genInfoSectionDict",
          "old_text": null,
          "new_text": "genInfoSectionDict(c->argv+1, c->argc-1, NULL, &all_sections, &everything)",
          "old_line_content": "    return;",
          "new_line_content": "    dict *sections_dict = genInfoSectionDict(c->argv+1, c->argc-1, NULL, &all_sections, &everything);",
          "content_same": false
        },
        {
          "line": 6115,
          "old_api": null,
          "new_api": "genRedisInfoString",
          "old_text": null,
          "new_text": "genRedisInfoString(sections_dict, all_sections, everything)",
          "old_line_content": "}",
          "new_line_content": "    sds info = genRedisInfoString(sections_dict, all_sections, everything);",
          "content_same": false
        },
        {
          "line": 6116,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(info)",
          "old_line_content": "",
          "new_line_content": "    addReplyVerbatim(c,info,sdslen(info),\"txt\");",
          "content_same": false
        },
        {
          "line": 6117,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(info)",
          "old_line_content": "void monitorCommand(client *c) {",
          "new_line_content": "    sdsfree(info);",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": null,
          "new_api": "releaseInfoSectionDict",
          "old_text": null,
          "new_text": "releaseInfoSectionDict(sections_dict)",
          "old_line_content": "    if (c->flags & CLIENT_DENY_BLOCKING) {",
          "new_line_content": "    releaseInfoSectionDict(sections_dict);",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": null,
          "new_api": "writeCommandsGetDiskErrorMessage",
          "old_text": null,
          "new_text": "writeCommandsGetDiskErrorMessage(deny_write_type)",
          "old_line_content": "        }",
          "new_line_content": "            sds err = writeCommandsGetDiskErrorMessage(deny_write_type);",
          "content_same": false
        },
        {
          "line": 4077,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(err)",
          "old_line_content": "",
          "new_line_content": "            sdssubstr(err, 0, sdslen(err)-2);",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": null,
          "new_api": "rejectCommandSds",
          "old_text": null,
          "new_text": "rejectCommandSds(c, err)",
          "old_line_content": "    /* Don't accept write commands if there are not enough good slaves and",
          "new_line_content": "            rejectCommandSds(c, err);",
          "content_same": false
        },
        {
          "line": 6127,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\")",
          "old_line_content": "    if (c->flags & CLIENT_SLAVE) return;",
          "new_line_content": "        addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\");",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "checkGoodReplicasStatus",
          "old_text": null,
          "new_text": "checkGoodReplicasStatus()",
          "old_line_content": "    /* Don't accept write commands if this is a read only slave. But",
          "new_line_content": "    if (is_write_command && !checkGoodReplicasStatus()) {",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.noreplicaserr)",
          "old_line_content": "     * accept write commands if this is our master. */",
          "new_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "content_same": false
        },
        {
          "line": 6135,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 6136,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "int checkIgnoreWarning(const char *warning) {",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": null,
          "new_api": "sdssplitargs",
          "old_text": null,
          "new_text": "sdssplitargs(server.ignore_warnings, &argc)",
          "old_line_content": "        char *flag = argv[j];",
          "new_line_content": "    sds *argv = sdssplitargs(server.ignore_warnings, &argc);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6144,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag, warning)",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(flag, warning))",
          "new_line_content": "    if (argv == NULL)",
          "content_same": false
        },
        {
          "line": 6147,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv,argc)",
          "new_text": null,
          "old_line_content": "    sdsfreesplitres(argv,argc);",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n            \"Can't execute '%s': only (P|S)SUBSCRIBE / \"\n            \"(P|S)UNSUBSCRIBE / PING / QUIT / RESET are allowed in this context\",\n            c->cmd->fullname)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c,",
          "new_line_content": "        c->cmd->proc != sunsubscribeCommand &&",
          "content_same": false
        },
        {
          "line": 6162,
          "old_api": "prctl",
          "new_api": null,
          "old_text": "prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0)",
          "new_text": null,
          "old_line_content": "    ret = prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.masterdownerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.masterdownerr);",
          "new_line_content": "     * link with master. */",
          "content_same": false
        },
        {
          "line": 6170,
          "old_api": "checkOvercommit",
          "new_api": null,
          "old_text": "checkOvercommit(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkOvercommit(&err_msg) < 0) {",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 6171,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"WARNING %s\", err_msg)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"WARNING %s\", err_msg);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6172,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(err_msg)",
          "new_text": null,
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6174,
          "old_api": "checkTHPEnabled",
          "new_api": null,
          "old_text": "checkTHPEnabled(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkTHPEnabled(&err_msg) < 0) {",
          "new_line_content": "    sds err_msg = NULL;",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.loadingerr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c,shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c,shared.loadingerr);",
          "new_line_content": "        return C_OK;",
          "content_same": false
        },
        {
          "line": 6189,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "new_text": null,
          "old_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "new_line_content": "#endif /* __linux__ */",
          "content_same": false
        },
        {
          "line": 6192,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "    /* If pidfile requested, but no pidfile defined, use",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": null,
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": null,
          "old_line_content": "    if (isInsideYieldingLongCommand() && !(c->cmd->flags & CMD_ALLOW_BUSY)) {",
          "new_line_content": "     * Note that we need to allow the transactions commands, otherwise clients",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply)",
          "new_text": null,
          "old_line_content": "            rejectCommandFormat(c, \"-BUSY %s\", server.busy_module_yield_reply);",
          "new_line_content": "     * the MULTI plus a few initial commands refused, then the timeout",
          "content_same": false
        },
        {
          "line": 6195,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowmoduleerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.slowmoduleerr);",
          "new_line_content": "     * executed, see Github PR #7022. */",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowevalerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.slowevalerr);",
          "new_line_content": "        if (server.busy_module_yield_flags && server.busy_module_yield_reply) {",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowscripterr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.slowscripterr);",
          "new_line_content": "        } else if (server.busy_module_yield_flags) {",
          "content_same": false
        },
        {
          "line": 6204,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"Replica can't interact with the keyspace\")",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c, \"Replica can't interact with the keyspace\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6211,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6212,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDERR_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDERR_FILENO);",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "isPausedActions",
          "new_api": null,
          "old_text": "isPausedActions(PAUSE_ACTION_CLIENT_ALL)",
          "new_text": null,
          "old_line_content": "        ((isPausedActions(PAUSE_ACTION_CLIENT_ALL)) ||",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": "isPausedActions",
          "new_api": null,
          "old_text": "isPausedActions(PAUSE_ACTION_CLIENT_WRITE)",
          "new_text": null,
          "old_line_content": "        ((isPausedActions(PAUSE_ACTION_CLIENT_WRITE)) && is_may_replicate_command)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": "blockPostponeClient",
          "new_api": null,
          "old_text": "blockPostponeClient(c)",
          "new_text": null,
          "old_line_content": "        blockPostponeClient(c);",
          "new_line_content": "     * the pause has ended. Replicas are never paused. */",
          "content_same": false
        },
        {
          "line": 6222,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6223,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        atoi(redisGitDirty()) > 0,",
          "new_line_content": "sds getVersion(void) {",
          "content_same": false
        },
        {
          "line": 6226,
          "old_api": "redisBuildId",
          "new_api": null,
          "old_text": "redisBuildId()",
          "new_text": null,
          "old_line_content": "        (unsigned long long) redisBuildId());",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 6232,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "    return version;",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c, cmd_flags)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c, cmd_flags);",
          "new_line_content": "        c->cmd->proc != multiCommand &&",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.queued)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.queued);",
          "new_line_content": "        c->cmd->proc != watchCommand &&",
          "content_same": false
        },
        {
          "line": 6233,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server -v or --version\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server -v or --version\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6234,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server -h or --help\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server -h or --help\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server --test-memory <megabytes>\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server --test-memory <megabytes>\\n\");",
          "new_line_content": "void usage(void) {",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "handleClientsBlockedOnKeys",
          "new_api": null,
          "old_text": "handleClientsBlockedOnKeys()",
          "new_text": null,
          "old_line_content": "            handleClientsBlockedOnKeys();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4201,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(server.errors,(unsigned char*)fullerr,namelen,&result)",
          "new_text": null,
          "old_line_content": "    if (!raxFind(server.errors,(unsigned char*)fullerr,namelen,&result)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*error))",
          "new_text": null,
          "old_line_content": "        struct redisError *error = zmalloc(sizeof(*error));",
          "new_line_content": "/* ====================== Error lookup and execution ===================== */",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(server.errors,(unsigned char*)fullerr,namelen,error,NULL)",
          "new_text": null,
          "old_line_content": "        raxInsert(server.errors,(unsigned char*)fullerr,namelen,error,NULL);",
          "new_line_content": "void incrementErrorCount(const char *fullerr, size_t namelen) {",
          "content_same": false
        },
        {
          "line": 6265,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(stdout)",
          "new_text": null,
          "old_line_content": "                      isatty(fileno(stdout))) ||",
          "new_line_content": "    /* Show the ASCII logo if: log file is stdout AND stdout is a",
          "content_same": false
        },
        {
          "line": 6269,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n            \"Running mode=%s, port=%d.\",\n            mode, server.port ? server.port : server.tls_port\n        )",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "                      server.logfile[0] == '\\0' &&",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(listener->fd[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < listener->count; j++) close(listener->fd[j]);",
          "new_line_content": "    for (int i = 0; i < CONN_TYPE_MAX; i++) {",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.clistener.fd[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < server.clistener.count; j++) close(server.clistener.fd[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            mode, server.port ? server.port : server.tls_port",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Removing the unix socket file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Removing the unix socket file.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        if (unlink(server.unixsocket) != 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Error removing the unix socket file: %s\",strerror(errno));",
          "new_line_content": "    if (server.cluster_enabled)",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 6280,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (long) getpid()",
          "new_line_content": "            REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 6284,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "            mode, server.port ? server.port : server.tls_port,",
          "content_same": false
        },
        {
          "line": 6291,
          "old_api": "connectionIndexByType",
          "new_api": null,
          "old_text": "connectionIndexByType(typename)",
          "new_text": null,
          "old_line_content": "    conn_index = connectionIndexByType(typename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6301,
          "old_api": "closeListener",
          "new_api": null,
          "old_text": "closeListener(listener)",
          "new_text": null,
          "old_line_content": "    closeListener(listener);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6305,
          "old_api": "redisSetProcTitle",
          "new_api": null,
          "old_text": "redisSetProcTitle(NULL)",
          "new_text": null,
          "old_line_content": "        if (server.set_proc_title) redisSetProcTitle(NULL);",
          "new_line_content": "    /* Close old servers */",
          "content_same": false
        },
        {
          "line": 4259,
          "old_api": "isShutdownInitiated",
          "new_api": null,
          "old_text": "isShutdownInitiated()",
          "new_text": null,
          "old_line_content": "    if (isShutdownInitiated()) return C_ERR;",
          "new_line_content": " * returned and an error is logged. If the flag SHUTDOWN_FORCE is set, these",
          "content_same": false
        },
        {
          "line": 6316,
          "old_api": "get_type",
          "new_api": null,
          "old_text": "listener->ct->get_type(NULL)",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unrecoverable error creating %s accept handler.\", listener->ct->get_type(NULL));",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 6319,
          "old_api": "redisSetProcTitle",
          "new_api": null,
          "old_text": "redisSetProcTitle(NULL)",
          "new_text": null,
          "old_line_content": "    if (server.set_proc_title) redisSetProcTitle(NULL);",
          "new_line_content": "    /* Create event handlers */",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"User requested shutdown...\");",
          "new_line_content": "    if (server.loading || server.sentinel_mode)",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STOPPING=1\\n\")",
          "new_text": null,
          "old_line_content": "        redisCommunicateSystemd(\"STOPPING=1\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "isReadyToShutdown",
          "new_api": null,
          "old_text": "isReadyToShutdown()",
          "new_text": null,
          "old_line_content": "        !isReadyToShutdown())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": "sendGetackToReplicas",
          "new_api": null,
          "old_text": "sendGetackToReplicas()",
          "new_text": null,
          "old_line_content": "        if (!isPausedActions(PAUSE_ACTION_REPLICA)) sendGetackToReplicas();",
          "new_line_content": "    if (!(flags & SHUTDOWN_NOW) &&",
          "content_same": false
        },
        {
          "line": 4284,
          "old_api": "pauseActions",
          "new_api": null,
          "old_text": "pauseActions(PAUSE_DURING_SHUTDOWN,\n                      LLONG_MAX,\n                     PAUSE_ACTIONS_CLIENT_WRITE_SET)",
          "new_text": null,
          "old_line_content": "        pauseActions(PAUSE_DURING_SHUTDOWN,",
          "new_line_content": "        server.shutdown_timeout != 0 &&",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE, \"Waiting for replicas before shutting down.\");",
          "new_line_content": "        server.shutdown_mstime = server.mstime + server.shutdown_timeout * 1000;",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "finishShutdown",
          "new_api": null,
          "old_text": "finishShutdown()",
          "new_text": null,
          "old_line_content": "    return finishShutdown();",
          "new_line_content": "                     PAUSE_ACTIONS_CLIENT_WRITE_SET);",
          "content_same": false
        },
        {
          "line": 6343,
          "old_api": "serverLogRawFromHandler",
          "new_api": null,
          "old_text": "serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "new_text": null,
          "old_line_content": "        serverLogRawFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "new_line_content": "    /* SIGINT is often delivered via Ctrl+C in an interactive session.",
          "content_same": false
        },
        {
          "line": 6344,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(getpid(), 1);",
          "new_line_content": "     * If we receive the signal the second time, we interpret this as",
          "content_same": false
        },
        {
          "line": 6345,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "new_line_content": "     * the user really wanting to quit ASAP without waiting to persist",
          "content_same": false
        },
        {
          "line": 4302,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.slaves) == 0) return 1;  /* No replicas. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves, &li);",
          "new_line_content": "int isReadyToShutdown(void) {",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *replica = listNodeValue(ln);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6361,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "    struct sigaction act;",
          "content_same": false
        },
        {
          "line": 6362,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGINT, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGINT, &act, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6364,
          "old_api": "setupDebugSigHandlers",
          "new_api": null,
          "old_text": "setupDebugSigHandlers()",
          "new_text": null,
          "old_line_content": "    setupDebugSigHandlers();",
          "new_line_content": "    act.sa_flags = 0;",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "replyToClientsBlockedOnShutdown",
          "new_api": null,
          "old_text": "replyToClientsBlockedOnShutdown()",
          "new_text": null,
          "old_line_content": "    replyToClientsBlockedOnShutdown();",
          "new_line_content": "static void cancelShutdown(void) {",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": "unpauseActions",
          "new_api": null,
          "old_text": "unpauseActions(PAUSE_DURING_SHUTDOWN)",
          "new_text": null,
          "old_line_content": "    unpauseActions(PAUSE_DURING_SHUTDOWN);",
          "new_line_content": "    server.shutdown_asap = 0;",
          "content_same": false
        },
        {
          "line": 6372,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(sig)",
          "new_text": null,
          "old_line_content": "    UNUSED(sig);",
          "new_line_content": "/* This is the signal handler for children process. It is currently useful",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": "cancelShutdown",
          "new_api": null,
          "old_text": "cancelShutdown()",
          "new_text": null,
          "old_line_content": "        cancelShutdown();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": "serverLogRawFromHandler",
          "new_api": null,
          "old_text": "serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\")",
          "new_text": null,
          "old_line_content": "    serverLogRawFromHandler(level, \"Received SIGUSR1 in child, exiting now.\");",
          "new_line_content": " * it in a clean way, without the parent detecting an error and stop",
          "content_same": false
        },
        {
          "line": 6375,
          "old_api": "exitFromChild",
          "new_api": null,
          "old_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "new_text": null,
          "old_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "new_line_content": " * accepting writes because of a write error condition. */",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"Shutdown manually aborted.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"Shutdown manually aborted.\");",
          "new_line_content": "        server.shutdown_asap = 0;",
          "content_same": false
        },
        {
          "line": 6383,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "void setupChildSignalHandlers(void) {",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGUSR1, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "new_line_content": "    /* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction is used.",
          "content_same": false
        },
        {
          "line": 6394,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(0)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(0);",
          "new_line_content": "/* After fork, the child process will inherit the resources",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.cluster_config_file_lock_fd)",
          "new_text": null,
          "old_line_content": "        close(server.cluster_config_file_lock_fd);  /* don't care if this fails */",
          "new_line_content": " * should close the resources not used by the child process, so that if the",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves, &replicas_iter)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves, &replicas_iter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&replicas_iter)",
          "new_text": null,
          "old_line_content": "    while ((replicas_list_node = listNext(&replicas_iter)) != NULL) {",
          "new_line_content": "    /* Log a warning for each replica that is lagging. */",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(replicas_list_node)",
          "new_text": null,
          "old_line_content": "        client *replica = listNodeValue(replicas_list_node);",
          "new_line_content": "    listIter replicas_iter;",
          "content_same": false
        },
        {
          "line": 6400,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.pidfile)",
          "new_text": null,
          "old_line_content": "    zfree(server.pidfile);",
          "new_line_content": "    if (server.cluster_enabled && server.cluster_config_file_lock_fd != -1)",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": "isMutuallyExclusiveChildType",
          "new_api": null,
          "old_text": "isMutuallyExclusiveChildType(purpose)",
          "new_text": null,
          "old_line_content": "    if (isMutuallyExclusiveChildType(purpose)) {",
          "new_line_content": "    server.pidfile = NULL;",
          "content_same": false
        },
        {
          "line": 6407,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "        if (hasActiveChildProcess()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n                      \"Lagging replica %s reported offset %lld behind master, lag=%ld, state=%s.\",\n                      replicationGetSlaveName(replica),\n                      server.master_repl_offset - replica->repl_ack_off,\n                      lag,\n                      replstateToString(replica->replstate))",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE,",
          "new_line_content": "        num_replicas++;",
          "content_same": false
        },
        {
          "line": 4362,
          "old_api": "replicationGetSlaveName",
          "new_api": null,
          "old_text": "replicationGetSlaveName(replica)",
          "new_text": null,
          "old_line_content": "                      replicationGetSlaveName(replica),",
          "new_line_content": "            num_lagging_replicas++;",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4369,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n                  \"%d of %d replicas are in sync when shutting down.\",\n                  num_replicas - num_lagging_replicas,\n                  num_replicas)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "                      lag,",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": "ldbKillForkedSessions",
          "new_api": null,
          "old_text": "ldbKillForkedSessions()",
          "new_text": null,
          "old_line_content": "    ldbKillForkedSessions();",
          "new_line_content": "                  num_replicas - num_lagging_replicas,",
          "content_same": false
        },
        {
          "line": 6426,
          "old_api": "setupChildSignalHandlers",
          "new_api": null,
          "old_text": "setupChildSignalHandlers()",
          "new_text": null,
          "old_line_content": "        setupChildSignalHandlers();",
          "new_line_content": "         * Setup signal handlers first because a signal could fire at any time.",
          "content_same": false
        },
        {
          "line": 6427,
          "old_api": "setOOMScoreAdj",
          "new_api": null,
          "old_text": "setOOMScoreAdj(CONFIG_OOM_BGCHILD)",
          "new_text": null,
          "old_line_content": "        setOOMScoreAdj(CONFIG_OOM_BGCHILD);",
          "new_line_content": "         * Adjust OOM score before everything else to assist the OOM killer if",
          "content_same": false
        },
        {
          "line": 6428,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "         * memory resources are low.",
          "content_same": false
        },
        {
          "line": 6429,
          "old_api": "dismissMemoryInChild",
          "new_api": null,
          "old_text": "dismissMemoryInChild()",
          "new_text": null,
          "old_line_content": "        dismissMemoryInChild();",
          "new_line_content": "         */",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": "killRDBChild",
          "new_api": null,
          "old_text": "killRDBChild()",
          "new_text": null,
          "old_line_content": "        killRDBChild();",
          "new_line_content": "    /* Kill the saving child if there is a background saving in progress.",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": "closeChildUnusedResourceAfterFork",
          "new_api": null,
          "old_text": "closeChildUnusedResourceAfterFork()",
          "new_text": null,
          "old_line_content": "        closeChildUnusedResourceAfterFork();",
          "new_line_content": "        server.in_fork_child = purpose;",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.child_pid, 0)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.child_pid, 0);",
          "new_line_content": "         * doing it's cleanup, but in this case this code will not be reached,",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": "TerminateModuleForkChild",
          "new_api": null,
          "old_text": "TerminateModuleForkChild(server.child_pid,0)",
          "new_text": null,
          "old_line_content": "        TerminateModuleForkChild(server.child_pid,0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6445,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_time = ustime()-start;",
          "new_line_content": "            errno = fork_errno;",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 6447,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": null,
          "old_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "new_text": null,
          "old_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF. Exit anyway.\");",
          "new_line_content": "    if (server.child_type == CHILD_TYPE_AOF) {",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "new_line_content": "         * shutdown or else the dataset will be lost. */",
          "content_same": false
        },
        {
          "line": 6456,
          "old_api": "isMutuallyExclusiveChildType",
          "new_api": null,
          "old_text": "isMutuallyExclusiveChildType(purpose)",
          "new_text": null,
          "old_line_content": "        if (isMutuallyExclusiveChildType(purpose)) {",
          "new_line_content": "         *",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\")",
          "new_text": null,
          "old_line_content": "                    redisCommunicateSystemd(\"STATUS=Writing initial AOF, can't exit.\\n\");",
          "new_line_content": "            if (force) {",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                  \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "                if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": "killAppendOnlyChild",
          "new_api": null,
          "old_text": "killAppendOnlyChild()",
          "new_text": null,
          "old_line_content": "        killAppendOnlyChild();",
          "new_line_content": "                goto error;",
          "content_same": false
        },
        {
          "line": 6464,
          "old_api": "dbTotalServerKeyCount",
          "new_api": null,
          "old_text": "dbTotalServerKeyCount()",
          "new_text": null,
          "old_line_content": "            server.stat_current_save_keys_total = dbTotalServerKeyCount();",
          "new_line_content": "            server.stat_current_cow_peak = 0;",
          "content_same": false
        },
        {
          "line": 6467,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "            server.stat_current_save_keys_processed = 0;",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\");",
          "new_line_content": "                  \"There is a child rewriting the AOF. Killing it!\");",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_FORK_CHILD,\n                              REDISMODULE_SUBEVENT_FORK_CHILD_BORN,\n                              NULL)",
          "new_text": null,
          "old_line_content": "        moduleFireServerEvent(REDISMODULE_EVENT_FORK_CHILD,",
          "new_line_content": "            server.stat_module_progress = 0;",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "redis_fsync",
          "new_api": null,
          "old_text": "redis_fsync(server.aof_fd)",
          "new_text": null,
          "old_line_content": "        if (redis_fsync(server.aof_fd) == -1) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Fail to fsync the AOF file: %s.\",\n                                 strerror(errno))",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Fail to fsync the AOF file: %s.\",",
          "new_line_content": "    if (server.aof_state != AOF_OFF) {",
          "content_same": false
        },
        {
          "line": 4424,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                                 strerror(errno));",
          "new_line_content": "        /* Append only file: flush buffers and fsync() the AOF at exit */",
          "content_same": false
        },
        {
          "line": 6476,
          "old_api": "sendChildInfoGeneric",
          "new_api": null,
          "old_text": "sendChildInfoGeneric(info_type, 0, -1, pname)",
          "new_text": null,
          "old_line_content": "    sendChildInfoGeneric(info_type, 0, -1, pname);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4432,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "new_text": null,
          "old_line_content": "            redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6480,
          "old_api": "sendChildInfoGeneric",
          "new_api": null,
          "old_text": "sendChildInfoGeneric(info_type, keys, -1, pname)",
          "new_text": null,
          "old_line_content": "    sendChildInfoGeneric(info_type, keys, -1, pname);",
          "new_line_content": "void sendChildCowInfo(childInfoType info_type, char *pname) {",
          "content_same": false
        },
        {
          "line": 4444,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Error trying to save the DB. Exit anyway.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,\"Error trying to save the DB. Exit anyway.\");",
          "new_line_content": "             * operating. Note that if there was a background saving process,",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\");",
          "new_line_content": "             * saving aborted, handling special stuff like slaves pending for",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "new_text": null,
          "old_line_content": "                    redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "new_line_content": "            if (force) {",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": "zmadvise_dontneed",
          "new_api": null,
          "old_text": "zmadvise_dontneed(ptr)",
          "new_text": null,
          "old_line_content": "    zmadvise_dontneed(ptr);",
          "new_line_content": "    /* madvise(MADV_DONTNEED) can not release pages if the size of memory",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "aofManifestFree",
          "new_api": null,
          "old_text": "aofManifestFree(server.aof_manifest)",
          "new_text": null,
          "old_line_content": "    if (server.aof_manifest) aofManifestFree(server.aof_manifest);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6506,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(c->buf, c->buf_usable_size)",
          "new_text": null,
          "old_line_content": "    dismissMemory(c->buf, c->buf_usable_size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6507,
          "old_api": "dismissSds",
          "new_api": null,
          "old_text": "dismissSds(c->querybuf)",
          "new_text": null,
          "old_line_content": "    dismissSds(c->querybuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Removing the pid file.\");",
          "new_line_content": "    /* Fire the shutdown modules event. */",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(c->argv, c->argc*sizeof(robj*))",
          "new_text": null,
          "old_line_content": "    if (c->argc) dismissMemory(c->argv, c->argc*sizeof(robj*));",
          "new_line_content": "    if (c->argc && c->argv_len_sum/c->argc >= server.page_size) {",
          "content_same": false
        },
        {
          "line": 6518,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    if (listLength(c->reply) &&",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(1)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(1);",
          "new_line_content": "    /* Best effort flush of slave output buffers, so that we hopefully",
          "content_same": false
        },
        {
          "line": 6525,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "            clientReplyBlock *bulk = listNodeValue(ln);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "cancelShutdown",
          "new_api": null,
          "old_text": "cancelShutdown()",
          "new_text": null,
          "old_line_content": "    cancelShutdown();",
          "new_line_content": "        server.sentinel_mode ? \"Sentinel\" : \"Redis\");",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.repl_buffer_blocks, &li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.repl_buffer_blocks, &li);",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 6551,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6552,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        replBufBlock *o = listNodeValue(ln);",
          "new_line_content": "    /* Dismiss replication buffer. We don't need to separately dismiss replication",
          "content_same": false
        },
        {
          "line": 6553,
          "old_api": "dismissMemory",
          "new_api": null,
          "old_text": "dismissMemory(o, o->size)",
          "new_text": null,
          "old_line_content": "        dismissMemory(o, o->size);",
          "new_line_content": "     * backlog and replica' output buffer, because they just reference the global",
          "content_same": false
        },
        {
          "line": 6559,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "        client *c = listNodeValue(ln);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6560,
          "old_api": "dismissClientMemory",
          "new_api": null,
          "old_text": "dismissClientMemory(c)",
          "new_text": null,
          "old_line_content": "        dismissClientMemory(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status)",
          "new_text": null,
          "old_line_content": "        atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status);",
          "new_line_content": "        if (server.aof_last_write_status == C_ERR) {",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.aof_bio_fsync_errno,server.aof_last_write_errno)",
          "new_text": null,
          "old_line_content": "            atomicGet(server.aof_bio_fsync_errno,server.aof_last_write_errno);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name,\"redis-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name,\"redis-sentinel\") != NULL) return 1;",
          "new_line_content": "void memtest(size_t megabytes, int passes);",
          "content_same": false
        },
        {
          "line": 6573,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[j],\"--sentinel\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "new_line_content": " * executable name contains \"redis-sentinel\". */",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(shared.bgsaveerr->ptr)",
          "new_text": null,
          "old_line_content": "        ret = sdsdup(shared.bgsaveerr->ptr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        ret = sdscatfmt(sdsempty(),",
          "new_line_content": "sds writeCommandsGetDiskErrorMessage(int error_code) {",
          "content_same": false
        },
        {
          "line": 6579,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "    return 0;",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(server.aof_last_write_errno)",
          "new_text": null,
          "old_line_content": "                strerror(server.aof_last_write_errno));",
          "new_line_content": "    if (error_code == DISK_ERROR_TYPE_RDB) {",
          "content_same": false
        },
        {
          "line": 6581,
          "old_api": "loadAppendOnlyFiles",
          "new_api": null,
          "old_text": "loadAppendOnlyFiles(server.aof_manifest)",
          "new_text": null,
          "old_line_content": "        int ret = loadAppendOnlyFiles(server.aof_manifest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6583,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "void loadDataFromDisk(void) {",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE, \"DB loaded from append only file: %.3f seconds\", (float)(ustime()-start)/1000000);",
          "new_line_content": "    if (server.aof_state == AOF_ON) {",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": "addReplyErrorArity",
          "new_api": null,
          "old_text": "addReplyErrorArity(c)",
          "new_text": null,
          "old_line_content": "        addReplyErrorArity(c);",
          "new_line_content": "/* The PING command. It works in a different way if the client is in",
          "content_same": false
        },
        {
          "line": 6591,
          "old_api": "iAmMaster",
          "new_api": null,
          "old_text": "iAmMaster()",
          "new_text": null,
          "old_line_content": "        if (iAmMaster()) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6594,
          "old_api": "createReplicationBacklog",
          "new_api": null,
          "old_text": "createReplicationBacklog()",
          "new_text": null,
          "old_line_content": "            createReplicationBacklog();",
          "new_line_content": "        errno = 0; /* Prevent a stale value from affecting error checking */",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,\"pong\",4)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c,\"pong\",4);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.rdb_filename, &rsi, rdb_flags)",
          "new_text": null,
          "old_line_content": "        int rdb_load_ret = rdbLoad(server.rdb_filename, &rsi, rdb_flags);",
          "new_line_content": "            /* Master may delete expired keys when loading, we should",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,\"\",0)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,\"\",0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6600,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "                (float)(ustime()-start)/1000000);",
          "new_line_content": "            rdb_flags |= RDBFLAGS_FEED_REPL;",
          "content_same": false
        },
        {
          "line": 6611,
          "old_api": "iAmMaster",
          "new_api": null,
          "old_text": "iAmMaster()",
          "new_text": null,
          "old_line_content": "                if (!iAmMaster()) {",
          "new_line_content": "                 * of -1 inside the RDB file in a wrong way, see more",
          "content_same": false
        },
        {
          "line": 6612,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(server.replid,rsi.repl_id,sizeof(server.replid))",
          "new_text": null,
          "old_line_content": "                    memcpy(server.replid,rsi.repl_id,sizeof(server.replid));",
          "new_line_content": "                 * information in function rdbPopulateSaveInfo. */",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c,2);",
          "new_line_content": "void echoCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c, server.ustime-((long long)server.unixtime)*1000000)",
          "new_text": null,
          "old_line_content": "    addReplyBulkLongLong(c, server.ustime-((long long)server.unixtime)*1000000);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6618,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(server.cached_master,rsi.repl_stream_db)",
          "new_text": null,
          "old_line_content": "                    selectDb(server.cached_master,rsi.repl_stream_db);",
          "new_line_content": "                    server.master_repl_offset = rsi.repl_offset;",
          "content_same": false
        },
        {
          "line": 6627,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(server.repl_backlog)",
          "new_text": null,
          "old_line_content": "                    serverAssert(server.repl_backlog);",
          "new_line_content": "                     * to partial resynchronizations with masters. */",
          "content_same": false
        },
        {
          "line": 6630,
          "old_api": "rebaseReplicationBuffer",
          "new_api": null,
          "old_text": "rebaseReplicationBuffer(rsi.repl_offset)",
          "new_text": null,
          "old_line_content": "                    rebaseReplicationBuffer(rsi.repl_offset);",
          "new_line_content": "                    /* Rebase master_repl_offset from rsi.repl_offset. */",
          "content_same": false
        },
        {
          "line": 6631,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                    server.repl_no_slaves_since = time(NULL);",
          "new_line_content": "                    server.master_repl_offset += rsi.repl_offset;",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, count)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, count);",
          "new_line_content": "        if (flags & replyFlags[j].flag)",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c, replyFlags[j].name)",
          "new_text": null,
          "old_line_content": "            addReplyStatus(c, replyFlags[j].name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6645,
          "old_api": "freeReplicationBacklog",
          "new_api": null,
          "old_text": "freeReplicationBacklog()",
          "new_text": null,
          "old_line_content": "            freeReplicationBacklog();",
          "new_line_content": "         * it because we put DELs in it when loading expired keys in RDB, but",
          "content_same": false
        },
        {
          "line": 6652,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Redis aborting for OUT OF MEMORY. Allocating %zu bytes!\",\n        allocation_size)",
          "new_text": null,
          "old_line_content": "    serverPanic(\"Redis aborting for OUT OF MEMORY. Allocating %zu bytes!\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6661,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(varname, \"title\")",
          "new_text": null,
          "old_line_content": "    if (!strcmp(varname, \"title\")) {",
          "new_line_content": "/* Callback for sdstemplate on proc-title-template. See redis.conf for",
          "content_same": false
        },
        {
          "line": 6662,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(arg)",
          "new_text": null,
          "old_line_content": "        return sdsnew(arg);",
          "new_line_content": " * supported variables.",
          "content_same": false
        },
        {
          "line": 6663,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(varname, \"listen-addr\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcmp(varname, \"listen-addr\")) {",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 6665,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            return sdscatprintf(sdsempty(), \"%s:%u\",",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6669,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            return sdscatprintf(sdsempty(), \"unixsocket:%s\", server.unixsocket);",
          "new_line_content": "        if (server.port || server.tls_port)",
          "content_same": false
        },
        {
          "line": 6671,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"[cluster]\")",
          "new_text": null,
          "old_line_content": "        if (server.cluster_enabled) return sdsnew(\"[cluster]\");",
          "new_line_content": "                                server.bindaddr_count ? server.bindaddr[0] : \"*\",",
          "content_same": false
        },
        {
          "line": 6672,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"[sentinel]\")",
          "new_text": null,
          "old_line_content": "        else if (server.sentinel_mode) return sdsnew(\"[sentinel]\");",
          "new_line_content": "                                server.port ? server.port : server.tls_port);",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, cmd->flags, flagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, cmd->flags, flagNames);",
          "new_line_content": "        {CMD_MOVABLE_KEYS,      \"movablekeys\"},",
          "content_same": false
        },
        {
          "line": 6673,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        else return sdsempty();",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, cmd->doc_flags, docFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, cmd->doc_flags, docFlagNames);",
          "new_line_content": "    replyFlagNames docFlagNames[] = {",
          "content_same": false
        },
        {
          "line": 6692,
          "old_api": "sdstrim",
          "new_api": null,
          "old_text": "sdstrim(res, \" \")",
          "new_text": null,
          "old_line_content": "    return sdstrim(res, \" \");",
          "new_line_content": " * allocated sds, or NULL. */",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, flags, docFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, flags, docFlagNames);",
          "new_line_content": "        {CMD_KEY_NOT_KEY,         \"not_key\"},",
          "content_same": false
        },
        {
          "line": 6700,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(res)",
          "new_text": null,
          "old_line_content": "    if (sdslen(res) == 0) ok = 0;",
          "new_line_content": "int validateProcTitleTemplate(const char *template) {",
          "content_same": false
        },
        {
          "line": 6701,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(res)",
          "new_text": null,
          "old_line_content": "    sdsfree(res);",
          "new_line_content": "    int ok = 1;",
          "content_same": false
        },
        {
          "line": 6708,
          "old_api": "expandProcTitleTemplate",
          "new_api": null,
          "old_text": "expandProcTitleTemplate(server.proc_title_template, title)",
          "new_text": null,
          "old_line_content": "    sds proc_title = expandProcTitleTemplate(server.proc_title_template, title);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6711,
          "old_api": "setproctitle",
          "new_api": null,
          "old_text": "setproctitle(\"%s\", proc_title)",
          "new_text": null,
          "old_line_content": "    setproctitle(\"%s\", proc_title);",
          "new_line_content": "#ifdef USE_SETPROCTITLE",
          "content_same": false
        },
        {
          "line": 6712,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(proc_title)",
          "new_text": null,
          "old_line_content": "    sdsfree(proc_title);",
          "new_line_content": "    if (!title) title = server.exec_argv[0];",
          "content_same": false
        },
        {
          "line": 6714,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(title)",
          "new_text": null,
          "old_line_content": "    UNUSED(title);",
          "new_line_content": "    if (!proc_title) return C_ERR;  /* Not likely, proc_title_template is validated */",
          "content_same": false
        },
        {
          "line": 6722,
          "old_api": "setcpuaffinity",
          "new_api": null,
          "old_text": "setcpuaffinity(cpulist)",
          "new_text": null,
          "old_line_content": "    setcpuaffinity(cpulist);",
          "new_line_content": "    return C_OK;",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": "addReplyCommandFlags",
          "new_api": null,
          "old_text": "addReplyCommandFlags(c, flags, argFlagNames)",
          "new_text": null,
          "old_line_content": "    addReplyCommandFlags(c, flags, argFlagNames);",
          "new_line_content": "        {CMD_ARG_OPTIONAL,          \"optional\"},",
          "content_same": false
        },
        {
          "line": 6724,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cpulist)",
          "new_text": null,
          "old_line_content": "    UNUSED(cpulist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, num_args)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, num_args);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 6732,
          "old_api": "sd_notify",
          "new_api": null,
          "old_text": "sd_notify(0, sd_notify_msg)",
          "new_text": null,
          "old_line_content": "    int ret = sd_notify(0, sd_notify_msg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6735,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"systemd supervision error: NOTIFY_SOCKET not found!\");",
          "new_line_content": "int redisCommunicateSystemd(const char *sd_notify_msg) {",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, maplen);",
          "new_line_content": "        if (args[j].type == ARG_TYPE_ONEOF || args[j].type == ARG_TYPE_BLOCK) {",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"name\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"name\");",
          "new_line_content": "            maplen++;",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, args[j].name)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, args[j].name);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6747,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, ARG_TYPE_STR[args[j].type])",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, ARG_TYPE_STR[args[j].type]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6750,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"upstart supervision requested, but UPSTART_JOB not found!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "/* Attempt to set up upstart supervision. Returns 1 if successful. */",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"display_text\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"display_text\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"key_spec_index\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"key_spec_index\");",
          "new_line_content": "        if (has_display_text) {",
          "content_same": false
        },
        {
          "line": 6756,
          "old_api": "raise",
          "new_api": null,
          "old_text": "raise(SIGSTOP)",
          "new_text": null,
          "old_line_content": "    raise(SIGSTOP);",
          "new_line_content": "                \"upstart supervision requested, but UPSTART_JOB not found!\");",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": "kvstoreCreate",
          "new_api": null,
          "old_text": "kvstoreCreate(&dbDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND)",
          "new_text": null,
          "old_line_content": "        server.db[j].keys = kvstoreCreate(&dbDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND);",
          "new_line_content": "    if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": "kvstoreCreate",
          "new_api": null,
          "old_text": "kvstoreCreate(&dbExpiresDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND)",
          "new_text": null,
          "old_line_content": "        server.db[j].expires = kvstoreCreate(&dbExpiresDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND);",
          "new_line_content": "        slot_count_bits = CLUSTER_SLOT_MASK_BITS;",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"token\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"token\");",
          "new_line_content": "        if (args[j].key_spec_index != -1) {",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keylistDictType)",
          "new_text": null,
          "old_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&objectKeyPointerValueDictType)",
          "new_text": null,
          "old_line_content": "        server.db[j].blocking_keys_unblock_on_nokey = dictCreate(&objectKeyPointerValueDictType);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 6757,
          "old_api": "unsetenv",
          "new_api": null,
          "old_text": "unsetenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"summary\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"summary\");",
          "new_line_content": "        if (args[j].token) {",
          "content_same": false
        },
        {
          "line": 6764,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"systemd supervision requested or auto-detected, but Redis is compiled without libsystemd support!\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"since\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"since\");",
          "new_line_content": "        if (args[j].summary) {",
          "content_same": false
        },
        {
          "line": 6768,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "new_text": null,
          "old_line_content": "    if (redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\") <= 0)",
          "new_line_content": "#ifndef HAVE_LIBSYSTEMD",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "evictionPoolAlloc",
          "new_api": null,
          "old_text": "evictionPoolAlloc()",
          "new_text": null,
          "old_line_content": "    evictionPoolAlloc(); /* Initialize the LRU keys pool. */",
          "new_line_content": "        server.db[j].id = j;",
          "content_same": false
        },
        {
          "line": 6770,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n        \"Supervised by systemd. Please make sure you set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,",
          "new_line_content": "            \"systemd supervision requested or auto-detected, but Redis is compiled without libsystemd support!\");",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"deprecated_since\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"deprecated_since\");",
          "new_line_content": "        if (args[j].since) {",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": "kvstoreCreate",
          "new_api": null,
          "old_text": "kvstoreCreate(&objToDictDictType, 0, KVSTORE_ALLOCATE_DICTS_ON_DEMAND)",
          "new_text": null,
          "old_line_content": "    server.pubsub_channels = kvstoreCreate(&objToDictDictType, 0, KVSTORE_ALLOCATE_DICTS_ON_DEMAND);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "kvstoreCreate",
          "new_api": null,
          "old_text": "kvstoreCreate(&objToDictDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND | KVSTORE_FREE_EMPTY_DICTS)",
          "new_text": null,
          "old_line_content": "    server.pubsubshard_channels = kvstoreCreate(&objToDictDictType, slot_count_bits, KVSTORE_ALLOCATE_DICTS_ON_DEMAND | KVSTORE_FREE_EMPTY_DICTS);",
          "new_line_content": "    /* Note that server.pubsub_channels was chosen to be a kvstore (with only one dict, which",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"flags\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"flags\");",
          "new_line_content": "        if (args[j].deprecated_since) {",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"arguments\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"arguments\");",
          "new_line_content": "        if (args[j].flags) {",
          "content_same": false
        },
        {
          "line": 6780,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "        if (getenv(\"UPSTART_JOB\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6781,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_VERBOSE, \"Upstart supervision detected.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_VERBOSE, \"Upstart supervision detected.\");",
          "new_line_content": "int redisIsSupervised(int mode) {",
          "content_same": false
        },
        {
          "line": 6783,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"NOTIFY_SOCKET\")",
          "new_text": null,
          "old_line_content": "        } else if (getenv(\"NOTIFY_SOCKET\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6784,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_VERBOSE, \"Systemd supervision detected.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_VERBOSE, \"Systemd supervision detected.\");",
          "new_line_content": "    if (mode == SUPERVISED_AUTODETECT) {",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, rs->length)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c, rs->length);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6791,
          "old_api": "redisSupervisedUpstart",
          "new_api": null,
          "old_text": "redisSupervisedUpstart()",
          "new_text": null,
          "old_line_content": "            ret = redisSupervisedUpstart();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, curr->key)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, curr->key);",
          "new_line_content": "void addReplyJson(client *c, struct jsonObject *rs) {",
          "content_same": false
        },
        {
          "line": 6794,
          "old_api": "redisSupervisedSystemd",
          "new_api": null,
          "old_text": "redisSupervisedSystemd()",
          "new_text": null,
          "old_line_content": "            ret = redisSupervisedSystemd();",
          "new_line_content": "    switch (mode) {",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aof_buf = sdsempty();",
          "new_line_content": "    server.rdb_pipe_bufflen = 0;",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "new_line_content": "    server.rdb_bgsave_scheduled = 0;",
          "content_same": false
        },
        {
          "line": 4748,
          "old_api": "addReplyBool",
          "new_api": null,
          "old_text": "addReplyBool(c, curr->value.boolean)",
          "new_text": null,
          "old_line_content": "            addReplyBool(c, curr->value.boolean);",
          "new_line_content": "    for (int i = 0; i < rs->length; i++) {",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, curr->value.integer)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c, curr->value.integer);",
          "new_line_content": "        switch (curr->type) {",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, curr->value.string)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, curr->value.string);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": "resetServerStats",
          "new_api": null,
          "old_text": "resetServerStats()",
          "new_text": null,
          "old_line_content": "    resetServerStats();",
          "new_line_content": "    server.rdb_save_time_last = -1;",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": "addReplyJson",
          "new_api": null,
          "old_text": "addReplyJson(c, curr->value.object)",
          "new_text": null,
          "old_line_content": "            addReplyJson(c, curr->value.object);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.stat_starttime = time(NULL);",
          "new_line_content": "    server.rdb_last_load_keys_expired = 0;",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, curr->value.array.length)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, curr->value.array.length);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 6808,
          "old_api": "getMyClusterNode",
          "new_api": null,
          "old_text": "getMyClusterNode()",
          "new_text": null,
          "old_line_content": "            (server.cluster_enabled && clusterNodeIsMaster(getMyClusterNode())));",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": "addReplyJson",
          "new_api": null,
          "old_text": "addReplyJson(c, object)",
          "new_text": null,
          "old_line_content": "                addReplyJson(c, object);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Invalid JSON type %d\", curr->type)",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Invalid JSON type %d\", curr->type);",
          "new_line_content": "                struct jsonObject *object = curr->value.array.objects[k];",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, cmd->num_history)",
          "new_text": null,
          "old_line_content": "    addReplySetLen(c, cmd->num_history);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 2);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, cmd->history[j].since)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, cmd->history[j].since);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, cmd->history[j].changes)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, cmd->history[j].changes);",
          "new_line_content": "void addReplyCommandHistory(client *c, struct redisCommand *cmd) {",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, cmd->tips[j])",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, cmd->tips[j]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if (aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "new_line_content": "    server.acl_info.invalid_channel_accesses = 0;",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Can't create event loop timers.\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Can't create event loop timers.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    /* Create the timer callback, this is our way to process many background",
          "content_same": false
        },
        {
          "line": 6843,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(name,redisTests[j].name)",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(name,redisTests[j].name)) {",
          "new_line_content": "    {\"listpack\", listpackTest}",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"notes\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c, \"notes\");",
          "new_line_content": "        if (cmd->key_specs[i].notes) maplen++;",
          "content_same": false
        },
        {
          "line": 4800,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,cmd->key_specs[i].notes)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c,cmd->key_specs[i].notes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\n                \"Error registering the readable event for the module pipe.\")",
          "new_text": null,
          "old_line_content": "            serverPanic(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"flags\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"flags\");",
          "new_line_content": "        if (cmd->key_specs[i].notes) {",
          "content_same": false
        },
        {
          "line": 4806,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"begin_search\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"begin_search\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": null,
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": null,
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "                \"Error registering the readable event for the module pipe.\");",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": "aeSetAfterSleepProc",
          "new_api": null,
          "old_text": "aeSetAfterSleepProc(server.el,afterSleep)",
          "new_text": null,
          "old_line_content": "    aeSetAfterSleepProc(server.el,afterSleep);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6857,
          "old_api": "monotonicInit",
          "new_api": null,
          "old_text": "monotonicInit()",
          "new_text": null,
          "old_line_content": "    monotonicInit(); /* Required for dict tests, that are relying on monotime during dict rehashing. */",
          "new_line_content": "    struct timeval tv;",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"type\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6858,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[1], \"test\")",
          "new_text": null,
          "old_line_content": "    if (argc >= 3 && !strcasecmp(argv[1], \"test\")) {",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_BS_UNKNOWN:",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "new_line_content": "    /* 32 bit instances are limited to 4GB of address space, so if there is",
          "content_same": false
        },
        {
          "line": 6864,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"--valgrind\")",
          "new_text": null,
          "old_line_content": "            else if (!strcasecmp(arg, \"--valgrind\")) flags |= REDIS_TEST_VALGRIND;",
          "new_line_content": "        int flags = 0;",
          "content_same": false
        },
        {
          "line": 4817,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "                addReplyMapLen(c, 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "functionsInit",
          "new_api": null,
          "old_text": "functionsInit()",
          "new_text": null,
          "old_line_content": "    if (functionsInit() == C_ERR) {",
          "new_line_content": "        server.maxmemory = 3072LL*(1024*1024); /* 3 GB */",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Functions initialization failed, check the server logs.\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Functions initialization failed, check the server logs.\");",
          "new_line_content": "        server.maxmemory_policy = MAXMEMORY_NO_EVICTION;",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4821,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_BS_INDEX:",
          "content_same": false
        },
        {
          "line": 6870,
          "old_api": "proc",
          "new_api": null,
          "old_text": "redisTests[j].proc(argc,argv,flags)",
          "new_text": null,
          "old_line_content": "                redisTests[j].failed = (redisTests[j].proc(argc,argv,flags) != 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": "ACLUpdateDefaultUserPassword",
          "new_api": null,
          "old_text": "ACLUpdateDefaultUserPassword(server.requirepass)",
          "new_text": null,
          "old_line_content": "    ACLUpdateDefaultUserPassword(server.requirepass);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6878,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"[failed] Test - %s\\n\", redisTests[j].name)",
          "new_text": null,
          "old_line_content": "                    printf(\"[failed] Test - %s\\n\", redisTests[j].name);",
          "new_line_content": "            /* Report tests result */",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_BS_KEYWORD:",
          "content_same": false
        },
        {
          "line": 6880,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"[ok] Test - %s\\n\", redisTests[j].name)",
          "new_text": null,
          "old_line_content": "                    printf(\"[ok] Test - %s\\n\", redisTests[j].name);",
          "new_line_content": "            for (j = 0; j < numtests; j++) {",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"startfrom\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"startfrom\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6884,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%d tests, %d passed, %d failed\\n\", numtests,\n                   numtests-failed_num, failed_num)",
          "new_text": null,
          "old_line_content": "            printf(\"%d tests, %d passed, %d failed\\n\", numtests,",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "connectionIndexByType",
          "new_api": null,
          "old_text": "connectionIndexByType(CONN_TYPE_SOCKET)",
          "new_text": null,
          "old_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_SOCKET);",
          "new_line_content": "void initListeners(void) {",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"find_keys\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"find_keys\");",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_SOCKET)",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_SOCKET);",
          "new_line_content": "    int conn_index;",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "                addReplyMapLen(c, 2);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"type\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"type\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6891,
          "old_api": "proc",
          "new_api": null,
          "old_text": "proc(argc,argv,flags)",
          "new_text": null,
          "old_line_content": "            return proc(argc,argv,flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_FK_UNKNOWN:",
          "content_same": false
        },
        {
          "line": 6900,
          "old_api": "spt_init",
          "new_api": null,
          "old_text": "spt_init(argc, argv)",
          "new_text": null,
          "old_line_content": "    spt_init(argc, argv);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "connectionTypeTls",
          "new_api": null,
          "old_text": "connectionTypeTls()",
          "new_text": null,
          "old_line_content": "        ConnectionType *ct_tls = connectionTypeTls();",
          "new_line_content": "        listener->port = server.port;",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, 2)",
          "new_text": null,
          "old_line_content": "                addReplyMapLen(c, 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Failed finding TLS support.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Failed finding TLS support.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_FK_RANGE:",
          "content_same": false
        },
        {
          "line": 6902,
          "old_api": "tzset",
          "new_api": null,
          "old_text": "tzset()",
          "new_text": null,
          "old_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\");",
          "new_line_content": "        if (!ct_tls) {",
          "content_same": false
        },
        {
          "line": 6903,
          "old_api": "zmalloc_set_oom_handler",
          "new_api": null,
          "old_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "new_text": null,
          "old_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "new_line_content": "    /* We need to initialize our libraries, and the server configuration. */",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"keystep\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"keystep\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6909,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    srandom(time(NULL)^getpid()^tv.tv_usec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6910,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    init_genrand64(((long long) tv.tv_sec * 1000000 + tv.tv_usec) ^ getpid());",
          "new_line_content": "    /* To achieve entropy, in case of containers, their time() and getpid() can",
          "content_same": false
        },
        {
          "line": 6911,
          "old_api": "crc64_init",
          "new_api": null,
          "old_text": "crc64_init()",
          "new_text": null,
          "old_line_content": "    crc64_init();",
          "new_line_content": "     * be the same. But value of tv_usec is fast enough to make the difference */",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_TLS)",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Failed finding connection listener of %s\", CONN_TYPE_TLS);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6917,
          "old_api": "umask",
          "new_api": null,
          "old_text": "umask(0777)",
          "new_text": null,
          "old_line_content": "    umask(server.umask = umask(0777));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4871,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"spec\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"spec\");",
          "new_line_content": "            case KSPEC_FK_KEYNUM:",
          "content_same": false
        },
        {
          "line": 6920,
          "old_api": "getRandomBytes",
          "new_api": null,
          "old_text": "getRandomBytes(hashseed,sizeof(hashseed))",
          "new_text": null,
          "old_line_content": "    getRandomBytes(hashseed,sizeof(hashseed));",
          "new_line_content": "     * race condition with threads that could be creating files or directories.",
          "content_same": false
        },
        {
          "line": 6921,
          "old_api": "dictSetHashFunctionSeed",
          "new_api": null,
          "old_text": "dictSetHashFunctionSeed(hashseed)",
          "new_text": null,
          "old_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": "connectionIndexByType",
          "new_api": null,
          "old_text": "connectionIndexByType(CONN_TYPE_UNIX)",
          "new_text": null,
          "old_line_content": "        conn_index = connectionIndexByType(CONN_TYPE_UNIX);",
          "new_line_content": "        listener->bindaddr_count = server.bindaddr_count;",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"firstkey\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c, \"firstkey\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6923,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(argv[0], '/')",
          "new_text": null,
          "old_line_content": "    char *exec_name = strrchr(argv[0], '/');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6927,
          "old_api": "ACLInit",
          "new_api": null,
          "old_text": "ACLInit()",
          "new_text": null,
          "old_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "connectionByType",
          "new_api": null,
          "old_text": "connectionByType(CONN_TYPE_UNIX)",
          "new_text": null,
          "old_line_content": "        listener->ct = connectionByType(CONN_TYPE_UNIX);",
          "new_line_content": "        if (conn_index < 0)",
          "content_same": false
        },
        {
          "line": 6929,
          "old_api": "moduleInitModulesSystem",
          "new_api": null,
          "old_text": "moduleInitModulesSystem()",
          "new_text": null,
          "old_line_content": "    moduleInitModulesSystem();",
          "new_line_content": "    if (exec_name == NULL) exec_name = argv[0];",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": "addReplySetLen",
          "new_api": null,
          "old_text": "addReplySetLen(c, 0)",
          "new_text": null,
          "old_line_content": "        addReplySetLen(c, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6937,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(argv[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "new_line_content": "    /* Store the executable path and arguments in a safe place in order",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "connListen",
          "new_api": null,
          "old_text": "connListen(listener)",
          "new_text": null,
          "old_line_content": "        if (connListen(listener) == C_ERR) {",
          "new_line_content": "    for (int j = 0; j < CONN_TYPE_MAX; j++) {",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "get_type",
          "new_api": null,
          "old_text": "listener->ct->get_type(NULL)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Failed listening on port %u (%s), aborting.\", listener->port, listener->ct->get_type(NULL));",
          "new_line_content": "        listener = &server.listeners[j];",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        if (listener->ct == NULL)",
          "content_same": false
        },
        {
          "line": 6943,
          "old_api": "initSentinelConfig",
          "new_api": null,
          "old_text": "initSentinelConfig()",
          "new_text": null,
          "old_line_content": "        initSentinelConfig();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4896,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(cmd->subcommands_dict)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, dictSize(cmd->subcommands_dict));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6944,
          "old_api": "initSentinel",
          "new_api": null,
          "old_text": "initSentinel()",
          "new_text": null,
          "old_line_content": "        initSentinel();",
          "new_line_content": "    /* We need to init sentinel right now as parsing the configuration file",
          "content_same": false
        },
        {
          "line": 4898,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(cmd->subcommands_dict)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(cmd->subcommands_dict);",
          "new_line_content": "    if (use_map)",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *sub = (struct redisCommand *)dictGetVal(de);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(sub->fullname)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c, sub->fullname, sdslen(sub->fullname));",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 6950,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name,\"redis-check-rdb\")",
          "new_text": null,
          "old_line_content": "    if (strstr(exec_name,\"redis-check-rdb\") != NULL)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "       listen_fds += listener->count;",
          "content_same": false
        },
        {
          "line": 6951,
          "old_api": "redis_check_rdb_main",
          "new_api": null,
          "old_text": "redis_check_rdb_main(argc,argv,NULL)",
          "new_text": null,
          "old_line_content": "        redis_check_rdb_main(argc,argv,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6952,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(exec_name,\"redis-check-aof\")",
          "new_text": null,
          "old_line_content": "    else if (strstr(exec_name,\"redis-check-aof\") != NULL)",
          "new_line_content": "    /* Check if we need to start in redis-check-rdb/aof mode. We just execute",
          "content_same": false
        },
        {
          "line": 6953,
          "old_api": "redis_check_aof_main",
          "new_api": null,
          "old_text": "redis_check_aof_main(argc,argv)",
          "new_text": null,
          "old_line_content": "        redis_check_aof_main(argc,argv);",
          "new_line_content": "     * the program main. However the program is part of the Redis executable",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "        addReplyNull(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6960,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "    if (argc >= 2) {",
          "content_same": false
        },
        {
          "line": 6961,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"--version\")",
          "new_text": null,
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0)",
          "new_line_content": "        j = 1; /* First option to parse in argv[] */",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "bioInit",
          "new_api": null,
          "old_text": "bioInit()",
          "new_text": null,
          "old_line_content": "    bioInit();",
          "new_line_content": " * are loaded).",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": "initThreadedIO",
          "new_api": null,
          "old_text": "initThreadedIO()",
          "new_text": null,
          "old_line_content": "    initThreadedIO();",
          "new_line_content": " * Specifically, creation of threads due to a race bug in ld.so, in which",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": "set_jemalloc_bg_thread",
          "new_api": null,
          "old_text": "set_jemalloc_bg_thread(server.jemalloc_bg_thread)",
          "new_text": null,
          "old_line_content": "    set_jemalloc_bg_thread(server.jemalloc_bg_thread);",
          "new_line_content": " * Thread Local Storage initialization collides with dlopen call.",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    server.initial_memory_usage = zmalloc_used_memory();",
          "new_line_content": " * see: https://sourceware.org/bugzilla/show_bug.cgi?id=19329 */",
          "content_same": false
        },
        {
          "line": 6963,
          "old_api": "getVersion",
          "new_api": null,
          "old_text": "getVersion()",
          "new_text": null,
          "old_line_content": "            sds version = getVersion();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6964,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server %s\\n\", version)",
          "new_text": null,
          "old_line_content": "            printf(\"Redis server %s\\n\", version);",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 10)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 10);",
          "new_line_content": "            if (lastkey >= 0)",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "                lastkey += firstkey;",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, cmd->arity)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c, cmd->arity);",
          "new_line_content": "            keystep = cmd->legacy_range_key_spec.fk.range.keystep;",
          "content_same": false
        },
        {
          "line": 4925,
          "old_api": "addReplyFlagsForCommand",
          "new_api": null,
          "old_text": "addReplyFlagsForCommand(c, cmd)",
          "new_text": null,
          "old_line_content": "        addReplyFlagsForCommand(c, cmd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4926,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, firstkey)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c, firstkey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6972,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2])",
          "new_text": null,
          "old_line_content": "                memtest(atoi(argv[2]),50);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6976,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 6979,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"--check-system\")",
          "new_text": null,
          "old_line_content": "        } if (strcmp(argv[1], \"--check-system\") == 0) {",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6988,
          "old_api": "getAbsolutePath",
          "new_api": null,
          "old_text": "getAbsolutePath(argv[1])",
          "new_text": null,
          "old_line_content": "            server.configfile = getAbsolutePath(argv[1]);",
          "new_line_content": "         * Precedence wise, File, stdin, explicit options -- last config is the one that matters.",
          "content_same": false
        },
        {
          "line": 6989,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.exec_argv[1])",
          "new_text": null,
          "old_line_content": "            zfree(server.exec_argv[1]);",
          "new_line_content": "         *",
          "content_same": false
        },
        {
          "line": 6990,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(server.configfile)",
          "new_text": null,
          "old_line_content": "            server.exec_argv[1] = zstrdup(server.configfile);",
          "new_line_content": "         * First argument is the config file name? */",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&c->legacy_range_key_spec, 0, sizeof(c->legacy_range_key_spec))",
          "new_text": null,
          "old_line_content": "    memset(&c->legacy_range_key_spec, 0, sizeof(c->legacy_range_key_spec));",
          "new_line_content": " * spec used by COMMAND will show 0,0,0. This is not a dire situation",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c, maplen)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c, maplen);",
          "new_line_content": "#ifdef LOG_REQ_RES",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"summary\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"summary\");",
          "new_line_content": "    if (cmd->args) maplen++;",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, cmd->summary)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, cmd->summary);",
          "new_line_content": "    if (cmd->subcommands_dict) maplen++;",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"since\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"since\");",
          "new_line_content": "    if (cmd->summary) {",
          "content_same": false
        },
        {
          "line": 7008,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "new_line_content": "             * string \"port 6380\\n\" to be parsed after the actual config file",
          "content_same": false
        },
        {
          "line": 7010,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,argv[j]+2)",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,argv[j]+2);",
          "new_line_content": "             * Only consider that if the last config has at least one argument. */",
          "content_same": false
        },
        {
          "line": 7011,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\" \")",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "            else if (handled_last_config_arg && argv[j][0] == '-' && argv[j][1] == '-') {",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"complexity\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"complexity\");",
          "new_line_content": "    /* Always have the group, for module commands the group is always \"module\". */",
          "content_same": false
        },
        {
          "line": 7019,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--save\")",
          "new_text": null,
          "old_line_content": "                        !strcasecmp(argv[j], \"--save\"))",
          "new_line_content": "                if (argc_tmp == 1) {",
          "content_same": false
        },
        {
          "line": 4973,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"module\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"module\");",
          "new_line_content": "    if (cmd->complexity) {",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"doc_flags\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"doc_flags\");",
          "new_line_content": "    if (cmd->flags & CMD_MODULE) {",
          "content_same": false
        },
        {
          "line": 7028,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\\\"\\\"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "new_line_content": "                         * handled_last_config_arg flag and append an empty \"\" config value",
          "content_same": false
        },
        {
          "line": 4981,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"deprecated_since\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"deprecated_since\");",
          "new_line_content": "    if (cmd->doc_flags) {",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--save\")",
          "new_text": null,
          "old_line_content": "                    else if ((j == argc-1) && !strcasecmp(argv[j], \"--save\")) {",
          "new_line_content": "                         * break it in #10660, 7.0.1), since there might be users who generate",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"replaced_by\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"replaced_by\");",
          "new_line_content": "    if (cmd->deprecated_since) {",
          "content_same": false
        },
        {
          "line": 7035,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\\\"\\\"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\\\"\\\"\");",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"history\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"history\");",
          "new_line_content": "    if (cmd->replaced_by) {",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--sentinel\")",
          "new_text": null,
          "old_line_content": "                        !strcasecmp(argv[j], \"--sentinel\"))",
          "new_line_content": "                         * In this case, we append an empty \"\" config value to the options,",
          "content_same": false
        },
        {
          "line": 7045,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options, \"\")",
          "new_text": null,
          "old_line_content": "                        options = sdscat(options, \"\");",
          "new_line_content": "                        /* Special case: handle some things like `--sentinel --config value`.",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(firstkey, c->key_specs[i].bs.index.pos)",
          "new_text": null,
          "old_line_content": "        firstkey = min(firstkey, c->key_specs[i].bs.index.pos);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7048,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[j], \"--sentinel\")",
          "new_text": null,
          "old_line_content": "                    else if ((j == argc-1) && !strcasecmp(argv[j], \"--sentinel\")) {",
          "new_line_content": "                         * We are doing it to be compatible with pre 7.0 behavior (which we",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c, \"subcommands\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c, \"subcommands\");",
          "new_line_content": "    if (cmd->args) {",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": "max",
          "new_api": null,
          "old_text": "max((unsigned)lastkey, (unsigned)lastkey_abs_index)",
          "new_text": null,
          "old_line_content": "        lastkey = max((unsigned)lastkey, (unsigned)lastkey_abs_index);",
          "new_line_content": "        /* Get the absolute index for lastkey (in the \"range\" spec, lastkey is relative to firstkey) */",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv+2,c->argc-2)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = lookupCommand(c->argv+2,c->argc-2);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7060,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv_tmp, argc_tmp)",
          "new_text": null,
          "old_line_content": "                sdsfreesplitres(argv_tmp, argc_tmp);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(firstkey != 0)",
          "new_text": null,
          "old_line_content": "    serverAssert(firstkey != 0);",
          "new_line_content": "        /* Couldn't find range specs, the legacy range spec will remain empty, and we set the movablekeys flag. */",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(lastkey != 0)",
          "new_text": null,
          "old_line_content": "    serverAssert(lastkey != 0);",
          "new_line_content": "        c->flags |= CMD_MOVABLE_KEYS;",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "doesCommandHaveKeys",
          "new_api": null,
          "old_text": "doesCommandHaveKeys(cmd)",
          "new_text": null,
          "old_line_content": "    } else if (!doesCommandHaveKeys(cmd)) {",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The command has no key arguments\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"The command has no key arguments\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7063,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[j])",
          "new_text": null,
          "old_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "new_line_content": "                    handled_last_config_arg = 1;",
          "content_same": false
        },
        {
          "line": 7064,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\" \")",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 7070,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(server.configfile, config_from_stdin, options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(server.configfile, config_from_stdin, options);",
          "new_line_content": "                handled_last_config_arg = 1;",
          "content_same": false
        },
        {
          "line": 7071,
          "old_api": "loadSentinelConfigFromQueue",
          "new_api": null,
          "old_text": "loadSentinelConfigFromQueue()",
          "new_text": null,
          "old_line_content": "        if (server.sentinel_mode) loadSentinelConfigFromQueue();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 7072,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(options)",
          "new_text": null,
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 7074,
          "old_api": "sentinelCheckConfigFile",
          "new_api": null,
          "old_text": "sentinelCheckConfigFile()",
          "new_text": null,
          "old_line_content": "    if (server.sentinel_mode) sentinelCheckConfigFile();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    return sdscatfmt(sdsempty(), \"%s|%s\", parent_name, sub_name);",
          "new_line_content": "    c->legacy_range_key_spec.fk.range.keystep = 1;",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": "getKeysFromCommandWithSpecs",
          "new_api": null,
          "old_text": "getKeysFromCommandWithSpecs(cmd,c->argv+2,c->argc-2,GET_KEYSPEC_DEFAULT,&result)",
          "new_text": null,
          "old_line_content": "    if (!getKeysFromCommandWithSpecs(cmd,c->argv+2,c->argc-2,GET_KEYSPEC_DEFAULT,&result)) {",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,0)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,0);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 7078,
          "old_api": "linuxMemoryWarnings",
          "new_api": null,
          "old_text": "linuxMemoryWarnings()",
          "new_text": null,
          "old_line_content": "    linuxMemoryWarnings();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5031,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Invalid arguments specified for command\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"Invalid arguments specified for command\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7080,
          "old_api": "checkXenClocksource",
          "new_api": null,
          "old_text": "checkXenClocksource(&err_msg)",
          "new_text": null,
          "old_line_content": "    if (checkXenClocksource(&err_msg) < 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7081,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "    /* Do system checks */",
          "content_same": false
        },
        {
          "line": 7082,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(err_msg)",
          "new_text": null,
          "old_line_content": "        sdsfree(err_msg);",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "ACLGetCommandID",
          "new_api": null,
          "old_text": "ACLGetCommandID(subcommand->fullname)",
          "new_text": null,
          "old_line_content": "    subcommand->id = ACLGetCommandID(subcommand->fullname); /* Assign the ID used for ACL. */",
          "new_line_content": "void commandAddSubcommand(struct redisCommand *parent, struct redisCommand *subcommand, const char *declared_name) {",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[result.keys[j].pos+2])",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,c->argv[result.keys[j].pos+2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[result.keys[j].pos+2])",
          "new_text": null,
          "old_line_content": "                addReplyBulk(c,c->argv[result.keys[j].pos+2]);",
          "new_line_content": "        for (j = 0; j < result.numkeys; j++) {",
          "content_same": false
        },
        {
          "line": 5041,
          "old_api": "addReplyFlagsForKeyArgs",
          "new_api": null,
          "old_text": "addReplyFlagsForKeyArgs(c,result.keys[j].flags)",
          "new_text": null,
          "old_line_content": "                addReplyFlagsForKeyArgs(c,result.keys[j].flags);",
          "new_line_content": "            if (!with_flags) {",
          "content_same": false
        },
        {
          "line": 7088,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"WARNING %s\", err_msg)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"WARNING %s\", err_msg);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7089,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(err_msg)",
          "new_text": null,
          "old_line_content": "            sdsfree(err_msg);",
          "new_line_content": "#if defined (__arm64__)",
          "content_same": false
        },
        {
          "line": 7103,
          "old_api": "redisIsSupervised",
          "new_api": null,
          "old_text": "redisIsSupervised(server.supervised_mode)",
          "new_text": null,
          "old_line_content": "    server.supervised = redisIsSupervised(server.supervised_mode);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7105,
          "old_api": "daemonize",
          "new_api": null,
          "old_text": "daemonize()",
          "new_text": null,
          "old_line_content": "    if (background) daemonize();",
          "new_line_content": "#endif /* __linux__ */",
          "content_same": false
        },
        {
          "line": 7107,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\");",
          "new_line_content": "    /* Daemonize if needed */",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, dictSize(server.commands));",
          "new_line_content": "/* COMMAND (no args) */",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(server.commands);",
          "new_line_content": "void commandCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        addReplyCommandInfo(c, dictGetVal(de));",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7114,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (int)getpid());",
          "new_line_content": "        \"Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\",",
          "content_same": false
        },
        {
          "line": 7123,
          "old_api": "createPidFile",
          "new_api": null,
          "old_text": "createPidFile()",
          "new_text": null,
          "old_line_content": "    if (background || server.pidfile) createPidFile();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "setImplicitACLCategories",
          "new_api": null,
          "old_text": "setImplicitACLCategories(c)",
          "new_text": null,
          "old_line_content": "    setImplicitACLCategories(c);",
          "new_line_content": "    if (c->flags & CMD_ONLY_SENTINEL && !server.sentinel_mode)",
          "content_same": false
        },
        {
          "line": 7125,
          "old_api": "redisAsciiArt",
          "new_api": null,
          "old_text": "redisAsciiArt()",
          "new_text": null,
          "old_line_content": "    redisAsciiArt();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7126,
          "old_api": "checkTcpBacklogSettings",
          "new_api": null,
          "old_text": "checkTcpBacklogSettings()",
          "new_text": null,
          "old_line_content": "    checkTcpBacklogSettings();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": "populateCommandLegacyRangeSpec",
          "new_api": null,
          "old_text": "populateCommandLegacyRangeSpec(c)",
          "new_text": null,
          "old_line_content": "    populateCommandLegacyRangeSpec(c);",
          "new_line_content": "    /* We start with an unallocated histogram and only allocate memory when a command",
          "content_same": false
        },
        {
          "line": 7132,
          "old_api": "moduleLoadFromQueue",
          "new_api": null,
          "old_text": "moduleLoadFromQueue()",
          "new_text": null,
          "old_line_content": "        moduleLoadFromQueue();",
          "new_line_content": "    if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 7134,
          "old_api": "ACLLoadUsersAtStartup",
          "new_api": null,
          "old_text": "ACLLoadUsersAtStartup()",
          "new_text": null,
          "old_line_content": "    ACLLoadUsersAtStartup();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "ACLGetCommandID",
          "new_api": null,
          "old_text": "ACLGetCommandID(c->fullname)",
          "new_text": null,
          "old_line_content": "    c->id = ACLGetCommandID(c->fullname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7135,
          "old_api": "initListeners",
          "new_api": null,
          "old_text": "initListeners()",
          "new_text": null,
          "old_line_content": "    initListeners();",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "catSubCommandFullname",
          "new_api": null,
          "old_text": "catSubCommandFullname(c->declared_name, sub->declared_name)",
          "new_text": null,
          "old_line_content": "            sub->fullname = catSubCommandFullname(c->declared_name, sub->declared_name);",
          "new_line_content": "    /* Handle subcommands */",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": "populateCommandStructure",
          "new_api": null,
          "old_text": "populateCommandStructure(sub)",
          "new_text": null,
          "old_line_content": "            if (populateCommandStructure(sub) == C_ERR)",
          "new_line_content": "    if (c->subcommands) {",
          "content_same": false
        },
        {
          "line": 7143,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Server initialized\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Server initialized\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7145,
          "old_api": "loadDataFromDisk",
          "new_api": null,
          "old_text": "loadDataFromDisk()",
          "new_text": null,
          "old_line_content": "        loadDataFromDisk();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": "commandAddSubcommand",
          "new_api": null,
          "old_text": "commandAddSubcommand(c, sub, sub->declared_name)",
          "new_text": null,
          "old_line_content": "            commandAddSubcommand(c, sub, sub->declared_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": "moduleGetHandleByName",
          "new_api": null,
          "old_text": "moduleGetHandleByName(filter->arg)",
          "new_text": null,
          "old_line_content": "                filter->cache.u.module_handle = moduleGetHandleByName(filter->arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7146,
          "old_api": "aofOpenIfNeededOnServerStart",
          "new_api": null,
          "old_text": "aofOpenIfNeededOnServerStart()",
          "new_text": null,
          "old_line_content": "        aofOpenIfNeededOnServerStart();",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": "moduleIsModuleCommand",
          "new_api": null,
          "old_text": "moduleIsModuleCommand(filter->cache.u.module_handle, cmd)",
          "new_text": null,
          "old_line_content": "            return !moduleIsModuleCommand(filter->cache.u.module_handle, cmd);",
          "new_line_content": "        case (COMMAND_LIST_FILTER_MODULE):",
          "content_same": false
        },
        {
          "line": 7147,
          "old_api": "aofDelHistoryFiles",
          "new_api": null,
          "old_text": "aofDelHistoryFiles()",
          "new_text": null,
          "old_line_content": "        aofDelHistoryFiles();",
          "new_line_content": "        /* Things not needed when running in Sentinel mode. */",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": "ACLGetCommandCategoryFlagByName",
          "new_api": null,
          "old_text": "ACLGetCommandCategoryFlagByName(filter->arg)",
          "new_text": null,
          "old_line_content": "                filter->cache.u.aclcat = ACLGetCommandCategoryFlagByName(filter->arg);",
          "new_line_content": "                filter->cache.valid = 1;",
          "content_same": false
        },
        {
          "line": 7157,
          "old_api": "get_type",
          "new_api": null,
          "old_text": "listener->ct->get_type(NULL)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE,\"Ready to accept connections %s\", listener->ct->get_type(NULL));",
          "new_line_content": "        for (j = 0; j < CONN_TYPE_MAX; j++) {",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "            return !stringmatchlen(filter->arg, sdslen(filter->arg), cmd->fullname, sdslen(cmd->fullname), 1);",
          "new_line_content": "                return 1; /* Invalid ACL category */",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Invalid filter type %d\", filter->type)",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Invalid filter type %d\", filter->type);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 7164,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\")",
          "new_text": null,
          "old_line_content": "                redisCommunicateSystemd(\"STATUS=Ready to accept connections in read-only mode. Waiting for MASTER <-> REPLICA sync\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7166,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"READY=1\\n\")",
          "new_text": null,
          "old_line_content": "            redisCommunicateSystemd(\"READY=1\\n\");",
          "new_line_content": "            if (!server.masterhost) {",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->declared_name)",
          "new_text": null,
          "old_line_content": "        c->fullname = sdsnew(c->declared_name);",
          "new_line_content": "        if (c->declared_name == NULL)",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": "populateCommandStructure",
          "new_api": null,
          "old_text": "populateCommandStructure(c)",
          "new_text": null,
          "old_line_content": "        if (populateCommandStructure(c) == C_ERR)",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(c->fullname)",
          "new_text": null,
          "old_line_content": "        retval1 = dictAdd(server.commands, sdsdup(c->fullname), c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "/* COMMAND LIST FILTERBY (MODULE <module-name>|ACLCAT <cat>|PATTERN <pattern>) */",
          "content_same": false
        },
        {
          "line": 5126,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "void commandListWithFilter(client *c, dict *commands, commandListFilter filter, int *numcmds) {",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(c->fullname)",
          "new_text": null,
          "old_line_content": "        retval2 = dictAdd(server.orig_commands, sdsdup(c->fullname), c);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "new_text": null,
          "old_line_content": "        serverAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": "shouldFilterFromCommandList",
          "new_api": null,
          "old_text": "shouldFilterFromCommandList(cmd,&filter)",
          "new_text": null,
          "old_line_content": "        if (!shouldFilterFromCommandList(cmd,&filter)) {",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7172,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"READY=1\\n\")",
          "new_text": null,
          "old_line_content": "            redisCommunicateSystemd(\"READY=1\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7178,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 7181,
          "old_api": "redisSetCpuAffinity",
          "new_api": null,
          "old_text": "redisSetCpuAffinity(server.server_cpulist)",
          "new_text": null,
          "old_line_content": "    redisSetCpuAffinity(server.server_cpulist);",
          "new_line_content": "    /* Warning the user about suspicious maxmemory setting. */",
          "content_same": false
        },
        {
          "line": 7182,
          "old_api": "setOOMScoreAdj",
          "new_api": null,
          "old_text": "setOOMScoreAdj(-1)",
          "new_text": null,
          "old_line_content": "    setOOMScoreAdj(-1);",
          "new_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024*1024) {",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(commands);",
          "new_line_content": "void resetCommandTableStats(dict* commands) {",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    struct redisCommand *c;",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 7184,
          "old_api": "aeMain",
          "new_api": null,
          "old_text": "aeMain(server.el)",
          "new_text": null,
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 7185,
          "old_api": "aeDeleteEventLoop",
          "new_api": null,
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": null,
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(commands);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "/* COMMAND LIST */",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "hdr_close",
          "new_api": null,
          "old_text": "hdr_close(c->latency_histogram)",
          "new_text": null,
          "old_line_content": "            hdr_close(c->latency_histogram);",
          "new_line_content": "        c->microseconds = 0;",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "void commandListWithoutFilter(client *c, dict *commands, int *numcmds) {",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": "resetCommandTableStats",
          "new_api": null,
          "old_text": "resetCommandTableStats(c->subcommands_dict)",
          "new_text": null,
          "old_line_content": "            resetCommandTableStats(c->subcommands_dict);",
          "new_line_content": "        if(c->latency_histogram) {",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            c->latency_histogram = NULL;",
          "content_same": false
        },
        {
          "line": 5153,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "raxFreeWithCallback",
          "new_api": null,
          "old_text": "raxFreeWithCallback(server.errors, zfree)",
          "new_text": null,
          "old_line_content": "    raxFreeWithCallback(server.errors, zfree);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"filterby\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"filterby\") && moreargs == 2) {",
          "new_line_content": "    int i = 2, got_filter = 0;",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype,\"module\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(filtertype,\"module\")) {",
          "new_line_content": "    for (; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype,\"aclcat\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(filtertype,\"aclcat\")) {",
          "new_line_content": "        char *opt = c->argv[i]->ptr;",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(filtertype,\"pattern\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(filtertype,\"pattern\")) {",
          "new_line_content": "            char *filtertype = c->argv[i+1]->ptr;",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(oa->ops,sizeof(redisOp)*oa->capacity)",
          "new_text": null,
          "old_line_content": "        oa->ops = zrealloc(oa->ops,sizeof(redisOp)*oa->capacity);",
          "new_line_content": "    } else if (oa->numops >= oa->capacity) {",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "    void *replylen = addReplyDeferredLen(c);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(op->argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(op->argv[j]);",
          "new_line_content": "        redisOp *op;",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(op->argv)",
          "new_text": null,
          "old_line_content": "        zfree(op->argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": "commandListWithFilter",
          "new_api": null,
          "old_text": "commandListWithFilter(c, server.commands, filter, &numcmds)",
          "new_text": null,
          "old_line_content": "        commandListWithFilter(c, server.commands, filter, &numcmds);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(!oa->numops)",
          "new_text": null,
          "old_line_content": "    serverAssert(!oa->numops);",
          "new_line_content": "        for (j = 0; j < op->argc; j++)",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, s)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *base_cmd = dictFetchValue(server.commands, s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(container->subcommands_dict, sub_name)",
          "new_text": null,
          "old_line_content": "    return dictFetchValue(container->subcommands_dict, sub_name);",
          "new_line_content": "    int has_subcommands = base_cmd && base_cmd->subcommands_dict;",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(server.commands)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(server.commands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    if (c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            addReplyCommandInfo(c, dictGetVal(de));",
          "new_line_content": "        dictIterator *di;",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": "lookupCommandBySds",
          "new_api": null,
          "old_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyCommandInfo(c, lookupCommandBySds(c->argv[i]->ptr));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(commands, argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *base_cmd = dictFetchValue(commands, argv[0]->ptr);",
          "new_line_content": " * `strict` should be used every time we want to look up a command",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "        addReplyMapLen(c, dictSize(server.commands));",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(server.commands)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(server.commands);",
          "new_line_content": "    if (c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        /* Reply with an array of all commands */",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": "lookupSubcommand",
          "new_api": null,
          "old_text": "lookupSubcommand(base_cmd, argv[1]->ptr)",
          "new_text": null,
          "old_line_content": "        return lookupSubcommand(base_cmd, argv[1]->ptr);",
          "new_line_content": "        return base_cmd;",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "        dictIterator *di;",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(cmd->fullname)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c, cmd->fullname, sdslen(cmd->fullname));",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "        void *replylen = addReplyDeferredLen(c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": "lookupCommandBySds",
          "new_api": null,
          "old_text": "lookupCommandBySds(c->argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            struct redisCommand *cmd = lookupCommandBySds(c->argv[i]->ptr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "addReplyCommandDocs",
          "new_api": null,
          "old_text": "addReplyCommandDocs(c, cmd)",
          "new_text": null,
          "old_line_content": "            addReplyCommandDocs(c, cmd);",
          "new_line_content": "        for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "setDeferredMapLen",
          "new_api": null,
          "old_text": "setDeferredMapLen(c,replylen,numcmds)",
          "new_text": null,
          "old_line_content": "        setDeferredMapLen(c,replylen,numcmds);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(argc > 0)",
          "new_text": null,
          "old_line_content": "    serverAssert(argc > 0); /* Avoid warning `-Wmaybe-uninitialized` in lookupCommandLogic() */",
          "new_line_content": "        /* Currently we support just one level of subcommands */",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "initStaticStringObject",
          "new_api": null,
          "old_text": "initStaticStringObject(objects[j],strings[j])",
          "new_text": null,
          "old_line_content": "        initStaticStringObject(objects[j],strings[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "getKeysSubcommand",
          "new_api": null,
          "old_text": "getKeysSubcommand(c)",
          "new_text": null,
          "old_line_content": "    getKeysSubcommand(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "lookupCommandLogic",
          "new_api": null,
          "old_text": "lookupCommandLogic(commands,argv,argc,1)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = lookupCommandLogic(commands,argv,argc,1);",
          "new_line_content": "    for (j = 0; j < argc; j++) {",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": "lookupCommandBySdsLogic",
          "new_api": null,
          "old_text": "lookupCommandBySdsLogic(commands,name)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandBySdsLogic(commands,name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(name)",
          "new_text": null,
          "old_line_content": "    sdsfree(name);",
          "new_line_content": "struct redisCommand *lookupCommandByCStringLogic(dict *commands, const char *s) {",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "    addReplyHelp(c, help);",
          "new_line_content": "\"GETKEYSANDFLAGS <full-command>\",",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "lookupCommandLogic",
          "new_api": null,
          "old_text": "lookupCommandLogic(server.commands, argv, argc, 0)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = lookupCommandLogic(server.commands, argv, argc, 0);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "lookupCommandLogic",
          "new_api": null,
          "old_text": "lookupCommandLogic(server.orig_commands, argv, argc, 0)",
          "new_text": null,
          "old_line_content": "    if (!cmd) cmd = lookupCommandLogic(server.orig_commands, argv, argc, 0);",
          "new_line_content": " * rewriteClientCommandVector() in order to set client->cmd pointer",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%lluB\",n);",
          "new_line_content": "void bytesToHuman(char *s, size_t size, unsigned long long n) {",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%.2fK\",d);",
          "new_line_content": "    if (n < 1024) {",
          "content_same": false
        },
        {
          "line": 5295,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%.2fM\",d);",
          "new_line_content": "    } else if (n < (1024*1024)) {",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%.2fG\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 5301,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%.2fT\",d)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%.2fT\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 5304,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%.2fP\",d)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%.2fP\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 3258,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (server.masterhost == NULL && (server.repl_backlog || listLength(server.slaves) != 0))",
          "new_line_content": "    if (target & PROPAGATE_AOF) {",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(s,size,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        snprintf(s,size,\"%lluB\",n);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(info,\"latency_percentiles_usec_%s:\",histogram_name)",
          "new_text": null,
          "old_line_content": "    info = sdscatfmt(info,\"latency_percentiles_usec_%s:\",histogram_name);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j])",
          "new_text": null,
          "old_line_content": "        size_t len = snprintf(fbuf, sizeof(fbuf), \"%f\", server.latency_tracking_info_percentiles[j]);",
          "new_line_content": "/* Fill percentile distribution of latencies. */",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "trimDoubleString",
          "new_api": null,
          "old_text": "trimDoubleString(fbuf, len)",
          "new_text": null,
          "old_line_content": "        trimDoubleString(fbuf, len);",
          "new_line_content": "sds fillPercentileDistributionLatencies(sds info, const char* histogram_name, struct hdr_histogram* histogram) {",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": "hdr_value_at_percentile",
          "new_api": null,
          "old_text": "hdr_value_at_percentile(histogram,server.latency_tracking_info_percentiles[j])",
          "new_text": null,
          "old_line_content": "            ((double)hdr_value_at_percentile(histogram,server.latency_tracking_info_percentiles[j]))/1000.0f);",
          "new_line_content": "    for (int j = 0; j < server.latency_tracking_info_percentiles_len; j++) {",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "shouldPropagate",
          "new_api": null,
          "old_text": "shouldPropagate(target)",
          "new_text": null,
          "old_line_content": "    if (!shouldPropagate(target))",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 3290,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(dbid,argv,argc);",
          "new_line_content": "     * replica pause (otherwise data may be lost during a failover) */",
          "content_same": false
        },
        {
          "line": 3292,
          "old_api": "replicationFeedSlaves",
          "new_api": null,
          "old_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "new_line_content": "                   (!server.client_pause_in_transaction)));",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": "mempbrk",
          "new_api": null,
          "old_text": "mempbrk(s, len, unsafe_info_chars,sizeof(unsafe_info_chars)-1)",
          "new_text": null,
          "old_line_content": "    if (mempbrk(s, len, unsafe_info_chars,sizeof(unsafe_info_chars)-1)",
          "new_line_content": " * If no unsafe characters are found, simply returns s. Caller needs to",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(len + 1)",
          "new_text": null,
          "old_line_content": "    char *new = *tmp = zmalloc(len + 1);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "shouldPropagate",
          "new_api": null,
          "old_text": "shouldPropagate(target)",
          "new_text": null,
          "old_line_content": "    if (!shouldPropagate(target))",
          "new_line_content": " * passed objects, so the caller does not need to. */",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "    argvcopy = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(argv[j]);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5364,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(commands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5365,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "sds genRedisInfoStringCommandStats(sds info, dict *commands) {",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(c->cmd->flags & (CMD_WRITE | CMD_MAY_REPLICATE))",
          "new_text": null,
          "old_line_content": "    serverAssert(c->cmd->flags & (CMD_WRITE | CMD_MAY_REPLICATE));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(tmpsafe)",
          "new_text": null,
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\"",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": "genRedisInfoStringCommandStats",
          "new_api": null,
          "old_text": "genRedisInfoStringCommandStats(info, c->subcommands_dict)",
          "new_text": null,
          "old_line_content": "            info = genRedisInfoStringCommandStats(info, c->subcommands_dict);",
          "new_line_content": "                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls),",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5388,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n         \"acl_access_denied_auth:%lld\\r\\n\"\n         \"acl_access_denied_cmd:%lld\\r\\n\"\n         \"acl_access_denied_key:%lld\\r\\n\"\n         \"acl_access_denied_channel:%lld\\r\\n\",\n         server.acl_info.user_auth_failures,\n         server.acl_info.invalid_cmd_accesses,\n         server.acl_info.invalid_key_accesses,\n         server.acl_info.invalid_channel_accesses)",
          "new_text": null,
          "old_line_content": "    info = sdscatprintf(info,",
          "new_line_content": "    return info;",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(commands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": "slowlogPushEntryIfNeeded",
          "new_api": null,
          "old_text": "slowlogPushEntryIfNeeded(c,argv,argc,duration)",
          "new_text": null,
          "old_line_content": "    slowlogPushEntryIfNeeded(c,argv,argc,duration);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "sds genRedisInfoStringLatencyStats(sds info, dict *commands) {",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": "hdr_init",
          "new_api": null,
          "old_text": "hdr_init(LATENCY_HISTOGRAM_MIN_VALUE,LATENCY_HISTOGRAM_MAX_VALUE,LATENCY_HISTOGRAM_PRECISION,latency_histogram)",
          "new_text": null,
          "old_line_content": "        hdr_init(LATENCY_HISTOGRAM_MIN_VALUE,LATENCY_HISTOGRAM_MAX_VALUE,LATENCY_HISTOGRAM_PRECISION,latency_histogram);",
          "new_line_content": "    if (duration_hist < LATENCY_HISTOGRAM_MIN_VALUE)",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "hdr_record_value",
          "new_api": null,
          "old_text": "hdr_record_value(*latency_histogram,duration_hist)",
          "new_text": null,
          "old_line_content": "    hdr_record_value(*latency_histogram,duration_hist);",
          "new_line_content": "        duration_hist=LATENCY_HISTOGRAM_MIN_VALUE;",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(*sections)",
          "new_text": null,
          "old_line_content": "        sds section = sdsnew(*sections);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5427,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(section_dict, section, NULL)",
          "new_text": null,
          "old_line_content": "        if (dictAdd(section_dict, section, NULL)==DICT_ERR)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5428,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(section)",
          "new_text": null,
          "old_line_content": "            sdsfree(section);",
          "new_line_content": "/* Takes a null terminated sections list, and adds them to the dict. */",
          "content_same": false
        },
        {
          "line": 5438,
          "old_api": "dictRelease",
          "new_api": null,
          "old_text": "dictRelease(sec)",
          "new_text": null,
          "old_line_content": "        dictRelease(sec);",
          "new_line_content": "/* Cached copy of the default sections, as an optimization. */",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": "propagateNow",
          "new_api": null,
          "old_text": "propagateNow(-1,&shared.multi,1,PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "        propagateNow(-1,&shared.multi,1,PROPAGATE_AOF|PROPAGATE_REPL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3407,
          "old_api": "propagateNow",
          "new_api": null,
          "old_text": "propagateNow(rop->dbid,rop->argv,rop->argc,rop->target)",
          "new_text": null,
          "old_line_content": "        propagateNow(rop->dbid,rop->argv,rop->argc,rop->target);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5458,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&stringSetDictType)",
          "new_text": null,
          "old_line_content": "        cached_default_info_sections = dictCreate(&stringSetDictType);",
          "new_line_content": "    if (argc == 0) {",
          "content_same": false
        },
        {
          "line": 5459,
          "old_api": "dictExpand",
          "new_api": null,
          "old_text": "dictExpand(cached_default_info_sections, 16)",
          "new_text": null,
          "old_line_content": "        dictExpand(cached_default_info_sections, 16);",
          "new_line_content": "        /* In this case we know the dict is not gonna be modified, so we cache",
          "content_same": false
        },
        {
          "line": 5460,
          "old_api": "addInfoSectionsToDict",
          "new_api": null,
          "old_text": "addInfoSectionsToDict(cached_default_info_sections, defaults)",
          "new_text": null,
          "old_line_content": "        addInfoSectionsToDict(cached_default_info_sections, defaults);",
          "new_line_content": "         * it as an optimization for a common case. */",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": "redisOpArrayFree",
          "new_api": null,
          "old_text": "redisOpArrayFree(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "    redisOpArrayFree(&server.also_propagate);",
          "new_line_content": "    if (transaction) {",
          "content_same": false
        },
        {
          "line": 5467,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr,\"default\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(argv[i]->ptr,\"default\")) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "addInfoSectionsToDict",
          "new_api": null,
          "old_text": "addInfoSectionsToDict(section_dict, defaults)",
          "new_text": null,
          "old_line_content": "            addInfoSectionsToDict(section_dict, defaults);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5471,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr,\"everything\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(argv[i]->ptr,\"everything\")) {",
          "new_line_content": "    for (int i = 0; i < argc; i++) {",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            sds section = sdsnew(argv[i]->ptr);",
          "new_line_content": "            if (out_all) *out_all = 1;",
          "content_same": false
        },
        {
          "line": 5477,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(section)",
          "new_text": null,
          "old_line_content": "                sdsfree(section);",
          "new_line_content": "            if (out_everything) *out_everything = 1;",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "firePostExecutionUnitJobs",
          "new_api": null,
          "old_text": "firePostExecutionUnitJobs()",
          "new_text": null,
          "old_line_content": "    firePostExecutionUnitJobs();",
          "new_line_content": " * after the entire chain finished. */",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": "propagatePendingCommands",
          "new_api": null,
          "old_text": "propagatePendingCommands()",
          "new_text": null,
          "old_line_content": "    propagatePendingCommands();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].blocking_keys)",
          "new_text": null,
          "old_line_content": "        bkeys += dictSize(server.db[j].blocking_keys);",
          "new_line_content": " * blocked on them to be written or deleted.",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "modulePostExecutionUnitOperations",
          "new_api": null,
          "old_text": "modulePostExecutionUnitOperations()",
          "new_text": null,
          "old_line_content": "    modulePostExecutionUnitOperations();",
          "new_line_content": "    /* If we are at the top-most call() and not inside a an active module",
          "content_same": false
        },
        {
          "line": 5491,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].blocking_keys_unblock_on_nokey)",
          "new_text": null,
          "old_line_content": "        bkeys_on_nokey += dictSize(server.db[j].blocking_keys_unblock_on_nokey);",
          "new_line_content": " * sets watched_keys to the total number of keys which has at least on client watching on them. */",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].watched_keys)",
          "new_text": null,
          "old_line_content": "        wkeys += dictSize(server.db[j].watched_keys);",
          "new_line_content": "void totalNumberOfStatefulKeys(unsigned long *blocking_keys, unsigned long *blocking_keys_on_nokey, unsigned long *watched_keys) {",
          "content_same": false
        },
        {
          "line": 5506,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"server\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"server\") != NULL)) {",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 5531,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "            else supervised = \"unknown\";",
          "content_same": false
        },
        {
          "line": 5535,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "            uname(&name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5539,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n            \"redis_version:%s\\r\\n\", REDIS_VERSION,\n            \"redis_git_sha1:%s\\r\\n\", redisGitSHA1(),\n            \"redis_git_dirty:%i\\r\\n\", strtol(redisGitDirty(),NULL,10) > 0,\n            \"redis_build_id:%s\\r\\n\", redisBuildIdString(),\n            \"redis_mode:%s\\r\\n\", mode,\n            \"os:%s\", name.sysname,\n            \" %s\", name.release,\n            \" %s\\r\\n\", name.machine,\n            \"arch_bits:%i\\r\\n\", server.arch_bits,\n            \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),\n            \"multiplexing_api:%s\\r\\n\", aeGetApiName(),\n            \"atomicvar_api:%s\\r\\n\", REDIS_ATOMIC_API,\n            \"gcc_version:%s\\r\\n\", GNUC_VERSION_STR,\n            \"process_id:%I\\r\\n\", (int64_t) getpid(),\n            \"process_supervised:%s\\r\\n\", supervised,\n            \"run_id:%s\\r\\n\", server.runid,\n            \"tcp_port:%i\\r\\n\", server.port ? server.port : server.tls_port,\n            \"server_time_usec:%I\\r\\n\", (int64_t)server.ustime,\n            \"uptime_in_seconds:%I\\r\\n\", (int64_t)uptime,\n            \"uptime_in_days:%I\\r\\n\", (int64_t)(uptime/(3600*24)),\n            \"hz:%i\\r\\n\", server.hz,\n            \"configured_hz:%i\\r\\n\", server.config_hz,\n            \"lru_clock:%u\\r\\n\", server.lruclock,\n            \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",\n            \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",\n            \"io_threads_active:%i\\r\\n\", server.io_threads_active)",
          "new_text": null,
          "old_line_content": "        info = sdscatfmt(info, \"# Server\\r\\n\" FMTARGS(",
          "new_line_content": "            /* Uname can be slow and is always the same output. Cache it. */",
          "content_same": false
        },
        {
          "line": 5541,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            \"redis_git_sha1:%s\\r\\n\", redisGitSHA1(),",
          "new_line_content": "            call_uname = 0;",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "            \"redis_git_dirty:%i\\r\\n\", strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5543,
          "old_api": "redisBuildIdString",
          "new_api": null,
          "old_text": "redisBuildIdString()",
          "new_text": null,
          "old_line_content": "            \"redis_build_id:%s\\r\\n\", redisBuildIdString(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5549,
          "old_api": "monotonicInfoString",
          "new_api": null,
          "old_text": "monotonicInfoString()",
          "new_text": null,
          "old_line_content": "            \"monotonic_clock:%s\\r\\n\", monotonicInfoString(),",
          "new_line_content": "            \"redis_mode:%s\\r\\n\", mode,",
          "content_same": false
        },
        {
          "line": 5550,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "            \"multiplexing_api:%s\\r\\n\", aeGetApiName(),",
          "new_line_content": "            \"os:%s\", name.sysname,",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            \"process_id:%I\\r\\n\", (int64_t) getpid(),",
          "new_line_content": "            \"arch_bits:%i\\r\\n\", server.arch_bits,",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": "isAOFLoadingContext",
          "new_api": null,
          "old_text": "isAOFLoadingContext()",
          "new_text": null,
          "old_line_content": "    int update_command_stats = !isAOFLoadingContext();",
          "new_line_content": "    client *prev_client = server.executing_client;",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "isShutdownInitiated",
          "new_api": null,
          "old_text": "isShutdownInitiated()",
          "new_text": null,
          "old_line_content": "        if (isShutdownInitiated()) {",
          "new_line_content": "            \"executable:%s\\r\\n\", server.executable ? server.executable : \"\",",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(info,\n                \"shutdown_in_milliseconds:%I\\r\\n\",\n                (int64_t)(server.shutdown_mstime - commandTimeSnapshot()))",
          "new_text": null,
          "old_line_content": "            info = sdscatfmt(info,",
          "new_line_content": "            \"config_file:%s\\r\\n\", server.configfile ? server.configfile : \"\",",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": "commandTimeSnapshot",
          "new_api": null,
          "old_text": "commandTimeSnapshot()",
          "new_text": null,
          "old_line_content": "                (int64_t)(server.shutdown_mstime - commandTimeSnapshot()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5575,
          "old_api": "getListensInfoString",
          "new_api": null,
          "old_text": "getListensInfoString(info)",
          "new_text": null,
          "old_line_content": "        info = getListensInfoString(info);",
          "new_line_content": "                \"shutdown_in_milliseconds:%I\\r\\n\",",
          "content_same": false
        },
        {
          "line": 5579,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"clients\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"clients\") != NULL)) {",
          "new_line_content": "        /* get all the listeners information */",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": "getExpansiveClientsInfo",
          "new_api": null,
          "old_text": "getExpansiveClientsInfo(&maxin,&maxout)",
          "new_text": null,
          "old_line_content": "        getExpansiveClientsInfo(&maxin,&maxout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "totalNumberOfStatefulKeys",
          "new_api": null,
          "old_text": "totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys)",
          "new_text": null,
          "old_line_content": "        totalNumberOfStatefulKeys(&blocking_keys, &blocking_keys_on_nokey, &watched_keys);",
          "new_line_content": "    /* Clients */",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n            \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.slaves),\n            \"cluster_connections:%lu\\r\\n\", getClusterConnectionsCount(),\n            \"maxclients:%u\\r\\n\", server.maxclients,\n            \"client_recent_max_input_buffer:%zu\\r\\n\", maxin,\n            \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,\n            \"blocked_clients:%d\\r\\n\", server.blocked_clients,\n            \"tracking_clients:%d\\r\\n\", server.tracking_clients,\n            \"pubsub_clients:%d\\r\\n\", server.pubsub_clients,\n            \"watching_clients:%d\\r\\n\", server.watching_clients,\n            \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long) raxSize(server.clients_timeout_table),\n            \"total_watched_keys:%lu\\r\\n\", watched_keys,\n            \"total_blocking_keys:%lu\\r\\n\", blocking_keys,\n            \"total_blocking_keys_on_nokey:%lu\\r\\n\", blocking_keys_on_nokey)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Clients\\r\\n\" FMTARGS(",
          "new_line_content": "        size_t maxin, maxout;",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            \"connected_clients:%lu\\r\\n\", listLength(server.clients) - listLength(server.slaves),",
          "new_line_content": "        unsigned long blocking_keys, blocking_keys_on_nokey, watched_keys;",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": "incrCommandStatsOnError",
          "new_api": null,
          "old_text": "incrCommandStatsOnError(NULL, 0)",
          "new_text": null,
          "old_line_content": "    incrCommandStatsOnError(NULL, 0);",
          "new_line_content": "     * In that case, the module is in charge of propagation. */",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    const long long call_timer = ustime();",
          "new_line_content": "    /* Call the command. */",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": "enterExecutionUnit",
          "new_api": null,
          "old_text": "enterExecutionUnit(1, call_timer)",
          "new_text": null,
          "old_line_content": "    enterExecutionUnit(1, call_timer);",
          "new_line_content": "    dirty = server.dirty;",
          "content_same": false
        },
        {
          "line": 5595,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(server.clients_timeout_table)",
          "new_text": null,
          "old_line_content": "            \"clients_in_timeout_table:%llu\\r\\n\", (unsigned long long) raxSize(server.clients_timeout_table),",
          "new_line_content": "            \"client_recent_max_output_buffer:%zu\\r\\n\", maxout,",
          "content_same": false
        },
        {
          "line": 5602,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"memory\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"memory\") != NULL)) {",
          "new_line_content": "            \"total_blocking_keys:%lu\\r\\n\", blocking_keys,",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": "monotonicGetType",
          "new_api": null,
          "old_text": "monotonicGetType()",
          "new_text": null,
          "old_line_content": "    if (monotonicGetType() == MONOTONIC_CLOCK_HW)",
          "new_line_content": "     * processing of the command proc, the client is aware that it is being",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "getMonotonicUs",
          "new_api": null,
          "old_text": "getMonotonicUs()",
          "new_text": null,
          "old_line_content": "        monotonic_start = getMonotonicUs();",
          "new_line_content": "     * re-processed. */",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "proc",
          "new_api": null,
          "old_text": "c->cmd->proc(c)",
          "new_text": null,
          "old_line_content": "    c->cmd->proc(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5611,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "new_line_content": "        char used_memory_lua_hmem[64];",
          "content_same": false
        },
        {
          "line": 5613,
          "old_api": "evictPolicyToString",
          "new_api": null,
          "old_text": "evictPolicyToString()",
          "new_text": null,
          "old_line_content": "        const char *evict_policy = evictPolicyToString();",
          "new_line_content": "        char used_memory_scripts_hmem[64];",
          "content_same": false
        },
        {
          "line": 5614,
          "old_api": "evalMemory",
          "new_api": null,
          "old_text": "evalMemory()",
          "new_text": null,
          "old_line_content": "        long long memory_lua = evalMemory();",
          "new_line_content": "        char used_memory_rss_hmem[64];",
          "content_same": false
        },
        {
          "line": 5615,
          "old_api": "functionsMemory",
          "new_api": null,
          "old_text": "functionsMemory()",
          "new_text": null,
          "old_line_content": "        long long memory_functions = functionsMemory();",
          "new_line_content": "        char maxmemory_hmem[64];",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "monotonicGetType",
          "new_api": null,
          "old_text": "monotonicGetType()",
          "new_text": null,
          "old_line_content": "    if (monotonicGetType() == MONOTONIC_CLOCK_HW)",
          "new_line_content": "    if (!(c->flags & CLIENT_BLOCKED)) c->flags &= ~(CLIENT_EXECUTING_COMMAND);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "getMonotonicUs",
          "new_api": null,
          "old_text": "getMonotonicUs()",
          "new_text": null,
          "old_line_content": "        duration = getMonotonicUs() - monotonic_start;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        duration = ustime() - call_timer;",
          "new_line_content": "     * we use a monotonic clock, when we are sure its cost is very low, and fall back to non-monotonic call otherwise. */",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(hmem,sizeof(hmem),zmalloc_used)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(hmem,sizeof(hmem),zmalloc_used);",
          "new_line_content": "         * the peak value. This may confuse users, so we update the peak",
          "content_same": false
        },
        {
          "line": 5626,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(peak_hmem,sizeof(peak_hmem),server.stat_peak_memory)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(peak_hmem,sizeof(peak_hmem),server.stat_peak_memory);",
          "new_line_content": "         * if found smaller than the current memory usage. */",
          "content_same": false
        },
        {
          "line": 5627,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(total_system_hmem,sizeof(total_system_hmem),total_system_mem)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(total_system_hmem,sizeof(total_system_hmem),total_system_mem);",
          "new_line_content": "        if (zmalloc_used > server.stat_peak_memory)",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(used_memory_lua_hmem,sizeof(used_memory_lua_hmem),memory_lua)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(used_memory_lua_hmem,sizeof(used_memory_lua_hmem),memory_lua);",
          "new_line_content": "            server.stat_peak_memory = zmalloc_used;",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(used_memory_vm_total_hmem,sizeof(used_memory_vm_total_hmem),memory_functions + memory_lua)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(used_memory_vm_total_hmem,sizeof(used_memory_vm_total_hmem),memory_functions + memory_lua);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "incrCommandStatsOnError",
          "new_api": null,
          "old_text": "incrCommandStatsOnError(real_cmd, ERROR_COMMAND_FAILED)",
          "new_text": null,
          "old_line_content": "    if (!incrCommandStatsOnError(real_cmd, ERROR_COMMAND_FAILED) && c->deferred_reply_errors) {",
          "new_line_content": "    dirty = server.dirty-dirty;",
          "content_same": false
        },
        {
          "line": 5657,
          "old_api": "evalScriptsDict",
          "new_api": null,
          "old_text": "evalScriptsDict()",
          "new_text": null,
          "old_line_content": "            \"number_of_cached_scripts:%lu\\r\\n\", dictSize(evalScriptsDict()),",
          "new_line_content": "            \"total_system_memory_human:%s\\r\\n\", total_system_hmem,",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": null,
          "old_text": "latencyAddSampleIfNeeded(latency_event,duration/1000)",
          "new_text": null,
          "old_line_content": "        latencyAddSampleIfNeeded(latency_event,duration/1000);",
          "new_line_content": "     * unless instructed by the caller not to log. (happens when processing",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": "functionsNum",
          "new_api": null,
          "old_text": "functionsNum()",
          "new_text": null,
          "old_line_content": "            \"number_of_functions:%lu\\r\\n\", functionsNum(),",
          "new_line_content": "            \"used_memory_lua:%lld\\r\\n\", memory_lua, /* deprecated, renamed to used_memory_vm_eval */",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "durationAddSample",
          "new_api": null,
          "old_text": "durationAddSample(EL_DURATION_TYPE_CMD, duration)",
          "new_text": null,
          "old_line_content": "            durationAddSample(EL_DURATION_TYPE_CMD, duration);",
          "new_line_content": "    if (update_command_stats) {",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": "functionsLibNum",
          "new_api": null,
          "old_text": "functionsLibNum()",
          "new_text": null,
          "old_line_content": "            \"number_of_libraries:%lu\\r\\n\", functionsLibNum(),",
          "new_line_content": "            \"used_memory_vm_eval:%lld\\r\\n\", memory_lua,",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": "slowlogPushCurrentCommand",
          "new_api": null,
          "old_text": "slowlogPushCurrentCommand(c, real_cmd, c->duration)",
          "new_text": null,
          "old_line_content": "        slowlogPushCurrentCommand(c, real_cmd, c->duration);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": "replicationFeedMonitors",
          "new_api": null,
          "old_text": "replicationFeedMonitors(c,server.monitors,c->db->id,argv,argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,argv,argc);",
          "new_line_content": "     * or we are currently in the process of loading AOF. */",
          "content_same": false
        },
        {
          "line": 5681,
          "old_api": "freeMemoryGetNotCountedMemory",
          "new_api": null,
          "old_text": "freeMemoryGetNotCountedMemory()",
          "new_text": null,
          "old_line_content": "            \"mem_not_counted_for_evict:%zu\\r\\n\", freeMemoryGetNotCountedMemory(),",
          "new_line_content": "             * overhead, including fragmentation, but not just it. This field",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "freeClientOriginalArgv",
          "new_api": null,
          "old_text": "freeClientOriginalArgv(c)",
          "new_text": null,
          "old_line_content": "        freeClientOriginalArgv(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "updateCommandLatencyHistogram",
          "new_api": null,
          "old_text": "updateCommandLatencyHistogram(&(real_cmd->latency_histogram), c->duration*1000)",
          "new_text": null,
          "old_line_content": "            updateCommandLatencyHistogram(&(real_cmd->latency_histogram), c->duration*1000);",
          "new_line_content": "     * If the client is blocked we will handle latency stats and duration when it is unblocked. */",
          "content_same": false
        },
        {
          "line": 5691,
          "old_api": "lazyfreeGetPendingObjectsCount",
          "new_api": null,
          "old_text": "lazyfreeGetPendingObjectsCount()",
          "new_text": null,
          "old_line_content": "            \"lazyfree_pending_objects:%zu\\r\\n\", lazyfreeGetPendingObjectsCount(),",
          "new_line_content": "            \"mem_cluster_links:%zu\\r\\n\", mh->cluster_links,",
          "content_same": false
        },
        {
          "line": 5692,
          "old_api": "lazyfreeGetFreedObjectsCount",
          "new_api": null,
          "old_text": "lazyfreeGetFreedObjectsCount()",
          "new_text": null,
          "old_line_content": "            \"lazyfreed_objects:%zu\\r\\n\", lazyfreeGetFreedObjectsCount()));",
          "new_line_content": "            \"mem_aof_buffer:%zu\\r\\n\", mh->aof_buffer,",
          "content_same": false
        },
        {
          "line": 5693,
          "old_api": "freeMemoryOverheadData",
          "new_api": null,
          "old_text": "freeMemoryOverheadData(mh)",
          "new_text": null,
          "old_line_content": "        freeMemoryOverheadData(mh);",
          "new_line_content": "            \"mem_allocator:%s\\r\\n\", ZMALLOC_LIB,",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status)",
          "new_text": null,
          "old_line_content": "        atomicGet(server.aof_bio_fsync_status,aof_bio_fsync_status);",
          "new_line_content": "            fork_perc = server.stat_module_progress * 100;",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n            \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),\n            \"async_loading:%d\\r\\n\", (int)server.async_loading,\n            \"current_cow_peak:%zu\\r\\n\", server.stat_current_cow_peak,\n            \"current_cow_size:%zu\\r\\n\", server.stat_current_cow_bytes,\n            \"current_cow_size_age:%lu\\r\\n\", (server.stat_current_cow_updated ?\n                                             (unsigned long) elapsedMs(server.stat_current_cow_updated) / 1000 : 0),\n            \"current_fork_perc:%.2f\\r\\n\", fork_perc,\n            \"current_save_keys_processed:%zu\\r\\n\", server.stat_current_save_keys_processed,\n            \"current_save_keys_total:%zu\\r\\n\", server.stat_current_save_keys_total,\n            \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,\n            \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,\n            \"rdb_last_save_time:%jd\\r\\n\", (intmax_t)server.lastsave,\n            \"rdb_last_bgsave_status:%s\\r\\n\", (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\", (intmax_t)server.rdb_save_time_last,\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start),\n            \"rdb_saves:%lld\\r\\n\", server.stat_rdb_saves,\n            \"rdb_last_cow_size:%zu\\r\\n\", server.stat_rdb_cow_bytes,\n            \"rdb_last_load_keys_expired:%lld\\r\\n\", server.rdb_last_load_keys_expired,\n            \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,\n            \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,\n            \"aof_rewrite_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_AOF,\n            \"aof_rewrite_scheduled:%d\\r\\n\", server.aof_rewrite_scheduled,\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\", (intmax_t)server.aof_rewrite_time_last,\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start),\n            \"aof_last_bgrewrite_status:%s\\r\\n\", (server.aof_lastbgrewrite_status == C_OK ?\n                                                 \"ok\" : \"err\"),\n            \"aof_rewrites:%lld\\r\\n\", server.stat_aof_rewrites,\n            \"aof_rewrites_consecutive_failures:%lld\\r\\n\", server.stat_aofrw_consecutive_failures,\n            \"aof_last_write_status:%s\\r\\n\", (server.aof_last_write_status == C_OK &&\n                                             aof_bio_fsync_status == C_OK) ? \"ok\" : \"err\",\n            \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,\n            \"module_fork_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_MODULE,\n            \"module_fork_last_cow_size:%zu\\r\\n\", server.stat_module_cow_bytes)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Persistence\\r\\n\" FMTARGS(",
          "new_line_content": "            fork_perc = ((double)server.stat_current_save_keys_processed / server.stat_current_save_keys_total) * 100;",
          "content_same": false
        },
        {
          "line": 5714,
          "old_api": "elapsedMs",
          "new_api": null,
          "old_text": "elapsedMs(server.stat_current_cow_updated)",
          "new_text": null,
          "old_line_content": "                                             (unsigned long) elapsedMs(server.stat_current_cow_updated) / 1000 : 0),",
          "new_line_content": "            \"loading:%d\\r\\n\", (int)(server.loading && !server.async_loading),",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": "intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.child_type != CHILD_TYPE_RDB) ?\n                                                              -1 : time(NULL)-server.rdb_save_time_start)",
          "new_text": null,
          "old_line_content": "            \"rdb_current_bgsave_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_RDB) ?",
          "new_line_content": "            \"rdb_changes_since_last_save:%lld\\r\\n\", server.dirty,",
          "content_same": false
        },
        {
          "line": 5724,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                                                              -1 : time(NULL)-server.rdb_save_time_start),",
          "new_line_content": "            \"rdb_bgsave_in_progress:%d\\r\\n\", server.child_type == CHILD_TYPE_RDB,",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.child_type != CHILD_TYPE_AOF) ?\n                                                               -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_text": null,
          "old_line_content": "            \"aof_current_rewrite_time_sec:%jd\\r\\n\", (intmax_t)((server.child_type != CHILD_TYPE_AOF) ?",
          "new_line_content": "            \"rdb_last_load_keys_loaded:%lld\\r\\n\", server.rdb_last_load_keys_loaded,",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(c->db->id,c->argv,c->argc,propagate_flags)",
          "new_text": null,
          "old_line_content": "            alsoPropagate(c->db->id,c->argv,c->argc,propagate_flags);",
          "new_line_content": "                propagate_flags &= ~PROPAGATE_AOF;",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                                                               -1 : time(NULL)-server.aof_rewrite_time_start),",
          "new_line_content": "            \"aof_enabled:%d\\r\\n\", server.aof_state != AOF_OFF,",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"aof_current_size:%lld\\r\\n\", (long long) server.aof_current_size,\n                \"aof_base_size:%lld\\r\\n\", (long long) server.aof_rewrite_base_size,\n                \"aof_pending_rewrite:%d\\r\\n\", server.aof_rewrite_scheduled,\n                \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),\n                \"aof_pending_bio_fsync:%lu\\r\\n\", bioPendingJobsOfType(BIO_AOF_FSYNC),\n                \"aof_delayed_fsync:%lu\\r\\n\", server.aof_delayed_fsync)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "            \"aof_last_cow_size:%zu\\r\\n\", server.stat_aof_cow_bytes,",
          "content_same": false
        },
        {
          "line": 5750,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                \"aof_buffer_length:%zu\\r\\n\", sdslen(server.aof_buf),",
          "new_line_content": "        if (server.aof_enabled) {",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "trackingRememberKeys",
          "new_api": null,
          "old_text": "trackingRememberKeys(server.current_client, c)",
          "new_text": null,
          "old_line_content": "            trackingRememberKeys(server.current_client, c);",
          "new_line_content": "         * being executed. */",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    size_t zmalloc_used = zmalloc_used_memory();",
          "new_line_content": "    if (!(c->flags & CLIENT_BLOCKED))",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            elapsed = time(NULL)-server.loading_start_time;",
          "new_line_content": "                /* used mem is only a (bad) estimation of the rdb file size, avoid going over 100% */",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"loading_start_time:%jd\\r\\n\", (intmax_t) server.loading_start_time,\n                \"loading_total_bytes:%llu\\r\\n\", (unsigned long long) server.loading_total_bytes,\n                \"loading_rdb_used_mem:%llu\\r\\n\", (unsigned long long) server.loading_rdb_used_mem,\n                \"loading_loaded_bytes:%llu\\r\\n\", (unsigned long long) server.loading_loaded_bytes,\n                \"loading_loaded_perc:%.2f\\r\\n\", perc,\n                \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "                            enough info */",
          "content_same": false
        },
        {
          "line": 5790,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"stats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections  || (dictFind(section_dict,\"stats\") != NULL)) {",
          "new_line_content": "                \"loading_eta_seconds:%jd\\r\\n\", (intmax_t)eta));",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "    flagTransaction(c);",
          "new_line_content": " * If there's a transaction is flags it as dirty, and if the command is EXEC,",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "execCommandAbort",
          "new_api": null,
          "old_text": "execCommandAbort(c, reply->ptr)",
          "new_text": null,
          "old_line_content": "        execCommandAbort(c, reply->ptr);",
          "new_line_content": "void rejectCommand(client *c, robj *reply) {",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": "elapsedUs",
          "new_api": null,
          "old_text": "elapsedUs(server.stat_last_active_defrag_time)",
          "new_text": null,
          "old_line_content": "            (long long) elapsedUs(server.stat_last_active_defrag_time): 0;",
          "new_line_content": "        long long stat_net_input_bytes, stat_net_output_bytes;",
          "content_same": false
        },
        {
          "line": 5799,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.stat_total_reads_processed, stat_total_reads_processed)",
          "new_text": null,
          "old_line_content": "        atomicGet(server.stat_total_reads_processed, stat_total_reads_processed);",
          "new_line_content": "        long long current_eviction_exceeded_time = server.stat_last_eviction_exceeded_time ?",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, reply)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c, reply);",
          "new_line_content": "    if (c->cmd) c->cmd->rejected_calls++;",
          "content_same": false
        },
        {
          "line": 5801,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.stat_net_input_bytes, stat_net_input_bytes)",
          "new_text": null,
          "old_line_content": "        atomicGet(server.stat_net_input_bytes, stat_net_input_bytes);",
          "new_line_content": "        long long current_active_defrag_time = server.stat_last_active_defrag_time ?",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "atomicGet",
          "new_api": null,
          "old_text": "atomicGet(server.stat_net_repl_input_bytes, stat_net_repl_input_bytes)",
          "new_text": null,
          "old_line_content": "        atomicGet(server.stat_net_repl_input_bytes, stat_net_repl_input_bytes);",
          "new_line_content": "        long long stat_client_qbuf_limit_disconnections;",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "execCommandAbort",
          "new_api": null,
          "old_text": "execCommandAbort(c, s)",
          "new_text": null,
          "old_line_content": "        execCommandAbort(c, s);",
          "new_line_content": "void rejectCommandSds(client *c, sds s) {",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_COMMAND)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_ops_per_sec:%lld\\r\\n\", getInstantaneousMetric(STATS_METRIC_COMMAND),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": "addReplyErrorSds",
          "new_api": null,
          "old_text": "addReplyErrorSds(c, s)",
          "new_text": null,
          "old_line_content": "        addReplyErrorSds(c, s);",
          "new_line_content": "    if (c->cmd && c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 5817,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_output_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,",
          "new_line_content": "            \"total_net_input_bytes:%lld\\r\\n\", stat_net_input_bytes + stat_net_repl_input_bytes,",
          "content_same": false
        },
        {
          "line": 5818,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_input_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT_REPLICATION)/1024,",
          "new_line_content": "            \"total_net_output_bytes:%lld\\r\\n\", stat_net_output_bytes + stat_net_repl_output_bytes,",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap,fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap,fmt);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds s = sdscatvprintf(sdsempty(),fmt,ap);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_output_repl_kbps:%.2f\\r\\n\", (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT_REPLICATION)/1024,",
          "new_line_content": "            \"total_net_repl_input_bytes:%lld\\r\\n\", stat_net_repl_input_bytes,",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "postExecutionUnitOperations",
          "new_api": null,
          "old_text": "postExecutionUnitOperations()",
          "new_text": null,
          "old_line_content": "    postExecutionUnitOperations();",
          "new_line_content": "/* This is called after a command in call, we can do some maintenance job in it. */",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "kvstoreSize",
          "new_api": null,
          "old_text": "kvstoreSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "            \"pubsub_channels:%llu\\r\\n\", kvstoreSize(server.pubsub_channels),",
          "new_line_content": "            \"evicted_scripts:%lld\\r\\n\", server.stat_evictedscripts,",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": "trackingHandlePendingKeyInvalidations",
          "new_api": null,
          "old_text": "trackingHandlePendingKeyInvalidations()",
          "new_text": null,
          "old_line_content": "    trackingHandlePendingKeyInvalidations();",
          "new_line_content": "    /* Should be done before trackingHandlePendingKeyInvalidations so that we",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "            \"pubsub_patterns:%lu\\r\\n\", dictSize(server.pubsub_patterns),",
          "new_line_content": "            \"total_eviction_exceeded_time:%lld\\r\\n\", (server.stat_total_eviction_exceeded_time + current_eviction_exceeded_time) / 1000,",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": "kvstoreSize",
          "new_api": null,
          "old_text": "kvstoreSize(server.pubsubshard_channels)",
          "new_text": null,
          "old_line_content": "            \"pubsubshard_channels:%llu\\r\\n\", kvstoreSize(server.pubsubshard_channels),",
          "new_line_content": "            \"current_eviction_exceeded_time:%lld\\r\\n\", current_eviction_exceeded_time / 1000,",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": "trackingGetTotalKeys",
          "new_api": null,
          "old_text": "trackingGetTotalKeys()",
          "new_text": null,
          "old_line_content": "            \"tracking_total_keys:%lld\\r\\n\", (unsigned long long) trackingGetTotalKeys(),",
          "new_line_content": "            \"active_defrag_misses:%lld\\r\\n\", server.stat_active_defrag_misses,",
          "content_same": false
        },
        {
          "line": 5849,
          "old_api": "trackingGetTotalItems",
          "new_api": null,
          "old_text": "trackingGetTotalItems()",
          "new_text": null,
          "old_line_content": "            \"tracking_total_items:%lld\\r\\n\", (unsigned long long) trackingGetTotalItems(),",
          "new_line_content": "            \"active_defrag_key_hits:%lld\\r\\n\", server.stat_active_defrag_key_hits,",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": "trackingGetTotalPrefixes",
          "new_api": null,
          "old_text": "trackingGetTotalPrefixes()",
          "new_text": null,
          "old_line_content": "            \"tracking_total_prefixes:%lld\\r\\n\", (unsigned long long) trackingGetTotalPrefixes(),",
          "new_line_content": "            \"active_defrag_key_misses:%lld\\r\\n\", server.stat_active_defrag_key_misses,",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "isContainerCommandBySds",
          "new_api": null,
          "old_text": "isContainerCommandBySds(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    if (isContainerCommandBySds(c->argv[0]->ptr)) {",
          "new_line_content": "int commandCheckExistence(client *c, sds *err) {",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew((char *)c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "        sds cmd = sdsnew((char *)c->argv[0]->ptr);",
          "new_line_content": "    if (!err)",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "sdstoupper",
          "new_api": null,
          "old_text": "sdstoupper(cmd)",
          "new_text": null,
          "old_line_content": "        sdstoupper(cmd);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(*err, \"unknown subcommand '%.128s'. Try %s HELP.\",\n                            (char *)c->argv[1]->ptr, cmd)",
          "new_text": null,
          "old_line_content": "        *err = sdscatprintf(*err, \"unknown subcommand '%.128s'. Try %s HELP.\",",
          "new_line_content": "        /* If we can't find the command but argv[0] by itself is a command",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(args)",
          "new_text": null,
          "old_line_content": "        for (i=1; i < c->argc && sdslen(args) < 128; i++)",
          "new_line_content": "                            (char *)c->argv[1]->ptr, cmd);",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(NULL)",
          "new_text": null,
          "old_line_content": "        *err = sdsnew(NULL);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5865,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_EL_CYCLE)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_eventloop_cycles_per_sec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_CYCLE),",
          "new_line_content": "            \"reply_buffer_shrinks:%lld\\r\\n\", server.stat_reply_buffer_shrinks,",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_EL_DURATION)",
          "new_text": null,
          "old_line_content": "            \"instantaneous_eventloop_duration_usec:%llu\\r\\n\", getInstantaneousMetric(STATS_METRIC_EL_DURATION)));",
          "new_line_content": "            \"reply_buffer_expands:%lld\\r\\n\", server.stat_reply_buffer_expands,",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": "genRedisInfoStringACLStats",
          "new_api": null,
          "old_text": "genRedisInfoStringACLStats(info)",
          "new_text": null,
          "old_line_content": "        info = genRedisInfoStringACLStats(info);",
          "new_line_content": "            \"eventloop_cycles:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].cnt,",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "sdsmapchars",
          "new_api": null,
          "old_text": "sdsmapchars(*err, \"\\r\\n\", \"  \",  2)",
          "new_text": null,
          "old_line_content": "    sdsmapchars(*err, \"\\r\\n\", \"  \",  2);",
          "new_line_content": "                            (char*)c->argv[0]->ptr, args);",
          "content_same": false
        },
        {
          "line": 5873,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(NULL)",
          "new_text": null,
          "old_line_content": "            *err = sdsnew(NULL);",
          "new_line_content": "int commandCheckArity(client *c, sds *err) {",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(*err, \"wrong number of arguments for '%s' command\", c->cmd->fullname)",
          "new_text": null,
          "old_line_content": "            *err = sdscatprintf(*err, \"wrong number of arguments for '%s' command\", c->cmd->fullname);",
          "new_line_content": "    if ((c->cmd->arity > 0 && c->cmd->arity != c->argc) ||",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                \"master_host:%s\\r\\n\", server.masterhost,\n                \"master_port:%d\\r\\n\", server.masterport,\n                \"master_link_status:%s\\r\\n\", (server.repl_state == REPL_STATE_CONNECTED) ? \"up\" : \"down\",\n                \"master_last_io_seconds_ago:%d\\r\\n\", server.master ? ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                \"master_sync_in_progress:%d\\r\\n\", server.repl_state == REPL_STATE_TRANSFER,\n                \"slave_read_repl_offset:%lld\\r\\n\", slave_read_repl_offset,\n                \"slave_repl_offset:%lld\\r\\n\", slave_repl_offset)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "            } else if (server.cached_master) {",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "fcallGetCommandFlags",
          "new_api": null,
          "old_text": "fcallGetCommandFlags(c, cmd_flags)",
          "new_text": null,
          "old_line_content": "        cmd_flags = fcallGetCommandFlags(c, cmd_flags);",
          "new_line_content": " * know the script command is well formed.*/",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "evalGetCommandFlags",
          "new_api": null,
          "old_text": "evalGetCommandFlags(c, cmd_flags)",
          "new_text": null,
          "old_line_content": "        cmd_flags = evalGetCommandFlags(c, cmd_flags);",
          "new_line_content": "    if (c->cmd->proc == fcallCommand || c->cmd->proc == fcallroCommand) {",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n                    \"master_sync_total_bytes:%lld\\r\\n\", (long long) server.repl_transfer_size,\n                    \"master_sync_read_bytes:%lld\\r\\n\", (long long) server.repl_transfer_read,\n                    \"master_sync_left_bytes:%lld\\r\\n\", (long long) (server.repl_transfer_size - server.repl_transfer_read),\n                    \"master_sync_perc:%.2f\\r\\n\", perc,\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\", (int)(server.unixtime-server.repl_transfer_lastio))",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "            if (server.repl_state == REPL_STATE_TRANSFER) {",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    server.repl_down_since ?\n                    (intmax_t)(server.unixtime-server.repl_down_since) : -1)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "                    \"master_sync_perc:%.2f\\r\\n\", perc,",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": "intmax_t)(server.unixtime-server.repl_down_since)",
          "new_api": null,
          "old_text": "intmax_t)(server.unixtime-server.repl_down_since)",
          "new_text": null,
          "old_line_content": "                    (intmax_t)(server.unixtime-server.repl_down_since) : -1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "scriptIsTimedout",
          "new_api": null,
          "old_text": "scriptIsTimedout()",
          "new_text": null,
          "old_line_content": "    if (!scriptIsTimedout()) {",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 5923,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "                \"slave_priority:%d\\r\\n\", server.slave_priority,",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "scriptIsRunning",
          "new_api": null,
          "old_text": "scriptIsRunning()",
          "new_text": null,
          "old_line_content": "        serverAssert(!scriptIsRunning());",
          "new_line_content": "        /* Both EXEC and scripts call call() directly so there should be",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.slaves));",
          "new_line_content": "                \"replica_announced:%d\\r\\n\", server.replica_announced));",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "moduleCallCommandFilters",
          "new_api": null,
          "old_text": "moduleCallCommandFilters(c)",
          "new_text": null,
          "old_line_content": "        moduleCallCommandFilters(c);",
          "new_line_content": "     * this is a reprocessing of this command, so we do not want to perform some of the actions again. */",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": "reqresAppendRequest",
          "new_api": null,
          "old_text": "reqresAppendRequest(c)",
          "new_text": null,
          "old_line_content": "        reqresAppendRequest(c);",
          "new_line_content": "    int client_reprocessing_command = c->cmd ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 5942,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "            int slaveid = 0;",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                client *slave = listNodeValue(ln);",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "blockPostponeClient",
          "new_api": null,
          "old_text": "blockPostponeClient(c)",
          "new_text": null,
          "old_line_content": "        blockPostponeClient(c);",
          "new_line_content": "    /* If we're inside a module blocked context yielding that wants to avoid",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": "connAddrPeerName",
          "new_api": null,
          "old_text": "connAddrPeerName(slave->conn,ip,sizeof(ip),&port)",
          "new_text": null,
          "old_line_content": "                    if (connAddrPeerName(slave->conn,ip,sizeof(ip),&port) == -1)",
          "new_line_content": "                char ip[NET_IP_STR_LEN], *slaveip = slave->slave_addr;",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": "replstateToString",
          "new_api": null,
          "old_text": "replstateToString(slave->replstate)",
          "new_text": null,
          "old_line_content": "                const char *state = replstateToString(slave->replstate);",
          "new_line_content": "                if (!slaveip) {",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "new_line_content": "                    slaveip = ip;",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv,c->argc)",
          "new_text": null,
          "old_line_content": "        c->cmd = c->lastcmd = c->realcmd = lookupCommand(c->argv,c->argc);",
          "new_line_content": "    /* Now lookup the command and check ASAP about trivial error conditions",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": "commandCheckExistence",
          "new_api": null,
          "old_text": "commandCheckExistence(c, &err)",
          "new_text": null,
          "old_line_content": "        if (!commandCheckExistence(c, &err)) {",
          "new_line_content": "     * In case we are reprocessing a command after it was blocked,",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "rejectCommandSds",
          "new_api": null,
          "old_text": "rejectCommandSds(c, err)",
          "new_text": null,
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "     * we do not have to repeat the same checks */",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": "commandCheckArity",
          "new_api": null,
          "old_text": "commandCheckArity(c, &err)",
          "new_text": null,
          "old_line_content": "        if (!commandCheckArity(c, &err)) {",
          "new_line_content": "        sds err;",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n            \"master_failover_state:%s\\r\\n\", getFailoverStateString(),\n            \"master_replid:%s\\r\\n\", server.replid,\n            \"master_replid2:%s\\r\\n\", server.replid2,\n            \"master_repl_offset:%lld\\r\\n\", server.master_repl_offset,\n            \"second_repl_offset:%lld\\r\\n\", server.second_replid_offset,\n            \"repl_backlog_active:%d\\r\\n\", server.repl_backlog != NULL,\n            \"repl_backlog_size:%lld\\r\\n\", server.repl_backlog_size,\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,\n            \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, FMTARGS(",
          "new_line_content": "                    slaveid,slaveip,slave->slave_listening_port,state,",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": "getFailoverStateString",
          "new_api": null,
          "old_text": "getFailoverStateString()",
          "new_text": null,
          "old_line_content": "            \"master_failover_state:%s\\r\\n\", getFailoverStateString(),",
          "new_line_content": "                    slave->repl_ack_off, lag);",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": "allowProtectedAction",
          "new_api": null,
          "old_text": "allowProtectedAction(server.enable_debug_cmd, c)",
          "new_text": null,
          "old_line_content": "            if ((c->cmd->proc == debugCommand && !allowProtectedAction(server.enable_debug_cmd, c)) ||",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": "allowProtectedAction",
          "new_api": null,
          "old_text": "allowProtectedAction(server.enable_module_cmd, c)",
          "new_text": null,
          "old_line_content": "                (c->cmd->proc == moduleCommand && !allowProtectedAction(server.enable_module_cmd, c)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\"%s command not allowed. If the %s option is set to \\\"local\\\", \"\n                                      \"you can run it from a local connection, otherwise you need to set this option \"\n                                      \"in the configuration file, and then restart the server.\",\n                                      c->cmd->proc == debugCommand ? \"DEBUG\" : \"MODULE\",\n                                      c->cmd->proc == debugCommand ? \"enable-debug-command\" : \"enable-module-command\")",
          "new_text": null,
          "old_line_content": "                rejectCommandFormat(c,\"%s command not allowed. If the %s option is set to \\\"local\\\", \"",
          "new_line_content": "        /* Check if the command is marked as protected and the relevant configuration allows it */",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"cpu\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"cpu\") != NULL)) {",
          "new_line_content": "            \"repl_backlog_first_byte_offset:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->offset : 0,",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "            \"repl_backlog_histlen:%lld\\r\\n\", server.repl_backlog ? server.repl_backlog->histlen : 0));",
          "content_same": false
        },
        {
          "line": 5983,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": null,
          "old_line_content": "        getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "    /* CPU */",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": "getCommandFlags",
          "new_api": null,
          "old_text": "getCommandFlags(c)",
          "new_text": null,
          "old_line_content": "    uint64_t cmd_flags = getCommandFlags(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_THREAD, &m_ru)",
          "new_text": null,
          "old_line_content": "        getrusage(RUSAGE_THREAD, &m_ru);",
          "new_line_content": "        (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec,",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"used_cpu_sys_main_thread:%ld.%06ld\\r\\n\"\n            \"used_cpu_user_main_thread:%ld.%06ld\\r\\n\",\n            (long)m_ru.ru_stime.tv_sec, (long)m_ru.ru_stime.tv_usec,\n            (long)m_ru.ru_utime.tv_sec, (long)m_ru.ru_utime.tv_usec)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        (long)c_ru.ru_stime.tv_sec, (long)c_ru.ru_stime.tv_usec,",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "mustObeyClient",
          "new_api": null,
          "old_text": "mustObeyClient(c)",
          "new_text": null,
          "old_line_content": "    int obey_client = mustObeyClient(c);",
          "new_line_content": "                                 (c->cmd->proc == execCommand && (c->mstate.cmd_inv_flags & CMD_LOADING));",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": "authRequired",
          "new_api": null,
          "old_text": "authRequired(c)",
          "new_text": null,
          "old_line_content": "    if (authRequired(c)) {",
          "new_line_content": "                                   (c->cmd->proc == execCommand && (c->mstate.cmd_flags & (CMD_WRITE | CMD_MAY_REPLICATE)));",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c,shared.noautherr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c,shared.noautherr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"modules\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"module_list\") != NULL) || (dictFind(section_dict,\"modules\") != NULL)) {",
          "new_line_content": "            (long)m_ru.ru_utime.tv_sec, (long)m_ru.ru_utime.tv_usec);",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "#endif  /* RUSAGE_THREAD */",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\"# Modules\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,\"# Modules\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6010,
          "old_api": "genModulesInfoString",
          "new_api": null,
          "old_text": "genModulesInfoString(info)",
          "new_text": null,
          "old_line_content": "        info = genModulesInfoString(info);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\"Command not allowed inside a transaction\")",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c,\"Command not allowed inside a transaction\");",
          "new_line_content": "            return C_OK;",
          "content_same": false
        },
        {
          "line": 6016,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6017,
          "old_api": "genRedisInfoStringCommandStats",
          "new_api": null,
          "old_text": "genRedisInfoStringCommandStats(info, server.commands)",
          "new_text": null,
          "old_line_content": "        info = genRedisInfoStringCommandStats(info, server.commands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "ACLCheckAllPerm",
          "new_api": null,
          "old_text": "ACLCheckAllPerm(c,&acl_errpos)",
          "new_text": null,
          "old_line_content": "    int acl_retval = ACLCheckAllPerm(c,&acl_errpos);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "addACLLogEntry",
          "new_api": null,
          "old_text": "addACLLogEntry(c,acl_retval,(c->flags & CLIENT_MULTI) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL,acl_errpos,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        addACLLogEntry(c,acl_retval,(c->flags & CLIENT_MULTI) ? ACL_LOG_CTX_MULTI : ACL_LOG_CTX_TOPLEVEL,acl_errpos,NULL,NULL);",
          "new_line_content": "    /* Check if the user can run this command according to the current",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "getAclErrorMessage",
          "new_api": null,
          "old_text": "getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0)",
          "new_text": null,
          "old_line_content": "        sds msg = getAclErrorMessage(acl_retval, c->user, c->cmd, c->argv[acl_errpos]->ptr, 0);",
          "new_line_content": "     * ACLs. */",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c, \"-NOPERM %s\", msg)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c, \"-NOPERM %s\", msg);",
          "new_line_content": "    int acl_errpos;",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info, \"# Errorstats\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscat(info, \"# Errorstats\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6025,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,server.errors)",
          "new_text": null,
          "old_line_content": "        raxStart(&ri,server.errors);",
          "new_line_content": "    /* Error statistics */",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "mustObeyClient",
          "new_api": null,
          "old_text": "mustObeyClient(c)",
          "new_text": null,
          "old_line_content": "        !mustObeyClient(c) &&",
          "new_line_content": "    /* If cluster is enabled perform the cluster redirection here.",
          "content_same": false
        },
        {
          "line": 6034,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(tmpsafe)",
          "new_text": null,
          "old_line_content": "            if (tmpsafe != NULL) zfree(tmpsafe);",
          "new_line_content": "            char *tmpsafe;",
          "content_same": false
        },
        {
          "line": 6040,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"latencystats\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"latencystats\") != NULL)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "clusterNodeIsMyself",
          "new_api": null,
          "old_text": "clusterNodeIsMyself(n)",
          "new_text": null,
          "old_line_content": "        if (n == NULL || !clusterNodeIsMyself(n)) {",
          "new_line_content": "          c->cmd->proc != execCommand))",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"# Latencystats\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Latencystats\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "discardTransaction",
          "new_api": null,
          "old_text": "discardTransaction(c)",
          "new_text": null,
          "old_line_content": "                discardTransaction(c);",
          "new_line_content": "        int error_code;",
          "content_same": false
        },
        {
          "line": 6044,
          "old_api": "genRedisInfoStringLatencyStats",
          "new_api": null,
          "old_text": "genRedisInfoStringLatencyStats(info, server.commands)",
          "new_text": null,
          "old_line_content": "            info = genRedisInfoStringLatencyStats(info, server.commands);",
          "new_line_content": "    /* Latency by percentile distribution per command */",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "                flagTransaction(c);",
          "new_line_content": "                                        &c->slot,&error_code);",
          "content_same": false
        },
        {
          "line": 3999,
          "old_api": "clusterRedirectClient",
          "new_api": null,
          "old_text": "clusterRedirectClient(c,n,c->slot,error_code)",
          "new_text": null,
          "old_line_content": "            clusterRedirectClient(c,n,c->slot,error_code);",
          "new_line_content": "            if (c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 6050,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "evictClients",
          "new_api": null,
          "old_text": "evictClients()",
          "new_text": null,
          "old_line_content": "    evictClients();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(section_dict,\"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (all_sections || (dictFind(section_dict,\"keyspace\") != NULL)) {",
          "new_line_content": "        \"cluster_enabled:%d\\r\\n\",",
          "content_same": false
        },
        {
          "line": 6059,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        server.cluster_enabled);",
          "content_same": false
        },
        {
          "line": 6060,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6067,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "            long long keys, vkeys;",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "isInsideYieldingLongCommand",
          "new_api": null,
          "old_text": "isInsideYieldingLongCommand()",
          "new_text": null,
          "old_line_content": "    if (server.maxmemory && !isInsideYieldingLongCommand()) {",
          "new_line_content": "     *",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": "performEvictions",
          "new_api": null,
          "old_text": "performEvictions()",
          "new_text": null,
          "old_line_content": "        int out_of_memory = (performEvictions() == EVICT_FAIL);",
          "new_line_content": "     * Note that we do not want to reclaim memory if we are here re-entering",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": "trackingHandlePendingKeyInvalidations",
          "new_api": null,
          "old_text": "trackingHandlePendingKeyInvalidations()",
          "new_text": null,
          "old_line_content": "        trackingHandlePendingKeyInvalidations();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(section_dict)",
          "new_text": null,
          "old_line_content": "    if (everything || dictFind(section_dict, \"modules\") != NULL || sections < (int)dictSize(section_dict) ||",
          "new_line_content": "    /* Get info from modules.",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(section_dict)",
          "new_text": null,
          "old_line_content": "        (all_sections && dictSize(section_dict)))",
          "new_line_content": "     * Returned when the user asked for \"everything\", \"modules\", or a specific module section.",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.oomerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.oomerr);",
          "new_line_content": "        /* performEvictions may flush slave output buffers. This may result",
          "content_same": false
        },
        {
          "line": 6083,
          "old_api": "modulesCollectInfo",
          "new_api": null,
          "old_text": "modulesCollectInfo(info,\n                                  everything || dictFind(section_dict, \"modules\") != NULL ? NULL: section_dict,\n                                  0, /* not a crash report */\n                                  sections)",
          "new_text": null,
          "old_line_content": "        info = modulesCollectInfo(info,",
          "new_line_content": "     * for \"all\" with any additional section names. */",
          "content_same": false
        },
        {
          "line": 6090,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "                                  0, /* not a crash report */",
          "content_same": false
        },
        {
          "line": 6091,
          "old_api": "FMTARGS",
          "new_api": null,
          "old_text": "FMTARGS(\n            \"eventloop_duration_aof_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_AOF].sum,\n            \"eventloop_duration_cron_sum:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_CRON].sum,\n            \"eventloop_duration_max:%llu\\r\\n\", server.duration_stats[EL_DURATION_TYPE_EL].max,\n            \"eventloop_cmd_per_cycle_max:%lld\\r\\n\", server.el_cmd_cnt_max)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Debug\\r\\n\" FMTARGS(",
          "new_line_content": "                                  sections);",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": "trackingLimitUsedSlots",
          "new_api": null,
          "old_text": "trackingLimitUsedSlots()",
          "new_text": null,
          "old_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "new_line_content": "        server.pre_command_oom_state = out_of_memory;",
          "content_same": false
        },
        {
          "line": 6104,
          "old_api": "sentinelInfoCommand",
          "new_api": null,
          "old_text": "sentinelInfoCommand(c)",
          "new_text": null,
          "old_line_content": "        sentinelInfoCommand(c);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Replica was unable to write command to disk.\")",
          "new_text": null,
          "old_line_content": "                serverPanic(\"Replica was unable to write command to disk.\");",
          "new_line_content": "    if (deny_write_type != DISK_ERROR_TYPE_NONE &&",
          "content_same": false
        },
        {
          "line": 6110,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString(sections_dict, all_sections, everything)",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString(sections_dict, all_sections, everything);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 6111,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(info)",
          "new_text": null,
          "old_line_content": "    addReplyVerbatim(c,info,sdslen(info),\"txt\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6112,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(info)",
          "new_text": null,
          "old_line_content": "    sdsfree(info);",
          "new_line_content": "    int all_sections = 0;",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Replica is applying a command even though \"\n                                          \"it is unable to write to disk.\")",
          "new_text": null,
          "old_line_content": "                    serverLog(LL_WARNING, \"Replica is applying a command even though \"",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "releaseInfoSectionDict",
          "new_api": null,
          "old_text": "releaseInfoSectionDict(sections_dict)",
          "new_text": null,
          "old_line_content": "    releaseInfoSectionDict(sections_dict);",
          "new_line_content": "    int everything = 0;",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(err)",
          "new_text": null,
          "old_line_content": "            sdssubstr(err, 0, sdslen(err)-2);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": "rejectCommandSds",
          "new_api": null,
          "old_text": "rejectCommandSds(c, err)",
          "new_text": null,
          "old_line_content": "            rejectCommandSds(c, err);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 6122,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c, \"MONITOR isn't allowed for DENY BLOCKING client\");",
          "new_line_content": "void monitorCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "checkGoodReplicasStatus",
          "new_api": null,
          "old_text": "checkGoodReplicasStatus()",
          "new_text": null,
          "old_line_content": "    if (is_write_command && !checkGoodReplicasStatus()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.noreplicaserr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    /* ignore MONITOR if already slave or in monitor mode */",
          "content_same": false
        },
        {
          "line": 6138,
          "old_api": "sdssplitargs",
          "new_api": null,
          "old_text": "sdssplitargs(server.ignore_warnings, &argc)",
          "new_text": null,
          "old_line_content": "    sds *argv = sdssplitargs(server.ignore_warnings, &argc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.roslaveerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.roslaveerr);",
          "new_line_content": "     * accept write commands if this is our master. */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 267,
      "total_additions": 752,
      "total_deletions": 752,
      "total_api_changes": 1771
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 1771,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          2664,
          2660,
          2661
        ]
      }
    },
    "api_calls_before": 1783,
    "api_calls_after": 1783,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 3,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7004abd0b17c2f2460f0fb318f49a75aab0785f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7004abd0b17c2f2460f0fb318f49a75aab0785f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7004abd0b17c2f2460f0fb318f49a75aab0785f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7004abd0b17c2f2460f0fb318f49a75aab0785f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1215,
          "old_api": "check_refname_format",
          "new_api": "is_null_oid",
          "old_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "new_text": "is_null_oid(new_oid)",
          "old_line_content": "\t\t     check_refname_format(refname, REFNAME_ALLOW_ONELEVEL) :",
          "new_line_content": "\t    ((new_oid && !is_null_oid(new_oid)) ?",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "refname_is_safe",
          "new_api": "check_refname_format",
          "old_text": "refname_is_safe(refname)",
          "new_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "old_line_content": "\t\t\t   !refname_is_safe(refname))) {",
          "new_line_content": "\t\t     check_refname_format(refname, REFNAME_ALLOW_ONELEVEL) :",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "_",
          "new_api": "refname_is_safe",
          "old_text": "_(\"refusing to update ref with bad name '%s'\")",
          "new_text": "refname_is_safe(refname)",
          "old_line_content": "\t\tstrbuf_addf(err, _(\"refusing to update ref with bad name '%s'\"),",
          "new_line_content": "\t\t\t   !refname_is_safe(refname))) {",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "_",
          "new_api": "is_pseudo_ref",
          "old_text": "_(\"refusing to update pseudoref '%s'\")",
          "new_text": "is_pseudo_ref(refname)",
          "old_line_content": "\t\tstrbuf_addf(err, _(\"refusing to update pseudoref '%s'\"),",
          "new_line_content": "\t    is_pseudo_ref(refname)) {",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "is_null_oid",
          "new_api": "BUG",
          "old_text": "is_null_oid(new_oid)",
          "new_text": "BUG(\"create called with both new_oid and new_target set\")",
          "old_line_content": "\tif ((!new_oid || is_null_oid(new_oid)) && !new_target) {",
          "new_line_content": "\t\tBUG(\"create called with both new_oid and new_target set\");",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "strbuf_addf",
          "new_api": "is_null_oid",
          "old_text": "strbuf_addf(err, \"'%s' has neither a valid OID nor a target\", refname)",
          "new_text": "is_null_oid(new_oid)",
          "old_line_content": "\t\tstrbuf_addf(err, \"'%s' has neither a valid OID nor a target\", refname);",
          "new_line_content": "\tif ((!new_oid || is_null_oid(new_oid)) && !new_target) {",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "null_oid",
          "new_api": "ref_transaction_update",
          "old_text": "null_oid()",
          "new_text": "ref_transaction_update(transaction, refname, new_oid,\n\t\t\t\t      null_oid(), new_target, NULL, flags,\n\t\t\t\t      msg, err)",
          "old_line_content": "\t\t\t\t      null_oid(), new_target, NULL, flags,",
          "new_line_content": "\treturn ref_transaction_update(transaction, refname, new_oid,",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "BUG",
          "new_api": "is_null_oid",
          "old_text": "BUG(\"delete called with old_oid set to zeros\")",
          "new_text": "is_null_oid(old_oid)",
          "old_line_content": "\t\tBUG(\"delete called with old_oid set to zeros\");",
          "new_line_content": "\tif (old_oid && is_null_oid(old_oid))",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "ref_transaction_update",
          "new_api": "BUG",
          "old_text": "ref_transaction_update(transaction, refname,\n\t\t\t\t      null_oid(), old_oid,\n\t\t\t\t      NULL, old_target, flags,\n\t\t\t\t      msg, err)",
          "new_text": "BUG(\"delete cannot operate on symrefs with deref mode\")",
          "old_line_content": "\treturn ref_transaction_update(transaction, refname,",
          "new_line_content": "\t\tBUG(\"delete cannot operate on symrefs with deref mode\");",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "null_oid",
          "new_api": "ref_transaction_update",
          "old_text": "null_oid()",
          "new_text": "ref_transaction_update(transaction, refname,\n\t\t\t\t      null_oid(), old_oid,\n\t\t\t\t      NULL, old_target, flags,\n\t\t\t\t      msg, err)",
          "old_line_content": "\t\t\t\t      null_oid(), old_oid,",
          "new_line_content": "\treturn ref_transaction_update(transaction, refname,",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "ref_transaction_update",
          "new_api": "BUG",
          "old_text": "ref_transaction_update(transaction, refname,\n\t\t\t\t      NULL, old_oid,\n\t\t\t\t      NULL, old_target,\n\t\t\t\t      flags, NULL, err)",
          "new_text": "BUG(\"verify cannot operate on symrefs with deref mode\")",
          "old_line_content": "\treturn ref_transaction_update(transaction, refname,",
          "new_line_content": "\t\tBUG(\"verify cannot operate on symrefs with deref mode\");",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "strbuf_addf",
          "new_api": "strbuf_reset",
          "old_text": "strbuf_addf(&resolved_buf, rule,\n\t\t\t\t    cast_size_t_to_int(short_name_len),\n\t\t\t\t    short_name)",
          "new_text": "strbuf_reset(&resolved_buf)",
          "old_line_content": "\t\t\tstrbuf_addf(&resolved_buf, rule,",
          "new_line_content": "\t\t\tstrbuf_reset(&resolved_buf);",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "cast_size_t_to_int",
          "new_api": "strbuf_addf",
          "old_text": "cast_size_t_to_int(short_name_len)",
          "new_text": "strbuf_addf(&resolved_buf, rule,\n\t\t\t\t    cast_size_t_to_int(short_name_len),\n\t\t\t\t    short_name)",
          "old_line_content": "\t\t\t\t    cast_size_t_to_int(short_name_len),",
          "new_line_content": "\t\t\tstrbuf_addf(&resolved_buf, rule,",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "xmemdupz",
          "new_api": "strbuf_release",
          "old_text": "xmemdupz(short_name, short_name_len)",
          "new_text": "strbuf_release(&resolved_buf)",
          "old_line_content": "\t\t\treturn xmemdupz(short_name, short_name_len);",
          "new_line_content": "\t\t\tstrbuf_release(&resolved_buf);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": "xstrdup",
          "new_api": "strbuf_release",
          "old_text": "xstrdup(refname)",
          "new_text": "strbuf_release(&resolved_buf)",
          "old_line_content": "\treturn xstrdup(refname);",
          "new_line_content": "\tstrbuf_release(&resolved_buf);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "parse_config_key",
          "new_api": "strcmp",
          "old_text": "parse_config_key(var, section, NULL, NULL, &key)",
          "new_text": "strcmp(\"transfer.hiderefs\", var)",
          "old_line_content": "\t    (!parse_config_key(var, section, NULL, NULL, &key) &&",
          "new_line_content": "\tif (!strcmp(\"transfer.hiderefs\", var) ||",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "strcmp",
          "new_api": "parse_config_key",
          "old_text": "strcmp(key, \"hiderefs\")",
          "new_text": "parse_config_key(var, section, NULL, NULL, &key)",
          "old_line_content": "\t     !strcmp(key, \"hiderefs\"))) {",
          "new_line_content": "\t    (!parse_config_key(var, section, NULL, NULL, &key) &&",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "strlen",
          "new_api": "strvec_push",
          "old_text": "strlen(ref)",
          "new_text": "strvec_push(hide_refs, value)",
          "old_line_content": "\t\tlen = strlen(ref);",
          "new_line_content": "\t\tref = (char *)strvec_push(hide_refs, value);",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "strlen",
          "new_api": "do_for_each_ref",
          "old_text": "strlen(git_replace_ref_base)",
          "new_text": "do_for_each_ref(refs, git_replace_ref_base, NULL, fn,\n\t\t\t       strlen(git_replace_ref_base),\n\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data)",
          "old_line_content": "\t\t\t       strlen(git_replace_ref_base),",
          "new_line_content": "\treturn do_for_each_ref(refs, git_replace_ref_base, NULL, fn,",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "get_git_namespace",
          "new_api": "get_namespaced_exclude_patterns",
          "old_text": "get_git_namespace()",
          "new_text": "get_namespaced_exclude_patterns(exclude_patterns,\n\t\t\t\t\t\t\t   get_git_namespace(),\n\t\t\t\t\t\t\t   &namespaced_exclude_patterns)",
          "old_line_content": "\t\t\t\t\t\t\t   get_git_namespace(),",
          "new_line_content": "\texclude_patterns = get_namespaced_exclude_patterns(exclude_patterns,",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "do_for_each_ref",
          "new_api": "get_git_namespace",
          "old_text": "do_for_each_ref(refs, prefix.buf, exclude_patterns, fn, 0, 0, cb_data)",
          "new_text": "get_git_namespace()",
          "old_line_content": "\tret = do_for_each_ref(refs, prefix.buf, exclude_patterns, fn, 0, 0, cb_data);",
          "new_line_content": "\tstrbuf_addf(&prefix, \"%srefs/\", get_git_namespace());",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "strbuf_release",
          "new_api": "strvec_clear",
          "old_text": "strbuf_release(&prefix)",
          "new_text": "strvec_clear(&namespaced_exclude_patterns)",
          "old_line_content": "\tstrbuf_release(&prefix);",
          "new_line_content": "\tstrvec_clear(&namespaced_exclude_patterns);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "string_list_append",
          "new_api": "is_glob_special",
          "old_text": "string_list_append(out, prefix->buf)",
          "new_text": "is_glob_special(c)",
          "old_line_content": "\t\t\tstring_list_append(out, prefix->buf);",
          "new_line_content": "\t\tif (!c || is_glob_special(c)) {",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "find_longest_prefixes_1",
          "new_api": "strbuf_addch",
          "old_text": "find_longest_prefixes_1(out, prefix, patterns + i, end - i)",
          "new_text": "strbuf_addch(prefix, patterns[i][prefix->len])",
          "old_line_content": "\t\tfind_longest_prefixes_1(out, prefix, patterns + i, end - i);",
          "new_line_content": "\t\tstrbuf_addch(prefix, patterns[i][prefix->len]);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "strbuf_setlen",
          "new_api": "find_longest_prefixes_1",
          "old_text": "strbuf_setlen(prefix, prefix->len - 1)",
          "new_text": "find_longest_prefixes_1(out, prefix, patterns + i, end - i)",
          "old_line_content": "\t\tstrbuf_setlen(prefix, prefix->len - 1);",
          "new_line_content": "\t\tfind_longest_prefixes_1(out, prefix, patterns + i, end - i);",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "QSORT",
          "new_api": "strvec_pushv",
          "old_text": "QSORT(sorted.v, sorted.nr, qsort_strcmp)",
          "new_text": "strvec_pushv(&sorted, patterns)",
          "old_line_content": "\tQSORT(sorted.v, sorted.nr, qsort_strcmp);",
          "new_line_content": "\tstrvec_pushv(&sorted, patterns);",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "strbuf_release",
          "new_api": "strvec_clear",
          "old_text": "strbuf_release(&prefix)",
          "new_text": "strvec_clear(&sorted)",
          "old_line_content": "\tstrbuf_release(&prefix);",
          "new_line_content": "\tstrvec_clear(&sorted);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "strbuf_addstr",
          "new_api": "for_each_string_list_item",
          "old_text": "strbuf_addstr(&buf, prefix->string)",
          "new_text": "for_each_string_list_item(prefix, &prefixes)",
          "old_line_content": "\t\tstrbuf_addstr(&buf, prefix->string);",
          "new_line_content": "\tfor_each_string_list_item(prefix, &prefixes) {",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "refs_for_each_fullref_in",
          "new_api": "strbuf_addstr",
          "old_text": "refs_for_each_fullref_in(ref_store, buf.buf,\n\t\t\t\t\t       exclude_patterns, fn, cb_data)",
          "new_text": "strbuf_addstr(&buf, prefix->string)",
          "old_line_content": "\t\tret = refs_for_each_fullref_in(ref_store, buf.buf,",
          "new_line_content": "\t\tstrbuf_addstr(&buf, prefix->string);",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "string_list_clear",
          "new_api": "strvec_clear",
          "old_text": "string_list_clear(&prefixes, 0)",
          "new_text": "strvec_clear(&namespaced_exclude_patterns)",
          "old_line_content": "\tstring_list_clear(&prefixes, 0);",
          "new_line_content": "\tstrvec_clear(&namespaced_exclude_patterns);",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "strbuf_release",
          "new_api": "string_list_clear",
          "old_text": "strbuf_release(&buf)",
          "new_text": "string_list_clear(&prefixes, 0)",
          "old_line_content": "\tstrbuf_release(&buf);",
          "new_line_content": "\tstring_list_clear(&prefixes, 0);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "is_pseudo_ref",
          "new_api": "assert",
          "old_text": "is_pseudo_ref(refname)",
          "new_text": "assert(failure_errno)",
          "old_line_content": "\tif (is_pseudo_ref(refname))",
          "new_line_content": "\tassert(failure_errno);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "refs_read_special_head",
          "new_api": "is_pseudo_ref",
          "old_text": "refs_read_special_head(ref_store, refname, oid, referent,\n\t\t\t\t\t      type, failure_errno)",
          "new_text": "is_pseudo_ref(refname)",
          "old_line_content": "\t\treturn refs_read_special_head(ref_store, refname, oid, referent,",
          "new_line_content": "\tif (is_pseudo_ref(refname))",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "is_null_oid",
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": "is_null_oid(oid)",
          "new_text": "refs_resolve_ref_unsafe(refs, refname, 0, oid, &flags)",
          "old_line_content": "\t    is_null_oid(oid))",
          "new_line_content": "\tif (!refs_resolve_ref_unsafe(refs, refname, 0, oid, &flags) ||",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": "free",
          "new_api": "release",
          "old_text": "free(ref_store->gitdir)",
          "new_text": "ref_store->be->release(ref_store)",
          "old_line_content": "\tfree(ref_store->gitdir);",
          "new_line_content": "\tref_store->be->release(ref_store);",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": "strmap_put",
          "new_api": "strmap_init",
          "old_text": "strmap_put(map, name, refs)",
          "new_text": "strmap_init(map)",
          "old_line_content": "\tif (strmap_put(map, name, refs))",
          "new_line_content": "\t\tstrmap_init(map);",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": "BUG",
          "new_api": "strmap_put",
          "old_text": "BUG(\"%s ref_store '%s' initialized twice\", type, name)",
          "new_text": "strmap_put(map, name, refs)",
          "old_line_content": "\t\tBUG(\"%s ref_store '%s' initialized twice\", type, name);",
          "new_line_content": "\tif (strmap_put(map, name, refs))",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "is_dir_sep",
          "new_api": "strlen",
          "old_text": "is_dir_sep(submodule[len - 1])",
          "new_text": "strlen(submodule)",
          "old_line_content": "\twhile (len && is_dir_sep(submodule[len - 1]))",
          "new_line_content": "\tlen = strlen(submodule);",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": "is_nonbare_repository_dir",
          "new_api": "strbuf_addstr",
          "old_text": "is_nonbare_repository_dir(&submodule_sb)",
          "new_text": "strbuf_addstr(&submodule_sb, submodule)",
          "old_line_content": "\tif (!is_nonbare_repository_dir(&submodule_sb))",
          "new_line_content": "\tstrbuf_addstr(&submodule_sb, submodule);",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "null_oid",
          "new_api": "repo_submodule_init",
          "old_text": "null_oid()",
          "new_text": "repo_submodule_init(subrepo, repo, submodule,\n\t\t\t\tnull_oid())",
          "old_line_content": "\t\t\t\tnull_oid())) {",
          "new_line_content": "\tif (repo_submodule_init(subrepo, repo, submodule,",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": "free",
          "new_api": "null_oid",
          "old_text": "free(subrepo)",
          "new_text": "null_oid()",
          "old_line_content": "\t\tfree(subrepo);",
          "new_line_content": "\t\t\t\tnull_oid())) {",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "free",
          "new_api": "strbuf_release",
          "old_text": "free(to_free)",
          "new_text": "strbuf_release(&submodule_sb)",
          "old_line_content": "\tfree(to_free);",
          "new_line_content": "\tstrbuf_release(&submodule_sb);",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "ref_iterator_peel",
          "new_api": "oideq",
          "old_text": "ref_iterator_peel(current_ref_iter, peeled)",
          "new_text": "oideq(current_ref_iter->oid, base)",
          "old_line_content": "\t\treturn ref_iterator_peel(current_ref_iter, peeled);",
          "new_line_content": "\t     oideq(current_ref_iter->oid, base)))",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "error",
          "new_api": "ref_transaction_commit",
          "old_text": "error(\"%s\", err.buf)",
          "new_text": "ref_transaction_commit(transaction, &err)",
          "old_line_content": "\t\tret = error(\"%s\", err.buf);",
          "new_line_content": "\t    ref_transaction_commit(transaction, &err)) {",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "_",
          "new_api": "strbuf_addf",
          "old_text": "_(\"multiple updates for ref '%s' not allowed\")",
          "new_text": "strbuf_addf(err,\n\t\t\t\t    _(\"multiple updates for ref '%s' not allowed\"),\n\t\t\t\t    refnames->items[i].string)",
          "old_line_content": "\t\t\t\t    _(\"multiple updates for ref '%s' not allowed\"),",
          "new_line_content": "\t\t\tstrbuf_addf(err,",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": "sigchain_pop",
          "new_api": "close",
          "old_text": "sigchain_pop(SIGPIPE)",
          "new_text": "close(proc.in)",
          "old_line_content": "\tsigchain_pop(SIGPIPE);",
          "new_line_content": "\tclose(proc.in);",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": "strbuf_release",
          "new_api": "sigchain_pop",
          "old_text": "strbuf_release(&buf)",
          "new_text": "sigchain_pop(SIGPIPE)",
          "old_line_content": "\tstrbuf_release(&buf);",
          "new_line_content": "\tsigchain_pop(SIGPIPE);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": "_",
          "new_api": "strbuf_addstr",
          "old_text": "_(\"ref updates forbidden inside quarantine environment\")",
          "new_text": "strbuf_addstr(err,\n\t\t\t      _(\"ref updates forbidden inside quarantine environment\"))",
          "old_line_content": "\t\t\t      _(\"ref updates forbidden inside quarantine environment\"));",
          "new_line_content": "\t\tstrbuf_addstr(err,",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "_",
          "new_api": "ref_transaction_abort",
          "old_text": "_(\"ref updates aborted by hook\")",
          "new_text": "ref_transaction_abort(transaction, err)",
          "old_line_content": "\t\tdie(_(\"ref updates aborted by hook\"));",
          "new_line_content": "\t\tref_transaction_abort(transaction, err);",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "strchr",
          "new_api": "strlen",
          "old_text": "strchr(slash + 1, '/')",
          "new_text": "strlen(refname)",
          "old_line_content": "\tfor (slash = strchr(refname, '/'); slash; slash = strchr(slash + 1, '/')) {",
          "new_line_content": "\tstrbuf_grow(&dirname, strlen(refname) + 1);",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": "_",
          "new_api": "string_list_has_string",
          "old_text": "_(\"cannot process '%s' and '%s' at the same time\")",
          "new_text": "string_list_has_string(extras, dirname.buf)",
          "old_line_content": "\t\t\tstrbuf_addf(err, _(\"cannot process '%s' and '%s' at the same time\"),",
          "new_line_content": "\t\tif (extras && string_list_has_string(extras, dirname.buf)) {",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": "strbuf_addch",
          "new_api": "strbuf_addstr",
          "old_text": "strbuf_addch(&dirname, '/')",
          "new_text": "strbuf_addstr(&dirname, refname + dirname.len)",
          "old_line_content": "\tstrbuf_addch(&dirname, '/');",
          "new_line_content": "\tstrbuf_addstr(&dirname, refname + dirname.len);",
          "content_same": false
        },
        {
          "line": 2559,
          "old_api": "strbuf_release",
          "new_api": "ref_transaction_free",
          "old_text": "strbuf_release(&err)",
          "new_text": "ref_transaction_free(transaction)",
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "\tref_transaction_free(transaction);",
          "content_same": false
        },
        {
          "line": 2560,
          "old_api": "free",
          "new_api": "strbuf_release",
          "old_text": "free(msg)",
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\tfree(msg);",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2571,
          "old_api": "rename_ref",
          "new_api": "normalize_reflog_message",
          "old_text": "refs->be->rename_ref(refs, oldref, newref, msg)",
          "new_text": "normalize_reflog_message(logmsg)",
          "old_line_content": "\tretval = refs->be->rename_ref(refs, oldref, newref, msg);",
          "new_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "content_same": false
        },
        {
          "line": 2572,
          "old_api": "free",
          "new_api": "rename_ref",
          "old_text": "free(msg)",
          "new_text": "refs->be->rename_ref(refs, oldref, newref, msg)",
          "old_line_content": "\tfree(msg);",
          "new_line_content": "\tretval = refs->be->rename_ref(refs, oldref, newref, msg);",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": "copy_ref",
          "new_api": "normalize_reflog_message",
          "old_text": "refs->be->copy_ref(refs, oldref, newref, msg)",
          "new_text": "normalize_reflog_message(logmsg)",
          "old_line_content": "\tretval = refs->be->copy_ref(refs, oldref, newref, msg);",
          "new_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": "free",
          "new_api": "copy_ref",
          "old_text": "free(msg)",
          "new_text": "refs->be->copy_ref(refs, oldref, newref, msg)",
          "old_line_content": "\tfree(msg);",
          "new_line_content": "\tretval = refs->be->copy_ref(refs, oldref, newref, msg);",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "strbuf_addf",
          "new_api": "strcmp",
          "old_text": "strbuf_addf(err, \"verifying symref target: '%s': \"\n\t\t\t    \"reference is missing but expected %s\",\n\t\t\t    ref_update_original_update_refname(update),\n\t\t\t    update->old_target)",
          "new_text": "strcmp(referent, \"\")",
          "old_line_content": "\t\tstrbuf_addf(err, \"verifying symref target: '%s': \"",
          "new_line_content": "\tif (!strcmp(referent, \"\"))",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": "strerror",
          "new_api": "strbuf_addf",
          "old_text": "strerror(errno)",
          "new_text": "strbuf_addf(errbuf, \"could not open source directory '%s': %s\",\n\t\t\t    from_path, strerror(errno))",
          "old_line_content": "\t\t\t    from_path, strerror(errno));",
          "new_line_content": "\t\tstrbuf_addf(errbuf, \"could not open source directory '%s': %s\",",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "strbuf_complete",
          "new_api": "strbuf_addstr",
          "old_text": "strbuf_complete(&from_buf, '/')",
          "new_text": "strbuf_addstr(&from_buf, from_path)",
          "old_line_content": "\tstrbuf_complete(&from_buf, '/');",
          "new_line_content": "\tstrbuf_addstr(&from_buf, from_path);",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "strbuf_complete",
          "new_api": "strbuf_addstr",
          "old_text": "strbuf_complete(&to_buf, '/')",
          "new_text": "strbuf_addstr(&to_buf, to_path)",
          "old_line_content": "\tstrbuf_complete(&to_buf, '/');",
          "new_line_content": "\tstrbuf_addstr(&to_buf, to_path);",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": "strbuf_addstr",
          "new_api": "strbuf_setlen",
          "old_text": "strbuf_addstr(&from_buf, ent->d_name)",
          "new_text": "strbuf_setlen(&from_buf, from_len)",
          "old_line_content": "\t\tstrbuf_addstr(&from_buf, ent->d_name);",
          "new_line_content": "\t\tstrbuf_setlen(&from_buf, from_len);",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": "strbuf_addstr",
          "new_api": "strbuf_setlen",
          "old_text": "strbuf_addstr(&to_buf, ent->d_name)",
          "new_text": "strbuf_setlen(&to_buf, to_len)",
          "old_line_content": "\t\tstrbuf_addstr(&to_buf, ent->d_name);",
          "new_line_content": "\t\tstrbuf_setlen(&to_buf, to_len);",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": "strerror",
          "new_api": "strbuf_addf",
          "old_text": "strerror(errno)",
          "new_text": "strbuf_addf(errbuf, \"could not link file '%s' to '%s': %s\",\n\t\t\t\t    from_buf.buf, to_buf.buf, strerror(errno))",
          "old_line_content": "\t\t\t\t    from_buf.buf, to_buf.buf, strerror(errno));",
          "new_line_content": "\t\t\tstrbuf_addf(errbuf, \"could not link file '%s' to '%s': %s\",",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "strerror",
          "new_api": "strbuf_addf",
          "old_text": "strerror(errno)",
          "new_text": "strbuf_addf(errbuf, \"could not read entry from directory '%s': %s\",\n\t\t\t    from_path, strerror(errno))",
          "old_line_content": "\t\t\t    from_path, strerror(errno));",
          "new_line_content": "\t\tstrbuf_addf(errbuf, \"could not read entry from directory '%s': %s\",",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "strbuf_addstr",
          "new_api": "refs_for_each_reflog",
          "old_text": "strbuf_addstr(errbuf, \"cannot count reflogs\")",
          "new_text": "refs_for_each_reflog(old_refs, count_reflogs, &reflog_count)",
          "old_line_content": "\t\tstrbuf_addstr(errbuf, \"cannot count reflogs\");",
          "new_line_content": "\tif (refs_for_each_reflog(old_refs, count_reflogs, &reflog_count) < 0) {",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "strbuf_addstr",
          "new_api": "has_worktrees",
          "old_text": "strbuf_addstr(errbuf, \"migrating repositories with worktrees is not supported yet\")",
          "new_text": "has_worktrees()",
          "old_line_content": "\t\tstrbuf_addstr(errbuf, \"migrating repositories with worktrees is not supported yet\");",
          "new_line_content": "\tif (has_worktrees()) {",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "mkdtemp",
          "new_api": "strbuf_addf",
          "old_text": "mkdtemp(new_gitdir.buf)",
          "new_text": "strbuf_addf(&new_gitdir, \"%s/%s\", old_refs->gitdir, \"ref_migration.XXXXXX\")",
          "old_line_content": "\tif (!mkdtemp(new_gitdir.buf)) {",
          "new_line_content": "\tstrbuf_addf(&new_gitdir, \"%s/%s\", old_refs->gitdir, \"ref_migration.XXXXXX\");",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": "strbuf_addf",
          "new_api": "mkdtemp",
          "old_text": "strbuf_addf(errbuf, \"cannot create migration directory: %s\",\n\t\t\t    strerror(errno))",
          "new_text": "mkdtemp(new_gitdir.buf)",
          "old_line_content": "\t\tstrbuf_addf(errbuf, \"cannot create migration directory: %s\",",
          "new_line_content": "\tif (!mkdtemp(new_gitdir.buf)) {",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "strerror",
          "new_api": "strbuf_addf",
          "old_text": "strerror(errno)",
          "new_text": "strbuf_addf(errbuf, \"cannot create migration directory: %s\",\n\t\t\t    strerror(errno))",
          "old_line_content": "\t\t\t    strerror(errno));",
          "new_line_content": "\t\tstrbuf_addf(errbuf, \"cannot create migration directory: %s\",",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": "FREE_AND_NULL",
          "new_api": "ref_store_release",
          "old_text": "FREE_AND_NULL(new_refs)",
          "new_text": "ref_store_release(new_refs)",
          "old_line_content": "\tFREE_AND_NULL(new_refs);",
          "new_line_content": "\tref_store_release(new_refs);",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": "_",
          "new_api": "rmdir",
          "old_text": "_(\"could not remove temporary migration directory '%s'\")",
          "new_text": "rmdir(new_gitdir.buf)",
          "old_line_content": "\t\twarning_errno(_(\"could not remove temporary migration directory '%s'\"),",
          "new_line_content": "\tif (rmdir(new_gitdir.buf) < 0)",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "FREE_AND_NULL",
          "new_api": "ref_store_release",
          "old_text": "FREE_AND_NULL(old_refs)",
          "new_text": "ref_store_release(old_refs)",
          "old_line_content": "\tFREE_AND_NULL(old_refs);",
          "new_line_content": "\tref_store_release(old_refs);",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": "_",
          "new_api": "strbuf_complete",
          "old_text": "_(\"migrated refs can be found at '%s'\")",
          "new_text": "strbuf_complete(errbuf, '\\n')",
          "old_line_content": "\t\tstrbuf_addf(errbuf, _(\"migrated refs can be found at '%s'\"),",
          "new_line_content": "\t\tstrbuf_complete(errbuf, '\\n');",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "free",
          "new_api": "ref_store_release",
          "old_text": "free(new_refs)",
          "new_text": "ref_store_release(new_refs)",
          "old_line_content": "\t\tfree(new_refs);",
          "new_line_content": "\t\tref_store_release(new_refs);",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "strbuf_release",
          "new_api": "ref_transaction_free",
          "old_text": "strbuf_release(&new_gitdir)",
          "new_text": "ref_transaction_free(transaction)",
          "old_line_content": "\tstrbuf_release(&new_gitdir);",
          "new_line_content": "\tref_transaction_free(transaction);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2561,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(msg)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tfree(msg);",
          "content_same": false
        },
        {
          "line": 2050,
          "old_api": null,
          "new_api": "ref_store_init",
          "old_text": null,
          "new_text": "ref_store_init(subrepo, subrepo->ref_storage_format,\n\t\t\t      submodule_sb.buf,\n\t\t\t      REF_STORE_READ | REF_STORE_ODB)",
          "old_line_content": "\t\t\t      submodule_sb.buf,",
          "new_line_content": "\trefs = ref_store_init(subrepo, subrepo->ref_storage_format,",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": null,
          "new_api": "register_ref_store_map",
          "old_text": null,
          "new_text": "register_ref_store_map(&repo->submodule_ref_stores, \"submodule\",\n\t\t\t       refs, submodule)",
          "old_line_content": "\t\t\t       refs, submodule);",
          "new_line_content": "\tregister_ref_store_map(&repo->submodule_ref_stores, \"submodule\",",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(to_free)",
          "old_line_content": "",
          "new_line_content": "\tfree(to_free);",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(msg)",
          "old_line_content": "\treturn retval;",
          "new_line_content": "\tfree(msg);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "string_list_find_insert_index",
          "old_text": null,
          "new_text": "string_list_find_insert_index(extras, dirname, 0)",
          "old_line_content": "\t     pos < extras->nr; pos++) {",
          "new_line_content": "\tfor (pos = string_list_find_insert_index(extras, dirname, 0);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(extra_refname, dirname)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tif (!starts_with(extra_refname, dirname))",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "get_main_ref_store",
          "old_text": null,
          "new_text": "get_main_ref_store(wt->repo)",
          "old_line_content": "",
          "new_line_content": "\t\treturn get_main_ref_store(wt->repo);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "string_list_has_string",
          "old_text": null,
          "new_text": "string_list_has_string(skip, extra_refname)",
          "old_line_content": "\t\t\treturn extra_refname;",
          "new_line_content": "\t\tif (!skip || !string_list_has_string(skip, extra_refname))",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": null,
          "new_api": "lookup_ref_store_map",
          "old_text": null,
          "new_text": "lookup_ref_store_map(&wt->repo->worktree_ref_stores, id)",
          "old_line_content": "\tif (refs)",
          "new_line_content": "\trefs = lookup_ref_store_map(&wt->repo->worktree_ref_stores, id);",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(msg)",
          "old_line_content": "\treturn retval;",
          "new_line_content": "\tfree(msg);",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "strbuf_git_common_path",
          "old_text": null,
          "new_text": "strbuf_git_common_path(&common_path, wt->repo,\n\t\t\t\t      \"worktrees/%s\", wt->id)",
          "old_line_content": "\t\t\t\t      \"worktrees/%s\", wt->id);",
          "new_line_content": "\t\tstrbuf_git_common_path(&common_path, wt->repo,",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": null,
          "new_api": "ref_store_init",
          "old_text": null,
          "new_text": "ref_store_init(wt->repo, wt->repo->ref_storage_format,\n\t\t\t\t      common_path.buf, REF_STORE_ALL_CAPS)",
          "old_line_content": "\t\t\t\t      common_path.buf, REF_STORE_ALL_CAPS);",
          "new_line_content": "\t\trefs = ref_store_init(wt->repo, wt->repo->ref_storage_format,",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&common_path)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tstrbuf_release(&common_path);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": null,
          "new_text": "refs_resolve_ref_unsafe(refs, \"HEAD\", RESOLVE_REF_READING,\n\t\t\t\t    &oid, &flag)",
          "old_line_content": "\t\t\t\t    &oid, &flag))",
          "new_line_content": "\tif (refs_resolve_ref_unsafe(refs, \"HEAD\", RESOLVE_REF_READING,",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": null,
          "new_api": "ref_store_init",
          "old_text": null,
          "new_text": "ref_store_init(wt->repo, wt->repo->ref_storage_format,\n\t\t\t\t      wt->repo->commondir, REF_STORE_ALL_CAPS)",
          "old_line_content": "\t\t\t\t      wt->repo->commondir, REF_STORE_ALL_CAPS);",
          "new_line_content": "\t\trefs = ref_store_init(wt->repo, wt->repo->ref_storage_format,",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "fn",
          "old_text": null,
          "new_text": "fn(\"HEAD\", NULL, &oid, flag, cb_data)",
          "old_line_content": "",
          "new_line_content": "\t\treturn fn(\"HEAD\", NULL, &oid, flag, cb_data);",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&update->new_oid)",
          "old_line_content": "}",
          "new_line_content": "\treturn !update->new_target && is_null_oid(&update->new_oid);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "register_ref_store_map",
          "old_text": null,
          "new_text": "register_ref_store_map(&wt->repo->worktree_ref_stores,\n\t\t\t\t       \"worktree\", refs, id)",
          "old_line_content": "\t\t\t\t       \"worktree\", refs, id);",
          "new_line_content": "\t\tregister_ref_store_map(&wt->repo->worktree_ref_stores,",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"called without old_target set\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"called without old_target set\");",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(referent, update->old_target)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(referent, update->old_target))",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(path)",
          "old_line_content": "}",
          "new_line_content": "\trefs->gitdir = xstrdup(path);",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err, \"verifying symref target: '%s': \"\n\t\t\t    \"reference is missing but expected %s\",\n\t\t\t    ref_update_original_update_refname(update),\n\t\t\t    update->old_target)",
          "old_line_content": "\t\t\t    \"reference is missing but expected %s\",",
          "new_line_content": "\t\tstrbuf_addf(err, \"verifying symref target: '%s': \"",
          "content_same": false
        },
        {
          "line": 2614,
          "old_api": null,
          "new_api": "ref_update_original_update_refname",
          "old_text": null,
          "new_text": "ref_update_original_update_refname(update)",
          "old_line_content": "\t\t\t    update->old_target);",
          "new_line_content": "\t\t\t    ref_update_original_update_refname(update),",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "git_env_bool",
          "old_text": null,
          "new_text": "git_env_bool(\"GIT_REF_PARANOIA\", 1)",
          "old_line_content": "\t\tif (ref_paranoia) {",
          "new_line_content": "\t\t\tref_paranoia = git_env_bool(\"GIT_REF_PARANOIA\", 1);",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err, \"verifying symref target: '%s': \"\n\t\t\t    \"is at %s but expected %s\",\n\t\t\t    ref_update_original_update_refname(update),\n\t\t\t    referent, update->old_target)",
          "old_line_content": "\t\t\t    \"is at %s but expected %s\",",
          "new_line_content": "\t\tstrbuf_addf(err, \"verifying symref target: '%s': \"",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "pack_refs",
          "old_text": null,
          "new_text": "refs->be->pack_refs(refs, opts)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->pack_refs(refs, opts);",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "ref_update_original_update_refname",
          "old_text": null,
          "new_text": "ref_update_original_update_refname(update)",
          "old_line_content": "\t\t\t    referent, update->old_target);",
          "new_line_content": "\t\t\t    ref_update_original_update_refname(update),",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "iterator_begin",
          "old_text": null,
          "new_text": "refs->be->iterator_begin(refs, prefix, exclude_patterns, flags)",
          "old_line_content": "\t/*",
          "new_line_content": "\titer = refs->be->iterator_begin(refs, prefix, exclude_patterns, flags);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "ref_iterator_peel",
          "old_text": null,
          "new_text": "ref_iterator_peel(current_ref_iter, peeled)",
          "old_line_content": "",
          "new_line_content": "\t\treturn ref_iterator_peel(current_ref_iter, peeled);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "prefix_ref_iterator_begin",
          "old_text": null,
          "new_text": "prefix_ref_iterator_begin(iter, \"\", trim)",
          "old_line_content": "",
          "new_line_content": "\t\titer = prefix_ref_iterator_begin(iter, \"\", trim);",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": null,
          "new_api": "peel_object",
          "old_text": null,
          "new_text": "peel_object(r, base, peeled)",
          "old_line_content": "}",
          "new_line_content": "\treturn peel_object(r, base, peeled) ? -1 : 0;",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": null,
          "new_api": "ref_store_transaction_begin",
          "old_text": null,
          "new_text": "ref_store_transaction_begin(refs, 0, &err)",
          "old_line_content": "\tif (!transaction ||",
          "new_line_content": "\ttransaction = ref_store_transaction_begin(refs, 0, &err);",
          "content_same": false
        },
        {
          "line": 2638,
          "old_api": null,
          "new_api": "refs_read_symbolic_ref",
          "old_text": null,
          "new_text": "refs_read_symbolic_ref(data->old_refs, refname, &symref_target)",
          "old_line_content": "\t\tif (ret < 0)",
          "new_line_content": "\t\tret = refs_read_symbolic_ref(data->old_refs, refname, &symref_target);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "ref_transaction_update",
          "old_text": null,
          "new_text": "ref_transaction_update(transaction, ref, NULL, NULL,\n\t\t\t\t   target, NULL, REF_NO_DEREF,\n\t\t\t\t   logmsg, &err)",
          "old_line_content": "\t\t\t\t   target, NULL, REF_NO_DEREF,",
          "new_line_content": "\t    ref_transaction_update(transaction, ref, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 2642,
          "old_api": null,
          "new_api": "null_oid",
          "old_text": null,
          "new_text": "null_oid()",
          "old_line_content": "\t\t\t\t\t     symref_target.buf, NULL,",
          "new_line_content": "\t\tret = ref_transaction_update(data->transaction, refname, NULL, null_oid(),",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "refs_ref_iterator_begin",
          "old_text": null,
          "new_text": "refs_ref_iterator_begin(refs, prefix, exclude_patterns, trim,\n\t\t\t\t       flags)",
          "old_line_content": "\t\t\t\t       flags);",
          "new_line_content": "\titer = refs_ref_iterator_begin(refs, prefix, exclude_patterns, trim,",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s\", err.buf)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tret = error(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "do_for_each_ref_iterator",
          "old_text": null,
          "new_text": "do_for_each_ref_iterator(iter, fn, cb_data)",
          "old_line_content": "}",
          "new_line_content": "\treturn do_for_each_ref_iterator(iter, fn, cb_data);",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\tif (transaction)",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": null,
          "new_api": "ref_transaction_create",
          "old_text": null,
          "new_text": "ref_transaction_create(data->transaction, refname, oid, NULL,\n\t\t\t\t\t     REF_SKIP_CREATE_REFLOG | REF_SKIP_OID_VERIFICATION,\n\t\t\t\t\t     NULL, data->errbuf)",
          "old_line_content": "\t\t\t\t\t     REF_SKIP_CREATE_REFLOG | REF_SKIP_OID_VERIFICATION,",
          "new_line_content": "\t\tret = ref_transaction_create(data->transaction, refname, oid, NULL,",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "ref_transaction_free",
          "old_text": null,
          "new_text": "ref_transaction_free(transaction)",
          "old_line_content": "",
          "new_line_content": "\t\tref_transaction_free(transaction);",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(refs, \"\", NULL, fn, 0, 0, cb_data)",
          "old_line_content": "}",
          "new_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0, 0, cb_data);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&symref_target)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tstrbuf_release(&symref_target);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(prefix)",
          "old_line_content": "}",
          "new_line_content": "\treturn do_for_each_ref(refs, prefix, NULL, fn, strlen(prefix), 0, cb_data);",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(err)",
          "old_line_content": "",
          "new_line_content": "\tassert(err);",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(refnames->items[i - 1].string,\n\t\t\t\t refnames->items[i].string)",
          "old_line_content": "\t\t\t\t refnames->items[i].string);",
          "new_line_content": "\t\tint cmp = strcmp(refnames->items[i - 1].string,",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(refs, prefix, exclude_patterns, fn, 0, 0, cb_data)",
          "old_line_content": "}",
          "new_line_content": "\treturn do_for_each_ref(refs, prefix, exclude_patterns, fn, 0, 0, cb_data);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"multiple updates for ref '%s' not allowed\")",
          "old_line_content": "\t\t\t\t    refnames->items[i].string);",
          "new_line_content": "\t\t\t\t    _(\"multiple updates for ref '%s' not allowed\"),",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": null,
          "new_api": "opendir",
          "old_text": null,
          "new_text": "opendir(from_path)",
          "old_line_content": "\tif (!from_dir) {",
          "new_line_content": "\tfrom_dir = opendir(from_path);",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\t\t    from_path, strerror(errno));",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"ref_update_reject_duplicates() received unsorted list\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tBUG(\"ref_update_reject_duplicates() received unsorted list\");",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(git_replace_ref_base)",
          "old_line_content": "\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data);",
          "new_line_content": "\t\t\t       strlen(git_replace_ref_base),",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": null,
          "new_api": "strbuf_complete",
          "old_text": null,
          "new_text": "strbuf_complete(&from_buf, '/')",
          "old_line_content": "\tfrom_len = from_buf.len;",
          "new_line_content": "\tstrbuf_complete(&from_buf, '/');",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": null,
          "new_api": "strbuf_complete",
          "old_text": null,
          "new_text": "strbuf_complete(&to_buf, '/')",
          "old_line_content": "\tto_len = to_buf.len;",
          "new_line_content": "\tstrbuf_complete(&to_buf, '/');",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "get_git_namespace",
          "old_text": null,
          "new_text": "get_git_namespace()",
          "old_line_content": "\t\t\t\t\t\t\t   &namespaced_exclude_patterns);",
          "new_line_content": "\t\t\t\t\t\t\t   get_git_namespace(),",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": null,
          "new_api": "find_hook",
          "old_text": null,
          "new_text": "find_hook(transaction->ref_store->repo, \"reference-transaction\")",
          "old_line_content": "\tif (!hook)",
          "new_line_content": "\thook = find_hook(transaction->ref_store->repo, \"reference-transaction\");",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": null,
          "new_api": "readdir",
          "old_text": null,
          "new_text": "readdir(from_dir)",
          "old_line_content": "\t\tif (!ent)",
          "new_line_content": "\t\tent = readdir(from_dir);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(refs, prefix.buf, exclude_patterns, fn, 0, 0, cb_data)",
          "old_line_content": "",
          "new_line_content": "\tret = do_for_each_ref(refs, prefix.buf, exclude_patterns, fn, 0, 0, cb_data);",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "strvec_pushl",
          "old_text": null,
          "new_text": "strvec_pushl(&proc.args, hook, state, NULL)",
          "old_line_content": "\tproc.in = -1;",
          "new_line_content": "\tstrvec_pushl(&proc.args, hook, state, NULL);",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&prefix)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tstrbuf_release(&prefix);",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ent->d_name, \"..\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t    !strcmp(ent->d_name, \"..\"))",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": null,
          "new_api": "start_command",
          "old_text": null,
          "new_text": "start_command(&proc)",
          "old_line_content": "\tif (ret)",
          "new_line_content": "\tret = start_command(&proc);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&from_buf, ent->d_name)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_addstr(&from_buf, ent->d_name);",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(refs, \"\", NULL, fn, 0,\n\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data)",
          "old_line_content": "\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data);",
          "new_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0,",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": null,
          "new_api": "sigchain_push",
          "old_text": null,
          "new_text": "sigchain_push(SIGPIPE, SIG_IGN)",
          "old_line_content": "",
          "new_line_content": "\tsigchain_push(SIGPIPE, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&to_buf, ent->d_name)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_addstr(&to_buf, ent->d_name);",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(from_buf.buf, to_buf.buf)",
          "old_line_content": "\t\tif (ret < 0) {",
          "new_line_content": "\t\tret = rename(from_buf.buf, to_buf.buf);",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&buf)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_reset(&buf);",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\tgoto done;",
          "new_line_content": "\t\t\t\t    from_buf.buf, to_buf.buf, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(refs, \"\", NULL, fn, 0,\n\t\t\t       DO_FOR_EACH_INCLUDE_ROOT_REFS, cb_data)",
          "old_line_content": "\t\t\t       DO_FOR_EACH_INCLUDE_ROOT_REFS, cb_data);",
          "new_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0,",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "null_oid",
          "old_text": null,
          "new_text": "null_oid()",
          "old_line_content": "\t\telse if (update->old_target)",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(null_oid()));",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buf, \"ref:%s \", update->old_target)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"ref:%s \", update->old_target);",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&update->old_oid)",
          "old_line_content": "",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(&update->old_oid));",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\t\t    from_path, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a, b)",
          "old_line_content": "}",
          "new_line_content": "\treturn strcmp(a, b);",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": null,
          "new_api": "null_oid",
          "old_text": null,
          "new_text": "null_oid()",
          "old_line_content": "\t\telse if (update->new_target)",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(null_oid()));",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buf, \"ref:%s \", update->new_target)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"ref:%s \", update->new_target);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&update->new_oid)",
          "old_line_content": "",
          "new_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(&update->new_oid));",
          "content_same": false
        },
        {
          "line": 2207,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buf, \"%s\\n\", update->refname)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_addf(&buf, \"%s\\n\", update->refname);",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&to_buf)",
          "old_line_content": "\tif (from_dir)",
          "new_line_content": "\tstrbuf_release(&to_buf);",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": null,
          "new_api": "write_in_full",
          "old_text": null,
          "new_text": "write_in_full(proc.in, buf.buf, buf.len)",
          "old_line_content": "\t\t\tif (errno != EPIPE) {",
          "new_line_content": "\t\tif (write_in_full(proc.in, buf.buf, buf.len) < 0) {",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "closedir",
          "old_text": null,
          "new_text": "closedir(from_dir)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tclosedir(from_dir);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": null,
          "new_api": "string_list_append",
          "old_text": null,
          "new_text": "string_list_append(out, prefix->buf)",
          "old_line_content": "\t\t\treturn;",
          "new_line_content": "\t\t\tstring_list_append(out, prefix->buf);",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&buf)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&buf);",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": null,
          "new_api": "finish_command",
          "old_text": null,
          "new_text": "finish_command(&proc)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tret |= finish_command(&proc);",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "get_worktrees",
          "old_text": null,
          "new_text": "get_worktrees()",
          "old_line_content": "\tint ret = 0;",
          "new_line_content": "\tstruct worktree **worktrees = get_worktrees();",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": null,
          "new_api": "is_main_worktree",
          "old_text": null,
          "new_text": "is_main_worktree(worktrees[i])",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (is_main_worktree(worktrees[i]))",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(err)",
          "old_line_content": "",
          "new_line_content": "\tassert(err);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "strbuf_setlen",
          "old_text": null,
          "new_text": "strbuf_setlen(prefix, prefix->len - 1)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_setlen(prefix, prefix->len - 1);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "free_worktrees",
          "old_text": null,
          "new_text": "free_worktrees(worktrees)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tfree_worktrees(worktrees);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refusing to force and skip creation of reflog\")",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\t\tstrbuf_addstr(err, _(\"refusing to force and skip creation of reflog\"));",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"prepare called twice on reference transaction\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"prepare called twice on reference transaction\");",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"prepare called on a closed reference transaction\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"prepare called on a closed reference transaction\");",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refusing to update ref with bad name '%s'\")",
          "old_line_content": "\t\t\t    refname);",
          "new_line_content": "\t\tstrbuf_addf(err, _(\"refusing to update ref with bad name '%s'\"),",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"unexpected reference transaction state\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "QSORT",
          "old_text": null,
          "new_text": "QSORT(sorted.v, sorted.nr, qsort_strcmp)",
          "old_line_content": "",
          "new_line_content": "\tQSORT(sorted.v, sorted.nr, qsort_strcmp);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "find_longest_prefixes_1",
          "old_text": null,
          "new_text": "find_longest_prefixes_1(out, &prefix, sorted.v, sorted.nr)",
          "old_line_content": "",
          "new_line_content": "\tfind_longest_prefixes_1(out, &prefix, sorted.v, sorted.nr);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refusing to update pseudoref '%s'\")",
          "old_line_content": "\t\t\t    refname);",
          "new_line_content": "\t\tstrbuf_addf(err, _(\"refusing to update pseudoref '%s'\"),",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"ref updates forbidden inside quarantine environment\")",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\t\t\t      _(\"ref updates forbidden inside quarantine environment\"));",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(errbuf, \"current and new ref storage format are equal\")",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\tstrbuf_addstr(errbuf, \"current and new ref storage format are equal\");",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&prefix)",
          "old_line_content": "}",
          "new_line_content": "\tstrbuf_release(&prefix);",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": null,
          "new_api": "transaction_prepare",
          "old_text": null,
          "new_text": "refs->be->transaction_prepare(refs, transaction, err)",
          "old_line_content": "\tif (ret)",
          "new_line_content": "\tret = refs->be->transaction_prepare(refs, transaction, err);",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"illegal flags 0x%x passed to ref_transaction_update()\", flags)",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"illegal flags 0x%x passed to ref_transaction_update()\", flags);",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": null,
          "new_api": "get_main_ref_store",
          "old_text": null,
          "new_text": "get_main_ref_store(repo)",
          "old_line_content": "",
          "new_line_content": "\told_refs = get_main_ref_store(repo);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "run_transaction_hook",
          "old_text": null,
          "new_text": "run_transaction_hook(transaction, \"prepared\")",
          "old_line_content": "\tif (ret) {",
          "new_line_content": "\tret = run_transaction_hook(transaction, \"prepared\");",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"ref updates aborted by hook\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdie(_(\"ref updates aborted by hook\"));",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(errbuf, \"cannot count reflogs\")",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\tstrbuf_addstr(errbuf, \"cannot count reflogs\");",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "find_longest_prefixes",
          "old_text": null,
          "new_text": "find_longest_prefixes(&prefixes, patterns)",
          "old_line_content": "",
          "new_line_content": "\tfind_longest_prefixes(&prefixes, patterns);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "ref_transaction_add_update",
          "old_text": null,
          "new_text": "ref_transaction_add_update(transaction, refname, flags,\n\t\t\t\t   new_oid, old_oid, new_target,\n\t\t\t\t   old_target, msg)",
          "old_line_content": "\t\t\t\t   new_oid, old_oid, new_target,",
          "new_line_content": "\tref_transaction_add_update(transaction, refname, flags,",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(errbuf, \"migrating reflogs is not supported yet\")",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\tstrbuf_addstr(errbuf, \"migrating reflogs is not supported yet\");",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&buf, namespace)",
          "old_line_content": "\tnamespace_len = buf.len;",
          "new_line_content": "\t\tstrbuf_addstr(&buf, namespace);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": null,
          "new_api": "get_namespaced_exclude_patterns",
          "old_text": null,
          "new_text": "get_namespaced_exclude_patterns(exclude_patterns,\n\t\t\t\t\t\t\t   namespace,\n\t\t\t\t\t\t\t   &namespaced_exclude_patterns)",
          "old_line_content": "\t\t\t\t\t\t\t   namespace,",
          "new_line_content": "\texclude_patterns = get_namespaced_exclude_patterns(exclude_patterns,",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "refs_for_each_fullref_in",
          "old_text": null,
          "new_text": "refs_for_each_fullref_in(ref_store, buf.buf,\n\t\t\t\t\t       exclude_patterns, fn, cb_data)",
          "old_line_content": "\t\t\t\t\t       exclude_patterns, fn, cb_data);",
          "new_line_content": "\t\tret = refs_for_each_fullref_in(ref_store, buf.buf,",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": null,
          "new_api": "transaction_abort",
          "old_text": null,
          "new_text": "refs->be->transaction_abort(refs, transaction, err)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tret = refs->be->transaction_abort(refs, transaction, err);",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"abort called on a closed reference transaction\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"abort called on a closed reference transaction\");",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "strbuf_setlen",
          "old_text": null,
          "new_text": "strbuf_setlen(&buf, namespace_len)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrbuf_setlen(&buf, namespace_len);",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(errbuf, \"migrating repositories with worktrees is not supported yet\")",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\tstrbuf_addstr(errbuf, \"migrating repositories with worktrees is not supported yet\");",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"unexpected reference transaction state\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err, \"'%s' has neither a valid OID nor a target\", refname)",
          "old_line_content": "\t\treturn 1;",
          "new_line_content": "\t\tstrbuf_addf(err, \"'%s' has neither a valid OID nor a target\", refname);",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&buf)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tstrbuf_release(&buf);",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "null_oid",
          "old_text": null,
          "new_text": "null_oid()",
          "old_line_content": "\t\t\t\t      msg, err);",
          "new_line_content": "\t\t\t\t      null_oid(), new_target, NULL, flags,",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": null,
          "new_api": "run_transaction_hook",
          "old_text": null,
          "new_text": "run_transaction_hook(transaction, \"aborted\")",
          "old_line_content": "",
          "new_line_content": "\trun_transaction_hook(transaction, \"aborted\");",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "ref_transaction_free",
          "old_text": null,
          "new_text": "ref_transaction_free(transaction)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tref_transaction_free(transaction);",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&full_path, \"%s/%s\", ref_store->gitdir, refname)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addf(&full_path, \"%s/%s\", ref_store->gitdir, refname);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"delete called with old_oid set to zeros\")",
          "old_line_content": "\tif (old_oid && old_target)",
          "new_line_content": "\t\tBUG(\"delete called with old_oid set to zeros\");",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "strbuf_read_file",
          "old_text": null,
          "new_text": "strbuf_read_file(&content, full_path.buf, 0)",
          "old_line_content": "\t\t*failure_errno = errno;",
          "new_line_content": "\tif (strbuf_read_file(&content, full_path.buf, 0) < 0) {",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"delete called with both old_oid and old_target set\")",
          "old_line_content": "\tif (old_target && !(flags & REF_NO_DEREF))",
          "new_line_content": "\t\tBUG(\"delete called with both old_oid and old_target set\");",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "ref_transaction_prepare",
          "old_text": null,
          "new_text": "ref_transaction_prepare(transaction, err)",
          "old_line_content": "\t\tif (ret)",
          "new_line_content": "\t\tret = ref_transaction_prepare(transaction, err);",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": null,
          "new_api": "parse_loose_ref_contents",
          "old_text": null,
          "new_text": "parse_loose_ref_contents(ref_store->repo->hash_algo, content.buf,\n\t\t\t\t\t  oid, referent, type, failure_errno)",
          "old_line_content": "\t\t\t\t\t  oid, referent, type, failure_errno);",
          "new_line_content": "\tresult = parse_loose_ref_contents(ref_store->repo->hash_algo, content.buf,",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "null_oid",
          "old_text": null,
          "new_text": "null_oid()",
          "old_line_content": "\t\t\t\t      NULL, old_target, flags,",
          "new_line_content": "\t\t\t\t      null_oid(), old_oid,",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&content)",
          "old_line_content": "\treturn result;",
          "new_line_content": "\tstrbuf_release(&content);",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"commit called on a closed reference transaction\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"commit called on a closed reference transaction\");",
          "content_same": false
        },
        {
          "line": 2825,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tret = -1;",
          "new_line_content": "\t\t\t    strerror(errno));",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"unexpected reference transaction state\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": null,
          "new_api": "transaction_finish",
          "old_text": null,
          "new_text": "refs->be->transaction_finish(refs, transaction, err)",
          "old_line_content": "\tif (!ret && !(transaction->flags & REF_TRANSACTION_FLAG_INITIAL))",
          "new_line_content": "\tret = refs->be->transaction_finish(refs, transaction, err);",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "ref_store_init",
          "old_text": null,
          "new_text": "ref_store_init(repo, format, new_gitdir.buf,\n\t\t\t\t  REF_STORE_ALL_CAPS)",
          "old_line_content": "\t\t\t\t  REF_STORE_ALL_CAPS);",
          "new_line_content": "\tnew_refs = ref_store_init(repo, format, new_gitdir.buf,",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": null,
          "new_api": "run_transaction_hook",
          "old_text": null,
          "new_text": "run_transaction_hook(transaction, \"committed\")",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\trun_transaction_hook(transaction, \"committed\");",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": null,
          "new_api": "ref_store_create_on_disk",
          "old_text": null,
          "new_text": "ref_store_create_on_disk(new_refs, 0, errbuf)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = ref_store_create_on_disk(new_refs, 0, errbuf);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"verify called with old_oid and old_target set to NULL\")",
          "old_line_content": "\tif (old_oid && old_target)",
          "new_line_content": "\t\tBUG(\"verify called with old_oid and old_target set to NULL\");",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"verify called with both old_oid and old_target set\")",
          "old_line_content": "\tif (old_target && !(flags & REF_NO_DEREF))",
          "new_line_content": "\t\tBUG(\"verify called with both old_oid and old_target set\");",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": null,
          "new_api": "ref_store_transaction_begin",
          "old_text": null,
          "new_text": "ref_store_transaction_begin(new_refs, REF_TRANSACTION_FLAG_INITIAL,\n\t\t\t\t\t\t  errbuf)",
          "old_line_content": "\t\t\t\t\t\t  errbuf);",
          "new_line_content": "\ttransaction = ref_store_transaction_begin(new_refs, REF_TRANSACTION_FLAG_INITIAL,",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "ref_transaction_update",
          "old_text": null,
          "new_text": "ref_transaction_update(transaction, refname,\n\t\t\t\t      NULL, old_oid,\n\t\t\t\t      NULL, old_target,\n\t\t\t\t      flags, NULL, err)",
          "old_line_content": "\t\t\t\t      NULL, old_oid,",
          "new_line_content": "\treturn ref_transaction_update(transaction, refname,",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "refs_read_special_head",
          "old_text": null,
          "new_text": "refs_read_special_head(ref_store, refname, oid, referent,\n\t\t\t\t\t      type, failure_errno)",
          "old_line_content": "\t\t\t\t\t      type, failure_errno);",
          "new_line_content": "\t\treturn refs_read_special_head(ref_store, refname, oid, referent,",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "read_raw_ref",
          "old_text": null,
          "new_text": "ref_store->be->read_raw_ref(ref_store, refname, oid, referent,\n\t\t\t\t\t   type, failure_errno)",
          "old_line_content": "\t\t\t\t\t   type, failure_errno);",
          "new_line_content": "\treturn ref_store->be->read_raw_ref(ref_store, refname, oid, referent,",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": null,
          "new_api": "read_symbolic_ref",
          "old_text": null,
          "new_text": "ref_store->be->read_symbolic_ref(ref_store, refname, referent)",
          "old_line_content": "}",
          "new_line_content": "\treturn ref_store->be->read_symbolic_ref(ref_store, refname, referent);",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": null,
          "new_api": "ref_store_transaction_begin",
          "old_text": null,
          "new_text": "ref_store_transaction_begin(refs, 0, &err)",
          "old_line_content": "\tif (!t ||",
          "new_line_content": "\tt = ref_store_transaction_begin(refs, 0, &err);",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "ref_transaction_update",
          "old_text": null,
          "new_text": "ref_transaction_update(t, refname, new_oid, old_oid, NULL, NULL,\n\t\t\t\t   flags, msg, &err)",
          "old_line_content": "\t\t\t\t   flags, msg, &err) ||",
          "new_line_content": "\t    ref_transaction_update(t, refname, new_oid, old_oid, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "ref_transaction_commit",
          "old_text": null,
          "new_text": "ref_transaction_commit(t, &err)",
          "old_line_content": "\t\tret = 1;",
          "new_line_content": "\t    ref_transaction_commit(t, &err)) {",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(err)",
          "old_line_content": "",
          "new_line_content": "\tassert(err);",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": null,
          "new_api": "do_for_each_ref",
          "old_text": null,
          "new_text": "do_for_each_ref(old_refs, \"\", NULL, migrate_one_ref, 0,\n\t\t\t      DO_FOR_EACH_INCLUDE_ROOT_REFS | DO_FOR_EACH_INCLUDE_BROKEN,\n\t\t\t      &data)",
          "old_line_content": "\t\t\t      DO_FOR_EACH_INCLUDE_ROOT_REFS | DO_FOR_EACH_INCLUDE_BROKEN,",
          "new_line_content": "\tret = do_for_each_ref(old_refs, \"\", NULL, migrate_one_ref, 0,",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "ref_transaction_free",
          "old_text": null,
          "new_text": "ref_transaction_free(t)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tref_transaction_free(t);",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(slash + 1, '/')",
          "old_line_content": "\t\t/*",
          "new_line_content": "\tfor (slash = strchr(refname, '/'); slash; slash = strchr(slash + 1, '/')) {",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"update_ref failed for ref '%s': %s\")",
          "old_line_content": "",
          "new_line_content": "\t\tconst char *str = _(\"update_ref failed for ref '%s': %s\");",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "ref_transaction_commit",
          "old_text": null,
          "new_text": "ref_transaction_commit(transaction, errbuf)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = ref_transaction_commit(transaction, errbuf);",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": null,
          "new_api": "check_refname_format",
          "old_text": null,
          "new_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "old_line_content": "\t\tif (!(resolve_flags & RESOLVE_REF_ALLOW_BAD_NAME) ||",
          "new_line_content": "\tif (check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)) {",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(str, refname, err.buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\terror(str, refname, err.buf);",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": null,
          "new_api": "refname_is_safe",
          "old_text": null,
          "new_text": "refname_is_safe(refname)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\t    !refname_is_safe(refname))",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(str, refname, err.buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tdie(str, refname, err.buf);",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(&dirname, refname + dirname.len, slash - refname - dirname.len)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_add(&dirname, refname + dirname.len, slash - refname - dirname.len);",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Finished dry-run migration of refs, \"\n\t\t\t \"the result can be found at '%s'\\n\")",
          "old_line_content": "\t\t\t \"the result can be found at '%s'\\n\"), new_gitdir.buf);",
          "new_line_content": "\t\tprintf(_(\"Finished dry-run migration of refs, \"",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\t\treturn 1;",
          "new_line_content": "\t\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "string_list_has_string",
          "old_text": null,
          "new_text": "string_list_has_string(skip, dirname.buf)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (skip && string_list_has_string(skip, dirname.buf))",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\tif (t)",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "ref_transaction_free",
          "old_text": null,
          "new_text": "ref_transaction_free(t)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tref_transaction_free(t);",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": null,
          "new_api": "refs_read_raw_ref",
          "old_text": null,
          "new_text": "refs_read_raw_ref(refs, dirname.buf, &oid, &referent,\n\t\t\t\t       &type, &ignore_errno)",
          "old_line_content": "\t\t\t\t       &type, &ignore_errno)) {",
          "new_line_content": "\t\t    !refs_read_raw_ref(refs, dirname.buf, &oid, &referent,",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(new_refs)",
          "old_line_content": "",
          "new_line_content": "\tFREE_AND_NULL(new_refs);",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"'%s' exists; cannot create '%s'\")",
          "old_line_content": "\t\t\t\t    dirname.buf, refname);",
          "new_line_content": "\t\t\tstrbuf_addf(err, _(\"'%s' exists; cannot create '%s'\"),",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": null,
          "new_api": "refs_read_raw_ref",
          "old_text": null,
          "new_text": "refs_read_raw_ref(refs, refname, oid, &sb_refname,\n\t\t\t\t      &read_flags, &failure_errno)",
          "old_line_content": "\t\t\t\t      &read_flags, &failure_errno)) {",
          "new_line_content": "\t\tif (refs_read_raw_ref(refs, refname, oid, &sb_refname,",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot process '%s' and '%s' at the same time\")",
          "old_line_content": "\t\t\t\t    refname, dirname.buf);",
          "new_line_content": "\t\t\tstrbuf_addf(err, _(\"cannot process '%s' and '%s' at the same time\"),",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "ref_store_remove_on_disk",
          "old_text": null,
          "new_text": "ref_store_remove_on_disk(old_refs, errbuf)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = ref_store_remove_on_disk(old_refs, errbuf);",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"rev-parse rule did not have percent\")",
          "old_line_content": "\t\tif (*refname++ != *rule++)",
          "new_line_content": "\t\t\tBUG(\"rev-parse rule did not have percent\");",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": null,
          "new_api": "move_files",
          "old_text": null,
          "new_text": "move_files(new_gitdir.buf, old_refs->gitdir, errbuf)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = move_files(new_gitdir.buf, old_refs->gitdir, errbuf);",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(oid, refs->repo->hash_algo)",
          "old_line_content": "\t\t\tif (*flags & REF_BAD_NAME)",
          "new_line_content": "\t\t\toidclr(oid, refs->repo->hash_algo);",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "strbuf_addch",
          "old_text": null,
          "new_text": "strbuf_addch(&dirname, '/')",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addch(&dirname, '/');",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not remove temporary migration directory '%s'\")",
          "old_line_content": "\t\t\t      new_gitdir.buf);",
          "new_line_content": "\t\twarning_errno(_(\"could not remove temporary migration directory '%s'\"),",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "skip_prefix",
          "old_text": null,
          "new_text": "skip_prefix(rule, \"%.*s\", &rule)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (!skip_prefix(rule, \"%.*s\", &rule))",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": null,
          "new_api": "refs_ref_iterator_begin",
          "old_text": null,
          "new_text": "refs_ref_iterator_begin(refs, dirname.buf, NULL, 0,\n\t\t\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN)",
          "old_line_content": "\t\t\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN);",
          "new_line_content": "\t\titer = refs_ref_iterator_begin(refs, dirname.buf, NULL, 0,",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": null,
          "new_api": "ref_iterator_advance",
          "old_text": null,
          "new_text": "ref_iterator_advance(iter)",
          "old_line_content": "\t\t\tif (skip &&",
          "new_line_content": "\t\twhile ((ok = ref_iterator_advance(iter)) == ITER_OK) {",
          "content_same": false
        },
        {
          "line": 2911,
          "old_api": null,
          "new_api": "hash_algo_by_ptr",
          "old_text": null,
          "new_text": "hash_algo_by_ptr(repo->hash_algo)",
          "old_line_content": "",
          "new_line_content": "\tinitialize_repository_version(hash_algo_by_ptr(repo->hash_algo), format, 1);",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": null,
          "new_api": "string_list_has_string",
          "old_text": null,
          "new_text": "string_list_has_string(skip, iter->refname)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t    string_list_has_string(skip, iter->refname))",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": null,
          "new_api": "strip_suffix",
          "old_text": null,
          "new_text": "strip_suffix(refname, rule, len)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (!strip_suffix(refname, rule, len))",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(oid, refs->repo->hash_algo)",
          "old_line_content": "\t\t\t\t*flags |= REF_ISBROKEN;",
          "new_line_content": "\t\t\t\toidclr(oid, refs->repo->hash_algo);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"'%s' exists; cannot create '%s'\")",
          "old_line_content": "\t\t\t\t    iter->refname, refname);",
          "new_line_content": "\t\t\tstrbuf_addf(err, _(\"'%s' exists; cannot create '%s'\"),",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": null,
          "new_api": "ref_iterator_abort",
          "old_text": null,
          "new_text": "ref_iterator_abort(iter)",
          "old_line_content": "\t\t\tgoto cleanup;",
          "new_line_content": "\t\t\tref_iterator_abort(iter);",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(old_refs)",
          "old_line_content": "\trepo->refs_private = NULL;",
          "new_line_content": "\tFREE_AND_NULL(old_refs);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(oid, refs->repo->hash_algo)",
          "old_line_content": "\t\t\treturn refname;",
          "new_line_content": "\t\t\toidclr(oid, refs->repo->hash_algo);",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"error while iterating over references\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tBUG(\"error while iterating over references\");",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": null,
          "new_api": "check_refname_format",
          "old_text": null,
          "new_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "old_line_content": "\t\t\tif (!(resolve_flags & RESOLVE_REF_ALLOW_BAD_NAME) ||",
          "new_line_content": "\t\tif (check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)) {",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": null,
          "new_api": "refname_is_safe",
          "old_text": null,
          "new_text": "refname_is_safe(refname)",
          "old_line_content": "\t\t\t\treturn NULL;",
          "new_line_content": "\t\t\t    !refname_is_safe(refname))",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": null,
          "new_api": "find_descendant_ref",
          "old_text": null,
          "new_text": "find_descendant_ref(dirname.buf, extras, skip)",
          "old_line_content": "\tif (extra_refname)",
          "new_line_content": "\textra_refname = find_descendant_ref(dirname.buf, extras, skip);",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot process '%s' and '%s' at the same time\")",
          "old_line_content": "\t\t\t    refname, extra_refname);",
          "new_line_content": "\t\tstrbuf_addf(err, _(\"cannot process '%s' and '%s' at the same time\"),",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"migrated refs can be found at '%s'\")",
          "old_line_content": "\t\t\t    new_gitdir.buf);",
          "new_line_content": "\t\tstrbuf_addf(errbuf, _(\"migrated refs can be found at '%s'\"),",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "match_parse_rule",
          "old_text": null,
          "new_text": "match_parse_rule(refname, ref_rev_parse_rules[i],\n\t\t\t\t\t      &short_name_len)",
          "old_line_content": "\t\t\t\t\t      &short_name_len);",
          "new_line_content": "\t\tshort_name = match_parse_rule(refname, ref_rev_parse_rules[i],",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(new_refs)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree(new_refs);",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&dirname)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tstrbuf_release(&dirname);",
          "content_same": false
        },
        {
          "line": 2936,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&new_gitdir)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tstrbuf_release(&new_gitdir);",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "create_on_disk",
          "old_text": null,
          "new_text": "refs->be->create_on_disk(refs, flags, err)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->create_on_disk(refs, flags, err);",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "remove_on_disk",
          "old_text": null,
          "new_text": "refs->be->remove_on_disk(refs, err)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->remove_on_disk(refs, err);",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&update->old_oid)",
          "old_line_content": "}",
          "new_line_content": "\t\t(!is_null_oid(&update->old_oid) || update->old_target);",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "fn",
          "old_text": null,
          "new_text": "hp->fn(refname, hp->cb_data)",
          "old_line_content": "}",
          "new_line_content": "\treturn hp->fn(refname, hp->cb_data);",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "repo_get_submodule_ref_store",
          "old_text": null,
          "new_text": "repo_get_submodule_ref_store(r, submodule)",
          "old_line_content": "\tif (!refs)",
          "new_line_content": "\trefs = repo_get_submodule_ref_store(r, submodule);",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(oid)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\t    is_null_oid(oid))",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": null,
          "new_api": "reflog_iterator_begin",
          "old_text": null,
          "new_text": "refs->be->reflog_iterator_begin(refs)",
          "old_line_content": "",
          "new_line_content": "\titer = refs->be->reflog_iterator_begin(refs);",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": null,
          "new_api": "do_for_each_ref_iterator",
          "old_text": null,
          "new_text": "do_for_each_ref_iterator(iter, do_for_each_reflog_helper, &hp)",
          "old_line_content": "}",
          "new_line_content": "\treturn do_for_each_ref_iterator(iter, do_for_each_reflog_helper, &hp);",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "cast_size_t_to_int",
          "old_text": null,
          "new_text": "cast_size_t_to_int(short_name_len)",
          "old_line_content": "\t\t\t\t    short_name);",
          "new_line_content": "\t\t\t\t    cast_size_t_to_int(short_name_len),",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "refs_ref_exists",
          "old_text": null,
          "new_text": "refs_ref_exists(refs, resolved_buf.buf)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\tif (refs_ref_exists(refs, resolved_buf.buf))",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": null,
          "new_api": "for_each_reflog_ent_reverse",
          "old_text": null,
          "new_text": "refs->be->for_each_reflog_ent_reverse(refs, refname,\n\t\t\t\t\t\t     fn, cb_data)",
          "old_line_content": "\t\t\t\t\t\t     fn, cb_data);",
          "new_line_content": "\treturn refs->be->for_each_reflog_ent_reverse(refs, refname,",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(short_name, short_name_len)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn xmemdupz(short_name, short_name_len);",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": null,
          "new_api": "for_each_reflog_ent",
          "old_text": null,
          "new_text": "refs->be->for_each_reflog_ent(refs, refname, fn, cb_data)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->for_each_reflog_ent(refs, refname, fn, cb_data);",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "strmap_get_entry",
          "old_text": null,
          "new_text": "strmap_get_entry(map, name)",
          "old_line_content": "\treturn entry ? entry->value : NULL;",
          "new_line_content": "\tentry = strmap_get_entry(map, name);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(refname)",
          "old_line_content": "}",
          "new_line_content": "\treturn xstrdup(refname);",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": null,
          "new_api": "reflog_exists",
          "old_text": null,
          "new_text": "refs->be->reflog_exists(refs, refname)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->reflog_exists(refs, refname);",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": null,
          "new_api": "create_reflog",
          "old_text": null,
          "new_text": "refs->be->create_reflog(refs, refname, err)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->create_reflog(refs, refname, err);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key, \"hiderefs\")",
          "old_line_content": "\t\tchar *ref;",
          "new_line_content": "\t     !strcmp(key, \"hiderefs\"))) {",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "delete_reflog",
          "old_text": null,
          "new_text": "refs->be->delete_reflog(refs, refname)",
          "old_line_content": "}",
          "new_line_content": "\treturn refs->be->delete_reflog(refs, refname);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "find_ref_storage_backend",
          "old_text": null,
          "new_text": "find_ref_storage_backend(format)",
          "old_line_content": "\tif (!be)",
          "new_line_content": "\tbe = find_ref_storage_backend(format);",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "config_error_nonbool",
          "old_text": null,
          "new_text": "config_error_nonbool(var)",
          "old_line_content": "",
          "new_line_content": "\t\t\treturn config_error_nonbool(var);",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"reference backend is unknown\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"reference backend is unknown\");",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": null,
          "new_api": "init",
          "old_text": null,
          "new_text": "be->init(repo, gitdir, flags)",
          "old_line_content": "\treturn refs;",
          "new_line_content": "\trefs = be->init(repo, gitdir, flags);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref)",
          "old_line_content": "\t\twhile (len && ref[len - 1] == '/')",
          "new_line_content": "\t\tlen = strlen(ref);",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": null,
          "new_api": "reflog_expire",
          "old_text": null,
          "new_text": "refs->be->reflog_expire(refs, refname, flags,\n\t\t\t\t       prepare_fn, should_prune_fn,\n\t\t\t\t       cleanup_fn, policy_cb_data)",
          "old_line_content": "\t\t\t\t       prepare_fn, should_prune_fn,",
          "new_line_content": "\treturn refs->be->reflog_expire(refs, refname, flags,",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ref_store->gitdir)",
          "old_line_content": "}",
          "new_line_content": "\tfree(ref_store->gitdir);",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"attempting to get main_ref_store outside of repository\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"attempting to get main_ref_store outside of repository\");",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "ref_store_init",
          "old_text": null,
          "new_text": "ref_store_init(r, r->ref_storage_format,\n\t\t\t\t\t r->gitdir, REF_STORE_ALL_CAPS)",
          "old_line_content": "\t\t\t\t\t r->gitdir, REF_STORE_ALL_CAPS);",
          "new_line_content": "\tr->refs_private = ref_store_init(r, r->ref_storage_format,",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "maybe_debug_wrap_ref_store",
          "old_text": null,
          "new_text": "maybe_debug_wrap_ref_store(r->gitdir, r->refs_private)",
          "old_line_content": "\treturn r->refs_private;",
          "new_line_content": "\tr->refs_private = maybe_debug_wrap_ref_store(r->gitdir, r->refs_private);",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "cb",
          "old_text": null,
          "new_text": "cb(update->refname,\n\t\t   (update->flags & REF_HAVE_OLD) ? &update->old_oid : NULL,\n\t\t   (update->flags & REF_HAVE_NEW) ? &update->new_oid : NULL,\n\t\t   cb_data)",
          "old_line_content": "\t\t   (update->flags & REF_HAVE_OLD) ? &update->old_oid : NULL,",
          "new_line_content": "\t\tcb(update->refname,",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": null,
          "new_api": "skip_prefix",
          "old_text": null,
          "new_text": "skip_prefix(subject, match, &p)",
          "old_line_content": "\t\t    (!*p || *p == '/'))",
          "new_line_content": "\t\t    skip_prefix(subject, match, &p) &&",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"%s ref_store '%s' initialized twice\", type, name)",
          "old_line_content": "}",
          "new_line_content": "\t\tBUG(\"%s ref_store '%s' initialized twice\", type, name);",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "normalize_reflog_message",
          "old_text": null,
          "new_text": "normalize_reflog_message(logmsg)",
          "old_line_content": "",
          "new_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": null,
          "new_api": "ref_store_transaction_begin",
          "old_text": null,
          "new_text": "ref_store_transaction_begin(refs, 0, &err)",
          "old_line_content": "\tif (!transaction) {",
          "new_line_content": "\ttransaction = ref_store_transaction_begin(refs, 0, &err);",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s\", err.buf)",
          "old_line_content": "\t\tgoto out;",
          "new_line_content": "\t\tret = error(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": null,
          "new_api": "is_dir_sep",
          "old_text": null,
          "new_text": "is_dir_sep(submodule[len - 1])",
          "old_line_content": "\t\tlen--;",
          "new_line_content": "\twhile (len && is_dir_sep(submodule[len - 1]))",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": null,
          "new_api": "ref_transaction_delete",
          "old_text": null,
          "new_text": "ref_transaction_delete(transaction, item->string,\n\t\t\t\t\t     NULL, NULL, flags, msg, &err)",
          "old_line_content": "\t\t\t\t\t     NULL, NULL, flags, msg, &err);",
          "new_line_content": "\t\tret = ref_transaction_delete(transaction, item->string,",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not delete reference %s: %s\")",
          "old_line_content": "\t\t\t\titem->string, err.buf);",
          "new_line_content": "\t\t\twarning(_(\"could not delete reference %s: %s\"),",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&err)",
          "old_line_content": "\t\t\tfailures = 1;",
          "new_line_content": "\t\t\tstrbuf_reset(&err);",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(submodule, len)",
          "old_line_content": "",
          "new_line_content": "\t\tsubmodule = to_free = xmemdupz(submodule, len);",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": null,
          "new_api": "lookup_ref_store_map",
          "old_text": null,
          "new_text": "lookup_ref_store_map(&repo->submodule_ref_stores, submodule)",
          "old_line_content": "\tif (refs)",
          "new_line_content": "\trefs = lookup_ref_store_map(&repo->submodule_ref_stores, submodule);",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "ref_transaction_commit",
          "old_text": null,
          "new_text": "ref_transaction_commit(transaction, &err)",
          "old_line_content": "\tif (ret) {",
          "new_line_content": "\tret = ref_transaction_commit(transaction, &err);",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": null,
          "new_api": "is_nonbare_repository_dir",
          "old_text": null,
          "new_text": "is_nonbare_repository_dir(&submodule_sb)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\tif (!is_nonbare_repository_dir(&submodule_sb))",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not delete reference %s: %s\")",
          "old_line_content": "\t\t\t      refnames->items[0].string, err.buf);",
          "new_line_content": "\t\t\terror(_(\"could not delete reference %s: %s\"),",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "submodule_to_gitdir",
          "old_text": null,
          "new_text": "submodule_to_gitdir(&submodule_sb, submodule)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\tif (submodule_to_gitdir(&submodule_sb, submodule))",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"could not delete references: %s\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\terror(_(\"could not delete references: %s\"), err.buf);",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*subrepo))",
          "old_line_content": "",
          "new_line_content": "\tsubrepo = xmalloc(sizeof(*subrepo));",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": null,
          "new_api": "strvec_pushf",
          "old_text": null,
          "new_text": "strvec_pushf(out, \"%s%s\", namespace, exclude_patterns[i])",
          "old_line_content": "",
          "new_line_content": "\t\tstrvec_pushf(out, \"%s%s\", namespace, exclude_patterns[i]);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(subrepo)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\t\tfree(subrepo);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2049,
          "old_api": "ref_store_init",
          "new_api": null,
          "old_text": "ref_store_init(subrepo, subrepo->ref_storage_format,\n\t\t\t      submodule_sb.buf,\n\t\t\t      REF_STORE_READ | REF_STORE_ODB)",
          "new_text": null,
          "old_line_content": "\trefs = ref_store_init(subrepo, subrepo->ref_storage_format,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "register_ref_store_map",
          "new_api": null,
          "old_text": "register_ref_store_map(&repo->submodule_ref_stores, \"submodule\",\n\t\t\t       refs, submodule)",
          "new_text": null,
          "old_line_content": "\tregister_ref_store_map(&repo->submodule_ref_stores, \"submodule\",",
          "new_line_content": "\t\t\t      REF_STORE_READ | REF_STORE_ODB);",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&submodule_sb)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&submodule_sb);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 2570,
          "old_api": "normalize_reflog_message",
          "new_api": null,
          "old_text": "normalize_reflog_message(logmsg)",
          "new_text": null,
          "old_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "string_list_find_insert_index",
          "new_api": null,
          "old_text": "string_list_find_insert_index(extras, dirname, 0)",
          "new_text": null,
          "old_line_content": "\tfor (pos = string_list_find_insert_index(extras, dirname, 0);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(extra_refname, dirname)",
          "new_text": null,
          "old_line_content": "\t\tif (!starts_with(extra_refname, dirname))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "get_main_ref_store",
          "new_api": null,
          "old_text": "get_main_ref_store(wt->repo)",
          "new_text": null,
          "old_line_content": "\t\treturn get_main_ref_store(wt->repo);",
          "new_line_content": "\tif (wt->is_current)",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "normalize_reflog_message",
          "new_api": null,
          "old_text": "normalize_reflog_message(logmsg)",
          "new_text": null,
          "old_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "lookup_ref_store_map",
          "new_api": null,
          "old_text": "lookup_ref_store_map(&wt->repo->worktree_ref_stores, id)",
          "new_text": null,
          "old_line_content": "\trefs = lookup_ref_store_map(&wt->repo->worktree_ref_stores, id);",
          "new_line_content": "\tid = wt->id ? wt->id : \"/\";",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(skip, extra_refname)",
          "new_text": null,
          "old_line_content": "\t\tif (!skip || !string_list_has_string(skip, extra_refname))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "strbuf_git_common_path",
          "new_api": null,
          "old_text": "strbuf_git_common_path(&common_path, wt->repo,\n\t\t\t\t      \"worktrees/%s\", wt->id)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_git_common_path(&common_path, wt->repo,",
          "new_line_content": "\t\tstruct strbuf common_path = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "ref_store_init",
          "new_api": null,
          "old_text": "ref_store_init(wt->repo, wt->repo->ref_storage_format,\n\t\t\t\t      common_path.buf, REF_STORE_ALL_CAPS)",
          "new_text": null,
          "old_line_content": "\t\trefs = ref_store_init(wt->repo, wt->repo->ref_storage_format,",
          "new_line_content": "\t\t\t\t      \"worktrees/%s\", wt->id);",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&common_path)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&common_path);",
          "new_line_content": "\t\t\t\t      common_path.buf, REF_STORE_ALL_CAPS);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": null,
          "old_text": "refs_resolve_ref_unsafe(refs, \"HEAD\", RESOLVE_REF_READING,\n\t\t\t\t    &oid, &flag)",
          "new_text": null,
          "old_line_content": "\tif (refs_resolve_ref_unsafe(refs, \"HEAD\", RESOLVE_REF_READING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "ref_store_init",
          "new_api": null,
          "old_text": "ref_store_init(wt->repo, wt->repo->ref_storage_format,\n\t\t\t\t      wt->repo->commondir, REF_STORE_ALL_CAPS)",
          "new_text": null,
          "old_line_content": "\t\trefs = ref_store_init(wt->repo, wt->repo->ref_storage_format,",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "fn",
          "new_api": null,
          "old_text": "fn(\"HEAD\", NULL, &oid, flag, cb_data)",
          "new_text": null,
          "old_line_content": "\t\treturn fn(\"HEAD\", NULL, &oid, flag, cb_data);",
          "new_line_content": "\t\t\t\t    &oid, &flag))",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&update->new_oid)",
          "new_text": null,
          "old_line_content": "\treturn !update->new_target && is_null_oid(&update->new_oid);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "register_ref_store_map",
          "new_api": null,
          "old_text": "register_ref_store_map(&wt->repo->worktree_ref_stores,\n\t\t\t\t       \"worktree\", refs, id)",
          "new_text": null,
          "old_line_content": "\t\tregister_ref_store_map(&wt->repo->worktree_ref_stores,",
          "new_line_content": "\tif (refs)",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"called without old_target set\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"called without old_target set\");",
          "new_line_content": "\tif (!update->old_target)",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(referent, update->old_target)",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(referent, update->old_target))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(referent, \"\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(referent, \"\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(path)",
          "new_text": null,
          "old_line_content": "\trefs->gitdir = xstrdup(path);",
          "new_line_content": "\trefs->repo = repo;",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": "ref_update_original_update_refname",
          "new_api": null,
          "old_text": "ref_update_original_update_refname(update)",
          "new_text": null,
          "old_line_content": "\t\t\t    ref_update_original_update_refname(update),",
          "new_line_content": "\t\t\t    \"reference is missing but expected %s\",",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "git_env_bool",
          "new_api": null,
          "old_text": "git_env_bool(\"GIT_REF_PARANOIA\", 1)",
          "new_text": null,
          "old_line_content": "\t\t\tref_paranoia = git_env_bool(\"GIT_REF_PARANOIA\", 1);",
          "new_line_content": "\t\tif (ref_paranoia < 0)",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(err, \"verifying symref target: '%s': \"\n\t\t\t    \"is at %s but expected %s\",\n\t\t\t    ref_update_original_update_refname(update),\n\t\t\t    referent, update->old_target)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(err, \"verifying symref target: '%s': \"",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": "pack_refs",
          "new_api": null,
          "old_text": "refs->be->pack_refs(refs, opts)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->pack_refs(refs, opts);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": "ref_update_original_update_refname",
          "new_api": null,
          "old_text": "ref_update_original_update_refname(update)",
          "new_text": null,
          "old_line_content": "\t\t\t    ref_update_original_update_refname(update),",
          "new_line_content": "\t\t\t    \"is at %s but expected %s\",",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "iterator_begin",
          "new_api": null,
          "old_text": "refs->be->iterator_begin(refs, prefix, exclude_patterns, flags)",
          "new_text": null,
          "old_line_content": "\titer = refs->be->iterator_begin(refs, prefix, exclude_patterns, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(current_ref_iter->oid, base)",
          "new_text": null,
          "old_line_content": "\t     oideq(current_ref_iter->oid, base)))",
          "new_line_content": "\t    (current_ref_iter->oid == base ||",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "prefix_ref_iterator_begin",
          "new_api": null,
          "old_text": "prefix_ref_iterator_begin(iter, \"\", trim)",
          "new_text": null,
          "old_line_content": "\t\titer = prefix_ref_iterator_begin(iter, \"\", trim);",
          "new_line_content": "\tif (trim)",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": "peel_object",
          "new_api": null,
          "old_text": "peel_object(r, base, peeled)",
          "new_text": null,
          "old_line_content": "\treturn peel_object(r, base, peeled) ? -1 : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": "ref_store_transaction_begin",
          "new_api": null,
          "old_text": "ref_store_transaction_begin(refs, 0, &err)",
          "new_text": null,
          "old_line_content": "\ttransaction = ref_store_transaction_begin(refs, 0, &err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": "refs_read_symbolic_ref",
          "new_api": null,
          "old_text": "refs_read_symbolic_ref(data->old_refs, refname, &symref_target)",
          "new_text": null,
          "old_line_content": "\t\tret = refs_read_symbolic_ref(data->old_refs, refname, &symref_target);",
          "new_line_content": "\tif (flags & REF_ISSYMREF) {",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "ref_transaction_update",
          "new_api": null,
          "old_text": "ref_transaction_update(transaction, ref, NULL, NULL,\n\t\t\t\t   target, NULL, REF_NO_DEREF,\n\t\t\t\t   logmsg, &err)",
          "new_text": null,
          "old_line_content": "\t    ref_transaction_update(transaction, ref, NULL, NULL,",
          "new_line_content": "\tif (!transaction ||",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "null_oid",
          "new_api": null,
          "old_text": "null_oid()",
          "new_text": null,
          "old_line_content": "\t\tret = ref_transaction_update(data->transaction, refname, NULL, null_oid(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "ref_transaction_commit",
          "new_api": null,
          "old_text": "ref_transaction_commit(transaction, &err)",
          "new_text": null,
          "old_line_content": "\t    ref_transaction_commit(transaction, &err)) {",
          "new_line_content": "\t\t\t\t   logmsg, &err) ||",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "refs_ref_iterator_begin",
          "new_api": null,
          "old_text": "refs_ref_iterator_begin(refs, prefix, exclude_patterns, trim,\n\t\t\t\t       flags)",
          "new_text": null,
          "old_line_content": "\titer = refs_ref_iterator_begin(refs, prefix, exclude_patterns, trim,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "do_for_each_ref_iterator",
          "new_api": null,
          "old_text": "do_for_each_ref_iterator(iter, fn, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref_iterator(iter, fn, cb_data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2647,
          "old_api": "ref_transaction_create",
          "new_api": null,
          "old_text": "ref_transaction_create(data->transaction, refname, oid, NULL,\n\t\t\t\t\t     REF_SKIP_CREATE_REFLOG | REF_SKIP_OID_VERIFICATION,\n\t\t\t\t\t     NULL, data->errbuf)",
          "new_text": null,
          "old_line_content": "\t\tret = ref_transaction_create(data->transaction, refname, oid, NULL,",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(transaction)",
          "new_text": null,
          "old_line_content": "\t\tref_transaction_free(transaction);",
          "new_line_content": "\tif (transaction)",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(refs, \"\", NULL, fn, 0, 0, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0, 0, cb_data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&symref_target)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&symref_target);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(prefix)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, prefix, NULL, fn, strlen(prefix), 0, cb_data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(err)",
          "new_text": null,
          "old_line_content": "\tassert(err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(refnames->items[i - 1].string,\n\t\t\t\t refnames->items[i].string)",
          "new_text": null,
          "old_line_content": "\t\tint cmp = strcmp(refnames->items[i - 1].string,",
          "new_line_content": "\tfor (i = 1; i < n; i++) {",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(refs, prefix, exclude_patterns, fn, 0, 0, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, prefix, exclude_patterns, fn, 0, 0, cb_data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(err,\n\t\t\t\t    _(\"multiple updates for ref '%s' not allowed\"),\n\t\t\t\t    refnames->items[i].string)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(err,",
          "new_line_content": "\t\tif (!cmp) {",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "opendir",
          "new_api": null,
          "old_text": "opendir(from_path)",
          "new_text": null,
          "old_line_content": "\tfrom_dir = opendir(from_path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(errbuf, \"could not open source directory '%s': %s\",\n\t\t\t    from_path, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(errbuf, \"could not open source directory '%s': %s\",",
          "new_line_content": "\tif (!from_dir) {",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(refs, git_replace_ref_base, NULL, fn,\n\t\t\t       strlen(git_replace_ref_base),\n\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, git_replace_ref_base, NULL, fn,",
          "new_line_content": "\tconst char *git_replace_ref_base = ref_namespace[NAMESPACE_REPLACE].ref;",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"ref_update_reject_duplicates() received unsorted list\")",
          "new_text": null,
          "old_line_content": "\t\t\tBUG(\"ref_update_reject_duplicates() received unsorted list\");",
          "new_line_content": "\t\t} else if (cmp > 0) {",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&from_buf, from_path)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&from_buf, from_path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&to_buf, to_path)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&to_buf, to_path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "get_namespaced_exclude_patterns",
          "new_api": null,
          "old_text": "get_namespaced_exclude_patterns(exclude_patterns,\n\t\t\t\t\t\t\t   get_git_namespace(),\n\t\t\t\t\t\t\t   &namespaced_exclude_patterns)",
          "new_text": null,
          "old_line_content": "\texclude_patterns = get_namespaced_exclude_patterns(exclude_patterns,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "find_hook",
          "new_api": null,
          "old_text": "find_hook(transaction->ref_store->repo, \"reference-transaction\")",
          "new_text": null,
          "old_line_content": "\thook = find_hook(transaction->ref_store->repo, \"reference-transaction\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "get_git_namespace",
          "new_api": null,
          "old_text": "get_git_namespace()",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&prefix, \"%srefs/\", get_git_namespace());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": "readdir",
          "new_api": null,
          "old_text": "readdir(from_dir)",
          "new_text": null,
          "old_line_content": "\t\tent = readdir(from_dir);",
          "new_line_content": "\t\terrno = 0;",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "strvec_pushl",
          "new_api": null,
          "old_text": "strvec_pushl(&proc.args, hook, state, NULL)",
          "new_text": null,
          "old_line_content": "\tstrvec_pushl(&proc.args, hook, state, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "strvec_clear",
          "new_api": null,
          "old_text": "strvec_clear(&namespaced_exclude_patterns)",
          "new_text": null,
          "old_line_content": "\tstrvec_clear(&namespaced_exclude_patterns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ent->d_name, \".\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(ent->d_name, \".\") ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "start_command",
          "new_api": null,
          "old_text": "start_command(&proc)",
          "new_text": null,
          "old_line_content": "\tret = start_command(&proc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "strbuf_setlen",
          "new_api": null,
          "old_text": "strbuf_setlen(&from_buf, from_len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_setlen(&from_buf, from_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(refs, \"\", NULL, fn, 0,\n\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "sigchain_push",
          "new_api": null,
          "old_text": "sigchain_push(SIGPIPE, SIG_IGN)",
          "new_text": null,
          "old_line_content": "\tsigchain_push(SIGPIPE, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2697,
          "old_api": "strbuf_setlen",
          "new_api": null,
          "old_text": "strbuf_setlen(&to_buf, to_len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_setlen(&to_buf, to_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(from_buf.buf, to_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\tret = rename(from_buf.buf, to_buf.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&buf)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_reset(&buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(errbuf, \"could not link file '%s' to '%s': %s\",\n\t\t\t\t    from_buf.buf, to_buf.buf, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(errbuf, \"could not link file '%s' to '%s': %s\",",
          "new_line_content": "\t\tif (ret < 0) {",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(refs, \"\", NULL, fn, 0,\n\t\t\t       DO_FOR_EACH_INCLUDE_ROOT_REFS, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref(refs, \"\", NULL, fn, 0,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": "null_oid",
          "new_api": null,
          "old_text": "null_oid()",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(null_oid()));",
          "new_line_content": "\t\tif (!(update->flags & REF_HAVE_OLD))",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&buf, \"ref:%s \", update->old_target)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"ref:%s \", update->old_target);",
          "new_line_content": "\t\telse if (update->old_target)",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&update->old_oid)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(&update->old_oid));",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2709,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(errbuf, \"could not read entry from directory '%s': %s\",\n\t\t\t    from_path, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(errbuf, \"could not read entry from directory '%s': %s\",",
          "new_line_content": "\tif (errno) {",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a, b)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(a, b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": "null_oid",
          "new_api": null,
          "old_text": "null_oid()",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(null_oid()));",
          "new_line_content": "\t\tif (!(update->flags & REF_HAVE_NEW))",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&buf, \"ref:%s \", update->new_target)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"ref:%s \", update->new_target);",
          "new_line_content": "\t\telse if (update->new_target)",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&update->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(&buf, \"%s \", oid_to_hex(&update->new_oid));",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&buf, \"%s\\n\", update->refname)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(&buf, \"%s\\n\", update->refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&from_buf)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&from_buf);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "write_in_full",
          "new_api": null,
          "old_text": "write_in_full(proc.in, buf.buf, buf.len)",
          "new_text": null,
          "old_line_content": "\t\tif (write_in_full(proc.in, buf.buf, buf.len) < 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": "closedir",
          "new_api": null,
          "old_text": "closedir(from_dir)",
          "new_text": null,
          "old_line_content": "\t\tclosedir(from_dir);",
          "new_line_content": "\tif (from_dir)",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "is_glob_special",
          "new_api": null,
          "old_text": "is_glob_special(c)",
          "new_text": null,
          "old_line_content": "\t\tif (!c || is_glob_special(c)) {",
          "new_line_content": "\t\tchar c = patterns[i][prefix->len];",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(proc.in)",
          "new_text": null,
          "old_line_content": "\tclose(proc.in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "finish_command",
          "new_api": null,
          "old_text": "finish_command(&proc)",
          "new_text": null,
          "old_line_content": "\tret |= finish_command(&proc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": "get_worktrees",
          "new_api": null,
          "old_text": "get_worktrees()",
          "new_text": null,
          "old_line_content": "\tstruct worktree **worktrees = get_worktrees();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": "is_main_worktree",
          "new_api": null,
          "old_text": "is_main_worktree(worktrees[i])",
          "new_text": null,
          "old_line_content": "\t\tif (is_main_worktree(worktrees[i]))",
          "new_line_content": "\tfor (i = 0; worktrees[i]; i++) {",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(err)",
          "new_text": null,
          "old_line_content": "\tassert(err);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(prefix, patterns[i][prefix->len])",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addch(prefix, patterns[i][prefix->len]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "free_worktrees",
          "new_api": null,
          "old_text": "free_worktrees(worktrees)",
          "new_text": null,
          "old_line_content": "\tfree_worktrees(worktrees);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"refusing to force and skip creation of reflog\")",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(err, _(\"refusing to force and skip creation of reflog\"));",
          "new_line_content": "\t    (flags & REF_SKIP_CREATE_REFLOG)) {",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"prepare called twice on reference transaction\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"prepare called twice on reference transaction\");",
          "new_line_content": "\tcase REF_TRANSACTION_PREPARED:",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(new_oid)",
          "new_text": null,
          "old_line_content": "\t    ((new_oid && !is_null_oid(new_oid)) ?",
          "new_line_content": "\tif (!(flags & REF_SKIP_REFNAME_VERIFICATION) &&",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"prepare called on a closed reference transaction\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"prepare called on a closed reference transaction\");",
          "new_line_content": "\tcase REF_TRANSACTION_CLOSED:",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"unexpected reference transaction state\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "strvec_pushv",
          "new_api": null,
          "old_text": "strvec_pushv(&sorted, patterns)",
          "new_text": null,
          "old_line_content": "\tstrvec_pushv(&sorted, patterns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "find_longest_prefixes_1",
          "new_api": null,
          "old_text": "find_longest_prefixes_1(out, &prefix, sorted.v, sorted.nr)",
          "new_text": null,
          "old_line_content": "\tfind_longest_prefixes_1(out, &prefix, sorted.v, sorted.nr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "is_pseudo_ref",
          "new_api": null,
          "old_text": "is_pseudo_ref(refname)",
          "new_text": null,
          "old_line_content": "\t    is_pseudo_ref(refname)) {",
          "new_line_content": "\tif (!(flags & REF_SKIP_REFNAME_VERIFICATION) &&",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(err,\n\t\t\t      _(\"ref updates forbidden inside quarantine environment\"))",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(err,",
          "new_line_content": "\tif (refs->repo->objects->odb->disable_ref_updates) {",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "strvec_clear",
          "new_api": null,
          "old_text": "strvec_clear(&sorted)",
          "new_text": null,
          "old_line_content": "\tstrvec_clear(&sorted);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(errbuf, \"current and new ref storage format are equal\")",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(errbuf, \"current and new ref storage format are equal\");",
          "new_line_content": "\tif (repo->ref_storage_format == format) {",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": "transaction_prepare",
          "new_api": null,
          "old_text": "refs->be->transaction_prepare(refs, transaction, err)",
          "new_text": null,
          "old_line_content": "\tret = refs->be->transaction_prepare(refs, transaction, err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"illegal flags 0x%x passed to ref_transaction_update()\", flags)",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"illegal flags 0x%x passed to ref_transaction_update()\", flags);",
          "new_line_content": "\tif (flags & ~REF_TRANSACTION_UPDATE_ALLOWED_FLAGS)",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": "get_main_ref_store",
          "new_api": null,
          "old_text": "get_main_ref_store(repo)",
          "new_text": null,
          "old_line_content": "\told_refs = get_main_ref_store(repo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "run_transaction_hook",
          "new_api": null,
          "old_text": "run_transaction_hook(transaction, \"prepared\")",
          "new_text": null,
          "old_line_content": "\tret = run_transaction_hook(transaction, \"prepared\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": "ref_transaction_abort",
          "new_api": null,
          "old_text": "ref_transaction_abort(transaction, err)",
          "new_text": null,
          "old_line_content": "\t\tref_transaction_abort(transaction, err);",
          "new_line_content": "\tif (ret) {",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "refs_for_each_reflog",
          "new_api": null,
          "old_text": "refs_for_each_reflog(old_refs, count_reflogs, &reflog_count)",
          "new_text": null,
          "old_line_content": "\tif (refs_for_each_reflog(old_refs, count_reflogs, &reflog_count) < 0) {",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "find_longest_prefixes",
          "new_api": null,
          "old_text": "find_longest_prefixes(&prefixes, patterns)",
          "new_text": null,
          "old_line_content": "\tfind_longest_prefixes(&prefixes, patterns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "ref_transaction_add_update",
          "new_api": null,
          "old_text": "ref_transaction_add_update(transaction, refname, flags,\n\t\t\t\t   new_oid, old_oid, new_target,\n\t\t\t\t   old_target, msg)",
          "new_text": null,
          "old_line_content": "\tref_transaction_add_update(transaction, refname, flags,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(errbuf, \"migrating reflogs is not supported yet\")",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(errbuf, \"migrating reflogs is not supported yet\");",
          "new_line_content": "\tif (reflog_count) {",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&buf, namespace)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(&buf, namespace);",
          "new_line_content": "\tif (namespace)",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "get_namespaced_exclude_patterns",
          "new_api": null,
          "old_text": "get_namespaced_exclude_patterns(exclude_patterns,\n\t\t\t\t\t\t\t   namespace,\n\t\t\t\t\t\t\t   &namespaced_exclude_patterns)",
          "new_text": null,
          "old_line_content": "\texclude_patterns = get_namespaced_exclude_patterns(exclude_patterns,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "for_each_string_list_item",
          "new_api": null,
          "old_text": "for_each_string_list_item(prefix, &prefixes)",
          "new_text": null,
          "old_line_content": "\tfor_each_string_list_item(prefix, &prefixes) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": "transaction_abort",
          "new_api": null,
          "old_text": "refs->be->transaction_abort(refs, transaction, err)",
          "new_text": null,
          "old_line_content": "\t\tret = refs->be->transaction_abort(refs, transaction, err);",
          "new_line_content": "\tcase REF_TRANSACTION_PREPARED:",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"abort called on a closed reference transaction\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"abort called on a closed reference transaction\");",
          "new_line_content": "\tcase REF_TRANSACTION_CLOSED:",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": "has_worktrees",
          "new_api": null,
          "old_text": "has_worktrees()",
          "new_text": null,
          "old_line_content": "\tif (has_worktrees()) {",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"create called with both new_oid and new_target set\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"create called with both new_oid and new_target set\");",
          "new_line_content": "\tif (new_oid && new_target)",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"unexpected reference transaction state\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "strbuf_setlen",
          "new_api": null,
          "old_text": "strbuf_setlen(&buf, namespace_len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_setlen(&buf, namespace_len);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "ref_transaction_update",
          "new_api": null,
          "old_text": "ref_transaction_update(transaction, refname, new_oid,\n\t\t\t\t      null_oid(), new_target, NULL, flags,\n\t\t\t\t      msg, err)",
          "new_text": null,
          "old_line_content": "\treturn ref_transaction_update(transaction, refname, new_oid,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "strvec_clear",
          "new_api": null,
          "old_text": "strvec_clear(&namespaced_exclude_patterns)",
          "new_text": null,
          "old_line_content": "\tstrvec_clear(&namespaced_exclude_patterns);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "run_transaction_hook",
          "new_api": null,
          "old_text": "run_transaction_hook(transaction, \"aborted\")",
          "new_text": null,
          "old_line_content": "\trun_transaction_hook(transaction, \"aborted\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2289,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(transaction)",
          "new_text": null,
          "old_line_content": "\tref_transaction_free(transaction);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&full_path, \"%s/%s\", ref_store->gitdir, refname)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&full_path, \"%s/%s\", ref_store->gitdir, refname);",
          "new_line_content": "\tint result = -1;",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(old_oid)",
          "new_text": null,
          "old_line_content": "\tif (old_oid && is_null_oid(old_oid))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "strbuf_read_file",
          "new_api": null,
          "old_text": "strbuf_read_file(&content, full_path.buf, 0)",
          "new_text": null,
          "old_line_content": "\tif (strbuf_read_file(&content, full_path.buf, 0) < 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"delete called with both old_oid and old_target set\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"delete called with both old_oid and old_target set\");",
          "new_line_content": "\tif (old_oid && old_target)",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "ref_transaction_prepare",
          "new_api": null,
          "old_text": "ref_transaction_prepare(transaction, err)",
          "new_text": null,
          "old_line_content": "\t\tret = ref_transaction_prepare(transaction, err);",
          "new_line_content": "\t\t/* Need to prepare first. */",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"delete cannot operate on symrefs with deref mode\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"delete cannot operate on symrefs with deref mode\");",
          "new_line_content": "\tif (old_target && !(flags & REF_NO_DEREF))",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": "parse_loose_ref_contents",
          "new_api": null,
          "old_text": "parse_loose_ref_contents(ref_store->repo->hash_algo, content.buf,\n\t\t\t\t\t  oid, referent, type, failure_errno)",
          "new_text": null,
          "old_line_content": "\tresult = parse_loose_ref_contents(ref_store->repo->hash_algo, content.buf,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&full_path)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&full_path);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&new_gitdir, \"%s/%s\", old_refs->gitdir, \"ref_migration.XXXXXX\")",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&new_gitdir, \"%s/%s\", old_refs->gitdir, \"ref_migration.XXXXXX\");",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"commit called on a closed reference transaction\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"commit called on a closed reference transaction\");",
          "new_line_content": "\tcase REF_TRANSACTION_CLOSED:",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"unexpected reference transaction state\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"unexpected reference transaction state\");",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": "transaction_finish",
          "new_api": null,
          "old_text": "refs->be->transaction_finish(refs, transaction, err)",
          "new_text": null,
          "old_line_content": "\tret = refs->be->transaction_finish(refs, transaction, err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "ref_store_init",
          "new_api": null,
          "old_text": "ref_store_init(repo, format, new_gitdir.buf,\n\t\t\t\t  REF_STORE_ALL_CAPS)",
          "new_text": null,
          "old_line_content": "\tnew_refs = ref_store_init(repo, format, new_gitdir.buf,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": "run_transaction_hook",
          "new_api": null,
          "old_text": "run_transaction_hook(transaction, \"committed\")",
          "new_text": null,
          "old_line_content": "\t\trun_transaction_hook(transaction, \"committed\");",
          "new_line_content": "\tif (!ret && !(transaction->flags & REF_TRANSACTION_FLAG_INITIAL))",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": "ref_store_create_on_disk",
          "new_api": null,
          "old_text": "ref_store_create_on_disk(new_refs, 0, errbuf)",
          "new_text": null,
          "old_line_content": "\tret = ref_store_create_on_disk(new_refs, 0, errbuf);",
          "new_line_content": "\t\t\t\t  REF_STORE_ALL_CAPS);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"verify called with old_oid and old_target set to NULL\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"verify called with old_oid and old_target set to NULL\");",
          "new_line_content": "\tif (!old_target && !old_oid)",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"verify called with both old_oid and old_target set\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"verify called with both old_oid and old_target set\");",
          "new_line_content": "\tif (old_oid && old_target)",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": "ref_store_transaction_begin",
          "new_api": null,
          "old_text": "ref_store_transaction_begin(new_refs, REF_TRANSACTION_FLAG_INITIAL,\n\t\t\t\t\t\t  errbuf)",
          "new_text": null,
          "old_line_content": "\ttransaction = ref_store_transaction_begin(new_refs, REF_TRANSACTION_FLAG_INITIAL,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"verify cannot operate on symrefs with deref mode\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"verify cannot operate on symrefs with deref mode\");",
          "new_line_content": "\tif (old_target && !(flags & REF_NO_DEREF))",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(failure_errno)",
          "new_text": null,
          "old_line_content": "\tassert(failure_errno);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "read_raw_ref",
          "new_api": null,
          "old_text": "ref_store->be->read_raw_ref(ref_store, refname, oid, referent,\n\t\t\t\t\t   type, failure_errno)",
          "new_text": null,
          "old_line_content": "\treturn ref_store->be->read_raw_ref(ref_store, refname, oid, referent,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "read_symbolic_ref",
          "new_api": null,
          "old_text": "ref_store->be->read_symbolic_ref(ref_store, refname, referent)",
          "new_text": null,
          "old_line_content": "\treturn ref_store->be->read_symbolic_ref(ref_store, refname, referent);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "ref_store_transaction_begin",
          "new_api": null,
          "old_text": "ref_store_transaction_begin(refs, 0, &err)",
          "new_text": null,
          "old_line_content": "\tt = ref_store_transaction_begin(refs, 0, &err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "ref_transaction_update",
          "new_api": null,
          "old_text": "ref_transaction_update(t, refname, new_oid, old_oid, NULL, NULL,\n\t\t\t\t   flags, msg, &err)",
          "new_text": null,
          "old_line_content": "\t    ref_transaction_update(t, refname, new_oid, old_oid, NULL, NULL,",
          "new_line_content": "\tif (!t ||",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "ref_transaction_commit",
          "new_api": null,
          "old_text": "ref_transaction_commit(t, &err)",
          "new_text": null,
          "old_line_content": "\t    ref_transaction_commit(t, &err)) {",
          "new_line_content": "\t\t\t\t   flags, msg, &err) ||",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(err)",
          "new_text": null,
          "old_line_content": "\tassert(err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": "do_for_each_ref",
          "new_api": null,
          "old_text": "do_for_each_ref(old_refs, \"\", NULL, migrate_one_ref, 0,\n\t\t\t      DO_FOR_EACH_INCLUDE_ROOT_REFS | DO_FOR_EACH_INCLUDE_BROKEN,\n\t\t\t      &data)",
          "new_text": null,
          "old_line_content": "\tret = do_for_each_ref(old_refs, \"\", NULL, migrate_one_ref, 0,",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2345,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(refname)",
          "new_text": null,
          "old_line_content": "\tstrbuf_grow(&dirname, strlen(refname) + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(t)",
          "new_text": null,
          "old_line_content": "\t\tref_transaction_free(t);",
          "new_line_content": "\t\tret = 1;",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"update_ref failed for ref '%s': %s\")",
          "new_text": null,
          "old_line_content": "\t\tconst char *str = _(\"update_ref failed for ref '%s': %s\");",
          "new_line_content": "\tif (ret) {",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "ref_transaction_commit",
          "new_api": null,
          "old_text": "ref_transaction_commit(transaction, errbuf)",
          "new_text": null,
          "old_line_content": "\tret = ref_transaction_commit(transaction, errbuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": "check_refname_format",
          "new_api": null,
          "old_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "new_text": null,
          "old_line_content": "\tif (check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(str, refname, err.buf)",
          "new_text": null,
          "old_line_content": "\t\t\terror(str, refname, err.buf);",
          "new_line_content": "\t\tcase UPDATE_REFS_MSG_ON_ERR:",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "refname_is_safe",
          "new_api": null,
          "old_text": "refname_is_safe(refname)",
          "new_text": null,
          "old_line_content": "\t\t    !refname_is_safe(refname))",
          "new_line_content": "\t\tif (!(resolve_flags & RESOLVE_REF_ALLOW_BAD_NAME) ||",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(str, refname, err.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(str, refname, err.buf);",
          "new_line_content": "\t\tcase UPDATE_REFS_DIE_ON_ERR:",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(&dirname, refname + dirname.len, slash - refname - dirname.len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_add(&dirname, refname + dirname.len, slash - refname - dirname.len);",
          "new_line_content": "\t\t/* Expand dirname to the new prefix, not including the trailing slash: */",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Finished dry-run migration of refs, \"\n\t\t\t \"the result can be found at '%s'\\n\")",
          "new_text": null,
          "old_line_content": "\t\tprintf(_(\"Finished dry-run migration of refs, \"",
          "new_line_content": "\tif (flags & REPO_MIGRATE_REF_STORAGE_FORMAT_DRYRUN) {",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&err);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(skip, dirname.buf)",
          "new_text": null,
          "old_line_content": "\t\tif (skip && string_list_has_string(skip, dirname.buf))",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(t)",
          "new_text": null,
          "old_line_content": "\t\tref_transaction_free(t);",
          "new_line_content": "\tif (t)",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": "refs_read_raw_ref",
          "new_api": null,
          "old_text": "refs_read_raw_ref(refs, dirname.buf, &oid, &referent,\n\t\t\t\t       &type, &ignore_errno)",
          "new_text": null,
          "old_line_content": "\t\t    !refs_read_raw_ref(refs, dirname.buf, &oid, &referent,",
          "new_line_content": "\t\tif (!initial_transaction &&",
          "content_same": false
        },
        {
          "line": 2878,
          "old_api": "ref_store_release",
          "new_api": null,
          "old_text": "ref_store_release(new_refs)",
          "new_text": null,
          "old_line_content": "\tref_store_release(new_refs);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"'%s' exists; cannot create '%s'\")",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(err, _(\"'%s' exists; cannot create '%s'\"),",
          "new_line_content": "\t\t\t\t       &type, &ignore_errno)) {",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "refs_read_raw_ref",
          "new_api": null,
          "old_text": "refs_read_raw_ref(refs, refname, oid, &sb_refname,\n\t\t\t\t      &read_flags, &failure_errno)",
          "new_text": null,
          "old_line_content": "\t\tif (refs_read_raw_ref(refs, refname, oid, &sb_refname,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(extras, dirname.buf)",
          "new_text": null,
          "old_line_content": "\t\tif (extras && string_list_has_string(extras, dirname.buf)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": "ref_store_remove_on_disk",
          "new_api": null,
          "old_text": "ref_store_remove_on_disk(old_refs, errbuf)",
          "new_text": null,
          "old_line_content": "\tret = ref_store_remove_on_disk(old_refs, errbuf);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"rev-parse rule did not have percent\")",
          "new_text": null,
          "old_line_content": "\t\t\tBUG(\"rev-parse rule did not have percent\");",
          "new_line_content": "\t\tif (!*rule)",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": "move_files",
          "new_api": null,
          "old_text": "move_files(new_gitdir.buf, old_refs->gitdir, errbuf)",
          "new_text": null,
          "old_line_content": "\tret = move_files(new_gitdir.buf, old_refs->gitdir, errbuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&dirname, refname + dirname.len)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&dirname, refname + dirname.len);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "rmdir",
          "new_api": null,
          "old_text": "rmdir(new_gitdir.buf)",
          "new_text": null,
          "old_line_content": "\tif (rmdir(new_gitdir.buf) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "oidclr",
          "new_api": null,
          "old_text": "oidclr(oid, refs->repo->hash_algo)",
          "new_text": null,
          "old_line_content": "\t\t\toidclr(oid, refs->repo->hash_algo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "skip_prefix",
          "new_api": null,
          "old_text": "skip_prefix(rule, \"%.*s\", &rule)",
          "new_text": null,
          "old_line_content": "\tif (!skip_prefix(rule, \"%.*s\", &rule))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "refs_ref_iterator_begin",
          "new_api": null,
          "old_text": "refs_ref_iterator_begin(refs, dirname.buf, NULL, 0,\n\t\t\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN)",
          "new_text": null,
          "old_line_content": "\t\titer = refs_ref_iterator_begin(refs, dirname.buf, NULL, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": "ref_iterator_advance",
          "new_api": null,
          "old_text": "ref_iterator_advance(iter)",
          "new_text": null,
          "old_line_content": "\t\twhile ((ok = ref_iterator_advance(iter)) == ITER_OK) {",
          "new_line_content": "\t\t\t\t\t       DO_FOR_EACH_INCLUDE_BROKEN);",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "hash_algo_by_ptr",
          "new_api": null,
          "old_text": "hash_algo_by_ptr(repo->hash_algo)",
          "new_text": null,
          "old_line_content": "\tinitialize_repository_version(hash_algo_by_ptr(repo->hash_algo), format, 1);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(skip, iter->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t    string_list_has_string(skip, iter->refname))",
          "new_line_content": "\t\t\tif (skip &&",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "strip_suffix",
          "new_api": null,
          "old_text": "strip_suffix(refname, rule, len)",
          "new_text": null,
          "old_line_content": "\tif (!strip_suffix(refname, rule, len))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "oidclr",
          "new_api": null,
          "old_text": "oidclr(oid, refs->repo->hash_algo)",
          "new_text": null,
          "old_line_content": "\t\t\t\toidclr(oid, refs->repo->hash_algo);",
          "new_line_content": "\t\t\tif (*flags & REF_BAD_NAME) {",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"'%s' exists; cannot create '%s'\")",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(err, _(\"'%s' exists; cannot create '%s'\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": "ref_iterator_abort",
          "new_api": null,
          "old_text": "ref_iterator_abort(iter)",
          "new_text": null,
          "old_line_content": "\t\t\tref_iterator_abort(iter);",
          "new_line_content": "\t\t\t\t    iter->refname, refname);",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": "ref_store_release",
          "new_api": null,
          "old_text": "ref_store_release(old_refs)",
          "new_text": null,
          "old_line_content": "\tref_store_release(old_refs);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "oidclr",
          "new_api": null,
          "old_text": "oidclr(oid, refs->repo->hash_algo)",
          "new_text": null,
          "old_line_content": "\t\t\toidclr(oid, refs->repo->hash_algo);",
          "new_line_content": "\t\tif (resolve_flags & RESOLVE_REF_NO_RECURSE) {",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"error while iterating over references\")",
          "new_text": null,
          "old_line_content": "\t\t\tBUG(\"error while iterating over references\");",
          "new_line_content": "\t\tif (ok != ITER_DONE)",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "check_refname_format",
          "new_api": null,
          "old_text": "check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)",
          "new_text": null,
          "old_line_content": "\t\tif (check_refname_format(refname, REFNAME_ALLOW_ONELEVEL)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "refname_is_safe",
          "new_api": null,
          "old_text": "refname_is_safe(refname)",
          "new_text": null,
          "old_line_content": "\t\t\t    !refname_is_safe(refname))",
          "new_line_content": "\t\t\tif (!(resolve_flags & RESOLVE_REF_ALLOW_BAD_NAME) ||",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": "find_descendant_ref",
          "new_api": null,
          "old_text": "find_descendant_ref(dirname.buf, extras, skip)",
          "new_text": null,
          "old_line_content": "\textra_refname = find_descendant_ref(dirname.buf, extras, skip);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": "strbuf_complete",
          "new_api": null,
          "old_text": "strbuf_complete(errbuf, '\\n')",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_complete(errbuf, '\\n');",
          "new_line_content": "\tif (ret && did_migrate_refs) {",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"cannot process '%s' and '%s' at the same time\")",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(err, _(\"cannot process '%s' and '%s' at the same time\"),",
          "new_line_content": "\tif (extra_refname)",
          "content_same": false
        },
        {
          "line": 2931,
          "old_api": "ref_store_release",
          "new_api": null,
          "old_text": "ref_store_release(new_refs)",
          "new_text": null,
          "old_line_content": "\t\tref_store_release(new_refs);",
          "new_line_content": "\tif (new_refs) {",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&referent)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&referent);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "match_parse_rule",
          "new_api": null,
          "old_text": "match_parse_rule(refname, ref_rev_parse_rules[i],\n\t\t\t\t\t      &short_name_len)",
          "new_text": null,
          "old_line_content": "\t\tshort_name = match_parse_rule(refname, ref_rev_parse_rules[i],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2934,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(transaction)",
          "new_text": null,
          "old_line_content": "\tref_transaction_free(transaction);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "create_on_disk",
          "new_api": null,
          "old_text": "refs->be->create_on_disk(refs, flags, err)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->create_on_disk(refs, flags, err);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": "remove_on_disk",
          "new_api": null,
          "old_text": "refs->be->remove_on_disk(refs, err)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->remove_on_disk(refs, err);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&update->old_oid)",
          "new_text": null,
          "old_line_content": "\t\t(!is_null_oid(&update->old_oid) || update->old_target);",
          "new_line_content": "\treturn (update->flags & REF_HAVE_OLD) &&",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": "fn",
          "new_api": null,
          "old_text": "hp->fn(refname, hp->cb_data)",
          "new_text": null,
          "old_line_content": "\treturn hp->fn(refname, hp->cb_data);",
          "new_line_content": "\tstruct do_for_each_reflog_help *hp = cb_data;",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": "repo_get_submodule_ref_store",
          "new_api": null,
          "old_text": "repo_get_submodule_ref_store(r, submodule)",
          "new_text": null,
          "old_line_content": "\trefs = repo_get_submodule_ref_store(r, submodule);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": null,
          "old_text": "refs_resolve_ref_unsafe(refs, refname, 0, oid, &flags)",
          "new_text": null,
          "old_line_content": "\tif (!refs_resolve_ref_unsafe(refs, refname, 0, oid, &flags) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "reflog_iterator_begin",
          "new_api": null,
          "old_text": "refs->be->reflog_iterator_begin(refs)",
          "new_text": null,
          "old_line_content": "\titer = refs->be->reflog_iterator_begin(refs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": "do_for_each_ref_iterator",
          "new_api": null,
          "old_text": "do_for_each_ref_iterator(iter, do_for_each_reflog_helper, &hp)",
          "new_text": null,
          "old_line_content": "\treturn do_for_each_ref_iterator(iter, do_for_each_reflog_helper, &hp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&resolved_buf)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_reset(&resolved_buf);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "refs_ref_exists",
          "new_api": null,
          "old_text": "refs_ref_exists(refs, resolved_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tif (refs_ref_exists(refs, resolved_buf.buf))",
          "new_line_content": "\t\t\t\t    short_name);",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "for_each_reflog_ent_reverse",
          "new_api": null,
          "old_text": "refs->be->for_each_reflog_ent_reverse(refs, refname,\n\t\t\t\t\t\t     fn, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->for_each_reflog_ent_reverse(refs, refname,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&resolved_buf)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_release(&resolved_buf);",
          "new_line_content": "\t\tif (j == rules_to_fail) {",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": "for_each_reflog_ent",
          "new_api": null,
          "old_text": "refs->be->for_each_reflog_ent(refs, refname, fn, cb_data)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->for_each_reflog_ent(refs, refname, fn, cb_data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "strmap_get_entry",
          "new_api": null,
          "old_text": "strmap_get_entry(map, name)",
          "new_text": null,
          "old_line_content": "\tentry = strmap_get_entry(map, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&resolved_buf)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&resolved_buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": "reflog_exists",
          "new_api": null,
          "old_text": "refs->be->reflog_exists(refs, refname)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->reflog_exists(refs, refname);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "create_reflog",
          "new_api": null,
          "old_text": "refs->be->create_reflog(refs, refname, err)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->create_reflog(refs, refname, err);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"transfer.hiderefs\", var)",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(\"transfer.hiderefs\", var) ||",
          "new_line_content": "\tconst char *key;",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "delete_reflog",
          "new_api": null,
          "old_text": "refs->be->delete_reflog(refs, refname)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->delete_reflog(refs, refname);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "find_ref_storage_backend",
          "new_api": null,
          "old_text": "find_ref_storage_backend(format)",
          "new_text": null,
          "old_line_content": "\tbe = find_ref_storage_backend(format);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "config_error_nonbool",
          "new_api": null,
          "old_text": "config_error_nonbool(var)",
          "new_text": null,
          "old_line_content": "\t\t\treturn config_error_nonbool(var);",
          "new_line_content": "\t\tif (!value)",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"reference backend is unknown\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"reference backend is unknown\");",
          "new_line_content": "\tif (!be)",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "init",
          "new_api": null,
          "old_text": "be->init(repo, gitdir, flags)",
          "new_text": null,
          "old_line_content": "\trefs = be->init(repo, gitdir, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "strvec_push",
          "new_api": null,
          "old_text": "strvec_push(hide_refs, value)",
          "new_text": null,
          "old_line_content": "\t\tref = (char *)strvec_push(hide_refs, value);",
          "new_line_content": "\t\t/* drop const to remove trailing '/' characters */",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "release",
          "new_api": null,
          "old_text": "ref_store->be->release(ref_store)",
          "new_text": null,
          "old_line_content": "\tref_store->be->release(ref_store);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "reflog_expire",
          "new_api": null,
          "old_text": "refs->be->reflog_expire(refs, refname, flags,\n\t\t\t\t       prepare_fn, should_prune_fn,\n\t\t\t\t       cleanup_fn, policy_cb_data)",
          "new_text": null,
          "old_line_content": "\treturn refs->be->reflog_expire(refs, refname, flags,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"attempting to get main_ref_store outside of repository\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"attempting to get main_ref_store outside of repository\");",
          "new_line_content": "\tif (!r->gitdir)",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "ref_store_init",
          "new_api": null,
          "old_text": "ref_store_init(r, r->ref_storage_format,\n\t\t\t\t\t r->gitdir, REF_STORE_ALL_CAPS)",
          "new_text": null,
          "old_line_content": "\tr->refs_private = ref_store_init(r, r->ref_storage_format,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "maybe_debug_wrap_ref_store",
          "new_api": null,
          "old_text": "maybe_debug_wrap_ref_store(r->gitdir, r->refs_private)",
          "new_text": null,
          "old_line_content": "\tr->refs_private = maybe_debug_wrap_ref_store(r->gitdir, r->refs_private);",
          "new_line_content": "\t\t\t\t\t r->gitdir, REF_STORE_ALL_CAPS);",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": "cb",
          "new_api": null,
          "old_text": "cb(update->refname,\n\t\t   (update->flags & REF_HAVE_OLD) ? &update->old_oid : NULL,\n\t\t   (update->flags & REF_HAVE_NEW) ? &update->new_oid : NULL,\n\t\t   cb_data)",
          "new_text": null,
          "old_line_content": "\t\tcb(update->refname,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "skip_prefix",
          "new_api": null,
          "old_text": "skip_prefix(subject, match, &p)",
          "new_text": null,
          "old_line_content": "\t\t    skip_prefix(subject, match, &p) &&",
          "new_line_content": "\t\tif (subject &&",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "strmap_init",
          "new_api": null,
          "old_text": "strmap_init(map)",
          "new_text": null,
          "old_line_content": "\t\tstrmap_init(map);",
          "new_line_content": "\tif (!map->map.tablesize)",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "normalize_reflog_message",
          "new_api": null,
          "old_text": "normalize_reflog_message(logmsg)",
          "new_text": null,
          "old_line_content": "\tmsg = normalize_reflog_message(logmsg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": "ref_store_transaction_begin",
          "new_api": null,
          "old_text": "ref_store_transaction_begin(refs, 0, &err)",
          "new_text": null,
          "old_line_content": "\ttransaction = ref_store_transaction_begin(refs, 0, &err);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\tret = error(\"%s\", err.buf);",
          "new_line_content": "\tif (!transaction) {",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(submodule)",
          "new_text": null,
          "old_line_content": "\tlen = strlen(submodule);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "ref_transaction_delete",
          "new_api": null,
          "old_text": "ref_transaction_delete(transaction, item->string,\n\t\t\t\t\t     NULL, NULL, flags, msg, &err)",
          "new_text": null,
          "old_line_content": "\t\tret = ref_transaction_delete(transaction, item->string,",
          "new_line_content": "\tfor_each_string_list_item(item, refnames) {",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not delete reference %s: %s\")",
          "new_text": null,
          "old_line_content": "\t\t\twarning(_(\"could not delete reference %s: %s\"),",
          "new_line_content": "\t\tif (ret) {",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&err)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_reset(&err);",
          "new_line_content": "\t\t\t\titem->string, err.buf);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "xmemdupz",
          "new_api": null,
          "old_text": "xmemdupz(submodule, len)",
          "new_text": null,
          "old_line_content": "\t\tsubmodule = to_free = xmemdupz(submodule, len);",
          "new_line_content": "\t\t/* We need to strip off one or more trailing slashes */",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "lookup_ref_store_map",
          "new_api": null,
          "old_text": "lookup_ref_store_map(&repo->submodule_ref_stores, submodule)",
          "new_text": null,
          "old_line_content": "\trefs = lookup_ref_store_map(&repo->submodule_ref_stores, submodule);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "ref_transaction_commit",
          "new_api": null,
          "old_text": "ref_transaction_commit(transaction, &err)",
          "new_text": null,
          "old_line_content": "\tret = ref_transaction_commit(transaction, &err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&submodule_sb, submodule)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&submodule_sb, submodule);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not delete reference %s: %s\")",
          "new_text": null,
          "old_line_content": "\t\t\terror(_(\"could not delete reference %s: %s\"),",
          "new_line_content": "\t\tif (refnames->nr == 1)",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "submodule_to_gitdir",
          "new_api": null,
          "old_text": "submodule_to_gitdir(&submodule_sb, submodule)",
          "new_text": null,
          "old_line_content": "\tif (submodule_to_gitdir(&submodule_sb, submodule))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"could not delete references: %s\")",
          "new_text": null,
          "old_line_content": "\t\t\terror(_(\"could not delete references: %s\"), err.buf);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*subrepo))",
          "new_text": null,
          "old_line_content": "\tsubrepo = xmalloc(sizeof(*subrepo));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "strvec_pushf",
          "new_api": null,
          "old_text": "strvec_pushf(out, \"%s%s\", namespace, exclude_patterns[i])",
          "new_text": null,
          "old_line_content": "\t\tstrvec_pushf(out, \"%s%s\", namespace, exclude_patterns[i]);",
          "new_line_content": "\tfor (size_t i = 0; exclude_patterns[i]; i++)",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": "repo_submodule_init",
          "new_api": null,
          "old_text": "repo_submodule_init(subrepo, repo, submodule,\n\t\t\t\tnull_oid())",
          "new_text": null,
          "old_line_content": "\tif (repo_submodule_init(subrepo, repo, submodule,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "ref_transaction_free",
          "new_api": null,
          "old_text": "ref_transaction_free(transaction)",
          "new_text": null,
          "old_line_content": "\tref_transaction_free(transaction);",
          "new_line_content": "\t\tret = -1;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 77,
      "total_additions": 246,
      "total_deletions": 246,
      "total_api_changes": 569
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 569,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          1192,
          1191
        ]
      }
    },
    "api_calls_before": 567,
    "api_calls_after": 567,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 16
    }
  }
}
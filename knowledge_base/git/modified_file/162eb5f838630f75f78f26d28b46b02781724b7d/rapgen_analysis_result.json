{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/162eb5f838630f75f78f26d28b46b02781724b7d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/162eb5f838630f75f78f26d28b46b02781724b7d/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/162eb5f838630f75f78f26d28b46b02781724b7d/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/162eb5f838630f75f78f26d28b46b02781724b7d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 915,
          "old_api": "end_url_with_slash",
          "new_api": "sha1_to_hex",
          "old_text": "end_url_with_slash(&buf, base_url)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tend_url_with_slash(&buf, base_url);",
          "new_line_content": "\tstrbuf_addf(&buf, \"objects/pack/pack-%s.idx\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "strbuf_addf",
          "new_api": "strbuf_detach",
          "old_text": "strbuf_addf(&buf, \"objects/pack/pack-%s.idx\", hex)",
          "new_text": "strbuf_detach(&buf, NULL)",
          "old_line_content": "\tstrbuf_addf(&buf, \"objects/pack/pack-%s.idx\", hex);",
          "new_line_content": "\turl = strbuf_detach(&buf, NULL);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "sha1_pack_index_name",
          "new_api": "http_get_file",
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": "http_get_file(url, filename, 0)",
          "old_line_content": "\tfilename = sha1_pack_index_name(sha1);",
          "new_line_content": "\tif (http_get_file(url, filename, 0) != HTTP_OK)",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "http_get_file",
          "new_api": "error",
          "old_text": "http_get_file(url, filename, 0)",
          "new_text": "error(\"Unable to get pack index %s\\n\", url)",
          "old_line_content": "\tif (http_get_file(url, filename, 0) != HTTP_OK)",
          "new_line_content": "\t\tret = error(\"Unable to get pack index %s\\n\", url);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "end_url_with_slash",
          "new_api": "strbuf_detach",
          "old_text": "end_url_with_slash(&buf, base_url)",
          "new_text": "strbuf_detach(&buf, NULL)",
          "old_line_content": "\tend_url_with_slash(&buf, base_url);",
          "new_line_content": "\turl = strbuf_detach(&buf, NULL);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "strbuf_detach",
          "new_api": "http_get_strbuf",
          "old_text": "strbuf_detach(&buf, NULL)",
          "new_text": "http_get_strbuf(url, &buf, HTTP_NO_CACHE)",
          "old_line_content": "\turl = strbuf_detach(&buf, NULL);",
          "new_line_content": "\tret = http_get_strbuf(url, &buf, HTTP_NO_CACHE);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "prefixcmp",
          "new_api": "get_sha1_hex",
          "old_text": "prefixcmp(data + i, \" pack-\")",
          "new_text": "get_sha1_hex(data + i + 6, sha1)",
          "old_line_content": "\t\t\t    !prefixcmp(data + i, \" pack-\") &&",
          "new_line_content": "\t\t\t\tget_sha1_hex(data + i + 6, sha1);",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "prefixcmp",
          "new_api": "fetch_and_setup_pack_index",
          "old_text": "prefixcmp(data + i + 46, \".pack\\n\")",
          "new_text": "fetch_and_setup_pack_index(packs_head, sha1,\n\t\t\t\t\t\t      base_url)",
          "old_line_content": "\t\t\t    !prefixcmp(data + i + 46, \".pack\\n\")) {",
          "new_line_content": "\t\t\t\tfetch_and_setup_pack_index(packs_head, sha1,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "verify_pack",
          "new_api": "install_packed_git",
          "old_text": "verify_pack(p)",
          "new_text": "install_packed_git(p)",
          "old_line_content": "\tif (verify_pack(p))",
          "new_line_content": "\tinstall_packed_git(p);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "end_url_with_slash",
          "new_api": "sha1_to_hex",
          "old_text": "end_url_with_slash(&buf, base_url)",
          "new_text": "sha1_to_hex(target->sha1)",
          "old_line_content": "\tend_url_with_slash(&buf, base_url);",
          "new_line_content": "\t\tsha1_to_hex(target->sha1));",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "strbuf_addf",
          "new_api": "strbuf_detach",
          "old_text": "strbuf_addf(&buf, \"objects/pack/pack-%s.pack\",\n\t\tsha1_to_hex(target->sha1))",
          "new_text": "strbuf_detach(&buf, NULL)",
          "old_line_content": "\tstrbuf_addf(&buf, \"objects/pack/pack-%s.pack\",",
          "new_line_content": "\tpreq->url = strbuf_detach(&buf, NULL);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "strbuf_detach",
          "new_api": "sha1_pack_name",
          "old_text": "strbuf_detach(&buf, NULL)",
          "new_text": "sha1_pack_name(target->sha1)",
          "old_line_content": "\tpreq->url = strbuf_detach(&buf, NULL);",
          "new_line_content": "\tfilename = sha1_pack_name(target->sha1);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "sha1_pack_name",
          "new_api": "fopen",
          "old_text": "sha1_pack_name(target->sha1)",
          "new_text": "fopen(preq->tmpfile, \"a\")",
          "old_line_content": "\tfilename = sha1_pack_name(target->sha1);",
          "new_line_content": "\tpreq->packfile = fopen(preq->tmpfile, \"a\");",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "fopen",
          "new_api": "error",
          "old_text": "fopen(preq->tmpfile, \"a\")",
          "new_text": "error(\"Unable to open local file %s for pack\",\n\t\t      preq->tmpfile)",
          "old_line_content": "\tpreq->packfile = fopen(preq->tmpfile, \"a\");",
          "new_line_content": "\t\terror(\"Unable to open local file %s for pack\",",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "get_active_slot",
          "new_api": "curl_easy_setopt",
          "old_text": "get_active_slot()",
          "new_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_FILE, preq->packfile)",
          "old_line_content": "\tpreq->slot = get_active_slot();",
          "new_line_content": "\tcurl_easy_setopt(preq->slot->curl, CURLOPT_FILE, preq->packfile);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "fprintf",
          "new_api": "sha1_to_hex",
          "old_text": "fprintf(stderr,\n\t\t\t\t\"Resuming fetch of pack %s at byte %ld\\n\",\n\t\t\t\tsha1_to_hex(target->sha1), prev_posn)",
          "new_text": "sha1_to_hex(target->sha1)",
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\t\tsha1_to_hex(target->sha1), prev_posn);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "sha1_to_hex",
          "new_api": "curl_slist_append",
          "old_text": "sha1_to_hex(target->sha1)",
          "new_text": "curl_slist_append(NULL, range)",
          "old_line_content": "\t\t\t\tsha1_to_hex(target->sha1), prev_posn);",
          "new_line_content": "\t\tpreq->range_header = curl_slist_append(NULL, range);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "sprintf",
          "new_api": "curl_easy_setopt",
          "old_text": "sprintf(range, \"Range: bytes=%ld-\", prev_posn)",
          "new_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,\n\t\t\tpreq->range_header)",
          "old_line_content": "\t\tsprintf(range, \"Range: bytes=%ld-\", prev_posn);",
          "new_line_content": "\t\tcurl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "snprintf",
          "new_api": "rename",
          "old_text": "snprintf(prevfile, sizeof(prevfile), \"%s.prev\", filename)",
          "new_text": "rename(freq->tmpfile, prevfile)",
          "old_line_content": "\tsnprintf(prevfile, sizeof(prevfile), \"%s.prev\", filename);",
          "new_line_content": "\trename(freq->tmpfile, prevfile);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "memset",
          "new_api": "git_inflate_init",
          "old_text": "memset(&freq->stream, 0, sizeof(freq->stream))",
          "new_text": "git_inflate_init(&freq->stream)",
          "old_line_content": "\tmemset(&freq->stream, 0, sizeof(freq->stream));",
          "new_line_content": "\tgit_inflate_init(&freq->stream);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "git_inflate_init",
          "new_api": "git_SHA1_Init",
          "old_text": "git_inflate_init(&freq->stream)",
          "new_text": "git_SHA1_Init(&freq->c)",
          "old_line_content": "\tgit_inflate_init(&freq->stream);",
          "new_line_content": "\tgit_SHA1_Init(&freq->c);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "git_SHA1_Init",
          "new_api": "get_remote_object_url",
          "old_text": "git_SHA1_Init(&freq->c)",
          "new_text": "get_remote_object_url(base_url, hex, 0)",
          "old_line_content": "\tgit_SHA1_Init(&freq->c);",
          "new_line_content": "\tfreq->url = get_remote_object_url(base_url, hex, 0);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "xread",
          "new_api": "fwrite_sha1_file",
          "old_text": "xread(prevlocal, prev_buf, PREV_BUF_SIZE)",
          "new_text": "fwrite_sha1_file(prev_buf,\n\t\t\t\t\t\t     1,\n\t\t\t\t\t\t     prev_read,\n\t\t\t\t\t\t     freq)",
          "old_line_content": "\t\t\tprev_read = xread(prevlocal, prev_buf, PREV_BUF_SIZE);",
          "new_line_content": "\t\t\t\tif (fwrite_sha1_file(prev_buf,",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "close",
          "new_api": "unlink_or_warn",
          "old_text": "close(prevlocal)",
          "new_text": "unlink_or_warn(prevfile)",
          "old_line_content": "\t\tclose(prevlocal);",
          "new_line_content": "\tunlink_or_warn(prevfile);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "memset",
          "new_api": "git_SHA1_Init",
          "old_text": "memset(&freq->stream, 0, sizeof(freq->stream))",
          "new_text": "git_SHA1_Init(&freq->c)",
          "old_line_content": "\t\tmemset(&freq->stream, 0, sizeof(freq->stream));",
          "new_line_content": "\t\tgit_SHA1_Init(&freq->c);",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "lseek",
          "new_api": "error",
          "old_text": "lseek(freq->localfile, 0, SEEK_SET)",
          "new_text": "error(\"Couldn't truncate temporary file %s: %s\",\n\t\t\t\t\t  freq->tmpfile, strerror(errno))",
          "old_line_content": "\t\t\tlseek(freq->localfile, 0, SEEK_SET);",
          "new_line_content": "\t\t\t\terror(\"Couldn't truncate temporary file %s: %s\",",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "ftruncate",
          "new_api": "strerror",
          "old_text": "ftruncate(freq->localfile, 0)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\tif (ftruncate(freq->localfile, 0) < 0) {",
          "new_line_content": "\t\t\t\t\t  freq->tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "get_active_slot",
          "new_api": "curl_easy_setopt",
          "old_text": "get_active_slot()",
          "new_text": "curl_easy_setopt(freq->slot->curl, CURLOPT_FILE, freq)",
          "old_line_content": "\tfreq->slot = get_active_slot();",
          "new_line_content": "\tcurl_easy_setopt(freq->slot->curl, CURLOPT_FILE, freq);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "sprintf",
          "new_api": "curl_easy_setopt",
          "old_text": "sprintf(range, \"Range: bytes=%ld-\", prev_posn)",
          "new_text": "curl_easy_setopt(freq->slot->curl,\n\t\t\t\t CURLOPT_HTTPHEADER, range_header)",
          "old_line_content": "\t\tsprintf(range, \"Range: bytes=%ld-\", prev_posn);",
          "new_line_content": "\t\tcurl_easy_setopt(freq->slot->curl,",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "warning",
          "new_api": "stat",
          "old_text": "warning(\"requested range invalid; we may already have all the data.\")",
          "new_text": "stat(freq->tmpfile, &st)",
          "old_line_content": "\t\twarning(\"requested range invalid; we may already have all the data.\");",
          "new_line_content": "\t\tif (stat(freq->tmpfile, &st) == 0)",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "stat",
          "new_api": "unlink_or_warn",
          "old_text": "stat(freq->tmpfile, &st)",
          "new_text": "unlink_or_warn(freq->tmpfile)",
          "old_line_content": "\t\tif (stat(freq->tmpfile, &st) == 0)",
          "new_line_content": "\t\t\t\tunlink_or_warn(freq->tmpfile);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "git_SHA1_Final",
          "new_api": "unlink_or_warn",
          "old_text": "git_SHA1_Final(freq->real_sha1, &freq->c)",
          "new_text": "unlink_or_warn(freq->tmpfile)",
          "old_line_content": "\tgit_SHA1_Final(freq->real_sha1, &freq->c);",
          "new_line_content": "\t\tunlink_or_warn(freq->tmpfile);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "unlink_or_warn",
          "new_api": "release_http_object_request",
          "old_text": "unlink_or_warn(freq->tmpfile)",
          "new_text": "release_http_object_request(freq)",
          "old_line_content": "\tunlink_or_warn(freq->tmpfile);",
          "new_line_content": "\trelease_http_object_request(freq);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1153,
          "old_api": null,
          "new_api": "mkdir",
          "old_text": null,
          "new_text": "mkdir(freq->tmpfile, 0777)",
          "old_line_content": "\t\tif (dir) {",
          "new_line_content": "\t\t\tmkdir(freq->tmpfile, 0777);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(freq->sha1, freq->real_sha1)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tif (hashcmp(freq->sha1, freq->real_sha1)) {",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "unlink_or_warn",
          "old_text": null,
          "new_text": "unlink_or_warn(freq->tmpfile)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tunlink_or_warn(freq->tmpfile);",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(freq->tmpfile,\n\t\t\t\t       O_WRONLY | O_CREAT | O_EXCL, 0666)",
          "old_line_content": "\t\t\t*dir = '/';",
          "new_line_content": "\t\tfreq->localfile = open(freq->tmpfile,",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(freq->sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tmove_temp_to_file(freq->tmpfile, sha1_file_name(freq->sha1));",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Couldn't create temporary file %s: %s\",\n\t\t      freq->tmpfile, strerror(errno))",
          "old_line_content": "",
          "new_line_content": "\t\terror(\"Couldn't create temporary file %s: %s\",",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "has_pack_index",
          "old_text": null,
          "new_text": "has_pack_index(sha1)",
          "old_line_content": "",
          "new_line_content": "\tif (has_pack_index(sha1)) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*preq))",
          "old_line_content": "\tstruct http_pack_request *preq;",
          "new_line_content": "\tpreq = xmalloc(sizeof(*preq));",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\tif (freq->localfile < 0) {",
          "new_line_content": "\t\t      freq->tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "unlink_or_warn",
          "old_text": null,
          "new_text": "unlink_or_warn(freq->tmpfile)",
          "old_line_content": "void abort_http_object_request(struct http_object_request *freq)",
          "new_line_content": "\tunlink_or_warn(freq->tmpfile);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "end_url_with_slash",
          "old_text": null,
          "new_text": "end_url_with_slash(&buf, base_url)",
          "old_line_content": "\tpreq->range_header = NULL;",
          "new_line_content": "\tend_url_with_slash(&buf, base_url);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buf, \"objects/pack/pack-%s.pack\",\n\t\tsha1_to_hex(target->sha1))",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addf(&buf, \"objects/pack/pack-%s.pack\",",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tif (http_is_verbose)",
          "new_line_content": "\t\tfprintf(stderr, \"Getting index for pack %s\\n\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&freq->stream, 0, sizeof(freq->stream))",
          "old_line_content": "\t}",
          "new_line_content": "\tmemset(&freq->stream, 0, sizeof(freq->stream));",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "end_url_with_slash",
          "old_text": null,
          "new_text": "end_url_with_slash(&buf, base_url)",
          "old_line_content": "",
          "new_line_content": "\tend_url_with_slash(&buf, base_url);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(preq->tmpfile, sizeof(preq->tmpfile), \"%s.temp\", filename)",
          "old_line_content": "",
          "new_line_content": "\tsnprintf(preq->tmpfile, sizeof(preq->tmpfile), \"%s.temp\", filename);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(freq->localfile)",
          "old_line_content": "{",
          "new_line_content": "\t\tclose(freq->localfile);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "sha1_pack_index_name",
          "old_text": null,
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "",
          "new_line_content": "\tfilename = sha1_pack_index_name(sha1);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(freq->url)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree(freq->url);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(prevfile, O_RDONLY)",
          "old_line_content": "\t * fetched.",
          "new_line_content": "\tprevlocal = open(prevfile, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(url)",
          "old_line_content": "cleanup:",
          "new_line_content": "\tfree(url);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "get_active_slot",
          "old_text": null,
          "new_text": "get_active_slot()",
          "old_line_content": "\t}",
          "new_line_content": "\tpreq->slot = get_active_slot();",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "xread",
          "old_text": null,
          "new_text": "xread(prevlocal, prev_buf, PREV_BUF_SIZE)",
          "old_line_content": "\tif (prevlocal != -1) {",
          "new_line_content": "\t\t\tprev_read = xread(prevlocal, prev_buf, PREV_BUF_SIZE);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "curl_easy_setopt",
          "old_text": null,
          "new_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_WRITEFUNCTION, fwrite)",
          "old_line_content": "\tpreq->slot->local = preq->packfile;",
          "new_line_content": "\tcurl_easy_setopt(preq->slot->curl, CURLOPT_WRITEFUNCTION, fwrite);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "release_active_slot",
          "old_text": null,
          "new_text": "release_active_slot(freq->slot)",
          "old_line_content": "\t\tfreq->slot->callback_func = NULL;",
          "new_line_content": "\t\trelease_active_slot(freq->slot);",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "fetch_pack_index",
          "old_text": null,
          "new_text": "fetch_pack_index(sha1, base_url)",
          "old_line_content": "\tstruct packed_git *new_pack;",
          "new_line_content": "\tif (fetch_pack_index(sha1, base_url))",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "parse_pack_index",
          "old_text": null,
          "new_text": "parse_pack_index(sha1)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tnew_pack = parse_pack_index(sha1);",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "ftell",
          "old_text": null,
          "new_text": "ftell(preq->packfile)",
          "old_line_content": "\t * resume where it left off",
          "new_line_content": "\tprev_posn = ftell(preq->packfile);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(prevlocal)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\tclose(prevlocal);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"Resuming fetch of pack %s at byte %ld\\n\",\n\t\t\t\tsha1_to_hex(target->sha1), prev_posn)",
          "old_line_content": "\tif (prev_posn>0) {",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(range, \"Range: bytes=%ld-\", prev_posn)",
          "old_line_content": "\t\t\t\t\"Resuming fetch of pack %s at byte %ld\\n\",",
          "new_line_content": "\t\tsprintf(range, \"Range: bytes=%ld-\", prev_posn);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&freq->stream, 0, sizeof(freq->stream))",
          "old_line_content": "\t */",
          "new_line_content": "\t\tmemset(&freq->stream, 0, sizeof(freq->stream));",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "git_inflate_init",
          "old_text": null,
          "new_text": "git_inflate_init(&freq->stream)",
          "old_line_content": "\tif (prev_read == -1) {",
          "new_line_content": "\t\tgit_inflate_init(&freq->stream);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "end_url_with_slash",
          "old_text": null,
          "new_text": "end_url_with_slash(&buf, base_url)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\tend_url_with_slash(&buf, base_url);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&buf, \"objects/info/packs\")",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addstr(&buf, \"objects/info/packs\");",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(preq->url)",
          "old_line_content": "",
          "new_line_content": "\tfree(preq->url);",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(preq)",
          "old_line_content": "abort:",
          "new_line_content": "\tfree(preq);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "lseek",
          "old_text": null,
          "new_text": "lseek(freq->localfile, 0, SEEK_SET)",
          "old_line_content": "\t\tif (prev_posn>0) {",
          "new_line_content": "\t\t\tlseek(freq->localfile, 0, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "ftruncate",
          "old_text": null,
          "new_text": "ftruncate(freq->localfile, 0)",
          "old_line_content": "\t\t\tprev_posn = 0;",
          "new_line_content": "\t\t\tif (ftruncate(freq->localfile, 0) < 0) {",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "get_active_slot",
          "old_text": null,
          "new_text": "get_active_slot()",
          "old_line_content": "\t}",
          "new_line_content": "\tfreq->slot = get_active_slot();",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "curl_easy_setopt",
          "old_text": null,
          "new_text": "curl_easy_setopt(freq->slot->curl, CURLOPT_WRITEFUNCTION, fwrite_sha1_file)",
          "old_line_content": "",
          "new_line_content": "\tcurl_easy_setopt(freq->slot->curl, CURLOPT_WRITEFUNCTION, fwrite_sha1_file);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(data + i, \" pack-\")",
          "old_line_content": "\t\t\ti++;",
          "new_line_content": "\t\t\t    !prefixcmp(data + i, \" pack-\") &&",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(data + i + 46, \".pack\\n\")",
          "old_line_content": "\t\t\tif (i + 52 <= buf.len &&",
          "new_line_content": "\t\t\t    !prefixcmp(data + i + 46, \".pack\\n\")) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "xwrite",
          "old_text": null,
          "new_text": "xwrite(freq->localfile,\n\t\t\t\t\t(char *) ptr + posn, size - posn)",
          "old_line_content": "\t\t(struct http_object_request *)data;",
          "new_line_content": "\t\tssize_t retval = xwrite(freq->localfile,",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"Resuming fetch of object %s at byte %ld\\n\",\n\t\t\t\thex, prev_posn)",
          "old_line_content": "\tif (prev_posn>0) {",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(range, \"Range: bytes=%ld-\", prev_posn)",
          "old_line_content": "\t\t\t\t\"Resuming fetch of object %s at byte %ld\\n\",",
          "new_line_content": "\t\tsprintf(range, \"Range: bytes=%ld-\", prev_posn);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "git_inflate",
          "old_text": null,
          "new_text": "git_inflate(&freq->stream, Z_SYNC_FLUSH)",
          "old_line_content": "\t\tfreq->stream.next_out = expn;",
          "new_line_content": "\t\tfreq->zret = git_inflate(&freq->stream, Z_SYNC_FLUSH);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "git_SHA1_Update",
          "old_text": null,
          "new_text": "git_SHA1_Update(&freq->c, expn,\n\t\t\t\tsizeof(expn) - freq->stream.avail_out)",
          "old_line_content": "\t\tfreq->stream.avail_out = sizeof(expn);",
          "new_line_content": "\t\tgit_SHA1_Update(&freq->c, expn,",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(url)",
          "old_line_content": "",
          "new_line_content": "\tfree(url);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(freq->tmpfile,\n\t\t\t       O_WRONLY | O_CREAT | O_EXCL, 0666)",
          "old_line_content": "\tif (freq->localfile != -1)",
          "new_line_content": "\tfreq->localfile = open(freq->tmpfile,",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "curl_slist_append",
          "old_text": null,
          "new_text": "curl_slist_append(range_header, range)",
          "old_line_content": "\t\t\t\thex, prev_posn);",
          "new_line_content": "\t\trange_header = curl_slist_append(range_header, range);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(filename)",
          "old_line_content": "",
          "new_line_content": "\tfree(filename);",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(preq->packfile)",
          "old_line_content": "{",
          "new_line_content": "\t\tfclose(preq->packfile);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(freq->url)",
          "old_line_content": "abort:",
          "new_line_content": "\tfree(freq->url);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tunsigned char *sha1)",
          "new_line_content": "\tchar *hex = sha1_to_hex(sha1);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "curl_slist_free_all",
          "old_text": null,
          "new_text": "curl_slist_free_all(preq->range_header)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tcurl_slist_free_all(preq->range_header);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(preq->url)",
          "old_line_content": "\t}",
          "new_line_content": "\tfree(preq->url);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*freq))",
          "old_line_content": "\tstruct http_object_request *freq;",
          "new_line_content": "\tfreq = xmalloc(sizeof(*freq));",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(freq->sha1, sha1)",
          "old_line_content": "",
          "new_line_content": "\thashcpy(freq->sha1, sha1);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\tfreq->localfile = -1;",
          "new_line_content": "\tfilename = sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "ftell",
          "old_text": null,
          "new_text": "ftell(preq->packfile)",
          "old_line_content": "\tstruct packed_git *p = preq->target;",
          "new_line_content": "\tp->pack_size = ftell(preq->packfile);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(preq->packfile)",
          "old_line_content": "",
          "new_line_content": "\tfclose(preq->packfile);",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(freq->tmpfile, sizeof(freq->tmpfile),\n\t\t \"%s.temp\", filename)",
          "old_line_content": "",
          "new_line_content": "\tsnprintf(freq->tmpfile, sizeof(freq->tmpfile),",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(prevfile, sizeof(prevfile), \"%s.prev\", filename)",
          "old_line_content": "\t\t \"%s.temp\", filename);",
          "new_line_content": "\tsnprintf(prevfile, sizeof(prevfile), \"%s.prev\", filename);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "unlink_or_warn",
          "old_text": null,
          "new_text": "unlink_or_warn(prevfile)",
          "old_line_content": "",
          "new_line_content": "\tunlink_or_warn(prevfile);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(freq->localfile)",
          "old_line_content": "\tstruct stat st;",
          "new_line_content": "\tclose(freq->localfile);",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "process_http_object_request",
          "old_text": null,
          "new_text": "process_http_object_request(freq)",
          "old_line_content": "\tfreq->localfile = -1;",
          "new_line_content": "\tprocess_http_object_request(freq);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"requested range invalid; we may already have all the data.\")",
          "old_line_content": "",
          "new_line_content": "\t\twarning(\"requested range invalid; we may already have all the data.\");",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"fd leakage in start: %d\", freq->localfile)",
          "old_line_content": "",
          "new_line_content": "\t\terror(\"fd leakage in start: %d\", freq->localfile);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "sha1_pack_name",
          "old_text": null,
          "new_text": "sha1_pack_name(p->sha1)",
          "old_line_content": "\t*lst = (*lst)->next;",
          "new_line_content": "\tret = move_temp_to_file(preq->tmpfile, sha1_pack_name(p->sha1));",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "verify_pack",
          "old_text": null,
          "new_text": "verify_pack(p)",
          "old_line_content": "\tif (ret)",
          "new_line_content": "\tif (verify_pack(p))",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "git_inflate_end",
          "old_text": null,
          "new_text": "git_inflate_end(&freq->stream)",
          "old_line_content": "\t}",
          "new_line_content": "\tgit_inflate_end(&freq->stream);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "git_SHA1_Final",
          "old_text": null,
          "new_text": "git_SHA1_Final(freq->real_sha1, &freq->c)",
          "old_line_content": "",
          "new_line_content": "\tgit_SHA1_Final(freq->real_sha1, &freq->c);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(freq->tmpfile, '/')",
          "old_line_content": "\t */",
          "new_line_content": "\t\tchar *dir = strrchr(freq->tmpfile, '/');",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1152,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(freq->tmpfile, '/')",
          "new_text": null,
          "old_line_content": "\t\tchar *dir = strrchr(freq->tmpfile, '/');",
          "new_line_content": "\t\t\t*dir = 0;",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(freq->tmpfile,\n\t\t\t       O_WRONLY | O_CREAT | O_EXCL, 0666)",
          "new_text": null,
          "old_line_content": "\tfreq->localfile = open(freq->tmpfile,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(freq->tmpfile)",
          "new_text": null,
          "old_line_content": "\t\tunlink_or_warn(freq->tmpfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "mkdir",
          "new_api": null,
          "old_text": "mkdir(freq->tmpfile, 0777)",
          "new_text": null,
          "old_line_content": "\t\t\tmkdir(freq->tmpfile, 0777);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(freq->sha1, freq->real_sha1)",
          "new_text": null,
          "old_line_content": "\tif (hashcmp(freq->sha1, freq->real_sha1)) {",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(freq->tmpfile)",
          "new_text": null,
          "old_line_content": "\t\t\t\tunlink_or_warn(freq->tmpfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\tchar *hex = xstrdup(sha1_to_hex(sha1));",
          "new_line_content": "\tchar *filename;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(freq->tmpfile,\n\t\t\t\t       O_WRONLY | O_CREAT | O_EXCL, 0666)",
          "new_text": null,
          "old_line_content": "\t\tfreq->localfile = open(freq->tmpfile,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(freq->tmpfile)",
          "new_text": null,
          "old_line_content": "\t\tunlink_or_warn(freq->tmpfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(freq->sha1)",
          "new_text": null,
          "old_line_content": "\t\tmove_temp_to_file(freq->tmpfile, sha1_file_name(freq->sha1));",
          "new_line_content": "\treturn freq->rename;",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "has_pack_index",
          "new_api": null,
          "old_text": "has_pack_index(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_pack_index(sha1)) {",
          "new_line_content": "\t\tret = 0;",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*preq))",
          "new_text": null,
          "old_line_content": "\tpreq = xmalloc(sizeof(*preq));",
          "new_line_content": "\tpreq->range_header = NULL;",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Couldn't create temporary file %s: %s\",\n\t\t      freq->tmpfile, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\terror(\"Couldn't create temporary file %s: %s\",",
          "new_line_content": "\t\tgoto abort;",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t      freq->tmpfile, strerror(errno));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Getting index for pack %s\\n\", hex)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Getting index for pack %s\\n\", hex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(target->sha1)",
          "new_text": null,
          "old_line_content": "\t\tsha1_to_hex(target->sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "release_http_object_request",
          "new_api": null,
          "old_text": "release_http_object_request(freq)",
          "new_text": null,
          "old_line_content": "\trelease_http_object_request(freq);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "strbuf_detach",
          "new_api": null,
          "old_text": "strbuf_detach(&buf, NULL)",
          "new_text": null,
          "old_line_content": "\turl = strbuf_detach(&buf, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(preq->tmpfile, sizeof(preq->tmpfile), \"%s.temp\", filename)",
          "new_text": null,
          "old_line_content": "\tsnprintf(preq->tmpfile, sizeof(preq->tmpfile), \"%s.temp\", filename);",
          "new_line_content": "\tif (!preq->packfile) {",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "get_remote_object_url",
          "new_api": null,
          "old_text": "get_remote_object_url(base_url, hex, 0)",
          "new_text": null,
          "old_line_content": "\tfreq->url = get_remote_object_url(base_url, hex, 0);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(freq->localfile)",
          "new_text": null,
          "old_line_content": "\t\tclose(freq->localfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Unable to get pack index %s\\n\", url)",
          "new_text": null,
          "old_line_content": "\t\tret = error(\"Unable to get pack index %s\\n\", url);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Unable to open local file %s for pack\",\n\t\t      preq->tmpfile)",
          "new_text": null,
          "old_line_content": "\t\terror(\"Unable to open local file %s for pack\",",
          "new_line_content": "\t\tgoto abort;",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(freq->url)",
          "new_text": null,
          "old_line_content": "\t\tfree(freq->url);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(hex)",
          "new_text": null,
          "old_line_content": "\tfree(hex);",
          "new_line_content": "\treturn ret;",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(url)",
          "new_text": null,
          "old_line_content": "\tfree(url);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(prevfile, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tprevlocal = open(prevfile, O_RDONLY);",
          "new_line_content": "\t\tdo {",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "fwrite_sha1_file",
          "new_api": null,
          "old_text": "fwrite_sha1_file(prev_buf,\n\t\t\t\t\t\t     1,\n\t\t\t\t\t\t     prev_read,\n\t\t\t\t\t\t     freq)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (fwrite_sha1_file(prev_buf,",
          "new_line_content": "\t\t\t\t\t\t     prev_read,",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_URL, preq->url)",
          "new_text": null,
          "old_line_content": "\tcurl_easy_setopt(preq->slot->curl, CURLOPT_URL, preq->url);",
          "new_line_content": "\t\tno_pragma_header);",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,\n\t\tno_pragma_header)",
          "new_text": null,
          "old_line_content": "\tcurl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "release_active_slot",
          "new_api": null,
          "old_text": "release_active_slot(freq->slot)",
          "new_text": null,
          "old_line_content": "\t\trelease_active_slot(freq->slot);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "fetch_pack_index",
          "new_api": null,
          "old_text": "fetch_pack_index(sha1, base_url)",
          "new_text": null,
          "old_line_content": "\tif (fetch_pack_index(sha1, base_url))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "parse_pack_index",
          "new_api": null,
          "old_text": "parse_pack_index(sha1)",
          "new_text": null,
          "old_line_content": "\tnew_pack = parse_pack_index(sha1);",
          "new_line_content": "\t\treturn -1; /* parse_pack_index() already issued error message */",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "ftell",
          "new_api": null,
          "old_text": "ftell(preq->packfile)",
          "new_text": null,
          "old_line_content": "\tprev_posn = ftell(preq->packfile);",
          "new_line_content": "\t\tif (http_is_verbose)",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(prevfile)",
          "new_text": null,
          "old_line_content": "\tunlink_or_warn(prevfile);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "curl_slist_append",
          "new_api": null,
          "old_text": "curl_slist_append(NULL, range)",
          "new_text": null,
          "old_line_content": "\t\tpreq->range_header = curl_slist_append(NULL, range);",
          "new_line_content": "\t\t\tpreq->range_header);",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,\n\t\t\tpreq->range_header)",
          "new_text": null,
          "old_line_content": "\t\tcurl_easy_setopt(preq->slot->curl, CURLOPT_HTTPHEADER,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "git_inflate_init",
          "new_api": null,
          "old_text": "git_inflate_init(&freq->stream)",
          "new_text": null,
          "old_line_content": "\t\tgit_inflate_init(&freq->stream);",
          "new_line_content": "\t\tif (prev_posn>0) {",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "git_SHA1_Init",
          "new_api": null,
          "old_text": "git_SHA1_Init(&freq->c)",
          "new_text": null,
          "old_line_content": "\t\tgit_SHA1_Init(&freq->c);",
          "new_line_content": "\t\t\tprev_posn = 0;",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&buf, \"objects/info/packs\")",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(&buf, \"objects/info/packs\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(preq->url)",
          "new_text": null,
          "old_line_content": "\tfree(preq->url);",
          "new_line_content": "\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(preq)",
          "new_text": null,
          "old_line_content": "\tfree(preq);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "http_get_strbuf",
          "new_api": null,
          "old_text": "http_get_strbuf(url, &buf, HTTP_NO_CACHE)",
          "new_text": null,
          "old_line_content": "\tret = http_get_strbuf(url, &buf, HTTP_NO_CACHE);",
          "new_line_content": "\t\tgoto cleanup;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Couldn't truncate temporary file %s: %s\",\n\t\t\t\t\t  freq->tmpfile, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\t\terror(\"Couldn't truncate temporary file %s: %s\",",
          "new_line_content": "\t\t\t\tgoto abort;",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t  freq->tmpfile, strerror(errno));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(freq->slot->curl, CURLOPT_URL, freq->url)",
          "new_text": null,
          "old_line_content": "\tcurl_easy_setopt(freq->slot->curl, CURLOPT_URL, freq->url);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(data + i + 6, sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tget_sha1_hex(data + i + 6, sha1);",
          "new_line_content": "\t\t\t\t\t\t      base_url);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "fetch_and_setup_pack_index",
          "new_api": null,
          "old_text": "fetch_and_setup_pack_index(packs_head, sha1,\n\t\t\t\t\t\t      base_url)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfetch_and_setup_pack_index(packs_head, sha1,",
          "new_line_content": "\t\t\t\ti += 51;",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "xwrite",
          "new_api": null,
          "old_text": "xwrite(freq->localfile,\n\t\t\t\t\t(char *) ptr + posn, size - posn)",
          "new_text": null,
          "old_line_content": "\t\tssize_t retval = xwrite(freq->localfile,",
          "new_line_content": "\t\tif (retval < 0)",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(freq->slot->curl, CURLOPT_HTTPHEADER, no_pragma_header)",
          "new_text": null,
          "old_line_content": "\tcurl_easy_setopt(freq->slot->curl, CURLOPT_HTTPHEADER, no_pragma_header);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\"Resuming fetch of object %s at byte %ld\\n\",\n\t\t\t\thex, prev_posn)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\t\thex, prev_posn);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "git_inflate",
          "new_api": null,
          "old_text": "git_inflate(&freq->stream, Z_SYNC_FLUSH)",
          "new_text": null,
          "old_line_content": "\t\tfreq->zret = git_inflate(&freq->stream, Z_SYNC_FLUSH);",
          "new_line_content": "\t\t\t\tsizeof(expn) - freq->stream.avail_out);",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "git_SHA1_Update",
          "new_api": null,
          "old_text": "git_SHA1_Update(&freq->c, expn,\n\t\t\t\tsizeof(expn) - freq->stream.avail_out)",
          "new_text": null,
          "old_line_content": "\t\tgit_SHA1_Update(&freq->c, expn,",
          "new_line_content": "\t} while (freq->stream.avail_in && freq->zret == Z_OK);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(url)",
          "new_text": null,
          "old_line_content": "\tfree(url);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "curl_slist_append",
          "new_api": null,
          "old_text": "curl_slist_append(range_header, range)",
          "new_text": null,
          "old_line_content": "\t\trange_header = curl_slist_append(range_header, range);",
          "new_line_content": "\t\t\t\t CURLOPT_HTTPHEADER, range_header);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "curl_easy_setopt",
          "new_api": null,
          "old_text": "curl_easy_setopt(freq->slot->curl,\n\t\t\t\t CURLOPT_HTTPHEADER, range_header)",
          "new_text": null,
          "old_line_content": "\t\tcurl_easy_setopt(freq->slot->curl,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(preq->packfile)",
          "new_text": null,
          "old_line_content": "\t\tfclose(preq->packfile);",
          "new_line_content": "\t\tpreq->slot->local = NULL;",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(freq->url)",
          "new_text": null,
          "old_line_content": "\tfree(freq->url);",
          "new_line_content": "\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\tchar *hex = sha1_to_hex(sha1);",
          "new_line_content": "\tchar prevfile[PATH_MAX];",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(freq)",
          "new_text": null,
          "old_line_content": "\tfree(freq);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "curl_slist_free_all",
          "new_api": null,
          "old_text": "curl_slist_free_all(preq->range_header)",
          "new_text": null,
          "old_line_content": "\t\tcurl_slist_free_all(preq->range_header);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(preq->url)",
          "new_text": null,
          "old_line_content": "\tfree(preq->url);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*freq))",
          "new_text": null,
          "old_line_content": "\tfreq = xmalloc(sizeof(*freq));",
          "new_line_content": "\tfreq->localfile = -1;",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(freq->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\thashcpy(freq->sha1, sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\tfilename = sha1_file_name(sha1);",
          "new_line_content": "\t\t \"%s.temp\", filename);",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "ftell",
          "new_api": null,
          "old_text": "ftell(preq->packfile)",
          "new_text": null,
          "old_line_content": "\tp->pack_size = ftell(preq->packfile);",
          "new_line_content": "\tpreq->packfile = NULL;",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(preq->packfile)",
          "new_text": null,
          "old_line_content": "\tfclose(preq->packfile);",
          "new_line_content": "\tpreq->slot->local = NULL;",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(freq->tmpfile, sizeof(freq->tmpfile),\n\t\t \"%s.temp\", filename)",
          "new_text": null,
          "old_line_content": "\tsnprintf(freq->tmpfile, sizeof(freq->tmpfile),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(freq->localfile)",
          "new_text": null,
          "old_line_content": "\tclose(freq->localfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "process_http_object_request",
          "new_api": null,
          "old_text": "process_http_object_request(freq)",
          "new_text": null,
          "old_line_content": "\tprocess_http_object_request(freq);",
          "new_line_content": "\tif (freq->http_code == 416) {",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(freq->tmpfile, prevfile)",
          "new_text": null,
          "old_line_content": "\trename(freq->tmpfile, prevfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(freq->tmpfile)",
          "new_text": null,
          "old_line_content": "\tunlink_or_warn(freq->tmpfile);",
          "new_line_content": "\tif (freq->localfile != -1)",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"fd leakage in start: %d\", freq->localfile)",
          "new_text": null,
          "old_line_content": "\t\terror(\"fd leakage in start: %d\", freq->localfile);",
          "new_line_content": "\t\t\t       O_WRONLY | O_CREAT | O_EXCL, 0666);",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(p->sha1)",
          "new_text": null,
          "old_line_content": "\tret = move_temp_to_file(preq->tmpfile, sha1_pack_name(p->sha1));",
          "new_line_content": "\t\treturn ret;",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "git_inflate_end",
          "new_api": null,
          "old_text": "git_inflate_end(&freq->stream)",
          "new_text": null,
          "old_line_content": "\tgit_inflate_end(&freq->stream);",
          "new_line_content": "\tif (freq->zret != Z_STREAM_END) {",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "install_packed_git",
          "new_api": null,
          "old_text": "install_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tinstall_packed_git(p);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 33,
      "total_additions": 74,
      "total_deletions": 76,
      "total_api_changes": 183
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 183,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 318,
    "api_calls_after": 317,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 4,
      "total_diff_lines": 34
    }
  }
}
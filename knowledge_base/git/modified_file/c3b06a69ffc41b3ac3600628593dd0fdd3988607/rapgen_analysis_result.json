{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c3b06a69ffc41b3ac3600628593dd0fdd3988607",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c3b06a69ffc41b3ac3600628593dd0fdd3988607/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c3b06a69ffc41b3ac3600628593dd0fdd3988607/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c3b06a69ffc41b3ac3600628593dd0fdd3988607/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1115,
          "old_api": "sha1_to_hex",
          "new_api": "read_sha1_file",
          "old_text": "sha1_to_hex(entry->sha1)",
          "new_text": "read_sha1_file(entry->sha1, type, &size)",
          "old_line_content": "\t\t\t    sha1_to_hex(entry->sha1), size, entry->size);",
          "new_line_content": "\t\tn->data = read_sha1_file(entry->sha1, type, &size);",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "free_delta_index",
          "new_api": "fputc",
          "old_text": "free_delta_index(array[i].index)",
          "new_text": "fputc('\\n', stderr)",
          "old_line_content": "\t\tfree_delta_index(array[i].index);",
          "new_line_content": "\t\tfputc('\\n', stderr);",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "free",
          "new_api": "free_delta_index",
          "old_text": "free(array)",
          "new_text": "free_delta_index(array[i].index)",
          "old_line_content": "\tfree(array);",
          "new_line_content": "\t\tfree_delta_index(array[i].index);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "find_deltas",
          "new_api": "get_object_details",
          "old_text": "find_deltas(sorted_by_type, window+1, depth)",
          "new_text": "get_object_details()",
          "old_line_content": "\t\tfind_deltas(sorted_by_type, window+1, depth);",
          "new_line_content": "\tget_object_details();",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "close",
          "new_api": "sha1_to_hex",
          "old_text": "close(ifd)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\tclose(ifd);",
          "new_line_content": "\t\tcached_idx = git_path(cache, sha1_to_hex(sha1), \"idx\");",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "copy_fd",
          "new_api": "sha1_to_hex",
          "old_text": "copy_fd(ifd, 1)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\tif (copy_fd(ifd, 1))",
          "new_line_content": "\t\t\tsha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "strerror",
          "new_api": "sha1_to_hex",
          "old_text": "strerror(errno)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\tdie(\"unable to open %s (%s)\", name, strerror(errno));",
          "new_line_content": "\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"pack\");",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "copy_fd",
          "new_api": "open",
          "old_text": "copy_fd(ifd, ofd)",
          "new_text": "open(name, O_CREAT | O_EXCL | O_WRONLY, 0666)",
          "old_line_content": "\t\tif (copy_fd(ifd, ofd))",
          "new_line_content": "\t\tofd = open(name, O_CREAT | O_EXCL | O_WRONLY, 0666);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "close",
          "new_api": "strerror",
          "old_text": "close(ifd)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tclose(ifd);",
          "new_line_content": "\t\t\tdie(\"unable to open %s (%s)\", name, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "snprintf",
          "new_api": "exit",
          "old_text": "snprintf(name, sizeof(name),\n\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"idx\")",
          "new_text": "exit(1)",
          "old_line_content": "\t\tsnprintf(name, sizeof(name),",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "sha1_to_hex",
          "new_api": "close",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "close(ifd)",
          "old_line_content": "\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"idx\");",
          "new_line_content": "\t\tclose(ifd);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "strerror",
          "new_api": "sha1_to_hex",
          "old_text": "strerror(errno)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\tdie(\"unable to open %s (%s)\", name, strerror(errno));",
          "new_line_content": "\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"idx\");",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "copy_fd",
          "new_api": "open",
          "old_text": "copy_fd(ifd_ix, ofd)",
          "new_text": "open(name, O_CREAT | O_EXCL | O_WRONLY, 0666)",
          "old_line_content": "\t\tif (copy_fd(ifd_ix, ofd))",
          "new_line_content": "\t\tofd = open(name, O_CREAT | O_EXCL | O_WRONLY, 0666);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "close",
          "new_api": "strerror",
          "old_text": "close(ifd_ix)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tclose(ifd_ix);",
          "new_line_content": "\t\t\tdie(\"unable to open %s (%s)\", name, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "sha1_to_hex",
          "new_api": "copy_fd",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "copy_fd(ifd_ix, ofd)",
          "old_line_content": "\t\tputs(sha1_to_hex(sha1));",
          "new_line_content": "\t\tif (copy_fd(ifd_ix, ofd))",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "strncmp",
          "new_api": "usage",
          "old_text": "strncmp(\"--depth=\", arg, 8)",
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t\tif (!strncmp(\"--depth=\", arg, 8)) {",
          "new_line_content": "\t\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "strcmp",
          "new_api": "usage",
          "old_text": "strcmp(\"--progress\", arg)",
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t\tif (!strcmp(\"--progress\", arg)) {",
          "new_line_content": "\t\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "fprintf",
          "new_api": "prepare_packed_git",
          "old_text": "fprintf(stderr, \"Generating pack...\\n\")",
          "new_text": "prepare_packed_git()",
          "old_line_content": "\t\tfprintf(stderr, \"Generating pack...\\n\");",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "ferror",
          "new_api": "fgets",
          "old_text": "ferror(stdin)",
          "new_text": "fgets(line, sizeof(line), stdin)",
          "old_line_content": "\t\t\tif (!ferror(stdin))",
          "new_line_content": "\t\tif (!fgets(line, sizeof(line), stdin)) {",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "die",
          "new_api": "feof",
          "old_text": "die(\"fgets returned NULL, not EOF, not error!\")",
          "new_text": "feof(stdin)",
          "old_line_content": "\t\t\t\tdie(\"fgets returned NULL, not EOF, not error!\");",
          "new_line_content": "\t\t\tif (feof(stdin))",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "strerror",
          "new_api": "ferror",
          "old_text": "strerror(errno)",
          "new_text": "ferror(stdin)",
          "old_line_content": "\t\t\t\tdie(\"fgets: %s\", strerror(errno));",
          "new_line_content": "\t\t\tif (!ferror(stdin))",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "clearerr",
          "new_api": "die",
          "old_text": "clearerr(stdin)",
          "new_text": "die(\"fgets returned NULL, not EOF, not error!\")",
          "old_line_content": "\t\t\tclearerr(stdin);",
          "new_line_content": "\t\t\t\tdie(\"fgets returned NULL, not EOF, not error!\");",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "add_preferred_base",
          "new_api": "die",
          "old_text": "add_preferred_base(sha1)",
          "new_text": "die(\"expected edge sha1, got garbage:\\n %s\",\n\t\t\t\t    line+1)",
          "old_line_content": "\t\t\t\tadd_preferred_base(sha1);",
          "new_line_content": "\t\t\t\tdie(\"expected edge sha1, got garbage:\\n %s\",",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "get_sha1_hex",
          "new_api": "add_preferred_base",
          "old_text": "get_sha1_hex(line, sha1)",
          "new_text": "add_preferred_base(sha1)",
          "old_line_content": "\t\tif (get_sha1_hex(line, sha1))",
          "new_line_content": "\t\t\t\tadd_preferred_base(sha1);",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "add_preferred_base_object",
          "new_api": "get_sha1_hex",
          "old_text": "add_preferred_base_object(line+41, hash)",
          "new_text": "get_sha1_hex(line, sha1)",
          "old_line_content": "\t\tadd_preferred_base_object(line+41, hash);",
          "new_line_content": "\t\tif (get_sha1_hex(line, sha1))",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "add_object_entry",
          "new_api": "die",
          "old_text": "add_object_entry(sha1, hash, 0)",
          "new_text": "die(\"expected sha1, got garbage:\\n %s\", line)",
          "old_line_content": "\t\tadd_object_entry(sha1, hash, 0);",
          "new_line_content": "\t\t\tdie(\"expected sha1, got garbage:\\n %s\", line);",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "fprintf",
          "new_api": "add_object_entry",
          "old_text": "fprintf(stderr, \"Done counting %d objects.\\n\", nr_objects)",
          "new_text": "add_object_entry(sha1, hash, 0)",
          "old_line_content": "\t\tfprintf(stderr, \"Done counting %d objects.\\n\", nr_objects);",
          "new_line_content": "\t\tadd_object_entry(sha1, hash, 0);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "write_pack_file",
          "new_api": "signal",
          "old_text": "write_pack_file()",
          "new_text": "signal(SIGALRM, SIG_IGN )",
          "old_line_content": "\t\twrite_pack_file();",
          "new_line_content": "\t\t\tsignal(SIGALRM, SIG_IGN );",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "sha1_to_hex",
          "new_api": "write_pack_file",
          "old_text": "sha1_to_hex(object_list_sha1)",
          "new_text": "write_pack_file()",
          "old_line_content": "\t\t\tputs(sha1_to_hex(object_list_sha1));",
          "new_line_content": "\t\twrite_pack_file();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1153,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(array[i].data)",
          "old_line_content": "}",
          "new_line_content": "\t\tfree(array[i].data);",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(array)",
          "old_line_content": "static void prepare_pack(int window, int depth)",
          "new_line_content": "\tfree(array);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-q\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"-q\", arg)) {",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--no-reuse-delta\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--no-reuse-delta\", arg)) {",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "create_sorted_list",
          "old_text": null,
          "new_text": "create_sorted_list(type_size_sort)",
          "old_line_content": "}",
          "new_line_content": "\tsorted_by_type = create_sorted_list(type_size_sort);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "find_deltas",
          "old_text": null,
          "new_text": "find_deltas(sorted_by_type, window+1, depth)",
          "old_line_content": "static int reuse_cached_pack(unsigned char *sha1, int pack_to_stdout)",
          "new_line_content": "\t\tfind_deltas(sorted_by_type, window+1, depth);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stdout\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--stdout\", arg)) {",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "",
          "new_line_content": "\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tcached_pack = git_path(cache, sha1_to_hex(sha1), \"pack\");",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(cached_pack, O_RDONLY)",
          "old_line_content": "",
          "new_line_content": "\tifd = open(cached_pack, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "",
          "new_line_content": "\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(cached_idx, O_RDONLY)",
          "old_line_content": "\t\t\treturn 0;",
          "new_line_content": "\t\tifd_ix = open(cached_idx, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Generating pack...\\n\")",
          "old_line_content": "",
          "new_line_content": "\t\tfprintf(stderr, \"Generating pack...\\n\");",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "create_delta",
          "old_text": null,
          "new_text": "create_delta(src_index, trg->data, size, &delta_size, max_size)",
          "old_line_content": "",
          "new_line_content": "\tdelta_buf = create_delta(src_index, trg->data, size, &delta_size, max_size);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(ifd)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tclose(ifd);",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": null,
          "new_api": "setup_progress_signal",
          "old_text": null,
          "new_text": "setup_progress_signal()",
          "old_line_content": "\tfor (;;) {",
          "new_line_content": "\t\tsetup_progress_signal();",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Reusing %d objects pack %s\\n\", nr_objects,\n\t\t\tsha1_to_hex(sha1))",
          "old_line_content": "\tif (pack_to_stdout) {",
          "new_line_content": "\t\tfprintf(stderr, \"Reusing %d objects pack %s\\n\", nr_objects,",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta_buf)",
          "old_line_content": "",
          "new_line_content": "\tfree(delta_buf);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "copy_fd",
          "old_text": null,
          "new_text": "copy_fd(ifd, 1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (copy_fd(ifd, 1))",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\telse {",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(ifd)",
          "old_line_content": "\t\tchar name[PATH_MAX];",
          "new_line_content": "\t\tclose(ifd);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tdie(\"fgets: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "clearerr",
          "old_text": null,
          "new_text": "clearerr(stdin)",
          "old_line_content": "",
          "new_line_content": "\t\t\tclearerr(stdin);",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(name, sizeof(name),\n\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"pack\")",
          "old_line_content": "\t\tif (ofd < 0)",
          "new_line_content": "\t\tsnprintf(name, sizeof(name),",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(line+1, sha1)",
          "old_line_content": "\t\t\tif (num_preferred_base++ < window)",
          "new_line_content": "\t\t\tif (get_sha1_hex(line+1, sha1))",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(array_size)",
          "old_line_content": "",
          "new_line_content": "\tstruct unpacked *array = xmalloc(array_size);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "copy_fd",
          "old_text": null,
          "new_text": "copy_fd(ifd, ofd)",
          "old_line_content": "",
          "new_line_content": "\t\tif (copy_fd(ifd, ofd))",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(array, 0, array_size)",
          "old_line_content": "\tif (progress)",
          "new_line_content": "\tmemset(array, 0, array_size);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(name, sizeof(name),\n\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"idx\")",
          "old_line_content": "\t\tif (ofd < 0)",
          "new_line_content": "\t\tsnprintf(name, sizeof(name),",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Deltifying %d objects.\\n\", nr_result)",
          "old_line_content": "\t\tstruct object_entry *entry = list[i];",
          "new_line_content": "\t\tfprintf(stderr, \"Deltifying %d objects.\\n\", nr_result);",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": null,
          "new_api": "name_hash",
          "old_text": null,
          "new_text": "name_hash(NULL, line+41)",
          "old_line_content": "\t}",
          "new_line_content": "\t\thash = name_hash(NULL, line+41);",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "add_preferred_base_object",
          "old_text": null,
          "new_text": "add_preferred_base_object(line+41, hash)",
          "old_line_content": "\tif (progress)",
          "new_line_content": "\t\tadd_preferred_base_object(line+41, hash);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(ifd_ix)",
          "old_line_content": "",
          "new_line_content": "\t\tclose(ifd_ix);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Done counting %d objects.\\n\", nr_objects)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t\tfprintf(stderr, \"Done counting %d objects.\\n\", nr_objects);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "create_final_object_list",
          "old_text": null,
          "new_text": "create_final_object_list()",
          "old_line_content": "",
          "new_line_content": "\tsorted_by_sha = create_final_object_list();",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\t\tputs(sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&ctx)",
          "old_line_content": "\t\tstruct object_entry *entry = *list++;",
          "new_line_content": "\tSHA1_Init(&ctx);",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&ctx, entry->sha1, 20)",
          "old_line_content": "\tif (progress && (nr_objects != nr_result))",
          "new_line_content": "\t\tSHA1_Update(&ctx, entry->sha1, 20);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"%4u%% (%u/%u) done\\r\",\n\t\t\t\t\tpercent, processed, nr_result)",
          "old_line_content": "\t\t\t\tlast_percent = percent;",
          "new_line_content": "\t\t\t\tfprintf(stderr, \"%4u%% (%u/%u) done\\r\",",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&sa, 0, sizeof(sa))",
          "old_line_content": "\tsa.sa_flags = SA_RESTART;",
          "new_line_content": "\tmemset(&sa, 0, sizeof(sa));",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(object_list_sha1, &ctx)",
          "old_line_content": "",
          "new_line_content": "\tSHA1_Final(object_list_sha1, &ctx);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&sa.sa_mask)",
          "old_line_content": "",
          "new_line_content": "\tsigemptyset(&sa.sa_mask);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Result has %d objects.\\n\", nr_result)",
          "old_line_content": "\t\t;",
          "new_line_content": "\t\tfprintf(stderr, \"Result has %d objects.\\n\", nr_result);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGALRM, &sa, NULL)",
          "old_line_content": "\tv.it_interval.tv_usec = 0;",
          "new_line_content": "\tsigaction(SIGALRM, &sa, NULL);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "reuse_cached_pack",
          "old_text": null,
          "new_text": "reuse_cached_pack(object_list_sha1, pack_to_stdout)",
          "old_line_content": "\t\tif (nr_result)",
          "new_line_content": "\tif (reuse_cached_pack(object_list_sha1, pack_to_stdout))",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "prepare_pack",
          "old_text": null,
          "new_text": "prepare_pack(window, depth)",
          "old_line_content": "\t\t\tstruct itimerval v = {{0,},};",
          "new_line_content": "\t\t\tprepare_pack(window, depth);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "setitimer",
          "old_text": null,
          "new_text": "setitimer(ITIMER_REAL, &v, NULL)",
          "old_line_content": "int main(int argc, char **argv)",
          "new_line_content": "\tsetitimer(ITIMER_REAL, &v, NULL);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "setitimer",
          "old_text": null,
          "new_text": "setitimer(ITIMER_REAL, &v, NULL)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tsetitimer(ITIMER_REAL, &v, NULL);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "free_delta_index",
          "old_text": null,
          "new_text": "free_delta_index(n->index)",
          "old_line_content": "\t\tn->entry = entry;",
          "new_line_content": "\t\tfree_delta_index(n->index);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(n->data)",
          "old_line_content": "\t\tif (size != entry->size)",
          "new_line_content": "\t\tfree(n->data);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "write_index_file",
          "old_text": null,
          "new_text": "write_index_file()",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\twrite_index_file();",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(object_list_sha1)",
          "old_line_content": "\tif (progress)",
          "new_line_content": "\t\t\tputs(sha1_to_hex(object_list_sha1));",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"object %s inconsistent object length (%lu vs %lu)\",\n\t\t\t    sha1_to_hex(entry->sha1), size, entry->size)",
          "old_line_content": "\t\tj = window;",
          "new_line_content": "\t\t\tdie(\"object %s inconsistent object length (%lu vs %lu)\",",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(entry->sha1)",
          "old_line_content": "\t\twhile (--j > 0) {",
          "new_line_content": "\t\t\t    sha1_to_hex(entry->sha1), size, entry->size);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "setup_git_directory",
          "old_text": null,
          "new_text": "setup_git_directory()",
          "old_line_content": "\tfor (i = 1; i < argc; i++) {",
          "new_line_content": "\tsetup_git_directory();",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "isatty",
          "old_text": null,
          "new_text": "isatty(2)",
          "old_line_content": "",
          "new_line_content": "\tprogress = isatty(2);",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Total %d, written %d (delta %d), reused %d (delta %d)\\n\",\n\t\t\tnr_result, written, written_delta, reused, reused_delta)",
          "old_line_content": "}",
          "new_line_content": "\t\tfprintf(stderr, \"Total %d, written %d (delta %d), reused %d (delta %d)\\n\",",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--non-empty\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--non-empty\", arg)) {",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "try_delta",
          "old_text": null,
          "new_text": "try_delta(n, m, m->index, depth)",
          "old_line_content": "\t\t/* if we made n a delta, and if n is already at max",
          "new_line_content": "\t\t\tif (try_delta(n, m, m->index, depth) < 0)",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--local\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--local\", arg)) {",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--incremental\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--incremental\", arg)) {",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(\"--window=\", arg, 9)",
          "old_line_content": "\t\t\t\tif (!arg[9] || *end)",
          "new_line_content": "\t\t\tif (!strncmp(\"--window=\", arg, 9)) {",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "create_delta_index",
          "old_text": null,
          "new_text": "create_delta_index(n->data, size)",
          "old_line_content": "",
          "new_line_content": "\t\tn->index = create_delta_index(n->data, size);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg+9, &end, 0)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\twindow = strtoul(arg+9, &end, 0);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"out of memory\")",
          "old_line_content": "\t\tif (idx >= window)",
          "new_line_content": "\t\t\tdie(\"out of memory\");",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(\"--depth=\", arg, 8)",
          "old_line_content": "\t\t\t\tif (!arg[8] || *end)",
          "new_line_content": "\t\t\tif (!strncmp(\"--depth=\", arg, 8)) {",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg+8, &end, 0)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tdepth = strtoul(arg+8, &end, 0);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--progress\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(\"--progress\", arg)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1280,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-q\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"-q\", arg)) {",
          "new_line_content": "\t\t\t\tprogress = 1;",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--no-reuse-delta\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--no-reuse-delta\", arg)) {",
          "new_line_content": "\t\t\t\tprogress = 0;",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "get_object_details",
          "new_api": null,
          "old_text": "get_object_details()",
          "new_text": null,
          "old_line_content": "\tget_object_details();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "create_sorted_list",
          "new_api": null,
          "old_text": "create_sorted_list(type_size_sort)",
          "new_text": null,
          "old_line_content": "\tsorted_by_type = create_sorted_list(type_size_sort);",
          "new_line_content": "static void prepare_pack(int window, int depth)",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stdout\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--stdout\", arg)) {",
          "new_line_content": "\t\t\t\tno_reuse_delta = 1;",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\t\tpack_to_stdout = 1;",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\tcached_pack = git_path(cache, sha1_to_hex(sha1), \"pack\");",
          "new_line_content": "\tchar *cached_pack, *cached_idx;",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(cached_pack, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tifd = open(cached_pack, O_RDONLY);",
          "new_line_content": "\tint ifd, ofd, ifd_ix = -1;",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(pack_usage);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "\tif (pack_to_stdout != !base_name)",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tcached_idx = git_path(cache, sha1_to_hex(sha1), \"idx\");",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(cached_idx, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tifd_ix = open(cached_idx, O_RDONLY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "create_delta",
          "new_api": null,
          "old_text": "create_delta(src_index, trg->data, size, &delta_size, max_size)",
          "new_text": null,
          "old_line_content": "\tdelta_buf = create_delta(src_index, trg->data, size, &delta_size, max_size);",
          "new_line_content": "\tif (sizediff >= max_size)",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "setup_progress_signal",
          "new_api": null,
          "old_text": "setup_progress_signal()",
          "new_text": null,
          "old_line_content": "\t\tsetup_progress_signal();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Reusing %d objects pack %s\\n\", nr_objects,\n\t\t\tsha1_to_hex(sha1))",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Reusing %d objects pack %s\\n\", nr_objects,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta_buf)",
          "new_text": null,
          "old_line_content": "\tfree(delta_buf);",
          "new_line_content": "\ttrg_entry->delta = src_entry;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tsha1_to_hex(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(line, sizeof(line), stdin)",
          "new_text": null,
          "old_line_content": "\t\tif (!fgets(line, sizeof(line), stdin)) {",
          "new_line_content": "\t\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(stdin)",
          "new_text": null,
          "old_line_content": "\t\t\tif (feof(stdin))",
          "new_line_content": "\t\tunsigned hash;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(ifd)",
          "new_text": null,
          "old_line_content": "\t\tclose(ifd);",
          "new_line_content": "\tif (pack_to_stdout) {",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(name, sizeof(name),\n\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"pack\")",
          "new_text": null,
          "old_line_content": "\t\tsnprintf(name, sizeof(name),",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t \"%s-%s.%s\", base_name, sha1_to_hex(sha1), \"pack\");",
          "new_line_content": "\telse {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(name, O_CREAT | O_EXCL | O_WRONLY, 0666)",
          "new_text": null,
          "old_line_content": "\t\tofd = open(name, O_CREAT | O_EXCL | O_WRONLY, 0666);",
          "new_line_content": "\t\tchar name[PATH_MAX];",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(line+1, sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (get_sha1_hex(line+1, sha1))",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(array_size)",
          "new_text": null,
          "old_line_content": "\tstruct unpacked *array = xmalloc(array_size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"expected edge sha1, got garbage:\\n %s\",\n\t\t\t\t    line+1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdie(\"expected edge sha1, got garbage:\\n %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\tif (ofd < 0)",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(array, 0, array_size)",
          "new_text": null,
          "old_line_content": "\tmemset(array, 0, array_size);",
          "new_line_content": "\tunsigned processed = 0;",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(name, O_CREAT | O_EXCL | O_WRONLY, 0666)",
          "new_text": null,
          "old_line_content": "\t\tofd = open(name, O_CREAT | O_EXCL | O_WRONLY, 0666);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Deltifying %d objects.\\n\", nr_result)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Deltifying %d objects.\\n\", nr_result);",
          "new_line_content": "\ti = nr_objects;",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"expected sha1, got garbage:\\n %s\", line)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"expected sha1, got garbage:\\n %s\", line);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": "name_hash",
          "new_api": null,
          "old_text": "name_hash(NULL, line+41)",
          "new_text": null,
          "old_line_content": "\t\thash = name_hash(NULL, line+41);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\tif (ofd < 0)",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "create_final_object_list",
          "new_api": null,
          "old_text": "create_final_object_list()",
          "new_text": null,
          "old_line_content": "\tsorted_by_sha = create_final_object_list();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&ctx)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&ctx);",
          "new_line_content": "\tif (non_empty && !nr_result)",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&ctx, entry->sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\tSHA1_Update(&ctx, entry->sha1, 20);",
          "new_line_content": "\tlist = sorted_by_sha;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"%4u%% (%u/%u) done\\r\",\n\t\t\t\t\tpercent, processed, nr_result)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, \"%4u%% (%u/%u) done\\r\",",
          "new_line_content": "\t\tif (progress) {",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&sa, 0, sizeof(sa))",
          "new_text": null,
          "old_line_content": "\tmemset(&sa, 0, sizeof(sa));",
          "new_line_content": "\tstruct sigaction sa;",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(object_list_sha1, &ctx)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(object_list_sha1, &ctx);",
          "new_line_content": "\t\tstruct object_entry *entry = *list++;",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&sa.sa_mask)",
          "new_text": null,
          "old_line_content": "\tsigemptyset(&sa.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Result has %d objects.\\n\", nr_result)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Result has %d objects.\\n\", nr_result);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGALRM, &sa, NULL)",
          "new_text": null,
          "old_line_content": "\tsigaction(SIGALRM, &sa, NULL);",
          "new_line_content": "\tsa.sa_handler = progress_interval;",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": "reuse_cached_pack",
          "new_api": null,
          "old_text": "reuse_cached_pack(object_list_sha1, pack_to_stdout)",
          "new_text": null,
          "old_line_content": "\tif (reuse_cached_pack(object_list_sha1, pack_to_stdout))",
          "new_line_content": "\tif (progress && (nr_objects != nr_result))",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": "prepare_pack",
          "new_api": null,
          "old_text": "prepare_pack(window, depth)",
          "new_text": null,
          "old_line_content": "\t\t\tprepare_pack(window, depth);",
          "new_line_content": "\t\t;",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "setitimer",
          "new_api": null,
          "old_text": "setitimer(ITIMER_REAL, &v, NULL)",
          "new_text": null,
          "old_line_content": "\tsetitimer(ITIMER_REAL, &v, NULL);",
          "new_line_content": "\tv.it_interval.tv_sec = 1;",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "setitimer",
          "new_api": null,
          "old_text": "setitimer(ITIMER_REAL, &v, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tsetitimer(ITIMER_REAL, &v, NULL);",
          "new_line_content": "\t\tif (progress && pack_to_stdout) {",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGALRM, SIG_IGN )",
          "new_text": null,
          "old_line_content": "\t\t\tsignal(SIGALRM, SIG_IGN );",
          "new_line_content": "\t\t\t/* the other end usually displays progress itself */",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "free_delta_index",
          "new_api": null,
          "old_text": "free_delta_index(n->index)",
          "new_text": null,
          "old_line_content": "\t\tfree_delta_index(n->index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(n->data)",
          "new_text": null,
          "old_line_content": "\t\tfree(n->data);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(entry->sha1, type, &size)",
          "new_text": null,
          "old_line_content": "\t\tn->data = read_sha1_file(entry->sha1, type, &size);",
          "new_line_content": "\t\tn->index = NULL;",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "write_index_file",
          "new_api": null,
          "old_text": "write_index_file()",
          "new_text": null,
          "old_line_content": "\t\t\twrite_index_file();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"object %s inconsistent object length (%lu vs %lu)\",\n\t\t\t    sha1_to_hex(entry->sha1), size, entry->size)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"object %s inconsistent object length (%lu vs %lu)\",",
          "new_line_content": "\t\tn->entry = entry;",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "setup_git_directory",
          "new_api": null,
          "old_text": "setup_git_directory()",
          "new_text": null,
          "old_line_content": "\tsetup_git_directory();",
          "new_line_content": "\tint num_preferred_base = 0;",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "isatty",
          "new_api": null,
          "old_text": "isatty(2)",
          "new_text": null,
          "old_line_content": "\tprogress = isatty(2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Total %d, written %d (delta %d), reused %d (delta %d)\\n\",\n\t\t\tnr_result, written, written_delta, reused, reused_delta)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Total %d, written %d (delta %d), reused %d (delta %d)\\n\",",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--non-empty\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--non-empty\", arg)) {",
          "new_line_content": "\t\tconst char *arg = argv[i];",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "try_delta",
          "new_api": null,
          "old_text": "try_delta(n, m, m->index, depth)",
          "new_text": null,
          "old_line_content": "\t\t\tif (try_delta(n, m, m->index, depth) < 0)",
          "new_line_content": "\t\t\tm = array + other_idx;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--local\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--local\", arg)) {",
          "new_line_content": "\t\t\t\tnon_empty = 1;",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--incremental\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(\"--incremental\", arg)) {",
          "new_line_content": "\t\t\t\tlocal = 1;",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(\"--window=\", arg, 9)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strncmp(\"--window=\", arg, 9)) {",
          "new_line_content": "\t\t\t\tincremental = 1;",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "create_delta_index",
          "new_api": null,
          "old_text": "create_delta_index(n->data, size)",
          "new_text": null,
          "old_line_content": "\t\tn->index = create_delta_index(n->data, size);",
          "new_line_content": "\t\tif (entry->delta && depth <= entry->depth)",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg+9, &end, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\twindow = strtoul(arg+9, &end, 0);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"out of memory\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"out of memory\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\t\tchar *end;",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg+8, &end, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdepth = strtoul(arg+8, &end, 0);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\t\tchar *end;",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', stderr)",
          "new_text": null,
          "old_line_content": "\t\tfputc('\\n', stderr);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(array[i].data)",
          "new_text": null,
          "old_line_content": "\t\tfree(array[i].data);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 29,
      "total_additions": 69,
      "total_deletions": 69,
      "total_api_changes": 167
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 167,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          1040,
          1042,
          1043,
          1044,
          1045
        ]
      }
    },
    "api_calls_before": 240,
    "api_calls_after": 240,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 2,
      "total_diff_lines": 20
    }
  }
}
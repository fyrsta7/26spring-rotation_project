{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ca598d5f2ab988935a5b882b44122cbfa5fd99f5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ca598d5f2ab988935a5b882b44122cbfa5fd99f5/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ca598d5f2ab988935a5b882b44122cbfa5fd99f5/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ca598d5f2ab988935a5b882b44122cbfa5fd99f5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 261,
          "old_api": "add_fsmonitor",
          "new_api": "remove_fsmonitor",
          "old_text": "add_fsmonitor(istate)",
          "new_text": "remove_fsmonitor(istate)",
          "old_line_content": "\t\tadd_fsmonitor(istate);",
          "new_line_content": "\t\tremove_fsmonitor(istate);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 194,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&query_result)",
          "old_line_content": "\tistate->fsmonitor_last_update = last_update;",
          "new_line_content": "\tstrbuf_release(&query_result);",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": null,
          "new_api": "trace_printf_key",
          "old_text": null,
          "new_text": "trace_printf_key(&trace_fsmonitor, \"remove fsmonitor\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\ttrace_printf_key(&trace_fsmonitor, \"remove fsmonitor\");",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "add_fsmonitor",
          "old_text": null,
          "new_text": "add_fsmonitor(istate)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tadd_fsmonitor(istate);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "git_config_get_fsmonitor",
          "old_text": null,
          "new_text": "git_config_get_fsmonitor()",
          "old_line_content": "\t\tif (fsmonitor_enabled) {",
          "new_line_content": "\tint fsmonitor_enabled = git_config_get_fsmonitor();",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": null,
          "new_api": "trace_printf_key",
          "old_text": null,
          "new_text": "trace_printf_key(&trace_fsmonitor, \"add fsmonitor\")",
          "old_line_content": "",
          "new_line_content": "\t\ttrace_printf_key(&trace_fsmonitor, \"add fsmonitor\");",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": null,
          "new_api": "getnanotime",
          "old_text": null,
          "new_text": "getnanotime()",
          "old_line_content": "\t\tfor (i = 0; i < istate->cache_nr; i++)",
          "new_line_content": "\t\tistate->fsmonitor_last_update = getnanotime();",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": null,
          "new_api": "ewah_each_bit",
          "old_text": null,
          "new_text": "ewah_each_bit(istate->fsmonitor_dirty, fsmonitor_ewah_callback, istate)",
          "old_line_content": "\t\t\tif (istate->untracked)",
          "new_line_content": "\t\t\tewah_each_bit(istate->fsmonitor_dirty, fsmonitor_ewah_callback, istate);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "add_untracked_cache",
          "old_text": null,
          "new_text": "add_untracked_cache(istate)",
          "old_line_content": "",
          "new_line_content": "\t\t\tadd_untracked_cache(istate);",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "refresh_fsmonitor",
          "old_text": null,
          "new_text": "refresh_fsmonitor(istate)",
          "old_line_content": "",
          "new_line_content": "\t\trefresh_fsmonitor(istate);",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "ewah_free",
          "old_text": null,
          "new_text": "ewah_free(istate->fsmonitor_dirty)",
          "old_line_content": "",
          "new_line_content": "\t\tewah_free(istate->fsmonitor_dirty);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 224,
          "old_api": "trace_printf_key",
          "new_api": null,
          "old_text": "trace_printf_key(&trace_fsmonitor, \"remove fsmonitor\")",
          "new_text": null,
          "old_line_content": "\t\ttrace_printf_key(&trace_fsmonitor, \"remove fsmonitor\");",
          "new_line_content": "void remove_fsmonitor(struct index_state *istate)",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "remove_fsmonitor",
          "new_api": null,
          "old_text": "remove_fsmonitor(istate)",
          "new_text": null,
          "old_line_content": "\t\tremove_fsmonitor(istate);",
          "new_line_content": "\tcase -1: /* keep: do nothing */",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "git_config_get_fsmonitor",
          "new_api": null,
          "old_text": "git_config_get_fsmonitor()",
          "new_text": null,
          "old_line_content": "\tint fsmonitor_enabled = git_config_get_fsmonitor();",
          "new_line_content": "void tweak_fsmonitor(struct index_state *istate)",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "trace_printf_key",
          "new_api": null,
          "old_text": "trace_printf_key(&trace_fsmonitor, \"add fsmonitor\")",
          "new_text": null,
          "old_line_content": "\t\ttrace_printf_key(&trace_fsmonitor, \"add fsmonitor\");",
          "new_line_content": "\tint i;",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "getnanotime",
          "new_api": null,
          "old_text": "getnanotime()",
          "new_text": null,
          "old_line_content": "\t\tistate->fsmonitor_last_update = getnanotime();",
          "new_line_content": "\tif (!istate->fsmonitor_last_update) {",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "ewah_each_bit",
          "new_api": null,
          "old_text": "ewah_each_bit(istate->fsmonitor_dirty, fsmonitor_ewah_callback, istate)",
          "new_text": null,
          "old_line_content": "\t\t\tewah_each_bit(istate->fsmonitor_dirty, fsmonitor_ewah_callback, istate);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "add_untracked_cache",
          "new_api": null,
          "old_text": "add_untracked_cache(istate)",
          "new_text": null,
          "old_line_content": "\t\t\tadd_untracked_cache(istate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "refresh_fsmonitor",
          "new_api": null,
          "old_text": "refresh_fsmonitor(istate)",
          "new_text": null,
          "old_line_content": "\t\trefresh_fsmonitor(istate);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "ewah_free",
          "new_api": null,
          "old_text": "ewah_free(istate->fsmonitor_dirty)",
          "new_text": null,
          "old_line_content": "\t\tewah_free(istate->fsmonitor_dirty);",
          "new_line_content": "\t\t\t\tistate->untracked->use_fsmonitor = 1;",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&query_result)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&query_result);",
          "new_line_content": "\t\tif (istate->untracked)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 10,
      "total_deletions": 10,
      "total_api_changes": 21
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 21,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          188,
          189,
          190
        ]
      }
    },
    "api_calls_before": 49,
    "api_calls_after": 49,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 15
    }
  }
}
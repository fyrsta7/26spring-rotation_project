{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ddd63e64e4ac7e455dff3e807bf6a6977bb61456",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ddd63e64e4ac7e455dff3e807bf6a6977bb61456/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ddd63e64e4ac7e455dff3e807bf6a6977bb61456/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/ddd63e64e4ac7e455dff3e807bf6a6977bb61456/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1934,
          "old_api": "reprepare_packed_git",
          "new_api": "find_pack_entry",
          "old_text": "reprepare_packed_git()",
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\treprepare_packed_git();",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e, NULL)) {",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "xmalloc",
          "new_api": "xrealloc",
          "old_text": "xmalloc(len)",
          "new_text": "xrealloc(cached_objects,\n\t\t\t\t\t  sizeof(*cached_objects) *\n\t\t\t\t\t  cached_object_alloc)",
          "old_line_content": "\tco->buf = xmalloc(len);",
          "new_line_content": "\t\tcached_objects = xrealloc(cached_objects,",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "read_packed_sha1",
          "new_api": "find_cached_object",
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": "find_cached_object(sha1)",
          "old_line_content": "\tbuf = read_packed_sha1(sha1, type, size);",
          "new_line_content": "\tco = find_cached_object(sha1);",
          "content_same": false
        },
        {
          "line": 2049,
          "old_api": "read_packed_sha1",
          "new_api": "map_sha1_file",
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": "map_sha1_file(sha1, &mapsize)",
          "old_line_content": "\treturn read_packed_sha1(sha1, type, size);",
          "new_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "read_object",
          "new_api": "reprepare_packed_git",
          "old_text": "read_object(sha1, type, size)",
          "new_text": "reprepare_packed_git()",
          "old_line_content": "\tvoid *data = read_object(sha1, type, size);",
          "new_line_content": "\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "get_sha1_hex",
          "new_api": "free",
          "old_text": "get_sha1_hex((char *) buffer + ref_length, actual_sha1)",
          "new_text": "free(buffer)",
          "old_line_content": "\t\t    get_sha1_hex((char *) buffer + ref_length, actual_sha1)) {",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "strerror",
          "new_api": "rename",
          "old_text": "strerror(ret)",
          "new_text": "rename(tmpfile, filename)",
          "old_line_content": "\t\t\treturn error(\"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "new_line_content": "\t\tif (!rename(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "strrchr",
          "new_api": "close",
          "old_text": "strrchr(filename, '/')",
          "new_text": "close(fd)",
          "old_line_content": "\tconst char *s = strrchr(filename, '/');",
          "new_line_content": "\tif (close(fd) != 0)",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": "strcpy",
          "new_api": "directory_size",
          "old_text": "strcpy(buffer + dirlen, \"tmp_obj_XXXXXX\")",
          "new_text": "directory_size(filename)",
          "old_line_content": "\tstrcpy(buffer + dirlen, \"tmp_obj_XXXXXX\");",
          "new_line_content": "\tint fd, dirlen = directory_size(filename);",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "adjust_shared_perm",
          "new_api": "memcpy",
          "old_text": "adjust_shared_perm(buffer)",
          "new_text": "memcpy(buffer, filename, dirlen)",
          "old_line_content": "\t\tif (mkdir(buffer, 0777) || adjust_shared_perm(buffer))",
          "new_line_content": "\tmemcpy(buffer, filename, dirlen);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "mkstemp",
          "new_api": "memcpy",
          "old_text": "mkstemp(buffer)",
          "new_text": "memcpy(buffer, filename, dirlen)",
          "old_line_content": "\t\tfd = mkstemp(buffer);",
          "new_line_content": "\t\tmemcpy(buffer, filename, dirlen);",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": "deflateInit",
          "new_api": "get_object_directory",
          "old_text": "deflateInit(&stream, zlib_compression_level)",
          "new_text": "get_object_directory()",
          "old_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "new_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": "xmalloc",
          "new_api": "strerror",
          "old_text": "xmalloc(size)",
          "new_text": "strerror(errno)",
          "old_line_content": "\tcompressed = xmalloc(size);",
          "new_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "die",
          "new_api": "deflateEnd",
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "\tret = deflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": "free",
          "new_api": "sha1_to_hex",
          "old_text": "free(compressed)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tfree(compressed);",
          "new_line_content": "\t\tdie(\"deflateEnd on object %s failed (%d)\", sha1_to_hex(sha1), ret);",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "utime",
          "new_api": "close_sha1_file",
          "old_text": "utime(tmpfile, &utb)",
          "new_text": "close_sha1_file(fd)",
          "old_line_content": "\t\tif (utime(tmpfile, &utb) < 0)",
          "new_line_content": "\tclose_sha1_file(fd);",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": "warning",
          "new_api": "free",
          "old_text": "warning(\"failed utime() on %s: %s\",\n\t\t\t\ttmpfile, strerror(errno))",
          "new_text": "free(compressed)",
          "old_line_content": "\t\t\twarning(\"failed utime() on %s: %s\",",
          "new_line_content": "\tfree(compressed);",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": "sha1_pack_index_name",
          "new_api": "typename",
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": "typename(type)",
          "old_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "new_line_content": "\thdrlen = sprintf(hdr, \"%s %lu\", typename(type), len) + 1;",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": "write_sha1_file",
          "new_api": "strbuf_release",
          "old_text": "write_sha1_file(buf.buf, buf.len, type, sha1)",
          "new_text": "strbuf_release(&buf)",
          "old_line_content": "\t\tret = write_sha1_file(buf.buf, buf.len, type, sha1);",
          "new_line_content": "\t\tstrbuf_release(&buf);",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "typename",
          "new_api": "munmap",
          "old_text": "typename(type)",
          "new_text": "munmap(buf, size)",
          "old_line_content": "\t\tret = write_sha1_file(buf, size, typename(type), sha1);",
          "new_line_content": "\t\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "xsize_t",
          "new_api": "error",
          "old_text": "xsize_t(st->st_size)",
          "new_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "old_line_content": "\t\tlen = xsize_t(st->st_size);",
          "new_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": "xmalloc",
          "new_api": "strerror",
          "old_text": "xmalloc(len + 1)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\ttarget = xmalloc(len + 1);",
          "new_line_content": "\t\t\t\t     strerror(errno));",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": "readlink",
          "new_api": "index_fd",
          "old_text": "readlink(path, target, len + 1)",
          "new_text": "index_fd(sha1, fd, st, write_object, OBJ_BLOB, path)",
          "old_line_content": "\t\tif (readlink(path, target, len + 1) != st->st_size) {",
          "new_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, OBJ_BLOB, path) < 0)",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "strerror",
          "new_api": "error",
          "old_text": "strerror(errno)",
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "hash_sha1_file",
          "new_api": "readlink",
          "old_text": "hash_sha1_file(target, len, blob_type, sha1)",
          "new_text": "readlink(path, target, len + 1)",
          "old_line_content": "\t\t\thash_sha1_file(target, len, blob_type, sha1);",
          "new_line_content": "\t\tif (readlink(path, target, len + 1) != st->st_size) {",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "write_sha1_file",
          "new_api": "strerror",
          "old_text": "write_sha1_file(target, len, blob_type, sha1)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\telse if (write_sha1_file(target, len, blob_type, sha1))",
          "new_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": "error",
          "new_api": "free",
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": "free(target)",
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": "resolve_gitlink_ref",
          "new_api": "hash_sha1_file",
          "old_text": "resolve_gitlink_ref(path, \"HEAD\", sha1)",
          "new_text": "hash_sha1_file(target, len, blob_type, sha1)",
          "old_line_content": "\t\treturn resolve_gitlink_ref(path, \"HEAD\", sha1);",
          "new_line_content": "\t\t\thash_sha1_file(target, len, blob_type, sha1);",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": "read_in_full",
          "new_api": "error",
          "old_text": "read_in_full(fd, header, sizeof(*header))",
          "new_text": "error(\"%s: unsupported file type\", path)",
          "old_line_content": "\tif (read_in_full(fd, header, sizeof(*header)) < sizeof(*header))",
          "new_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "pack_version_ok",
          "new_api": "read_in_full",
          "old_text": "pack_version_ok(header->hdr_version)",
          "new_text": "read_in_full(fd, header, sizeof(*header))",
          "old_line_content": "\tif (!pack_version_ok(header->hdr_version))",
          "new_line_content": "\tif (read_in_full(fd, header, sizeof(*header)) < sizeof(*header))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2051,
          "old_api": null,
          "new_api": "unpack_sha1_file",
          "old_text": null,
          "new_text": "unpack_sha1_file(map, mapsize, type, size, sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size, sha1);",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "void *read_sha1_file(const unsigned char *sha1, enum object_type *type,",
          "new_line_content": "\t\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "\t/* legacy behavior is to die on corrupted objects */",
          "new_line_content": "\treturn read_packed_sha1(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": null,
          "new_api": "read_object",
          "old_text": null,
          "new_text": "read_object(sha1, type, size)",
          "old_line_content": "void *read_object_with_reference(const unsigned char *sha1,",
          "new_line_content": "\tvoid *data = read_object(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": null,
          "new_api": "has_packed_and_bad",
          "old_text": null,
          "new_text": "has_packed_and_bad(sha1)",
          "old_line_content": "\t\t\t\t unsigned long *size,",
          "new_line_content": "\tif (!data && (has_loose_object(sha1) || has_packed_and_bad(sha1)))",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\t\t unsigned char *actual_sha1_return)",
          "new_line_content": "\t\tdie(\"object %s is corrupted\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": null,
          "new_api": "type_from_string",
          "old_text": null,
          "new_text": "type_from_string(required_type_name)",
          "old_line_content": "\t\tif (!buffer)",
          "new_line_content": "\trequired_type = type_from_string(required_type_name);",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(actual_sha1, sha1)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\thashcpy(actual_sha1, sha1);",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(actual_sha1, &type, &isize)",
          "old_line_content": "\t\t\treturn buffer;",
          "new_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, &type, &isize);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(actual_sha1_return, actual_sha1)",
          "old_line_content": "\t\t\tref_type = \"object \";",
          "new_line_content": "\t\t\t\thashcpy(actual_sha1_return, actual_sha1);",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref_type)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tref_length = strlen(ref_type);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buffer, ref_type, ref_length)",
          "old_line_content": "\t\t * actual_sha1.  Check again. */",
          "new_line_content": "\t\t    memcmp(buffer, ref_type, ref_length) ||",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex((char *) buffer + ref_length, actual_sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t    get_sha1_hex((char *) buffer + ref_length, actual_sha1)) {",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "                                    const char *type, unsigned char *sha1,",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "old_line_content": "}",
          "new_line_content": "\t*hdrlen = sprintf(hdr, \"%s %lu\", type, len)+1;",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": " * Move the just written object into its final resting place",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "old_line_content": " */",
          "new_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, buf, len)",
          "old_line_content": "int move_temp_to_file(const char *tmpfile, const char *filename)",
          "new_line_content": "\tSHA1_Update(&c, buf, len);",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(sha1, &c)",
          "old_line_content": "{",
          "new_line_content": "\tSHA1_Final(sha1, &c);",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "\t *",
          "new_line_content": "\tint ret = link(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "",
          "new_line_content": "\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(ret)",
          "old_line_content": "",
          "new_line_content": "\t\t\treturn error(\"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "write_in_full",
          "old_text": null,
          "new_text": "write_in_full(fd, buf, len)",
          "old_line_content": "{",
          "new_line_content": "\tif (write_in_full(fd, buf, len) < 0)",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\tchar hdr[32];",
          "new_line_content": "\t\treturn error(\"file write error (%s)\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\tif (fsync_object_files)",
          "new_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "fsync_or_die",
          "old_text": null,
          "new_text": "fsync_or_die(fd, \"sha1 file\")",
          "old_line_content": "static inline int directory_size(const char *filename)",
          "new_line_content": "\t\tfsync_or_die(fd, \"sha1 file\");",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": null,
          "new_api": "fchmod",
          "old_text": null,
          "new_text": "fchmod(fd, 0444)",
          "old_line_content": "{",
          "new_line_content": "\tfchmod(fd, 0444);",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\tif (!s)",
          "new_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(filename, '/')",
          "old_line_content": " * This creates a temporary file in the same directory as the final",
          "new_line_content": "\tconst char *s = strrchr(filename, '/');",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(buffer + dirlen, \"tmp_obj_XXXXXX\")",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\tstrcpy(buffer + dirlen, \"tmp_obj_XXXXXX\");",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(buffer)",
          "old_line_content": "",
          "new_line_content": "\tfd = mkstemp(buffer);",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "adjust_shared_perm",
          "old_text": null,
          "new_text": "adjust_shared_perm(buffer)",
          "old_line_content": "\treturn fd;",
          "new_line_content": "\t\tif (mkdir(buffer, 0777) || adjust_shared_perm(buffer))",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(buffer + dirlen - 1, \"/tmp_obj_XXXXXX\")",
          "old_line_content": "\t\t\t      void *buf, unsigned long len, time_t mtime)",
          "new_line_content": "\t\tstrcpy(buffer + dirlen - 1, \"/tmp_obj_XXXXXX\");",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(buffer)",
          "old_line_content": "{",
          "new_line_content": "\t\tfd = mkstemp(buffer);",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\tfilename = sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "create_tmpfile",
          "old_text": null,
          "new_text": "create_tmpfile(tmpfile, sizeof(tmpfile), filename)",
          "old_line_content": "",
          "new_line_content": "\tfd = create_tmpfile(tmpfile, sizeof(tmpfile), filename);",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tstream.avail_out = size;",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": null,
          "new_api": "deflateInit",
          "old_text": null,
          "new_text": "deflateInit(&stream, zlib_compression_level)",
          "old_line_content": "",
          "new_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": null,
          "new_api": "deflateBound",
          "old_text": null,
          "new_text": "deflateBound(&stream, len+hdrlen)",
          "old_line_content": "\t/* First header.. */",
          "new_line_content": "\tsize = 8 + deflateBound(&stream, len+hdrlen);",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\tstream.next_in = (unsigned char *)hdr;",
          "new_line_content": "\tcompressed = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "\tif (ret != Z_STREAM_END)",
          "new_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "",
          "new_line_content": "\tret = deflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"unable to deflate new object %s (%d)\", sha1_to_hex(sha1), ret);",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": null,
          "new_api": "write_buffer",
          "old_text": null,
          "new_text": "write_buffer(fd, compressed, size)",
          "old_line_content": "\t\tutb.actime = mtime;",
          "new_line_content": "\tif (write_buffer(fd, compressed, size) < 0)",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\t\tutb.modtime = mtime;",
          "new_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "utime",
          "old_text": null,
          "new_text": "utime(tmpfile, &utb)",
          "old_line_content": "",
          "new_line_content": "\t\tif (utime(tmpfile, &utb) < 0)",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"failed utime() on %s: %s\",\n\t\t\t\ttmpfile, strerror(errno))",
          "old_line_content": "int write_sha1_file(void *buf, unsigned long len, const char *type, unsigned char *returnsha1)",
          "new_line_content": "\t\t\twarning(\"failed utime() on %s: %s\",",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "{",
          "new_line_content": "\t\t\t\ttmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": null,
          "new_api": "move_temp_to_file",
          "old_text": null,
          "new_text": "move_temp_to_file(tmpfile, filename)",
          "old_line_content": "\tint hdrlen;",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "",
          "new_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(returnsha1, sha1)",
          "old_line_content": "{",
          "new_line_content": "\t\thashcpy(returnsha1, sha1);",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": null,
          "new_api": "has_sha1_file",
          "old_text": null,
          "new_text": "has_sha1_file(sha1)",
          "old_line_content": "\tvoid *buf;",
          "new_line_content": "\tif (has_sha1_file(sha1))",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "write_loose_object",
          "old_text": null,
          "new_text": "write_loose_object(sha1, hdr, hdrlen, buf, len, 0)",
          "old_line_content": "\tenum object_type type;",
          "new_line_content": "\treturn write_loose_object(sha1, hdr, hdrlen, buf, len, 0);",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "has_loose_object",
          "old_text": null,
          "new_text": "has_loose_object(sha1)",
          "old_line_content": "}",
          "new_line_content": "\tif (has_loose_object(sha1))",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, &type, &len)",
          "old_line_content": "int has_pack_index(const unsigned char *sha1)",
          "new_line_content": "\tbuf = read_packed_sha1(sha1, &type, &len);",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tstruct stat st;",
          "new_line_content": "\t\treturn error(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": null,
          "new_api": "write_loose_object",
          "old_text": null,
          "new_text": "write_loose_object(sha1, hdr, hdrlen, buf, len, mtime)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\treturn write_loose_object(sha1, hdr, hdrlen, buf, len, mtime);",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": null,
          "new_api": "sha1_pack_index_name",
          "old_text": null,
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\tstruct stat st;",
          "new_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": null,
          "new_api": "sha1_pack_name",
          "old_text": null,
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\tstruct pack_entry e;",
          "new_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\tstruct strbuf buf;",
          "new_line_content": "\tif (find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": null,
          "new_api": "has_loose_object",
          "old_text": null,
          "new_text": "has_loose_object(sha1)",
          "old_line_content": "",
          "new_line_content": "\treturn has_loose_object(sha1);",
          "content_same": false
        },
        {
          "line": 2368,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&buf, 0)",
          "old_line_content": "\t\ttype = blob_type;",
          "new_line_content": "\tstrbuf_init(&buf, 0);",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": null,
          "new_api": "strbuf_read",
          "old_text": null,
          "new_text": "strbuf_read(&buf, fd, 4096)",
          "old_line_content": "\tif (write_object)",
          "new_line_content": "\tif (strbuf_read(&buf, fd, 4096) < 0) {",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(buf.buf, buf.len, type, sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tret = write_sha1_file(buf.buf, buf.len, type, sha1);",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": null,
          "new_api": "hash_sha1_file",
          "old_text": null,
          "new_text": "hash_sha1_file(buf.buf, buf.len, type, sha1)",
          "old_line_content": "\t     enum object_type type, const char *path)",
          "new_line_content": "\t\tret = hash_sha1_file(buf.buf, buf.len, type, sha1);",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&buf)",
          "old_line_content": "{",
          "new_line_content": "\tstrbuf_release(&buf);",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "xsize_t",
          "old_text": null,
          "new_text": "xsize_t(st->st_size)",
          "old_line_content": "",
          "new_line_content": "\tsize_t size = xsize_t(st->st_size);",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": null,
          "new_api": "xmmap",
          "old_text": null,
          "new_text": "xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\t * Convert blobs to git internal format",
          "new_line_content": "\t\tbuf = xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t */",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(st->st_mode)",
          "old_line_content": "\t\t\tre_allocated = 1;",
          "new_line_content": "\tif ((type == OBJ_BLOB) && S_ISREG(st->st_mode)) {",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&nbuf, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrbuf_init(&nbuf, 0);",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": null,
          "new_api": "convert_to_git",
          "old_text": null,
          "new_text": "convert_to_git(path, buf, size, &nbuf,\n\t\t                   write_object ? safe_crlf : 0)",
          "old_line_content": "",
          "new_line_content": "\t\tif (convert_to_git(path, buf, size, &nbuf,",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": null,
          "new_api": "strbuf_detach",
          "old_text": null,
          "new_text": "strbuf_detach(&nbuf, &size)",
          "old_line_content": "\telse",
          "new_line_content": "\t\t\tbuf = strbuf_detach(&nbuf, &size);",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\tif (size)",
          "new_line_content": "\t\tret = write_sha1_file(buf, size, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 2416,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tret = hash_sha1_file(buf, size, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(buf, size)",
          "old_line_content": "\tchar *target;",
          "new_line_content": "\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tfd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "xsize_t",
          "old_text": null,
          "new_text": "xsize_t(st->st_size)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tlen = xsize_t(st->st_size);",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(len + 1)",
          "old_line_content": "\t\tif (!write_object)",
          "new_line_content": "\t\ttarget = xmalloc(len + 1);",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "old_line_content": "\t\t\t\t     path);",
          "new_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(target, len, blob_type, sha1)",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\telse if (write_sha1_file(target, len, blob_type, sha1))",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": null,
          "new_api": "reprepare_packed_git",
          "old_text": null,
          "new_text": "reprepare_packed_git()",
          "old_line_content": "static void *read_packed_sha1(const unsigned char *sha1,",
          "new_line_content": "\t\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\t\t      enum object_type *type, unsigned long *size)",
          "new_line_content": "\t\tif (!find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(target)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": null,
          "new_api": "packed_object_info",
          "old_text": null,
          "new_text": "packed_object_info(e.p, e.offset, sizep)",
          "old_line_content": "\tvoid *data;",
          "new_line_content": "\treturn packed_object_info(e.p, e.offset, sizep);",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "resolve_gitlink_ref",
          "old_text": null,
          "new_text": "resolve_gitlink_ref(path, \"HEAD\", sha1)",
          "old_line_content": "int read_pack_header(int fd, struct pack_header *header)",
          "new_line_content": "\t\treturn resolve_gitlink_ref(path, \"HEAD\", sha1);",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\t * This should happen only in the presence of a corrupted",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": null,
          "new_api": "cache_or_unpack_entry",
          "old_text": null,
          "new_text": "cache_or_unpack_entry(e.p, e.offset, size, type, 1)",
          "old_line_content": "\t\t */",
          "new_line_content": "\tdata = cache_or_unpack_entry(e.p, e.offset, size, type, 1);",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(PACK_SIGNATURE)",
          "old_line_content": "}",
          "new_line_content": "\tif (header->hdr_signature != htonl(PACK_SIGNATURE))",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "pack_version_ok",
          "old_text": null,
          "new_text": "pack_version_ok(header->hdr_version)",
          "old_line_content": "",
          "new_line_content": "\tif (!pack_version_ok(header->hdr_version))",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"failed to read object %s at offset %\"PRIuMAX\" from %s\",\n\t\t      sha1_to_hex(sha1), (uintmax_t)e.offset, e.p->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\terror(\"failed to read object %s at offset %\"PRIuMAX\" from %s\",",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "/*",
          "new_line_content": "\t\t      sha1_to_hex(sha1), (uintmax_t)e.offset, e.p->pack_name);",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": null,
          "new_api": "mark_bad_packed_object",
          "old_text": null,
          "new_text": "mark_bad_packed_object(e.p, sha1)",
          "old_line_content": " * This is meant to hold a *small* number of objects that you would",
          "new_line_content": "\t\tmark_bad_packed_object(e.p, sha1);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "read_object",
          "old_text": null,
          "new_text": "read_object(sha1, type, size)",
          "old_line_content": " * want read_sha1_file() to be able to return, but yet you do not want",
          "new_line_content": "\t\tdata = read_object(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(co->sha1, sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!hashcmp(co->sha1, sha1))",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(sha1, empty_tree.sha1)",
          "old_line_content": "{",
          "new_line_content": "\tif (!hashcmp(sha1, empty_tree.sha1))",
          "content_same": false
        },
        {
          "line": 2014,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\t\t\t\t\t  cached_object_alloc);",
          "new_line_content": "\thash_sha1_file(buf, len, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": null,
          "new_api": "find_cached_object",
          "old_text": null,
          "new_text": "find_cached_object(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (has_sha1_file(sha1) || find_cached_object(sha1))",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "alloc_nr",
          "old_text": null,
          "new_text": "alloc_nr(cached_object_alloc)",
          "old_line_content": "\tco->type = type;",
          "new_line_content": "\t\tcached_object_alloc = alloc_nr(cached_object_alloc);",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(len)",
          "old_line_content": "\t\t  unsigned long *size)",
          "new_line_content": "\tco->buf = xmalloc(len);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(co->buf, buf, len)",
          "old_line_content": "{",
          "new_line_content": "\tmemcpy(co->buf, buf, len);",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(co->sha1, sha1)",
          "old_line_content": "\tunsigned long mapsize;",
          "new_line_content": "\thashcpy(co->sha1, sha1);",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(co->buf, co->size)",
          "old_line_content": "\tif (map) {",
          "new_line_content": "\t\treturn xmemdupz(co->buf, co->size);",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "\t\treturn buf;",
          "new_line_content": "\tbuf = read_packed_sha1(sha1, type, size);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2048,
          "old_api": "reprepare_packed_git",
          "new_api": null,
          "old_text": "reprepare_packed_git()",
          "new_text": null,
          "old_line_content": "\treprepare_packed_git();",
          "new_line_content": "\t\treturn buf;",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "has_packed_and_bad",
          "new_api": null,
          "old_text": "has_packed_and_bad(sha1)",
          "new_text": null,
          "old_line_content": "\tif (!data && (has_loose_object(sha1) || has_packed_and_bad(sha1)))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"object %s is corrupted\", sha1_to_hex(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": "type_from_string",
          "new_api": null,
          "old_text": "type_from_string(required_type_name)",
          "new_text": null,
          "old_line_content": "\trequired_type = type_from_string(required_type_name);",
          "new_line_content": "\t\t\t\t unsigned char *actual_sha1_return)",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(actual_sha1, sha1)",
          "new_text": null,
          "old_line_content": "\thashcpy(actual_sha1, sha1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(actual_sha1, &type, &isize)",
          "new_text": null,
          "old_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, &type, &isize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(actual_sha1_return, actual_sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t\thashcpy(actual_sha1_return, actual_sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_type)",
          "new_text": null,
          "old_line_content": "\t\tref_length = strlen(ref_type);",
          "new_line_content": "\t\t\tref_type = \"tree \";",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buffer, ref_type, ref_length)",
          "new_text": null,
          "old_line_content": "\t\t    memcmp(buffer, ref_type, ref_length) ||",
          "new_line_content": "\t\telse {",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "new_text": null,
          "old_line_content": "\t*hdrlen = sprintf(hdr, \"%s %lu\", type, len)+1;",
          "new_line_content": "static void write_sha1_file_prepare(const void *buf, unsigned long len,",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "new_line_content": "\tSHA_CTX c;",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, buf, len)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, buf, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(sha1, &c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(sha1, &c);",
          "new_line_content": "\t/* Generate the header */",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tint ret = link(tmpfile, filename);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!rename(tmpfile, filename))",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\tunlink(tmpfile);",
          "new_line_content": "\t * left to unlink.",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "write_in_full",
          "new_api": null,
          "old_text": "write_in_full(fd, buf, len)",
          "new_text": null,
          "old_line_content": "\tif (write_in_full(fd, buf, len) < 0)",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"file write error (%s)\", strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "fsync_or_die",
          "new_api": null,
          "old_text": "fsync_or_die(fd, \"sha1 file\")",
          "new_text": null,
          "old_line_content": "\t\tfsync_or_die(fd, \"sha1 file\");",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "fchmod",
          "new_api": null,
          "old_text": "fchmod(fd, 0444)",
          "new_text": null,
          "old_line_content": "\tfchmod(fd, 0444);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tif (close(fd) != 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "/* Finalize a file on disk, and close it. */",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": "directory_size",
          "new_api": null,
          "old_text": "directory_size(filename)",
          "new_text": null,
          "old_line_content": "\tint fd, dirlen = directory_size(filename);",
          "new_line_content": " * 'filename'",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buffer, filename, dirlen)",
          "new_text": null,
          "old_line_content": "\tmemcpy(buffer, filename, dirlen);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "mkstemp",
          "new_api": null,
          "old_text": "mkstemp(buffer)",
          "new_text": null,
          "old_line_content": "\tfd = mkstemp(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buffer, filename, dirlen)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(buffer, filename, dirlen);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(buffer + dirlen - 1, \"/tmp_obj_XXXXXX\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(buffer + dirlen - 1, \"/tmp_obj_XXXXXX\");",
          "new_line_content": "\t\t/* Make sure the directory exists */",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\tfilename = sha1_file_name(sha1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "create_tmpfile",
          "new_api": null,
          "old_text": "create_tmpfile(tmpfile, sizeof(tmpfile), filename)",
          "new_text": null,
          "old_line_content": "\tfd = create_tmpfile(tmpfile, sizeof(tmpfile), filename);",
          "new_line_content": "\tint fd, size, ret;",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "new_line_content": "\tchar *filename;",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t\tif (errno == EPERM)",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "deflateBound",
          "new_api": null,
          "old_text": "deflateBound(&stream, len+hdrlen)",
          "new_text": null,
          "old_line_content": "\tsize = 8 + deflateBound(&stream, len+hdrlen);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\t/* Compress it */",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\tret = deflate(&stream, Z_FINISH);",
          "new_line_content": "\tstream.avail_in = hdrlen;",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to deflate new object %s (%d)\", sha1_to_hex(sha1), ret);",
          "new_line_content": "\t\t/* nothing */;",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tret = deflateEnd(&stream);",
          "new_line_content": "\t/* Then the data itself.. */",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"deflateEnd on object %s failed (%d)\", sha1_to_hex(sha1), ret);",
          "new_line_content": "\tstream.avail_in = len;",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "write_buffer",
          "new_api": null,
          "old_text": "write_buffer(fd, compressed, size)",
          "new_text": null,
          "old_line_content": "\tif (write_buffer(fd, compressed, size) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": "close_sha1_file",
          "new_api": null,
          "old_text": "close_sha1_file(fd)",
          "new_text": null,
          "old_line_content": "\tclose_sha1_file(fd);",
          "new_line_content": "\tif (ret != Z_OK)",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttmpfile, strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": "move_temp_to_file",
          "new_api": null,
          "old_text": "move_temp_to_file(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "new_line_content": "\t\tutb.actime = mtime;",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(returnsha1, sha1)",
          "new_text": null,
          "old_line_content": "\t\thashcpy(returnsha1, sha1);",
          "new_line_content": "\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "has_sha1_file",
          "new_api": null,
          "old_text": "has_sha1_file(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_sha1_file(sha1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": "write_loose_object",
          "new_api": null,
          "old_text": "write_loose_object(sha1, hdr, hdrlen, buf, len, 0)",
          "new_text": null,
          "old_line_content": "\treturn write_loose_object(sha1, hdr, hdrlen, buf, len, 0);",
          "new_line_content": "\t * it out into .git/objects/??/?{38} file.",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "has_loose_object",
          "new_api": null,
          "old_text": "has_loose_object(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_loose_object(sha1))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, &type, &len)",
          "new_text": null,
          "old_line_content": "\tbuf = read_packed_sha1(sha1, &type, &len);",
          "new_line_content": "\tunsigned long len;",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tchar hdr[32];",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\thdrlen = sprintf(hdr, \"%s %lu\", typename(type), len) + 1;",
          "new_line_content": "\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "write_loose_object",
          "new_api": null,
          "old_text": "write_loose_object(sha1, hdr, hdrlen, buf, len, mtime)",
          "new_text": null,
          "old_line_content": "\treturn write_loose_object(sha1, hdr, hdrlen, buf, len, mtime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, ignore_packed)",
          "new_text": null,
          "old_line_content": "\treturn find_pack_entry(sha1, &e, ignore_packed);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": "has_loose_object",
          "new_api": null,
          "old_text": "has_loose_object(sha1)",
          "new_text": null,
          "old_line_content": "\treturn has_loose_object(sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&buf, 0)",
          "new_text": null,
          "old_line_content": "\tstrbuf_init(&buf, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "strbuf_read",
          "new_api": null,
          "old_text": "strbuf_read(&buf, fd, 4096)",
          "new_text": null,
          "old_line_content": "\tif (strbuf_read(&buf, fd, 4096) < 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&buf)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&buf);",
          "new_line_content": "int index_pipe(unsigned char *sha1, int fd, const char *type, int write_object)",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "hash_sha1_file",
          "new_api": null,
          "old_text": "hash_sha1_file(buf.buf, buf.len, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = hash_sha1_file(buf.buf, buf.len, type, sha1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&buf)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(st->st_size)",
          "new_text": null,
          "old_line_content": "\tsize_t size = xsize_t(st->st_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "xmmap",
          "new_api": null,
          "old_text": "xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\t\tbuf = xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\t     enum object_type type, const char *path)",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(st->st_mode)",
          "new_text": null,
          "old_line_content": "\tif ((type == OBJ_BLOB) && S_ISREG(st->st_mode)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&nbuf, 0)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_init(&nbuf, 0);",
          "new_line_content": "\t\ttype = OBJ_BLOB;",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": "convert_to_git",
          "new_api": null,
          "old_text": "convert_to_git(path, buf, size, &nbuf,\n\t\t                   write_object ? safe_crlf : 0)",
          "new_text": null,
          "old_line_content": "\t\tif (convert_to_git(path, buf, size, &nbuf,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(buf, size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(buf, size);",
          "new_line_content": "\t * Convert blobs to git internal format",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "strbuf_detach",
          "new_api": null,
          "old_text": "strbuf_detach(&nbuf, &size)",
          "new_text": null,
          "old_line_content": "\t\t\tbuf = strbuf_detach(&nbuf, &size);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\t\tret = hash_sha1_file(buf, size, typename(type), sha1);",
          "new_line_content": "\t\t\tre_allocated = 1;",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\t\tfree(buf);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(buf, size)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(buf, size);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(path, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tfd = open(path, O_RDONLY);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\tchar *target;",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t     strerror(errno));",
          "new_line_content": "\tsize_t len;",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "index_fd",
          "new_api": null,
          "old_text": "index_fd(sha1, fd, st, write_object, OBJ_BLOB, path)",
          "new_text": null,
          "old_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, OBJ_BLOB, path) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2432,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\tswitch (st->st_mode & S_IFMT) {",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(target)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(target);",
          "new_line_content": "\t\t\t\t     path);",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry(sha1, &e, NULL)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\t\tif (!find_pack_entry(sha1, &e, NULL))",
          "new_line_content": "\t\t/* Most likely it's a loose object. */",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(target)",
          "new_text": null,
          "old_line_content": "\t\tfree(target);",
          "new_line_content": "\t\t\t             errstr);",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "packed_object_info",
          "new_api": null,
          "old_text": "packed_object_info(e.p, e.offset, sizep)",
          "new_text": null,
          "old_line_content": "\treturn packed_object_info(e.p, e.offset, sizep);",
          "new_line_content": "\t\t\treturn status;",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry(sha1, &e, NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "cache_or_unpack_entry",
          "new_api": null,
          "old_text": "cache_or_unpack_entry(e.p, e.offset, size, type, 1)",
          "new_text": null,
          "old_line_content": "\tdata = cache_or_unpack_entry(e.p, e.offset, size, type, 1);",
          "new_line_content": "\t\t\t      enum object_type *type, unsigned long *size)",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": "htonl",
          "new_api": null,
          "old_text": "htonl(PACK_SIGNATURE)",
          "new_text": null,
          "old_line_content": "\tif (header->hdr_signature != htonl(PACK_SIGNATURE))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"failed to read object %s at offset %\"PRIuMAX\" from %s\",\n\t\t      sha1_to_hex(sha1), (uintmax_t)e.offset, e.p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\terror(\"failed to read object %s at offset %\"PRIuMAX\" from %s\",",
          "new_line_content": "\tif (!data) {",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t      sha1_to_hex(sha1), (uintmax_t)e.offset, e.p->pack_name);",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "mark_bad_packed_object",
          "new_api": null,
          "old_text": "mark_bad_packed_object(e.p, sha1)",
          "new_text": null,
          "old_line_content": "\t\tmark_bad_packed_object(e.p, sha1);",
          "new_line_content": "\t\t * We're probably in deep shit, but let's try to fetch",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": "read_object",
          "new_api": null,
          "old_text": "read_object(sha1, type, size)",
          "new_text": null,
          "old_line_content": "\t\tdata = read_object(sha1, type, size);",
          "new_line_content": "\t\t * the required object anyway from another pack or loose.",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(co->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\t\tif (!hashcmp(co->sha1, sha1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(sha1, empty_tree.sha1)",
          "new_text": null,
          "old_line_content": "\tif (!hashcmp(sha1, empty_tree.sha1))",
          "new_line_content": "\tint i;",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\thash_sha1_file(buf, len, typename(type), sha1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "find_cached_object",
          "new_api": null,
          "old_text": "find_cached_object(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_sha1_file(sha1) || find_cached_object(sha1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "alloc_nr",
          "new_api": null,
          "old_text": "alloc_nr(cached_object_alloc)",
          "new_text": null,
          "old_line_content": "\t\tcached_object_alloc = alloc_nr(cached_object_alloc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(cached_objects,\n\t\t\t\t\t  sizeof(*cached_objects) *\n\t\t\t\t\t  cached_object_alloc)",
          "new_text": null,
          "old_line_content": "\t\tcached_objects = xrealloc(cached_objects,",
          "new_line_content": "\tstruct cached_object *co;",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(co->buf, buf, len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(co->buf, buf, len);",
          "new_line_content": "\t\t\t\t\t  sizeof(*cached_objects) *",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(co->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\thashcpy(co->sha1, sha1);",
          "new_line_content": "\t\t\t\t\t  cached_object_alloc);",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "find_cached_object",
          "new_api": null,
          "old_text": "find_cached_object(sha1)",
          "new_text": null,
          "old_line_content": "\tco = find_cached_object(sha1);",
          "new_line_content": "void *read_object(const unsigned char *sha1, enum object_type *type,",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": "xmemdupz",
          "new_api": null,
          "old_text": "xmemdupz(co->buf, co->size)",
          "new_text": null,
          "old_line_content": "\t\treturn xmemdupz(co->buf, co->size);",
          "new_line_content": "\tvoid *map, *buf;",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "map_sha1_file",
          "new_api": null,
          "old_text": "map_sha1_file(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "new_line_content": "\t\t*size = co->size;",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": "unpack_sha1_file",
          "new_api": null,
          "old_text": "unpack_sha1_file(map, mapsize, type, size, sha1)",
          "new_text": null,
          "old_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size, sha1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, mapsize)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(map, mapsize);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 30,
      "total_additions": 106,
      "total_deletions": 106,
      "total_api_changes": 242
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 242,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          1932,
          1936,
          1937,
          1939,
          1940,
          1943
        ]
      }
    },
    "api_calls_before": 507,
    "api_calls_after": 507,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 1,
      "total_diff_lines": 25
    }
  }
}
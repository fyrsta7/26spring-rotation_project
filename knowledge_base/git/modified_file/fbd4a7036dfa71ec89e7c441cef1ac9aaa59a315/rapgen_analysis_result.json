{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbd4a7036dfa71ec89e7c441cef1ac9aaa59a315",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbd4a7036dfa71ec89e7c441cef1ac9aaa59a315/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbd4a7036dfa71ec89e7c441cef1ac9aaa59a315/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbd4a7036dfa71ec89e7c441cef1ac9aaa59a315/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 164,
          "old_api": "add_pending_object",
          "new_api": "mark_edge_parents_uninteresting",
          "old_text": "add_pending_object(revs, &tree->object, \"\")",
          "new_text": "mark_edge_parents_uninteresting(commit, revs, show_edge)",
          "old_line_content": "\tadd_pending_object(revs, &tree->object, \"\");",
          "new_line_content": "\t\tmark_edge_parents_uninteresting(commit, revs, show_edge);",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "show_object",
          "new_api": "get_revision",
          "old_text": "show_object(obj, NULL, name, data)",
          "new_text": "get_revision(revs)",
          "old_line_content": "\t\t\tshow_object(obj, NULL, name, data);",
          "new_line_content": "\twhile ((commit = get_revision(revs)) != NULL) {",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "free",
          "new_api": "show_object",
          "old_text": "free(revs->pending.objects)",
          "new_text": "show_object(obj, NULL, name, data)",
          "old_line_content": "\t\tfree(revs->pending.objects);",
          "new_line_content": "\t\t\tshow_object(obj, NULL, name, data);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 160,
          "old_api": null,
          "new_api": "show_edge",
          "old_text": null,
          "new_text": "show_edge(commit)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t\tshow_edge(commit);",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&base, PATH_MAX)",
          "old_line_content": "\t\t\tobj->flags |= SEEN;",
          "new_line_content": "\tstrbuf_init(&base, PATH_MAX);",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unknown pending object %s (%s)\",\n\t\t    sha1_to_hex(obj->sha1), name)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"unknown pending object %s (%s)\",",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(obj->sha1)",
          "old_line_content": "",
          "new_line_content": "\t\t    sha1_to_hex(obj->sha1), name);",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(revs->pending.objects)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(revs->pending.objects);",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "add_pending_tree",
          "old_text": null,
          "new_text": "add_pending_tree(revs, commit->tree)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tadd_pending_tree(revs, commit->tree);",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": null,
          "new_api": "show_commit",
          "old_text": null,
          "new_text": "show_commit(commit, data)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tshow_commit(commit, data);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&base)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&base);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "mark_tree_uninteresting",
          "old_text": null,
          "new_text": "mark_tree_uninteresting(commit->tree)",
          "old_line_content": "{",
          "new_line_content": "\t\tmark_tree_uninteresting(commit->tree);",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "show_edge",
          "old_text": null,
          "new_text": "show_edge(commit)",
          "old_line_content": "\tstruct strbuf base;",
          "new_line_content": "\t\t\tshow_edge(commit);",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "add_pending_object",
          "old_text": null,
          "new_text": "add_pending_object(revs, &tree->object, \"\")",
          "old_line_content": "\t\t */",
          "new_line_content": "\tadd_pending_object(revs, &tree->object, \"\");",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "process_tree",
          "old_text": null,
          "new_text": "process_tree(revs, (struct tree *)obj, show_object,\n\t\t\t\t     NULL, &base, name, data)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tprocess_tree(revs, (struct tree *)obj, show_object,",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "process_blob",
          "old_text": null,
          "new_text": "process_blob(revs, (struct blob *)obj, show_object,\n\t\t\t\t     NULL, name, data)",
          "old_line_content": "",
          "new_line_content": "\t\t\tprocess_blob(revs, (struct blob *)obj, show_object,",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "mark_tree_uninteresting",
          "old_text": null,
          "new_text": "mark_tree_uninteresting(commit->tree)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tmark_tree_uninteresting(commit->tree);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 198,
          "old_api": "process_tree",
          "new_api": null,
          "old_text": "process_tree(revs, (struct tree *)obj, show_object,\n\t\t\t\t     NULL, &base, name, data)",
          "new_text": null,
          "old_line_content": "\t\t\tprocess_tree(revs, (struct tree *)obj, show_object,",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "process_blob",
          "new_api": null,
          "old_text": "process_blob(revs, (struct blob *)obj, show_object,\n\t\t\t\t     NULL, name, data)",
          "new_text": null,
          "old_line_content": "\t\t\tprocess_blob(revs, (struct blob *)obj, show_object,",
          "new_line_content": "\tfor (i = 0; i < revs->pending.nr; i++) {",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unknown pending object %s (%s)\",\n\t\t    sha1_to_hex(obj->sha1), name)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unknown pending object %s (%s)\",",
          "new_line_content": "\t\tif (obj->flags & (UNINTERESTING | SEEN))",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&base, PATH_MAX)",
          "new_text": null,
          "old_line_content": "\tstrbuf_init(&base, PATH_MAX);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "get_revision",
          "new_api": null,
          "old_text": "get_revision(revs)",
          "new_text": null,
          "old_line_content": "\twhile ((commit = get_revision(revs)) != NULL) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(obj->sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(obj->sha1), name);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "add_pending_tree",
          "new_api": null,
          "old_text": "add_pending_tree(revs, commit->tree)",
          "new_text": null,
          "old_line_content": "\t\t\tadd_pending_tree(revs, commit->tree);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "show_commit",
          "new_api": null,
          "old_text": "show_commit(commit, data)",
          "new_text": null,
          "old_line_content": "\t\tshow_commit(commit, data);",
          "new_line_content": "void traverse_commit_list(struct rev_info *revs,",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "mark_tree_uninteresting",
          "new_api": null,
          "old_text": "mark_tree_uninteresting(commit->tree)",
          "new_text": null,
          "old_line_content": "\t\t\tmark_tree_uninteresting(commit->tree);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "mark_edge_parents_uninteresting",
          "new_api": null,
          "old_text": "mark_edge_parents_uninteresting(commit, revs, show_edge)",
          "new_text": null,
          "old_line_content": "\t\tmark_edge_parents_uninteresting(commit, revs, show_edge);",
          "new_line_content": "\t\t\tif (revs->edge_hint && !(commit->object.flags & SHOWN)) {",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&base)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&base);",
          "new_line_content": "\t\t\t\t     NULL, &base, name, data);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 14,
      "total_deletions": 11,
      "total_api_changes": 28
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 17,
        "api_related_lines": 28,
        "non_api_lines": 12,
        "non_api_line_numbers": [
          161,
          166,
          167,
          168,
          169,
          170,
          172,
          173,
          175,
          151,
          152,
          159
        ]
      }
    },
    "api_calls_before": 38,
    "api_calls_after": 41,
    "diff_info": {
      "added_lines": 17,
      "removed_lines": 0,
      "total_diff_lines": 38
    }
  }
}
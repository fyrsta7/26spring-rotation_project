{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/31216ee28a452d39d9fba6cd72d8b072eab50af1",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/31216ee28a452d39d9fba6cd72d8b072eab50af1/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/31216ee28a452d39d9fba6cd72d8b072eab50af1/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/31216ee28a452d39d9fba6cd72d8b072eab50af1/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 82,
          "old_api": "block_iter_close",
          "new_api": "block_iter_reset",
          "old_text": "block_iter_close(&it)",
          "new_text": "block_iter_reset(&it)",
          "old_line_content": "\tblock_iter_close(&it);",
          "new_line_content": "\t\tblock_iter_reset(&it);",
          "content_same": false
        },
        {
          "line": 86,
          "old_api": "reftable_record_key",
          "new_api": "check_int",
          "old_text": "reftable_record_key(&recs[i], &want)",
          "new_text": "check_int(ret, ==, 0)",
          "old_line_content": "\t\treftable_record_key(&recs[i], &want);",
          "new_line_content": "\t\tcheck_int(ret, ==, 0);",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "block_iter_seek_key",
          "new_api": "block_iter_next",
          "old_text": "block_iter_seek_key(&it, &br, &want)",
          "new_text": "block_iter_next(&it, &rec)",
          "old_line_content": "\t\tret = block_iter_seek_key(&it, &br, &want);",
          "new_line_content": "\t\tret = block_iter_next(&it, &rec);",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": "block_iter_next",
          "new_api": "reftable_record_equal",
          "old_text": "block_iter_next(&it, &rec)",
          "new_text": "reftable_record_equal(&recs[i], &rec, GIT_SHA1_RAWSZ)",
          "old_line_content": "\t\tret = block_iter_next(&it, &rec);",
          "new_line_content": "\t\tcheck(reftable_record_equal(&recs[i], &rec, GIT_SHA1_RAWSZ));",
          "content_same": false
        },
        {
          "line": 94,
          "old_api": "reftable_record_equal",
          "new_api": "block_iter_seek_key",
          "old_text": "reftable_record_equal(&recs[i], &rec, GIT_SHA1_RAWSZ)",
          "new_text": "block_iter_seek_key(&it, &br, &want)",
          "old_line_content": "\t\tcheck(reftable_record_equal(&recs[i], &rec, GIT_SHA1_RAWSZ));",
          "new_line_content": "\t\tret = block_iter_seek_key(&it, &br, &want);",
          "content_same": false
        },
        {
          "line": 97,
          "old_api": "block_iter_seek_key",
          "new_api": "block_iter_next",
          "old_text": "block_iter_seek_key(&it, &br, &want)",
          "new_text": "block_iter_next(&it, &rec)",
          "old_line_content": "\t\tret = block_iter_seek_key(&it, &br, &want);",
          "new_line_content": "\t\tret = block_iter_next(&it, &rec);",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": "reftable_record_equal",
          "new_api": "block_reader_release",
          "old_text": "reftable_record_equal(&recs[10 * (i / 10)], &rec, GIT_SHA1_RAWSZ)",
          "new_text": "block_reader_release(&br)",
          "old_line_content": "\t\tcheck(reftable_record_equal(&recs[10 * (i / 10)], &rec, GIT_SHA1_RAWSZ));",
          "new_line_content": "\tblock_reader_release(&br);",
          "content_same": false
        },
        {
          "line": 104,
          "old_api": "block_iter_close",
          "new_api": "reftable_record_release",
          "old_text": "block_iter_close(&it)",
          "new_text": "reftable_record_release(&rec)",
          "old_line_content": "\t\tblock_iter_close(&it);",
          "new_line_content": "\treftable_record_release(&rec);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 99,
          "old_api": null,
          "new_api": "reftable_record_equal",
          "old_text": null,
          "new_text": "reftable_record_equal(&recs[10 * (i / 10)], &rec, GIT_SHA1_RAWSZ)",
          "old_line_content": "",
          "new_line_content": "\t\tcheck(reftable_record_equal(&recs[10 * (i / 10)], &rec, GIT_SHA1_RAWSZ));",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": null,
          "new_api": "block_iter_close",
          "old_text": null,
          "new_text": "block_iter_close(&it)",
          "old_line_content": "",
          "new_line_content": "\tblock_iter_close(&it);",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": null,
          "new_api": "reftable_block_done",
          "old_text": null,
          "new_text": "reftable_block_done(&br.block)",
          "old_line_content": "\t}",
          "new_line_content": "\treftable_block_done(&br.block);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&want)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&want);",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": null,
          "new_api": "t_block_read_write",
          "old_text": null,
          "new_text": "t_block_read_write()",
          "old_line_content": "}",
          "new_line_content": "\tTEST(t_block_read_write(), \"read-write operations on blocks work\");",
          "content_same": false
        },
        {
          "line": 83,
          "old_api": null,
          "new_api": "reftable_record_key",
          "old_text": null,
          "new_text": "reftable_record_key(&recs[i], &want)",
          "old_line_content": "",
          "new_line_content": "\t\treftable_record_key(&recs[i], &want);",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": null,
          "new_api": "test_done",
          "old_text": null,
          "new_text": "test_done()",
          "old_line_content": "int cmd_main(int argc, const char *argv[])",
          "new_line_content": "\treturn test_done();",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": null,
          "new_api": "block_iter_seek_key",
          "old_text": null,
          "new_text": "block_iter_seek_key(&it, &br, &want)",
          "old_line_content": "\t\tstruct block_iter it = BLOCK_ITER_INIT;",
          "new_line_content": "\t\tret = block_iter_seek_key(&it, &br, &want);",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": null,
          "new_api": "check_int",
          "old_text": null,
          "new_text": "check_int(ret, ==, 0)",
          "old_line_content": "",
          "new_line_content": "\t\tcheck_int(ret, ==, 0);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 100,
          "old_api": "block_iter_next",
          "new_api": null,
          "old_text": "block_iter_next(&it, &rec)",
          "new_text": null,
          "old_line_content": "\t\tret = block_iter_next(&it, &rec);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": "check_int",
          "new_api": null,
          "old_text": "check_int(ret, ==, 0)",
          "new_text": null,
          "old_line_content": "\t\tcheck_int(ret, ==, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "block_reader_release",
          "new_api": null,
          "old_text": "block_reader_release(&br)",
          "new_text": null,
          "old_line_content": "\tblock_reader_release(&br);",
          "new_line_content": "\tfor (i = 0; i < N; i++)",
          "content_same": false
        },
        {
          "line": 109,
          "old_api": "reftable_block_done",
          "new_api": null,
          "old_text": "reftable_block_done(&br.block)",
          "new_text": null,
          "old_line_content": "\treftable_block_done(&br.block);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&want)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&want);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": "reftable_record_release",
          "new_api": null,
          "old_text": "reftable_record_release(&recs[i])",
          "new_text": null,
          "old_line_content": "\t\treftable_record_release(&recs[i]);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "reftable_record_release",
          "new_api": null,
          "old_text": "reftable_record_release(&rec)",
          "new_text": null,
          "old_line_content": "\treftable_record_release(&rec);",
          "new_line_content": "\tfor (i = 0; i < N; i++) {",
          "content_same": false
        },
        {
          "line": 117,
          "old_api": "t_block_read_write",
          "new_api": null,
          "old_text": "t_block_read_write()",
          "new_text": null,
          "old_line_content": "\tTEST(t_block_read_write(), \"read-write operations on blocks work\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 119,
          "old_api": "test_done",
          "new_api": null,
          "old_text": "test_done()",
          "new_text": null,
          "old_line_content": "\treturn test_done();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "check_int",
          "new_api": null,
          "old_text": "check_int(ret, ==, 0)",
          "new_text": null,
          "old_line_content": "\t\tcheck_int(ret, ==, 0);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 8,
      "total_additions": 9,
      "total_deletions": 10,
      "total_api_changes": 27
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 27,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 46,
    "api_calls_after": 45,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 6,
      "total_diff_lines": 31
    }
  }
}
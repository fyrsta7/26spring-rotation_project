{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b9584c5858799d5603851af5f0dbad5e7af29b22",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b9584c5858799d5603851af5f0dbad5e7af29b22/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b9584c5858799d5603851af5f0dbad5e7af29b22/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b9584c5858799d5603851af5f0dbad5e7af29b22/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2522,
          "old_api": "free",
          "new_api": "free_array_item",
          "old_text": "free((char *)atom->name)",
          "new_text": "free_array_item(array->items[i])",
          "old_line_content": "\t\tfree((char *)atom->name);",
          "new_line_content": "\t\tfree_array_item(array->items[i]);",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "free_worktrees",
          "new_api": "free",
          "old_text": "free_worktrees(ref_to_worktree_map.worktrees)",
          "new_text": "free((char *)atom->name)",
          "old_line_content": "\t\tfree_worktrees(ref_to_worktree_map.worktrees);",
          "new_line_content": "\t\tfree((char *)atom->name);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "head_ref",
          "new_api": "for_each_fullref_in",
          "old_text": "head_ref(ref_filter_handler, &ref_cbdata)",
          "new_text": "for_each_fullref_in(\"refs/heads/\", ref_filter_handler, &ref_cbdata)",
          "old_line_content": "\t\t\thead_ref(ref_filter_handler, &ref_cbdata);",
          "new_line_content": "\t\t\tret = for_each_fullref_in(\"refs/heads/\", ref_filter_handler, &ref_cbdata);",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "clear_contains_cache",
          "new_api": "for_each_fullref_in",
          "old_text": "clear_contains_cache(&ref_cbdata.no_contains_cache)",
          "new_text": "for_each_fullref_in(\"refs/tags/\", ref_filter_handler, &ref_cbdata)",
          "old_line_content": "\tclear_contains_cache(&ref_cbdata.no_contains_cache);",
          "new_line_content": "\t\t\tret = for_each_fullref_in(\"refs/tags/\", ref_filter_handler, &ref_cbdata);",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "reach_filter",
          "new_api": "head_ref",
          "old_text": "reach_filter(array, filter->unreachable_from, EXCLUDE_REACHED)",
          "new_text": "head_ref(ref_filter_handler, &ref_cbdata)",
          "old_line_content": "\treach_filter(array, filter->unreachable_from, EXCLUDE_REACHED);",
          "new_line_content": "\t\t\thead_ref(ref_filter_handler, &ref_cbdata);",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": "versioncmp",
          "new_api": "get_ref_atom_value",
          "old_text": "versioncmp(va->s, vb->s)",
          "new_text": "get_ref_atom_value(b, s->atom, &vb, &err)",
          "old_line_content": "\t\tcmp = versioncmp(va->s, vb->s);",
          "new_line_content": "\tif (get_ref_atom_value(b, s->atom, &vb, &err))",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": "strbuf_addch",
          "new_api": "hex2chr",
          "old_text": "strbuf_addch(s, *cp)",
          "new_text": "hex2chr(cp + 1)",
          "old_line_content": "\t\tstrbuf_addch(s, *cp);",
          "new_line_content": "\t\t\t\tint ch = hex2chr(cp + 1);",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "append_literal",
          "new_api": "push_stack_element",
          "old_text": "append_literal(cp, sp, &state)",
          "new_text": "push_stack_element(&state.stack)",
          "old_line_content": "\t\t\tappend_literal(cp, sp, &state);",
          "new_line_content": "\tpush_stack_element(&state.stack);",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "get_ref_atom_value",
          "new_api": "find_next",
          "old_text": "get_ref_atom_value(info, pos, &atomv, error_buf)",
          "new_text": "find_next(cp)",
          "old_line_content": "\t\tif (pos < 0 || get_ref_atom_value(info, pos, &atomv, error_buf) ||",
          "new_line_content": "\tfor (cp = format->format; *cp && (sp = find_next(cp)); cp = ep + 1) {",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": "strlen",
          "new_api": "parse_ref_filter_atom",
          "old_text": "strlen(cp)",
          "new_text": "parse_ref_filter_atom(format, sp + 2, ep, error_buf)",
          "old_line_content": "\t\tsp = cp + strlen(cp);",
          "new_line_content": "\t\tpos = parse_ref_filter_atom(format, sp + 2, ep, error_buf);",
          "content_same": false
        },
        {
          "line": 2851,
          "old_api": "append_literal",
          "new_api": "get_ref_atom_value",
          "old_text": "append_literal(cp, sp, &state)",
          "new_text": "get_ref_atom_value(info, pos, &atomv, error_buf)",
          "old_line_content": "\t\tappend_literal(cp, sp, &state);",
          "new_line_content": "\t\tif (pos < 0 || get_ref_atom_value(info, pos, &atomv, error_buf) ||",
          "content_same": false
        },
        {
          "line": 2865,
          "old_api": "strbuf_addbuf",
          "new_api": "pop_stack_element",
          "old_text": "strbuf_addbuf(final_buf, &state.stack->output)",
          "new_text": "pop_stack_element(&state.stack)",
          "old_line_content": "\tstrbuf_addbuf(final_buf, &state.stack->output);",
          "new_line_content": "\t\t\tpop_stack_element(&state.stack);",
          "content_same": false
        },
        {
          "line": 2885,
          "old_api": "strbuf_release",
          "new_api": "new_ref_array_item",
          "old_text": "strbuf_release(&output)",
          "new_text": "new_ref_array_item(name, oid)",
          "old_line_content": "\tstrbuf_release(&output);",
          "new_line_content": "\tref_item = new_ref_array_item(name, oid);",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": "free_array_item",
          "new_api": "ref_kind_from_refname",
          "old_text": "free_array_item(ref_item)",
          "new_text": "ref_kind_from_refname(name)",
          "old_line_content": "\tfree_array_item(ref_item);",
          "new_line_content": "\tref_item->kind = ref_kind_from_refname(name);",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": "CALLOC_ARRAY",
          "new_api": "parse_sorting_atom",
          "old_text": "CALLOC_ARRAY(s, 1)",
          "new_text": "parse_sorting_atom(cstr_name)",
          "old_line_content": "\tCALLOC_ARRAY(s, 1);",
          "new_line_content": "\tsorting->atom = parse_sorting_atom(cstr_name);",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": "skip_prefix",
          "new_api": "CALLOC_ARRAY",
          "old_text": "skip_prefix(arg, \"version:\", &arg)",
          "new_text": "CALLOC_ARRAY(s, 1)",
          "old_line_content": "\tif (skip_prefix(arg, \"version:\", &arg) ||",
          "new_line_content": "\tCALLOC_ARRAY(s, 1);",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "string_list_clear",
          "new_api": "parse_ref_sorting",
          "old_text": "string_list_clear(options, 0)",
          "new_text": "parse_ref_sorting(tail, item->string)",
          "old_line_content": "\tstring_list_clear(options, 0);",
          "new_line_content": "\t\t\tparse_ref_sorting(tail, item->string);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "free",
          "new_api": "string_list_clear",
          "old_text": "free(sorting)",
          "new_text": "string_list_clear(options, 0)",
          "old_line_content": "\t\tfree(sorting);",
          "new_line_content": "\tstring_list_clear(options, 0);",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "_",
          "new_api": "BUG_ON_OPT_NEG",
          "old_text": "_(\"option `%s' must point to a commit\")",
          "new_text": "BUG_ON_OPT_NEG(unset)",
          "old_line_content": "\t\treturn error(_(\"option `%s' must point to a commit\"), opt->long_name);",
          "new_line_content": "\tBUG_ON_OPT_NEG(unset);",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": "starts_with",
          "new_api": "repo_get_oid",
          "old_text": "starts_with(opt->long_name, \"no\")",
          "new_text": "repo_get_oid(the_repository, arg, &oid)",
          "old_line_content": "\tif (starts_with(opt->long_name, \"no\"))",
          "new_line_content": "\tif (repo_get_oid(the_repository, arg, &oid))",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "commit_list_insert",
          "new_api": "_",
          "old_text": "commit_list_insert(merge_commit, &rf->unreachable_from)",
          "new_text": "_(\"malformed object name %s\")",
          "old_line_content": "\t\tcommit_list_insert(merge_commit, &rf->unreachable_from);",
          "new_line_content": "\t\tdie(_(\"malformed object name %s\"), arg);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": "commit_list_insert",
          "new_api": "lookup_commit_reference_gently",
          "old_text": "commit_list_insert(merge_commit, &rf->reachable_from)",
          "new_text": "lookup_commit_reference_gently(the_repository, &oid, 0)",
          "old_line_content": "\t\tcommit_list_insert(merge_commit, &rf->reachable_from);",
          "new_line_content": "\tmerge_commit = lookup_commit_reference_gently(the_repository, &oid, 0);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2563,
          "old_api": null,
          "new_api": "tips_reachable_from_bases",
          "old_text": null,
          "new_text": "tips_reachable_from_bases(the_repository,\n\t\t\t\t  check_reachable,\n\t\t\t\t  to_clear, array->nr,\n\t\t\t\t  UNINTERESTING)",
          "old_line_content": "\tfor (i = 0; i < old_nr; i++) {",
          "new_line_content": "\ttips_reachable_from_bases(the_repository,",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": null,
          "new_api": "free_array_item",
          "old_text": null,
          "new_text": "free_array_item(item)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfree_array_item(item);",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": null,
          "new_api": "clear_commit_marks_many",
          "old_text": null,
          "new_text": "clear_commit_marks_many(old_nr, to_clear, ALL_REV_FLAGS)",
          "old_line_content": "}",
          "new_line_content": "\tclear_commit_marks_many(old_nr, to_clear, ALL_REV_FLAGS);",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": null,
          "new_api": "pop_commit",
          "old_text": null,
          "new_text": "pop_commit(&check_reachable)",
          "old_line_content": "\t\t\t struct ref_format *format,",
          "new_line_content": "\t\tstruct commit *merge_commit = pop_commit(&check_reachable);",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": null,
          "new_api": "clear_commit_marks",
          "old_text": null,
          "new_text": "clear_commit_marks(merge_commit, ALL_REV_FLAGS)",
          "old_line_content": "\t\t\t struct ref_array *array)",
          "new_line_content": "\t\tclear_commit_marks(merge_commit, ALL_REV_FLAGS);",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(to_clear)",
          "old_line_content": "\tsize_t commits_nr = format->bases.nr + array->nr;",
          "new_line_content": "\tfree(to_clear);",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "ALLOC_ARRAY",
          "old_text": null,
          "new_text": "ALLOC_ARRAY(commits, commits_nr)",
          "old_line_content": "\tfor (size_t i = 0; i < array->nr; i++) {",
          "new_line_content": "\tALLOC_ARRAY(commits, commits_nr);",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": null,
          "new_api": "st_mult",
          "old_text": null,
          "new_text": "st_mult(format->bases.nr, array->nr)",
          "old_line_content": "\t\tif (!commits[commits_nr])",
          "new_line_content": "\tALLOC_ARRAY(array->counts, st_mult(format->bases.nr, array->nr));",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "lookup_commit_reference_by_name",
          "old_text": null,
          "new_text": "lookup_commit_reference_by_name(name)",
          "old_line_content": "\t\t\tcount = &array->counts[array->counts_nr++];",
          "new_line_content": "\t\tcommits[commits_nr] = lookup_commit_reference_by_name(name);",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": null,
          "new_api": "CALLOC_ARRAY",
          "old_text": null,
          "new_text": "CALLOC_ARRAY(array->items[i]->counts, format->bases.nr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tCALLOC_ARRAY(array->items[i]->counts, format->bases.nr);",
          "content_same": false
        },
        {
          "line": 2630,
          "old_api": null,
          "new_api": "ahead_behind",
          "old_text": null,
          "new_text": "ahead_behind(r, commits, commits_nr, array->counts, array->counts_nr)",
          "old_line_content": " * filtered refs in the ref_array structure.",
          "new_line_content": "\tahead_behind(r, commits, commits_nr, array->counts, array->counts_nr);",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(commits)",
          "old_line_content": " */",
          "new_line_content": "\tfree(commits);",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": null,
          "new_api": "init_contains_cache",
          "old_text": null,
          "new_text": "init_contains_cache(&ref_cbdata.contains_cache)",
          "old_line_content": "\t\t * For common cases where we need only branches or remotes or tags,",
          "new_line_content": "\tinit_contains_cache(&ref_cbdata.contains_cache);",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": null,
          "new_api": "init_contains_cache",
          "old_text": null,
          "new_text": "init_contains_cache(&ref_cbdata.no_contains_cache)",
          "old_line_content": "\t\t * we only iterate through those refs. If a mix of refs is needed,",
          "new_line_content": "\tinit_contains_cache(&ref_cbdata.no_contains_cache);",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"filter_refs: invalid type\")",
          "old_line_content": "\t\tif (filter->kind == FILTER_REFS_BRANCHES)",
          "new_line_content": "\t\tdie(\"filter_refs: invalid type\");",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "for_each_fullref_in",
          "old_text": null,
          "new_text": "for_each_fullref_in(\"refs/remotes/\", ref_filter_handler, &ref_cbdata)",
          "old_line_content": "",
          "new_line_content": "\t\t\tret = for_each_fullref_in(\"refs/remotes/\", ref_filter_handler, &ref_cbdata);",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": null,
          "new_api": "for_each_fullref_in_pattern",
          "old_text": null,
          "new_text": "for_each_fullref_in_pattern(filter, ref_filter_handler, &ref_cbdata)",
          "old_line_content": "\t/*  Filters that need revision walking */",
          "new_line_content": "\t\t\tret = for_each_fullref_in_pattern(filter, ref_filter_handler, &ref_cbdata);",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": null,
          "new_api": "clear_contains_cache",
          "old_text": null,
          "new_text": "clear_contains_cache(&ref_cbdata.contains_cache)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tclear_contains_cache(&ref_cbdata.contains_cache);",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": null,
          "new_api": "clear_contains_cache",
          "old_text": null,
          "new_text": "clear_contains_cache(&ref_cbdata.no_contains_cache)",
          "old_line_content": "}",
          "new_line_content": "\tclear_contains_cache(&ref_cbdata.no_contains_cache);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "reach_filter",
          "old_text": null,
          "new_text": "reach_filter(array, filter->reachable_from, INCLUDE_REACHED)",
          "old_line_content": "{",
          "new_line_content": "\treach_filter(array, filter->reachable_from, INCLUDE_REACHED);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "reach_filter",
          "old_text": null,
          "new_text": "reach_filter(array, filter->unreachable_from, EXCLUDE_REACHED)",
          "old_line_content": "\tif (!(a->kind ^ b->kind))",
          "new_line_content": "\treach_filter(array, filter->unreachable_from, EXCLUDE_REACHED);",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"ref_kind_from_refname() should only mark one ref as HEAD\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"ref_kind_from_refname() should only mark one ref as HEAD\");",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"should have died in the xor check above\")",
          "old_line_content": "",
          "new_line_content": "\tBUG(\"should have died in the xor check above\");",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(*s2)",
          "old_line_content": "\tstruct ref_sorting *next;",
          "new_line_content": "\t\tint diff = tolower(*s1) - tolower(*s2);",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": null,
          "new_api": "get_ref_atom_value",
          "old_text": null,
          "new_text": "get_ref_atom_value(a, s->atom, &va, &err)",
          "old_line_content": "\t\tcmp_detached_head = 1;",
          "new_line_content": "\tif (get_ref_atom_value(a, s->atom, &va, &err))",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s\", err.buf)",
          "old_line_content": "\t} else if (s->sort_flags & REF_SORTING_VERSION) {",
          "new_line_content": "\t\tdie(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s\", err.buf)",
          "old_line_content": "\t} else if (cmp_type == FIELD_STR) {",
          "new_line_content": "\t\tdie(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\t\tif (va->s_size < 0 && vb->s_size < 0) {",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": null,
          "new_api": "compare_detached_head",
          "old_text": null,
          "new_text": "compare_detached_head(a, b)",
          "old_line_content": "\t\t\t\t? strcasecmp : strcmp;",
          "new_line_content": "\t\tcmp = compare_detached_head(a, b);",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": null,
          "new_api": "versioncmp",
          "old_text": null,
          "new_text": "versioncmp(va->s, vb->s)",
          "old_line_content": "\t\t\tsize_t a_size = va->s_size < 0 ?",
          "new_line_content": "\t\tcmp = versioncmp(va->s, vb->s);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "cmp_fn",
          "old_text": null,
          "new_text": "cmp_fn(va->s, vb->s)",
          "old_line_content": "\t\t\t\t? memcasecmp : memcmp;",
          "new_line_content": "\t\t\tcmp = cmp_fn(va->s, vb->s);",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(va->s)",
          "old_line_content": "\t\t\t\t     a_size : b_size);",
          "new_line_content": "\t\t\t\t\tstrlen(va->s) : va->s_size;",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(vb->s)",
          "old_line_content": "\t\t\t\tif (a_size > b_size)",
          "new_line_content": "\t\t\t\t\tstrlen(vb->s) : vb->s_size;",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "cmp_fn",
          "old_text": null,
          "new_text": "cmp_fn(va->s, vb->s, b_size > a_size ?\n\t\t\t\t     a_size : b_size)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tcmp = cmp_fn(va->s, vb->s, b_size > a_size ?",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": null,
          "new_api": "cmp_ref_sorting",
          "old_text": null,
          "new_text": "cmp_ref_sorting(s, a, b)",
          "old_line_content": "}",
          "new_line_content": "\t\tint cmp = cmp_ref_sorting(s, a, b);",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(a->refname, b->refname)",
          "old_line_content": "\t\tif (on)",
          "new_line_content": "\t\tstrcasecmp(a->refname, b->refname) :",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a->refname, b->refname)",
          "old_line_content": "\t\t\tsorting->sort_flags |= mask;",
          "new_line_content": "\t\tstrcmp(a->refname, b->refname);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": null,
          "new_api": "QSORT_S",
          "old_text": null,
          "new_text": "QSORT_S(array->items, array->nr, compare_refs, sorting)",
          "old_line_content": "\t\tif (*cp == '%') {",
          "new_line_content": "\tQSORT_S(array->items, array->nr, compare_refs, sorting);",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": null,
          "new_api": "strbuf_addch",
          "old_text": null,
          "new_text": "strbuf_addch(s, ch)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\tstrbuf_addch(s, ch);",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "strbuf_addch",
          "old_text": null,
          "new_text": "strbuf_addch(s, *cp)",
          "old_line_content": "\t\t\t  struct strbuf *error_buf)",
          "new_line_content": "\t\tstrbuf_addch(s, *cp);",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(sp, ')')",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tep = strchr(sp, ')');",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": null,
          "new_api": "append_literal",
          "old_text": null,
          "new_text": "append_literal(cp, sp, &state)",
          "old_line_content": "\tif (*cp) {",
          "new_line_content": "\t\t\tappend_literal(cp, sp, &state);",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": null,
          "new_api": "handler",
          "old_text": null,
          "new_text": "atomv->handler(atomv, &state, error_buf)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t    atomv->handler(atomv, &state, error_buf)) {",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": null,
          "new_api": "pop_stack_element",
          "old_text": null,
          "new_text": "pop_stack_element(&state.stack)",
          "old_line_content": "\tif (format->need_color_reset_at_eol) {",
          "new_line_content": "\t\t\tpop_stack_element(&state.stack);",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cp)",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\tsp = cp + strlen(cp);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": null,
          "new_api": "append_literal",
          "old_text": null,
          "new_text": "append_literal(cp, sp, &state)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tappend_literal(cp, sp, &state);",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": null,
          "new_api": "parse_tag",
          "old_text": null,
          "new_text": "parse_tag(tag)",
          "old_line_content": "\t\t\treturn oid;",
          "new_line_content": "\t\tif (parse_tag(tag) < 0) {",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": null,
          "new_api": "append_atom",
          "old_text": null,
          "new_text": "append_atom(&resetv, &state, error_buf)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (append_atom(&resetv, &state, error_buf)) {",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": null,
          "new_api": "get_tagged_oid",
          "old_text": null,
          "new_text": "get_tagged_oid(tag)",
          "old_line_content": "\treturn NULL;",
          "new_line_content": "\t\toid = get_tagged_oid(tag);",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": null,
          "new_api": "oid_array_lookup",
          "old_text": null,
          "new_text": "oid_array_lookup(points_at, oid)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (oid_array_lookup(points_at, oid) >= 0)",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": null,
          "new_api": "pop_stack_element",
          "old_text": null,
          "new_text": "pop_stack_element(&state.stack)",
          "old_line_content": "void pretty_print_ref(const char *name, const struct object_id *oid,",
          "new_line_content": "\t\tpop_stack_element(&state.stack);",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"format: %%(end) atom missing\")",
          "old_line_content": "\t\t      struct ref_format *format)",
          "new_line_content": "\t\treturn strbuf_addf_ret(error_buf, -1, _(\"format: %%(end) atom missing\"));",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": null,
          "new_api": "strbuf_addbuf",
          "old_text": null,
          "new_text": "strbuf_addbuf(final_buf, &state.stack->output)",
          "old_line_content": "\tstruct ref_array_item *ref_item;",
          "new_line_content": "\tstrbuf_addbuf(final_buf, &state.stack->output);",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": null,
          "new_api": "pop_stack_element",
          "old_text": null,
          "new_text": "pop_stack_element(&state.stack)",
          "old_line_content": "\tstruct strbuf output = STRBUF_INIT;",
          "new_line_content": "\tpop_stack_element(&state.stack);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"malformed object at '%s'\")",
          "old_line_content": " */",
          "new_line_content": "\t\tdie(_(\"malformed object at '%s'\"), refname);",
          "content_same": false
        },
        {
          "line": 2887,
          "old_api": null,
          "new_api": "format_ref_array_item",
          "old_text": null,
          "new_text": "format_ref_array_item(ref_item, format, &output, &err)",
          "old_line_content": "}",
          "new_line_content": "\tif (format_ref_array_item(ref_item, format, &output, &err))",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s\", err.buf)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": null,
          "new_api": "FLEX_ALLOC_STR",
          "old_text": null,
          "new_text": "FLEX_ALLOC_STR(ref, refname, refname)",
          "old_line_content": "\t\t\t\t      const char *refname,",
          "new_line_content": "\tFLEX_ALLOC_STR(ref, refname, refname);",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": null,
          "new_api": "oidcpy",
          "old_text": null,
          "new_text": "oidcpy(&ref->objectname, oid)",
          "old_line_content": "\t\t\t\t      const struct object_id *oid)",
          "new_line_content": "\toidcpy(&ref->objectname, oid);",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(output.buf, 1, output.len, stdout)",
          "old_line_content": "static int parse_sorting_atom(const char *atom)",
          "new_line_content": "\tfwrite(output.buf, 1, output.len, stdout);",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": null,
          "new_api": "putchar",
          "old_text": null,
          "new_text": "putchar('\\n')",
          "old_line_content": "{",
          "new_line_content": "\tputchar('\\n');",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\t * This parses an atom using a dummy ref_format, since we don't",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&output)",
          "old_line_content": "\t * actually care about the formatting details.",
          "new_line_content": "\tstrbuf_release(&output);",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "free_array_item",
          "old_text": null,
          "new_text": "free_array_item(ref_item)",
          "old_line_content": "\t */",
          "new_line_content": "\tfree_array_item(ref_item);",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "new_ref_array_item",
          "old_text": null,
          "new_text": "new_ref_array_item(refname, oid)",
          "old_line_content": "static int ref_kind_from_refname(const char *refname)",
          "new_line_content": "\tstruct ref_array_item *ref = new_ref_array_item(refname, oid);",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(array->items, array->nr + 1, array->alloc)",
          "old_line_content": "\tunsigned int i;",
          "new_line_content": "\tALLOC_GROW(array->items, array->nr + 1, array->alloc);",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(atom)",
          "old_line_content": "",
          "new_line_content": "\tconst char *end = atom + strlen(atom);",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "parse_ref_filter_atom",
          "old_text": null,
          "new_text": "parse_ref_filter_atom(&dummy, atom, end, &err)",
          "old_line_content": "static struct ref_sorting *ref_default_sorting(void)",
          "new_line_content": "\tint res = parse_ref_filter_atom(&dummy, atom, end, &err);",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s\", err.buf)",
          "old_line_content": "\tstatic const char cstr_name[] = \"refname\";",
          "new_line_content": "\t\tdie(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*sorting))",
          "old_line_content": "{",
          "new_line_content": "\tstruct ref_sorting *sorting = xcalloc(1, sizeof(*sorting));",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(refname, \"HEAD\")",
          "old_line_content": "\treturn FILTER_REFS_OTHERS;",
          "new_line_content": "\tif (!strcmp(refname, \"HEAD\"))",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": null,
          "new_api": "ARRAY_SIZE",
          "old_text": null,
          "new_text": "ARRAY_SIZE(ref_kind)",
          "old_line_content": "static int filter_ref_kind(struct ref_filter *filter, const char *refname)",
          "new_line_content": "\tfor (i = 0; i < ARRAY_SIZE(ref_kind); i++) {",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(refname, ref_kind[i].prefix)",
          "old_line_content": "{",
          "new_line_content": "\t\tif (starts_with(refname, ref_kind[i].prefix))",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": null,
          "new_api": "skip_prefix",
          "old_text": null,
          "new_text": "skip_prefix(arg, \"version:\", &arg)",
          "old_line_content": "\tstruct string_list_item *item;",
          "new_line_content": "\tif (skip_prefix(arg, \"version:\", &arg) ||",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "ref_kind_from_refname",
          "old_text": null,
          "new_text": "ref_kind_from_refname(refname)",
          "old_line_content": "};",
          "new_line_content": "\treturn ref_kind_from_refname(refname);",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": null,
          "new_api": "skip_prefix",
          "old_text": null,
          "new_text": "skip_prefix(arg, \"v:\", &arg)",
          "old_line_content": "\tstruct ref_sorting *sorting = NULL, **tail = &sorting;",
          "new_line_content": "\t    skip_prefix(arg, \"v:\", &arg))",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": null,
          "new_api": "parse_sorting_atom",
          "old_text": null,
          "new_text": "parse_sorting_atom(arg)",
          "old_line_content": "\tif (!options->nr) {",
          "new_line_content": "\ts->atom = parse_sorting_atom(arg);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "ref_default_sorting",
          "old_text": null,
          "new_text": "ref_default_sorting()",
          "old_line_content": "\t * about the sort order used for the output.  The caller",
          "new_line_content": "\t\tsorting = ref_default_sorting();",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": null,
          "new_api": "for_each_string_list_item",
          "old_text": null,
          "new_text": "for_each_string_list_item(item, options)",
          "old_line_content": "\t */",
          "new_line_content": "\t\tfor_each_string_list_item(item, options)",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"ignoring ref with broken name %s\")",
          "old_line_content": "",
          "new_line_content": "\t\twarning(_(\"ignoring ref with broken name %s\"), refname);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"ignoring broken ref %s\")",
          "old_line_content": "",
          "new_line_content": "\t\twarning(_(\"ignoring broken ref %s\"), refname);",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(sorting)",
          "old_line_content": "\tstruct object_id oid;",
          "new_line_content": "\t\tfree(sorting);",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "filter_ref_kind",
          "old_text": null,
          "new_text": "filter_ref_kind(filter, refname)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tkind = filter_ref_kind(filter, refname);",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": null,
          "new_api": "filter_pattern_match",
          "old_text": null,
          "new_text": "filter_pattern_match(filter, refname)",
          "old_line_content": "\t * obtain the commit using the 'oid' available and discard all",
          "new_line_content": "\tif (!filter_pattern_match(filter, refname))",
          "content_same": false
        },
        {
          "line": 2466,
          "old_api": null,
          "new_api": "match_points_at",
          "old_text": null,
          "new_text": "match_points_at(&filter->points_at, oid, refname)",
          "old_line_content": "\tif (filter->reachable_from || filter->unreachable_from ||",
          "new_line_content": "\tif (filter->points_at.nr && !match_points_at(&filter->points_at, oid, refname))",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"option `%s' must point to a commit\")",
          "old_line_content": "}",
          "new_line_content": "\t\treturn error(_(\"option `%s' must point to a commit\"), opt->long_name);",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": null,
          "new_api": "lookup_commit_reference_gently",
          "old_text": null,
          "new_text": "lookup_commit_reference_gently(the_repository, oid, 1)",
          "old_line_content": "\t\tif (filter->no_commit &&",
          "new_line_content": "\t\tcommit = lookup_commit_reference_gently(the_repository, oid, 1);",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(opt->long_name, \"no\")",
          "old_line_content": "",
          "new_line_content": "\tif (starts_with(opt->long_name, \"no\"))",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": null,
          "new_api": "commit_list_insert",
          "old_text": null,
          "new_text": "commit_list_insert(merge_commit, &rf->unreachable_from)",
          "old_line_content": "",
          "new_line_content": "\t\tcommit_list_insert(merge_commit, &rf->unreachable_from);",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "commit_list_insert",
          "old_text": null,
          "new_text": "commit_list_insert(merge_commit, &rf->reachable_from)",
          "old_line_content": "",
          "new_line_content": "\t\tcommit_list_insert(merge_commit, &rf->reachable_from);",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": null,
          "new_api": "commit_contains",
          "old_text": null,
          "new_text": "commit_contains(filter, commit, filter->with_commit, &ref_cbdata->contains_cache)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\t    !commit_contains(filter, commit, filter->with_commit, &ref_cbdata->contains_cache))",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": null,
          "new_api": "commit_contains",
          "old_text": null,
          "new_text": "commit_contains(filter, commit, filter->no_commit, &ref_cbdata->no_contains_cache)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t    commit_contains(filter, commit, filter->no_commit, &ref_cbdata->no_contains_cache))",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": null,
          "new_api": "ref_array_push",
          "old_text": null,
          "new_text": "ref_array_push(ref_cbdata->array, refname, oid)",
          "old_line_content": "/*  Free memory allocated for a ref_array_item */",
          "new_line_content": "\tref = ref_array_push(ref_cbdata->array, refname, oid);",
          "content_same": false
        },
        {
          "line": 2509,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free((char *)item->value[i].s)",
          "old_line_content": "void ref_array_clear(struct ref_array *array)",
          "new_line_content": "\t\t\tfree((char *)item->value[i].s);",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(item->value)",
          "old_line_content": "{",
          "new_line_content": "\t\tfree(item->value);",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(item->counts)",
          "old_line_content": "",
          "new_line_content": "\tfree(item->counts);",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(item)",
          "old_line_content": "\tfor (i = 0; i < array->nr; i++)",
          "new_line_content": "\tfree(item);",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(array->items)",
          "old_line_content": "\t}",
          "new_line_content": "\tFREE_AND_NULL(array->items);",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(atom->u.head)",
          "old_line_content": "\t\t\t\t\tstruct ref_to_worktree_entry, ent);",
          "new_line_content": "\t\t\tfree(atom->u.head);",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(used_atom)",
          "old_line_content": "\t}",
          "new_line_content": "\tFREE_AND_NULL(used_atom);",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": null,
          "new_api": "hashmap_clear_and_free",
          "old_text": null,
          "new_text": "hashmap_clear_and_free(&(ref_to_worktree_map.map),\n\t\t\t\t\tstruct ref_to_worktree_entry, ent)",
          "old_line_content": "",
          "new_line_content": "\t\thashmap_clear_and_free(&(ref_to_worktree_map.map),",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": null,
          "new_api": "free_worktrees",
          "old_text": null,
          "new_text": "free_worktrees(ref_to_worktree_map.worktrees)",
          "old_line_content": "#define INCLUDE_REACHED 1",
          "new_line_content": "\t\tfree_worktrees(ref_to_worktree_map.worktrees);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(array->counts)",
          "old_line_content": "{",
          "new_line_content": "\tFREE_AND_NULL(array->counts);",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": null,
          "new_api": "CALLOC_ARRAY",
          "old_text": null,
          "new_text": "CALLOC_ARRAY(to_clear, array->nr)",
          "old_line_content": "\t\t\t\t  to_clear, array->nr,",
          "new_line_content": "\tCALLOC_ARRAY(to_clear, array->nr);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2572,
          "old_api": "free_array_item",
          "new_api": null,
          "old_text": "free_array_item(item)",
          "new_text": null,
          "old_line_content": "\t\t\tfree_array_item(item);",
          "new_line_content": "\t\tstruct ref_array_item *item = array->items[i];",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": "clear_commit_marks_many",
          "new_api": null,
          "old_text": "clear_commit_marks_many(old_nr, to_clear, ALL_REV_FLAGS)",
          "new_text": null,
          "old_line_content": "\tclear_commit_marks_many(old_nr, to_clear, ALL_REV_FLAGS);",
          "new_line_content": "\t\tint is_merged = !!(commit->object.flags & UNINTERESTING);",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "pop_commit",
          "new_api": null,
          "old_text": "pop_commit(&check_reachable)",
          "new_text": null,
          "old_line_content": "\t\tstruct commit *merge_commit = pop_commit(&check_reachable);",
          "new_line_content": "\t\t\tarray->items[array->nr++] = array->items[i];",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": "clear_commit_marks",
          "new_api": null,
          "old_text": "clear_commit_marks(merge_commit, ALL_REV_FLAGS)",
          "new_text": null,
          "old_line_content": "\t\tclear_commit_marks(merge_commit, ALL_REV_FLAGS);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(to_clear)",
          "new_text": null,
          "old_line_content": "\tfree(to_clear);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": "ALLOC_ARRAY",
          "new_api": null,
          "old_text": "ALLOC_ARRAY(commits, commits_nr)",
          "new_text": null,
          "old_line_content": "\tALLOC_ARRAY(commits, commits_nr);",
          "new_line_content": "\t\t\t struct ref_array *array)",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": "st_mult",
          "new_api": null,
          "old_text": "st_mult(format->bases.nr, array->nr)",
          "new_text": null,
          "old_line_content": "\tALLOC_ARRAY(array->counts, st_mult(format->bases.nr, array->nr));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "lookup_commit_reference_by_name",
          "new_api": null,
          "old_text": "lookup_commit_reference_by_name(name)",
          "new_text": null,
          "old_line_content": "\t\tcommits[commits_nr] = lookup_commit_reference_by_name(name);",
          "new_line_content": "\t\tcommits[i] = format->bases.items[i].util;",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": "CALLOC_ARRAY",
          "new_api": null,
          "old_text": "CALLOC_ARRAY(array->items[i]->counts, format->bases.nr)",
          "new_text": null,
          "old_line_content": "\t\tCALLOC_ARRAY(array->items[i]->counts, format->bases.nr);",
          "new_line_content": "\tarray->counts_nr = 0;",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": "ahead_behind",
          "new_api": null,
          "old_text": "ahead_behind(r, commits, commits_nr, array->counts, array->counts_nr)",
          "new_text": null,
          "old_line_content": "\tahead_behind(r, commits, commits_nr, array->counts, array->counts_nr);",
          "new_line_content": "\t\t\tcount->tip_index = commits_nr;",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(commits)",
          "new_text": null,
          "old_line_content": "\tfree(commits);",
          "new_line_content": "\t\t\tcount->base_index = j;",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": "init_contains_cache",
          "new_api": null,
          "old_text": "init_contains_cache(&ref_cbdata.contains_cache)",
          "new_text": null,
          "old_line_content": "\tinit_contains_cache(&ref_cbdata.contains_cache);",
          "new_line_content": "\tref_cbdata.array = array;",
          "content_same": false
        },
        {
          "line": 2647,
          "old_api": "init_contains_cache",
          "new_api": null,
          "old_text": "init_contains_cache(&ref_cbdata.no_contains_cache)",
          "new_text": null,
          "old_line_content": "\tinit_contains_cache(&ref_cbdata.no_contains_cache);",
          "new_line_content": "\tref_cbdata.filter = filter;",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"filter_refs: invalid type\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"filter_refs: invalid type\");",
          "new_line_content": "\tsave_commit_buffer_orig = save_commit_buffer;",
          "content_same": false
        },
        {
          "line": 2660,
          "old_api": "for_each_fullref_in",
          "new_api": null,
          "old_text": "for_each_fullref_in(\"refs/heads/\", ref_filter_handler, &ref_cbdata)",
          "new_text": null,
          "old_line_content": "\t\t\tret = for_each_fullref_in(\"refs/heads/\", ref_filter_handler, &ref_cbdata);",
          "new_line_content": "\telse {",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": "for_each_fullref_in",
          "new_api": null,
          "old_text": "for_each_fullref_in(\"refs/remotes/\", ref_filter_handler, &ref_cbdata)",
          "new_text": null,
          "old_line_content": "\t\t\tret = for_each_fullref_in(\"refs/remotes/\", ref_filter_handler, &ref_cbdata);",
          "new_line_content": "\t\t * For common cases where we need only branches or remotes or tags,",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "for_each_fullref_in",
          "new_api": null,
          "old_text": "for_each_fullref_in(\"refs/tags/\", ref_filter_handler, &ref_cbdata)",
          "new_text": null,
          "old_line_content": "\t\t\tret = for_each_fullref_in(\"refs/tags/\", ref_filter_handler, &ref_cbdata);",
          "new_line_content": "\t\t * we iterate over all refs and filter out required refs with the help",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "for_each_fullref_in_pattern",
          "new_api": null,
          "old_text": "for_each_fullref_in_pattern(filter, ref_filter_handler, &ref_cbdata)",
          "new_text": null,
          "old_line_content": "\t\t\tret = for_each_fullref_in_pattern(filter, ref_filter_handler, &ref_cbdata);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "clear_contains_cache",
          "new_api": null,
          "old_text": "clear_contains_cache(&ref_cbdata.contains_cache)",
          "new_text": null,
          "old_line_content": "\tclear_contains_cache(&ref_cbdata.contains_cache);",
          "new_line_content": "\t\telse if (filter->kind == FILTER_REFS_TAGS)",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "reach_filter",
          "new_api": null,
          "old_text": "reach_filter(array, filter->reachable_from, INCLUDE_REACHED)",
          "new_text": null,
          "old_line_content": "\treach_filter(array, filter->reachable_from, INCLUDE_REACHED);",
          "new_line_content": "\t\tif (!ret && (filter->kind & FILTER_REFS_DETACHED_HEAD))",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"ref_kind_from_refname() should only mark one ref as HEAD\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"ref_kind_from_refname() should only mark one ref as HEAD\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"should have died in the xor check above\")",
          "new_text": null,
          "old_line_content": "\tBUG(\"should have died in the xor check above\");",
          "new_line_content": "static int compare_detached_head(struct ref_array_item *a, struct ref_array_item *b)",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(*s2)",
          "new_text": null,
          "old_line_content": "\t\tint diff = tolower(*s1) - tolower(*s2);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": "get_ref_atom_value",
          "new_api": null,
          "old_text": "get_ref_atom_value(a, s->atom, &va, &err)",
          "new_text": null,
          "old_line_content": "\tif (get_ref_atom_value(a, s->atom, &va, &err))",
          "new_line_content": "static int cmp_ref_sorting(struct ref_sorting *s, struct ref_array_item *a, struct ref_array_item *b)",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s\", err.buf);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "get_ref_atom_value",
          "new_api": null,
          "old_text": "get_ref_atom_value(b, s->atom, &vb, &err)",
          "new_text": null,
          "old_line_content": "\tif (get_ref_atom_value(b, s->atom, &vb, &err))",
          "new_line_content": "\tstruct atom_value *va, *vb;",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s\", err.buf);",
          "new_line_content": "\tint cmp;",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "\tint cmp_detached_head = 0;",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "compare_detached_head",
          "new_api": null,
          "old_text": "compare_detached_head(a, b)",
          "new_text": null,
          "old_line_content": "\t\tcmp = compare_detached_head(a, b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": "cmp_fn",
          "new_api": null,
          "old_text": "cmp_fn(va->s, vb->s)",
          "new_text": null,
          "old_line_content": "\t\t\tcmp = cmp_fn(va->s, vb->s);",
          "new_line_content": "\t\tcmp_detached_head = 1;",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(va->s)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstrlen(va->s) : va->s_size;",
          "new_line_content": "\t} else if (cmp_type == FIELD_STR) {",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(vb->s)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstrlen(vb->s) : vb->s_size;",
          "new_line_content": "\t\t\tint (*cmp_fn)(const char *, const char *);",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": "cmp_fn",
          "new_api": null,
          "old_text": "cmp_fn(va->s, vb->s, b_size > a_size ?\n\t\t\t\t     a_size : b_size)",
          "new_text": null,
          "old_line_content": "\t\t\tcmp = cmp_fn(va->s, vb->s, b_size > a_size ?",
          "new_line_content": "\t\t\tsize_t a_size = va->s_size < 0 ?",
          "content_same": false
        },
        {
          "line": 2776,
          "old_api": "cmp_ref_sorting",
          "new_api": null,
          "old_text": "cmp_ref_sorting(s, a, b)",
          "new_text": null,
          "old_line_content": "\t\tint cmp = cmp_ref_sorting(s, a, b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\t\tstrcasecmp(a->refname, b->refname) :",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\t\tstrcmp(a->refname, b->refname);",
          "new_line_content": "\tfor (s = ref_sorting; s; s = s->next) {",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "QSORT_S",
          "new_api": null,
          "old_text": "QSORT_S(array->items, array->nr, compare_refs, sorting)",
          "new_text": null,
          "old_line_content": "\tQSORT_S(array->items, array->nr, compare_refs, sorting);",
          "new_line_content": "\t\t\tsorting->sort_flags |= mask;",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "hex2chr",
          "new_api": null,
          "old_text": "hex2chr(cp + 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tint ch = hex2chr(cp + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(s, ch)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstrbuf_addch(s, ch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "push_stack_element",
          "new_api": null,
          "old_text": "push_stack_element(&state.stack)",
          "new_text": null,
          "old_line_content": "\tpush_stack_element(&state.stack);",
          "new_line_content": "\t\t\t  struct ref_format *format,",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": "find_next",
          "new_api": null,
          "old_text": "find_next(cp)",
          "new_text": null,
          "old_line_content": "\tfor (cp = format->format; *cp && (sp = find_next(cp)); cp = ep + 1) {",
          "new_line_content": "\t\t\t  struct strbuf *error_buf)",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(sp, ')')",
          "new_text": null,
          "old_line_content": "\t\tep = strchr(sp, ')');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "parse_ref_filter_atom",
          "new_api": null,
          "old_text": "parse_ref_filter_atom(format, sp + 2, ep, error_buf)",
          "new_text": null,
          "old_line_content": "\t\tpos = parse_ref_filter_atom(format, sp + 2, ep, error_buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "handler",
          "new_api": null,
          "old_text": "atomv->handler(atomv, &state, error_buf)",
          "new_text": null,
          "old_line_content": "\t\t    atomv->handler(atomv, &state, error_buf)) {",
          "new_line_content": "\t\tstruct atom_value *atomv;",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "pop_stack_element",
          "new_api": null,
          "old_text": "pop_stack_element(&state.stack)",
          "new_text": null,
          "old_line_content": "\t\t\tpop_stack_element(&state.stack);",
          "new_line_content": "\t\tint pos;",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": "append_atom",
          "new_api": null,
          "old_text": "append_atom(&resetv, &state, error_buf)",
          "new_text": null,
          "old_line_content": "\t\tif (append_atom(&resetv, &state, error_buf)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "pop_stack_element",
          "new_api": null,
          "old_text": "pop_stack_element(&state.stack)",
          "new_text": null,
          "old_line_content": "\t\t\tpop_stack_element(&state.stack);",
          "new_line_content": "\tif (*cp) {",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": "get_tagged_oid",
          "new_api": null,
          "old_text": "get_tagged_oid((struct tag *)obj)",
          "new_text": null,
          "old_line_content": "\t\toid = get_tagged_oid((struct tag *)obj);",
          "new_line_content": "\t\tstruct tag *tag = (struct tag *)obj;",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "oid_array_lookup",
          "new_api": null,
          "old_text": "oid_array_lookup(points_at, oid)",
          "new_text": null,
          "old_line_content": "\t\tif (oid_array_lookup(points_at, oid) >= 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": "pop_stack_element",
          "new_api": null,
          "old_text": "pop_stack_element(&state.stack)",
          "new_text": null,
          "old_line_content": "\t\tpop_stack_element(&state.stack);",
          "new_line_content": "\t\tstruct atom_value resetv = ATOM_VALUE_INIT;",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "parse_object",
          "new_api": null,
          "old_text": "parse_object(the_repository, oid)",
          "new_text": null,
          "old_line_content": "\t\tobj = parse_object(the_repository, oid);",
          "new_line_content": "\t\t\tobj = NULL;",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"format: %%(end) atom missing\")",
          "new_text": null,
          "old_line_content": "\t\treturn strbuf_addf_ret(error_buf, -1, _(\"format: %%(end) atom missing\"));",
          "new_line_content": "\t\tresetv.s = GIT_COLOR_RESET;",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": "pop_stack_element",
          "new_api": null,
          "old_text": "pop_stack_element(&state.stack)",
          "new_text": null,
          "old_line_content": "\tpop_stack_element(&state.stack);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"malformed object at '%s'\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"malformed object at '%s'\"), refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": "new_ref_array_item",
          "new_api": null,
          "old_text": "new_ref_array_item(name, oid)",
          "new_text": null,
          "old_line_content": "\tref_item = new_ref_array_item(name, oid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2878,
          "old_api": "ref_kind_from_refname",
          "new_api": null,
          "old_text": "ref_kind_from_refname(name)",
          "new_text": null,
          "old_line_content": "\tref_item->kind = ref_kind_from_refname(name);",
          "new_line_content": "void pretty_print_ref(const char *name, const struct object_id *oid,",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": "format_ref_array_item",
          "new_api": null,
          "old_text": "format_ref_array_item(ref_item, format, &output, &err)",
          "new_text": null,
          "old_line_content": "\tif (format_ref_array_item(ref_item, format, &output, &err))",
          "new_line_content": "\t\t      struct ref_format *format)",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s\", err.buf);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": "FLEX_ALLOC_STR",
          "new_api": null,
          "old_text": "FLEX_ALLOC_STR(ref, refname, refname)",
          "new_text": null,
          "old_line_content": "\tFLEX_ALLOC_STR(ref, refname, refname);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": "oidcpy",
          "new_api": null,
          "old_text": "oidcpy(&ref->objectname, oid)",
          "new_text": null,
          "old_line_content": "\toidcpy(&ref->objectname, oid);",
          "new_line_content": " * Callers can then fill in other struct members at their leisure.",
          "content_same": false
        },
        {
          "line": 2881,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(output.buf, 1, output.len, stdout)",
          "new_text": null,
          "old_line_content": "\tfwrite(output.buf, 1, output.len, stdout);",
          "new_line_content": "\tstruct ref_array_item *ref_item;",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "putchar",
          "new_api": null,
          "old_text": "putchar('\\n')",
          "new_text": null,
          "old_line_content": "\tputchar('\\n');",
          "new_line_content": "\tstruct strbuf output = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 2884,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "new_ref_array_item",
          "new_api": null,
          "old_text": "new_ref_array_item(refname, oid)",
          "new_text": null,
          "old_line_content": "\tstruct ref_array_item *ref = new_ref_array_item(refname, oid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(array->items, array->nr + 1, array->alloc)",
          "new_text": null,
          "old_line_content": "\tALLOC_GROW(array->items, array->nr + 1, array->alloc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(atom)",
          "new_text": null,
          "old_line_content": "\tconst char *end = atom + strlen(atom);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "parse_ref_filter_atom",
          "new_api": null,
          "old_text": "parse_ref_filter_atom(&dummy, atom, end, &err)",
          "new_text": null,
          "old_line_content": "\tint res = parse_ref_filter_atom(&dummy, atom, end, &err);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s\", err.buf);",
          "new_line_content": "\t * This parses an atom using a dummy ref_format, since we don't",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "\t * actually care about the formatting details.",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*sorting))",
          "new_text": null,
          "old_line_content": "\tstruct ref_sorting *sorting = xcalloc(1, sizeof(*sorting));",
          "new_line_content": "\treturn res;",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(refname, \"HEAD\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(refname, \"HEAD\"))",
          "new_line_content": "\t\tconst char *prefix;",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": "parse_sorting_atom",
          "new_api": null,
          "old_text": "parse_sorting_atom(cstr_name)",
          "new_text": null,
          "old_line_content": "\tsorting->atom = parse_sorting_atom(cstr_name);",
          "new_line_content": "/*  If no sorting option is given, use refname to sort as default */",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": "ARRAY_SIZE",
          "new_api": null,
          "old_text": "ARRAY_SIZE(ref_kind)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < ARRAY_SIZE(ref_kind); i++) {",
          "new_line_content": "\t\t{ \"refs/heads/\" , FILTER_REFS_BRANCHES },",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(refname, ref_kind[i].prefix)",
          "new_text": null,
          "old_line_content": "\t\tif (starts_with(refname, ref_kind[i].prefix))",
          "new_line_content": "\t\t{ \"refs/remotes/\" , FILTER_REFS_REMOTES },",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "ref_kind_from_refname",
          "new_api": null,
          "old_text": "ref_kind_from_refname(refname)",
          "new_text": null,
          "old_line_content": "\treturn ref_kind_from_refname(refname);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "skip_prefix",
          "new_api": null,
          "old_text": "skip_prefix(arg, \"v:\", &arg)",
          "new_text": null,
          "old_line_content": "\t    skip_prefix(arg, \"v:\", &arg))",
          "new_line_content": "\ts->next = *sorting_tail;",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "parse_sorting_atom",
          "new_api": null,
          "old_text": "parse_sorting_atom(arg)",
          "new_text": null,
          "old_line_content": "\ts->atom = parse_sorting_atom(arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "ref_default_sorting",
          "new_api": null,
          "old_text": "ref_default_sorting()",
          "new_text": null,
          "old_line_content": "\t\tsorting = ref_default_sorting();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2943,
          "old_api": "for_each_string_list_item",
          "new_api": null,
          "old_text": "for_each_string_list_item(item, options)",
          "new_text": null,
          "old_line_content": "\t\tfor_each_string_list_item(item, options)",
          "new_line_content": "struct ref_sorting *ref_sorting_options(struct string_list *options)",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": "parse_ref_sorting",
          "new_api": null,
          "old_text": "parse_ref_sorting(tail, item->string)",
          "new_text": null,
          "old_line_content": "\t\t\tparse_ref_sorting(tail, item->string);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"ignoring ref with broken name %s\")",
          "new_text": null,
          "old_line_content": "\t\twarning(_(\"ignoring ref with broken name %s\"), refname);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"ignoring broken ref %s\")",
          "new_text": null,
          "old_line_content": "\t\twarning(_(\"ignoring broken ref %s\"), refname);",
          "new_line_content": "\tunsigned int kind;",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": "filter_ref_kind",
          "new_api": null,
          "old_text": "filter_ref_kind(filter, refname)",
          "new_text": null,
          "old_line_content": "\tkind = filter_ref_kind(filter, refname);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "filter_pattern_match",
          "new_api": null,
          "old_text": "filter_pattern_match(filter, refname)",
          "new_text": null,
          "old_line_content": "\tif (!filter_pattern_match(filter, refname))",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "match_points_at",
          "new_api": null,
          "old_text": "match_points_at(&filter->points_at, oid, refname)",
          "new_text": null,
          "old_line_content": "\tif (filter->points_at.nr && !match_points_at(&filter->points_at, oid, refname))",
          "new_line_content": "\t/* Obtain the current ref kind from filter_ref_kind() and ignore unwanted refs. */",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": "BUG_ON_OPT_NEG",
          "new_api": null,
          "old_text": "BUG_ON_OPT_NEG(unset)",
          "new_text": null,
          "old_line_content": "\tBUG_ON_OPT_NEG(unset);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "repo_get_oid",
          "new_api": null,
          "old_text": "repo_get_oid(the_repository, arg, &oid)",
          "new_text": null,
          "old_line_content": "\tif (repo_get_oid(the_repository, arg, &oid))",
          "new_line_content": "int parse_opt_merge_filter(const struct option *opt, const char *arg, int unset)",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"malformed object name %s\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"malformed object name %s\"), arg);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "lookup_commit_reference_gently",
          "new_api": null,
          "old_text": "lookup_commit_reference_gently(the_repository, &oid, 0)",
          "new_text": null,
          "old_line_content": "\tmerge_commit = lookup_commit_reference_gently(the_repository, &oid, 0);",
          "new_line_content": "\tstruct object_id oid;",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "lookup_commit_reference_gently",
          "new_api": null,
          "old_text": "lookup_commit_reference_gently(the_repository, oid, 1)",
          "new_text": null,
          "old_line_content": "\t\tcommit = lookup_commit_reference_gently(the_repository, oid, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "commit_contains",
          "new_api": null,
          "old_text": "commit_contains(filter, commit, filter->with_commit, &ref_cbdata->contains_cache)",
          "new_text": null,
          "old_line_content": "\t\t    !commit_contains(filter, commit, filter->with_commit, &ref_cbdata->contains_cache))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "commit_contains",
          "new_api": null,
          "old_text": "commit_contains(filter, commit, filter->no_commit, &ref_cbdata->no_contains_cache)",
          "new_text": null,
          "old_line_content": "\t\t    commit_contains(filter, commit, filter->no_commit, &ref_cbdata->no_contains_cache))",
          "new_line_content": "\t\tif (!commit)",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": "ref_array_push",
          "new_api": null,
          "old_text": "ref_array_push(ref_cbdata->array, refname, oid)",
          "new_text": null,
          "old_line_content": "\tref = ref_array_push(ref_cbdata->array, refname, oid);",
          "new_line_content": "\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "free",
          "new_api": null,
          "old_text": "free((char *)item->symref)",
          "new_text": null,
          "old_line_content": "\tfree((char *)item->symref);",
          "new_line_content": "\tref->kind = kind;",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": "free",
          "new_api": null,
          "old_text": "free((char *)item->value[i].s)",
          "new_text": null,
          "old_line_content": "\t\t\tfree((char *)item->value[i].s);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(item->value)",
          "new_text": null,
          "old_line_content": "\t\tfree(item->value);",
          "new_line_content": "/*  Free memory allocated for a ref_array_item */",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(item->counts)",
          "new_text": null,
          "old_line_content": "\tfree(item->counts);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": "free_array_item",
          "new_api": null,
          "old_text": "free_array_item(array->items[i])",
          "new_text": null,
          "old_line_content": "\t\tfree_array_item(array->items[i]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(array->items)",
          "new_text": null,
          "old_line_content": "\tFREE_AND_NULL(array->items);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(atom->u.head)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(atom->u.head);",
          "new_line_content": "\tfor (i = 0; i < array->nr; i++)",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(used_atom)",
          "new_text": null,
          "old_line_content": "\tFREE_AND_NULL(used_atom);",
          "new_line_content": "\tarray->nr = array->alloc = 0;",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "hashmap_clear_and_free",
          "new_api": null,
          "old_text": "hashmap_clear_and_free(&(ref_to_worktree_map.map),\n\t\t\t\t\tstruct ref_to_worktree_entry, ent)",
          "new_text": null,
          "old_line_content": "\t\thashmap_clear_and_free(&(ref_to_worktree_map.map),",
          "new_line_content": "\t\tif (atom->atom_type == ATOM_HEAD)",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(array->counts)",
          "new_text": null,
          "old_line_content": "\tFREE_AND_NULL(array->counts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "CALLOC_ARRAY",
          "new_api": null,
          "old_text": "CALLOC_ARRAY(to_clear, array->nr)",
          "new_text": null,
          "old_line_content": "\tCALLOC_ARRAY(to_clear, array->nr);",
          "new_line_content": "\t\t\t int include_reached)",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": "tips_reachable_from_bases",
          "new_api": null,
          "old_text": "tips_reachable_from_bases(the_repository,\n\t\t\t\t  check_reachable,\n\t\t\t\t  to_clear, array->nr,\n\t\t\t\t  UNINTERESTING)",
          "new_text": null,
          "old_line_content": "\ttips_reachable_from_bases(the_repository,",
          "new_line_content": "\t\treturn;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 22,
      "total_additions": 105,
      "total_deletions": 105,
      "total_api_changes": 232
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 232,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          2360,
          2353,
          2354,
          2359
        ]
      }
    },
    "api_calls_before": 640,
    "api_calls_after": 640,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 2,
      "total_diff_lines": 26
    }
  }
}
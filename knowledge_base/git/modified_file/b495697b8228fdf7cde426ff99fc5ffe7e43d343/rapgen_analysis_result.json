{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b495697b8228fdf7cde426ff99fc5ffe7e43d343",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b495697b8228fdf7cde426ff99fc5ffe7e43d343/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b495697b8228fdf7cde426ff99fc5ffe7e43d343/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/b495697b8228fdf7cde426ff99fc5ffe7e43d343/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 613,
          "old_api": "parse_object",
          "new_api": "has_sha1_file",
          "old_text": "parse_object(ref->old_sha1)",
          "new_text": "has_sha1_file(ref->old_sha1)",
          "old_line_content": "\t\to = parse_object(ref->old_sha1);",
          "new_line_content": "\t\tif (!has_sha1_file(ref->old_sha1))",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "mark_recent_complete_commits",
          "new_api": "for_each_ref",
          "old_text": "mark_recent_complete_commits(cutoff)",
          "new_text": "for_each_ref(mark_complete, NULL)",
          "old_line_content": "\t\t\tmark_recent_complete_commits(cutoff);",
          "new_line_content": "\t\tfor_each_ref(mark_complete, NULL);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "fprintf",
          "new_api": "hashcpy",
          "old_text": "fprintf(stderr,\n\t\t\t\"already have %s (%s)\\n\", sha1_to_hex(remote),\n\t\t\tref->name)",
          "new_text": "hashcpy(ref->new_sha1, local)",
          "old_line_content": "\t\tfprintf(stderr,",
          "new_line_content": "\t\thashcpy(ref->new_sha1, local);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "ntohl",
          "new_api": "die",
          "old_text": "ntohl(header.hdr_entries)",
          "new_text": "die(\"protocol error: bad pack header\")",
          "old_line_content": "\t\t\t ntohl(header.hdr_version), ntohl(header.hdr_entries));",
          "new_line_content": "\t\t\tdie(\"protocol error: bad pack header\");",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "ntohl",
          "new_api": "snprintf",
          "old_text": "ntohl(header.hdr_entries)",
          "new_text": "snprintf(hdr_arg, sizeof(hdr_arg),\n\t\t\t \"--pack_header=%\"PRIu32\",%\"PRIu32,\n\t\t\t ntohl(header.hdr_version), ntohl(header.hdr_entries))",
          "old_line_content": "\t\tif (ntohl(header.hdr_entries) < unpack_limit)",
          "new_line_content": "\t\tsnprintf(hdr_arg, sizeof(hdr_arg),",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "strcpy",
          "new_api": "sprintf",
          "old_text": "strcpy(keep_arg + s, \"localhost\")",
          "new_text": "sprintf(keep_arg,\n\t\t\t\t\t\"--keep=fetch-pack %\"PRIuMAX \" on \", (uintmax_t) getpid())",
          "old_line_content": "\t\t\t\tstrcpy(keep_arg + s, \"localhost\");",
          "new_line_content": "\t\t\tint s = sprintf(keep_arg,",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "index_pack_lockfile",
          "new_api": "start_command",
          "old_text": "index_pack_lockfile(cmd.out)",
          "new_text": "start_command(&cmd)",
          "old_line_content": "\t\t*pack_lockfile = index_pack_lockfile(cmd.out);",
          "new_line_content": "\tif (start_command(&cmd))",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "close",
          "new_api": "die",
          "old_text": "close(cmd.out)",
          "new_text": "die(\"fetch-pack: unable to fork off %s\", argv[0])",
          "old_line_content": "\t\tclose(cmd.out);",
          "new_line_content": "\t\tdie(\"fetch-pack: unable to fork off %s\", argv[0]);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "finish_command",
          "new_api": "close",
          "old_text": "finish_command(&cmd)",
          "new_text": "close(cmd.out)",
          "old_line_content": "\tif (finish_command(&cmd))",
          "new_line_content": "\t\tclose(cmd.out);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "die",
          "new_api": "finish_command",
          "old_text": "die(\"error in sideband demultiplexer\")",
          "new_text": "finish_command(&cmd)",
          "old_line_content": "\t\tdie(\"error in sideband demultiplexer\");",
          "new_line_content": "\tif (finish_command(&cmd))",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "die",
          "new_api": "sort_ref_list",
          "old_text": "die(\"Server does not support shallow clients\")",
          "new_text": "sort_ref_list(&ref, ref_compare_name)",
          "old_line_content": "\t\tdie(\"Server does not support shallow clients\");",
          "new_line_content": "\tsort_ref_list(&ref, ref_compare_name);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "fprintf",
          "new_api": "die",
          "old_text": "fprintf(stderr, \"Server supports multi_ack_detailed\\n\")",
          "new_text": "die(\"Server does not support shallow clients\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack_detailed\\n\");",
          "new_line_content": "\t\tdie(\"Server does not support shallow clients\");",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "server_supports",
          "new_api": "fprintf",
          "old_text": "server_supports(\"side-band-64k\")",
          "new_text": "fprintf(stderr, \"Server supports multi_ack\\n\")",
          "old_line_content": "\tif (server_supports(\"side-band-64k\")) {",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack\\n\");",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "server_supports",
          "new_api": "fprintf",
          "old_text": "server_supports(\"side-band\")",
          "new_text": "fprintf(stderr, \"Server supports side-band-64k\\n\")",
          "old_line_content": "\telse if (server_supports(\"side-band\")) {",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band-64k\\n\");",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "server_supports",
          "new_api": "fprintf",
          "old_text": "server_supports(\"thin-pack\")",
          "new_text": "fprintf(stderr, \"Server supports side-band\\n\")",
          "old_line_content": "\tif (!server_supports(\"thin-pack\"))",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band\\n\");",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "fprintf",
          "new_api": "server_feature_value",
          "old_text": "fprintf(stderr, \"Server version is %.*s\\n\",\n\t\t\t\tagent_len, agent_feature)",
          "new_text": "server_feature_value(\"agent\", &agent_len)",
          "old_line_content": "\t\t\tfprintf(stderr, \"Server version is %.*s\\n\",",
          "new_line_content": "\tif ((agent_feature = server_feature_value(\"agent\", &agent_len))) {",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "find_common",
          "new_api": "packet_flush",
          "old_text": "find_common(fd, sha1, ref)",
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "\tif (find_common(fd, sha1, ref) < 0)",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "packet_flush",
          "new_api": "warning",
          "old_text": "packet_flush(fd[1])",
          "new_text": "warning(\"no common commits\")",
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "\t\t\twarning(\"no common commits\");",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "strcmp",
          "new_api": "strtol",
          "old_text": "strcmp(\"--no-progress\", arg)",
          "new_text": "strtol(arg + 8, NULL, 0)",
          "old_line_content": "\t\tif (!strcmp(\"--no-progress\", arg)) {",
          "new_line_content": "\t\t\targs.depth = strtol(arg + 8, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "strbuf_release",
          "new_api": "ALLOC_GROW",
          "old_text": "strbuf_release(&line)",
          "new_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "old_line_content": "\t\t\tstrbuf_release(&line);",
          "new_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "printf",
          "new_api": "fetch_pack",
          "old_text": "printf(\"lock %s\\n\", pack_lockfile)",
          "new_text": "fetch_pack(&args, fd, conn, ref, dest,\n\t\tnr_heads, heads, pack_lockfile_ptr)",
          "old_line_content": "\t\tprintf(\"lock %s\\n\", pack_lockfile);",
          "new_line_content": "\tref = fetch_pack(&args, fd, conn, ref, dest,",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "close",
          "new_api": "printf",
          "old_text": "close(fd[0])",
          "new_text": "printf(\"lock %s\\n\", pack_lockfile)",
          "old_line_content": "\tclose(fd[0]);",
          "new_line_content": "\t\tprintf(\"lock %s\\n\", pack_lockfile);",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "close",
          "new_api": "fflush",
          "old_text": "close(fd[1])",
          "new_text": "fflush(stdout)",
          "old_line_content": "\tclose(fd[1]);",
          "new_line_content": "\t\tfflush(stdout);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "do_fetch_pack",
          "new_api": "packet_flush",
          "old_text": "do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile)",
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "\tref_cpy = do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile);",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "die",
          "new_api": "ST_MTIME_NSEC",
          "old_text": "die(\"shallow file was removed during fetch\")",
          "new_text": "ST_MTIME_NSEC(st)",
          "old_line_content": "\t\t\t\tdie(\"shallow file was removed during fetch\");",
          "new_line_content": "\t\tmtime.nsec = ST_MTIME_NSEC(st);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "ST_MTIME_NSEC",
          "new_api": "die",
          "old_text": "ST_MTIME_NSEC(st)",
          "new_text": "die(\"shallow file was removed during fetch\")",
          "old_line_content": "\t\t\t\t|| ST_MTIME_NSEC(st) != mtime.nsec",
          "new_line_content": "\t\t\t\tdie(\"shallow file was removed during fetch\");",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "die",
          "new_api": "ST_MTIME_NSEC",
          "old_text": "die(\"shallow file was changed during fetch\")",
          "new_text": "ST_MTIME_NSEC(st)",
          "old_line_content": "\t\t\tdie(\"shallow file was changed during fetch\");",
          "new_line_content": "\t\t\t\t|| ST_MTIME_NSEC(st) != mtime.nsec",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "write_in_full",
          "new_api": "hold_lock_file_for_update",
          "old_text": "write_in_full(fd, sb.buf, sb.len)",
          "new_text": "hold_lock_file_for_update(&lock, shallow,\n\t\t\t\t\t       LOCK_DIE_ON_ERROR)",
          "old_line_content": "\t\t || write_in_full(fd, sb.buf, sb.len) != sb.len) {",
          "new_line_content": "\t\tfd = hold_lock_file_for_update(&lock, shallow,",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "rollback_lock_file",
          "new_api": "write_shallow_commits",
          "old_text": "rollback_lock_file(&lock)",
          "new_text": "write_shallow_commits(&sb, 0)",
          "old_line_content": "\t\t\trollback_lock_file(&lock);",
          "new_line_content": "\t\tif (!write_shallow_commits(&sb, 0)",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "commit_lock_file",
          "new_api": "unlink_or_warn",
          "old_text": "commit_lock_file(&lock)",
          "new_text": "unlink_or_warn(shallow)",
          "old_line_content": "\t\t\tcommit_lock_file(&lock);",
          "new_line_content": "\t\t\tunlink_or_warn(shallow);",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "reprepare_packed_git",
          "new_api": "strbuf_release",
          "old_text": "reprepare_packed_git()",
          "new_text": "strbuf_release(&sb)",
          "old_line_content": "\treprepare_packed_git();",
          "new_line_content": "\t\tstrbuf_release(&sb);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1028,
          "old_api": null,
          "new_api": "strbuf_getline",
          "old_text": null,
          "new_text": "strbuf_getline(&line, stdin, '\\n')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\twhile (strbuf_getline(&line, stdin, '\\n') != EOF) {",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "strbuf_detach",
          "old_text": null,
          "new_text": "strbuf_detach(&line, NULL)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\theads[nr_heads++] = strbuf_detach(&line, NULL);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&line)",
          "old_line_content": "",
          "new_line_content": "\t\t\tstrbuf_release(&line);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "git_connect",
          "old_text": null,
          "new_text": "git_connect(fd, dest, args.uploadpack,\n\t\t\t\t   args.verbose ? CONNECT_VERBOSE : 0)",
          "old_line_content": "",
          "new_line_content": "\t\tconn = git_connect(fd, dest, args.uploadpack,",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "get_remote_heads",
          "old_text": null,
          "new_text": "get_remote_heads(fd[0], &ref, 0, NULL)",
          "old_line_content": "\t\tnr_heads, heads, pack_lockfile_ptr);",
          "new_line_content": "\tget_remote_heads(fd[0], &ref, 0, NULL);",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd[0])",
          "old_line_content": "\t\tref = NULL;",
          "new_line_content": "\tclose(fd[0]);",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd[1])",
          "old_line_content": "\tret = !ref;",
          "new_line_content": "\tclose(fd[1]);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "finish_connect",
          "old_text": null,
          "new_text": "finish_connect(conn)",
          "old_line_content": "",
          "new_line_content": "\tif (finish_connect(conn))",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"no such remote ref %s\", heads[i])",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\terror(\"no such remote ref %s\", heads[i]);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s %s\\n\",\n\t\t       sha1_to_hex(ref->old_sha1), ref->name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintf(\"%s %s\\n\",",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(ref->old_sha1)",
          "old_line_content": "",
          "new_line_content": "\t\t       sha1_to_hex(ref->old_sha1), ref->name);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(*(const char **)a, *(const char **)b)",
          "old_line_content": "struct ref *fetch_pack(struct fetch_pack_args *my_args,",
          "new_line_content": "\treturn strcmp(*(const char **)a, *(const char **)b);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "fetch_pack_setup",
          "old_text": null,
          "new_text": "fetch_pack_setup()",
          "old_line_content": "\tif (args.depth > 0) {",
          "new_line_content": "\tfetch_pack_setup();",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&args, my_args, sizeof(args))",
          "old_line_content": "\t\t\tst.st_mtime = 0;",
          "new_line_content": "\t\tmemcpy(&args, my_args, sizeof(args));",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "git_path",
          "old_text": null,
          "new_text": "git_path(\"shallow\")",
          "old_line_content": "",
          "new_line_content": "\t\tif (stat(git_path(\"shallow\"), &st))",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(heads, nr_heads, sizeof(*heads), compare_heads)",
          "old_line_content": "",
          "new_line_content": "\t\tqsort(heads, nr_heads, sizeof(*heads), compare_heads);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "remove_duplicates",
          "old_text": null,
          "new_text": "remove_duplicates(nr_heads, heads)",
          "old_line_content": "\tif (!ref) {",
          "new_line_content": "\t\tnr_heads = remove_duplicates(nr_heads, heads);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"no matching remote head\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"no matching remote head\");",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "do_fetch_pack",
          "old_text": null,
          "new_text": "do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile)",
          "old_line_content": "\t\tstruct cache_time mtime;",
          "new_line_content": "\tref_cpy = do_fetch_pack(fd, ref, nr_heads, heads, pack_lockfile);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "git_path",
          "old_text": null,
          "new_text": "git_path(\"shallow\")",
          "old_line_content": "\t\tmtime.sec = st.st_mtime;",
          "new_line_content": "\t\tchar *shallow = git_path(\"shallow\");",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "stat",
          "old_text": null,
          "new_text": "stat(shallow, &st)",
          "old_line_content": "\t\t} else if (st.st_mtime != mtime.sec",
          "new_line_content": "\t\tif (stat(shallow, &st)) {",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "parse_object",
          "old_text": null,
          "new_text": "parse_object(ref->old_sha1)",
          "old_line_content": "",
          "new_line_content": "\t\to = parse_object(ref->old_sha1);",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"shallow file was changed during fetch\")",
          "old_line_content": "\t\t\t\t\t       LOCK_DIE_ON_ERROR);",
          "new_line_content": "\t\t\tdie(\"shallow file was changed during fetch\");",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "write_in_full",
          "old_text": null,
          "new_text": "write_in_full(fd, sb.buf, sb.len)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\t || write_in_full(fd, sb.buf, sb.len) != sb.len) {",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "rollback_lock_file",
          "old_text": null,
          "new_text": "rollback_lock_file(&lock)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\trollback_lock_file(&lock);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "commit_lock_file",
          "old_text": null,
          "new_text": "commit_lock_file(&lock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tcommit_lock_file(&lock);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "reprepare_packed_git",
          "old_text": null,
          "new_text": "reprepare_packed_git()",
          "old_line_content": "",
          "new_line_content": "\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "for_each_alternate_ref",
          "old_text": null,
          "new_text": "for_each_alternate_ref(mark_alternate_complete, NULL)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfor_each_alternate_ref(mark_alternate_complete, NULL);",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "mark_recent_complete_commits",
          "old_text": null,
          "new_text": "mark_recent_complete_commits(cutoff)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\t\tmark_recent_complete_commits(cutoff);",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": null,
          "new_api": "lookup_object",
          "old_text": null,
          "new_text": "lookup_object(ref->old_sha1)",
          "old_line_content": "\t\tif (!o || o->type != OBJ_COMMIT || !(o->flags & COMPLETE))",
          "new_line_content": "\t\tstruct object *o = deref_tag(lookup_object(ref->old_sha1),",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "rev_list_push",
          "old_text": null,
          "new_text": "rev_list_push((struct commit *)o, COMMON_REF | SEEN)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\trev_list_push((struct commit *)o, COMMON_REF | SEEN);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "mark_common",
          "old_text": null,
          "new_text": "mark_common((struct commit *)o, 1, 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmark_common((struct commit *)o, 1, 1);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "filter_refs",
          "old_text": null,
          "new_text": "filter_refs(refs, nr_match, match)",
          "old_line_content": "\t\tconst unsigned char *remote = ref->old_sha1;",
          "new_line_content": "\tfilter_refs(refs, nr_match, match);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "lookup_object",
          "old_text": null,
          "new_text": "lookup_object(remote)",
          "old_line_content": "\t\t\tif (!args.verbose)",
          "new_line_content": "\t\to = lookup_object(remote);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\t\"want %s (%s)\\n\", sha1_to_hex(remote),\n\t\t\t\tref->name)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(remote)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\"want %s (%s)\\n\", sha1_to_hex(remote),",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\"already have %s (%s)\\n\", sha1_to_hex(remote),\n\t\t\tref->name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(remote)",
          "old_line_content": "\treturn retval;",
          "new_line_content": "\t\t\t\"already have %s (%s)\\n\", sha1_to_hex(remote),",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "recv_sideband",
          "old_text": null,
          "new_text": "recv_sideband(\"fetch-pack\", xd[0], out)",
          "old_line_content": "}",
          "new_line_content": "\tint ret = recv_sideband(\"fetch-pack\", xd[0], out);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(out)",
          "old_line_content": "",
          "new_line_content": "\tclose(out);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&demux, 0, sizeof(demux))",
          "old_line_content": "\t\t * xd[0], spits out band#2 to stderr, and feeds us band#1",
          "new_line_content": "\tmemset(&demux, 0, sizeof(demux));",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "start_async",
          "old_text": null,
          "new_text": "start_async(&demux)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (start_async(&demux))",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"fetch-pack: unable to fork off sideband\"\n\t\t\t    \" demultiplexer\")",
          "old_line_content": "\telse",
          "new_line_content": "\t\t\tdie(\"fetch-pack: unable to fork off sideband\"",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&cmd, 0, sizeof(cmd))",
          "old_line_content": "\t*hdr_arg = 0;",
          "new_line_content": "\tmemset(&cmd, 0, sizeof(cmd));",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "read_pack_header",
          "old_text": null,
          "new_text": "read_pack_header(demux.out, &header)",
          "old_line_content": "\t\t\t \"--pack_header=%\"PRIu32\",%\"PRIu32,",
          "new_line_content": "\t\tif (read_pack_header(demux.out, &header))",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(header.hdr_entries)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t ntohl(header.hdr_version), ntohl(header.hdr_entries));",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(header.hdr_entries)",
          "old_line_content": "\t\t\tdo_keep = 1;",
          "new_line_content": "\t\tif (ntohl(header.hdr_entries) < unpack_limit)",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "\t\t\t*av++ = keep_arg;",
          "new_line_content": "\t\t\t\t\t\"--keep=fetch-pack %\"PRIuMAX \" on \", (uintmax_t) getpid());",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "gethostname",
          "old_text": null,
          "new_text": "gethostname(keep_arg + s, sizeof(keep_arg) - s)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (gethostname(keep_arg + s, sizeof(keep_arg) - s))",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(keep_arg + s, \"localhost\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tstrcpy(keep_arg + s, \"localhost\");",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "index_pack_lockfile",
          "old_text": null,
          "new_text": "index_pack_lockfile(cmd.out)",
          "old_line_content": "",
          "new_line_content": "\t\t*pack_lockfile = index_pack_lockfile(cmd.out);",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s failed\", argv[0])",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tdie(\"%s failed\", argv[0]);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "finish_async",
          "old_text": null,
          "new_text": "finish_async(&demux)",
          "old_line_content": "}",
          "new_line_content": "\tif (use_sideband && finish_async(&demux))",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"error in sideband demultiplexer\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"error in sideband demultiplexer\");",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "copy_ref_list",
          "old_text": null,
          "new_text": "copy_ref_list(orig_ref)",
          "old_line_content": "\tint agent_len;",
          "new_line_content": "\tstruct ref *ref = copy_ref_list(orig_ref);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"shallow\")",
          "old_line_content": "\t\tif (args.verbose)",
          "new_line_content": "\tif (is_repository_shallow() && !server_supports(\"shallow\"))",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"multi_ack_detailed\")",
          "old_line_content": "\t\tmulti_ack = 2;",
          "new_line_content": "\tif (server_supports(\"multi_ack_detailed\")) {",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports multi_ack_detailed\\n\")",
          "old_line_content": "\t\t\tif (args.verbose)",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack_detailed\\n\");",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"no-done\")",
          "old_line_content": "\t\t\tif (args.stateless_rpc)",
          "new_line_content": "\t\tif (server_supports(\"no-done\")) {",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports no-done\\n\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tfprintf(stderr, \"Server supports no-done\\n\");",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"multi_ack\")",
          "old_line_content": "\t\tmulti_ack = 1;",
          "new_line_content": "\telse if (server_supports(\"multi_ack\")) {",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"side-band-64k\")",
          "old_line_content": "\t\tuse_sideband = 2;",
          "new_line_content": "\tif (server_supports(\"side-band-64k\")) {",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"side-band\")",
          "old_line_content": "\t\tuse_sideband = 1;",
          "new_line_content": "\telse if (server_supports(\"side-band\")) {",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"thin-pack\")",
          "old_line_content": "\t\targs.no_progress = 0;",
          "new_line_content": "\tif (!server_supports(\"thin-pack\"))",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"no-progress\")",
          "old_line_content": "\t\targs.include_tag = 0;",
          "new_line_content": "\tif (!server_supports(\"no-progress\"))",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"include-tag\")",
          "old_line_content": "\t\tif (args.verbose)",
          "new_line_content": "\tif (!server_supports(\"include-tag\"))",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "server_supports",
          "old_text": null,
          "new_text": "server_supports(\"ofs-delta\")",
          "old_line_content": "\t} else",
          "new_line_content": "\tif (server_supports(\"ofs-delta\")) {",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server supports ofs-delta\\n\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server supports ofs-delta\\n\");",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Server version is %.*s\\n\",\n\t\t\t\tagent_len, agent_feature)",
          "old_line_content": "",
          "new_line_content": "\t\t\tfprintf(stderr, \"Server version is %.*s\\n\",",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "everything_local",
          "old_text": null,
          "new_text": "everything_local(&ref, nr_match, match)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (everything_local(&ref, nr_match, match)) {",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "find_common",
          "old_text": null,
          "new_text": "find_common(fd, sha1, ref)",
          "old_line_content": "\t\t\t * no common commit.",
          "new_line_content": "\tif (find_common(fd, sha1, ref) < 0)",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "packet_flush",
          "old_text": null,
          "new_text": "packet_flush(fd[1])",
          "old_line_content": "",
          "new_line_content": "\t\tpacket_flush(fd[1]);",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": null,
          "new_api": "get_pack",
          "old_text": null,
          "new_text": "get_pack(fd, pack_lockfile)",
          "old_line_content": " all_done:",
          "new_line_content": "\tif (get_pack(fd, pack_lockfile))",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"git fetch-pack: fetch failed.\")",
          "old_line_content": "\treturn ref;",
          "new_line_content": "\t\tdie(\"git fetch-pack: fetch failed.\");",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(heads[src], heads[dst-1])",
          "old_line_content": "}",
          "new_line_content": "\t\tif (strcmp(heads[src], heads[dst-1]))",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"fetch.unpacklimit\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (strcmp(var, \"fetch.unpacklimit\") == 0) {",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(var, value)",
          "old_line_content": "",
          "new_line_content": "\t\tfetch_unpack_limit = git_config_int(var, value);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"transfer.unpacklimit\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (strcmp(var, \"transfer.unpacklimit\") == 0) {",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(var, value)",
          "old_line_content": "",
          "new_line_content": "\t\ttransfer_unpack_limit = git_config_int(var, value);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"repack.usedeltabaseoffset\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (strcmp(var, \"repack.usedeltabaseoffset\") == 0) {",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "",
          "new_line_content": "\t\tprefer_ofs_delta = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"fetch.fsckobjects\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (!strcmp(var, \"fetch.fsckobjects\")) {",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "",
          "new_line_content": "\t\tfetch_fsck_objects = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(var, \"transfer.fsckobjects\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (!strcmp(var, \"transfer.fsckobjects\")) {",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "git_config_bool",
          "old_text": null,
          "new_text": "git_config_bool(var, value)",
          "old_line_content": "",
          "new_line_content": "\t\ttransfer_fsck_objects = git_config_bool(var, value);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "git_default_config",
          "old_text": null,
          "new_text": "git_default_config(var, value, cb)",
          "old_line_content": "static struct lock_file lock;",
          "new_line_content": "\treturn git_default_config(var, value, cb);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "git_config",
          "old_text": null,
          "new_text": "git_config(fetch_pack_config, NULL)",
          "old_line_content": "\telse if (0 <= fetch_unpack_limit)",
          "new_line_content": "\tgit_config(fetch_pack_config, NULL);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "packet_trace_identity",
          "old_text": null,
          "new_text": "packet_trace_identity(\"fetch-pack\")",
          "old_line_content": "\t\tconst char *arg = argv[i];",
          "new_line_content": "\tpacket_trace_identity(\"fetch-pack\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--upload-pack=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--upload-pack=\")) {",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--exec=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--exec=\")) {",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-q\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--quiet\", arg) || !strcmp(\"-q\", arg)) {",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-k\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--keep\", arg) || !strcmp(\"-k\", arg)) {",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--thin\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--thin\", arg)) {",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--include-tag\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--include-tag\", arg)) {",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--all\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--all\", arg)) {",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stdin\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--stdin\", arg)) {",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-v\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"-v\", arg)) {",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--depth=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--no-progress\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--no-progress\", arg)) {",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stateless-rpc\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(\"--stateless-rpc\", arg)) {",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--lock-pack\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--lock-pack\", arg)) {",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fetch_pack_usage)",
          "old_line_content": "\tif (i < argc)",
          "new_line_content": "\t\tusage(fetch_pack_usage);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fetch_pack_usage)",
          "old_line_content": "\t * Copy refs from cmdline to growable list, then append any",
          "new_line_content": "\t\tusage(fetch_pack_usage);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(heads, argc - i, alloc_heads)",
          "old_line_content": "\tif (args.stdin_refs) {",
          "new_line_content": "\tALLOC_GROW(heads, argc - i, alloc_heads);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(argv[i])",
          "old_line_content": "\t\t\t/* in stateless RPC mode we use pkt-line to read",
          "new_line_content": "\t\theads[nr_heads++] = xstrdup(argv[i]);",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "packet_read_line",
          "old_text": null,
          "new_text": "packet_read_line(0, line, sizeof(line))",
          "old_line_content": "\t\t\t\tif (line[n-1] == '\\n')",
          "new_line_content": "\t\t\t\tint n = packet_read_line(0, line, sizeof(line));",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(line, n)",
          "old_line_content": "\t\telse {",
          "new_line_content": "\t\t\t\theads[nr_heads++] = xmemdupz(line, n);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "strbuf_getline",
          "new_api": null,
          "old_text": "strbuf_getline(&line, stdin, '\\n')",
          "new_text": null,
          "old_line_content": "\t\t\twhile (strbuf_getline(&line, stdin, '\\n') != EOF) {",
          "new_line_content": "\t\telse {",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "new_text": null,
          "old_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "new_line_content": "\t\t\t/* read from stdin one ref per line, until EOF */",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "strbuf_detach",
          "new_api": null,
          "old_text": "strbuf_detach(&line, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\theads[nr_heads++] = strbuf_detach(&line, NULL);",
          "new_line_content": "\t\t\tstruct strbuf line = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "git_connect",
          "new_api": null,
          "old_text": "git_connect(fd, dest, args.uploadpack,\n\t\t\t\t   args.verbose ? CONNECT_VERBOSE : 0)",
          "new_text": null,
          "old_line_content": "\t\tconn = git_connect(fd, dest, args.uploadpack,",
          "new_line_content": "\t\tfd[0] = 0;",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "get_remote_heads",
          "new_api": null,
          "old_text": "get_remote_heads(fd[0], &ref, 0, NULL)",
          "new_text": null,
          "old_line_content": "\tget_remote_heads(fd[0], &ref, 0, NULL);",
          "new_line_content": "\t\t\t\t   args.verbose ? CONNECT_VERBOSE : 0);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "fetch_pack",
          "new_api": null,
          "old_text": "fetch_pack(&args, fd, conn, ref, dest,\n\t\tnr_heads, heads, pack_lockfile_ptr)",
          "new_text": null,
          "old_line_content": "\tref = fetch_pack(&args, fd, conn, ref, dest,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "\t\tfflush(stdout);",
          "new_line_content": "\t\tnr_heads, heads, pack_lockfile_ptr);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "finish_connect",
          "new_api": null,
          "old_text": "finish_connect(conn)",
          "new_text": null,
          "old_line_content": "\tif (finish_connect(conn))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"no such remote ref %s\", heads[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\terror(\"no such remote ref %s\", heads[i]);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s %s\\n\",\n\t\t       sha1_to_hex(ref->old_sha1), ref->name)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s %s\\n\",",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(ref->old_sha1)",
          "new_text": null,
          "old_line_content": "\t\t       sha1_to_hex(ref->old_sha1), ref->name);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(*(const char **)a, *(const char **)b)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(*(const char **)a, *(const char **)b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "fetch_pack_setup",
          "new_api": null,
          "old_text": "fetch_pack_setup()",
          "new_text": null,
          "old_line_content": "\tfetch_pack_setup();",
          "new_line_content": "\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&args, my_args, sizeof(args))",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(&args, my_args, sizeof(args));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "git_path",
          "new_api": null,
          "old_text": "git_path(\"shallow\")",
          "new_text": null,
          "old_line_content": "\t\tif (stat(git_path(\"shallow\"), &st))",
          "new_line_content": "\tif (&args != my_args)",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(heads, nr_heads, sizeof(*heads), compare_heads)",
          "new_text": null,
          "old_line_content": "\t\tqsort(heads, nr_heads, sizeof(*heads), compare_heads);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "remove_duplicates",
          "new_api": null,
          "old_text": "remove_duplicates(nr_heads, heads)",
          "new_text": null,
          "old_line_content": "\t\tnr_heads = remove_duplicates(nr_heads, heads);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "packet_flush",
          "new_api": null,
          "old_text": "packet_flush(fd[1])",
          "new_text": null,
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"no matching remote head\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"no matching remote head\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "git_path",
          "new_api": null,
          "old_text": "git_path(\"shallow\")",
          "new_text": null,
          "old_line_content": "\t\tchar *shallow = git_path(\"shallow\");",
          "new_line_content": "\tif (args.depth > 0) {",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "ST_MTIME_NSEC",
          "new_api": null,
          "old_text": "ST_MTIME_NSEC(st)",
          "new_text": null,
          "old_line_content": "\t\tmtime.nsec = ST_MTIME_NSEC(st);",
          "new_line_content": "\t\tint fd;",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "stat",
          "new_api": null,
          "old_text": "stat(shallow, &st)",
          "new_text": null,
          "old_line_content": "\t\tif (stat(shallow, &st)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "hold_lock_file_for_update",
          "new_api": null,
          "old_text": "hold_lock_file_for_update(&lock, shallow,\n\t\t\t\t\t       LOCK_DIE_ON_ERROR)",
          "new_text": null,
          "old_line_content": "\t\tfd = hold_lock_file_for_update(&lock, shallow,",
          "new_line_content": "\t\t\t  )",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "write_shallow_commits",
          "new_api": null,
          "old_text": "write_shallow_commits(&sb, 0)",
          "new_text": null,
          "old_line_content": "\t\tif (!write_shallow_commits(&sb, 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "unlink_or_warn",
          "new_api": null,
          "old_text": "unlink_or_warn(shallow)",
          "new_text": null,
          "old_line_content": "\t\t\tunlink_or_warn(shallow);",
          "new_line_content": "\t\t\t\t\t       LOCK_DIE_ON_ERROR);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&sb)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&sb);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "for_each_ref",
          "new_api": null,
          "old_text": "for_each_ref(mark_complete, NULL)",
          "new_text": null,
          "old_line_content": "\t\tfor_each_ref(mark_complete, NULL);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "for_each_alternate_ref",
          "new_api": null,
          "old_text": "for_each_alternate_ref(mark_alternate_complete, NULL)",
          "new_text": null,
          "old_line_content": "\t\tfor_each_alternate_ref(mark_alternate_complete, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "lookup_object",
          "new_api": null,
          "old_text": "lookup_object(ref->old_sha1)",
          "new_text": null,
          "old_line_content": "\t\tstruct object *o = deref_tag(lookup_object(ref->old_sha1),",
          "new_line_content": "\t * Don't mark them common yet; the server has to be told so first.",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "rev_list_push",
          "new_api": null,
          "old_text": "rev_list_push((struct commit *)o, COMMON_REF | SEEN)",
          "new_text": null,
          "old_line_content": "\t\t\trev_list_push((struct commit *)o, COMMON_REF | SEEN);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "mark_common",
          "new_api": null,
          "old_text": "mark_common((struct commit *)o, 1, 1)",
          "new_text": null,
          "old_line_content": "\t\t\tmark_common((struct commit *)o, 1, 1);",
          "new_line_content": "\t\tif (!(o->flags & SEEN)) {",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "filter_refs",
          "new_api": null,
          "old_text": "filter_refs(refs, nr_match, match)",
          "new_text": null,
          "old_line_content": "\tfilter_refs(refs, nr_match, match);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "lookup_object",
          "new_api": null,
          "old_text": "lookup_object(remote)",
          "new_text": null,
          "old_line_content": "\t\to = lookup_object(remote);",
          "new_line_content": "\t\tunsigned char local[20];",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\t\"want %s (%s)\\n\", sha1_to_hex(remote),\n\t\t\t\tref->name)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr,",
          "new_line_content": "\t\t\tretval = 0;",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(remote)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\"want %s (%s)\\n\", sha1_to_hex(remote),",
          "new_line_content": "\t\t\tif (!args.verbose)",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(ref->new_sha1, local)",
          "new_text": null,
          "old_line_content": "\t\thashcpy(ref->new_sha1, local);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(remote)",
          "new_text": null,
          "old_line_content": "\t\t\t\"already have %s (%s)\\n\", sha1_to_hex(remote),",
          "new_line_content": "\t\tif (!args.verbose)",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "recv_sideband",
          "new_api": null,
          "old_text": "recv_sideband(\"fetch-pack\", xd[0], out)",
          "new_text": null,
          "old_line_content": "\tint ret = recv_sideband(\"fetch-pack\", xd[0], out);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(out)",
          "new_text": null,
          "old_line_content": "\tclose(out);",
          "new_line_content": "\tint *xd = data;",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&demux, 0, sizeof(demux))",
          "new_text": null,
          "old_line_content": "\tmemset(&demux, 0, sizeof(demux));",
          "new_line_content": "\tint do_keep = args.keep_pack;",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "start_async",
          "new_api": null,
          "old_text": "start_async(&demux)",
          "new_text": null,
          "old_line_content": "\t\tif (start_async(&demux))",
          "new_line_content": "\t\tdemux.proc = sideband_demux;",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"fetch-pack: unable to fork off sideband\"\n\t\t\t    \" demultiplexer\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"fetch-pack: unable to fork off sideband\"",
          "new_line_content": "\t\tdemux.data = xd;",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&cmd, 0, sizeof(cmd))",
          "new_text": null,
          "old_line_content": "\tmemset(&cmd, 0, sizeof(cmd));",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "read_pack_header",
          "new_api": null,
          "old_text": "read_pack_header(demux.out, &header)",
          "new_text": null,
          "old_line_content": "\t\tif (read_pack_header(demux.out, &header))",
          "new_line_content": "\tif (!args.keep_pack && unpack_limit) {",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"protocol error: bad pack header\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"protocol error: bad pack header\");",
          "new_line_content": "\t\tstruct pack_header header;",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(hdr_arg, sizeof(hdr_arg),\n\t\t\t \"--pack_header=%\"PRIu32\",%\"PRIu32,\n\t\t\t ntohl(header.hdr_version), ntohl(header.hdr_entries))",
          "new_text": null,
          "old_line_content": "\t\tsnprintf(hdr_arg, sizeof(hdr_arg),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(keep_arg,\n\t\t\t\t\t\"--keep=fetch-pack %\"PRIuMAX \" on \", (uintmax_t) getpid())",
          "new_text": null,
          "old_line_content": "\t\t\tint s = sprintf(keep_arg,",
          "new_line_content": "\t\tif (args.use_thin_pack)",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\"--keep=fetch-pack %\"PRIuMAX \" on \", (uintmax_t) getpid());",
          "new_line_content": "\t\t\t*av++ = \"--fix-thin\";",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "gethostname",
          "new_api": null,
          "old_text": "gethostname(keep_arg + s, sizeof(keep_arg) - s)",
          "new_text": null,
          "old_line_content": "\t\t\tif (gethostname(keep_arg + s, sizeof(keep_arg) - s))",
          "new_line_content": "\t\tif (args.lock_pack || unpack_limit) {",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "start_command",
          "new_api": null,
          "old_text": "start_command(&cmd)",
          "new_text": null,
          "old_line_content": "\tif (start_command(&cmd))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"fetch-pack: unable to fork off %s\", argv[0])",
          "new_text": null,
          "old_line_content": "\t\tdie(\"fetch-pack: unable to fork off %s\", argv[0]);",
          "new_line_content": "\tcmd.in = demux.out;",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s failed\", argv[0])",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s failed\", argv[0]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "finish_async",
          "new_api": null,
          "old_text": "finish_async(&demux)",
          "new_text": null,
          "old_line_content": "\tif (use_sideband && finish_async(&demux))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "copy_ref_list",
          "new_api": null,
          "old_text": "copy_ref_list(orig_ref)",
          "new_text": null,
          "old_line_content": "\tstruct ref *ref = copy_ref_list(orig_ref);",
          "new_line_content": "\t\tchar **match,",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "sort_ref_list",
          "new_api": null,
          "old_text": "sort_ref_list(&ref, ref_compare_name)",
          "new_text": null,
          "old_line_content": "\tsort_ref_list(&ref, ref_compare_name);",
          "new_line_content": "\tconst char *agent_feature;",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"shallow\")",
          "new_text": null,
          "old_line_content": "\tif (is_repository_shallow() && !server_supports(\"shallow\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"multi_ack_detailed\")",
          "new_text": null,
          "old_line_content": "\tif (server_supports(\"multi_ack_detailed\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"no-done\")",
          "new_text": null,
          "old_line_content": "\t\tif (server_supports(\"no-done\")) {",
          "new_line_content": "\t\tif (args.verbose)",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Server supports no-done\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, \"Server supports no-done\\n\");",
          "new_line_content": "\t\tmulti_ack = 2;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"multi_ack\")",
          "new_text": null,
          "old_line_content": "\telse if (server_supports(\"multi_ack\")) {",
          "new_line_content": "\t\t\t\tno_done = 1;",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Server supports multi_ack\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports multi_ack\\n\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Server supports side-band-64k\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band-64k\\n\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Server supports side-band\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports side-band\\n\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"no-progress\")",
          "new_text": null,
          "old_line_content": "\tif (!server_supports(\"no-progress\"))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"include-tag\")",
          "new_text": null,
          "old_line_content": "\tif (!server_supports(\"include-tag\"))",
          "new_line_content": "\t\targs.use_thin_pack = 0;",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "server_supports",
          "new_api": null,
          "old_text": "server_supports(\"ofs-delta\")",
          "new_text": null,
          "old_line_content": "\tif (server_supports(\"ofs-delta\")) {",
          "new_line_content": "\t\targs.no_progress = 0;",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Server supports ofs-delta\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Server supports ofs-delta\\n\");",
          "new_line_content": "\t\targs.include_tag = 0;",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "server_feature_value",
          "new_api": null,
          "old_text": "server_feature_value(\"agent\", &agent_len)",
          "new_text": null,
          "old_line_content": "\tif ((agent_feature = server_feature_value(\"agent\", &agent_len))) {",
          "new_line_content": "\t} else",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "everything_local",
          "new_api": null,
          "old_text": "everything_local(&ref, nr_match, match)",
          "new_text": null,
          "old_line_content": "\tif (everything_local(&ref, nr_match, match)) {",
          "new_line_content": "\t\t\t\tagent_len, agent_feature);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "packet_flush",
          "new_api": null,
          "old_text": "packet_flush(fd[1])",
          "new_text": null,
          "old_line_content": "\t\tpacket_flush(fd[1]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "warning",
          "new_api": null,
          "old_text": "warning(\"no common commits\")",
          "new_text": null,
          "old_line_content": "\t\t\twarning(\"no common commits\");",
          "new_line_content": "\t\t\t/* When cloning, it is not unusual to have",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "get_pack",
          "new_api": null,
          "old_text": "get_pack(fd, pack_lockfile)",
          "new_text": null,
          "old_line_content": "\tif (get_pack(fd, pack_lockfile))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"git fetch-pack: fetch failed.\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"git fetch-pack: fetch failed.\");",
          "new_line_content": "\tif (args.stateless_rpc)",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(heads[src], heads[dst-1])",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(heads[src], heads[dst-1]))",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"fetch.unpacklimit\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"fetch.unpacklimit\") == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(var, value)",
          "new_text": null,
          "old_line_content": "\t\tfetch_unpack_limit = git_config_int(var, value);",
          "new_line_content": "static int fetch_pack_config(const char *var, const char *value, void *cb)",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"transfer.unpacklimit\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"transfer.unpacklimit\") == 0) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(var, value)",
          "new_text": null,
          "old_line_content": "\t\ttransfer_unpack_limit = git_config_int(var, value);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"repack.usedeltabaseoffset\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(var, \"repack.usedeltabaseoffset\") == 0) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\tprefer_ofs_delta = git_config_bool(var, value);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"fetch.fsckobjects\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(var, \"fetch.fsckobjects\")) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\tfetch_fsck_objects = git_config_bool(var, value);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(var, \"transfer.fsckobjects\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(var, \"transfer.fsckobjects\")) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "git_config_bool",
          "new_api": null,
          "old_text": "git_config_bool(var, value)",
          "new_text": null,
          "old_line_content": "\t\ttransfer_fsck_objects = git_config_bool(var, value);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "git_default_config",
          "new_api": null,
          "old_text": "git_default_config(var, value, cb)",
          "new_text": null,
          "old_line_content": "\treturn git_default_config(var, value, cb);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "git_config",
          "new_api": null,
          "old_text": "git_config(fetch_pack_config, NULL)",
          "new_text": null,
          "old_line_content": "\tgit_config(fetch_pack_config, NULL);",
          "new_line_content": "\tstatic int did_setup;",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "packet_trace_identity",
          "new_api": null,
          "old_text": "packet_trace_identity(\"fetch-pack\")",
          "new_text": null,
          "old_line_content": "\tpacket_trace_identity(\"fetch-pack\");",
          "new_line_content": "\tchar **pack_lockfile_ptr = NULL;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--upload-pack=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--upload-pack=\")) {",
          "new_line_content": "\tfor (i = 1; i < argc && *argv[i] == '-'; i++) {",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--exec=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--exec=\")) {",
          "new_line_content": "\t\t\targs.uploadpack = arg + 14;",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-q\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--quiet\", arg) || !strcmp(\"-q\", arg)) {",
          "new_line_content": "\t\t\targs.uploadpack = arg + 7;",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-k\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--keep\", arg) || !strcmp(\"-k\", arg)) {",
          "new_line_content": "\t\t\targs.quiet = 1;",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--thin\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--thin\", arg)) {",
          "new_line_content": "\t\t\targs.keep_pack = 1;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--include-tag\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--include-tag\", arg)) {",
          "new_line_content": "\t\t\targs.use_thin_pack = 1;",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--all\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--all\", arg)) {",
          "new_line_content": "\t\t\targs.include_tag = 1;",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stdin\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--stdin\", arg)) {",
          "new_line_content": "\t\t\targs.fetch_all = 1;",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-v\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"-v\", arg)) {",
          "new_line_content": "\t\t\targs.stdin_refs = 1;",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--depth=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "new_line_content": "\t\t\targs.verbose = 1;",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(arg + 8, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\t\targs.depth = strtol(arg + 8, NULL, 0);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stateless-rpc\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--stateless-rpc\", arg)) {",
          "new_line_content": "\t\t\targs.no_progress = 1;",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--lock-pack\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--lock-pack\", arg)) {",
          "new_line_content": "\t\t\targs.stateless_rpc = 1;",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fetch_pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(fetch_pack_usage);",
          "new_line_content": "\t\t\tpack_lockfile_ptr = &pack_lockfile;",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fetch_pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(fetch_pack_usage);",
          "new_line_content": "\tif (i < argc)",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(heads, argc - i, alloc_heads)",
          "new_text": null,
          "old_line_content": "\tALLOC_GROW(heads, argc - i, alloc_heads);",
          "new_line_content": "\t * Copy refs from cmdline to growable list, then append any",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(argv[i])",
          "new_text": null,
          "old_line_content": "\t\theads[nr_heads++] = xstrdup(argv[i]);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "packet_read_line",
          "new_api": null,
          "old_text": "packet_read_line(0, line, sizeof(line))",
          "new_text": null,
          "old_line_content": "\t\t\t\tint n = packet_read_line(0, line, sizeof(line));",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(heads, nr_heads + 1, alloc_heads)",
          "new_text": null,
          "old_line_content": "\t\t\t\tALLOC_GROW(heads, nr_heads + 1, alloc_heads);",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "xmemdupz",
          "new_api": null,
          "old_text": "xmemdupz(line, n)",
          "new_text": null,
          "old_line_content": "\t\t\t\theads[nr_heads++] = xmemdupz(line, n);",
          "new_line_content": "\t\t\t\tif (line[n-1] == '\\n')",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 31,
      "total_additions": 108,
      "total_deletions": 107,
      "total_api_changes": 246
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 246,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          614,
          615
        ]
      }
    },
    "api_calls_before": 268,
    "api_calls_after": 269,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 15
    }
  }
}
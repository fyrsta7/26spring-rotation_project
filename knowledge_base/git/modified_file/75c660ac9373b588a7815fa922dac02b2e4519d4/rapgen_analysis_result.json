{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/75c660ac9373b588a7815fa922dac02b2e4519d4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/75c660ac9373b588a7815fa922dac02b2e4519d4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/75c660ac9373b588a7815fa922dac02b2e4519d4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/75c660ac9373b588a7815fa922dac02b2e4519d4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 214,
          "old_api": "fill_filespec",
          "new_api": "alloc_filespec",
          "old_text": "fill_filespec(two, dst->sha1, dst->mode)",
          "new_text": "alloc_filespec(src->path)",
          "old_line_content": "\tfill_filespec(two, dst->sha1, dst->mode);",
          "new_line_content": "\tone = alloc_filespec(src->path);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "free",
          "new_api": "diff_free_filepair",
          "old_text": "free(q->queue)",
          "new_text": "diff_free_filepair(pair_to_free)",
          "old_line_content": "\tfree(q->queue);",
          "new_line_content": "\t\t\tdiff_free_filepair(pair_to_free);",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "free",
          "new_api": "diff_debug_queue",
          "old_text": "free(rename_src)",
          "new_text": "diff_debug_queue(\"done collapsing\", q)",
          "old_line_content": "\tfree(rename_src);",
          "new_line_content": "\tdiff_debug_queue(\"done collapsing\", q);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 256,
          "old_api": null,
          "new_api": "locate_rename_dst",
          "old_text": null,
          "new_text": "locate_rename_dst(p->two, 1)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\t\t\tlocate_rename_dst(p->two, 1);",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\tint stays = (p->broken_pair && !p->score);",
          "new_line_content": "\t\telse if (!DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "register_rename_src",
          "old_text": null,
          "new_text": "register_rename_src(p->one, stays)",
          "old_line_content": "\tif (rename_dst_nr == 0)",
          "new_line_content": "\t\t\tregister_rename_src(p->one, stays);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "diff_unmodified_pair",
          "old_text": null,
          "new_text": "diff_unmodified_pair(p)",
          "old_line_content": "\t\t\tpair_to_free = p;",
          "new_line_content": "\t\telse if (!diff_unmodified_pair(p))",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "register_rename_src",
          "old_text": null,
          "new_text": "register_rename_src(p->one, 1)",
          "old_line_content": "\t/* We really want to cull the candidates list early",
          "new_line_content": "\t\t\tregister_rename_src(p->one, 1);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\tif (pair_to_free)",
          "new_line_content": "\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(dst->mode)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!S_ISREG(src->mode) || !S_ISREG(dst->mode))",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(q->queue)",
          "old_line_content": "\trename_dst = NULL;",
          "new_line_content": "\tfree(q->queue);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "is_exact_match",
          "old_text": null,
          "new_text": "is_exact_match(one, two)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tif (!is_exact_match(one, two))",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "record_rename_pair",
          "old_text": null,
          "new_text": "record_rename_pair(&renq, i, j, MAX_SCORE)",
          "old_line_content": "",
          "new_line_content": "\t\t\trecord_rename_pair(&renq, i, j, MAX_SCORE);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rename_dst)",
          "old_line_content": "\trename_src_nr = rename_src_alloc = 0;",
          "new_line_content": "\tfree(rename_dst);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "diff_debug_queue",
          "old_text": null,
          "new_text": "diff_debug_queue(\"done detecting exact\", &renq)",
          "old_line_content": "\tif (renq.nr == rename_dst_nr)",
          "new_line_content": "\tdiff_debug_queue(\"done detecting exact\", &renq);",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rename_src)",
          "old_line_content": "",
          "new_line_content": "\tfree(rename_src);",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": null,
          "new_api": "diff_populate_filespec",
          "old_text": null,
          "new_text": "diff_populate_filespec(dst, 0)",
          "old_line_content": "\t\treturn 0; /* error but caught downstream */",
          "new_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*mx) * num_create * num_src)",
          "old_line_content": "\t\t\tcontinue; /* dealt with exact match already. */",
          "new_line_content": "\tmx = xmalloc(sizeof(*mx) * num_create * num_src);",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": null,
          "new_api": "diff_delta",
          "old_text": null,
          "new_text": "diff_delta(src->data, src->size,\n\t\t\t   dst->data, dst->size,\n\t\t\t   &delta_size, delta_limit)",
          "old_line_content": "\t\t\t   &delta_size, ~0UL);",
          "new_line_content": "\tdelta = diff_delta(src->data, src->size,",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "estimate_similarity",
          "old_text": null,
          "new_text": "estimate_similarity(one, two,\n\t\t\t\t\t\t       minimum_score)",
          "old_line_content": "\t/* cost matrix sorted by most to least similar pair */",
          "new_line_content": "\t\t\tm->score = estimate_similarity(one, two,",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "count_delta",
          "old_text": null,
          "new_text": "count_delta(delta, delta_size, &src_copied, &literal_added)",
          "old_line_content": "",
          "new_line_content": "\tif (count_delta(delta, delta_size, &src_copied, &literal_added)) {",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta)",
          "old_line_content": "\t/* Extent of damage */",
          "new_line_content": "\t\tfree(delta);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(mx, num_create * num_src, sizeof(*mx), score_compare)",
          "old_line_content": "\t\tif (mx[i].score < minimum_score)",
          "new_line_content": "\tqsort(mx, num_create * num_src, sizeof(*mx), score_compare);",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta)",
          "old_line_content": "\telse",
          "new_line_content": "\tfree(delta);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "record_rename_pair",
          "old_text": null,
          "new_text": "record_rename_pair(&renq, mx[i].dst, mx[i].src, mx[i].score)",
          "old_line_content": " cleanup:",
          "new_line_content": "\t\trecord_rename_pair(&renq, mx[i].dst, mx[i].src, mx[i].score);",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(mx)",
          "old_line_content": "\t * are kept in renq.  The original list is still in *q.",
          "new_line_content": "\tfree(mx);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "diff_debug_queue",
          "old_text": null,
          "new_text": "diff_debug_queue(\"done detecting fuzzy\", &renq)",
          "old_line_content": "\t */",
          "new_line_content": "\tdiff_debug_queue(\"done detecting fuzzy\", &renq);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t * not been turned into a rename/copy already.",
          "new_line_content": "\t\tif (!DIFF_FILE_VALID(p->one) && DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"internal error: dst already matched.\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"internal error: dst already matched.\");",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "locate_rename_dst",
          "old_text": null,
          "new_text": "locate_rename_dst(p->two, 0)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\tlocate_rename_dst(p->two, 0);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "fill_filespec",
          "old_text": null,
          "new_text": "fill_filespec(one, src->sha1, src->mode)",
          "old_line_content": "",
          "new_line_content": "\tfill_filespec(one, src->sha1, src->mode);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, dst->pair)",
          "old_line_content": "\t\t\t\t * record this as a creation.",
          "new_line_content": "\t\t\t\tdiff_q(&outq, dst->pair);",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "alloc_filespec",
          "old_text": null,
          "new_text": "alloc_filespec(dst->path)",
          "old_line_content": "\tdp->source_stays = rename_src[src_index].src_stays;",
          "new_line_content": "\ttwo = alloc_filespec(dst->path);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "fill_filespec",
          "old_text": null,
          "new_text": "fill_filespec(two, dst->sha1, dst->mode)",
          "old_line_content": "\trename_dst[dst_index].pair = dp;",
          "new_line_content": "\tfill_filespec(two, dst->sha1, dst->mode);",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "diff_queue",
          "old_text": null,
          "new_text": "diff_queue(renq, one, two)",
          "old_line_content": "",
          "new_line_content": "\tdp = diff_queue(renq, one, two);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\t\t *",
          "new_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t *",
          "new_line_content": "\t\telse if (DIFF_FILE_VALID(p->one) && !DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "DIFF_PAIR_BROKEN",
          "old_text": null,
          "new_text": "DIFF_PAIR_BROKEN(p)",
          "old_line_content": "\t\t\t\t\t/* counterpart is now rename/copy */",
          "new_line_content": "\t\t\tif (DIFF_PAIR_BROKEN(p)) {",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "locate_rename_dst",
          "old_text": null,
          "new_text": "locate_rename_dst(p->one, 0)",
          "old_line_content": "\t\t\telse {",
          "new_line_content": "\t\t\t\t\tlocate_rename_dst(p->one, 0);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(renq.queue[j]->one->path,\n\t\t\t\t\t\t    p->one->path)",
          "old_line_content": "\t\t\t\t\tpair_to_free = p;",
          "new_line_content": "\t\t\t\t\tif (!strcmp(renq.queue[j]->one->path,",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t/* If the source is a broken \"delete\", and",
          "new_line_content": "\t\t\tif (!DIFF_FILE_VALID(p->two))",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 385,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "register_rename_src",
          "new_api": null,
          "old_text": "register_rename_src(p->one, stays)",
          "new_text": null,
          "old_line_content": "\t\t\tregister_rename_src(p->one, stays);",
          "new_line_content": "\t\t\t/* If the source is a broken \"delete\", and",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "diff_unmodified_pair",
          "new_api": null,
          "old_text": "diff_unmodified_pair(p)",
          "new_text": null,
          "old_line_content": "\t\telse if (!diff_unmodified_pair(p))",
          "new_line_content": "\t\t\tif (pair_to_free)",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "register_rename_src",
          "new_api": null,
          "old_text": "register_rename_src(p->one, 1)",
          "new_text": null,
          "old_line_content": "\t\t\tregister_rename_src(p->one, 1);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "diff_free_filepair",
          "new_api": null,
          "old_text": "diff_free_filepair(pair_to_free)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_free_filepair(pair_to_free);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "diff_debug_queue",
          "new_api": null,
          "old_text": "diff_debug_queue(\"done copying original\", &outq)",
          "new_text": null,
          "old_line_content": "\tdiff_debug_queue(\"done copying original\", &outq);",
          "new_line_content": "\t\t\tpair_to_free = p;",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(renq.queue)",
          "new_text": null,
          "old_line_content": "\tfree(renq.queue);",
          "new_line_content": "\t\tif (pair_to_free)",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(dst->mode)",
          "new_text": null,
          "old_line_content": "\tif (!S_ISREG(src->mode) || !S_ISREG(dst->mode))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "is_exact_match",
          "new_api": null,
          "old_text": "is_exact_match(one, two)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!is_exact_match(one, two))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "record_rename_pair",
          "new_api": null,
          "old_text": "record_rename_pair(&renq, i, j, MAX_SCORE)",
          "new_text": null,
          "old_line_content": "\t\t\trecord_rename_pair(&renq, i, j, MAX_SCORE);",
          "new_line_content": "\t\tstruct diff_filespec *two = rename_dst[i].two;",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "diff_debug_queue",
          "new_api": null,
          "old_text": "diff_debug_queue(\"done detecting exact\", &renq)",
          "new_text": null,
          "old_line_content": "\tdiff_debug_queue(\"done detecting exact\", &renq);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*mx) * num_create * num_src)",
          "new_text": null,
          "old_line_content": "\tmx = xmalloc(sizeof(*mx) * num_create * num_src);",
          "new_line_content": "\tif (renq.nr == rename_dst_nr)",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "diff_populate_filespec",
          "new_api": null,
          "old_text": "diff_populate_filespec(dst, 0)",
          "new_text": null,
          "old_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "diff_delta",
          "new_api": null,
          "old_text": "diff_delta(src->data, src->size,\n\t\t\t   dst->data, dst->size,\n\t\t\t   &delta_size, ~0UL)",
          "new_text": null,
          "old_line_content": "\tdelta = diff_delta(src->data, src->size,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "estimate_similarity",
          "new_api": null,
          "old_text": "estimate_similarity(one, two,\n\t\t\t\t\t\t       minimum_score)",
          "new_text": null,
          "old_line_content": "\t\t\tm->score = estimate_similarity(one, two,",
          "new_line_content": "\t\tfor (j = 0; j < rename_src_nr; j++) {",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "count_delta",
          "new_api": null,
          "old_text": "count_delta(delta, delta_size, &src_copied, &literal_added)",
          "new_text": null,
          "old_line_content": "\tif (count_delta(delta, delta_size, &src_copied, &literal_added)) {",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta)",
          "new_text": null,
          "old_line_content": "\t\tfree(delta);",
          "new_line_content": "\tif (base_size * (MAX_SCORE-minimum_score) < delta_size * MAX_SCORE)",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(mx, num_create * num_src, sizeof(*mx), score_compare)",
          "new_text": null,
          "old_line_content": "\tqsort(mx, num_create * num_src, sizeof(*mx), score_compare);",
          "new_line_content": "\t\t\t\t\t\t       minimum_score);",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta)",
          "new_text": null,
          "old_line_content": "\tfree(delta);",
          "new_line_content": "\t/* Estimate the edit size by interpreting delta. */",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "record_rename_pair",
          "new_api": null,
          "old_text": "record_rename_pair(&renq, mx[i].dst, mx[i].src, mx[i].score)",
          "new_text": null,
          "old_line_content": "\t\trecord_rename_pair(&renq, mx[i].dst, mx[i].src, mx[i].score);",
          "new_line_content": "\t\tstruct diff_rename_dst *dst = &rename_dst[mx[i].dst];",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(mx)",
          "new_text": null,
          "old_line_content": "\tfree(mx);",
          "new_line_content": "\t\t\tcontinue; /* already done, either exact or fuzzy. */",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "diff_debug_queue",
          "new_api": null,
          "old_text": "diff_debug_queue(\"done detecting fuzzy\", &renq)",
          "new_text": null,
          "old_line_content": "\tdiff_debug_queue(\"done detecting fuzzy\", &renq);",
          "new_line_content": "\t\tif (mx[i].score < minimum_score)",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": null,
          "old_line_content": "\t\tif (!DIFF_FILE_VALID(p->one) && DIFF_FILE_VALID(p->two)) {",
          "new_line_content": "\toutq.nr = outq.alloc = 0;",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"internal error: dst already matched.\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"internal error: dst already matched.\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->two, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlocate_rename_dst(p->two, 0);",
          "new_line_content": "\t\t\t *",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "alloc_filespec",
          "new_api": null,
          "old_text": "alloc_filespec(src->path)",
          "new_text": null,
          "old_line_content": "\tone = alloc_filespec(src->path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "fill_filespec",
          "new_api": null,
          "old_text": "fill_filespec(one, src->sha1, src->mode)",
          "new_text": null,
          "old_line_content": "\tfill_filespec(one, src->sha1, src->mode);",
          "new_line_content": "\tif (rename_dst[dst_index].pair)",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, dst->pair)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, dst->pair);",
          "new_line_content": "\t\t\t * not been turned into a rename/copy already.",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "alloc_filespec",
          "new_api": null,
          "old_text": "alloc_filespec(dst->path)",
          "new_text": null,
          "old_line_content": "\ttwo = alloc_filespec(dst->path);",
          "new_line_content": "\tsrc = rename_src[src_index].one;",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "diff_queue",
          "new_api": null,
          "old_text": "diff_queue(renq, one, two)",
          "new_text": null,
          "old_line_content": "\tdp = diff_queue(renq, one, two);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": null,
          "old_line_content": "\t\telse if (DIFF_FILE_VALID(p->one) && !DIFF_FILE_VALID(p->two)) {",
          "new_line_content": "\t\t\t\t/* no matching rename/copy source, so",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "DIFF_PAIR_BROKEN",
          "new_api": null,
          "old_text": "DIFF_PAIR_BROKEN(p)",
          "new_text": null,
          "old_line_content": "\t\t\tif (DIFF_PAIR_BROKEN(p)) {",
          "new_line_content": "\t\t\t * Otherwise, the counterpart broken create",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->one, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tlocate_rename_dst(p->one, 0);",
          "new_line_content": "\t\t\t * begin with.",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(renq.queue[j]->one->path,\n\t\t\t\t\t\t    p->one->path)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (!strcmp(renq.queue[j]->one->path,",
          "new_line_content": "\t\t\t\t\t/* counterpart is now rename/copy */",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->one)",
          "new_text": null,
          "old_line_content": "\t\tif (!DIFF_FILE_VALID(p->one))",
          "new_line_content": "\trenq.queue = NULL;",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!DIFF_FILE_VALID(p->two))",
          "new_line_content": "\trenq.nr = renq.alloc = 0;",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->two, 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlocate_rename_dst(p->two, 1);",
          "new_line_content": "\t\tstruct diff_filepair *p = q->queue[i];",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 39,
      "total_deletions": 39,
      "total_api_changes": 81
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 81,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          167,
          170,
          139,
          172,
          171,
          173
        ]
      }
    },
    "api_calls_before": 63,
    "api_calls_after": 63,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 1,
      "total_diff_lines": 28
    }
  }
}
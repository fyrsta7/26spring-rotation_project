{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7e9c34126ce7608bbc971b09b80540d0112091c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7e9c34126ce7608bbc971b09b80540d0112091c/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7e9c34126ce7608bbc971b09b80540d0112091c/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/a7e9c34126ce7608bbc971b09b80540d0112091c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2818,
          "old_api": "die",
          "new_api": "strlen",
          "old_text": "die(\"Invalid mark: %s\", command_buf.buf)",
          "new_text": "strlen(\"cat-blob \")",
          "old_line_content": "\t\t\tdie(\"Invalid mark: %s\", command_buf.buf);",
          "new_line_content": "\tp = command_buf.buf + strlen(\"cat-blob \");",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": "hashcpy",
          "new_api": "die",
          "old_text": "hashcpy(sha1, oe->idx.sha1)",
          "new_text": "die(\"Invalid mark: %s\", command_buf.buf)",
          "old_line_content": "\t\thashcpy(sha1, oe->idx.sha1);",
          "new_line_content": "\t\t\tdie(\"Invalid mark: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2825,
          "old_api": "get_sha1_hex",
          "new_api": "die",
          "old_text": "get_sha1_hex(p, sha1)",
          "new_text": "die(\"Unknown mark: %s\", command_buf.buf)",
          "old_line_content": "\t\tif (get_sha1_hex(p, sha1))",
          "new_line_content": "\t\t\tdie(\"Unknown mark: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": "die",
          "new_api": "hashcpy",
          "old_text": "die(\"Garbage after SHA1: %s\", command_buf.buf)",
          "new_text": "hashcpy(sha1, oe->idx.sha1)",
          "old_line_content": "\t\t\tdie(\"Garbage after SHA1: %s\", command_buf.buf);",
          "new_line_content": "\t\thashcpy(sha1, oe->idx.sha1);",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": "strlen",
          "new_api": "sha1_to_hex",
          "old_text": "strlen(\"object \")",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\tif (size < 40 + strlen(\"object \") ||",
          "new_line_content": "\t\tdie(\"Can't load object %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "free",
          "new_api": "strlen",
          "old_text": "free(buf)",
          "new_text": "strlen(\"tree \")",
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t\tif (size < 40 + strlen(\"tree \") ||",
          "content_same": false
        },
        {
          "line": 2883,
          "old_api": "find_object",
          "new_api": "strlen",
          "old_text": "find_object(sha1)",
          "new_text": "strlen(\"tree \")",
          "old_line_content": "\treturn find_object(sha1);",
          "new_line_content": "\t\t    get_sha1_hex(buf + strlen(\"tree \"), sha1))",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "dereference",
          "new_api": "find_object",
          "old_text": "dereference(e, sha1)",
          "new_text": "find_object(sha1)",
          "old_line_content": "\t\te = dereference(e, sha1);",
          "new_line_content": "\t\te = find_object(sha1);",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": "strbuf_reset",
          "new_api": "S_ISDIR",
          "old_text": "strbuf_reset(&line)",
          "new_text": "S_ISDIR(mode)",
          "old_line_content": "\t\tstrbuf_reset(&line);",
          "new_line_content": "\t\tS_ISDIR(mode) ? tree_type :",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "strbuf_reset",
          "new_api": "strbuf_addstr",
          "old_text": "strbuf_reset(&line)",
          "new_text": "strbuf_addstr(&line, \"missing \")",
          "old_line_content": "\t\tstrbuf_reset(&line);",
          "new_line_content": "\t\tstrbuf_addstr(&line, \"missing \");",
          "content_same": false
        },
        {
          "line": 2931,
          "old_api": "strbuf_addf",
          "new_api": "quote_c_style",
          "old_text": "strbuf_addf(&line, \"%06o %s %s\\t\",\n\t\t\t\tmode, type, sha1_to_hex(sha1))",
          "new_text": "quote_c_style(path, &line, NULL, 0)",
          "old_line_content": "\t\tstrbuf_addf(&line, \"%06o %s %s\\t\",",
          "new_line_content": "\t\tquote_c_style(path, &line, NULL, 0);",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "sha1_to_hex",
          "new_api": "strbuf_addch",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "strbuf_addch(&line, '\\n')",
          "old_line_content": "\t\t\t\tmode, type, sha1_to_hex(sha1));",
          "new_line_content": "\t\tstrbuf_addch(&line, '\\n');",
          "content_same": false
        },
        {
          "line": 2936,
          "old_api": "cat_blob_write",
          "new_api": "strbuf_addf",
          "old_text": "cat_blob_write(line.buf, line.len)",
          "new_text": "strbuf_addf(&line, \"%06o %s %s\\t\",\n\t\t\t\tmode, type, sha1_to_hex(sha1))",
          "old_line_content": "\tcat_blob_write(line.buf, line.len);",
          "new_line_content": "\t\tstrbuf_addf(&line, \"%06o %s %s\\t\",",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "hashcpy",
          "new_api": "die",
          "old_text": "hashcpy(root->versions[1].sha1, e->idx.sha1)",
          "new_text": "die(\"Not in a commit: %s\", command_buf.buf)",
          "old_line_content": "\t\thashcpy(root->versions[1].sha1, e->idx.sha1);",
          "new_line_content": "\t\t\tdie(\"Not in a commit: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": "die",
          "new_api": "parse_treeish_dataref",
          "old_text": "die(\"Missing space after tree-ish: %s\", command_buf.buf)",
          "new_text": "parse_treeish_dataref(&p)",
          "old_line_content": "\t\t\tdie(\"Missing space after tree-ish: %s\", command_buf.buf);",
          "new_line_content": "\t\tstruct object_entry *e = parse_treeish_dataref(&p);",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": "strbuf_reset",
          "new_api": "die",
          "old_text": "strbuf_reset(&uq)",
          "new_text": "die(\"Missing space after tree-ish: %s\", command_buf.buf)",
          "old_line_content": "\t\tstrbuf_reset(&uq);",
          "new_line_content": "\t\t\tdie(\"Missing space after tree-ish: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": "tree_content_get",
          "new_api": "die",
          "old_text": "tree_content_get(root, p, &leaf)",
          "new_text": "die(\"Invalid path: %s\", command_buf.buf)",
          "old_line_content": "\ttree_content_get(root, p, &leaf);",
          "new_line_content": "\t\t\tdie(\"Invalid path: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": "S_ISDIR",
          "new_api": "tree_content_get",
          "old_text": "S_ISDIR(leaf.versions[1].mode)",
          "new_text": "tree_content_get(root, p, &leaf)",
          "old_line_content": "\tif (S_ISDIR(leaf.versions[1].mode))",
          "new_line_content": "\ttree_content_get(root, p, &leaf);",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "release_tree_entry",
          "new_api": "S_ISDIR",
          "old_text": "release_tree_entry(root)",
          "new_text": "S_ISDIR(leaf.versions[1].mode)",
          "old_line_content": "\t\trelease_tree_entry(root);",
          "new_line_content": "\tif (S_ISDIR(leaf.versions[1].mode))",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "fwrite",
          "new_api": "skip_optional_lf",
          "old_text": "fwrite(command_buf.buf, 1, command_buf.len, stdout)",
          "new_text": "skip_optional_lf()",
          "old_line_content": "\tfwrite(command_buf.buf, 1, command_buf.len, stdout);",
          "new_line_content": "\tskip_optional_lf();",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": "die",
          "new_api": "strcmp",
          "old_text": "die(\"unknown --date-format argument %s\", fmt)",
          "new_text": "strcmp(fmt, \"rfc2822\")",
          "old_line_content": "\t\tdie(\"unknown --date-format argument %s\", fmt);",
          "new_line_content": "\telse if (!strcmp(fmt, \"rfc2822\"))",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": "ulong_arg",
          "new_api": "die",
          "old_text": "ulong_arg(\"--active-branches\", branches)",
          "new_text": "die(\"--depth cannot exceed %u\", MAX_DEPTH)",
          "old_line_content": "\tmax_active_branches = ulong_arg(\"--active-branches\", branches);",
          "new_line_content": "\t\tdie(\"--depth cannot exceed %u\", MAX_DEPTH);",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "make_fast_import_path",
          "new_api": "ulong_arg",
          "old_text": "make_fast_import_path(marks)",
          "new_text": "ulong_arg(\"--active-branches\", branches)",
          "old_line_content": "\texport_marks_file = make_fast_import_path(marks);",
          "new_line_content": "\tmax_active_branches = ulong_arg(\"--active-branches\", branches);",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "ulong_arg",
          "new_api": "safe_create_leading_directories_const",
          "old_text": "ulong_arg(\"--cat-blob-fd\", fd)",
          "new_text": "safe_create_leading_directories_const(export_marks_file)",
          "old_line_content": "\tunsigned long n = ulong_arg(\"--cat-blob-fd\", fd);",
          "new_line_content": "\tsafe_create_leading_directories_const(export_marks_file);",
          "content_same": false
        },
        {
          "line": 3093,
          "old_api": "prefixcmp",
          "new_api": "die_errno",
          "old_text": "prefixcmp(option, \"max-pack-size=\")",
          "new_text": "die_errno(\"Cannot open '%s'\", edges)",
          "old_line_content": "\tif (!prefixcmp(option, \"max-pack-size=\")) {",
          "new_line_content": "\t\tdie_errno(\"Cannot open '%s'\", edges);",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": "warning",
          "new_api": "prefixcmp",
          "old_text": "warning(\"max-pack-size is now in bytes, assuming --max-pack-size=%lum\", v)",
          "new_text": "prefixcmp(option, \"max-pack-size=\")",
          "old_line_content": "\t\t\twarning(\"max-pack-size is now in bytes, assuming --max-pack-size=%lum\", v);",
          "new_line_content": "\tif (!prefixcmp(option, \"max-pack-size=\")) {",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "prefixcmp",
          "new_api": "git_parse_ulong",
          "old_text": "prefixcmp(option, \"active-branches=\")",
          "new_text": "git_parse_ulong(option + 19, &v)",
          "old_line_content": "\t} else if (!prefixcmp(option, \"active-branches=\")) {",
          "new_line_content": "\t\tif (!git_parse_ulong(option + 19, &v))",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": "option_export_pack_edges",
          "new_api": "prefixcmp",
          "old_text": "option_export_pack_edges(option + 18)",
          "new_text": "prefixcmp(option, \"depth=\")",
          "old_line_content": "\t\toption_export_pack_edges(option + 18);",
          "new_line_content": "\t} else if (!prefixcmp(option, \"depth=\")) {",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "prefixcmp",
          "new_api": "option_depth",
          "old_text": "prefixcmp(option, \"quiet\")",
          "new_text": "option_depth(option + 6)",
          "old_line_content": "\t} else if (!prefixcmp(option, \"quiet\")) {",
          "new_line_content": "\t\toption_depth(option + 6);",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "prefixcmp",
          "new_api": "option_active_branches",
          "old_text": "prefixcmp(option, \"stats\")",
          "new_text": "option_active_branches(option + 16)",
          "old_line_content": "\t} else if (!prefixcmp(option, \"stats\")) {",
          "new_line_content": "\t\toption_active_branches(option + 16);",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "strlen",
          "new_api": "prefixcmp",
          "old_text": "strlen(\"import-marks-if-exists=\")",
          "new_text": "prefixcmp(feature, \"date-format=\")",
          "old_line_content": "\t\toption_import_marks(feature + strlen(\"import-marks-if-exists=\"),",
          "new_line_content": "\tif (!prefixcmp(feature, \"date-format=\")) {",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "option_export_marks",
          "new_api": "option_import_marks",
          "old_text": "option_export_marks(feature + 13)",
          "new_text": "option_import_marks(feature + 13, from_stream, 0)",
          "old_line_content": "\t\toption_export_marks(feature + 13);",
          "new_line_content": "\t\toption_import_marks(feature + 13, from_stream, 0);",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": "strcmp",
          "new_api": "prefixcmp",
          "old_text": "strcmp(feature, \"cat-blob\")",
          "new_text": "prefixcmp(feature, \"import-marks-if-exists=\")",
          "old_line_content": "\t} else if (!strcmp(feature, \"cat-blob\")) {",
          "new_line_content": "\t} else if (!prefixcmp(feature, \"import-marks-if-exists=\")) {",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": "strcmp",
          "new_api": "option_export_marks",
          "old_text": "strcmp(feature, \"no-relative-marks\")",
          "new_text": "option_export_marks(feature + 13)",
          "old_line_content": "\t} else if (!strcmp(feature, \"no-relative-marks\")) {",
          "new_line_content": "\t\toption_export_marks(feature + 13);",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "strcmp",
          "new_api": "die",
          "old_text": "strcmp(k, \"pack.depth\")",
          "new_text": "die(\"This version of fast-import does not support option: %s\", option)",
          "old_line_content": "\tif (!strcmp(k, \"pack.depth\")) {",
          "new_line_content": "\tdie(\"This version of fast-import does not support option: %s\", option);",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": "strcmp",
          "new_api": "git_config_int",
          "old_text": "strcmp(k, \"pack.compression\")",
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\tif (!strcmp(k, \"pack.compression\")) {",
          "new_line_content": "\t\tmax_depth = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": "die",
          "new_api": "strcmp",
          "old_text": "die(\"bad pack compression level %d\", level)",
          "new_text": "strcmp(k, \"pack.compression\")",
          "old_line_content": "\t\t\tdie(\"bad pack compression level %d\", level);",
          "new_line_content": "\tif (!strcmp(k, \"pack.compression\")) {",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "strcmp",
          "new_api": "die",
          "old_text": "strcmp(k, \"pack.indexversion\")",
          "new_text": "die(\"bad pack compression level %d\", level)",
          "old_line_content": "\tif (!strcmp(k, \"pack.indexversion\")) {",
          "new_line_content": "\t\t\tdie(\"bad pack compression level %d\", level);",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "git_config_ulong",
          "new_api": "die",
          "old_text": "git_config_ulong(k, v)",
          "new_text": "die(\"bad pack.indexversion=%\"PRIu32,\n\t\t\t    pack_idx_default_version)",
          "old_line_content": "\t\tmax_packsize = git_config_ulong(k, v);",
          "new_line_content": "\t\t\tdie(\"bad pack.indexversion=%\"PRIu32,",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": "die",
          "new_api": "prefixcmp",
          "old_text": "die(\"unknown option %s\", a)",
          "new_text": "prefixcmp(a + 2, \"cat-blob-fd=\")",
          "old_line_content": "\t\tdie(\"unknown option %s\", a);",
          "new_line_content": "\t\tif (!prefixcmp(a + 2, \"cat-blob-fd=\")) {",
          "content_same": false
        },
        {
          "line": 3256,
          "old_api": "setup_git_directory",
          "new_api": "git_extract_argv0_path",
          "old_text": "setup_git_directory()",
          "new_text": "git_extract_argv0_path(argv[0])",
          "old_line_content": "\tsetup_git_directory();",
          "new_line_content": "\tgit_extract_argv0_path(argv[0]);",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": "alloc_objects",
          "new_api": "setup_git_directory",
          "old_text": "alloc_objects(object_entry_alloc)",
          "new_text": "setup_git_directory()",
          "old_line_content": "\talloc_objects(object_entry_alloc);",
          "new_line_content": "\tsetup_git_directory();",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "strbuf_init",
          "new_api": "git_config",
          "old_text": "strbuf_init(&command_buf, 0)",
          "new_text": "git_config(git_pack_config, NULL)",
          "old_line_content": "\tstrbuf_init(&command_buf, 0);",
          "new_line_content": "\tgit_config(git_pack_config, NULL);",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": "pool_calloc",
          "new_api": "alloc_objects",
          "old_text": "pool_calloc(1, sizeof(struct mark_set))",
          "new_text": "alloc_objects(object_entry_alloc)",
          "old_line_content": "\tmarks = pool_calloc(1, sizeof(struct mark_set));",
          "new_line_content": "\talloc_objects(object_entry_alloc);",
          "content_same": false
        },
        {
          "line": 3271,
          "old_api": "pool_alloc",
          "new_api": "pool_calloc",
          "old_text": "pool_alloc(cmd_save * sizeof(*rc_free))",
          "new_text": "pool_calloc(1, sizeof(struct mark_set))",
          "old_line_content": "\trc_free = pool_alloc(cmd_save * sizeof(*rc_free));",
          "new_line_content": "\tmarks = pool_calloc(1, sizeof(struct mark_set));",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": "prepare_packed_git",
          "new_api": "pool_alloc",
          "old_text": "prepare_packed_git()",
          "new_text": "pool_alloc(cmd_save * sizeof(*rc_free))",
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "\trc_free = pool_alloc(cmd_save * sizeof(*rc_free));",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "strcmp",
          "new_api": "prepare_packed_git",
          "old_text": "strcmp(\"blob\", command_buf.buf)",
          "new_text": "prepare_packed_git()",
          "old_line_content": "\t\tif (!strcmp(\"blob\", command_buf.buf))",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": "parse_new_blob",
          "new_api": "start_packfile",
          "old_text": "parse_new_blob()",
          "new_text": "start_packfile()",
          "old_line_content": "\t\t\tparse_new_blob();",
          "new_line_content": "\tstart_packfile();",
          "content_same": false
        },
        {
          "line": 3283,
          "old_api": "prefixcmp",
          "new_api": "set_die_routine",
          "old_text": "prefixcmp(command_buf.buf, \"ls \")",
          "new_text": "set_die_routine(die_nicely)",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"ls \"))",
          "new_line_content": "\tset_die_routine(die_nicely);",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": "parse_ls",
          "new_api": "set_checkpoint_signal",
          "old_text": "parse_ls(NULL)",
          "new_text": "set_checkpoint_signal()",
          "old_line_content": "\t\t\tparse_ls(NULL);",
          "new_line_content": "\tset_checkpoint_signal();",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "prefixcmp",
          "new_api": "read_next_command",
          "old_text": "prefixcmp(command_buf.buf, \"commit \")",
          "new_text": "read_next_command()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"commit \"))",
          "new_line_content": "\twhile (read_next_command() != EOF) {",
          "content_same": false
        },
        {
          "line": 3286,
          "old_api": "parse_new_commit",
          "new_api": "strcmp",
          "old_text": "parse_new_commit()",
          "new_text": "strcmp(\"blob\", command_buf.buf)",
          "old_line_content": "\t\t\tparse_new_commit();",
          "new_line_content": "\t\tif (!strcmp(\"blob\", command_buf.buf))",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": "prefixcmp",
          "new_api": "parse_new_blob",
          "old_text": "prefixcmp(command_buf.buf, \"tag \")",
          "new_text": "parse_new_blob()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"tag \"))",
          "new_line_content": "\t\t\tparse_new_blob();",
          "content_same": false
        },
        {
          "line": 3288,
          "old_api": "parse_new_tag",
          "new_api": "prefixcmp",
          "old_text": "parse_new_tag()",
          "new_text": "prefixcmp(command_buf.buf, \"ls \")",
          "old_line_content": "\t\t\tparse_new_tag();",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"ls \"))",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "prefixcmp",
          "new_api": "parse_ls",
          "old_text": "prefixcmp(command_buf.buf, \"reset \")",
          "new_text": "parse_ls(NULL)",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"reset \"))",
          "new_line_content": "\t\t\tparse_ls(NULL);",
          "content_same": false
        },
        {
          "line": 3290,
          "old_api": "parse_reset_branch",
          "new_api": "prefixcmp",
          "old_text": "parse_reset_branch()",
          "new_text": "prefixcmp(command_buf.buf, \"commit \")",
          "old_line_content": "\t\t\tparse_reset_branch();",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"commit \"))",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": "strcmp",
          "new_api": "parse_new_commit",
          "old_text": "strcmp(\"checkpoint\", command_buf.buf)",
          "new_text": "parse_new_commit()",
          "old_line_content": "\t\telse if (!strcmp(\"checkpoint\", command_buf.buf))",
          "new_line_content": "\t\t\tparse_new_commit();",
          "content_same": false
        },
        {
          "line": 3292,
          "old_api": "parse_checkpoint",
          "new_api": "prefixcmp",
          "old_text": "parse_checkpoint()",
          "new_text": "prefixcmp(command_buf.buf, \"tag \")",
          "old_line_content": "\t\t\tparse_checkpoint();",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"tag \"))",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "prefixcmp",
          "new_api": "parse_new_tag",
          "old_text": "prefixcmp(command_buf.buf, \"progress \")",
          "new_text": "parse_new_tag()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"progress \"))",
          "new_line_content": "\t\t\tparse_new_tag();",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": "parse_progress",
          "new_api": "prefixcmp",
          "old_text": "parse_progress()",
          "new_text": "prefixcmp(command_buf.buf, \"reset \")",
          "old_line_content": "\t\t\tparse_progress();",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"reset \"))",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": "prefixcmp",
          "new_api": "parse_reset_branch",
          "old_text": "prefixcmp(command_buf.buf, \"feature \")",
          "new_text": "parse_reset_branch()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"feature \"))",
          "new_line_content": "\t\t\tparse_reset_branch();",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": "parse_feature",
          "new_api": "strcmp",
          "old_text": "parse_feature()",
          "new_text": "strcmp(\"checkpoint\", command_buf.buf)",
          "old_line_content": "\t\t\tparse_feature();",
          "new_line_content": "\t\telse if (!strcmp(\"checkpoint\", command_buf.buf))",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "prefixcmp",
          "new_api": "parse_checkpoint",
          "old_text": "prefixcmp(command_buf.buf, \"option git \")",
          "new_text": "parse_checkpoint()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"option git \"))",
          "new_line_content": "\t\t\tparse_checkpoint();",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": "parse_option",
          "new_api": "prefixcmp",
          "old_text": "parse_option()",
          "new_text": "prefixcmp(command_buf.buf, \"progress \")",
          "old_line_content": "\t\t\tparse_option();",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"progress \"))",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "prefixcmp",
          "new_api": "parse_progress",
          "old_text": "prefixcmp(command_buf.buf, \"option \")",
          "new_text": "parse_progress()",
          "old_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"option \"))",
          "new_line_content": "\t\t\tparse_progress();",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": "die",
          "new_api": "prefixcmp",
          "old_text": "die(\"Unsupported command: %s\", command_buf.buf)",
          "new_text": "prefixcmp(command_buf.buf, \"option git \")",
          "old_line_content": "\t\t\tdie(\"Unsupported command: %s\", command_buf.buf);",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"option git \"))",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "parse_argv",
          "new_api": "checkpoint",
          "old_text": "parse_argv()",
          "new_text": "checkpoint()",
          "old_line_content": "\t\tparse_argv();",
          "new_line_content": "\t\t\tcheckpoint();",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "dump_tags",
          "new_api": "parse_argv",
          "old_text": "dump_tags()",
          "new_text": "parse_argv()",
          "old_line_content": "\tdump_tags();",
          "new_line_content": "\t\tparse_argv();",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "dump_marks",
          "new_api": "end_packfile",
          "old_text": "dump_marks()",
          "new_text": "end_packfile()",
          "old_line_content": "\tdump_marks();",
          "new_line_content": "\tend_packfile();",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": "fclose",
          "new_api": "dump_tags",
          "old_text": "fclose(pack_edges)",
          "new_text": "dump_tags()",
          "old_line_content": "\t\tfclose(pack_edges);",
          "new_line_content": "\tdump_tags();",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": "fprintf",
          "new_api": "ARRAY_SIZE",
          "old_text": "fprintf(stderr, \"%s statistics:\\n\", argv[0])",
          "new_text": "ARRAY_SIZE(object_count_by_type)",
          "old_line_content": "\t\tfprintf(stderr, \"%s statistics:\\n\", argv[0]);",
          "new_line_content": "\t\tfor (i = 0; i < ARRAY_SIZE(object_count_by_type); i++)",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": "fprintf",
          "new_api": "ARRAY_SIZE",
          "old_text": "fprintf(stderr, \"Alloc'd objects: %10\" PRIuMAX \"\\n\", alloc_count)",
          "new_text": "ARRAY_SIZE(duplicate_count_by_type)",
          "old_line_content": "\t\tfprintf(stderr, \"Alloc'd objects: %10\" PRIuMAX \"\\n\", alloc_count);",
          "new_line_content": "\t\tfor (i = 0; i < ARRAY_SIZE(duplicate_count_by_type); i++)",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": "pack_report",
          "new_api": "fprintf",
          "old_text": "pack_report()",
          "new_text": "fprintf(stderr, \"      atoms:     %10u\\n\", atom_cnt)",
          "old_line_content": "\t\tpack_report();",
          "new_line_content": "\t\tfprintf(stderr, \"      atoms:     %10u\\n\", atom_cnt);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3075,
          "old_api": null,
          "new_api": "make_fast_import_path",
          "old_text": null,
          "new_text": "make_fast_import_path(marks)",
          "old_line_content": "{",
          "new_line_content": "\texport_marks_file = make_fast_import_path(marks);",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "ulong_arg",
          "old_text": null,
          "new_text": "ulong_arg(\"--cat-blob-fd\", fd)",
          "old_line_content": "",
          "new_line_content": "\tunsigned long n = ulong_arg(\"--cat-blob-fd\", fd);",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"--cat-blob-fd cannot exceed %d\", INT_MAX)",
          "old_line_content": "{",
          "new_line_content": "\t\tdie(\"--cat-blob-fd cannot exceed %d\", INT_MAX);",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(pack_edges)",
          "old_line_content": "",
          "new_line_content": "\t\tfclose(pack_edges);",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(edges, \"a\")",
          "old_line_content": "static int parse_one_option(const char *option)",
          "new_line_content": "\tpack_edges = fopen(edges, \"a\");",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": null,
          "new_api": "git_parse_ulong",
          "old_text": null,
          "new_text": "git_parse_ulong(option + 14, &v)",
          "old_line_content": "\t\t} else if (v < 1024 * 1024) {",
          "new_line_content": "\t\tif (!git_parse_ulong(option + 14, &v))",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"max-pack-size is now in bytes, assuming --max-pack-size=%lum\", v)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\twarning(\"max-pack-size is now in bytes, assuming --max-pack-size=%lum\", v);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"minimum max-pack-size is 1 MiB\")",
          "old_line_content": "\t\tunsigned long v;",
          "new_line_content": "\t\t\twarning(\"minimum max-pack-size is 1 MiB\");",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(option, \"active-branches=\")",
          "old_line_content": "\t\tshow_stats = 0;",
          "new_line_content": "\t} else if (!prefixcmp(option, \"active-branches=\")) {",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(option, \"export-pack-edges=\")",
          "old_line_content": "\t\tshow_stats = 1;",
          "new_line_content": "\t} else if (!prefixcmp(option, \"export-pack-edges=\")) {",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": null,
          "new_api": "option_export_pack_edges",
          "old_text": null,
          "new_text": "option_export_pack_edges(option + 18)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\toption_export_pack_edges(option + 18);",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(option, \"quiet\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t} else if (!prefixcmp(option, \"quiet\")) {",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(option, \"stats\")",
          "old_line_content": "",
          "new_line_content": "\t} else if (!prefixcmp(option, \"stats\")) {",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": null,
          "new_api": "option_date_format",
          "old_text": null,
          "new_text": "option_date_format(feature + 12)",
          "old_line_content": "\t\t\t\t\tfrom_stream, 1);",
          "new_line_content": "\t\toption_date_format(feature + 12);",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"import-marks-if-exists=\")",
          "old_line_content": "\t\t; /* Don't die - this feature is supported */",
          "new_line_content": "\t\toption_import_marks(feature + strlen(\"import-marks-if-exists=\"),",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(feature, \"export-marks=\")",
          "old_line_content": "\t\trelative_marks_paths = 1;",
          "new_line_content": "\t} else if (!prefixcmp(feature, \"export-marks=\")) {",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(feature, \"cat-blob\")",
          "old_line_content": "\t\trelative_marks_paths = 0;",
          "new_line_content": "\t} else if (!strcmp(feature, \"cat-blob\")) {",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(feature, \"relative-marks\")",
          "old_line_content": "\t\tforce_update = 1;",
          "new_line_content": "\t} else if (!strcmp(feature, \"relative-marks\")) {",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(feature, \"no-relative-marks\")",
          "old_line_content": "\t\t; /* do nothing; we have the feature */",
          "new_line_content": "\t} else if (!strcmp(feature, \"no-relative-marks\")) {",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(feature, \"force\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t} else if (!strcmp(feature, \"force\")) {",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(feature, \"ls\")",
          "old_line_content": "",
          "new_line_content": "\t} else if (!strcmp(feature, \"notes\") || !strcmp(feature, \"ls\")) {",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": null,
          "new_api": "parse_one_feature",
          "old_text": null,
          "new_text": "parse_one_feature(feature, 1)",
          "old_line_content": "",
          "new_line_content": "\tif (parse_one_feature(feature, 1))",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"This version of fast-import does not support feature %s.\", feature)",
          "old_line_content": "\tchar *option = command_buf.buf + 11;",
          "new_line_content": "\tdie(\"This version of fast-import does not support feature %s.\", feature);",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": null,
          "new_api": "parse_one_option",
          "old_text": null,
          "new_text": "parse_one_option(option)",
          "old_line_content": "",
          "new_line_content": "\tif (parse_one_option(option))",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.depth\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (!strcmp(k, \"pack.depth\")) {",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t\tpack_compression_level = level;",
          "new_line_content": "\t\tint level = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.indexversion\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(k, \"pack.indexversion\")) {",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpack_idx_default_version = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.packsizelimit\")",
          "old_line_content": "}",
          "new_line_content": "\tif (!strcmp(k, \"pack.packsizelimit\")) {",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": null,
          "new_api": "git_config_ulong",
          "old_text": null,
          "new_text": "git_config_ulong(k, v)",
          "old_line_content": "",
          "new_line_content": "\t\tmax_packsize = git_config_ulong(k, v);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "git_default_config",
          "old_text": null,
          "new_text": "git_default_config(k, v, cb)",
          "old_line_content": "",
          "new_line_content": "\treturn git_default_config(k, v, cb);",
          "content_same": false
        },
        {
          "line": 3228,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a, \"--\")",
          "old_line_content": "",
          "new_line_content": "\t\tif (*a != '-' || !strcmp(a, \"--\"))",
          "content_same": false
        },
        {
          "line": 3231,
          "old_api": null,
          "new_api": "parse_one_option",
          "old_text": null,
          "new_text": "parse_one_option(a + 2)",
          "old_line_content": "",
          "new_line_content": "\t\tif (parse_one_option(a + 2))",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": null,
          "new_api": "parse_one_feature",
          "old_text": null,
          "new_text": "parse_one_feature(a + 2, 0)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (parse_one_feature(a + 2, 0))",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"cat-blob-fd=\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\toption_cat_blob_fd(a + 2 + strlen(\"cat-blob-fd=\"));",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unknown option %s\", a)",
          "old_line_content": "\tseen_data_command = 1;",
          "new_line_content": "\t\tdie(\"unknown option %s\", a);",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fast_import_usage)",
          "old_line_content": "}",
          "new_line_content": "\t\tusage(fast_import_usage);",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": null,
          "new_api": "read_marks",
          "old_text": null,
          "new_text": "read_marks()",
          "old_line_content": "\tunsigned int i;",
          "new_line_content": "\t\tread_marks();",
          "content_same": false
        },
        {
          "line": 3258,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"-h\")",
          "old_line_content": "\tif (!pack_compression_seen && core_compression_seen)",
          "new_line_content": "\tif (argc == 2 && !strcmp(argv[1], \"-h\"))",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(fast_import_usage)",
          "old_line_content": "\t\tpack_compression_level = core_compression_level;",
          "new_line_content": "\t\tusage(fast_import_usage);",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&command_buf, 0)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_init(&command_buf, 0);",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(atom_table_sz, sizeof(struct atom_str*))",
          "old_line_content": "\tglobal_argc = argc;",
          "new_line_content": "\tatom_table = xcalloc(atom_table_sz, sizeof(struct atom_str*));",
          "content_same": false
        },
        {
          "line": 3269,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(branch_table_sz, sizeof(struct branch*))",
          "old_line_content": "\tglobal_argv = argv;",
          "new_line_content": "\tbranch_table = xcalloc(branch_table_sz, sizeof(struct branch*));",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(avail_tree_table_sz, sizeof(struct avail_tree_content*))",
          "old_line_content": "",
          "new_line_content": "\tavail_tree_table = xcalloc(avail_tree_table_sz, sizeof(struct avail_tree_content*));",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(command_buf.buf, \"feature \")",
          "old_line_content": "\t\t\t/* ignore non-git options*/;",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"feature \"))",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": null,
          "new_api": "parse_feature",
          "old_text": null,
          "new_text": "parse_feature()",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tparse_feature();",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": null,
          "new_api": "parse_option",
          "old_text": null,
          "new_text": "parse_option()",
          "old_line_content": "",
          "new_line_content": "\t\t\tparse_option();",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(command_buf.buf, \"option \")",
          "old_line_content": "\t\tif (checkpoint_requested)",
          "new_line_content": "\t\telse if (!prefixcmp(command_buf.buf, \"option \"))",
          "content_same": false
        },
        {
          "line": 3307,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Unsupported command: %s\", command_buf.buf)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdie(\"Unsupported command: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": null,
          "new_api": "strbuf_attach",
          "old_text": null,
          "new_text": "strbuf_attach(&last_blob.data, buf, size, size)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_attach(&last_blob.data, buf, size, size);",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": null,
          "new_api": "dump_branches",
          "old_text": null,
          "new_text": "dump_branches()",
          "old_line_content": "\tif (pack_edges)",
          "new_line_content": "\tdump_branches();",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\tconst char *p;",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "unkeep_all_packs",
          "old_text": null,
          "new_text": "unkeep_all_packs()",
          "old_line_content": "",
          "new_line_content": "\tunkeep_all_packs();",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "dump_marks",
          "old_text": null,
          "new_text": "dump_marks()",
          "old_line_content": "\tif (show_stats) {",
          "new_line_content": "\tdump_marks();",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(pack_edges)",
          "old_line_content": "\t\t\ttotal_count += object_count_by_type[i];",
          "new_line_content": "\t\tfclose(pack_edges);",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": null,
          "new_api": "strtoumax",
          "old_text": null,
          "new_text": "strtoumax(p + 1, &x, 10)",
          "old_line_content": "\t\tif (*x)",
          "new_line_content": "\t\toe = find_mark(strtoumax(p + 1, &x, 10));",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Garbage after mark: %s\", command_buf.buf)",
          "old_line_content": "\t\tif (p[40])",
          "new_line_content": "\t\t\tdie(\"Garbage after mark: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(p, sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (get_sha1_hex(p, sha1))",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Invalid SHA1: %s\", command_buf.buf)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdie(\"Invalid SHA1: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Garbage after SHA1: %s\", command_buf.buf)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"Garbage after SHA1: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": null,
          "new_api": "find_object",
          "old_text": null,
          "new_text": "find_object(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\toe = find_object(sha1);",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"     objects:    %10\" PRIuMAX \" KiB\\n\", (alloc_count*sizeof(struct object_entry))/1024)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfprintf(stderr, \"     objects:    %10\" PRIuMAX \" KiB\\n\", (alloc_count*sizeof(struct object_entry))/1024);",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"---------------------------------------------------------------------\\n\")",
          "old_line_content": "",
          "new_line_content": "\t\tfprintf(stderr, \"---------------------------------------------------------------------\\n\");",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": null,
          "new_api": "cat_blob",
          "old_text": null,
          "new_text": "cat_blob(oe, sha1)",
          "old_line_content": "{",
          "new_line_content": "\tcat_blob(oe, sha1);",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": null,
          "new_api": "pack_report",
          "old_text": null,
          "new_text": "pack_report()",
          "old_line_content": "\treturn failure ? 1 : 0;",
          "new_line_content": "\t\tpack_report();",
          "content_same": false
        },
        {
          "line": 3350,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"---------------------------------------------------------------------\\n\")",
          "old_line_content": "}",
          "new_line_content": "\t\tfprintf(stderr, \"---------------------------------------------------------------------\\n\");",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "",
          "new_line_content": "\t\tfprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "sha1_object_info",
          "old_text": null,
          "new_text": "sha1_object_info(sha1, NULL)",
          "old_line_content": "\t\toe->type = type;",
          "new_line_content": "\t\tenum object_type type = sha1_object_info(sha1, NULL);",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\toe->idx.offset = 1;",
          "new_line_content": "\t\t\tdie(\"object not found: %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": null,
          "new_api": "insert_object",
          "old_text": null,
          "new_text": "insert_object(sha1)",
          "old_line_content": "\tswitch (oe->type) {",
          "new_line_content": "\t\toe = insert_object(sha1);",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Not a treeish: %s\", command_buf.buf)",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\tdie(\"Not a treeish: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": null,
          "new_api": "gfi_unpack_entry",
          "old_text": null,
          "new_text": "gfi_unpack_entry(oe, &size)",
          "old_line_content": "\tif (!buf)",
          "new_line_content": "\t\tbuf = gfi_unpack_entry(oe, &size);",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(sha1, &unused, &size)",
          "old_line_content": "\t/* Peel one layer. */",
          "new_line_content": "\t\tbuf = read_sha1_file(sha1, &unused, &size);",
          "content_same": false
        },
        {
          "line": 2884,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Invalid SHA1 in commit: %s\", command_buf.buf)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"Invalid SHA1 in commit: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2887,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "{",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": null,
          "new_api": "find_object",
          "old_text": null,
          "new_text": "find_object(sha1)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\treturn find_object(sha1);",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": null,
          "new_api": "strtoumax",
          "old_text": null,
          "new_text": "strtoumax(*p + 1, &endptr, 10)",
          "old_line_content": "\t\t*p = endptr;",
          "new_line_content": "\t\te = find_mark(strtoumax(*p + 1, &endptr, 10));",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Invalid mark: %s\", command_buf.buf)",
          "old_line_content": "\t} else {\t/* <sha1> */",
          "new_line_content": "\t\t\tdie(\"Invalid mark: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(sha1, e->idx.sha1)",
          "old_line_content": "\t\t*p += 40;",
          "new_line_content": "\t\thashcpy(sha1, e->idx.sha1);",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(*p, sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tif (get_sha1_hex(*p, sha1))",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Invalid SHA1: %s\", command_buf.buf)",
          "old_line_content": "\twhile (!e || e->type != OBJ_TREE)",
          "new_line_content": "\t\t\tdie(\"Invalid SHA1: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": null,
          "new_api": "dereference",
          "old_text": null,
          "new_text": "dereference(e, sha1)",
          "old_line_content": "{",
          "new_line_content": "\t\te = dereference(e, sha1);",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": null,
          "new_api": "S_ISGITLINK",
          "old_text": null,
          "new_text": "S_ISGITLINK(mode)",
          "old_line_content": "\t\t/* missing SP path LF */",
          "new_line_content": "\t\tS_ISGITLINK(mode) ? commit_type :",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&line)",
          "old_line_content": "\t\t/* mode SP type SP object_name TAB path LF */",
          "new_line_content": "\t\tstrbuf_reset(&line);",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&line)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrbuf_reset(&line);",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t\tmode, type, sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": null,
          "new_api": "quote_c_style",
          "old_text": null,
          "new_text": "quote_c_style(path, &line, NULL, 0)",
          "old_line_content": "",
          "new_line_content": "\t\tquote_c_style(path, &line, NULL, 0);",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": null,
          "new_api": "strbuf_addch",
          "old_text": null,
          "new_text": "strbuf_addch(&line, '\\n')",
          "old_line_content": "static void parse_ls(struct branch *b)",
          "new_line_content": "\t\tstrbuf_addch(&line, '\\n');",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "cat_blob_write",
          "old_text": null,
          "new_text": "cat_blob_write(line.buf, line.len)",
          "old_line_content": "\tconst char *p;",
          "new_line_content": "\tcat_blob_write(line.buf, line.len);",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"ls \")",
          "old_line_content": "\t} else {",
          "new_line_content": "\tp = command_buf.buf + strlen(\"ls \");",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": null,
          "new_api": "new_tree_entry",
          "old_text": null,
          "new_text": "new_tree_entry()",
          "old_line_content": "\t}",
          "new_line_content": "\t\troot = new_tree_entry();",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(root->versions[1].sha1, e->idx.sha1)",
          "old_line_content": "\tif (*p == '\"') {",
          "new_line_content": "\t\thashcpy(root->versions[1].sha1, e->idx.sha1);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": null,
          "new_api": "load_tree",
          "old_text": null,
          "new_text": "load_tree(root)",
          "old_line_content": "\t\tstatic struct strbuf uq = STRBUF_INIT;",
          "new_line_content": "\t\tload_tree(root);",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&uq)",
          "old_line_content": "\t\tp = uq.buf;",
          "new_line_content": "\t\tstrbuf_reset(&uq);",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": null,
          "new_api": "unquote_c_style",
          "old_text": null,
          "new_text": "unquote_c_style(&uq, p, &endp)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (unquote_c_style(&uq, p, &endp))",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Garbage after path in: %s\", command_buf.buf)",
          "old_line_content": "\t * A directory in preparation would have a sha1 of zero",
          "new_line_content": "\t\t\tdie(\"Garbage after path in: %s\", command_buf.buf);",
          "content_same": false
        },
        {
          "line": 2980,
          "old_api": null,
          "new_api": "store_tree",
          "old_text": null,
          "new_text": "store_tree(&leaf)",
          "old_line_content": "}",
          "new_line_content": "\t\tstore_tree(&leaf);",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": null,
          "new_api": "print_ls",
          "old_text": null,
          "new_text": "print_ls(leaf.versions[1].mode, leaf.versions[1].sha1, p)",
          "old_line_content": "static void checkpoint(void)",
          "new_line_content": "\tprint_ls(leaf.versions[1].mode, leaf.versions[1].sha1, p);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": null,
          "new_api": "release_tree_entry",
          "old_text": null,
          "new_text": "release_tree_entry(root)",
          "old_line_content": "\tcheckpoint_requested = 0;",
          "new_line_content": "\t\trelease_tree_entry(root);",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": null,
          "new_api": "cycle_packfile",
          "old_text": null,
          "new_text": "cycle_packfile()",
          "old_line_content": "}",
          "new_line_content": "\t\tcycle_packfile();",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "dump_branches",
          "old_text": null,
          "new_text": "dump_branches()",
          "old_line_content": "",
          "new_line_content": "\t\tdump_branches();",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": null,
          "new_api": "dump_tags",
          "old_text": null,
          "new_text": "dump_tags()",
          "old_line_content": "static void parse_checkpoint(void)",
          "new_line_content": "\t\tdump_tags();",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "dump_marks",
          "old_text": null,
          "new_text": "dump_marks()",
          "old_line_content": "{",
          "new_line_content": "\t\tdump_marks();",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(command_buf.buf, 1, command_buf.len, stdout)",
          "old_line_content": "",
          "new_line_content": "\tfwrite(command_buf.buf, 1, command_buf.len, stdout);",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc('\\n', stdout)",
          "old_line_content": "static char* make_fast_import_path(const char *path)",
          "new_line_content": "\tfputc('\\n', stdout);",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(stdout)",
          "old_line_content": "{",
          "new_line_content": "\tfflush(stdout);",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": null,
          "new_api": "skip_optional_lf",
          "old_text": null,
          "new_text": "skip_optional_lf()",
          "old_line_content": "\tstruct strbuf abs_path = STRBUF_INIT;",
          "new_line_content": "\tskip_optional_lf();",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": null,
          "new_api": "is_absolute_path",
          "old_text": null,
          "new_text": "is_absolute_path(path)",
          "old_line_content": "",
          "new_line_content": "\tif (!relative_marks_paths || is_absolute_path(path))",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(path)",
          "old_line_content": "static void option_import_marks(const char *marks,",
          "new_line_content": "\t\treturn xstrdup(path);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "get_git_dir",
          "old_text": null,
          "new_text": "get_git_dir()",
          "old_line_content": "\t\t\t\t\tint from_stream, int ignore_missing)",
          "new_line_content": "\tstrbuf_addf(&abs_path, \"%s/info/fast-import/%s\", get_git_dir(), path);",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": null,
          "new_api": "strbuf_detach",
          "old_text": null,
          "new_text": "strbuf_detach(&abs_path, NULL)",
          "old_line_content": "{",
          "new_line_content": "\treturn strbuf_detach(&abs_path, NULL);",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Only one import-marks command allowed per stream\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdie(\"Only one import-marks command allowed per stream\");",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "read_marks",
          "old_text": null,
          "new_text": "read_marks()",
          "old_line_content": "\timport_marks_file_from_stream = from_stream;",
          "new_line_content": "\t\t\tread_marks();",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": null,
          "new_api": "make_fast_import_path",
          "old_text": null,
          "new_text": "make_fast_import_path(marks)",
          "old_line_content": "",
          "new_line_content": "\timport_marks_file = make_fast_import_path(marks);",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": null,
          "new_api": "safe_create_leading_directories_const",
          "old_text": null,
          "new_text": "safe_create_leading_directories_const(import_marks_file)",
          "old_line_content": "static void option_date_format(const char *fmt)",
          "new_line_content": "\tsafe_create_leading_directories_const(import_marks_file);",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(fmt, \"raw\")",
          "old_line_content": "\t\twhenspec = WHENSPEC_NOW;",
          "new_line_content": "\tif (!strcmp(fmt, \"raw\"))",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(fmt, \"now\")",
          "old_line_content": "",
          "new_line_content": "\telse if (!strcmp(fmt, \"now\"))",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unknown --date-format argument %s\", fmt)",
          "old_line_content": "\tchar *endptr;",
          "new_line_content": "\t\tdie(\"unknown --date-format argument %s\", fmt);",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg, &endptr, 0)",
          "old_line_content": "",
          "new_line_content": "\tunsigned long rv = strtoul(arg, &endptr, 0);",
          "content_same": false
        },
        {
          "line": 3056,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(arg, '-')",
          "old_line_content": "static void option_depth(const char *depth)",
          "new_line_content": "\tif (strchr(arg, '-') || endptr == arg || *endptr)",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"%s: argument must be a non-negative integer\", option)",
          "old_line_content": "{",
          "new_line_content": "\t\tdie(\"%s: argument must be a non-negative integer\", option);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "ulong_arg",
          "old_text": null,
          "new_text": "ulong_arg(\"--depth\", depth)",
          "old_line_content": "static void option_active_branches(const char *branches)",
          "new_line_content": "\tmax_depth = ulong_arg(\"--depth\", depth);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3078,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"--cat-blob-fd cannot exceed %d\", INT_MAX)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"--cat-blob-fd cannot exceed %d\", INT_MAX);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(pack_edges)",
          "new_text": null,
          "old_line_content": "\t\tfclose(pack_edges);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(edges, \"a\")",
          "new_text": null,
          "old_line_content": "\tpack_edges = fopen(edges, \"a\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": "die_errno",
          "new_api": null,
          "old_text": "die_errno(\"Cannot open '%s'\", edges)",
          "new_text": null,
          "old_line_content": "\t\tdie_errno(\"Cannot open '%s'\", edges);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": "git_parse_ulong",
          "new_api": null,
          "old_text": "git_parse_ulong(option + 14, &v)",
          "new_text": null,
          "old_line_content": "\t\tif (!git_parse_ulong(option + 14, &v))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": "warning",
          "new_api": null,
          "old_text": "warning(\"minimum max-pack-size is 1 MiB\")",
          "new_text": null,
          "old_line_content": "\t\t\twarning(\"minimum max-pack-size is 1 MiB\");",
          "new_line_content": "\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(option, \"big-file-threshold=\")",
          "new_text": null,
          "old_line_content": "\t} else if (!prefixcmp(option, \"big-file-threshold=\")) {",
          "new_line_content": "\t\t} else if (v < 1024 * 1024) {",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "git_parse_ulong",
          "new_api": null,
          "old_text": "git_parse_ulong(option + 19, &v)",
          "new_text": null,
          "old_line_content": "\t\tif (!git_parse_ulong(option + 19, &v))",
          "new_line_content": "\t\t\tv = 1024 * 1024;",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "option_depth",
          "new_api": null,
          "old_text": "option_depth(option + 6)",
          "new_text": null,
          "old_line_content": "\t\toption_depth(option + 6);",
          "new_line_content": "\t\tunsigned long v;",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": "option_active_branches",
          "new_api": null,
          "old_text": "option_active_branches(option + 16)",
          "new_text": null,
          "old_line_content": "\t\toption_active_branches(option + 16);",
          "new_line_content": "\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(option, \"export-pack-edges=\")",
          "new_text": null,
          "old_line_content": "\t} else if (!prefixcmp(option, \"export-pack-edges=\")) {",
          "new_line_content": "\t\tbig_file_threshold = v;",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(feature, \"date-format=\")",
          "new_text": null,
          "old_line_content": "\tif (!prefixcmp(feature, \"date-format=\")) {",
          "new_line_content": "\treturn 1;",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": "option_date_format",
          "new_api": null,
          "old_text": "option_date_format(feature + 12)",
          "new_text": null,
          "old_line_content": "\t\toption_date_format(feature + 12);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(feature, \"import-marks=\")",
          "new_text": null,
          "old_line_content": "\t} else if (!prefixcmp(feature, \"import-marks=\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "option_import_marks",
          "new_api": null,
          "old_text": "option_import_marks(feature + 13, from_stream, 0)",
          "new_text": null,
          "old_line_content": "\t\toption_import_marks(feature + 13, from_stream, 0);",
          "new_line_content": "static int parse_one_feature(const char *feature, int from_stream)",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(feature, \"import-marks-if-exists=\")",
          "new_text": null,
          "old_line_content": "\t} else if (!prefixcmp(feature, \"import-marks-if-exists=\")) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(feature, \"relative-marks\")",
          "new_text": null,
          "old_line_content": "\t} else if (!strcmp(feature, \"relative-marks\")) {",
          "new_line_content": "\t\t\t\t\tfrom_stream, 1);",
          "content_same": false
        },
        {
          "line": 3144,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(feature, \"force\")",
          "new_text": null,
          "old_line_content": "\t} else if (!strcmp(feature, \"force\")) {",
          "new_line_content": "\t\t; /* Don't die - this feature is supported */",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(feature, \"ls\")",
          "new_text": null,
          "old_line_content": "\t} else if (!strcmp(feature, \"notes\") || !strcmp(feature, \"ls\")) {",
          "new_line_content": "\t\trelative_marks_paths = 1;",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Got feature command '%s' after data command\", feature)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Got feature command '%s' after data command\", feature);",
          "new_line_content": "static void parse_feature(void)",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": "parse_one_feature",
          "new_api": null,
          "old_text": "parse_one_feature(feature, 1)",
          "new_text": null,
          "old_line_content": "\tif (parse_one_feature(feature, 1))",
          "new_line_content": "\tchar *feature = command_buf.buf + 8;",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Got option command '%s' after data command\", option)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Got option command '%s' after data command\", option);",
          "new_line_content": "static void parse_option(void)",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": "parse_one_option",
          "new_api": null,
          "old_text": "parse_one_option(option)",
          "new_text": null,
          "old_line_content": "\tif (parse_one_option(option))",
          "new_line_content": "\tchar *option = command_buf.buf + 11;",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tmax_depth = git_config_int(k, v);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tint level = git_config_int(k, v);",
          "new_line_content": "\t\tif (max_depth > MAX_DEPTH)",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tpack_idx_default_version = git_config_int(k, v);",
          "new_line_content": "\t\tpack_compression_level = level;",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"bad pack.indexversion=%\"PRIu32,\n\t\t\t    pack_idx_default_version)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"bad pack.indexversion=%\"PRIu32,",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(k, \"pack.packsizelimit\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(k, \"pack.packsizelimit\")) {",
          "new_line_content": "\t\tif (pack_idx_default_version > 2)",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": "git_default_config",
          "new_api": null,
          "old_text": "git_default_config(k, v, cb)",
          "new_text": null,
          "old_line_content": "\treturn git_default_config(k, v, cb);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3223,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a, \"--\")",
          "new_text": null,
          "old_line_content": "\t\tif (*a != '-' || !strcmp(a, \"--\"))",
          "new_line_content": "\tunsigned int i;",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": "parse_one_option",
          "new_api": null,
          "old_text": "parse_one_option(a + 2)",
          "new_text": null,
          "old_line_content": "\t\tif (parse_one_option(a + 2))",
          "new_line_content": "\t\tconst char *a = global_argv[i];",
          "content_same": false
        },
        {
          "line": 3229,
          "old_api": "parse_one_feature",
          "new_api": null,
          "old_text": "parse_one_feature(a + 2, 0)",
          "new_text": null,
          "old_line_content": "\t\tif (parse_one_feature(a + 2, 0))",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(a + 2, \"cat-blob-fd=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(a + 2, \"cat-blob-fd=\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"cat-blob-fd=\")",
          "new_text": null,
          "old_line_content": "\t\t\toption_cat_blob_fd(a + 2 + strlen(\"cat-blob-fd=\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fast_import_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(fast_import_usage);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "read_marks",
          "new_api": null,
          "old_text": "read_marks()",
          "new_text": null,
          "old_line_content": "\t\tread_marks();",
          "new_line_content": "\tif (i != global_argc)",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "git_extract_argv0_path",
          "new_api": null,
          "old_text": "git_extract_argv0_path(argv[0])",
          "new_text": null,
          "old_line_content": "\tgit_extract_argv0_path(argv[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-h\")",
          "new_text": null,
          "old_line_content": "\tif (argc == 2 && !strcmp(argv[1], \"-h\"))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(fast_import_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(fast_import_usage);",
          "new_line_content": "\tunsigned int i;",
          "content_same": false
        },
        {
          "line": 3257,
          "old_api": "git_config",
          "new_api": null,
          "old_text": "git_config(git_pack_config, NULL)",
          "new_text": null,
          "old_line_content": "\tgit_config(git_pack_config, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3263,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(atom_table_sz, sizeof(struct atom_str*))",
          "new_text": null,
          "old_line_content": "\tatom_table = xcalloc(atom_table_sz, sizeof(struct atom_str*));",
          "new_line_content": "\tif (!pack_compression_seen && core_compression_seen)",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(branch_table_sz, sizeof(struct branch*))",
          "new_text": null,
          "old_line_content": "\tbranch_table = xcalloc(branch_table_sz, sizeof(struct branch*));",
          "new_line_content": "\t\tpack_compression_level = core_compression_level;",
          "content_same": false
        },
        {
          "line": 3265,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(avail_tree_table_sz, sizeof(struct avail_tree_content*))",
          "new_text": null,
          "old_line_content": "\tavail_tree_table = xcalloc(avail_tree_table_sz, sizeof(struct avail_tree_content*));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": "start_packfile",
          "new_api": null,
          "old_text": "start_packfile()",
          "new_text": null,
          "old_line_content": "\tstart_packfile();",
          "new_line_content": "\tfor (i = 0; i < (cmd_save - 1); i++)",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": "set_die_routine",
          "new_api": null,
          "old_text": "set_die_routine(die_nicely)",
          "new_text": null,
          "old_line_content": "\tset_die_routine(die_nicely);",
          "new_line_content": "\t\trc_free[i].next = &rc_free[i + 1];",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "set_checkpoint_signal",
          "new_api": null,
          "old_text": "set_checkpoint_signal()",
          "new_text": null,
          "old_line_content": "\tset_checkpoint_signal();",
          "new_line_content": "\trc_free[cmd_save - 1].next = NULL;",
          "content_same": false
        },
        {
          "line": 3280,
          "old_api": "read_next_command",
          "new_api": null,
          "old_text": "read_next_command()",
          "new_text": null,
          "old_line_content": "\twhile (read_next_command() != EOF) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "checkpoint",
          "new_api": null,
          "old_text": "checkpoint()",
          "new_text": null,
          "old_line_content": "\t\t\tcheckpoint();",
          "new_line_content": "\t\t\t/* ignore non-git options*/;",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": "end_packfile",
          "new_api": null,
          "old_text": "end_packfile()",
          "new_text": null,
          "old_line_content": "\tend_packfile();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3314,
          "old_api": "dump_branches",
          "new_api": null,
          "old_text": "dump_branches()",
          "new_text": null,
          "old_line_content": "\tdump_branches();",
          "new_line_content": "\tif (!seen_data_command)",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\tif (oe && oe->pack_id == pack_id) {",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": "unkeep_all_packs",
          "new_api": null,
          "old_text": "unkeep_all_packs()",
          "new_text": null,
          "old_line_content": "\tunkeep_all_packs();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "ARRAY_SIZE",
          "new_api": null,
          "old_text": "ARRAY_SIZE(object_count_by_type)",
          "new_text": null,
          "old_line_content": "\t\tfor (i = 0; i < ARRAY_SIZE(object_count_by_type); i++)",
          "new_line_content": "\tif (pack_edges)",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"cat-blob \")",
          "new_text": null,
          "old_line_content": "\tp = command_buf.buf + strlen(\"cat-blob \");",
          "new_line_content": "\tconst char *p;",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": "ARRAY_SIZE",
          "new_api": null,
          "old_text": "ARRAY_SIZE(duplicate_count_by_type)",
          "new_text": null,
          "old_line_content": "\t\tfor (i = 0; i < ARRAY_SIZE(duplicate_count_by_type); i++)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": "strtoumax",
          "new_api": null,
          "old_text": "strtoumax(p + 1, &x, 10)",
          "new_text": null,
          "old_line_content": "\t\toe = find_mark(strtoumax(p + 1, &x, 10));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"---------------------------------------------------------------------\\n\")",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"---------------------------------------------------------------------\\n\");",
          "new_line_content": "\t\t\ttotal_count += object_count_by_type[i];",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Unknown mark: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Unknown mark: %s\", command_buf.buf);",
          "new_line_content": "\t\tchar *x;",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Total objects:   %10\" PRIuMAX \" (%10\" PRIuMAX \" duplicates                  )\\n\", total_count, duplicate_count)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Total objects:   %10\" PRIuMAX \" (%10\" PRIuMAX \" duplicates                  )\\n\", total_count, duplicate_count);",
          "new_line_content": "\t\t\tduplicate_count += duplicate_count_by_type[i];",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Garbage after mark: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Garbage after mark: %s\", command_buf.buf);",
          "new_line_content": "\t\tif (x == p + 1)",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"      blobs  :   %10\" PRIuMAX \" (%10\" PRIuMAX \" duplicates %10\" PRIuMAX \" deltas of %10\" PRIuMAX\" attempts)\\n\", object_count_by_type[OBJ_BLOB], duplicate_count_by_type[OBJ_BLOB], delta_count_by_type[OBJ_BLOB], delta_count_attempts_by_type[OBJ_BLOB])",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"      blobs  :   %10\" PRIuMAX \" (%10\" PRIuMAX \" duplicates %10\" PRIuMAX \" deltas of %10\" PRIuMAX\" attempts)\\n\", object_count_by_type[OBJ_BLOB], duplicate_count_by_type[OBJ_BLOB], delta_count_by_type[OBJ_BLOB], delta_count_attempts_by_type[OBJ_BLOB]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Invalid SHA1: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Invalid SHA1: %s\", command_buf.buf);",
          "new_line_content": "\t\tif (*x)",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "find_object",
          "new_api": null,
          "old_text": "find_object(sha1)",
          "new_text": null,
          "old_line_content": "\t\toe = find_object(sha1);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": "cat_blob",
          "new_api": null,
          "old_text": "cat_blob(oe, sha1)",
          "new_text": null,
          "old_line_content": "\tcat_blob(oe, sha1);",
          "new_line_content": "\t\tif (p[40])",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "sha1_object_info",
          "new_api": null,
          "old_text": "sha1_object_info(sha1, NULL)",
          "new_text": null,
          "old_line_content": "\t\tenum object_type type = sha1_object_info(sha1, NULL);",
          "new_line_content": "\t\t\t\t\tunsigned char sha1[20])",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"object not found: %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tunsigned long size;",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "insert_object",
          "new_api": null,
          "old_text": "insert_object(sha1)",
          "new_text": null,
          "old_line_content": "\t\toe = insert_object(sha1);",
          "new_line_content": "\tif (!oe) {",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Not a treeish: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Not a treeish: %s\", command_buf.buf);",
          "new_line_content": "\t\treturn oe;",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "gfi_unpack_entry",
          "new_api": null,
          "old_text": "gfi_unpack_entry(oe, &size)",
          "new_text": null,
          "old_line_content": "\t\tbuf = gfi_unpack_entry(oe, &size);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(sha1, &unused, &size)",
          "new_text": null,
          "old_line_content": "\t\tbuf = read_sha1_file(sha1, &unused, &size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Can't load object %s\", sha1_to_hex(sha1));",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"object \")",
          "new_text": null,
          "old_line_content": "\t\t    get_sha1_hex(buf + strlen(\"object \"), sha1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Invalid SHA1 in tag: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Invalid SHA1 in tag: %s\", command_buf.buf);",
          "new_line_content": "\t/* Peel one layer. */",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": "strtoumax",
          "new_api": null,
          "old_text": "strtoumax(*p + 1, &endptr, 10)",
          "new_text": null,
          "old_line_content": "\t\te = find_mark(strtoumax(*p + 1, &endptr, 10));",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Invalid mark: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Invalid mark: %s\", command_buf.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Unknown mark: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Unknown mark: %s\", command_buf.buf);",
          "new_line_content": "\t\tchar *endptr;",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(sha1, e->idx.sha1)",
          "new_text": null,
          "old_line_content": "\t\thashcpy(sha1, e->idx.sha1);",
          "new_line_content": "\t\tif (endptr == *p + 1)",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(*p, sha1)",
          "new_text": null,
          "old_line_content": "\t\tif (get_sha1_hex(*p, sha1))",
          "new_line_content": "\t\tif (!e)",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": "find_object",
          "new_api": null,
          "old_text": "find_object(sha1)",
          "new_text": null,
          "old_line_content": "\t\te = find_object(sha1);",
          "new_line_content": "\t\t*p = endptr;",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "S_ISGITLINK",
          "new_api": null,
          "old_text": "S_ISGITLINK(mode)",
          "new_text": null,
          "old_line_content": "\t\tS_ISGITLINK(mode) ? commit_type :",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": "S_ISDIR",
          "new_api": null,
          "old_text": "S_ISDIR(mode)",
          "new_text": null,
          "old_line_content": "\t\tS_ISDIR(mode) ? tree_type :",
          "new_line_content": "\tstatic struct strbuf line = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(&line, \"missing \")",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(&line, \"missing \");",
          "new_line_content": "\t\tblob_type;",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": "quote_c_style",
          "new_api": null,
          "old_text": "quote_c_style(path, &line, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\tquote_c_style(path, &line, NULL, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(&line, '\\n')",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addch(&line, '\\n');",
          "new_line_content": "\tif (!mode) {",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": "quote_c_style",
          "new_api": null,
          "old_text": "quote_c_style(path, &line, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\tquote_c_style(path, &line, NULL, 0);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 2934,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(&line, '\\n')",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addch(&line, '\\n');",
          "new_line_content": "\t\t/* mode SP type SP object_name TAB path LF */",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"ls \")",
          "new_text": null,
          "old_line_content": "\tp = command_buf.buf + strlen(\"ls \");",
          "new_line_content": "\tconst char *p;",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Not in a commit: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Not in a commit: %s\", command_buf.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "parse_treeish_dataref",
          "new_api": null,
          "old_text": "parse_treeish_dataref(&p)",
          "new_text": null,
          "old_line_content": "\t\tstruct object_entry *e = parse_treeish_dataref(&p);",
          "new_line_content": "\tif (*p == '\"') {",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "new_tree_entry",
          "new_api": null,
          "old_text": "new_tree_entry()",
          "new_text": null,
          "old_line_content": "\t\troot = new_tree_entry();",
          "new_line_content": "\t\tif (!b)",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "load_tree",
          "new_api": null,
          "old_text": "load_tree(root)",
          "new_text": null,
          "old_line_content": "\t\tload_tree(root);",
          "new_line_content": "\t\troot = &b->branch_tree;",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": "unquote_c_style",
          "new_api": null,
          "old_text": "unquote_c_style(&uq, p, &endp)",
          "new_text": null,
          "old_line_content": "\t\tif (unquote_c_style(&uq, p, &endp))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Invalid path: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Invalid path: %s\", command_buf.buf);",
          "new_line_content": "\tif (*p == '\"') {",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Garbage after path in: %s\", command_buf.buf)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Garbage after path in: %s\", command_buf.buf);",
          "new_line_content": "\t\tconst char *endp;",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "store_tree",
          "new_api": null,
          "old_text": "store_tree(&leaf)",
          "new_text": null,
          "old_line_content": "\t\tstore_tree(&leaf);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": "print_ls",
          "new_api": null,
          "old_text": "print_ls(leaf.versions[1].mode, leaf.versions[1].sha1, p)",
          "new_text": null,
          "old_line_content": "\tprint_ls(leaf.versions[1].mode, leaf.versions[1].sha1, p);",
          "new_line_content": "\t * until it is saved.  Save, for simplicity.",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": "cycle_packfile",
          "new_api": null,
          "old_text": "cycle_packfile()",
          "new_text": null,
          "old_line_content": "\t\tcycle_packfile();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "dump_branches",
          "new_api": null,
          "old_text": "dump_branches()",
          "new_text": null,
          "old_line_content": "\t\tdump_branches();",
          "new_line_content": "static void checkpoint(void)",
          "content_same": false
        },
        {
          "line": 2988,
          "old_api": "dump_tags",
          "new_api": null,
          "old_text": "dump_tags()",
          "new_text": null,
          "old_line_content": "\t\tdump_tags();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "dump_marks",
          "new_api": null,
          "old_text": "dump_marks()",
          "new_text": null,
          "old_line_content": "\t\tdump_marks();",
          "new_line_content": "\tcheckpoint_requested = 0;",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": "skip_optional_lf",
          "new_api": null,
          "old_text": "skip_optional_lf()",
          "new_text": null,
          "old_line_content": "\tskip_optional_lf();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', stdout)",
          "new_text": null,
          "old_line_content": "\tfputc('\\n', stdout);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "\tfflush(stdout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "skip_optional_lf",
          "new_api": null,
          "old_text": "skip_optional_lf()",
          "new_text": null,
          "old_line_content": "\tskip_optional_lf();",
          "new_line_content": "static void parse_progress(void)",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "is_absolute_path",
          "new_api": null,
          "old_text": "is_absolute_path(path)",
          "new_text": null,
          "old_line_content": "\tif (!relative_marks_paths || is_absolute_path(path))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(path)",
          "new_text": null,
          "old_line_content": "\t\treturn xstrdup(path);",
          "new_line_content": "static char* make_fast_import_path(const char *path)",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": "get_git_dir",
          "new_api": null,
          "old_text": "get_git_dir()",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&abs_path, \"%s/info/fast-import/%s\", get_git_dir(), path);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": "strbuf_detach",
          "new_api": null,
          "old_text": "strbuf_detach(&abs_path, NULL)",
          "new_text": null,
          "old_line_content": "\treturn strbuf_detach(&abs_path, NULL);",
          "new_line_content": "\tstruct strbuf abs_path = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Only one import-marks command allowed per stream\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Only one import-marks command allowed per stream\");",
          "new_line_content": "static void option_import_marks(const char *marks,",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "read_marks",
          "new_api": null,
          "old_text": "read_marks()",
          "new_text": null,
          "old_line_content": "\t\t\tread_marks();",
          "new_line_content": "\t\tif (from_stream)",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "make_fast_import_path",
          "new_api": null,
          "old_text": "make_fast_import_path(marks)",
          "new_text": null,
          "old_line_content": "\timport_marks_file = make_fast_import_path(marks);",
          "new_line_content": "\t\t/* read previous mark file */",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": "safe_create_leading_directories_const",
          "new_api": null,
          "old_text": "safe_create_leading_directories_const(import_marks_file)",
          "new_text": null,
          "old_line_content": "\tsafe_create_leading_directories_const(import_marks_file);",
          "new_line_content": "\t\tif(!import_marks_file_from_stream)",
          "content_same": false
        },
        {
          "line": 3037,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(fmt, \"raw\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(fmt, \"raw\"))",
          "new_line_content": "\timport_marks_file_ignore_missing = ignore_missing;",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(fmt, \"rfc2822\")",
          "new_text": null,
          "old_line_content": "\telse if (!strcmp(fmt, \"rfc2822\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(fmt, \"now\")",
          "new_text": null,
          "old_line_content": "\telse if (!strcmp(fmt, \"now\"))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg, &endptr, 0)",
          "new_text": null,
          "old_line_content": "\tunsigned long rv = strtoul(arg, &endptr, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(arg, '-')",
          "new_text": null,
          "old_line_content": "\tif (strchr(arg, '-') || endptr == arg || *endptr)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"%s: argument must be a non-negative integer\", option)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"%s: argument must be a non-negative integer\", option);",
          "new_line_content": "static unsigned long ulong_arg(const char *option, const char *arg)",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "ulong_arg",
          "new_api": null,
          "old_text": "ulong_arg(\"--depth\", depth)",
          "new_text": null,
          "old_line_content": "\tmax_depth = ulong_arg(\"--depth\", depth);",
          "new_line_content": "\treturn rv;",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"--depth cannot exceed %u\", MAX_DEPTH)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"--depth cannot exceed %u\", MAX_DEPTH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "safe_create_leading_directories_const",
          "new_api": null,
          "old_text": "safe_create_leading_directories_const(export_marks_file)",
          "new_text": null,
          "old_line_content": "\tsafe_create_leading_directories_const(export_marks_file);",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 73,
      "total_additions": 122,
      "total_deletions": 121,
      "total_api_changes": 316
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 316,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          2804,
          2806,
          2807
        ]
      }
    },
    "api_calls_before": 961,
    "api_calls_after": 962,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 1,
      "total_diff_lines": 19
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/1991b223c05d45d2a915842990b2a7c4819dcbcf",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/1991b223c05d45d2a915842990b2a7c4819dcbcf/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/1991b223c05d45d2a915842990b2a7c4819dcbcf/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/1991b223c05d45d2a915842990b2a7c4819dcbcf/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 200,
          "old_api": "ce_size",
          "new_api": "compare_link",
          "old_text": "ce_size(ce)",
          "new_text": "compare_link(ce, st.st_size)",
          "old_line_content": "\tsize = ce_size(ce);",
          "new_line_content": "\t\tif (compare_link(ce, st.st_size))",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "xmalloc",
          "new_api": "ERR_PTR",
          "old_text": "xmalloc(size)",
          "new_text": "ERR_PTR(-EINVAL)",
          "old_line_content": "\tupdated = xmalloc(size);",
          "new_line_content": "\t\t\treturn ERR_PTR(-EINVAL);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "strlen",
          "new_api": "sscanf",
          "old_text": "strlen(arg3)",
          "new_text": "sscanf(arg1, \"%o\", &mode)",
          "old_line_content": "\tlen = strlen(arg3);",
          "new_line_content": "\tif (sscanf(arg1, \"%o\", &mode) != 1)",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "xmalloc",
          "new_api": "get_sha1_hex",
          "old_text": "xmalloc(size)",
          "new_text": "get_sha1_hex(arg2, sha1)",
          "old_line_content": "\tce = xmalloc(size);",
          "new_line_content": "\tif (get_sha1_hex(arg2, sha1))",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "htons",
          "new_api": "strlen",
          "old_text": "htons(len)",
          "new_text": "strlen(arg3)",
          "old_line_content": "\tce->ce_flags = htons(len);",
          "new_line_content": "\tlen = strlen(arg3);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "create_ce_mode",
          "new_api": "cache_entry_size",
          "old_text": "create_ce_mode(mode)",
          "new_text": "cache_entry_size(len)",
          "old_line_content": "\tce->ce_mode = create_ce_mode(mode);",
          "new_line_content": "\tsize = cache_entry_size(len);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "add_cacheinfo",
          "new_api": "strcmp",
          "old_text": "add_cacheinfo(argv[i+1], argv[i+2], argv[i+3])",
          "new_text": "strcmp(path, \"--refresh\")",
          "old_line_content": "\t\t\t\tif (add_cacheinfo(argv[i+1], argv[i+2], argv[i+3]))",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--refresh\")) {",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "die",
          "new_api": "refresh_cache",
          "old_text": "die(\"git-update-index: --cacheinfo cannot add %s\", argv[i+3])",
          "new_text": "refresh_cache()",
          "old_line_content": "\t\t\t\t\tdie(\"git-update-index: --cacheinfo cannot add %s\", argv[i+3]);",
          "new_line_content": "\t\t\t\thas_errors |= refresh_cache();",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "verify_path",
          "new_api": "strcmp",
          "old_text": "verify_path(path)",
          "new_text": "strcmp(path, \"--ignore-missing\")",
          "old_line_content": "\t\tif (!verify_path(path)) {",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--ignore-missing\")) {",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "die",
          "new_api": "strlen",
          "old_text": "die(\"git-update-index: unable to remove %s\", path)",
          "new_text": "strlen(prefix)",
          "old_line_content": "\t\t\t\tdie(\"git-update-index: unable to remove %s\", path);",
          "new_line_content": "\t\tpath = prefix_path(prefix, prefix ? strlen(prefix) : 0, path);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "write_cache",
          "new_api": "remove_file_from_cache",
          "old_text": "write_cache(newfd, active_cache, active_nr)",
          "new_text": "remove_file_from_cache(path)",
          "old_line_content": "\tif (write_cache(newfd, active_cache, active_nr) ||",
          "new_line_content": "\t\t\tif (remove_file_from_cache(path))",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "commit_index_file",
          "new_api": "die",
          "old_text": "commit_index_file(&cache_file)",
          "new_text": "die(\"git-update-index: unable to remove %s\", path)",
          "old_line_content": "\t    commit_index_file(&cache_file))",
          "new_line_content": "\t\t\t\tdie(\"git-update-index: unable to remove %s\", path);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 387,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--cacheinfo\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--cacheinfo\")) {",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"git-update-index: --cacheinfo <mode> <sha1> <path>\")",
          "old_line_content": "\t\t\t\tinfo_only = 1;",
          "new_line_content": "\t\t\t\t\tdie(\"git-update-index: --cacheinfo <mode> <sha1> <path>\");",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "add_cacheinfo",
          "old_text": null,
          "new_text": "add_cacheinfo(argv[i+1], argv[i+2], argv[i+3])",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tif (add_cacheinfo(argv[i+1], argv[i+2], argv[i+3]))",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"git-update-index: --cacheinfo cannot add %s\", argv[i+3])",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tdie(\"git-update-index: --cacheinfo cannot add %s\", argv[i+3]);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--info-only\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--info-only\")) {",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--force-remove\")",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--force-remove\")) {",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unknown option %s\", path)",
          "old_line_content": "\t\tif (force_remove) {",
          "new_line_content": "\t\t\tdie(\"unknown option %s\", path);",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "verify_path",
          "old_text": null,
          "new_text": "verify_path(path)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!verify_path(path)) {",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Ignoring path %s\\n\", argv[i])",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfprintf(stderr, \"Ignoring path %s\\n\", argv[i]);",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "add_file_to_cache",
          "old_text": null,
          "new_text": "add_file_to_cache(path)",
          "old_line_content": "\treturn has_errors ? 1 : 0;",
          "new_line_content": "\t\tif (add_file_to_cache(path))",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Unable to process file %s\", path)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"Unable to process file %s\", path);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "write_cache",
          "old_text": null,
          "new_text": "write_cache(newfd, active_cache, active_nr)",
          "old_line_content": "",
          "new_line_content": "\tif (write_cache(newfd, active_cache, active_nr) ||",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "commit_index_file",
          "old_text": null,
          "new_text": "commit_index_file(&cache_file)",
          "old_line_content": "",
          "new_line_content": "\t    commit_index_file(&cache_file))",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Unable to write new cachefile\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"Unable to write new cachefile\");",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "verify_dotfile",
          "old_text": null,
          "new_text": "verify_dotfile(path)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t\tif (verify_dotfile(path))",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(0)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\tif ((changed & DATA_CHANGED) && ce->ce_size != htonl(0))",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "ERR_PTR",
          "old_text": null,
          "new_text": "ERR_PTR(-EINVAL)",
          "old_line_content": "\tcase S_IFLNK:",
          "new_line_content": "\t\treturn ERR_PTR(-EINVAL);",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "compare_data",
          "old_text": null,
          "new_text": "compare_data(ce, &st)",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\tif (compare_data(ce, &st))",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "verify_path",
          "old_text": null,
          "new_text": "verify_path(arg3)",
          "old_line_content": "",
          "new_line_content": "\tif (!verify_path(arg3))",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\toption = allow_add ? ADD_CACHE_OK_TO_ADD : 0;",
          "new_line_content": "\tce = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "ERR_PTR",
          "old_text": null,
          "new_text": "ERR_PTR(-EINVAL)",
          "old_line_content": "\treturn updated;",
          "new_line_content": "\t\treturn ERR_PTR(-EINVAL);",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(ce, 0, size)",
          "old_line_content": "\toption |= allow_replace ? ADD_CACHE_OK_TO_REPLACE : 0;",
          "new_line_content": "\tmemset(ce, 0, size);",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ce->sha1, sha1, 20)",
          "old_line_content": "}",
          "new_line_content": "\tmemcpy(ce->sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": null,
          "new_api": "ce_size",
          "old_text": null,
          "new_text": "ce_size(ce)",
          "old_line_content": "static int refresh_cache(void)",
          "new_line_content": "\tsize = ce_size(ce);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "{",
          "new_line_content": "\tupdated = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(updated, ce, size)",
          "old_line_content": "\tint i;",
          "new_line_content": "\tmemcpy(updated, ce, size);",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": null,
          "new_api": "fill_stat_cache_info",
          "old_text": null,
          "new_text": "fill_stat_cache_info(updated, &st)",
          "old_line_content": "\tint has_errors = 0;",
          "new_line_content": "\tfill_stat_cache_info(updated, &st);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ce->name, arg3, len)",
          "old_line_content": "",
          "new_line_content": "\tmemcpy(ce->name, arg3, len);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "htons",
          "old_text": null,
          "new_text": "htons(len)",
          "old_line_content": "static struct cache_file cache_file;",
          "new_line_content": "\tce->ce_flags = htons(len);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "create_ce_mode",
          "old_text": null,
          "new_text": "create_ce_mode(mode)",
          "old_line_content": "",
          "new_line_content": "\tce->ce_mode = create_ce_mode(mode);",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "add_cache_entry",
          "old_text": null,
          "new_text": "add_cache_entry(ce, option)",
          "old_line_content": "\tint i, newfd, entries, has_errors = 0;",
          "new_line_content": "\treturn add_cache_entry(ce, option);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "setup_git_directory",
          "old_text": null,
          "new_text": "setup_git_directory()",
          "old_line_content": "\tif (entries < 0)",
          "new_line_content": "\tconst char *prefix = setup_git_directory();",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "ce_stage",
          "old_text": null,
          "new_text": "ce_stage(ce)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (ce_stage(ce)) {",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s: needs merge\\n\", ce->name)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tprintf(\"%s: needs merge\\n\", ce->name);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "get_index_file",
          "old_text": null,
          "new_text": "get_index_file()",
          "old_line_content": "",
          "new_line_content": "\tnewfd = hold_index_file_for_update(&cache_file, get_index_file());",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unable to create new cachefile\")",
          "old_line_content": "\t\tchar *path = argv[i];",
          "new_line_content": "\t\tdie(\"unable to create new cachefile\");",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(active_cache[i]->name, ce->name)",
          "old_line_content": "\t\tif (IS_ERR(new)) {",
          "new_line_content": "\t\t\t       ! strcmp(active_cache[i]->name, ce->name))",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "read_cache",
          "old_text": null,
          "new_text": "read_cache()",
          "old_line_content": "\t\tif (allow_options && *path == '-') {",
          "new_line_content": "\tentries = read_cache();",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"cache corrupted\")",
          "old_line_content": "\t\t\t\tallow_options = 0;",
          "new_line_content": "\t\tdie(\"cache corrupted\");",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--\")) {",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"-q\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"-q\")) {",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--add\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--add\")) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--replace\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--replace\")) {",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(path, \"--remove\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (!strcmp(path, \"--remove\")) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 388,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--info-only\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--info-only\")) {",
          "new_line_content": "\t\t\t\tif (i+3 >= argc)",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--force-remove\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--force-remove\")) {",
          "new_line_content": "\t\t\t\ti += 3;",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--ignore-missing\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--ignore-missing\")) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unknown option %s\", path)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"unknown option %s\", path);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(prefix)",
          "new_text": null,
          "old_line_content": "\t\tpath = prefix_path(prefix, prefix ? strlen(prefix) : 0, path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Ignoring path %s\\n\", argv[i])",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"Ignoring path %s\\n\", argv[i]);",
          "new_line_content": "\t\t\t\tnot_new = 1;",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "remove_file_from_cache",
          "new_api": null,
          "old_text": "remove_file_from_cache(path)",
          "new_text": null,
          "old_line_content": "\t\t\tif (remove_file_from_cache(path))",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "add_file_to_cache",
          "new_api": null,
          "old_text": "add_file_to_cache(path)",
          "new_text": null,
          "old_line_content": "\t\tif (add_file_to_cache(path))",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Unable to process file %s\", path)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Unable to process file %s\", path);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Unable to write new cachefile\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Unable to write new cachefile\");",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "verify_dotfile",
          "new_api": null,
          "old_text": "verify_dotfile(path)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (verify_dotfile(path))",
          "new_line_content": "\t\t\tc = *path++;",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "sscanf",
          "new_api": null,
          "old_text": "sscanf(arg1, \"%o\", &mode)",
          "new_text": null,
          "old_line_content": "\tif (sscanf(arg1, \"%o\", &mode) != 1)",
          "new_line_content": "static int add_cacheinfo(char *arg1, char *arg2, char *arg3)",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(arg2, sha1)",
          "new_text": null,
          "old_line_content": "\tif (get_sha1_hex(arg2, sha1))",
          "new_line_content": "\tint size, len, option;",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": "compare_data",
          "new_api": null,
          "old_text": "compare_data(ce, &st)",
          "new_text": null,
          "old_line_content": "\t\tif (compare_data(ce, &st))",
          "new_line_content": "\t * should match the SHA1 recorded in the index entry.",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "ERR_PTR",
          "new_api": null,
          "old_text": "ERR_PTR(-EINVAL)",
          "new_text": null,
          "old_line_content": "\t\t\treturn ERR_PTR(-EINVAL);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "verify_path",
          "new_api": null,
          "old_text": "verify_path(arg3)",
          "new_text": null,
          "old_line_content": "\tif (!verify_path(arg3))",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "compare_link",
          "new_api": null,
          "old_text": "compare_link(ce, st.st_size)",
          "new_text": null,
          "old_line_content": "\t\tif (compare_link(ce, st.st_size))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "ERR_PTR",
          "new_api": null,
          "old_text": "ERR_PTR(-EINVAL)",
          "new_text": null,
          "old_line_content": "\t\t\treturn ERR_PTR(-EINVAL);",
          "new_line_content": "\tswitch (st.st_mode & S_IFMT) {",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "cache_entry_size",
          "new_api": null,
          "old_text": "cache_entry_size(len)",
          "new_text": null,
          "old_line_content": "\tsize = cache_entry_size(len);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(ce, 0, size)",
          "new_text": null,
          "old_line_content": "\tmemset(ce, 0, size);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ce->sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\tmemcpy(ce->sha1, sha1, 20);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ce->name, arg3, len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(ce->name, arg3, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(updated, ce, size)",
          "new_text": null,
          "old_line_content": "\tmemcpy(updated, ce, size);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "fill_stat_cache_info",
          "new_api": null,
          "old_text": "fill_stat_cache_info(updated, &st)",
          "new_text": null,
          "old_line_content": "\tfill_stat_cache_info(updated, &st);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "add_cache_entry",
          "new_api": null,
          "old_text": "add_cache_entry(ce, option)",
          "new_text": null,
          "old_line_content": "\treturn add_cache_entry(ce, option);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "setup_git_directory",
          "new_api": null,
          "old_text": "setup_git_directory()",
          "new_text": null,
          "old_line_content": "\tconst char *prefix = setup_git_directory();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "ce_stage",
          "new_api": null,
          "old_text": "ce_stage(ce)",
          "new_text": null,
          "old_line_content": "\t\tif (ce_stage(ce)) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s: needs merge\\n\", ce->name)",
          "new_text": null,
          "old_line_content": "\t\t\tprintf(\"%s: needs merge\\n\", ce->name);",
          "new_line_content": "\tint i;",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "get_index_file",
          "new_api": null,
          "old_text": "get_index_file()",
          "new_text": null,
          "old_line_content": "\tnewfd = hold_index_file_for_update(&cache_file, get_index_file());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unable to create new cachefile\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to create new cachefile\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(active_cache[i]->name, ce->name)",
          "new_text": null,
          "old_line_content": "\t\t\t       ! strcmp(active_cache[i]->name, ce->name))",
          "new_line_content": "\tfor (i = 0; i < active_nr; i++) {",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "read_cache",
          "new_api": null,
          "old_text": "read_cache()",
          "new_text": null,
          "old_line_content": "\tentries = read_cache();",
          "new_line_content": "\tint allow_options = 1;",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"cache corrupted\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"cache corrupted\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--\")) {",
          "new_line_content": "\tif (entries < 0)",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"-q\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"-q\")) {",
          "new_line_content": "\t\tchar *path = argv[i];",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--add\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--add\")) {",
          "new_line_content": "\t\t\t\tallow_options = 0;",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--replace\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--replace\")) {",
          "new_line_content": "\t\t\t\tquiet = 1;",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--remove\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--remove\")) {",
          "new_line_content": "\t\t\t\tallow_add = 1;",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--refresh\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--refresh\")) {",
          "new_line_content": "\t\t\t\tallow_replace = 1;",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "refresh_cache",
          "new_api": null,
          "old_text": "refresh_cache()",
          "new_text": null,
          "old_line_content": "\t\t\t\thas_errors |= refresh_cache();",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(path, \"--cacheinfo\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (!strcmp(path, \"--cacheinfo\")) {",
          "new_line_content": "\t\t\t\tallow_remove = 1;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"git-update-index: --cacheinfo <mode> <sha1> <path>\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tdie(\"git-update-index: --cacheinfo <mode> <sha1> <path>\");",
          "new_line_content": "\t\t\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 12,
      "total_additions": 44,
      "total_deletions": 42,
      "total_api_changes": 98
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 98,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          187,
          188
        ]
      }
    },
    "api_calls_before": 106,
    "api_calls_after": 108,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 0,
      "total_diff_lines": 19
    }
  }
}
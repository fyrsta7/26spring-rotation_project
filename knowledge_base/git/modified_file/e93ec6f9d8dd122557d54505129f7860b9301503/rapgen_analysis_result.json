{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/e93ec6f9d8dd122557d54505129f7860b9301503",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/e93ec6f9d8dd122557d54505129f7860b9301503/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/e93ec6f9d8dd122557d54505129f7860b9301503/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/e93ec6f9d8dd122557d54505129f7860b9301503/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 333,
          "old_api": "open",
          "new_api": "close",
          "old_text": "open(path, O_RDONLY)",
          "new_text": "close(fd)",
          "old_line_content": "\tfd = open(path, O_RDONLY);",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "close",
          "new_api": "mmap",
          "old_text": "close(fd)",
          "new_text": "mmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\tidx_map = mmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "S_ISREG",
          "new_api": "die",
          "old_text": "S_ISREG(st.st_mode)",
          "new_text": "die(\"packfile %s cannot be opened\", p->pack_name)",
          "old_line_content": "\t\tif (!S_ISREG(st.st_mode))",
          "new_line_content": "\t\t\tdie(\"packfile %s cannot be opened\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "die",
          "new_api": "fstat",
          "old_text": "die(\"packfile %s not a regular file\", p->pack_name)",
          "new_text": "fstat(fd, &st)",
          "old_line_content": "\t\t\tdie(\"packfile %s not a regular file\", p->pack_name);",
          "new_line_content": "\t\tif (fstat(fd, &st)) {",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "unuse_one_packed_git",
          "new_api": "die",
          "old_text": "unuse_one_packed_git()",
          "new_text": "die(\"packfile %s cannot be mapped.\", p->pack_name)",
          "old_line_content": "\t\twhile (PACK_MAX_SZ < pack_mapped && unuse_one_packed_git())",
          "new_line_content": "\t\t\tdie(\"packfile %s cannot be mapped.\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "close",
          "new_api": "memcmp",
          "old_text": "close(fd)",
          "new_text": "memcmp((char*)(p->index_base) + p->index_size - 40,\n\t\t\t   p->pack_base + p->pack_size - 20, 20)",
          "old_line_content": "\t\t\tclose(fd);",
          "new_line_content": "\t\tif (memcmp((char*)(p->index_base) + p->index_size - 40,",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "sha1_pack_index_name",
          "new_api": "sha1_pack_name",
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\tchar *path = sha1_pack_index_name(sha1);",
          "new_line_content": "\tpath = sha1_pack_name(sha1);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "check_packed_git_idx",
          "new_api": "memcpy",
          "old_text": "check_packed_git_idx(idx_path, &idx_size, &idx_map)",
          "new_text": "memcpy(p->sha1, sha1, 20)",
          "old_line_content": "\tif (check_packed_git_idx(idx_path, &idx_size, &idx_map))",
          "new_line_content": "\tmemcpy(p->sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "sprintf",
          "new_api": "strcpy",
          "old_text": "sprintf(path, \"%s/pack\", objdir)",
          "new_text": "strcpy(path + len, de->d_name)",
          "old_line_content": "\tsprintf(path, \"%s/pack\", objdir);",
          "new_line_content": "\t\tstrcpy(path + len, de->d_name);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "strlen",
          "new_api": "add_packed_git",
          "old_text": "strlen(path)",
          "new_text": "add_packed_git(path, len + namelen, local)",
          "old_line_content": "\tlen = strlen(path);",
          "new_line_content": "\t\tp = add_packed_git(path, len + namelen, local);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "strlen",
          "new_api": "closedir",
          "old_text": "strlen(de->d_name)",
          "new_text": "closedir(dir)",
          "old_line_content": "\t\tint namelen = strlen(de->d_name);",
          "new_line_content": "\tclosedir(dir);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "closedir",
          "new_api": "prepare_packed_git_one",
          "old_text": "closedir(dir)",
          "new_text": "prepare_packed_git_one(alt->base, 0)",
          "old_line_content": "\tclosedir(dir);",
          "new_line_content": "\t\tprepare_packed_git_one(alt->base, 0);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "prepare_packed_git_one",
          "new_api": "SHA1_Update",
          "old_text": "prepare_packed_git_one(alt->base, 0)",
          "new_text": "SHA1_Update(&c, map, size)",
          "old_line_content": "\t\tprepare_packed_git_one(alt->base, 0);",
          "new_line_content": "\tSHA1_Update(&c, map, size);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "open",
          "new_api": "close",
          "old_text": "open(filename, O_RDONLY)",
          "new_text": "close(fd)",
          "old_line_content": "\t\t\tfd = open(filename, O_RDONLY);",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "inflateInit",
          "new_api": "inflate",
          "old_text": "inflateInit(stream)",
          "new_text": "inflate(stream, Z_FINISH)",
          "old_line_content": "\tinflateInit(stream);",
          "new_line_content": "\t\twhile (inflate(stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "inflateInit",
          "new_api": "get_delta_hdr_size",
          "old_text": "inflateInit(&stream)",
          "new_text": "get_delta_hdr_size(&data)",
          "old_line_content": "\t\tinflateInit(&stream);",
          "new_line_content": "\t\tresult_size = get_delta_hdr_size(&data);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "get_delta_hdr_size",
          "new_api": "die",
          "old_text": "get_delta_hdr_size(&data)",
          "new_text": "die(\"object offset outside of pack file\")",
          "old_line_content": "\t\tresult_size = get_delta_hdr_size(&data);",
          "new_line_content": "\t\tdie(\"object offset outside of pack file\");",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "strcpy",
          "new_api": "unuse_packed_git",
          "old_text": "strcpy(type, \"tree\")",
          "new_text": "unuse_packed_git(p)",
          "old_line_content": "\t\tstrcpy(type, \"tree\");",
          "new_line_content": "\tunuse_packed_git(p);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "die",
          "new_api": "inflateEnd",
          "old_text": "die(\"truncated pack file\")",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\tdie(\"truncated pack file\");",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "memset",
          "new_api": "find_pack_entry_one",
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "inflateInit",
          "new_api": "patch_delta",
          "old_text": "inflateInit(&stream)",
          "new_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     &result_size)",
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\tresult = patch_delta(base, base_size,",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "free",
          "new_api": "xmalloc",
          "old_text": "free(delta_data)",
          "new_text": "xmalloc(size + 1)",
          "old_line_content": "\tfree(delta_data);",
          "new_line_content": "\tbuffer = xmalloc(size + 1);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "free",
          "new_api": "die",
          "old_text": "free(buffer)",
          "new_text": "die(\"cannot map packed file\")",
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "\t\tdie(\"cannot map packed file\");",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "die",
          "new_api": "unpack_object_header",
          "old_text": "die(\"corrupted pack file %s\", p->pack_name)",
          "new_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "old_line_content": "\t\tdie(\"corrupted pack file %s\", p->pack_name);",
          "new_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "unpack_object_header",
          "new_api": "strcpy",
          "old_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "new_text": "strcpy(type, \"blob\")",
          "old_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "new_line_content": "\t\tstrcpy(type, \"blob\");",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "unpack_non_delta_entry",
          "new_api": "num_packed_objects",
          "old_text": "unpack_non_delta_entry(pack, size, left)",
          "new_text": "num_packed_objects(p)",
          "old_line_content": "\tretval = unpack_non_delta_entry(pack, size, left);",
          "new_line_content": "\tif (n < 0 || num_packed_objects(p) <= n)",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "memcpy",
          "new_api": "memcmp",
          "old_text": "memcpy(sha1, (index + 24 * n + 4), 20)",
          "new_text": "memcmp(index + 24 * mi + 4, sha1, 20)",
          "old_line_content": "\tmemcpy(sha1, (index + 24 * n + 4), 20);",
          "new_line_content": "\t\tint cmp = memcmp(index + 24 * mi + 4, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "find_pack_entry",
          "new_api": "inflateEnd",
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\tif (!find_pack_entry(sha1, &e))",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "sha1_to_hex",
          "new_api": "munmap",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "\t\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "find_pack_entry",
          "new_api": "read_packed_sha1",
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "\tif (!find_pack_entry(sha1, &e)) {",
          "new_line_content": "\t\treturn read_packed_sha1(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "sha1_to_hex",
          "new_api": "map_sha1_file_internal",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "map_sha1_file_internal(sha1, &mapsize)",
          "old_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "unpack_entry",
          "new_api": "munmap",
          "old_text": "unpack_entry(&e, type, size)",
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "\treturn unpack_entry(&e, type, size);",
          "new_line_content": "\t\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "memcpy",
          "new_api": "memcmp",
          "old_text": "memcpy(actual_sha1_return, actual_sha1, 20)",
          "new_text": "memcmp(buffer, ref_type, ref_length)",
          "old_line_content": "\t\t\t\tmemcpy(actual_sha1_return, actual_sha1, 20);",
          "new_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "link_temp_to_file",
          "new_api": "rename",
          "old_text": "link_temp_to_file(tmpfile, filename)",
          "new_text": "rename(tmpfile, filename)",
          "old_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "new_line_content": "\t\tif (!rename(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "memcpy",
          "new_api": "strerror",
          "old_text": "memcpy(returnsha1, sha1, 20)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tmemcpy(returnsha1, sha1, 20);",
          "new_line_content": "\t\tfprintf(stderr, \"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "strerror",
          "new_api": "deflateInit",
          "old_text": "strerror(errno)",
          "new_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "old_line_content": "\t\tfprintf(stderr, \"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "new_line_content": "\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "deflate",
          "new_api": "close",
          "old_text": "deflate(&stream, 0)",
          "new_text": "close(fd)",
          "old_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "write",
          "new_api": "map_sha1_file_internal",
          "old_text": "write(fd, compressed, size)",
          "new_text": "map_sha1_file_internal(sha1, &objsize)",
          "old_line_content": "\tif (write(fd, compressed, size) != size)",
          "new_line_content": "\tvoid *map = map_sha1_file_internal(sha1, &objsize);",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "map_sha1_file_internal",
          "new_api": "sprintf",
          "old_text": "map_sha1_file_internal(sha1, &objsize)",
          "new_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "old_line_content": "\tvoid *map = map_sha1_file_internal(sha1, &objsize);",
          "new_line_content": "\t\thdrlen = sprintf(hdr, \"%s %lu\", type, len) + 1;",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "deflate",
          "new_api": "perror",
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": "perror(\"write \")",
          "old_line_content": "\t\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "new_line_content": "\t\t\t\tperror(\"write \");",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "memset",
          "new_api": "inflate",
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "SHA1_Init",
          "new_api": "write",
          "old_text": "SHA1_Init(&c)",
          "new_text": "write(local, buffer, *bufposn - stream.avail_in)",
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "\t\t\twrite(local, buffer, *bufposn - stream.avail_in);",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "inflate",
          "new_api": "unlink",
          "old_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "new_line_content": "\t\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "read",
          "new_api": "SHA1_Final",
          "old_text": "read(fd, buffer + *bufposn, bufsize - *bufposn)",
          "new_text": "SHA1_Final(real_sha1, &c)",
          "old_line_content": "\t\tsize = read(fd, buffer + *bufposn, bufsize - *bufposn);",
          "new_line_content": "\tSHA1_Final(real_sha1, &c);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "close",
          "new_api": "unlink",
          "old_text": "close(local)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\t\tclose(local);",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "unlink",
          "new_api": "sha1_to_hex",
          "old_text": "unlink(tmpfile)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\tunlink(tmpfile);",
          "new_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "error",
          "new_api": "memcmp",
          "old_text": "error(\"Connection closed?\")",
          "new_text": "memcmp(sha1, real_sha1, 20)",
          "old_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "new_line_content": "\tif (memcmp(sha1, real_sha1, 20)) {",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "perror",
          "new_api": "unlink",
          "old_text": "perror(\"Reading from connection\")",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\t\tperror(\"Reading from connection\");",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "unlink",
          "new_api": "sha1_pack_index_name",
          "old_text": "unlink(tmpfile)",
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "sha1_file_name",
          "new_api": "sha1_pack_name",
          "old_text": "sha1_file_name(sha1)",
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "new_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "find_pack_entry",
          "new_api": "read",
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": "read(fd, buf + off, size - off)",
          "old_line_content": "\tif (find_pack_entry(sha1, &e))",
          "new_line_content": "\t\tiret = read(fd, buf + off, size - off);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "free",
          "new_api": "mmap",
          "old_text": "free(buf)",
          "new_text": "mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t\tbuf = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "mmap",
          "new_api": "munmap",
          "old_text": "mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": "munmap(buf, size)",
          "old_line_content": "\t\tbuf = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "munmap",
          "new_api": "strerror",
          "old_text": "munmap(buf, size)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tmunmap(buf, size);",
          "new_line_content": "\t\t\t\t     strerror(errno));",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "error",
          "new_api": "write_sha1_file_prepare",
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": "write_sha1_file_prepare(target, st->st_size, \"blob\",\n\t\t\t\t\t\tsha1, hdr, &hdrlen)",
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\t\twrite_sha1_file_prepare(target, st->st_size, \"blob\",",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "readlink",
          "new_api": "free",
          "old_text": "readlink(path, target, st->st_size+1)",
          "new_text": "free(target)",
          "old_line_content": "\t\tif (readlink(path, target, st->st_size+1) != st->st_size) {",
          "new_line_content": "\t\tfree(target);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(size)",
          "old_line_content": "",
          "new_line_content": "\tchar *buf = malloc(size);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(path, \"%s/pack\", objdir)",
          "old_line_content": "",
          "new_line_content": "\tsprintf(path, \"%s/pack\", objdir);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(path)",
          "old_line_content": "void install_packed_git(struct packed_git *pack)",
          "new_line_content": "\tlen = strlen(path);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "opendir",
          "old_text": null,
          "new_text": "opendir(path)",
          "old_line_content": "{",
          "new_line_content": "\tdir = opendir(path);",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "realloc",
          "old_text": null,
          "new_text": "realloc(buf, size)",
          "old_line_content": "int index_pipe(unsigned char *sha1, int fd, const char *type, int write_object)",
          "new_line_content": "\t\t\t\tbuf = realloc(buf, size);",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "readdir",
          "old_text": null,
          "new_text": "readdir(dir)",
          "old_line_content": "",
          "new_line_content": "\twhile ((de = readdir(dir)) != NULL) {",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(de->d_name)",
          "old_line_content": "static void prepare_packed_git_one(char *objdir, int local)",
          "new_line_content": "\t\tint namelen = strlen(de->d_name);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(sha1, (index + 24 * n + 4), 20)",
          "old_line_content": "}",
          "new_line_content": "\tmemcpy(sha1, (index + 24 * n + 4), 20);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(de->d_name + namelen - 4, \".idx\")",
          "old_line_content": "\tint len;",
          "new_line_content": "\t\tif (strcmp(de->d_name + namelen - 4, \".idx\"))",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\tunsigned long off = 0;",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(level1_ofs[*sha1])",
          "old_line_content": "int nth_packed_object_sha1(const struct packed_git *p, int n,",
          "new_line_content": "\tint hi = ntohl(level1_ofs[*sha1]);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(level1_ofs[*sha1 - 1])",
          "old_line_content": "\t\t\t   unsigned char* sha1)",
          "new_line_content": "\tint lo = ((*sha1 == 0x0) ? 0 : ntohl(level1_ofs[*sha1 - 1]));",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(buf, off, type, sha1)",
          "old_line_content": "\t\t\toff += iret;",
          "new_line_content": "\t\tret = write_sha1_file(buf, off, type, sha1);",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\t\t\t\tsize *= 2;",
          "new_line_content": "\t\twrite_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(*((int*)(index + 24 * mi)))",
          "old_line_content": "}",
          "new_line_content": "\t\t\te->offset = ntohl(*((int*)(index + 24 * mi)));",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(e->sha1, sha1, 20)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemcpy(e->sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\tprepare_packed_git_one(get_object_directory(), 1);",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "prepare_alt_odb",
          "old_text": null,
          "new_text": "prepare_alt_odb()",
          "old_line_content": "\t\tp->next = packed_git;",
          "new_line_content": "\tprepare_alt_odb();",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "prepare_packed_git",
          "old_text": null,
          "new_text": "prepare_packed_git()",
          "old_line_content": "\t\t\te->p = p;",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, e, p)",
          "old_line_content": "\t\tif (cmp > 0)",
          "new_line_content": "\t\tif (find_pack_entry_one(sha1, e, p))",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(buf, size, type, sha1)",
          "old_line_content": "\tint ret;",
          "new_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\tint hdrlen;",
          "new_line_content": "\t\twrite_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "\tfor (alt = alt_odb_list; alt; alt = alt->next) {",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(header, \"%s %lu\", type, size)",
          "old_line_content": "\t\talt->name[-1] = 0;",
          "new_line_content": "\tSHA1_Update(&c, header, 1+sprintf(header, \"%s %lu\", type, size));",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(real_sha1, &c)",
          "old_line_content": "\t\talt->name[-1] = '/';",
          "new_line_content": "\tSHA1_Final(real_sha1, &c);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(sha1, real_sha1, 20)",
          "old_line_content": "\t}",
          "new_line_content": "\treturn memcmp(sha1, real_sha1, 20) ? -1 : 0;",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, &e, p)",
          "old_line_content": "\tfor (p = packed_git; p; p = p->next) {",
          "new_line_content": "\t\tif (find_pack_entry_one(sha1, &e, p))",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "find_sha1_file",
          "old_text": null,
          "new_text": "find_sha1_file(sha1, &st)",
          "old_line_content": "",
          "new_line_content": "\tchar *filename = find_sha1_file(sha1, &st);",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\t\tret = 0;",
          "new_line_content": "\t\tfd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "old_line_content": "\tif (size)",
          "new_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "index_fd",
          "old_text": null,
          "new_text": "index_fd(sha1, fd, st, write_object, NULL)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, NULL) < 0)",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "}",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY | sha1_file_open_flag)",
          "old_line_content": "}",
          "new_line_content": "\tfd = open(filename, O_RDONLY | sha1_file_open_flag);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "map_sha1_file_internal",
          "old_text": null,
          "new_text": "map_sha1_file_internal(sha1, &mapsize)",
          "old_line_content": "\t\t\treturn p;",
          "new_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(st->st_size+1)",
          "old_line_content": "\tint fd;",
          "new_line_content": "\t\ttarget = xmalloc(st->st_size+1);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY)",
          "old_line_content": "\tstruct stat st;",
          "new_line_content": "\t\t\tfd = open(filename, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "readlink",
          "old_text": null,
          "new_text": "readlink(path, target, st->st_size+1)",
          "old_line_content": "\tchar *target;",
          "new_line_content": "\t\tif (readlink(path, target, st->st_size+1) != st->st_size) {",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (!find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "packed_object_info",
          "old_text": null,
          "new_text": "packed_object_info(&e, type, sizep)",
          "old_line_content": "int sha1_object_info(const unsigned char *sha1, char *type, unsigned long *sizep)",
          "new_line_content": "\t\treturn packed_object_info(&e, type, sizep);",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "unpack_sha1_header",
          "old_text": null,
          "new_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "old_line_content": "\tint status;",
          "new_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "old_line_content": "\tunsigned long mapsize, size;",
          "new_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tvoid *map;",
          "new_line_content": "\t\t\t       sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "parse_sha1_header",
          "old_text": null,
          "new_text": "parse_sha1_header(hdr, type, &size)",
          "old_line_content": "\tz_stream stream;",
          "new_line_content": "\tif (parse_sha1_header(hdr, type, &size) < 0)",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tchar hdr[128];",
          "new_line_content": "\t\tstatus = error(\"unable to parse %s header\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "old_line_content": "\tcase S_IFREG:",
          "new_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(target, st->st_size, \"blob\", sha1)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\t} else if (write_sha1_file(target, st->st_size, \"blob\", sha1))",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "mmap",
          "old_text": null,
          "new_text": "mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\t\tdefault:",
          "new_line_content": "\tmap = mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\tcase S_IFLNK:",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(stream, 0, sizeof(*stream))",
          "old_line_content": "\t\t */",
          "new_line_content": "\tmemset(stream, 0, sizeof(*stream));",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\telse {",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e)) {",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\tstatus = 0;",
          "new_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "unpack_entry",
          "old_text": null,
          "new_text": "unpack_entry(&e, type, size)",
          "old_line_content": "\t}",
          "new_line_content": "\treturn unpack_entry(&e, type, size);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(stream)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tinflateInit(stream);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(stream, 0)",
          "old_line_content": "\t*size = st.st_size;",
          "new_line_content": "\treturn inflate(stream, 0);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(buffer)",
          "old_line_content": "{",
          "new_line_content": "\tint bytes = strlen(buffer) + 1;",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(1+size)",
          "old_line_content": "\t/* Get the data stream */",
          "new_line_content": "\tunsigned char *buf = xmalloc(1+size);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "",
          "new_line_content": "\tif (find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, buffer + bytes, stream->total_out - bytes)",
          "old_line_content": "\tstream->next_in = map;",
          "new_line_content": "\tmemcpy(buf, buffer + bytes, stream->total_out - bytes);",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "unpack_sha1_file",
          "old_text": null,
          "new_text": "unpack_sha1_file(map, mapsize, type, size)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size);",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(stream)",
          "old_line_content": "static void *unpack_sha1_rest(z_stream *stream, void *buffer, unsigned long size)",
          "new_line_content": "\tinflateEnd(stream);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(actual_sha1, sha1, 20)",
          "old_line_content": "\t}",
          "new_line_content": "\tmemcpy(actual_sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(actual_sha1, type, &isize)",
          "old_line_content": "\t\t\t\t const char *required_type,",
          "new_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, type, &isize);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(type, required_type)",
          "old_line_content": "{",
          "new_line_content": "\t\tif (!strcmp(type, required_type)) {",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(actual_sha1_return, actual_sha1, 20)",
          "old_line_content": "\tunsigned long isize;",
          "new_line_content": "\t\t\t\tmemcpy(actual_sha1_return, actual_sha1, 20);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(type, \"commit\")",
          "old_line_content": "\twhile (1) {",
          "new_line_content": "\t\telse if (!strcmp(type, \"commit\"))",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(type, \"tag\")",
          "old_line_content": "\t\tconst char *ref_type = NULL;",
          "new_line_content": "\t\telse if (!strcmp(type, \"tag\"))",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\tif (!buffer)",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref_type)",
          "old_line_content": "\t\t\t*size = isize;",
          "new_line_content": "\t\tref_length = strlen(ref_type);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(buffer + ref_length, actual_sha1)",
          "old_line_content": "\t\t\treturn buffer;",
          "new_line_content": "\t\t    get_sha1_hex(buffer + ref_length, actual_sha1)) {",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t\tref_type = \"tree \";",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf((char *)hdr, \"%s %lu\", type, len)",
          "old_line_content": "\t\t * actual_sha1.  Check again. */",
          "new_line_content": "\t*hdrlen = sprintf((char *)hdr, \"%s %lu\", type, len)+1;",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "unpack_sha1_header",
          "old_text": null,
          "new_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "old_line_content": "\t*sizep = size;",
          "new_line_content": "\tret = unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr));",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "parse_sha1_header",
          "old_text": null,
          "new_text": "parse_sha1_header(hdr, type, size)",
          "old_line_content": "",
          "new_line_content": "\tif (ret < Z_OK || parse_sha1_header(hdr, type, size) < 0)",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "old_line_content": "char *write_sha1_file_prepare(void *buf,",
          "new_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "unpack_sha1_rest",
          "old_text": null,
          "new_text": "unpack_sha1_rest(&stream, hdr, *size)",
          "old_line_content": "\t */",
          "new_line_content": "\treturn unpack_sha1_rest(&stream, hdr, *size);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, buf, len)",
          "old_line_content": "\t\t\t      unsigned long len,",
          "new_line_content": "\tSHA1_Update(&c, buf, len);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(sha1, &c)",
          "old_line_content": "\t\t\t      const char *type,",
          "new_line_content": "\tSHA1_Final(sha1, &c);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\t\t\t      unsigned char *hdr,",
          "new_line_content": "\treturn sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "",
          "new_line_content": "\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"truncated pack file\")",
          "old_line_content": "/* forward declaration for a mutually recursive function */",
          "new_line_content": "\t\tdie(\"truncated pack file\");",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "old_line_content": "",
          "new_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "old_line_content": "static int packed_delta_info(unsigned char *base_sha1,",
          "new_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(base_sha1)",
          "old_line_content": "\t\t\t     unsigned long delta_size,",
          "new_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(filename, '/')",
          "old_line_content": "",
          "new_line_content": "\t\tchar *dir = strrchr(filename, '/');",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "packed_object_info",
          "old_text": null,
          "new_text": "packed_object_info(&base_ent, type, NULL)",
          "old_line_content": "\tif (left < 20)",
          "new_line_content": "\tif (packed_object_info(&base_ent, type, NULL))",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "mkdir",
          "old_text": null,
          "new_text": "mkdir(filename, 0777)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmkdir(filename, 0777);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "\t * Try to mkdir the last path component if that failed",
          "new_line_content": "\t\t\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\t * based on a base with a wrong size.  This saves tons of",
          "new_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "link_temp_to_file",
          "old_text": null,
          "new_text": "link_temp_to_file(tmpfile, filename)",
          "old_line_content": "\t\t\t*dir = '/';",
          "new_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tif (sizep) {",
          "new_line_content": "\t\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\t\tconst unsigned char *data;",
          "new_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\tunsigned char delta_head[64];",
          "new_line_content": "\t\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"delta data unpack-initial failed\")",
          "old_line_content": "\t\tint st;",
          "new_line_content": "\t\t\tdie(\"delta data unpack-initial failed\");",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "get_delta_hdr_size",
          "old_text": null,
          "new_text": "get_delta_hdr_size(&data)",
          "old_line_content": "\t\tstream.next_out = delta_head;",
          "new_line_content": "\t\tget_delta_hdr_size(&data); /* ignore base size */",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t * so we fall back to a rename, which will mean that it",
          "new_line_content": "\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(ret)",
          "old_line_content": "\t *",
          "new_line_content": "\t\t\tfprintf(stderr, \"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"object offset outside of pack file\")",
          "old_line_content": "\tunsigned char *pack, c;",
          "new_line_content": "\t\t\tdie(\"object offset outside of pack file\");",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "int write_sha1_file(void *buf, unsigned long len, const char *type, unsigned char *returnsha1)",
          "new_line_content": "\tfilename = write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(returnsha1, sha1, 20)",
          "old_line_content": "\tint size;",
          "new_line_content": "\t\tmemcpy(returnsha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "has_sha1_file",
          "old_text": null,
          "new_text": "has_sha1_file(sha1)",
          "old_line_content": "\tunsigned char *compressed;",
          "new_line_content": "\tif (has_sha1_file(sha1))",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\tfd = open(filename, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t/* Normally if we have it in the pack then we do not bother writing",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, e->offset, &kind, size)",
          "old_line_content": "}",
          "new_line_content": "\toffset = unpack_object_header(p, e->offset, &kind, size);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\tif (fd >= 0) {",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "\t\t * FIXME!!! We might do collision checking here, but we'd",
          "new_line_content": "\tfd = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tfprintf(stderr, \"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(base_sha1, pack, 20)",
          "old_line_content": "\t\t\t       unsigned char *base_sha1)",
          "new_line_content": "\t\tmemcpy(base_sha1, pack, 20);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tif (errno != ENOENT) {",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(pack, &base_ent, p)",
          "old_line_content": "\tenum object_type kind;",
          "new_line_content": "\t\t\tfind_pack_entry_one(pack, &base_ent, p);",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, base_ent.offset,\n\t\t\t\t\t\t      &kind, &junk)",
          "old_line_content": "",
          "new_line_content": "\t\t\toffset = unpack_object_header(p, base_ent.offset,",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "deflateBound",
          "old_text": null,
          "new_text": "deflateBound(&stream, len+hdrlen)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tsize = deflateBound(&stream, len+hdrlen);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\t}",
          "new_line_content": "\tcompressed = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"commit\")",
          "old_line_content": "\t\tdo {",
          "new_line_content": "\t\tstrcpy(type, \"commit\");",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "",
          "new_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tree\")",
          "old_line_content": "",
          "new_line_content": "\t\tstrcpy(type, \"tree\");",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"blob\")",
          "old_line_content": "\t\t\t\t\t\t      &kind, &junk);",
          "new_line_content": "\t\tstrcpy(type, \"blob\");",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "",
          "new_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tag\")",
          "old_line_content": "\t\t} while (kind == OBJ_DELTA);",
          "new_line_content": "\t\tstrcpy(type, \"tag\");",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\tunsigned long idx_size;",
          "new_line_content": "\tint fd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\tstream.next_out = compressed;",
          "new_line_content": "\tdeflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupted pack file %s containing object of kind %d\",\n\t\t    p->pack_name, kind)",
          "old_line_content": "\tswitch (kind) {",
          "new_line_content": "\t\tdie(\"corrupted pack file %s containing object of kind %d\",",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd, compressed, size)",
          "old_line_content": "\t/* First header.. */",
          "new_line_content": "\tif (write(fd, compressed, size) != size)",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": null,
          "new_api": "fstat",
          "old_text": null,
          "new_text": "fstat(fd, &st)",
          "old_line_content": "",
          "new_line_content": "\tif (fstat(fd, &st)) {",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unable to write file\")",
          "old_line_content": "\tstream.next_in = hdr;",
          "new_line_content": "\t\tdie(\"unable to write file\");",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": null,
          "new_api": "fchmod",
          "old_text": null,
          "new_text": "fchmod(fd, 0444)",
          "old_line_content": "\tstream.avail_in = hdrlen;",
          "new_line_content": "\tfchmod(fd, 0444);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(compressed)",
          "old_line_content": "\t\t/* nothing */;",
          "new_line_content": "\tfree(compressed);",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "move_temp_to_file",
          "old_text": null,
          "new_text": "move_temp_to_file(tmpfile, filename)",
          "old_line_content": "\t/* Then the data itself.. */",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "use_packed_git",
          "old_text": null,
          "new_text": "use_packed_git(p)",
          "old_line_content": "\t\t    p->pack_name, kind);",
          "new_line_content": "\tif (use_packed_git(p))",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"cannot map packed file\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdie(\"cannot map packed file\");",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"index file too small\")",
          "old_line_content": "\t*idx_size_ = idx_size;",
          "new_line_content": "\t\treturn error(\"index file too small\");",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "old_line_content": "}",
          "new_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(index[i])",
          "old_line_content": "\tif (idx_size < 4*256 + 20 + 20)",
          "new_line_content": "\t\tunsigned int n = ntohl(index[i]);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"non-monotonic index\")",
          "old_line_content": "\tnr = 0;",
          "new_line_content": "\t\t\treturn error(\"non-monotonic index\");",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "packed_delta_info",
          "old_text": null,
          "new_text": "packed_delta_info(pack, size, left, type, sizep, p)",
          "old_line_content": "\tunsigned long offset, size, left;",
          "new_line_content": "\t\tretval = packed_delta_info(pack, size, left, type, sizep, p);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "unuse_packed_git",
          "old_text": null,
          "new_text": "unuse_packed_git(p)",
          "old_line_content": "\tunsigned char *pack;",
          "new_line_content": "\t\tunuse_packed_git(p);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, &len)",
          "old_line_content": "\tunsigned long objsize;",
          "new_line_content": "\t\tunpacked = read_packed_sha1(sha1, type, &len);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"commit\")",
          "old_line_content": "",
          "new_line_content": "\t\tstrcpy(type, \"commit\");",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tree\")",
          "old_line_content": "",
          "new_line_content": "\t\tstrcpy(type, \"tree\");",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tz_stream stream;",
          "new_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "deflateInit",
          "old_text": null,
          "new_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "old_line_content": "",
          "new_line_content": "\t\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"blob\")",
          "old_line_content": "\tleft = p->pack_size - offset;",
          "new_line_content": "\t\tstrcpy(type, \"blob\");",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"wrong index file size\")",
          "old_line_content": "\t *  - 20-byte SHA1 of the packfile",
          "new_line_content": "\t\treturn error(\"wrong index file size\");",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "deflateBound",
          "old_text": null,
          "new_text": "deflateBound(&stream, len + hdrlen)",
          "old_line_content": "\tif (!buf) {",
          "new_line_content": "\t\tsize = deflateBound(&stream, len + hdrlen);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tag\")",
          "old_line_content": "\tcase OBJ_DELTA:",
          "new_line_content": "\t\tstrcpy(type, \"tag\");",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\t\tunsigned char *unpacked;",
          "new_line_content": "\t\ttemp_obj = buf = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupted pack file %s containing object of kind %d\",\n\t\t    p->pack_name, kind)",
          "old_line_content": "\t\treturn retval;",
          "new_line_content": "\t\tdie(\"corrupted pack file %s containing object of kind %d\",",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "",
          "new_line_content": "\t\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "",
          "new_line_content": "\t\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\t\tstream.next_out = buf;",
          "new_line_content": "\t\tdeflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(lru->pack_base, lru->pack_size)",
          "old_line_content": "}",
          "new_line_content": "\tmunmap(lru->pack_base, lru->pack_size);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(unpacked)",
          "old_line_content": "\t\tstream.avail_out = size;",
          "new_line_content": "\t\tfree(unpacked);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd, buf + posn, objsize - posn)",
          "old_line_content": "\t\t\t/* nothing */;",
          "new_line_content": "\t\tsize = write(fd, buf + posn, objsize - posn);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"write closed\\n\")",
          "old_line_content": "\t\tstream.next_in = unpacked;",
          "new_line_content": "\t\t\t\tfprintf(stderr, \"write closed\\n\");",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"truncated pack file\")",
          "old_line_content": "static void *unpack_delta_entry(unsigned char *base_sha1,",
          "new_line_content": "\t\tdie(\"truncated pack file\");",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "stat",
          "old_text": null,
          "new_text": "stat(p->pack_name, &st)",
          "old_line_content": "\tlru->pack_base = NULL;",
          "new_line_content": "\t\tstat(p->pack_name, &st);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(st.st_mode)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\t\tif (!S_ISREG(st.st_mode))",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s not a regular file\", p->pack_name)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"packfile %s not a regular file\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(delta_size)",
          "old_line_content": "\t\t\t\tchar *type,",
          "new_line_content": "\tdelta_data = xmalloc(delta_size);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\t\t\t\tstruct packed_git *p)",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, objsize)",
          "old_line_content": "\tdo {",
          "new_line_content": "\t\tmunmap(map, objsize);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(temp_obj)",
          "old_line_content": "\t\tif (size <= 0) {",
          "new_line_content": "\t\tfree(temp_obj);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "unuse_one_packed_git",
          "old_text": null,
          "new_text": "unuse_one_packed_git()",
          "old_line_content": "\tif (!p->pack_size) {",
          "new_line_content": "\t\twhile (PACK_MAX_SZ < pack_mapped && unuse_one_packed_git())",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(p->pack_name, O_RDONLY)",
          "old_line_content": "\t\t// We created the struct before we had the pack",
          "new_line_content": "\t\tfd = open(p->pack_name, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\tif (left < 20)",
          "new_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"delta data unpack failed\")",
          "old_line_content": "\tdata_size = left - 20;",
          "new_line_content": "\t\tdie(\"delta data unpack failed\");",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t\tp->pack_size = st.st_size;",
          "new_line_content": "\t\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s cannot be opened\", p->pack_name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdie(\"packfile %s cannot be opened\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(base_sha1)",
          "old_line_content": "\tstream.next_in = data;",
          "new_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s size mismatch.\", p->pack_name)",
          "old_line_content": "\t\tstruct stat st;",
          "new_line_content": "\t\t\tdie(\"packfile %s size mismatch.\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "mmap",
          "old_text": null,
          "new_text": "mmap(NULL, p->pack_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\t\tvoid *map;",
          "new_line_content": "\t\tmap = mmap(NULL, p->pack_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "unpack_entry_gently",
          "old_text": null,
          "new_text": "unpack_entry_gently(&base_ent, type, &base_size)",
          "old_line_content": "\tstream.avail_in = data_size;",
          "new_line_content": "\tbase = unpack_entry_gently(&base_ent, type, &base_size);",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to read delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "old_line_content": "\tstream.avail_out = delta_size;",
          "new_line_content": "\t\tdie(\"failed to read delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(base_sha1)",
          "old_line_content": "",
          "new_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "",
          "new_line_content": "\tlocal = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t       size_t bufsize, size_t *bufposn)",
          "new_line_content": "\t\treturn error(\"Couldn't open %s for %s\\n\", tmpfile, sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta_data)",
          "old_line_content": "",
          "new_line_content": "\tfree(delta_data);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(base)",
          "old_line_content": "\t/* The base entry _must_ be in the same pack */",
          "new_line_content": "\tfree(base);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tchar tmpfile[PATH_MAX];",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tz_stream stream;",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s does not match index.\", p->pack_name)",
          "old_line_content": "\t\tif (st.st_size != p->pack_size)",
          "new_line_content": "\t\t\tdie(\"packfile %s does not match index.\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "\tunsigned char discard[4096];",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(target)",
          "old_line_content": "\tswitch (st->st_mode & S_IFMT) {",
          "new_line_content": "\t\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\t*sizep = result_size;",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "check_packed_git_idx",
          "old_text": null,
          "new_text": "check_packed_git_idx(path, &idx_size, &idx_map)",
          "old_line_content": "\t}",
          "new_line_content": "\tif (check_packed_git_idx(path, &idx_size, &idx_map))",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\t\t\t\t    unsigned long left)",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "{",
          "new_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(path + path_len - 4, \".pack\")",
          "old_line_content": "}",
          "new_line_content": "\tstrcpy(path + path_len - 4, \".pack\");",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(st.st_mode)",
          "old_line_content": "",
          "new_line_content": "\tif (stat(path, &st) || !S_ISREG(st.st_mode)) {",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "struct packed_git *add_packed_git(char *path, int path_len, int local)",
          "new_line_content": "\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\tint st;",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\tunsigned char *buffer;",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd, buffer + *bufposn, bufsize - *bufposn)",
          "old_line_content": "\t\t\tdo {",
          "new_line_content": "\t\tsize = read(fd, buffer + *bufposn, bufsize - *bufposn);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(local)",
          "old_line_content": "\t\t\t\tstream.avail_out = sizeof(discard);",
          "new_line_content": "\t\t\tclose(local);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Connection closed?\")",
          "old_line_content": "\t\t\t\t\t    stream.avail_out);",
          "new_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*p) + path_len + 2)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\tp = xmalloc(sizeof(*p) + path_len + 2);",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(p->pack_name, path)",
          "old_line_content": "",
          "new_line_content": "\tstrcpy(p->pack_name, path);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(\"Reading from connection\")",
          "old_line_content": "\t\t\t} while (stream.avail_in && ret == Z_OK);",
          "new_line_content": "\t\t\tperror(\"Reading from connection\");",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\t\tif (ret != Z_OK)",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(local)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tclose(local);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "use_packed_git",
          "old_text": null,
          "new_text": "use_packed_git(p)",
          "old_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != size) {",
          "new_line_content": "\tif (use_packed_git(p))",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "unpack_entry_gently",
          "old_text": null,
          "new_text": "unpack_entry_gently(entry, type, sizep)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tretval = unpack_entry_gently(entry, type, sizep);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(path + path_len - 44, sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\tif ((path_len > 44) && !get_sha1_hex(path + path_len - 44, sha1))",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p->sha1, sha1, 20)",
          "old_line_content": "\t/* ok, it looks sane as far as we can check without",
          "new_line_content": "\t\tmemcpy(p->sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "unuse_packed_git",
          "old_text": null,
          "new_text": "unuse_packed_git(p)",
          "old_line_content": "\t}",
          "new_line_content": "\tunuse_packed_git(p);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupted pack file %s\", p->pack_name)",
          "old_line_content": "\treturn buffer;",
          "new_line_content": "\t\tdie(\"corrupted pack file %s\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\treturn error(\"File %s has bad hash\\n\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\t} while (1);",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "sha1_pack_index_name",
          "old_text": null,
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\tp->pack_size = st.st_size;",
          "new_line_content": "\tchar *path = sha1_pack_index_name(sha1);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "parse_pack_index_file",
          "old_text": null,
          "new_text": "parse_pack_index_file(sha1, path)",
          "old_line_content": "\tp->index_base = idx_map;",
          "new_line_content": "\treturn parse_pack_index_file(sha1, path);",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "check_packed_git_idx",
          "old_text": null,
          "new_text": "check_packed_git_idx(idx_path, &idx_size, &idx_map)",
          "old_line_content": "",
          "new_line_content": "\tif (check_packed_git_idx(idx_path, &idx_size, &idx_map))",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "unpack_delta_entry",
          "old_text": null,
          "new_text": "unpack_delta_entry(pack, size, left, type, sizep, p)",
          "old_line_content": "void *unpack_entry_gently(struct pack_entry *entry,",
          "new_line_content": "\t\tretval = unpack_delta_entry(pack, size, left, type, sizep, p);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(path)",
          "old_line_content": "}",
          "new_line_content": "\tp = xmalloc(sizeof(*p) + strlen(path) + 2);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(p->pack_name, path)",
          "old_line_content": "",
          "new_line_content": "\tstrcpy(p->pack_name, path);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"commit\")",
          "old_line_content": "\tstruct packed_git *p = entry->p;",
          "new_line_content": "\t\tstrcpy(type, \"commit\");",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tree\")",
          "old_line_content": "\tenum object_type kind;",
          "new_line_content": "\t\tstrcpy(type, \"tree\");",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\treturn find_pack_entry(sha1, &e);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tag\")",
          "old_line_content": "\tswitch (kind) {",
          "new_line_content": "\t\tstrcpy(type, \"tag\");",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\tif (find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": null,
          "new_api": "find_sha1_file",
          "old_text": null,
          "new_text": "find_sha1_file(sha1, &st)",
          "old_line_content": "",
          "new_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": null,
          "new_api": "unpack_non_delta_entry",
          "old_text": null,
          "new_text": "unpack_non_delta_entry(pack, size, left)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\tretval = unpack_non_delta_entry(pack, size, left);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"blob\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"blob\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\tmemcpy(p->sha1, sha1, 20);",
          "new_line_content": "\tDIR *dir;",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tag\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tag\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"commit\");",
          "new_line_content": "\t*sizep = size;",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "find_sha1_file",
          "new_api": null,
          "old_text": "find_sha1_file(sha1, &st)",
          "new_text": null,
          "old_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "new_line_content": "\t\t\toff += iret;",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(size)",
          "new_text": null,
          "old_line_content": "\tchar *buf = malloc(size);",
          "new_line_content": "\t} while (iret > 0);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd, buf + off, size - off)",
          "new_text": null,
          "old_line_content": "\t\tiret = read(fd, buf + off, size - off);",
          "new_line_content": "\t\ttype = \"blob\";",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "opendir",
          "new_api": null,
          "old_text": "opendir(path)",
          "new_text": null,
          "old_line_content": "\tdir = opendir(path);",
          "new_line_content": "\t\tif (!p)",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "num_packed_objects",
          "new_api": null,
          "old_text": "num_packed_objects(p)",
          "new_text": null,
          "old_line_content": "\tif (n < 0 || num_packed_objects(p) <= n)",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "realloc",
          "new_api": null,
          "old_text": "realloc(buf, size)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf = realloc(buf, size);",
          "new_line_content": "\t\tret = 0;",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "readdir",
          "new_api": null,
          "old_text": "readdir(dir)",
          "new_text": null,
          "old_line_content": "\twhile ((de = readdir(dir)) != NULL) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(de->d_name + namelen - 4, \".idx\")",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(de->d_name + namelen - 4, \".idx\"))",
          "new_line_content": "void prepare_packed_git(void)",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\t\tfree(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(path + len, de->d_name)",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(path + len, de->d_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "add_packed_git",
          "new_api": null,
          "old_text": "add_packed_git(path, len + namelen, local)",
          "new_text": null,
          "old_line_content": "\t\tp = add_packed_git(path, len + namelen, local);",
          "new_line_content": "\tif (run_once)",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(level1_ofs[*sha1])",
          "new_text": null,
          "old_line_content": "\tint hi = ntohl(level1_ofs[*sha1]);",
          "new_line_content": "\t\t\thi = mi;",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(level1_ofs[*sha1 - 1])",
          "new_text": null,
          "old_line_content": "\tint lo = ((*sha1 == 0x0) ? 0 : ntohl(level1_ofs[*sha1 - 1]));",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\treturn find_pack_entry(sha1, &e);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(buf, off, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, off, type, sha1);",
          "new_line_content": "\tunsigned char hdr[50];",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(index + 24 * mi + 4, sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\tint cmp = memcmp(index + 24 * mi + 4, sha1, 20);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\t\twrite_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(*((int*)(index + 24 * mi)))",
          "new_text": null,
          "old_line_content": "\t\t\te->offset = ntohl(*((int*)(index + 24 * mi)));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(e->sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(e->sha1, sha1, 20);",
          "new_line_content": "\tstruct packed_git *p;",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git_one(get_object_directory(), 1);",
          "new_line_content": "\tSHA_CTX c;",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "prepare_alt_odb",
          "new_api": null,
          "old_text": "prepare_alt_odb()",
          "new_text": null,
          "old_line_content": "\tprepare_alt_odb();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\treturn ret;",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, e, p)",
          "new_text": null,
          "old_line_content": "\t\tif (find_pack_entry_one(sha1, e, p))",
          "new_line_content": "\t\t\treturn p;",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(buf, size, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\t\twrite_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\tcase S_IFREG:",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(header, \"%s %lu\", type, size)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, header, 1+sprintf(header, \"%s %lu\", type, size));",
          "new_line_content": "\tif (!filename) {",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, map, size)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, map, size);",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(real_sha1, &c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(real_sha1, &c);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(sha1, real_sha1, 20)",
          "new_text": null,
          "old_line_content": "\treturn memcmp(sha1, real_sha1, 20) ? -1 : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, &e, p)",
          "new_text": null,
          "old_line_content": "\t\tif (find_pack_entry_one(sha1, &e, p))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "find_sha1_file",
          "new_api": null,
          "old_text": "find_sha1_file(sha1, &st)",
          "new_text": null,
          "old_line_content": "\tchar *filename = find_sha1_file(sha1, &st);",
          "new_line_content": "\t\t/* Fallthrough */",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(path, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tfd = open(path, O_RDONLY);",
          "new_line_content": "\t\t\t             errstr);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\tif (!write_object) {",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t     strerror(errno));",
          "new_line_content": "\t\t\tunsigned char hdr[50];",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "index_fd",
          "new_api": null,
          "old_text": "index_fd(sha1, fd, st, write_object, NULL)",
          "new_text": null,
          "old_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, NULL) < 0)",
          "new_line_content": "\t\t\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(filename, O_RDONLY | sha1_file_open_flag)",
          "new_text": null,
          "old_line_content": "\tfd = open(filename, O_RDONLY | sha1_file_open_flag);",
          "new_line_content": "\t\t * Stop using O_NOATIME",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "map_sha1_file_internal",
          "new_api": null,
          "old_text": "map_sha1_file_internal(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "new_line_content": "\t\tstatus = 0;",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(st->st_size+1)",
          "new_text": null,
          "old_line_content": "\t\ttarget = xmalloc(st->st_size+1);",
          "new_line_content": "\t\t\t\t     path);",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(target)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(target);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "packed_object_info",
          "new_api": null,
          "old_text": "packed_object_info(&e, type, sizep)",
          "new_text": null,
          "old_line_content": "\t\treturn packed_object_info(&e, type, sizep);",
          "new_line_content": "\treturn status;",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "unpack_sha1_header",
          "new_api": null,
          "old_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "new_text": null,
          "old_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "new_text": null,
          "old_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "new_line_content": "static void *read_packed_sha1(const unsigned char *sha1, char *type, unsigned long *size)",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t       sha1_to_hex(sha1));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "parse_sha1_header",
          "new_api": null,
          "old_text": "parse_sha1_header(hdr, type, &size)",
          "new_text": null,
          "old_line_content": "\tif (parse_sha1_header(hdr, type, &size) < 0)",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tstatus = error(\"unable to parse %s header\", sha1_to_hex(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(target, st->st_size, \"blob\",\n\t\t\t\t\t\tsha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\t\t\twrite_sha1_file_prepare(target, st->st_size, \"blob\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(target, st->st_size, \"blob\", sha1)",
          "new_text": null,
          "old_line_content": "\t\t} else if (write_sha1_file(target, st->st_size, \"blob\", sha1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "mmap",
          "new_api": null,
          "old_text": "mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\tmap = mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\tstream->next_out = buffer;",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tstream->avail_out = size;",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, mapsize)",
          "new_text": null,
          "old_line_content": "\tmunmap(map, mapsize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(target)",
          "new_text": null,
          "old_line_content": "\t\tfree(target);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: unsupported file type\", path)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(stream, 0, sizeof(*stream))",
          "new_text": null,
          "old_line_content": "\tmemset(stream, 0, sizeof(*stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(stream, 0)",
          "new_text": null,
          "old_line_content": "\treturn inflate(stream, 0);",
          "new_line_content": "\t\t\t/* nothing */;",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buffer)",
          "new_text": null,
          "old_line_content": "\tint bytes = strlen(buffer) + 1;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(1+size)",
          "new_text": null,
          "old_line_content": "\tunsigned char *buf = xmalloc(1+size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\tif (find_pack_entry(sha1, &e))",
          "new_line_content": "\t\t\t\t unsigned char *actual_sha1_return)",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, buffer + bytes, stream->total_out - bytes)",
          "new_text": null,
          "old_line_content": "\tmemcpy(buf, buffer + bytes, stream->total_out - bytes);",
          "new_line_content": " * We used to just use \"sscanf()\", but that's actually way",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": null,
          "old_line_content": "\t\treturn read_packed_sha1(sha1, type, size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "map_sha1_file_internal",
          "new_api": null,
          "old_text": "map_sha1_file_internal(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "new_line_content": "\tchar type[20];",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "unpack_sha1_file",
          "new_api": null,
          "old_text": "unpack_sha1_file(map, mapsize, type, size)",
          "new_text": null,
          "old_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size);",
          "new_line_content": "\tunsigned long isize;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, mapsize)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(map, mapsize);",
          "new_line_content": "\tunsigned char actual_sha1[20];",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\twhile (inflate(stream, Z_FINISH) == Z_OK)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(stream);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(actual_sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\tmemcpy(actual_sha1, sha1, 20);",
          "new_line_content": "\t\t/* Handle references */",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(actual_sha1, type, &isize)",
          "new_text": null,
          "old_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, type, &isize);",
          "new_line_content": "\t\telse {",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(type, required_type)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(type, required_type)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "new_line_content": "\t\tif (*bufposn) {",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\telse if (!strcmp(type, \"commit\"))",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(type, \"tag\")",
          "new_text": null,
          "old_line_content": "\t\telse if (!strcmp(type, \"tag\"))",
          "new_line_content": "\t\t/* Now we have the ID of the referred-to object in",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_type)",
          "new_text": null,
          "old_line_content": "\t\tref_length = strlen(ref_type);",
          "new_line_content": "\t\t\t      unsigned long len,",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buffer, ref_type, ref_length)",
          "new_text": null,
          "old_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "new_line_content": "\t\t\t      unsigned char *sha1,",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(buffer + ref_length, actual_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    get_sha1_hex(buffer + ref_length, actual_sha1)) {",
          "new_line_content": "\t\t\t      unsigned char *hdr,",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\t\t      int *hdrlen)",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf((char *)hdr, \"%s %lu\", type, len)",
          "new_text": null,
          "old_line_content": "\t*hdrlen = sprintf((char *)hdr, \"%s %lu\", type, len)+1;",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "unpack_sha1_header",
          "new_api": null,
          "old_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "new_text": null,
          "old_line_content": "\tret = unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr));",
          "new_line_content": "\t\t\t     char *type,",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "parse_sha1_header",
          "new_api": null,
          "old_text": "parse_sha1_header(hdr, type, size)",
          "new_text": null,
          "old_line_content": "\tif (ret < Z_OK || parse_sha1_header(hdr, type, size) < 0)",
          "new_line_content": "\t\t\t     unsigned long *sizep,",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "static int link_temp_to_file(const char *tmpfile, char *filename)",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "unpack_sha1_rest",
          "new_api": null,
          "old_text": "unpack_sha1_rest(&stream, hdr, *size)",
          "new_text": null,
          "old_line_content": "\treturn unpack_sha1_rest(&stream, hdr, *size);",
          "new_line_content": "\tstruct pack_entry base_ent;",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, buf, len)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, buf, len);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(sha1, &c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(sha1, &c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\treturn sha1_file_name(sha1);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tif (!link(tmpfile, filename))",
          "new_line_content": "\t\tif (dir) {",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "new_line_content": "\t\tconst unsigned char *data;",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "new_line_content": "\t\tunsigned char delta_head[64];",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "new_line_content": "\t\tunsigned long result_size;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(filename, '/')",
          "new_text": null,
          "old_line_content": "\t\tchar *dir = strrchr(filename, '/');",
          "new_line_content": " * Move the just written object into its final resting place",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "packed_object_info",
          "new_api": null,
          "old_text": "packed_object_info(&base_ent, type, NULL)",
          "new_text": null,
          "old_line_content": "\tif (packed_object_info(&base_ent, type, NULL))",
          "new_line_content": "\t\tstream.next_out = delta_head;",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"cannot get info for delta-pack base\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"cannot get info for delta-pack base\");",
          "new_line_content": "\t\tstream.avail_out = sizeof(delta_head);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "mkdir",
          "new_api": null,
          "old_text": "mkdir(filename, 0777)",
          "new_text": null,
          "old_line_content": "\t\t\tmkdir(filename, 0777);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!link(tmpfile, filename))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t\t/* Examine the initial part of the delta to figure out",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\t\t*sizep = result_size;",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\t\tinflateEnd(&stream);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"delta data unpack-initial failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"delta data unpack-initial failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "get_delta_hdr_size",
          "new_api": null,
          "old_text": "get_delta_hdr_size(&data)",
          "new_text": null,
          "old_line_content": "\t\tget_delta_hdr_size(&data); /* ignore base size */",
          "new_line_content": "\tunsigned long size;",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!rename(tmpfile, filename))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\tunlink(tmpfile);",
          "new_line_content": "\tint size;",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(ret)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"object offset outside of pack file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"object offset outside of pack file\");",
          "new_line_content": "\t\tshift += 7;",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"object offset outside of pack file\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"object offset outside of pack file\");",
          "new_line_content": "\t\t\t       int *delta_chain_length,",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\tfilename = write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "has_sha1_file",
          "new_api": null,
          "old_text": "has_sha1_file(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_sha1_file(sha1))",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(filename, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tfd = open(filename, O_RDONLY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, e->offset, &kind, size)",
          "new_text": null,
          "old_line_content": "\toffset = unpack_object_header(p, e->offset, &kind, size);",
          "new_line_content": "\t\t\t\t\t\t      &kind, &junk);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "new_line_content": "\t/* Compress it */",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "mkstemp",
          "new_api": null,
          "old_text": "mkstemp(tmpfile)",
          "new_text": null,
          "old_line_content": "\tfd = mkstemp(tmpfile);",
          "new_line_content": "\tstream.avail_out = size;",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "new_line_content": "\t/* First header.. */",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(base_sha1, pack, 20)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(base_sha1, pack, 20);",
          "new_line_content": "\tcase OBJ_COMMIT:",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(pack, &base_ent, p)",
          "new_text": null,
          "old_line_content": "\t\t\tfind_pack_entry_one(pack, &base_ent, p);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, base_ent.offset,\n\t\t\t\t\t\t      &kind, &junk)",
          "new_text": null,
          "old_line_content": "\t\t\toffset = unpack_object_header(p, base_ent.offset,",
          "new_line_content": "\tcase OBJ_BLOB:",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "deflateInit",
          "new_api": null,
          "old_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "new_line_content": "\t/* Then the data itself.. */",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "deflateBound",
          "new_api": null,
          "old_text": "deflateBound(&stream, len+hdrlen)",
          "new_text": null,
          "old_line_content": "\tsize = deflateBound(&stream, len+hdrlen);",
          "new_line_content": "\tstream.next_in = buf;",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size)",
          "new_text": null,
          "old_line_content": "\tcompressed = xmalloc(size);",
          "new_line_content": "\tstream.avail_in = len;",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"commit\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tree\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tree\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "fstat",
          "new_api": null,
          "old_text": "fstat(fd, &st)",
          "new_text": null,
          "old_line_content": "\tif (fstat(fd, &st)) {",
          "new_line_content": "\tidx_size = st.st_size;",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"blob\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"blob\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "new_line_content": "int write_sha1_to_fd(int fd, const unsigned char *sha1)",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "mmap",
          "new_api": null,
          "old_text": "mmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\tidx_map = mmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tindex = idx_map;",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tag\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tag\");",
          "new_line_content": "\tunsigned char *pack;",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"corrupted pack file %s containing object of kind %d\",\n\t\t    p->pack_name, kind)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"corrupted pack file %s containing object of kind %d\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tdeflateEnd(&stream);",
          "new_line_content": "\tssize_t size;",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unable to write file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to write file\");",
          "new_line_content": "\tvoid *buf = map;",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "fchmod",
          "new_api": null,
          "old_text": "fchmod(fd, 0444)",
          "new_text": null,
          "old_line_content": "\tfchmod(fd, 0444);",
          "new_line_content": "\tvoid *temp_obj = NULL;",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tz_stream stream;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(compressed)",
          "new_text": null,
          "old_line_content": "\tfree(compressed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "move_temp_to_file",
          "new_api": null,
          "old_text": "move_temp_to_file(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "new_line_content": "\t\tunsigned char *unpacked;",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"index file too small\")",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"index file too small\");",
          "new_line_content": "\t\tif (n < nr)",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(index[i])",
          "new_text": null,
          "old_line_content": "\t\tunsigned int n = ntohl(index[i]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"non-monotonic index\")",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"non-monotonic index\");",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "use_packed_git",
          "new_api": null,
          "old_text": "use_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tif (use_packed_git(p))",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"cannot map packed file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"cannot map packed file\");",
          "new_line_content": "\tcase OBJ_TREE:",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "new_text": null,
          "old_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "packed_delta_info",
          "new_api": null,
          "old_text": "packed_delta_info(pack, size, left, type, sizep, p)",
          "new_text": null,
          "old_line_content": "\t\tretval = packed_delta_info(pack, size, left, type, sizep, p);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"wrong index file size\")",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"wrong index file size\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "unuse_packed_git",
          "new_api": null,
          "old_text": "unuse_packed_git(p)",
          "new_text": null,
          "old_line_content": "\t\tunuse_packed_git(p);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, type, &len)",
          "new_text": null,
          "old_line_content": "\t\tunpacked = read_packed_sha1(sha1, type, &len);",
          "new_line_content": "\t\t/* First header.. */",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"commit\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "new_text": null,
          "old_line_content": "\t\thdrlen = sprintf(hdr, \"%s %lu\", type, len) + 1;",
          "new_line_content": "\t\tstream.avail_in = hdrlen;",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&ctx)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&ctx);",
          "new_line_content": "\tfor (p = packed_git; p; p = p->next) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&ctx, idx_map, idx_size-20)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&ctx, idx_map, idx_size-20);",
          "new_line_content": "\t\tif (p->pack_use_cnt || !p->pack_base)",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(sha1, &ctx)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(sha1, &ctx);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(sha1, idx_map + idx_size - 20, 20)",
          "new_text": null,
          "old_line_content": "\tif (memcmp(sha1, idx_map + idx_size - 20, 20))",
          "new_line_content": "\t\t\tlru = p;",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"index checksum mismatch\")",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"index checksum mismatch\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"blob\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"blob\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tag\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tag\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "deflateInit",
          "new_api": null,
          "old_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\t\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "new_line_content": "\t\t/* Then the data itself.. */",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "deflateBound",
          "new_api": null,
          "old_text": "deflateBound(&stream, len + hdrlen)",
          "new_text": null,
          "old_line_content": "\t\tsize = deflateBound(&stream, len + hdrlen);",
          "new_line_content": "\t\tstream.next_in = unpacked;",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"corrupted pack file %s containing object of kind %d\",\n\t\t    p->pack_name, kind)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"corrupted pack file %s containing object of kind %d\",",
          "new_line_content": "\t\t\t\tunsigned long left,",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size)",
          "new_text": null,
          "old_line_content": "\t\ttemp_obj = buf = xmalloc(size);",
          "new_line_content": "\t\tstream.avail_in = len;",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\t\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "unuse_packed_git",
          "new_api": null,
          "old_text": "unuse_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tunuse_packed_git(p);",
          "new_line_content": "\tstruct pack_entry base_ent;",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\t\tdeflateEnd(&stream);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(lru->pack_base, lru->pack_size)",
          "new_text": null,
          "old_line_content": "\tmunmap(lru->pack_base, lru->pack_size);",
          "new_line_content": "\t\t// We created the struct before we had the pack",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(unpacked)",
          "new_text": null,
          "old_line_content": "\t\tfree(unpacked);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd, buf + posn, objsize - posn)",
          "new_text": null,
          "old_line_content": "\t\tsize = write(fd, buf + posn, objsize - posn);",
          "new_line_content": "\tif (temp_obj)",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"write closed\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, \"write closed\\n\");",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(\"write \")",
          "new_text": null,
          "old_line_content": "\t\t\t\tperror(\"write \");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "stat",
          "new_api": null,
          "old_text": "stat(p->pack_name, &st)",
          "new_text": null,
          "old_line_content": "\t\tstat(p->pack_name, &st);",
          "new_line_content": "\t\tif (fd < 0)",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(delta_size)",
          "new_text": null,
          "old_line_content": "\tdelta_data = xmalloc(delta_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, objsize)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(map, objsize);",
          "new_line_content": "\tunsigned char discard[4096];",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(temp_obj)",
          "new_text": null,
          "old_line_content": "\t\tfree(temp_obj);",
          "new_line_content": "\tSHA_CTX c;",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\t\t\t     delta_data, delta_size,",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(p->pack_name, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tfd = open(p->pack_name, O_RDONLY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t\t\t     &result_size);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s cannot be opened\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"packfile %s cannot be opened\", p->pack_name);",
          "new_line_content": "\t\t * this is cheap.",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "fstat",
          "new_api": null,
          "old_text": "fstat(fd, &st)",
          "new_text": null,
          "old_line_content": "\t\tif (fstat(fd, &st)) {",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s cannot be opened\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"packfile %s cannot be opened\", p->pack_name);",
          "new_line_content": "\t\t\t   p->pack_base + p->pack_size - 20, 20)) {",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "new_line_content": "\t*sizep = result_size;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "new_line_content": "\treturn result;",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s size mismatch.\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"packfile %s size mismatch.\", p->pack_name);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "mmap",
          "new_api": null,
          "old_text": "mmap(NULL, p->pack_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\t\tmap = mmap(NULL, p->pack_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\tp->pack_last_used = pack_used_ctr++;",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s cannot be mapped.\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"packfile %s cannot be mapped.\", p->pack_name);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "unpack_entry_gently",
          "new_api": null,
          "old_text": "unpack_entry_gently(&base_ent, type, &base_size)",
          "new_text": null,
          "old_line_content": "\tbase = unpack_entry_gently(&base_ent, type, &base_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to read delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to read delta-pack base object %s\",",
          "new_line_content": "\t\t\t\t    unsigned long size,",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "new_line_content": "\t\t\t\t    unsigned long left)",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "patch_delta",
          "new_api": null,
          "old_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     &result_size)",
          "new_text": null,
          "old_line_content": "\tresult = patch_delta(base, base_size,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to apply delta\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to apply delta\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp((char*)(p->index_base) + p->index_size - 40,\n\t\t\t   p->pack_base + p->pack_size - 20, 20)",
          "new_text": null,
          "old_line_content": "\t\tif (memcmp((char*)(p->index_base) + p->index_size - 40,",
          "new_line_content": "\tstruct packed_git *p;",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(base)",
          "new_text": null,
          "old_line_content": "\tfree(base);",
          "new_line_content": "\tbuffer[size] = 0;",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "mkstemp",
          "new_api": null,
          "old_text": "mkstemp(tmpfile)",
          "new_text": null,
          "old_line_content": "\tlocal = mkstemp(tmpfile);",
          "new_line_content": "\t\t\tstream.next_in = (unsigned char *) buffer;",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s does not match index.\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"packfile %s does not match index.\", p->pack_name);",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"Couldn't open %s for %s\\n\", tmpfile, sha1_to_hex(sha1));",
          "new_line_content": "\t\t\t\tstream.next_out = discard;",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\t\t\t\t\t    stream.avail_out);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "new_text": null,
          "old_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "new_line_content": "\t\t\tif (!size)",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size + 1)",
          "new_text": null,
          "old_line_content": "\tbuffer = xmalloc(size + 1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\treturn buffer;",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(local, buffer, *bufposn - stream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\t\twrite(local, buffer, *bufposn - stream.avail_in);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "check_packed_git_idx",
          "new_api": null,
          "old_text": "check_packed_git_idx(path, &idx_size, &idx_map)",
          "new_text": null,
          "old_line_content": "\tif (check_packed_git_idx(path, &idx_size, &idx_map))",
          "new_line_content": "\tp->index_size = idx_size;",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\tstruct packed_git *p = entry->p;",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\tvoid *retval;",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(path + path_len - 4, \".pack\")",
          "new_text": null,
          "old_line_content": "\tstrcpy(path + path_len - 4, \".pack\");",
          "new_line_content": "\tp->pack_base = NULL;",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(st.st_mode)",
          "new_text": null,
          "old_line_content": "\tif (stat(path, &st) || !S_ISREG(st.st_mode)) {",
          "new_line_content": "\tp->pack_last_used = 0;",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\tp->pack_use_cnt = 0;",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*p) + path_len + 2)",
          "new_text": null,
          "old_line_content": "\tp = xmalloc(sizeof(*p) + path_len + 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(p->pack_name, path)",
          "new_text": null,
          "old_line_content": "\tstrcpy(p->pack_name, path);",
          "new_line_content": "struct packed_git *parse_pack_index(unsigned char *sha1)",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "unpack_delta_entry",
          "new_api": null,
          "old_text": "unpack_delta_entry(pack, size, left, type, sizep, p)",
          "new_text": null,
          "old_line_content": "\t\tretval = unpack_delta_entry(pack, size, left, type, sizep, p);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(local)",
          "new_text": null,
          "old_line_content": "\tclose(local);",
          "new_line_content": "int has_pack_index(const unsigned char *sha1)",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(real_sha1, &c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(real_sha1, &c);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "use_packed_git",
          "new_api": null,
          "old_text": "use_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tif (use_packed_git(p))",
          "new_line_content": "\tunsigned long offset, size, left;",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"cannot map packed file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"cannot map packed file\");",
          "new_line_content": "\tunsigned char *pack;",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "unpack_entry_gently",
          "new_api": null,
          "old_text": "unpack_entry_gently(entry, type, sizep)",
          "new_text": null,
          "old_line_content": "\tretval = unpack_entry_gently(entry, type, sizep);",
          "new_line_content": "\tenum object_type kind;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(path + path_len - 44, sha1)",
          "new_text": null,
          "old_line_content": "\tif ((path_len > 44) && !get_sha1_hex(path + path_len - 44, sha1))",
          "new_line_content": "\tunsigned long idx_size;",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(p->sha1, sha1, 20);",
          "new_line_content": "\tvoid *idx_map;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "unuse_packed_git",
          "new_api": null,
          "old_text": "unuse_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tunuse_packed_git(p);",
          "new_line_content": "\tvoid *retval;",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(sha1, real_sha1, 20)",
          "new_text": null,
          "old_line_content": "\tif (memcmp(sha1, real_sha1, 20)) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"File %s has bad hash\\n\", sha1_to_hex(sha1));",
          "new_line_content": "int has_pack_file(const unsigned char *sha1)",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "parse_pack_index_file",
          "new_api": null,
          "old_text": "parse_pack_index_file(sha1, path)",
          "new_text": null,
          "old_line_content": "\treturn parse_pack_index_file(sha1, path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "sha1_pack_index_name",
          "new_api": null,
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tpath = sha1_pack_name(sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(path)",
          "new_text": null,
          "old_line_content": "\tp = xmalloc(sizeof(*p) + strlen(path) + 2);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(p->pack_name, path)",
          "new_text": null,
          "old_line_content": "\tstrcpy(p->pack_name, path);",
          "new_line_content": "\tpack->next = packed_git;",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tree\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tree\");",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 56,
      "total_additions": 233,
      "total_deletions": 238,
      "total_api_changes": 527
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 16,
        "api_related_lines": 527,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          324,
          325,
          330,
          371,
          372,
          373,
          377,
          380
        ]
      }
    },
    "api_calls_before": 360,
    "api_calls_after": 355,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 15,
      "total_diff_lines": 40
    }
  }
}
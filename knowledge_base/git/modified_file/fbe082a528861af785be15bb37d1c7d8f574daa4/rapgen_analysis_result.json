{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbe082a528861af785be15bb37d1c7d8f574daa4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbe082a528861af785be15bb37d1c7d8f574daa4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbe082a528861af785be15bb37d1c7d8f574daa4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fbe082a528861af785be15bb37d1c7d8f574daa4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 277,
          "old_api": "strchr",
          "new_api": "printf",
          "old_text": "strchr(cp, '\\n')",
          "new_text": "printf(\"%.*s%c\", ep-cp, cp, 0)",
          "old_line_content": "\t\t\t\tep = strchr(cp, '\\n');",
          "new_line_content": "\t\t\t\tprintf(\"%.*s%c\", ep-cp, cp, 0);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "call_diff_setup",
          "new_api": "call_diff_flush",
          "old_text": "call_diff_setup()",
          "new_text": "call_diff_flush()",
          "old_line_content": "\tcall_diff_setup();",
          "new_line_content": "\tcall_diff_flush();",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "read_object_with_reference",
          "new_api": "sha1_to_hex",
          "old_text": "read_object_with_reference(new, \"tree\", &size, NULL)",
          "new_text": "sha1_to_hex(new)",
          "old_line_content": "\ttree = read_object_with_reference(new, \"tree\", &size, NULL);",
          "new_line_content": "\t\tdie(\"unable to read root tree (%s)\", sha1_to_hex(new));",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "sha1_to_hex",
          "new_api": "free",
          "old_text": "sha1_to_hex(new)",
          "new_text": "free(tree)",
          "old_line_content": "\t\tdie(\"unable to read root tree (%s)\", sha1_to_hex(new));",
          "new_line_content": "\tfree(tree);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "diff_tree",
          "new_api": "call_diff_flush",
          "old_text": "diff_tree(\"\", 0, tree, size, base)",
          "new_text": "call_diff_flush()",
          "old_line_content": "\tretval = diff_tree(\"\", 0, tree, size, base);",
          "new_line_content": "\tcall_diff_flush();",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "strtol",
          "new_api": "sprintf",
          "old_text": "strtol(date, NULL, 10)",
          "new_text": "sprintf(buf, \"Author: %.*s\\nDate:   %s\\n\",\n\t\tnamelen, line,\n\t\tshow_date(time, tz))",
          "old_line_content": "\ttz = strtol(date, NULL, 10);",
          "new_line_content": "\treturn sprintf(buf, \"Author: %.*s\\nDate:   %s\\n\",",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "sprintf",
          "new_api": "show_date",
          "old_text": "sprintf(buf, \"Author: %.*s\\nDate:   %s\\n\",\n\t\tnamelen, line,\n\t\tshow_date(time, tz))",
          "new_text": "show_date(time, tz)",
          "old_line_content": "\treturn sprintf(buf, \"Author: %.*s\\nDate:   %s\\n\",",
          "new_line_content": "\t\tshow_date(time, tz));",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "memcmp",
          "new_api": "diff_root_tree",
          "old_text": "memcmp(buf + 46, \"parent \", 7)",
          "new_text": "diff_root_tree(commit, \"\")",
          "old_line_content": "\tif (show_root_diff && memcmp(buf + 46, \"parent \", 7)) {",
          "new_line_content": "\t\tdiff_root_tree(commit, \"\");",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "memcmp",
          "new_api": "get_sha1_hex",
          "old_text": "memcmp(buf + offset, \"parent \", 7)",
          "new_text": "get_sha1_hex(buf + offset + 7, parent)",
          "old_line_content": "\twhile (offset + 48 < size && !memcmp(buf + offset, \"parent \", 7)) {",
          "new_line_content": "\t\tif (get_sha1_hex(buf + offset + 7, parent))",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "get_sha1_hex",
          "new_api": "sha1_to_hex",
          "old_text": "get_sha1_hex(buf + offset + 7, parent)",
          "new_text": "sha1_to_hex(parent)",
          "old_line_content": "\t\tif (get_sha1_hex(buf + offset + 7, parent))",
          "new_line_content": "\t\theader = generate_header(name, sha1_to_hex(parent), buf, size);",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "sprintf",
          "new_api": "diff_tree_sha1_top",
          "old_text": "sprintf(this_header, \"%s (from %s)\\n\", line, line+41)",
          "new_text": "diff_tree_sha1_top(parent, commit, \"\")",
          "old_line_content": "\t\tsprintf(this_header, \"%s (from %s)\\n\", line, line+41);",
          "new_line_content": "\t\treturn diff_tree_sha1_top(parent, commit, \"\");",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "strncmp",
          "new_api": "diff_scoreopt_parse",
          "old_text": "strncmp(arg, \"-M\", 2)",
          "new_text": "diff_scoreopt_parse(arg)",
          "old_line_content": "\t\tif (!strncmp(arg, \"-M\", 2)) {",
          "new_line_content": "\t\t\tdiff_score_opt = diff_scoreopt_parse(arg);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "strncmp",
          "new_api": "diff_scoreopt_parse",
          "old_text": "strncmp(arg, \"-C\", 2)",
          "new_text": "diff_scoreopt_parse(arg)",
          "old_line_content": "\t\tif (!strncmp(arg, \"-C\", 2)) {",
          "new_line_content": "\t\t\tdiff_score_opt = diff_scoreopt_parse(arg);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "xmalloc",
          "new_api": "strlen",
          "old_text": "xmalloc(nr_paths * sizeof(int))",
          "new_text": "strlen(paths[i])",
          "old_line_content": "\t\tpathlens = xmalloc(nr_paths * sizeof(int));",
          "new_line_content": "\t\t\tpathlens[i] = strlen(paths[i]);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 384,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(this_header + offset, ' ', 4)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\tmemset(this_header + offset, ' ', 4);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(this_header + offset + 4, line, linelen)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tmemcpy(this_header + offset + 4, line, linelen);",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(arg, \"-S\", 2)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strncmp(arg, \"-S\", 2)) {",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(arg, \"-M\", 2)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strncmp(arg, \"-M\", 2)) {",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(arg, \"-C\", 2)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strncmp(arg, \"-C\", 2)) {",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-z\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-z\")) {",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "read_object_with_reference",
          "old_text": null,
          "new_text": "read_object_with_reference(commit, \"commit\", &size, NULL)",
          "old_line_content": "{",
          "new_line_content": "\tchar *buf = read_object_with_reference(commit, \"commit\", &size, NULL);",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(cp, '\\n')",
          "old_line_content": "\t\t\tconst char *ep, *cp;",
          "new_line_content": "\t\t\t\tep = strchr(cp, '\\n');",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cp)",
          "old_line_content": "\t\t\tfor (cp = header; *cp; cp = ep) {",
          "new_line_content": "\t\t\t\tif (ep == 0) ep = cp + strlen(cp);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-m\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-m\")) {",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-s\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-s\")) {",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s\", header)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tprintf(\"%s\", header);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(commit)",
          "old_line_content": "\tif (!name) {",
          "new_line_content": "\t\tstrcpy(commit_name, sha1_to_hex(commit));",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-v\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-v\")) {",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "diff_flush",
          "old_text": null,
          "new_text": "diff_flush(diff_output_format, 1)",
          "old_line_content": "\t\theader = NULL;",
          "new_line_content": "\tdiff_flush(diff_output_format, 1);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buf + 46, \"parent \", 7)",
          "old_line_content": "",
          "new_line_content": "\tif (show_root_diff && memcmp(buf + 46, \"parent \", 7)) {",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "generate_header",
          "old_text": null,
          "new_text": "generate_header(name, \"root\", buf, size)",
          "old_line_content": "\t/* Root commit? */",
          "new_line_content": "\t\theader = generate_header(name, \"root\", buf, size);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"--stdin\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"--stdin\")) {",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buf + 46 + 48, \"parent \", 7)",
          "old_line_content": "\t/* More than one parent? */",
          "new_line_content": "\t\tif (!memcmp(buf + 46 + 48, \"parent \", 7))",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"--root\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"--root\")) {",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "call_diff_setup",
          "old_text": null,
          "new_text": "call_diff_setup()",
          "old_line_content": "\tint ret;",
          "new_line_content": "\tcall_diff_setup();",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "diff_tree_sha1",
          "old_text": null,
          "new_text": "diff_tree_sha1(old, new, base)",
          "old_line_content": "",
          "new_line_content": "\tret = diff_tree_sha1(old, new, base);",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(diff_tree_usage)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tusage(diff_tree_usage);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(buf + offset, \"parent \", 7)",
          "old_line_content": "",
          "new_line_content": "\twhile (offset + 48 < size && !memcmp(buf + offset, \"parent \", 7)) {",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "diff_tree_sha1_top",
          "old_text": null,
          "new_text": "diff_tree_sha1_top(parent, commit, \"\")",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\tdiff_tree_sha1_top(parent, commit, \"\");",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(nr_paths * sizeof(int))",
          "old_line_content": "\t\tpaths = argv;",
          "new_line_content": "\t\tpathlens = xmalloc(nr_paths * sizeof(int));",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": "call_diff_setup",
          "old_text": null,
          "new_text": "call_diff_setup()",
          "old_line_content": "\tunsigned long size;",
          "new_line_content": "\tcall_diff_setup();",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "read_object_with_reference",
          "old_text": null,
          "new_text": "read_object_with_reference(new, \"tree\", &size, NULL)",
          "old_line_content": "",
          "new_line_content": "\ttree = read_object_with_reference(new, \"tree\", &size, NULL);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "diff_tree",
          "old_text": null,
          "new_text": "diff_tree(\"\", 0, tree, size, base)",
          "old_line_content": "\tif (!tree)",
          "new_line_content": "\tretval = diff_tree(\"\", 0, tree, size, base);",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(diff_tree_usage)",
          "old_line_content": "\tcase 0:",
          "new_line_content": "\t\t\tusage(diff_tree_usage);",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "diff_tree_commit",
          "old_text": null,
          "new_text": "diff_tree_commit(sha1[0], NULL)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tdiff_tree_commit(sha1[0], NULL);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(line)",
          "old_line_content": "static int diff_tree_stdin(char *line)",
          "new_line_content": "\tint len = strlen(line);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "diff_tree_sha1_top",
          "old_text": null,
          "new_text": "diff_tree_sha1_top(sha1[0], sha1[1], \"\")",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tdiff_tree_sha1_top(sha1[0], sha1[1], \"\");",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(line, commit)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tif (get_sha1_hex(line, commit))",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(line, sizeof(line), stdin)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\twhile (fgets(line, sizeof(line), stdin))",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "diff_tree_stdin",
          "old_text": null,
          "new_text": "diff_tree_stdin(line)",
          "old_line_content": "",
          "new_line_content": "\t\tdiff_tree_stdin(line);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(this_header, \"%s (from %s)\\n\", line, line+41)",
          "old_line_content": "\t\tline[40] = 0;",
          "new_line_content": "\t\tsprintf(this_header, \"%s (from %s)\\n\", line, line+41);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "diff_tree_commit",
          "old_text": null,
          "new_text": "diff_tree_commit(commit, line)",
          "old_line_content": "\t}",
          "new_line_content": "\treturn diff_tree_commit(commit, line);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"author \")",
          "old_line_content": "\tint tz;",
          "new_line_content": "\tline += strlen(\"author \");",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(line, '>')",
          "old_line_content": "",
          "new_line_content": "\tdate = strchr(line, '>');",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(date, &date, 10)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\ttime = strtoul(date, &date, 10);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(date, NULL, 10)",
          "old_line_content": "\tnamelen = ++date - line;",
          "new_line_content": "\ttz = strtol(date, NULL, 10);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(this_header, \"%s%s (from %s)\\n\", header_prefix, commit, parent)",
          "old_line_content": "\tint offset;",
          "new_line_content": "\toffset = sprintf(this_header, \"%s%s (from %s)\\n\", header_prefix, commit, parent);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "get_sha1",
          "old_text": null,
          "new_text": "get_sha1(arg, sha1[nr_sha1])",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (nr_sha1 < 2 && !get_sha1(arg, sha1[nr_sha1])) {",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "get_one_line",
          "old_text": null,
          "new_text": "get_one_line(msg, len)",
          "old_line_content": "\t\tfor (;;) {",
          "new_line_content": "\t\t\tint linelen = get_one_line(msg, len);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"--\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!strcmp(arg, \"--\")) {",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(this_header + offset, \"    ...\\n\", 8)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\t\t\t\tmemcpy(this_header + offset, \"    ...\\n\", 8);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-r\")",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-r\")) {",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-t\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-t\")) {",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-R\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-R\")) {",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(line, \"author \", 7)",
          "old_line_content": "\t\t\t\thdr = 0;",
          "new_line_content": "\t\t\t\tif (!memcmp(line, \"author \", 7))",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "add_author_info",
          "old_text": null,
          "new_text": "add_author_info(this_header + offset, line, linelen)",
          "old_line_content": "\t\t\tif (hdr) {",
          "new_line_content": "\t\t\t\t\toffset += add_author_info(this_header + offset, line, linelen);",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg, \"-p\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(arg, \"-p\")) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-p\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-p\")) {",
          "new_line_content": "\t\t\trecursive = 1;",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(this_header + offset, ' ', 4)",
          "new_text": null,
          "old_line_content": "\t\t\tmemset(this_header + offset, ' ', 4);",
          "new_line_content": "\t\t\toffset += linelen + 4;",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(this_header + offset + 4, line, linelen)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(this_header + offset + 4, line, linelen);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(arg, \"-S\", 2)",
          "new_text": null,
          "old_line_content": "\t\tif (!strncmp(arg, \"-S\", 2)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "diff_scoreopt_parse",
          "new_api": null,
          "old_text": "diff_scoreopt_parse(arg)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_score_opt = diff_scoreopt_parse(arg);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "diff_scoreopt_parse",
          "new_api": null,
          "old_text": "diff_scoreopt_parse(arg)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_score_opt = diff_scoreopt_parse(arg);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "diffcore_pathspec",
          "new_api": null,
          "old_text": "diffcore_pathspec(paths)",
          "new_text": null,
          "old_line_content": "\t\tdiffcore_pathspec(paths);",
          "new_line_content": "\t\tif (diff_output_format == DIFF_FORMAT_MACHINE) {",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-z\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-z\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "read_object_with_reference",
          "new_api": null,
          "old_text": "read_object_with_reference(commit, \"commit\", &size, NULL)",
          "new_text": null,
          "old_line_content": "\tchar *buf = read_object_with_reference(commit, \"commit\", &size, NULL);",
          "new_line_content": "\tif (!buf)",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cp)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (ep == 0) ep = cp + strlen(cp);",
          "new_line_content": "\t\t\t\tif (*ep) ep++;",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-m\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-m\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%.*s%c\", ep-cp, cp, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprintf(\"%.*s%c\", ep-cp, cp, 0);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-s\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-s\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s\", header)",
          "new_text": null,
          "old_line_content": "\t\t\tprintf(\"%s\", header);",
          "new_line_content": "\t\theader = NULL;",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(commit)",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(commit_name, sha1_to_hex(commit));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-v\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-v\")) {",
          "new_line_content": "\t\t\theader_prefix = \"diff-tree \";",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "diff_flush",
          "new_api": null,
          "old_text": "diff_flush(diff_output_format, 1)",
          "new_text": null,
          "old_line_content": "\tdiff_flush(diff_output_format, 1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "generate_header",
          "new_api": null,
          "old_text": "generate_header(name, \"root\", buf, size)",
          "new_text": null,
          "old_line_content": "\t\theader = generate_header(name, \"root\", buf, size);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "diff_root_tree",
          "new_api": null,
          "old_text": "diff_root_tree(commit, \"\")",
          "new_text": null,
          "old_line_content": "\t\tdiff_root_tree(commit, \"\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"--stdin\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"--stdin\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buf + 46 + 48, \"parent \", 7)",
          "new_text": null,
          "old_line_content": "\t\tif (!memcmp(buf + 46 + 48, \"parent \", 7))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"--root\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"--root\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "diff_tree_sha1",
          "new_api": null,
          "old_text": "diff_tree_sha1(old, new, base)",
          "new_text": null,
          "old_line_content": "\tret = diff_tree_sha1(old, new, base);",
          "new_line_content": "\treturn ret;",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "call_diff_flush",
          "new_api": null,
          "old_text": "call_diff_flush()",
          "new_text": null,
          "old_line_content": "\tcall_diff_flush();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(diff_tree_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(diff_tree_usage);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(parent)",
          "new_text": null,
          "old_line_content": "\t\theader = generate_header(name, sha1_to_hex(parent), buf, size);",
          "new_line_content": "\t\tif (!header && verbose_header) {",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "diff_tree_sha1_top",
          "new_api": null,
          "old_text": "diff_tree_sha1_top(parent, commit, \"\")",
          "new_text": null,
          "old_line_content": "\t\tdiff_tree_sha1_top(parent, commit, \"\");",
          "new_line_content": "\t\t\theader_prefix = \"\\ndiff-tree \";",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "call_diff_setup",
          "new_api": null,
          "old_text": "call_diff_setup()",
          "new_text": null,
          "old_line_content": "\tcall_diff_setup();",
          "new_line_content": "\tif (!tree)",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(paths[i])",
          "new_text": null,
          "old_line_content": "\t\t\tpathlens[i] = strlen(paths[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(tree)",
          "new_text": null,
          "old_line_content": "\tfree(tree);",
          "new_line_content": "\treturn retval;",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "call_diff_flush",
          "new_api": null,
          "old_text": "call_diff_flush()",
          "new_text": null,
          "old_line_content": "\tcall_diff_flush();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(diff_tree_usage)",
          "new_text": null,
          "old_line_content": "\t\t\tusage(diff_tree_usage);",
          "new_line_content": "\tcase 1:",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "diff_tree_commit",
          "new_api": null,
          "old_text": "diff_tree_commit(sha1[0], NULL)",
          "new_text": null,
          "old_line_content": "\t\tdiff_tree_commit(sha1[0], NULL);",
          "new_line_content": "\tcase 2:",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(line)",
          "new_text": null,
          "old_line_content": "\tint len = strlen(line);",
          "new_line_content": "\tstatic char this_header[1000];",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "diff_tree_sha1_top",
          "new_api": null,
          "old_text": "diff_tree_sha1_top(sha1[0], sha1[1], \"\")",
          "new_text": null,
          "old_line_content": "\t\tdiff_tree_sha1_top(sha1[0], sha1[1], \"\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(line, sizeof(line), stdin)",
          "new_text": null,
          "old_line_content": "\twhile (fgets(line, sizeof(line), stdin))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "diff_tree_stdin",
          "new_api": null,
          "old_text": "diff_tree_stdin(line)",
          "new_text": null,
          "old_line_content": "\t\tdiff_tree_stdin(line);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(line+41, parent)",
          "new_text": null,
          "old_line_content": "\tif (isspace(line[40]) && !get_sha1_hex(line+41, parent)) {",
          "new_line_content": "\t\tline[81] = 0;",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "diff_tree_sha1_top",
          "new_api": null,
          "old_text": "diff_tree_sha1_top(parent, commit, \"\")",
          "new_text": null,
          "old_line_content": "\t\treturn diff_tree_sha1_top(parent, commit, \"\");",
          "new_line_content": "\tline[40] = 0;",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "diff_tree_commit",
          "new_api": null,
          "old_text": "diff_tree_commit(commit, line)",
          "new_text": null,
          "old_line_content": "\treturn diff_tree_commit(commit, line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\"author \")",
          "new_text": null,
          "old_line_content": "\tline += strlen(\"author \");",
          "new_line_content": "\tif (!date)",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(line, '>')",
          "new_text": null,
          "old_line_content": "\tdate = strchr(line, '>');",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(date, &date, 10)",
          "new_text": null,
          "old_line_content": "\ttime = strtoul(date, &date, 10);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "show_date",
          "new_api": null,
          "old_text": "show_date(time, tz)",
          "new_text": null,
          "old_line_content": "\t\tshow_date(time, tz));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(this_header, \"%s%s (from %s)\\n\", header_prefix, commit, parent)",
          "new_text": null,
          "old_line_content": "\toffset = sprintf(this_header, \"%s%s (from %s)\\n\", header_prefix, commit, parent);",
          "new_line_content": "\t\tint hdr = 1;",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "get_sha1",
          "new_api": null,
          "old_text": "get_sha1(arg, sha1[nr_sha1])",
          "new_text": null,
          "old_line_content": "\t\t\tif (nr_sha1 < 2 && !get_sha1(arg, sha1[nr_sha1])) {",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "get_one_line",
          "new_api": null,
          "old_text": "get_one_line(msg, len)",
          "new_text": null,
          "old_line_content": "\t\t\tint linelen = get_one_line(msg, len);",
          "new_line_content": "\t\t\tif (!linelen)",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"--\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"--\")) {",
          "new_line_content": "\t\t\targc--;",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(this_header + offset, \"    ...\\n\", 8)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(this_header + offset, \"    ...\\n\", 8);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-r\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-r\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-t\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-t\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg, \"-R\")",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(arg, \"-R\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(line, \"author \", 7)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!memcmp(line, \"author \", 7))",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "add_author_info",
          "new_api": null,
          "old_text": "add_author_info(this_header + offset, line, linelen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\toffset += add_author_info(this_header + offset, line, linelen);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 14,
      "total_additions": 53,
      "total_deletions": 54,
      "total_api_changes": 121
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 121,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          271
        ]
      }
    },
    "api_calls_before": 151,
    "api_calls_after": 150,
    "diff_info": {
      "added_lines": 0,
      "removed_lines": 2,
      "total_diff_lines": 14
    }
  }
}
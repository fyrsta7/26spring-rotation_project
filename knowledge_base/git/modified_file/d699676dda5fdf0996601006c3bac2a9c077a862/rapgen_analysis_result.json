{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/d699676dda5fdf0996601006c3bac2a9c077a862",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/d699676dda5fdf0996601006c3bac2a9c077a862/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/d699676dda5fdf0996601006c3bac2a9c077a862/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/d699676dda5fdf0996601006c3bac2a9c077a862/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 848,
          "old_api": "same",
          "new_api": "keep_entry",
          "old_text": "same(current, newtree)",
          "new_text": "keep_entry(current, o)",
          "old_line_content": "\t\t     same(current, newtree))) {",
          "new_line_content": "\t\t\treturn keep_entry(current, o);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "deleted_entry",
          "new_api": "remove_entry",
          "old_text": "deleted_entry(oldtree, current, o)",
          "new_text": "remove_entry(remove)",
          "old_line_content": "\t\treturn deleted_entry(oldtree, current, o);",
          "new_line_content": "\tremove_entry(remove);",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "deleted_entry",
          "new_api": "remove_entry",
          "old_text": "deleted_entry(old, old, o)",
          "new_text": "remove_entry(remove)",
          "old_line_content": "\t\treturn deleted_entry(old, old, o);",
          "new_line_content": "\t\tremove_entry(remove);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "ce_match_stat",
          "new_api": "lstat",
          "old_text": "ce_match_stat(old, &st, 1)",
          "new_text": "lstat(old->name, &st)",
          "old_line_content": "\t\t\t    ce_match_stat(old, &st, 1))",
          "new_line_content": "\t\t\tif (lstat(old->name, &st) ||",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "htons",
          "new_api": "ce_match_stat",
          "old_text": "htons(CE_UPDATE)",
          "new_text": "ce_match_stat(old, &st, 1)",
          "old_line_content": "\t\t\t\told->ce_flags |= htons(CE_UPDATE);",
          "new_line_content": "\t\t\t    ce_match_stat(old, &st, 1))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 897,
          "old_api": null,
          "new_api": "keep_entry",
          "old_text": null,
          "new_text": "keep_entry(old, o)",
          "old_line_content": "\telse",
          "new_line_content": "\t\treturn keep_entry(old, o);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "merged_entry",
          "old_text": null,
          "new_text": "merged_entry(a, NULL, o)",
          "old_line_content": "}",
          "new_line_content": "\t\treturn merged_entry(a, NULL, o);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Cannot do a oneway merge of %d trees\",\n\t\t\t     o->merge_size)",
          "old_line_content": "\t\t\t     o->merge_size);",
          "new_line_content": "\t\treturn error(\"Cannot do a oneway merge of %d trees\",",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "deleted_entry",
          "old_text": null,
          "new_text": "deleted_entry(old, old, o)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn deleted_entry(old, old, o);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "same",
          "old_text": null,
          "new_text": "same(old, a)",
          "old_line_content": "\t\tif (o->reset) {",
          "new_line_content": "\tif (old && same(old, a)) {",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "htons",
          "old_text": null,
          "new_text": "htons(CE_UPDATE)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\told->ce_flags |= htons(CE_UPDATE);",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "keep_entry",
          "old_text": null,
          "new_text": "keep_entry(old, o)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn keep_entry(old, o);",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "merged_entry",
          "old_text": null,
          "new_text": "merged_entry(a, old, o)",
          "old_line_content": "}",
          "new_line_content": "\treturn merged_entry(a, old, o);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Cannot do a twoway merge of %d trees\",\n\t\t\t     o->merge_size)",
          "old_line_content": "\tif (o->merge_size != 2)",
          "new_line_content": "\t\treturn error(\"Cannot do a twoway merge of %d trees\",",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "same",
          "old_text": null,
          "new_text": "same(current, newtree)",
          "old_line_content": "\t\t    (!oldtree && newtree &&",
          "new_line_content": "\t\t     same(current, newtree)) || /* 6 and 7 */",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "same",
          "old_text": null,
          "new_text": "same(oldtree, newtree)",
          "old_line_content": "\t\t    (oldtree && newtree &&",
          "new_line_content": "\t\t     same(oldtree, newtree)) || /* 14 and 15 */",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "same",
          "old_text": null,
          "new_text": "same(oldtree, newtree)",
          "old_line_content": "\t\t    (oldtree && newtree &&",
          "new_line_content": "\t\t     !same(oldtree, newtree) && /* 18 and 19 */",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "same",
          "old_text": null,
          "new_text": "same(current, oldtree)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\telse if (oldtree && !newtree && same(current, oldtree)) {",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "remove_entry",
          "old_text": null,
          "new_text": "remove_entry(remove)",
          "old_line_content": "\t\t\t/* 10 or 11 */",
          "new_line_content": "\t\t\tremove_entry(remove);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "remove_entry",
          "old_text": null,
          "new_text": "remove_entry(remove)",
          "old_line_content": "\t\t\tif (oldtree)",
          "new_line_content": "\t\t\tremove_entry(remove);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": null,
          "new_api": "reject_merge",
          "old_text": null,
          "new_text": "reject_merge(oldtree)",
          "old_line_content": "\t\t\tif (current)",
          "new_line_content": "\t\t\t\treject_merge(oldtree);",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "reject_merge",
          "old_text": null,
          "new_text": "reject_merge(current)",
          "old_line_content": "\t\t\tif (newtree)",
          "new_line_content": "\t\t\t\treject_merge(current);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "reject_merge",
          "old_text": null,
          "new_text": "reject_merge(newtree)",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\t\t\treject_merge(newtree);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "merged_entry",
          "old_text": null,
          "new_text": "merged_entry(newtree, current, o)",
          "old_line_content": "\telse",
          "new_line_content": "\t\treturn merged_entry(newtree, current, o);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "deleted_entry",
          "old_text": null,
          "new_text": "deleted_entry(oldtree, current, o)",
          "old_line_content": "}",
          "new_line_content": "\treturn deleted_entry(oldtree, current, o);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Cannot do a bind merge of %d trees\\n\",\n\t\t\t     o->merge_size)",
          "old_line_content": "\t\t\t     o->merge_size);",
          "new_line_content": "\t\treturn error(\"Cannot do a bind merge of %d trees\\n\",",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Entry '%s' overlaps.  Cannot bind.\", a->name)",
          "old_line_content": "\tif (!a)",
          "new_line_content": "\t\tdie(\"Entry '%s' overlaps.  Cannot bind.\", a->name);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 896,
          "old_api": "keep_entry",
          "new_api": null,
          "old_text": "keep_entry(old, o)",
          "new_text": null,
          "old_line_content": "\t\treturn keep_entry(old, o);",
          "new_line_content": "\tif (!a)",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "merged_entry",
          "new_api": null,
          "old_text": "merged_entry(a, NULL, o)",
          "new_text": null,
          "old_line_content": "\t\treturn merged_entry(a, NULL, o);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot do a oneway merge of %d trees\",\n\t\t\t     o->merge_size)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"Cannot do a oneway merge of %d trees\",",
          "new_line_content": "\tif (o->merge_size != 1)",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "remove_entry",
          "new_api": null,
          "old_text": "remove_entry(remove)",
          "new_text": null,
          "old_line_content": "\t\tremove_entry(remove);",
          "new_line_content": "\tif (!a) {",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "same",
          "new_api": null,
          "old_text": "same(old, a)",
          "new_text": null,
          "old_line_content": "\tif (old && same(old, a)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "lstat",
          "new_api": null,
          "old_text": "lstat(old->name, &st)",
          "new_text": null,
          "old_line_content": "\t\t\tif (lstat(old->name, &st) ||",
          "new_line_content": "\t\t\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "keep_entry",
          "new_api": null,
          "old_text": "keep_entry(old, o)",
          "new_text": null,
          "old_line_content": "\t\treturn keep_entry(old, o);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": "merged_entry",
          "new_api": null,
          "old_text": "merged_entry(a, old, o)",
          "new_text": null,
          "old_line_content": "\treturn merged_entry(a, old, o);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "remove_entry",
          "new_api": null,
          "old_text": "remove_entry(remove)",
          "new_text": null,
          "old_line_content": "\tremove_entry(remove);",
          "new_line_content": "\tif (o->merge_size != 2)",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot do a twoway merge of %d trees\",\n\t\t\t     o->merge_size)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"Cannot do a twoway merge of %d trees\",",
          "new_line_content": "\t\t\t     o->merge_size);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "same",
          "new_api": null,
          "old_text": "same(current, newtree)",
          "new_text": null,
          "old_line_content": "\t\t     same(current, newtree)) || /* 6 and 7 */",
          "new_line_content": "\t\t    (oldtree && newtree &&",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "same",
          "new_api": null,
          "old_text": "same(oldtree, newtree)",
          "new_text": null,
          "old_line_content": "\t\t     same(oldtree, newtree)) || /* 14 and 15 */",
          "new_line_content": "\t\t    (oldtree && newtree &&",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "keep_entry",
          "new_api": null,
          "old_text": "keep_entry(current, o)",
          "new_text": null,
          "old_line_content": "\t\t\treturn keep_entry(current, o);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "same",
          "new_api": null,
          "old_text": "same(current, oldtree)",
          "new_text": null,
          "old_line_content": "\t\telse if (oldtree && !newtree && same(current, oldtree)) {",
          "new_line_content": "\t\t\t/* 10 or 11 */",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "reject_merge",
          "new_api": null,
          "old_text": "reject_merge(oldtree)",
          "new_text": null,
          "old_line_content": "\t\t\t\treject_merge(oldtree);",
          "new_line_content": "\t\t\tif (oldtree)",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "reject_merge",
          "new_api": null,
          "old_text": "reject_merge(current)",
          "new_text": null,
          "old_line_content": "\t\t\t\treject_merge(current);",
          "new_line_content": "\t\t\tif (current)",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "reject_merge",
          "new_api": null,
          "old_text": "reject_merge(newtree)",
          "new_text": null,
          "old_line_content": "\t\t\t\treject_merge(newtree);",
          "new_line_content": "\t\t\tif (newtree)",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "merged_entry",
          "new_api": null,
          "old_text": "merged_entry(newtree, current, o)",
          "new_text": null,
          "old_line_content": "\t\treturn merged_entry(newtree, current, o);",
          "new_line_content": "\telse if (newtree)",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot do a bind merge of %d trees\\n\",\n\t\t\t     o->merge_size)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"Cannot do a bind merge of %d trees\\n\",",
          "new_line_content": "\tif (o->merge_size != 1)",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Entry '%s' overlaps.  Cannot bind.\", a->name)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"Entry '%s' overlaps.  Cannot bind.\", a->name);",
          "new_line_content": "\tif (a && old)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 5,
      "total_additions": 22,
      "total_deletions": 20,
      "total_api_changes": 47
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 47,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 175,
    "api_calls_after": 177,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 3,
      "total_diff_lines": 40
    }
  }
}
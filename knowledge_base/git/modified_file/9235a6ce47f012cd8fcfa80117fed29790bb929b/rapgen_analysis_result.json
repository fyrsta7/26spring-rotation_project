{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9235a6ce47f012cd8fcfa80117fed29790bb929b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9235a6ce47f012cd8fcfa80117fed29790bb929b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9235a6ce47f012cd8fcfa80117fed29790bb929b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/9235a6ce47f012cd8fcfa80117fed29790bb929b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 457,
          "old_api": "parse_pathspec",
          "new_api": "read_cache_preload",
          "old_text": "parse_pathspec(&pathspec, PATHSPEC_ATTR,\n\t\t       PATHSPEC_PREFER_FULL |\n\t\t       PATHSPEC_SYMLINK_LEADING_PATH,\n\t\t       prefix, argv)",
          "new_text": "read_cache_preload(&pathspec)",
          "old_line_content": "\tparse_pathspec(&pathspec, PATHSPEC_ATTR,",
          "new_line_content": "\tif (read_cache_preload(&pathspec) < 0)",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "is_excluded",
          "new_api": "dir_add_ignored",
          "old_text": "is_excluded(&dir, &the_index, path, &dtype)",
          "new_text": "dir_add_ignored(&dir, &the_index,\n\t\t\t\t\t\t\t\tpath, pathspec.items[i].len)",
          "old_line_content": "\t\t\t\t\tif (is_excluded(&dir, &the_index, path, &dtype))",
          "new_line_content": "\t\t\t\t\t\tdir_add_ignored(&dir, &the_index,",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "chmod_pathspec",
          "new_api": "unplug_bulk_checkin",
          "old_text": "chmod_pathspec(&pathspec, chmod_arg[0])",
          "new_text": "unplug_bulk_checkin()",
          "old_line_content": "\t\tchmod_pathspec(&pathspec, chmod_arg[0]);",
          "new_line_content": "\tunplug_bulk_checkin();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 514,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"pathspec '%s' did not match any files\")",
          "old_line_content": "\t\t\t\t} else",
          "new_line_content": "\t\t\t\t\tdie(_(\"pathspec '%s' did not match any files\"),",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(seen)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tfree(seen);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "plug_bulk_checkin",
          "old_text": null,
          "new_text": "plug_bulk_checkin()",
          "old_line_content": "",
          "new_line_content": "\tplug_bulk_checkin();",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "renormalize_tracked_files",
          "old_text": null,
          "new_text": "renormalize_tracked_files(&pathspec, flags)",
          "old_line_content": "\tif (add_renormalize)",
          "new_line_content": "\t\texit_status |= renormalize_tracked_files(&pathspec, flags);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "add_files_to_cache",
          "old_text": null,
          "new_text": "add_files_to_cache(prefix, &pathspec, flags)",
          "old_line_content": "\telse",
          "new_line_content": "\t\texit_status |= add_files_to_cache(prefix, &pathspec, flags);",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "add_files",
          "old_text": null,
          "new_text": "add_files(&dir, flags)",
          "old_line_content": "\tif (add_new_files)",
          "new_line_content": "\t\texit_status |= add_files(&dir, flags);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "chmod_pathspec",
          "old_text": null,
          "new_text": "chmod_pathspec(&pathspec, chmod_arg[0])",
          "old_line_content": "\tif (chmod_arg && pathspec.nr)",
          "new_line_content": "\t\tchmod_pathspec(&pathspec, chmod_arg[0]);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "write_locked_index",
          "old_text": null,
          "new_text": "write_locked_index(&the_index, &lock_file,\n\t\t\t       COMMIT_LOCK | SKIP_IF_UNCHANGED)",
          "old_line_content": "finish:",
          "new_line_content": "\tif (write_locked_index(&the_index, &lock_file,",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Unable to write new index file\")",
          "old_line_content": "\t\t\t       COMMIT_LOCK | SKIP_IF_UNCHANGED))",
          "new_line_content": "\t\tdie(_(\"Unable to write new index file\"));",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "UNLEAK",
          "old_text": null,
          "new_text": "UNLEAK(pathspec)",
          "old_line_content": "",
          "new_line_content": "\tUNLEAK(pathspec);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "parse_pathspec",
          "old_text": null,
          "new_text": "parse_pathspec(&pathspec, PATHSPEC_ATTR,\n\t\t       PATHSPEC_PREFER_FULL |\n\t\t       PATHSPEC_SYMLINK_LEADING_PATH,\n\t\t       prefix, argv)",
          "old_line_content": "",
          "new_line_content": "\tparse_pathspec(&pathspec, PATHSPEC_ATTR,",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"index file corrupt\")",
          "old_line_content": "\t\t       PATHSPEC_PREFER_FULL |",
          "new_line_content": "\t\tdie(_(\"index file corrupt\"));",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": null,
          "new_api": "die_in_unpopulated_submodule",
          "old_text": null,
          "new_text": "die_in_unpopulated_submodule(&the_index, prefix)",
          "old_line_content": "\t\t       prefix, argv);",
          "new_line_content": "\tdie_in_unpopulated_submodule(&the_index, prefix);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "die_path_inside_submodule",
          "old_text": null,
          "new_text": "die_path_inside_submodule(&the_index, &pathspec)",
          "old_line_content": "",
          "new_line_content": "\tdie_path_inside_submodule(&the_index, &pathspec);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&dir, 0, sizeof(dir))",
          "old_line_content": "\t\t/* Set up the default git porcelain excludes */",
          "new_line_content": "\t\tmemset(&dir, 0, sizeof(dir));",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "setup_standard_excludes",
          "old_text": null,
          "new_text": "setup_standard_excludes(&dir)",
          "old_line_content": "\t\t\tdir.flags |= DIR_COLLECT_IGNORED;",
          "new_line_content": "\t\t\tsetup_standard_excludes(&dir);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "fill_directory",
          "old_text": null,
          "new_text": "fill_directory(&dir, &the_index, &pathspec)",
          "old_line_content": "\t\t/* This picks up the paths that are not tracked */",
          "new_line_content": "\t\tbaselen = fill_directory(&dir, &the_index, &pathspec);",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "prune_directory",
          "old_text": null,
          "new_text": "prune_directory(&dir, &pathspec, baselen)",
          "old_line_content": "\t\tif (pathspec.nr)",
          "new_line_content": "\t\t\tseen = prune_directory(&dir, &pathspec, baselen);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "refresh",
          "old_text": null,
          "new_text": "refresh(verbose, &pathspec)",
          "old_line_content": "\tif (refresh_only) {",
          "new_line_content": "\t\trefresh(verbose, &pathspec);",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "find_pathspecs_matching_against_index",
          "old_text": null,
          "new_text": "find_pathspecs_matching_against_index(&pathspec, &the_index)",
          "old_line_content": "\t\tif (!seen)",
          "new_line_content": "\t\t\tseen = find_pathspecs_matching_against_index(&pathspec, &the_index);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "GUARD_PATHSPEC",
          "old_text": null,
          "new_text": "GUARD_PATHSPEC(&pathspec,\n\t\t\t       PATHSPEC_FROMTOP |\n\t\t\t       PATHSPEC_LITERAL |\n\t\t\t       PATHSPEC_GLOB |\n\t\t\t       PATHSPEC_ICASE |\n\t\t\t       PATHSPEC_EXCLUDE)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\tGUARD_PATHSPEC(&pathspec,",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "file_exists",
          "old_text": null,
          "new_text": "file_exists(path)",
          "old_line_content": "\t\t\t      (PATHSPEC_GLOB | PATHSPEC_ICASE)) ||",
          "new_line_content": "\t\t\t     !file_exists(path))) {",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "is_excluded",
          "old_text": null,
          "new_text": "is_excluded(&dir, &the_index, path, &dtype)",
          "old_line_content": "\t\t\t\t\tint dtype = DT_UNKNOWN;",
          "new_line_content": "\t\t\t\t\tif (is_excluded(&dir, &the_index, path, &dtype))",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "dir_add_ignored",
          "new_api": null,
          "old_text": "dir_add_ignored(&dir, &the_index,\n\t\t\t\t\t\t\t\tpath, pathspec.items[i].len)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tdir_add_ignored(&dir, &the_index,",
          "new_line_content": "\t\t\t\t\t\t\t\tpath, pathspec.items[i].len);",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"pathspec '%s' did not match any files\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tdie(_(\"pathspec '%s' did not match any files\"),",
          "new_line_content": "\t\t\t\t\t    pathspec.items[i].original);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(seen)",
          "new_text": null,
          "old_line_content": "\t\tfree(seen);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "plug_bulk_checkin",
          "new_api": null,
          "old_text": "plug_bulk_checkin()",
          "new_text": null,
          "old_line_content": "\tplug_bulk_checkin();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "renormalize_tracked_files",
          "new_api": null,
          "old_text": "renormalize_tracked_files(&pathspec, flags)",
          "new_text": null,
          "old_line_content": "\t\texit_status |= renormalize_tracked_files(&pathspec, flags);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "add_files_to_cache",
          "new_api": null,
          "old_text": "add_files_to_cache(prefix, &pathspec, flags)",
          "new_text": null,
          "old_line_content": "\t\texit_status |= add_files_to_cache(prefix, &pathspec, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "add_files",
          "new_api": null,
          "old_text": "add_files(&dir, flags)",
          "new_text": null,
          "old_line_content": "\t\texit_status |= add_files(&dir, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "unplug_bulk_checkin",
          "new_api": null,
          "old_text": "unplug_bulk_checkin()",
          "new_text": null,
          "old_line_content": "\tunplug_bulk_checkin();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "write_locked_index",
          "new_api": null,
          "old_text": "write_locked_index(&the_index, &lock_file,\n\t\t\t       COMMIT_LOCK | SKIP_IF_UNCHANGED)",
          "new_text": null,
          "old_line_content": "\tif (write_locked_index(&the_index, &lock_file,",
          "new_line_content": "\t\t\t       COMMIT_LOCK | SKIP_IF_UNCHANGED))",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Unable to write new index file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"Unable to write new index file\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "UNLEAK",
          "new_api": null,
          "old_text": "UNLEAK(dir)",
          "new_text": null,
          "old_line_content": "\tUNLEAK(dir);",
          "new_line_content": "\treturn exit_status;",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "read_cache",
          "new_api": null,
          "old_text": "read_cache()",
          "new_text": null,
          "old_line_content": "\tif (read_cache() < 0)",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"index file corrupt\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"index file corrupt\"));",
          "new_line_content": "\t * Check the \"pathspec '%s' did not match any files\" block",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "die_in_unpopulated_submodule",
          "new_api": null,
          "old_text": "die_in_unpopulated_submodule(&the_index, prefix)",
          "new_text": null,
          "old_line_content": "\tdie_in_unpopulated_submodule(&the_index, prefix);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "die_path_inside_submodule",
          "new_api": null,
          "old_text": "die_path_inside_submodule(&the_index, &pathspec)",
          "new_text": null,
          "old_line_content": "\tdie_path_inside_submodule(&the_index, &pathspec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&dir, 0, sizeof(dir))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&dir, 0, sizeof(dir));",
          "new_line_content": "\t\tif (!ignored_too) {",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "setup_standard_excludes",
          "new_api": null,
          "old_text": "setup_standard_excludes(&dir)",
          "new_text": null,
          "old_line_content": "\t\t\tsetup_standard_excludes(&dir);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "fill_directory",
          "new_api": null,
          "old_text": "fill_directory(&dir, &the_index, &pathspec)",
          "new_text": null,
          "old_line_content": "\t\tbaselen = fill_directory(&dir, &the_index, &pathspec);",
          "new_line_content": "\t\tif (pathspec.nr)",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "prune_directory",
          "new_api": null,
          "old_text": "prune_directory(&dir, &pathspec, baselen)",
          "new_text": null,
          "old_line_content": "\t\t\tseen = prune_directory(&dir, &pathspec, baselen);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "refresh",
          "new_api": null,
          "old_text": "refresh(verbose, &pathspec)",
          "new_text": null,
          "old_line_content": "\t\trefresh(verbose, &pathspec);",
          "new_line_content": "\t\tgoto finish;",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "find_pathspecs_matching_against_index",
          "new_api": null,
          "old_text": "find_pathspecs_matching_against_index(&pathspec, &the_index)",
          "new_text": null,
          "old_line_content": "\t\t\tseen = find_pathspecs_matching_against_index(&pathspec, &the_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "GUARD_PATHSPEC",
          "new_api": null,
          "old_text": "GUARD_PATHSPEC(&pathspec,\n\t\t\t       PATHSPEC_FROMTOP |\n\t\t\t       PATHSPEC_LITERAL |\n\t\t\t       PATHSPEC_GLOB |\n\t\t\t       PATHSPEC_ICASE |\n\t\t\t       PATHSPEC_EXCLUDE)",
          "new_text": null,
          "old_line_content": "\t\tGUARD_PATHSPEC(&pathspec,",
          "new_line_content": "\t\t\t       PATHSPEC_FROMTOP |",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "file_exists",
          "new_api": null,
          "old_text": "file_exists(path)",
          "new_text": null,
          "old_line_content": "\t\t\t     !file_exists(path))) {",
          "new_line_content": "\t\t\t\tif (ignore_missing) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 23,
      "total_deletions": 23,
      "total_api_changes": 49
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 49,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          453,
          455,
          459,
          464,
          466
        ]
      }
    },
    "api_calls_before": 170,
    "api_calls_after": 170,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 6,
      "total_diff_lines": 50
    }
  }
}
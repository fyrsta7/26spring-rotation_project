{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c83f032e09e49e5bc60686663f7c78d36f72cef4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c83f032e09e49e5bc60686663f7c78d36f72cef4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c83f032e09e49e5bc60686663f7c78d36f72cef4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c83f032e09e49e5bc60686663f7c78d36f72cef4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1360,
          "old_api": "create_delta_index",
          "new_api": "read_sha1_file",
          "old_text": "create_delta_index(src->data, src_size)",
          "new_text": "read_sha1_file(src_entry->idx.sha1, &type, &sz)",
          "old_line_content": "\t\tsrc->index = create_delta_index(src->data, src_size);",
          "new_line_content": "\t\tsrc->data = read_sha1_file(src_entry->idx.sha1, &type, &sz);",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": "free",
          "new_api": "stop_progress",
          "old_text": "free(array)",
          "new_text": "stop_progress(&progress_state)",
          "old_line_content": "\tfree(array);",
          "new_line_content": "\t\tstop_progress(&progress_state);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "strcmp",
          "new_api": "find_deltas",
          "old_text": "strcmp(k, \"pack.window\")",
          "new_text": "find_deltas(delta_list, window+1, depth)",
          "old_line_content": "\tif(!strcmp(k, \"pack.window\")) {",
          "new_line_content": "\tfind_deltas(delta_list, window+1, depth);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "git_config_int",
          "new_api": "free",
          "old_text": "git_config_int(k, v)",
          "new_text": "free(delta_list)",
          "old_line_content": "\t\twindow = git_config_int(k, v);",
          "new_line_content": "\tfree(delta_list);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "git_config_int",
          "new_api": "die",
          "old_text": "git_config_int(k, v)",
          "new_text": "die(\"bad pack compression level %d\", level)",
          "old_line_content": "\t\tmax_delta_cache_size = git_config_int(k, v);",
          "new_line_content": "\t\t\tdie(\"bad pack compression level %d\", level);",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "strerror",
          "new_api": "fgets",
          "old_text": "strerror(errno)",
          "new_text": "fgets(line, sizeof(line), stdin)",
          "old_line_content": "\t\t\t\tdie(\"fgets: %s\", strerror(errno));",
          "new_line_content": "\t\tif (!fgets(line, sizeof(line), stdin)) {",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "clearerr",
          "new_api": "feof",
          "old_text": "clearerr(stdin)",
          "new_text": "feof(stdin)",
          "old_line_content": "\t\t\tclearerr(stdin);",
          "new_line_content": "\t\t\tif (feof(stdin))",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "die",
          "new_api": "strerror",
          "old_text": "die(\"expected edge sha1, got garbage:\\n %s\",\n\t\t\t\t    line)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\t\tdie(\"expected edge sha1, got garbage:\\n %s\",",
          "new_line_content": "\t\t\t\tdie(\"fgets: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "add_preferred_base_object",
          "new_api": "add_preferred_base",
          "old_text": "add_preferred_base_object(line+41)",
          "new_text": "add_preferred_base(sha1)",
          "old_line_content": "\t\tadd_preferred_base_object(line+41);",
          "new_line_content": "\t\t\tadd_preferred_base(sha1);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "add_preferred_base",
          "new_api": "add_preferred_base_object",
          "old_text": "add_preferred_base(commit->object.sha1)",
          "new_text": "add_preferred_base_object(p->name)",
          "old_line_content": "\tadd_preferred_base(commit->object.sha1);",
          "new_line_content": "\tadd_preferred_base_object(p->name);",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "strlen",
          "new_api": "init_revisions",
          "old_text": "strlen(line)",
          "new_text": "init_revisions(&revs, NULL)",
          "old_line_content": "\t\tint len = strlen(line);",
          "new_line_content": "\tinit_revisions(&revs, NULL);",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": "strcmp",
          "new_api": "strlen",
          "old_text": "strcmp(line, \"--not\")",
          "new_text": "strlen(line)",
          "old_line_content": "\t\t\tif (!strcmp(line, \"--not\")) {",
          "new_line_content": "\t\tint len = strlen(line);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "handle_revision_arg",
          "new_api": "strcmp",
          "old_text": "handle_revision_arg(line, &revs, flags, 1)",
          "new_text": "strcmp(line, \"--not\")",
          "old_line_content": "\t\tif (handle_revision_arg(line, &revs, flags, 1))",
          "new_line_content": "\t\t\tif (!strcmp(line, \"--not\")) {",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "prepare_revision_walk",
          "new_api": "die",
          "old_text": "prepare_revision_walk(&revs)",
          "new_text": "die(\"not a rev '%s'\", line)",
          "old_line_content": "\tprepare_revision_walk(&revs);",
          "new_line_content": "\t\t\tdie(\"not a rev '%s'\", line);",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "traverse_commit_list",
          "new_api": "handle_revision_arg",
          "old_text": "traverse_commit_list(&revs, show_commit, show_object)",
          "new_text": "handle_revision_arg(line, &revs, flags, 1)",
          "old_line_content": "\ttraverse_commit_list(&revs, show_commit, show_object);",
          "new_line_content": "\t\tif (handle_revision_arg(line, &revs, flags, 1))",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "chmod",
          "new_api": "mark_edges_uninteresting",
          "old_text": "chmod(path, mode)",
          "new_text": "mark_edges_uninteresting(revs.commits, &revs, show_edge)",
          "old_line_content": "\tif (chmod(path, mode))",
          "new_line_content": "\tmark_edges_uninteresting(revs.commits, &revs, show_edge);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": "git_config",
          "new_api": "xcalloc",
          "old_text": "git_config(git_pack_config)",
          "new_text": "xcalloc(rp_ac_alloc, sizeof(*rp_av))",
          "old_line_content": "\tgit_config(git_pack_config);",
          "new_line_content": "\trp_av = xcalloc(rp_ac_alloc, sizeof(*rp_av));",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "strtoul",
          "new_api": "strcmp",
          "old_text": "strtoul(arg+14, &end, 0)",
          "new_text": "strcmp(\"--incremental\", arg)",
          "old_line_content": "\t\t\tint level = strtoul(arg+14, &end, 0);",
          "new_line_content": "\t\tif (!strcmp(\"--incremental\", arg)) {",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": "die",
          "new_api": "strtoul",
          "old_text": "die(\"bad pack compression level %d\", level)",
          "new_text": "strtoul(arg+14, &end, 0)",
          "old_line_content": "\t\t\t\tdie(\"bad pack compression level %d\", level);",
          "new_line_content": "\t\t\tint level = strtoul(arg+14, &end, 0);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "strtoul",
          "new_api": "die",
          "old_text": "strtoul(arg+16, &end, 0)",
          "new_text": "die(\"bad pack compression level %d\", level)",
          "old_line_content": "\t\t\tpack_size_limit = strtoul(arg+16, &end, 0) * 1024 * 1024;",
          "new_line_content": "\t\t\t\tdie(\"bad pack compression level %d\", level);",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "alloc_nr",
          "new_api": "strcmp",
          "old_text": "alloc_nr(rp_ac_alloc)",
          "new_text": "strcmp(\"--unpacked\", arg)",
          "old_line_content": "\t\t\t\trp_ac_alloc = alloc_nr(rp_ac_alloc);",
          "new_line_content": "\t\tif (!strcmp(\"--unpacked\", arg) ||",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "xrealloc",
          "new_api": "prefixcmp",
          "old_text": "xrealloc(rp_av,\n\t\t\t\t\t\t rp_ac_alloc * sizeof(*rp_av))",
          "new_text": "prefixcmp(arg, \"--unpacked=\")",
          "old_line_content": "\t\t\t\trp_av = xrealloc(rp_av,",
          "new_line_content": "\t\t    !prefixcmp(arg, \"--unpacked=\") ||",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "strcmp",
          "new_api": "xrealloc",
          "old_text": "strcmp(\"--thin\", arg)",
          "new_text": "xrealloc(rp_av,\n\t\t\t\t\t\t rp_ac_alloc * sizeof(*rp_av))",
          "old_line_content": "\t\tif (!strcmp(\"--thin\", arg)) {",
          "new_line_content": "\t\t\t\trp_av = xrealloc(rp_av,",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "prefixcmp",
          "new_api": "strcmp",
          "old_text": "prefixcmp(arg, \"--index-version=\")",
          "new_text": "strcmp(\"--thin\", arg)",
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--index-version=\")) {",
          "new_line_content": "\t\tif (!strcmp(\"--thin\", arg)) {",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "strtoul",
          "new_api": "prefixcmp",
          "old_text": "strtoul(c+1, &c, 0)",
          "new_text": "prefixcmp(arg, \"--index-version=\")",
          "old_line_content": "\t\t\t\tpack_idx_off32_limit = strtoul(c+1, &c, 0);",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--index-version=\")) {",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "die",
          "new_api": "strtoul",
          "old_text": "die(\"bad %s\", arg)",
          "new_text": "strtoul(arg + 16, &c, 10)",
          "old_line_content": "\t\t\t\tdie(\"bad %s\", arg);",
          "new_line_content": "\t\t\tpack_idx_default_version = strtoul(arg + 16, &c, 10);",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "die",
          "new_api": "usage",
          "old_text": "die(\"--thin cannot be used to build an indexable pack.\")",
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\tdie(\"--thin cannot be used to build an indexable pack.\");",
          "new_line_content": "\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "read_object_list_from_stdin",
          "new_api": "prepare_packed_git",
          "old_text": "read_object_list_from_stdin()",
          "new_text": "prepare_packed_git()",
          "old_line_content": "\t\tread_object_list_from_stdin();",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "get_object_list",
          "new_api": "start_progress",
          "old_text": "get_object_list(rp_ac, rp_av)",
          "new_text": "start_progress(&progress_state, \"Generating pack...\",\n\t\t\t       \"Counting objects: \", 0)",
          "old_line_content": "\t\tget_object_list(rp_ac, rp_av);",
          "new_line_content": "\t\tstart_progress(&progress_state, \"Generating pack...\",",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "stop_progress",
          "new_api": "read_object_list_from_stdin",
          "old_text": "stop_progress(&progress_state)",
          "new_text": "read_object_list_from_stdin()",
          "old_line_content": "\t\tstop_progress(&progress_state);",
          "new_line_content": "\t\tread_object_list_from_stdin();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1544,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.deltacachesize\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(k, \"pack.deltacachesize\")) {",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tmax_delta_cache_size = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.deltacachelimit\")",
          "old_line_content": "",
          "new_line_content": "\tif (!strcmp(k, \"pack.deltacachelimit\")) {",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "static void read_object_list_from_stdin(void)",
          "new_line_content": "\t\tcache_max_small_delta_size = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "git_default_config",
          "old_text": null,
          "new_text": "git_default_config(k, v)",
          "old_line_content": "\tunsigned char sha1[20];",
          "new_line_content": "\treturn git_default_config(k, v);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "ferror",
          "old_text": null,
          "new_text": "ferror(stdin)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!ferror(stdin))",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"fgets returned NULL, not EOF, not error!\")",
          "old_line_content": "\t\tif (line[0] == '-') {",
          "new_line_content": "\t\t\t\tdie(\"fgets returned NULL, not EOF, not error!\");",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "clearerr",
          "old_text": null,
          "new_text": "clearerr(stdin)",
          "old_line_content": "\t\t\t\t    line);",
          "new_line_content": "\t\t\tclearerr(stdin);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(line, sha1)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (get_sha1_hex(line, sha1))",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"expected sha1, got garbage:\\n %s\", line)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdie(\"expected sha1, got garbage:\\n %s\", line);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "add_preferred_base_object",
          "old_text": null,
          "new_text": "add_preferred_base_object(line+41)",
          "old_line_content": "{",
          "new_line_content": "\t\tadd_preferred_base_object(line+41);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": null,
          "new_api": "add_object_entry",
          "old_text": null,
          "new_text": "add_object_entry(p->item->sha1, p->item->type, p->name, 0)",
          "old_line_content": "}",
          "new_line_content": "\tadd_object_entry(p->item->sha1, p->item->type, p->name, 0);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "add_preferred_base",
          "old_text": null,
          "new_text": "add_preferred_base(commit->object.sha1)",
          "old_line_content": "\tchar line[1000];",
          "new_line_content": "\tadd_preferred_base(commit->object.sha1);",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": null,
          "new_api": "setup_revisions",
          "old_text": null,
          "new_text": "setup_revisions(ac, av, &revs, NULL)",
          "old_line_content": "\t\tif (!len)",
          "new_line_content": "\tsetup_revisions(ac, av, &revs, NULL);",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(line, sizeof(line), stdin)",
          "old_line_content": "\t\tif (*line == '-') {",
          "new_line_content": "\twhile (fgets(line, sizeof(line), stdin) != NULL) {",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"bad revision '%s'\", line)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdie(\"bad revision '%s'\", line);",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "prepare_revision_walk",
          "old_text": null,
          "new_text": "prepare_revision_walk(&revs)",
          "old_line_content": "{",
          "new_line_content": "\tprepare_revision_walk(&revs);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "traverse_commit_list",
          "old_text": null,
          "new_text": "traverse_commit_list(&revs, show_commit, show_object)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\ttraverse_commit_list(&revs, show_commit, show_object);",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": null,
          "new_api": "chmod",
          "old_text": null,
          "new_text": "chmod(path, mode)",
          "old_line_content": "{",
          "new_line_content": "\tif (chmod(path, mode))",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "adjust_shared_perm",
          "old_text": null,
          "new_text": "adjust_shared_perm(path)",
          "old_line_content": "\tint thin = 0;",
          "new_line_content": "\treturn adjust_shared_perm(path);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "git_config",
          "old_text": null,
          "new_text": "git_config(git_pack_config)",
          "old_line_content": "\t\tconst char *arg = argv[i];",
          "new_line_content": "\tgit_config(git_pack_config);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "isatty",
          "old_text": null,
          "new_text": "isatty(2)",
          "old_line_content": "",
          "new_line_content": "\tprogress = isatty(2);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--non-empty\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--non-empty\", arg)) {",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--local\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--local\", arg)) {",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--compression=\")",
          "old_line_content": "\t\t\t\tlevel = Z_DEFAULT_COMPRESSION;",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--compression=\")) {",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--max-pack-size=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--max-pack-size=\")) {",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg+16, &end, 0)",
          "old_line_content": "\t\t\tchar *end;",
          "new_line_content": "\t\t\tpack_size_limit = strtoul(arg+16, &end, 0) * 1024 * 1024;",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t\tif (!arg[9] || *end)",
          "new_line_content": "\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--window=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--window=\")) {",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg+9, &end, 0)",
          "old_line_content": "\t\t\tchar *end;",
          "new_line_content": "\t\t\twindow = strtoul(arg+9, &end, 0);",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t\tif (!arg[8] || *end)",
          "new_line_content": "\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "prefixcmp",
          "old_text": null,
          "new_text": "prefixcmp(arg, \"--depth=\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(arg+8, &end, 0)",
          "old_line_content": "\t\t\tprogress = 1;",
          "new_line_content": "\t\t\tdepth = strtoul(arg+8, &end, 0);",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--progress\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--progress\", arg)) {",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--all-progress\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--all-progress\", arg)) {",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"-q\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"-q\", arg)) {",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--no-reuse-delta\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--no-reuse-delta\", arg)) {",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--no-reuse-object\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--no-reuse-object\", arg)) {",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--delta-base-offset\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--delta-base-offset\", arg)) {",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--stdout\", arg)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(\"--stdout\", arg)) {",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--reflog\", arg)",
          "old_line_content": "\t\t\t\t\t\t rp_ac_alloc * sizeof(*rp_av));",
          "new_line_content": "\t\t    !strcmp(\"--reflog\", arg) ||",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(\"--all\", arg)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t    !strcmp(\"--all\", arg)) {",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "alloc_nr",
          "old_text": null,
          "new_text": "alloc_nr(rp_ac_alloc)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\trp_ac_alloc = alloc_nr(rp_ac_alloc);",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"bad %s\", arg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tdie(\"bad %s\", arg);",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "strtoul",
          "old_text": null,
          "new_text": "strtoul(c+1, &c, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tpack_idx_off32_limit = strtoul(c+1, &c, 0);",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"bad %s\", arg)",
          "old_line_content": "\t/* Traditionally \"pack-objects [options] base extra\" failed;",
          "new_line_content": "\t\t\t\tdie(\"bad %s\", arg);",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage(pack_usage)",
          "old_line_content": "\t * we somehow want to say what the base name is.  So the",
          "new_line_content": "\t\tusage(pack_usage);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"--max-pack-size cannot be used to build a pack for transfer.\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"--max-pack-size cannot be used to build a pack for transfer.\");",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"--thin cannot be used to build an indexable pack.\")",
          "old_line_content": "\t\t\t       \"Counting objects: \", 0);",
          "new_line_content": "\t\tdie(\"--thin cannot be used to build an indexable pack.\");",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "get_object_list",
          "old_text": null,
          "new_text": "get_object_list(rp_ac, rp_av)",
          "old_line_content": "",
          "new_line_content": "\t\tget_object_list(rp_ac, rp_av);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "stop_progress",
          "old_text": null,
          "new_text": "stop_progress(&progress_state)",
          "old_line_content": "\tif (progress && (nr_objects != nr_result))",
          "new_line_content": "\t\tstop_progress(&progress_state);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Result has %u objects.\\n\", nr_result)",
          "old_line_content": "\t\t\twritten, written_delta, reused, reused_delta);",
          "new_line_content": "\t\tfprintf(stderr, \"Result has %u objects.\\n\", nr_result);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": null,
          "new_api": "prepare_pack",
          "old_text": null,
          "new_text": "prepare_pack(window, depth)",
          "old_line_content": "}",
          "new_line_content": "\t\tprepare_pack(window, depth);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": null,
          "new_api": "write_pack_file",
          "old_text": null,
          "new_text": "write_pack_file()",
          "old_line_content": "",
          "new_line_content": "\twrite_pack_file();",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Total %u (delta %u), reused %u (delta %u)\\n\",\n\t\t\twritten, written_delta, reused, reused_delta)",
          "old_line_content": "",
          "new_line_content": "\t\tfprintf(stderr, \"Total %u (delta %u), reused %u (delta %u)\\n\",",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"object %s inconsistent object length (%lu vs %lu)\",\n\t\t\t    sha1_to_hex(src_entry->idx.sha1), sz, src_size)",
          "old_line_content": "\t\t\tstatic int warned = 0;",
          "new_line_content": "\t\t\tdie(\"object %s inconsistent object length (%lu vs %lu)\",",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(src_entry->idx.sha1)",
          "old_line_content": "\t\t\tif (!warned++)",
          "new_line_content": "\t\t\t    sha1_to_hex(src_entry->idx.sha1), sz, src_size);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "create_delta_index",
          "old_text": null,
          "new_text": "create_delta_index(src->data, src_size)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tsrc->index = create_delta_index(src->data, src_size);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning(\"suboptimal pack - out of memory\")",
          "old_line_content": "\tif (!delta_buf)",
          "new_line_content": "\t\t\t\twarning(\"suboptimal pack - out of memory\");",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "create_delta",
          "old_text": null,
          "new_text": "create_delta(src->index, trg->data, trg_size, &delta_size, max_size)",
          "old_line_content": "\t\tif (delta_size == trg_entry->delta_size &&",
          "new_line_content": "\tdelta_buf = create_delta(src->index, trg->data, trg_size, &delta_size, max_size);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta_buf)",
          "old_line_content": "\ttrg_entry->delta_data = 0;",
          "new_line_content": "\t\t\tfree(delta_buf);",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(trg_entry->delta_data)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(trg_entry->delta_data);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "delta_cacheable",
          "old_text": null,
          "new_text": "delta_cacheable(src, trg, src_size, trg_size, delta_size)",
          "old_line_content": "}",
          "new_line_content": "\tif (delta_cacheable(src, trg, src_size, trg_size, delta_size)) {",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": null,
          "new_api": "xrealloc",
          "old_text": null,
          "new_text": "xrealloc(delta_buf, delta_size)",
          "old_line_content": "",
          "new_line_content": "\t\ttrg_entry->delta_data = xrealloc(delta_buf, delta_size);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta_buf)",
          "old_line_content": "\tstruct object_entry *child = me->delta_child;",
          "new_line_content": "\t\tfree(delta_buf);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "check_delta_limit",
          "old_text": null,
          "new_text": "check_delta_limit(child, n + 1)",
          "old_line_content": "}",
          "new_line_content": "\t\tunsigned int c = check_delta_limit(child, n + 1);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(array_size)",
          "old_line_content": "\t\tstruct object_entry *entry = list[--i];",
          "new_line_content": "\tarray = xmalloc(array_size);",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(array, 0, array_size)",
          "old_line_content": "\t\tstruct unpacked *n = array + idx;",
          "new_line_content": "\tmemset(array, 0, array_size);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": null,
          "new_api": "start_progress",
          "old_text": null,
          "new_text": "start_progress(&progress_state, \"Deltifying %u objects...\", \"\", nr_result)",
          "old_line_content": "",
          "new_line_content": "\t\tstart_progress(&progress_state, \"Deltifying %u objects...\", \"\", nr_result);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "display_progress",
          "old_text": null,
          "new_text": "display_progress(&progress_state, processed)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tdisplay_progress(&progress_state, processed);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "free_delta_index",
          "old_text": null,
          "new_text": "free_delta_index(n->index)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tfree_delta_index(n->index);",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(n->data)",
          "old_line_content": "\t\t * objects that depend on the current object into account",
          "new_line_content": "\t\tfree(n->data);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "check_delta_limit",
          "old_text": null,
          "new_text": "check_delta_limit(entry, 0)",
          "old_line_content": "\t\twhile (--j > 0) {",
          "new_line_content": "\t\t\tmax_depth -= check_delta_limit(entry, 0);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "try_delta",
          "old_text": null,
          "new_text": "try_delta(n, m, max_depth)",
          "old_line_content": "\t\t * should evict it first.",
          "new_line_content": "\t\t\tif (try_delta(n, m, max_depth) < 0)",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "free_delta_index",
          "old_text": null,
          "new_text": "free_delta_index(array[i].index)",
          "old_line_content": "static void prepare_pack(int window, int depth)",
          "new_line_content": "\t\tfree_delta_index(array[i].index);",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(array[i].data)",
          "old_line_content": "{",
          "new_line_content": "\t\tfree(array[i].data);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(array)",
          "old_line_content": "\tuint32_t i;",
          "new_line_content": "\tfree(array);",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": null,
          "new_api": "get_object_details",
          "old_text": null,
          "new_text": "get_object_details()",
          "old_line_content": "\tfor (i = 0; i < nr_objects; i++)",
          "new_line_content": "\tget_object_details();",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(nr_objects * sizeof(*delta_list))",
          "old_line_content": "}",
          "new_line_content": "\tdelta_list = xmalloc(nr_objects * sizeof(*delta_list));",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(delta_list, nr_objects, sizeof(*delta_list), type_size_sort)",
          "old_line_content": "{",
          "new_line_content": "\tqsort(delta_list, nr_objects, sizeof(*delta_list), type_size_sort);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.window\")",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif(!strcmp(k, \"pack.window\")) {",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t}",
          "new_line_content": "\t\twindow = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.depth\")",
          "old_line_content": "\t\tif (level == -1)",
          "new_line_content": "\tif(!strcmp(k, \"pack.depth\")) {",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t\t\tlevel = Z_DEFAULT_COMPRESSION;",
          "new_line_content": "\t\tdepth = git_config_int(k, v);",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(k, \"pack.compression\")",
          "old_line_content": "\t\tpack_compression_level = level;",
          "new_line_content": "\tif (!strcmp(k, \"pack.compression\")) {",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "git_config_int",
          "old_text": null,
          "new_text": "git_config_int(k, v)",
          "old_line_content": "\t\tpack_compression_seen = 1;",
          "new_line_content": "\t\tint level = git_config_int(k, v);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1538,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(k, \"pack.deltacachesize\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(k, \"pack.deltacachesize\")) {",
          "new_line_content": "\t\telse if (level < 0 || level > Z_BEST_COMPRESSION)",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(k, \"pack.deltacachelimit\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(k, \"pack.deltacachelimit\")) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tcache_max_small_delta_size = git_config_int(k, v);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "git_default_config",
          "new_api": null,
          "old_text": "git_default_config(k, v)",
          "new_text": null,
          "old_line_content": "\treturn git_default_config(k, v);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(line, sizeof(line), stdin)",
          "new_text": null,
          "old_line_content": "\t\tif (!fgets(line, sizeof(line), stdin)) {",
          "new_line_content": "static void read_object_list_from_stdin(void)",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "feof",
          "new_api": null,
          "old_text": "feof(stdin)",
          "new_text": null,
          "old_line_content": "\t\t\tif (feof(stdin))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "ferror",
          "new_api": null,
          "old_text": "ferror(stdin)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!ferror(stdin))",
          "new_line_content": "\tunsigned char sha1[20];",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"fgets returned NULL, not EOF, not error!\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tdie(\"fgets returned NULL, not EOF, not error!\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(line+1, sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tif (get_sha1_hex(line+1, sha1))",
          "new_line_content": "\t\t\tif (errno != EINTR)",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "add_preferred_base",
          "new_api": null,
          "old_text": "add_preferred_base(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\tadd_preferred_base(sha1);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "add_object_entry",
          "new_api": null,
          "old_text": "add_object_entry(sha1, 0, line+41, 0)",
          "new_text": null,
          "old_line_content": "\t\tadd_object_entry(sha1, 0, line+41, 0);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "add_preferred_base_object",
          "new_api": null,
          "old_text": "add_preferred_base_object(p->name)",
          "new_text": null,
          "old_line_content": "\tadd_preferred_base_object(p->name);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "init_revisions",
          "new_api": null,
          "old_text": "init_revisions(&revs, NULL)",
          "new_text": null,
          "old_line_content": "\tinit_revisions(&revs, NULL);",
          "new_line_content": "static void get_object_list(int ac, const char **av)",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "setup_revisions",
          "new_api": null,
          "old_text": "setup_revisions(ac, av, &revs, NULL)",
          "new_text": null,
          "old_line_content": "\tsetup_revisions(ac, av, &revs, NULL);",
          "new_line_content": "\tchar line[1000];",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(line, sizeof(line), stdin)",
          "new_text": null,
          "old_line_content": "\twhile (fgets(line, sizeof(line), stdin) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"not a rev '%s'\", line)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"not a rev '%s'\", line);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"bad revision '%s'\", line)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"bad revision '%s'\", line);",
          "new_line_content": "\t\t\t\tflags ^= UNINTERESTING;",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "mark_edges_uninteresting",
          "new_api": null,
          "old_text": "mark_edges_uninteresting(revs.commits, &revs, show_edge)",
          "new_text": null,
          "old_line_content": "\tmark_edges_uninteresting(revs.commits, &revs, show_edge);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "adjust_shared_perm",
          "new_api": null,
          "old_text": "adjust_shared_perm(path)",
          "new_text": null,
          "old_line_content": "\treturn adjust_shared_perm(path);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(rp_ac_alloc, sizeof(*rp_av))",
          "new_text": null,
          "old_line_content": "\trp_av = xcalloc(rp_ac_alloc, sizeof(*rp_av));",
          "new_line_content": "\tint thin = 0;",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "isatty",
          "new_api": null,
          "old_text": "isatty(2)",
          "new_text": null,
          "old_line_content": "\tprogress = isatty(2);",
          "new_line_content": "\trp_ac = 2;",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--non-empty\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--non-empty\", arg)) {",
          "new_line_content": "\tfor (i = 1; i < argc; i++) {",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--local\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--local\", arg)) {",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--incremental\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--incremental\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--compression=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--compression=\")) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--max-pack-size=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--max-pack-size=\")) {",
          "new_line_content": "\t\t\t\tlevel = Z_DEFAULT_COMPRESSION;",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--window=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--window=\")) {",
          "new_line_content": "\t\t\tchar *end;",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg+9, &end, 0)",
          "new_text": null,
          "old_line_content": "\t\t\twindow = strtoul(arg+9, &end, 0);",
          "new_line_content": "\t\t\tif (!arg[16] || *end)",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--depth=\")",
          "new_text": null,
          "old_line_content": "\t\tif (!prefixcmp(arg, \"--depth=\")) {",
          "new_line_content": "\t\t\tchar *end;",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg+8, &end, 0)",
          "new_text": null,
          "old_line_content": "\t\t\tdepth = strtoul(arg+8, &end, 0);",
          "new_line_content": "\t\t\tif (!arg[9] || *end)",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\t\t\tusage(pack_usage);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--progress\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--progress\", arg)) {",
          "new_line_content": "\t\t\tchar *end;",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--all-progress\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--all-progress\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"-q\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"-q\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--no-reuse-delta\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--no-reuse-delta\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--no-reuse-object\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--no-reuse-object\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--delta-base-offset\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--delta-base-offset\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--stdout\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--stdout\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--revs\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--revs\", arg)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--unpacked\", arg)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(\"--unpacked\", arg) ||",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "prefixcmp",
          "new_api": null,
          "old_text": "prefixcmp(arg, \"--unpacked=\")",
          "new_text": null,
          "old_line_content": "\t\t    !prefixcmp(arg, \"--unpacked=\") ||",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(\"--all\", arg)",
          "new_text": null,
          "old_line_content": "\t\t    !strcmp(\"--all\", arg)) {",
          "new_line_content": "\t\t\tuse_internal_rev_list = 1;",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(arg + 16, &c, 10)",
          "new_text": null,
          "old_line_content": "\t\t\tpack_idx_default_version = strtoul(arg + 16, &c, 10);",
          "new_line_content": "\t\t\tthin = 1;",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"bad %s\", arg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdie(\"bad %s\", arg);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(pack_usage);",
          "new_line_content": "\t\t\tif (*c == ',')",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage(pack_usage)",
          "new_text": null,
          "old_line_content": "\t\tusage(pack_usage);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"--max-pack-size cannot be used to build a pack for transfer.\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"--max-pack-size cannot be used to build a pack for transfer.\");",
          "new_line_content": "\t\tbase_name = argv[i++];",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "\tif (pack_to_stdout && pack_size_limit)",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "start_progress",
          "new_api": null,
          "old_text": "start_progress(&progress_state, \"Generating pack...\",\n\t\t\t       \"Counting objects: \", 0)",
          "new_text": null,
          "old_line_content": "\t\tstart_progress(&progress_state, \"Generating pack...\",",
          "new_line_content": "\tif (!pack_to_stdout && thin)",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Done counting %u objects.\\n\", nr_objects)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Done counting %u objects.\\n\", nr_objects);",
          "new_line_content": "\telse {",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "prepare_pack",
          "new_api": null,
          "old_text": "prepare_pack(window, depth)",
          "new_text": null,
          "old_line_content": "\t\tprepare_pack(window, depth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "write_pack_file",
          "new_api": null,
          "old_text": "write_pack_file()",
          "new_text": null,
          "old_line_content": "\twrite_pack_file();",
          "new_line_content": "\tif (non_empty && !nr_result)",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Total %u (delta %u), reused %u (delta %u)\\n\",\n\t\t\twritten, written_delta, reused, reused_delta)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"Total %u (delta %u), reused %u (delta %u)\\n\",",
          "new_line_content": "\tif (progress && (nr_objects != nr_result))",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(trg_entry->idx.sha1, &type, &sz)",
          "new_text": null,
          "old_line_content": "\t\ttrg->data = read_sha1_file(trg_entry->idx.sha1, &type, &sz);",
          "new_line_content": "\tsizediff = src_size < trg_size ? trg_size - src_size : 0;",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"object %s inconsistent object length (%lu vs %lu)\",\n\t\t\t    sha1_to_hex(trg_entry->idx.sha1), sz, trg_size)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"object %s inconsistent object length (%lu vs %lu)\",",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(trg_entry->idx.sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t    sha1_to_hex(trg_entry->idx.sha1), sz, trg_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "warning",
          "new_api": null,
          "old_text": "warning(\"suboptimal pack - out of memory\")",
          "new_text": null,
          "old_line_content": "\t\t\t\twarning(\"suboptimal pack - out of memory\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "create_delta",
          "new_api": null,
          "old_text": "create_delta(src->index, trg->data, trg_size, &delta_size, max_size)",
          "new_text": null,
          "old_line_content": "\tdelta_buf = create_delta(src->index, trg->data, trg_size, &delta_size, max_size);",
          "new_line_content": "\t\t\tif (!warned++)",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta_buf)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(delta_buf);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(trg_entry->delta_data)",
          "new_text": null,
          "old_line_content": "\t\tfree(trg_entry->delta_data);",
          "new_line_content": "\t\tif (delta_size == trg_entry->delta_size &&",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "delta_cacheable",
          "new_api": null,
          "old_text": "delta_cacheable(src, trg, src_size, trg_size, delta_size)",
          "new_text": null,
          "old_line_content": "\tif (delta_cacheable(src, trg, src_size, trg_size, delta_size)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(delta_buf, delta_size)",
          "new_text": null,
          "old_line_content": "\t\ttrg_entry->delta_data = xrealloc(delta_buf, delta_size);",
          "new_line_content": "\ttrg_entry->delta_data = 0;",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta_buf)",
          "new_text": null,
          "old_line_content": "\t\tfree(delta_buf);",
          "new_line_content": "\ttrg_entry->depth = src_entry->depth + 1;",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "check_delta_limit",
          "new_api": null,
          "old_text": "check_delta_limit(child, n + 1)",
          "new_text": null,
          "old_line_content": "\t\tunsigned int c = check_delta_limit(child, n + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(array_size)",
          "new_text": null,
          "old_line_content": "\tarray = xmalloc(array_size);",
          "new_line_content": "\tunsigned int array_size = window * sizeof(struct unpacked);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(array, 0, array_size)",
          "new_text": null,
          "old_line_content": "\tmemset(array, 0, array_size);",
          "new_line_content": "\tstruct unpacked *array;",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "start_progress",
          "new_api": null,
          "old_text": "start_progress(&progress_state, \"Deltifying %u objects...\", \"\", nr_result)",
          "new_text": null,
          "old_line_content": "\t\tstart_progress(&progress_state, \"Deltifying %u objects...\", \"\", nr_result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "display_progress",
          "new_api": null,
          "old_text": "display_progress(&progress_state, processed)",
          "new_text": null,
          "old_line_content": "\t\t\tdisplay_progress(&progress_state, processed);",
          "new_line_content": "\t\tint j;",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "free_delta_index",
          "new_api": null,
          "old_text": "free_delta_index(n->index)",
          "new_text": null,
          "old_line_content": "\t\tfree_delta_index(n->index);",
          "new_line_content": "\t\tif (entry->size < 50)",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(n->data)",
          "new_text": null,
          "old_line_content": "\t\tfree(n->data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "check_delta_limit",
          "new_api": null,
          "old_text": "check_delta_limit(entry, 0)",
          "new_text": null,
          "old_line_content": "\t\t\tmax_depth -= check_delta_limit(entry, 0);",
          "new_line_content": "\t\t * If the current object is at pack edge, take the depth the",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "try_delta",
          "new_api": null,
          "old_text": "try_delta(n, m, max_depth)",
          "new_text": null,
          "old_line_content": "\t\t\tif (try_delta(n, m, max_depth) < 0)",
          "new_line_content": "\t\t\tstruct unpacked *m;",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "stop_progress",
          "new_api": null,
          "old_text": "stop_progress(&progress_state)",
          "new_text": null,
          "old_line_content": "\t\tstop_progress(&progress_state);",
          "new_line_content": "\t\tidx++;",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "free_delta_index",
          "new_api": null,
          "old_text": "free_delta_index(array[i].index)",
          "new_text": null,
          "old_line_content": "\t\tfree_delta_index(array[i].index);",
          "new_line_content": "\t} while (i > 0);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(array[i].data)",
          "new_text": null,
          "old_line_content": "\t\tfree(array[i].data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "get_object_details",
          "new_api": null,
          "old_text": "get_object_details()",
          "new_text": null,
          "old_line_content": "\tget_object_details();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(nr_objects * sizeof(*delta_list))",
          "new_text": null,
          "old_line_content": "\tdelta_list = xmalloc(nr_objects * sizeof(*delta_list));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(delta_list, nr_objects, sizeof(*delta_list), type_size_sort)",
          "new_text": null,
          "old_line_content": "\tqsort(delta_list, nr_objects, sizeof(*delta_list), type_size_sort);",
          "new_line_content": "\tif (!window || !depth)",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "find_deltas",
          "new_api": null,
          "old_text": "find_deltas(delta_list, window+1, depth)",
          "new_text": null,
          "old_line_content": "\tfind_deltas(delta_list, window+1, depth);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta_list)",
          "new_text": null,
          "old_line_content": "\tfree(delta_list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(k, \"pack.depth\")",
          "new_text": null,
          "old_line_content": "\tif(!strcmp(k, \"pack.depth\")) {",
          "new_line_content": "static int git_pack_config(const char *k, const char *v)",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tdepth = git_config_int(k, v);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(k, \"pack.compression\")",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(k, \"pack.compression\")) {",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "git_config_int",
          "new_api": null,
          "old_text": "git_config_int(k, v)",
          "new_text": null,
          "old_line_content": "\t\tint level = git_config_int(k, v);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"bad pack compression level %d\", level)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"bad pack compression level %d\", level);",
          "new_line_content": "\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 30,
      "total_additions": 88,
      "total_deletions": 88,
      "total_api_changes": 206
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 206,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          1344,
          1306,
          1335,
          1336,
          1337,
          1338,
          1339,
          1340,
          1341,
          1342,
          1343
        ]
      }
    },
    "api_calls_before": 340,
    "api_calls_after": 340,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 4,
      "total_diff_lines": 35
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/6620f9134cc36189eecd88375a226a7bd7836a8a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/6620f9134cc36189eecd88375a226a7bd7836a8a/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/6620f9134cc36189eecd88375a226a7bd7836a8a/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/6620f9134cc36189eecd88375a226a7bd7836a8a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 214,
          "old_api": "xstrdup",
          "new_api": "SWAP",
          "old_text": "xstrdup(src->refname)",
          "new_text": "SWAP(refname_cap, ref->refname_cap)",
          "old_line_content": "\t\tref->refname = xstrdup(src->refname);",
          "new_line_content": "\tSWAP(refname_cap, ref->refname_cap);",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": "memcpy",
          "new_api": "REFTABLE_ALLOC_GROW",
          "old_text": "memcpy(ref->value.val1, src->value.val1, hash_size)",
          "new_text": "REFTABLE_ALLOC_GROW(ref->refname, refname_len + 1,\n\t\t\t\t    ref->refname_cap)",
          "old_line_content": "\t\tmemcpy(ref->value.val1, src->value.val1, hash_size);",
          "new_line_content": "\t\tREFTABLE_ALLOC_GROW(ref->refname, refname_len + 1,",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "printf",
          "new_api": "hex_format",
          "old_text": "printf(\"}\\n\")",
          "new_text": "hex_format(hex, ref->value.val2.target_value,\n\t\t\t   hash_size)",
          "old_line_content": "\tprintf(\"}\\n\");",
          "new_line_content": "\t\thex_format(hex, ref->value.val2.target_value,",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "hash_size",
          "new_api": "hex_format",
          "old_text": "hash_size(hash_id)",
          "new_text": "hex_format(hex, ref->value.val1, hash_size)",
          "old_line_content": "\treftable_ref_record_print_sz(ref, hash_size(hash_id));",
          "new_line_content": "\t\thex_format(hex, ref->value.val1, hash_size);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "reftable_free",
          "new_api": "hash_size",
          "old_text": "reftable_free(ref->value.symref)",
          "new_text": "hash_size(hash_id)",
          "old_line_content": "\t\treftable_free(ref->value.symref);",
          "new_line_content": "\treftable_ref_record_print_sz(ref, hash_size(hash_id));",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "string_view_consume",
          "new_api": "put_var_int",
          "old_text": "string_view_consume(&s, n)",
          "new_text": "put_var_int(&s, r->update_index)",
          "old_line_content": "\t\tstring_view_consume(&s, n);",
          "new_line_content": "\tint n = put_var_int(&s, r->update_index);",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "memcpy",
          "new_api": "encode_string",
          "old_text": "memcpy(s.buf, r->value.val2.target_value, hash_size)",
          "new_text": "encode_string(r->value.symref, s)",
          "old_line_content": "\t\tmemcpy(s.buf, r->value.val2.target_value, hash_size);",
          "new_line_content": "\t\tn = encode_string(r->value.symref, s);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "abort",
          "new_api": "string_view_consume",
          "old_text": "abort()",
          "new_text": "string_view_consume(&s, hash_size)",
          "old_line_content": "\t\tabort();",
          "new_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "memcpy",
          "new_api": "get_var_int",
          "old_text": "memcpy(r->refname, key.buf, key.len)",
          "new_text": "get_var_int(&update_index, &in)",
          "old_line_content": "\tmemcpy(r->refname, key.buf, key.len);",
          "new_line_content": "\tn = get_var_int(&update_index, &in);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "memcpy",
          "new_api": "REFTABLE_ALLOC_GROW",
          "old_text": "memcpy(r->value.val1, in.buf, hash_size)",
          "new_text": "REFTABLE_ALLOC_GROW(r->refname, key.len + 1, r->refname_cap)",
          "old_line_content": "\t\tmemcpy(r->value.val1, in.buf, hash_size);",
          "new_line_content": "\tREFTABLE_ALLOC_GROW(r->refname, key.len + 1, r->refname_cap);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "string_view_consume",
          "new_api": "memcpy",
          "old_text": "string_view_consume(&in, hash_size)",
          "new_text": "memcpy(r->refname, key.buf, key.len)",
          "old_line_content": "\t\tstring_view_consume(&in, hash_size);",
          "new_line_content": "\tmemcpy(r->refname, key.buf, key.len);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "strbuf_addf",
          "new_api": "FREE_AND_NULL",
          "old_text": "strbuf_addf(&offset_str, \"%\" PRIu64 \" \", obj->offsets[i])",
          "new_text": "FREE_AND_NULL(obj->offsets)",
          "old_line_content": "\t\tstrbuf_addf(&offset_str, \"%\" PRIu64 \" \", obj->offsets[i]);",
          "new_line_content": "\tFREE_AND_NULL(obj->offsets);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "hex_format",
          "new_api": "memset",
          "old_text": "hex_format(hex, obj->hash_prefix, obj->hash_prefix_len)",
          "new_text": "memset(obj, 0, sizeof(struct reftable_obj_record))",
          "old_line_content": "\thex_format(hex, obj->hash_prefix, obj->hash_prefix_len);",
          "new_line_content": "\tmemset(obj, 0, sizeof(struct reftable_obj_record));",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "reftable_obj_record_release",
          "new_api": "printf",
          "old_text": "reftable_obj_record_release(obj)",
          "new_text": "printf(\"prefix %s (len %d), offsets [%s]\\n\",\n\t       hex, obj->hash_prefix_len, offset_str.buf)",
          "old_line_content": "\treftable_obj_record_release(obj);",
          "new_line_content": "\tprintf(\"prefix %s (len %d), offsets [%s]\\n\",",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": "strbuf_release",
          "old_text": "REFTABLE_ALLOC_ARRAY(obj->hash_prefix, src->hash_prefix_len)",
          "new_text": "strbuf_release(&offset_str)",
          "old_line_content": "\tREFTABLE_ALLOC_ARRAY(obj->hash_prefix, src->hash_prefix_len);",
          "new_line_content": "\tstrbuf_release(&offset_str);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "get_var_int",
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": "get_var_int(&delta, &in)",
          "new_text": "REFTABLE_ALLOC_ARRAY(r->offsets, count)",
          "old_line_content": "\t\tint n = get_var_int(&delta, &in);",
          "new_line_content": "\tREFTABLE_ALLOC_ARRAY(r->offsets, count);",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "hex_format",
          "new_api": "printf",
          "old_text": "hex_format(hex, log->value.update.new_hash, hash_size)",
          "new_text": "printf(\"log{%s(%\" PRIu64 \") delete\\n\", log->refname,\n\t\t       log->update_index)",
          "old_line_content": "\t\thex_format(hex, log->value.update.new_hash, hash_size);",
          "new_line_content": "\t\tprintf(\"log{%s(%\" PRIu64 \") delete\\n\", log->refname,",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "hash_size",
          "new_api": "hex_format",
          "old_text": "hash_size(hash_id)",
          "new_text": "hex_format(hex, log->value.update.old_hash, hash_size)",
          "old_line_content": "\treftable_log_record_print_sz(log, hash_size(hash_id));",
          "new_line_content": "\t\thex_format(hex, log->value.update.old_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": "xstrdup",
          "old_text": "REFTABLE_ALLOC_ARRAY(dst->value.update.new_hash, hash_size)",
          "new_text": "xstrdup(dst->value.update.email)",
          "old_line_content": "\t\t\tREFTABLE_ALLOC_ARRAY(dst->value.update.new_hash, hash_size);",
          "new_line_content": "\t\t\t\txstrdup(dst->value.update.email);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "reftable_free",
          "new_api": "reftable_log_record_release",
          "old_text": "reftable_free(r->value.update.name)",
          "new_text": "reftable_log_record_release(r)",
          "old_line_content": "\t\treftable_free(r->value.update.name);",
          "new_line_content": "\treftable_log_record_release(r);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "memset",
          "new_api": "reftable_free",
          "old_text": "memset(r, 0, sizeof(struct reftable_log_record))",
          "new_text": "reftable_free(r->refname)",
          "old_line_content": "\tmemset(r, 0, sizeof(struct reftable_log_record));",
          "new_line_content": "\treftable_free(r->refname);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "reftable_log_record_is_deletion",
          "new_api": "reftable_free",
          "old_text": "reftable_log_record_is_deletion(log)",
          "new_text": "reftable_free(r->value.update.email)",
          "old_line_content": "\treturn reftable_log_record_is_deletion(log) ? 0 : 1;",
          "new_line_content": "\t\treftable_free(r->value.update.email);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "string_view_consume",
          "new_api": "memcpy",
          "old_text": "string_view_consume(&s, n)",
          "new_text": "memcpy(s.buf + hash_size, newh, hash_size)",
          "old_line_content": "\tstring_view_consume(&s, n);",
          "new_line_content": "\tmemcpy(s.buf + hash_size, newh, hash_size);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "FREE_AND_NULL",
          "new_api": "reftable_realloc",
          "old_text": "FREE_AND_NULL(r->value.update.email)",
          "new_text": "reftable_realloc(r->refname, key.len - 8)",
          "old_line_content": "\t\t\tFREE_AND_NULL(r->value.update.email);",
          "new_line_content": "\tr->refname = reftable_realloc(r->refname, key.len - 8);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "FREE_AND_NULL",
          "new_api": "memcpy",
          "old_text": "FREE_AND_NULL(r->value.update.name)",
          "new_text": "memcpy(r->refname, key.buf, key.len - 8)",
          "old_line_content": "\t\t\tFREE_AND_NULL(r->value.update.name);",
          "new_line_content": "\tmemcpy(r->refname, key.buf, key.len - 8);",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "string_view_consume",
          "new_api": "reftable_realloc",
          "old_text": "string_view_consume(&in, n)",
          "new_text": "reftable_realloc(r->value.update.old_hash, hash_size)",
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "\t\treftable_realloc(r->value.update.old_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "strbuf_reset",
          "new_api": "string_view_consume",
          "old_text": "strbuf_reset(&dest)",
          "new_text": "string_view_consume(&in, 2 * hash_size)",
          "old_line_content": "\tstrbuf_reset(&dest);",
          "new_line_content": "\tstring_view_consume(&in, 2 * hash_size);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "memcpy",
          "new_api": "reftable_realloc",
          "old_text": "memcpy(r->value.update.email, dest.buf, dest.len)",
          "new_text": "reftable_realloc(r->value.update.name, dest.len + 1)",
          "old_line_content": "\tmemcpy(r->value.update.email, dest.buf, dest.len);",
          "new_line_content": "\t\treftable_realloc(r->value.update.name, dest.len + 1);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "get_var_int",
          "new_api": "strbuf_reset",
          "old_text": "get_var_int(&ts, &in)",
          "new_text": "strbuf_reset(&dest)",
          "old_line_content": "\tn = get_var_int(&ts, &in);",
          "new_line_content": "\tstrbuf_reset(&dest);",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "get_be16",
          "new_api": "memcpy",
          "old_text": "get_be16(in.buf)",
          "new_text": "memcpy(r->value.update.email, dest.buf, dest.len)",
          "old_line_content": "\tr->value.update.tz_offset = get_be16(in.buf);",
          "new_line_content": "\tmemcpy(r->value.update.email, dest.buf, dest.len);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "decode_string",
          "new_api": "get_var_int",
          "old_text": "decode_string(&dest, in)",
          "new_text": "get_var_int(&ts, &in)",
          "old_line_content": "\tn = decode_string(&dest, in);",
          "new_line_content": "\tn = get_var_int(&ts, &in);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "BUG",
          "new_api": "reftable_record_data",
          "old_text": "BUG(\"cannot compare reftable records of different type\")",
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "\t\tBUG(\"cannot compare reftable records of different type\");",
          "new_line_content": "\treftable_record_vtable(rec)->release(reftable_record_data(rec));",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "hash_equal",
          "new_api": "assert",
          "old_text": "hash_equal(a->value.val2.value, b->value.val2.value,\n\t\t\t\t  hash_size)",
          "new_text": "assert(hash_size > 0)",
          "old_line_content": "\t\treturn hash_equal(a->value.val2.value, b->value.val2.value,",
          "new_line_content": "\tassert(hash_size > 0);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "BUG",
          "new_api": "memset",
          "old_text": "BUG(\"unhandled record type\")",
          "new_text": "memset(rec, 0, sizeof(*rec))",
          "old_line_content": "\t\tBUG(\"unhandled record type\");",
          "new_line_content": "\tmemset(rec, 0, sizeof(*rec));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&offset_str, \"%\" PRIu64 \" \", obj->offsets[i])",
          "old_line_content": "\t\t(const struct reftable_obj_record *)src_rec;",
          "new_line_content": "\t\tstrbuf_addf(&offset_str, \"%\" PRIu64 \" \", obj->offsets[i]);",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": null,
          "new_api": "hex_format",
          "old_text": null,
          "new_text": "hex_format(hex, obj->hash_prefix, obj->hash_prefix_len)",
          "old_line_content": "",
          "new_line_content": "\thex_format(hex, obj->hash_prefix, obj->hash_prefix_len);",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "null_streq",
          "old_text": null,
          "new_text": "null_streq(a->value.update.name, b->value.update.name)",
          "old_line_content": "",
          "new_line_content": "\t\treturn null_streq(a->value.update.name, b->value.update.name) &&",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "null_streq",
          "old_text": null,
          "new_text": "null_streq(a->value.update.email,\n\t\t\t\t  b->value.update.email)",
          "old_line_content": "",
          "new_line_content": "\t\t       null_streq(a->value.update.email,",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "reftable_obj_record_release",
          "old_text": null,
          "new_text": "reftable_obj_record_release(obj)",
          "old_line_content": "static uint8_t reftable_obj_record_val_type(const void *rec)",
          "new_line_content": "\treftable_obj_record_release(obj);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "null_streq",
          "old_text": null,
          "new_text": "null_streq(a->value.update.message,\n\t\t\t\t  b->value.update.message)",
          "old_line_content": "{",
          "new_line_content": "\t\t       null_streq(a->value.update.message,",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": null,
          "new_text": "REFTABLE_ALLOC_ARRAY(obj->hash_prefix, src->hash_prefix_len)",
          "old_line_content": "\tconst struct reftable_obj_record *r = rec;",
          "new_line_content": "\tREFTABLE_ALLOC_ARRAY(obj->hash_prefix, src->hash_prefix_len);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "zero_hash_eq",
          "old_text": null,
          "new_text": "zero_hash_eq(a->value.update.old_hash,\n\t\t\t\t    b->value.update.old_hash, hash_size)",
          "old_line_content": "\t\t(const struct reftable_log_record *)p);",
          "new_line_content": "\t\t       zero_hash_eq(a->value.update.old_hash,",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "zero_hash_eq",
          "old_text": null,
          "new_text": "zero_hash_eq(a->value.update.new_hash,\n\t\t\t\t    b->value.update.new_hash, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\t       zero_hash_eq(a->value.update.new_hash,",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(obj->hash_prefix, src->hash_prefix, obj->hash_prefix_len)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tmemcpy(obj->hash_prefix, src->hash_prefix, obj->hash_prefix_len);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": null,
          "new_text": "REFTABLE_ALLOC_ARRAY(obj->offsets, src->offset_len)",
          "old_line_content": "",
          "new_line_content": "\tREFTABLE_ALLOC_ARRAY(obj->offsets, src->offset_len);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "}",
          "new_line_content": "\tabort();",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "COPY_ARRAY",
          "old_text": null,
          "new_text": "COPY_ARRAY(obj->offsets, src->offsets, src->offset_len)",
          "old_line_content": "\t\t\t\t      int hash_size)",
          "new_line_content": "\tCOPY_ARRAY(obj->offsets, src->offsets, src->offset_len);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "reftable_log_record_is_deletion",
          "old_text": null,
          "new_text": "reftable_log_record_is_deletion(\n\t\t(const struct reftable_log_record *)p)",
          "old_line_content": "\t.copy_from = &reftable_log_record_copy_from,",
          "new_line_content": "\treturn reftable_log_record_is_deletion(",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "reftable_log_record_print_sz",
          "old_text": null,
          "new_text": "reftable_log_record_print_sz((struct reftable_log_record*)rec, hash_size)",
          "old_line_content": "\t.equal = &reftable_log_record_equal_void,",
          "new_line_content": "\treftable_log_record_print_sz((struct reftable_log_record*)rec, hash_size);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": null,
          "new_api": "put_var_int",
          "old_text": null,
          "new_text": "put_var_int(&s, r->offset_len)",
          "old_line_content": "",
          "new_line_content": "\t\tn = put_var_int(&s, r->offset_len);",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "\t\tif (n < 0) {",
          "new_line_content": "\t\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "put_var_int",
          "old_text": null,
          "new_text": "put_var_int(&s, r->offsets[0])",
          "old_line_content": "\t\tlast = r->offsets[i];",
          "new_line_content": "\tn = put_var_int(&s, r->offsets[0]);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(dest)",
          "old_line_content": "\tdst->offset = src->offset;",
          "new_line_content": "\tstrbuf_reset(dest);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "}",
          "new_line_content": "\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "strbuf_addbuf",
          "old_text": null,
          "new_text": "strbuf_addbuf(dest, &rec->last_key)",
          "old_line_content": "}",
          "new_line_content": "\tstrbuf_addbuf(dest, &rec->last_key);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "put_var_int",
          "old_text": null,
          "new_text": "put_var_int(&s, r->offsets[i] - last)",
          "old_line_content": "\t\t\t\t      int hash_size)",
          "new_line_content": "\t\tint n = put_var_int(&s, r->offsets[i] - last);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "\tuint64_t count = val_type;",
          "new_line_content": "\t\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&dst->last_key)",
          "old_line_content": "{",
          "new_line_content": "\tstrbuf_reset(&dst->last_key);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "strbuf_addbuf",
          "old_text": null,
          "new_text": "strbuf_addbuf(&dst->last_key, &src->last_key)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\tstrbuf_addbuf(&dst->last_key, &src->last_key);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&idx->last_key)",
          "old_line_content": "\t\t(const struct reftable_index_record *)rec;",
          "new_line_content": "\tstrbuf_release(&idx->last_key);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": null,
          "new_text": "REFTABLE_ALLOC_ARRAY(r->hash_prefix, key.len)",
          "old_line_content": "",
          "new_line_content": "\tREFTABLE_ALLOC_ARRAY(r->hash_prefix, key.len);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->hash_prefix, key.buf, key.len)",
          "old_line_content": "\tr->offsets = NULL;",
          "new_line_content": "\tmemcpy(r->hash_prefix, key.buf, key.len);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "get_var_int",
          "old_text": null,
          "new_text": "get_var_int(&count, &in)",
          "old_line_content": "",
          "new_line_content": "\t\tn = get_var_int(&count, &in);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "put_var_int",
          "old_text": null,
          "new_text": "put_var_int(&out, r->offset)",
          "old_line_content": "{",
          "new_line_content": "\tint n = put_var_int(&out, r->offset);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "\tif (n < 0)",
          "new_line_content": "\t\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&out, n)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&out, n);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "get_var_int",
          "old_text": null,
          "new_text": "get_var_int(&r->offsets[0], &in)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tn = get_var_int(&r->offsets[0], &in);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "\t\tlast = r->offsets[j] = (delta + last);",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&r->last_key)",
          "old_line_content": "{",
          "new_line_content": "\tstrbuf_reset(&r->last_key);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "strbuf_addbuf",
          "old_text": null,
          "new_text": "strbuf_addbuf(&r->last_key, &key)",
          "old_line_content": "\tstruct reftable_index_record *ia = (struct reftable_index_record *) a;",
          "new_line_content": "\tstrbuf_addbuf(&r->last_key, &key);",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "get_var_int",
          "old_text": null,
          "new_text": "get_var_int(&r->offset, &in)",
          "old_line_content": "",
          "new_line_content": "\tn = get_var_int(&r->offset, &in);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "get_var_int",
          "old_text": null,
          "new_text": "get_var_int(&delta, &in)",
          "old_line_content": "static int not_a_deletion(const void *p)",
          "new_line_content": "\t\tint n = get_var_int(&delta, &in);",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "static int reftable_index_record_cmp(const void *_a, const void *_b)",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "",
          "new_line_content": "\t\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": null,
          "new_api": "strbuf_cmp",
          "old_text": null,
          "new_text": "strbuf_cmp(&ia->last_key, &ib->last_key)",
          "old_line_content": "\tconst struct reftable_index_record *idx = rec;",
          "new_line_content": "\treturn ia->offset == ib->offset && !strbuf_cmp(&ia->last_key, &ib->last_key);",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "strbuf_cmp",
          "old_text": null,
          "new_text": "strbuf_cmp(&a->last_key, &b->last_key)",
          "old_line_content": "\t.type = BLOCK_TYPE_INDEX,",
          "new_line_content": "\treturn strbuf_cmp(&a->last_key, &b->last_key);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"\\\"%s\\\" %\" PRIu64 \"\\n\", idx->last_key.buf, idx->offset)",
          "old_line_content": "\t.equal = &reftable_index_record_equal,",
          "new_line_content": "\tprintf(\"\\\"%s\\\" %\" PRIu64 \"\\n\", idx->last_key.buf, idx->offset);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(ra->hash_prefix, rb->hash_prefix, ra->hash_prefix_len)",
          "old_line_content": "\tconst struct reftable_obj_record *b = _b;",
          "new_line_content": "\t    memcmp(ra->hash_prefix, rb->hash_prefix, ra->hash_prefix_len))",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(a->hash_prefix, b->hash_prefix,\n\t\t     a->hash_prefix_len > b->hash_prefix_len ?\n\t\t     a->hash_prefix_len : b->hash_prefix_len)",
          "old_line_content": "",
          "new_line_content": "\tcmp = memcmp(a->hash_prefix, b->hash_prefix,",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "\t\t\t\t\t\t   dest, hash_size);",
          "new_line_content": "\treftable_record_vtable(rec)->key(reftable_record_data(rec), dest);",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "}",
          "new_line_content": "\treturn reftable_record_vtable(rec)->encode(reftable_record_data(rec),",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(src->type == rec->type)",
          "old_line_content": "int reftable_record_decode(struct reftable_record *rec, struct strbuf key,",
          "new_line_content": "\tassert(src->type == rec->type);",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "{",
          "new_line_content": "\treftable_record_vtable(rec)->copy_from(reftable_record_data(rec),",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"log{%s(%\" PRIu64 \") %s <%s> %\" PRIu64 \" %04d\\n\",\n\t\t       log->refname, log->update_index,\n\t\t       log->value.update.name ? log->value.update.name : \"\",\n\t\t       log->value.update.email ? log->value.update.email : \"\",\n\t\t       log->value.update.time,\n\t\t       log->value.update.tz_offset)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintf(\"log{%s(%\" PRIu64 \") %s <%s> %\" PRIu64 \" %04d\\n\",",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s => \", hex)",
          "old_line_content": "}",
          "new_line_content": "\t\tprintf(\"%s => \", hex);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "hex_format",
          "old_text": null,
          "new_text": "hex_format(hex, log->value.update.new_hash, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\thex_format(hex, log->value.update.new_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s\\n\\n%s\\n}\\n\", hex,\n\t\t       log->value.update.message ? log->value.update.message : \"\")",
          "old_line_content": "static void reftable_log_record_key(const void *r, struct strbuf *dest)",
          "new_line_content": "\t\tprintf(\"%s\\n\\n%s\\n}\\n\", hex,",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "is_deletion",
          "old_text": null,
          "new_text": "reftable_record_vtable(rec)->is_deletion(\n\t\treftable_record_data(rec))",
          "old_line_content": "int reftable_record_equal(struct reftable_record *a, struct reftable_record *b, int hash_size)",
          "new_line_content": "\treturn reftable_record_vtable(rec)->is_deletion(",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "{",
          "new_line_content": "\t\treftable_record_data(rec));",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"cannot compare reftable records of different type\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"cannot compare reftable records of different type\");",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "cmp",
          "old_text": null,
          "new_text": "reftable_record_vtable(a)->cmp(\n\t\treftable_record_data(a), reftable_record_data(b))",
          "old_line_content": "static int hash_equal(const unsigned char *a, const unsigned char *b, int hash_size)",
          "new_line_content": "\treturn reftable_record_vtable(a)->cmp(",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(b)",
          "old_line_content": "{",
          "new_line_content": "\t\treftable_record_data(a), reftable_record_data(b));",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "hash_size",
          "old_text": null,
          "new_text": "hash_size(hash_id)",
          "old_line_content": "",
          "new_line_content": "\treftable_log_record_print_sz(log, hash_size(hash_id));",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(hash_size > 0)",
          "old_line_content": "\t * fields. */",
          "new_line_content": "\tassert(hash_size > 0);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "equal",
          "old_text": null,
          "new_text": "reftable_record_vtable(a)->equal(\n\t\treftable_record_data(a), reftable_record_data(b), hash_size)",
          "old_line_content": "int reftable_ref_record_equal(const struct reftable_ref_record *a,",
          "new_line_content": "\treturn reftable_record_vtable(a)->equal(",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(b)",
          "old_line_content": "\t\t\t      const struct reftable_ref_record *b, int hash_size)",
          "new_line_content": "\t\treftable_record_data(a), reftable_record_data(b), hash_size);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(refname, ref->refname)",
          "old_line_content": "\tif (src->refname) {",
          "new_line_content": "\tSWAP(refname, ref->refname);",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(ref)",
          "old_line_content": "\t}",
          "new_line_content": "\treftable_ref_record_release(ref);",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(ref->refname, refname)",
          "old_line_content": "\tref->update_index = src->update_index;",
          "new_line_content": "\tSWAP(ref->refname, refname);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(ref->refname_cap, refname_cap)",
          "old_line_content": "\tref->value_type = src->value_type;",
          "new_line_content": "\tSWAP(ref->refname_cap, refname_cap);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(rec->refname)",
          "old_line_content": "\t\t\t\t\t  int hash_size)",
          "new_line_content": "\tint len = strlen(rec->refname);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(dest)",
          "old_line_content": "\tconst struct reftable_log_record *src =",
          "new_line_content": "\tstrbuf_reset(dest);",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(src->refname)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tsize_t refname_len = strlen(src->refname);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(dest, (uint8_t *)rec->refname, len + 1)",
          "old_line_content": "\t\t(const struct reftable_log_record *)src_rec;",
          "new_line_content": "\tstrbuf_add(dest, (uint8_t *)rec->refname, len + 1);",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "put_be64",
          "old_text": null,
          "new_text": "put_be64(&i64[0], ts)",
          "old_line_content": "\t*dst = *src;",
          "new_line_content": "\tput_be64(&i64[0], ts);",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref->refname, src->refname, refname_len)",
          "old_line_content": "\tcase REFTABLE_REF_VAL2:",
          "new_line_content": "\t\tmemcpy(ref->refname, src->refname, refname_len);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(dest, i64, sizeof(i64))",
          "old_line_content": "\tif (dst->refname) {",
          "new_line_content": "\tstrbuf_add(dest, i64, sizeof(i64));",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(a, b, hash_size)",
          "old_line_content": "\tif (a->update_index != b->update_index ||",
          "new_line_content": "\t\treturn !memcmp(a, b, hash_size);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "null_streq",
          "old_text": null,
          "new_text": "null_streq(a->refname, b->refname)",
          "old_line_content": "\t\t\t\t  hash_size) &&",
          "new_line_content": "\tif (!null_streq(a->refname, b->refname))",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(dst)",
          "old_line_content": "\t\t}",
          "new_line_content": "\treftable_log_record_release(dst);",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref->value.val1, src->value.val1, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\tmemcpy(ref->value.val1, src->value.val1, hash_size);",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref->value.val2.value, src->value.val2.value, hash_size)",
          "old_line_content": "\tif (c <= 9)",
          "new_line_content": "\t\tmemcpy(ref->value.val2.value, src->value.val2.value, hash_size);",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref->value.val2.target_value,\n\t\t       src->value.val2.target_value, hash_size)",
          "old_line_content": "\t\treturn '0' + c;",
          "new_line_content": "\t\tmemcpy(ref->value.val2.target_value,",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a->value.symref, b->value.symref)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn !strcmp(a->value.symref, b->value.symref);",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "hash_equal",
          "old_text": null,
          "new_text": "hash_equal(a->value.val2.value, b->value.val2.value,\n\t\t\t\t  hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\treturn hash_equal(a->value.val2.value, b->value.val2.value,",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(src->value.symref)",
          "old_line_content": "static void hex_format(char *dest, const unsigned char *src, int hash_size)",
          "new_line_content": "\t\tref->value.symref = xstrdup(src->value.symref);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "hash_equal",
          "old_text": null,
          "new_text": "hash_equal(a->value.val2.target_value,\n\t\t\t\t  b->value.val2.target_value, hash_size)",
          "old_line_content": "{",
          "new_line_content": "\t\t       hash_equal(a->value.val2.target_value,",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "hash_equal",
          "old_text": null,
          "new_text": "hash_equal(a->value.val1, b->value.val1, hash_size)",
          "old_line_content": "}",
          "new_line_content": "\t\treturn hash_equal(a->value.val1, b->value.val1, hash_size);",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(dst->value.update.name)",
          "old_line_content": "\t\tif (dst->value.update.old_hash) {",
          "new_line_content": "\t\t\t\txstrdup(dst->value.update.name);",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "\treturn ref->value_type == REFTABLE_REF_DELETION;",
          "new_line_content": "\t\tabort();",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(dst->value.update.message)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\txstrdup(dst->value.update.message);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(((struct reftable_ref_record *)a)->refname,\n\t\t      ((struct reftable_ref_record *)b)->refname)",
          "old_line_content": "\tconst struct reftable_log_record *lb = b;",
          "new_line_content": "\treturn strcmp(((struct reftable_ref_record *)a)->refname,",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(hash_size > 0)",
          "old_line_content": "\t\t\t\t\t int hash_size)",
          "new_line_content": "\tassert(hash_size > 0);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": null,
          "new_text": "REFTABLE_ALLOC_ARRAY(dst->value.update.new_hash, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\t\tREFTABLE_ALLOC_ARRAY(dst->value.update.new_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst->value.update.new_hash,\n\t\t\t       src->value.update.new_hash, hash_size)",
          "old_line_content": "static void reftable_log_record_release_void(void *rec)",
          "new_line_content": "\t\t\tmemcpy(dst->value.update.new_hash,",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "hexdigit",
          "old_text": null,
          "new_text": "hexdigit(src[i] >> 4)",
          "old_line_content": "\tswitch (ref->value_type) {",
          "new_line_content": "\t\t\tdest[2 * i] = hexdigit(src[i] >> 4);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "hexdigit",
          "old_text": null,
          "new_text": "hexdigit(src[i] & 0xf)",
          "old_line_content": "\tcase REFTABLE_REF_SYMREF:",
          "new_line_content": "\t\t\tdest[2 * i + 1] = hexdigit(src[i] & 0xf);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "REFTABLE_ALLOC_ARRAY",
          "old_text": null,
          "new_text": "REFTABLE_ALLOC_ARRAY(dst->value.update.old_hash, hash_size)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tREFTABLE_ALLOC_ARRAY(dst->value.update.old_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst->value.update.old_hash,\n\t\t\t       src->value.update.old_hash, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemcpy(dst->value.update.old_hash,",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(la->refname, lb->refname)",
          "old_line_content": "",
          "new_line_content": "\tint cmp = strcmp(la->refname, lb->refname);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"ref{%s(%\" PRIu64 \") \", ref->refname, ref->update_index)",
          "old_line_content": "\tcase REFTABLE_REF_VAL1:",
          "new_line_content": "\tprintf(\"ref{%s(%\" PRIu64 \") \", ref->refname, ref->update_index);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"=> %s\", ref->value.symref)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tprintf(\"=> %s\", ref->value.symref);",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "hex_format",
          "old_text": null,
          "new_text": "hex_format(hex, ref->value.val2.value, hash_size)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\thex_format(hex, ref->value.val2.value, hash_size);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"val 2 %s\", hex)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintf(\"val 2 %s\", hex);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"(T %s)\", hex)",
          "old_line_content": "",
          "new_line_content": "\t\tprintf(\"(T %s)\", hex);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "reftable_free",
          "old_text": null,
          "new_text": "reftable_free(r->value.update.new_hash)",
          "old_line_content": "\tconst struct reftable_log_record *log =",
          "new_line_content": "\t\treftable_free(r->value.update.new_hash);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "reftable_free",
          "old_text": null,
          "new_text": "reftable_free(r->value.update.old_hash)",
          "old_line_content": "\t\t(const struct reftable_log_record *)rec;",
          "new_line_content": "\t\treftable_free(r->value.update.old_hash);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "reftable_free",
          "old_text": null,
          "new_text": "reftable_free(r->value.update.name)",
          "old_line_content": "",
          "new_line_content": "\t\treftable_free(r->value.update.name);",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"val 1 %s\", hex)",
          "old_line_content": "}",
          "new_line_content": "\t\tprintf(\"val 1 %s\", hex);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "reftable_free",
          "old_text": null,
          "new_text": "reftable_free(r->value.update.message)",
          "old_line_content": "}",
          "new_line_content": "\t\treftable_free(r->value.update.message);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"delete\")",
          "old_line_content": "{",
          "new_line_content": "\t\tprintf(\"delete\");",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(r, 0, sizeof(struct reftable_log_record))",
          "old_line_content": "",
          "new_line_content": "\tmemset(r, 0, sizeof(struct reftable_log_record));",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"}\\n\")",
          "old_line_content": "",
          "new_line_content": "\tprintf(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "reftable_log_record_is_deletion",
          "old_text": null,
          "new_text": "reftable_log_record_is_deletion(log)",
          "old_line_content": "\tuint8_t *newh = NULL;",
          "new_line_content": "\treturn reftable_log_record_is_deletion(log) ? 0 : 1;",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "\t\treturn &reftable_index_record_vtable;",
          "new_line_content": "\tabort();",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(rec)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\treftable_ref_record_release(rec);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "reftable_log_record_is_deletion",
          "old_text": null,
          "new_text": "reftable_log_record_is_deletion(r)",
          "old_line_content": "\tif (s.len < 2 * hash_size)",
          "new_line_content": "\tif (reftable_log_record_is_deletion(r))",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\tabort();",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "}",
          "new_line_content": "\t\tabort();",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "reftable_free",
          "old_text": null,
          "new_text": "reftable_free(ref->refname)",
          "old_line_content": "\t\t\t\t      int hash_size)",
          "new_line_content": "\treftable_free(ref->refname);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(ref, 0, sizeof(struct reftable_ref_record))",
          "old_line_content": "{",
          "new_line_content": "\tmemset(ref, 0, sizeof(struct reftable_ref_record));",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s.buf, oldh, hash_size)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tmemcpy(s.buf, oldh, hash_size);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, 2 * hash_size)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&s, 2 * hash_size);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": null,
          "new_api": "encode_string",
          "old_text": null,
          "new_text": "encode_string(r->value.update.name ? r->value.update.name : \"\", s)",
          "old_line_content": "\tif (n < 0)",
          "new_line_content": "\tn = encode_string(r->value.update.name ? r->value.update.name : \"\", s);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&rec->u.idx.last_key, 0)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_init(&rec->u.idx.last_key, 0);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"unhandled record type\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"unhandled record type\");",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": null,
          "new_api": "encode_string",
          "old_text": null,
          "new_text": "encode_string(r->value.update.email ? r->value.update.email : \"\",\n\t\t\t  s)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tn = encode_string(r->value.update.email ? r->value.update.email : \"\",",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(hash_size > 0)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\tassert(hash_size > 0);",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "put_var_int",
          "old_text": null,
          "new_text": "put_var_int(&s, r->value.update.time)",
          "old_line_content": "\t\tr->value.update.message ? r->value.update.message : \"\", s);",
          "new_line_content": "\tn = put_var_int(&s, r->value.update.time);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"'%c': \", rec->type)",
          "old_line_content": "",
          "new_line_content": "\tprintf(\"'%c': \", rec->type);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "reftable_record_data",
          "old_text": null,
          "new_text": "reftable_record_data(rec)",
          "old_line_content": "",
          "new_line_content": "\treftable_record_vtable(rec)->print(reftable_record_data(rec), hash_size);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "put_be16",
          "old_text": null,
          "new_text": "put_be16(s.buf, r->value.update.tz_offset)",
          "old_line_content": "static int reftable_log_record_decode(void *rec, struct strbuf key,",
          "new_line_content": "\tput_be16(s.buf, r->value.update.tz_offset);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "\t\tif (s.len < hash_size) {",
          "new_line_content": "\t\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, 2)",
          "old_line_content": "\t\t\t\t      uint8_t val_type, struct string_view in,",
          "new_line_content": "\tstring_view_consume(&s, 2);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "encode_string",
          "old_text": null,
          "new_text": "encode_string(\n\t\tr->value.update.message ? r->value.update.message : \"\", s)",
          "old_line_content": "{",
          "new_line_content": "\tn = encode_string(",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s.buf, r->value.val2.value, hash_size)",
          "old_line_content": "\tcase REFTABLE_REF_DELETION:",
          "new_line_content": "\t\tmemcpy(s.buf, r->value.val2.value, hash_size);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, hash_size)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s.buf, r->value.val2.target_value, hash_size)",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\tmemcpy(s.buf, r->value.val2.target_value, hash_size);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, n)",
          "old_line_content": "\tuint64_t ts = 0;",
          "new_line_content": "\tstring_view_consume(&s, n);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(s.buf, r->value.val1, hash_size)",
          "old_line_content": "static int reftable_ref_record_decode(void *rec, struct strbuf key,",
          "new_line_content": "\t\tmemcpy(s.buf, r->value.val1, hash_size);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&s, hash_size)",
          "old_line_content": "\t\t\t\t      uint8_t val_type, struct string_view in,",
          "new_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "\tuint64_t update_index = 0;",
          "new_line_content": "\t\tabort();",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "get_be64",
          "old_text": null,
          "new_text": "get_be64(key.buf + key.len - 8)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\tts = get_be64(key.buf + key.len - 8);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(r->value.update.old_hash)",
          "old_line_content": "\tif (val_type == REFTABLE_LOG_DELETION)",
          "new_line_content": "\t\t\tFREE_AND_NULL(r->value.update.old_hash);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(r->value.update.new_hash)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t\t\tFREE_AND_NULL(r->value.update.new_hash);",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(r->value.update.message)",
          "old_line_content": "",
          "new_line_content": "\t\t\tFREE_AND_NULL(r->value.update.message);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(r->value.update.email)",
          "old_line_content": "\tif (in.len < 2 * hash_size)",
          "new_line_content": "\t\t\tFREE_AND_NULL(r->value.update.email);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(hash_size > 0)",
          "old_line_content": "",
          "new_line_content": "\tassert(hash_size > 0);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(r->value.update.name)",
          "old_line_content": "\t\treturn REFTABLE_FORMAT_ERROR;",
          "new_line_content": "\t\t\tFREE_AND_NULL(r->value.update.name);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "\tr->update_index = update_index;",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(refname, r->refname)",
          "old_line_content": "\tswitch (val_type) {",
          "new_line_content": "\tSWAP(refname, r->refname);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(refname_cap, r->refname_cap)",
          "old_line_content": "\tcase REFTABLE_REF_VAL1:",
          "new_line_content": "\tSWAP(refname_cap, r->refname_cap);",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(r)",
          "old_line_content": "\t\tif (in.len < hash_size) {",
          "new_line_content": "\treftable_ref_record_release(r);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(r->refname, refname)",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\tSWAP(r->refname, refname);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "SWAP",
          "old_text": null,
          "new_text": "SWAP(r->refname_cap, refname_cap)",
          "old_line_content": "\t\t}",
          "new_line_content": "\tSWAP(r->refname_cap, refname_cap);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "reftable_realloc",
          "old_text": null,
          "new_text": "reftable_realloc(r->value.update.new_hash, hash_size)",
          "old_line_content": "\tr->value.update.name =",
          "new_line_content": "\t\treftable_realloc(r->value.update.new_hash, hash_size);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->value.update.new_hash, in.buf + hash_size, hash_size)",
          "old_line_content": "\tr->value.update.name[dest.len] = 0;",
          "new_line_content": "\tmemcpy(r->value.update.new_hash, in.buf + hash_size, hash_size);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "decode_string",
          "old_text": null,
          "new_text": "decode_string(&dest, in)",
          "old_line_content": "\tif (n < 0)",
          "new_line_content": "\tn = decode_string(&dest, in);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->value.update.name, dest.buf, dest.len)",
          "old_line_content": "\tr->value.update.email[dest.len] = 0;",
          "new_line_content": "\tmemcpy(r->value.update.name, dest.buf, dest.len);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->value.val2.value, in.buf, hash_size)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tmemcpy(r->value.val2.value, in.buf, hash_size);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "decode_string",
          "old_text": null,
          "new_text": "decode_string(&dest, in)",
          "old_line_content": "\tif (n < 0)",
          "new_line_content": "\tn = decode_string(&dest, in);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->value.val2.target_value, in.buf, hash_size)",
          "old_line_content": "\t} break;",
          "new_line_content": "\t\tmemcpy(r->value.val2.target_value, in.buf, hash_size);",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, hash_size)",
          "old_line_content": "",
          "new_line_content": "\t\tstring_view_consume(&in, hash_size);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "\tr->value.update.time = ts;",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "reftable_realloc",
          "old_text": null,
          "new_text": "reftable_realloc(r->value.update.email, dest.len + 1)",
          "old_line_content": "",
          "new_line_content": "\t\treftable_realloc(r->value.update.email, dest.len + 1);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "decode_string",
          "old_text": null,
          "new_text": "decode_string(&dest, in)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tint n = decode_string(&dest, in);",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "}",
          "new_line_content": "\t\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "abort",
          "old_text": null,
          "new_text": "abort()",
          "old_line_content": "",
          "new_line_content": "\t\tabort();",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "get_be16",
          "old_text": null,
          "new_text": "get_be16(in.buf)",
          "old_line_content": "\tr->value.update.message[dest.len] = 0;",
          "new_line_content": "\tr->value.update.tz_offset = get_be16(in.buf);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, 2)",
          "old_line_content": "",
          "new_line_content": "\tstring_view_consume(&in, 2);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&dest)",
          "old_line_content": "\treturn start.len - in.len;",
          "new_line_content": "\tstrbuf_reset(&dest);",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "decode_string",
          "old_text": null,
          "new_text": "decode_string(&dest, in)",
          "old_line_content": "",
          "new_line_content": "\tn = decode_string(&dest, in);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "string_view_consume",
          "old_text": null,
          "new_text": "string_view_consume(&in, n)",
          "old_line_content": "\treturn REFTABLE_FORMAT_ERROR;",
          "new_line_content": "\tstring_view_consume(&in, n);",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "reftable_ref_record_is_deletion",
          "old_text": null,
          "new_text": "reftable_ref_record_is_deletion(\n\t\t(const struct reftable_ref_record *)p)",
          "old_line_content": "static int reftable_ref_record_cmp_void(const void *_a, const void *_b)",
          "new_line_content": "\treturn reftable_ref_record_is_deletion(",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "reftable_realloc",
          "old_text": null,
          "new_text": "reftable_realloc(r->value.update.message, dest.len + 1)",
          "old_line_content": "static int null_streq(char *a, char *b)",
          "new_line_content": "\t\treftable_realloc(r->value.update.message, dest.len + 1);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(r->value.update.message, dest.buf, dest.len)",
          "old_line_content": "{",
          "new_line_content": "\tmemcpy(r->value.update.message, dest.buf, dest.len);",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&dest)",
          "old_line_content": "\t\ta = empty;",
          "new_line_content": "\tstrbuf_release(&dest);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "reftable_ref_record_equal",
          "old_text": null,
          "new_text": "reftable_ref_record_equal(ra, rb, hash_size)",
          "old_line_content": "{",
          "new_line_content": "\treturn reftable_ref_record_equal(ra, rb, hash_size);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&dest)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&dest);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a->refname, b->refname)",
          "old_line_content": "\t.copy_from = &reftable_ref_record_copy_from,",
          "new_line_content": "\treturn strcmp(a->refname, b->refname);",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "reftable_ref_record_print_sz",
          "old_text": null,
          "new_text": "reftable_ref_record_print_sz((struct reftable_ref_record *) rec, hash_size)",
          "old_line_content": "\t.equal = &reftable_ref_record_equal_void,",
          "new_line_content": "\treftable_ref_record_print_sz((struct reftable_ref_record *) rec, hash_size);",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a, b)",
          "old_line_content": "}",
          "new_line_content": "\treturn 0 == strcmp(a, b);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(a, b, sz)",
          "old_line_content": "{",
          "new_line_content": "\treturn !memcmp(a, b, sz);",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "reftable_log_record_equal",
          "old_text": null,
          "new_text": "reftable_log_record_equal((struct reftable_log_record *) a,\n\t\t\t\t\t (struct reftable_log_record *) b,\n\t\t\t\t\t hash_size)",
          "old_line_content": "",
          "new_line_content": "\treturn reftable_log_record_equal((struct reftable_log_record *) a,",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(dest)",
          "old_line_content": "static void reftable_obj_record_print(const void *rec, int hash_size)",
          "new_line_content": "\tstrbuf_reset(dest);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(dest, rec->hash_prefix, rec->hash_prefix_len)",
          "old_line_content": "{",
          "new_line_content": "\tstrbuf_add(dest, rec->hash_prefix, rec->hash_prefix_len);",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(a->refname, b->refname)",
          "old_line_content": "int reftable_log_record_equal(const struct reftable_log_record *a,",
          "new_line_content": "\tint cmp = strcmp(a->refname, b->refname);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(obj->hash_prefix)",
          "old_line_content": "\tfor (i = 0; i < obj->offset_len; i++)",
          "new_line_content": "\tFREE_AND_NULL(obj->hash_prefix);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1027,
          "old_api": "null_streq",
          "new_api": null,
          "old_text": "null_streq(a->value.update.message,\n\t\t\t\t  b->value.update.message)",
          "new_text": null,
          "old_line_content": "\t\t       null_streq(a->value.update.message,",
          "new_line_content": "\t      a->value_type == b->value_type))",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "zero_hash_eq",
          "new_api": null,
          "old_text": "zero_hash_eq(a->value.update.old_hash,\n\t\t\t\t    b->value.update.old_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t       zero_hash_eq(a->value.update.old_hash,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "zero_hash_eq",
          "new_api": null,
          "old_text": "zero_hash_eq(a->value.update.new_hash,\n\t\t\t\t    b->value.update.new_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t       zero_hash_eq(a->value.update.new_hash,",
          "new_line_content": "\tcase REFTABLE_LOG_DELETION:",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(obj->hash_prefix, src->hash_prefix, obj->hash_prefix_len)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(obj->hash_prefix, src->hash_prefix, obj->hash_prefix_len);",
          "new_line_content": "static void reftable_obj_record_copy_from(void *rec, const void *src_rec,",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": null,
          "old_text": "REFTABLE_ALLOC_ARRAY(obj->offsets, src->offset_len)",
          "new_text": null,
          "old_line_content": "\tREFTABLE_ALLOC_ARRAY(obj->offsets, src->offset_len);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\tabort();",
          "new_line_content": "\t\t       a->value.update.time == b->value.update.time &&",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "COPY_ARRAY",
          "new_api": null,
          "old_text": "COPY_ARRAY(obj->offsets, src->offsets, src->offset_len)",
          "new_text": null,
          "old_line_content": "\tCOPY_ARRAY(obj->offsets, src->offsets, src->offset_len);",
          "new_line_content": "\tconst struct reftable_obj_record *src =",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "reftable_log_record_is_deletion",
          "new_api": null,
          "old_text": "reftable_log_record_is_deletion(\n\t\t(const struct reftable_log_record *)p)",
          "new_text": null,
          "old_line_content": "\treturn reftable_log_record_is_deletion(",
          "new_line_content": "\t\t\t\t  b->value.update.message) &&",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "reftable_log_record_print_sz",
          "new_api": null,
          "old_text": "reftable_log_record_print_sz((struct reftable_log_record*)rec, hash_size)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_print_sz((struct reftable_log_record*)rec, hash_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&s, r->offset_len)",
          "new_text": null,
          "old_line_content": "\t\tn = put_var_int(&s, r->offset_len);",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&s, n);",
          "new_line_content": "\t\t\t\t      int hash_size)",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&s, r->offsets[0])",
          "new_text": null,
          "old_line_content": "\tn = put_var_int(&s, r->offsets[0]);",
          "new_line_content": "\tint i = 0;",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(dest);",
          "new_line_content": "\t.encode = &reftable_log_record_encode,",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, n);",
          "new_line_content": "\tif (r->offset_len == 0 || r->offset_len >= 8) {",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "strbuf_addbuf",
          "new_api": null,
          "old_text": "strbuf_addbuf(dest, &rec->last_key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addbuf(dest, &rec->last_key);",
          "new_line_content": "\t.decode = &reftable_log_record_decode,",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&s, r->offsets[i] - last)",
          "new_text": null,
          "old_line_content": "\t\tint n = put_var_int(&s, r->offsets[i] - last);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&s, n);",
          "new_line_content": "\t\treturn start.len - s.len;",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&dst->last_key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(&dst->last_key);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "strbuf_addbuf",
          "new_api": null,
          "old_text": "strbuf_addbuf(&dst->last_key, &src->last_key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addbuf(&dst->last_key, &src->last_key);",
          "new_line_content": "\tconst struct reftable_index_record *rec = r;",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&idx->last_key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&idx->last_key);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": null,
          "old_text": "REFTABLE_ALLOC_ARRAY(r->hash_prefix, key.len)",
          "new_text": null,
          "old_line_content": "\tREFTABLE_ALLOC_ARRAY(r->hash_prefix, key.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->hash_prefix, key.buf, key.len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(r->hash_prefix, key.buf, key.len);",
          "new_line_content": "static int reftable_obj_record_decode(void *rec, struct strbuf key,",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "get_var_int",
          "new_api": null,
          "old_text": "get_var_int(&count, &in)",
          "new_text": null,
          "old_line_content": "\t\tn = get_var_int(&count, &in);",
          "new_line_content": "\tstruct string_view start = in;",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&out, r->offset)",
          "new_text": null,
          "old_line_content": "\tint n = put_var_int(&out, r->offset);",
          "new_line_content": "static uint8_t reftable_index_record_val_type(const void *rec)",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&in, n);",
          "new_line_content": "\tint j;",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&out, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&out, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": null,
          "old_text": "REFTABLE_ALLOC_ARRAY(r->offsets, count)",
          "new_text": null,
          "old_line_content": "\tREFTABLE_ALLOC_ARRAY(r->offsets, count);",
          "new_line_content": "\t\tif (n < 0) {",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "get_var_int",
          "new_api": null,
          "old_text": "get_var_int(&r->offsets[0], &in)",
          "new_text": null,
          "old_line_content": "\tn = get_var_int(&r->offsets[0], &in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&r->last_key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(&r->last_key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "strbuf_addbuf",
          "new_api": null,
          "old_text": "strbuf_addbuf(&r->last_key, &key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addbuf(&r->last_key, &key);",
          "new_line_content": "\treturn start.len - out.len;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "get_var_int",
          "new_api": null,
          "old_text": "get_var_int(&r->offset, &in)",
          "new_text": null,
          "old_line_content": "\tn = get_var_int(&r->offset, &in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&in, n);",
          "new_line_content": "\tif (n < 0)",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "strbuf_cmp",
          "new_api": null,
          "old_text": "strbuf_cmp(&ia->last_key, &ib->last_key)",
          "new_text": null,
          "old_line_content": "\treturn ia->offset == ib->offset && !strbuf_cmp(&ia->last_key, &ib->last_key);",
          "new_line_content": "\tif (n < 0)",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "strbuf_cmp",
          "new_api": null,
          "old_text": "strbuf_cmp(&a->last_key, &b->last_key)",
          "new_text": null,
          "old_line_content": "\treturn strbuf_cmp(&a->last_key, &b->last_key);",
          "new_line_content": "static int reftable_index_record_equal(const void *a, const void *b, int hash_size)",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"\\\"%s\\\" %\" PRIu64 \"\\n\", idx->last_key.buf, idx->offset)",
          "new_text": null,
          "old_line_content": "\tprintf(\"\\\"%s\\\" %\" PRIu64 \"\\n\", idx->last_key.buf, idx->offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(ra->hash_prefix, rb->hash_prefix, ra->hash_prefix_len)",
          "new_text": null,
          "old_line_content": "\t    memcmp(ra->hash_prefix, rb->hash_prefix, ra->hash_prefix_len))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(ra->offsets, rb->offsets, ra->offset_len * sizeof(uint64_t))",
          "new_text": null,
          "old_line_content": "\t    memcmp(ra->offsets, rb->offsets, ra->offset_len * sizeof(uint64_t)))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(rec)",
          "new_text": null,
          "old_line_content": "\treftable_record_vtable(rec)->key(reftable_record_data(rec), dest);",
          "new_line_content": "\t.val_type = &reftable_index_record_val_type,",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(rec)",
          "new_text": null,
          "old_line_content": "\treturn reftable_record_vtable(rec)->encode(reftable_record_data(rec),",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(src->type == rec->type)",
          "new_text": null,
          "old_line_content": "\tassert(src->type == rec->type);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(rec)",
          "new_text": null,
          "old_line_content": "\treftable_record_vtable(rec)->copy_from(reftable_record_data(rec),",
          "new_line_content": "int reftable_record_encode(struct reftable_record *rec, struct string_view dest,",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(src)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t       reftable_record_data(src),",
          "new_line_content": "\t\t\t   int hash_size)",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(rec)",
          "new_text": null,
          "old_line_content": "\treturn reftable_record_vtable(rec)->val_type(reftable_record_data(rec));",
          "new_line_content": "void reftable_record_copy_from(struct reftable_record *rec,",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"log{%s(%\" PRIu64 \") delete\\n\", log->refname,\n\t\t       log->update_index)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"log{%s(%\" PRIu64 \") delete\\n\", log->refname,",
          "new_line_content": "\t.equal = &reftable_obj_record_equal_void,",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"log{%s(%\" PRIu64 \") %s <%s> %\" PRIu64 \" %04d\\n\",\n\t\t       log->refname, log->update_index,\n\t\t       log->value.update.name ? log->value.update.name : \"\",\n\t\t       log->value.update.email ? log->value.update.email : \"\",\n\t\t       log->value.update.time,\n\t\t       log->value.update.tz_offset)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"log{%s(%\" PRIu64 \") %s <%s> %\" PRIu64 \" %04d\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "hex_format",
          "new_api": null,
          "old_text": "hex_format(hex, log->value.update.old_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\thex_format(hex, log->value.update.old_hash, hash_size);",
          "new_line_content": "\tswitch (log->value_type) {",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s => \", hex)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s => \", hex);",
          "new_line_content": "\tcase REFTABLE_LOG_DELETION:",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "is_deletion",
          "new_api": null,
          "old_text": "reftable_record_vtable(rec)->is_deletion(\n\t\treftable_record_data(rec))",
          "new_text": null,
          "old_line_content": "\treturn reftable_record_vtable(rec)->is_deletion(",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s\\n\\n%s\\n}\\n\", hex,\n\t\t       log->value.update.message ? log->value.update.message : \"\")",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s\\n\\n%s\\n}\\n\", hex,",
          "new_line_content": "\t\t       log->update_index);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "cmp",
          "new_api": null,
          "old_text": "reftable_record_vtable(a)->cmp(\n\t\treftable_record_data(a), reftable_record_data(b))",
          "new_text": null,
          "old_line_content": "\treturn reftable_record_vtable(a)->cmp(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(b)",
          "new_text": null,
          "old_line_content": "\t\treftable_record_data(a), reftable_record_data(b));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "equal",
          "new_api": null,
          "old_text": "reftable_record_vtable(a)->equal(\n\t\treftable_record_data(a), reftable_record_data(b), hash_size)",
          "new_text": null,
          "old_line_content": "\treturn reftable_record_vtable(a)->equal(",
          "new_line_content": "int reftable_record_cmp(struct reftable_record *a, struct reftable_record *b)",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(b)",
          "new_text": null,
          "old_line_content": "\t\treftable_record_data(a), reftable_record_data(b), hash_size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(rec->refname)",
          "new_text": null,
          "old_line_content": "\tint len = strlen(rec->refname);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(dest);",
          "new_line_content": "\t\t\t\t      uint32_t hash_id)",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(dest, (uint8_t *)rec->refname, len + 1)",
          "new_text": null,
          "old_line_content": "\tstrbuf_add(dest, (uint8_t *)rec->refname, len + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(hash_size > 0)",
          "new_text": null,
          "old_line_content": "\tassert(hash_size > 0);",
          "new_line_content": "\tchar *refname = NULL;",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(a, b, hash_size)",
          "new_text": null,
          "old_line_content": "\t\treturn !memcmp(a, b, hash_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "put_be64",
          "new_api": null,
          "old_text": "put_be64(&i64[0], ts)",
          "new_text": null,
          "old_line_content": "\tput_be64(&i64[0], ts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(dest, i64, sizeof(i64))",
          "new_text": null,
          "old_line_content": "\tstrbuf_add(dest, i64, sizeof(i64));",
          "new_line_content": "static void reftable_log_record_key(const void *r, struct strbuf *dest)",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(ref)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(ref);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(hash_size > 0)",
          "new_text": null,
          "old_line_content": "\tassert(hash_size > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "null_streq",
          "new_api": null,
          "old_text": "null_streq(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\tif (!null_streq(a->refname, b->refname))",
          "new_line_content": "static int hash_equal(const unsigned char *a, const unsigned char *b, int hash_size)",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(dst)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(dst);",
          "new_line_content": "\tts = (~ts) - rec->update_index;",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(dst->refname)",
          "new_text": null,
          "old_line_content": "\t\tdst->refname = xstrdup(dst->refname);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref->value.val2.value, src->value.val2.value, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(ref->value.val2.value, src->value.val2.value, hash_size);",
          "new_line_content": "\t\tref->refname[refname_len] = 0;",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref->value.val2.target_value,\n\t\t       src->value.val2.target_value, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(ref->value.val2.target_value,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a->value.symref, b->value.symref)",
          "new_text": null,
          "old_line_content": "\t\treturn !strcmp(a->value.symref, b->value.symref);",
          "new_line_content": "\t\t\t      const struct reftable_ref_record *b, int hash_size)",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(src->value.symref)",
          "new_text": null,
          "old_line_content": "\t\tref->value.symref = xstrdup(src->value.symref);",
          "new_line_content": "\tswitch (src->value_type) {",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "hash_equal",
          "new_api": null,
          "old_text": "hash_equal(a->value.val2.target_value,\n\t\t\t\t  b->value.val2.target_value, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t       hash_equal(a->value.val2.target_value,",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(dst->value.update.email)",
          "new_text": null,
          "old_line_content": "\t\t\t\txstrdup(dst->value.update.email);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "hash_equal",
          "new_api": null,
          "old_text": "hash_equal(a->value.val1, b->value.val1, hash_size)",
          "new_text": null,
          "old_line_content": "\t\treturn hash_equal(a->value.val1, b->value.val1, hash_size);",
          "new_line_content": "\t    a->value_type != b->value_type)",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\t\tabort();",
          "new_line_content": "\tcase REFTABLE_REF_SYMREF:",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(dst->value.update.message)",
          "new_text": null,
          "old_line_content": "\t\t\t\txstrdup(dst->value.update.message);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(((struct reftable_ref_record *)a)->refname,\n\t\t      ((struct reftable_ref_record *)b)->refname)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(((struct reftable_ref_record *)a)->refname,",
          "new_line_content": "\t\t\t\t  b->value.val2.target_value, hash_size);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(hash_size > 0)",
          "new_text": null,
          "old_line_content": "\tassert(hash_size > 0);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst->value.update.new_hash,\n\t\t\t       src->value.update.new_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(dst->value.update.new_hash,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "hexdigit",
          "new_api": null,
          "old_text": "hexdigit(src[i] >> 4)",
          "new_text": null,
          "old_line_content": "\t\t\tdest[2 * i] = hexdigit(src[i] >> 4);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "hexdigit",
          "new_api": null,
          "old_text": "hexdigit(src[i] & 0xf)",
          "new_text": null,
          "old_line_content": "\t\t\tdest[2 * i + 1] = hexdigit(src[i] & 0xf);",
          "new_line_content": "\tif (c <= 9)",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "REFTABLE_ALLOC_ARRAY",
          "new_api": null,
          "old_text": "REFTABLE_ALLOC_ARRAY(dst->value.update.old_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t\tREFTABLE_ALLOC_ARRAY(dst->value.update.old_hash, hash_size);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst->value.update.old_hash,\n\t\t\t       src->value.update.old_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(dst->value.update.old_hash,",
          "new_line_content": "\t\tif (dst->value.update.message) {",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(la->refname, lb->refname)",
          "new_text": null,
          "old_line_content": "\tint cmp = strcmp(la->refname, lb->refname);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"ref{%s(%\" PRIu64 \") \", ref->refname, ref->update_index)",
          "new_text": null,
          "old_line_content": "\tprintf(\"ref{%s(%\" PRIu64 \") \", ref->refname, ref->update_index);",
          "new_line_content": "\t\tfor (i = 0; i < hash_size; i++) {",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(r)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(r);",
          "new_line_content": "\t\tif (dst->value.update.old_hash) {",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"=> %s\", ref->value.symref)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"=> %s\", ref->value.symref);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "hex_format",
          "new_api": null,
          "old_text": "hex_format(hex, ref->value.val2.value, hash_size)",
          "new_text": null,
          "old_line_content": "\t\thex_format(hex, ref->value.val2.value, hash_size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"val 2 %s\", hex)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"val 2 %s\", hex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "hex_format",
          "new_api": null,
          "old_text": "hex_format(hex, ref->value.val2.target_value,\n\t\t\t   hash_size)",
          "new_text": null,
          "old_line_content": "\t\thex_format(hex, ref->value.val2.target_value,",
          "new_line_content": "static void reftable_ref_record_print_sz(const struct reftable_ref_record *ref,",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "reftable_free",
          "new_api": null,
          "old_text": "reftable_free(r->refname)",
          "new_text": null,
          "old_line_content": "\treftable_free(r->refname);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"(T %s)\", hex)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"(T %s)\", hex);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "reftable_free",
          "new_api": null,
          "old_text": "reftable_free(r->value.update.new_hash)",
          "new_text": null,
          "old_line_content": "\t\treftable_free(r->value.update.new_hash);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "reftable_free",
          "new_api": null,
          "old_text": "reftable_free(r->value.update.old_hash)",
          "new_text": null,
          "old_line_content": "\t\treftable_free(r->value.update.old_hash);",
          "new_line_content": "\tstruct reftable_log_record *r = rec;",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "hex_format",
          "new_api": null,
          "old_text": "hex_format(hex, ref->value.val1, hash_size)",
          "new_text": null,
          "old_line_content": "\t\thex_format(hex, ref->value.val1, hash_size);",
          "new_line_content": "\tswitch (ref->value_type) {",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"val 1 %s\", hex)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"val 1 %s\", hex);",
          "new_line_content": "\tcase REFTABLE_REF_SYMREF:",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "reftable_free",
          "new_api": null,
          "old_text": "reftable_free(r->value.update.email)",
          "new_text": null,
          "old_line_content": "\t\treftable_free(r->value.update.email);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "reftable_free",
          "new_api": null,
          "old_text": "reftable_free(r->value.update.message)",
          "new_text": null,
          "old_line_content": "\t\treftable_free(r->value.update.message);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"delete\")",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"delete\");",
          "new_line_content": "\tcase REFTABLE_REF_VAL2:",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\tabort();",
          "new_line_content": "static void *reftable_record_data(struct reftable_record *rec)",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(rec)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(rec);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "reftable_log_record_is_deletion",
          "new_api": null,
          "old_text": "reftable_log_record_is_deletion(r)",
          "new_text": null,
          "old_line_content": "\tif (reftable_log_record_is_deletion(r))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\tabort();",
          "new_line_content": "reftable_record_vtable(struct reftable_record *rec)",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\t\tabort();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(ref, 0, sizeof(struct reftable_ref_record))",
          "new_text": null,
          "old_line_content": "\tmemset(ref, 0, sizeof(struct reftable_ref_record));",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(rec, 0, sizeof(*rec))",
          "new_text": null,
          "old_line_content": "\tmemset(rec, 0, sizeof(*rec));",
          "new_line_content": "\tcase BLOCK_TYPE_LOG:",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s.buf, oldh, hash_size)",
          "new_text": null,
          "old_line_content": "\tmemcpy(s.buf, oldh, hash_size);",
          "new_line_content": "\toldh = r->value.update.old_hash;",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s.buf + hash_size, newh, hash_size)",
          "new_text": null,
          "old_line_content": "\tmemcpy(s.buf + hash_size, newh, hash_size);",
          "new_line_content": "\tnewh = r->value.update.new_hash;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, 2 * hash_size)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, 2 * hash_size);",
          "new_line_content": "\tif (!oldh) {",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "encode_string",
          "new_api": null,
          "old_text": "encode_string(r->value.update.name ? r->value.update.name : \"\", s)",
          "new_text": null,
          "old_line_content": "\tn = encode_string(r->value.update.name ? r->value.update.name : \"\", s);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&rec->u.idx.last_key, 0)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_init(&rec->u.idx.last_key, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, n);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "encode_string",
          "new_api": null,
          "old_text": "encode_string(r->value.update.email ? r->value.update.email : \"\",\n\t\t\t  s)",
          "new_text": null,
          "old_line_content": "\tn = encode_string(r->value.update.email ? r->value.update.email : \"\",",
          "new_line_content": "\tif (s.len < 2 * hash_size)",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&s, r->update_index)",
          "new_text": null,
          "old_line_content": "\tint n = put_var_int(&s, r->update_index);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(hash_size > 0)",
          "new_text": null,
          "old_line_content": "\tassert(hash_size > 0);",
          "new_line_content": "\tconst struct reftable_ref_record *r =",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"'%c': \", rec->type)",
          "new_text": null,
          "old_line_content": "\tprintf(\"'%c': \", rec->type);",
          "new_line_content": "\tcase BLOCK_TYPE_OBJ:",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "put_var_int",
          "new_api": null,
          "old_text": "put_var_int(&s, r->value.update.time)",
          "new_text": null,
          "old_line_content": "\tn = put_var_int(&s, r->value.update.time);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, n);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "reftable_record_data",
          "new_api": null,
          "old_text": "reftable_record_data(rec)",
          "new_text": null,
          "old_line_content": "\treftable_record_vtable(rec)->print(reftable_record_data(rec), hash_size);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, n);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "encode_string",
          "new_api": null,
          "old_text": "encode_string(r->value.symref, s)",
          "new_text": null,
          "old_line_content": "\t\tn = encode_string(r->value.symref, s);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "put_be16",
          "new_api": null,
          "old_text": "put_be16(s.buf, r->value.update.tz_offset)",
          "new_text": null,
          "old_line_content": "\tput_be16(s.buf, r->value.update.tz_offset);",
          "new_line_content": "\tif (n < 0)",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, 2)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&s, 2);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "encode_string",
          "new_api": null,
          "old_text": "encode_string(\n\t\tr->value.update.message ? r->value.update.message : \"\", s)",
          "new_text": null,
          "old_line_content": "\tn = encode_string(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s.buf, r->value.val2.value, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(s.buf, r->value.val2.value, hash_size);",
          "new_line_content": "\tswitch (r->value_type) {",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "new_line_content": "\tcase REFTABLE_REF_SYMREF:",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "new_line_content": "\t\tif (n < 0) {",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(s.buf, r->value.val1, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(s.buf, r->value.val1, hash_size);",
          "new_line_content": "\t\tif (s.len < 2 * hash_size) {",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&s, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&s, hash_size);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->refname, key.len - 8)",
          "new_text": null,
          "old_line_content": "\tr->refname = reftable_realloc(r->refname, key.len - 8);",
          "new_line_content": "\t\t\t\t      int hash_size)",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->refname, key.buf, key.len - 8)",
          "new_text": null,
          "old_line_content": "\tmemcpy(r->refname, key.buf, key.len - 8);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "get_be64",
          "new_api": null,
          "old_text": "get_be64(key.buf + key.len - 8)",
          "new_text": null,
          "old_line_content": "\tts = get_be64(key.buf + key.len - 8);",
          "new_line_content": "\tstruct string_view start = in;",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(r->value.update.old_hash)",
          "new_text": null,
          "old_line_content": "\t\t\tFREE_AND_NULL(r->value.update.old_hash);",
          "new_line_content": "\tif (key.len <= 9 || key.buf[key.len - 9] != 0)",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(r->value.update.new_hash)",
          "new_text": null,
          "old_line_content": "\t\t\tFREE_AND_NULL(r->value.update.new_hash);",
          "new_line_content": "\t\treturn REFTABLE_FORMAT_ERROR;",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(r->value.update.message)",
          "new_text": null,
          "old_line_content": "\t\t\tFREE_AND_NULL(r->value.update.message);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(hash_size > 0)",
          "new_text": null,
          "old_line_content": "\tassert(hash_size > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "get_var_int",
          "new_api": null,
          "old_text": "get_var_int(&update_index, &in)",
          "new_text": null,
          "old_line_content": "\tn = get_var_int(&update_index, &in);",
          "new_line_content": "\t\t\t\t      uint8_t val_type, struct string_view in,",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "\tstruct reftable_ref_record *r = rec;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "SWAP",
          "new_api": null,
          "old_text": "SWAP(refname, r->refname)",
          "new_text": null,
          "old_line_content": "\tSWAP(refname, r->refname);",
          "new_line_content": "\tuint64_t update_index = 0;",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "SWAP",
          "new_api": null,
          "old_text": "SWAP(refname_cap, r->refname_cap)",
          "new_text": null,
          "old_line_content": "\tSWAP(refname_cap, r->refname_cap);",
          "new_line_content": "\tconst char *refname = NULL;",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(r)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(r);",
          "new_line_content": "\tsize_t refname_cap = 0;",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "SWAP",
          "new_api": null,
          "old_text": "SWAP(r->refname, refname)",
          "new_text": null,
          "old_line_content": "\tSWAP(r->refname, refname);",
          "new_line_content": "\tint n;",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "SWAP",
          "new_api": null,
          "old_text": "SWAP(r->refname_cap, refname_cap)",
          "new_text": null,
          "old_line_content": "\tSWAP(r->refname_cap, refname_cap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "REFTABLE_ALLOC_GROW",
          "new_api": null,
          "old_text": "REFTABLE_ALLOC_GROW(r->refname, key.len + 1, r->refname_cap)",
          "new_text": null,
          "old_line_content": "\tREFTABLE_ALLOC_GROW(r->refname, key.len + 1, r->refname_cap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->value.update.old_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\treftable_realloc(r->value.update.old_hash, hash_size);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->value.update.new_hash, hash_size)",
          "new_text": null,
          "old_line_content": "\t\treftable_realloc(r->value.update.new_hash, hash_size);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->value.update.old_hash, in.buf, hash_size)",
          "new_text": null,
          "old_line_content": "\tmemcpy(r->value.update.old_hash, in.buf, hash_size);",
          "new_line_content": "\tr->value_type = val_type;",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->value.update.new_hash, in.buf + hash_size, hash_size)",
          "new_text": null,
          "old_line_content": "\tmemcpy(r->value.update.new_hash, in.buf + hash_size, hash_size);",
          "new_line_content": "\tif (val_type == REFTABLE_LOG_DELETION)",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, 2 * hash_size)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, 2 * hash_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "decode_string",
          "new_api": null,
          "old_text": "decode_string(&dest, in)",
          "new_text": null,
          "old_line_content": "\tn = decode_string(&dest, in);",
          "new_line_content": "\t\treturn REFTABLE_FORMAT_ERROR;",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->value.update.name, dest.len + 1)",
          "new_text": null,
          "old_line_content": "\t\treftable_realloc(r->value.update.name, dest.len + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->value.val2.value, in.buf, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(r->value.val2.value, in.buf, hash_size);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, hash_size)",
          "new_text": null,
          "old_line_content": "\t\tstring_view_consume(&in, hash_size);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "decode_string",
          "new_api": null,
          "old_text": "decode_string(&dest, in)",
          "new_text": null,
          "old_line_content": "\tn = decode_string(&dest, in);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->value.update.email, dest.len + 1)",
          "new_text": null,
          "old_line_content": "\t\treftable_realloc(r->value.update.email, dest.len + 1);",
          "new_line_content": "\tr->value.update.name =",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "decode_string",
          "new_api": null,
          "old_text": "decode_string(&dest, in)",
          "new_text": null,
          "old_line_content": "\t\tint n = decode_string(&dest, in);",
          "new_line_content": "\t\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, n)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, n);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "abort",
          "new_api": null,
          "old_text": "abort()",
          "new_text": null,
          "old_line_content": "\t\tabort();",
          "new_line_content": "\t\tstruct strbuf dest = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "string_view_consume",
          "new_api": null,
          "old_text": "string_view_consume(&in, 2)",
          "new_text": null,
          "old_line_content": "\tstring_view_consume(&in, 2);",
          "new_line_content": "\tr->value.update.email[dest.len] = 0;",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(&dest);",
          "new_line_content": "\tts = 0;",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "reftable_ref_record_is_deletion",
          "new_api": null,
          "old_text": "reftable_ref_record_is_deletion(\n\t\t(const struct reftable_ref_record *)p)",
          "new_text": null,
          "old_line_content": "\treturn reftable_ref_record_is_deletion(",
          "new_line_content": "\tcase REFTABLE_REF_DELETION:",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "reftable_realloc",
          "new_api": null,
          "old_text": "reftable_realloc(r->value.update.message, dest.len + 1)",
          "new_text": null,
          "old_line_content": "\t\treftable_realloc(r->value.update.message, dest.len + 1);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(r->value.update.message, dest.buf, dest.len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(r->value.update.message, dest.buf, dest.len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&dest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "reftable_ref_record_equal",
          "new_api": null,
          "old_text": "reftable_ref_record_equal(ra, rb, hash_size)",
          "new_text": null,
          "old_line_content": "\treturn reftable_ref_record_equal(ra, rb, hash_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&dest);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(a->refname, b->refname);",
          "new_line_content": "static int reftable_ref_record_equal_void(const void *a,",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "reftable_ref_record_print_sz",
          "new_api": null,
          "old_text": "reftable_ref_record_print_sz((struct reftable_ref_record *) rec, hash_size)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_print_sz((struct reftable_ref_record *) rec, hash_size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a, b)",
          "new_text": null,
          "old_line_content": "\treturn 0 == strcmp(a, b);",
          "new_line_content": "\treturn REFTABLE_FORMAT_ERROR;",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(a, b, sz)",
          "new_text": null,
          "old_line_content": "\treturn !memcmp(a, b, sz);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "reftable_log_record_equal",
          "new_api": null,
          "old_text": "reftable_log_record_equal((struct reftable_log_record *) a,\n\t\t\t\t\t (struct reftable_log_record *) b,\n\t\t\t\t\t hash_size)",
          "new_text": null,
          "old_line_content": "\treturn reftable_log_record_equal((struct reftable_log_record *) a,",
          "new_line_content": "\tif (!a)",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(dest)",
          "new_text": null,
          "old_line_content": "\tstrbuf_reset(dest);",
          "new_line_content": "\t.decode = &reftable_ref_record_decode,",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(dest, rec->hash_prefix, rec->hash_prefix_len)",
          "new_text": null,
          "old_line_content": "\tstrbuf_add(dest, rec->hash_prefix, rec->hash_prefix_len);",
          "new_line_content": "\t.release = &reftable_ref_record_release_void,",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\tint cmp = strcmp(a->refname, b->refname);",
          "new_line_content": "static int reftable_log_record_equal_void(const void *a,",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(obj->hash_prefix)",
          "new_text": null,
          "old_line_content": "\tFREE_AND_NULL(obj->hash_prefix);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(obj->offsets)",
          "new_text": null,
          "old_line_content": "\tFREE_AND_NULL(obj->offsets);",
          "new_line_content": "static void reftable_obj_record_key(const void *r, struct strbuf *dest)",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(obj, 0, sizeof(struct reftable_obj_record))",
          "new_text": null,
          "old_line_content": "\tmemset(obj, 0, sizeof(struct reftable_obj_record));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "null_streq",
          "new_api": null,
          "old_text": "null_streq(a->refname, b->refname)",
          "new_text": null,
          "old_line_content": "\tif (!(null_streq(a->refname, b->refname) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"prefix %s (len %d), offsets [%s]\\n\",\n\t       hex, obj->hash_prefix_len, offset_str.buf)",
          "new_text": null,
          "old_line_content": "\tprintf(\"prefix %s (len %d), offsets [%s]\\n\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&offset_str)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&offset_str);",
          "new_line_content": "static void reftable_obj_record_print(const void *rec, int hash_size)",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "null_streq",
          "new_api": null,
          "old_text": "null_streq(a->value.update.name, b->value.update.name)",
          "new_text": null,
          "old_line_content": "\t\treturn null_streq(a->value.update.name, b->value.update.name) &&",
          "new_line_content": "int reftable_log_record_equal(const struct reftable_log_record *a,",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 34,
      "total_additions": 188,
      "total_deletions": 182,
      "total_api_changes": 404
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 16,
        "api_related_lines": 404,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          227,
          209,
          210,
          218,
          221,
          223
        ]
      }
    },
    "api_calls_before": 278,
    "api_calls_after": 284,
    "diff_info": {
      "added_lines": 15,
      "removed_lines": 3,
      "total_diff_lines": 35
    }
  }
}
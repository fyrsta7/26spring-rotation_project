{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f9b8908b85247ef60001a683c281af0080e9ee77",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f9b8908b85247ef60001a683c281af0080e9ee77/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f9b8908b85247ef60001a683c281af0080e9ee77/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f9b8908b85247ef60001a683c281af0080e9ee77/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1109,
          "old_api": "remove_redundant",
          "new_api": "xcalloc",
          "old_text": "remove_redundant(array, num_head)",
          "new_text": "xcalloc(num_head, sizeof(*array))",
          "old_line_content": "\tnum_head = remove_redundant(array, num_head);",
          "new_line_content": "\tarray = xcalloc(num_head, sizeof(*array));",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "reduce_heads",
          "new_api": "commit_list_insert",
          "old_text": "reduce_heads(*heads)",
          "new_text": "commit_list_insert(array[i], tail)",
          "old_line_content": "\tstruct commit_list *result = reduce_heads(*heads);",
          "new_line_content": "\t\ttail = &commit_list_insert(array[i], tail)->next;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "free_commit_list",
          "new_api": "free",
          "old_text": "free_commit_list(*heads)",
          "new_text": "free(array)",
          "old_line_content": "\tfree_commit_list(*heads);",
          "new_line_content": "\tfree(array);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "get_signing_key",
          "new_api": "strstr",
          "old_text": "get_signing_key()",
          "new_text": "strstr(buf->buf, \"\\n\\n\")",
          "old_line_content": "\t\tkeyid = get_signing_key();",
          "new_line_content": "\teoh = strstr(buf->buf, \"\\n\\n\");",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "strchrnul",
          "new_api": "sign_buffer",
          "old_text": "strchrnul(bol, '\\n')",
          "new_text": "sign_buffer(buf, &sig, keyid)",
          "old_line_content": "\t\tconst char *eol = strchrnul(bol, '\\n');",
          "new_line_content": "\tif (sign_buffer(buf, &sig, keyid)) {",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "strbuf_insert",
          "new_api": "strchrnul",
          "old_text": "strbuf_insert(buf, inspos++, \" \", 1)",
          "new_text": "strchrnul(bol, '\\n')",
          "old_line_content": "\t\tstrbuf_insert(buf, inspos++, \" \", 1);",
          "new_line_content": "\t\tconst char *eol = strchrnul(bol, '\\n');",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": "strbuf_release",
          "new_api": "parse_signed_commit",
          "old_text": "strbuf_release(&signature)",
          "new_text": "parse_signed_commit(commit, &payload, &signature)",
          "old_line_content": "\tstrbuf_release(&signature);",
          "new_line_content": "\tif (parse_signed_commit(commit, &payload, &signature) <= 0)",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "memcmp",
          "new_api": "fn",
          "old_text": "memcmp(field, \"tree\", 4)",
          "new_text": "fn(commit, extra, data)",
          "old_line_content": "\treturn ((len == 4 && !memcmp(field, \"tree\", 4)) ||",
          "new_line_content": "\t\tfn(commit, extra, data);",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "memcmp",
          "new_api": "free_commit_extra_headers",
          "old_text": "memcmp(field, \"author\", 6)",
          "new_text": "free_commit_extra_headers(to_free)",
          "old_line_content": "\t\t(len == 6 && !memcmp(field, \"author\", 6)) ||",
          "new_line_content": "\tfree_commit_extra_headers(to_free);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "standard_header_field",
          "new_api": "strbuf_detach",
          "old_text": "standard_header_field(line, eof - line)",
          "new_text": "strbuf_detach(&buf, &it->len)",
          "old_line_content": "\t\telse if (standard_header_field(line, eof - line) ||",
          "new_line_content": "\t\t\tit->value = strbuf_detach(&buf, &it->len);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "excluded_header_field",
          "new_api": "strbuf_reset",
          "old_text": "excluded_header_field(line, eof - line, exclude)",
          "new_text": "strbuf_reset(&buf)",
          "old_line_content": "\t\t\t excluded_header_field(line, eof - line, exclude))",
          "new_line_content": "\t\tstrbuf_reset(&buf);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "xcalloc",
          "new_api": "memchr",
          "old_text": "xcalloc(1, sizeof(*it))",
          "new_text": "memchr(line, ' ', next - line)",
          "old_line_content": "\t\tit = xcalloc(1, sizeof(*it));",
          "new_line_content": "\t\teof = memchr(line, ' ', next - line);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "strbuf_detach",
          "new_api": "xmemdupz",
          "old_text": "strbuf_detach(&buf, &it->len)",
          "new_text": "xmemdupz(line, eof-line)",
          "old_line_content": "\t\tit->value = strbuf_detach(&buf, &it->len);",
          "new_line_content": "\t\tit->key = xmemdupz(line, eof-line);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "oid_to_hex",
          "new_api": "memchr",
          "old_text": "oid_to_hex(tree)",
          "new_text": "memchr(msg, '\\0', msg_len)",
          "old_line_content": "\tstrbuf_addf(&buffer, \"tree %s\\n\", oid_to_hex(tree));",
          "new_line_content": "\tif (memchr(msg, '\\0', msg_len))",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "git_author_info",
          "new_api": "pop_commit",
          "old_text": "git_author_info(IDENT_STRICT)",
          "new_text": "pop_commit(&parents)",
          "old_line_content": "\t\tauthor = git_author_info(IDENT_STRICT);",
          "new_line_content": "\t\tstruct commit *parent = pop_commit(&parents);",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": "git_committer_info",
          "new_api": "oid_to_hex",
          "old_text": "git_committer_info(IDENT_STRICT)",
          "new_text": "oid_to_hex(&parent->object.oid)",
          "old_line_content": "\tstrbuf_addf(&buffer, \"committer %s\\n\", git_committer_info(IDENT_STRICT));",
          "new_line_content": "\t\t\t    oid_to_hex(&parent->object.oid));",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "add_extra_header",
          "new_api": "git_author_info",
          "old_text": "add_extra_header(&buffer, extra)",
          "new_text": "git_author_info(IDENT_STRICT)",
          "old_line_content": "\t\tadd_extra_header(&buffer, extra);",
          "new_line_content": "\t\tauthor = git_author_info(IDENT_STRICT);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "_",
          "new_api": "strbuf_addch",
          "old_text": "_(commit_utf8_warn)",
          "new_text": "strbuf_addch(&buffer, '\\n')",
          "old_line_content": "\t\tfprintf(stderr, _(commit_utf8_warn));",
          "new_line_content": "\tstrbuf_addch(&buffer, '\\n');",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "write_object_file",
          "new_api": "_",
          "old_text": "write_object_file(buffer.buf, buffer.len, commit_type, ret)",
          "new_text": "_(commit_utf8_warn)",
          "old_line_content": "\tresult = write_object_file(buffer.buf, buffer.len, commit_type, ret);",
          "new_line_content": "\t\tfprintf(stderr, _(commit_utf8_warn));",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "strbuf_release",
          "new_api": "do_sign_commit",
          "old_text": "strbuf_release(&buffer)",
          "new_text": "do_sign_commit(&buffer, sign_commit)",
          "old_line_content": "\tstrbuf_release(&buffer);",
          "new_line_content": "\tif (sign_commit && do_sign_commit(&buffer, sign_commit)) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "find_invalid_utf8",
          "old_text": null,
          "new_text": "find_invalid_utf8(buf->buf + pos, buf->len - pos)",
          "old_line_content": "",
          "new_line_content": "\t\tbad = find_invalid_utf8(buf->buf + pos, buf->len - pos);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "strbuf_remove",
          "old_text": null,
          "new_text": "strbuf_remove(buf, pos, 1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrbuf_remove(buf, pos, 1);",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "strbuf_insert",
          "old_text": null,
          "new_text": "strbuf_insert(buf, pos, replace, 2)",
          "old_line_content": "   \"You may want to amend it after fixing the message, or set the config\\n\"",
          "new_line_content": "\t\tstrbuf_insert(buf, pos, replace, 2);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "N_",
          "old_text": null,
          "new_text": "N_(\"Warning: commit message did not conform to UTF-8.\\n\"\n   \"You may want to amend it after fixing the message, or set the config\\n\"\n   \"variable i18n.commitencoding to the encoding your project uses.\\n\")",
          "old_line_content": "\t\t\t const char *author, const char *sign_commit,",
          "new_line_content": "N_(\"Warning: commit message did not conform to UTF-8.\\n\"",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "assert_sha1_type",
          "old_text": null,
          "new_text": "assert_sha1_type(tree->hash, OBJ_TREE)",
          "old_line_content": "",
          "new_line_content": "\tassert_sha1_type(tree->hash, OBJ_TREE);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"a NUL byte in commit log message not allowed.\")",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"a NUL byte in commit log message not allowed.\");",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "parse_commit",
          "old_text": null,
          "new_text": "parse_commit(commit)",
          "old_line_content": "\t\treturn ret;",
          "new_line_content": "\tif (parse_commit(commit))",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "is_encoding_utf8",
          "old_text": null,
          "new_text": "is_encoding_utf8(git_commit_encoding)",
          "old_line_content": "\t * different order of parents will be a _different_ changeset even",
          "new_line_content": "\tencoding_is_utf8 = is_encoding_utf8(git_commit_encoding);",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&buffer, 8192)",
          "old_line_content": "\t */",
          "new_line_content": "\tstrbuf_init(&buffer, 8192); /* should avoid reallocs for the headers */",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "parse_commit",
          "old_text": null,
          "new_text": "parse_commit(reference[i])",
          "old_line_content": "\t\t\treturn ret;",
          "new_line_content": "\t\tif (parse_commit(reference[i]))",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(tree)",
          "old_line_content": "\twhile (parents) {",
          "new_line_content": "\tstrbuf_addf(&buffer, \"tree %s\\n\", oid_to_hex(tree));",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "paint_down_to_common",
          "old_text": null,
          "new_text": "paint_down_to_common(commit, nr_reference, reference)",
          "old_line_content": "}",
          "new_line_content": "\tbases = paint_down_to_common(commit, nr_reference, reference);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "clear_commit_marks",
          "old_text": null,
          "new_text": "clear_commit_marks(commit, all_flags)",
          "old_line_content": " * Is \"commit\" an ancestor of (i.e. reachable from) the \"reference\"?",
          "new_line_content": "\tclear_commit_marks(commit, all_flags);",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "clear_commit_marks_many",
          "old_text": null,
          "new_text": "clear_commit_marks_many(nr_reference, reference, all_flags)",
          "old_line_content": " */",
          "new_line_content": "\tclear_commit_marks_many(nr_reference, reference, all_flags);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "free_commit_list",
          "old_text": null,
          "new_text": "free_commit_list(bases)",
          "old_line_content": "int in_merge_bases(struct commit *commit, struct commit *reference)",
          "new_line_content": "\tfree_commit_list(bases);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buffer, \"author %s\\n\", author)",
          "old_line_content": "\t\textra = extra->next;",
          "new_line_content": "\tstrbuf_addf(&buffer, \"author %s\\n\", author);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "git_committer_info",
          "old_text": null,
          "new_text": "git_committer_info(IDENT_STRICT)",
          "old_line_content": "\t}",
          "new_line_content": "\tstrbuf_addf(&buffer, \"committer %s\\n\", git_committer_info(IDENT_STRICT));",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&buffer, \"encoding %s\\n\", git_commit_encoding)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_addf(&buffer, \"encoding %s\\n\", git_commit_encoding);",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "add_extra_header",
          "old_text": null,
          "new_text": "add_extra_header(&buffer, extra)",
          "old_line_content": "",
          "new_line_content": "\t\tadd_extra_header(&buffer, extra);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": null,
          "new_api": "in_merge_bases_many",
          "old_text": null,
          "new_text": "in_merge_bases_many(commit, 1, &reference)",
          "old_line_content": "\tstruct commit **array;",
          "new_line_content": "\treturn in_merge_bases_many(commit, 1, &reference);",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(&buffer, msg, msg_len)",
          "old_line_content": "\t\tresult = -1;",
          "new_line_content": "\tstrbuf_add(&buffer, msg, msg_len);",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "verify_utf8",
          "old_text": null,
          "new_text": "verify_utf8(&buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (encoding_is_utf8 && !verify_utf8(&buffer))",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "write_object_file",
          "old_text": null,
          "new_text": "write_object_file(buffer.buf, buffer.len, commit_type, ret)",
          "old_line_content": "\t\t\t   const char *name, struct object *obj)",
          "new_line_content": "\tresult = write_object_file(buffer.buf, buffer.len, commit_type, ret);",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&buffer)",
          "old_line_content": "\tstruct merge_remote_desc *desc;",
          "new_line_content": "\tstrbuf_release(&buffer);",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": null,
          "new_api": "FLEX_ALLOC_STR",
          "old_text": null,
          "new_text": "FLEX_ALLOC_STR(desc, name, name)",
          "old_line_content": "\tstruct object *obj;",
          "new_line_content": "\tFLEX_ALLOC_STR(desc, name, name);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "remove_redundant",
          "old_text": null,
          "new_text": "remove_redundant(array, num_head)",
          "old_line_content": "void reduce_heads_replace(struct commit_list **heads)",
          "new_line_content": "\tnum_head = remove_redundant(array, num_head);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "get_oid",
          "old_text": null,
          "new_text": "get_oid(name, &oid)",
          "old_line_content": "}",
          "new_line_content": "\tif (get_oid(name, &oid))",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "reduce_heads",
          "old_text": null,
          "new_text": "reduce_heads(*heads)",
          "old_line_content": "",
          "new_line_content": "\tstruct commit_list *result = reduce_heads(*heads);",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "free_commit_list",
          "old_text": null,
          "new_text": "free_commit_list(*heads)",
          "old_line_content": "static int do_sign_commit(struct strbuf *buf, const char *keyid)",
          "new_line_content": "\tfree_commit_list(*heads);",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": null,
          "new_api": "parse_object",
          "old_text": null,
          "new_text": "parse_object(&oid)",
          "old_line_content": "/*",
          "new_line_content": "\tobj = parse_object(&oid);",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "peel_to_type",
          "old_text": null,
          "new_text": "peel_to_type(name, 0, obj, OBJ_COMMIT)",
          "old_line_content": " * Append a commit to the end of the commit_list.",
          "new_line_content": "\tcommit = (struct commit *)peel_to_type(name, 0, obj, OBJ_COMMIT);",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": null,
          "new_api": "set_merge_remote_desc",
          "old_text": null,
          "new_text": "set_merge_remote_desc(commit, name, obj)",
          "old_line_content": " * next starts by pointing to the variable that holds the head of an",
          "new_line_content": "\t\tset_merge_remote_desc(commit, name, obj);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "get_signing_key",
          "old_text": null,
          "new_text": "get_signing_key()",
          "old_line_content": "\t\tconst char *bol = sig.buf + copypos;",
          "new_line_content": "\t\tkeyid = get_signing_key();",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&sig)",
          "old_line_content": "\t\tint len = (eol - bol) + !!*eol;",
          "new_line_content": "\t\tstrbuf_release(&sig);",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(struct commit_list))",
          "old_line_content": "const char *find_commit_header(const char *msg, const char *key, size_t *out_len)",
          "new_line_content": "\tstruct commit_list *new_commit = xmalloc(sizeof(struct commit_list));",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "strbuf_insert",
          "old_text": null,
          "new_text": "strbuf_insert(buf, inspos, gpg_sig_header, gpg_sig_header_len)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tstrbuf_insert(buf, inspos, gpg_sig_header, gpg_sig_header_len);",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(key)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\tint key_len = strlen(key);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "strbuf_insert",
          "old_text": null,
          "new_text": "strbuf_insert(buf, inspos++, \" \", 1)",
          "old_line_content": "}",
          "new_line_content": "\t\tstrbuf_insert(buf, inspos++, \" \", 1);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "strbuf_insert",
          "old_text": null,
          "new_text": "strbuf_insert(buf, inspos, bol, len)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_insert(buf, inspos, bol, len);",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "strchrnul",
          "old_text": null,
          "new_text": "strchrnul(line, '\\n')",
          "old_line_content": "\t\t    line[key_len] == ' ') {",
          "new_line_content": "\t\tconst char *eol = strchrnul(line, '\\n');",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&sig)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&sig);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(line, key, key_len)",
          "old_line_content": "\treturn NULL;",
          "new_line_content": "\t\t    !strncmp(line, key, key_len) &&",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "get_commit_buffer",
          "old_text": null,
          "new_text": "get_commit_buffer(commit, &size)",
          "old_line_content": "\tsaw_signature = 0;",
          "new_line_content": "\tconst char *buffer = get_commit_buffer(commit, &size);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "memchr",
          "old_text": null,
          "new_text": "memchr(line, '\\n', tail - line)",
          "old_line_content": "\t\t\tsig = line + gpg_sig_header_len + 1;",
          "new_line_content": "\t\tconst char *next = memchr(line, '\\n', tail - line);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(line, gpg_sig_header)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\telse if (starts_with(line, gpg_sig_header) &&",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": null,
          "new_api": "wt_status_locate_end",
          "old_text": null,
          "new_text": "wt_status_locate_end(buf, len)",
          "old_line_content": "\t\telse",
          "new_line_content": "\tsize_t cutoff = wt_status_locate_end(buf, len);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "memchr",
          "old_text": null,
          "new_text": "memchr(buf + bol, '\\n', len - bol)",
          "old_line_content": "\t\tif (buf[bol] == comment_line_char || buf[bol] == '\\n') {",
          "new_line_content": "\t\tconst char *next_line = memchr(buf + bol, '\\n', len - bol);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(payload, line, next - line)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tstrbuf_add(payload, line, next - line);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "unuse_commit_buffer",
          "old_text": null,
          "new_text": "unuse_commit_buffer(commit, buffer)",
          "old_line_content": "\tconst char *tail = buf->buf + buf->len;",
          "new_line_content": "\tunuse_commit_buffer(commit, buffer);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(buf + bol, \"Conflicts:\\n\")",
          "old_line_content": "\t\t\t/* the previous was not trailing comment */",
          "new_line_content": "\t\t} else if (starts_with(buf + bol, \"Conflicts:\\n\")) {",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "memchr",
          "old_text": null,
          "new_text": "memchr(line, '\\n', tail - line)",
          "old_line_content": "\t\t\tsig_start = line;",
          "new_line_content": "\t\tconst char *next = memchr(line, '\\n', tail - line);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(line, gpg_sig_header)",
          "old_line_content": "\t\t\t\t/* dump the whole remainder of the buffer */",
          "new_line_content": "\t\telse if (starts_with(line, gpg_sig_header) &&",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "strbuf_remove",
          "old_text": null,
          "new_text": "strbuf_remove(buf, sig_start - buf->buf, sig_end - sig_start)",
          "old_line_content": "\tstruct merge_remote_desc *desc;",
          "new_line_content": "\t\tstrbuf_remove(buf, sig_start - buf->buf, sig_end - sig_start);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "merge_remote_util",
          "old_text": null,
          "new_text": "merge_remote_util(parent)",
          "old_line_content": "\tif (size == len)",
          "new_line_content": "\tdesc = merge_remote_util(parent);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(desc->obj->oid.hash, &type, &size)",
          "old_line_content": "\t * We could verify this signature and either omit the tag when",
          "new_line_content": "\tbuf = read_sha1_file(desc->obj->oid.hash, &type, &size);",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "parse_signature",
          "old_text": null,
          "new_text": "parse_signature(buf, size)",
          "old_line_content": "\t * later auditor may have it while auditing, so let's not run",
          "new_line_content": "\tlen = parse_signature(buf, size);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*mergetag))",
          "old_line_content": "\treturn;",
          "new_line_content": "\tmergetag = xcalloc(1, sizeof(*mergetag));",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(\"mergetag\")",
          "old_line_content": "",
          "new_line_content": "\tmergetag->key = xstrdup(\"mergetag\");",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\tint ret = 1;",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "check_signature",
          "old_text": null,
          "new_text": "check_signature(payload.buf, payload.len, signature.buf,\n\t\tsignature.len, sigc)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tret = check_signature(payload.buf, payload.len, signature.buf,",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&payload)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&payload);",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&signature)",
          "old_line_content": "void append_merge_tag_headers(struct commit_list *parents,",
          "new_line_content": "\tstrbuf_release(&signature);",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "handle_signed_tag",
          "old_text": null,
          "new_text": "handle_signed_tag(parent, tail)",
          "old_line_content": "{",
          "new_line_content": "\t\thandle_signed_tag(parent, tail);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(buffer, extra->key)",
          "old_line_content": "struct commit_extra_header *read_commit_extra_headers(struct commit *commit,",
          "new_line_content": "\tstrbuf_addstr(buffer, extra->key);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "strbuf_add_lines",
          "old_text": null,
          "new_text": "strbuf_add_lines(buffer, \" \", extra->value, extra->len)",
          "old_line_content": "{",
          "new_line_content": "\t\tstrbuf_add_lines(buffer, \" \", extra->value, extra->len);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "strbuf_addch",
          "old_text": null,
          "new_text": "strbuf_addch(buffer, '\\n')",
          "old_line_content": "\tunsigned long size;",
          "new_line_content": "\t\tstrbuf_addch(buffer, '\\n');",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "get_commit_buffer",
          "old_text": null,
          "new_text": "get_commit_buffer(commit, &size)",
          "old_line_content": "{",
          "new_line_content": "\tconst char *buffer = get_commit_buffer(commit, &size);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "read_commit_extra_header_lines",
          "old_text": null,
          "new_text": "read_commit_extra_header_lines(buffer, size, exclude)",
          "old_line_content": "\tstruct commit_extra_header *extra, *to_free;",
          "new_line_content": "\textra = read_commit_extra_header_lines(buffer, size, exclude);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "unuse_commit_buffer",
          "old_text": null,
          "new_text": "unuse_commit_buffer(commit, buffer)",
          "old_line_content": "",
          "new_line_content": "\tunuse_commit_buffer(commit, buffer);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "read_commit_extra_headers",
          "old_text": null,
          "new_text": "read_commit_extra_headers(commit, NULL)",
          "old_line_content": "}",
          "new_line_content": "\tto_free = read_commit_extra_headers(commit, NULL);",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(extra->key, \"mergetag\")",
          "old_line_content": "static inline int standard_header_field(const char *field, size_t len)",
          "new_line_content": "\t\tif (strcmp(extra->key, \"mergetag\"))",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, \"tree\", 4)",
          "old_line_content": "static int excluded_header_field(const char *field, size_t len, const char **exclude)",
          "new_line_content": "\treturn ((len == 4 && !memcmp(field, \"tree\", 4)) ||",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, \"parent\", 6)",
          "old_line_content": "{",
          "new_line_content": "\t\t(len == 6 && !memcmp(field, \"parent\", 6)) ||",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, \"author\", 6)",
          "old_line_content": "\tif (!exclude)",
          "new_line_content": "\t\t(len == 6 && !memcmp(field, \"author\", 6)) ||",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, \"committer\", 9)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t\t(len == 9 && !memcmp(field, \"committer\", 9)) ||",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, \"encoding\", 8)",
          "old_line_content": "",
          "new_line_content": "\t\t(len == 8 && !memcmp(field, \"encoding\", 8)));",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(*exclude)",
          "old_line_content": "",
          "new_line_content": "\t\tsize_t xlen = strlen(*exclude);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(field, *exclude, xlen)",
          "old_line_content": "static struct commit_extra_header *read_commit_extra_header_lines(",
          "new_line_content": "\t\tif (len == xlen && !memcmp(field, *exclude, xlen))",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "memchr",
          "old_text": null,
          "new_text": "memchr(line, '\\n', eob - line)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tnext = memchr(line, '\\n', eob - line);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(&buf, line + 1, next - (line + 1))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tstrbuf_add(&buf, line + 1, next - (line + 1));",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "standard_header_field",
          "old_text": null,
          "new_text": "standard_header_field(line, eof - line)",
          "old_line_content": "\t\ttail = &it->next;",
          "new_line_content": "\t\telse if (standard_header_field(line, eof - line) ||",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "excluded_header_field",
          "old_text": null,
          "new_text": "excluded_header_field(line, eof - line, exclude)",
          "old_line_content": "\t\tif (eof + 1 < next)",
          "new_line_content": "\t\t\t excluded_header_field(line, eof - line, exclude))",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*it))",
          "old_line_content": "\tif (it)",
          "new_line_content": "\t\tit = xcalloc(1, sizeof(*it));",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "strbuf_add",
          "old_text": null,
          "new_text": "strbuf_add(&buf, eof + 1, next - (eof + 1))",
          "old_line_content": "void free_commit_extra_headers(struct commit_extra_header *extra)",
          "new_line_content": "\t\t\tstrbuf_add(&buf, eof + 1, next - (eof + 1));",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "strbuf_detach",
          "old_text": null,
          "new_text": "strbuf_detach(&buf, &it->len)",
          "old_line_content": "\t\tstruct commit_extra_header *next = extra->next;",
          "new_line_content": "\t\tit->value = strbuf_detach(&buf, &it->len);",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(extra->key)",
          "old_line_content": "int commit_tree(const char *msg, size_t msg_len, const struct object_id *tree,",
          "new_line_content": "\t\tfree(extra->key);",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(extra->value)",
          "old_line_content": "\t\tstruct commit_list *parents, struct object_id *ret,",
          "new_line_content": "\t\tfree(extra->value);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(extra)",
          "old_line_content": "\t\tconst char *author, const char *sign_commit)",
          "new_line_content": "\t\tfree(extra);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "append_merge_tag_headers",
          "old_text": null,
          "new_text": "append_merge_tag_headers(parents, &tail)",
          "old_line_content": "static int find_invalid_utf8(const char *buf, int len)",
          "new_line_content": "\tappend_merge_tag_headers(parents, &tail);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": null,
          "new_api": "commit_tree_extended",
          "old_text": null,
          "new_text": "commit_tree_extended(msg, msg_len, tree, parents, ret,\n\t\t\t\t      author, sign_commit, extra)",
          "old_line_content": "{",
          "new_line_content": "\tresult = commit_tree_extended(msg, msg_len, tree, parents, ret,",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "free_commit_extra_headers",
          "old_text": null,
          "new_text": "free_commit_extra_headers(extra)",
          "old_line_content": "\tstatic const unsigned int max_codepoint[] = {",
          "new_line_content": "\tfree_commit_extra_headers(extra);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1540,
          "old_api": "strbuf_insert",
          "new_api": null,
          "old_text": "strbuf_insert(buf, pos, replace, 2)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_insert(buf, pos, replace, 2);",
          "new_line_content": "\t\tok = 0;",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "N_",
          "new_api": null,
          "old_text": "N_(\"Warning: commit message did not conform to UTF-8.\\n\"\n   \"You may want to amend it after fixing the message, or set the config\\n\"\n   \"variable i18n.commitencoding to the encoding your project uses.\\n\")",
          "new_text": null,
          "old_line_content": "N_(\"Warning: commit message did not conform to UTF-8.\\n\"",
          "new_line_content": "\t\treplace[1] = 0x80 + (c & 0x3f);",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "assert_sha1_type",
          "new_api": null,
          "old_text": "assert_sha1_type(tree->hash, OBJ_TREE)",
          "new_text": null,
          "old_line_content": "\tassert_sha1_type(tree->hash, OBJ_TREE);",
          "new_line_content": "\t\t\t const char *author, const char *sign_commit,",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(msg, '\\0', msg_len)",
          "new_text": null,
          "old_line_content": "\tif (memchr(msg, '\\0', msg_len))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"a NUL byte in commit log message not allowed.\")",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"a NUL byte in commit log message not allowed.\");",
          "new_line_content": "\tint result;",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "is_encoding_utf8",
          "new_api": null,
          "old_text": "is_encoding_utf8(git_commit_encoding)",
          "new_text": null,
          "old_line_content": "\tencoding_is_utf8 = is_encoding_utf8(git_commit_encoding);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&buffer, 8192)",
          "new_text": null,
          "old_line_content": "\tstrbuf_init(&buffer, 8192); /* should avoid reallocs for the headers */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "parse_commit",
          "new_api": null,
          "old_text": "parse_commit(commit)",
          "new_text": null,
          "old_line_content": "\tif (parse_commit(commit))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "parse_commit",
          "new_api": null,
          "old_text": "parse_commit(reference[i])",
          "new_text": null,
          "old_line_content": "\t\tif (parse_commit(reference[i]))",
          "new_line_content": "\tfor (i = 0; i < nr_reference; i++) {",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "pop_commit",
          "new_api": null,
          "old_text": "pop_commit(&parents)",
          "new_text": null,
          "old_line_content": "\t\tstruct commit *parent = pop_commit(&parents);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "paint_down_to_common",
          "new_api": null,
          "old_text": "paint_down_to_common(commit, nr_reference, reference)",
          "new_text": null,
          "old_line_content": "\tbases = paint_down_to_common(commit, nr_reference, reference);",
          "new_line_content": "\t\tif (reference[i]->generation < min_generation)",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&buffer, \"parent %s\\n\",\n\t\t\t    oid_to_hex(&parent->object.oid))",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(&buffer, \"parent %s\\n\",",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&parent->object.oid)",
          "new_text": null,
          "old_line_content": "\t\t\t    oid_to_hex(&parent->object.oid));",
          "new_line_content": "\t * NOTE! This ordering means that the same exact tree merged with a",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "clear_commit_marks",
          "new_api": null,
          "old_text": "clear_commit_marks(commit, all_flags)",
          "new_text": null,
          "old_line_content": "\tclear_commit_marks(commit, all_flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "clear_commit_marks_many",
          "new_api": null,
          "old_text": "clear_commit_marks_many(nr_reference, reference, all_flags)",
          "new_text": null,
          "old_line_content": "\tclear_commit_marks_many(nr_reference, reference, all_flags);",
          "new_line_content": "\tif (commit->generation > min_generation)",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "free_commit_list",
          "new_api": null,
          "old_text": "free_commit_list(bases)",
          "new_text": null,
          "old_line_content": "\tfree_commit_list(bases);",
          "new_line_content": "\t\treturn ret;",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&buffer, \"encoding %s\\n\", git_commit_encoding)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(&buffer, \"encoding %s\\n\", git_commit_encoding);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "in_merge_bases_many",
          "new_api": null,
          "old_text": "in_merge_bases_many(commit, 1, &reference)",
          "new_text": null,
          "old_line_content": "\treturn in_merge_bases_many(commit, 1, &reference);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(&buffer, '\\n')",
          "new_text": null,
          "old_line_content": "\tstrbuf_addch(&buffer, '\\n');",
          "new_line_content": "\tif (!encoding_is_utf8)",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(&buffer, msg, msg_len)",
          "new_text": null,
          "old_line_content": "\tstrbuf_add(&buffer, msg, msg_len);",
          "new_line_content": "\twhile (extra) {",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "verify_utf8",
          "new_api": null,
          "old_text": "verify_utf8(&buffer)",
          "new_text": null,
          "old_line_content": "\tif (encoding_is_utf8 && !verify_utf8(&buffer))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": "do_sign_commit",
          "new_api": null,
          "old_text": "do_sign_commit(&buffer, sign_commit)",
          "new_text": null,
          "old_line_content": "\tif (sign_commit && do_sign_commit(&buffer, sign_commit)) {",
          "new_line_content": "\t/* And add the comment */",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(num_head, sizeof(*array))",
          "new_text": null,
          "old_line_content": "\tarray = xcalloc(num_head, sizeof(*array));",
          "new_line_content": "\t\tp->item->object.flags &= ~STALE;",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "FLEX_ALLOC_STR",
          "new_api": null,
          "old_text": "FLEX_ALLOC_STR(desc, name, name)",
          "new_text": null,
          "old_line_content": "\tFLEX_ALLOC_STR(desc, name, name);",
          "new_line_content": "\treturn result;",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "commit_list_insert",
          "new_api": null,
          "old_text": "commit_list_insert(array[i], tail)",
          "new_text": null,
          "old_line_content": "\t\ttail = &commit_list_insert(array[i], tail)->next;",
          "new_line_content": "\t\tif (p->item->object.flags & STALE) {",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(array)",
          "new_text": null,
          "old_line_content": "\tfree(array);",
          "new_line_content": "\t\t\tarray[i++] = p->item;",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "get_oid",
          "new_api": null,
          "old_text": "get_oid(name, &oid)",
          "new_text": null,
          "old_line_content": "\tif (get_oid(name, &oid))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "parse_object",
          "new_api": null,
          "old_text": "parse_object(&oid)",
          "new_text": null,
          "old_line_content": "\tobj = parse_object(&oid);",
          "new_line_content": "struct commit *get_merge_parent(const char *name)",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "peel_to_type",
          "new_api": null,
          "old_text": "peel_to_type(name, 0, obj, OBJ_COMMIT)",
          "new_text": null,
          "old_line_content": "\tcommit = (struct commit *)peel_to_type(name, 0, obj, OBJ_COMMIT);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "set_merge_remote_desc",
          "new_api": null,
          "old_text": "set_merge_remote_desc(commit, name, obj)",
          "new_text": null,
          "old_line_content": "\t\tset_merge_remote_desc(commit, name, obj);",
          "new_line_content": "\tstruct commit *commit;",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(buf->buf, \"\\n\\n\")",
          "new_text": null,
          "old_line_content": "\teoh = strstr(buf->buf, \"\\n\\n\");",
          "new_line_content": "static int do_sign_commit(struct strbuf *buf, const char *keyid)",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "sign_buffer",
          "new_api": null,
          "old_text": "sign_buffer(buf, &sig, keyid)",
          "new_text": null,
          "old_line_content": "\tif (sign_buffer(buf, &sig, keyid)) {",
          "new_line_content": "\tif (!eoh)",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&sig)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&sig);",
          "new_line_content": "\t\tinspos = buf->len;",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(struct commit_list))",
          "new_text": null,
          "old_line_content": "\tstruct commit_list *new_commit = xmalloc(sizeof(struct commit_list));",
          "new_line_content": " *     next = commit_list_append(c2, next);",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "strbuf_insert",
          "new_api": null,
          "old_text": "strbuf_insert(buf, inspos, gpg_sig_header, gpg_sig_header_len)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_insert(buf, inspos, gpg_sig_header, gpg_sig_header_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(key)",
          "new_text": null,
          "old_line_content": "\tint key_len = strlen(key);",
          "new_line_content": "\t*next = new_commit;",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "strbuf_insert",
          "new_api": null,
          "old_text": "strbuf_insert(buf, inspos, bol, len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_insert(buf, inspos, bol, len);",
          "new_line_content": "\t\tint len = (eol - bol) + !!*eol;",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "strchrnul",
          "new_api": null,
          "old_text": "strchrnul(line, '\\n')",
          "new_text": null,
          "old_line_content": "\t\tconst char *eol = strchrnul(line, '\\n');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&sig)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&sig);",
          "new_line_content": "\t\t\tinspos += gpg_sig_header_len;",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(line, key, key_len)",
          "new_text": null,
          "old_line_content": "\t\t    !strncmp(line, key, key_len) &&",
          "new_line_content": "\twhile (line) {",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": "get_commit_buffer",
          "new_api": null,
          "old_text": "get_commit_buffer(commit, &size)",
          "new_text": null,
          "old_line_content": "\tconst char *buffer = get_commit_buffer(commit, &size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(line, '\\n', tail - line)",
          "new_text": null,
          "old_line_content": "\t\tconst char *next = memchr(line, '\\n', tail - line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(line, gpg_sig_header)",
          "new_text": null,
          "old_line_content": "\t\telse if (starts_with(line, gpg_sig_header) &&",
          "new_line_content": "\twhile (line < tail) {",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(signature, sig, next - sig)",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_add(signature, sig, next - sig);",
          "new_line_content": "\t\tnext = next ? next + 1 : tail;",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "wt_status_locate_end",
          "new_api": null,
          "old_text": "wt_status_locate_end(buf, len)",
          "new_text": null,
          "old_line_content": "\tsize_t cutoff = wt_status_locate_end(buf, len);",
          "new_line_content": " * the second parameter to append_signoff().",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(buf + bol, '\\n', len - bol)",
          "new_text": null,
          "old_line_content": "\t\tconst char *next_line = memchr(buf + bol, '\\n', len - bol);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "unuse_commit_buffer",
          "new_api": null,
          "old_text": "unuse_commit_buffer(commit, buffer)",
          "new_text": null,
          "old_line_content": "\tunuse_commit_buffer(commit, buffer);",
          "new_line_content": "\t\t\t\t/* dump the whole remainder of the buffer */",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(buf + bol, \"Conflicts:\\n\")",
          "new_text": null,
          "old_line_content": "\t\t} else if (starts_with(buf + bol, \"Conflicts:\\n\")) {",
          "new_line_content": "\t\t\tnext_line++;",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(line, '\\n', tail - line)",
          "new_text": null,
          "old_line_content": "\t\tconst char *next = memchr(line, '\\n', tail - line);",
          "new_line_content": "\tconst char *line = buf->buf;",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(line, gpg_sig_header)",
          "new_text": null,
          "old_line_content": "\t\telse if (starts_with(line, gpg_sig_header) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "strbuf_remove",
          "new_api": null,
          "old_text": "strbuf_remove(buf, sig_start - buf->buf, sig_end - sig_start)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_remove(buf, sig_start - buf->buf, sig_end - sig_start);",
          "new_line_content": "\t\t\t\tnext = tail;",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "merge_remote_util",
          "new_api": null,
          "old_text": "merge_remote_util(parent)",
          "new_text": null,
          "old_line_content": "\tdesc = merge_remote_util(parent);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(desc->obj->oid.hash, &type, &size)",
          "new_text": null,
          "old_line_content": "\tbuf = read_sha1_file(desc->obj->oid.hash, &type, &size);",
          "new_line_content": "\tchar *buf;",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "parse_signature",
          "new_api": null,
          "old_text": "parse_signature(buf, size)",
          "new_text": null,
          "old_line_content": "\tlen = parse_signature(buf, size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*mergetag))",
          "new_text": null,
          "old_line_content": "\tmergetag = xcalloc(1, sizeof(*mergetag));",
          "new_line_content": "\t * public key of the signer of the tag he is merging, while a",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(\"mergetag\")",
          "new_text": null,
          "old_line_content": "\tmergetag->key = xstrdup(\"mergetag\");",
          "new_line_content": "\t * later auditor may have it while auditing, so let's not run",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\tmergetag->len = size;",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "parse_signed_commit",
          "new_api": null,
          "old_text": "parse_signed_commit(commit, &payload, &signature)",
          "new_text": null,
          "old_line_content": "\tif (parse_signed_commit(commit, &payload, &signature) <= 0)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "check_signature",
          "new_api": null,
          "old_text": "check_signature(payload.buf, payload.len, signature.buf,\n\t\tsignature.len, sigc)",
          "new_text": null,
          "old_line_content": "\tret = check_signature(payload.buf, payload.len, signature.buf,",
          "new_line_content": "\tstruct strbuf signature = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&payload)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&payload);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "handle_signed_tag",
          "new_api": null,
          "old_text": "handle_signed_tag(parent, tail)",
          "new_text": null,
          "old_line_content": "\t\thandle_signed_tag(parent, tail);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(buffer, extra->key)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addstr(buffer, extra->key);",
          "new_line_content": "\t\tparents = parents->next;",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "strbuf_add_lines",
          "new_api": null,
          "old_text": "strbuf_add_lines(buffer, \" \", extra->value, extra->len)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_add_lines(buffer, \" \", extra->value, extra->len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "strbuf_addch",
          "new_api": null,
          "old_text": "strbuf_addch(buffer, '\\n')",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addch(buffer, '\\n');",
          "new_line_content": "static void add_extra_header(struct strbuf *buffer,",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "get_commit_buffer",
          "new_api": null,
          "old_text": "get_commit_buffer(commit, &size)",
          "new_text": null,
          "old_line_content": "\tconst char *buffer = get_commit_buffer(commit, &size);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "read_commit_extra_header_lines",
          "new_api": null,
          "old_text": "read_commit_extra_header_lines(buffer, size, exclude)",
          "new_text": null,
          "old_line_content": "\textra = read_commit_extra_header_lines(buffer, size, exclude);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "unuse_commit_buffer",
          "new_api": null,
          "old_text": "unuse_commit_buffer(commit, buffer)",
          "new_text": null,
          "old_line_content": "\tunuse_commit_buffer(commit, buffer);",
          "new_line_content": "struct commit_extra_header *read_commit_extra_headers(struct commit *commit,",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "read_commit_extra_headers",
          "new_api": null,
          "old_text": "read_commit_extra_headers(commit, NULL)",
          "new_text": null,
          "old_line_content": "\tto_free = read_commit_extra_headers(commit, NULL);",
          "new_line_content": "\treturn extra;",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(extra->key, \"mergetag\")",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(extra->key, \"mergetag\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "fn",
          "new_api": null,
          "old_text": "fn(commit, extra, data)",
          "new_text": null,
          "old_line_content": "\t\tfn(commit, extra, data);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "free_commit_extra_headers",
          "new_api": null,
          "old_text": "free_commit_extra_headers(to_free)",
          "new_text": null,
          "old_line_content": "\tfree_commit_extra_headers(to_free);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(field, \"parent\", 6)",
          "new_text": null,
          "old_line_content": "\t\t(len == 6 && !memcmp(field, \"parent\", 6)) ||",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(field, \"committer\", 9)",
          "new_text": null,
          "old_line_content": "\t\t(len == 9 && !memcmp(field, \"committer\", 9)) ||",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(field, \"encoding\", 8)",
          "new_text": null,
          "old_line_content": "\t\t(len == 8 && !memcmp(field, \"encoding\", 8)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(*exclude)",
          "new_text": null,
          "old_line_content": "\t\tsize_t xlen = strlen(*exclude);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(field, *exclude, xlen)",
          "new_text": null,
          "old_line_content": "\t\tif (len == xlen && !memcmp(field, *exclude, xlen))",
          "new_line_content": "static int excluded_header_field(const char *field, size_t len, const char **exclude)",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(line, '\\n', eob - line)",
          "new_text": null,
          "old_line_content": "\t\tnext = memchr(line, '\\n', eob - line);",
          "new_line_content": "\tstruct commit_extra_header *extra = NULL, **tail = &extra, *it = NULL;",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(&buf, line + 1, next - (line + 1))",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrbuf_add(&buf, line + 1, next - (line + 1));",
          "new_line_content": "\t     line < eob && *line != '\\n';",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "strbuf_detach",
          "new_api": null,
          "old_text": "strbuf_detach(&buf, &it->len)",
          "new_text": null,
          "old_line_content": "\t\t\tit->value = strbuf_detach(&buf, &it->len);",
          "new_line_content": "\t\tif (*line == ' ') {",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&buf)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_reset(&buf);",
          "new_line_content": "\t\t\t/* continuation */",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(line, ' ', next - line)",
          "new_text": null,
          "old_line_content": "\t\teof = memchr(line, ' ', next - line);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "xmemdupz",
          "new_api": null,
          "old_text": "xmemdupz(line, eof-line)",
          "new_text": null,
          "old_line_content": "\t\tit->key = xmemdupz(line, eof-line);",
          "new_line_content": "\t\tif (!eof)",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "strbuf_add",
          "new_api": null,
          "old_text": "strbuf_add(&buf, eof + 1, next - (eof + 1))",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_add(&buf, eof + 1, next - (eof + 1));",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(extra->key)",
          "new_text": null,
          "old_line_content": "\t\tfree(extra->key);",
          "new_line_content": "\treturn extra;",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(extra->value)",
          "new_text": null,
          "old_line_content": "\t\tfree(extra->value);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(extra)",
          "new_text": null,
          "old_line_content": "\t\tfree(extra);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "append_merge_tag_headers",
          "new_api": null,
          "old_text": "append_merge_tag_headers(parents, &tail)",
          "new_text": null,
          "old_line_content": "\tappend_merge_tag_headers(parents, &tail);",
          "new_line_content": "int commit_tree(const char *msg, size_t msg_len, const struct object_id *tree,",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "commit_tree_extended",
          "new_api": null,
          "old_text": "commit_tree_extended(msg, msg_len, tree, parents, ret,\n\t\t\t\t      author, sign_commit, extra)",
          "new_text": null,
          "old_line_content": "\tresult = commit_tree_extended(msg, msg_len, tree, parents, ret,",
          "new_line_content": "\t\tstruct commit_list *parents, struct object_id *ret,",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "free_commit_extra_headers",
          "new_api": null,
          "old_text": "free_commit_extra_headers(extra)",
          "new_text": null,
          "old_line_content": "\tfree_commit_extra_headers(extra);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "find_invalid_utf8",
          "new_api": null,
          "old_text": "find_invalid_utf8(buf->buf + pos, buf->len - pos)",
          "new_text": null,
          "old_line_content": "\t\tbad = find_invalid_utf8(buf->buf + pos, buf->len - pos);",
          "new_line_content": "\tlong pos = 0;",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "strbuf_remove",
          "new_api": null,
          "old_text": "strbuf_remove(buf, pos, 1)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_remove(buf, pos, 1);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 20,
      "total_additions": 91,
      "total_deletions": 91,
      "total_api_changes": 202
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 202,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          1067,
          1059,
          1068,
          1062
        ]
      }
    },
    "api_calls_before": 302,
    "api_calls_after": 302,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 1,
      "total_diff_lines": 26
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f89201494308524a92eff5995d122e8553c36508",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f89201494308524a92eff5995d122e8553c36508/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f89201494308524a92eff5995d122e8553c36508/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/f89201494308524a92eff5995d122e8553c36508/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 1565,
          "old_api": "blame_origin_decref",
          "new_api": "drop_origin_blob",
          "old_text": "blame_origin_decref(sg_origin[i])",
          "new_text": "drop_origin_blob(sg_origin[i])",
          "old_line_content": "\t\t\tblame_origin_decref(sg_origin[i]);",
          "new_line_content": "\t\t\t\tdrop_origin_blob(sg_origin[i]);",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "parse_commit",
          "new_api": "blame_origin_incref",
          "old_text": "parse_commit(commit)",
          "new_text": "blame_origin_incref(suspect)",
          "old_line_content": "\t\tparse_commit(commit);",
          "new_line_content": "\t\tblame_origin_incref(suspect);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "fake_working_tree_commit",
          "new_api": "setup_work_tree",
          "old_text": "fake_working_tree_commit(sb->repo,\n\t\t\t\t\t\t     &sb->revs->diffopt,\n\t\t\t\t\t\t     path, sb->contents_from)",
          "new_text": "setup_work_tree()",
          "old_line_content": "\t\tsb->final = fake_working_tree_commit(sb->repo,",
          "new_line_content": "\t\tsetup_work_tree();",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": "_",
          "new_api": "prepare_revision_walk",
          "old_text": "_(\"revision walk setup failed\")",
          "new_text": "prepare_revision_walk(sb->revs)",
          "old_line_content": "\t\tdie(_(\"revision walk setup failed\"));",
          "new_line_content": "\tif (prepare_revision_walk(sb->revs))",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "xcalloc",
          "new_api": "oideq",
          "old_text": "xcalloc(1, sizeof(*l))",
          "new_text": "oideq(&c->object.oid, &sb->final->object.oid)",
          "old_line_content": "\t\t\tstruct commit_list *l = xcalloc(1, sizeof(*l));",
          "new_line_content": "\t\t       !oideq(&c->object.oid, &sb->final->object.oid)) {",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "_",
          "new_api": "oideq",
          "old_text": "_(\"--reverse --first-parent together require range along first-parent chain\")",
          "new_text": "oideq(&c->object.oid, &sb->final->object.oid)",
          "old_line_content": "\t\t\tdie(_(\"--reverse --first-parent together require range along first-parent chain\"));",
          "new_line_content": "\t\tif (!oideq(&c->object.oid, &sb->final->object.oid))",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "get_blame_suspects",
          "new_api": "is_null_oid",
          "old_text": "get_blame_suspects(sb->final)",
          "new_text": "is_null_oid(&sb->final->object.oid)",
          "old_line_content": "\t\to = get_blame_suspects(sb->final);",
          "new_line_content": "\tif (is_null_oid(&sb->final->object.oid)) {",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "xmemdupz",
          "new_api": "get_blame_suspects",
          "old_text": "xmemdupz(o->file.ptr, o->file.size)",
          "new_text": "get_blame_suspects(sb->final)",
          "old_line_content": "\t\tsb->final_buf = xmemdupz(o->file.ptr, o->file.size);",
          "new_line_content": "\t\to = get_blame_suspects(sb->final);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "fill_blob_sha1_and_mode",
          "new_api": "get_origin",
          "old_text": "fill_blob_sha1_and_mode(sb->repo, o)",
          "new_text": "get_origin(sb->final, path)",
          "old_line_content": "\t\tif (fill_blob_sha1_and_mode(sb->repo, o))",
          "new_line_content": "\t\to = get_origin(sb->final, path);",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "_",
          "new_api": "fill_blob_sha1_and_mode",
          "old_text": "_(\"no such path %s in %s\")",
          "new_text": "fill_blob_sha1_and_mode(sb->repo, o)",
          "old_line_content": "\t\t\tdie(_(\"no such path %s in %s\"), path, final_commit_name);",
          "new_line_content": "\t\tif (fill_blob_sha1_and_mode(sb->repo, o))",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": "oid_to_hex",
          "new_api": "_",
          "old_text": "oid_to_hex(&o->blob_oid)",
          "new_text": "_(\"cannot read blob %s for path %s\")",
          "old_line_content": "\t\t\t    oid_to_hex(&o->blob_oid),",
          "new_line_content": "\t\t\tdie(_(\"cannot read blob %s for path %s\"),",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1664,
          "old_api": null,
          "new_api": "ALLOC_ARRAY",
          "old_text": null,
          "new_text": "ALLOC_ARRAY(sb->lineno, num + 1)",
          "old_line_content": "\tlineno = sb->lineno;",
          "new_line_content": "\tALLOC_ARRAY(sb->lineno, num + 1);",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"--contents and --reverse do not blend well.\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(_(\"--contents and --reverse do not blend well.\"));",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "get_next_line",
          "old_text": null,
          "new_text": "get_next_line(p, end)",
          "old_line_content": "\t\t*lineno++ = p - buf;",
          "new_line_content": "\tfor (p = buf; p < end; p = get_next_line(p, end))",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"repo is NULL\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"repo is NULL\");",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "find_single_final",
          "old_text": null,
          "new_text": "find_single_final(sb->revs, &final_commit_name)",
          "old_line_content": "\t\tsb->commits.compare = compare_commits_by_commit_date;",
          "new_line_content": "\t\tsb->final = find_single_final(sb->revs, &final_commit_name);",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": null,
          "new_api": "find_single_initial",
          "old_text": null,
          "new_text": "find_single_initial(sb->revs, &final_commit_name)",
          "old_line_content": "\t\tsb->commits.compare = compare_commits_by_reverse_commit_date;",
          "new_line_content": "\t\tsb->final = find_single_initial(sb->revs, &final_commit_name);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot use --contents with final commit object name\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(_(\"cannot use --contents with final commit object name\"));",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "deref_tag",
          "old_text": null,
          "new_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "old_line_content": "\t\tif (obj->type != OBJ_COMMIT)",
          "new_line_content": "\t\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Non commit %s?\", revs->pending.objects[i].name)",
          "old_line_content": "\t\tif (found)",
          "new_line_content": "\t\t\tdie(\"Non commit %s?\", revs->pending.objects[i].name);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"More than one commit to dig from %s and %s?\",\n\t\t\t    revs->pending.objects[i].name, name)",
          "old_line_content": "\t\t\t    revs->pending.objects[i].name, name);",
          "new_line_content": "\t\t\tdie(\"More than one commit to dig from %s and %s?\",",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": null,
          "new_api": "fake_working_tree_commit",
          "old_text": null,
          "new_text": "fake_working_tree_commit(sb->repo,\n\t\t\t\t\t\t     &sb->revs->diffopt,\n\t\t\t\t\t\t     path, sb->contents_from)",
          "old_line_content": "\t\t\t\t\t\t     &sb->revs->diffopt,",
          "new_line_content": "\t\tsb->final = fake_working_tree_commit(sb->repo,",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "blame_origin_decref",
          "old_text": null,
          "new_text": "blame_origin_decref(sg_origin[i])",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tblame_origin_decref(sg_origin[i]);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "add_pending_object",
          "old_text": null,
          "new_text": "add_pending_object(sb->revs, &(sb->final->object), \":\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tadd_pending_object(sb->revs, &(sb->final->object), \":\");",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "drop_origin_blob",
          "old_text": null,
          "new_text": "drop_origin_blob(origin)",
          "old_line_content": "\tif (sg_buf != sg_origin)",
          "new_line_content": "\tdrop_origin_blob(origin);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "xstrdup_or_null",
          "old_text": null,
          "new_text": "xstrdup_or_null(name)",
          "old_line_content": "\treturn found;",
          "new_line_content": "\t\t*name_p = xstrdup_or_null(name);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(sg_origin)",
          "old_line_content": "}",
          "new_line_content": "\t\tfree(sg_origin);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "find_single_final",
          "old_text": null,
          "new_text": "find_single_final(sb->revs, NULL)",
          "old_line_content": "\t\tif (!final_commit)",
          "new_line_content": "\t\tfinal_commit = find_single_final(sb->revs, NULL);",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"--reverse and --first-parent together require specified latest commit\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdie(_(\"--reverse and --first-parent together require specified latest commit\"));",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "prio_queue_get",
          "old_text": null,
          "new_text": "prio_queue_get(&sb->commits)",
          "old_line_content": "",
          "new_line_content": "\tstruct commit *commit = prio_queue_get(&sb->commits);",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"revision walk setup failed\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(_(\"revision walk setup failed\"));",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "get_blame_suspects",
          "old_text": null,
          "new_text": "get_blame_suspects(commit)",
          "old_line_content": "",
          "new_line_content": "\t\tstruct blame_origin *suspect = get_blame_suspects(commit);",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*l))",
          "old_line_content": "",
          "new_line_content": "\t\t\tstruct commit_list *l = xcalloc(1, sizeof(*l));",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "deref_tag",
          "old_text": null,
          "new_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "old_line_content": "\tif (obj->type != OBJ_COMMIT)",
          "new_line_content": "\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "prio_queue_get",
          "old_text": null,
          "new_text": "prio_queue_get(&sb->commits)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\tcommit = prio_queue_get(&sb->commits);",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": null,
          "new_api": "add_decoration",
          "old_text": null,
          "new_text": "add_decoration(&sb->revs->children,\n\t\t\t\t\t   &c->parents->item->object, l)",
          "old_line_content": "\t\t\t\t\t   &c->parents->item->object, l))",
          "new_line_content": "\t\t\tif (add_decoration(&sb->revs->children,",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"not unique item in first-parent chain\")",
          "old_line_content": "\t\t\tc = c->parents->item;",
          "new_line_content": "\t\t\t\tBUG(\"not unique item in first-parent chain\");",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "resolve_ref_unsafe",
          "old_text": null,
          "new_text": "resolve_ref_unsafe(\"HEAD\", RESOLVE_REF_READING, &head_oid, NULL)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (!resolve_ref_unsafe(\"HEAD\", RESOLVE_REF_READING, &head_oid, NULL))",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(commit == suspect->commit)",
          "old_line_content": "",
          "new_line_content": "\t\tassert(commit == suspect->commit);",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "lookup_commit_reference_gently",
          "old_text": null,
          "new_text": "lookup_commit_reference_gently(revs->repo,\n\t\t\t\t\t\t     &head_oid, 1)",
          "old_line_content": "\t\t\t\t\t\t     &head_oid, 1);",
          "new_line_content": "\thead_commit = lookup_commit_reference_gently(revs->repo,",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"--reverse --first-parent together require range along first-parent chain\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdie(_(\"--reverse --first-parent together require range along first-parent chain\"));",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "parse_commit",
          "old_text": null,
          "new_text": "parse_commit(commit)",
          "old_line_content": "\t\tif (sb->reverse ||",
          "new_line_content": "\t\tparse_commit(commit);",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "add_pending_object",
          "old_text": null,
          "new_text": "add_pending_object(revs, &head_commit->object, \"HEAD\")",
          "old_line_content": "",
          "new_line_content": "\tadd_pending_object(revs, &head_commit->object, \"HEAD\");",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": null,
          "new_api": "xmemdupz",
          "old_text": null,
          "new_text": "xmemdupz(o->file.ptr, o->file.size)",
          "old_line_content": "\t\tsb->final_buf_size = o->file.size;",
          "new_line_content": "\t\tsb->final_buf = xmemdupz(o->file.ptr, o->file.size);",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "pass_blame",
          "old_text": null,
          "new_text": "pass_blame(sb, suspect, opt)",
          "old_line_content": "\t\telse {",
          "new_line_content": "\t\t\tpass_blame(sb, suspect, opt);",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"no such path %s in %s\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tdie(_(\"no such path %s in %s\"), path, final_commit_name);",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": null,
          "new_api": "mark_parents_uninteresting",
          "old_text": null,
          "new_text": "mark_parents_uninteresting(commit)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tmark_parents_uninteresting(commit);",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "textconv_object",
          "old_text": null,
          "new_text": "textconv_object(sb->repo, path, o->mode, &o->blob_oid, 1, (char **) &sb->final_buf,\n\t\t\t\t    &sb->final_buf_size)",
          "old_line_content": "\t\t\t\t    &sb->final_buf_size))",
          "new_line_content": "\t\t    textconv_object(sb->repo, path, o->mode, &o->blob_oid, 1, (char **) &sb->final_buf,",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "read_object_file",
          "old_text": null,
          "new_text": "read_object_file(&o->blob_oid, &type,\n\t\t\t\t\t\t\t &sb->final_buf_size)",
          "old_line_content": "\t\t\t\t\t\t\t &sb->final_buf_size);",
          "new_line_content": "\t\t\tsb->final_buf = read_object_file(&o->blob_oid, &type,",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&o->blob_oid)",
          "old_line_content": "\t\t\t    path);",
          "new_line_content": "\t\t\t    oid_to_hex(&o->blob_oid),",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "found_guilty_entry",
          "old_text": null,
          "new_text": "sb->found_guilty_entry(ent, sb->found_guilty_entry_data)",
          "old_line_content": "\t\t\t\tif (next) {",
          "new_line_content": "\t\t\t\t\tsb->found_guilty_entry(ent, sb->found_guilty_entry_data);",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "deref_tag",
          "old_text": null,
          "new_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "old_line_content": "\t\tif (obj->type != OBJ_COMMIT)",
          "new_line_content": "\t\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": null,
          "new_api": "prepare_lines",
          "old_text": null,
          "new_text": "prepare_lines(sb)",
          "old_line_content": "",
          "new_line_content": "\tprepare_lines(sb);",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Non commit %s?\", revs->pending.objects[i].name)",
          "old_line_content": "\t\tif (found)",
          "new_line_content": "\t\t\tdie(\"Non commit %s?\", revs->pending.objects[i].name);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"More than one commit to dig up from, %s and %s?\",\n\t\t\t    revs->pending.objects[i].name, name)",
          "old_line_content": "\t\t\t    revs->pending.objects[i].name, name);",
          "new_line_content": "\t\t\tdie(\"More than one commit to dig up from, %s and %s?\",",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free((char *)final_commit_name)",
          "old_line_content": "}",
          "new_line_content": "\tfree((char *)final_commit_name);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "blame_origin_decref",
          "old_text": null,
          "new_text": "blame_origin_decref(suspect)",
          "old_line_content": "",
          "new_line_content": "\t\tblame_origin_decref(suspect);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "dwim_reverse_initial",
          "old_text": null,
          "new_text": "dwim_reverse_initial(revs, &name)",
          "old_line_content": "\tif (!name)",
          "new_line_content": "\t\tfound = dwim_reverse_initial(revs, &name);",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "sanity_check_refcnt",
          "old_text": null,
          "new_text": "sanity_check_refcnt(sb)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tsanity_check_refcnt(sb);",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"No commit to dig up from?\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"No commit to dig up from?\");",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(struct blame_entry))",
          "old_line_content": "\tnew_head->lno = start;",
          "new_line_content": "\tstruct blame_entry *new_head = xcalloc(1, sizeof(struct blame_entry));",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(name)",
          "old_line_content": "\treturn found;",
          "new_line_content": "\t\t*name_p = xstrdup(name);",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "memchr",
          "old_text": null,
          "new_text": "memchr(start, '\\n', end - start)",
          "old_line_content": "\treturn nl ? nl + 1 : end;",
          "new_line_content": "\tconst char *nl = memchr(start, '\\n', end - start);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": null,
          "new_api": "blame_origin_incref",
          "old_text": null,
          "new_text": "blame_origin_incref(o)",
          "old_line_content": "\treturn new_head;",
          "new_line_content": "\tblame_origin_incref(o);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(sb, 0, sizeof(struct blame_scoreboard))",
          "old_line_content": "\tsb->move_score = BLAME_DEFAULT_MOVE_SCORE;",
          "new_line_content": "\tmemset(sb, 0, sizeof(struct blame_scoreboard));",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "get_next_line",
          "old_text": null,
          "new_text": "get_next_line(p, end)",
          "old_line_content": "\t\tnum++;",
          "new_line_content": "\tfor (p = buf; p < end; p = get_next_line(p, end))",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "init_blame_suspects",
          "old_text": null,
          "new_text": "init_blame_suspects(&blame_suspects)",
          "old_line_content": "",
          "new_line_content": "\tinit_blame_suspects(&blame_suspects);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1792,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"--contents and --reverse do not blend well.\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"--contents and --reverse do not blend well.\"));",
          "new_line_content": "\tif (sb->reverse && sb->contents_from)",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "get_next_line",
          "new_api": null,
          "old_text": "get_next_line(p, end)",
          "new_text": null,
          "old_line_content": "\tfor (p = buf; p < end; p = get_next_line(p, end))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"repo is NULL\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"repo is NULL\");",
          "new_line_content": "\tif (!sb->repo)",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "find_single_final",
          "new_api": null,
          "old_text": "find_single_final(sb->revs, &final_commit_name)",
          "new_text": null,
          "old_line_content": "\t\tsb->final = find_single_final(sb->revs, &final_commit_name);",
          "new_line_content": "\tif (!sb->reverse) {",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "find_single_initial",
          "new_api": null,
          "old_text": "find_single_initial(sb->revs, &final_commit_name)",
          "new_text": null,
          "old_line_content": "\t\tsb->final = find_single_initial(sb->revs, &final_commit_name);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"cannot use --contents with final commit object name\")",
          "new_text": null,
          "old_line_content": "\t\tdie(_(\"cannot use --contents with final commit object name\"));",
          "new_line_content": "\tif (sb->final && sb->contents_from)",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "deref_tag",
          "new_api": null,
          "old_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Non commit %s?\", revs->pending.objects[i].name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Non commit %s?\", revs->pending.objects[i].name);",
          "new_line_content": "\t\tif (obj->type != OBJ_COMMIT)",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "setup_work_tree",
          "new_api": null,
          "old_text": "setup_work_tree()",
          "new_text": null,
          "old_line_content": "\t\tsetup_work_tree();",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"More than one commit to dig from %s and %s?\",\n\t\t\t    revs->pending.objects[i].name, name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"More than one commit to dig from %s and %s?\",",
          "new_line_content": "\t\tif (found)",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "drop_origin_blob",
          "new_api": null,
          "old_text": "drop_origin_blob(sg_origin[i])",
          "new_text": null,
          "old_line_content": "\t\t\tdrop_origin_blob(sg_origin[i]);",
          "new_line_content": "\t\t\tif (!sg_origin[i]->suspects)",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "add_pending_object",
          "new_api": null,
          "old_text": "add_pending_object(sb->revs, &(sb->final->object), \":\")",
          "new_text": null,
          "old_line_content": "\t\tadd_pending_object(sb->revs, &(sb->final->object), \":\");",
          "new_line_content": "\t\t\t\t\t\t     path, sb->contents_from);",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "drop_origin_blob",
          "new_api": null,
          "old_text": "drop_origin_blob(origin)",
          "new_text": null,
          "old_line_content": "\tdrop_origin_blob(origin);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "xstrdup_or_null",
          "new_api": null,
          "old_text": "xstrdup_or_null(name)",
          "new_text": null,
          "old_line_content": "\t\t*name_p = xstrdup_or_null(name);",
          "new_line_content": "\tif (name_p)",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sg_origin)",
          "new_text": null,
          "old_line_content": "\t\tfree(sg_origin);",
          "new_line_content": "\tif (sg_buf != sg_origin)",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": "find_single_final",
          "new_api": null,
          "old_text": "find_single_final(sb->revs, NULL)",
          "new_text": null,
          "old_line_content": "\t\tfinal_commit = find_single_final(sb->revs, NULL);",
          "new_line_content": "\tif (sb->reverse && sb->revs->first_parent_only) {",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"--reverse and --first-parent together require specified latest commit\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(_(\"--reverse and --first-parent together require specified latest commit\"));",
          "new_line_content": "\t\tif (!final_commit)",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "prepare_revision_walk",
          "new_api": null,
          "old_text": "prepare_revision_walk(sb->revs)",
          "new_text": null,
          "old_line_content": "\tif (prepare_revision_walk(sb->revs))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "prio_queue_get",
          "new_api": null,
          "old_text": "prio_queue_get(&sb->commits)",
          "new_text": null,
          "old_line_content": "\tstruct commit *commit = prio_queue_get(&sb->commits);",
          "new_line_content": "\tstruct rev_info *revs = sb->revs;",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "get_blame_suspects",
          "new_api": null,
          "old_text": "get_blame_suspects(commit)",
          "new_text": null,
          "old_line_content": "\t\tstruct blame_origin *suspect = get_blame_suspects(commit);",
          "new_line_content": "\t\tstruct blame_entry *ent;",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(&c->object.oid, &sb->final->object.oid)",
          "new_text": null,
          "old_line_content": "\t\t       !oideq(&c->object.oid, &sb->final->object.oid)) {",
          "new_line_content": "\t\twhile (c->parents &&",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "deref_tag",
          "new_api": null,
          "old_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "new_text": null,
          "old_line_content": "\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "new_line_content": "\tobj = revs->pending.objects[0].item;",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "prio_queue_get",
          "new_api": null,
          "old_text": "prio_queue_get(&sb->commits)",
          "new_text": null,
          "old_line_content": "\t\t\tcommit = prio_queue_get(&sb->commits);",
          "new_line_content": "\t\tif (!suspect) {",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "add_decoration",
          "new_api": null,
          "old_text": "add_decoration(&sb->revs->children,\n\t\t\t\t\t   &c->parents->item->object, l)",
          "new_text": null,
          "old_line_content": "\t\t\tif (add_decoration(&sb->revs->children,",
          "new_line_content": "\t\t\tl->item = c;",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"not unique item in first-parent chain\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tBUG(\"not unique item in first-parent chain\");",
          "new_line_content": "\t\t\t\t\t   &c->parents->item->object, l))",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "resolve_ref_unsafe",
          "new_api": null,
          "old_text": "resolve_ref_unsafe(\"HEAD\", RESOLVE_REF_READING, &head_oid, NULL)",
          "new_text": null,
          "old_line_content": "\tif (!resolve_ref_unsafe(\"HEAD\", RESOLVE_REF_READING, &head_oid, NULL))",
          "new_line_content": "\t/* Do we have HEAD? */",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(commit == suspect->commit)",
          "new_text": null,
          "old_line_content": "\t\tassert(commit == suspect->commit);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "lookup_commit_reference_gently",
          "new_api": null,
          "old_text": "lookup_commit_reference_gently(revs->repo,\n\t\t\t\t\t\t     &head_oid, 1)",
          "new_text": null,
          "old_line_content": "\thead_commit = lookup_commit_reference_gently(revs->repo,",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(&c->object.oid, &sb->final->object.oid)",
          "new_text": null,
          "old_line_content": "\t\tif (!oideq(&c->object.oid, &sb->final->object.oid))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "blame_origin_incref",
          "new_api": null,
          "old_text": "blame_origin_incref(suspect)",
          "new_text": null,
          "old_line_content": "\t\tblame_origin_incref(suspect);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&sb->final->object.oid)",
          "new_text": null,
          "old_line_content": "\tif (is_null_oid(&sb->final->object.oid)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "add_pending_object",
          "new_api": null,
          "old_text": "add_pending_object(revs, &head_commit->object, \"HEAD\")",
          "new_text": null,
          "old_line_content": "\tadd_pending_object(revs, &head_commit->object, \"HEAD\");",
          "new_line_content": "\tobj->flags |= UNINTERESTING;",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "pass_blame",
          "new_api": null,
          "old_text": "pass_blame(sb, suspect, opt)",
          "new_text": null,
          "old_line_content": "\t\t\tpass_blame(sb, suspect, opt);",
          "new_line_content": "\t\t     !(revs->max_age != -1 && commit->date < revs->max_age)))",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "get_origin",
          "new_api": null,
          "old_text": "get_origin(sb->final, path)",
          "new_text": null,
          "old_line_content": "\t\to = get_origin(sb->final, path);",
          "new_line_content": "\telse {",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "mark_parents_uninteresting",
          "new_api": null,
          "old_text": "mark_parents_uninteresting(commit)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmark_parents_uninteresting(commit);",
          "new_line_content": "\t\t\tif (commit->object.parsed)",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "textconv_object",
          "new_api": null,
          "old_text": "textconv_object(sb->repo, path, o->mode, &o->blob_oid, 1, (char **) &sb->final_buf,\n\t\t\t\t    &sb->final_buf_size)",
          "new_text": null,
          "old_line_content": "\t\t    textconv_object(sb->repo, path, o->mode, &o->blob_oid, 1, (char **) &sb->final_buf,",
          "new_line_content": "\t\tif (sb->revs->diffopt.flags.allow_textconv &&",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "read_object_file",
          "new_api": null,
          "old_text": "read_object_file(&o->blob_oid, &type,\n\t\t\t\t\t\t\t &sb->final_buf_size)",
          "new_text": null,
          "old_line_content": "\t\t\tsb->final_buf = read_object_file(&o->blob_oid, &type,",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"cannot read blob %s for path %s\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(_(\"cannot read blob %s for path %s\"),",
          "new_line_content": "\t\tif (!sb->final_buf)",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "found_guilty_entry",
          "new_api": null,
          "old_text": "sb->found_guilty_entry(ent, sb->found_guilty_entry_data)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsb->found_guilty_entry(ent, sb->found_guilty_entry_data);",
          "new_line_content": "\t\t\t\tif (sb->found_guilty_entry)",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "deref_tag",
          "new_api": null,
          "old_text": "deref_tag(revs->repo, obj, NULL, 0)",
          "new_text": null,
          "old_line_content": "\t\tobj = deref_tag(revs->repo, obj, NULL, 0);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "prepare_lines",
          "new_api": null,
          "old_text": "prepare_lines(sb)",
          "new_text": null,
          "old_line_content": "\tprepare_lines(sb);",
          "new_line_content": "\tsb->num_read_blob++;",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"Non commit %s?\", revs->pending.objects[i].name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"Non commit %s?\", revs->pending.objects[i].name);",
          "new_line_content": "\t\tif (obj->type != OBJ_COMMIT)",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"More than one commit to dig up from, %s and %s?\",\n\t\t\t    revs->pending.objects[i].name, name)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"More than one commit to dig up from, %s and %s?\",",
          "new_line_content": "\t\tif (found)",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "free",
          "new_api": null,
          "old_text": "free((char *)final_commit_name)",
          "new_text": null,
          "old_line_content": "\tfree((char *)final_commit_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "blame_origin_decref",
          "new_api": null,
          "old_text": "blame_origin_decref(suspect)",
          "new_text": null,
          "old_line_content": "\t\tblame_origin_decref(suspect);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "dwim_reverse_initial",
          "new_api": null,
          "old_text": "dwim_reverse_initial(revs, &name)",
          "new_text": null,
          "old_line_content": "\t\tfound = dwim_reverse_initial(revs, &name);",
          "new_line_content": "\tif (!name)",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "sanity_check_refcnt",
          "new_api": null,
          "old_text": "sanity_check_refcnt(sb)",
          "new_text": null,
          "old_line_content": "\t\t\tsanity_check_refcnt(sb);",
          "new_line_content": "\t\tif (sb->debug) /* sanity */",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"No commit to dig up from?\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"No commit to dig up from?\");",
          "new_line_content": "\tif (!name)",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(struct blame_entry))",
          "new_text": null,
          "old_line_content": "\tstruct blame_entry *new_head = xcalloc(1, sizeof(struct blame_entry));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(name)",
          "new_text": null,
          "old_line_content": "\t\t*name_p = xstrdup(name);",
          "new_line_content": "\tif (name_p)",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "memchr",
          "new_api": null,
          "old_text": "memchr(start, '\\n', end - start)",
          "new_text": null,
          "old_line_content": "\tconst char *nl = memchr(start, '\\n', end - start);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "blame_origin_incref",
          "new_api": null,
          "old_text": "blame_origin_incref(o)",
          "new_text": null,
          "old_line_content": "\tblame_origin_incref(o);",
          "new_line_content": "\tnew_head->next = head;",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(sb, 0, sizeof(struct blame_scoreboard))",
          "new_text": null,
          "old_line_content": "\tmemset(sb, 0, sizeof(struct blame_scoreboard));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "get_next_line",
          "new_api": null,
          "old_text": "get_next_line(p, end)",
          "new_text": null,
          "old_line_content": "\tfor (p = buf; p < end; p = get_next_line(p, end))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "init_blame_suspects",
          "new_api": null,
          "old_text": "init_blame_suspects(&blame_suspects)",
          "new_text": null,
          "old_line_content": "\tinit_blame_suspects(&blame_suspects);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "ALLOC_ARRAY",
          "new_api": null,
          "old_text": "ALLOC_ARRAY(sb->lineno, num + 1)",
          "new_text": null,
          "old_line_content": "\tALLOC_ARRAY(sb->lineno, num + 1);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 11,
      "total_additions": 56,
      "total_deletions": 56,
      "total_api_changes": 123
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 123,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 345,
    "api_calls_after": 345,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
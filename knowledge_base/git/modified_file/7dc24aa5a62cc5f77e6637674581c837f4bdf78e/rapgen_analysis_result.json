{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7dc24aa5a62cc5f77e6637674581c837f4bdf78e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7dc24aa5a62cc5f77e6637674581c837f4bdf78e/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7dc24aa5a62cc5f77e6637674581c837f4bdf78e/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7dc24aa5a62cc5f77e6637674581c837f4bdf78e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 401,
          "old_api": "stat",
          "new_api": "fill_sha1_path",
          "old_text": "stat(alt->base, st)",
          "new_text": "fill_sha1_path(name, sha1)",
          "old_line_content": "\t\tif (!stat(alt->base, st))",
          "new_line_content": "\t\tfill_sha1_path(name, sha1);",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "close",
          "new_api": "fstat",
          "old_text": "close(fd)",
          "new_text": "fstat(fd, &st)",
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\tif (fstat(fd, &st)) {",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "error",
          "new_api": "close",
          "old_text": "error(\"index file %s is too small\", path)",
          "new_text": "close(fd)",
          "old_line_content": "\t\treturn error(\"index file %s is too small\", path);",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "close",
          "new_api": "xmmap",
          "old_text": "close(fd)",
          "new_text": "xmmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tidx_map = xmmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "ntohl",
          "new_api": "htonl",
          "old_text": "ntohl(hdr->idx_version)",
          "new_text": "htonl(PACK_IDX_SIGNATURE)",
          "old_line_content": "\t\tversion = ntohl(hdr->idx_version);",
          "new_line_content": "\tif (hdr->idx_signature == htonl(PACK_IDX_SIGNATURE)) {",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "error",
          "new_api": "munmap",
          "old_text": "error(\"index file %s is version %d\"\n\t\t\t\t     \" and is not supported by this binary\"\n\t\t\t\t     \" (try upgrading GIT to a newer version)\",\n\t\t\t\t     path, version)",
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "\t\t\treturn error(\"index file %s is version %d\"",
          "new_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "error",
          "new_api": "munmap",
          "old_text": "error(\"non-monotonic index %s\", path)",
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "\t\t\treturn error(\"non-monotonic index %s\", path);",
          "new_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "error",
          "new_api": "munmap",
          "old_text": "error(\"wrong index file size in %s\", path)",
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "\t\t\treturn error(\"wrong index file size in %s\", path);",
          "new_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "error",
          "new_api": "munmap",
          "old_text": "error(\"wrong index file size in %s\", path)",
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "\t\t\treturn error(\"wrong index file size in %s\", path);",
          "new_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "error",
          "new_api": "munmap",
          "old_text": "error(\"pack too large for current definition of off_t in %s\", path)",
          "new_text": "munmap(idx_map, idx_size)",
          "old_line_content": "\t\t\t\treturn error(\"pack too large for current definition of off_t in %s\", path);",
          "new_line_content": "\t\t\t\tmunmap(idx_map, idx_size);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "strlen",
          "new_api": "xstrdup",
          "old_text": "strlen(\".pack\")",
          "new_text": "xstrdup(p->pack_name)",
          "old_line_content": "\tstrcpy(idx_name + strlen(idx_name) - strlen(\".pack\"), \".idx\");",
          "new_line_content": "\tidx_name = xstrdup(p->pack_name);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "check_packed_git_idx",
          "new_api": "strlen",
          "old_text": "check_packed_git_idx(idx_name, p)",
          "new_text": "strlen(\".pack\")",
          "old_line_content": "\tret = check_packed_git_idx(idx_name, p);",
          "new_line_content": "\tstrcpy(idx_name + strlen(idx_name) - strlen(\".pack\"), \".idx\");",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "free",
          "new_api": "check_packed_git_idx",
          "old_text": "free(idx_name)",
          "new_text": "check_packed_git_idx(idx_name, p)",
          "old_line_content": "\tfree(idx_name);",
          "new_line_content": "\tret = check_packed_git_idx(idx_name, p);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "error",
          "new_api": "open_pack_index",
          "old_text": "error(\"packfile %s index unavailable\", p->pack_name)",
          "new_text": "open_pack_index(p)",
          "old_line_content": "\t\treturn error(\"packfile %s index unavailable\", p->pack_name);",
          "new_line_content": "\tif (!p->index_data && open_pack_index(p))",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "fstat",
          "new_api": "open",
          "old_text": "fstat(p->pack_fd, &st)",
          "new_text": "open(p->pack_name, O_RDONLY)",
          "old_line_content": "\tif (p->pack_fd < 0 || fstat(p->pack_fd, &st))",
          "new_line_content": "\tp->pack_fd = open(p->pack_name, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "error",
          "new_api": "S_ISREG",
          "old_text": "error(\"packfile %s not a regular file\", p->pack_name)",
          "new_text": "S_ISREG(st.st_mode)",
          "old_line_content": "\t\t\treturn error(\"packfile %s not a regular file\", p->pack_name);",
          "new_line_content": "\t\tif (!S_ISREG(st.st_mode))",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "error",
          "new_api": "fcntl",
          "old_text": "error(\"cannot set FD_CLOEXEC\")",
          "new_text": "fcntl(p->pack_fd, F_SETFD, fd_flag)",
          "old_line_content": "\t\treturn error(\"cannot set FD_CLOEXEC\");",
          "new_line_content": "\tif (fcntl(p->pack_fd, F_SETFD, fd_flag) == -1)",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "error",
          "new_api": "read_in_full",
          "old_text": "error(\"file %s is far too short to be a packfile\", p->pack_name)",
          "new_text": "read_in_full(p->pack_fd, &hdr, sizeof(hdr))",
          "old_line_content": "\t\treturn error(\"file %s is far too short to be a packfile\", p->pack_name);",
          "new_line_content": "\tif (read_in_full(p->pack_fd, &hdr, sizeof(hdr)) != sizeof(hdr))",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "htonl",
          "new_api": "error",
          "old_text": "htonl(PACK_SIGNATURE)",
          "new_text": "error(\"file %s is far too short to be a packfile\", p->pack_name)",
          "old_line_content": "\tif (hdr.hdr_signature != htonl(PACK_SIGNATURE))",
          "new_line_content": "\t\treturn error(\"file %s is far too short to be a packfile\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "error",
          "new_api": "htonl",
          "old_text": "error(\"file %s is not a GIT packfile\", p->pack_name)",
          "new_text": "htonl(PACK_SIGNATURE)",
          "old_line_content": "\t\treturn error(\"file %s is not a GIT packfile\", p->pack_name);",
          "new_line_content": "\tif (hdr.hdr_signature != htonl(PACK_SIGNATURE))",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "pack_version_ok",
          "new_api": "error",
          "old_text": "pack_version_ok(hdr.hdr_version)",
          "new_text": "error(\"file %s is not a GIT packfile\", p->pack_name)",
          "old_line_content": "\tif (!pack_version_ok(hdr.hdr_version))",
          "new_line_content": "\t\treturn error(\"file %s is not a GIT packfile\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "error",
          "new_api": "pack_version_ok",
          "old_text": "error(\"packfile %s is version %u and not supported\"\n\t\t\t\" (try upgrading GIT to a newer version)\",\n\t\t\tp->pack_name, ntohl(hdr.hdr_version))",
          "new_text": "pack_version_ok(hdr.hdr_version)",
          "old_line_content": "\t\treturn error(\"packfile %s is version %u and not supported\"",
          "new_line_content": "\tif (!pack_version_ok(hdr.hdr_version))",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "error",
          "new_api": "ntohl",
          "old_text": "error(\"packfile %s claims to have %u objects\"\n\t\t\t     \" while index indicates %u objects\",\n\t\t\t     p->pack_name, ntohl(hdr.hdr_entries),\n\t\t\t     p->num_objects)",
          "new_text": "ntohl(hdr.hdr_entries)",
          "old_line_content": "\t\treturn error(\"packfile %s claims to have %u objects\"",
          "new_line_content": "\tif (p->num_objects != ntohl(hdr.hdr_entries))",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "error",
          "new_api": "lseek",
          "old_text": "error(\"end of packfile %s is unavailable\", p->pack_name)",
          "new_text": "lseek(p->pack_fd, p->pack_size - sizeof(sha1), SEEK_SET)",
          "old_line_content": "\t\treturn error(\"end of packfile %s is unavailable\", p->pack_name);",
          "new_line_content": "\tif (lseek(p->pack_fd, p->pack_size - sizeof(sha1), SEEK_SET) == -1)",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "read_in_full",
          "new_api": "error",
          "old_text": "read_in_full(p->pack_fd, sha1, sizeof(sha1))",
          "new_text": "error(\"end of packfile %s is unavailable\", p->pack_name)",
          "old_line_content": "\tif (read_in_full(p->pack_fd, sha1, sizeof(sha1)) != sizeof(sha1))",
          "new_line_content": "\t\treturn error(\"end of packfile %s is unavailable\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "error",
          "new_api": "read_in_full",
          "old_text": "error(\"packfile %s signature is unavailable\", p->pack_name)",
          "new_text": "read_in_full(p->pack_fd, sha1, sizeof(sha1))",
          "old_line_content": "\t\treturn error(\"packfile %s signature is unavailable\", p->pack_name);",
          "new_line_content": "\tif (read_in_full(p->pack_fd, sha1, sizeof(sha1)) != sizeof(sha1))",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "error",
          "new_api": "hashcmp",
          "old_text": "error(\"packfile %s does not match index\", p->pack_name)",
          "new_text": "hashcmp(sha1, idx_sha1)",
          "old_line_content": "\t\treturn error(\"packfile %s does not match index\", p->pack_name);",
          "new_line_content": "\tif (hashcmp(sha1, idx_sha1))",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "die",
          "new_api": "open_packed_git",
          "old_text": "die(\"packfile %s cannot be accessed\", p->pack_name)",
          "new_text": "open_packed_git(p)",
          "old_line_content": "\t\tdie(\"packfile %s cannot be accessed\", p->pack_name);",
          "new_line_content": "\tif (p->pack_fd == -1 && open_packed_git(p))",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "strcpy",
          "new_api": "memcpy",
          "old_text": "strcpy(p->pack_name + path_len, \".pack\")",
          "new_text": "memcpy(p->pack_name, path, path_len)",
          "old_line_content": "\tstrcpy(p->pack_name + path_len, \".pack\");",
          "new_line_content": "\tmemcpy(p->pack_name, path, path_len);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "S_ISREG",
          "new_api": "strcpy",
          "old_text": "S_ISREG(st.st_mode)",
          "new_text": "strcpy(p->pack_name + path_len, \".pack\")",
          "old_line_content": "\tif (stat(p->pack_name, &st) || !S_ISREG(st.st_mode)) {",
          "new_line_content": "\tstrcpy(p->pack_name + path_len, \".pack\");",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "free",
          "new_api": "S_ISREG",
          "old_text": "free(p)",
          "new_text": "S_ISREG(st.st_mode)",
          "old_line_content": "\t\tfree(p);",
          "new_line_content": "\tif (stat(p->pack_name, &st) || !S_ISREG(st.st_mode)) {",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "hashclr",
          "new_api": "get_sha1_hex",
          "old_text": "hashclr(p->sha1)",
          "new_text": "get_sha1_hex(path + path_len - 40, p->sha1)",
          "old_line_content": "\t\thashclr(p->sha1);",
          "new_line_content": "\tif (path_len < 40 || get_sha1_hex(path + path_len - 40, p->sha1))",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "parse_pack_index_file",
          "new_api": "sha1_pack_index_name",
          "old_text": "parse_pack_index_file(sha1, path)",
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\treturn parse_pack_index_file(sha1, path);",
          "new_line_content": "\tchar *path = sha1_pack_index_name(sha1);",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "strlen",
          "new_api": "sha1_pack_name",
          "old_text": "strlen(path)",
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\tstruct packed_git *p = xmalloc(sizeof(*p) + strlen(path) + 2);",
          "new_line_content": "\tconst char *path = sha1_pack_name(sha1);",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "free",
          "new_api": "check_packed_git_idx",
          "old_text": "free(p)",
          "new_text": "check_packed_git_idx(idx_path, p)",
          "old_line_content": "\t\tfree(p);",
          "new_line_content": "\tif (check_packed_git_idx(idx_path, p)) {",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "strlen",
          "new_api": "sprintf",
          "old_text": "strlen(path)",
          "new_text": "sprintf(path, \"%s/pack\", objdir)",
          "old_line_content": "\tlen = strlen(path);",
          "new_line_content": "\tsprintf(path, \"%s/pack\", objdir);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "opendir",
          "new_api": "strlen",
          "old_text": "opendir(path)",
          "new_text": "strlen(path)",
          "old_line_content": "\tdir = opendir(path);",
          "new_line_content": "\tlen = strlen(path);",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "strerror",
          "new_api": "error",
          "old_text": "strerror(errno)",
          "new_text": "error(\"unable to open object pack directory: %s: %s\",\n\t\t\t      path, strerror(errno))",
          "old_line_content": "\t\t\t      path, strerror(errno));",
          "new_line_content": "\t\t\terror(\"unable to open object pack directory: %s: %s\",",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "strlen",
          "new_api": "readdir",
          "old_text": "strlen(de->d_name)",
          "new_text": "readdir(dir)",
          "old_line_content": "\t\tint namelen = strlen(de->d_name);",
          "new_line_content": "\twhile ((de = readdir(dir)) != NULL) {",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "prepare_alt_odb",
          "new_api": "get_object_directory",
          "old_text": "prepare_alt_odb()",
          "new_text": "get_object_directory()",
          "old_line_content": "\tprepare_alt_odb();",
          "new_line_content": "\tprepare_packed_git_one(get_object_directory(), 1);",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "hashcmp",
          "new_api": "hash_sha1_file",
          "old_text": "hashcmp(sha1, real_sha1)",
          "new_text": "hash_sha1_file(map, size, type, real_sha1)",
          "old_line_content": "\treturn hashcmp(sha1, real_sha1) ? -1 : 0;",
          "new_line_content": "\thash_sha1_file(map, size, type, real_sha1);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "xmmap",
          "new_api": "xsize_t",
          "old_text": "xmmap(NULL, *size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": "xsize_t(st.st_size)",
          "old_line_content": "\tmap = xmmap(NULL, *size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\t*size = xsize_t(st.st_size);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "close",
          "new_api": "xmmap",
          "old_text": "close(fd)",
          "new_text": "xmmap(NULL, *size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tmap = xmmap(NULL, *size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "inflateInit",
          "new_api": "legacy_loose_object",
          "old_text": "inflateInit(stream)",
          "new_text": "legacy_loose_object(map)",
          "old_line_content": "\t\tinflateInit(stream);",
          "new_line_content": "\tif (legacy_loose_object(map)) {",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "inflate",
          "new_api": "inflateInit",
          "old_text": "inflate(stream, 0)",
          "new_text": "inflateInit(stream)",
          "old_line_content": "\t\treturn inflate(stream, 0);",
          "new_line_content": "\t\tinflateInit(stream);",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "typename",
          "new_api": "snprintf",
          "old_text": "typename(type)",
          "new_text": "snprintf(buffer, bufsiz, \"%s %lu\",\n\t\t\t\t\t typename(type), size)",
          "old_line_content": "\t\t\t\t\t typename(type), size);",
          "new_line_content": "\tstream->total_out = 1 + snprintf(buffer, bufsiz, \"%s %lu\",",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "xmalloc",
          "new_api": "strlen",
          "old_text": "xmalloc(1+size)",
          "new_text": "strlen(buffer)",
          "old_line_content": "\tunsigned char *buf = xmalloc(1+size);",
          "new_line_content": "\tint bytes = strlen(buffer) + 1;",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "sha1_to_hex",
          "new_api": "error",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "error(\"garbage at end of loose object '%s'\",\n\t\t      sha1_to_hex(sha1))",
          "old_line_content": "\t\t      sha1_to_hex(sha1));",
          "new_line_content": "\t\terror(\"garbage at end of loose object '%s'\",",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "free",
          "new_api": "sha1_to_hex",
          "old_text": "free(buf)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t\t      sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "parse_sha1_header",
          "new_api": "unpack_sha1_header",
          "old_text": "parse_sha1_header(hdr, size)",
          "new_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "old_line_content": "\tif (ret < Z_OK || (*type = parse_sha1_header(hdr, size)) < 0)",
          "new_line_content": "\tret = unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr));",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "die",
          "new_api": "MSB",
          "old_text": "die(\"offset value overflow for delta base object\")",
          "new_text": "MSB(base_offset, 7)",
          "old_line_content": "\t\t\t\tdie(\"offset value overflow for delta base object\");",
          "new_line_content": "\t\t\tif (!base_offset || MSB(base_offset, 7))",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "sha1_to_hex",
          "new_api": "die",
          "old_text": "sha1_to_hex(base_info)",
          "new_text": "die(\"failed to find delta-pack base object %s\",\n\t\t\t\tsha1_to_hex(base_info))",
          "old_line_content": "\t\t\t\tsha1_to_hex(base_info));",
          "new_line_content": "\t\t\tdie(\"failed to find delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "packed_object_info",
          "new_api": "get_delta_base",
          "old_text": "packed_object_info(p, base_offset, NULL)",
          "new_text": "get_delta_base(p, w_curs, &curpos, type, obj_offset)",
          "old_line_content": "\ttype = packed_object_info(p, base_offset, NULL);",
          "new_line_content": "\tbase_offset = get_delta_base(p, w_curs, &curpos, type, obj_offset);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "unpack_object_header_gently",
          "new_api": "use_pack",
          "old_text": "unpack_object_header_gently(base, left, &type, sizep)",
          "new_text": "use_pack(p, w_curs, *curpos, &left)",
          "old_line_content": "\tused = unpack_object_header_gently(base, left, &type, sizep);",
          "new_line_content": "\tbase = use_pack(p, w_curs, *curpos, &left);",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "typename",
          "new_api": "unuse_pack",
          "old_text": "typename(type)",
          "new_text": "unuse_pack(&w_curs)",
          "old_line_content": "\t\t\treturn typename(type);",
          "new_line_content": "\t\t\tunuse_pack(&w_curs);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "find_pack_entry_one",
          "new_api": "hashcpy",
          "old_text": "find_pack_entry_one(next_sha1, p)",
          "new_text": "hashcpy(base_sha1, next_sha1)",
          "old_line_content": "\t\t\tobj_offset = find_pack_entry_one(next_sha1, p);",
          "new_line_content": "\t\t\t\thashcpy(base_sha1, next_sha1);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "memcpy",
          "new_api": "xmalloc",
          "old_text": "memcpy(ret, ent->data, ent->size)",
          "new_text": "xmalloc(ent->size + 1)",
          "old_line_content": "\t\tmemcpy(ret, ent->data, ent->size);",
          "new_line_content": "\t\tret = xmalloc(ent->size + 1);",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "cache_or_unpack_entry",
          "new_api": "get_delta_base",
          "old_text": "cache_or_unpack_entry(p, base_offset, &base_size, type, 0)",
          "new_text": "get_delta_base(p, w_curs, &curpos, *type, obj_offset)",
          "old_line_content": "\tbase = cache_or_unpack_entry(p, base_offset, &base_size, type, 0);",
          "new_line_content": "\tbase_offset = get_delta_base(p, w_curs, &curpos, *type, obj_offset);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "patch_delta",
          "new_api": "unpack_compressed_entry",
          "old_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     sizep)",
          "new_text": "unpack_compressed_entry(p, w_curs, curpos, delta_size)",
          "old_line_content": "\tresult = patch_delta(base, base_size,",
          "new_line_content": "\tdelta_data = unpack_compressed_entry(p, w_curs, curpos, delta_size);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "free",
          "new_api": "die",
          "old_text": "free(delta_data)",
          "new_text": "die(\"failed to apply delta\")",
          "old_line_content": "\tfree(delta_data);",
          "new_line_content": "\t\tdie(\"failed to apply delta\");",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "add_delta_base_cache",
          "new_api": "free",
          "old_text": "add_delta_base_cache(p, base_offset, base, base_size, *type)",
          "new_text": "free(delta_data)",
          "old_line_content": "\tadd_delta_base_cache(p, base_offset, base, base_size, *type);",
          "new_line_content": "\tfree(delta_data);",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "error",
          "new_api": "open_packed_git",
          "old_text": "error(\"packfile %s cannot be accessed\", p->pack_name)",
          "new_text": "open_packed_git(p)",
          "old_line_content": "\t\t\t\terror(\"packfile %s cannot be accessed\", p->pack_name);",
          "new_line_content": "\t\t\tif (p->pack_fd == -1 && open_packed_git(p)) {",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "unpack_sha1_header",
          "new_api": "sha1_to_hex",
          "old_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "new_line_content": "\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": "error",
          "new_api": "unpack_sha1_header",
          "old_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "new_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "old_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "new_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "sha1_to_hex",
          "new_api": "error",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "old_line_content": "\t\t\t       sha1_to_hex(sha1));",
          "new_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "parse_sha1_header",
          "new_api": "sha1_to_hex",
          "old_text": "parse_sha1_header(hdr, &size)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\telse if ((status = parse_sha1_header(hdr, &size)) < 0)",
          "new_line_content": "\t\t\t       sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "sha1_to_hex",
          "new_api": "parse_sha1_header",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "parse_sha1_header(hdr, &size)",
          "old_line_content": "\t\tstatus = error(\"unable to parse %s header\", sha1_to_hex(sha1));",
          "new_line_content": "\telse if ((status = parse_sha1_header(hdr, &size)) < 0)",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "munmap",
          "new_api": "inflateEnd",
          "old_text": "munmap(map, mapsize)",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\tmunmap(map, mapsize);",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "reprepare_packed_git",
          "new_api": "find_pack_entry",
          "old_text": "reprepare_packed_git()",
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\treprepare_packed_git();",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e, NULL)) {",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "find_pack_entry",
          "new_api": "reprepare_packed_git",
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": "reprepare_packed_git()",
          "old_line_content": "\t\tif (!find_pack_entry(sha1, &e, NULL))",
          "new_line_content": "\t\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "sha1_loose_object_info",
          "new_api": "find_pack_entry",
          "old_text": "sha1_loose_object_info(sha1, sizep)",
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\t\treturn sha1_loose_object_info(sha1, sizep);",
          "new_line_content": "\t\tif (!find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "find_cached_object",
          "new_api": "typename",
          "old_text": "find_cached_object(sha1)",
          "new_text": "typename(type)",
          "old_line_content": "\tif (has_sha1_file(sha1) || find_cached_object(sha1))",
          "new_line_content": "\thash_sha1_file(buf, len, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "xrealloc",
          "new_api": "alloc_nr",
          "old_text": "xrealloc(cached_objects,\n\t\t\t\t\t  sizeof(*cached_objects) *\n\t\t\t\t\t  cached_object_alloc)",
          "new_text": "alloc_nr(cached_object_alloc)",
          "old_line_content": "\t\tcached_objects = xrealloc(cached_objects,",
          "new_line_content": "\t\tcached_object_alloc = alloc_nr(cached_object_alloc);",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "memcpy",
          "new_api": "xmalloc",
          "old_text": "memcpy(co->buf, buf, len)",
          "new_text": "xmalloc(len)",
          "old_line_content": "\tmemcpy(co->buf, buf, len);",
          "new_line_content": "\tco->buf = xmalloc(len);",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "hashcpy",
          "new_api": "memcpy",
          "old_text": "hashcpy(co->sha1, sha1)",
          "new_text": "memcpy(co->buf, buf, len)",
          "old_line_content": "\thashcpy(co->sha1, sha1);",
          "new_line_content": "\tmemcpy(co->buf, buf, len);",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "memcpy",
          "new_api": "xmalloc",
          "old_text": "memcpy(buf, co->buf, co->size)",
          "new_text": "xmalloc(co->size + 1)",
          "old_line_content": "\t\tmemcpy(buf, co->buf, co->size);",
          "new_line_content": "\t\tbuf = xmalloc(co->size + 1);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "munmap",
          "new_api": "unpack_sha1_file",
          "old_text": "munmap(map, mapsize)",
          "new_text": "unpack_sha1_file(map, mapsize, type, size, sha1)",
          "old_line_content": "\t\tmunmap(map, mapsize);",
          "new_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size, sha1);",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "read_packed_sha1",
          "new_api": "reprepare_packed_git",
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": "reprepare_packed_git()",
          "old_line_content": "\treturn read_packed_sha1(sha1, type, size);",
          "new_line_content": "\treprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "hashcpy",
          "new_api": "type_from_string",
          "old_text": "hashcpy(actual_sha1, sha1)",
          "new_text": "type_from_string(required_type_name)",
          "old_line_content": "\thashcpy(actual_sha1, sha1);",
          "new_line_content": "\trequired_type = type_from_string(required_type_name);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "get_sha1_hex",
          "new_api": "memcmp",
          "old_text": "get_sha1_hex((char *) buffer + ref_length, actual_sha1)",
          "new_text": "memcmp(buffer, ref_type, ref_length)",
          "old_line_content": "\t\t    get_sha1_hex((char *) buffer + ref_length, actual_sha1)) {",
          "new_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "free",
          "new_api": "get_sha1_hex",
          "old_text": "free(buffer)",
          "new_text": "get_sha1_hex((char *) buffer + ref_length, actual_sha1)",
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\t    get_sha1_hex((char *) buffer + ref_length, actual_sha1)) {",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "SHA1_Update",
          "new_api": "SHA1_Init",
          "old_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": "SHA1_Final",
          "new_api": "SHA1_Update",
          "old_text": "SHA1_Final(sha1, &c)",
          "new_text": "SHA1_Update(&c, buf, len)",
          "old_line_content": "\tSHA1_Final(sha1, &c);",
          "new_line_content": "\tSHA1_Update(&c, buf, len);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": "strerror",
          "new_api": "write_in_full",
          "old_text": "strerror(errno)",
          "new_text": "write_in_full(fd, buf, len)",
          "old_line_content": "\t\treturn error(\"file write error (%s)\", strerror(errno));",
          "new_line_content": "\tif (write_in_full(fd, buf, len) < 0)",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "sha1_file_name",
          "new_api": "write_sha1_file_prepare",
          "old_text": "sha1_file_name(sha1)",
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\tfilename = sha1_file_name(sha1);",
          "new_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "has_sha1_file",
          "new_api": "hashcpy",
          "old_text": "has_sha1_file(sha1)",
          "new_text": "hashcpy(returnsha1, sha1)",
          "old_line_content": "\tif (has_sha1_file(sha1))",
          "new_line_content": "\t\thashcpy(returnsha1, sha1);",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": "deflateInit",
          "new_api": "memset",
          "old_text": "deflateInit(&stream, zlib_compression_level)",
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": "deflateBound",
          "new_api": "deflateInit",
          "old_text": "deflateBound(&stream, len+hdrlen)",
          "new_text": "deflateInit(&stream, zlib_compression_level)",
          "old_line_content": "\tsize = 8 + deflateBound(&stream, len+hdrlen);",
          "new_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": "xmalloc",
          "new_api": "deflateBound",
          "old_text": "xmalloc(size)",
          "new_text": "deflateBound(&stream, len+hdrlen)",
          "old_line_content": "\tcompressed = xmalloc(size);",
          "new_line_content": "\tsize = 8 + deflateBound(&stream, len+hdrlen);",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "die",
          "new_api": "write_buffer",
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": "write_buffer(fd, compressed, size)",
          "old_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "\tif (write_buffer(fd, compressed, size) < 0)",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "fchmod",
          "new_api": "die",
          "old_text": "fchmod(fd, 0444)",
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\tfchmod(fd, 0444);",
          "new_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "close",
          "new_api": "fchmod",
          "old_text": "close(fd)",
          "new_text": "fchmod(fd, 0444)",
          "old_line_content": "\tif (close(fd))",
          "new_line_content": "\tfchmod(fd, 0444);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "die",
          "new_api": "close",
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": "close(fd)",
          "old_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "\tif (close(fd))",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "free",
          "new_api": "die",
          "old_text": "free(compressed)",
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\tfree(compressed);",
          "new_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": "deflateInit",
          "new_api": "memset",
          "old_text": "deflateInit(&stream, zlib_compression_level)",
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "deflateBound",
          "new_api": "deflateInit",
          "old_text": "deflateBound(&stream, len + hdrlen)",
          "new_text": "deflateInit(&stream, zlib_compression_level)",
          "old_line_content": "\tsize = deflateBound(&stream, len + hdrlen);",
          "new_line_content": "\tdeflateInit(&stream, zlib_compression_level);",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "xmalloc",
          "new_api": "deflateBound",
          "old_text": "xmalloc(size)",
          "new_text": "deflateBound(&stream, len + hdrlen)",
          "old_line_content": "\tbuf = xmalloc(size);",
          "new_line_content": "\tsize = deflateBound(&stream, len + hdrlen);",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": "free",
          "new_api": "deflateEnd",
          "old_text": "free(unpacked)",
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\tfree(unpacked);",
          "new_line_content": "\tdeflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "munmap",
          "new_api": "write_buffer",
          "old_text": "munmap(buf, objsize)",
          "new_text": "write_buffer(fd, buf, objsize)",
          "old_line_content": "\t\tmunmap(buf, objsize);",
          "new_line_content": "\t\tretval = write_buffer(fd, buf, objsize);",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "write_buffer",
          "new_api": "repack_object",
          "old_text": "write_buffer(fd, buf, objsize)",
          "new_text": "repack_object(sha1, &objsize)",
          "old_line_content": "\tretval = write_buffer(fd, buf, objsize);",
          "new_line_content": "\tbuf = repack_object(sha1, &objsize);",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "free",
          "new_api": "write_buffer",
          "old_text": "free(buf)",
          "new_text": "write_buffer(fd, buf, objsize)",
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\tretval = write_buffer(fd, buf, objsize);",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "SHA1_Update",
          "new_api": "inflate",
          "old_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "new_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "old_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "new_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": "die",
          "new_api": "write_buffer",
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": "write_buffer(local, buffer, *bufposn - stream.avail_in)",
          "old_line_content": "\t\t\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "\t\t\tif (write_buffer(local, buffer, *bufposn - stream.avail_in) < 0)",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": "memmove",
          "new_api": "die",
          "old_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "new_line_content": "\t\t\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "unlink",
          "new_api": "close",
          "old_text": "unlink(tmpfile)",
          "new_text": "close(local)",
          "old_line_content": "\t\t\tunlink(tmpfile);",
          "new_line_content": "\t\t\tclose(local);",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "perror",
          "new_api": "error",
          "old_text": "perror(\"Reading from connection\")",
          "new_text": "error(\"Connection closed?\")",
          "old_line_content": "\t\t\tperror(\"Reading from connection\");",
          "new_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": "close",
          "new_api": "fchmod",
          "old_text": "close(local)",
          "new_text": "fchmod(local, 0444)",
          "old_line_content": "\tif (close(local) != 0)",
          "new_line_content": "\tfchmod(local, 0444);",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": "die",
          "new_api": "close",
          "old_text": "die(\"unable to write sha1 file\")",
          "new_text": "close(local)",
          "old_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "new_line_content": "\tif (close(local) != 0)",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": "SHA1_Final",
          "new_api": "die",
          "old_text": "SHA1_Final(real_sha1, &c)",
          "new_text": "die(\"unable to write sha1 file\")",
          "old_line_content": "\tSHA1_Final(real_sha1, &c);",
          "new_line_content": "\t\tdie(\"unable to write sha1 file\");",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": "sha1_to_hex",
          "new_api": "unlink",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": "unlink",
          "new_api": "hashcmp",
          "old_text": "unlink(tmpfile)",
          "new_text": "hashcmp(sha1, real_sha1)",
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "\tif (hashcmp(sha1, real_sha1)) {",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": "sha1_to_hex",
          "new_api": "unlink",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\treturn error(\"File %s has bad hash\", sha1_to_hex(sha1));",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": "free",
          "new_api": "read_pipe",
          "old_text": "free(buf)",
          "new_text": "read_pipe(fd, &buf, &size)",
          "old_line_content": "\t\tfree(buf);",
          "new_line_content": "\tif (read_pipe(fd, &buf, &size)) {",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "free",
          "new_api": "hash_sha1_file",
          "old_text": "free(buf)",
          "new_text": "hash_sha1_file(buf, size, type, sha1)",
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t\tret = hash_sha1_file(buf, size, type, sha1);",
          "content_same": false
        },
        {
          "line": 2338,
          "old_api": "close",
          "new_api": "xmmap",
          "old_text": "close(fd)",
          "new_text": "xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\t\tbuf = xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "strerror",
          "new_api": "error",
          "old_text": "strerror(errno)",
          "new_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "old_line_content": "\t\t\t\t     strerror(errno));",
          "new_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "index_fd",
          "new_api": "strerror",
          "old_text": "index_fd(sha1, fd, st, write_object, OBJ_BLOB, path)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, OBJ_BLOB, path) < 0)",
          "new_line_content": "\t\t\t\t     strerror(errno));",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "error",
          "new_api": "index_fd",
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": "index_fd(sha1, fd, st, write_object, OBJ_BLOB, path)",
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, OBJ_BLOB, path) < 0)",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "xmalloc",
          "new_api": "xsize_t",
          "old_text": "xmalloc(len + 1)",
          "new_text": "xsize_t(st->st_size)",
          "old_line_content": "\t\ttarget = xmalloc(len + 1);",
          "new_line_content": "\t\tlen = xsize_t(st->st_size);",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": "readlink",
          "new_api": "xmalloc",
          "old_text": "readlink(path, target, len + 1)",
          "new_text": "xmalloc(len + 1)",
          "old_line_content": "\t\tif (readlink(path, target, len + 1) != st->st_size) {",
          "new_line_content": "\t\ttarget = xmalloc(len + 1);",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "strerror",
          "new_api": "readlink",
          "old_text": "strerror(errno)",
          "new_text": "readlink(path, target, len + 1)",
          "old_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "new_line_content": "\t\tif (readlink(path, target, len + 1) != st->st_size) {",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": "free",
          "new_api": "strerror",
          "old_text": "free(target)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\tfree(target);",
          "new_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "error",
          "new_api": "free",
          "old_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "new_text": "free(target)",
          "old_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": "write_sha1_file",
          "new_api": "hash_sha1_file",
          "old_text": "write_sha1_file(target, len, blob_type, sha1)",
          "new_text": "hash_sha1_file(target, len, blob_type, sha1)",
          "old_line_content": "\t\telse if (write_sha1_file(target, len, blob_type, sha1))",
          "new_line_content": "\t\t\thash_sha1_file(target, len, blob_type, sha1);",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": "error",
          "new_api": "write_sha1_file",
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": "write_sha1_file(target, len, blob_type, sha1)",
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\telse if (write_sha1_file(target, len, blob_type, sha1))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2049,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/tmp_obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 2051,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "\tif (fd < 0) {",
          "new_line_content": "\tfd = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"wrong index file size in %s\", path)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn error(\"wrong index file size in %s\", path);",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"pack too large for current definition of off_t in %s\", path)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\treturn error(\"pack too large for current definition of off_t in %s\", path);",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "",
          "new_line_content": "\tcompressed = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "cache_or_unpack_entry",
          "old_text": null,
          "new_text": "cache_or_unpack_entry(p, base_offset, &base_size, type, 0)",
          "old_line_content": "\tif (!base)",
          "new_line_content": "\tbase = cache_or_unpack_entry(p, base_offset, &base_size, type, 0);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to read delta base object\"\n\t\t    \" at %\"PRIuMAX\" from %s\",\n\t\t    (uintmax_t)base_offset, p->pack_name)",
          "old_line_content": "\t\t    \" at %\"PRIuMAX\" from %s\",",
          "new_line_content": "\t\tdie(\"failed to read delta base object\"",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "\t\t/* nothing */;",
          "new_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(stream, 0, sizeof(*stream))",
          "old_line_content": "\tstream->next_in = map;",
          "new_line_content": "\tmemset(stream, 0, sizeof(*stream));",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "patch_delta",
          "old_text": null,
          "new_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     sizep)",
          "old_line_content": "\t\t\t     delta_data, delta_size,",
          "new_line_content": "\tresult = patch_delta(base, base_size,",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "\tif (ret != Z_STREAM_END)",
          "new_line_content": "\tret = deflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "add_delta_base_cache",
          "old_text": null,
          "new_text": "add_delta_base_cache(p, base_offset, base, base_size, *type)",
          "old_line_content": "\treturn result;",
          "new_line_content": "\tadd_delta_base_cache(p, base_offset, base, base_size, *type);",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"unable to deflate new object %s (%d)\", sha1_to_hex(sha1), ret);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(idx_name)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tfree(idx_name);",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\tif (ret != Z_OK)",
          "new_line_content": "\tret = deflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(stream, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn inflate(stream, 0);",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"deflateEnd on object %s failed (%d)\", sha1_to_hex(sha1), ret);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, &w_curs, &curpos, sizep)",
          "old_line_content": "\tswitch (*type) {",
          "new_line_content": "\t*type = unpack_object_header(p, &w_curs, &curpos, sizep);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "unpack_object_header_gently",
          "old_text": null,
          "new_text": "unpack_object_header_gently(map, mapsize, &type, &size)",
          "old_line_content": "\tif (!used || !valid_loose_object_type[type])",
          "new_line_content": "\tused = unpack_object_header_gently(map, mapsize, &type, &size);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(compressed)",
          "old_line_content": "",
          "new_line_content": "\tfree(compressed);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "unpack_delta_entry",
          "old_text": null,
          "new_text": "unpack_delta_entry(p, &w_curs, curpos, *sizep,\n\t\t\t\t\t  obj_offset, type, sizep)",
          "old_line_content": "\t\t\t\t\t  obj_offset, type, sizep);",
          "new_line_content": "\t\tdata = unpack_delta_entry(p, &w_curs, curpos, *sizep,",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": null,
          "new_api": "move_temp_to_file",
          "old_text": null,
          "new_text": "move_temp_to_file(tmpfile, filename)",
          "old_line_content": "}",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(stream)",
          "old_line_content": "",
          "new_line_content": "\tinflateInit(stream);",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "unpack_compressed_entry",
          "old_text": null,
          "new_text": "unpack_compressed_entry(p, &w_curs, curpos, *sizep)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tdata = unpack_compressed_entry(p, &w_curs, curpos, *sizep);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"unknown object type %i in %s\", *type, p->pack_name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdie(\"unknown object type %i in %s\", *type, p->pack_name);",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\t\t\t\t typename(type), size);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "unuse_pack",
          "old_text": null,
          "new_text": "unuse_pack(&w_curs)",
          "old_line_content": "\treturn data;",
          "new_line_content": "\tunuse_pack(&w_curs);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "scan_windows",
          "old_text": null,
          "new_text": "scan_windows(current, &lru_p, &lru_w, &lru_l)",
          "old_line_content": "\tfor (p = packed_git; p; p = p->next)",
          "new_line_content": "\t\tscan_windows(current, &lru_p, &lru_w, &lru_l);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(1+size)",
          "old_line_content": "\tunsigned long n;",
          "new_line_content": "\tunsigned char *buf = xmalloc(1+size);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "scan_windows",
          "old_text": null,
          "new_text": "scan_windows(p, &lru_p, &lru_w, &lru_l)",
          "old_line_content": "\tif (lru_p) {",
          "new_line_content": "\t\tscan_windows(p, &lru_p, &lru_w, &lru_l);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, &type, &len)",
          "old_line_content": "\tif (!unpacked)",
          "new_line_content": "\tunpacked = read_packed_sha1(sha1, &type, &len);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(lru_w->base, lru_w->len)",
          "old_line_content": "\t\tpack_mapped -= lru_w->len;",
          "new_line_content": "\t\tmunmap(lru_w->base, lru_w->len);",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "open_pack_index",
          "old_text": null,
          "new_text": "open_pack_index(p)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\tif (open_pack_index(p))",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "",
          "new_line_content": "\thdrlen = sprintf(hdr, \"%s %lu\", typename(type), len) + 1;",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, (char *) buffer + bytes, n)",
          "old_line_content": "\tbytes = n;",
          "new_line_content": "\tmemcpy(buf, (char *) buffer + bytes, n);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(lru_p->pack_fd)",
          "old_line_content": "\t\t\t\tlru_p->pack_fd = -1;",
          "new_line_content": "\t\t\t\tclose(lru_p->pack_fd);",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "",
          "new_line_content": "\tbuf = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(lru_w)",
          "old_line_content": "\t\tpack_open_windows--;",
          "new_line_content": "\t\tfree(lru_w);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "\t\t/* nothing */;",
          "new_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(*((uint32_t *)(index + 24 * n)))",
          "old_line_content": "\t} else {",
          "new_line_content": "\t\treturn ntohl(*((uint32_t *)(index + 24 * n)));",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "unuse_one_window",
          "old_text": null,
          "new_text": "unuse_one_window(NULL, fd)",
          "old_line_content": "\t\t; /* nothing */",
          "new_line_content": "\twhile (need >= (cur - pack_mapped) && unuse_one_window(NULL, fd))",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(stream, Z_FINISH)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tstatus = inflate(stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(*((uint32_t *)(index + 4 * n)))",
          "old_line_content": "\t\tif (!(off & 0x80000000))",
          "new_line_content": "\t\toff = ntohl(*((uint32_t *)(index + 4 * n)));",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "\t\t/* nothing */;",
          "new_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(stream)",
          "old_line_content": "\t\treturn buf;",
          "new_line_content": "\t\tinflateEnd(stream);",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(unpacked)",
          "old_line_content": "",
          "new_line_content": "\tfree(unpacked);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(*((uint32_t *)(index + 4)))",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t   ntohl(*((uint32_t *)(index + 4)));",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\telse if (stream->avail_in)",
          "new_line_content": "\t\terror(\"corrupt loose object '%s'\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\treturn NULL;",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": null,
          "new_api": "map_sha1_file",
          "old_text": null,
          "new_text": "map_sha1_file(sha1, &objsize)",
          "old_line_content": "",
          "new_line_content": "\tvoid *buf = map_sha1_file(sha1, &objsize);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "open_pack_index",
          "old_text": null,
          "new_text": "open_pack_index(p)",
          "old_line_content": "\t\t\treturn 0;",
          "new_line_content": "\t\tif (open_pack_index(p))",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(buf, objsize)",
          "old_line_content": "\t\treturn retval;",
          "new_line_content": "\t\tmunmap(buf, objsize);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s index unavailable\", p->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"packfile %s index unavailable\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\treturn retval;",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "fstat",
          "old_text": null,
          "new_text": "fstat(p->pack_fd, &st)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tif (p->pack_fd < 0 || fstat(p->pack_fd, &st))",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(level1_ofs[*sha1 - 1])",
          "old_line_content": "",
          "new_line_content": "\tlo = ((*sha1 == 0x0) ? 0 : ntohl(level1_ofs[*sha1 - 1]));",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s not a regular file\", p->pack_name)",
          "old_line_content": "\t\tp->pack_size = st.st_size;",
          "new_line_content": "\t\t\treturn error(\"packfile %s not a regular file\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(index + x, sha1)",
          "old_line_content": "\t\tif (!cmp)",
          "new_line_content": "\t\tint cmp = hashcmp(index + x, sha1);",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s size changed\", p->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"packfile %s size changed\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "nth_packed_object_offset",
          "old_text": null,
          "new_text": "nth_packed_object_offset(p, mi)",
          "old_line_content": "\t\tif (cmp > 0)",
          "new_line_content": "\t\t\treturn nth_packed_object_offset(p, mi);",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/tmp_obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "fcntl",
          "old_text": null,
          "new_text": "fcntl(p->pack_fd, F_GETFD, 0)",
          "old_line_content": "\tif (fd_flag < 0)",
          "new_line_content": "\tfd_flag = fcntl(p->pack_fd, F_GETFD, 0);",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": null,
          "new_api": "mkstemp",
          "old_text": null,
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "\tif (local < 0) {",
          "new_line_content": "\tlocal = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"cannot determine file descriptor flags\")",
          "old_line_content": "\tfd_flag |= FD_CLOEXEC;",
          "new_line_content": "\t\treturn error(\"cannot determine file descriptor flags\");",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"cannot set FD_CLOEXEC\")",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"cannot set FD_CLOEXEC\");",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(p->pack_name, ig)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(p->pack_name, ig))",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s is version %u and not supported\"\n\t\t\t\" (try upgrading GIT to a newer version)\",\n\t\t\tp->pack_name, ntohl(hdr.hdr_version))",
          "old_line_content": "\t\t\t\" (try upgrading GIT to a newer version)\",",
          "new_line_content": "\t\treturn error(\"packfile %s is version %u and not supported\"",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(hdr.hdr_version)",
          "old_line_content": "",
          "new_line_content": "\t\t\tp->pack_name, ntohl(hdr.hdr_version));",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(last_c, ig)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!strcmp(last_c, ig))",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s claims to have %u objects\"\n\t\t\t     \" while index indicates %u objects\",\n\t\t\t     p->pack_name, ntohl(hdr.hdr_entries),\n\t\t\t     p->num_objects)",
          "old_line_content": "\t\t\t     \" while index indicates %u objects\",",
          "new_line_content": "\t\treturn error(\"packfile %s claims to have %u objects\"",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(hdr.hdr_entries)",
          "old_line_content": "\t\t\t     p->num_objects);",
          "new_line_content": "\t\t\t     p->pack_name, ntohl(hdr.hdr_entries),",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "old_line_content": "\t\t\t\t\t    stream.avail_out);",
          "new_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "type_from_string",
          "old_text": null,
          "new_text": "type_from_string(type)",
          "old_line_content": "}",
          "new_line_content": "\treturn *hdr ? -1 : type_from_string(type);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s signature is unavailable\", p->pack_name)",
          "old_line_content": "\tidx_sha1 = ((unsigned char *)p->index_data) + p->index_size - 40;",
          "new_line_content": "\t\treturn error(\"packfile %s signature is unavailable\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "prepare_packed_git",
          "old_text": null,
          "new_text": "prepare_packed_git()",
          "old_line_content": "",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 2207,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "old_line_content": "\t\t\t\tstream.avail_in);",
          "new_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s does not match index\", p->pack_name)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\treturn error(\"packfile %s does not match index\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "matches_pack_name",
          "old_text": null,
          "new_text": "matches_pack_name(p, *ig)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tif (!matches_pack_name(p, *ig))",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "parse_sha1_header",
          "old_text": null,
          "new_text": "parse_sha1_header(hdr, size)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (ret < Z_OK || (*type = parse_sha1_header(hdr, size)) < 0)",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "xread",
          "old_text": null,
          "new_text": "xread(fd, buffer + *bufposn, bufsize - *bufposn)",
          "old_line_content": "\t\tif (size <= 0) {",
          "new_line_content": "\t\tsize = xread(fd, buffer + *bufposn, bufsize - *bufposn);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "open_packed_git_1",
          "old_text": null,
          "new_text": "open_packed_git_1(p)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!open_packed_git_1(p))",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "unpack_sha1_rest",
          "old_text": null,
          "new_text": "unpack_sha1_rest(&stream, hdr, *size, sha1)",
          "old_line_content": "}",
          "new_line_content": "\treturn unpack_sha1_rest(&stream, hdr, *size, sha1);",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\t\tif (!size)",
          "new_line_content": "\t\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(p->pack_fd)",
          "old_line_content": "\t\tp->pack_fd = -1;",
          "new_line_content": "\t\tclose(p->pack_fd);",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, p)",
          "old_line_content": "\t\tif (offset) {",
          "new_line_content": "\t\toffset = find_pack_entry_one(sha1, p);",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(\"Reading from connection\")",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\t\tperror(\"Reading from connection\");",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tstream.next_out = delta_head;",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"packfile %s cannot be accessed\", p->pack_name)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\terror(\"packfile %s cannot be accessed\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(real_sha1, &c)",
          "old_line_content": "\tif (ret != Z_STREAM_END) {",
          "new_line_content": "\tSHA1_Final(real_sha1, &c);",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tdo {",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 2232,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "use_pack",
          "old_text": null,
          "new_text": "use_pack(p, w_curs, curpos, &stream.avail_in)",
          "old_line_content": "\t\tstream.next_in = in;",
          "new_line_content": "\t\tin = use_pack(p, w_curs, curpos, &stream.avail_in);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(e->sha1, sha1)",
          "old_line_content": "\t\t\treturn 1;",
          "new_line_content": "\t\t\thashcpy(e->sha1, sha1);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\t\tcurpos += stream.next_in - in;",
          "new_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn error(\"File %s has bad hash\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "}",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\tif ((st != Z_STREAM_END) && stream.total_out != sizeof(delta_head))",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"delta data unpack-initial failed\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"delta data unpack-initial failed\");",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s cannot be accessed\", p->pack_name)",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"packfile %s cannot be accessed\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": null,
          "new_api": "sha1_pack_index_name",
          "old_text": null,
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, p)",
          "old_line_content": "\t\t\treturn p;",
          "new_line_content": "\t\tif (find_pack_entry_one(sha1, p))",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "get_delta_hdr_size",
          "old_text": null,
          "new_text": "get_delta_hdr_size(&data, delta_head+sizeof(delta_head))",
          "old_line_content": "",
          "new_line_content": "\tget_delta_hdr_size(&data, delta_head+sizeof(delta_head));",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"offset beyond end of packfile (truncated pack?)\")",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"offset beyond end of packfile (truncated pack?)\");",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "get_delta_hdr_size",
          "old_text": null,
          "new_text": "get_delta_hdr_size(&data, delta_head+sizeof(delta_head))",
          "old_line_content": "}",
          "new_line_content": "\treturn get_delta_hdr_size(&data, delta_head+sizeof(delta_head));",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "sha1_pack_name",
          "old_text": null,
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "in_window",
          "old_text": null,
          "new_text": "in_window(win, offset)",
          "old_line_content": "\t\tif (win)",
          "new_line_content": "\tif (!win || !in_window(win, offset)) {",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "in_window",
          "old_text": null,
          "new_text": "in_window(win, offset)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\tif (in_window(win, offset))",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": null,
          "new_api": "map_sha1_file",
          "old_text": null,
          "new_text": "map_sha1_file(sha1, &mapsize)",
          "old_line_content": "\tif (!map)",
          "new_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, ignore_packed)",
          "old_line_content": "}",
          "new_line_content": "\treturn find_pack_entry(sha1, &e, ignore_packed);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "use_pack",
          "old_text": null,
          "new_text": "use_pack(p, w_curs, *curpos, NULL)",
          "old_line_content": "\toff_t base_offset;",
          "new_line_content": "\tunsigned char *base_info = use_pack(p, w_curs, *curpos, NULL);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*win))",
          "old_line_content": "\t\t\twin->offset = (offset / window_align) * window_align;",
          "new_line_content": "\t\t\twin = xcalloc(1, sizeof(*win));",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\telse if (sizep)",
          "new_line_content": "\t\tstatus = error(\"unable to parse %s header\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\treturn 1;",
          "new_line_content": "\tif (find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "find_sha1_file",
          "old_text": null,
          "new_text": "find_sha1_file(sha1, &st)",
          "old_line_content": "}",
          "new_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "unuse_one_window",
          "old_text": null,
          "new_text": "unuse_one_window(p, p->pack_fd)",
          "old_line_content": "\t\t\t\t; /* nothing */",
          "new_line_content": "\t\t\t\t&& unuse_one_window(p, p->pack_fd))",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "xmmap",
          "old_text": null,
          "new_text": "xmmap(NULL, win->len,\n\t\t\t\tPROT_READ, MAP_PRIVATE,\n\t\t\t\tp->pack_fd, win->offset)",
          "old_line_content": "\t\t\t\tPROT_READ, MAP_PRIVATE,",
          "new_line_content": "\t\t\twin->base = xmmap(NULL, win->len,",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "\treturn status;",
          "new_line_content": "\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"packfile %s cannot be mapped: %s\",\n\t\t\t\t\tp->pack_name,\n\t\t\t\t\tstrerror(errno))",
          "old_line_content": "\t\t\t\t\tp->pack_name,",
          "new_line_content": "\t\t\t\tdie(\"packfile %s cannot be mapped: %s\",",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"offset value overflow for delta base object\")",
          "old_line_content": "\t\t\tc = base_info[used++];",
          "new_line_content": "\t\t\t\tdie(\"offset value overflow for delta base object\");",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\tpack_mmap_calls++;",
          "new_line_content": "\t\t\t\t\tstrerror(errno));",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "sha1_loose_object_info",
          "old_text": null,
          "new_text": "sha1_loose_object_info(sha1, sizep)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\treturn sha1_loose_object_info(sha1, sizep);",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"delta base offset out of bound\")",
          "old_line_content": "\t\t*curpos += used;",
          "new_line_content": "\t\t\tdie(\"delta base offset out of bound\");",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "packed_object_info",
          "old_text": null,
          "new_text": "packed_object_info(e.p, e.offset, sizep)",
          "old_line_content": "}",
          "new_line_content": "\treturn packed_object_info(e.p, e.offset, sizep);",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(base_info, p)",
          "old_line_content": "\t\tif (!base_offset)",
          "new_line_content": "\t\tbase_offset = find_pack_entry_one(base_info, p);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(base_info)",
          "old_line_content": "\t\t*curpos += 20;",
          "new_line_content": "\t\t\t\tsha1_to_hex(base_info));",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "xread",
          "old_text": null,
          "new_text": "xread(fd, buf + off, size - off)",
          "old_line_content": "\t\tif (iret > 0) {",
          "new_line_content": "\t\tiret = xread(fd, buf + off, size - off);",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e, NULL)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e, NULL))",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"I am totally screwed\")",
          "old_line_content": "\treturn base_offset;",
          "new_line_content": "\t\tdie(\"I am totally screwed\");",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "cache_or_unpack_entry",
          "old_text": null,
          "new_text": "cache_or_unpack_entry(e.p, e.offset, size, type, 1)",
          "old_line_content": "}",
          "new_line_content": "\t\treturn cache_or_unpack_entry(e.p, e.offset, size, type, 1);",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": null,
          "new_api": "xrealloc",
          "old_text": null,
          "new_text": "xrealloc(buf, size)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tbuf = xrealloc(buf, size);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "xsize_t",
          "old_text": null,
          "new_text": "xsize_t(offset)",
          "old_line_content": "\treturn win->base + offset;",
          "new_line_content": "\t\t*left = win->len - xsize_t(offset);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*p) + path_len + 2)",
          "old_line_content": "",
          "new_line_content": "\tstruct packed_git *p = xmalloc(sizeof(*p) + path_len + 2);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\".idx\")",
          "old_line_content": "\tif (path_len < 1)",
          "new_line_content": "\tpath_len -= strlen(\".idx\");",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "packed_object_info",
          "old_text": null,
          "new_text": "packed_object_info(p, base_offset, NULL)",
          "old_line_content": "",
          "new_line_content": "\ttype = packed_object_info(p, base_offset, NULL);",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\tint ret;",
          "new_line_content": "\tchar *buf = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(p)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\t\tfree(p);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(co->sha1, sha1)",
          "old_line_content": "\t\t\treturn co;",
          "new_line_content": "\t\tif (!hashcmp(co->sha1, sha1))",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "get_size_from_delta",
          "old_text": null,
          "new_text": "get_size_from_delta(p, w_curs, curpos)",
          "old_line_content": "",
          "new_line_content": "\t\t*sizep = get_size_from_delta(p, w_curs, curpos);",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(buf, size, type, sha1)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": null,
          "new_api": "find_cached_object",
          "old_text": null,
          "new_text": "find_cached_object(sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (has_sha1_file(sha1) || find_cached_object(sha1))",
          "content_same": false
        },
        {
          "line": 2333,
          "old_api": null,
          "new_api": "xsize_t",
          "old_text": null,
          "new_text": "xsize_t(st->st_size)",
          "old_line_content": "\tvoid *buf = NULL;",
          "new_line_content": "\tsize_t size = xsize_t(st->st_size);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "hashclr",
          "old_text": null,
          "new_text": "hashclr(p->sha1)",
          "old_line_content": "\treturn p;",
          "new_line_content": "\t\thashclr(p->sha1);",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "xrealloc",
          "old_text": null,
          "new_text": "xrealloc(cached_objects,\n\t\t\t\t\t  sizeof(*cached_objects) *\n\t\t\t\t\t  cached_object_alloc)",
          "old_line_content": "\t\t\t\t\t  sizeof(*cached_objects) *",
          "new_line_content": "\t\tcached_objects = xrealloc(cached_objects,",
          "content_same": false
        },
        {
          "line": 2339,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "parse_pack_index_file",
          "old_text": null,
          "new_text": "parse_pack_index_file(sha1, path)",
          "old_line_content": "}",
          "new_line_content": "\treturn parse_pack_index_file(sha1, path);",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "unpack_object_header_gently",
          "old_text": null,
          "new_text": "unpack_object_header_gently(base, left, &type, sizep)",
          "old_line_content": "\tif (!used)",
          "new_line_content": "\tused = unpack_object_header_gently(base, left, &type, sizep);",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"object offset outside of pack file\")",
          "old_line_content": "\t*curpos += used;",
          "new_line_content": "\t\tdie(\"object offset outside of pack file\");",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(co->sha1, sha1)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\thashcpy(co->sha1, sha1);",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(st->st_mode)",
          "old_line_content": "\t\tunsigned long nsize = size;",
          "new_line_content": "\tif ((type == OBJ_BLOB) && S_ISREG(st->st_mode)) {",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(path)",
          "old_line_content": "",
          "new_line_content": "\tstruct packed_git *p = xmalloc(sizeof(*p) + strlen(path) + 2);",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": null,
          "new_api": "convert_to_git",
          "old_text": null,
          "new_text": "convert_to_git(path, buf, &nsize)",
          "old_line_content": "\t\tif (nbuf) {",
          "new_line_content": "\t\tchar *nbuf = convert_to_git(path, buf, &nsize);",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(buf, size)",
          "old_line_content": "\t\t\tsize = nsize;",
          "new_line_content": "\t\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(p)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\t\tfree(p);",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": null,
          "new_api": "find_cached_object",
          "old_text": null,
          "new_text": "find_cached_object(sha1)",
          "old_line_content": "\tif (co) {",
          "new_line_content": "\tco = find_cached_object(sha1);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(p->pack_name, path)",
          "old_line_content": "\tp->pack_size = 0;",
          "new_line_content": "\tstrcpy(p->pack_name, path);",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf, co->buf, co->size)",
          "old_line_content": "\t\t((char*)buf)[co->size] = 0;",
          "new_line_content": "\t\tmemcpy(buf, co->buf, co->size);",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tret = write_sha1_file(buf, size, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(p->sha1, sha1)",
          "old_line_content": "\treturn p;",
          "new_line_content": "\thashcpy(p->sha1, sha1);",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\tif (re_allocated) {",
          "new_line_content": "\t\tret = hash_sha1_file(buf, size, typename(type), sha1);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\t\treturn ret;",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, &w_curs, &curpos, size)",
          "old_line_content": "",
          "new_line_content": "\ttype = unpack_object_header(p, &w_curs, &curpos, size);",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "\tif (buf)",
          "new_line_content": "\tbuf = read_packed_sha1(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(buf, size)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "map_sha1_file",
          "old_text": null,
          "new_text": "map_sha1_file(sha1, &mapsize)",
          "old_line_content": "\tif (map) {",
          "new_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"pack %s contains unknown object type %d\",\n\t\t\t    p->pack_name, type)",
          "old_line_content": "\t\t\t    p->pack_name, type);",
          "new_line_content": "\t\t\tdie(\"pack %s contains unknown object type %d\",",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "\t\treturn buf;",
          "new_line_content": "\t\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "}",
          "new_line_content": "\treturn read_packed_sha1(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "typename",
          "old_text": null,
          "new_text": "typename(type)",
          "old_line_content": "\t\tcase OBJ_OFS_DELTA:",
          "new_line_content": "\t\t\treturn typename(type);",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\t\tif (fd < 0)",
          "new_line_content": "\t\tfd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "opendir",
          "old_text": null,
          "new_text": "opendir(path)",
          "old_line_content": "\tif (!dir) {",
          "new_line_content": "\tdir = opendir(path);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "get_delta_base",
          "old_text": null,
          "new_text": "get_delta_base(p, &w_curs, &curpos, type, obj_offset)",
          "old_line_content": "\t\t\tif (*delta_chain_length == 0) {",
          "new_line_content": "\t\t\tobj_offset = get_delta_base(p, &w_curs, &curpos, type, obj_offset);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "hashclr",
          "old_text": null,
          "new_text": "hashclr(base_sha1)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\thashclr(base_sha1);",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\t\t      path, strerror(errno));",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\t\t\t\t     path);",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "use_pack",
          "old_text": null,
          "new_text": "use_pack(p, &w_curs, curpos, NULL)",
          "old_line_content": "\t\t\tif (*delta_chain_length == 0)",
          "new_line_content": "\t\t\tnext_sha1 = use_pack(p, &w_curs, curpos, NULL);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(de->d_name)",
          "old_line_content": "\t\tstruct packed_git *p;",
          "new_line_content": "\t\tint namelen = strlen(de->d_name);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(next_sha1, p)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tobj_offset = find_pack_entry_one(next_sha1, p);",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(actual_sha1, sha1)",
          "old_line_content": "\twhile (1) {",
          "new_line_content": "\thashcpy(actual_sha1, sha1);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "has_extension",
          "old_text": null,
          "new_text": "has_extension(de->d_name, \".idx\")",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!has_extension(de->d_name, \".idx\"))",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "old_line_content": "\t\t\t             errstr);",
          "new_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, &w_curs, &curpos, &dummy)",
          "old_line_content": "\t}",
          "new_line_content": "\t\ttype = unpack_object_header(p, &w_curs, &curpos, &dummy);",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(path + len, de->d_name)",
          "old_line_content": "\t\tfor (p = packed_git; p; p = p->next) {",
          "new_line_content": "\t\tstrcpy(path + len, de->d_name);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(actual_sha1, &type, &isize)",
          "old_line_content": "\t\tif (!buffer)",
          "new_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, &type, &isize);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(path, p->pack_name, len + namelen - 4)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\tif (!memcmp(path, p->pack_name, len + namelen - 4))",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\t\t\t\t     path);",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "hashcpy",
          "old_text": null,
          "new_text": "hashcpy(actual_sha1_return, actual_sha1)",
          "old_line_content": "\t\t\treturn buffer;",
          "new_line_content": "\t\t\t\thashcpy(actual_sha1_return, actual_sha1);",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(target)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": null,
          "new_api": "resolve_gitlink_ref",
          "old_text": null,
          "new_text": "resolve_gitlink_ref(path, \"HEAD\", sha1)",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\treturn resolve_gitlink_ref(path, \"HEAD\", sha1);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "add_packed_git",
          "old_text": null,
          "new_text": "add_packed_git(path, len + namelen, local)",
          "old_line_content": "\t\tif (!p)",
          "new_line_content": "\t\tp = add_packed_git(path, len + namelen, local);",
          "content_same": false
        },
        {
          "line": 2406,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: unsupported file type\", path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, &w_curs, &curpos, &size)",
          "old_line_content": "",
          "new_line_content": "\ttype = unpack_object_header(p, &w_curs, &curpos, &size);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "install_packed_git",
          "old_text": null,
          "new_text": "install_packed_git(p)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tinstall_packed_git(p);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "closedir",
          "old_text": null,
          "new_text": "closedir(dir)",
          "old_line_content": "}",
          "new_line_content": "\tclosedir(dir);",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "packed_delta_info",
          "old_text": null,
          "new_text": "packed_delta_info(p, &w_curs, curpos,\n\t\t\t\t\t type, obj_offset, sizep)",
          "old_line_content": "\t\t\t\t\t type, obj_offset, sizep);",
          "new_line_content": "\t\ttype = packed_delta_info(p, &w_curs, curpos,",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(ref_type)",
          "old_line_content": "",
          "new_line_content": "\t\tref_length = strlen(ref_type);",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 2416,
          "old_api": null,
          "new_api": "xread",
          "old_text": null,
          "new_text": "xread(fd, c, remaining)",
          "old_line_content": "\t\tif (r <= 0)",
          "new_line_content": "\t\tssize_t r = xread(fd, c, remaining);",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t/* Now we have the ID of the referred-to object in",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"pack %s contains unknown object type %d\",\n\t\t    p->pack_name, type)",
          "old_line_content": "\t\t    p->pack_name, type);",
          "new_line_content": "\t\tdie(\"pack %s contains unknown object type %d\",",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": null,
          "new_api": "htonl",
          "old_text": null,
          "new_text": "htonl(PACK_SIGNATURE)",
          "old_line_content": "\t\t/* \"protocol error (pack signature mismatch detected)\" */",
          "new_line_content": "\tif (header->hdr_signature != htonl(PACK_SIGNATURE))",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "unuse_pack",
          "old_text": null,
          "new_text": "unuse_pack(&w_curs)",
          "old_line_content": "\treturn type;",
          "new_line_content": "\tunuse_pack(&w_curs);",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "pack_version_ok",
          "old_text": null,
          "new_text": "pack_version_ok(header->hdr_version)",
          "old_line_content": "\t\t/* \"protocol error (pack version unsupported)\" */",
          "new_line_content": "\tif (!pack_version_ok(header->hdr_version))",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(ALTERNATE_DB_ENVIRONMENT)",
          "old_line_content": "\tif (alt_odb_tail)",
          "new_line_content": "\talt = getenv(ALTERNATE_DB_ENVIRONMENT);",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "old_line_content": "",
          "new_line_content": "\t*hdrlen = sprintf(hdr, \"%s %lu\", type, len)+1;",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(alt)",
          "old_line_content": "",
          "new_line_content": "\tlink_alt_odb_entries(alt, alt + strlen(alt), ':', NULL, 0);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "get_object_directory",
          "old_text": null,
          "new_text": "get_object_directory()",
          "old_line_content": "}",
          "new_line_content": "\tread_info_alternates(get_object_directory(), 0);",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": null,
          "new_api": "SHA1_Final",
          "old_text": null,
          "new_text": "SHA1_Final(sha1, &c)",
          "old_line_content": "}",
          "new_line_content": "\tSHA1_Final(sha1, &c);",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size + 1)",
          "old_line_content": "\tbuffer[size] = 0;",
          "new_line_content": "\tbuffer = xmalloc(size + 1);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tstream.next_out = buffer;",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\tstruct alternate_object_database *alt;",
          "new_line_content": "\tchar *name = sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "stat",
          "old_text": null,
          "new_text": "stat(name, st)",
          "old_line_content": "\t\treturn name;",
          "new_line_content": "\tif (!stat(name, st))",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "inflateInit",
          "old_text": null,
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tdo {",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "prepare_alt_odb",
          "old_text": null,
          "new_text": "prepare_alt_odb()",
          "old_line_content": "\tfor (alt = alt_odb_list; alt; alt = alt->next) {",
          "new_line_content": "\tprepare_alt_odb();",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "use_pack",
          "old_text": null,
          "new_text": "use_pack(p, w_curs, curpos, &stream.avail_in)",
          "old_line_content": "\t\tstream.next_in = in;",
          "new_line_content": "\t\tin = use_pack(p, w_curs, curpos, &stream.avail_in);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\t\tcurpos += stream.next_in - in;",
          "new_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "stat",
          "old_text": null,
          "new_text": "stat(alt->base, st)",
          "old_line_content": "\t\t\treturn alt->base;",
          "new_line_content": "\t\tif (!stat(alt->base, st))",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != size) {",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(n, sizeof(struct packed_git *))",
          "old_line_content": "\tfor (n = 0, p = packed_git; p; p = p->next)",
          "new_line_content": "\tary = xcalloc(n, sizeof(struct packed_git *));",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(ary, n, sizeof(struct packed_git *), sort_pack)",
          "old_line_content": "",
          "new_line_content": "\tqsort(ary, n, sizeof(struct packed_git *), sort_pack);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(filename, '/')",
          "old_line_content": "\tif (dir) {",
          "new_line_content": "\tdir = strrchr(filename, '/');",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ary)",
          "old_line_content": "}",
          "new_line_content": "\tfree(ary);",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "adjust_shared_perm",
          "old_text": null,
          "new_text": "adjust_shared_perm(filename)",
          "old_line_content": "\t\t\t*dir = '/';",
          "new_line_content": "\t\tif (!mkdir(filename, 0777) && adjust_shared_perm(filename)) {",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\"pack_report: getpagesize()            = %10\" SZ_FMT \"\\n\"\n\t\t\"pack_report: core.packedGitWindowSize = %10\" SZ_FMT \"\\n\"\n\t\t\"pack_report: core.packedGitLimit      = %10\" SZ_FMT \"\\n\",\n\t\t(size_t) getpagesize(),\n\t\tpacked_git_window_size,\n\t\tpacked_git_limit)",
          "old_line_content": "\t\t\"pack_report: getpagesize()            = %10\" SZ_FMT \"\\n\"",
          "new_line_content": "\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "getpagesize",
          "old_text": null,
          "new_text": "getpagesize()",
          "old_line_content": "\t\tpacked_git_window_size,",
          "new_line_content": "\t\t(size_t) getpagesize(),",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "\t\t\treturn 0;",
          "new_line_content": "\t\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\"pack_report: pack_used_ctr            = %10u\\n\"\n\t\t\"pack_report: pack_mmap_calls          = %10u\\n\"\n\t\t\"pack_report: pack_open_windows        = %10u / %10u\\n\"\n\t\t\"pack_report: pack_mapped              = \"\n\t\t\t\"%10\" SZ_FMT \" / %10\" SZ_FMT \"\\n\",\n\t\tpack_used_ctr,\n\t\tpack_mmap_calls,\n\t\tpack_open_windows, peak_pack_open_windows,\n\t\tpack_mapped, peak_pack_mapped)",
          "old_line_content": "\t\t\"pack_report: pack_used_ctr            = %10u\\n\"",
          "new_line_content": "\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "prepare_alt_odb",
          "old_text": null,
          "new_text": "prepare_alt_odb()",
          "old_line_content": "\tfor (alt = alt_odb_list; alt; alt = alt->next) {",
          "new_line_content": "\tprepare_alt_odb();",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "prepare_packed_git_one",
          "old_text": null,
          "new_text": "prepare_packed_git_one(alt->base, 0)",
          "old_line_content": "\t\talt->name[-1] = '/';",
          "new_line_content": "\t\tprepare_packed_git_one(alt->base, 0);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "rearrange_packed_git",
          "old_text": null,
          "new_text": "rearrange_packed_git()",
          "old_line_content": "\tprepare_packed_git_run_once = 1;",
          "new_line_content": "\trearrange_packed_git();",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "link_temp_to_file",
          "old_text": null,
          "new_text": "link_temp_to_file(tmpfile, filename)",
          "old_line_content": "",
          "new_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "prepare_packed_git",
          "old_text": null,
          "new_text": "prepare_packed_git()",
          "old_line_content": "}",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\tstruct stat st;",
          "new_line_content": "\tint fd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "pack_entry_hash",
          "old_text": null,
          "new_text": "pack_entry_hash(p, base_offset)",
          "old_line_content": "\tstruct delta_base_cache_entry *ent = delta_base_cache + hash;",
          "new_line_content": "\tunsigned long hash = pack_entry_hash(p, base_offset);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(sha1, real_sha1)",
          "old_line_content": "}",
          "new_line_content": "\treturn hashcmp(sha1, real_sha1) ? -1 : 0;",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile, filename)",
          "old_line_content": "\t\t\treturn 0;",
          "new_line_content": "\t\tif (!rename(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": null,
          "new_api": "unpack_entry",
          "old_text": null,
          "new_text": "unpack_entry(p, base_offset, type, base_size)",
          "old_line_content": "",
          "new_line_content": "\treturn unpack_entry(p, base_offset, type, base_size);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "xsize_t",
          "old_text": null,
          "new_text": "xsize_t(st.st_size)",
          "old_line_content": "\tif (idx_size < 4 * 256 + 20 + 20) {",
          "new_line_content": "\tidx_size = xsize_t(st.st_size);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\tif (ret) {",
          "new_line_content": "\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"index file %s is too small\", path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn error(\"index file %s is too small\", path);",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "find_sha1_file",
          "old_text": null,
          "new_text": "find_sha1_file(sha1, &st)",
          "old_line_content": "",
          "new_line_content": "\tchar *filename = find_sha1_file(sha1, &st);",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(ret)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn error(\"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ret, ent->data, ent->size)",
          "old_line_content": "\t\t((char *)ret)[ent->size] = 0;",
          "new_line_content": "\t\tmemcpy(ret, ent->data, ent->size);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY | sha1_file_open_flag)",
          "old_line_content": "\tif (fd < 0) {",
          "new_line_content": "\tfd = open(filename, O_RDONLY | sha1_file_open_flag);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(hdr->idx_version)",
          "old_line_content": "\t\tif (version < 2 || version > 2) {",
          "new_line_content": "\t\tversion = ntohl(hdr->idx_version);",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"index file %s is version %d\"\n\t\t\t\t     \" and is not supported by this binary\"\n\t\t\t\t     \" (try upgrading GIT to a newer version)\",\n\t\t\t\t     path, version)",
          "old_line_content": "\t\t\t\t     \" and is not supported by this binary\"",
          "new_line_content": "\t\t\treturn error(\"index file %s is version %d\"",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY)",
          "old_line_content": "\t\t\tif (fd >= 0)",
          "new_line_content": "\t\t\tfd = open(filename, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\treturn error(\"file write error (%s)\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ent->data)",
          "old_line_content": "\t\tent->data = NULL;",
          "new_line_content": "\t\tfree(ent->data);",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(index[i])",
          "old_line_content": "\t\tif (n < nr) {",
          "new_line_content": "\t\tuint32_t n = ntohl(index[i]);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"non-monotonic index %s\", path)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn error(\"non-monotonic index %s\", path);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\treturn map;",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "pack_entry_hash",
          "old_text": null,
          "new_text": "pack_entry_hash(p, base_offset)",
          "old_line_content": "\tstruct delta_base_cache_entry *ent = delta_base_cache + hash;",
          "new_line_content": "\tunsigned long hash = pack_entry_hash(p, base_offset);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "release_delta_base_cache",
          "old_text": null,
          "new_text": "release_delta_base_cache(ent)",
          "old_line_content": "\tdelta_base_cached += base_size;",
          "new_line_content": "\trelease_delta_base_cache(ent);",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "\tif (returnsha1)",
          "new_line_content": "\tfilename = sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "release_delta_base_cache",
          "old_text": null,
          "new_text": "release_delta_base_cache(f)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\trelease_delta_base_cache(f);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"wrong index file size in %s\", path)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn error(\"wrong index file size in %s\", path);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": null,
          "new_api": "has_sha1_file",
          "old_text": null,
          "new_text": "has_sha1_file(sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tif (has_sha1_file(sha1))",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY)",
          "old_line_content": "\tif (fd >= 0) {",
          "new_line_content": "\tfd = open(filename, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "release_delta_base_cache",
          "old_text": null,
          "new_text": "release_delta_base_cache(f)",
          "old_line_content": "\t}",
          "new_line_content": "\t\trelease_delta_base_cache(f);",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\treturn error(\"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2048,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/tmp_obj_XXXXXX\", get_object_directory());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\t\tif (idx_size < min_size || idx_size > min_size + (nr - 1)*8) {",
          "content_same": false
        },
        {
          "line": 2050,
          "old_api": "mkstemp",
          "new_api": null,
          "old_text": "mkstemp(tmpfile)",
          "new_text": null,
          "old_line_content": "\tfd = mkstemp(tmpfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "new_line_content": "\t\tif (errno == EPERM)",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\t\t\tif (x > (x + 1) || y > (y + 1)) {",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t/* Set it up */",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "get_delta_base",
          "new_api": null,
          "old_text": "get_delta_base(p, w_curs, &curpos, *type, obj_offset)",
          "new_text": null,
          "old_line_content": "\tbase_offset = get_delta_base(p, w_curs, &curpos, *type, obj_offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to read delta base object\"\n\t\t    \" at %\"PRIuMAX\" from %s\",\n\t\t    (uintmax_t)base_offset, p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to read delta base object\"",
          "new_line_content": "\tif (!base)",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "unpack_compressed_entry",
          "new_api": null,
          "old_text": "unpack_compressed_entry(p, w_curs, curpos, delta_size)",
          "new_text": null,
          "old_line_content": "\tdelta_data = unpack_compressed_entry(p, w_curs, curpos, delta_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\tstream.avail_in = hdrlen;",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(stream, 0, sizeof(*stream))",
          "new_text": null,
          "old_line_content": "\tmemset(stream, 0, sizeof(*stream));",
          "new_line_content": "\t/* Get the data stream */",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to apply delta\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to apply delta\");",
          "new_line_content": "\tif (!result)",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\tret = deflate(&stream, Z_FINISH);",
          "new_line_content": "\tstream.avail_in = len;",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(p->pack_name)",
          "new_text": null,
          "old_line_content": "\tidx_name = xstrdup(p->pack_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to deflate new object %s (%d)\", sha1_to_hex(sha1), ret);",
          "new_line_content": "\tif (ret != Z_STREAM_END)",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "legacy_loose_object",
          "new_api": null,
          "old_text": "legacy_loose_object(map)",
          "new_text": null,
          "old_line_content": "\tif (legacy_loose_object(map)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tret = deflateEnd(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"deflateEnd on object %s failed (%d)\", sha1_to_hex(sha1), ret);",
          "new_line_content": "\tif (ret != Z_OK)",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": "write_buffer",
          "new_api": null,
          "old_text": "write_buffer(fd, compressed, size)",
          "new_text": null,
          "old_line_content": "\tif (write_buffer(fd, compressed, size) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, &w_curs, &curpos, sizep)",
          "new_text": null,
          "old_line_content": "\t*type = unpack_object_header(p, &w_curs, &curpos, sizep);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "unpack_object_header_gently",
          "new_api": null,
          "old_text": "unpack_object_header_gently(map, mapsize, &type, &size)",
          "new_text": null,
          "old_line_content": "\tused = unpack_object_header_gently(map, mapsize, &type, &size);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "unpack_delta_entry",
          "new_api": null,
          "old_text": "unpack_delta_entry(p, &w_curs, curpos, *sizep,\n\t\t\t\t\t  obj_offset, type, sizep)",
          "new_text": null,
          "old_line_content": "\t\tdata = unpack_delta_entry(p, &w_curs, curpos, *sizep,",
          "new_line_content": "\tcase OBJ_REF_DELTA:",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "move_temp_to_file",
          "new_api": null,
          "old_text": "move_temp_to_file(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(stream);",
          "new_line_content": "\tstream->avail_in = mapsize;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "unpack_compressed_entry",
          "new_api": null,
          "old_text": "unpack_compressed_entry(p, &w_curs, curpos, *sizep)",
          "new_text": null,
          "old_line_content": "\t\tdata = unpack_compressed_entry(p, &w_curs, curpos, *sizep);",
          "new_line_content": "\tcase OBJ_TAG:",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buffer, bufsiz, \"%s %lu\",\n\t\t\t\t\t typename(type), size)",
          "new_text": null,
          "old_line_content": "\tstream->total_out = 1 + snprintf(buffer, bufsiz, \"%s %lu\",",
          "new_line_content": "\t/* And generate the fake traditional header */",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unknown object type %i in %s\", *type, p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unknown object type %i in %s\", *type, p->pack_name);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "unuse_pack",
          "new_api": null,
          "old_text": "unuse_pack(&w_curs)",
          "new_text": null,
          "old_line_content": "\tunuse_pack(&w_curs);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "scan_windows",
          "new_api": null,
          "old_text": "scan_windows(current, &lru_p, &lru_w, &lru_l)",
          "new_text": null,
          "old_line_content": "\t\tscan_windows(current, &lru_p, &lru_w, &lru_l);",
          "new_line_content": "\tif (current)",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(buffer)",
          "new_text": null,
          "old_line_content": "\tint bytes = strlen(buffer) + 1;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "scan_windows",
          "new_api": null,
          "old_text": "scan_windows(p, &lru_p, &lru_w, &lru_l)",
          "new_text": null,
          "old_line_content": "\t\tscan_windows(p, &lru_p, &lru_w, &lru_l);",
          "new_line_content": "\tfor (p = packed_git; p; p = p->next)",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, &type, &len)",
          "new_text": null,
          "old_line_content": "\tunpacked = read_packed_sha1(sha1, &type, &len);",
          "new_line_content": "\t/* need to unpack and recompress it by itself */",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(lru_w->base, lru_w->len)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(lru_w->base, lru_w->len);",
          "new_line_content": "\tif (lru_p) {",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tif (!unpacked)",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "open_pack_index",
          "new_api": null,
          "old_text": "open_pack_index(p)",
          "new_text": null,
          "old_line_content": "\t\tif (open_pack_index(p))",
          "new_line_content": "\tif (!index) {",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\thdrlen = sprintf(hdr, \"%s %lu\", typename(type), len) + 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf, (char *) buffer + bytes, n)",
          "new_text": null,
          "old_line_content": "\tmemcpy(buf, (char *) buffer + bytes, n);",
          "new_line_content": "\t\tn = size;",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t/* Set it up */",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(lru_p->pack_fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\tclose(lru_p->pack_fd);",
          "new_line_content": "\t\t\tif (!lru_p->windows && lru_p->pack_fd != keep_fd) {",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(lru_w)",
          "new_text": null,
          "old_line_content": "\t\tfree(lru_w);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\tstream.avail_in = hdrlen;",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(*((uint32_t *)(index + 24 * n)))",
          "new_text": null,
          "old_line_content": "\t\treturn ntohl(*((uint32_t *)(index + 24 * n)));",
          "new_line_content": "\tif (p->index_version == 1) {",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "unuse_one_window",
          "new_api": null,
          "old_text": "unuse_one_window(NULL, fd)",
          "new_text": null,
          "old_line_content": "\twhile (need >= (cur - pack_mapped) && unuse_one_window(NULL, fd))",
          "new_line_content": "\tsize_t cur = pack_mapped;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\t\tstatus = inflate(stream, Z_FINISH);",
          "new_line_content": "\t\twhile (status == Z_OK)",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(*((uint32_t *)(index + 4 * n)))",
          "new_text": null,
          "old_line_content": "\t\toff = ntohl(*((uint32_t *)(index + 4 * n)));",
          "new_line_content": "\t\tindex += 8 + p->num_objects * (20 + 4);",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "new_line_content": "\tstream.avail_in = len;",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tdeflateEnd(&stream);",
          "new_line_content": "\t\t/* nothing */;",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(stream)",
          "new_text": null,
          "old_line_content": "\t\tinflateEnd(stream);",
          "new_line_content": "\tif (status == Z_STREAM_END && !stream->avail_in) {",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(*((uint32_t *)(index + 0)))",
          "new_text": null,
          "old_line_content": "\t\treturn (((uint64_t)ntohl(*((uint32_t *)(index + 0)))) << 32) |",
          "new_line_content": "\t\tindex += p->num_objects * 4 + (off & 0x7fffffff) * 8;",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\terror(\"corrupt loose object '%s'\", sha1_to_hex(sha1));",
          "new_line_content": "\tif (status < 0)",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"garbage at end of loose object '%s'\",\n\t\t      sha1_to_hex(sha1))",
          "new_text": null,
          "old_line_content": "\t\terror(\"garbage at end of loose object '%s'\",",
          "new_line_content": "\telse if (stream->avail_in)",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "map_sha1_file",
          "new_api": null,
          "old_text": "map_sha1_file(sha1, &objsize)",
          "new_text": null,
          "old_line_content": "\tvoid *buf = map_sha1_file(sha1, &objsize);",
          "new_line_content": "\tunsigned long objsize;",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": "write_buffer",
          "new_api": null,
          "old_text": "write_buffer(fd, buf, objsize)",
          "new_text": null,
          "old_line_content": "\t\tretval = write_buffer(fd, buf, objsize);",
          "new_line_content": "\tif (buf) {",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "open_pack_index",
          "new_api": null,
          "old_text": "open_pack_index(p)",
          "new_text": null,
          "old_line_content": "\t\tif (open_pack_index(p))",
          "new_line_content": "\tif (!index) {",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "repack_object",
          "new_api": null,
          "old_text": "repack_object(sha1, &objsize)",
          "new_text": null,
          "old_line_content": "\tbuf = repack_object(sha1, &objsize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "open_pack_index",
          "new_api": null,
          "old_text": "open_pack_index(p)",
          "new_text": null,
          "old_line_content": "\tif (!p->index_data && open_pack_index(p))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(p->pack_name, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tp->pack_fd = open(p->pack_name, O_RDONLY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(level1_ofs[*sha1])",
          "new_text": null,
          "old_line_content": "\thi = ntohl(level1_ofs[*sha1]);",
          "new_line_content": "\tindex += 4 * 256;",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(st.st_mode)",
          "new_text": null,
          "old_line_content": "\t\tif (!S_ISREG(st.st_mode))",
          "new_line_content": "\tif (!p->pack_size) {",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(index + x, sha1)",
          "new_text": null,
          "old_line_content": "\t\tint cmp = hashcmp(index + x, sha1);",
          "new_line_content": "\t\tunsigned x = (p->index_version > 1) ? (mi * 20) : (mi * 24 + 4);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"packfile %s size changed\", p->pack_name)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"packfile %s size changed\", p->pack_name);",
          "new_line_content": "\t} else if (p->pack_size != st.st_size)",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "nth_packed_object_offset",
          "new_api": null,
          "old_text": "nth_packed_object_offset(p, mi)",
          "new_text": null,
          "old_line_content": "\t\t\treturn nth_packed_object_offset(p, mi);",
          "new_line_content": "\t\tif (!cmp)",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/tmp_obj_XXXXXX\", get_object_directory());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "fcntl",
          "new_api": null,
          "old_text": "fcntl(p->pack_fd, F_GETFD, 0)",
          "new_text": null,
          "old_line_content": "\tfd_flag = fcntl(p->pack_fd, F_GETFD, 0);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": "mkstemp",
          "new_api": null,
          "old_text": "mkstemp(tmpfile)",
          "new_text": null,
          "old_line_content": "\tlocal = mkstemp(tmpfile);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"cannot determine file descriptor flags\")",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"cannot determine file descriptor flags\");",
          "new_line_content": "\tif (fd_flag < 0)",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"insufficient permission for adding an object to repository database %s\\n\", get_object_directory());",
          "new_line_content": "\t\tif (errno == EPERM)",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "fcntl",
          "new_api": null,
          "old_text": "fcntl(p->pack_fd, F_SETFD, fd_flag)",
          "new_text": null,
          "old_line_content": "\tif (fcntl(p->pack_fd, F_SETFD, fd_flag) == -1)",
          "new_line_content": "\tfd_flag |= FD_CLOEXEC;",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "read_in_full",
          "new_api": null,
          "old_text": "read_in_full(p->pack_fd, &hdr, sizeof(hdr))",
          "new_text": null,
          "old_line_content": "\tif (read_in_full(p->pack_fd, &hdr, sizeof(hdr)) != sizeof(hdr))",
          "new_line_content": "\t/* Verify we recognize this pack file format. */",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(p->pack_name, ig)",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(p->pack_name, ig))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(hdr.hdr_version)",
          "new_text": null,
          "old_line_content": "\t\t\tp->pack_name, ntohl(hdr.hdr_version));",
          "new_line_content": "\t\t\t\" (try upgrading GIT to a newer version)\",",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(last_c, ig)",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(last_c, ig))",
          "new_line_content": "\t\t\t++c;",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(hdr.hdr_entries)",
          "new_text": null,
          "old_line_content": "\tif (p->num_objects != ntohl(hdr.hdr_entries))",
          "new_line_content": "\t/* Verify the pack matches its index. */",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(hdr.hdr_entries)",
          "new_text": null,
          "old_line_content": "\t\t\t     p->pack_name, ntohl(hdr.hdr_entries),",
          "new_line_content": "\t\t\t     \" while index indicates %u objects\",",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "new_text": null,
          "old_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "new_line_content": "\t\t\t\tstream.avail_out = sizeof(discard);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "lseek",
          "new_api": null,
          "old_text": "lseek(p->pack_fd, p->pack_size - sizeof(sha1), SEEK_SET)",
          "new_text": null,
          "old_line_content": "\tif (lseek(p->pack_fd, p->pack_size - sizeof(sha1), SEEK_SET) == -1)",
          "new_line_content": "\t\t\t     p->num_objects);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "type_from_string",
          "new_api": null,
          "old_text": "type_from_string(type)",
          "new_text": null,
          "old_line_content": "\treturn *hdr ? -1 : type_from_string(type);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": "write_buffer",
          "new_api": null,
          "old_text": "write_buffer(local, buffer, *bufposn - stream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\t\tif (write_buffer(local, buffer, *bufposn - stream.avail_in) < 0)",
          "new_line_content": "\t\t\t} while (stream.avail_in && ret == Z_OK);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(sha1, idx_sha1)",
          "new_text": null,
          "old_line_content": "\tif (hashcmp(sha1, idx_sha1))",
          "new_line_content": "\tidx_sha1 = ((unsigned char *)p->index_data) + p->index_size - 40;",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "unpack_sha1_header",
          "new_api": null,
          "old_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "new_text": null,
          "old_line_content": "\tret = unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "matches_pack_name",
          "new_api": null,
          "old_text": "matches_pack_name(p, *ig)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!matches_pack_name(p, *ig))",
          "new_line_content": "\t\t\tfor (ig = ignore_packed; *ig; ig++)",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "xread",
          "new_api": null,
          "old_text": "xread(fd, buffer + *bufposn, bufsize - *bufposn)",
          "new_text": null,
          "old_line_content": "\t\tsize = xread(fd, buffer + *bufposn, bufsize - *bufposn);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "open_packed_git_1",
          "new_api": null,
          "old_text": "open_packed_git_1(p)",
          "new_text": null,
          "old_line_content": "\tif (!open_packed_git_1(p))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2214,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(local)",
          "new_text": null,
          "old_line_content": "\t\t\tclose(local);",
          "new_line_content": "\t\tif (size <= 0) {",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(p->pack_fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(p->pack_fd);",
          "new_line_content": "\tif (p->pack_fd != -1) {",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "unpack_sha1_rest",
          "new_api": null,
          "old_text": "unpack_sha1_rest(&stream, hdr, *size, sha1)",
          "new_text": null,
          "old_line_content": "\treturn unpack_sha1_rest(&stream, hdr, *size, sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Connection closed?\")",
          "new_text": null,
          "old_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "new_line_content": "\t\t\tif (!size)",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, p)",
          "new_text": null,
          "old_line_content": "\t\toffset = find_pack_entry_one(sha1, p);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t} while (1);",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": "fchmod",
          "new_api": null,
          "old_text": "fchmod(local, 0444)",
          "new_text": null,
          "old_line_content": "\tfchmod(local, 0444);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "open_packed_git",
          "new_api": null,
          "old_text": "open_packed_git(p)",
          "new_text": null,
          "old_line_content": "\t\t\tif (p->pack_fd == -1 && open_packed_git(p)) {",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "\tif (ret != Z_STREAM_END) {",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "use_pack",
          "new_api": null,
          "old_text": "use_pack(p, w_curs, curpos, &stream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\tin = use_pack(p, w_curs, curpos, &stream.avail_in);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(sha1, real_sha1)",
          "new_text": null,
          "old_line_content": "\tif (hashcmp(sha1, real_sha1)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\t\tstream.next_in = in;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(e->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\t\t\thashcpy(e->sha1, sha1);",
          "new_line_content": "\t\t\te->p = p;",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t\t stream.total_out < sizeof(delta_head));",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"delta data unpack-initial failed\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"delta data unpack-initial failed\");",
          "new_line_content": "\tif ((st != Z_STREAM_END) && stream.total_out != sizeof(delta_head))",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "open_packed_git",
          "new_api": null,
          "old_text": "open_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tif (p->pack_fd == -1 && open_packed_git(p))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": "sha1_pack_index_name",
          "new_api": null,
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "new_line_content": "\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, p)",
          "new_text": null,
          "old_line_content": "\t\tif (find_pack_entry_one(sha1, p))",
          "new_line_content": "\tfor (p = packs; p; p = p->next) {",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "get_delta_hdr_size",
          "new_api": null,
          "old_text": "get_delta_hdr_size(&data, delta_head+sizeof(delta_head))",
          "new_text": null,
          "old_line_content": "\tget_delta_hdr_size(&data, delta_head+sizeof(delta_head));",
          "new_line_content": "\t/* ignore base size */",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"offset beyond end of packfile (truncated pack?)\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"offset beyond end of packfile (truncated pack?)\");",
          "new_line_content": "\tif (offset > (p->pack_size - 20))",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "get_delta_hdr_size",
          "new_api": null,
          "old_text": "get_delta_hdr_size(&data, delta_head+sizeof(delta_head))",
          "new_text": null,
          "old_line_content": "\treturn get_delta_hdr_size(&data, delta_head+sizeof(delta_head));",
          "new_line_content": "\t/* Read the result size */",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "new_line_content": "\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "in_window",
          "new_api": null,
          "old_text": "in_window(win, offset)",
          "new_text": null,
          "old_line_content": "\tif (!win || !in_window(win, offset)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "in_window",
          "new_api": null,
          "old_text": "in_window(win, offset)",
          "new_text": null,
          "old_line_content": "\t\t\tif (in_window(win, offset))",
          "new_line_content": "\t\tfor (win = p->windows; win; win = win->next) {",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "map_sha1_file",
          "new_api": null,
          "old_text": "map_sha1_file(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, ignore_packed)",
          "new_text": null,
          "old_line_content": "\treturn find_pack_entry(sha1, &e, ignore_packed);",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "use_pack",
          "new_api": null,
          "old_text": "use_pack(p, w_curs, *curpos, NULL)",
          "new_text": null,
          "old_line_content": "\tunsigned char *base_info = use_pack(p, w_curs, *curpos, NULL);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*win))",
          "new_text": null,
          "old_line_content": "\t\t\twin = xcalloc(1, sizeof(*win));",
          "new_line_content": "\t\t\toff_t len;",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "new_line_content": "\tif (!map)",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\tif (find_pack_entry(sha1, &e, NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t\t*sizep = size;",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "find_sha1_file",
          "new_api": null,
          "old_text": "find_sha1_file(sha1, &st)",
          "new_text": null,
          "old_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "new_line_content": "\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "unuse_one_window",
          "new_api": null,
          "old_text": "unuse_one_window(p, p->pack_fd)",
          "new_text": null,
          "old_line_content": "\t\t\t\t&& unuse_one_window(p, p->pack_fd))",
          "new_line_content": "\t\t\twhile (packed_git_limit < pack_mapped",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "xmmap",
          "new_api": null,
          "old_text": "xmmap(NULL, win->len,\n\t\t\t\tPROT_READ, MAP_PRIVATE,\n\t\t\t\tp->pack_fd, win->offset)",
          "new_text": null,
          "old_line_content": "\t\t\twin->base = xmmap(NULL, win->len,",
          "new_line_content": "\t\t\t\t; /* nothing */",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "MSB",
          "new_api": null,
          "old_text": "MSB(base_offset, 7)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!base_offset || MSB(base_offset, 7))",
          "new_line_content": "\t\t\tbase_offset += 1;",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"packfile %s cannot be mapped: %s\",\n\t\t\t\t\tp->pack_name,\n\t\t\t\t\tstrerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\t\tdie(\"packfile %s cannot be mapped: %s\",",
          "new_line_content": "\t\t\tif (win->base == MAP_FAILED)",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstrerror(errno));",
          "new_line_content": "\t\t\t\t\tp->pack_name,",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry(sha1, &e, NULL)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"delta base offset out of bound\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"delta base offset out of bound\");",
          "new_line_content": "\t\tif (base_offset >= delta_obj_offset)",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "packed_object_info",
          "new_api": null,
          "old_text": "packed_object_info(e.p, e.offset, sizep)",
          "new_text": null,
          "old_line_content": "\treturn packed_object_info(e.p, e.offset, sizep);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(base_info, p)",
          "new_text": null,
          "old_line_content": "\t\tbase_offset = find_pack_entry_one(base_info, p);",
          "new_line_content": "\t\t/* The base entry _must_ be in the same pack */",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to find delta-pack base object %s\",\n\t\t\t\tsha1_to_hex(base_info))",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"failed to find delta-pack base object %s\",",
          "new_line_content": "\t\tif (!base_offset)",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": "xread",
          "new_api": null,
          "old_text": "xread(fd, buf + off, size - off)",
          "new_text": null,
          "old_line_content": "\t\tiret = xread(fd, buf + off, size - off);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e, NULL)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry(sha1, &e, NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"I am totally screwed\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"I am totally screwed\");",
          "new_line_content": "\t} else",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "cache_or_unpack_entry",
          "new_api": null,
          "old_text": "cache_or_unpack_entry(e.p, e.offset, size, type, 1)",
          "new_text": null,
          "old_line_content": "\t\treturn cache_or_unpack_entry(e.p, e.offset, size, type, 1);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(buf, size)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf = xrealloc(buf, size);",
          "new_line_content": "\t\t\t\tsize *= 2;",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(offset)",
          "new_text": null,
          "old_line_content": "\t\t*left = win->len - xsize_t(offset);",
          "new_line_content": "\tif (left)",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*p) + path_len + 2)",
          "new_text": null,
          "old_line_content": "\tstruct packed_git *p = xmalloc(sizeof(*p) + path_len + 2);",
          "new_line_content": "\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\".idx\")",
          "new_text": null,
          "old_line_content": "\tpath_len -= strlen(\".idx\");",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "get_delta_base",
          "new_api": null,
          "old_text": "get_delta_base(p, w_curs, &curpos, type, obj_offset)",
          "new_text": null,
          "old_line_content": "\tbase_offset = get_delta_base(p, w_curs, &curpos, type, obj_offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size)",
          "new_text": null,
          "old_line_content": "\tchar *buf = xmalloc(size);",
          "new_line_content": "\tunsigned long size = 4096;",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->pack_name, path, path_len)",
          "new_text": null,
          "old_line_content": "\tmemcpy(p->pack_name, path, path_len);",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "read_pipe",
          "new_api": null,
          "old_text": "read_pipe(fd, &buf, &size)",
          "new_text": null,
          "old_line_content": "\tif (read_pipe(fd, &buf, &size)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "hashcmp",
          "new_api": null,
          "old_text": "hashcmp(co->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\t\tif (!hashcmp(co->sha1, sha1))",
          "new_line_content": "\tfor (i = 0; i < cached_object_nr; i++, co++) {",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "get_size_from_delta",
          "new_api": null,
          "old_text": "get_size_from_delta(p, w_curs, curpos)",
          "new_text": null,
          "old_line_content": "\t\t*sizep = get_size_from_delta(p, w_curs, curpos);",
          "new_line_content": "\tif (sizep)",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(buf, size, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "new_line_content": "\tif (write_object)",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": "hash_sha1_file",
          "new_api": null,
          "old_text": "hash_sha1_file(buf, size, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = hash_sha1_file(buf, size, type, sha1);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\thash_sha1_file(buf, len, typename(type), sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(st->st_size)",
          "new_text": null,
          "old_line_content": "\tsize_t size = xsize_t(st->st_size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(path + path_len - 40, p->sha1)",
          "new_text": null,
          "old_line_content": "\tif (path_len < 40 || get_sha1_hex(path + path_len - 40, p->sha1))",
          "new_line_content": "\tp->mtime = st.st_mtime;",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "alloc_nr",
          "new_api": null,
          "old_text": "alloc_nr(cached_object_alloc)",
          "new_text": null,
          "old_line_content": "\t\tcached_object_alloc = alloc_nr(cached_object_alloc);",
          "new_line_content": "\tif (cached_object_alloc <= cached_object_nr) {",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "xmmap",
          "new_api": null,
          "old_text": "xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\t\tbuf = xmmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\tif (size)",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "sha1_pack_index_name",
          "new_api": null,
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": null,
          "old_line_content": "\tchar *path = sha1_pack_index_name(sha1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "use_pack",
          "new_api": null,
          "old_text": "use_pack(p, w_curs, *curpos, &left)",
          "new_text": null,
          "old_line_content": "\tbase = use_pack(p, w_curs, *curpos, &left);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(len)",
          "new_text": null,
          "old_line_content": "\tco->buf = xmalloc(len);",
          "new_line_content": "\tco->type = type;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"object offset outside of pack file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"object offset outside of pack file\");",
          "new_line_content": "\tif (!used)",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(st->st_mode)",
          "new_text": null,
          "old_line_content": "\tif ((type == OBJ_BLOB) && S_ISREG(st->st_mode)) {",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tconst char *path = sha1_pack_name(sha1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": "convert_to_git",
          "new_api": null,
          "old_text": "convert_to_git(path, buf, &nsize)",
          "new_text": null,
          "old_line_content": "\t\tchar *nbuf = convert_to_git(path, buf, &nsize);",
          "new_line_content": "\t\tunsigned long nsize = size;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "check_packed_git_idx",
          "new_api": null,
          "old_text": "check_packed_git_idx(idx_path, p)",
          "new_text": null,
          "old_line_content": "\tif (check_packed_git_idx(idx_path, p)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(buf, size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(buf, size);",
          "new_line_content": "\t\tif (nbuf) {",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "find_cached_object",
          "new_api": null,
          "old_text": "find_cached_object(sha1)",
          "new_text": null,
          "old_line_content": "\tco = find_cached_object(sha1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(p->pack_name, path)",
          "new_text": null,
          "old_line_content": "\tstrcpy(p->pack_name, path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(co->size + 1)",
          "new_text": null,
          "old_line_content": "\t\tbuf = xmalloc(co->size + 1);",
          "new_line_content": "\tif (co) {",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, size, typename(type), sha1);",
          "new_line_content": "\tif (write_object)",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(p->sha1, sha1)",
          "new_text": null,
          "old_line_content": "\thashcpy(p->sha1, sha1);",
          "new_line_content": "\tp->pack_fd = -1;",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": "typename",
          "new_api": null,
          "old_text": "typename(type)",
          "new_text": null,
          "old_line_content": "\t\tret = hash_sha1_file(buf, size, typename(type), sha1);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\t\tfree(buf);",
          "new_line_content": "\tif (re_allocated) {",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, &w_curs, &curpos, size)",
          "new_text": null,
          "old_line_content": "\ttype = unpack_object_header(p, &w_curs, &curpos, size);",
          "new_line_content": "\tcurpos = obj_offset;",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": null,
          "old_line_content": "\tbuf = read_packed_sha1(sha1, type, size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(buf, size)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(buf, size);",
          "new_line_content": "\tif (size)",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "map_sha1_file",
          "new_api": null,
          "old_text": "map_sha1_file(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file(sha1, &mapsize);",
          "new_line_content": "\t\treturn buf;",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"pack %s contains unknown object type %d\",\n\t\t\t    p->pack_name, type)",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"pack %s contains unknown object type %d\",",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "unpack_sha1_file",
          "new_api": null,
          "old_text": "unpack_sha1_file(map, mapsize, type, size, sha1)",
          "new_text": null,
          "old_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size, sha1);",
          "new_line_content": "\tif (map) {",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": "reprepare_packed_git",
          "new_api": null,
          "old_text": "reprepare_packed_git()",
          "new_text": null,
          "old_line_content": "\treprepare_packed_git();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "unuse_pack",
          "new_api": null,
          "old_text": "unuse_pack(&w_curs)",
          "new_text": null,
          "old_line_content": "\t\t\tunuse_pack(&w_curs);",
          "new_line_content": "\t\t\t*store_size = 0; /* notyet */",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(path, \"%s/pack\", objdir)",
          "new_text": null,
          "old_line_content": "\tsprintf(path, \"%s/pack\", objdir);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(path, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tfd = open(path, O_RDONLY);",
          "new_line_content": "\tcase S_IFREG:",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": "get_delta_base",
          "new_api": null,
          "old_text": "get_delta_base(p, &w_curs, &curpos, type, obj_offset)",
          "new_text": null,
          "old_line_content": "\t\t\tobj_offset = get_delta_base(p, &w_curs, &curpos, type, obj_offset);",
          "new_line_content": "\t\tcase OBJ_OFS_DELTA:",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\tif (fd < 0)",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"unable to open object pack directory: %s: %s\",\n\t\t\t      path, strerror(errno))",
          "new_text": null,
          "old_line_content": "\t\t\terror(\"unable to open object pack directory: %s: %s\",",
          "new_line_content": "\t\tif (errno != ENOENT)",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "hashclr",
          "new_api": null,
          "old_text": "hashclr(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t\thashclr(base_sha1);",
          "new_line_content": "\t\t\t\t/* TODO: find base_sha1 as pointed by curpos */",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "use_pack",
          "new_api": null,
          "old_text": "use_pack(p, &w_curs, curpos, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tnext_sha1 = use_pack(p, &w_curs, curpos, NULL);",
          "new_line_content": "\t\tcase OBJ_REF_DELTA:",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "readdir",
          "new_api": null,
          "old_text": "readdir(dir)",
          "new_text": null,
          "old_line_content": "\twhile ((de = readdir(dir)) != NULL) {",
          "new_line_content": "\tpath[len++] = '/';",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(st->st_size)",
          "new_text": null,
          "old_line_content": "\t\tlen = xsize_t(st->st_size);",
          "new_line_content": "\tcase S_IFLNK:",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(base_sha1, next_sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t\thashcpy(base_sha1, next_sha1);",
          "new_line_content": "\t\t\tif (*delta_chain_length == 0)",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": "type_from_string",
          "new_api": null,
          "old_text": "type_from_string(required_type_name)",
          "new_text": null,
          "old_line_content": "\trequired_type = type_from_string(required_type_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "has_extension",
          "new_api": null,
          "old_text": "has_extension(de->d_name, \".idx\")",
          "new_text": null,
          "old_line_content": "\t\tif (!has_extension(de->d_name, \".idx\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(actual_sha1, &type, &isize)",
          "new_text": null,
          "old_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, &type, &isize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, &w_curs, &curpos, &dummy)",
          "new_text": null,
          "old_line_content": "\t\ttype = unpack_object_header(p, &w_curs, &curpos, &dummy);",
          "new_line_content": "\t\tcurpos = obj_offset;",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(path + len, de->d_name)",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(path + len, de->d_name);",
          "new_line_content": "\t\t/* Don't reopen a pack we already have. */",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": "hash_sha1_file",
          "new_api": null,
          "old_text": "hash_sha1_file(target, len, blob_type, sha1)",
          "new_text": null,
          "old_line_content": "\t\t\thash_sha1_file(target, len, blob_type, sha1);",
          "new_line_content": "\t\tif (!write_object)",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(path, p->pack_name, len + namelen - 4)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!memcmp(path, p->pack_name, len + namelen - 4))",
          "new_line_content": "\t\tfor (p = packed_git; p; p = p->next) {",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(actual_sha1_return, actual_sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t\thashcpy(actual_sha1_return, actual_sha1);",
          "new_line_content": "\t\t\tif (actual_sha1_return)",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(target)",
          "new_text": null,
          "old_line_content": "\t\tfree(target);",
          "new_line_content": "\t\t\t\t     path);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "resolve_gitlink_ref",
          "new_api": null,
          "old_text": "resolve_gitlink_ref(path, \"HEAD\", sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn resolve_gitlink_ref(path, \"HEAD\", sha1);",
          "new_line_content": "\tcase S_IFDIR:",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "add_packed_git",
          "new_api": null,
          "old_text": "add_packed_git(path, len + namelen, local)",
          "new_text": null,
          "old_line_content": "\t\tp = add_packed_git(path, len + namelen, local);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: unsupported file type\", path)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, &w_curs, &curpos, &size)",
          "new_text": null,
          "old_line_content": "\ttype = unpack_object_header(p, &w_curs, &curpos, &size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "install_packed_git",
          "new_api": null,
          "old_text": "install_packed_git(p)",
          "new_text": null,
          "old_line_content": "\t\tinstall_packed_git(p);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\telse {",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "closedir",
          "new_api": null,
          "old_text": "closedir(dir)",
          "new_text": null,
          "old_line_content": "\tclosedir(dir);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "packed_delta_info",
          "new_api": null,
          "old_text": "packed_delta_info(p, &w_curs, curpos,\n\t\t\t\t\t type, obj_offset, sizep)",
          "new_text": null,
          "old_line_content": "\t\ttype = packed_delta_info(p, &w_curs, curpos,",
          "new_line_content": "\tcase OBJ_REF_DELTA:",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_type)",
          "new_text": null,
          "old_line_content": "\t\tref_length = strlen(ref_type);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buffer, ref_type, ref_length)",
          "new_text": null,
          "old_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "xread",
          "new_api": null,
          "old_text": "xread(fd, c, remaining)",
          "new_text": null,
          "old_line_content": "\t\tssize_t r = xread(fd, c, remaining);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"pack %s contains unknown object type %d\",\n\t\t    p->pack_name, type)",
          "new_text": null,
          "old_line_content": "\t\tdie(\"pack %s contains unknown object type %d\",",
          "new_line_content": "\tdefault:",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "htonl",
          "new_api": null,
          "old_text": "htonl(PACK_SIGNATURE)",
          "new_text": null,
          "old_line_content": "\tif (header->hdr_signature != htonl(PACK_SIGNATURE))",
          "new_line_content": "\t} while (remaining > 0);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "unuse_pack",
          "new_api": null,
          "old_text": "unuse_pack(&w_curs)",
          "new_text": null,
          "old_line_content": "\tunuse_pack(&w_curs);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": "pack_version_ok",
          "new_api": null,
          "old_text": "pack_version_ok(header->hdr_version)",
          "new_text": null,
          "old_line_content": "\tif (!pack_version_ok(header->hdr_version))",
          "new_line_content": "\t\treturn PH_ERROR_PACK_SIGNATURE;",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(ALTERNATE_DB_ENVIRONMENT)",
          "new_text": null,
          "old_line_content": "\talt = getenv(ALTERNATE_DB_ENVIRONMENT);",
          "new_line_content": "\tif (alt_odb_tail)",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "new_text": null,
          "old_line_content": "\t*hdrlen = sprintf(hdr, \"%s %lu\", type, len)+1;",
          "new_line_content": "\t/* Generate the header */",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(alt)",
          "new_text": null,
          "old_line_content": "\tlink_alt_odb_entries(alt, alt + strlen(alt), ':', NULL, 0);",
          "new_line_content": "\talt_odb_tail = &alt_odb_list;",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "\t/* Sha1.. */",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tread_info_alternates(get_object_directory(), 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size + 1)",
          "new_text": null,
          "old_line_content": "\tbuffer = xmalloc(size + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\tbuffer[size] = 0;",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\tchar *name = sha1_file_name(sha1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "stat",
          "new_api": null,
          "old_text": "stat(name, st)",
          "new_text": null,
          "old_line_content": "\tif (!stat(name, st))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "prepare_alt_odb",
          "new_api": null,
          "old_text": "prepare_alt_odb()",
          "new_text": null,
          "old_line_content": "\tprepare_alt_odb();",
          "new_line_content": "\t\treturn name;",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "use_pack",
          "new_api": null,
          "old_text": "use_pack(p, w_curs, curpos, &stream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\tin = use_pack(p, w_curs, curpos, &stream.avail_in);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\t\tstream.next_in = in;",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "fill_sha1_path",
          "new_api": null,
          "old_text": "fill_sha1_path(name, sha1)",
          "new_text": null,
          "old_line_content": "\t\tfill_sha1_path(name, sha1);",
          "new_line_content": "\t\tname = alt->name;",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t} while (st == Z_OK || st == Z_BUF_ERROR);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(n, sizeof(struct packed_git *))",
          "new_text": null,
          "old_line_content": "\tary = xcalloc(n, sizeof(struct packed_git *));",
          "new_line_content": "\t/* prepare an array of packed_git for easier sorting */",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != size) {",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tif (!link(tmpfile, filename))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(ary, n, sizeof(struct packed_git *), sort_pack)",
          "new_text": null,
          "old_line_content": "\tqsort(ary, n, sizeof(struct packed_git *), sort_pack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(filename, '/')",
          "new_text": null,
          "old_line_content": "\tdir = strrchr(filename, '/');",
          "new_line_content": "\tret = errno;",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ary)",
          "new_text": null,
          "old_line_content": "\tfree(ary);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": "adjust_shared_perm",
          "new_api": null,
          "old_text": "adjust_shared_perm(filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!mkdir(filename, 0777) && adjust_shared_perm(filename)) {",
          "new_line_content": "\t\t*dir = 0;",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\"pack_report: getpagesize()            = %10\" SZ_FMT \"\\n\"\n\t\t\"pack_report: core.packedGitWindowSize = %10\" SZ_FMT \"\\n\"\n\t\t\"pack_report: core.packedGitLimit      = %10\" SZ_FMT \"\\n\",\n\t\t(size_t) getpagesize(),\n\t\tpacked_git_window_size,\n\t\tpacked_git_limit)",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "getpagesize",
          "new_api": null,
          "old_text": "getpagesize()",
          "new_text": null,
          "old_line_content": "\t\t(size_t) getpagesize(),",
          "new_line_content": "\t\t\"pack_report: core.packedGitLimit      = %10\" SZ_FMT \"\\n\",",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!link(tmpfile, filename))",
          "new_line_content": "\t\t*dir = '/';",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\"pack_report: pack_used_ctr            = %10u\\n\"\n\t\t\"pack_report: pack_mmap_calls          = %10u\\n\"\n\t\t\"pack_report: pack_open_windows        = %10u / %10u\\n\"\n\t\t\"pack_report: pack_mapped              = \"\n\t\t\t\"%10\" SZ_FMT \" / %10\" SZ_FMT \"\\n\",\n\t\tpack_used_ctr,\n\t\tpack_mmap_calls,\n\t\tpack_open_windows, peak_pack_open_windows,\n\t\tpack_mapped, peak_pack_mapped)",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr,",
          "new_line_content": "\t\tpacked_git_limit);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git_one(get_object_directory(), 1);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "prepare_packed_git_one",
          "new_api": null,
          "old_text": "prepare_packed_git_one(alt->base, 0)",
          "new_text": null,
          "old_line_content": "\t\tprepare_packed_git_one(alt->base, 0);",
          "new_line_content": "\t\talt->name[-1] = 0;",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "rearrange_packed_git",
          "new_api": null,
          "old_text": "rearrange_packed_git()",
          "new_text": null,
          "old_line_content": "\trearrange_packed_git();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": "link_temp_to_file",
          "new_api": null,
          "old_text": "link_temp_to_file(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "\tprepare_packed_git_run_once = 0;",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(path, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tint fd = open(path, O_RDONLY);",
          "new_line_content": "\tuint32_t version, nr, i, *index;",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "pack_entry_hash",
          "new_api": null,
          "old_text": "pack_entry_hash(p, base_offset)",
          "new_text": null,
          "old_line_content": "\tunsigned long hash = pack_entry_hash(p, base_offset);",
          "new_line_content": "\tvoid *ret;",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "hash_sha1_file",
          "new_api": null,
          "old_text": "hash_sha1_file(map, size, type, real_sha1)",
          "new_text": null,
          "old_line_content": "\thash_sha1_file(map, size, type, real_sha1);",
          "new_line_content": "\tunsigned char real_sha1[20];",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "fstat",
          "new_api": null,
          "old_text": "fstat(fd, &st)",
          "new_text": null,
          "old_line_content": "\tif (fstat(fd, &st)) {",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "unpack_entry",
          "new_api": null,
          "old_text": "unpack_entry(p, base_offset, type, base_size)",
          "new_text": null,
          "old_line_content": "\treturn unpack_entry(p, base_offset, type, base_size);",
          "new_line_content": "\t\tgoto found_cache_entry;",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!rename(tmpfile, filename))",
          "new_line_content": "\tif (ret && ret != EEXIST) {",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(st.st_size)",
          "new_text": null,
          "old_line_content": "\tidx_size = xsize_t(st.st_size);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\tunlink(tmpfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\tif (idx_size < 4 * 256 + 20 + 20) {",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "find_sha1_file",
          "new_api": null,
          "old_text": "find_sha1_file(sha1, &st)",
          "new_text": null,
          "old_line_content": "\tchar *filename = find_sha1_file(sha1, &st);",
          "new_line_content": "\tint fd;",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(ret)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "new_line_content": "\t\tif (ret != EEXIST) {",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "xmmap",
          "new_api": null,
          "old_text": "xmmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\tidx_map = xmmap(NULL, idx_size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(ent->size + 1)",
          "new_text": null,
          "old_line_content": "\t\tret = xmalloc(ent->size + 1);",
          "new_line_content": "\telse {",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "htonl",
          "new_api": null,
          "old_text": "htonl(PACK_IDX_SIGNATURE)",
          "new_text": null,
          "old_line_content": "\tif (hdr->idx_signature == htonl(PACK_IDX_SIGNATURE)) {",
          "new_line_content": "\thdr = idx_map;",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(filename, O_RDONLY | sha1_file_open_flag)",
          "new_text": null,
          "old_line_content": "\tfd = open(filename, O_RDONLY | sha1_file_open_flag);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\t\tif (version < 2 || version > 2) {",
          "content_same": false
        },
        {
          "line": 2000,
          "old_api": "write_in_full",
          "new_api": null,
          "old_text": "write_in_full(fd, buf, len)",
          "new_text": null,
          "old_line_content": "\tif (write_in_full(fd, buf, len) < 0)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(filename, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\t\tfd = open(filename, O_RDONLY);",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ent->data)",
          "new_text": null,
          "old_line_content": "\t\tfree(ent->data);",
          "new_line_content": "\tif (ent->data) {",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(index[i])",
          "new_text": null,
          "old_line_content": "\t\tuint32_t n = ntohl(index[i]);",
          "new_line_content": "\tfor (i = 0; i < 256; i++) {",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "xsize_t",
          "new_api": null,
          "old_text": "xsize_t(st.st_size)",
          "new_text": null,
          "old_line_content": "\t*size = xsize_t(st.st_size);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\t\tif (n < nr) {",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "pack_entry_hash",
          "new_api": null,
          "old_text": "pack_entry_hash(p, base_offset)",
          "new_text": null,
          "old_line_content": "\tunsigned long hash = pack_entry_hash(p, base_offset);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "release_delta_base_cache",
          "new_api": null,
          "old_text": "release_delta_base_cache(ent)",
          "new_text": null,
          "old_line_content": "\trelease_delta_base_cache(ent);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\twrite_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(idx_map, idx_size)",
          "new_text": null,
          "old_line_content": "\t\t\tmunmap(idx_map, idx_size);",
          "new_line_content": "\t\tif (idx_size != 4*256 + nr * 24 + 20 + 20) {",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "release_delta_base_cache",
          "new_api": null,
          "old_text": "release_delta_base_cache(f)",
          "new_text": null,
          "old_line_content": "\t\t\trelease_delta_base_cache(f);",
          "new_line_content": "\t\tif (f->type == OBJ_BLOB)",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "hashcpy",
          "new_api": null,
          "old_text": "hashcpy(returnsha1, sha1)",
          "new_text": null,
          "old_line_content": "\t\thashcpy(returnsha1, sha1);",
          "new_line_content": "\tif (returnsha1)",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(filename, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\tfd = open(filename, O_RDONLY);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "release_delta_base_cache",
          "new_api": null,
          "old_text": "release_delta_base_cache(f)",
          "new_text": null,
          "old_line_content": "\t\trelease_delta_base_cache(f);",
          "new_line_content": "\t\tstruct delta_base_cache_entry *f = (void *)lru;",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "new_line_content": "\tif (errno != ENOENT) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 125,
      "total_additions": 278,
      "total_deletions": 278,
      "total_api_changes": 681
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 681,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          380,
          381,
          383
        ]
      }
    },
    "api_calls_before": 487,
    "api_calls_after": 487,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 2,
      "total_diff_lines": 20
    }
  }
}
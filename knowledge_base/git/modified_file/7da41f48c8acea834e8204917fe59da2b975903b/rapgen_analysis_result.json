{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7da41f48c8acea834e8204917fe59da2b975903b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7da41f48c8acea834e8204917fe59da2b975903b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7da41f48c8acea834e8204917fe59da2b975903b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/7da41f48c8acea834e8204917fe59da2b975903b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 207,
          "old_api": "diff_queue",
          "new_api": "fill_filespec",
          "old_text": "diff_queue(NULL, one, two)",
          "new_text": "fill_filespec(two, dst->sha1, dst->mode)",
          "old_line_content": "\tdp = diff_queue(NULL, one, two);",
          "new_line_content": "\tfill_filespec(two, dst->sha1, dst->mode);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "strcmp",
          "new_api": "diff_queue",
          "old_text": "strcmp(src->path, dst->path)",
          "new_text": "diff_queue(NULL, one, two)",
          "old_line_content": "\tif (!strcmp(src->path, dst->path))",
          "new_line_content": "\tdp = diff_queue(NULL, one, two);",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "DIFF_PAIR_RENAME",
          "new_api": "strcmp",
          "old_text": "DIFF_PAIR_RENAME(p)",
          "new_text": "strcmp(one->path, p->two->path)",
          "old_line_content": "\t\tif (DIFF_PAIR_RENAME(p)) {",
          "new_line_content": "\t\tif (strcmp(one->path, p->two->path))",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "DIFF_FILE_VALID",
          "new_api": "locate_rename_dst",
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": "locate_rename_dst(p->two, 1)",
          "old_line_content": "\t\telse if (!DIFF_FILE_VALID(p->two)) {",
          "new_line_content": "\t\t\t\tlocate_rename_dst(p->two, 1);",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "record_rename_pair",
          "new_api": "is_exact_match",
          "old_text": "record_rename_pair(i, j, MAX_SCORE)",
          "new_text": "is_exact_match(one, two, contents_too)",
          "old_line_content": "\t\t\t\trecord_rename_pair(i, j, MAX_SCORE);",
          "new_line_content": "\t\t\t\tif (!is_exact_match(one, two, contents_too))",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "diff_q",
          "new_api": "locate_rename_dst",
          "old_text": "diff_q(&outq, dst->pair)",
          "new_text": "locate_rename_dst(p->two, 0)",
          "old_line_content": "\t\t\t\tdiff_q(&outq, dst->pair);",
          "new_line_content": "\t\t\t\tlocate_rename_dst(p->two, 0);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "DIFF_FILE_VALID",
          "new_api": "diff_q",
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\telse if (DIFF_FILE_VALID(p->one) && !DIFF_FILE_VALID(p->two)) {",
          "new_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "diff_unmodified_pair",
          "new_api": "diff_q",
          "old_text": "diff_unmodified_pair(p)",
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\telse if (!diff_unmodified_pair(p))",
          "new_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "diff_q",
          "new_api": "diff_unmodified_pair",
          "old_text": "diff_q(&outq, p)",
          "new_text": "diff_unmodified_pair(p)",
          "old_line_content": "\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\telse if (!diff_unmodified_pair(p))",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "diff_debug_queue",
          "new_api": "diff_free_filepair",
          "old_text": "diff_debug_queue(\"done copying original\", &outq)",
          "new_text": "diff_free_filepair(pair_to_free)",
          "old_line_content": "\tdiff_debug_queue(\"done copying original\", &outq);",
          "new_line_content": "\t\t\tdiff_free_filepair(pair_to_free);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "free",
          "new_api": "diff_debug_queue",
          "old_text": "free(q->queue)",
          "new_text": "diff_debug_queue(\"done copying original\", &outq)",
          "old_line_content": "\tfree(q->queue);",
          "new_line_content": "\tdiff_debug_queue(\"done copying original\", &outq);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "diff_debug_queue",
          "new_api": "free",
          "old_text": "diff_debug_queue(\"done collapsing\", q)",
          "new_text": "free(q->queue)",
          "old_line_content": "\tdiff_debug_queue(\"done collapsing\", q);",
          "new_line_content": "\tfree(q->queue);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 261,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->one)",
          "old_line_content": "\t\t\t\tcontinue; /* unmerged */",
          "new_line_content": "\t\tif (!DIFF_FILE_VALID(p->one)) {",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\telse if (options->single_follow &&",
          "new_line_content": "\t\t\tif (!DIFF_FILE_VALID(p->two))",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(options->single_follow, p->two->path)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\t strcmp(options->single_follow, p->two->path))",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "DIFF_PAIR_BROKEN",
          "old_text": null,
          "new_text": "DIFF_PAIR_BROKEN(p)",
          "old_line_content": "\t\t\t\tstruct diff_rename_dst *dst =",
          "new_line_content": "\t\t\tif (DIFF_PAIR_BROKEN(p)) {",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t * they did not really want to get broken,",
          "new_line_content": "\t\telse if (!DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "locate_rename_dst",
          "old_text": null,
          "new_text": "locate_rename_dst(p->one, 0)",
          "old_line_content": "\t\t\t\t\t/* counterpart is now rename/copy */",
          "new_line_content": "\t\t\t\t\tlocate_rename_dst(p->one, 0);",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "register_rename_src",
          "old_text": null,
          "new_text": "register_rename_src(p->one, stays, p->score)",
          "old_line_content": "\t\telse if (detect_rename == DIFF_DETECT_COPY)",
          "new_line_content": "\t\t\tregister_rename_src(p->one, stays, p->score);",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rename_dst[j].pair->\n\t\t\t\t\t\t   one->path,\n\t\t\t\t\t\t   p->one->path)",
          "old_line_content": "\t\t\t\t\t\t   p->one->path))",
          "new_line_content": "\t\t\t\t\tif (strcmp(rename_dst[j].pair->",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "register_rename_src",
          "old_text": null,
          "new_text": "register_rename_src(p->one, 1, p->score)",
          "old_line_content": "\tif (rename_dst_nr == 0 || rename_src_nr == 0 ||",
          "new_line_content": "\t\t\tregister_rename_src(p->one, 1, p->score);",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": null,
          "new_api": "S_ISREG",
          "old_text": null,
          "new_text": "S_ISREG(dst->mode)",
          "old_line_content": "",
          "new_line_content": "\tif (!S_ISREG(src->mode) || !S_ISREG(dst->mode))",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, p)",
          "old_line_content": "\t\t\t/* no need to keep unmodified pairs */",
          "new_line_content": "\t\t\tdiff_q(&outq, p);",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "diff_populate_filespec",
          "old_text": null,
          "new_text": "diff_populate_filespec(dst, 0)",
          "old_line_content": "",
          "new_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "record_rename_pair",
          "old_text": null,
          "new_text": "record_rename_pair(i, j, MAX_SCORE)",
          "old_line_content": "\t\t\t\tbreak; /* we are done with this entry */",
          "new_line_content": "\t\t\t\trecord_rename_pair(i, j, MAX_SCORE);",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "diffcore_count_changes",
          "old_text": null,
          "new_text": "diffcore_count_changes(src->data, src->size,\n\t\t\t\t   dst->data, dst->size,\n\t\t\t\t   &src->cnt_data, &dst->cnt_data,\n\t\t\t\t   delta_limit,\n\t\t\t\t   &src_copied, &literal_added)",
          "old_line_content": "\t\t\t\t   &src->cnt_data, &dst->cnt_data,",
          "new_line_content": "\tif (diffcore_count_changes(src->data, src->size,",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "diff_debug_queue",
          "old_text": null,
          "new_text": "diff_debug_queue(\"done collapsing\", q)",
          "old_line_content": "\t/* We need to see which rename source really stays here;",
          "new_line_content": "\tdiff_debug_queue(\"done collapsing\", q);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(*mx) * num_create * num_src)",
          "old_line_content": "\t\tint base = dst_cnt * num_src;",
          "new_line_content": "\tmx = xmalloc(sizeof(*mx) * num_create * num_src);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "DIFF_PAIR_RENAME",
          "old_text": null,
          "new_text": "DIFF_PAIR_RENAME(p)",
          "old_line_content": "\t\t\t * then mark p->source_stays = 0; otherwise",
          "new_line_content": "\t\tif (DIFF_PAIR_RENAME(p) && p->source_stays) {",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "compute_stays",
          "old_text": null,
          "new_text": "compute_stays(q, p->one)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tp->source_stays = compute_stays(q, p->one);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"internal error: dst already matched.\")",
          "old_line_content": "\tsrc = rename_src[src_index].one;",
          "new_line_content": "\t\tdie(\"internal error: dst already matched.\");",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "estimate_similarity",
          "old_text": null,
          "new_text": "estimate_similarity(one, two,\n\t\t\t\t\t\t       minimum_score)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tm->score = estimate_similarity(one, two,",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rename_dst[i].two)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(rename_dst[i].two);",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "alloc_filespec",
          "old_text": null,
          "new_text": "alloc_filespec(src->path)",
          "old_line_content": "",
          "new_line_content": "\tone = alloc_filespec(src->path);",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "fill_filespec",
          "old_text": null,
          "new_text": "fill_filespec(one, src->sha1, src->mode)",
          "old_line_content": "\tdst = rename_dst[dst_index].two;",
          "new_line_content": "\tfill_filespec(one, src->sha1, src->mode);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(two)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdiff_free_filespec_data(two);",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "alloc_filespec",
          "old_text": null,
          "new_text": "alloc_filespec(dst->path)",
          "old_line_content": "",
          "new_line_content": "\ttwo = alloc_filespec(dst->path);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "diff_free_filespec_data",
          "old_text": null,
          "new_text": "diff_free_filespec_data(rename_dst[i].two)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdiff_free_filespec_data(rename_dst[i].two);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rename_dst)",
          "old_line_content": "\trename_dst_nr = rename_dst_alloc = 0;",
          "new_line_content": "\tfree(rename_dst);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(mx, num_create * num_src, sizeof(*mx), score_compare)",
          "old_line_content": "\t\tstruct diff_rename_dst *dst = &rename_dst[mx[i].dst];",
          "new_line_content": "\tqsort(mx, num_create * num_src, sizeof(*mx), score_compare);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rename_src)",
          "old_line_content": "\trename_src_nr = rename_src_alloc = 0;",
          "new_line_content": "\tfree(rename_src);",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(src->path, dst->path)",
          "old_line_content": "\telse",
          "new_line_content": "\tif (!strcmp(src->path, dst->path))",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": null,
          "new_api": "record_rename_pair",
          "old_text": null,
          "new_text": "record_rename_pair(mx[i].dst, mx[i].src, mx[i].score)",
          "old_line_content": "\t}",
          "new_line_content": "\t\trecord_rename_pair(mx[i].dst, mx[i].src, mx[i].score);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(mx)",
          "old_line_content": " cleanup:",
          "new_line_content": "\tfree(mx);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t * Creation",
          "new_line_content": "\t\tif (!DIFF_FILE_VALID(p->one) && DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "DIFF_PAIR_RENAME",
          "old_text": null,
          "new_text": "DIFF_PAIR_RENAME(p)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (DIFF_PAIR_RENAME(p)) {",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": null,
          "new_api": "hashcmp",
          "old_text": null,
          "new_text": "hashcmp(src->sha1, dst->sha1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t    return !hashcmp(src->sha1, dst->sha1);",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": null,
          "new_api": "diff_populate_filespec",
          "old_text": null,
          "new_text": "diff_populate_filespec(dst, 0)",
          "old_line_content": "\tif (src->size == dst->size &&",
          "new_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "diff_q",
          "old_text": null,
          "new_text": "diff_q(&outq, dst->pair)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdiff_q(&outq, dst->pair);",
          "content_same": false
        },
        {
          "line": 117,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(src->data, dst->data, src->size)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t    !memcmp(src->data, dst->data, src->size))",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "DIFF_FILE_VALID",
          "old_text": null,
          "new_text": "DIFF_FILE_VALID(p->two)",
          "old_line_content": "\t\t\t * Deletion",
          "new_line_content": "\t\telse if (DIFF_FILE_VALID(p->one) && !DIFF_FILE_VALID(p->two)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 259,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->one)",
          "new_text": null,
          "old_line_content": "\t\tif (!DIFF_FILE_VALID(p->one)) {",
          "new_line_content": "\tfor (i = 0; i < q->nr; i++) {",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!DIFF_FILE_VALID(p->two))",
          "new_line_content": "\t\tstruct diff_filepair *p = q->queue[i];",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(options->single_follow, p->two->path)",
          "new_text": null,
          "old_line_content": "\t\t\t\t strcmp(options->single_follow, p->two->path))",
          "new_line_content": "\t\t\t\tcontinue; /* unmerged */",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "DIFF_PAIR_BROKEN",
          "new_api": null,
          "old_text": "DIFF_PAIR_BROKEN(p)",
          "new_text": null,
          "old_line_content": "\t\t\tif (DIFF_PAIR_BROKEN(p)) {",
          "new_line_content": "\t\t\t * begin with.",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->two, 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlocate_rename_dst(p->two, 1);",
          "new_line_content": "\t\t\t\tcontinue; /* not interested */",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->one, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tlocate_rename_dst(p->one, 0);",
          "new_line_content": "\t\t\t\t/* broken delete */",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "register_rename_src",
          "new_api": null,
          "old_text": "register_rename_src(p->one, stays, p->score)",
          "new_text": null,
          "old_line_content": "\t\t\tregister_rename_src(p->one, stays, p->score);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "register_rename_src",
          "new_api": null,
          "old_text": "register_rename_src(p->one, 1, p->score)",
          "new_text": null,
          "old_line_content": "\t\t\tregister_rename_src(p->one, 1, p->score);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rename_dst[j].pair->\n\t\t\t\t\t\t   one->path,\n\t\t\t\t\t\t   p->one->path)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (strcmp(rename_dst[j].pair->",
          "new_line_content": "\t\t\t\t\tif (!rename_dst[j].pair)",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": "S_ISREG",
          "new_api": null,
          "old_text": "S_ISREG(dst->mode)",
          "new_text": null,
          "old_line_content": "\tif (!S_ISREG(src->mode) || !S_ISREG(dst->mode))",
          "new_line_content": "\t * after renaming.",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t\t;",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "is_exact_match",
          "new_api": null,
          "old_text": "is_exact_match(one, two, contents_too)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!is_exact_match(one, two, contents_too))",
          "new_line_content": "\t\t\tfor (j = 0; j < rename_src_nr; j++) {",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "diff_populate_filespec",
          "new_api": null,
          "old_text": "diff_populate_filespec(dst, 0)",
          "new_text": null,
          "old_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "diff_free_filepair",
          "new_api": null,
          "old_text": "diff_free_filepair(pair_to_free)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_free_filepair(pair_to_free);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "diffcore_count_changes",
          "new_api": null,
          "old_text": "diffcore_count_changes(src->data, src->size,\n\t\t\t\t   dst->data, dst->size,\n\t\t\t\t   &src->cnt_data, &dst->cnt_data,\n\t\t\t\t   delta_limit,\n\t\t\t\t   &src_copied, &literal_added)",
          "new_text": null,
          "old_line_content": "\tif (diffcore_count_changes(src->data, src->size,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(*mx) * num_create * num_src)",
          "new_text": null,
          "old_line_content": "\tmx = xmalloc(sizeof(*mx) * num_create * num_src);",
          "new_line_content": "\tnum_create = (rename_dst_nr - rename_count);",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "DIFF_PAIR_RENAME",
          "new_api": null,
          "old_text": "DIFF_PAIR_RENAME(p)",
          "new_text": null,
          "old_line_content": "\t\tif (DIFF_PAIR_RENAME(p) && p->source_stays) {",
          "new_line_content": "\tfor (i = 0; i < q->nr; i++) {",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "compute_stays",
          "new_api": null,
          "old_text": "compute_stays(q, p->one)",
          "new_text": null,
          "old_line_content": "\t\t\tp->source_stays = compute_stays(q, p->one);",
          "new_line_content": "\t\t\t * leave it as is.",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"internal error: dst already matched.\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"internal error: dst already matched.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "estimate_similarity",
          "new_api": null,
          "old_text": "estimate_similarity(one, two,\n\t\t\t\t\t\t       minimum_score)",
          "new_text": null,
          "old_line_content": "\t\t\tm->score = estimate_similarity(one, two,",
          "new_line_content": "\t\t\tm->src = j;",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "alloc_filespec",
          "new_api": null,
          "old_text": "alloc_filespec(src->path)",
          "new_text": null,
          "old_line_content": "\tone = alloc_filespec(src->path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "fill_filespec",
          "new_api": null,
          "old_text": "fill_filespec(one, src->sha1, src->mode)",
          "new_text": null,
          "old_line_content": "\tfill_filespec(one, src->sha1, src->mode);",
          "new_line_content": "\tsrc = rename_src[src_index].one;",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "diff_free_filespec_data",
          "new_api": null,
          "old_text": "diff_free_filespec_data(rename_dst[i].two)",
          "new_text": null,
          "old_line_content": "\t\tdiff_free_filespec_data(rename_dst[i].two);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "diff_free_filespec_data",
          "new_api": null,
          "old_text": "diff_free_filespec_data(two)",
          "new_text": null,
          "old_line_content": "\t\tdiff_free_filespec_data(two);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "alloc_filespec",
          "new_api": null,
          "old_text": "alloc_filespec(dst->path)",
          "new_text": null,
          "old_line_content": "\ttwo = alloc_filespec(dst->path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "fill_filespec",
          "new_api": null,
          "old_text": "fill_filespec(two, dst->sha1, dst->mode)",
          "new_text": null,
          "old_line_content": "\tfill_filespec(two, dst->sha1, dst->mode);",
          "new_line_content": "\tdst = rename_dst[dst_index].two;",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(rename_dst)",
          "new_text": null,
          "old_line_content": "\tfree(rename_dst);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(mx, num_create * num_src, sizeof(*mx), score_compare)",
          "new_text": null,
          "old_line_content": "\tqsort(mx, num_create * num_src, sizeof(*mx), score_compare);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(rename_src)",
          "new_text": null,
          "old_line_content": "\tfree(rename_src);",
          "new_line_content": "\trename_dst = NULL;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(rename_dst[i].two)",
          "new_text": null,
          "old_line_content": "\t\tfree(rename_dst[i].two);",
          "new_line_content": "\tfor (i = 0; i < rename_dst_nr; i++) {",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "record_rename_pair",
          "new_api": null,
          "old_text": "record_rename_pair(mx[i].dst, mx[i].src, mx[i].score)",
          "new_text": null,
          "old_line_content": "\t\trecord_rename_pair(mx[i].dst, mx[i].src, mx[i].score);",
          "new_line_content": "\t\tif (mx[i].score < minimum_score)",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(mx)",
          "new_text": null,
          "old_line_content": "\tfree(mx);",
          "new_line_content": "\t\trename_count++;",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "DIFF_FILE_VALID",
          "new_api": null,
          "old_text": "DIFF_FILE_VALID(p->two)",
          "new_text": null,
          "old_line_content": "\t\tif (!DIFF_FILE_VALID(p->one) && DIFF_FILE_VALID(p->two)) {",
          "new_line_content": "\t\tstruct diff_filepair *pair_to_free = NULL;",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(one->path, p->two->path)",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(one->path, p->two->path))",
          "new_line_content": "\tfor (i = 0; i < q->nr; i++) {",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "locate_rename_dst",
          "new_api": null,
          "old_text": "locate_rename_dst(p->two, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlocate_rename_dst(p->two, 0);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": "diff_populate_filespec",
          "new_api": null,
          "old_text": "diff_populate_filespec(dst, 0)",
          "new_text": null,
          "old_line_content": "\tif (diff_populate_filespec(src, 0) || diff_populate_filespec(dst, 0))",
          "new_line_content": "\tif (src->sha1_valid && dst->sha1_valid)",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(src->data, dst->data, src->size)",
          "new_text": null,
          "old_line_content": "\t    !memcmp(src->data, dst->data, src->size))",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "diff_q",
          "new_api": null,
          "old_text": "diff_q(&outq, p)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_q(&outq, p);",
          "new_line_content": "\t\t\t\t * record this as a creation.",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 12,
      "total_additions": 39,
      "total_deletions": 38,
      "total_api_changes": 89
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 89,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 68,
    "api_calls_after": 69,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}
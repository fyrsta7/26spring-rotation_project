diff --git a/fetch-pack.c b/fetch-pack.c
index fbbc99c888..eb553cb631 100644
--- a/fetch-pack.c
+++ b/fetch-pack.c
@@ -715,7 +715,8 @@ static int everything_local(struct fetch_pack_args *args,
 	for (ref = *refs; ref; ref = ref->next) {
 		struct object *o;
 
-		if (!has_object_file(&ref->old_oid))
+		if (!has_object_file_with_flags(&ref->old_oid,
+						OBJECT_INFO_QUICK))
 			continue;
 
 		o = parse_object(&ref->old_oid);

{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fb62eb7fab97cea880ea7fe4f341a4dfad14ab48",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fb62eb7fab97cea880ea7fe4f341a4dfad14ab48/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fb62eb7fab97cea880ea7fe4f341a4dfad14ab48/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/fb62eb7fab97cea880ea7fe4f341a4dfad14ab48/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 376,
          "old_api": "match_expr_eval",
          "new_api": "match_one_pattern",
          "old_text": "match_expr_eval(o, x->u.unary, bol, eol, ctx, 0)",
          "new_text": "match_one_pattern(o, x->u.atom, bol, eol, ctx)",
          "old_line_content": "\t\th = !match_expr_eval(o, x->u.unary, bol, eol, ctx, 0);",
          "new_line_content": "\t\th = match_one_pattern(o, x->u.atom, bol, eol, ctx);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "die",
          "new_api": "match_expr_eval",
          "old_text": "die(\"Unexpected node type (internal error) %d\", x->node)",
          "new_text": "match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 1)",
          "old_line_content": "\t\tdie(\"Unexpected node type (internal error) %d\", x->node);",
          "new_line_content": "\t\th |= match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 1);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "show_line",
          "new_api": "fputs",
          "old_text": "show_line(opt, pcl->bol, pcl->eol,\n\t\t\t\t\t\t  name, from, '-')",
          "new_text": "fputs(hunk_mark, stdout)",
          "old_line_content": "\t\t\t\t\tshow_line(opt, pcl->bol, pcl->eol,",
          "new_line_content": "\t\t\t\t\tfputs(hunk_mark, stdout);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "chk_hit_marker",
          "new_api": "clr_hit_marker",
          "old_text": "chk_hit_marker(opt->pattern_expression)",
          "new_text": "clr_hit_marker(opt->pattern_expression)",
          "old_line_content": "\tif (!chk_hit_marker(opt->pattern_expression))",
          "new_line_content": "\tclr_hit_marker(opt->pattern_expression);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "grep_buffer_1",
          "new_api": "chk_hit_marker",
          "old_text": "grep_buffer_1(opt, name, buf, size, 0)",
          "new_text": "chk_hit_marker(opt->pattern_expression)",
          "old_line_content": "\treturn grep_buffer_1(opt, name, buf, size, 0);",
          "new_line_content": "\tif (!chk_hit_marker(opt->pattern_expression))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 387,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0)",
          "old_line_content": "\tcase GREP_NODE_OR:",
          "new_line_content": "\t\th = match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 0)",
          "old_line_content": "\t\tif (!collect_hits)",
          "new_line_content": "\t\th &= match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 0);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.left,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "old_line_content": "\t\t\t\t\t\tbol, eol, ctx, 0));",
          "new_line_content": "\t\t\treturn (match_expr_eval(o, x->u.binary.left,",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.right,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "old_line_content": "\t\tx->u.binary.left->hit |= h;",
          "new_line_content": "\t\t\t\tmatch_expr_eval(o, x->u.binary.right,",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "show_line",
          "old_text": null,
          "new_text": "show_line(opt, pcl->bol, pcl->eol,\n\t\t\t\t\t\t  name, from, '-')",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tshow_line(opt, pcl->bol, pcl->eol,",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\th = match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"Unexpected node type (internal error) %d\", x->node)",
          "old_line_content": "\t\tx->hit |= h;",
          "new_line_content": "\t\tdie(\"Unexpected node type (internal error) %d\", x->node);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(hunk_mark, stdout)",
          "old_line_content": "\t\t\tlast_shown = last_hit = lno;",
          "new_line_content": "\t\t\t\tfputs(hunk_mark, stdout);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "show_line",
          "old_text": null,
          "new_text": "show_line(opt, bol, eol, name, lno, ':')",
          "old_line_content": "\t\telse if (last_hit &&",
          "new_line_content": "\t\t\t\tshow_line(opt, bol, eol, name, lno, ':');",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(opt, x, bol, eol, ctx, collect_hits)",
          "old_line_content": "static int match_line(struct grep_opt *opt, char *bol, char *eol,",
          "new_line_content": "\treturn match_expr_eval(opt, x, bol, eol, ctx, collect_hits);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "fputs",
          "old_text": null,
          "new_text": "fputs(hunk_mark, stdout)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tfputs(hunk_mark, stdout);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "show_line",
          "old_text": null,
          "new_text": "show_line(opt, bol, eol, name, lno, '-')",
          "old_line_content": "\t\tif (opt->pre_context) {",
          "new_line_content": "\t\t\tshow_line(opt, bol, eol, name, lno, '-');",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(prev+1, prev,\n\t\t\t\t(opt->pre_context-1) * sizeof(*prev))",
          "old_line_content": "\t\t\tprev->eol = eol;",
          "new_line_content": "\t\t\tmemmove(prev+1, prev,",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "match_expr",
          "old_text": null,
          "new_text": "match_expr(opt, bol, eol, ctx, collect_hits)",
          "old_line_content": "\tfor (p = opt->pattern_list; p; p = p->next) {",
          "new_line_content": "\t\treturn match_expr(opt, bol, eol, ctx, collect_hits);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "match_one_pattern",
          "old_text": null,
          "new_text": "match_one_pattern(opt, p, bol, eol, ctx)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tif (match_one_pattern(opt, p, bol, eol, ctx))",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(prev)",
          "old_line_content": "",
          "new_line_content": "\tfree(prev);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": "ARRAY_SIZE",
          "old_text": null,
          "new_text": "ARRAY_SIZE(header_field)",
          "old_line_content": "\t\tsize_t len;",
          "new_line_content": "\t\tassert(p->field < ARRAY_SIZE(header_field));",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(bol, field, len)",
          "old_line_content": "\t\tlen = header_field[p->field].len;",
          "new_line_content": "\t\tif (strncmp(bol, field, len))",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "show_name",
          "old_text": null,
          "new_text": "show_name(opt, name)",
          "old_line_content": "",
          "new_line_content": "\t\tshow_name(opt, name);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "strip_timestamp",
          "old_text": null,
          "new_text": "strip_timestamp(bol, &eol)",
          "old_line_content": "\t\tbol += len;",
          "new_line_content": "\t\tsaved_ch = strip_timestamp(bol, &eol);",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "ARRAY_SIZE",
          "old_text": null,
          "new_text": "ARRAY_SIZE(pmatch)",
          "old_line_content": "\t\tregex_t *exp = &p->regexp;",
          "new_line_content": "\t\thit = !regexec(exp, bol, ARRAY_SIZE(pmatch),",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "buffer_is_binary",
          "old_text": null,
          "new_text": "buffer_is_binary(buf, size)",
          "old_line_content": "\t\t\tbinary_match_only = 1;",
          "new_line_content": "\tif (buffer_is_binary(buf, size)) {",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s%c%u\\n\", name,\n\t\t       opt->null_following_name ? '\\0' : ':', count)",
          "old_line_content": "}",
          "new_line_content": "\t\tprintf(\"%s%c%u\\n\", name,",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "fixmatch",
          "old_text": null,
          "new_text": "fixmatch(p->pattern, bol, pmatch)",
          "old_line_content": "\telse {",
          "new_line_content": "\t\thit = !fixmatch(p->pattern, bol, pmatch);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"regexp returned nonsense\")",
          "old_line_content": "\t\t    (eol - bol) < pmatch[0].rm_eo)",
          "new_line_content": "\t\t\tdie(\"regexp returned nonsense\");",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(opt->pre_context, sizeof(*prev))",
          "old_line_content": "",
          "new_line_content": "\t\tprev = xcalloc(opt->pre_context, sizeof(*prev));",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "word_char",
          "old_text": null,
          "new_text": "word_char(bol[pmatch[0].rm_so-1])",
          "old_line_content": "\t\tif ( ((pmatch[0].rm_so == 0 && at_true_bol) ||",
          "new_line_content": "\t\t      !word_char(bol[pmatch[0].rm_so-1])) &&",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "end_of_line",
          "old_text": null,
          "new_text": "end_of_line(bol, &left)",
          "old_line_content": "",
          "new_line_content": "\t\teol = end_of_line(bol, &left);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "word_char",
          "old_text": null,
          "new_text": "word_char(bol[pmatch[0].rm_eo])",
          "old_line_content": "\t\t     ((pmatch[0].rm_eo == (eol-bol)) ||",
          "new_line_content": "\t\t      !word_char(bol[pmatch[0].rm_eo])) )",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "match_line",
          "old_text": null,
          "new_text": "match_line(opt, bol, eol, ctx, collect_hits)",
          "old_line_content": "\t\tif (collect_hits)",
          "new_line_content": "\t\thit = match_line(opt, bol, eol, ctx, collect_hits);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "word_char",
          "old_text": null,
          "new_text": "word_char(bol[-1])",
          "old_line_content": "\t\t\tgoto again;",
          "new_line_content": "\t\t\twhile (word_char(bol[-1]) && bol < eol)",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "grep_buffer_1",
          "old_text": null,
          "new_text": "grep_buffer_1(opt, name, buf, size, 0)",
          "old_line_content": "\t * We first clear hit markers from them.",
          "new_line_content": "\t\treturn grep_buffer_1(opt, name, buf, size, 0);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "grep_buffer_1",
          "old_text": null,
          "new_text": "grep_buffer_1(opt, name, buf, size, 1)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\tgrep_buffer_1(opt, name, buf, size, 1);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Binary file %s matches\\n\", name)",
          "old_line_content": "\t\t\tif (opt->name_only) {",
          "new_line_content": "\t\t\t\tprintf(\"Binary file %s matches\\n\", name);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "grep_buffer_1",
          "old_text": null,
          "new_text": "grep_buffer_1(opt, name, buf, size, 0)",
          "old_line_content": "",
          "new_line_content": "\treturn grep_buffer_1(opt, name, buf, size, 0);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "show_name",
          "old_text": null,
          "new_text": "show_name(opt, name)",
          "old_line_content": "\t\t\t/* Hit at this line.  If we haven't shown the",
          "new_line_content": "\t\t\t\tshow_name(opt, name);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.unary, bol, eol, ctx, 0)",
          "old_line_content": "\t\tif (!collect_hits)",
          "new_line_content": "\t\th = !match_expr_eval(o, x->u.unary, bol, eol, ctx, 0);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "match_expr_eval",
          "old_text": null,
          "new_text": "match_expr_eval(o, x->u.binary.left,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "old_line_content": "\t\t\t\t\t\tbol, eol, ctx, 0));",
          "new_line_content": "\t\t\treturn (match_expr_eval(o, x->u.binary.left,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\th = match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0);",
          "new_line_content": "\t\t\t\t\t\tbol, eol, ctx, 0) &&",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "fputs",
          "new_api": null,
          "old_text": "fputs(hunk_mark, stdout)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfputs(hunk_mark, stdout);",
          "new_line_content": "\t\t\t\tif (from <= last_shown)",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.left,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\t\treturn (match_expr_eval(o, x->u.binary.left,",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.right,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmatch_expr_eval(o, x->u.binary.right,",
          "new_line_content": "\t\tif (!collect_hits)",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\th = match_expr_eval(o, x->u.binary.left, bol, eol, ctx, 0);",
          "new_line_content": "\t\t\t\t\t\tbol, eol, ctx, 0) ||",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 1)",
          "new_text": null,
          "old_line_content": "\t\th |= match_expr_eval(o, x->u.binary.right, bol, eol, ctx, 1);",
          "new_line_content": "\t\t\t\t\t\tbol, eol, ctx, 0));",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "fputs",
          "new_api": null,
          "old_text": "fputs(hunk_mark, stdout)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfputs(hunk_mark, stdout);",
          "new_line_content": "\t\t\t\tlast_shown = lno-1;",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "show_line",
          "new_api": null,
          "old_text": "show_line(opt, bol, eol, name, lno, ':')",
          "new_text": null,
          "old_line_content": "\t\t\t\tshow_line(opt, bol, eol, name, lno, ':');",
          "new_line_content": "\t\t\tif (last_shown && lno != last_shown + 1)",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(opt, x, bol, eol, ctx, collect_hits)",
          "new_text": null,
          "old_line_content": "\treturn match_expr_eval(opt, x, bol, eol, ctx, collect_hits);",
          "new_line_content": "\t\t      enum grep_context ctx, int collect_hits)",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "fputs",
          "new_api": null,
          "old_text": "fputs(hunk_mark, stdout)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfputs(hunk_mark, stdout);",
          "new_line_content": "\t\t\t * we need to show this line.",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "show_line",
          "new_api": null,
          "old_text": "show_line(opt, bol, eol, name, lno, '-')",
          "new_text": null,
          "old_line_content": "\t\t\tshow_line(opt, bol, eol, name, lno, '-');",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(prev+1, prev,\n\t\t\t\t(opt->pre_context-1) * sizeof(*prev))",
          "new_text": null,
          "old_line_content": "\t\t\tmemmove(prev+1, prev,",
          "new_line_content": "\t\t\tlast_shown = lno;",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "match_expr",
          "new_api": null,
          "old_text": "match_expr(opt, bol, eol, ctx, collect_hits)",
          "new_text": null,
          "old_line_content": "\t\treturn match_expr(opt, bol, eol, ctx, collect_hits);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "match_one_pattern",
          "new_api": null,
          "old_text": "match_one_pattern(opt, p, bol, eol, ctx)",
          "new_text": null,
          "old_line_content": "\t\tif (match_one_pattern(opt, p, bol, eol, ctx))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(prev)",
          "new_text": null,
          "old_line_content": "\tfree(prev);",
          "new_line_content": "\t\tlno++;",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "ARRAY_SIZE",
          "new_api": null,
          "old_text": "ARRAY_SIZE(header_field)",
          "new_text": null,
          "old_line_content": "\t\tassert(p->field < ARRAY_SIZE(header_field));",
          "new_line_content": "\t\tfield = header_field[p->field].field;",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "show_name",
          "new_api": null,
          "old_text": "show_name(opt, name)",
          "new_text": null,
          "old_line_content": "\t\tshow_name(opt, name);",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(bol, field, len)",
          "new_text": null,
          "old_line_content": "\t\tif (strncmp(bol, field, len))",
          "new_line_content": "\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "strip_timestamp",
          "new_api": null,
          "old_text": "strip_timestamp(bol, &eol)",
          "new_text": null,
          "old_line_content": "\t\tsaved_ch = strip_timestamp(bol, &eol);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "buffer_is_binary",
          "new_api": null,
          "old_text": "buffer_is_binary(buf, size)",
          "new_text": null,
          "old_line_content": "\tif (buffer_is_binary(buf, size)) {",
          "new_line_content": "\tunsigned count = 0;",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s%c%u\\n\", name,\n\t\t       opt->null_following_name ? '\\0' : ':', count)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s%c%u\\n\", name,",
          "new_line_content": "\t * make it another option?  For now suppress them.",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "ARRAY_SIZE",
          "new_api": null,
          "old_text": "ARRAY_SIZE(pmatch)",
          "new_text": null,
          "old_line_content": "\t\thit = !regexec(exp, bol, ARRAY_SIZE(pmatch),",
          "new_line_content": "\t\t\t       pmatch, 0);",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "fixmatch",
          "new_api": null,
          "old_text": "fixmatch(p->pattern, bol, pmatch)",
          "new_text": null,
          "old_line_content": "\t\thit = !fixmatch(p->pattern, bol, pmatch);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(opt->pre_context, sizeof(*prev))",
          "new_text": null,
          "old_line_content": "\t\tprev = xcalloc(opt->pre_context, sizeof(*prev));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"regexp returned nonsense\")",
          "new_text": null,
          "old_line_content": "\t\t\tdie(\"regexp returned nonsense\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "end_of_line",
          "new_api": null,
          "old_text": "end_of_line(bol, &left)",
          "new_text": null,
          "old_line_content": "\t\teol = end_of_line(bol, &left);",
          "new_line_content": "\t\tchar *eol, ch;",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "word_char",
          "new_api": null,
          "old_text": "word_char(bol[pmatch[0].rm_so-1])",
          "new_text": null,
          "old_line_content": "\t\t      !word_char(bol[pmatch[0].rm_so-1])) &&",
          "new_line_content": "\t\t     ((pmatch[0].rm_eo == (eol-bol)) ||",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "word_char",
          "new_api": null,
          "old_text": "word_char(bol[pmatch[0].rm_eo])",
          "new_text": null,
          "old_line_content": "\t\t      !word_char(bol[pmatch[0].rm_eo])) )",
          "new_line_content": "\t\t\t;",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "match_line",
          "new_api": null,
          "old_text": "match_line(opt, bol, eol, ctx, collect_hits)",
          "new_text": null,
          "old_line_content": "\t\thit = match_line(opt, bol, eol, ctx, collect_hits);",
          "new_line_content": "\t\tif ((ctx == GREP_CONTEXT_HEAD) && (eol == bol))",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "grep_buffer_1",
          "new_api": null,
          "old_text": "grep_buffer_1(opt, name, buf, size, 0)",
          "new_text": null,
          "old_line_content": "\t\treturn grep_buffer_1(opt, name, buf, size, 0);",
          "new_line_content": "\t * buffer-wide \"all-match\".",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "clr_hit_marker",
          "new_api": null,
          "old_text": "clr_hit_marker(opt->pattern_expression)",
          "new_text": null,
          "old_line_content": "\tclr_hit_marker(opt->pattern_expression);",
          "new_line_content": "\t/* Otherwise the toplevel \"or\" terms hit a bit differently.",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "grep_buffer_1",
          "new_api": null,
          "old_text": "grep_buffer_1(opt, name, buf, size, 1)",
          "new_text": null,
          "old_line_content": "\tgrep_buffer_1(opt, name, buf, size, 1);",
          "new_line_content": "\t * We first clear hit markers from them.",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Binary file %s matches\\n\", name)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprintf(\"Binary file %s matches\\n\", name);",
          "new_line_content": "\t\t\tif (opt->status_only)",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "show_name",
          "new_api": null,
          "old_text": "show_name(opt, name)",
          "new_text": null,
          "old_line_content": "\t\t\t\tshow_name(opt, name);",
          "new_line_content": "\t\t\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "match_one_pattern",
          "new_api": null,
          "old_text": "match_one_pattern(o, x->u.atom, bol, eol, ctx)",
          "new_text": null,
          "old_line_content": "\t\th = match_one_pattern(o, x->u.atom, bol, eol, ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.left,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\t\treturn (match_expr_eval(o, x->u.binary.left,",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "match_expr_eval",
          "new_api": null,
          "old_text": "match_expr_eval(o, x->u.binary.right,\n\t\t\t\t\t\tbol, eol, ctx, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmatch_expr_eval(o, x->u.binary.right,",
          "new_line_content": "\t\tif (!collect_hits)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 5,
      "total_additions": 38,
      "total_deletions": 37,
      "total_api_changes": 80
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 80,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          352,
          354,
          356,
          357,
          358,
          297,
          339,
          351
        ]
      }
    },
    "api_calls_before": 88,
    "api_calls_after": 89,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 4,
      "total_diff_lines": 39
    }
  }
}
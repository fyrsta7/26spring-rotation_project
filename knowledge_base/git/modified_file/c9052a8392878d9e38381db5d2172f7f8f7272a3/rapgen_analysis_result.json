{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c9052a8392878d9e38381db5d2172f7f8f7272a3",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c9052a8392878d9e38381db5d2172f7f8f7272a3/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c9052a8392878d9e38381db5d2172f7f8f7272a3/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/c9052a8392878d9e38381db5d2172f7f8f7272a3/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 126,
          "old_api": "combine_diff_path_size",
          "new_api": "ce_namelen",
          "old_text": "combine_diff_path_size(5, path_len)",
          "new_text": "ce_namelen(ce)",
          "old_line_content": "\t\t\tdpath = xmalloc(combine_diff_path_size(5, path_len));",
          "new_line_content": "\t\t\tpath_len = ce_namelen(ce);",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "oidclr",
          "new_api": "memcpy",
          "old_text": "oidclr(&dpath->oid)",
          "new_text": "memcpy(dpath->path, ce->name, path_len)",
          "old_line_content": "\t\t\toidclr(&dpath->oid);",
          "new_line_content": "\t\t\tmemcpy(dpath->path, ce->name, path_len);",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "ce_mode_from_stat",
          "new_api": "check_removed",
          "old_text": "ce_mode_from_stat(ce, st.st_mode)",
          "new_text": "check_removed(ce, &st)",
          "old_line_content": "\t\t\t\twt_mode = ce_mode_from_stat(ce, st.st_mode);",
          "new_line_content": "\t\t\tchanged = check_removed(ce, &st);",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "ce_mode_from_stat",
          "new_api": "oidcpy",
          "old_text": "ce_mode_from_stat(nce, mode)",
          "new_text": "oidcpy(&dpath->parent[stage - 2].oid,\n\t\t\t\t\t       &nce->oid)",
          "old_line_content": "\t\t\t\t\tdpath->parent[stage-2].mode = ce_mode_from_stat(nce, mode);",
          "new_line_content": "\t\t\t\t\toidcpy(&dpath->parent[stage - 2].oid,",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "diff_addremove",
          "new_api": "perror",
          "old_text": "diff_addremove(&revs->diffopt, '+', newmode,\n\t\t\t\t\t       &null_oid, 0, ce->name, 0)",
          "new_text": "perror(ce->name)",
          "old_line_content": "\t\t\t\tdiff_addremove(&revs->diffopt, '+', newmode,",
          "new_line_content": "\t\t\t\t\tperror(ce->name);",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": "match_stat_with_submodule",
          "new_api": "is_null_oid",
          "old_text": "match_stat_with_submodule(&revs->diffopt, ce, &st,\n\t\t\t\t\t\t\t    ce_option, &dirty_submodule)",
          "new_text": "is_null_oid(&ce->oid)",
          "old_line_content": "\t\t\tchanged = match_stat_with_submodule(&revs->diffopt, ce, &st,",
          "new_line_content": "\t\t\t\t\t       !is_null_oid(&ce->oid),",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "ce_mark_uptodate",
          "new_api": "diff_addremove",
          "old_text": "ce_mark_uptodate(ce)",
          "new_text": "diff_addremove(&revs->diffopt, '+', newmode,\n\t\t\t\t\t       &null_oid, 0, ce->name, 0)",
          "old_line_content": "\t\t\tce_mark_uptodate(ce);",
          "new_line_content": "\t\t\t\tdiff_addremove(&revs->diffopt, '+', newmode,",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": "is_null_oid",
          "new_api": "ce_mark_uptodate",
          "old_text": "is_null_oid(new_oid)",
          "new_text": "ce_mark_uptodate(ce)",
          "old_line_content": "\t\t\t    !is_null_oid(new_oid),",
          "new_line_content": "\t\t\tce_mark_uptodate(ce);",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "match_stat_with_submodule",
          "new_api": "check_removed",
          "old_text": "match_stat_with_submodule(diffopt, ce, &st,\n\t\t\t\t\t\t    0, dirty_submodule)",
          "new_text": "check_removed(ce, &st)",
          "old_line_content": "\t\tchanged = match_stat_with_submodule(diffopt, ce, &st,",
          "new_line_content": "\t\tchanged = check_removed(ce, &st);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "combine_diff_path_size",
          "new_api": "diff_index_show_file",
          "old_text": "combine_diff_path_size(2, pathlen)",
          "new_text": "diff_index_show_file(revs, \"-\", old_entry,\n\t\t\t\t\t     &old_entry->oid, 1, old_entry->ce_mode,\n\t\t\t\t\t     0)",
          "old_line_content": "\t\tp = xmalloc(combine_diff_path_size(2, pathlen));",
          "new_line_content": "\t\t\tdiff_index_show_file(revs, \"-\", old_entry,",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "memset",
          "new_api": "oideq",
          "old_text": "memset(p->parent, 0, 2 * sizeof(struct combine_diff_parent))",
          "new_text": "oideq(&old_entry->oid, &new_entry->oid)",
          "old_line_content": "\t\tmemset(p->parent, 0, 2 * sizeof(struct combine_diff_parent));",
          "new_line_content": "\t    (!oideq(oid, &old_entry->oid) || !oideq(&old_entry->oid, &new_entry->oid))) {",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "show_combined_diff",
          "new_api": "memcpy",
          "old_text": "show_combined_diff(p, 2, revs)",
          "new_text": "memcpy(p->path, new_entry->name, pathlen)",
          "old_line_content": "\t\tshow_combined_diff(p, 2, revs);",
          "new_line_content": "\t\tmemcpy(p->path, new_entry->name, pathlen);",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "diff_change",
          "new_api": "oidcpy",
          "old_text": "diff_change(&revs->diffopt, oldmode, mode,\n\t\t    &old_entry->oid, oid, 1, !is_null_oid(oid),\n\t\t    old_entry->name, 0, dirty_submodule)",
          "new_text": "oidcpy(&p->parent[1].oid, &old_entry->oid)",
          "old_line_content": "\tdiff_change(&revs->diffopt, oldmode, mode,",
          "new_line_content": "\t\toidcpy(&p->parent[1].oid, &old_entry->oid);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "is_null_oid",
          "new_api": "show_combined_diff",
          "old_text": "is_null_oid(oid)",
          "new_text": "show_combined_diff(p, 2, revs)",
          "old_line_content": "\t\t    &old_entry->oid, oid, 1, !is_null_oid(oid),",
          "new_line_content": "\t\tshow_combined_diff(p, 2, revs);",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "show_new_file",
          "new_api": "diff_unmerge",
          "old_text": "show_new_file(revs, idx, cached, match_missing)",
          "new_text": "diff_unmerge(&revs->diffopt, idx->name)",
          "old_line_content": "\t\tshow_new_file(revs, idx, cached, match_missing);",
          "new_line_content": "\t\tpair = diff_unmerge(&revs->diffopt, idx->name);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "trace_performance_enter",
          "new_api": "init_tree_desc",
          "old_text": "trace_performance_enter()",
          "new_text": "init_tree_desc(&t, tree->buffer, tree->size)",
          "old_line_content": "\ttrace_performance_enter();",
          "new_line_content": "\tinit_tree_desc(&t, tree->buffer, tree->size);",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "trace_performance_leave",
          "new_api": "BUG",
          "old_text": "trace_performance_leave(\"diff-index\")",
          "new_text": "BUG(\"run_diff_index must be passed exactly one tree\")",
          "old_line_content": "\ttrace_performance_leave(\"diff-index\");",
          "new_line_content": "\t\tBUG(\"run_diff_index must be passed exactly one tree\");",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "repo_init_revisions",
          "new_api": "diffcore_fix_diff_index",
          "old_text": "repo_init_revisions(opt->repo, &revs, NULL)",
          "new_text": "diffcore_fix_diff_index()",
          "old_line_content": "\trepo_init_revisions(opt->repo, &revs, NULL);",
          "new_line_content": "\tdiffcore_fix_diff_index();",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "copy_pathspec",
          "new_api": "diffcore_std",
          "old_text": "copy_pathspec(&revs.prune_data, &opt->pathspec)",
          "new_text": "diffcore_std(&revs->diffopt)",
          "old_line_content": "\tcopy_pathspec(&revs.prune_data, &opt->pathspec);",
          "new_line_content": "\tdiffcore_std(&revs->diffopt);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "repo_init_revisions",
          "new_api": "exit",
          "old_text": "repo_init_revisions(r, &rev, NULL)",
          "new_text": "exit(128)",
          "old_line_content": "\trepo_init_revisions(r, &rev, NULL);",
          "new_line_content": "\t\texit(128);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "strbuf_release",
          "new_api": "memcpy",
          "old_text": "strbuf_release(&prefix)",
          "new_text": "memcpy(&opts, diffopt, sizeof(opts))",
          "old_line_content": "\tstrbuf_release(&prefix);",
          "new_line_content": "\tmemcpy(&opts, diffopt, sizeof(opts));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 521,
          "old_api": null,
          "new_api": "unpack_trees",
          "old_text": null,
          "new_text": "unpack_trees(1, &t, &opts)",
          "old_line_content": "\tent = revs->pending.objects;",
          "new_line_content": "\treturn unpack_trees(1, &t, &opts);",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "trace_performance_enter",
          "old_text": null,
          "new_text": "trace_performance_enter()",
          "old_line_content": "}",
          "new_line_content": "\ttrace_performance_enter();",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "diff_cache",
          "old_text": null,
          "new_text": "diff_cache(revs, &ent->item->oid, ent->name, cached)",
          "old_line_content": "int do_diff_cache(const struct object_id *tree_oid, struct diff_options *opt)",
          "new_line_content": "\tif (diff_cache(revs, &ent->item->oid, ent->name, cached))",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(128)",
          "old_line_content": "{",
          "new_line_content": "\t\texit(128);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "diff_set_mnemonic_prefix",
          "old_text": null,
          "new_text": "diff_set_mnemonic_prefix(&revs->diffopt, \"c/\", cached ? \"i/\" : \"w/\")",
          "old_line_content": "",
          "new_line_content": "\tdiff_set_mnemonic_prefix(&revs->diffopt, \"c/\", cached ? \"i/\" : \"w/\");",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "diff_flush",
          "old_text": null,
          "new_text": "diff_flush(&revs->diffopt)",
          "old_line_content": "\trevs.diffopt = *opt;",
          "new_line_content": "\tdiff_flush(&revs->diffopt);",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "trace_performance_leave",
          "old_text": null,
          "new_text": "trace_performance_leave(\"diff-index\")",
          "old_line_content": "",
          "new_line_content": "\ttrace_performance_leave(\"diff-index\");",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "repo_init_revisions",
          "old_text": null,
          "new_text": "repo_init_revisions(opt->repo, &revs, NULL)",
          "old_line_content": "\t\t       int ita_invisible_in_index)",
          "new_line_content": "\trepo_init_revisions(opt->repo, &revs, NULL);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "copy_pathspec",
          "old_text": null,
          "new_text": "copy_pathspec(&revs.prune_data, &opt->pathspec)",
          "old_line_content": "{",
          "new_line_content": "\tcopy_pathspec(&revs.prune_data, &opt->pathspec);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "diff_cache",
          "old_text": null,
          "new_text": "diff_cache(&revs, tree_oid, NULL, 1)",
          "old_line_content": "",
          "new_line_content": "\tif (diff_cache(&revs, tree_oid, NULL, 1))",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "repo_init_revisions",
          "old_text": null,
          "new_text": "repo_init_revisions(r, &rev, NULL)",
          "old_line_content": "\treturn (rev.diffopt.flags.has_changes != 0);",
          "new_line_content": "\trepo_init_revisions(r, &rev, NULL);",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&opt, 0, sizeof(opt))",
          "old_line_content": "}",
          "new_line_content": "\tmemset(&opt, 0, sizeof(opt));",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "setup_revisions",
          "old_text": null,
          "new_text": "setup_revisions(0, NULL, &rev, &opt)",
          "old_line_content": "static struct strbuf *idiff_prefix_cb(struct diff_options *opt, void *data)",
          "new_line_content": "\tsetup_revisions(0, NULL, &rev, &opt);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "diff_flags_or",
          "old_text": null,
          "new_text": "diff_flags_or(&rev.diffopt.flags, flags)",
          "old_line_content": "",
          "new_line_content": "\t\tdiff_flags_or(&rev.diffopt.flags, flags);",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "run_diff_index",
          "old_text": null,
          "new_text": "run_diff_index(&rev, 1)",
          "old_line_content": "\t\t    int indent, struct diff_options *diffopt)",
          "new_line_content": "\trun_diff_index(&rev, 1);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "object_array_clear",
          "old_text": null,
          "new_text": "object_array_clear(&rev.pending)",
          "old_line_content": "{",
          "new_line_content": "\tobject_array_clear(&rev.pending);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "strbuf_addchars",
          "old_text": null,
          "new_text": "strbuf_addchars(&prefix, ' ', indent)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addchars(&prefix, ' ', indent);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "diff_setup_done",
          "old_text": null,
          "new_text": "diff_setup_done(&opts)",
          "old_line_content": "",
          "new_line_content": "\tdiff_setup_done(&opts);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "diff_tree_oid",
          "old_text": null,
          "new_text": "diff_tree_oid(oid1, oid2, \"\", &opts)",
          "old_line_content": "",
          "new_line_content": "\tdiff_tree_oid(oid1, oid2, \"\", &opts);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "diffcore_std",
          "old_text": null,
          "new_text": "diffcore_std(&opts)",
          "old_line_content": "",
          "new_line_content": "\tdiffcore_std(&opts);",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "diff_flush",
          "old_text": null,
          "new_text": "diff_flush(&opts)",
          "old_line_content": "",
          "new_line_content": "\tdiff_flush(&opts);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&prefix)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&prefix);",
          "content_same": false
        },
        {
          "line": 100,
          "old_api": null,
          "new_api": "refresh_fsmonitor",
          "old_text": null,
          "new_text": "refresh_fsmonitor(istate)",
          "old_line_content": "\tif (diff_unmerged_stage < 0)",
          "new_line_content": "\trefresh_fsmonitor(istate);",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": null,
          "new_api": "diff_can_quit_early",
          "old_text": null,
          "new_text": "diff_can_quit_early(&revs->diffopt)",
          "old_line_content": "",
          "new_line_content": "\t\tif (diff_can_quit_early(&revs->diffopt))",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": null,
          "new_api": "ce_path_match",
          "old_text": null,
          "new_text": "ce_path_match(istate, ce, &revs->prune_data, NULL)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!ce_path_match(istate, ce, &revs->prune_data, NULL))",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "ce_stage",
          "old_text": null,
          "new_text": "ce_stage(ce)",
          "old_line_content": "\t\t\tstruct diff_filepair *pair;",
          "new_line_content": "\t\tif (ce_stage(ce)) {",
          "content_same": false
        },
        {
          "line": 128,
          "old_api": null,
          "new_api": "combine_diff_path_size",
          "old_text": null,
          "new_text": "combine_diff_path_size(5, path_len)",
          "old_line_content": "",
          "new_line_content": "\t\t\tdpath = xmalloc(combine_diff_path_size(5, path_len));",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(&dpath->oid)",
          "old_line_content": "\t\t\t       sizeof(struct combine_diff_parent)*5);",
          "new_line_content": "\t\t\toidclr(&dpath->oid);",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&(dpath->parent[0]), 0,\n\t\t\t       sizeof(struct combine_diff_parent)*5)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemset(&(dpath->parent[0]), 0,",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": null,
          "new_api": "ce_mode_from_stat",
          "old_text": null,
          "new_text": "ce_mode_from_stat(ce, st.st_mode)",
          "old_line_content": "\t\t\t\tif (changed < 0) {",
          "new_line_content": "\t\t\t\twt_mode = ce_mode_from_stat(ce, st.st_mode);",
          "content_same": false
        },
        {
          "line": 143,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(ce->name)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\tperror(ce->name);",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ce->name, nce->name)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tif (strcmp(ce->name, nce->name))",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": null,
          "new_api": "ce_stage",
          "old_text": null,
          "new_text": "ce_stage(nce)",
          "old_line_content": "\t\t\t\t\tint mode = nce->ce_mode;",
          "new_line_content": "\t\t\t\tstage = ce_stage(nce);",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "ce_mode_from_stat",
          "old_text": null,
          "new_text": "ce_mode_from_stat(nce, mode)",
          "old_line_content": "\t\t\t\t\t\tDIFF_STATUS_MODIFIED;",
          "new_line_content": "\t\t\t\t\tdpath->parent[stage-2].mode = ce_mode_from_stat(nce, mode);",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": null,
          "new_api": "show_combined_diff",
          "old_text": null,
          "new_text": "show_combined_diff(dpath, 2, revs)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tshow_combined_diff(dpath, 2, revs);",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(dpath)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tfree(dpath);",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "FREE_AND_NULL",
          "old_text": null,
          "new_text": "FREE_AND_NULL(dpath)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\tFREE_AND_NULL(dpath);",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "diff_unmerge",
          "old_text": null,
          "new_text": "diff_unmerge(&revs->diffopt, ce->name)",
          "old_line_content": "\t\t\t\tpair->two->mode = wt_mode;",
          "new_line_content": "\t\t\tpair = diff_unmerge(&revs->diffopt, ce->name);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "ce_stage",
          "old_text": null,
          "new_text": "ce_stage(ce)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (ce_stage(ce) != diff_unmerged_stage)",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "ce_skip_worktree",
          "old_text": null,
          "new_text": "ce_skip_worktree(ce)",
          "old_line_content": "",
          "new_line_content": "\t\tif (ce_uptodate(ce) || ce_skip_worktree(ce))",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "check_removed",
          "old_text": null,
          "new_text": "check_removed(ce, &st)",
          "old_line_content": "\t\t\t} else if (revs->diffopt.ita_invisible_in_index &&",
          "new_line_content": "\t\t\tchanged = check_removed(ce, &st);",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "diff_addremove",
          "old_text": null,
          "new_text": "diff_addremove(&revs->diffopt, '-', ce->ce_mode,\n\t\t\t\t\t       &ce->oid,\n\t\t\t\t\t       !is_null_oid(&ce->oid),\n\t\t\t\t\t       ce->name, 0)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tdiff_addremove(&revs->diffopt, '-', ce->ce_mode,",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "ce_intent_to_add",
          "old_text": null,
          "new_text": "ce_intent_to_add(ce)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t   ce_intent_to_add(ce)) {",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": null,
          "new_api": "ce_mode_from_stat",
          "old_text": null,
          "new_text": "ce_mode_from_stat(ce, st.st_mode)",
          "old_line_content": "\t\tif (!changed && !dirty_submodule) {",
          "new_line_content": "\t\t\t\tnewmode = ce_mode_from_stat(ce, st.st_mode);",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "match_stat_with_submodule",
          "old_text": null,
          "new_text": "match_stat_with_submodule(&revs->diffopt, ce, &st,\n\t\t\t\t\t\t\t    ce_option, &dirty_submodule)",
          "old_line_content": "\t\toldmode = ce->ce_mode;",
          "new_line_content": "\t\t\tchanged = match_stat_with_submodule(&revs->diffopt, ce, &st,",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "ce_mode_from_stat",
          "old_text": null,
          "new_text": "ce_mode_from_stat(ce, st.st_mode)",
          "old_line_content": "\t\tnew_oid = changed ? &null_oid : &ce->oid;",
          "new_line_content": "\t\t\tnewmode = ce_mode_from_stat(ce, st.st_mode);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "mark_fsmonitor_valid",
          "old_text": null,
          "new_text": "mark_fsmonitor_valid(istate, ce)",
          "old_line_content": "\t\t\t    ce->name, 0, dirty_submodule);",
          "new_line_content": "\t\t\tmark_fsmonitor_valid(istate, ce);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "diff_change",
          "old_text": null,
          "new_text": "diff_change(&revs->diffopt, oldmode, newmode,\n\t\t\t    old_oid, new_oid,\n\t\t\t    !is_null_oid(old_oid),\n\t\t\t    !is_null_oid(new_oid),\n\t\t\t    ce->name, 0, dirty_submodule)",
          "old_line_content": "}",
          "new_line_content": "\t\tdiff_change(&revs->diffopt, oldmode, newmode,",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(old_oid)",
          "old_line_content": "/*",
          "new_line_content": "\t\t\t    !is_null_oid(old_oid),",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(new_oid)",
          "old_line_content": " * diff-index",
          "new_line_content": "\t\t\t    !is_null_oid(new_oid),",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": null,
          "new_api": "diffcore_std",
          "old_text": null,
          "new_text": "diffcore_std(&revs->diffopt)",
          "old_line_content": "static void diff_index_show_file(struct rev_info *revs,",
          "new_line_content": "\tdiffcore_std(&revs->diffopt);",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": null,
          "new_api": "diff_flush",
          "old_text": null,
          "new_text": "diff_flush(&revs->diffopt)",
          "old_line_content": "\t\t\t\t const char *prefix,",
          "new_line_content": "\tdiff_flush(&revs->diffopt);",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "trace_performance_since",
          "old_text": null,
          "new_text": "trace_performance_since(start, \"diff-files\")",
          "old_line_content": "\t\t\t\t const struct cache_entry *ce,",
          "new_line_content": "\ttrace_performance_since(start, \"diff-files\");",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "diff_addremove",
          "old_text": null,
          "new_text": "diff_addremove(&revs->diffopt, prefix[0], mode,\n\t\t       oid, oid_valid, ce->name, dirty_submodule)",
          "old_line_content": "\tunsigned int mode = ce->ce_mode;",
          "new_line_content": "\tdiff_addremove(&revs->diffopt, prefix[0], mode,",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "ce_uptodate",
          "old_text": null,
          "new_text": "ce_uptodate(ce)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\tif (!cached && !ce_uptodate(ce)) {",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "match_stat_with_submodule",
          "old_text": null,
          "new_text": "match_stat_with_submodule(diffopt, ce, &st,\n\t\t\t\t\t\t    0, dirty_submodule)",
          "old_line_content": "}",
          "new_line_content": "\t\tchanged = match_stat_with_submodule(diffopt, ce, &st,",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "ce_mode_from_stat",
          "old_text": null,
          "new_text": "ce_mode_from_stat(ce, st.st_mode)",
          "old_line_content": "\t\t\t  const struct cache_entry *new_file,",
          "new_line_content": "\t\t\tmode = ce_mode_from_stat(ce, st.st_mode);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "get_stat_data",
          "old_text": null,
          "new_text": "get_stat_data(new_file, &oid, &mode, cached, match_missing,\n\t    &dirty_submodule, &revs->diffopt)",
          "old_line_content": "\t\t\t int cached, int match_missing)",
          "new_line_content": "\tif (get_stat_data(new_file, &oid, &mode, cached, match_missing,",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(oid)",
          "old_line_content": "\tunsigned dirty_submodule = 0;",
          "new_line_content": "\tdiff_index_show_file(revs, \"+\", new_file, oid, !is_null_oid(oid), mode, dirty_submodule);",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "get_stat_data",
          "old_text": null,
          "new_text": "get_stat_data(new_entry, &oid, &mode, cached, match_missing,\n\t\t\t  &dirty_submodule, &revs->diffopt)",
          "old_line_content": "\t\tstruct combine_diff_path *p;",
          "new_line_content": "\tif (get_stat_data(new_entry, &oid, &mode, cached, match_missing,",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "ce_namelen",
          "old_text": null,
          "new_text": "ce_namelen(new_entry)",
          "old_line_content": "\t\tp->parent[0].mode = new_entry->ce_mode;",
          "new_line_content": "\t\tint pathlen = ce_namelen(new_entry);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "combine_diff_path_size",
          "old_text": null,
          "new_text": "combine_diff_path_size(2, pathlen)",
          "old_line_content": "\t\tp->parent[1].status = DIFF_STATUS_MODIFIED;",
          "new_line_content": "\t\tp = xmalloc(combine_diff_path_size(2, pathlen));",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(&p->oid)",
          "old_line_content": "\t}",
          "new_line_content": "\t\toidclr(&p->oid);",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(p->parent, 0, 2 * sizeof(struct combine_diff_parent))",
          "old_line_content": "",
          "new_line_content": "\t\tmemset(p->parent, 0, 2 * sizeof(struct combine_diff_parent));",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "oidcpy",
          "old_text": null,
          "new_text": "oidcpy(&p->parent[0].oid, &new_entry->oid)",
          "old_line_content": "\t    !revs->diffopt.flags.find_copies_harder)",
          "new_line_content": "\t\toidcpy(&p->parent[0].oid, &new_entry->oid);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(p)",
          "old_line_content": "\t\t    old_entry->name, 0, dirty_submodule);",
          "new_line_content": "\t\tfree(p);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "oideq",
          "old_text": null,
          "new_text": "oideq(oid, &old_entry->oid)",
          "old_line_content": " * This gets a mix of an existing index and a tree, one pathname entry",
          "new_line_content": "\tif (mode == oldmode && oideq(oid, &old_entry->oid) && !dirty_submodule &&",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "diff_change",
          "old_text": null,
          "new_text": "diff_change(&revs->diffopt, oldmode, mode,\n\t\t    &old_entry->oid, oid, 1, !is_null_oid(oid),\n\t\t    old_entry->name, 0, dirty_submodule)",
          "old_line_content": " */",
          "new_line_content": "\tdiff_change(&revs->diffopt, oldmode, mode,",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(oid)",
          "old_line_content": "static void do_oneway_diff(struct unpack_trees_options *o,",
          "new_line_content": "\t\t    &old_entry->oid, oid, 1, !is_null_oid(oid),",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "ce_intent_to_add",
          "old_text": null,
          "new_text": "ce_intent_to_add(idx)",
          "old_line_content": "",
          "new_line_content": "\t    idx && ce_intent_to_add(idx)) {",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "ce_skip_worktree",
          "old_text": null,
          "new_text": "ce_skip_worktree(idx)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t(idx && ((idx->ce_flags & CE_VALID) || ce_skip_worktree(idx)));",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "ce_stage",
          "old_text": null,
          "new_text": "ce_stage(idx)",
          "old_line_content": "\t */",
          "new_line_content": "\tif (cached && idx && ce_stage(idx)) {",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "fill_filespec",
          "old_text": null,
          "new_text": "fill_filespec(pair->one, &tree->oid, 1,\n\t\t\t\t      tree->ce_mode)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfill_filespec(pair->one, &tree->oid, 1,",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "show_new_file",
          "old_text": null,
          "new_text": "show_new_file(revs, idx, cached, match_missing)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tshow_new_file(revs, idx, cached, match_missing);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "diff_index_show_file",
          "old_text": null,
          "new_text": "diff_index_show_file(revs, \"-\", tree, &tree->oid, 1,\n\t\t\t\t     tree->ce_mode, 0)",
          "old_line_content": " * the different source entries are designed primarily for",
          "new_line_content": "\t\tdiff_index_show_file(revs, \"-\", tree, &tree->oid, 1,",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "show_modified",
          "old_text": null,
          "new_text": "show_modified(revs, tree, idx, 1, cached, match_missing)",
          "old_line_content": " *",
          "new_line_content": "\tshow_modified(revs, tree, idx, 1, cached, match_missing);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "ce_path_match",
          "old_text": null,
          "new_text": "ce_path_match(revs->diffopt.repo->index,\n\t\t\t  idx ? idx : tree,\n\t\t\t  &revs->prune_data, NULL)",
          "old_line_content": "}",
          "new_line_content": "\tif (ce_path_match(revs->diffopt.repo->index,",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "do_oneway_diff",
          "old_text": null,
          "new_text": "do_oneway_diff(o, idx, tree)",
          "old_line_content": "\t\t      const struct object_id *tree_oid,",
          "new_line_content": "\t\tdo_oneway_diff(o, idx, tree);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "diff_can_quit_early",
          "old_text": null,
          "new_text": "diff_can_quit_early(&revs->diffopt)",
          "old_line_content": "\t\t      const char *tree_name,",
          "new_line_content": "\t\tif (diff_can_quit_early(&revs->diffopt)) {",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "parse_tree_indirect",
          "old_text": null,
          "new_text": "parse_tree_indirect(tree_oid)",
          "old_line_content": "\topts.unpack_data = revs;",
          "new_line_content": "\ttree = parse_tree_indirect(tree_oid);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"bad tree object %s\",\n\t\t\t     tree_name ? tree_name : oid_to_hex(tree_oid))",
          "old_line_content": "\topts.dst_index = NULL;",
          "new_line_content": "\t\treturn error(\"bad tree object %s\",",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(tree_oid)",
          "old_line_content": "\topts.pathspec = &revs->diffopt.pathspec;",
          "new_line_content": "\t\t\t     tree_name ? tree_name : oid_to_hex(tree_oid));",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&opts, 0, sizeof(opts))",
          "old_line_content": "\topts.pathspec->recursive = 1;",
          "new_line_content": "\tmemset(&opts, 0, sizeof(opts));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 518,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"run_diff_index must be passed exactly one tree\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"run_diff_index must be passed exactly one tree\");",
          "new_line_content": "\topts.pathspec->recursive = 1;",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "diff_cache",
          "new_api": null,
          "old_text": "diff_cache(revs, &ent->item->oid, ent->name, cached)",
          "new_text": null,
          "old_line_content": "\tif (diff_cache(revs, &ent->item->oid, ent->name, cached))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(128)",
          "new_text": null,
          "old_line_content": "\t\texit(128);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "diff_set_mnemonic_prefix",
          "new_api": null,
          "old_text": "diff_set_mnemonic_prefix(&revs->diffopt, \"c/\", cached ? \"i/\" : \"w/\")",
          "new_text": null,
          "old_line_content": "\tdiff_set_mnemonic_prefix(&revs->diffopt, \"c/\", cached ? \"i/\" : \"w/\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "diffcore_fix_diff_index",
          "new_api": null,
          "old_text": "diffcore_fix_diff_index()",
          "new_text": null,
          "old_line_content": "\tdiffcore_fix_diff_index();",
          "new_line_content": "\tstruct object_array_entry *ent;",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "diffcore_std",
          "new_api": null,
          "old_text": "diffcore_std(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tdiffcore_std(&revs->diffopt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "diff_flush",
          "new_api": null,
          "old_text": "diff_flush(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tdiff_flush(&revs->diffopt);",
          "new_line_content": "\tif (revs->pending.nr != 1)",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "diff_cache",
          "new_api": null,
          "old_text": "diff_cache(&revs, tree_oid, NULL, 1)",
          "new_text": null,
          "old_line_content": "\tif (diff_cache(&revs, tree_oid, NULL, 1))",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(128)",
          "new_text": null,
          "old_line_content": "\t\texit(128);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&opt, 0, sizeof(opt))",
          "new_text": null,
          "old_line_content": "\tmemset(&opt, 0, sizeof(opt));",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "setup_revisions",
          "new_api": null,
          "old_text": "setup_revisions(0, NULL, &rev, &opt)",
          "new_text": null,
          "old_line_content": "\tsetup_revisions(0, NULL, &rev, &opt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "diff_flags_or",
          "new_api": null,
          "old_text": "diff_flags_or(&rev.diffopt.flags, flags)",
          "new_text": null,
          "old_line_content": "\t\tdiff_flags_or(&rev.diffopt.flags, flags);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "run_diff_index",
          "new_api": null,
          "old_text": "run_diff_index(&rev, 1)",
          "new_text": null,
          "old_line_content": "\trun_diff_index(&rev, 1);",
          "new_line_content": "\tstruct setup_revision_opt opt;",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "object_array_clear",
          "new_api": null,
          "old_text": "object_array_clear(&rev.pending)",
          "new_text": null,
          "old_line_content": "\tobject_array_clear(&rev.pending);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&opts, diffopt, sizeof(opts))",
          "new_text": null,
          "old_line_content": "\tmemcpy(&opts, diffopt, sizeof(opts));",
          "new_line_content": "static struct strbuf *idiff_prefix_cb(struct diff_options *opt, void *data)",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "strbuf_addchars",
          "new_api": null,
          "old_text": "strbuf_addchars(&prefix, ' ', indent)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addchars(&prefix, ' ', indent);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "diff_setup_done",
          "new_api": null,
          "old_text": "diff_setup_done(&opts)",
          "new_text": null,
          "old_line_content": "\tdiff_setup_done(&opts);",
          "new_line_content": "void show_interdiff(const struct object_id *oid1, const struct object_id *oid2,",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "diff_tree_oid",
          "new_api": null,
          "old_text": "diff_tree_oid(oid1, oid2, \"\", &opts)",
          "new_text": null,
          "old_line_content": "\tdiff_tree_oid(oid1, oid2, \"\", &opts);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "diffcore_std",
          "new_api": null,
          "old_text": "diffcore_std(&opts)",
          "new_text": null,
          "old_line_content": "\tdiffcore_std(&opts);",
          "new_line_content": "\tstruct diff_options opts;",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "diff_flush",
          "new_api": null,
          "old_text": "diff_flush(&opts)",
          "new_text": null,
          "old_line_content": "\tdiff_flush(&opts);",
          "new_line_content": "\tstruct strbuf prefix = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "diff_can_quit_early",
          "new_api": null,
          "old_text": "diff_can_quit_early(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\t\tif (diff_can_quit_early(&revs->diffopt))",
          "new_line_content": "\t\tconst struct object_id *old_oid, *new_oid;",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": "ce_path_match",
          "new_api": null,
          "old_text": "ce_path_match(istate, ce, &revs->prune_data, NULL)",
          "new_text": null,
          "old_line_content": "\t\tif (!ce_path_match(istate, ce, &revs->prune_data, NULL))",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "ce_stage",
          "new_api": null,
          "old_text": "ce_stage(ce)",
          "new_text": null,
          "old_line_content": "\t\tif (ce_stage(ce)) {",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": "ce_namelen",
          "new_api": null,
          "old_text": "ce_namelen(ce)",
          "new_text": null,
          "old_line_content": "\t\t\tpath_len = ce_namelen(ce);",
          "new_line_content": "\t\t\tstruct stat st;",
          "content_same": false
        },
        {
          "line": 130,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dpath->path, ce->name, path_len)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(dpath->path, ce->name, path_len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&(dpath->parent[0]), 0,\n\t\t\t       sizeof(struct combine_diff_parent)*5)",
          "new_text": null,
          "old_line_content": "\t\t\tmemset(&(dpath->parent[0]), 0,",
          "new_line_content": "\t\t\tdpath->path[path_len] = '\\0';",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": "check_removed",
          "new_api": null,
          "old_text": "check_removed(ce, &st)",
          "new_text": null,
          "old_line_content": "\t\t\tchanged = check_removed(ce, &st);",
          "new_line_content": "\t\t\t       sizeof(struct combine_diff_parent)*5);",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(ce->name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tperror(ce->name);",
          "new_line_content": "\t\t\telse {",
          "content_same": false
        },
        {
          "line": 152,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ce->name, nce->name)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (strcmp(ce->name, nce->name))",
          "new_line_content": "\t\t\t\tint stage;",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "ce_stage",
          "new_api": null,
          "old_text": "ce_stage(nce)",
          "new_text": null,
          "old_line_content": "\t\t\t\tstage = ce_stage(nce);",
          "new_line_content": "\t\t\t\t * stage #3 (theirs) is the second.",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "oidcpy",
          "new_api": null,
          "old_text": "oidcpy(&dpath->parent[stage - 2].oid,\n\t\t\t\t\t       &nce->oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\toidcpy(&dpath->parent[stage - 2].oid,",
          "new_line_content": "\t\t\t\t\tint mode = nce->ce_mode;",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": "show_combined_diff",
          "new_api": null,
          "old_text": "show_combined_diff(dpath, 2, revs)",
          "new_text": null,
          "old_line_content": "\t\t\t\tshow_combined_diff(dpath, 2, revs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(dpath)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfree(dpath);",
          "new_line_content": "\t\t\tif (revs->combine_merges && num_compare_stages == 2) {",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "FREE_AND_NULL",
          "new_api": null,
          "old_text": "FREE_AND_NULL(dpath)",
          "new_text": null,
          "old_line_content": "\t\t\tFREE_AND_NULL(dpath);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "diff_unmerge",
          "new_api": null,
          "old_text": "diff_unmerge(&revs->diffopt, ce->name)",
          "new_text": null,
          "old_line_content": "\t\t\tpair = diff_unmerge(&revs->diffopt, ce->name);",
          "new_line_content": "\t\t\t * from the desired stage.",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "ce_stage",
          "new_api": null,
          "old_text": "ce_stage(ce)",
          "new_text": null,
          "old_line_content": "\t\t\tif (ce_stage(ce) != diff_unmerged_stage)",
          "new_line_content": "\t\t\tif (wt_mode)",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "ce_skip_worktree",
          "new_api": null,
          "old_text": "ce_skip_worktree(ce)",
          "new_text": null,
          "old_line_content": "\t\tif (ce_uptodate(ce) || ce_skip_worktree(ce))",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "check_removed",
          "new_api": null,
          "old_text": "check_removed(ce, &st)",
          "new_text": null,
          "old_line_content": "\t\t\tchanged = check_removed(ce, &st);",
          "new_line_content": "\t\t * the fsmonitor knows that the path hasn't been modified since",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(ce->name)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tperror(ce->name);",
          "new_line_content": "\t\t * or modified.",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "diff_addremove",
          "new_api": null,
          "old_text": "diff_addremove(&revs->diffopt, '-', ce->ce_mode,\n\t\t\t\t\t       &ce->oid,\n\t\t\t\t\t       !is_null_oid(&ce->oid),\n\t\t\t\t\t       ce->name, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdiff_addremove(&revs->diffopt, '-', ce->ce_mode,",
          "new_line_content": "\t\t\tchanged = 0;",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&ce->oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t       !is_null_oid(&ce->oid),",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "ce_intent_to_add",
          "new_api": null,
          "old_text": "ce_intent_to_add(ce)",
          "new_text": null,
          "old_line_content": "\t\t\t\t   ce_intent_to_add(ce)) {",
          "new_line_content": "\t\t\tif (changed) {",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "ce_mode_from_stat",
          "new_api": null,
          "old_text": "ce_mode_from_stat(ce, st.st_mode)",
          "new_text": null,
          "old_line_content": "\t\t\t\tnewmode = ce_mode_from_stat(ce, st.st_mode);",
          "new_line_content": "\t\t\t\tif (changed < 0) {",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "ce_mode_from_stat",
          "new_api": null,
          "old_text": "ce_mode_from_stat(ce, st.st_mode)",
          "new_text": null,
          "old_line_content": "\t\t\tnewmode = ce_mode_from_stat(ce, st.st_mode);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": "mark_fsmonitor_valid",
          "new_api": null,
          "old_text": "mark_fsmonitor_valid(istate, ce)",
          "new_text": null,
          "old_line_content": "\t\t\tmark_fsmonitor_valid(istate, ce);",
          "new_line_content": "\t\t\t\t\t       &null_oid, 0, ce->name, 0);",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "diff_change",
          "new_api": null,
          "old_text": "diff_change(&revs->diffopt, oldmode, newmode,\n\t\t\t    old_oid, new_oid,\n\t\t\t    !is_null_oid(old_oid),\n\t\t\t    !is_null_oid(new_oid),\n\t\t\t    ce->name, 0, dirty_submodule)",
          "new_text": null,
          "old_line_content": "\t\tdiff_change(&revs->diffopt, oldmode, newmode,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(old_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t    !is_null_oid(old_oid),",
          "new_line_content": "\t\tif (!changed && !dirty_submodule) {",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "diffcore_std",
          "new_api": null,
          "old_text": "diffcore_std(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tdiffcore_std(&revs->diffopt);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "diff_flush",
          "new_api": null,
          "old_text": "diff_flush(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tdiff_flush(&revs->diffopt);",
          "new_line_content": "\t\toldmode = ce->ce_mode;",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "trace_performance_since",
          "new_api": null,
          "old_text": "trace_performance_since(start, \"diff-files\")",
          "new_text": null,
          "old_line_content": "\ttrace_performance_since(start, \"diff-files\");",
          "new_line_content": "\t\told_oid = &ce->oid;",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "diff_addremove",
          "new_api": null,
          "old_text": "diff_addremove(&revs->diffopt, prefix[0], mode,\n\t\t       oid, oid_valid, ce->name, dirty_submodule)",
          "new_text": null,
          "old_line_content": "\tdiff_addremove(&revs->diffopt, prefix[0], mode,",
          "new_line_content": " * diff-index",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "ce_uptodate",
          "new_api": null,
          "old_text": "ce_uptodate(ce)",
          "new_text": null,
          "old_line_content": "\tif (!cached && !ce_uptodate(ce)) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "check_removed",
          "new_api": null,
          "old_text": "check_removed(ce, &st)",
          "new_text": null,
          "old_line_content": "\t\tchanged = check_removed(ce, &st);",
          "new_line_content": "\t\t\t const struct object_id **oidp,",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "ce_mode_from_stat",
          "new_api": null,
          "old_text": "ce_mode_from_stat(ce, st.st_mode)",
          "new_text": null,
          "old_line_content": "\t\t\tmode = ce_mode_from_stat(ce, st.st_mode);",
          "new_line_content": "\t\telse if (changed) {",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "get_stat_data",
          "new_api": null,
          "old_text": "get_stat_data(new_file, &oid, &mode, cached, match_missing,\n\t    &dirty_submodule, &revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tif (get_stat_data(new_file, &oid, &mode, cached, match_missing,",
          "new_line_content": "\t\t\t  const struct cache_entry *new_file,",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(oid)",
          "new_text": null,
          "old_line_content": "\tdiff_index_show_file(revs, \"+\", new_file, oid, !is_null_oid(oid), mode, dirty_submodule);",
          "new_line_content": "\tunsigned int mode;",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "get_stat_data",
          "new_api": null,
          "old_text": "get_stat_data(new_entry, &oid, &mode, cached, match_missing,\n\t\t\t  &dirty_submodule, &revs->diffopt)",
          "new_text": null,
          "old_line_content": "\tif (get_stat_data(new_entry, &oid, &mode, cached, match_missing,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "diff_index_show_file",
          "new_api": null,
          "old_text": "diff_index_show_file(revs, \"-\", old_entry,\n\t\t\t\t\t     &old_entry->oid, 1, old_entry->ce_mode,\n\t\t\t\t\t     0)",
          "new_text": null,
          "old_line_content": "\t\t\tdiff_index_show_file(revs, \"-\", old_entry,",
          "new_line_content": "\t\t\t const struct cache_entry *new_entry,",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(&old_entry->oid, &new_entry->oid)",
          "new_text": null,
          "old_line_content": "\t    (!oideq(oid, &old_entry->oid) || !oideq(&old_entry->oid, &new_entry->oid))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "ce_namelen",
          "new_api": null,
          "old_text": "ce_namelen(new_entry)",
          "new_text": null,
          "old_line_content": "\t\tint pathlen = ce_namelen(new_entry);",
          "new_line_content": "\t\t\t  &dirty_submodule, &revs->diffopt) < 0) {",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p->path, new_entry->name, pathlen)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(p->path, new_entry->name, pathlen);",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "oidclr",
          "new_api": null,
          "old_text": "oidclr(&p->oid)",
          "new_text": null,
          "old_line_content": "\t\toidclr(&p->oid);",
          "new_line_content": "\tif (revs->combine_merges && !cached &&",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "oidcpy",
          "new_api": null,
          "old_text": "oidcpy(&p->parent[0].oid, &new_entry->oid)",
          "new_text": null,
          "old_line_content": "\t\toidcpy(&p->parent[0].oid, &new_entry->oid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "oidcpy",
          "new_api": null,
          "old_text": "oidcpy(&p->parent[1].oid, &old_entry->oid)",
          "new_text": null,
          "old_line_content": "\t\toidcpy(&p->parent[1].oid, &old_entry->oid);",
          "new_line_content": "\t\tp->next = NULL;",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(p)",
          "new_text": null,
          "old_line_content": "\t\tfree(p);",
          "new_line_content": "\t\tp->path[pathlen] = 0;",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(oid, &old_entry->oid)",
          "new_text": null,
          "old_line_content": "\tif (mode == oldmode && oideq(oid, &old_entry->oid) && !dirty_submodule &&",
          "new_line_content": "\t\tp->parent[0].mode = new_entry->ce_mode;",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "ce_intent_to_add",
          "new_api": null,
          "old_text": "ce_intent_to_add(idx)",
          "new_text": null,
          "old_line_content": "\t    idx && ce_intent_to_add(idx)) {",
          "new_line_content": "\t\t\t   const struct cache_entry *tree)",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "ce_skip_worktree",
          "new_api": null,
          "old_text": "ce_skip_worktree(idx)",
          "new_text": null,
          "old_line_content": "\t\t(idx && ((idx->ce_flags & CE_VALID) || ce_skip_worktree(idx)));",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "ce_stage",
          "new_api": null,
          "old_text": "ce_stage(idx)",
          "new_text": null,
          "old_line_content": "\tif (cached && idx && ce_stage(idx)) {",
          "new_line_content": "\t\tidx = NULL;",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "diff_unmerge",
          "new_api": null,
          "old_text": "diff_unmerge(&revs->diffopt, idx->name)",
          "new_text": null,
          "old_line_content": "\t\tpair = diff_unmerge(&revs->diffopt, idx->name);",
          "new_line_content": "\t\t\treturn;\t/* nothing to diff.. */",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "fill_filespec",
          "new_api": null,
          "old_text": "fill_filespec(pair->one, &tree->oid, 1,\n\t\t\t\t      tree->ce_mode)",
          "new_text": null,
          "old_line_content": "\t\t\tfill_filespec(pair->one, &tree->oid, 1,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "diff_index_show_file",
          "new_api": null,
          "old_text": "diff_index_show_file(revs, \"-\", tree, &tree->oid, 1,\n\t\t\t\t     tree->ce_mode, 0)",
          "new_text": null,
          "old_line_content": "\t\tdiff_index_show_file(revs, \"-\", tree, &tree->oid, 1,",
          "new_line_content": "\t * Something added to the tree?",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "show_modified",
          "new_api": null,
          "old_text": "show_modified(revs, tree, idx, 1, cached, match_missing)",
          "new_text": null,
          "old_line_content": "\tshow_modified(revs, tree, idx, 1, cached, match_missing);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "ce_path_match",
          "new_api": null,
          "old_text": "ce_path_match(revs->diffopt.repo->index,\n\t\t\t  idx ? idx : tree,\n\t\t\t  &revs->prune_data, NULL)",
          "new_text": null,
          "old_line_content": "\tif (ce_path_match(revs->diffopt.repo->index,",
          "new_line_content": "\tstruct rev_info *revs = o->unpack_data;",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "do_oneway_diff",
          "new_api": null,
          "old_text": "do_oneway_diff(o, idx, tree)",
          "new_text": null,
          "old_line_content": "\t\tdo_oneway_diff(o, idx, tree);",
          "new_line_content": "\t * Unpack-trees generates a DF/conflict entry if",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "diff_can_quit_early",
          "new_api": null,
          "old_text": "diff_can_quit_early(&revs->diffopt)",
          "new_text": null,
          "old_line_content": "\t\tif (diff_can_quit_early(&revs->diffopt)) {",
          "new_line_content": "\t * there was a directory in the index and a tree",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "parse_tree_indirect",
          "new_api": null,
          "old_text": "parse_tree_indirect(tree_oid)",
          "new_text": null,
          "old_line_content": "\ttree = parse_tree_indirect(tree_oid);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"bad tree object %s\",\n\t\t\t     tree_name ? tree_name : oid_to_hex(tree_oid))",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"bad tree object %s\",",
          "new_line_content": "static int diff_cache(struct rev_info *revs,",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(tree_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t     tree_name ? tree_name : oid_to_hex(tree_oid));",
          "new_line_content": "\t\t      const struct object_id *tree_oid,",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&opts, 0, sizeof(opts))",
          "new_text": null,
          "old_line_content": "\tmemset(&opts, 0, sizeof(opts));",
          "new_line_content": "\t\t      const char *tree_name,",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "init_tree_desc",
          "new_api": null,
          "old_text": "init_tree_desc(&t, tree->buffer, tree->size)",
          "new_text": null,
          "old_line_content": "\tinit_tree_desc(&t, tree->buffer, tree->size);",
          "new_line_content": "\topts.index_only = cached;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "unpack_trees",
          "new_api": null,
          "old_text": "unpack_trees(1, &t, &opts)",
          "new_text": null,
          "old_line_content": "\treturn unpack_trees(1, &t, &opts);",
          "new_line_content": "\topts.diff_index_cached = (cached &&",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 21,
      "total_additions": 83,
      "total_deletions": 82,
      "total_api_changes": 186
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 186,
        "non_api_lines": 12,
        "non_api_line_numbers": [
          101,
          200,
          201,
          202,
          203,
          204,
          205,
          206,
          208,
          209,
          211,
          212
        ]
      }
    },
    "api_calls_before": 121,
    "api_calls_after": 122,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 2,
      "total_diff_lines": 34
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/4af31dc84a1d63c0c78cb004421405aa5a4f1f80",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/4af31dc84a1d63c0c78cb004421405aa5a4f1f80/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/4af31dc84a1d63c0c78cb004421405aa5a4f1f80/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/4af31dc84a1d63c0c78cb004421405aa5a4f1f80/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 263,
          "old_api": "strbuf_addstr",
          "new_api": "get_common_dir_noenv",
          "old_text": "strbuf_addstr(&path, \"/reftable\")",
          "new_text": "get_common_dir_noenv(&path, gitdir)",
          "old_line_content": "\tstrbuf_addstr(&path, \"/reftable\");",
          "new_line_content": "\tis_worktree = get_common_dir_noenv(&path, gitdir);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "strbuf_reset",
          "new_api": "reftable_be_downcast",
          "old_text": "strbuf_reset(&sb)",
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"init_db\")",
          "old_line_content": "\tstrbuf_reset(&sb);",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"init_db\");",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "write_file",
          "new_api": "strbuf_addf",
          "old_text": "write_file(sb.buf, \"ref: refs/heads/.invalid\")",
          "new_text": "strbuf_addf(&sb, \"%s/reftable\", refs->base.gitdir)",
          "old_line_content": "\twrite_file(sb.buf, \"ref: refs/heads/.invalid\");",
          "new_line_content": "\tstrbuf_addf(&sb, \"%s/reftable\", refs->base.gitdir);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "adjust_shared_perm",
          "new_api": "safe_create_dir",
          "old_text": "adjust_shared_perm(sb.buf)",
          "new_text": "safe_create_dir(sb.buf, 1)",
          "old_line_content": "\tadjust_shared_perm(sb.buf);",
          "new_line_content": "\tsafe_create_dir(sb.buf, 1);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "safe_create_dir",
          "new_api": "write_file",
          "old_text": "safe_create_dir(sb.buf, 1)",
          "new_text": "write_file(sb.buf, \"ref: refs/heads/.invalid\")",
          "old_line_content": "\tsafe_create_dir(sb.buf, 1);",
          "new_line_content": "\twrite_file(sb.buf, \"ref: refs/heads/.invalid\");",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "strbuf_reset",
          "new_api": "adjust_shared_perm",
          "old_text": "strbuf_reset(&sb)",
          "new_text": "adjust_shared_perm(sb.buf)",
          "old_line_content": "\tstrbuf_reset(&sb);",
          "new_line_content": "\tadjust_shared_perm(sb.buf);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "write_file",
          "new_api": "strbuf_addf",
          "old_text": "write_file(sb.buf, \"this repository uses the reftable format\")",
          "new_text": "strbuf_addf(&sb, \"%s/refs\", refs->base.gitdir)",
          "old_line_content": "\twrite_file(sb.buf, \"this repository uses the reftable format\");",
          "new_line_content": "\tstrbuf_addf(&sb, \"%s/refs\", refs->base.gitdir);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "adjust_shared_perm",
          "new_api": "safe_create_dir",
          "old_text": "adjust_shared_perm(sb.buf)",
          "new_text": "safe_create_dir(sb.buf, 1)",
          "old_line_content": "\tadjust_shared_perm(sb.buf);",
          "new_line_content": "\tsafe_create_dir(sb.buf, 1);",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "strncmp",
          "new_api": "is_headref",
          "old_text": "strncmp(iter->prefix, iter->ref.refname, iter->prefix_len)",
          "new_text": "is_headref(&iter->refs->base, iter->ref.refname)",
          "old_line_content": "\t\t    strncmp(iter->prefix, iter->ref.refname, iter->prefix_len)) {",
          "new_line_content": "\t\t      is_headref(&iter->refs->base, iter->ref.refname)))) {",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "oidclr",
          "new_api": "oidread",
          "old_text": "oidclr(&iter->oid)",
          "new_text": "oidread(&iter->oid, iter->ref.value.val2.value)",
          "old_line_content": "\t\t\t\toidclr(&iter->oid);",
          "new_line_content": "\t\t\toidread(&iter->oid, iter->ref.value.val2.value);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "BUG",
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": "BUG(\"unhandled reference value type %d\", iter->ref.value_type)",
          "new_text": "refs_resolve_ref_unsafe(&iter->refs->base, iter->ref.refname,\n\t\t\t\t\t\t     RESOLVE_REF_READING, &iter->oid, &flags)",
          "old_line_content": "\t\t\tBUG(\"unhandled reference value type %d\", iter->ref.value_type);",
          "new_line_content": "\t\t\tif (!refs_resolve_ref_unsafe(&iter->refs->base, iter->ref.refname,",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "_",
          "new_api": "is_null_oid",
          "old_text": "_(\"refname is dangerous: %s\")",
          "new_text": "is_null_oid(&iter->oid)",
          "old_line_content": "\t\t\t\tdie(_(\"refname is dangerous: %s\"), iter->ref.refname);",
          "new_line_content": "\t\tif (is_null_oid(&iter->oid))",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "reftable_stack_reload",
          "new_api": "reftable_be_downcast",
          "old_text": "reftable_stack_reload(stack)",
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"read_symbolic_ref\")",
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"read_symbolic_ref\");",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "string_list_append",
          "new_api": "prepare_transaction_update",
          "old_text": "string_list_append(&affected_refnames,\n\t\t\t\t   transaction->updates[i]->refname)",
          "new_text": "prepare_transaction_update(NULL, refs, tx_data,\n\t\t\t\t\t\t transaction->updates[i], err)",
          "old_line_content": "\t\tstring_list_append(&affected_refnames,",
          "new_line_content": "\t\tret = prepare_transaction_update(NULL, refs, tx_data,",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "stack_for",
          "new_api": "ref_update_reject_duplicates",
          "old_text": "stack_for(refs, \"HEAD\", NULL)",
          "new_text": "ref_update_reject_duplicates(&affected_refnames, err)",
          "old_line_content": "\tret = read_ref_without_reload(stack_for(refs, \"HEAD\", NULL), \"HEAD\", &head_oid,",
          "new_line_content": "\tif (ref_update_reject_duplicates(&affected_refnames, err)) {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "strbuf_addf",
          "new_api": "is_null_oid",
          "old_text": "strbuf_addf(err,\n\t\t\t\t\t    _(\"trying to write ref '%s' with nonexistent object %s\"),\n\t\t\t\t\t    u->refname, oid_to_hex(&u->new_oid))",
          "new_text": "is_null_oid(&u->new_oid)",
          "old_line_content": "\t\t\t\tstrbuf_addf(err,",
          "new_line_content": "\t\tif ((u->flags & REF_HAVE_NEW) && !is_null_oid(&u->new_oid) &&",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "is_branch",
          "new_api": "oid_to_hex",
          "old_text": "is_branch(u->refname)",
          "new_text": "oid_to_hex(&u->new_oid)",
          "old_line_content": "\t\t\tif (o->type != OBJ_COMMIT && is_branch(u->refname)) {",
          "new_line_content": "\t\t\t\t\t    u->refname, oid_to_hex(&u->new_oid));",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "_",
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t\t    \"error reading reference\")",
          "new_text": "refs_resolve_ref_unsafe(&refs->base, u->refname, 0,\n\t\t\t\t\t\t\t\t       &current_oid, NULL)",
          "old_line_content": "\t\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "new_line_content": "\t\t\tconst char *resolved = refs_resolve_ref_unsafe(&refs->base, u->refname, 0,",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "is_null_oid",
          "new_api": "oideq",
          "old_text": "is_null_oid(&current_oid)",
          "new_text": "oideq(&current_oid, &u->old_oid)",
          "old_line_content": "\t\t\telse if (is_null_oid(&current_oid))",
          "new_line_content": "\t\tif (u->flags & REF_HAVE_OLD && !oideq(&current_oid, &u->old_oid)) {",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "_",
          "new_api": "is_null_oid",
          "old_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t    \"reference is missing but expected %s\")",
          "new_text": "is_null_oid(&u->old_oid)",
          "old_line_content": "\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "new_line_content": "\t\t\tif (is_null_oid(&u->old_oid))",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "oid_to_hex",
          "new_api": "original_update_refname",
          "old_text": "oid_to_hex(&u->old_oid)",
          "new_text": "original_update_refname(u)",
          "old_line_content": "\t\t\t\t\t    oid_to_hex(&u->old_oid));",
          "new_line_content": "\t\t\t\t\t    original_update_refname(u));",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "_",
          "new_api": "assert",
          "old_text": "_(\"reftable: transaction prepare: %s\")",
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\t\t\tstrbuf_addf(err, _(\"reftable: transaction prepare: %s\"),",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": "strbuf_release",
          "new_api": "_",
          "old_text": "strbuf_release(&head_referent)",
          "new_text": "_(\"reftable: transaction prepare: %s\")",
          "old_line_content": "\tstrbuf_release(&head_referent);",
          "new_line_content": "\t\t\tstrbuf_addf(err, _(\"reftable: transaction prepare: %s\"),",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "QSORT",
          "new_api": "reftable_stack_next_update_index",
          "old_text": "QSORT(arg->updates, arg->updates_nr, transaction_update_cmp)",
          "new_text": "reftable_stack_next_update_index(arg->stack)",
          "old_line_content": "\tQSORT(arg->updates, arg->updates_nr, transaction_update_cmp);",
          "new_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "ALLOC_GROW",
          "new_api": "strcmp",
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": "strcmp(log.refname, u->refname)",
          "old_line_content": "\t\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\t\t\tif (ret > 0 || strcmp(log.refname, u->refname)) {",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "reftable_log_record_release",
          "new_api": "xstrdup",
          "old_text": "reftable_log_record_release(&log)",
          "new_text": "xstrdup(u->refname)",
          "old_line_content": "\t\t\treftable_log_record_release(&log);",
          "new_line_content": "\t\t\t\ttombstone->refname = xstrdup(u->refname);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "memset",
          "new_api": "should_write_log",
          "old_text": "memset(log, 0, sizeof(*log))",
          "new_text": "should_write_log(&arg->refs->base, u->refname)",
          "old_line_content": "\t\t\tmemset(log, 0, sizeof(*log));",
          "new_line_content": "\t\t\t    should_write_log(&arg->refs->base, u->refname))) {",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "memcpy",
          "new_api": "memset",
          "old_text": "memcpy(log->value.update.new_hash, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": "memset(log, 0, sizeof(*log))",
          "old_line_content": "\t\t\tmemcpy(log->value.update.new_hash, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\t\tmemset(log, 0, sizeof(*log));",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "is_null_oid",
          "new_api": "peel_object",
          "old_text": "is_null_oid(&u->new_oid)",
          "new_text": "peel_object(&u->new_oid, &peeled)",
          "old_line_content": "\t\t\t} else if (!is_null_oid(&u->new_oid)) {",
          "new_line_content": "\t\t\tpeel_error = peel_object(&u->new_oid, &peeled);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": "reftable_writer_add_ref",
          "new_api": "is_null_oid",
          "old_text": "reftable_writer_add_ref(writer, &ref)",
          "new_text": "is_null_oid(&u->new_oid)",
          "old_line_content": "\t\t\tret = reftable_writer_add_ref(writer, &ref);",
          "new_line_content": "\t\t\t} else if (!is_null_oid(&u->new_oid)) {",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "reftable_addition_commit",
          "new_api": "reftable_addition_add",
          "old_text": "reftable_addition_commit(tx_data->args[i].addition)",
          "new_text": "reftable_addition_add(tx_data->args[i].addition,\n\t\t\t\t\t    write_transaction_table, &tx_data->args[i])",
          "old_line_content": "\t\tret = reftable_addition_commit(tx_data->args[i].addition);",
          "new_line_content": "\t\tret = reftable_addition_add(tx_data->args[i].addition,",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "_",
          "new_api": "assert",
          "old_text": "_(\"reftable: transaction failure: %s\")",
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\t\tstrbuf_addf(err, _(\"reftable: transaction failure: %s\"),",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "reftable_error_str",
          "new_api": "free_transaction_data",
          "old_text": "reftable_error_str(ret)",
          "new_text": "free_transaction_data(tx_data)",
          "old_line_content": "\t\t\t    reftable_error_str(ret));",
          "new_line_content": "\tfree_transaction_data(tx_data);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "reftable_writer_add_ref",
          "new_api": "refs_verify_refname_available",
          "old_text": "reftable_writer_add_ref(writer, &ref)",
          "new_text": "refs_verify_refname_available(&create->refs->base, create->refname,\n\t\t\t\t\t    NULL, NULL, create->err)",
          "old_line_content": "\tret = reftable_writer_add_ref(writer, &ref);",
          "new_line_content": "\tret = refs_verify_refname_available(&create->refs->base, create->refname,",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "fill_reftable_log_record",
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": "fill_reftable_log_record(&log)",
          "new_text": "refs_resolve_ref_unsafe(&create->refs->base, create->target,\n\t\t\t\t     RESOLVE_REF_READING, &new_oid, NULL)",
          "old_line_content": "\tfill_reftable_log_record(&log);",
          "new_line_content": "\t    !refs_resolve_ref_unsafe(&create->refs->base, create->target,",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "memcpy",
          "new_api": "fill_reftable_log_record",
          "old_text": "memcpy(log.value.update.new_hash, new_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": "fill_reftable_log_record(&log)",
          "old_line_content": "\tmemcpy(log.value.update.new_hash, new_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\tfill_reftable_log_record(&log);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": "xstrdup",
          "old_text": "refs_resolve_ref_unsafe(&create->refs->base, create->refname,\n\t\t\t\t    RESOLVE_REF_READING, &old_oid, NULL)",
          "new_text": "xstrdup(create->refname)",
          "old_line_content": "\tif (refs_resolve_ref_unsafe(&create->refs->base, create->refname,",
          "new_line_content": "\tlog.refname = xstrdup(create->refname);",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "memcpy",
          "new_api": "xstrndup",
          "old_text": "memcpy(log.value.update.old_hash, old_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": "xstrndup(create->logmsg,\n\t\t\t\t\t    create->refs->write_options.block_size / 2)",
          "old_line_content": "\t\tmemcpy(log.value.update.old_hash, old_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\tlog.value.update.message = xstrndup(create->logmsg,",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "reftable_writer_add_log",
          "new_api": "memcpy",
          "old_text": "reftable_writer_add_log(writer, &log)",
          "new_text": "memcpy(log.value.update.new_hash, new_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\tret = reftable_writer_add_log(writer, &log);",
          "new_line_content": "\tmemcpy(log.value.update.new_hash, new_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "reftable_log_record_release",
          "new_api": "refs_resolve_ref_unsafe",
          "old_text": "reftable_log_record_release(&log)",
          "new_text": "refs_resolve_ref_unsafe(&create->refs->base, create->refname,\n\t\t\t\t    RESOLVE_REF_READING, &old_oid, NULL)",
          "old_line_content": "\treftable_log_record_release(&log);",
          "new_line_content": "\tif (refs_resolve_ref_unsafe(&create->refs->base, create->refname,",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "error",
          "new_api": "assert",
          "old_text": "error(\"unable to write symref for %s: %s\", refname,\n\t\t\t      reftable_error_str(ret))",
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\t\t\terror(\"unable to write symref for %s: %s\", refname,",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "_",
          "new_api": "reftable_stack_read_ref",
          "old_text": "_(\"refname %s is a symbolic ref, copying it is not supported\")",
          "new_text": "reftable_stack_read_ref(arg->stack, arg->oldname, &old_ref)",
          "old_line_content": "\t\tret = error(_(\"refname %s is a symbolic ref, copying it is not supported\"),",
          "new_line_content": "\tif (reftable_stack_read_ref(arg->stack, arg->oldname, &old_ref)) {",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "xstrndup",
          "new_api": "memset",
          "old_text": "xstrndup(arg->logmsg, arg->refs->write_options.block_size / 2)",
          "new_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "old_line_content": "\t\t\txstrndup(arg->logmsg, arg->refs->write_options.block_size / 2);",
          "new_line_content": "\t\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "memcpy",
          "new_api": "fill_reftable_log_record",
          "old_text": "memcpy(logs[logs_nr].value.update.old_hash, old_ref.value.val1, GIT_MAX_RAWSZ)",
          "new_text": "fill_reftable_log_record(&logs[logs_nr])",
          "old_line_content": "\t\tmemcpy(logs[logs_nr].value.update.old_hash, old_ref.value.val1, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\tfill_reftable_log_record(&logs[logs_nr]);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "xstrndup",
          "new_api": "memset",
          "old_text": "xstrndup(arg->logmsg, arg->refs->write_options.block_size / 2)",
          "new_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "old_line_content": "\t\txstrndup(arg->logmsg, arg->refs->write_options.block_size / 2);",
          "new_line_content": "\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "memcpy",
          "new_api": "fill_reftable_log_record",
          "old_text": "memcpy(logs[logs_nr].value.update.new_hash, old_ref.value.val1, GIT_MAX_RAWSZ)",
          "new_text": "fill_reftable_log_record(&logs[logs_nr])",
          "old_line_content": "\tmemcpy(logs[logs_nr].value.update.new_hash, old_ref.value.val1, GIT_MAX_RAWSZ);",
          "new_line_content": "\tfill_reftable_log_record(&logs[logs_nr]);",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "reftable_iterator_next_log",
          "new_api": "reftable_merged_table_seek_log",
          "old_text": "reftable_iterator_next_log(&it, &old_log)",
          "new_text": "reftable_merged_table_seek_log(mt, &it, arg->oldname)",
          "old_line_content": "\t\tret = reftable_iterator_next_log(&it, &old_log);",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, arg->oldname);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "free",
          "new_api": "strcmp",
          "old_text": "free(old_log.refname)",
          "new_text": "strcmp(old_log.refname, arg->oldname)",
          "old_line_content": "\t\tfree(old_log.refname);",
          "new_line_content": "\t\tif (ret > 0 || strcmp(old_log.refname, arg->oldname)) {",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "ALLOC_GROW",
          "new_api": "free",
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": "free(old_log.refname)",
          "old_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\tfree(old_log.refname);",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "assert",
          "new_api": "reftable_writer_add_logs",
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": "reftable_writer_add_logs(writer, logs, logs_nr)",
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\tret = reftable_writer_add_logs(writer, logs, logs_nr);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "strcmp",
          "new_api": "assert",
          "old_text": "strcmp(logs[i].refname, \"HEAD\")",
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\t\tif (!strcmp(logs[i].refname, \"HEAD\"))",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "reftable_log_record_release",
          "new_api": "strbuf_release",
          "old_text": "reftable_log_record_release(&logs[i])",
          "new_text": "strbuf_release(&errbuf)",
          "old_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "new_line_content": "\tstrbuf_release(&errbuf);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "free",
          "new_api": "strcmp",
          "old_text": "free(logs)",
          "new_text": "strcmp(logs[i].refname, \"HEAD\")",
          "old_line_content": "\tfree(logs);",
          "new_line_content": "\t\tif (!strcmp(logs[i].refname, \"HEAD\"))",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "strbuf_addstr",
          "new_api": "check_refname_format",
          "old_text": "strbuf_addstr(&iter->last_name, iter->log.refname)",
          "new_text": "check_refname_format(iter->log.refname,\n\t\t\t\t\t REFNAME_ALLOW_ONELEVEL)",
          "old_line_content": "\t\tstrbuf_addstr(&iter->last_name, iter->log.refname);",
          "new_line_content": "\t\tif (check_refname_format(iter->log.refname,",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "fn",
          "new_api": "is_null_oid",
          "old_text": "fn(&old_oid, &new_oid, full_committer,\n\t\t  log->value.update.time, log->value.update.tz_offset,\n\t\t  log->value.update.message, cb_data)",
          "new_text": "is_null_oid(&new_oid)",
          "old_line_content": "\treturn fn(&old_oid, &new_oid, full_committer,",
          "new_line_content": "\tif (is_null_oid(&old_oid) && is_null_oid(&new_oid))",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "strcmp",
          "new_api": "reftable_merged_table_seek_log",
          "old_text": "strcmp(log.refname, refname)",
          "new_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "old_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "yield_log_record",
          "new_api": "strcmp",
          "old_text": "yield_log_record(&log, fn, cb_data)",
          "new_text": "strcmp(log.refname, refname)",
          "old_line_content": "\t\tret = yield_log_record(&log, fn, cb_data);",
          "new_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "reftable_log_record_release",
          "new_api": "yield_log_record",
          "old_text": "reftable_log_record_release(&log)",
          "new_text": "yield_log_record(&log, fn, cb_data)",
          "old_line_content": "\treftable_log_record_release(&log);",
          "new_line_content": "\t\tret = yield_log_record(&log, fn, cb_data);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": "reftable_iterator_next_log",
          "new_api": "reftable_stack_merged_table",
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "\tmt = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "ALLOC_GROW",
          "new_api": "reftable_log_record_release",
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\t\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "yield_log_record",
          "new_api": "ALLOC_GROW",
          "old_text": "yield_log_record(&logs[i], fn, cb_data)",
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\tret = yield_log_record(&logs[i], fn, cb_data);",
          "new_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "strcmp",
          "new_api": "reftable_merged_table_seek_log",
          "old_text": "strcmp(log.refname, arg->refname)",
          "new_text": "reftable_merged_table_seek_log(mt, &it, arg->refname)",
          "old_line_content": "\t\tif (ret > 0 || strcmp(log.refname, arg->refname)) {",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, arg->refname);",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "assert",
          "new_api": "reftable_stack_reload",
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": "prepare_fn",
          "new_api": "reftable_stack_read_ref",
          "old_text": "prepare_fn(refname, &oid, policy_cb_data)",
          "new_text": "reftable_stack_read_ref(stack, refname, &ref_record)",
          "old_line_content": "\tprepare_fn(refname, &oid, policy_cb_data);",
          "new_line_content": "\tret = reftable_stack_read_ref(stack, refname, &ref_record);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "oidread",
          "new_api": "strcmp",
          "old_text": "oidread(&old_oid, log.value.update.old_hash)",
          "new_text": "strcmp(log.refname, refname)",
          "old_line_content": "\t\toidread(&old_oid, log.value.update.old_hash);",
          "new_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "oidread",
          "new_api": "reftable_log_record_release",
          "old_text": "oidread(&new_oid, log.value.update.new_hash)",
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\toidread(&new_oid, log.value.update.new_hash);",
          "new_line_content": "\t\t\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "ALLOC_GROW",
          "new_api": "is_null_oid",
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": "is_null_oid(&new_oid)",
          "old_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\tif (is_null_oid(&old_oid) && is_null_oid(&new_oid)) {",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "assert",
          "new_api": "reftable_addition_commit",
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": "reftable_addition_commit(add)",
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\t\tret = reftable_addition_commit(add);",
          "content_same": false
        },
        {
          "line": 2214,
          "old_api": "reftable_addition_destroy",
          "new_api": "cleanup_fn",
          "old_text": "reftable_addition_destroy(add)",
          "new_text": "cleanup_fn(policy_cb_data)",
          "old_line_content": "\treftable_addition_destroy(add);",
          "new_line_content": "\t\tcleanup_fn(policy_cb_data);",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "free",
          "new_api": "reftable_ref_record_release",
          "old_text": "free(logs)",
          "new_text": "reftable_ref_record_release(&ref_record)",
          "old_line_content": "\tfree(logs);",
          "new_line_content": "\treftable_ref_record_release(&ref_record);",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "free",
          "new_api": "reftable_iterator_destroy",
          "old_text": "free(rewritten)",
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "\tfree(rewritten);",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2060,
          "old_api": null,
          "new_api": "reftable_writer_add_log",
          "old_text": null,
          "new_text": "reftable_writer_add_log(writer, &log)",
          "old_line_content": "\tfor (i = 0; i < arg->len; i++) {",
          "new_line_content": "\t\tret = reftable_writer_add_log(writer, &log);",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "reftable_writer_add_log",
          "old_text": null,
          "new_text": "reftable_writer_add_log(writer, &arg->records[i])",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tret = reftable_writer_add_log(writer, &arg->records[i]);",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"reflog_expire\")",
          "old_line_content": "\tstruct reftable_ref_record ref_record = {0};",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"reflog_expire\");",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\tstruct reftable_iterator it = {0};",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "\tstruct reftable_addition *add = NULL;",
          "new_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_log",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": null,
          "new_api": "reftable_stack_new_addition",
          "old_text": null,
          "new_text": "reftable_stack_new_addition(&add, stack)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = reftable_stack_new_addition(&add, stack);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "reftable_ref_record_val1",
          "old_text": null,
          "new_text": "reftable_ref_record_val1(&ref_record)",
          "old_line_content": "\t\tstruct reftable_log_record log = {0};",
          "new_line_content": "\tif (reftable_ref_record_val1(&ref_record))",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "reftable_ref_record_val1",
          "old_text": null,
          "new_text": "reftable_ref_record_val1(&ref_record)",
          "old_line_content": "\t\tstruct object_id old_oid, new_oid;",
          "new_line_content": "\t\toidread(&oid, reftable_ref_record_val1(&ref_record));",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "prepare_fn",
          "old_text": null,
          "new_text": "prepare_fn(refname, &oid, policy_cb_data)",
          "old_line_content": "",
          "new_line_content": "\tprepare_fn(refname, &oid, policy_cb_data);",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&old_oid, log.value.update.old_hash)",
          "old_line_content": "\t\t * in when there are no live reflog records.",
          "new_line_content": "\t\toidread(&old_oid, log.value.update.old_hash);",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&new_oid, log.value.update.new_hash)",
          "old_line_content": "\t\t */",
          "new_line_content": "\t\toidread(&new_oid, log.value.update.new_hash);",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\tlogs[logs_nr++] = log;",
          "new_line_content": "\t\t\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t * We need to rewrite all reflog entries according to the pruning",
          "new_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "CALLOC_ARRAY",
          "old_text": null,
          "new_text": "CALLOC_ARRAY(rewritten, logs_nr)",
          "old_line_content": "\t\t*dest = logs[i];",
          "new_line_content": "\tCALLOC_ARRAY(rewritten, logs_nr);",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&old_oid, logs[i].value.update.old_hash)",
          "old_line_content": "\t\t\t\t    logs[i].value.update.tz_offset,",
          "new_line_content": "\t\toidread(&old_oid, logs[i].value.update.old_hash);",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&new_oid, logs[i].value.update.new_hash)",
          "old_line_content": "\t\t\t\t    logs[i].value.update.message,",
          "new_line_content": "\t\toidread(&new_oid, logs[i].value.update.new_hash);",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": null,
          "new_api": "should_prune_fn",
          "old_text": null,
          "new_text": "should_prune_fn(&old_oid, &new_oid, logs[i].value.update.email,\n\t\t\t\t    (timestamp_t)logs[i].value.update.time,\n\t\t\t\t    logs[i].value.update.tz_offset,\n\t\t\t\t    logs[i].value.update.message,\n\t\t\t\t    policy_cb_data)",
          "old_line_content": "\t\t\tdest->value_type = REFTABLE_LOG_DELETION;",
          "new_line_content": "\t\tif (should_prune_fn(&old_oid, &new_oid, logs[i].value.update.email,",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dest->value.update.old_hash, last_hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\tif (flags & EXPIRE_REFLOGS_UPDATE_REF && last_hash &&",
          "new_line_content": "\t\t\t\tmemcpy(dest->value.update.old_hash, last_hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": null,
          "new_api": "reftable_ref_record_val1",
          "old_text": null,
          "new_text": "reftable_ref_record_val1(&ref_record)",
          "old_line_content": "\targ.stack = stack,",
          "new_line_content": "\t    reftable_ref_record_val1(&ref_record))",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&arg.update_oid, last_hash)",
          "old_line_content": "\targ.refname = refname,",
          "new_line_content": "\t\toidread(&arg.update_oid, last_hash);",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": null,
          "new_api": "reftable_addition_add",
          "old_text": null,
          "new_text": "reftable_addition_add(add, &write_reflog_expiry_table, &arg)",
          "old_line_content": "\t * Future improvement: we could skip writing records that were",
          "new_line_content": "\tret = reftable_addition_add(add, &write_reflog_expiry_table, &arg);",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\tfor (i = 0; i < logs_nr; i++)",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "reftable_addition_destroy",
          "old_text": null,
          "new_text": "reftable_addition_destroy(add)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\treftable_addition_destroy(add);",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&logs[i])",
          "old_line_content": "",
          "new_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(logs)",
          "old_line_content": "struct ref_storage_be refs_be_reftable = {",
          "new_line_content": "\tfree(logs);",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(rewritten)",
          "old_line_content": "\t.name = \"reftable\",",
          "new_line_content": "\tfree(rewritten);",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&path)",
          "old_line_content": "\t\t\t\t       refs->write_options);",
          "new_line_content": "\t\tstrbuf_reset(&path);",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "strbuf_realpath",
          "old_text": null,
          "new_text": "strbuf_realpath(&path, gitdir, 0)",
          "old_line_content": "\tif (refs->err)",
          "new_line_content": "\t\tstrbuf_realpath(&path, gitdir, 0);",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&path, \"/reftable\")",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_addstr(&path, \"/reftable\");",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "reftable_new_stack",
          "old_text": null,
          "new_text": "reftable_new_stack(&refs->main_stack, path.buf,\n\t\t\t\t       refs->write_options)",
          "old_line_content": "\t/*",
          "new_line_content": "\trefs->err = reftable_new_stack(&refs->main_stack, path.buf,",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&path)",
          "old_line_content": "\t\tif (refs->err)",
          "new_line_content": "\t\tstrbuf_reset(&path);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&path, \"%s/reftable\", gitdir)",
          "old_line_content": "\t\t\tgoto done;",
          "new_line_content": "\t\tstrbuf_addf(&path, \"%s/reftable\", gitdir);",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "reftable_new_stack",
          "old_text": null,
          "new_text": "reftable_new_stack(&refs->worktree_stack, path.buf,\n\t\t\t\t\t       refs->write_options)",
          "old_line_content": "",
          "new_line_content": "\t\trefs->err = reftable_new_stack(&refs->worktree_stack, path.buf,",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "chdir_notify_reparent",
          "old_text": null,
          "new_text": "chdir_notify_reparent(\"reftables-backend $GIT_DIR\", &refs->base.gitdir)",
          "old_line_content": "\treturn &refs->base;",
          "new_line_content": "\tchdir_notify_reparent(\"reftables-backend $GIT_DIR\", &refs->base.gitdir);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(refs->err != REFTABLE_API_ERROR)",
          "old_line_content": "static int reftable_be_init_db(struct ref_store *ref_store,",
          "new_line_content": "\tassert(refs->err != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&path)",
          "old_line_content": "\t\t\t       int flags UNUSED,",
          "new_line_content": "\tstrbuf_release(&path);",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&sb)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_reset(&sb);",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&sb)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_reset(&sb);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(&sb, \"%s/refs/heads\", refs->base.gitdir)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\tstrbuf_addf(&sb, \"%s/refs/heads\", refs->base.gitdir);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "write_file",
          "old_text": null,
          "new_text": "write_file(sb.buf, \"this repository uses the reftable format\")",
          "old_line_content": "}",
          "new_line_content": "\twrite_file(sb.buf, \"this repository uses the reftable format\");",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "adjust_shared_perm",
          "old_text": null,
          "new_text": "adjust_shared_perm(sb.buf)",
          "old_line_content": "",
          "new_line_content": "\tadjust_shared_perm(sb.buf);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&sb)",
          "old_line_content": "\tstruct ref_iterator base;",
          "new_line_content": "\tstrbuf_release(&sb);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "reftable_iterator_next_ref",
          "old_text": null,
          "new_text": "reftable_iterator_next_ref(&iter->iter, &iter->ref)",
          "old_line_content": "\t\t * The files backend only lists references contained in \"refs/\" unless",
          "new_line_content": "\t\titer->err = reftable_iterator_next_ref(&iter->iter, &iter->ref);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "starts_with",
          "old_text": null,
          "new_text": "starts_with(iter->ref.refname, \"refs/\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!starts_with(iter->ref.refname, \"refs/\") &&",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "is_pseudoref",
          "old_text": null,
          "new_text": "is_pseudoref(&iter->refs->base, iter->ref.refname)",
          "old_line_content": "\t\tif (iter->prefix_len &&",
          "new_line_content": "\t\t     (is_pseudoref(&iter->refs->base, iter->ref.refname) ||",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(iter->prefix, iter->ref.refname, iter->prefix_len)",
          "old_line_content": "\t\tif (iter->flags & DO_FOR_EACH_PER_WORKTREE_ONLY &&",
          "new_line_content": "\t\t    strncmp(iter->prefix, iter->ref.refname, iter->prefix_len)) {",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "parse_worktree_ref",
          "old_text": null,
          "new_text": "parse_worktree_ref(iter->ref.refname, NULL, NULL, NULL)",
          "old_line_content": "\t\tcase REFTABLE_REF_VAL1:",
          "new_line_content": "\t\t    parse_worktree_ref(iter->ref.refname, NULL, NULL, NULL) !=",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&iter->oid, iter->ref.value.val1)",
          "old_line_content": "\t\tcase REFTABLE_REF_SYMREF:",
          "new_line_content": "\t\t\toidread(&iter->oid, iter->ref.value.val1);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(&iter->oid)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\toidclr(&iter->oid);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"unhandled reference value type %d\", iter->ref.value_type)",
          "old_line_content": "",
          "new_line_content": "\t\t\tBUG(\"unhandled reference value type %d\", iter->ref.value_type);",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "check_refname_format",
          "old_text": null,
          "new_text": "check_refname_format(iter->ref.refname, REFNAME_ALLOW_ONELEVEL)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (check_refname_format(iter->ref.refname, REFNAME_ALLOW_ONELEVEL)) {",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "refname_is_safe",
          "old_text": null,
          "new_text": "refname_is_safe(iter->ref.refname)",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (!refname_is_safe(iter->ref.refname))",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refname is dangerous: %s\")",
          "old_line_content": "\t\tif (iter->flags & DO_FOR_EACH_OMIT_DANGLING_SYMREFS &&",
          "new_line_content": "\t\t\t\tdie(_(\"refname is dangerous: %s\"), iter->ref.refname);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "oidclr",
          "old_text": null,
          "new_text": "oidclr(&iter->oid)",
          "old_line_content": "\t\t    flags & REF_ISSYMREF &&",
          "new_line_content": "\t\t\toidclr(&iter->oid);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "ref_resolves_to_object",
          "old_text": null,
          "new_text": "ref_resolves_to_object(iter->ref.refname, refs->base.repo,\n\t\t\t\t\t    &iter->oid, flags)",
          "old_line_content": "\t\titer->base.oid = &iter->oid;",
          "new_line_content": "\t\t    !ref_resolves_to_object(iter->ref.refname, refs->base.repo,",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "ref_iterator_abort",
          "old_text": null,
          "new_text": "ref_iterator_abort(ref_iterator)",
          "old_line_content": "\tif (iter->err < 0) {",
          "new_line_content": "\t\tif (ref_iterator_abort(ref_iterator) != ITER_DONE)",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": null,
          "new_api": "ref_iterator_abort",
          "old_text": null,
          "new_text": "ref_iterator_abort(ref_iterator)",
          "old_line_content": "}",
          "new_line_content": "\t\tref_iterator_abort(ref_iterator);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(peeled, iter->ref.value.val2.target_value)",
          "old_line_content": "}",
          "new_line_content": "\t\toidread(peeled, iter->ref.value.val2.target_value);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(&iter->ref)",
          "old_line_content": "",
          "new_line_content": "\treftable_ref_record_release(&iter->ref);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&iter->iter)",
          "old_line_content": "static struct ref_iterator_vtable reftable_ref_iterator_vtable = {",
          "new_line_content": "\treftable_iterator_destroy(&iter->iter);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(iter)",
          "old_line_content": "\t.advance = reftable_ref_iterator_advance,",
          "new_line_content": "\tfree(iter);",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*iter))",
          "old_line_content": "\titer->flags = flags;",
          "new_line_content": "\titer = xcalloc(1, sizeof(*iter));",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "base_ref_iterator_init",
          "old_text": null,
          "new_text": "base_ref_iterator_init(&iter->base, &reftable_ref_iterator_vtable)",
          "old_line_content": "\titer->refs = refs;",
          "new_line_content": "\tbase_ref_iterator_init(&iter->base, &reftable_ref_iterator_vtable);",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(prefix)",
          "old_line_content": "\tret = refs->err;",
          "new_line_content": "\titer->prefix_len = prefix ? strlen(prefix) : 0;",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "",
          "new_line_content": "\tmerged_table = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_ref",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_ref(merged_table, &iter->iter, prefix)",
          "old_line_content": "\titer->err = ret;",
          "new_line_content": "\tret = reftable_merged_table_seek_ref(merged_table, &iter->iter, prefix);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, required_flags, \"ref_iterator_begin\")",
          "old_line_content": "\t * The worktree stack is only set when we're in an actual worktree",
          "new_line_content": "\trefs = reftable_be_downcast(ref_store, required_flags, \"ref_iterator_begin\");",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": null,
          "new_api": "ref_iterator_for_stack",
          "old_text": null,
          "new_text": "ref_iterator_for_stack(refs, refs->main_stack, prefix, flags)",
          "old_line_content": "\t * iterator, only.",
          "new_line_content": "\tmain_iter = ref_iterator_for_stack(refs, refs->main_stack, prefix, flags);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "ref_iterator_for_stack",
          "old_text": null,
          "new_text": "ref_iterator_for_stack(refs, refs->worktree_stack, prefix, flags)",
          "old_line_content": "static int reftable_be_read_raw_ref(struct ref_store *ref_store,",
          "new_line_content": "\tworktree_iter = ref_iterator_for_stack(refs, refs->worktree_stack, prefix, flags);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "merge_ref_iterator_begin",
          "old_text": null,
          "new_text": "merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,\n\t\t\t\t\tref_iterator_select, NULL)",
          "old_line_content": "\t\t\t\t    const char *refname,",
          "new_line_content": "\treturn merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"read_raw_ref\")",
          "old_line_content": "\t\treturn refs->err;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"read_raw_ref\");",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "read_ref_without_reload",
          "old_text": null,
          "new_text": "read_ref_without_reload(stack, refname, oid, referent, type)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tret = read_ref_without_reload(stack, refname, oid, referent, type);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\tif (ret)",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\tif (ret == 0 && ref.value_type == REFTABLE_REF_SYMREF)",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "reftable_stack_read_ref",
          "old_text": null,
          "new_text": "reftable_stack_read_ref(stack, refname, &ref)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_read_ref(stack, refname, &ref);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(referent, ref.value.symref)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tstrbuf_addstr(referent, ref.value.symref);",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(&ref)",
          "old_line_content": " * Return the refname under which update was originally requested.",
          "new_line_content": "\treftable_ref_record_release(&ref);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "reftable_addition_destroy",
          "old_text": null,
          "new_text": "reftable_addition_destroy(tx_data->args[i].addition)",
          "old_line_content": "}",
          "new_line_content": "\t\treftable_addition_destroy(tx_data->args[i].addition);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(tx_data->args[i].updates)",
          "old_line_content": "",
          "new_line_content": "\t\tfree(tx_data->args[i].updates);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(tx_data->args)",
          "old_line_content": " * Prepare transaction update for the given reference update. This will cause",
          "new_line_content": "\tfree(tx_data->args);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(tx_data)",
          "old_line_content": " * us to lock the corresponding reftable stack for concurrent modification.",
          "new_line_content": "\tfree(tx_data);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, update->refname, NULL)",
          "old_line_content": "\t/*",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, update->refname, NULL);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\t\tif (ret) {",
          "new_line_content": "\t\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "reftable_stack_new_addition",
          "old_text": null,
          "new_text": "reftable_stack_new_addition(&addition, stack)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tret = reftable_stack_new_addition(&addition, stack);",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(err, \"cannot lock references\")",
          "old_line_content": "\t\t\t   tx_data->args_alloc);",
          "new_line_content": "\t\t\t\tstrbuf_addstr(err, \"cannot lock references\");",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(tx_data->args, tx_data->args_nr + 1,\n\t\t\t   tx_data->args_alloc)",
          "old_line_content": "\t\targ->addition = addition;",
          "new_line_content": "\t\tALLOC_GROW(tx_data->args, tx_data->args_nr + 1,",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"reference update queued more than once\")",
          "old_line_content": "",
          "new_line_content": "\t\tBUG(\"reference update queued more than once\");",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "prepare_transaction_update",
          "old_text": null,
          "new_text": "prepare_transaction_update(&arg, refs, tx_data, update, err)",
          "old_line_content": "\t\t   arg->updates_alloc);",
          "new_line_content": "\tret = prepare_transaction_update(&arg, refs, tx_data, update, err);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(arg->updates, arg->updates_nr + 1,\n\t\t   arg->updates_alloc)",
          "old_line_content": "",
          "new_line_content": "\tALLOC_GROW(arg->updates, arg->updates_nr + 1,",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "oidcpy",
          "old_text": null,
          "new_text": "oidcpy(&arg->updates[arg->updates_nr].current_oid, current_oid)",
          "old_line_content": "",
          "new_line_content": "\toidcpy(&arg->updates[arg->updates_nr].current_oid, current_oid);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE|REF_STORE_MAIN, \"ref_transaction_prepare\")",
          "old_line_content": "\tunsigned int head_type = 0;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE|REF_STORE_MAIN, \"ref_transaction_prepare\");",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*tx_data))",
          "old_line_content": "\t * that will be modified during the transaction.",
          "new_line_content": "\ttx_data = xcalloc(1, sizeof(*tx_data));",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "string_list_append",
          "old_text": null,
          "new_text": "string_list_append(&affected_refnames,\n\t\t\t\t   transaction->updates[i]->refname)",
          "old_line_content": "\t * Now that we have counted updates per stack we can preallocate their",
          "new_line_content": "\t\tstring_list_append(&affected_refnames,",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "CALLOC_ARRAY",
          "old_text": null,
          "new_text": "CALLOC_ARRAY(tx_data->args[i].updates, tx_data->args[i].updates_expected)",
          "old_line_content": "\t * Fail if a refname appears more than once in the transaction.",
          "new_line_content": "\t\tCALLOC_ARRAY(tx_data->args[i].updates, tx_data->args[i].updates_expected);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "string_list_sort",
          "old_text": null,
          "new_text": "string_list_sort(&affected_refnames)",
          "old_line_content": "",
          "new_line_content": "\tstring_list_sort(&affected_refnames);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, \"HEAD\", NULL)",
          "old_line_content": "",
          "new_line_content": "\tret = read_ref_without_reload(stack_for(refs, \"HEAD\", NULL), \"HEAD\", &head_oid,",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, u->refname, &rewritten_ref)",
          "old_line_content": "\t\t    !(u->flags & REF_LOG_ONLY)) {",
          "new_line_content": "\t\tstack = stack_for(refs, u->refname, &rewritten_ref);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "parse_object",
          "old_text": null,
          "new_text": "parse_object(refs->base.repo, &u->new_oid)",
          "old_line_content": "\t\t\t\tret = -1;",
          "new_line_content": "\t\t\tstruct object *o = parse_object(refs->base.repo, &u->new_oid);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err,\n\t\t\t\t\t    _(\"trying to write ref '%s' with nonexistent object %s\"),\n\t\t\t\t\t    u->refname, oid_to_hex(&u->new_oid))",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tstrbuf_addf(err,",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"trying to write ref '%s' with nonexistent object %s\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t    _(\"trying to write ref '%s' with nonexistent object %s\"),",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "is_branch",
          "old_text": null,
          "new_text": "is_branch(u->refname)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\tif (o->type != OBJ_COMMIT && is_branch(u->refname)) {",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"trying to write non-commit object %s to branch '%s'\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tstrbuf_addf(err, _(\"trying to write non-commit object %s to branch '%s'\"),",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&u->new_oid)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t    oid_to_hex(&u->new_oid), u->refname);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rewritten_ref, head_referent.buf)",
          "old_line_content": "\t\t\t * transaction. This check is O(lg N) in the transaction",
          "new_line_content": "\t\t    !strcmp(rewritten_ref, head_referent.buf)) {",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "string_list_has_string",
          "old_text": null,
          "new_text": "string_list_has_string(&affected_refnames, \"HEAD\")",
          "old_line_content": "\t\t\t\t\t    u->refname);",
          "new_line_content": "\t\t\tif (string_list_has_string(&affected_refnames, \"HEAD\")) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err,\n\t\t\t\t\t    _(\"multiple updates for 'HEAD' (including one \"\n\t\t\t\t\t    \"via its referent '%s') are not allowed\"),\n\t\t\t\t\t    u->refname)",
          "old_line_content": "\t\t\t\tgoto done;",
          "new_line_content": "\t\t\t\tstrbuf_addf(err,",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"multiple updates for 'HEAD' (including one \"\n\t\t\t\t\t    \"via its referent '%s') are not allowed\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t    _(\"multiple updates for 'HEAD' (including one \"",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "ref_transaction_add_update",
          "old_text": null,
          "new_text": "ref_transaction_add_update(\n\t\t\t\t\ttransaction, \"HEAD\",\n\t\t\t\t\tu->flags | REF_LOG_ONLY | REF_NO_DEREF,\n\t\t\t\t\t&u->new_oid, &u->old_oid, u->msg)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tnew_update = ref_transaction_add_update(",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "string_list_insert",
          "old_text": null,
          "new_text": "string_list_insert(&affected_refnames, new_update->refname)",
          "old_line_content": "\t\tif (ret < 0)",
          "new_line_content": "\t\t\tstring_list_insert(&affected_refnames, new_update->refname);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "read_ref_without_reload",
          "old_text": null,
          "new_text": "read_ref_without_reload(stack, rewritten_ref,\n\t\t\t\t\t      &current_oid, &referent, &u->type)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\tret = read_ref_without_reload(stack, rewritten_ref,",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&u->old_oid)",
          "old_line_content": "\t\t\t * symref splitting. But we do want to verify that",
          "new_line_content": "\t\tif (ret > 0 && (!(u->flags & REF_HAVE_OLD) || is_null_oid(&u->old_oid))) {",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "refs_verify_refname_available",
          "old_text": null,
          "new_text": "refs_verify_refname_available(ref_store, u->refname,\n\t\t\t\t\t\t\t    &affected_refnames, NULL, err)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\tret = refs_verify_refname_available(ref_store, u->refname,",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&u->new_oid)",
          "old_line_content": "\t\t\t }",
          "new_line_content": "\t\t\t if (u->flags & REF_HAVE_NEW && !is_null_oid(&u->new_oid)) {",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "queue_transaction_update",
          "old_text": null,
          "new_text": "queue_transaction_update(refs, tx_data, u,\n\t\t\t\t\t\t\t\t&current_oid, err)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t ret = queue_transaction_update(refs, tx_data, u,",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t    \"unable to resolve reference '%s'\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "original_update_refname",
          "old_text": null,
          "new_text": "original_update_refname(u)",
          "old_line_content": "\t\tif (u->type & REF_ISSYMREF) {",
          "new_line_content": "\t\t\t\t    original_update_refname(u), u->refname);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t\t    \"error reading reference\")",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rewritten_ref, \"HEAD\")",
          "old_line_content": "\t\t\t\t * update the branch that the symref points to.",
          "new_line_content": "\t\t\t\tif (!strcmp(rewritten_ref, \"HEAD\"))",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "ref_transaction_add_update",
          "old_text": null,
          "new_text": "ref_transaction_add_update(\n\t\t\t\t\t\ttransaction, referent.buf, new_flags,\n\t\t\t\t\t\t&u->new_oid, &u->old_oid, u->msg)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\tnew_update = ref_transaction_add_update(",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "string_list_has_string",
          "old_text": null,
          "new_text": "string_list_has_string(&affected_refnames, new_update->refname)",
          "old_line_content": "\t\t\t\t\tret = TRANSACTION_NAME_CONFLICT;",
          "new_line_content": "\t\t\t\tif (string_list_has_string(&affected_refnames, new_update->refname)) {",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "strbuf_addf",
          "old_text": null,
          "new_text": "strbuf_addf(err,\n\t\t\t\t\t\t    _(\"multiple updates for '%s' (including one \"\n\t\t\t\t\t\t    \"via symref '%s') are not allowed\"),\n\t\t\t\t\t\t    referent.buf, u->refname)",
          "old_line_content": "\t\t\t\t\tgoto done;",
          "new_line_content": "\t\t\t\t\tstrbuf_addf(err,",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"multiple updates for '%s' (including one \"\n\t\t\t\t\t\t    \"via symref '%s') are not allowed\")",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t    _(\"multiple updates for '%s' (including one \"",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "string_list_insert",
          "old_text": null,
          "new_text": "string_list_insert(&affected_refnames, new_update->refname)",
          "old_line_content": "\t\t * Verify that the old object matches our expectations. Note",
          "new_line_content": "\t\t\t\tstring_list_insert(&affected_refnames, new_update->refname);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t    \"reference already exists\")",
          "old_line_content": "\t\t\t\t\t    \"reference is missing but expected %s\"),",
          "new_line_content": "\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&current_oid)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\telse if (is_null_oid(&current_oid))",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t    \"is at %s but expected %s\")",
          "old_line_content": "\t\t\tret = -1;",
          "new_line_content": "\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "original_update_refname",
          "old_text": null,
          "new_text": "original_update_refname(u)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t    original_update_refname(u),",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&current_oid)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t    oid_to_hex(&current_oid),",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "oid_to_hex",
          "old_text": null,
          "new_text": "oid_to_hex(&u->old_oid)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\t\t\t\t    oid_to_hex(&u->old_oid));",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "oideq",
          "old_text": null,
          "new_text": "oideq(&current_oid, &u->new_oid)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t    (u->flags & REF_HAVE_NEW && !oideq(&current_oid, &u->new_oid))) {",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "queue_transaction_update",
          "old_text": null,
          "new_text": "queue_transaction_update(refs, tx_data, u,\n\t\t\t\t\t\t       &current_oid, err)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tret = queue_transaction_update(refs, tx_data, u,",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "free_transaction_data",
          "old_text": null,
          "new_text": "free_transaction_data(tx_data)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree_transaction_data(tx_data);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "reftable_error_str",
          "old_text": null,
          "new_text": "reftable_error_str(ret)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t    reftable_error_str(ret));",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "string_list_clear",
          "old_text": null,
          "new_text": "string_list_clear(&affected_refnames, 0)",
          "old_line_content": "}",
          "new_line_content": "\tstring_list_clear(&affected_refnames, 0);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&referent)",
          "old_line_content": "",
          "new_line_content": "\tstrbuf_release(&referent);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&head_referent)",
          "old_line_content": "static int reftable_be_transaction_abort(struct ref_store *ref_store,",
          "new_line_content": "\tstrbuf_release(&head_referent);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "free_transaction_data",
          "old_text": null,
          "new_text": "free_transaction_data(tx_data)",
          "old_line_content": "static int transaction_update_cmp(const void *a, const void *b)",
          "new_line_content": "\tfree_transaction_data(tx_data);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(((struct reftable_transaction_update *)a)->update->refname,\n\t\t      ((struct reftable_transaction_update *)b)->update->refname)",
          "old_line_content": "{",
          "new_line_content": "\treturn strcmp(((struct reftable_transaction_update *)a)->update->refname,",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(arg->stack)",
          "old_line_content": "",
          "new_line_content": "\t\treftable_stack_merged_table(arg->stack);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "QSORT",
          "old_text": null,
          "new_text": "QSORT(arg->updates, arg->updates_nr, transaction_update_cmp)",
          "old_line_content": "\t\tstruct reftable_transaction_update *tx_update = &arg->updates[i];",
          "new_line_content": "\tQSORT(arg->updates, arg->updates_nr, transaction_update_cmp);",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, ts, ts)",
          "old_line_content": "",
          "new_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&u->new_oid)",
          "old_line_content": "\t\t\t * When deleting refs we also delete all reflog entries",
          "new_line_content": "\t\tif (u->flags & REF_HAVE_NEW && !(u->type & REF_ISSYMREF) && is_null_oid(&u->new_oid)) {",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_log",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_log(mt, &it, u->refname)",
          "old_line_content": "\t\t\t\tif (ret < 0)",
          "new_line_content": "\t\t\tret = reftable_merged_table_seek_log(mt, &it, u->refname);",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\t} else if (u->flags & REF_HAVE_NEW &&",
          "new_line_content": "\t\t\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "\t\t\t   (u->flags & REF_FORCE_CREATE_REFLOG ||",
          "new_line_content": "\t\t\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\t\tlog->update_index = ts;",
          "new_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "fill_reftable_log_record",
          "old_text": null,
          "new_text": "fill_reftable_log_record(log)",
          "old_line_content": "\t\t\tlog->value.update.message =",
          "new_line_content": "\t\t\tfill_reftable_log_record(log);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(u->refname)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tlog->refname = xstrdup(u->refname);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(log->value.update.new_hash, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemcpy(log->value.update.new_hash, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(log->value.update.old_hash, tx_update->current_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\tif (u->flags & REF_LOG_ONLY)",
          "new_line_content": "\t\t\tmemcpy(log->value.update.old_hash, tx_update->current_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "xstrndup",
          "old_text": null,
          "new_text": "xstrndup(u->msg, arg->refs->write_options.block_size / 2)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\txstrndup(u->msg, arg->refs->write_options.block_size / 2);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&u->new_oid)",
          "old_line_content": "\t\t\t};",
          "new_line_content": "\t\tif (u->flags & REF_HAVE_NEW && is_null_oid(&u->new_oid)) {",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "reftable_writer_add_ref",
          "old_text": null,
          "new_text": "reftable_writer_add_ref(writer, &ref)",
          "old_line_content": "\t\t\tstruct object_id peeled;",
          "new_line_content": "\t\t\tret = reftable_writer_add_ref(writer, &ref);",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tmemcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val2.value, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tmemcpy(ref.value.val2.value, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val1, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\t\t\tgoto done;",
          "new_line_content": "\t\t\t\tmemcpy(ref.value.val1, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "reftable_writer_add_ref",
          "old_text": null,
          "new_text": "reftable_writer_add_ref(writer, &ref)",
          "old_line_content": "",
          "new_line_content": "\t\t\tret = reftable_writer_add_ref(writer, &ref);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "reftable_writer_add_logs",
          "old_text": null,
          "new_text": "reftable_writer_add_logs(writer, logs, logs_nr)",
          "old_line_content": "done:",
          "new_line_content": "\t\tret = reftable_writer_add_logs(writer, logs, logs_nr);",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "}",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&logs[i])",
          "old_line_content": "static int reftable_be_transaction_finish(struct ref_store *ref_store,",
          "new_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(logs)",
          "old_line_content": "\t\t\t\t\t  struct ref_transaction *transaction,",
          "new_line_content": "\tfree(logs);",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "reftable_addition_commit",
          "old_text": null,
          "new_text": "reftable_addition_commit(tx_data->args[i].addition)",
          "old_line_content": "done:",
          "new_line_content": "\t\tret = reftable_addition_commit(tx_data->args[i].addition);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"reftable: transaction failure: %s\")",
          "old_line_content": "}",
          "new_line_content": "\t\tstrbuf_addf(err, _(\"reftable: transaction failure: %s\"),",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "reftable_error_str",
          "old_text": null,
          "new_text": "reftable_error_str(ret)",
          "old_line_content": "",
          "new_line_content": "\t\t\t    reftable_error_str(ret));",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "ref_transaction_commit",
          "old_text": null,
          "new_text": "ref_transaction_commit(transaction, err)",
          "old_line_content": "{",
          "new_line_content": "\treturn ref_transaction_commit(transaction, err);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE | REF_STORE_ODB, \"pack_refs\")",
          "old_line_content": "\t\treturn refs->err;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE | REF_STORE_ODB, \"pack_refs\");",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "reftable_stack_compact_all",
          "old_text": null,
          "new_text": "reftable_stack_compact_all(stack, NULL)",
          "old_line_content": "\t\tgoto out;",
          "new_line_content": "\tret = reftable_stack_compact_all(stack, NULL);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "reftable_stack_clean",
          "old_text": null,
          "new_text": "reftable_stack_clean(stack)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tret = reftable_stack_clean(stack);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "reftable_stack_next_update_index",
          "old_text": null,
          "new_text": "reftable_stack_next_update_index(create->stack)",
          "old_line_content": "\t\t.update_index = ts,",
          "new_line_content": "\tuint64_t ts = reftable_stack_next_update_index(create->stack);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, ts, ts)",
          "old_line_content": "\t\treturn ret;",
          "new_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "reftable_writer_add_ref",
          "old_text": null,
          "new_text": "reftable_writer_add_ref(writer, &ref)",
          "old_line_content": "\t * Note that it is important to try and resolve the reference before we",
          "new_line_content": "\tret = reftable_writer_add_ref(writer, &ref);",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "should_write_log",
          "old_text": null,
          "new_text": "should_write_log(&create->refs->base, create->refname)",
          "old_line_content": "\tlog.update_index = ts;",
          "new_line_content": "\t    !should_write_log(&create->refs->base, create->refname))",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(log.value.update.old_hash, old_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "}",
          "new_line_content": "\t\tmemcpy(log.value.update.old_hash, old_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "reftable_writer_add_log",
          "old_text": null,
          "new_text": "reftable_writer_add_log(writer, &log)",
          "old_line_content": "static int reftable_be_create_symref(struct ref_store *ref_store,",
          "new_line_content": "\tret = reftable_writer_add_log(writer, &log);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\t\t\t     const char *refname,",
          "new_line_content": "\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_symref\")",
          "old_line_content": "\t\t.stack = stack,",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_symref\");",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\t\t.refname = refname,",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "reftable_stack_add",
          "old_text": null,
          "new_text": "reftable_stack_add(stack, &write_create_symref_table, &arg)",
          "old_line_content": "\t\tif (err.len)",
          "new_line_content": "\tret = reftable_stack_add(stack, &write_create_symref_table, &arg);",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s\", err.buf)",
          "old_line_content": "",
          "new_line_content": "\t\t\terror(\"%s\", err.buf);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"unable to write symref for %s: %s\", refname,\n\t\t\t      reftable_error_str(ret))",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\t\terror(\"unable to write symref for %s: %s\", refname,",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "reftable_error_str",
          "old_text": null,
          "new_text": "reftable_error_str(ret)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t      reftable_error_str(ret));",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&err)",
          "old_line_content": "\tstruct reftable_ref_store *refs;",
          "new_line_content": "\tstrbuf_release(&err);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(arg->stack)",
          "old_line_content": "\tstruct strbuf errbuf = STRBUF_INIT;",
          "new_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(arg->stack);",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refname %s not found\")",
          "old_line_content": "\t\t\t    arg->oldname);",
          "new_line_content": "\t\tret = error(_(\"refname %s not found\"), arg->oldname);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"refname %s is a symbolic ref, copying it is not supported\")",
          "old_line_content": "\t/*",
          "new_line_content": "\t\tret = error(_(\"refname %s is a symbolic ref, copying it is not supported\"),",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(arg->oldname, arg->newname)",
          "old_line_content": "\t/*",
          "new_line_content": "\tif (!strcmp(arg->oldname, arg->newname)) {",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "string_list_insert",
          "old_text": null,
          "new_text": "string_list_insert(&skip, arg->oldname)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\t\tstring_list_insert(&skip, arg->oldname);",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "refs_verify_refname_available",
          "old_text": null,
          "new_text": "refs_verify_refname_available(&arg->refs->base, arg->newname,\n\t\t\t\t\t    NULL, &skip, &errbuf)",
          "old_line_content": "\t}",
          "new_line_content": "\tret = refs_verify_refname_available(&arg->refs->base, arg->newname,",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s\", errbuf.buf)",
          "old_line_content": "\t * When deleting the old reference we have to use two update indices:",
          "new_line_content": "\t\terror(\"%s\", errbuf.buf);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "reftable_stack_next_update_index",
          "old_text": null,
          "new_text": "reftable_stack_next_update_index(arg->stack)",
          "old_line_content": "\t/*",
          "new_line_content": "\tdeletion_ts = creation_ts = reftable_stack_next_update_index(arg->stack);",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, deletion_ts, creation_ts)",
          "old_line_content": "\t */",
          "new_line_content": "\treftable_writer_set_limits(writer, deletion_ts, creation_ts);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "reftable_writer_add_refs",
          "old_text": null,
          "new_text": "reftable_writer_add_refs(writer, refs, arg->delete_old ? 2 : 1)",
          "old_line_content": "\t * When deleting the old branch we need to create a reflog entry on the",
          "new_line_content": "\tret = reftable_writer_add_refs(writer, refs, arg->delete_old ? 2 : 1);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\tlogs[logs_nr].value.update.message =",
          "new_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "xstrndup",
          "old_text": null,
          "new_text": "xstrndup(arg->logmsg, arg->refs->write_options.block_size / 2)",
          "old_line_content": "\t\tif (ret < 0)",
          "new_line_content": "\t\t\txstrndup(arg->logmsg, arg->refs->write_options.block_size / 2);",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(logs[logs_nr].value.update.old_hash, old_ref.value.val1, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\t\tgoto done;",
          "new_line_content": "\t\tmemcpy(logs[logs_nr].value.update.old_hash, old_ref.value.val1, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "read_ref_without_reload",
          "old_text": null,
          "new_text": "read_ref_without_reload(arg->stack, \"HEAD\", &head_oid, &head_referent, &head_type)",
          "old_line_content": "",
          "new_line_content": "\t\tret = read_ref_without_reload(arg->stack, \"HEAD\", &head_oid, &head_referent, &head_type);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(head_referent.buf, arg->oldname)",
          "old_line_content": "\t\t * branch name, which will append a reflog entry for HEAD in",
          "new_line_content": "\t\tappend_head_reflog = (head_type & REF_ISSYMREF) && !strcmp(head_referent.buf, arg->oldname);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&head_referent)",
          "old_line_content": "\t\t * case it points to the old branch.",
          "new_line_content": "\t\tstrbuf_release(&head_referent);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\tlogs[logs_nr].value.update.message =",
          "new_line_content": "\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "xstrndup",
          "old_text": null,
          "new_text": "xstrndup(arg->logmsg, arg->refs->write_options.block_size / 2)",
          "old_line_content": "\t * In addition to writing the reflog entry for the new branch, we also",
          "new_line_content": "\t\txstrndup(arg->logmsg, arg->refs->write_options.block_size / 2);",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(logs[logs_nr].value.update.new_hash, old_ref.value.val1, GIT_MAX_RAWSZ)",
          "old_line_content": "\t * copy over all log entries from the old reflog. Last but not least,",
          "new_line_content": "\tmemcpy(logs[logs_nr].value.update.new_hash, old_ref.value.val1, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &old_log)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tret = reftable_iterator_next_log(&it, &old_log);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "ALLOC_GROW",
          "old_text": null,
          "new_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "old_line_content": "\t\t\tlogs_nr++;",
          "new_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&old_log, 0, sizeof(old_log))",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\t\tmemset(&old_log, 0, sizeof(old_log));",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "string_list_clear",
          "old_text": null,
          "new_text": "string_list_clear(&skip, 0)",
          "old_line_content": "\t\tlogs[i].refname = NULL;",
          "new_line_content": "\tstring_list_clear(&skip, 0);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&logs[i])",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(logs)",
          "old_line_content": "",
          "new_line_content": "\tfree(logs);",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": null,
          "new_api": "reftable_ref_record_release",
          "old_text": null,
          "new_text": "reftable_ref_record_release(&old_ref)",
          "old_line_content": "static int reftable_be_rename_ref(struct ref_store *ref_store,",
          "new_line_content": "\treftable_ref_record_release(&old_ref);",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&old_log)",
          "old_line_content": "\t\t\t\t  const char *oldrefname,",
          "new_line_content": "\treftable_log_record_release(&old_log);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"rename_ref\")",
          "old_line_content": "\t\t.oldname = oldrefname,",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"rename_ref\");",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, newrefname, &newrefname)",
          "old_line_content": "\t\t.newname = newrefname,",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, newrefname, &newrefname);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "done:",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "reftable_stack_add",
          "old_text": null,
          "new_text": "reftable_stack_add(stack, &write_copy_table, &arg)",
          "old_line_content": "}",
          "new_line_content": "\tret = reftable_stack_add(stack, &write_copy_table, &arg);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\t\t\t\tconst char *oldrefname,",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"copy_ref\")",
          "old_line_content": "\t\t.oldname = oldrefname,",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"copy_ref\");",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, newrefname, &newrefname)",
          "old_line_content": "\t\t.newname = newrefname,",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, newrefname, &newrefname);",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "done:",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "reftable_stack_add",
          "old_text": null,
          "new_text": "reftable_stack_add(stack, &write_copy_table, &arg)",
          "old_line_content": "}",
          "new_line_content": "\tret = reftable_stack_add(stack, &write_copy_table, &arg);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\tstruct ref_iterator base;",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&iter->iter, &iter->log)",
          "old_line_content": "\t\t * We want the refnames that we have reflogs for, so we skip if",
          "new_line_content": "\t\titer->err = reftable_iterator_next_log(&iter->iter, &iter->log);",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(iter->log.refname, iter->last_name.buf)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tif (!strcmp(iter->log.refname, iter->last_name.buf))",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "strbuf_reset",
          "old_text": null,
          "new_text": "strbuf_reset(&iter->last_name)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tstrbuf_reset(&iter->last_name);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "strbuf_addstr",
          "old_text": null,
          "new_text": "strbuf_addstr(&iter->last_name, iter->log.refname)",
          "old_line_content": "",
          "new_line_content": "\t\tstrbuf_addstr(&iter->last_name, iter->log.refname);",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "ref_iterator_abort",
          "old_text": null,
          "new_text": "ref_iterator_abort(ref_iterator)",
          "old_line_content": "\tif (iter->err < 0) {",
          "new_line_content": "\t\tif (ref_iterator_abort(ref_iterator) != ITER_DONE)",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "ref_iterator_abort",
          "old_text": null,
          "new_text": "ref_iterator_abort(ref_iterator)",
          "old_line_content": "}",
          "new_line_content": "\t\tref_iterator_abort(ref_iterator);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "BUG",
          "old_text": null,
          "new_text": "BUG(\"reftable reflog iterator cannot be peeled\")",
          "old_line_content": "{",
          "new_line_content": "\tBUG(\"reftable reflog iterator cannot be peeled\");",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&iter->log)",
          "old_line_content": "}",
          "new_line_content": "\treftable_log_record_release(&iter->log);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&iter->iter)",
          "old_line_content": "",
          "new_line_content": "\treftable_iterator_destroy(&iter->iter);",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "strbuf_release",
          "old_text": null,
          "new_text": "strbuf_release(&iter->last_name)",
          "old_line_content": "static struct ref_iterator_vtable reftable_reflog_iterator_vtable = {",
          "new_line_content": "\tstrbuf_release(&iter->last_name);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(iter)",
          "old_line_content": "\t.advance = reftable_reflog_iterator_advance,",
          "new_line_content": "\tfree(iter);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "xcalloc",
          "old_text": null,
          "new_text": "xcalloc(1, sizeof(*iter))",
          "old_line_content": "\tret = refs->err;",
          "new_line_content": "\titer = xcalloc(1, sizeof(*iter));",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "base_ref_iterator_init",
          "old_text": null,
          "new_text": "base_ref_iterator_init(&iter->base, &reftable_reflog_iterator_vtable)",
          "old_line_content": "\tif (ret)",
          "new_line_content": "\tbase_ref_iterator_init(&iter->base, &reftable_reflog_iterator_vtable);",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "strbuf_init",
          "old_text": null,
          "new_text": "strbuf_init(&iter->last_name, 0)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\tstrbuf_init(&iter->last_name, 0);",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "",
          "new_line_content": "\tmerged_table = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_log",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_log(merged_table, &iter->iter, \"\")",
          "old_line_content": "\titer->err = ret;",
          "new_line_content": "\tret = reftable_merged_table_seek_log(merged_table, &iter->iter, \"\");",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_iterator_begin\")",
          "old_line_content": "\t\treturn &main_iter->base;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_iterator_begin\");",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": null,
          "new_api": "reflog_iterator_for_stack",
          "old_text": null,
          "new_text": "reflog_iterator_for_stack(refs, refs->main_stack)",
          "old_line_content": "",
          "new_line_content": "\tmain_iter = reflog_iterator_for_stack(refs, refs->main_stack);",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": null,
          "new_api": "reflog_iterator_for_stack",
          "old_text": null,
          "new_text": "reflog_iterator_for_stack(refs, refs->worktree_stack)",
          "old_line_content": "",
          "new_line_content": "\tworktree_iter = reflog_iterator_for_stack(refs, refs->worktree_stack);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "merge_ref_iterator_begin",
          "old_text": null,
          "new_text": "merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,\n\t\t\t\t\tref_iterator_select, NULL)",
          "old_line_content": "\t\t\t    each_reflog_ent_fn fn,",
          "new_line_content": "\treturn merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&old_oid, log->value.update.old_hash)",
          "old_line_content": "\t * then this is the reflog existence marker. The caller must",
          "new_line_content": "\toidread(&old_oid, log->value.update.old_hash);",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "oidread",
          "old_text": null,
          "new_text": "oidread(&new_oid, log->value.update.new_hash)",
          "old_line_content": "\t * not be aware of it.",
          "new_line_content": "\toidread(&new_oid, log->value.update.new_hash);",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "fmt_ident",
          "old_text": null,
          "new_text": "fmt_ident(log->value.update.name, log->value.update.email,\n\t\t\t\t   WANT_COMMITTER_IDENT, NULL, IDENT_NO_DATE)",
          "old_line_content": "}",
          "new_line_content": "\tfull_committer = fmt_ident(log->value.update.name, log->value.update.email,",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "fn",
          "old_text": null,
          "new_text": "fn(&old_oid, &new_oid, full_committer,\n\t\t  log->value.update.time, log->value.update.tz_offset,\n\t\t  log->value.update.message, cb_data)",
          "old_line_content": "static int reftable_be_for_each_reflog_ent_reverse(struct ref_store *ref_store,",
          "new_line_content": "\treturn fn(&old_oid, &new_oid, full_committer,",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent_reverse\")",
          "old_line_content": "\tint ret;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent_reverse\");",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\tmt = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "static int reftable_be_for_each_reflog_ent(struct ref_store *ref_store,",
          "new_line_content": "\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "\t\t\t\t\t   const char *refname,",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent\")",
          "old_line_content": "\tsize_t logs_alloc = 0, logs_nr = 0, i;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent\");",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\tint ret;",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_log",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "old_line_content": "\t\tif (ret < 0)",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\t\tret = 0;",
          "new_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(log.refname, refname)",
          "old_line_content": "",
          "new_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": null,
          "new_api": "yield_log_record",
          "old_text": null,
          "new_text": "yield_log_record(&logs[i], fn, cb_data)",
          "old_line_content": "done:",
          "new_line_content": "\t\tret = yield_log_record(&logs[i], fn, cb_data);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "}",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&logs[i])",
          "old_line_content": "static int reftable_be_reflog_exists(struct ref_store *ref_store,",
          "new_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(logs)",
          "old_line_content": "\t\t\t\t     const char *refname)",
          "new_line_content": "\tfree(logs);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_exists\")",
          "old_line_content": "\tint ret;",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_exists\");",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(stack)",
          "old_line_content": "\tret = refs->err;",
          "new_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(stack);",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": null,
          "new_api": "reftable_merged_table_seek_log",
          "old_text": null,
          "new_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "old_line_content": "\t * Check whether we get at least one log record for the given ref name.",
          "new_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\tgoto done;",
          "new_line_content": "\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(log.refname, refname)",
          "old_line_content": "\tif (ret < 0)",
          "new_line_content": "\tret = strcmp(log.refname, refname) == 0;",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "}",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "",
          "new_line_content": "\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "reftable_stack_next_update_index",
          "old_text": null,
          "new_text": "reftable_stack_next_update_index(arg->stack)",
          "old_line_content": "\tif (ret <= 0)",
          "new_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": null,
          "new_api": "reftable_stack_read_log",
          "old_text": null,
          "new_text": "reftable_stack_read_log(arg->stack, arg->refname, &log)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_read_log(arg->stack, arg->refname, &log);",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, ts, ts)",
          "old_line_content": "\t * them to their callers.",
          "new_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "xstrdup",
          "old_text": null,
          "new_text": "xstrdup(arg->refname)",
          "old_line_content": "done:",
          "new_line_content": "\tlog.refname = xstrdup(arg->refname);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": null,
          "new_api": "reftable_writer_add_log",
          "old_text": null,
          "new_text": "reftable_writer_add_log(writer, &log)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\tret = reftable_writer_add_log(writer, &log);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "static int reftable_be_create_reflog(struct ref_store *ref_store,",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "\t\t\t\t     const char *refname,",
          "new_line_content": "\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_reflog\")",
          "old_line_content": "\t\t.refname = refname,",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_reflog\");",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\t};",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "reftable_stack_reload",
          "old_text": null,
          "new_text": "reftable_stack_reload(stack)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_reload(stack);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "reftable_stack_add",
          "old_text": null,
          "new_text": "reftable_stack_add(stack, &write_reflog_existence_table, &arg)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_add(stack, &write_reflog_existence_table, &arg);",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "reftable_stack_merged_table",
          "old_text": null,
          "new_text": "reftable_stack_merged_table(arg->stack)",
          "old_line_content": "",
          "new_line_content": "\t\treftable_stack_merged_table(arg->stack);",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "reftable_stack_next_update_index",
          "old_text": null,
          "new_text": "reftable_stack_next_update_index(arg->stack)",
          "old_line_content": "\t/*",
          "new_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, ts, ts)",
          "old_line_content": "\t * better marker right now.",
          "new_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "reftable_iterator_next_log",
          "old_text": null,
          "new_text": "reftable_iterator_next_log(&it, &log)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(log.refname, arg->refname)",
          "old_line_content": "\t\ttombstone.refname = (char *)arg->refname;",
          "new_line_content": "\t\tif (ret > 0 || strcmp(log.refname, arg->refname)) {",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "reftable_writer_add_log",
          "old_text": null,
          "new_text": "reftable_writer_add_log(writer, &tombstone)",
          "old_line_content": "\treturn ret;",
          "new_line_content": "\t\tret = reftable_writer_add_log(writer, &tombstone);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": null,
          "new_api": "reftable_log_record_release",
          "old_text": null,
          "new_text": "reftable_log_record_release(&log)",
          "old_line_content": "static int reftable_be_delete_reflog(struct ref_store *ref_store,",
          "new_line_content": "\treftable_log_record_release(&log);",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "reftable_iterator_destroy",
          "old_text": null,
          "new_text": "reftable_iterator_destroy(&it)",
          "old_line_content": "\t\t\t\t     const char *refname)",
          "new_line_content": "\treftable_iterator_destroy(&it);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "reftable_be_downcast",
          "old_text": null,
          "new_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"delete_reflog\")",
          "old_line_content": "\t};",
          "new_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"delete_reflog\");",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "stack_for",
          "old_text": null,
          "new_text": "stack_for(refs, refname, &refname)",
          "old_line_content": "\tint ret;",
          "new_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "reftable_stack_add",
          "old_text": null,
          "new_text": "reftable_stack_add(stack, &write_reflog_delete_table, &arg)",
          "old_line_content": "",
          "new_line_content": "\tret = reftable_stack_add(stack, &write_reflog_delete_table, &arg);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(ret != REFTABLE_API_ERROR)",
          "old_line_content": "\tstruct reftable_stack *stack;",
          "new_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": null,
          "new_api": "reftable_stack_next_update_index",
          "old_text": null,
          "new_text": "reftable_stack_next_update_index(arg->stack)",
          "old_line_content": "\tfor (i = 0; i < arg->len; i++)",
          "new_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "reftable_writer_set_limits",
          "old_text": null,
          "new_text": "reftable_writer_set_limits(writer, ts, ts)",
          "old_line_content": "",
          "new_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "is_null_oid",
          "old_text": null,
          "new_text": "is_null_oid(&arg->update_oid)",
          "old_line_content": "\t\tref.update_index = ts;",
          "new_line_content": "\tif (!is_null_oid(&arg->update_oid)) {",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "peel_object",
          "old_text": null,
          "new_text": "peel_object(&arg->update_oid, &peeled)",
          "old_line_content": "\t\t\tref.value_type = REFTABLE_REF_VAL1;",
          "new_line_content": "\t\tif (!peel_object(&arg->update_oid, &peeled)) {",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tmemcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val2.value, arg->update_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemcpy(ref.value.val2.value, arg->update_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(ref.value.val1, arg->update_oid.hash, GIT_MAX_RAWSZ)",
          "old_line_content": "\t\t\treturn ret;",
          "new_line_content": "\t\t\tmemcpy(ref.value.val1, arg->update_oid.hash, GIT_MAX_RAWSZ);",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": null,
          "new_api": "reftable_writer_add_ref",
          "old_text": null,
          "new_text": "reftable_writer_add_ref(writer, &ref)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\tret = reftable_writer_add_ref(writer, &ref);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2055,
          "old_api": "reftable_writer_add_log",
          "new_api": null,
          "old_text": "reftable_writer_add_log(writer, &log)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_writer_add_log(writer, &log);",
          "new_line_content": "\t\t\t.refname = (char *)arg->refname,",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": "reftable_writer_add_log",
          "new_api": null,
          "old_text": "reftable_writer_add_log(writer, &arg->records[i])",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_writer_add_log(writer, &arg->records[i]);",
          "new_line_content": "\t\tif (ret)",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"reflog_expire\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"reflog_expire\");",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t * On the plus side, because we do the expiration per ref, we can easily",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(stack);",
          "new_line_content": "\t * insert the reflog existence dummies.",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "reftable_stack_new_addition",
          "new_api": null,
          "old_text": "reftable_stack_new_addition(&add, stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_new_addition(&add, stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "reftable_stack_read_ref",
          "new_api": null,
          "old_text": "reftable_stack_read_ref(stack, refname, &ref_record)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_read_ref(stack, refname, &ref_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "reftable_ref_record_val1",
          "new_api": null,
          "old_text": "reftable_ref_record_val1(&ref_record)",
          "new_text": null,
          "old_line_content": "\tif (reftable_ref_record_val1(&ref_record))",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": "reftable_ref_record_val1",
          "new_api": null,
          "old_text": "reftable_ref_record_val1(&ref_record)",
          "new_text": null,
          "old_line_content": "\t\toidread(&oid, reftable_ref_record_val1(&ref_record));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(log.refname, refname)",
          "new_text": null,
          "old_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "new_line_content": "\t\tstruct object_id old_oid, new_oid;",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\t\t\treftable_log_record_release(&log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&new_oid)",
          "new_text": null,
          "old_line_content": "\t\tif (is_null_oid(&old_oid) && is_null_oid(&new_oid)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\t\t\treftable_log_record_release(&log);",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "CALLOC_ARRAY",
          "new_api": null,
          "old_text": "CALLOC_ARRAY(rewritten, logs_nr)",
          "new_text": null,
          "old_line_content": "\tCALLOC_ARRAY(rewritten, logs_nr);",
          "new_line_content": "\t *     deletion.",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&old_oid, logs[i].value.update.old_hash)",
          "new_text": null,
          "old_line_content": "\t\toidread(&old_oid, logs[i].value.update.old_hash);",
          "new_line_content": "\tfor (i = logs_nr; i--;) {",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&new_oid, logs[i].value.update.new_hash)",
          "new_text": null,
          "old_line_content": "\t\toidread(&new_oid, logs[i].value.update.new_hash);",
          "new_line_content": "\t\tstruct reftable_log_record *dest = &rewritten[i];",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "should_prune_fn",
          "new_api": null,
          "old_text": "should_prune_fn(&old_oid, &new_oid, logs[i].value.update.email,\n\t\t\t\t    (timestamp_t)logs[i].value.update.time,\n\t\t\t\t    logs[i].value.update.tz_offset,\n\t\t\t\t    logs[i].value.update.message,\n\t\t\t\t    policy_cb_data)",
          "new_text": null,
          "old_line_content": "\t\tif (should_prune_fn(&old_oid, &new_oid, logs[i].value.update.email,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dest->value.update.old_hash, last_hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(dest->value.update.old_hash, last_hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\t\t\t    logs[i].value.update.message,",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": "reftable_ref_record_val1",
          "new_api": null,
          "old_text": "reftable_ref_record_val1(&ref_record)",
          "new_text": null,
          "old_line_content": "\t    reftable_ref_record_val1(&ref_record))",
          "new_line_content": "\t\t\tlast_hash = logs[i].value.update.new_hash;",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&arg.update_oid, last_hash)",
          "new_text": null,
          "old_line_content": "\t\toidread(&arg.update_oid, last_hash);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": "reftable_addition_add",
          "new_api": null,
          "old_text": "reftable_addition_add(add, &write_reflog_expiry_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_addition_add(add, &write_reflog_expiry_table, &arg);",
          "new_line_content": "\targ.records = rewritten;",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": "reftable_addition_commit",
          "new_api": null,
          "old_text": "reftable_addition_commit(add)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_addition_commit(add);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": "cleanup_fn",
          "new_api": null,
          "old_text": "cleanup_fn(policy_cb_data)",
          "new_text": null,
          "old_line_content": "\t\tcleanup_fn(policy_cb_data);",
          "new_line_content": "\tif (!(flags & EXPIRE_REFLOGS_DRY_RUN))",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(&ref_record)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(&ref_record);",
          "new_line_content": "done:",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "\tif (add)",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&logs[i])",
          "new_text": null,
          "old_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "get_common_dir_noenv",
          "new_api": null,
          "old_text": "get_common_dir_noenv(&path, gitdir)",
          "new_text": null,
          "old_line_content": "\tis_worktree = get_common_dir_noenv(&path, gitdir);",
          "new_line_content": "\t * This stack contains both the shared and the main worktree refs.",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&path)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_reset(&path);",
          "new_line_content": "\t * Note that we don't try to resolve the path in case we have a",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "strbuf_realpath",
          "new_api": null,
          "old_text": "strbuf_realpath(&path, gitdir, 0)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_realpath(&path, gitdir, 0);",
          "new_line_content": "\t * worktree because `get_common_dir_noenv()` already does it for us.",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "reftable_new_stack",
          "new_api": null,
          "old_text": "reftable_new_stack(&refs->main_stack, path.buf,\n\t\t\t\t       refs->write_options)",
          "new_text": null,
          "old_line_content": "\trefs->err = reftable_new_stack(&refs->main_stack, path.buf,",
          "new_line_content": "\tif (!is_worktree) {",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&path)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_reset(&path);",
          "new_line_content": "\t * Ideally, we would also add the stack to our worktree stack map. But",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&path, \"%s/reftable\", gitdir)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addf(&path, \"%s/reftable\", gitdir);",
          "new_line_content": "\t * we have no way to figure out the worktree name here and thus can't",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "reftable_new_stack",
          "new_api": null,
          "old_text": "reftable_new_stack(&refs->worktree_stack, path.buf,\n\t\t\t\t\t       refs->write_options)",
          "new_text": null,
          "old_line_content": "\t\trefs->err = reftable_new_stack(&refs->worktree_stack, path.buf,",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "chdir_notify_reparent",
          "new_api": null,
          "old_text": "chdir_notify_reparent(\"reftables-backend $GIT_DIR\", &refs->base.gitdir)",
          "new_text": null,
          "old_line_content": "\tchdir_notify_reparent(\"reftables-backend $GIT_DIR\", &refs->base.gitdir);",
          "new_line_content": "\t\t\t\t\t       refs->write_options);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(refs->err != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(refs->err != REFTABLE_API_ERROR);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&path)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"init_db\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"init_db\");",
          "new_line_content": "static int reftable_be_init_db(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&sb, \"%s/reftable\", refs->base.gitdir)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&sb, \"%s/reftable\", refs->base.gitdir);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "safe_create_dir",
          "new_api": null,
          "old_text": "safe_create_dir(sb.buf, 1)",
          "new_text": null,
          "old_line_content": "\tsafe_create_dir(sb.buf, 1);",
          "new_line_content": "\tstruct reftable_ref_store *refs =",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&sb, \"%s/HEAD\", refs->base.gitdir)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&sb, \"%s/HEAD\", refs->base.gitdir);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(&sb, \"%s/refs/heads\", refs->base.gitdir)",
          "new_text": null,
          "old_line_content": "\tstrbuf_addf(&sb, \"%s/refs/heads\", refs->base.gitdir);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&sb)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&sb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "reftable_iterator_next_ref",
          "new_api": null,
          "old_text": "reftable_iterator_next_ref(&iter->iter, &iter->ref)",
          "new_text": null,
          "old_line_content": "\t\titer->err = reftable_iterator_next_ref(&iter->iter, &iter->ref);",
          "new_line_content": "\tstruct reftable_ref_store *refs = iter->refs;",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "starts_with",
          "new_api": null,
          "old_text": "starts_with(iter->ref.refname, \"refs/\")",
          "new_text": null,
          "old_line_content": "\t\tif (!starts_with(iter->ref.refname, \"refs/\") &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "is_pseudoref",
          "new_api": null,
          "old_text": "is_pseudoref(&iter->refs->base, iter->ref.refname)",
          "new_text": null,
          "old_line_content": "\t\t     (is_pseudoref(&iter->refs->base, iter->ref.refname) ||",
          "new_line_content": "\t\t * The files backend only lists references contained in \"refs/\" unless",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "is_headref",
          "new_api": null,
          "old_text": "is_headref(&iter->refs->base, iter->ref.refname)",
          "new_text": null,
          "old_line_content": "\t\t      is_headref(&iter->refs->base, iter->ref.refname)))) {",
          "new_line_content": "\t\t * the root refs are to be included. We emulate the same behaviour here.",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "parse_worktree_ref",
          "new_api": null,
          "old_text": "parse_worktree_ref(iter->ref.refname, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "\t\t    parse_worktree_ref(iter->ref.refname, NULL, NULL, NULL) !=",
          "new_line_content": "\t\t\titer->err = 1;",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&iter->oid, iter->ref.value.val1)",
          "new_text": null,
          "old_line_content": "\t\t\toidread(&iter->oid, iter->ref.value.val1);",
          "new_line_content": "\t\t\t    REF_WORKTREE_CURRENT)",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&iter->oid, iter->ref.value.val2.value)",
          "new_text": null,
          "old_line_content": "\t\t\toidread(&iter->oid, iter->ref.value.val2.value);",
          "new_line_content": "\t\tswitch (iter->ref.value_type) {",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": null,
          "old_text": "refs_resolve_ref_unsafe(&iter->refs->base, iter->ref.refname,\n\t\t\t\t\t\t     RESOLVE_REF_READING, &iter->oid, &flags)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!refs_resolve_ref_unsafe(&iter->refs->base, iter->ref.refname,",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&iter->oid)",
          "new_text": null,
          "old_line_content": "\t\tif (is_null_oid(&iter->oid))",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "check_refname_format",
          "new_api": null,
          "old_text": "check_refname_format(iter->ref.refname, REFNAME_ALLOW_ONELEVEL)",
          "new_text": null,
          "old_line_content": "\t\tif (check_refname_format(iter->ref.refname, REFNAME_ALLOW_ONELEVEL)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "refname_is_safe",
          "new_api": null,
          "old_text": "refname_is_safe(iter->ref.refname)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!refname_is_safe(iter->ref.refname))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "oidclr",
          "new_api": null,
          "old_text": "oidclr(&iter->oid)",
          "new_text": null,
          "old_line_content": "\t\t\toidclr(&iter->oid);",
          "new_line_content": "\t\t\tflags |= REF_ISBROKEN;",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "ref_resolves_to_object",
          "new_api": null,
          "old_text": "ref_resolves_to_object(iter->ref.refname, refs->base.repo,\n\t\t\t\t\t    &iter->oid, flags)",
          "new_text": null,
          "old_line_content": "\t\t    !ref_resolves_to_object(iter->ref.refname, refs->base.repo,",
          "new_line_content": "\t\t    flags & REF_ISSYMREF &&",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "ref_iterator_abort",
          "new_api": null,
          "old_text": "ref_iterator_abort(ref_iterator)",
          "new_text": null,
          "old_line_content": "\t\tif (ref_iterator_abort(ref_iterator) != ITER_DONE)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "ref_iterator_abort",
          "new_api": null,
          "old_text": "ref_iterator_abort(ref_iterator)",
          "new_text": null,
          "old_line_content": "\t\tref_iterator_abort(ref_iterator);",
          "new_line_content": "\t\t\treturn ITER_ERROR;",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(peeled, iter->ref.value.val2.target_value)",
          "new_text": null,
          "old_line_content": "\t\toidread(peeled, iter->ref.value.val2.target_value);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(&iter->ref)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(&iter->ref);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&iter->iter)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&iter->iter);",
          "new_line_content": "static int reftable_ref_iterator_abort(struct ref_iterator *ref_iterator)",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(iter)",
          "new_text": null,
          "old_line_content": "\tfree(iter);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*iter))",
          "new_text": null,
          "old_line_content": "\titer = xcalloc(1, sizeof(*iter));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "base_ref_iterator_init",
          "new_api": null,
          "old_text": "base_ref_iterator_init(&iter->base, &reftable_ref_iterator_vtable)",
          "new_text": null,
          "old_line_content": "\tbase_ref_iterator_init(&iter->base, &reftable_ref_iterator_vtable);",
          "new_line_content": "\tstruct reftable_merged_table *merged_table;",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(prefix)",
          "new_text": null,
          "old_line_content": "\titer->prefix_len = prefix ? strlen(prefix) : 0;",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tmerged_table = reftable_stack_merged_table(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "reftable_merged_table_seek_ref",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_ref(merged_table, &iter->iter, prefix)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_ref(merged_table, &iter->iter, prefix);",
          "new_line_content": "\tif (ret)",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, required_flags, \"ref_iterator_begin\")",
          "new_text": null,
          "old_line_content": "\trefs = reftable_be_downcast(ref_store, required_flags, \"ref_iterator_begin\");",
          "new_line_content": "\tstruct reftable_ref_store *refs;",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "ref_iterator_for_stack",
          "new_api": null,
          "old_text": "ref_iterator_for_stack(refs, refs->main_stack, prefix, flags)",
          "new_text": null,
          "old_line_content": "\tmain_iter = ref_iterator_for_stack(refs, refs->main_stack, prefix, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "ref_iterator_for_stack",
          "new_api": null,
          "old_text": "ref_iterator_for_stack(refs, refs->worktree_stack, prefix, flags)",
          "new_text": null,
          "old_line_content": "\tworktree_iter = ref_iterator_for_stack(refs, refs->worktree_stack, prefix, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": "merge_ref_iterator_begin",
          "new_api": null,
          "old_text": "merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,\n\t\t\t\t\tref_iterator_select, NULL)",
          "new_text": null,
          "old_line_content": "\treturn merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"read_raw_ref\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"read_raw_ref\");",
          "new_line_content": "\t\t\t\t    struct strbuf *referent,",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t    unsigned int *type,",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "read_ref_without_reload",
          "new_api": null,
          "old_text": "read_ref_without_reload(stack, refname, oid, referent, type)",
          "new_text": null,
          "old_line_content": "\tret = read_ref_without_reload(stack, refname, oid, referent, type);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"read_symbolic_ref\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"read_symbolic_ref\");",
          "new_line_content": "static int reftable_be_read_symbolic_ref(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t\t const char *refname,",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "reftable_stack_read_ref",
          "new_api": null,
          "old_text": "reftable_stack_read_ref(stack, refname, &ref)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_read_ref(stack, refname, &ref);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(referent, ref.value.symref)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_addstr(referent, ref.value.symref);",
          "new_line_content": "\tif (ret)",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(&ref)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(&ref);",
          "new_line_content": "\tif (ret == 0 && ref.value_type == REFTABLE_REF_SYMREF)",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "reftable_addition_destroy",
          "new_api": null,
          "old_text": "reftable_addition_destroy(tx_data->args[i].addition)",
          "new_text": null,
          "old_line_content": "\t\treftable_addition_destroy(tx_data->args[i].addition);",
          "new_line_content": "static void free_transaction_data(struct reftable_transaction_data *tx_data)",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(tx_data->args[i].updates)",
          "new_text": null,
          "old_line_content": "\t\tfree(tx_data->args[i].updates);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(tx_data->args)",
          "new_text": null,
          "old_line_content": "\tfree(tx_data->args);",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(tx_data)",
          "new_text": null,
          "old_line_content": "\tfree(tx_data);",
          "new_line_content": "\tfor (size_t i = 0; i < tx_data->args_nr; i++) {",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, update->refname, NULL)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, update->refname, NULL);",
          "new_line_content": "\t\t\t\t      struct reftable_ref_store *refs,",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_stack_reload(stack);",
          "new_line_content": "\t\t\targ = &tx_data->args[i];",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "reftable_stack_new_addition",
          "new_api": null,
          "old_text": "reftable_stack_new_addition(&addition, stack)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_stack_new_addition(&addition, stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "strbuf_addstr",
          "new_api": null,
          "old_text": "strbuf_addstr(err, \"cannot lock references\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrbuf_addstr(err, \"cannot lock references\");",
          "new_line_content": "\t\t\treturn ret;",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(tx_data->args, tx_data->args_nr + 1,\n\t\t\t   tx_data->args_alloc)",
          "new_text": null,
          "old_line_content": "\t\tALLOC_GROW(tx_data->args, tx_data->args_nr + 1,",
          "new_line_content": "\t\t\tif (ret == REFTABLE_LOCK_ERROR)",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"reference update queued more than once\")",
          "new_text": null,
          "old_line_content": "\t\tBUG(\"reference update queued more than once\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "prepare_transaction_update",
          "new_api": null,
          "old_text": "prepare_transaction_update(&arg, refs, tx_data, update, err)",
          "new_text": null,
          "old_line_content": "\tret = prepare_transaction_update(&arg, refs, tx_data, update, err);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(arg->updates, arg->updates_nr + 1,\n\t\t   arg->updates_alloc)",
          "new_text": null,
          "old_line_content": "\tALLOC_GROW(arg->updates, arg->updates_nr + 1,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "oidcpy",
          "new_api": null,
          "old_text": "oidcpy(&arg->updates[arg->updates_nr].current_oid, current_oid)",
          "new_text": null,
          "old_line_content": "\toidcpy(&arg->updates[arg->updates_nr].current_oid, current_oid);",
          "new_line_content": "\t\treturn ret;",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE|REF_STORE_MAIN, \"ref_transaction_prepare\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE|REF_STORE_MAIN, \"ref_transaction_prepare\");",
          "new_line_content": "static int reftable_be_transaction_prepare(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*tx_data))",
          "new_text": null,
          "old_line_content": "\ttx_data = xcalloc(1, sizeof(*tx_data));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "prepare_transaction_update",
          "new_api": null,
          "old_text": "prepare_transaction_update(NULL, refs, tx_data,\n\t\t\t\t\t\t transaction->updates[i], err)",
          "new_text": null,
          "old_line_content": "\t\tret = prepare_transaction_update(NULL, refs, tx_data,",
          "new_line_content": "\t * Preprocess all updates. For one we check that there are no duplicate",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "CALLOC_ARRAY",
          "new_api": null,
          "old_text": "CALLOC_ARRAY(tx_data->args[i].updates, tx_data->args[i].updates_expected)",
          "new_text": null,
          "old_line_content": "\t\tCALLOC_ARRAY(tx_data->args[i].updates, tx_data->args[i].updates_expected);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "string_list_sort",
          "new_api": null,
          "old_text": "string_list_sort(&affected_refnames)",
          "new_text": null,
          "old_line_content": "\tstring_list_sort(&affected_refnames);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "ref_update_reject_duplicates",
          "new_api": null,
          "old_text": "ref_update_reject_duplicates(&affected_refnames, err)",
          "new_text": null,
          "old_line_content": "\tif (ref_update_reject_duplicates(&affected_refnames, err)) {",
          "new_line_content": "\t * Fail if a refname appears more than once in the transaction.",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, u->refname, &rewritten_ref)",
          "new_text": null,
          "old_line_content": "\t\tstack = stack_for(refs, u->refname, &rewritten_ref);",
          "new_line_content": "\t\tstruct ref_update *u = transaction->updates[i];",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\tif ((u->flags & REF_HAVE_NEW) && !is_null_oid(&u->new_oid) &&",
          "new_line_content": "\t\tconst char *rewritten_ref;",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "parse_object",
          "new_api": null,
          "old_text": "parse_object(refs->base.repo, &u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t\tstruct object *o = parse_object(refs->base.repo, &u->new_oid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"trying to write ref '%s' with nonexistent object %s\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    _(\"trying to write ref '%s' with nonexistent object %s\"),",
          "new_line_content": "\t\t    !(u->flags & REF_SKIP_OID_VERIFICATION) &&",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    u->refname, oid_to_hex(&u->new_oid));",
          "new_line_content": "\t\t    !(u->flags & REF_LOG_ONLY)) {",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"trying to write non-commit object %s to branch '%s'\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrbuf_addf(err, _(\"trying to write non-commit object %s to branch '%s'\"),",
          "new_line_content": "\t\t\t\tret = -1;",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    oid_to_hex(&u->new_oid), u->refname);",
          "new_line_content": "\t\t\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rewritten_ref, head_referent.buf)",
          "new_text": null,
          "old_line_content": "\t\t    !strcmp(rewritten_ref, head_referent.buf)) {",
          "new_line_content": "\t\t * updated accordingly.",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(&affected_refnames, \"HEAD\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (string_list_has_string(&affected_refnames, \"HEAD\")) {",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(err,\n\t\t\t\t\t    _(\"multiple updates for 'HEAD' (including one \"\n\t\t\t\t\t    \"via its referent '%s') are not allowed\"),\n\t\t\t\t\t    u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrbuf_addf(err,",
          "new_line_content": "\t\t\t * transaction. This check is O(lg N) in the transaction",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"multiple updates for 'HEAD' (including one \"\n\t\t\t\t\t    \"via its referent '%s') are not allowed\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    _(\"multiple updates for 'HEAD' (including one \"",
          "new_line_content": "\t\t\t * size, but it happens at most once per transaction.",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "ref_transaction_add_update",
          "new_api": null,
          "old_text": "ref_transaction_add_update(\n\t\t\t\t\ttransaction, \"HEAD\",\n\t\t\t\t\tu->flags | REF_LOG_ONLY | REF_NO_DEREF,\n\t\t\t\t\t&u->new_oid, &u->old_oid, u->msg)",
          "new_text": null,
          "old_line_content": "\t\t\tnew_update = ref_transaction_add_update(",
          "new_line_content": "\t\t\t\t\t    u->refname);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "string_list_insert",
          "new_api": null,
          "old_text": "string_list_insert(&affected_refnames, new_update->refname)",
          "new_text": null,
          "old_line_content": "\t\t\tstring_list_insert(&affected_refnames, new_update->refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "read_ref_without_reload",
          "new_api": null,
          "old_text": "read_ref_without_reload(stack, rewritten_ref,\n\t\t\t\t\t      &current_oid, &referent, &u->type)",
          "new_text": null,
          "old_line_content": "\t\tret = read_ref_without_reload(stack, rewritten_ref,",
          "new_line_content": "\t\t\t\t\tu->flags | REF_LOG_ONLY | REF_NO_DEREF,",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->old_oid)",
          "new_text": null,
          "old_line_content": "\t\tif (ret > 0 && (!(u->flags & REF_HAVE_OLD) || is_null_oid(&u->old_oid))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "refs_verify_refname_available",
          "new_api": null,
          "old_text": "refs_verify_refname_available(ref_store, u->refname,\n\t\t\t\t\t\t\t    &affected_refnames, NULL, err)",
          "new_text": null,
          "old_line_content": "\t\t\tret = refs_verify_refname_available(ref_store, u->refname,",
          "new_line_content": "\t\t\t * symref splitting. But we do want to verify that",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t if (u->flags & REF_HAVE_NEW && !is_null_oid(&u->new_oid)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "queue_transaction_update",
          "new_api": null,
          "old_text": "queue_transaction_update(refs, tx_data, u,\n\t\t\t\t\t\t\t\t&current_oid, err)",
          "new_text": null,
          "old_line_content": "\t\t\t\t ret = queue_transaction_update(refs, tx_data, u,",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t    \"unable to resolve reference '%s'\")",
          "new_text": null,
          "old_line_content": "\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "original_update_refname",
          "new_api": null,
          "old_text": "original_update_refname(u)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    original_update_refname(u), u->refname);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": null,
          "old_text": "refs_resolve_ref_unsafe(&refs->base, u->refname, 0,\n\t\t\t\t\t\t\t\t       &current_oid, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tconst char *resolved = refs_resolve_ref_unsafe(&refs->base, u->refname, 0,",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rewritten_ref, \"HEAD\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!strcmp(rewritten_ref, \"HEAD\"))",
          "new_line_content": "\t\t\t} else {",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "ref_transaction_add_update",
          "new_api": null,
          "old_text": "ref_transaction_add_update(\n\t\t\t\t\t\ttransaction, referent.buf, new_flags,\n\t\t\t\t\t\t&u->new_oid, &u->old_oid, u->msg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tnew_update = ref_transaction_add_update(",
          "new_line_content": "\t\t\t\t *",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "string_list_has_string",
          "new_api": null,
          "old_text": "string_list_has_string(&affected_refnames, new_update->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (string_list_has_string(&affected_refnames, new_update->refname)) {",
          "new_line_content": "\t\t\t\t * done when new_update is processed.",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "strbuf_addf",
          "new_api": null,
          "old_text": "strbuf_addf(err,\n\t\t\t\t\t\t    _(\"multiple updates for '%s' (including one \"\n\t\t\t\t\t\t    \"via symref '%s') are not allowed\"),\n\t\t\t\t\t\t    referent.buf, u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tstrbuf_addf(err,",
          "new_line_content": "\t\t\t\t */",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"multiple updates for '%s' (including one \"\n\t\t\t\t\t\t    \"via symref '%s') are not allowed\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t    _(\"multiple updates for '%s' (including one \"",
          "new_line_content": "\t\t\t\tu->flags |= REF_LOG_ONLY | REF_NO_DEREF;",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "string_list_insert",
          "new_api": null,
          "old_text": "string_list_insert(&affected_refnames, new_update->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\tstring_list_insert(&affected_refnames, new_update->refname);",
          "new_line_content": "\t\t\t\t\t\t    \"via symref '%s') are not allowed\"),",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(&current_oid, &u->old_oid)",
          "new_text": null,
          "old_line_content": "\t\tif (u->flags & REF_HAVE_OLD && !oideq(&current_oid, &u->old_oid)) {",
          "new_line_content": "\t\t * that the error messages here do not make a lot of sense in",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->old_oid)",
          "new_text": null,
          "old_line_content": "\t\t\tif (is_null_oid(&u->old_oid))",
          "new_line_content": "\t\t * the context of the reftable backend as we never lock",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"cannot lock ref '%s': \"\n\t\t\t\t\t    \"reference already exists\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrbuf_addf(err, _(\"cannot lock ref '%s': \"",
          "new_line_content": "\t\t * individual refs. But the error messages match what the files",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "original_update_refname",
          "new_api": null,
          "old_text": "original_update_refname(u)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    original_update_refname(u));",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "original_update_refname",
          "new_api": null,
          "old_text": "original_update_refname(u)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    original_update_refname(u),",
          "new_line_content": "\t\t\t\t\t    \"reference already exists\"),",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "oid_to_hex",
          "new_api": null,
          "old_text": "oid_to_hex(&u->old_oid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t    oid_to_hex(&u->old_oid));",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "oideq",
          "new_api": null,
          "old_text": "oideq(&current_oid, &u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\t    (u->flags & REF_HAVE_NEW && !oideq(&current_oid, &u->new_oid))) {",
          "new_line_content": "\t\t * skipped. This is not only for the sake of efficiency, but",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": "queue_transaction_update",
          "new_api": null,
          "old_text": "queue_transaction_update(refs, tx_data, u,\n\t\t\t\t\t\t       &current_oid, err)",
          "new_text": null,
          "old_line_content": "\t\t\tret = queue_transaction_update(refs, tx_data, u,",
          "new_line_content": "\t\t * also skips writing unneeded reflog entries.",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "free_transaction_data",
          "new_api": null,
          "old_text": "free_transaction_data(tx_data)",
          "new_text": null,
          "old_line_content": "\t\tfree_transaction_data(tx_data);",
          "new_line_content": "\ttransaction->state = REF_TRANSACTION_PREPARED;",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "reftable_error_str",
          "new_api": null,
          "old_text": "reftable_error_str(ret)",
          "new_text": null,
          "old_line_content": "\t\t\t\t    reftable_error_str(ret));",
          "new_line_content": "\tif (ret < 0) {",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "string_list_clear",
          "new_api": null,
          "old_text": "string_list_clear(&affected_refnames, 0)",
          "new_text": null,
          "old_line_content": "\tstring_list_clear(&affected_refnames, 0);",
          "new_line_content": "\t\ttransaction->state = REF_TRANSACTION_CLOSED;",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&referent)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&referent);",
          "new_line_content": "\t\tif (!err->len)",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "free_transaction_data",
          "new_api": null,
          "old_text": "free_transaction_data(tx_data)",
          "new_text": null,
          "old_line_content": "\tfree_transaction_data(tx_data);",
          "new_line_content": "static int reftable_be_transaction_abort(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(((struct reftable_transaction_update *)a)->update->refname,\n\t\t      ((struct reftable_transaction_update *)b)->update->refname)",
          "new_text": null,
          "old_line_content": "\treturn strcmp(((struct reftable_transaction_update *)a)->update->refname,",
          "new_line_content": "\treturn 0;",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(arg->stack)",
          "new_text": null,
          "old_line_content": "\t\treftable_stack_merged_table(arg->stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(arg->stack)",
          "new_text": null,
          "old_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "new_line_content": "static int write_transaction_table(struct reftable_writer *writer, void *cb_data)",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, ts, ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "new_line_content": "\tsize_t logs_nr = 0, logs_alloc = 0, i;",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\tif (u->flags & REF_HAVE_NEW && !(u->type & REF_ISSYMREF) && is_null_oid(&u->new_oid)) {",
          "new_line_content": "\t\t * - REF_FORCE_CREATE_REFLOG is set, asking us to always create",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\tret = reftable_merged_table_seek_log(mt, &it, u->refname);",
          "new_line_content": "\t\t\t * matches the behaviour of the files backend.",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": null,
          "old_line_content": "\t\t\t\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(log.refname, u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (ret > 0 || strcmp(log.refname, u->refname)) {",
          "new_line_content": "\t\t\t\tstruct reftable_log_record *tombstone;",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttombstone->refname = xstrdup(u->refname);",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\t\t\treftable_iterator_destroy(&it);",
          "new_line_content": "\t\t\t\ttombstone->value_type = REFTABLE_LOG_DELETION;",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "should_write_log",
          "new_api": null,
          "old_text": "should_write_log(&arg->refs->base, u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\t    should_write_log(&arg->refs->base, u->refname))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": null,
          "old_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\t} else if (u->flags & REF_HAVE_NEW &&",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "fill_reftable_log_record",
          "new_api": null,
          "old_text": "fill_reftable_log_record(log)",
          "new_text": null,
          "old_line_content": "\t\t\tfill_reftable_log_record(log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(u->refname)",
          "new_text": null,
          "old_line_content": "\t\t\tlog->refname = xstrdup(u->refname);",
          "new_line_content": "\t\t\tlog = &logs[logs_nr++];",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(log->value.update.old_hash, tx_update->current_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(log->value.update.old_hash, tx_update->current_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "xstrndup",
          "new_api": null,
          "old_text": "xstrndup(u->msg, arg->refs->write_options.block_size / 2)",
          "new_text": null,
          "old_line_content": "\t\t\t\txstrndup(u->msg, arg->refs->write_options.block_size / 2);",
          "new_line_content": "\t\t\tlog->update_index = ts;",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&u->new_oid)",
          "new_text": null,
          "old_line_content": "\t\tif (u->flags & REF_HAVE_NEW && is_null_oid(&u->new_oid)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "reftable_writer_add_ref",
          "new_api": null,
          "old_text": "reftable_writer_add_ref(writer, &ref)",
          "new_text": null,
          "old_line_content": "\t\t\tret = reftable_writer_add_ref(writer, &ref);",
          "new_line_content": "\t\t\t\t.refname = (char *)u->refname,",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "peel_object",
          "new_api": null,
          "old_text": "peel_object(&u->new_oid, &peeled)",
          "new_text": null,
          "old_line_content": "\t\t\tpeel_error = peel_object(&u->new_oid, &peeled);",
          "new_line_content": "\t\t\tint peel_error;",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\t\tref.update_index = ts;",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val2.value, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(ref.value.val2.value, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val1, u->new_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(ref.value.val1, u->new_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\t\t\tref.value_type = REFTABLE_REF_VAL2;",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "reftable_writer_add_logs",
          "new_api": null,
          "old_text": "reftable_writer_add_logs(writer, logs, logs_nr)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_writer_add_logs(writer, logs, logs_nr);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\t\tif (ret < 0)",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&logs[i])",
          "new_text": null,
          "old_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(logs)",
          "new_text": null,
          "old_line_content": "\tfree(logs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "reftable_addition_add",
          "new_api": null,
          "old_text": "reftable_addition_add(tx_data->args[i].addition,\n\t\t\t\t\t    write_transaction_table, &tx_data->args[i])",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_addition_add(tx_data->args[i].addition,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\t\tif (ret < 0)",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "free_transaction_data",
          "new_api": null,
          "old_text": "free_transaction_data(tx_data)",
          "new_text": null,
          "old_line_content": "\tfree_transaction_data(tx_data);",
          "new_line_content": "\t\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "ref_transaction_commit",
          "new_api": null,
          "old_text": "ref_transaction_commit(transaction, err)",
          "new_text": null,
          "old_line_content": "\treturn ref_transaction_commit(transaction, err);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE | REF_STORE_ODB, \"pack_refs\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE | REF_STORE_ODB, \"pack_refs\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "reftable_stack_compact_all",
          "new_api": null,
          "old_text": "reftable_stack_compact_all(stack, NULL)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_compact_all(stack, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "reftable_stack_clean",
          "new_api": null,
          "old_text": "reftable_stack_clean(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_clean(stack);",
          "new_line_content": "\t\tstack = refs->main_stack;",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(create->stack)",
          "new_text": null,
          "old_line_content": "\tuint64_t ts = reftable_stack_next_update_index(create->stack);",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, ts, ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "new_line_content": "\tstruct reftable_log_record log = {0};",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "refs_verify_refname_available",
          "new_api": null,
          "old_text": "refs_verify_refname_available(&create->refs->base, create->refname,\n\t\t\t\t\t    NULL, NULL, create->err)",
          "new_text": null,
          "old_line_content": "\tret = refs_verify_refname_available(&create->refs->base, create->refname,",
          "new_line_content": "\tstruct object_id old_oid;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "refs_resolve_ref_unsafe",
          "new_api": null,
          "old_text": "refs_resolve_ref_unsafe(&create->refs->base, create->target,\n\t\t\t\t     RESOLVE_REF_READING, &new_oid, NULL)",
          "new_text": null,
          "old_line_content": "\t    !refs_resolve_ref_unsafe(&create->refs->base, create->target,",
          "new_line_content": "\t * repository because it would be written into the config. As HEAD will",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "should_write_log",
          "new_api": null,
          "old_text": "should_write_log(&create->refs->base, create->refname)",
          "new_text": null,
          "old_line_content": "\t    !should_write_log(&create->refs->base, create->refname))",
          "new_line_content": "\t * never happens.",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(create->refname)",
          "new_text": null,
          "old_line_content": "\tlog.refname = xstrdup(create->refname);",
          "new_line_content": "\t\t\t\t     RESOLVE_REF_READING, &new_oid, NULL) ||",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "xstrndup",
          "new_api": null,
          "old_text": "xstrndup(create->logmsg,\n\t\t\t\t\t    create->refs->write_options.block_size / 2)",
          "new_text": null,
          "old_line_content": "\tlog.value.update.message = xstrndup(create->logmsg,",
          "new_line_content": "\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_symref\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_symref\");",
          "new_line_content": "\t\t\t\t     const char *refname,",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t     const char *target,",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "reftable_stack_add",
          "new_api": null,
          "old_text": "reftable_stack_add(stack, &write_create_symref_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_add(stack, &write_create_symref_table, &arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s\", err.buf)",
          "new_text": null,
          "old_line_content": "\t\t\terror(\"%s\", err.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "reftable_error_str",
          "new_api": null,
          "old_text": "reftable_error_str(ret)",
          "new_text": null,
          "old_line_content": "\t\t\t      reftable_error_str(ret));",
          "new_line_content": "\tif (ret) {",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&err)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&err);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(arg->stack)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(arg->stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "reftable_stack_read_ref",
          "new_api": null,
          "old_text": "reftable_stack_read_ref(arg->stack, arg->oldname, &old_ref)",
          "new_text": null,
          "old_line_content": "\tif (reftable_stack_read_ref(arg->stack, arg->oldname, &old_ref)) {",
          "new_line_content": "\tstruct string_list skip = STRING_LIST_INIT_NODUP;",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"refname %s not found\")",
          "new_text": null,
          "old_line_content": "\t\tret = error(_(\"refname %s not found\"), arg->oldname);",
          "new_line_content": "\tstruct strbuf errbuf = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(arg->oldname, arg->newname)",
          "new_text": null,
          "old_line_content": "\tif (!strcmp(arg->oldname, arg->newname)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "string_list_insert",
          "new_api": null,
          "old_text": "string_list_insert(&skip, arg->oldname)",
          "new_text": null,
          "old_line_content": "\t\tstring_list_insert(&skip, arg->oldname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "refs_verify_refname_available",
          "new_api": null,
          "old_text": "refs_verify_refname_available(&arg->refs->base, arg->newname,\n\t\t\t\t\t    NULL, &skip, &errbuf)",
          "new_text": null,
          "old_line_content": "\tret = refs_verify_refname_available(&arg->refs->base, arg->newname,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s\", errbuf.buf)",
          "new_text": null,
          "old_line_content": "\t\terror(\"%s\", errbuf.buf);",
          "new_line_content": "\tif (arg->delete_old)",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(arg->stack)",
          "new_text": null,
          "old_line_content": "\tdeletion_ts = creation_ts = reftable_stack_next_update_index(arg->stack);",
          "new_line_content": "\t * new ref and its reflog. They need to be staged with two separate",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, deletion_ts, creation_ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, deletion_ts, creation_ts);",
          "new_line_content": "\t * two changes to a reflog in a single update.",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "reftable_writer_add_refs",
          "new_api": null,
          "old_text": "reftable_writer_add_refs(writer, refs, arg->delete_old ? 2 : 1)",
          "new_text": null,
          "old_line_content": "\tret = reftable_writer_add_refs(writer, refs, arg->delete_old ? 2 : 1);",
          "new_line_content": "\tif (arg->delete_old) {",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": null,
          "old_line_content": "\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\tstruct strbuf head_referent = STRBUF_INIT;",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "new_line_content": "\t\tstruct object_id head_oid;",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "fill_reftable_log_record",
          "new_api": null,
          "old_text": "fill_reftable_log_record(&logs[logs_nr])",
          "new_text": null,
          "old_line_content": "\t\tfill_reftable_log_record(&logs[logs_nr]);",
          "new_line_content": "\t\tint append_head_reflog;",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "read_ref_without_reload",
          "new_api": null,
          "old_text": "read_ref_without_reload(arg->stack, \"HEAD\", &head_oid, &head_referent, &head_type)",
          "new_text": null,
          "old_line_content": "\t\tret = read_ref_without_reload(arg->stack, \"HEAD\", &head_oid, &head_referent, &head_type);",
          "new_line_content": "\t\tlogs[logs_nr].value.update.message =",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(head_referent.buf, arg->oldname)",
          "new_text": null,
          "old_line_content": "\t\tappend_head_reflog = (head_type & REF_ISSYMREF) && !strcmp(head_referent.buf, arg->oldname);",
          "new_line_content": "\t\tlogs_nr++;",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&head_referent)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_release(&head_referent);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": null,
          "old_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t\t * The files backend uses `refs_delete_ref()` to delete the old",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": null,
          "old_line_content": "\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "new_text": null,
          "old_line_content": "\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "fill_reftable_log_record",
          "new_api": null,
          "old_text": "fill_reftable_log_record(&logs[logs_nr])",
          "new_text": null,
          "old_line_content": "\tfill_reftable_log_record(&logs[logs_nr]);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, arg->oldname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, arg->oldname);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(old_log.refname, arg->oldname)",
          "new_text": null,
          "old_line_content": "\t\tif (ret > 0 || strcmp(old_log.refname, arg->oldname)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "ALLOC_GROW",
          "new_api": null,
          "old_text": "ALLOC_GROW(logs, logs_nr + 1, logs_alloc)",
          "new_text": null,
          "old_line_content": "\t\t\tALLOC_GROW(logs, logs_nr + 1, logs_alloc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&logs[logs_nr], 0, sizeof(logs[logs_nr]))",
          "new_text": null,
          "old_line_content": "\t\t\tmemset(&logs[logs_nr], 0, sizeof(logs[logs_nr]));",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&old_log, 0, sizeof(old_log))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&old_log, 0, sizeof(old_log));",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "reftable_writer_add_logs",
          "new_api": null,
          "old_text": "reftable_writer_add_logs(writer, logs, logs_nr)",
          "new_text": null,
          "old_line_content": "\tret = reftable_writer_add_logs(writer, logs, logs_nr);",
          "new_line_content": "\t\t * free'd or reallocated by the iterator.",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "\tif (ret < 0)",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "string_list_clear",
          "new_api": null,
          "old_text": "string_list_clear(&skip, 0)",
          "new_text": null,
          "old_line_content": "\tstring_list_clear(&skip, 0);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&errbuf)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&errbuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "reftable_ref_record_release",
          "new_api": null,
          "old_text": "reftable_ref_record_release(&old_ref)",
          "new_text": null,
          "old_line_content": "\treftable_ref_record_release(&old_ref);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&old_log)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(&old_log);",
          "new_line_content": "\t\tlogs[i].refname = NULL;",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"rename_ref\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"rename_ref\");",
          "new_line_content": "\t\t\t\t  const char *oldrefname,",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, newrefname, &newrefname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, newrefname, &newrefname);",
          "new_line_content": "\t\t\t\t  const char *newrefname,",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "reftable_stack_add",
          "new_api": null,
          "old_text": "reftable_stack_add(stack, &write_copy_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_add(stack, &write_copy_table, &arg);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\tif (ret)",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"copy_ref\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"copy_ref\");",
          "new_line_content": "\t\t\t\tconst char *oldrefname,",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, newrefname, &newrefname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, newrefname, &newrefname);",
          "new_line_content": "\t\t\t\tconst char *newrefname,",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "reftable_stack_add",
          "new_api": null,
          "old_text": "reftable_stack_add(stack, &write_copy_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_add(stack, &write_copy_table, &arg);",
          "new_line_content": "\t\tgoto done;",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\tif (ret)",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&iter->iter, &iter->log)",
          "new_text": null,
          "old_line_content": "\t\titer->err = reftable_iterator_next_log(&iter->iter, &iter->log);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(iter->log.refname, iter->last_name.buf)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(iter->log.refname, iter->last_name.buf))",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "check_refname_format",
          "new_api": null,
          "old_text": "check_refname_format(iter->log.refname,\n\t\t\t\t\t REFNAME_ALLOW_ONELEVEL)",
          "new_text": null,
          "old_line_content": "\t\tif (check_refname_format(iter->log.refname,",
          "new_line_content": "\t\t * seeking directly to reflog@update_index==0.",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "strbuf_reset",
          "new_api": null,
          "old_text": "strbuf_reset(&iter->last_name)",
          "new_text": null,
          "old_line_content": "\t\tstrbuf_reset(&iter->last_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "ref_iterator_abort",
          "new_api": null,
          "old_text": "ref_iterator_abort(ref_iterator)",
          "new_text": null,
          "old_line_content": "\t\tif (ref_iterator_abort(ref_iterator) != ITER_DONE)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "ref_iterator_abort",
          "new_api": null,
          "old_text": "ref_iterator_abort(ref_iterator)",
          "new_text": null,
          "old_line_content": "\t\tref_iterator_abort(ref_iterator);",
          "new_line_content": "\t\t\treturn ITER_ERROR;",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "BUG",
          "new_api": null,
          "old_text": "BUG(\"reftable reflog iterator cannot be peeled\")",
          "new_text": null,
          "old_line_content": "\tBUG(\"reftable reflog iterator cannot be peeled\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&iter->log)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(&iter->log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&iter->iter)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&iter->iter);",
          "new_line_content": "static int reftable_reflog_iterator_abort(struct ref_iterator *ref_iterator)",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "strbuf_release",
          "new_api": null,
          "old_text": "strbuf_release(&iter->last_name)",
          "new_text": null,
          "old_line_content": "\tstrbuf_release(&iter->last_name);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(iter)",
          "new_text": null,
          "old_line_content": "\tfree(iter);",
          "new_line_content": "\tstruct reftable_reflog_iterator *iter =",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "xcalloc",
          "new_api": null,
          "old_text": "xcalloc(1, sizeof(*iter))",
          "new_text": null,
          "old_line_content": "\titer = xcalloc(1, sizeof(*iter));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "base_ref_iterator_init",
          "new_api": null,
          "old_text": "base_ref_iterator_init(&iter->base, &reftable_reflog_iterator_vtable)",
          "new_text": null,
          "old_line_content": "\tbase_ref_iterator_init(&iter->base, &reftable_reflog_iterator_vtable);",
          "new_line_content": "\tstruct reftable_merged_table *merged_table;",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&iter->last_name, 0)",
          "new_text": null,
          "old_line_content": "\tstrbuf_init(&iter->last_name, 0);",
          "new_line_content": "\tstruct reftable_reflog_iterator *iter;",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tmerged_table = reftable_stack_merged_table(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(merged_table, &iter->iter, \"\")",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(merged_table, &iter->iter, \"\");",
          "new_line_content": "\tif (ret < 0)",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_iterator_begin\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_iterator_begin\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "reflog_iterator_for_stack",
          "new_api": null,
          "old_text": "reflog_iterator_for_stack(refs, refs->main_stack)",
          "new_text": null,
          "old_line_content": "\tmain_iter = reflog_iterator_for_stack(refs, refs->main_stack);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "reflog_iterator_for_stack",
          "new_api": null,
          "old_text": "reflog_iterator_for_stack(refs, refs->worktree_stack)",
          "new_text": null,
          "old_line_content": "\tworktree_iter = reflog_iterator_for_stack(refs, refs->worktree_stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "merge_ref_iterator_begin",
          "new_api": null,
          "old_text": "merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,\n\t\t\t\t\tref_iterator_select, NULL)",
          "new_text": null,
          "old_line_content": "\treturn merge_ref_iterator_begin(&worktree_iter->base, &main_iter->base,",
          "new_line_content": "\tif (!refs->worktree_stack)",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&old_oid, log->value.update.old_hash)",
          "new_text": null,
          "old_line_content": "\toidread(&old_oid, log->value.update.old_hash);",
          "new_line_content": "\t\t\t    void *cb_data)",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "oidread",
          "new_api": null,
          "old_text": "oidread(&new_oid, log->value.update.new_hash)",
          "new_text": null,
          "old_line_content": "\toidread(&new_oid, log->value.update.new_hash);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&new_oid)",
          "new_text": null,
          "old_line_content": "\tif (is_null_oid(&old_oid) && is_null_oid(&new_oid))",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "fmt_ident",
          "new_api": null,
          "old_text": "fmt_ident(log->value.update.name, log->value.update.email,\n\t\t\t\t   WANT_COMMITTER_IDENT, NULL, IDENT_NO_DATE)",
          "new_text": null,
          "old_line_content": "\tfull_committer = fmt_ident(log->value.update.name, log->value.update.email,",
          "new_line_content": "\t * not be aware of it.",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent_reverse\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent_reverse\");",
          "new_line_content": "\t\t\t\t\t\t   const char *refname,",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t\t\t   each_reflog_ent_fn fn,",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tmt = reftable_stack_merged_table(stack);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "\t\treturn refs->err;",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "\t\tif (ret)",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"for_each_reflog_ent\");",
          "new_line_content": "\t\t\t\t\t   const char *refname,",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t\t   each_reflog_ent_fn fn,",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tmt = reftable_stack_merged_table(stack);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(log.refname, refname)",
          "new_text": null,
          "old_line_content": "\t\tif (ret > 0 || strcmp(log.refname, refname)) {",
          "new_line_content": "\t\tstruct reftable_log_record log = {0};",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\t\t\treftable_log_record_release(&log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "\t\tif (ret)",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&logs[i])",
          "new_text": null,
          "old_line_content": "\t\treftable_log_record_release(&logs[i]);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(logs)",
          "new_text": null,
          "old_line_content": "\tfree(logs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_exists\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_READ, \"reflog_exists\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "static int reftable_be_reflog_exists(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(stack)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_merged_table *mt = reftable_stack_merged_table(stack);",
          "new_line_content": "\t\t\t\t     const char *refname)",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, refname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, refname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": null,
          "old_line_content": "\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(log.refname, refname)",
          "new_text": null,
          "old_line_content": "\tret = strcmp(log.refname, refname) == 0;",
          "new_line_content": "\tif (ret > 0) {",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(&log);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(arg->stack)",
          "new_text": null,
          "old_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "reftable_stack_read_log",
          "new_api": null,
          "old_text": "reftable_stack_read_log(arg->stack, arg->refname, &log)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_read_log(arg->stack, arg->refname, &log);",
          "new_line_content": "\tstruct write_reflog_existence_arg *arg = cb_data;",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, ts, ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "xstrdup",
          "new_api": null,
          "old_text": "xstrdup(arg->refname)",
          "new_text": null,
          "old_line_content": "\tlog.refname = xstrdup(arg->refname);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "reftable_writer_add_log",
          "new_api": null,
          "old_text": "reftable_writer_add_log(writer, &log)",
          "new_text": null,
          "old_line_content": "\tret = reftable_writer_add_log(writer, &log);",
          "new_line_content": "\t * them to their callers.",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(ret != REFTABLE_API_ERROR)",
          "new_text": null,
          "old_line_content": "\tassert(ret != REFTABLE_API_ERROR);",
          "new_line_content": "\tlog.update_index = ts;",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(&log);",
          "new_line_content": "\tlog.value_type = REFTABLE_LOG_UPDATE;",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_reflog\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"create_reflog\");",
          "new_line_content": "static int reftable_be_create_reflog(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "\t\t\t\t     const char *refname,",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": "reftable_stack_add",
          "new_api": null,
          "old_text": "reftable_stack_add(stack, &write_reflog_existence_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_add(stack, &write_reflog_existence_table, &arg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": "reftable_stack_merged_table",
          "new_api": null,
          "old_text": "reftable_stack_merged_table(arg->stack)",
          "new_text": null,
          "old_line_content": "\t\treftable_stack_merged_table(arg->stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(arg->stack)",
          "new_text": null,
          "old_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "new_line_content": "\tstruct write_reflog_delete_arg *arg = cb_data;",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, ts, ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "new_line_content": "\tstruct reftable_log_record log = {0}, tombstone = {0};",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "reftable_merged_table_seek_log",
          "new_api": null,
          "old_text": "reftable_merged_table_seek_log(mt, &it, arg->refname)",
          "new_text": null,
          "old_line_content": "\tret = reftable_merged_table_seek_log(mt, &it, arg->refname);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "reftable_iterator_next_log",
          "new_api": null,
          "old_text": "reftable_iterator_next_log(&it, &log)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_iterator_next_log(&it, &log);",
          "new_line_content": "\t * by one. This is inefficient, but the reftable format does not have a",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "reftable_writer_add_log",
          "new_api": null,
          "old_text": "reftable_writer_add_log(writer, &tombstone)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_writer_add_log(writer, &tombstone);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "reftable_log_record_release",
          "new_api": null,
          "old_text": "reftable_log_record_release(&log)",
          "new_text": null,
          "old_line_content": "\treftable_log_record_release(&log);",
          "new_line_content": "\t\ttombstone.update_index = log.update_index;",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "reftable_iterator_destroy",
          "new_api": null,
          "old_text": "reftable_iterator_destroy(&it)",
          "new_text": null,
          "old_line_content": "\treftable_iterator_destroy(&it);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "reftable_be_downcast",
          "new_api": null,
          "old_text": "reftable_be_downcast(ref_store, REF_STORE_WRITE, \"delete_reflog\")",
          "new_text": null,
          "old_line_content": "\t\treftable_be_downcast(ref_store, REF_STORE_WRITE, \"delete_reflog\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "stack_for",
          "new_api": null,
          "old_text": "stack_for(refs, refname, &refname)",
          "new_text": null,
          "old_line_content": "\tstruct reftable_stack *stack = stack_for(refs, refname, &refname);",
          "new_line_content": "static int reftable_be_delete_reflog(struct ref_store *ref_store,",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": "reftable_stack_reload",
          "new_api": null,
          "old_text": "reftable_stack_reload(stack)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_reload(stack);",
          "new_line_content": "\t\t.stack = stack,",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "reftable_stack_add",
          "new_api": null,
          "old_text": "reftable_stack_add(stack, &write_reflog_delete_table, &arg)",
          "new_text": null,
          "old_line_content": "\tret = reftable_stack_add(stack, &write_reflog_delete_table, &arg);",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "reftable_stack_next_update_index",
          "new_api": null,
          "old_text": "reftable_stack_next_update_index(arg->stack)",
          "new_text": null,
          "old_line_content": "\tuint64_t ts = reftable_stack_next_update_index(arg->stack);",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": "reftable_writer_set_limits",
          "new_api": null,
          "old_text": "reftable_writer_set_limits(writer, ts, ts)",
          "new_text": null,
          "old_line_content": "\treftable_writer_set_limits(writer, ts, ts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "is_null_oid",
          "new_api": null,
          "old_text": "is_null_oid(&arg->update_oid)",
          "new_text": null,
          "old_line_content": "\tif (!is_null_oid(&arg->update_oid)) {",
          "new_line_content": "\t\tif (arg->records[i].value_type == REFTABLE_LOG_UPDATE)",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "peel_object",
          "new_api": null,
          "old_text": "peel_object(&arg->update_oid, &peeled)",
          "new_text": null,
          "old_line_content": "\t\tif (!peel_object(&arg->update_oid, &peeled)) {",
          "new_line_content": "\t\tstruct object_id peeled;",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(ref.value.val2.target_value, peeled.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\tref.refname = (char *)arg->refname;",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val2.value, arg->update_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(ref.value.val2.value, arg->update_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\tref.update_index = ts;",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(ref.value.val1, arg->update_oid.hash, GIT_MAX_RAWSZ)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(ref.value.val1, arg->update_oid.hash, GIT_MAX_RAWSZ);",
          "new_line_content": "\t\t\tref.value_type = REFTABLE_REF_VAL2;",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": "reftable_writer_add_ref",
          "new_api": null,
          "old_text": "reftable_writer_add_ref(writer, &ref)",
          "new_text": null,
          "old_line_content": "\t\tret = reftable_writer_add_ref(writer, &ref);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 71,
      "total_additions": 312,
      "total_deletions": 312,
      "total_api_changes": 695
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 695,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          250,
          251,
          252,
          253,
          254
        ]
      }
    },
    "api_calls_before": 444,
    "api_calls_after": 444,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
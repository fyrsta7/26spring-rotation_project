{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/67686d95044e56475669ff1306448e41a794a865",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/67686d95044e56475669ff1306448e41a794a865/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/67686d95044e56475669ff1306448e41a794a865/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/67686d95044e56475669ff1306448e41a794a865/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 978,
          "old_api": "xmalloc",
          "new_api": "find_pack_entry_one",
          "old_text": "xmalloc(delta_size)",
          "new_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "old_line_content": "\tdelta_data = xmalloc(delta_size);",
          "new_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "memset",
          "new_api": "sha1_to_hex",
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": "sha1_to_hex(base_sha1)",
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "inflate",
          "new_api": "xmalloc",
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": "xmalloc(delta_size)",
          "old_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "\tdelta_data = xmalloc(delta_size);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "unpack_entry_gently",
          "new_api": "inflateInit",
          "old_text": "unpack_entry_gently(&base_ent, type, &base_size)",
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tbase = unpack_entry_gently(&base_ent, type, &base_size);",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "die",
          "new_api": "inflateEnd",
          "old_text": "die(\"failed to read delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\tdie(\"failed to read delta-pack base object %s\",",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "patch_delta",
          "new_api": "die",
          "old_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     &result_size)",
          "new_text": "die(\"delta data unpack failed\")",
          "old_line_content": "\tresult = patch_delta(base, base_size,",
          "new_line_content": "\t\tdie(\"delta data unpack failed\");",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "free",
          "new_api": "die",
          "old_text": "free(base)",
          "new_text": "die(\"failed to apply delta\")",
          "old_line_content": "\tfree(base);",
          "new_line_content": "\t\tdie(\"failed to apply delta\");",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "memset",
          "new_api": "xmalloc",
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": "xmalloc(size + 1)",
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\tbuffer = xmalloc(size + 1);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "inflateEnd",
          "new_api": "inflateInit",
          "old_text": "inflateEnd(&stream)",
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "free",
          "new_api": "inflateEnd",
          "old_text": "free(buffer)",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "unpack_entry_gently",
          "new_api": "use_packed_git",
          "old_text": "unpack_entry_gently(entry, type, sizep)",
          "new_text": "use_packed_git(p)",
          "old_line_content": "\tretval = unpack_entry_gently(entry, type, sizep);",
          "new_line_content": "\tif (use_packed_git(p))",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "unuse_packed_git",
          "new_api": "die",
          "old_text": "unuse_packed_git(p)",
          "new_text": "die(\"cannot map packed file\")",
          "old_line_content": "\tunuse_packed_git(p);",
          "new_line_content": "\t\tdie(\"cannot map packed file\");",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "die",
          "new_api": "unuse_packed_git",
          "old_text": "die(\"corrupted pack file %s\", p->pack_name)",
          "new_text": "unuse_packed_git(p)",
          "old_line_content": "\t\tdie(\"corrupted pack file %s\", p->pack_name);",
          "new_line_content": "\tunuse_packed_git(p);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "memcpy",
          "new_api": "num_packed_objects",
          "old_text": "memcpy(sha1, (index + 24 * n + 4), 20)",
          "new_text": "num_packed_objects(p)",
          "old_line_content": "\tmemcpy(sha1, (index + 24 * n + 4), 20);",
          "new_line_content": "\tif (n < 0 || num_packed_objects(p) <= n)",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "ntohl",
          "new_api": "memcmp",
          "old_text": "ntohl(*((int*)(index + 24 * mi)))",
          "new_text": "memcmp(index + 24 * mi + 4, sha1, 20)",
          "old_line_content": "\t\t\te->offset = ntohl(*((int*)(index + 24 * mi)));",
          "new_line_content": "\t\tint cmp = memcmp(index + 24 * mi + 4, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "packed_object_info",
          "new_api": "find_pack_entry",
          "old_text": "packed_object_info(&e, type, sizep)",
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\t\treturn packed_object_info(&e, type, sizep);",
          "new_line_content": "\t\tif (!find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "unpack_sha1_header",
          "new_api": "packed_object_info",
          "old_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "new_text": "packed_object_info(&e, type, sizep)",
          "old_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "new_line_content": "\t\treturn packed_object_info(&e, type, sizep);",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "sha1_to_hex",
          "new_api": "unpack_sha1_header",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr))",
          "old_line_content": "\t\t\t       sha1_to_hex(sha1));",
          "new_line_content": "\tif (unpack_sha1_header(&stream, map, mapsize, hdr, sizeof(hdr)) < 0)",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "parse_sha1_header",
          "new_api": "error",
          "old_text": "parse_sha1_header(hdr, type, &size)",
          "new_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "old_line_content": "\tif (parse_sha1_header(hdr, type, &size) < 0)",
          "new_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "map_sha1_file_internal",
          "new_api": "find_pack_entry",
          "old_text": "map_sha1_file_internal(sha1, &mapsize)",
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "new_line_content": "\tif (find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "unpack_sha1_file",
          "new_api": "map_sha1_file_internal",
          "old_text": "unpack_sha1_file(map, mapsize, type, size)",
          "new_text": "map_sha1_file_internal(sha1, &mapsize)",
          "old_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size);",
          "new_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "memcmp",
          "new_api": "strlen",
          "old_text": "memcmp(buffer, ref_type, ref_length)",
          "new_text": "strlen(ref_type)",
          "old_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "new_line_content": "\t\tref_length = strlen(ref_type);",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "free",
          "new_api": "memcmp",
          "old_text": "free(buffer)",
          "new_text": "memcmp(buffer, ref_type, ref_length)",
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\tif (memcmp(buffer, ref_type, ref_length) ||",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "SHA1_Update",
          "new_api": "SHA1_Init",
          "old_text": "SHA1_Update(&c, buf, len)",
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "\tSHA1_Update(&c, buf, len);",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "SHA1_Final",
          "new_api": "SHA1_Update",
          "old_text": "SHA1_Final(sha1, &c)",
          "new_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "old_line_content": "\tSHA1_Final(sha1, &c);",
          "new_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "sha1_file_name",
          "new_api": "SHA1_Final",
          "old_text": "sha1_file_name(sha1)",
          "new_text": "SHA1_Final(sha1, &c)",
          "old_line_content": "\treturn sha1_file_name(sha1);",
          "new_line_content": "\tSHA1_Final(sha1, &c);",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "memcpy",
          "new_api": "write_sha1_file_prepare",
          "old_text": "memcpy(returnsha1, sha1, 20)",
          "new_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\t\tmemcpy(returnsha1, sha1, 20);",
          "new_line_content": "\tfilename = write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "open",
          "new_api": "has_sha1_file",
          "old_text": "open(filename, O_RDONLY)",
          "new_text": "has_sha1_file(sha1)",
          "old_line_content": "\tfd = open(filename, O_RDONLY);",
          "new_line_content": "\tif (has_sha1_file(sha1))",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "mkstemp",
          "new_api": "get_object_directory",
          "old_text": "mkstemp(tmpfile)",
          "new_text": "get_object_directory()",
          "old_line_content": "\tfd = mkstemp(tmpfile);",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "strerror",
          "new_api": "mkstemp",
          "old_text": "strerror(errno)",
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "\t\tfprintf(stderr, \"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "new_line_content": "\tfd = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "deflateBound",
          "new_api": "memset",
          "old_text": "deflateBound(&stream, len+hdrlen)",
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tsize = deflateBound(&stream, len+hdrlen);",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "xmalloc",
          "new_api": "deflateInit",
          "old_text": "xmalloc(size)",
          "new_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "old_line_content": "\tcompressed = xmalloc(size);",
          "new_line_content": "\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "deflateEnd",
          "new_api": "deflate",
          "old_text": "deflateEnd(&stream)",
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "\tdeflateEnd(&stream);",
          "new_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "fchmod",
          "new_api": "write",
          "old_text": "fchmod(fd, 0444)",
          "new_text": "write(fd, compressed, size)",
          "old_line_content": "\tfchmod(fd, 0444);",
          "new_line_content": "\tif (write(fd, compressed, size) != size)",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "close",
          "new_api": "die",
          "old_text": "close(fd)",
          "new_text": "die(\"unable to write file\")",
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\t\tdie(\"unable to write file\");",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "free",
          "new_api": "fchmod",
          "old_text": "free(compressed)",
          "new_text": "fchmod(fd, 0444)",
          "old_line_content": "\tfree(compressed);",
          "new_line_content": "\tfchmod(fd, 0444);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "move_temp_to_file",
          "new_api": "free",
          "old_text": "move_temp_to_file(tmpfile, filename)",
          "new_text": "free(compressed)",
          "old_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "new_line_content": "\tfree(compressed);",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "sprintf",
          "new_api": "read_packed_sha1",
          "old_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "new_text": "read_packed_sha1(sha1, type, &len)",
          "old_line_content": "\t\thdrlen = sprintf(hdr, \"%s %lu\", type, len) + 1;",
          "new_line_content": "\t\tunpacked = read_packed_sha1(sha1, type, &len);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "deflateBound",
          "new_api": "memset",
          "old_text": "deflateBound(&stream, len + hdrlen)",
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\t\tsize = deflateBound(&stream, len + hdrlen);",
          "new_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "xmalloc",
          "new_api": "deflateInit",
          "old_text": "xmalloc(size)",
          "new_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "old_line_content": "\t\ttemp_obj = buf = xmalloc(size);",
          "new_line_content": "\t\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "deflateEnd",
          "new_api": "deflate",
          "old_text": "deflateEnd(&stream)",
          "new_text": "deflate(&stream, Z_FINISH)",
          "old_line_content": "\t\tdeflateEnd(&stream);",
          "new_line_content": "\t\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "perror",
          "new_api": "fprintf",
          "old_text": "perror(\"write \")",
          "new_text": "fprintf(stderr, \"write closed\\n\")",
          "old_line_content": "\t\t\t\tperror(\"write \");",
          "new_line_content": "\t\t\t\tfprintf(stderr, \"write closed\\n\");",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "free",
          "new_api": "munmap",
          "old_text": "free(temp_obj)",
          "new_text": "munmap(map, objsize)",
          "old_line_content": "\t\tfree(temp_obj);",
          "new_line_content": "\t\tmunmap(map, objsize);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "mkstemp",
          "new_api": "get_object_directory",
          "old_text": "mkstemp(tmpfile)",
          "new_text": "get_object_directory()",
          "old_line_content": "\tlocal = mkstemp(tmpfile);",
          "new_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "error",
          "new_api": "mkstemp",
          "old_text": "error(\"Couldn't open %s for %s\",\n\t\t\t     tmpfile, sha1_to_hex(sha1))",
          "new_text": "mkstemp(tmpfile)",
          "old_line_content": "\t\treturn error(\"Couldn't open %s for %s\",",
          "new_line_content": "\tlocal = mkstemp(tmpfile);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "memset",
          "new_api": "sha1_to_hex",
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "\t\t\t     tmpfile, sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "inflateInit",
          "new_api": "memset",
          "old_text": "inflateInit(&stream)",
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "SHA1_Init",
          "new_api": "inflateInit",
          "old_text": "SHA1_Init(&c)",
          "new_text": "inflateInit(&stream)",
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "\tinflateInit(&stream);",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "close",
          "new_api": "read",
          "old_text": "close(local)",
          "new_text": "read(fd, buffer + *bufposn, bufsize - *bufposn)",
          "old_line_content": "\t\t\tclose(local);",
          "new_line_content": "\t\tsize = read(fd, buffer + *bufposn, bufsize - *bufposn);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "error",
          "new_api": "unlink",
          "old_text": "error(\"Connection closed?\")",
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "new_line_content": "\t\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "close",
          "new_api": "inflateEnd",
          "old_text": "close(local)",
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\tclose(local);",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "unlink",
          "new_api": "SHA1_Final",
          "old_text": "unlink(tmpfile)",
          "new_text": "SHA1_Final(real_sha1, &c)",
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "\tSHA1_Final(real_sha1, &c);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "memcmp",
          "new_api": "sha1_to_hex",
          "old_text": "memcmp(sha1, real_sha1, 20)",
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\tif (memcmp(sha1, real_sha1, 20)) {",
          "new_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "sha1_to_hex",
          "new_api": "memcmp",
          "old_text": "sha1_to_hex(sha1)",
          "new_text": "memcmp(sha1, real_sha1, 20)",
          "old_line_content": "\t\treturn error(\"File %s has bad hash\", sha1_to_hex(sha1));",
          "new_line_content": "\tif (memcmp(sha1, real_sha1, 20)) {",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "find_sha1_file",
          "new_api": "find_pack_entry",
          "old_text": "find_sha1_file(sha1, &st)",
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "new_line_content": "\tif (find_pack_entry(sha1, &e))",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "write_sha1_file_prepare",
          "new_api": "write_sha1_file",
          "old_text": "write_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen)",
          "new_text": "write_sha1_file(buf, off, type, sha1)",
          "old_line_content": "\t\twrite_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\t\tret = write_sha1_file(buf, off, type, sha1);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "write_sha1_file_prepare",
          "new_api": "write_sha1_file",
          "old_text": "write_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen)",
          "new_text": "write_sha1_file(buf, size, type, sha1)",
          "old_line_content": "\t\twrite_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "error",
          "new_api": "open",
          "old_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "new_text": "open(path, O_RDONLY)",
          "old_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\tfd = open(path, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "index_fd",
          "new_api": "error",
          "old_text": "index_fd(sha1, fd, st, write_object, NULL)",
          "new_text": "error(\"open(\\\"%s\\\"): %s\", path,\n\t\t\t\t     strerror(errno))",
          "old_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, NULL) < 0)",
          "new_line_content": "\t\t\treturn error(\"open(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "error",
          "new_api": "strerror",
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\t\t\t     strerror(errno));",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "strerror",
          "new_api": "xmalloc",
          "old_text": "strerror(errno)",
          "new_text": "xmalloc(st->st_size+1)",
          "old_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "new_line_content": "\t\ttarget = xmalloc(st->st_size+1);",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "free",
          "new_api": "readlink",
          "old_text": "free(target)",
          "new_text": "readlink(path, target, st->st_size+1)",
          "old_line_content": "\t\t\tfree(target);",
          "new_line_content": "\t\tif (readlink(path, target, st->st_size+1) != st->st_size) {",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "error",
          "new_api": "strerror",
          "old_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "new_text": "strerror(errno)",
          "old_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "new_line_content": "\t\t\tchar *errstr = strerror(errno);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "write_sha1_file",
          "new_api": "write_sha1_file_prepare",
          "old_text": "write_sha1_file(target, st->st_size, \"blob\", sha1)",
          "new_text": "write_sha1_file_prepare(target, st->st_size, \"blob\",\n\t\t\t\t\t\tsha1, hdr, &hdrlen)",
          "old_line_content": "\t\t} else if (write_sha1_file(target, st->st_size, \"blob\", sha1))",
          "new_line_content": "\t\t\twrite_sha1_file_prepare(target, st->st_size, \"blob\",",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "free",
          "new_api": "error",
          "old_text": "free(target)",
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\t\tfree(target);",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tstream.avail_in = left;",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "old_line_content": "\t\t\t} while (stream.avail_in && ret == Z_OK);",
          "new_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(local, buffer, *bufposn - stream.avail_in)",
          "old_line_content": "\t\t\t\tstream.avail_in);",
          "new_line_content": "\t\t\twrite(local, buffer, *bufposn - stream.avail_in);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "old_line_content": "\t\t\t*bufposn = stream.avail_in;",
          "new_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != size) {",
          "new_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(local)",
          "old_line_content": "\t\t\tif (!size)",
          "new_line_content": "\t\t\tclose(local);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Connection closed?\")",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\t\t\treturn error(\"Connection closed?\");",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(\"Reading from connection\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tperror(\"Reading from connection\");",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(local)",
          "old_line_content": "\tif (ret != Z_STREAM_END) {",
          "new_line_content": "\tclose(local);",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "unpack_entry_gently",
          "old_text": null,
          "new_text": "unpack_entry_gently(entry, type, sizep)",
          "old_line_content": "\tif (!retval)",
          "new_line_content": "\tretval = unpack_entry_gently(entry, type, sizep);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"corrupted pack file %s\", p->pack_name)",
          "old_line_content": "}",
          "new_line_content": "\t\tdie(\"corrupted pack file %s\", p->pack_name);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"File %s has bad hash\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "sha1_pack_index_name",
          "old_text": null,
          "new_text": "sha1_pack_index_name(sha1)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "unpack_object_header",
          "old_text": null,
          "new_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "old_line_content": "\tleft = p->pack_size - offset;",
          "new_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "unpack_delta_entry",
          "old_text": null,
          "new_text": "unpack_delta_entry(pack, size, left, type, sizep, p)",
          "old_line_content": "\tcase OBJ_COMMIT:",
          "new_line_content": "\t\tretval = unpack_delta_entry(pack, size, left, type, sizep, p);",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": null,
          "new_api": "sha1_pack_name",
          "old_text": null,
          "new_text": "sha1_pack_name(sha1)",
          "old_line_content": "\treturn 1;",
          "new_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"commit\")",
          "old_line_content": "\tcase OBJ_TREE:",
          "new_line_content": "\t\tstrcpy(type, \"commit\");",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tree\")",
          "old_line_content": "\tcase OBJ_BLOB:",
          "new_line_content": "\t\tstrcpy(type, \"tree\");",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"blob\")",
          "old_line_content": "\tcase OBJ_TAG:",
          "new_line_content": "\t\tstrcpy(type, \"blob\");",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "",
          "new_line_content": "\treturn find_pack_entry(sha1, &e);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "strcpy",
          "old_text": null,
          "new_text": "strcpy(type, \"tag\")",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\tstrcpy(type, \"tag\");",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "unpack_non_delta_entry",
          "old_text": null,
          "new_text": "unpack_non_delta_entry(pack, size, left)",
          "old_line_content": "}",
          "new_line_content": "\tretval = unpack_non_delta_entry(pack, size, left);",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "find_sha1_file",
          "old_text": null,
          "new_text": "find_sha1_file(sha1, &st)",
          "old_line_content": "",
          "new_line_content": "\treturn find_sha1_file(sha1, &st) ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(size)",
          "old_line_content": "\tunsigned long off = 0;",
          "new_line_content": "\tchar *buf = malloc(size);",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(fd, buf + off, size - off)",
          "old_line_content": "\t\t\toff += iret;",
          "new_line_content": "\t\tiret = read(fd, buf + off, size - off);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(sha1, (index + 24 * n + 4), 20)",
          "old_line_content": "}",
          "new_line_content": "\tmemcpy(sha1, (index + 24 * n + 4), 20);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "realloc",
          "old_text": null,
          "new_text": "realloc(buf, size)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tbuf = realloc(buf, size);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(level1_ofs[*sha1])",
          "old_line_content": "\tvoid *index = p->index_base + 256;",
          "new_line_content": "\tint hi = ntohl(level1_ofs[*sha1]);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(level1_ofs[*sha1 - 1])",
          "old_line_content": "",
          "new_line_content": "\tint lo = ((*sha1 == 0x0) ? 0 : ntohl(level1_ofs[*sha1 - 1]));",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\t}",
          "new_line_content": "\t\twrite_sha1_file_prepare(buf, off, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "ntohl",
          "old_text": null,
          "new_text": "ntohl(*((int*)(index + 24 * mi)))",
          "old_line_content": "\t\t\te->p = p;",
          "new_line_content": "\t\t\te->offset = ntohl(*((int*)(index + 24 * mi)));",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(e->sha1, sha1, 20)",
          "old_line_content": "\t\t\treturn 1;",
          "new_line_content": "\t\t\tmemcpy(e->sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf)",
          "old_line_content": "}",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "prepare_packed_git",
          "old_text": null,
          "new_text": "prepare_packed_git()",
          "old_line_content": "\tfor (p = packed_git; p; p = p->next) {",
          "new_line_content": "\tprepare_packed_git();",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "mmap",
          "old_text": null,
          "new_text": "mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "old_line_content": "\tif (buf == MAP_FAILED)",
          "new_line_content": "\t\tbuf = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, e, p)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (find_pack_entry_one(sha1, e, p))",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "write_sha1_file_prepare",
          "old_text": null,
          "new_text": "write_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen)",
          "old_line_content": "\t}",
          "new_line_content": "\t\twrite_sha1_file_prepare(buf, size, type, sha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(buf, size)",
          "old_line_content": "}",
          "new_line_content": "\t\tmunmap(buf, size);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "find_pack_entry_one",
          "old_text": null,
          "new_text": "find_pack_entry_one(sha1, &e, p)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (find_pack_entry_one(sha1, &e, p))",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": null,
          "new_api": "index_fd",
          "old_text": null,
          "new_text": "index_fd(sha1, fd, st, write_object, NULL)",
          "old_line_content": "\t\t\t\t     path);",
          "new_line_content": "\t\tif (index_fd(sha1, fd, st, write_object, NULL) < 0)",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "old_line_content": "\t\tbreak;",
          "new_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "map_sha1_file_internal",
          "old_text": null,
          "new_text": "map_sha1_file_internal(sha1, &mapsize)",
          "old_line_content": "\t\tstruct pack_entry e;",
          "new_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(target)",
          "old_line_content": "\t\t\t             errstr);",
          "new_line_content": "\t\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"readlink(\\\"%s\\\"): %s\", path,\n\t\t\t             errstr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\treturn error(\"readlink(\\\"%s\\\"): %s\", path,",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "parse_sha1_header",
          "old_text": null,
          "new_text": "parse_sha1_header(hdr, type, &size)",
          "old_line_content": "\telse {",
          "new_line_content": "\tif (parse_sha1_header(hdr, type, &size) < 0)",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t\tstatus = 0;",
          "new_line_content": "\t\tstatus = error(\"unable to parse %s header\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": null,
          "new_api": "write_sha1_file",
          "old_text": null,
          "new_text": "write_sha1_file(target, st->st_size, \"blob\", sha1)",
          "old_line_content": "\t\t\t\t     path);",
          "new_line_content": "\t\t} else if (write_sha1_file(target, st->st_size, \"blob\", sha1))",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "inflateEnd",
          "old_text": null,
          "new_text": "inflateEnd(&stream)",
          "old_line_content": "\treturn status;",
          "new_line_content": "\tinflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "}",
          "new_line_content": "\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(target)",
          "old_line_content": "\tdefault:",
          "new_line_content": "\t\tfree(target);",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s: unsupported file type\", path)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "find_pack_entry",
          "old_text": null,
          "new_text": "find_pack_entry(sha1, &e)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tif (!find_pack_entry(sha1, &e)) {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(sha1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "unpack_entry",
          "old_text": null,
          "new_text": "unpack_entry(&e, type, size)",
          "old_line_content": "",
          "new_line_content": "\treturn unpack_entry(&e, type, size);",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "read_packed_sha1",
          "old_text": null,
          "new_text": "read_packed_sha1(sha1, type, size)",
          "old_line_content": "\tif (map) {",
          "new_line_content": "\t\treturn read_packed_sha1(sha1, type, size);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "unpack_sha1_file",
          "old_text": null,
          "new_text": "unpack_sha1_file(map, mapsize, type, size)",
          "old_line_content": "\t\treturn buf;",
          "new_line_content": "\t\tbuf = unpack_sha1_file(map, mapsize, type, size);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "munmap",
          "old_text": null,
          "new_text": "munmap(map, mapsize)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tmunmap(map, mapsize);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(actual_sha1, sha1, 20)",
          "old_line_content": "\t\tint ref_length = -1;",
          "new_line_content": "\tmemcpy(actual_sha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "read_sha1_file",
          "old_text": null,
          "new_text": "read_sha1_file(actual_sha1, type, &isize)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, type, &isize);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(type, required_type)",
          "old_line_content": "\t\t\tif (actual_sha1_return)",
          "new_line_content": "\t\tif (!strcmp(type, required_type)) {",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(actual_sha1_return, actual_sha1, 20)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tmemcpy(actual_sha1_return, actual_sha1, 20);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(type, \"tag\")",
          "old_line_content": "\t\telse {",
          "new_line_content": "\t\telse if (!strcmp(type, \"tag\"))",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "get_sha1_hex",
          "old_text": null,
          "new_text": "get_sha1_hex(buffer + ref_length, actual_sha1)",
          "old_line_content": "\t\t\treturn NULL;",
          "new_line_content": "\t\t    get_sha1_hex(buffer + ref_length, actual_sha1)) {",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t\t * actual_sha1.  Check again. */",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf((char *)hdr, \"%s %lu\", type, len)",
          "old_line_content": "\t/* Sha1.. */",
          "new_line_content": "\t*hdrlen = sprintf((char *)hdr, \"%s %lu\", type, len)+1;",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "SHA1_Update",
          "old_text": null,
          "new_text": "SHA1_Update(&c, buf, len)",
          "old_line_content": "",
          "new_line_content": "\tSHA1_Update(&c, buf, len);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "sha1_file_name",
          "old_text": null,
          "new_text": "sha1_file_name(sha1)",
          "old_line_content": "",
          "new_line_content": "\treturn sha1_file_name(sha1);",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "",
          "new_line_content": "\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(filename, '/')",
          "old_line_content": "\t\t\t*dir = 0;",
          "new_line_content": "\t\tchar *dir = strrchr(filename, '/');",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "mkdir",
          "old_text": null,
          "new_text": "mkdir(filename, 0777)",
          "old_line_content": "\t\t\t\treturn -2;",
          "new_line_content": "\t\t\tmkdir(filename, 0777);",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "adjust_shared_perm",
          "old_text": null,
          "new_text": "adjust_shared_perm(filename)",
          "old_line_content": "\t\t\t*dir = '/';",
          "new_line_content": "\t\t\tif (adjust_shared_perm(filename))",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "link(tmpfile, filename)",
          "old_line_content": "\t\t\tret = errno;",
          "new_line_content": "\t\t\tif (!link(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "link_temp_to_file",
          "old_text": null,
          "new_text": "link_temp_to_file(tmpfile, filename)",
          "old_line_content": "\t/*",
          "new_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "rename(tmpfile, filename)",
          "old_line_content": "\t\tret = errno;",
          "new_line_content": "\t\tif (!rename(tmpfile, filename))",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "\t\tif (ret != EEXIST) {",
          "new_line_content": "\tunlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(ret)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tfprintf(stderr, \"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(returnsha1, sha1, 20)",
          "old_line_content": "\t\treturn 0;",
          "new_line_content": "\t\tmemcpy(returnsha1, sha1, 20);",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(filename, O_RDONLY)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\tfd = open(filename, O_RDONLY);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfprintf(stderr, \"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfprintf(stderr, \"unable to create temporary sha1 filename %s: %s\\n\", tmpfile, strerror(errno));",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": null,
          "new_api": "deflateBound",
          "old_text": null,
          "new_text": "deflateBound(&stream, len+hdrlen)",
          "old_line_content": "",
          "new_line_content": "\tsize = deflateBound(&stream, len+hdrlen);",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\t/* Compress it */",
          "new_line_content": "\tcompressed = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "",
          "new_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "",
          "new_line_content": "\tdeflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "",
          "new_line_content": "\tclose(fd);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "move_temp_to_file",
          "old_text": null,
          "new_text": "move_temp_to_file(tmpfile, filename)",
          "old_line_content": "",
          "new_line_content": "\treturn move_temp_to_file(tmpfile, filename);",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": null,
          "new_api": "map_sha1_file_internal",
          "old_text": null,
          "new_text": "map_sha1_file_internal(sha1, &objsize)",
          "old_line_content": "\tvoid *temp_obj = NULL;",
          "new_line_content": "\tvoid *map = map_sha1_file_internal(sha1, &objsize);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(hdr, \"%s %lu\", type, len)",
          "old_line_content": "\t\t/* Set it up */",
          "new_line_content": "\t\thdrlen = sprintf(hdr, \"%s %lu\", type, len) + 1;",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": null,
          "new_api": "deflateBound",
          "old_text": null,
          "new_text": "deflateBound(&stream, len + hdrlen)",
          "old_line_content": "",
          "new_line_content": "\t\tsize = deflateBound(&stream, len + hdrlen);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(size)",
          "old_line_content": "\t\t/* Compress it */",
          "new_line_content": "\t\ttemp_obj = buf = xmalloc(size);",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&stream, 0)",
          "old_line_content": "",
          "new_line_content": "\t\twhile (deflate(&stream, 0) == Z_OK)",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&stream)",
          "old_line_content": "\t\t",
          "new_line_content": "\t\tdeflateEnd(&stream);",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(unpacked)",
          "old_line_content": "\t\tobjsize = stream.total_out;",
          "new_line_content": "\t\tfree(unpacked);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(fd, buf + posn, objsize - posn)",
          "old_line_content": "\t\t\tif (!size) {",
          "new_line_content": "\t\tsize = write(fd, buf + posn, objsize - posn);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "perror",
          "old_text": null,
          "new_text": "perror(\"write \")",
          "old_line_content": "\t\t\treturn -1;",
          "new_line_content": "\t\t\t\tperror(\"write \");",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "old_line_content": "",
          "new_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "unpack_entry_gently",
          "old_text": null,
          "new_text": "unpack_entry_gently(&base_ent, type, &base_size)",
          "old_line_content": "",
          "new_line_content": "\tbase = unpack_entry_gently(&base_ent, type, &base_size);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(\"failed to read delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "old_line_content": "\tstream.avail_in = data_size;",
          "new_line_content": "\t\tdie(\"failed to read delta-pack base object %s\",",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "sha1_to_hex",
          "old_text": null,
          "new_text": "sha1_to_hex(base_sha1)",
          "old_line_content": "\tstream.next_out = delta_data;",
          "new_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(temp_obj)",
          "old_line_content": "\treturn 0;",
          "new_line_content": "\t\tfree(temp_obj);",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&stream, 0, sizeof(stream))",
          "old_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != delta_size)",
          "new_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_FINISH)",
          "old_line_content": "\tif (!base)",
          "new_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "patch_delta",
          "old_text": null,
          "new_text": "patch_delta(base, base_size,\n\t\t\t     delta_data, delta_size,\n\t\t\t     &result_size)",
          "old_line_content": "\t\t\t     &result_size);",
          "new_line_content": "\tresult = patch_delta(base, base_size,",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Couldn't open %s for %s\",\n\t\t\t     tmpfile, sha1_to_hex(sha1))",
          "old_line_content": "",
          "new_line_content": "\t\treturn error(\"Couldn't open %s for %s\",",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(delta_data)",
          "old_line_content": "\t*sizep = result_size;",
          "new_line_content": "\tfree(delta_data);",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(base)",
          "old_line_content": "\treturn result;",
          "new_line_content": "\tfree(base);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": null,
          "new_api": "SHA1_Init",
          "old_text": null,
          "new_text": "SHA1_Init(&c)",
          "old_line_content": "\tdo {",
          "new_line_content": "\tSHA1_Init(&c);",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "inflate",
          "old_text": null,
          "new_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "old_line_content": "\t\t\t\t\t    stream.avail_out);",
          "new_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1537,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(local, buffer, *bufposn - stream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\t\twrite(local, buffer, *bufposn - stream.avail_in);",
          "new_line_content": "\t\t\t\t\t    stream.avail_out);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove(buffer, buffer + *bufposn - stream.avail_in,\n\t\t\t\tstream.avail_in)",
          "new_text": null,
          "old_line_content": "\t\t\tmemmove(buffer, buffer + *bufposn - stream.avail_in,",
          "new_line_content": "\t\t\t} while (stream.avail_in && ret == Z_OK);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\tstream.avail_out = size;",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\tst = inflate(&stream, Z_FINISH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd, buffer + *bufposn, bufsize - *bufposn)",
          "new_text": null,
          "old_line_content": "\t\tsize = read(fd, buffer + *bufposn, bufsize - *bufposn);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\t\t\tunlink(tmpfile);",
          "new_line_content": "\t\tif (size <= 0) {",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "perror",
          "new_api": null,
          "old_text": "perror(\"Reading from connection\")",
          "new_text": null,
          "old_line_content": "\t\t\tperror(\"Reading from connection\");",
          "new_line_content": "\t\t\tif (!size)",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t\t*bufposn += size;",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "use_packed_git",
          "new_api": null,
          "old_text": "use_packed_git(p)",
          "new_text": null,
          "old_line_content": "\tif (use_packed_git(p))",
          "new_line_content": "\tvoid *retval;",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"cannot map packed file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"cannot map packed file\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "SHA1_Final",
          "new_api": null,
          "old_text": "SHA1_Final(real_sha1, &c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Final(real_sha1, &c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"File %s corrupted\", sha1_to_hex(sha1));",
          "new_line_content": "\tif (ret != Z_STREAM_END) {",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\t\tunlink(tmpfile);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "sha1_file_name",
          "new_api": null,
          "old_text": "sha1_file_name(sha1)",
          "new_text": null,
          "old_line_content": "\treturn move_temp_to_file(tmpfile, sha1_file_name(sha1));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "sha1_pack_index_name",
          "new_api": null,
          "old_text": "sha1_pack_index_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_index_name(sha1), &st))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "unpack_object_header",
          "new_api": null,
          "old_text": "unpack_object_header(p, entry->offset, &kind, &size)",
          "new_text": null,
          "old_line_content": "\toffset = unpack_object_header(p, entry->offset, &kind, &size);",
          "new_line_content": "\tvoid *retval;",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "unpack_delta_entry",
          "new_api": null,
          "old_text": "unpack_delta_entry(pack, size, left, type, sizep, p)",
          "new_text": null,
          "old_line_content": "\t\tretval = unpack_delta_entry(pack, size, left, type, sizep, p);",
          "new_line_content": "\tswitch (kind) {",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "sha1_pack_name",
          "new_api": null,
          "old_text": "sha1_pack_name(sha1)",
          "new_text": null,
          "old_line_content": "\tif (stat(sha1_pack_name(sha1), &st))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"commit\");",
          "new_line_content": "\t\treturn retval;",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tree\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tree\");",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"blob\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"blob\");",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\treturn find_pack_entry(sha1, &e);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(type, \"tag\")",
          "new_text": null,
          "old_line_content": "\t\tstrcpy(type, \"tag\");",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\tif (find_pack_entry(sha1, &e))",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "unpack_non_delta_entry",
          "new_api": null,
          "old_text": "unpack_non_delta_entry(pack, size, left)",
          "new_text": null,
          "old_line_content": "\tretval = unpack_non_delta_entry(pack, size, left);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(size)",
          "new_text": null,
          "old_line_content": "\tchar *buf = malloc(size);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(fd, buf + off, size - off)",
          "new_text": null,
          "old_line_content": "\t\tiret = read(fd, buf + off, size - off);",
          "new_line_content": "\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "num_packed_objects",
          "new_api": null,
          "old_text": "num_packed_objects(p)",
          "new_text": null,
          "old_line_content": "\tif (n < 0 || num_packed_objects(p) <= n)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "realloc",
          "new_api": null,
          "old_text": "realloc(buf, size)",
          "new_text": null,
          "old_line_content": "\t\t\t\tbuf = realloc(buf, size);",
          "new_line_content": "\t\t\tif (off == size) {",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\t\tfree(buf);",
          "new_line_content": "\t} while (iret > 0);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(level1_ofs[*sha1])",
          "new_text": null,
          "old_line_content": "\tint hi = ntohl(level1_ofs[*sha1]);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "ntohl",
          "new_api": null,
          "old_text": "ntohl(level1_ofs[*sha1 - 1])",
          "new_text": null,
          "old_line_content": "\tint lo = ((*sha1 == 0x0) ? 0 : ntohl(level1_ofs[*sha1 - 1]));",
          "new_line_content": "\tunsigned int *level1_ofs = p->index_base;",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(buf, off, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, off, type, sha1);",
          "new_line_content": "\t\ttype = \"blob\";",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(index + 24 * mi + 4, sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\tint cmp = memcmp(index + 24 * mi + 4, sha1, 20);",
          "new_line_content": "\tdo {",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(e->sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\t\tmemcpy(e->sha1, sha1, 20);",
          "new_line_content": "\t\tif (!cmp) {",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t\tret = 0;",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "prepare_packed_git",
          "new_api": null,
          "old_text": "prepare_packed_git()",
          "new_text": null,
          "old_line_content": "\tprepare_packed_git();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "mmap",
          "new_api": null,
          "old_text": "mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0)",
          "new_text": null,
          "old_line_content": "\t\tbuf = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);",
          "new_line_content": "\tbuf = \"\";",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\tclose(fd);",
          "new_line_content": "\tif (size)",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, e, p)",
          "new_text": null,
          "old_line_content": "\t\tif (find_pack_entry_one(sha1, e, p))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "write_sha1_file",
          "new_api": null,
          "old_text": "write_sha1_file(buf, size, type, sha1)",
          "new_text": null,
          "old_line_content": "\t\tret = write_sha1_file(buf, size, type, sha1);",
          "new_line_content": "\t\ttype = \"blob\";",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(buf, size)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(buf, size);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(sha1, &e, p)",
          "new_text": null,
          "old_line_content": "\t\tif (find_pack_entry_one(sha1, &e, p))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(path, O_RDONLY)",
          "new_text": null,
          "old_line_content": "\t\tfd = open(path, O_RDONLY);",
          "new_line_content": "\tswitch (st->st_mode & S_IFMT) {",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\t\t\t     strerror(errno));",
          "new_line_content": "\t\tif (fd < 0)",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "map_sha1_file_internal",
          "new_api": null,
          "old_text": "map_sha1_file_internal(sha1, &mapsize)",
          "new_text": null,
          "old_line_content": "\tmap = map_sha1_file_internal(sha1, &mapsize);",
          "new_line_content": "\tchar hdr[128];",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(st->st_size+1)",
          "new_text": null,
          "old_line_content": "\t\ttarget = xmalloc(st->st_size+1);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\t\tif (!find_pack_entry(sha1, &e))",
          "new_line_content": "\t\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"unable to find %s\", sha1_to_hex(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": "readlink",
          "new_api": null,
          "old_text": "readlink(path, target, st->st_size+1)",
          "new_text": null,
          "old_line_content": "\t\tif (readlink(path, target, st->st_size+1) != st->st_size) {",
          "new_line_content": "\tcase S_IFLNK:",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"unable to unpack %s header\",\n\t\t\t       sha1_to_hex(sha1))",
          "new_text": null,
          "old_line_content": "\t\tstatus = error(\"unable to unpack %s header\",",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(target, st->st_size, \"blob\",\n\t\t\t\t\t\tsha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\t\t\twrite_sha1_file_prepare(target, st->st_size, \"blob\",",
          "new_line_content": "\t\t\tunsigned char hdr[50];",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: failed to insert into database\",\n\t\t\t\t     path)",
          "new_text": null,
          "old_line_content": "\t\t\treturn error(\"%s: failed to insert into database\",",
          "new_line_content": "\t\t\t\t\t\tsha1, hdr, &hdrlen);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "\t\t\t*sizep = size;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, mapsize)",
          "new_text": null,
          "old_line_content": "\tmunmap(map, mapsize);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s: unsupported file type\", path)",
          "new_text": null,
          "old_line_content": "\t\treturn error(\"%s: unsupported file type\", path);",
          "new_line_content": "\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry(sha1, &e)) {",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\terror(\"cannot read sha1_file for %s\", sha1_to_hex(sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "unpack_entry",
          "new_api": null,
          "old_text": "unpack_entry(&e, type, size)",
          "new_text": null,
          "old_line_content": "\treturn unpack_entry(&e, type, size);",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "find_pack_entry",
          "new_api": null,
          "old_text": "find_pack_entry(sha1, &e)",
          "new_text": null,
          "old_line_content": "\tif (find_pack_entry(sha1, &e))",
          "new_line_content": "\tstruct pack_entry e;",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, type, size)",
          "new_text": null,
          "old_line_content": "\t\treturn read_packed_sha1(sha1, type, size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, mapsize)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(map, mapsize);",
          "new_line_content": "\tif (map) {",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(actual_sha1, sha1, 20)",
          "new_text": null,
          "old_line_content": "\tmemcpy(actual_sha1, sha1, 20);",
          "new_line_content": "\tunsigned char actual_sha1[20];",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "read_sha1_file",
          "new_api": null,
          "old_text": "read_sha1_file(actual_sha1, type, &isize)",
          "new_text": null,
          "old_line_content": "\t\tbuffer = read_sha1_file(actual_sha1, type, &isize);",
          "new_line_content": "\t\tconst char *ref_type = NULL;",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(type, required_type)",
          "new_text": null,
          "old_line_content": "\t\tif (!strcmp(type, required_type)) {",
          "new_line_content": "\t\tif (!buffer)",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(actual_sha1_return, actual_sha1, 20)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmemcpy(actual_sha1_return, actual_sha1, 20);",
          "new_line_content": "\t\t\t*size = isize;",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(type, \"commit\")",
          "new_text": null,
          "old_line_content": "\t\telse if (!strcmp(type, \"commit\"))",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tfree(buffer);",
          "new_line_content": "\t\t\tref_type = \"object \";",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(ref_type)",
          "new_text": null,
          "old_line_content": "\t\tref_length = strlen(ref_type);",
          "new_line_content": "\t\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "get_sha1_hex",
          "new_api": null,
          "old_text": "get_sha1_hex(buffer + ref_length, actual_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    get_sha1_hex(buffer + ref_length, actual_sha1)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "\t\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf((char *)hdr, \"%s %lu\", type, len)",
          "new_text": null,
          "old_line_content": "\t*hdrlen = sprintf((char *)hdr, \"%s %lu\", type, len)+1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "SHA1_Init",
          "new_api": null,
          "old_text": "SHA1_Init(&c)",
          "new_text": null,
          "old_line_content": "\tSHA1_Init(&c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, hdr, *hdrlen)",
          "new_text": null,
          "old_line_content": "\tSHA1_Update(&c, hdr, *hdrlen);",
          "new_line_content": "\t/* Sha1.. */",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tif (!link(tmpfile, filename))",
          "new_line_content": "\tint ret;",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(filename, '/')",
          "new_text": null,
          "old_line_content": "\t\tchar *dir = strrchr(filename, '/');",
          "new_line_content": "\tret = errno;",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "mkdir",
          "new_api": null,
          "old_text": "mkdir(filename, 0777)",
          "new_text": null,
          "old_line_content": "\t\t\tmkdir(filename, 0777);",
          "new_line_content": "\t\tif (dir) {",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "adjust_shared_perm",
          "new_api": null,
          "old_text": "adjust_shared_perm(filename)",
          "new_text": null,
          "old_line_content": "\t\t\tif (adjust_shared_perm(filename))",
          "new_line_content": "\t\t\t*dir = 0;",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "link",
          "new_api": null,
          "old_text": "link(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!link(tmpfile, filename))",
          "new_line_content": "\t\t\t\treturn -2;",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "link_temp_to_file",
          "new_api": null,
          "old_text": "link_temp_to_file(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\tint ret = link_temp_to_file(tmpfile, filename);",
          "new_line_content": "int move_temp_to_file(const char *tmpfile, char *filename)",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile, filename)",
          "new_text": null,
          "old_line_content": "\t\tif (!rename(tmpfile, filename))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(tmpfile)",
          "new_text": null,
          "old_line_content": "\tunlink(tmpfile);",
          "new_line_content": "\t\tret = errno;",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(ret)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"unable to write sha1 filename %s: %s\\n\", filename, strerror(ret));",
          "new_line_content": "\tif (ret) {",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "write_sha1_file_prepare",
          "new_api": null,
          "old_text": "write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen)",
          "new_text": null,
          "old_line_content": "\tfilename = write_sha1_file_prepare(buf, len, type, sha1, hdr, &hdrlen);",
          "new_line_content": "\t * it out into .git/objects/??/?{38} file.",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "has_sha1_file",
          "new_api": null,
          "old_text": "has_sha1_file(sha1)",
          "new_text": null,
          "old_line_content": "\tif (has_sha1_file(sha1))",
          "new_line_content": "\tif (returnsha1)",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(fd)",
          "new_text": null,
          "old_line_content": "\t\tclose(fd);",
          "new_line_content": "\t\t * need to uncompress the old file and check it. Later.",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"sha1 file %s: %s\\n\", filename, strerror(errno));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "deflateInit",
          "new_api": null,
          "old_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "new_line_content": "\t/* Set it up */",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\tstream.next_in = hdr;",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "new_line_content": "\tstream.next_in = buf;",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd, compressed, size)",
          "new_text": null,
          "old_line_content": "\tif (write(fd, compressed, size) != size)",
          "new_line_content": "\tsize = stream.total_out;",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"unable to write file\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"unable to write file\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "map_sha1_file_internal",
          "new_api": null,
          "old_text": "map_sha1_file_internal(sha1, &objsize)",
          "new_text": null,
          "old_line_content": "\tvoid *map = map_sha1_file_internal(sha1, &objsize);",
          "new_line_content": "\tunsigned long objsize;",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "read_packed_sha1",
          "new_api": null,
          "old_text": "read_packed_sha1(sha1, type, &len)",
          "new_text": null,
          "old_line_content": "\t\tunpacked = read_packed_sha1(sha1, type, &len);",
          "new_line_content": "\t\tint hdrlen;",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&stream, 0, sizeof(stream))",
          "new_text": null,
          "old_line_content": "\t\tmemset(&stream, 0, sizeof(stream));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "deflateInit",
          "new_api": null,
          "old_text": "deflateInit(&stream, Z_BEST_COMPRESSION)",
          "new_text": null,
          "old_line_content": "\t\tdeflateInit(&stream, Z_BEST_COMPRESSION);",
          "new_line_content": "\t\t/* Set it up */",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, 0)",
          "new_text": null,
          "old_line_content": "\t\twhile (deflate(&stream, 0) == Z_OK)",
          "new_line_content": "\t\tstream.next_in = (void *)hdr;",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&stream, Z_FINISH)",
          "new_text": null,
          "old_line_content": "\t\twhile (deflate(&stream, Z_FINISH) == Z_OK)",
          "new_line_content": "\t\tstream.next_in = unpacked;",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(unpacked)",
          "new_text": null,
          "old_line_content": "\t\tfree(unpacked);",
          "new_line_content": "\t\t\t/* nothing */;",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(fd, buf + posn, objsize - posn)",
          "new_text": null,
          "old_line_content": "\t\tsize = write(fd, buf + posn, objsize - posn);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"write closed\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, \"write closed\\n\");",
          "new_line_content": "\t\tif (size <= 0) {",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "munmap",
          "new_api": null,
          "old_text": "munmap(map, objsize)",
          "new_text": null,
          "old_line_content": "\t\tmunmap(map, objsize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "inflateInit",
          "new_api": null,
          "old_text": "inflateInit(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateInit(&stream);",
          "new_line_content": "\tdata_size = left - 20;",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "inflateEnd",
          "new_api": null,
          "old_text": "inflateEnd(&stream)",
          "new_text": null,
          "old_line_content": "\tinflateEnd(&stream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"delta data unpack failed\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"delta data unpack failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "find_pack_entry_one",
          "new_api": null,
          "old_text": "find_pack_entry_one(base_sha1, &base_ent, p)",
          "new_text": null,
          "old_line_content": "\tif (!find_pack_entry_one(base_sha1, &base_ent, p))",
          "new_line_content": "\tstream.next_out = delta_data;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to find delta-pack base object %s\",\n\t\t    sha1_to_hex(base_sha1))",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to find delta-pack base object %s\",",
          "new_line_content": "\tstream.avail_out = delta_size;",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(base_sha1)",
          "new_text": null,
          "old_line_content": "\t\t    sha1_to_hex(base_sha1));",
          "new_line_content": "\tif ((st != Z_STREAM_END) || stream.total_out != delta_size)",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "get_object_directory",
          "new_api": null,
          "old_text": "get_object_directory()",
          "new_text": null,
          "old_line_content": "\tsnprintf(tmpfile, sizeof(tmpfile), \"%s/obj_XXXXXX\", get_object_directory());",
          "new_line_content": "\tSHA_CTX c;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(\"failed to apply delta\")",
          "new_text": null,
          "old_line_content": "\t\tdie(\"failed to apply delta\");",
          "new_line_content": "\t\t\t     &result_size);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(delta_data)",
          "new_text": null,
          "old_line_content": "\tfree(delta_data);",
          "new_line_content": "\tif (!result)",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "sha1_to_hex",
          "new_api": null,
          "old_text": "sha1_to_hex(sha1)",
          "new_text": null,
          "old_line_content": "\t\t\t     tmpfile, sha1_to_hex(sha1));",
          "new_line_content": "\tif (local < 0)",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(size + 1)",
          "new_text": null,
          "old_line_content": "\tbuffer = xmalloc(size + 1);",
          "new_line_content": "\tunsigned char *buffer;",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "inflate",
          "new_api": null,
          "old_text": "inflate(&stream, Z_SYNC_FLUSH)",
          "new_text": null,
          "old_line_content": "\t\t\t\tret = inflate(&stream, Z_SYNC_FLUSH);",
          "new_line_content": "\t\t\t\tstream.next_out = discard;",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": "SHA1_Update",
          "new_api": null,
          "old_text": "SHA1_Update(&c, discard, sizeof(discard) -\n\t\t\t\t\t    stream.avail_out)",
          "new_text": null,
          "old_line_content": "\t\t\t\tSHA1_Update(&c, discard, sizeof(discard) -",
          "new_line_content": "\t\t\t\tstream.avail_out = sizeof(discard);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 65,
      "total_additions": 118,
      "total_deletions": 118,
      "total_api_changes": 301
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 18,
        "api_related_lines": 301,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          993,
          976,
          977,
          982,
          985
        ]
      }
    },
    "api_calls_before": 371,
    "api_calls_after": 371,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 8,
      "total_diff_lines": 37
    }
  }
}
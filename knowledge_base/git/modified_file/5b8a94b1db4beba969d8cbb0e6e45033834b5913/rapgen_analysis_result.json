{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/5b8a94b1db4beba969d8cbb0e6e45033834b5913",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/5b8a94b1db4beba969d8cbb0e6e45033834b5913/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/5b8a94b1db4beba969d8cbb0e6e45033834b5913/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/git/modified_file/5b8a94b1db4beba969d8cbb0e6e45033834b5913/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 194,
          "old_api": "strbuf_getline",
          "new_api": "strbuf_init",
          "old_text": "strbuf_getline(&buf, stdin, '\\n')",
          "new_text": "strbuf_init(&buf, 0)",
          "old_line_content": "\twhile (strbuf_getline(&buf, stdin, '\\n') != EOF) {",
          "new_line_content": "\tstrbuf_init(&buf, 0);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "batch_one_object",
          "new_api": "strbuf_getline",
          "old_text": "batch_one_object(buf.buf, print_contents)",
          "new_text": "strbuf_getline(&buf, stdin, '\\n')",
          "old_line_content": "\t\tint error = batch_one_object(buf.buf, print_contents);",
          "new_line_content": "\twhile (strbuf_getline(&buf, stdin, '\\n') != EOF) {",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "OPT_SET_INT",
          "new_api": "OPT_GROUP",
          "old_text": "OPT_SET_INT('t', NULL, &opt, \"show object type\", 't')",
          "new_text": "OPT_GROUP(\"<type> can be one of: blob, tree, commit, tag\")",
          "old_line_content": "\t\tOPT_SET_INT('t', NULL, &opt, \"show object type\", 't'),",
          "new_line_content": "\t\tOPT_GROUP(\"<type> can be one of: blob, tree, commit, tag\"),",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 224,
          "old_api": null,
          "new_api": "OPT_SET_INT",
          "old_text": null,
          "new_text": "OPT_SET_INT(0, \"batch-check\", &batch,\n\t\t\t    \"show info about objects feeded on stdin\",\n\t\t\t    BATCH_CHECK)",
          "old_line_content": "\t\t\t    \"show info about objects feeded on stdin\",",
          "new_line_content": "\t\tOPT_SET_INT(0, \"batch-check\", &batch,",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "cat_one_file",
          "old_text": null,
          "new_text": "cat_one_file(opt, exp_type, obj_name)",
          "old_line_content": "}",
          "new_line_content": "\treturn cat_one_file(opt, exp_type, obj_name);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "usage_with_options",
          "old_text": null,
          "new_text": "usage_with_options(cat_file_usage, options)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tusage_with_options(cat_file_usage, options);",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": null,
          "new_api": "OPT_END",
          "old_text": null,
          "new_text": "OPT_END()",
          "old_line_content": "\t};",
          "new_line_content": "\t\tOPT_END()",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "batch_one_object",
          "old_text": null,
          "new_text": "batch_one_object(buf.buf, print_contents)",
          "old_line_content": "\t\tif (error)",
          "new_line_content": "\t\tint error = batch_one_object(buf.buf, print_contents);",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "git_config",
          "old_text": null,
          "new_text": "git_config(git_default_config, NULL)",
          "old_line_content": "",
          "new_line_content": "\tgit_config(git_default_config, NULL);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "usage_with_options",
          "old_text": null,
          "new_text": "usage_with_options(cat_file_usage, options)",
          "old_line_content": "",
          "new_line_content": "\t\tusage_with_options(cat_file_usage, options);",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": null,
          "new_api": "parse_options",
          "old_text": null,
          "new_text": "parse_options(argc, argv, options, cat_file_usage, 0)",
          "old_line_content": "",
          "new_line_content": "\targc = parse_options(argc, argv, options, cat_file_usage, 0);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "usage_with_options",
          "old_text": null,
          "new_text": "usage_with_options(cat_file_usage, options)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tusage_with_options(cat_file_usage, options);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "usage_with_options",
          "old_text": null,
          "new_text": "usage_with_options(cat_file_usage, options)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tusage_with_options(cat_file_usage, options);",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(contents)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tfree(contents);",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "OPT_SET_INT",
          "old_text": null,
          "new_text": "OPT_SET_INT('e', NULL, &opt,\n\t\t\t    \"exit with zero when there's no error\", 'e')",
          "old_line_content": "\t\t\t    \"exit with zero when there's no error\", 'e'),",
          "new_line_content": "\t\tOPT_SET_INT('e', NULL, &opt,",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "OPT_SET_INT",
          "old_text": null,
          "new_text": "OPT_SET_INT(0, \"batch\", &batch,\n\t\t\t    \"show info and content of objects feeded on stdin\", BATCH)",
          "old_line_content": "\t\t\t    \"show info and content of objects feeded on stdin\", BATCH),",
          "new_line_content": "\t\tOPT_SET_INT(0, \"batch\", &batch,",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": null,
          "new_api": "batch_objects",
          "old_text": null,
          "new_text": "batch_objects(batch)",
          "old_line_content": "",
          "new_line_content": "\t\treturn batch_objects(batch);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 256,
          "old_api": "cat_one_file",
          "new_api": null,
          "old_text": "cat_one_file(opt, exp_type, obj_name)",
          "new_text": null,
          "old_line_content": "\treturn cat_one_file(opt, exp_type, obj_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "strbuf_init",
          "new_api": null,
          "old_text": "strbuf_init(&buf, 0)",
          "new_text": null,
          "old_line_content": "\tstrbuf_init(&buf, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 226,
          "old_api": "OPT_END",
          "new_api": null,
          "old_text": "OPT_END()",
          "new_text": null,
          "old_line_content": "\t\tOPT_END()",
          "new_line_content": "\t\t\t    BATCH_CHECK),",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": "git_config",
          "new_api": null,
          "old_text": "git_config(git_default_config, NULL)",
          "new_text": null,
          "old_line_content": "\tgit_config(git_default_config, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "usage_with_options",
          "new_api": null,
          "old_text": "usage_with_options(cat_file_usage, options)",
          "new_text": null,
          "old_line_content": "\t\tusage_with_options(cat_file_usage, options);",
          "new_line_content": "\tif (argc != 3 && argc != 2)",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "parse_options",
          "new_api": null,
          "old_text": "parse_options(argc, argv, options, cat_file_usage, 0)",
          "new_text": null,
          "old_line_content": "\targc = parse_options(argc, argv, options, cat_file_usage, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "usage_with_options",
          "new_api": null,
          "old_text": "usage_with_options(cat_file_usage, options)",
          "new_text": null,
          "old_line_content": "\t\t\tusage_with_options(cat_file_usage, options);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "OPT_GROUP",
          "new_api": null,
          "old_text": "OPT_GROUP(\"<type> can be one of: blob, tree, commit, tag\")",
          "new_text": null,
          "old_line_content": "\t\tOPT_GROUP(\"<type> can be one of: blob, tree, commit, tag\"),",
          "new_line_content": "\tconst struct option options[] = {",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "usage_with_options",
          "new_api": null,
          "old_text": "usage_with_options(cat_file_usage, options)",
          "new_text": null,
          "old_line_content": "\t\tusage_with_options(cat_file_usage, options);",
          "new_line_content": "\tif (batch && (opt || argc)) {",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "usage_with_options",
          "new_api": null,
          "old_text": "usage_with_options(cat_file_usage, options)",
          "new_text": null,
          "old_line_content": "\t\t\tusage_with_options(cat_file_usage, options);",
          "new_line_content": "\t\t} else",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "OPT_SET_INT",
          "new_api": null,
          "old_text": "OPT_SET_INT('p', NULL, &opt, \"pretty-print object's content\", 'p')",
          "new_text": null,
          "old_line_content": "\t\tOPT_SET_INT('p', NULL, &opt, \"pretty-print object's content\", 'p'),",
          "new_line_content": "\t\t\t    \"exit with zero when there's no error\", 'e'),",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "batch_objects",
          "new_api": null,
          "old_text": "batch_objects(batch)",
          "new_text": null,
          "old_line_content": "\t\treturn batch_objects(batch);",
          "new_line_content": "\tif (batch)",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "OPT_SET_INT",
          "new_api": null,
          "old_text": "OPT_SET_INT(0, \"batch-check\", &batch,\n\t\t\t    \"show info about objects feeded on stdin\",\n\t\t\t    BATCH_CHECK)",
          "new_text": null,
          "old_line_content": "\t\tOPT_SET_INT(0, \"batch-check\", &batch,",
          "new_line_content": "\t\t\t    \"show info and content of objects feeded on stdin\", BATCH),",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 14,
      "total_deletions": 13,
      "total_api_changes": 30
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 30,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 62,
    "api_calls_after": 63,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 0,
      "total_diff_lines": 13
    }
  }
}
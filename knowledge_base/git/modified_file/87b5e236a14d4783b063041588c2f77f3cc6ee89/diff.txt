diff --git a/sha1_file.c b/sha1_file.c
index bd5f82e664..fbb73f557a 100644
--- a/sha1_file.c
+++ b/sha1_file.c
@@ -2971,6 +2971,9 @@ int sha1_object_info_extended(const unsigned char *sha1, struct object_info *oi,
 				    lookup_replace_object(sha1) :
 				    sha1;
 
+	if (is_null_sha1(real))
+		return -1;
+
 	if (!oi)
 		oi = &blank_oi;
 
